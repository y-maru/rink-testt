bplist00Óƒ_WebMainResource_WebSubframeArchives_WebSubresourcesÕ	
_WebResourceTextEncodingName_WebResourceFrameName^WebResourceURL_WebResourceData_WebResourceMIMETypeUUTF-8[MZh8xylvfk@_2http://www.welluneednt.com/entry/2015/03/24/113000O•v<!DOCTYPE html><html lang="ja" data-avail-langs="ja en" data-page="entry" data-static-domain="https://blog.st-hatena.com" data-blog="welluneednt.hatenablog.com" data-blogs-uri-base="http://www.welluneednt.com" data-globalheader-color="b" data-globalheader-type="pc" data-author="teamennoshita" data-version="f95a219773244f14c2c322979e39f67b" data-blog-comments-top-is-new="" data-device="pc" data-hide-header="1" data-admin-domain="http://blog.hatena.ne.jp" data-brand="trial" data-has-touch-view="1" data-no-suggest-touch-view="1" itemscope="" itemtype="http://schema.org/Article" class=" overthrow-enabled"><head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# article: http://ogp.me/ns/article#"><script type="text/javascript" async="" src="https://www.gstatic.com/recaptcha/api2/r20150429132001/recaptcha__ja.js"></script>
    
    
    

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=7; IE=9; IE=10; IE=11">
    <title>ãµã£ã¨ã“ã“ã‚ãŒè»½ããªã‚‹ä¸€è¨€ - æ‘ä¸Šã•ã‚“ã®ã¨ã“ã‚ï¼æ‘ä¸Šæ˜¥æ¨¹ æœŸé–“é™å®šå…¬å¼ã‚µã‚¤ãƒˆ</title>

    

    
      <link rel="canonical" href="http://www.welluneednt.com/entry/2015/03/24/113000">
    

    <meta itemprop="name" content="ãµã£ã¨ã“ã“ã‚ãŒè»½ããªã‚‹ä¸€è¨€ - æ‘ä¸Šã•ã‚“ã®ã¨ã“ã‚ï¼æ‘ä¸Šæ˜¥æ¨¹ æœŸé–“é™å®šå…¬å¼ã‚µã‚¤ãƒˆ">
    
      <meta itemprop="image" content="http://cdn.mogile.archive.st-hatena.com/v1/image/teamennoshita/297795337419957004.png">
    

    <meta property="og:title" content="ãµã£ã¨ã“ã“ã‚ãŒè»½ããªã‚‹ä¸€è¨€ - æ‘ä¸Šã•ã‚“ã®ã¨ã“ã‚ï¼æ‘ä¸Šæ˜¥æ¨¹ æœŸé–“é™å®šå…¬å¼ã‚µã‚¤ãƒˆ">
    <meta property="og:type" content="article">
    <meta property="og:url" content="http://www.welluneednt.com/entry/2015/03/24/113000">
    
      
      
      
      <meta property="og:image" content="http://cdn.image.st-hatena.com/image/scale/741470caca0a9ac3624467d8d709e77dff91d2b2/backend=imager;enlarge=0;height=1000;version=1;width=1200/http%3A%2F%2Fcdn.mogile.archive.st-hatena.com%2Fv1%2Fimage%2Fteamennoshita%2F297795337419957004.png">
    
        <meta property="og:description" content="ã“ã‚“ã«ã¡ã¯ã€‚æ‘ä¸Šã•ã‚“ã®æœ¬ã¯ãšã£ã¨èª­ã¿ç¶šã‘ã¦ãŠã‚Šã€èª­ã‚€ãŸã³ã«ã€Œè‡ªåˆ†ã¯æœ¬ã‚’èª­ã‚€ã®ãŒå¥½ãã§ã‚ˆã‹ã£ãŸãªã‚ã€ã¨æ€ã£ã¦ã„ã¾ã™ã€‚ã•ã¦ã€ç§ã¯æ˜¨å¹´å¤ã«åˆã‚ã¦ã®èµ¤ã¡ã‚ƒã‚“ã‚’å‡ºç”£ã—ã¾ã—ãŸãŒã€èµ¤ã¡ã‚ƒã‚“ã¯ãƒ€ã‚¦ãƒ³ç—‡ã§ã—ãŸã€‚äººç”Ÿãªã«ãŒèµ·ã“ã‚‹ã‹æœ¬å½“ã«ã‚ã‹ã‚‰ãªã„ã‚‚ã®ã ã¨ãªã‹ãªã‹è½ã¡è¾¼ã¿ã¾ã—ãŸãŒã€ã™ã“ã—ãšã¤æŠ˜ã‚Šåˆã„ã‚’ã¤ã‘ã€èµ¤ã¡ã‚ƒã‚“ã¨å¤«ã¨æ¥½ã—ãæš®ã‚‰ã—ã¤ã¤ã‚ã‚Šã¾ã™ã€‚ã¨ã¯ã„ãˆã€æ™‚ãŠã‚Šã“ã®å…ˆã‚’è€ƒãˆã¦ã¾ã£é»’ãªä¸å®‰ã«è¥²ã‚ã‚Œã¾ã™ã€‚ãã‚“ãªæ™‚ã€ãªã«ã‹ãµã£ã¨ã“ã“ã‚ãŒè»½ããªã‚‹ä¸€è¨€ã‚’ã„ãŸã ã‘ã‚‹ã¨å¹¸ã„ã§ã™ã€‚ ï¼ˆã•ãã‚‰ã®è±†å¤§ç¦ã€å¥³æ€§ã€41æ­³ã€ç”£ä¼‘ä¸­ã®ç·¨é›†è€…ï¼‰ ã„ã¤ã‚‚åƒ•ã®æœ¬ã‚’èª­ã‚“ã§ã„ãŸã ã„ã¦ã€ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚å¿ƒãŒè»½ããªã‚‹ã‚ˆã†ãªã²ã¨ã“ã¨ã€ã¨è¨€ã‚ã‚Œã‚‹ã¨ã€åƒ•ã¨â€¦">
    <meta property="og:site_name" content="http://www.welluneednt.com/">
      <meta property="article:published_time" content="1427164200">

        <meta property="article:tag" content="æ‘ä¸Šã•ã‚“ã«ãŠã‚Šã„ã£ã¦è³ªå•ãƒ»ç›¸è«‡ã—ãŸã„ã“ã¨">
        <meta property="article:tag" content="èª­è€…â†”æ‘ä¸Šæ˜¥æ¨¹">        <meta name="twitter:card" content="summary">      <meta name="twitter:title" content="ãµã£ã¨ã“ã“ã‚ãŒè»½ããªã‚‹ä¸€è¨€ - æ‘ä¸Šã•ã‚“ã®ã¨ã“ã‚ï¼æ‘ä¸Šæ˜¥æ¨¹ æœŸé–“é™å®šå…¬å¼ã‚µã‚¤ãƒˆ">        <meta name="twitter:description" content="ã“ã‚“ã«ã¡ã¯ã€‚æ‘ä¸Šã•ã‚“ã®æœ¬ã¯ãšã£ã¨èª­ã¿ç¶šã‘ã¦ãŠã‚Šã€èª­ã‚€ãŸã³ã«ã€Œè‡ªåˆ†ã¯æœ¬ã‚’èª­ã‚€ã®ãŒå¥½ãã§ã‚ˆã‹ã£ãŸãªã‚ã€ã¨æ€ã£ã¦ã„ã¾ã™ã€‚ã•ã¦ã€ç§ã¯æ˜¨å¹´å¤ã«åˆã‚ã¦ã®èµ¤ã¡ã‚ƒã‚“ã‚’å‡ºç”£ã—ã¾ã—ãŸãŒã€èµ¤ã¡ã‚ƒã‚“ã¯ãƒ€ã‚¦ãƒ³ç—‡ã§ã—ãŸã€‚äººç”Ÿãªã«ãŒèµ·ã“ã‚‹ã‹æœ¬å½“ã«ã‚ã‹ã‚‰ãªã„ã‚‚ã®ã ã¨ãªã‹ãªã‹è½ã¡è¾¼ã¿ã¾ã—ãŸãŒã€ã™ã“ã—ãšã¤æŠ˜ã‚Šåˆã„ã‚’ã¤ã‘ã€èµ¤ã¡ã‚ƒã‚“ã¨å¤«ã¨æ¥½ã—ãæš®ã‚‰ã—ã¤ã¤ã‚ã‚Šâ€¦">      <meta name="twitter:app:name:iphone" content="ã¯ã¦ãªãƒ–ãƒ­ã‚°ã‚¢ãƒ—ãƒª">
      <meta name="twitter:app:id:iphone" content="583299321">
      <meta name="twitter:app:url:iphone" content="hatenablog:///open?uri=http%3A%2F%2Fwww.welluneednt.com%2Fentry%2F2015%2F03%2F24%2F113000">
        <meta name="description" content="ã“ã‚“ã«ã¡ã¯ã€‚æ‘ä¸Šã•ã‚“ã®æœ¬ã¯ãšã£ã¨èª­ã¿ç¶šã‘ã¦ãŠã‚Šã€èª­ã‚€ãŸã³ã«ã€Œè‡ªåˆ†ã¯æœ¬ã‚’èª­ã‚€ã®ãŒå¥½ãã§ã‚ˆã‹ã£ãŸãªã‚ã€ã¨æ€ã£ã¦ã„ã¾ã™ã€‚ã•ã¦ã€ç§ã¯æ˜¨å¹´å¤ã«åˆã‚ã¦ã®èµ¤ã¡ã‚ƒã‚“ã‚’å‡ºç”£ã—ã¾ã—ãŸãŒã€èµ¤ã¡ã‚ƒã‚“ã¯ãƒ€ã‚¦ãƒ³ç—‡ã§ã—ãŸã€‚äººç”Ÿãªã«ãŒèµ·ã“ã‚‹ã‹æœ¬å½“ã«ã‚ã‹ã‚‰ãªã„ã‚‚ã®ã ã¨ãªã‹ãªã‹è½ã¡è¾¼ã¿ã¾ã—ãŸãŒã€ã™ã“ã—ãšã¤æŠ˜ã‚Šåˆã„ã‚’ã¤ã‘ã€èµ¤ã¡ã‚ƒã‚“ã¨å¤«ã¨æ¥½ã—ãæš®ã‚‰ã—ã¤ã¤ã‚ã‚Šâ€¦">
    
<script type="text/javascript" async="" src="http://www.google-analytics.com/ga.js"></script><script id="facebook-jssdk" src="//connect.facebook.net/ja_JP/sdk.js#xfbml=1&amp;appId=719729204785177&amp;version=v2.0"></script><script src="https://apis.google.com/_/scs/apps-static/_/js/k=oz.gapi.ja.GaAqtE9vSt8.O/m=plusone/rt=j/sv=1/d=1/ed=1/am=IQ/rs=AGLTcCObdvcYYb_30dT3f0o1AM2Q88jrEw/t=zcms/cb=gapi.loaded_0" async=""></script><script async="" src="//www.google-analytics.com/analytics.js"></script><script async="" src="//www.google-analytics.com/analytics.js"></script><script type="text/javascript">
// <!--

if (~navigator.userAgent.indexOf('Mac OS X')) {
  document.write('<style type="text/css">html, body { font-family: \x27Helvetica\x27, \x27Arial\x27, \x27ãƒ’ãƒ©ã‚®ãƒè§’ã‚´ Pro W3\x27, \x27Hiragino Kaku Gothic Pro\x27, sans-serif; } </style>');
} else {
  document.write('<style type="text/css">html, body { font-family: \x27Helvetica\x27, \x27Arial\x27, \x27ãƒ¡ã‚¤ãƒªã‚ª\x27, \x27Meiryo\x27, \x27MS PGothic\x27, sans-serif; } </style>');
}

// -->
</script><style type="text/css">html, body { font-family: 'Helvetica', 'Arial', 'ãƒ’ãƒ©ã‚®ãƒè§’ã‚´ Pro W3', 'Hiragino Kaku Gothic Pro', sans-serif; } </style>

<!--[if lt IE 9]>
<script src="https://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->

<!--[if IE]>
<script type="text/javascript" src="https://blog.st-hatena.com/js/vendor/excanvas/excanvas.js?version=f95a219773244f14c2c322979e39f67b"></script>
<![endif]-->


    <link rel="shortcut icon" href="http://cdn.image.st-hatena.com/image/favicon/93c5f4580beb5f1820b77d45bc6c83f8afc9004a/version=1/http%3A%2F%2Fcdn.mogile.archive.st-hatena.com%2Fv1%2Fimage%2Fteamennoshita%2F302456871331422074.png">
    <link rel="icon" sizes="192x192" href="http://cdn.image.st-hatena.com/image/square/d87cd7e65013650a084b38b639afa13f2090b3bb/backend=imagemagick;height=192;version=1;width=192/http%3A%2F%2Fcdn.mogile.archive.st-hatena.com%2Fv1%2Fimage%2Fteamennoshita%2F302456871331422074.png">
    <link rel="alternate" type="application/atom+xml" title="Atom" href="http://www.welluneednt.com/feed">
    <link rel="alternate" type="application/rss+xml" title="RSS2.0" href="http://www.welluneednt.com/rss">
    <link rel="alternate" type="application/json+oembed" href="http://hatenablog.com/oembed?url=http%3A%2F%2Fwww.welluneednt.com%2Fentry%2F2015%2F03%2F24%2F113000&amp;format=json" title="oEmbed Profile of ãµã£ã¨ã“ã“ã‚ãŒè»½ããªã‚‹ä¸€è¨€">
    <link rel="alternate" type="text/xml+oembed" href="http://hatenablog.com/oembed?url=http%3A%2F%2Fwww.welluneednt.com%2Fentry%2F2015%2F03%2F24%2F113000&amp;format=xml" title="oEmbed Profile of ãµã£ã¨ã“ã“ã‚ãŒè»½ããªã‚‹ä¸€è¨€">
      <link rel="author" href="http://www.hatena.ne.jp/teamennoshita/">

      <link rel="stylesheet" type="text/css" href="https://blog.st-hatena.com/.shared.css:f95a219773244f14c2c322979e39f67b:/css/theme/base.css,/css/prettify.css,/css/globalheader.css?version=f95a219773244f14c2c322979e39f67b">
      <link rel="stylesheet" type="text/css" href="http://blog.hatena.ne.jp/-/blog_style/8454420450079512669/0b3fc607220da770b62932359e9cae488482b6e6">    <script>    </script>

    
    <style>
      div#google_afc_user,
      div#google_afc_user_container_0,
      div#google_afc_user_container_1,
      div#google_afc_user_container_2,
      div#google_afc_user_container_3,
      div#google_afc_user_container_4,
      div#google_afc_user_container_5,
      div.google_afc_image,
      div.google_afc_blocklink {
          display: block !important;
      }
    </style>

    <meta name="viewport" content="width=device-width">
<meta name="robots" content="noarchive">
  <style type="text/css">.fb_hidden{position:absolute;top:-10000px;z-index:10001}.fb_invisible{display:none}.fb_reset{background:none;border:0;border-spacing:0;color:#000;cursor:auto;direction:ltr;font-family:"lucida grande", tahoma, verdana, arial, "hiragino kaku gothic pro",meiryo,"ms pgothic",sans-serif;font-size:11px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:1;margin:0;overflow:visible;padding:0;text-align:left;text-decoration:none;text-indent:0;text-shadow:none;text-transform:none;visibility:visible;white-space:normal;word-spacing:normal}.fb_reset>div{overflow:hidden}.fb_link img{border:none}
.fb_dialog{background:rgba(82, 82, 82, .7);position:absolute;top:-10000px;z-index:10001}.fb_reset .fb_dialog_legacy{overflow:visible}.fb_dialog_advanced{padding:10px;-moz-border-radius:8px;-webkit-border-radius:8px;border-radius:8px}.fb_dialog_content{background:#fff;color:#333}.fb_dialog_close_icon{background:url(http://static.ak.fbcdn.net/rsrc.php/v2/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 0 transparent;_background-image:url(http://static.ak.fbcdn.net/rsrc.php/v2/yL/r/s816eWC-2sl.gif);cursor:pointer;display:block;height:15px;position:absolute;right:18px;top:17px;width:15px}.fb_dialog_mobile .fb_dialog_close_icon{top:5px;left:5px;right:auto}.fb_dialog_padding{background-color:transparent;position:absolute;width:1px;z-index:-1}.fb_dialog_close_icon:hover{background:url(http://static.ak.fbcdn.net/rsrc.php/v2/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 -15px transparent;_background-image:url(http://static.ak.fbcdn.net/rsrc.php/v2/yL/r/s816eWC-2sl.gif)}.fb_dialog_close_icon:active{background:url(http://static.ak.fbcdn.net/rsrc.php/v2/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 -30px transparent;_background-image:url(http://static.ak.fbcdn.net/rsrc.php/v2/yL/r/s816eWC-2sl.gif)}.fb_dialog_loader{background-color:#f6f7f8;border:1px solid #606060;font-size:24px;padding:20px}.fb_dialog_top_left,.fb_dialog_top_right,.fb_dialog_bottom_left,.fb_dialog_bottom_right{height:10px;width:10px;overflow:hidden;position:absolute}.fb_dialog_top_left{background:url(http://static.ak.fbcdn.net/rsrc.php/v2/ye/r/8YeTNIlTZjm.png) no-repeat 0 0;left:-10px;top:-10px}.fb_dialog_top_right{background:url(http://static.ak.fbcdn.net/rsrc.php/v2/ye/r/8YeTNIlTZjm.png) no-repeat 0 -10px;right:-10px;top:-10px}.fb_dialog_bottom_left{background:url(http://static.ak.fbcdn.net/rsrc.php/v2/ye/r/8YeTNIlTZjm.png) no-repeat 0 -20px;bottom:-10px;left:-10px}.fb_dialog_bottom_right{background:url(http://static.ak.fbcdn.net/rsrc.php/v2/ye/r/8YeTNIlTZjm.png) no-repeat 0 -30px;right:-10px;bottom:-10px}.fb_dialog_vert_left,.fb_dialog_vert_right,.fb_dialog_horiz_top,.fb_dialog_horiz_bottom{position:absolute;background:#525252;filter:alpha(opacity=70);opacity:.7}.fb_dialog_vert_left,.fb_dialog_vert_right{width:10px;height:100%}.fb_dialog_vert_left{margin-left:-10px}.fb_dialog_vert_right{right:0;margin-right:-10px}.fb_dialog_horiz_top,.fb_dialog_horiz_bottom{width:100%;height:10px}.fb_dialog_horiz_top{margin-top:-10px}.fb_dialog_horiz_bottom{bottom:0;margin-bottom:-10px}.fb_dialog_iframe{line-height:0}.fb_dialog_content .dialog_title{background:#6d84b4;border:1px solid #3a5795;color:#fff;font-size:14px;font-weight:bold;margin:0}.fb_dialog_content .dialog_title>span{background:url(http://static.ak.fbcdn.net/rsrc.php/v2/yd/r/Cou7n-nqK52.gif) no-repeat 5px 50%;float:left;padding:5px 0 7px 26px}body.fb_hidden{-webkit-transform:none;height:100%;margin:0;overflow:visible;position:absolute;top:-10000px;left:0;width:100%}.fb_dialog.fb_dialog_mobile.loading{background:url(http://static.ak.fbcdn.net/rsrc.php/v2/ya/r/3rhSv5V8j3o.gif) white no-repeat 50% 50%;min-height:100%;min-width:100%;overflow:hidden;position:absolute;top:0;z-index:10001}.fb_dialog.fb_dialog_mobile.loading.centered{max-height:590px;min-height:590px;max-width:500px;min-width:500px}#fb-root #fb_dialog_ipad_overlay{background:rgba(0, 0, 0, .45);position:absolute;left:0;top:0;width:100%;min-height:100%;z-index:10000}#fb-root #fb_dialog_ipad_overlay.hidden{display:none}.fb_dialog.fb_dialog_mobile.loading iframe{visibility:hidden}.fb_dialog_content .dialog_header{-webkit-box-shadow:white 0 1px 1px -1px inset;background:-webkit-gradient(linear, 0% 0%, 0% 100%, from(#738ABA), to(#2C4987));border-bottom:1px solid;border-color:#1d4088;color:#fff;font:14px Helvetica, sans-serif;font-weight:bold;text-overflow:ellipsis;text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0;vertical-align:middle;white-space:nowrap}.fb_dialog_content .dialog_header table{-webkit-font-smoothing:subpixel-antialiased;height:43px;width:100%}.fb_dialog_content .dialog_header td.header_left{font-size:12px;padding-left:5px;vertical-align:middle;width:60px}.fb_dialog_content .dialog_header td.header_right{font-size:12px;padding-right:5px;vertical-align:middle;width:60px}.fb_dialog_content .touchable_button{background:-webkit-gradient(linear, 0% 0%, 0% 100%, from(#4966A6), color-stop(.5, #355492), to(#2A4887));border:1px solid #2f477a;-webkit-background-clip:padding-box;-webkit-border-radius:3px;-webkit-box-shadow:rgba(0, 0, 0, .117188) 0 1px 1px inset, rgba(255, 255, 255, .167969) 0 1px 0;display:inline-block;margin-top:3px;max-width:85px;line-height:18px;padding:4px 12px;position:relative}.fb_dialog_content .dialog_header .touchable_button input{border:none;background:none;color:#fff;font:12px Helvetica, sans-serif;font-weight:bold;margin:2px -12px;padding:2px 6px 3px 6px;text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0}.fb_dialog_content .dialog_header .header_center{color:#fff;font-size:16px;font-weight:bold;line-height:18px;text-align:center;vertical-align:middle}.fb_dialog_content .dialog_content{background:url(http://static.ak.fbcdn.net/rsrc.php/v2/y9/r/jKEcVPZFk-2.gif) no-repeat 50% 50%;border:1px solid #555;border-bottom:0;border-top:0;height:150px}.fb_dialog_content .dialog_footer{background:#f6f7f8;border:1px solid #555;border-top-color:#ccc;height:40px}#fb_dialog_loader_close{float:left}.fb_dialog.fb_dialog_mobile .fb_dialog_close_button{text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0}.fb_dialog.fb_dialog_mobile .fb_dialog_close_icon{visibility:hidden}
.fb_iframe_widget{display:inline-block;position:relative}.fb_iframe_widget span{display:inline-block;position:relative;text-align:justify}.fb_iframe_widget iframe{position:absolute}.fb_iframe_widget_fluid_desktop,.fb_iframe_widget_fluid_desktop span,.fb_iframe_widget_fluid_desktop iframe{max-width:100%}.fb_iframe_widget_fluid_desktop iframe{min-width:220px;position:relative}.fb_iframe_widget_lift{z-index:1}.fb_hide_iframes iframe{position:relative;left:-10000px}.fb_iframe_widget_loader{position:relative;display:inline-block}.fb_iframe_widget_fluid{display:inline}.fb_iframe_widget_fluid span{width:100%}.fb_iframe_widget_loader iframe{min-height:32px;z-index:2;zoom:1}.fb_iframe_widget_loader .FB_Loader{background:url(http://static.ak.fbcdn.net/rsrc.php/v2/y9/r/jKEcVPZFk-2.gif) no-repeat;height:32px;width:32px;margin-left:-16px;position:absolute;left:50%;z-index:4}</style></head>

  <body class="page-entry  enable-top-editarea enable-bottom-editarea   category-æ‘ä¸Šã•ã‚“ã«ãŠã‚Šã„ã£ã¦è³ªå•ãƒ»ç›¸è«‡ã—ãŸã„ã“ã¨ category-èª­è€…â†”æ‘ä¸Šæ˜¥æ¨¹ globalheader-off " data-twttr-rendered="true">
    <!-- Google Universal Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-29716941-6', 'auto', {'name': 'HatenaBlogTracker'});
  ga('HatenaBlogTracker.require', 'displayfeatures');
  ga('HatenaBlogTracker.send', 'pageview');

</script>
<!-- End Google Universal Analytics -->

    
    <div id="header-container">
     <div id="sp-suggest" style="display: none;"><a id="sp-suggest-link" href="#">ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³ç”¨ã®è¡¨ç¤ºã§è¦‹ã‚‹</a></div>
    </div>

    <div class="select_star_button_container" style="display: none;">
      <img src="https://blog.st-hatena.com/images/theme/hatena-star-quote-box.png?version=f95a219773244f14c2c322979e39f67b" title="å¼•ç”¨ã‚¹ã‚¿ãƒ¼ã‚’ã¤ã‘ã‚‹" class="select_star_button">
      <img src="https://blog.st-hatena.com/images/theme/hatena-star-quote-star.png?version=f95a219773244f14c2c322979e39f67b" title="å¼•ç”¨ã‚¹ã‚¿ãƒ¼ã‚’ã¤ã‘ã‚‹" class="select_star_button select_star_star">
    </div>

    <div class="message-box" id="select-star-message-box" style="display: none;">
      ã‚¹ã‚¿ãƒ¼ã‚’ã¤ã‘ã¾ã—ãŸ
    </div>

    <div id="globalheader-container" style="display: none">
  <iframe id="globalheader" height="37" frameborder="0" allowtransparency="true"></iframe>
</div>


    
    <div id="hidden-subscribe-button">
      <div class="hatena-follow-button-box btn-subscribe js-hatena-follow-button-box">

  <a href="#" class="hatena-follow-button js-hatena-follow-button unsubscribing">
    <span class="subscribing">
      <span class="foreground">è³¼èª­ä¸­ã§ã™</span>
      <span class="background">èª­è€…ã‚’ã‚„ã‚ã‚‹</span>
    </span>
    <span class="unsubscribing" data-track-name="profile-widget-subscribe-button" data-track-once="">
      <span class="foreground">èª­è€…ã«ãªã‚‹</span>
      <span class="background">èª­è€…ã«ãªã‚‹</span>
    </span>
  </a>
  <div class="subscription-count-box js-subscription-count-box" style="display: block;">
    <i></i>
    <u></u>
    <span class="subscription-count js-subscription-count">5</span>
  </div>
</div>

    </div>

    <div id="container">
      <div id="container-inner">
        <header id="blog-title" data-brand="hatenablog">
  <div id="blog-title-inner">
    <h1 id="title"><a href="http://www.welluneednt.com/">æ‘ä¸Šã•ã‚“ã®ã¨ã“ã‚ï¼æ‘ä¸Šæ˜¥æ¨¹ æœŸé–“é™å®šå…¬å¼ã‚µã‚¤ãƒˆ</a></h1>
    
  </div>
</header>

        
          <div id="top-editarea">
            <nav>
    <ul>
        <li class="nav-top"><a href="/">ãƒˆãƒƒãƒ—</a></li><li class="nav-archive"><a href="/archive/category/èª­è€…â†”æ‘ä¸Šæ˜¥æ¨¹">èª­è€…â†”æ‘ä¸Šæ˜¥æ¨¹</a></li><li class="frommurakami"><a href="/archive/category/æ‘ä¸Šæ˜¥æ¨¹ã‚ˆã‚Š">æ‘ä¸Šæ˜¥æ¨¹ã‚ˆã‚Š</a></li><li class="fromadmin"><a href="/archive/category/ç®¡ç†äººã‚ˆã‚Š">ç®¡ç†äººã‚ˆã‚Š</a></li><li class="qna"><a href="/entry/houserules">ãƒã‚¦ã‚¹ãƒ«ãƒ¼ãƒ«</a></li>
    </ul>
</nav>
          </div>
        
        
        



<div id="content" class="hfeed">
  <div id="content-inner">
    <div id="wrapper">
      <div id="main">
        <div id="main-inner">
          
            
            <!-- google_ad_section_start -->
            <!-- rakuten_ad_target_begin -->
            
              
                <article class="entry hentry js-entry-article date-first autopagerize_page_element chars-800 words-100 mode-hatena entry-odd" id="entry-8454420450089128617" data-keyword-campaign="" data-uuid="8454420450089128617">
  <div class="entry-inner">
    <header class="entry-header">
      <div class="date first">
        <a href="http://www.welluneednt.com/entries/2015/03/24" rel="nofollow">
          <time pubdate="" datetime="2015-03-24T02:30:00Z" title="2015-03-24T02:30:00Z">
            <span class="date-year">2015</span><span class="hyphen">-</span><span class="date-month">03</span><span class="hyphen">-</span><span class="date-day">24</span>
          </time>
        </a>
      </div>
      <h1 class="entry-title">
        <a href="http://www.welluneednt.com/entry/2015/03/24/113000" class="entry-title-link bookmark">ãµã£ã¨ã“ã“ã‚ãŒè»½ããªã‚‹ä¸€è¨€</a>
      </h1>
      
      
        <div class="categories">
          
          <a href="http://www.welluneednt.com/archive/category/%E6%9D%91%E4%B8%8A%E3%81%95%E3%82%93%E3%81%AB%E3%81%8A%E3%82%8A%E3%81%84%E3%81%A3%E3%81%A6%E8%B3%AA%E5%95%8F%E3%83%BB%E7%9B%B8%E8%AB%87%E3%81%97%E3%81%9F%E3%81%84%E3%81%93%E3%81%A8">æ‘ä¸Šã•ã‚“ã«ãŠã‚Šã„ã£ã¦è³ªå•ãƒ»ç›¸è«‡ã—ãŸã„ã“ã¨</a>
          
          <a href="http://www.welluneednt.com/archive/category/%E8%AA%AD%E8%80%85%E2%86%94%E6%9D%91%E4%B8%8A%E6%98%A5%E6%A8%B9">èª­è€…â†”æ‘ä¸Šæ˜¥æ¨¹</a>
          
        </div>
      
      

      
    </header>
    <div class="entry-content">

      
        
    <blockquote>
        <p>ã“ã‚“ã«ã¡ã¯ã€‚æ‘ä¸Šã•ã‚“ã®æœ¬ã¯ãšã£ã¨èª­ã¿ç¶šã‘ã¦ãŠã‚Šã€èª­ã‚€ãŸã³ã«ã€Œè‡ªåˆ†ã¯æœ¬ã‚’èª­ã‚€ã®ãŒå¥½ãã§ã‚ˆã‹ã£ãŸãªã‚ã€ã¨æ€ã£ã¦ã„ã¾ã™ã€‚</p><p>ã•ã¦ã€ç§ã¯æ˜¨å¹´å¤ã«åˆã‚ã¦ã®èµ¤ã¡ã‚ƒã‚“ã‚’å‡ºç”£ã—ã¾ã—ãŸãŒã€èµ¤ã¡ã‚ƒã‚“ã¯ãƒ€ã‚¦ãƒ³ç—‡ã§ã—ãŸã€‚äººç”Ÿãªã«ãŒèµ·ã“ã‚‹ã‹æœ¬å½“ã«ã‚ã‹ã‚‰ãªã„ã‚‚ã®ã ã¨ãªã‹ãªã‹è½ã¡è¾¼ã¿ã¾ã—ãŸãŒã€ã™ã“ã—ãšã¤æŠ˜ã‚Šåˆã„ã‚’ã¤ã‘ã€èµ¤ã¡ã‚ƒã‚“ã¨å¤«ã¨æ¥½ã—ãæš®ã‚‰ã—ã¤ã¤ã‚ã‚Šã¾ã™ã€‚</p><p>ã¨ã¯ã„ãˆã€æ™‚ãŠã‚Šã“ã®å…ˆã‚’è€ƒãˆã¦ã¾ã£é»’ãªä¸å®‰ã«è¥²ã‚ã‚Œã¾ã™ã€‚ãã‚“ãªæ™‚ã€ãªã«ã‹ãµã£ã¨ã“ã“ã‚ãŒè»½ããªã‚‹ä¸€è¨€ã‚’ã„ãŸã ã‘ã‚‹ã¨å¹¸ã„ã§ã™ã€‚<br>
ï¼ˆã•ãã‚‰ã®è±†å¤§ç¦ã€å¥³æ€§ã€41æ­³ã€ç”£ä¼‘ä¸­ã®ç·¨é›†è€…ï¼‰</p>

    </blockquote>

    <blockquote>
        <p>ã„ã¤ã‚‚åƒ•ã®æœ¬ã‚’èª­ã‚“ã§ã„ãŸã ã„ã¦ã€ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚å¿ƒãŒè»½ããªã‚‹ã‚ˆã†ãªã²ã¨ã“ã¨ã€ã¨è¨€ã‚ã‚Œã‚‹ã¨ã€åƒ•ã¨ã—ã¦ã‚‚ãªã‚“ã ã‹ç·Šå¼µã—ã¦ã—ã¾ã„ã¾ã™ã€‚åƒ•ã‚‰ã¯è¨€è‘‰ã‚’æ‰±ã†ã®ãŒä»•äº‹ãªã®ã§ã™ãŒã€ãã†ã„ã†å®ŸåŠ¹æ€§ã®ã‚ã‚‹è¨€è‘‰ã£ã¦ã€ãã†ç°¡å˜ã«ã¯å‡ºã¦ãã¾ã›ã‚“ã€‚ã ã„ãŸã„è¨€è‘‰ã²ã¨ã¤ã§ç‰‡ä»˜ãã‚ˆã†ãªã“ã¨ãªã‚‰ã€ã‚ãªãŸã ã£ã¦ãã‚“ãªã«æ·±ãè€ƒãˆè¾¼ã‚“ã ã‚Šã¯ã—ã¾ã›ã‚“ã‚ˆã­ã€‚æ™‚é–“ã‚’ã‹ã‘ã¦ã€å‰ã«é€²ã‚“ã ã‚Šå¾Œã‚ã«ã¡ã‚‡ã£ã¨ä¸‹ãŒã£ãŸã‚Šã—ãªãŒã‚‰ã€ã“ã“ã¾ã§ã‚„ã£ã¦æ¥ã‚‰ã‚ŒãŸã®ã ã¨æ€ã„ã¾ã™ã€‚ã¾ã‚ã‚Šã¨å¼•ãæ¯”ã¹ã¦ã€è½ã¡è¾¼ã¾ã‚ŒãŸã‚ˆã†ãªã“ã¨ã‚‚ãã£ã¨ã‚ã‚‹ã¨æ€ã„ã¾ã™ã€‚ãã“ã«ã‚ã‚‹ç”Ÿå‘½ã‚’ã€ã©ã†ã‹ã‚ãªãŸè‡ªèº«ã®ç”Ÿå‘½ã ã¨æ€ã£ã¦ã€å¤§äº‹ã«ã—ã¦ã‚ã’ã¦ãã ã•ã„ã€‚ãã‚Œã¯ã‚ãªãŸã«ã—ã‹ã§ããªã„ã“ã¨ãªã®ã ã‹ã‚‰ã€‚å…ˆã®ã“ã¨ã¯å…ˆã«ãªã£ã¦è€ƒãˆã‚Œã°ã„ã„ã˜ã‚ƒãªã„ã§ã™ã‹ã€‚ä»Šã¨ã„ã†æ™‚é–“ãŒãªã«ã‚ˆã‚ŠãŸã„ã›ã¤ã§ã™ã€‚ä»Šã¨ã„ã†æ™‚é–“ã¯ä»Šã—ã‹ãªã„ã‚“ã ã‹ã‚‰ã€‚ãã†æ€ã„ã¾ã™ã‚ˆã€‚</p><p>æ‘ä¸Šæ˜¥æ¨¹æ‹</p>

    </blockquote>

      
    </div>
    <footer class="entry-footer">
      <p class="entry-footer-section">
        <span class="author vcard"><span class="fn" data-load-nickname="1" data-user-name="teamennoshita">teamennoshita</span></span>
        <span class="entry-footer-time"><a href="http://www.welluneednt.com/entry/2015/03/24/113000"><time data-relative="" datetime="2015-03-24T02:30:00Z" title="2015-03-24T02:30:00Z" pubdate="" class="updated">39æ—¥å‰</time></a></span>
      </p>

      

      
<div class="social-buttons">
  
  
    <div class="social-button-item">
      <iframe class="hatena-bookmark-button-frame" title="ã“ã®è¨˜äº‹ã‚’ã¯ã¦ãªãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ã«è¿½åŠ " frameborder="0" scrolling="no" width="80" height="60" src="javascript:false" style="width: 80px; height: 60px;"></iframe>
    </div>
  
  
    <div class="social-button-item">
      <div class="fb-share-button fb_iframe_widget" data-layout="box_count" data-href="http://www.welluneednt.com/entry/2015/03/24/113000" fb-xfbml-state="rendered" fb-iframe-plugin-query="app_id=719729204785177&amp;container_width=0&amp;href=http%3A%2F%2Fwww.welluneednt.com%2Fentry%2F2015%2F03%2F24%2F113000&amp;layout=box_count&amp;locale=ja_JP&amp;sdk=joey"><span style="vertical-align: bottom; width: 58px; height: 61px;"><iframe name="f3804e0c7c" width="1000px" height="1000px" frameborder="0" allowtransparency="true" allowfullscreen="true" scrolling="no" title="fb:share_button Facebook Social Plugin" src="http://www.facebook.com/v2.0/plugins/share_button.php?app_id=719729204785177&amp;channel=http%3A%2F%2Fstatic.ak.facebook.com%2Fconnect%2Fxd_arbiter%2F6p3So0GhyQP.js%3Fversion%3D41%23cb%3Df2dfdb92c8%26domain%3Dwww.welluneednt.com%26origin%3Dhttp%253A%252F%252Fwww.welluneednt.com%252Ff861ec9c%26relation%3Dparent.parent&amp;container_width=0&amp;href=http%3A%2F%2Fwww.welluneednt.com%2Fentry%2F2015%2F03%2F24%2F113000&amp;layout=box_count&amp;locale=ja_JP&amp;sdk=joey" style="border: none; visibility: visible; width: 58px; height: 61px;" class=""></iframe></span></div>
    </div>
  
  
    <div class="social-button-item">
      <iframe id="twitter-widget-0" scrolling="no" frameborder="0" allowtransparency="true" src="http://platform.twitter.com/widgets/tweet_button.341448ccd3e070268cd097e6a7ee603f.ja.html#_=1430559496767&amp;count=vertical&amp;dnt=false&amp;id=twitter-widget-0&amp;lang=ja&amp;original_referer=http%3A%2F%2Fwww.welluneednt.com%2Fentry%2F2015%2F03%2F24%2F113000&amp;size=m&amp;text=%E3%81%B5%E3%81%A3%E3%81%A8%E3%81%93%E3%81%93%E3%82%8D%E3%81%8C%E8%BB%BD%E3%81%8F%E3%81%AA%E3%82%8B%E4%B8%80%E8%A8%80%20-%20%E6%9D%91%E4%B8%8A%E3%81%95%E3%82%93%E3%81%AE%E3%81%A8%E3%81%93%E3%82%8D%EF%BC%8F%E6%9D%91%E4%B8%8A%E6%98%A5%E6%A8%B9%20%E6%9C%9F%E9%96%93%E9%99%90%E5%AE%9A%E5%85%AC%E5%BC%8F%E3%82%B5%E3%82%A4%E3%83%88&amp;url=http%3A%2F%2Fwww.welluneednt.com%2Fentry%2F2015%2F03%2F24%2F113000" class="twitter-share-button twitter-tweet-button twitter-share-button twitter-count-vertical" title="Twitter Tweet Button" data-twttr-rendered="true" style="position: static; visibility: visible; width: 68px; height: 61px;"></iframe>
    </div>
  
  
    <div class="social-button-item">
      <div id="___plusone_0" style="text-indent: 0px; margin: 0px; padding: 0px; background-color: transparent; border-style: none; float: none; line-height: normal; font-size: 1px; vertical-align: baseline; display: inline-block; width: 50px; height: 60px; background-position: initial initial; background-repeat: initial initial;"><iframe frameborder="0" hspace="0" marginheight="0" marginwidth="0" scrolling="no" style="position: static; top: 0px; width: 50px; margin: 0px; border-style: none; left: 0px; visibility: visible; height: 60px;" tabindex="0" vspace="0" width="100%" id="I0_1430559496934" name="I0_1430559496934" src="https://apis.google.com/u/0/se/0/_/+1/fastbutton?usegapi=1&amp;size=tall&amp;origin=http%3A%2F%2Fwww.welluneednt.com&amp;url=http%3A%2F%2Fwww.welluneednt.com%2Fentry%2F2015%2F03%2F24%2F113000&amp;gsrc=3p&amp;ic=1&amp;jsh=m%3B%2F_%2Fscs%2Fapps-static%2F_%2Fjs%2Fk%3Doz.gapi.ja.GaAqtE9vSt8.O%2Fm%3D__features__%2Fam%3DIQ%2Frt%3Dj%2Fd%3D1%2Ft%3Dzcms%2Frs%3DAGLTcCObdvcYYb_30dT3f0o1AM2Q88jrEw#_methods=onPlusOne%2C_ready%2C_close%2C_open%2C_resizeMe%2C_renderstart%2Concircled%2Cdrefresh%2Cerefresh&amp;id=I0_1430559496934&amp;parent=http%3A%2F%2Fwww.welluneednt.com&amp;pfname=&amp;rpctoken=21360234" data-gapiattached="true" title="+1"></iframe></div>
    </div>
  
  
  
  
</div>


      

      <div class="customized-footer">

        

          

          

          
            <div class="entry-footer-html"><div class="write-blog"><a href="javascript:(function(){var a=document.getElementsByClassName('entry-title-link')[0].href;location.href='http://blog.hatena.ne.jp/my/edit?body='+encodeURIComponent('['+a+':title='+document.getElementsByClassName('entry-title-link')[0].textContent+' - '+document.getElementById('title').textContent+']');}())">ãƒ–ãƒ­ã‚°ã«æ„Ÿæƒ³ã‚’æ›¸ã</a></div></div>
          
        
      </div>

    </footer>
  </div>
</article>

                

                
                  
                  
                  <div class="permalink pager">
                    
                      
                      <span class="pager-prev">
                        <a href="http://www.welluneednt.com/entry/2015/03/24/113100" rel="prev">
                          <span class="pager-arrow">Â« </span>
                          ãƒ‰ã‚¤ãƒ„ã®æ­´å²ã«ä½•ã‚’è¦‹ã‚‹ã‹
                        </a>
                      </span>
                    
                    
                      
                      <span class="pager-next">
                        <a href="http://www.welluneednt.com/entry/2015/03/24/074100" rel="next">
                          å¥½ããªã‚¤ã‚®ãƒªã‚¹äººä½œå®¶ã¯èª°ã§ã™ã‹
                          <span class="pager-arrow"> Â»</span>
                        </a>
                      </span>
                    
                  </div>
                

              
            
            <!-- rakuten_ad_target_end -->
            <!-- google_ad_section_end -->

            
          
        </div>
      </div>

      
      <aside id="box1">
        <div id="box1-inner">
        </div>
      </aside>

    </div><!-- #wrapper -->

    <aside id="box2">
  <div id="box2-inner">
    
    
  </div>
</aside>

  </div>
</div>






        
          <div id="bottom-editarea">
            <footer class="pagefooter">
              <div class="copyright">Copyright Â© 2015 Haruki Murakami, <a href="http://www.fujimotomasaru.jp/" target="_blank">Masaru Fujimoto</a>, <a href="http://www.shinchosha.co.jp/" target="_blank">SHINCHOSHA</a> All rights reserved. Powered by <a href="http://hatenablog.com/" target="_blank">Hatenablog</a>.</div>
              <ul class="badge">
                <li class="hatenablog"><a href="http://hatenablog.com/" target="_blank"><img src="http://f.st-hatena.com/images/fotolife/t/teamennoshita/20150114/20150114200802.png" alt="HatenaBlog"></a></li>
                <li class="shinchosha"><a href="http://www.shinchosha.co.jp/" target="_blank"><img src="http://f.st-hatena.com/images/fotolife/t/teamennoshita/20150114/20150114200857.png" alt="shinchosha"></a></li>
              </ul>
            </footer>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-29716941-14', 'auto');
  ga('send', 'pageview');
</script>
          </div>
        
      </div>
    </div>

    

    

    

    <script type="text/javascript" src="https://platform.twitter.com/widgets.js"></script>
<script type="text/javascript" src="https://apis.google.com/js/plusone.js" gapi_processed="true">
  {"parsetags": "explicit"}
</script>
<script type="text/javascript" src="https://b.st-hatena.com/js/bookmark_button.js" charset="utf-8" async="async"></script>


<script src="https://www.google.com/recaptcha/api.js" async="" defer=""></script>

<script type="text/javascript" src="http://blog.hatena.ne.jp/js?version=f95a219773244f14c2c322979e39f67b"></script>
<script type="text/javascript" src="http://blog.hatena.ne.jp/js/texts-ja.js?version=f95a219773244f14c2c322979e39f67b"></script>


  <script type="text/javascript">Hatena.Diary.loadGlobalHeader()</script>








    
      <div id="fb-root" class=" fb_reset"><div style="position: absolute; top: -10000px; height: 0px; width: 0px;"><div></div></div><div style="position: absolute; top: -10000px; height: 0px; width: 0px;"><div><iframe name="fb_xdm_frame_http" frameborder="0" allowtransparency="true" allowfullscreen="true" scrolling="no" id="fb_xdm_frame_http" aria-hidden="true" title="Facebook Cross Domain Communication Frame" tabindex="-1" src="http://static.ak.facebook.com/connect/xd_arbiter/6p3So0GhyQP.js?version=41#channel=f861ec9c&amp;origin=http%3A%2F%2Fwww.welluneednt.com" style="border: none;"></iframe><iframe name="fb_xdm_frame_https" frameborder="0" allowtransparency="true" allowfullscreen="true" scrolling="no" id="fb_xdm_frame_https" aria-hidden="true" title="Facebook Cross Domain Communication Frame" tabindex="-1" src="https://s-static.ak.facebook.com/connect/xd_arbiter/6p3So0GhyQP.js?version=41#channel=f861ec9c&amp;origin=http%3A%2F%2Fwww.welluneednt.com" style="border: none;"></iframe></div></div></div>
      <script>(function(d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s); js.id = id;
        js.src = "//connect.facebook.net/ja_JP/sdk.js#xfbml=1&appId=719729204785177&version=v2.0";
        fjs.parentNode.insertBefore(js, fjs);
      }(document, 'script', 'facebook-jssdk'));</script>
    

    
       <script id="google-analytics-script" type="text/javascript">
var _gaq = _gaq || [];

(function($){

  // ç¾åœ¨ã®ãƒ‰ãƒ¡ã‚¤ãƒ³
  
    
    
      
      var current_domain = "www.welluneednt.com".split(":")[0];
    
  

  
    _gaq.push(['_setAccount', 'UA-58349470-1']);
    _gaq.push(['_trackPageview']);
  

  

   
   _gaq.push(['all._setAccount', 'UA-7855606-1']);
   _gaq.push(['all._setDomainName', current_domain]);
   _gaq.push(['all._setSampleRate', '10']);
   _gaq.push(['all._trackPageview']);

  
    _gaq.push(['a._setAccount', 'UA-29716941-5']);
    _gaq.push(['a._setDomainName', current_domain]);
    _gaq.push(['a._setCustomVar', 1, 'PageId', document.documentElement.getAttribute('data-page'), 3 /* page-level */]);
      var keywordCampaigns = [];
      $('.js-entry-article').each(function (index, element) {
        var keywords = $(element).data('keywordCampaign').split(' ');
        keywords = _.filter(keywords, function (keyword) { return keyword.length > 0 });
        keywordCampaigns = keywordCampaigns.concat(keywords);
      });
      if (keywordCampaigns.length > 0) {
        _gaq.push(['a._setCustomVar', 3, 'KeywordCampaign', keywordCampaigns[0], 3 /* page-level */]);
      }
      _gaq.push(['a._trackPageview']);
  
    _gaq.push(['b._setAccount', 'UA-29716941-2']);
    _gaq.push(['b._setDomainName', current_domain]);
    _gaq.push(['b._setCustomVar', 1, 'PageId', document.documentElement.getAttribute('data-page'), 3 /* page-level */]);
      var keywordCampaigns = [];
      $('.js-entry-article').each(function (index, element) {
        var keywords = $(element).data('keywordCampaign').split(' ');
        keywords = _.filter(keywords, function (keyword) { return keyword.length > 0 });
        keywordCampaigns = keywordCampaigns.concat(keywords);
      });
      if (keywordCampaigns.length > 0) {
        _gaq.push(['b._setCustomVar', 3, 'KeywordCampaign', keywordCampaigns[0], 3 /* page-level */]);
      }
      _gaq.push(['b._trackPageview']);
  

  $(function () {
      $(document).delegate('[data-track-event="click"]', 'click', function () {
          
          _gaq.push([ 'a._trackEvent', 'Blogs', 'Click', this.getAttribute('data-track-key') ]);
          
          _gaq.push([ 'b._trackEvent', 'Blogs', 'Click', this.getAttribute('data-track-key') ]);
          
      });
  });

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

  var available_domains = ["blog.hatena.ne.jp"];
  
    available_domains.push("hatenablog.com".split(":")[0]);
  
    available_domains.push("hatenablog.jp".split(":")[0]);
  
    available_domains.push("hateblo.jp".split(":")[0]);
  
    available_domains.push("hatenadiary.com".split(":")[0]);
  
    available_domains.push("hatenadiary.jp".split(":")[0]);
  
  $('a').on('click', function() {
    // åŒã˜ãƒ‰ãƒ¡ã‚¤ãƒ³ãªã‚‰ã‚¹ã‚­ãƒƒãƒ—
    if ( !this.hostname || this.hostname.indexOf(current_domain) != -1 ) return;

    var cross_domain = false;
    for (var i = 0, len = available_domains.length; i < len; i++) {
      if (this.hostname.indexOf(available_domains[i]) != -1) cross_domain = true;
    }
    if ( cross_domain ) {
      
      _gaq.push(['a._link', this.href]);
      
      _gaq.push(['b._link', this.href]);
      
    }
  });

})(jQuery);
</script>

       

  <script id="hatena-counter-script" type="text/javascript"><!--
      hatena_counter_name = "teamennoshita";
      hatena_counter_id = "106";
      hatena_counter_ref = document.referrer+"";
      hatena_counter_screen = screen.width + "x" + screen.height+","+screen.colorDepth;
  //--></script>
  <script type="text/javascript" src="http://counter.hatena.ne.jp/js/counter.js"></script><script type="text/javascript" src="http://counter.hatena.ne.jp/teamennoshita/106?js=1&amp;mode=default&amp;c=1920x1080,24&amp;r=http://www.welluneednt.com/archive/category/%E8%AA%AD%E8%80%85%E2%86%94%E6%9D%91%E4%B8%8A%E6%98%A5%E6%A8%B9?page=21"></script><span class="hatena-counter"></span>
  


    

  


<div id="cboxOverlay" style="display: none;"></div><div id="colorbox" class="" role="dialog" tabindex="-1" style="display: none;"><div id="cboxWrapper"><div><div id="cboxTopLeft" style="float: left;"></div><div id="cboxTopCenter" style="float: left;"></div><div id="cboxTopRight" style="float: left;"></div></div><div style="clear: left;"><div id="cboxMiddleLeft" style="float: left;"></div><div id="cboxContent" style="float: left;"><div id="cboxTitle" style="float: left;"></div><div id="cboxCurrent" style="float: left;"></div><button id="cboxPrevious"></button><button id="cboxNext"></button><button id="cboxSlideshow"></button><div id="cboxLoadingOverlay" style="float: left;"></div><div id="cboxLoadingGraphic" style="float: left;"></div><button id="cboxClose"></button></div><div id="cboxMiddleRight" style="float: left;"></div></div><div style="clear: left;"><div id="cboxBottomLeft" style="float: left;"></div><div id="cboxBottomCenter" style="float: left;"></div><div id="cboxBottomRight" style="float: left;"></div></div></div><div style="position: absolute; width: 9999px; visibility: hidden; display: none;"></div></div></body></html>Ytext/html§JXcny~ÒÕ	
[MZct6o1myv@_”http://blog.hatena.ne.jp/-/globalheader/1a1a1a/ffffff/blogs?device=pc&brand=trial#http%3A%2F%2Fwww.welluneednt.com%2Fentry%2F2015%2F03%2F24%2F113000O6I<!DOCTYPE html><html lang="ja" data-avail-langs="ja en" data-admin-domain="http://blog.hatena.ne.jp" data-feedback="http://blog.hatena.ne.jp/-/feedback/iframe" data-page="globalheader" data-device="pc" data-bkc="79fd8166ef5d4fe8529f0ff593d8d36412cdf279" class=" overthrow-enabled"><head><script type="text/javascript" async="" src="https://www.gstatic.com/recaptcha/api2/r20150429132001/recaptcha__ja.js"></script><script async="" src="https://www.hatena.ne.jp/notify/notices.count.json?callback=jQuery19107287287013605237_1430559496827&amp;services=1&amp;_=1430559496828"></script>
    <title>ã¯ã¦ãª</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <base target="_parent">

    <meta name="robots" content="noindex,follow">
    <link rel="stylesheet" type="text/css" href="https://blog.st-hatena.com/css/globalheader.css?version=f95a219773244f14c2c322979e39f67b">

    <style type="text/css">
      body {
        color: #1a1a1a;
      }
      a:link ,
      a:visited ,
      a:hover {
        color: #1a1a1a;
      }
    </style>

    
<script src="https://apis.google.com/_/scs/apps-static/_/js/k=oz.gapi.ja.GaAqtE9vSt8.O/m=plusone/rt=j/sv=1/d=1/ed=1/am=IQ/rs=AGLTcCObdvcYYb_30dT3f0o1AM2Q88jrEw/t=zcms/cb=gapi.loaded_0" async=""></script><script type="text/javascript">
// <!--

if (~navigator.userAgent.indexOf('Mac OS X')) {
  document.write('<style type="text/css">html, body { font-family: \x27Helvetica\x27, \x27Arial\x27, \x27ãƒ’ãƒ©ã‚®ãƒè§’ã‚´ Pro W3\x27, \x27Hiragino Kaku Gothic Pro\x27, sans-serif; } </style>');
} else {
  document.write('<style type="text/css">html, body { font-family: \x27Helvetica\x27, \x27Arial\x27, \x27ãƒ¡ã‚¤ãƒªã‚ª\x27, \x27Meiryo\x27, \x27MS PGothic\x27, sans-serif; } </style>');
}

// -->
</script><style type="text/css">html, body { font-family: 'Helvetica', 'Arial', 'ãƒ’ãƒ©ã‚®ãƒè§’ã‚´ Pro W3', 'Hiragino Kaku Gothic Pro', sans-serif; } </style>

<!--[if lt IE 9]>
<script src="https://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->

<!--[if IE]>
<script type="text/javascript" src="https://blog.st-hatena.com/js/vendor/excanvas/excanvas.js?version=f95a219773244f14c2c322979e39f67b"></script>
<![endif]-->

    <script type="text/javascript" src="https://platform.twitter.com/widgets.js"></script>
<script type="text/javascript" src="https://apis.google.com/js/plusone.js" gapi_processed="true">
  {"parsetags": "explicit"}
</script>
<script type="text/javascript" src="https://b.st-hatena.com/js/bookmark_button.js" charset="utf-8" async="async"></script>


<script src="https://www.google.com/recaptcha/api.js" async="" defer=""></script>

<script type="text/javascript" src="http://blog.hatena.ne.jp/js?version=f95a219773244f14c2c322979e39f67b"></script>
<script type="text/javascript" src="http://blog.hatena.ne.jp/js/texts-ja.js?version=f95a219773244f14c2c322979e39f67b"></script>








  </head>
  <body class="color-b page-globalheader" data-color="#1a1a1a" data-twttr-rendered="true">
    
<!--script type="text/javascript" src="http://cdn.www.st-hatena.com/js/header.ja.js" charset="utf-8"></script-->

<div id="header">
  
    
    <div id="header-body"><ul class="globalheader-nav"><li class="service-logo"><a href="http://hatenablog.com/" class="service-logo-container" data-track-name="global-header-service-logo" data-track-once=""><span class="service-logo-svg-wrapper" style=""><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 141 37" enable-background="new 0 0 141 37"><path fill="#1a1a1a" d="M102.2 10h2.9c1.2 0 2 .1 2.7.4.6.3 1.1.7 1.5 1.3.4.6.5 1.2.5 1.9s-.2 1.2-.5 1.8c-.3.5-.8 1-1.4 1.3.8.3 1.3.6 1.7.9.4.3.7.8 1 1.3.2.5.3 1 .3 1.6 0 1.2-.4 2.2-1.3 3-.9.8-2 1.2-3.4 1.2h-4v-14.7zm1.4 1.5v4.7h.8c1 0 1.8-.1 2.2-.3.5-.2.9-.5 1.1-.9.3-.4.4-.9.4-1.4 0-.7-.2-1.2-.7-1.6-.5-.4-1.2-.6-2.2-.6h-1.6zm0 6.2v5.6h1.8c1.1 0 1.8-.1 2.3-.3.5-.2.9-.5 1.2-1 .3-.4.5-.9.5-1.4 0-.7-.2-1.2-.6-1.7-.4-.5-1-.8-1.7-1-.5-.1-1.4-.2-2.6-.2h-.9zM113.4 10h1.4v14.7h-1.4v-14.7zM122.8 13.6c1.7 0 3 .6 4.1 1.8 1 1.1 1.5 2.4 1.5 3.9s-.5 2.8-1.6 4c-1 1.1-2.4 1.7-4 1.7-1.7 0-3-.6-4.1-1.7-1-1.1-1.6-2.5-1.6-4s.5-2.8 1.5-3.9c1.2-1.2 2.5-1.8 4.2-1.8zm0 1.4c-1.2 0-2.1.4-3 1.3-.8.9-1.2 1.9-1.2 3.1 0 .8.2 1.5.6 2.2.4.7.9 1.2 1.5 1.6.6.4 1.3.6 2.1.6s1.5-.2 2.1-.6c.6-.4 1.2-.9 1.5-1.6.4-.7.6-1.4.6-2.2 0-1.2-.4-2.3-1.2-3.1-.9-.9-1.9-1.3-3-1.3zM139.7 13.9h1.3v8.7c0 1.5-.1 2.6-.4 3.3-.4 1-1 1.8-1.8 2.3-.9.5-1.9.8-3.1.8-.9 0-1.7-.1-2.4-.4-.7-.3-1.3-.6-1.7-1.1-.4-.4-.9-1.1-1.2-1.9h1.5c.4.7.9 1.3 1.5 1.6.6.3 1.4.5 2.3.5.9 0 1.7-.2 2.3-.5.6-.4 1.1-.8 1.4-1.3.3-.5.4-1.4.4-2.6v-.6c-.5.7-1.1 1.2-1.9 1.5-.7.4-1.5.5-2.3.5-1 0-1.9-.2-2.7-.7-.8-.5-1.5-1.2-2-2s-.7-1.8-.7-2.8c0-1 .2-1.9.7-2.8.5-.9 1.1-1.6 2-2.1.8-.5 1.7-.8 2.7-.8.8 0 1.5.2 2.2.5.7.3 1.3.9 2 1.7v-1.8zm-4 1c-.8 0-1.5.2-2.1.6-.7.4-1.2.9-1.5 1.6-.4.7-.6 1.4-.6 2.2 0 1.2.4 2.2 1.2 3 .8.8 1.8 1.2 3 1.2s2.2-.4 3-1.2c.8-.8 1.1-1.8 1.1-3 0-.8-.2-1.6-.5-2.2-.3-.6-.8-1.2-1.5-1.5-.7-.5-1.4-.7-2.1-.7zM26.3 10.5h1.5v6.1h8.1v-6.1h1.5v14.7h-1.5v-7.1h-8.1v7.1h-1.5v-14.7zM50.6 14.3v10.8h-1.4v-1.9c-.6.7-1.2 1.2-2 1.6-.7.4-1.5.5-2.4.5-1.5 0-2.8-.6-3.9-1.7s-1.6-2.5-1.6-4.1c0-1.6.5-2.9 1.6-4s2.4-1.7 3.9-1.7c.9 0 1.7.2 2.4.6.7.4 1.3.9 1.9 1.7v-2h1.5zm-5.5 1.1c-.8 0-1.5.2-2.1.6-.6.4-1.2.9-1.6 1.6-.4.7-.6 1.4-.6 2.2 0 .8.2 1.5.6 2.2.4.7.9 1.2 1.6 1.6.7.4 1.4.6 2.1.6.8 0 1.5-.2 2.1-.6.7-.4 1.2-.9 1.6-1.6.4-.7.5-1.4.5-2.2 0-1.3-.4-2.3-1.2-3.1-.8-.9-1.8-1.3-3-1.3zM54.9 10.3h1.4v4h2.2v1.2h-2.2v9.6h-1.4v-9.6h-1.9v-1.2h1.9v-4zM69.6 21.6l1.2.6c-.4.8-.8 1.4-1.3 1.8-.5.5-1.1.8-1.7 1.1-.6.2-1.3.4-2.1.4-1.8 0-3.1-.6-4.1-1.7-1-1.2-1.5-2.5-1.5-3.9s.4-2.6 1.3-3.7c1.1-1.4 2.5-2.1 4.3-2.1 1.8 0 3.3.7 4.4 2.1.8 1 1.2 2.2 1.2 3.7h-9.7c0 1.3.4 2.3 1.2 3.1.8.8 1.7 1.2 2.9 1.2.5 0 1.1-.1 1.6-.3.5-.2 1-.4 1.3-.8.2-.3.6-.8 1-1.5zm0-2.9c-.2-.7-.5-1.3-.8-1.8-.4-.4-.8-.8-1.4-1.1-.6-.3-1.2-.4-1.8-.4-1.1 0-2 .3-2.7 1-.6.5-1 1.2-1.3 2.2h8zM73.3 13.9h1.4v1.9c.6-.7 1.2-1.3 1.8-1.7.7-.4 1.4-.6 2.2-.6.8 0 1.5.2 2.1.6.6.4 1.1 1 1.4 1.7.3.7.4 1.8.4 3.3v5.6h-1.4v-5.2c0-1.2-.1-2.1-.2-2.5-.2-.7-.5-1.3-.9-1.6-.5-.4-1-.5-1.8-.5s-1.6.3-2.2.8c-.7.6-1.1 1.2-1.3 2.1-.1.5-.2 1.5-.2 3v4h-1.4v-10.9zM95.9 13.9v10.8h-1.4v-1.9c-.6.7-1.2 1.2-1.9 1.6-.7.4-1.5.5-2.4.5-1.5 0-2.8-.6-3.9-1.7s-1.6-2.5-1.6-4.1c0-1.6.5-2.9 1.6-4s2.4-1.7 3.9-1.7c.9 0 1.7.2 2.4.6.7.4 1.3.9 1.9 1.7v-2h1.4zm-5.5 1.1c-.8 0-1.5.2-2.1.6-.7.4-1.2.9-1.6 1.6-.4.7-.6 1.4-.6 2.2 0 .8.2 1.5.6 2.2.4.7.9 1.2 1.6 1.6.7.4 1.4.6 2.1.6.8 0 1.5-.2 2.1-.6.7-.4 1.2-.9 1.6-1.6.4-.7.5-1.4.5-2.2 0-1.3-.4-2.3-1.2-3.1-.8-.9-1.8-1.3-3-1.3zM9.9 28c-5.5 0-9.9-4.5-9.9-10s4.4-10 9.9-10 9.9 4.5 9.9 10-4.4 10-9.9 10zm0-18.7c-4.8 0-8.6 3.9-8.6 8.7 0 4.8 3.9 8.7 8.6 8.7 4.8 0 8.6-3.9 8.6-8.7.1-4.8-3.8-8.7-8.6-8.7zM11.1 13.1c-.5-1-.8-2-.9-2.5v7.1c.2.1.4.3.4.6 0 .4-.3.7-.6.7-.4 0-.6-.3-.6-.7 0-.3.2-.5.5-.6v-7.1c-.1.6-.4 1.5-.9 2.5-1 1.5-1.9 2.9-1.9 2.9l.6 8.4s.6.6 2.2.6c1.7 0 2.2-.6 2.2-.6l.6-8.4c.1 0-.9-1.4-1.6-2.9z"></path></svg><script type="text/javascript"><!--
    
    document.addEventListener('DOMContentLoaded', function(){ Hatena.Diary.Pages.Admin['globalheader'].coloringSvgHeader( document.querySelector('.service-logo-svg-wrapper svg'), function($img) { $img.parent().show(); } ) });
    // --></script></span></a></li><li id="current-blog" class="current-blog"><span class="header-dropdown" tabindex="0"><i class="blogicon-private blog-private-badge js-blog-private-badge" title="ã“ã®ãƒ–ãƒ­ã‚°ã¯é™å®šå…¬é–‹ã§ã™ã€‚" alt="ã“ã®ãƒ–ãƒ­ã‚°ã¯é™å®šå…¬é–‹ã§ã™ã€‚"></i><a class="current-blog-title" href="">æ‘ä¸Šã•ã‚“ã®ã¨ã“ã‚ï¼æ‘ä¸Šæ˜¥æ¨¹ æœŸé–“é™å®šå…¬å¼ã‚µã‚¤ãƒˆ</a></span></li><li class="js-globalheader-subscribe" style=""><span class="no-subscribing" data-track-name="globalheader-subscribe-icon" data-track-once=""><i class="blogicon-plus"></i> èª­è€…ã«ãªã‚‹
            </span></li><li class="js-globalheader-subscribed-message" style="display: none;"><span>
            âœ“è³¼èª­ä¸­ã§ã™
          </span></li></ul><ul class="service-menu"><li><a href="http://blog.hatena.ne.jp/register?via=200154" class="register" data-track-name="global-header-guest-register globalheader-register-guest-in-user-blog" data-track-once="" data-inherit-via="">ãƒ–ãƒ­ã‚°é–‹è¨­ ï¼ˆç„¡æ–™ï¼‰</a></li><li><a href="https://www.hatena.ne.jp/login?location=http%3A%2F%2Fblog.hatena.ne.jp%2Fgo%3Fblog%3Dhttp%253A%252F%252Fwww.welluneednt.com%252Fentry%252F2015%252F03%252F24%252F113000" class="login" data-track-name="global-header-login" data-track-once="">ãƒ­ã‚°ã‚¤ãƒ³</a></li><li><a href="/-/feedback/iframe" class="feedback"><span class="header-button header-dropdown" data-track-name="global-header-help" data-track-once="">ãƒ˜ãƒ«ãƒ—</span></a></li><li><a href="#" class="locale"><span class="header-dropdown" data-height-hint="116">æ—¥æœ¬èª</span></a></li><li id="global-logo" class="global-logo" data-track-name="global-header-hatena-logo" data-track-once=""><a href="http://www.hatena.ne.jp/"><span class="global-logo-svg-wrapper" style=""><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 152 24" enable-background="new 0 0 152 24"><g fill="#454545"><path d="M43.6.3h4.5v9h9.5v-9h4.5v23.7h-4.5v-10.4h-9.5v10.4h-4.5v-23.7zM87.7 0h4.3v6.5h2.6v3.7h-2.6v13.8h-4.3v-13.8h-2.2v-3.7h2.2v-6.5zM116.4 6.5h4.2v2.2c.9-.8 1.8-1.4 2.6-1.7.8-.3 1.6-.5 2.4-.5 1.7 0 3.1.6 4.2 1.8 1 1 1.5 2.5 1.5 4.5v11.2h-4.3v-7.5c0-2-.1-3.4-.3-4.1-.2-.7-.5-1.2-.9-1.5-.4-.4-1-.5-1.6-.5-.8 0-1.6.3-2.2.9-.6.6-1 1.4-1.3 2.4-.1.5-.2 1.7-.2 3.5v6.8h-4.2v-17.5zM78.4 6.5v1.7c-1.4-1.1-3.2-1.7-5.1-1.7-4.7 0-8.6 3.9-8.6 8.8 0 4.8 3.8 8.8 8.6 8.8 1.9 0 3.7-.6 5.1-1.7v1.6h4.3v-17.5h-4.3zm-5.2 13.6c-2.6 0-4.7-2.2-4.7-4.8 0-2.7 2.1-4.8 4.7-4.8s4.7 2.2 4.7 4.8c0 2.6-2.1 4.8-4.7 4.8zM147.7 6.5v1.7c-1.4-1.1-3.2-1.7-5.1-1.7-4.7 0-8.6 3.9-8.6 8.8 0 4.8 3.8 8.8 8.6 8.8 1.9 0 3.7-.6 5.1-1.7v1.6h4.3v-17.5h-4.3zm-5.1 13.6c-2.6 0-4.7-2.2-4.7-4.8 0-2.7 2.1-4.8 4.7-4.8s4.7 2.2 4.7 4.8c0 2.6-2.1 4.8-4.7 4.8zM104.9 6.5c-2.4 0-4.4.8-6 2.5-1.6 1.7-2.4 3.8-2.4 6.3s.8 4.5 2.4 6.2c1.6 1.6 3.7 2.5 6.2 2.5 1.6 0 3-.5 4.2-1.1 1.2-.6 2.8-2.5 3.5-4.2h-3.8c-1.1 1.1-2.4 1.6-3.9 1.6-1.3 0-2.3-.4-3.2-1.1-.8-.7-1.3-1.6-1.5-2.8h13.2v-.8c0-2.7-.8-4.9-2.4-6.6-1.6-1.6-3.7-2.5-6.3-2.5zm-4.3 6.7c.5-1 1-1.7 1.5-2.1.9-.6 1.9-1 3-1s2 .3 2.8.9c.8.6 1.3 1.3 1.6 2.2h-8.9z" fill="#1a1a1a"></path></g><g fill="#454545"><path d="M10.3 3.2c.9.3 4.5 1.6 4.6 1.6.1 0 3.8-1.3 4.6-1.6-.9-.3-4.5-1.6-4.6-1.6-.1.1-3.7 1.3-4.6 1.6zM20.8 3.2c.9.3 4.5 1.6 4.6 1.6.1 0 3.8-1.3 4.6-1.6-.9-.3-4.5-1.6-4.6-1.6-.1.1-3.8 1.3-4.6 1.6z" fill="#1a1a1a"></path></g><path opacity=".22" fill="#1a1a1a" d="M15.6 7.2c.9.3 4.5 1.6 4.6 1.6.1 0 3.8-1.3 4.6-1.6-.9-.3-4.5-1.6-4.6-1.6-.1 0-3.8 1.3-4.6 1.6z"></path><path fill="#1a1a1a" d="M25.8 7.2c.9.3 4.5 1.6 4.6 1.6.1 0 3.8-1.3 4.6-1.6-.9-.3-4.5-1.6-4.6-1.6-.1 0-3.7 1.3-4.6 1.6zM5.3 7.2c.9.3 4.5 1.6 4.6 1.6.1 0 3.8-1.3 4.6-1.6-.9-.3-4.5-1.6-4.6-1.6-.1 0-3.8 1.3-4.6 1.6zM15.6 20.5c.9.3 4.5 1.6 4.6 1.6.1 0 3.8-1.3 4.6-1.6-.9-.3-4.5-1.6-4.6-1.6-.2 0-3.8 1.3-4.6 1.6z"></path><g opacity=".22" fill="#454545"><path d="M15.4 15.3c.9.3 4.5 1.6 4.6 1.6.1 0 3.8-1.3 4.6-1.6-.9-.3-4.5-1.6-4.6-1.6-.1 0-3.7 1.3-4.6 1.6zM26 15.3c.9.3 4.5 1.6 4.6 1.6.1 0 3.8-1.3 4.6-1.6-.9-.3-4.5-1.6-4.6-1.6-.1 0-3.7 1.3-4.6 1.6zM5.1 15.3c.9.3 4.5 1.6 4.6 1.6.1 0 3.8-1.3 4.6-1.6-.9-.3-4.5-1.6-4.6-1.6-.1 0-3.7 1.3-4.6 1.6z" fill="#1a1a1a"></path></g><path opacity=".22" fill="#1a1a1a" d="M10.4 11.2c.9.3 4.5 1.6 4.6 1.6.1 0 3.8-1.3 4.6-1.6-.9-.3-4.5-1.6-4.6-1.6-.1 0-3.8 1.3-4.6 1.6z"></path><path fill="#1a1a1a" d="M20.9 11.2c.9.3 4.5 1.6 4.6 1.6.1 0 3.8-1.3 4.6-1.6-.9-.3-4.5-1.6-4.6-1.6-.2 0-3.8 1.3-4.6 1.6z"></path><path opacity=".22" fill="#1a1a1a" d="M31.1 11.2c.9.3 4.5 1.6 4.6 1.6.1 0 3.8-1.3 4.6-1.6-.9-.3-4.5-1.6-4.6-1.6-.1 0-3.7 1.3-4.6 1.6zM0 11.2c.9.3 4.5 1.6 4.6 1.6.1 0 3.8-1.3 4.6-1.6-.9-.3-4.5-1.6-4.6-1.6-.1 0-3.7 1.3-4.6 1.6z"></path></svg><script type="text/javascript"><!--
    
    document.addEventListener('DOMContentLoaded', function(){ Hatena.Diary.Pages.Admin['globalheader'].coloringSvgHeader( document.querySelector('.global-logo-svg-wrapper svg'), function($img) { $img.parent().show(); } ) });
    // --></script></span></a></li></ul></div>
    
  
</div>

  

<div id="cboxOverlay" style="display: none;"></div><div id="colorbox" class="" role="dialog" tabindex="-1" style="display: none;"><div id="cboxWrapper"><div><div id="cboxTopLeft" style="float: left;"></div><div id="cboxTopCenter" style="float: left;"></div><div id="cboxTopRight" style="float: left;"></div></div><div style="clear: left;"><div id="cboxMiddleLeft" style="float: left;"></div><div id="cboxContent" style="float: left;"><div id="cboxTitle" style="float: left;"></div><div id="cboxCurrent" style="float: left;"></div><button id="cboxPrevious"></button><button id="cboxNext"></button><button id="cboxSlideshow"></button><div id="cboxLoadingOverlay" style="float: left;"></div><div id="cboxLoadingGraphic" style="float: left;"></div><button id="cboxClose"></button></div><div id="cboxMiddleRight" style="float: left;"></div></div><div style="clear: left;"><div id="cboxBottomLeft" style="float: left;"></div><div id="cboxBottomCenter" style="float: left;"></div><div id="cboxBottomRight" style="float: left;"></div></div></div><div style="position: absolute; width: 9999px; visibility: hidden; display: none;"></div></div><style type="text/css">#header span.header-dropdown, #header span.header-dropdown-custom { background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAANZJREFUSA1jYBgFoyEwGgKM2IJARkZG+t+/f+eBcqLY5JHEPjIxMdk+efLkMpIYCpMJhQflADU8ZWRk9Adyf2GTh4r9BdJx+AwHqWOGKsagPn/+/ISHh+ch0KJADEmgAFC89NmzZwuwySGL4bQApOjLly+XeHl5OYBMG2RNQPZcoOGVaGJYuXgtAOkA+uQA0BIDIFMdxAe6/KCgoGDE69evQUFEEGCNZHRdSkpK/D9+/DgMFOcERr7VixcvXqOroZgvLi6uCExduhQbNGrAaAiMhgD1QwAArZg4kfJRQUQAAAAASUVORK5CYII=) center right no-repeat; background-size: 12px 12px; }</style></body></html>ª!&,16;@EÔ	_WebResourceResponse_Ghttps://www.gstatic.com/recaptcha/api2/r20150429132001/recaptcha__ja.jsO
bplist00ÔwxX$versionX$objectsY$archiverT$top † ¯'#)*0123STUVWXYZ[\]^_`abcdefghijklmpqrU$nullİ	
 !"R$6S$10R$2R$7R$3S$11R$8V$classR$4R$9R$0R$5R$1€	€€€$€&€€%€Ó$%&'(WNS.base[NS.relative€ €€_Ghttps://www.gstatic.com/recaptcha/api2/r20150429132001/recaptcha__ja.jsÒ+,-.Z$classnameX$classesUNSURL¢-/XNSObject#AºôÒ;që ÈÓ456DRWNS.keysZNS.objects­789:;<=>?@ABC€	€
€€€€€€€€€€€­EFGHIJKLMNOPQ€€€€€€€€€€€ €!€"€#\Content-Type_alternate-protocol_Content-EncodingVServer_x-xss-protectionWExpiresSAge]Cache-ControlTDate^Content-Length_x-content-type-optionsTVary]Last-Modified_text/javascript\443:quic,p=1TgzipTsffe]1; mode=block_Sat, 30 Apr 2016 17:13:35 GMTU59004_public, max-age=31536000_Fri, 01 May 2015 17:13:35 GMTU54826Wnosniff_Accept-Encoding_Wed, 29 Apr 2015 22:48:14 GMTÒ+,no\NSDictionary¢n/ÿÿÿÿÿÿÿÿ_text/javascriptÒ+,st_NSHTTPURLResponse£uv/_NSHTTPURLResponse]NSURLResponse_NSKeyedArchiverÑyz_WebResourceResponse€    # - 2 7 a g ‚ … ‰ Œ  ’ – ™   £ ¦ © ¬ ¯ ± ³ µ · ¹ º ¼ ¾ À Â Ä Æ È Ï × ã å ç é38CLRU^gikrz…“•—™›Ÿ¡£¥§©«­»½¿ÁÃÅÇÉËÍÏÑÓÕ×äù&.2@ETmr€’Ÿ¤©·×İø&8X]jmvˆ¡¥¹ÇÙÜò             {              ôO w(function(){var f,aa=aa||{},l=this,m=function(a){return void 0!==a},ba=function(a){a=a.split(".");for(var b=l,c;c=a.shift();)if(null!=b[c])b=b[c];else return null;return b},n=function(){},ca=function(a){a.Ga=function(){return a.dh?a.dh:a.dh=new a}},da=function(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&
"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";else if("function"==b&&"undefined"==typeof a.call)return"object";return b},p=function(a){return"array"==da(a)},ea=function(a){var b=da(a);return"array"==b||"object"==b&&"number"==typeof a.length},r=function(a){return"string"==typeof a},fa=function(a){return"number"==
typeof a},u=function(a){return"function"==da(a)},ga=function(a){var b=typeof a;return"object"==b&&null!=a||"function"==b},ja=function(a){return a[ha]||(a[ha]=++ia)},ha="closure_uid_"+(1E9*Math.random()>>>0),ia=0,ka=function(a,b,c){return a.call.apply(a.bind,arguments)},la=function(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,
arguments)}},v=function(a,b,c){v=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ka:la;return v.apply(null,arguments)},ma=function(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}},w=Date.now||function(){return+new Date},oa=function(a){if(l.execScript)l.execScript(a,"JavaScript");else if(l.eval)if(null==na&&(l.eval("var _et_ = 1;"),"undefined"!=typeof l._et_?(delete l._et_,
na=!0):na=!1),na)l.eval(a);else{var b=l.document,c=b.createElement("SCRIPT");c.type="text/javascript";c.defer=!1;c.appendChild(b.createTextNode(a));b.body.appendChild(c);b.body.removeChild(c)}else throw Error("goog.globalEval not available");},na=null,pa=function(a,b){var c=a.split("."),d=l;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&m(b)?d[e]=b:d=d[e]?d[e]:d[e]={}},x=function(a,b){function c(){}c.prototype=b.prototype;a.b=b.prototype;a.prototype=
new c;a.prototype.constructor=a;a.nk=function(a,c,g){for(var h=Array(arguments.length-2),k=2;k<arguments.length;k++)h[k-2]=arguments[k];return b.prototype[c].apply(a,h)}};Function.prototype.bind=Function.prototype.bind||function(a,b){if(1<arguments.length){var c=Array.prototype.slice.call(arguments,1);c.unshift(this,a);return v.apply(null,c)}return v(this,a)};var y=function(a){if(Error.captureStackTrace)Error.captureStackTrace(this,y);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a));this.Uj=!0};x(y,Error);y.prototype.name="CustomError";var qa;var ra=function(a,b){for(var c=a.split("%s"),d="",e=Array.prototype.slice.call(arguments,1);e.length&&1<c.length;)d+=c.shift()+e.shift();return d+c.join("%s")},sa=function(a){return/^[\s\xa0]*$/.test(a)},ta=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},Ba=function(a){if(!ua.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(va,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(wa,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(xa,"&gt;"));-1!=a.indexOf('"')&&
(a=a.replace(ya,"&quot;"));-1!=a.indexOf("'")&&(a=a.replace(za,"&#39;"));-1!=a.indexOf("\x00")&&(a=a.replace(Aa,"&#0;"));return a},va=/&/g,wa=/</g,xa=/>/g,ya=/"/g,za=/'/g,Aa=/\x00/g,ua=/[\x00&<>"']/,Da=function(a,b){for(var c=0,d=ta(String(a)).split("."),e=ta(String(b)).split("."),g=Math.max(d.length,e.length),h=0;0==c&&h<g;h++){var k=d[h]||"",q=e[h]||"",t=RegExp("(\\d*)(\\D*)","g"),C=RegExp("(\\d*)(\\D*)","g");do{var A=t.exec(k)||["","",""],z=C.exec(q)||["","",""];if(0==A[0].length&&0==z[0].length)break;
c=Ca(0==A[1].length?0:parseInt(A[1],10),0==z[1].length?0:parseInt(z[1],10))||Ca(0==A[2].length,0==z[2].length)||Ca(A[2],z[2])}while(0==c)}return c},Ca=function(a,b){return a<b?-1:a>b?1:0};Math.random();
var Ea=function(a){return String(a).replace(/\-([a-z])/g,function(a,c){return c.toUpperCase()})},Fa=function(a){var b=r(void 0)?"undefined".replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08"):"\\s";return a.replace(new RegExp("(^"+(b?"|["+b+"]+":"")+")([a-z])","g"),function(a,b,e){return b+e.toUpperCase()})};var Ga=function(a){return a},Ha=function(a){return a},Ia=function(a){return a},Ja=function(a){return a};var B=Array.prototype,Ka=B.indexOf?function(a,b,c){return B.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(r(a))return r(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},La=B.lastIndexOf?function(a,b,c){return B.lastIndexOf.call(a,b,null==c?a.length-1:c)}:function(a,b,c){c=null==c?a.length-1:c;0>c&&(c=Math.max(0,a.length+c));if(r(a))return r(b)&&1==b.length?a.lastIndexOf(b,c):-1;for(;0<=c;c--)if(c in a&&a[c]===b)return c;
return-1},D=B.forEach?function(a,b,c){B.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=r(a)?a.split(""):a,g=0;g<d;g++)g in e&&b.call(c,e[g],g,a)},Ma=function(a,b){for(var c=r(a)?a.split(""):a,d=a.length-1;0<=d;--d)d in c&&b.call(void 0,c[d],d,a)},Na=B.filter?function(a,b,c){return B.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=[],g=0,h=r(a)?a.split(""):a,k=0;k<d;k++)if(k in h){var q=h[k];b.call(c,q,k,a)&&(e[g++]=q)}return e},Oa=B.map?function(a,b,c){return B.map.call(a,b,c)}:
function(a,b,c){for(var d=a.length,e=Array(d),g=r(a)?a.split(""):a,h=0;h<d;h++)h in g&&(e[h]=b.call(c,g[h],h,a));return e},Pa=B.some?function(a,b,c){return B.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=r(a)?a.split(""):a,g=0;g<d;g++)if(g in e&&b.call(c,e[g],g,a))return!0;return!1},Qa=B.every?function(a,b,c){return B.every.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=r(a)?a.split(""):a,g=0;g<d;g++)if(g in e&&!b.call(c,e[g],g,a))return!1;return!0},Sa=function(a){var b;a:{b=Ra;for(var c=
a.length,d=r(a)?a.split(""):a,e=0;e<c;e++)if(e in d&&b.call(void 0,d[e],e,a)){b=e;break a}b=-1}return 0>b?null:r(a)?a.charAt(b):a[b]},Ta=function(a,b){return 0<=Ka(a,b)},Ua=function(a){if(!p(a))for(var b=a.length-1;0<=b;b--)delete a[b];a.length=0},Va=function(a,b){var c=Ka(a,b),d;(d=0<=c)&&B.splice.call(a,c,1);return d},Wa=function(a){return B.concat.apply(B,arguments)},Xa=function(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]},Za=function(a,b,c,d){B.splice.apply(a,
Ya(arguments,1))},Ya=function(a,b,c){return 2>=arguments.length?B.slice.call(a,b):B.slice.call(a,b,c)};var $a=[],ab=[],bb=!1,cb=function(a){$a[$a.length]=a;if(bb)for(var b=0;b<ab.length;b++)a(v(ab[b].Uh,ab[b]))};var db=function(a){db[" "](a);return a};db[" "]=n;var eb=function(a,b){for(var c in a)b.call(void 0,a[c],c,a)},fb=function(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b},gb=function(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b},hb=function(a){for(var b in a)return!1;return!0},ib=function(a,b,c){if(b in a)throw Error('The object already contains the key "'+b+'"');a[b]=c},jb=function(a,b){return b in a?a[b]:void 0},kb="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),lb=function(a,b){for(var c,
d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var g=0;g<kb.length;g++)c=kb[g],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}},mb=function(a){var b=arguments.length;if(1==b&&p(arguments[0]))return mb.apply(null,arguments[0]);for(var c={},d=0;d<b;d++)c[arguments[d]]=!0;return c};var nb;a:{var ob=l.navigator;if(ob){var pb=ob.userAgent;if(pb){nb=pb;break a}}nb=""}var E=function(a){return-1!=nb.indexOf(a)};var qb=function(){return E("Opera")||E("OPR")},rb=function(){return E("Edge")||E("Trident")||E("MSIE")},sb=function(){return(E("Chrome")||E("CriOS"))&&!qb()&&!rb()};var tb=function(){return E("Edge")};var ub=function(){return E("iPhone")&&!E("iPod")&&!E("iPad")};var vb=qb(),F=rb(),wb=E("Gecko")&&!(-1!=nb.toLowerCase().indexOf("webkit")&&!tb())&&!(E("Trident")||E("MSIE"))&&!tb(),G=-1!=nb.toLowerCase().indexOf("webkit")&&!tb(),xb=G&&E("Mobile"),yb=E("Macintosh"),zb=E("Android"),Ab=ub(),Bb=E("iPad"),Cb=function(){var a=nb;if(wb)return/rv\:([^\);]+)(\)|;)/.exec(a);if(F&&tb())return/Edge\/([\d\.]+)/.exec(a);if(F)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(G)return/WebKit\/(\S+)/.exec(a)},Db=function(){var a=l.document;return a?a.documentMode:void 0},Eb=
function(){if(vb&&l.opera){var a=l.opera.version;return u(a)?a():a}var a="",b=Cb();b&&(a=b?b[1]:"");return F&&!tb()&&(b=Db(),b>parseFloat(a))?String(b):a}(),Fb={},H=function(a){return Fb[a]||(Fb[a]=0<=Da(Eb,a))},Hb=function(){return F&&(tb()||9<=Gb)},Ib=l.document,Jb=Db(),Gb=!Ib||!F||!Jb&&tb()?void 0:Jb||("CSS1Compat"==Ib.compatMode?parseInt(Eb,10):5);var Kb=!F||Hb(),Lb=!F||Hb(),Mb=F&&!H("9");!G||H("528");wb&&H("1.9b")||F&&H("8")||vb&&H("9.5")||G&&H("528");wb&&!H("8")||F&&H("9");var I=function(){this.ec=this.ec;this.Mb=this.Mb};I.prototype.ec=!1;I.prototype.isDisposed=function(){return this.ec};I.prototype.N=function(){this.ec||(this.ec=!0,this.j())};var J=function(a,b){var c=ma(Nb,b);a.ec?c.call(void 0):(a.Mb||(a.Mb=[]),a.Mb.push(m(void 0)?v(c,void 0):c))};I.prototype.j=function(){if(this.Mb)for(;this.Mb.length;)this.Mb.shift()()};var Nb=function(a){a&&"function"==typeof a.N&&a.N()};var Ob=function(a,b){this.type=a;this.currentTarget=this.target=b;this.defaultPrevented=this.Pb=!1;this.zh=!0};Ob.prototype.stopPropagation=function(){this.Pb=!0};Ob.prototype.preventDefault=function(){this.defaultPrevented=!0;this.zh=!1};var K=function(a,b){Ob.call(this,a?a.type:"");this.relatedTarget=this.currentTarget=this.target=null;this.charCode=this.keyCode=this.button=this.screenY=this.screenX=this.clientY=this.clientX=this.offsetY=this.offsetX=0;this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.state=null;this.Tf=!1;this.Fa=null;a&&this.Ra(a,b)};x(K,Ob);var Pb=[1,4,2];
K.prototype.Ra=function(a,b){var c=this.type=a.type;this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(wb){var e;a:{try{db(d.nodeName);e=!0;break a}catch(g){}e=!1}e||(d=null)}}else"mouseover"==c?d=a.fromElement:"mouseout"==c&&(d=a.toElement);this.relatedTarget=d;this.offsetX=G||void 0!==a.offsetX?a.offsetX:a.layerX;this.offsetY=G||void 0!==a.offsetY?a.offsetY:a.layerY;this.clientX=void 0!==a.clientX?a.clientX:a.pageX;this.clientY=void 0!==a.clientY?a.clientY:a.pageY;
this.screenX=a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.Tf=yb?a.metaKey:a.ctrlKey;this.state=a.state;this.Fa=a;a.defaultPrevented&&this.preventDefault()};var Qb=function(a){return Kb?0==a.Fa.button:"click"==a.type?!0:!!(a.Fa.button&Pb[0])};
K.prototype.stopPropagation=function(){K.b.stopPropagation.call(this);this.Fa.stopPropagation?this.Fa.stopPropagation():this.Fa.cancelBubble=!0};K.prototype.preventDefault=function(){K.b.preventDefault.call(this);var a=this.Fa;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,Mb)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};var Rb="closure_listenable_"+(1E6*Math.random()|0),Sb=function(a){return!(!a||!a[Rb])},Tb=0;var Ub=function(a,b,c,d,e){this.listener=a;this.ze=null;this.src=b;this.type=c;this.Nd=!!d;this.je=e;this.key=++Tb;this.wc=this.Md=!1},Vb=function(a){a.wc=!0;a.listener=null;a.ze=null;a.src=null;a.je=null};var Wb=function(a){this.src=a;this.ia={};this.Ad=0};Wb.prototype.add=function(a,b,c,d,e){var g=a.toString();a=this.ia[g];a||(a=this.ia[g]=[],this.Ad++);var h=Xb(a,b,d,e);-1<h?(b=a[h],c||(b.Md=!1)):(b=new Ub(b,this.src,g,!!d,e),b.Md=c,a.push(b));return b};Wb.prototype.remove=function(a,b,c,d){a=a.toString();if(!(a in this.ia))return!1;var e=this.ia[a];b=Xb(e,b,c,d);return-1<b?(Vb(e[b]),B.splice.call(e,b,1),0==e.length&&(delete this.ia[a],this.Ad--),!0):!1};
var Yb=function(a,b){var c=b.type;if(!(c in a.ia))return!1;var d=Va(a.ia[c],b);d&&(Vb(b),0==a.ia[c].length&&(delete a.ia[c],a.Ad--));return d};Wb.prototype.od=function(a){a=a&&a.toString();var b=0,c;for(c in this.ia)if(!a||c==a){for(var d=this.ia[c],e=0;e<d.length;e++)++b,Vb(d[e]);delete this.ia[c];this.Ad--}return b};Wb.prototype.Wc=function(a,b,c,d){a=this.ia[a.toString()];var e=-1;a&&(e=Xb(a,b,c,d));return-1<e?a[e]:null};
var Xb=function(a,b,c,d){for(var e=0;e<a.length;++e){var g=a[e];if(!g.wc&&g.listener==b&&g.Nd==!!c&&g.je==d)return e}return-1};var Zb="closure_lm_"+(1E6*Math.random()|0),$b={},ac=0,bc=function(a,b,c,d,e){if(p(b)){for(var g=0;g<b.length;g++)bc(a,b[g],c,d,e);return null}c=cc(c);return Sb(a)?a.h(b,c,d,e):dc(a,b,c,!1,d,e)},dc=function(a,b,c,d,e,g){if(!b)throw Error("Invalid event type");var h=!!e,k=ec(a);k||(a[Zb]=k=new Wb(a));c=k.add(b,c,d,e,g);if(c.ze)return c;d=fc();c.ze=d;d.src=a;d.listener=c;a.addEventListener?a.addEventListener(b.toString(),d,h):a.attachEvent(gc(b.toString()),d);ac++;return c},fc=function(){var a=hc,b=
Lb?function(c){return a.call(b.src,b.listener,c)}:function(c){c=a.call(b.src,b.listener,c);if(!c)return c};return b},ic=function(a,b,c,d,e){if(p(b)){for(var g=0;g<b.length;g++)ic(a,b[g],c,d,e);return null}c=cc(c);return Sb(a)?a.Y(b,c,d,e):dc(a,b,c,!0,d,e)},jc=function(a,b,c,d,e){if(p(b))for(var g=0;g<b.length;g++)jc(a,b[g],c,d,e);else c=cc(c),Sb(a)?a.ja(b,c,d,e):a&&(a=ec(a))&&(b=a.Wc(b,c,!!d,e))&&kc(b)},kc=function(a){if(fa(a)||!a||a.wc)return!1;var b=a.src;if(Sb(b))return Yb(b.bb,a);var c=a.type,
d=a.ze;b.removeEventListener?b.removeEventListener(c,d,a.Nd):b.detachEvent&&b.detachEvent(gc(c),d);ac--;(c=ec(b))?(Yb(c,a),0==c.Ad&&(c.src=null,b[Zb]=null)):Vb(a);return!0},gc=function(a){return a in $b?$b[a]:$b[a]="on"+a},mc=function(a,b,c,d){var e=!0;if(a=ec(a))if(b=a.ia[b.toString()])for(b=b.concat(),a=0;a<b.length;a++){var g=b[a];g&&g.Nd==c&&!g.wc&&(g=lc(g,d),e=e&&!1!==g)}return e},lc=function(a,b){var c=a.listener,d=a.je||a.src;a.Md&&kc(a);return c.call(d,b)},hc=function(a,b){if(a.wc)return!0;
if(!Lb){var c=b||ba("window.event"),d=new K(c,this),e=!0;if(!(0>c.keyCode||void 0!=c.returnValue)){a:{var g=!1;if(0==c.keyCode)try{c.keyCode=-1;break a}catch(h){g=!0}if(g||void 0==c.returnValue)c.returnValue=!0}c=[];for(g=d.currentTarget;g;g=g.parentNode)c.push(g);for(var g=a.type,k=c.length-1;!d.Pb&&0<=k;k--){d.currentTarget=c[k];var q=mc(c[k],g,!0,d),e=e&&q}for(k=0;!d.Pb&&k<c.length;k++)d.currentTarget=c[k],q=mc(c[k],g,!1,d),e=e&&q}return e}return lc(a,new K(b,this))},ec=function(a){a=a[Zb];return a instanceof
Wb?a:null},nc="__closure_events_fn_"+(1E9*Math.random()>>>0),cc=function(a){if(u(a))return a;a[nc]||(a[nc]=function(b){return a.handleEvent(b)});return a[nc]};cb(function(a){hc=a(hc)});var L=function(){I.call(this);this.bb=new Wb(this);this.ni=this;this.we=null};x(L,I);L.prototype[Rb]=!0;f=L.prototype;f.Ke=function(a){this.we=a};f.addEventListener=function(a,b,c,d){bc(this,a,b,c,d)};f.removeEventListener=function(a,b,c,d){jc(this,a,b,c,d)};
f.dispatchEvent=function(a){var b,c=this.we;if(c){b=[];for(var d=1;c;c=c.we)b.push(c),++d}c=this.ni;d=a.type||a;if(r(a))a=new Ob(a,c);else if(a instanceof Ob)a.target=a.target||c;else{var e=a;a=new Ob(d,c);lb(a,e)}var e=!0,g;if(b)for(var h=b.length-1;!a.Pb&&0<=h;h--)g=a.currentTarget=b[h],e=oc(g,d,!0,a)&&e;a.Pb||(g=a.currentTarget=c,e=oc(g,d,!0,a)&&e,a.Pb||(e=oc(g,d,!1,a)&&e));if(b)for(h=0;!a.Pb&&h<b.length;h++)g=a.currentTarget=b[h],e=oc(g,d,!1,a)&&e;return e};
f.j=function(){L.b.j.call(this);this.bb&&this.bb.od(void 0);this.we=null};f.h=function(a,b,c,d){return this.bb.add(String(a),b,!1,c,d)};f.Y=function(a,b,c,d){return this.bb.add(String(a),b,!0,c,d)};f.ja=function(a,b,c,d){return this.bb.remove(String(a),b,c,d)};var oc=function(a,b,c,d){b=a.bb.ia[String(b)];if(!b)return!0;b=b.concat();for(var e=!0,g=0;g<b.length;++g){var h=b[g];if(h&&!h.wc&&h.Nd==c){var k=h.listener,q=h.je||h.src;h.Md&&Yb(a.bb,h);e=!1!==k.call(q,d)&&e}}return e&&0!=d.zh};
L.prototype.Wc=function(a,b,c,d){return this.bb.Wc(String(a),b,c,d)};var pc=function(){L.call(this);this.l=0;this.endTime=this.startTime=null};x(pc,L);f=pc.prototype;f.Ha=function(){return 1==this.l};f.sc=function(){this.ka("begin")};f.qb=function(){this.ka("end")};f.ve=function(){this.ka("finish")};f.ka=function(a){this.dispatchEvent(a)};var qc=function(){pc.call(this);this.aa=[]};x(qc,pc);qc.prototype.add=function(a){Ta(this.aa,a)||(this.aa.push(a),bc(a,"finish",this.kh,!1,this))};qc.prototype.remove=function(a){Va(this.aa,a)&&jc(a,"finish",this.kh,!1,this)};qc.prototype.j=function(){D(this.aa,function(a){a.N()});this.aa.length=0;qc.b.j.call(this)};var rc=function(){qc.call(this);this.wa=0};x(rc,qc);
rc.prototype.play=function(a){if(0==this.aa.length)return!1;if(a||0==this.l)this.wa<this.aa.length&&0!=this.aa[this.wa].l&&this.aa[this.wa].stop(!1),this.wa=0,this.sc();else if(this.Ha())return!1;this.ka("play");-1==this.l&&this.ka("resume");this.startTime=w();this.endTime=null;this.l=1;this.aa[this.wa].play(a);return!0};rc.prototype.pause=function(){this.Ha()&&(this.aa[this.wa].pause(),this.l=-1,this.ka("pause"))};
rc.prototype.stop=function(a){this.l=0;this.endTime=w();if(a)for(a=this.wa;a<this.aa.length;++a){var b=this.aa[a];0==b.l&&b.play();0==b.l||b.stop(!0)}else this.wa<this.aa.length&&this.aa[this.wa].stop(!1);this.ka("stop");this.qb()};rc.prototype.kh=function(){this.Ha()&&(this.wa++,this.wa<this.aa.length?this.aa[this.wa].play():(this.endTime=w(),this.l=0,this.ve(),this.qb()))};var sc=function(a,b,c){this.vj=c;this.Ci=a;this.De=b;this.ue=0;this.ke=null};sc.prototype.get=function(){var a;0<this.ue?(this.ue--,a=this.ke,this.ke=a.next,a.next=null):a=this.Ci();return a};sc.prototype.put=function(a){this.De(a);this.ue<this.vj&&(this.ue++,a.next=this.ke,this.ke=a)};var tc=function(a){l.setTimeout(function(){throw a;},0)},xc=function(a){a=uc(a);!u(l.setImmediate)||l.Window&&l.Window.prototype&&l.Window.prototype.setImmediate==l.setImmediate?(vc||(vc=wc()),vc(a)):l.setImmediate(a)},vc,wc=function(){var a=l.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!E("Presto")&&(a=function(){var a=document.createElement("IFRAME");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=
a.contentWindow,a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=v(function(a){if(("*"==d||a.origin==d)&&a.data==c)this.port1.onmessage()},this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&!rb()){var b=new a,c={},d=c;b.port1.onmessage=function(){if(m(c.next)){c=c.next;var a=c.zg;c.zg=null;a()}};return function(a){d.next=
{zg:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(a){var b=document.createElement("SCRIPT");b.onreadystatechange=function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){l.setTimeout(a,0)}},uc=function(a){return a};cb(function(a){uc=a});var yc=function(){this.Xe=this.Ec=null},Ac=new sc(function(){return new zc},function(a){a.reset()},100);yc.prototype.add=function(a,b){var c=Ac.get();c.set(a,b);this.Xe?this.Xe.next=c:this.Ec=c;this.Xe=c};yc.prototype.remove=function(){var a=null;this.Ec&&(a=this.Ec,this.Ec=this.Ec.next,this.Ec||(this.Xe=null),a.next=null);return a};var zc=function(){this.next=this.scope=this.rf=null};zc.prototype.set=function(a,b){this.rf=a;this.scope=b;this.next=null};
zc.prototype.reset=function(){this.next=this.scope=this.rf=null};var Fc=function(a,b){Bc||Cc();Dc||(Bc(),Dc=!0);Ec.add(a,b)},Bc,Cc=function(){if(l.Promise&&l.Promise.resolve){var a=l.Promise.resolve();Bc=function(){a.then(Gc)}}else Bc=function(){xc(Gc)}},Dc=!1,Ec=new yc,Gc=function(){for(var a=null;a=Ec.remove();){try{a.rf.call(a.scope)}catch(b){tc(b)}Ac.put(a)}Dc=!1};var Hc=function(a){a.prototype.then=a.prototype.then;a.prototype.$goog_Thenable=!0},Ic=function(a){if(!a)return!1;try{return!!a.$goog_Thenable}catch(b){return!1}};var M=function(a,b){this.l=0;this.sa=void 0;this.Wb=this.ib=this.B=null;this.be=this.qf=!1;if(a==Jc)Kc(this,2,b);else try{var c=this;a.call(b,function(a){Kc(c,2,a)},function(a){Kc(c,3,a)})}catch(d){Kc(this,3,d)}},Lc=function(){this.next=this.context=this.tc=this.jd=this.yb=null;this.Hc=!1};Lc.prototype.reset=function(){this.context=this.tc=this.jd=this.yb=null;this.Hc=!1};
var Mc=new sc(function(){return new Lc},function(a){a.reset()},100),Nc=function(a,b,c){var d=Mc.get();d.jd=a;d.tc=b;d.context=c;return d},Jc=function(){},Oc=function(a){return new M(Jc,a)},Pc=function(){return new M(function(a,b){b(void 0)})},Rc=function(a){return new M(function(b,c){var d=a.length,e=[];if(d)for(var g=function(a,c){d--;e[a]=c;0==d&&b(e)},h=function(a){c(a)},k=0,q;q=a[k];k++)Qc(q,ma(g,k),h);else b(e)})},Tc=function(){var a,b,c=new M(function(c,e){a=c;b=e});return new Sc(c,a,b)};
M.prototype.then=function(a,b,c){return Uc(this,u(a)?a:null,u(b)?b:null,c)};Hc(M);var Qc=function(a,b,c,d){a instanceof M?Vc(a,Nc(b||n,c||null,d)):a.then(b,c,d)},Wc=function(a,b){var c=Nc(b,b,void 0);c.Hc=!0;Vc(a,c)};M.prototype.cancel=function(a){0==this.l&&Fc(function(){var b=new Xc(a);Yc(this,b)},this)};
var Yc=function(a,b){if(0==a.l)if(a.B){var c=a.B;if(c.ib){for(var d=0,e=null,g=null,h=c.ib;h&&(h.Hc||(d++,h.yb==a&&(e=h),!(e&&1<d)));h=h.next)e||(g=h);e&&(0==c.l&&1==d?Yc(c,b):(g?(d=g,d.next==c.Wb&&(c.Wb=d),d.next=d.next.next):Zc(c),$c(c,e,3,b)))}a.B=null}else Kc(a,3,b)},Vc=function(a,b){a.ib||2!=a.l&&3!=a.l||ad(a);a.Wb?a.Wb.next=b:a.ib=b;a.Wb=b},Uc=function(a,b,c,d){var e=Nc(null,null,null);e.yb=new M(function(a,h){e.jd=b?function(c){try{var e=b.call(d,c);a(e)}catch(t){h(t)}}:a;e.tc=c?function(b){try{var e=
c.call(d,b);!m(e)&&b instanceof Xc?h(b):a(e)}catch(t){h(t)}}:h});e.yb.B=a;Vc(a,e);return e.yb};M.prototype.Oh=function(a){this.l=0;Kc(this,2,a)};M.prototype.Ph=function(a){this.l=0;Kc(this,3,a)};
var Kc=function(a,b,c){if(0==a.l){if(a==c)b=3,c=new TypeError("Promise cannot resolve to itself");else{if(Ic(c)){a.l=1;Qc(c,a.Oh,a.Ph,a);return}if(ga(c))try{var d=c.then;if(u(d)){bd(a,c,d);return}}catch(e){b=3,c=e}}a.sa=c;a.l=b;a.B=null;ad(a);3!=b||c instanceof Xc||cd(a,c)}},bd=function(a,b,c){a.l=1;var d=!1,e=function(b){d||(d=!0,a.Oh(b))},g=function(b){d||(d=!0,a.Ph(b))};try{c.call(b,e,g)}catch(h){g(h)}},ad=function(a){a.qf||(a.qf=!0,Fc(a.Ji,a))},Zc=function(a){var b=null;a.ib&&(b=a.ib,a.ib=b.next,
b.next=null);a.ib||(a.Wb=null);return b};M.prototype.Ji=function(){for(var a=null;a=Zc(this);)$c(this,a,this.l,this.sa);this.qf=!1};var $c=function(a,b,c,d){if(3==c&&b.tc&&!b.Hc)for(;a&&a.be;a=a.B)a.be=!1;if(b.yb)b.yb.B=null,dd(b,c,d);else try{b.Hc?b.jd.call(b.context):dd(b,c,d)}catch(e){ed.call(null,e)}Mc.put(b)},dd=function(a,b,c){2==b?a.jd.call(a.context,c):a.tc&&a.tc.call(a.context,c)},cd=function(a,b){a.be=!0;Fc(function(){a.be&&ed.call(null,b)})},ed=tc,Xc=function(a){y.call(this,a)};x(Xc,y);
Xc.prototype.name="cancel";var Sc=function(a,b,c){this.wh=a;this.resolve=b;this.reject=c};var fd=function(a,b,c){if(u(a))c&&(a=v(a,c));else if(a&&"function"==typeof a.handleEvent)a=v(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<b?-1:l.setTimeout(a,b||0)};var gd=function(a,b,c){I.call(this);this.Mf=a;this.oj=b||0;this.pa=c;this.wi=v(this.Gi,this)};x(gd,I);f=gd.prototype;f.S=0;f.j=function(){gd.b.j.call(this);this.stop();delete this.Mf;delete this.pa};f.start=function(a){this.stop();this.S=fd(this.wi,m(a)?a:this.oj)};f.stop=function(){this.nc()&&l.clearTimeout(this.S);this.S=0};f.nc=function(){return 0!=this.S};f.Gi=function(){this.S=0;this.Mf&&this.Mf.call(this.pa)};var hd={},id=null,jd=function(a){a=ja(a);delete hd[a];hb(hd)&&id&&id.stop()},ld=function(){id||(id=new gd(function(){kd()},20));var a=id;a.nc()||a.start()},kd=function(){var a=w();eb(hd,function(b){md(b,a)});hb(hd)||ld()};var nd=function(a,b,c,d){pc.call(this);if(!p(a)||!p(b))throw Error("Start and end parameters must be arrays");if(a.length!=b.length)throw Error("Start and end points must be the same length");this.wd=a;this.Hi=b;this.duration=c;this.qg=d;this.coords=[];this.Ba=0};x(nd,pc);
nd.prototype.play=function(a){if(a||0==this.l)this.Ba=0,this.coords=this.wd;else if(this.Ha())return!1;jd(this);this.startTime=a=w();-1==this.l&&(this.startTime-=this.duration*this.Ba);this.endTime=this.startTime+this.duration;this.Ba||this.sc();this.ka("play");-1==this.l&&this.ka("resume");this.l=1;var b=ja(this);b in hd||(hd[b]=this);ld();md(this,a);return!0};nd.prototype.stop=function(a){jd(this);this.l=0;a&&(this.Ba=1);od(this,this.Ba);this.ka("stop");this.qb()};
nd.prototype.pause=function(){this.Ha()&&(jd(this),this.l=-1,this.ka("pause"))};nd.prototype.j=function(){0==this.l||this.stop(!1);this.ka("destroy");nd.b.j.call(this)};var md=function(a,b){a.Ba=(b-a.startTime)/(a.endTime-a.startTime);1<=a.Ba&&(a.Ba=1);od(a,a.Ba);1==a.Ba?(a.l=0,jd(a),a.ve(),a.qb()):a.Ha()&&a.hd()},od=function(a,b){u(a.qg)&&(b=a.qg(b));a.coords=Array(a.wd.length);for(var c=0;c<a.wd.length;c++)a.coords[c]=(a.Hi[c]-a.wd[c])*b+a.wd[c]};nd.prototype.hd=function(){this.ka("animate")};
nd.prototype.ka=function(a){this.dispatchEvent(new pd(a,this))};var pd=function(a,b){Ob.call(this,a);this.coords=b.coords;this.x=b.coords[0];this.y=b.coords[1];this.z=b.coords[2];this.duration=b.duration;this.Ba=b.Ba;this.state=b.l};x(pd,Ob);var qd=function(a,b,c,d,e,g){nd.call(this,[c.left,c.top],[c.right,c.bottom],d,e);this.m=a;this.Ub=b;this.Fi=!!g};x(qd,nd);qd.prototype.hd=function(){this.m.style.backgroundPosition=-Math.floor(this.coords[0]/this.Ub.width)*this.Ub.width+"px "+-Math.floor(this.coords[1]/this.Ub.height)*this.Ub.height+"px";qd.b.hd.call(this)};qd.prototype.ve=function(){this.Fi||this.play(!0);qd.b.ve.call(this)};
var rd=function(a){a=a.m.style;a.backgroundPosition="";"undefined"!=typeof a.backgroundPositionX&&(a.backgroundPositionX="",a.backgroundPositionY="")};qd.prototype.j=function(){qd.b.j.call(this);this.m=null};mb("area base br col command embed hr img input keygen link meta param source track wbr".split(" "));var td=function(){this.Pj="";this.ji=sd},sd={};var vd=function(){this.Vf="";this.ki=ud};vd.prototype.Sg=function(){return 1};var ud={};var xd=function(){this.Vf="";this.ii=wd;this.Ei=null};xd.prototype.Sg=function(){return this.Ei};var wd={};var yd=function(a,b){this.x=m(a)?a:0;this.y=m(b)?b:0};yd.prototype.clone=function(){return new yd(this.x,this.y)};yd.prototype.ceil=function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this};yd.prototype.floor=function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this};yd.prototype.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this};var N=function(a,b){this.width=a;this.height=b};f=N.prototype;f.clone=function(){return new N(this.width,this.height)};f.Sa=function(){return!(this.width*this.height)};f.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};f.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};f.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};var zd=!F||Hb(),Ad=!wb&&!F||F&&Hb()||wb&&H("1.9.1"),Bd=F&&!H("9");var Ed=function(a){return a?new Cd(Dd(a)):qa||(qa=new Cd)},Fd=function(a){var b=document;return r(a)?b.getElementById(a):a},Hd=function(a,b){var c=b||document,d=null;return(d=c.getElementsByClassName?c.getElementsByClassName(a)[0]:c.querySelectorAll&&c.querySelector?c.querySelector("."+a):Gd(a,b)[0])||null},Gd=function(a,b){var c,d,e,g;c=document;c=b||c;if(c.querySelectorAll&&c.querySelector&&a)return c.querySelectorAll(""+(a?"."+a:""));if(a&&c.getElementsByClassName){var h=c.getElementsByClassName(a);
return h}h=c.getElementsByTagName("*");if(a){g={};for(d=e=0;c=h[d];d++){var k=c.className;"function"==typeof k.split&&Ta(k.split(/\s+/),a)&&(g[e++]=c)}g.length=e;return g}return h},Jd=function(a,b){eb(b,function(b,d){"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:d in Id?a.setAttribute(Id[d],b):0==d.lastIndexOf("aria-",0)||0==d.lastIndexOf("data-",0)?a.setAttribute(d,b):a[d]=b})},Id={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",
height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"},Ld=function(a,b,c,d){function e(c){c&&b.appendChild(r(c)?a.createTextNode(c):c)}for(;d<c.length;d++){var g=c[d];!ea(g)||ga(g)&&0<g.nodeType?e(g):D(Kd(g)?Xa(g):g,e)}},Md=function(a,b){Ld(Dd(a),a,arguments,1)},Nd=function(a){for(var b;b=a.firstChild;)a.removeChild(b)},Od=function(a){return a&&a.parentNode?a.parentNode.removeChild(a):null},Pd=function(a){return Ad&&void 0!=a.children?
a.children:Na(a.childNodes,function(a){return 1==a.nodeType})},Qd=function(a){if(void 0!=a.firstElementChild)a=a.firstElementChild;else for(a=a.firstChild;a&&1!=a.nodeType;)a=a.nextSibling;return a},Rd=function(a,b){if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a},Dd=function(a){return 9==a.nodeType?a:a.ownerDocument||a.document},Sd=function(a,b){if("textContent"in
a)a.textContent=b;else if(3==a.nodeType)a.data=b;else if(a.firstChild&&3==a.firstChild.nodeType){for(;a.lastChild!=a.firstChild;)a.removeChild(a.lastChild);a.firstChild.data=b}else{Nd(a);var c=Dd(a);a.appendChild(c.createTextNode(String(b)))}},Td={SCRIPT:1,STYLE:1,HEAD:1,IFRAME:1,OBJECT:1},Ud={IMG:" ",BR:"\n"},Vd=function(a,b){b?a.tabIndex=0:(a.tabIndex=-1,a.removeAttribute("tabIndex"))},Wd=function(a){a=a.getAttributeNode("tabindex");return null!=a&&a.specified},Xd=function(a){a=a.tabIndex;return fa(a)&&
0<=a&&32768>a},Zd=function(a){if(Bd&&"innerText"in a)a=a.innerText.replace(/(\r\n|\r|\n)/g,"\n");else{var b=[];Yd(a,b,!0);a=b.join("")}a=a.replace(/ \xAD /g," ").replace(/\xAD/g,"");a=a.replace(/\u200B/g,"");Bd||(a=a.replace(/ +/g," "));" "!=a&&(a=a.replace(/^\s*/,""));return a},$d=function(a){var b=[];Yd(a,b,!1);return b.join("")},Yd=function(a,b,c){if(!(a.nodeName in Td))if(3==a.nodeType)c?b.push(String(a.nodeValue).replace(/(\r\n|\r|\n)/g,"")):b.push(a.nodeValue);else if(a.nodeName in Ud)b.push(Ud[a.nodeName]);
else for(a=a.firstChild;a;)Yd(a,b,c),a=a.nextSibling},Kd=function(a){if(a&&"number"==typeof a.length){if(ga(a))return"function"==typeof a.item||"string"==typeof a.item;if(u(a))return"function"==typeof a.item}return!1},Cd=function(a){this.Pa=a||l.document||document};f=Cd.prototype;f.mb=Ed;f.a=function(a){return r(a)?this.Pa.getElementById(a):a};f.Vc=function(a,b){return Hd(a,b||this.Pa)};f.J=function(a,b){return Hd(a,b||this.Pa)};
f.F=function(a,b,c){var d=this.Pa,e=arguments,g=e[0],h=e[1];if(!zd&&h&&(h.name||h.type)){g=["<",g];h.name&&g.push(' name="',Ba(h.name),'"');if(h.type){g.push(' type="',Ba(h.type),'"');var k={};lb(k,h);delete k.type;h=k}g.push(">");g=g.join("")}g=d.createElement(g);h&&(r(h)?g.className=h:p(h)?g.className=h.join(" "):Jd(g,h));2<e.length&&Ld(d,g,e,2);return g};f.createElement=function(a){return this.Pa.createElement(a)};f.createTextNode=function(a){return this.Pa.createTextNode(String(a))};
f.appendChild=function(a,b){a.appendChild(b)};f.removeNode=Od;f.contains=Rd;f.Gf=function(a){var b;(b="A"==a.tagName||"INPUT"==a.tagName||"TEXTAREA"==a.tagName||"SELECT"==a.tagName||"BUTTON"==a.tagName?!a.disabled&&(!Wd(a)||Xd(a)):Wd(a)&&Xd(a))&&F?(a=u(a.getBoundingClientRect)?a.getBoundingClientRect():{height:a.offsetHeight,width:a.offsetWidth},a=null!=a&&0<a.height&&0<a.width):a=b;return a};var ae=function(a,b,c,d){this.top=a;this.right=b;this.bottom=c;this.left=d};f=ae.prototype;f.clone=function(){return new ae(this.top,this.right,this.bottom,this.left)};f.contains=function(a){return this&&a?a instanceof ae?a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom:a.x>=this.left&&a.x<=this.right&&a.y>=this.top&&a.y<=this.bottom:!1};
f.ceil=function(){this.top=Math.ceil(this.top);this.right=Math.ceil(this.right);this.bottom=Math.ceil(this.bottom);this.left=Math.ceil(this.left);return this};f.floor=function(){this.top=Math.floor(this.top);this.right=Math.floor(this.right);this.bottom=Math.floor(this.bottom);this.left=Math.floor(this.left);return this};f.round=function(){this.top=Math.round(this.top);this.right=Math.round(this.right);this.bottom=Math.round(this.bottom);this.left=Math.round(this.left);return this};var ce=function(a,b,c){if(r(b))(b=be(a,b))&&(a.style[b]=c);else for(var d in b){c=a;var e=b[d],g=be(c,d);g&&(c.style[g]=e)}},de={},be=function(a,b){var c=de[b];if(!c){var d=Ea(b),c=d;void 0===a.style[d]&&(d=(G?"Webkit":wb?"Moz":F?"ms":vb?"O":null)+Fa(d),void 0!==a.style[d]&&(c=d));de[b]=c}return c},ee=function(a,b){var c=Dd(a);return c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,null))?c[b]||c.getPropertyValue(b)||"":""},fe=function(a,b){return ee(a,b)||(a.currentStyle?
a.currentStyle[b]:null)||a.style&&a.style[b]},ge=function(a){"number"==typeof a&&(a=Math.round(a)+"px");return a},ie=function(a){var b=he;if("none"!=fe(a,"display"))return b(a);var c=a.style,d=c.display,e=c.visibility,g=c.position;c.visibility="hidden";c.position="absolute";c.display="inline";a=b(a);c.display=d;c.position=g;c.visibility=e;return a},he=function(a){var b=a.offsetWidth,c=a.offsetHeight,d=G&&!b&&!c;if((!m(b)||d)&&a.getBoundingClientRect){var e;a:{try{e=a.getBoundingClientRect()}catch(g){e=
{left:0,top:0,right:0,bottom:0};break a}F&&a.ownerDocument.body&&(a=a.ownerDocument,e.left-=a.documentElement.clientLeft+a.body.clientLeft,e.top-=a.documentElement.clientTop+a.body.clientTop)}return new N(e.right-e.left,e.bottom-e.top)}return new N(b,c)},je=function(a,b){var c=a.style;"opacity"in c?c.opacity=b:"MozOpacity"in c?c.MozOpacity=b:"filter"in c&&(c.filter=""===b?"":"alpha(opacity="+100*b+")")},ke=function(a,b){a.style.display=b?"":"none"},le=wb?"MozUserSelect":G?"WebkitUserSelect":null,
me=function(a,b){var c=a.currentStyle?a.currentStyle[b]:null,d;if(c)if(/^\d+px?$/.test(c))d=parseInt(c,10);else{d=a.style.left;var e=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;a.style.left=c;c=a.style.pixelLeft;a.style.left=d;a.runtimeStyle.left=e;d=c}else d=0;return d};F&&H(12);var ne=function(a,b,c,d,e){nd.call(this,b,c,d,e);this.element=a};x(ne,nd);f=ne.prototype;f.Ve=n;f.fh=function(){m(this.Qb)||(this.Qb="rtl"==fe(this.element,"direction"));return this.Qb};f.hd=function(){this.Ve();ne.b.hd.call(this)};f.qb=function(){this.Ve();ne.b.qb.call(this)};f.sc=function(){this.Ve();ne.b.sc.call(this)};var oe=function(a,b,c,d,e){fa(b)&&(b=[b]);fa(c)&&(c=[c]);ne.call(this,a,b,c,d,e);if(1!=b.length||1!=c.length)throw Error("Start and end points must be 1D");this.te=-1};x(oe,ne);
var pe=1/1024;oe.prototype.Ve=function(){var a=this.coords[0];Math.abs(a-this.te)>=pe&&(je(this.element,a),this.te=a)};oe.prototype.sc=function(){this.te=-1;oe.b.sc.call(this)};oe.prototype.qb=function(){this.te=-1;oe.b.qb.call(this)};var qe=function(a,b,c){oe.call(this,a,1,0,b,c)};x(qe,oe);var re={},se={},te={},ue={},ve={},we=function(){throw Error("Do not instantiate directly");};we.prototype.mf=null;we.prototype.ya=function(){return this.content};we.prototype.toString=function(){return this.content};var ze=function(a,b,c){a.innerHTML=xe(b(c||ye,void 0,void 0))},Ae=function(a,b,c,d){d=(d||Ed()).createElement("DIV");a=xe(a(b||ye,void 0,c));d.innerHTML=a;return 1==d.childNodes.length&&(a=d.firstChild,1==a.nodeType)?a:d},xe=function(a){if(!ga(a))return String(a);if(a instanceof we){if(a.Ab===re)return Ia(a.ya());if(a.Ab===ve)return Ba(a.ya())}return"zSoyz"},ye={};var Be=E("Firefox"),Ce=ub()||E("iPod"),De=E("iPad"),Ee=E("Android")&&!(sb()||E("Firefox")||qb()||E("Silk")),Fe=sb(),Ge=E("Safari")&&!(sb()||E("Coast")||qb()||rb()||E("Silk")||E("Android"))&&!(ub()||E("iPad")||E("iPod"));var He=function(a){return(a=a.exec(nb))?a[1]:""},Ie=function(){if(Be)return He(/Firefox\/([0-9.]+)/);if(F||vb)return Eb;if(Fe)return He(/Chrome\/([0-9.]+)/);if(Ge&&!(ub()||E("iPad")||E("iPod")))return He(/Version\/([0-9.]+)/);if(Ce||De){var a;if(a=/Version\/(\S+).*Mobile\/(\S+)/.exec(nb))return a[1]+"."+a[2]}else if(Ee)return(a=He(/Android\s+([0-9.]+)/))?a:He(/Version\/([0-9.]+)/);return""}();var Je=function(a){var b=!1,c;return function(){b||(c=a(),b=!0);return c}}(function(){var a;(a=!F)||(a=0<=Da(Ie,9));return a});var Ke=function(){return xb||zb||Bb||Ab},Le=function(){if(Ke()){if(-1!=nb.indexOf("Opera Mini")||-1!=nb.indexOf("NokiaBrowser"))return!1}else{if(Fe)return H("532");if(Be)return H("1.9");if(F)return H("7.0");if(vb)return H("10.10");if(Ge)return H("526.11.2")}return!0};var Me;var Ne=function(a){if(a.classList)return a.classList;a=a.className;return r(a)&&a.match(/\S+/g)||[]},Oe=function(a,b){return a.classList?a.classList.contains(b):Ta(Ne(a),b)},Pe=function(a,b){a.classList?a.classList.add(b):Oe(a,b)||(a.className+=0<a.className.length?" "+b:b)},Qe=function(a,b){if(a.classList)D(b,function(b){Pe(a,b)});else{var c={};D(Ne(a),function(a){c[a]=!0});D(b,function(a){c[a]=!0});a.className="";for(var d in c)a.className+=0<a.className.length?" "+d:d}},Re=function(a,b){a.classList?
a.classList.remove(b):Oe(a,b)&&(a.className=Na(Ne(a),function(a){return a!=b}).join(" "))},Se=function(a,b){a.classList?D(b,function(b){Re(a,b)}):a.className=Na(Ne(a),function(a){return!Ta(b,a)}).join(" ")};var O=function(a){I.call(this);this.pa=a;this.K={}};x(O,I);var Te=[];O.prototype.h=function(a,b,c,d){p(b)||(b&&(Te[0]=b.toString()),b=Te);for(var e=0;e<b.length;e++){var g=bc(a,b[e],c||this.handleEvent,d||!1,this.pa||this);if(!g)break;this.K[g.key]=g}return this};O.prototype.Y=function(a,b,c,d){return Ue(this,a,b,c,d)};var Ue=function(a,b,c,d,e,g){if(p(c))for(var h=0;h<c.length;h++)Ue(a,b,c[h],d,e,g);else{b=ic(b,c,d||a.handleEvent,e,g||a.pa||a);if(!b)return a;a.K[b.key]=b}return a};
O.prototype.ja=function(a,b,c,d,e){if(p(b))for(var g=0;g<b.length;g++)this.ja(a,b[g],c,d,e);else c=c||this.handleEvent,e=e||this.pa||this,c=cc(c),d=!!d,b=Sb(a)?a.Wc(b,c,d,e):a?(a=ec(a))?a.Wc(b,c,d,e):null:null,b&&(kc(b),delete this.K[b.key]);return this};O.prototype.od=function(){eb(this.K,kc);this.K={}};O.prototype.j=function(){O.b.j.call(this);this.od()};O.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented");};var Ve=function(){};ca(Ve);Ve.prototype.qc=0;var P=function(a){L.call(this);this.jb=a||Ed();this.Qb=We;this.S=null;this.T=!1;this.m=null;this.nb=void 0;this.ma=this.va=this.B=null;this.Sh=!1};x(P,L);P.prototype.lj=Ve.Ga();
var We=null,Xe=function(a,b){switch(a){case 1:return b?"disable":"enable";case 2:return b?"highlight":"unhighlight";case 4:return b?"activate":"deactivate";case 8:return b?"select":"unselect";case 16:return b?"check":"uncheck";case 32:return b?"focus":"blur";case 64:return b?"open":"close"}throw Error("Invalid component state");};f=P.prototype;f.getId=function(){return this.S||(this.S=":"+(this.lj.qc++).toString(36))};
f.Ac=function(a){if(this.B&&this.B.ma){var b=this.B.ma,c=this.S;c in b&&delete b[c];ib(this.B.ma,a,this)}this.S=a};f.a=function(){return this.m};f.Vc=function(a){return this.m?this.jb.Vc(a,this.m):null};f.J=function(a){return this.Vc(a)};
var Q=function(a){a.nb||(a.nb=new O(a));return a.nb},Ye=function(a,b){if(a==b)throw Error("Unable to set parent component");var c;if(c=b&&a.B&&a.S){c=a.B;var d=a.S;c=c.ma&&d?jb(c.ma,d)||null:null}if(c&&a.B!=b)throw Error("Unable to set parent component");a.B=b;P.b.Ke.call(a,b)};f=P.prototype;f.getParent=function(){return this.B};f.Ke=function(a){if(this.B&&this.B!=a)throw Error("Method not supported");P.b.Ke.call(this,a)};f.mb=function(){return this.jb};f.F=function(){this.m=this.jb.createElement("DIV")};
f.render=function(a){if(this.T)throw Error("Component already rendered");this.m||this.F();a?a.insertBefore(this.m,null):this.jb.Pa.body.appendChild(this.m);this.B&&!this.B.T||this.D()};f.cc=function(a){if(this.T)throw Error("Component already rendered");if(a&&this.Xb(a)){this.Sh=!0;var b=Dd(a);this.jb&&this.jb.Pa==b||(this.jb=Ed(a));this.ba(a);this.D()}else throw Error("Invalid element to decorate");};f.Xb=function(){return!0};f.ba=function(a){this.m=a};
f.D=function(){this.T=!0;Ze(this,function(a){!a.T&&a.a()&&a.D()})};f.kb=function(){Ze(this,function(a){a.T&&a.kb()});this.nb&&this.nb.od();this.T=!1};f.j=function(){this.T&&this.kb();this.nb&&(this.nb.N(),delete this.nb);Ze(this,function(a){a.N()});!this.Sh&&this.m&&Od(this.m);this.B=this.m=this.ma=this.va=null;P.b.j.call(this)};
var $e=function(a,b){var c=a.va?a.va.length:0;if(b.T&&!a.T)throw Error("Component already rendered");if(0>c||c>(a.va?a.va.length:0))throw Error("Child component index out of bounds");a.ma&&a.va||(a.ma={},a.va=[]);if(b.getParent()==a){var d=b.getId();a.ma[d]=b;Va(a.va,b)}else ib(a.ma,b.getId(),b);Ye(b,a);Za(a.va,c,0,b);b.T&&a.T&&b.getParent()==a?(d=a.Uc(),c=d.childNodes[c]||null,c!=b.a()&&d.insertBefore(b.a(),c)):a.T&&!b.T&&b.m&&b.m.parentNode&&1==b.m.parentNode.nodeType&&b.D()};P.prototype.Uc=function(){return this.m};
P.prototype.fh=function(){null==this.Qb&&(this.Qb="rtl"==fe(this.T?this.m:this.jb.Pa.body,"direction"));return this.Qb};P.prototype.Bc=function(a){if(this.T)throw Error("Component already rendered");this.Qb=a};var Ze=function(a,b){a.va&&D(a.va,b,void 0)};
P.prototype.removeChild=function(a,b){if(a){var c=r(a)?a:a.getId();a=this.ma&&c?jb(this.ma,c)||null:null;if(c&&a){var d=this.ma;c in d&&delete d[c];Va(this.va,a);b&&(a.kb(),a.m&&Od(a.m));Ye(a,null)}}if(!a)throw Error("Child is not in parent component");return a};var cf=function(a,b,c,d,e){if(!(F||G&&H("525")))return!0;if(yb&&e)return af(a);if(e&&!d)return!1;fa(b)&&(b=bf(b));if(!c&&(17==b||18==b||yb&&91==b))return!1;if(G&&d&&c)switch(a){case 220:case 219:case 221:case 192:case 186:case 189:case 187:case 188:case 190:case 191:case 192:case 222:return!1}if(F&&d&&b==a)return!1;switch(a){case 13:return!0;case 27:return!G}return af(a)},af=function(a){if(48<=a&&57>=a||96<=a&&106>=a||65<=a&&90>=a||G&&0==a)return!0;switch(a){case 32:case 63:case 107:case 109:case 110:case 111:case 186:case 59:case 189:case 187:case 61:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:return!0;
default:return!1}},bf=function(a){if(wb)a=df(a);else if(yb&&G)a:switch(a){case 93:a=91;break a}return a},df=function(a){switch(a){case 61:return 187;case 59:return 186;case 173:return 189;case 224:return 91;case 0:return 224;default:return a}};var ff=function(a,b){L.call(this);a&&ef(this,a,b)};x(ff,L);f=ff.prototype;f.m=null;f.qe=null;f.Hf=null;f.re=null;f.qa=-1;f.pb=-1;f.cf=!1;
var gf={3:13,12:144,63232:38,63233:40,63234:37,63235:39,63236:112,63237:113,63238:114,63239:115,63240:116,63241:117,63242:118,63243:119,63244:120,63245:121,63246:122,63247:123,63248:44,63272:46,63273:36,63275:35,63276:33,63277:34,63289:144,63302:45},hf={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},jf=F||G&&H("525"),kf=yb&&wb;
ff.prototype.ee=function(a){G&&(17==this.qa&&!a.ctrlKey||18==this.qa&&!a.altKey||yb&&91==this.qa&&!a.metaKey)&&(this.pb=this.qa=-1);-1==this.qa&&(a.ctrlKey&&17!=a.keyCode?this.qa=17:a.altKey&&18!=a.keyCode?this.qa=18:a.metaKey&&91!=a.keyCode&&(this.qa=91));jf&&!cf(a.keyCode,this.qa,a.shiftKey,a.ctrlKey,a.altKey)?this.handleEvent(a):(this.pb=bf(a.keyCode),kf&&(this.cf=a.altKey))};ff.prototype.$i=function(a){this.pb=this.qa=-1;this.cf=a.altKey};
ff.prototype.handleEvent=function(a){var b=a.Fa,c,d,e=b.altKey;F&&"keypress"==a.type?(c=this.pb,d=13!=c&&27!=c?b.keyCode:0):G&&"keypress"==a.type?(c=this.pb,d=0<=b.charCode&&63232>b.charCode&&af(c)?b.charCode:0):vb?(c=this.pb,d=af(c)?b.keyCode:0):(c=b.keyCode||this.pb,d=b.charCode||0,kf&&(e=this.cf),yb&&63==d&&224==c&&(c=191));var g=c=bf(c),h=b.keyIdentifier;c?63232<=c&&c in gf?g=gf[c]:25==c&&a.shiftKey&&(g=9):h&&h in hf&&(g=hf[h]);a=g==this.qa;this.qa=g;b=new lf(g,d,a,b);b.altKey=e;this.dispatchEvent(b)};
ff.prototype.a=function(){return this.m};var ef=function(a,b,c){a.re&&a.detach();a.m=b;a.qe=bc(a.m,"keypress",a,c);a.Hf=bc(a.m,"keydown",a.ee,c,a);a.re=bc(a.m,"keyup",a.$i,c,a)};ff.prototype.detach=function(){this.qe&&(kc(this.qe),kc(this.Hf),kc(this.re),this.re=this.Hf=this.qe=null);this.m=null;this.pb=this.qa=-1};ff.prototype.j=function(){ff.b.j.call(this);this.detach()};var lf=function(a,b,c,d){K.call(this,d);this.type="key";this.keyCode=a;this.charCode=b;this.repeat=c};x(lf,K);var mf=function(a,b,c){p(c)&&(c=c.join(" "));var d="aria-"+b;""===c||void 0==c?(Me||(Me={atomic:!1,autocomplete:"none",dropeffect:"none",haspopup:!1,live:"off",multiline:!1,multiselectable:!1,orientation:"vertical",readonly:!1,relevant:"additions text",required:!1,sort:"none",busy:!1,disabled:!1,hidden:!1,invalid:"false"}),c=Me,b in c?a.setAttribute(d,c[b]):a.removeAttribute(d)):a.setAttribute(d,c)};var nf=function(){},of;ca(nf);var pf=function(a,b){var c=new a;c.lb=function(){return b};return c},qf={button:"pressed",checkbox:"checked",menuitem:"selected",menuitemcheckbox:"checked",menuitemradio:"checked",radio:"checked",tab:"selected",treeitem:"selected"};f=nf.prototype;f.sf=function(){};f.F=function(a){return a.mb().F("DIV",rf(this,a).join(" "),a.ya())};f.Uc=function(a){return a};f.Pc=function(a,b,c){if(a=a.a?a.a():a){var d=[b];F&&!H("7")&&(d=sf(Ne(a),b),d.push(b));(c?Qe:Se)(a,d)}};f.Xb=function(){return!0};
f.cc=function(a,b){b.id&&a.Ac(b.id);var c=this.Uc(b);c&&c.firstChild?tf(a,c.firstChild.nextSibling?Xa(c.childNodes):c.firstChild):a.Bb=null;var d=0,e=this.lb(),g=this.lb(),h=!1,k=!1,q=!1,t=Xa(Ne(b));D(t,function(a){h||a!=e?k||a!=g?d|=uf(this,a):k=!0:(h=!0,g==e&&(k=!0));1==uf(this,a)&&Wd(c)&&Xd(c)&&Vd(c,!1)},this);a.l=d;h||(t.push(e),g==e&&(k=!0));k||t.push(g);var C=a.oa;C&&t.push.apply(t,C);if(F&&!H("7")){var A=sf(t);0<A.length&&(t.push.apply(t,A),q=!0)}if(!h||!k||C||q)b.className=t.join(" ");return b};
f.bh=function(a){a.fh()&&this.Bc(a.a(),!0);a.isEnabled()&&this.rd(a,a.Wa)};var vf=function(a,b,c){if(a=c||a.sf())c=b.getAttribute("role")||null,a!=c&&(a?b.setAttribute("role",a):b.removeAttribute("role"))};f=nf.prototype;f.ag=function(a,b){mf(a,"label",b)};
f.qd=function(a,b){var c=!b,d=F||vb?a.getElementsByTagName("*"):null;if(le){if(c=c?"none":"",a.style[le]=c,d)for(var e=0,g;g=d[e];e++)g.style[le]=c}else if(F||vb)if(c=c?"on":"",a.setAttribute("unselectable",c),d)for(e=0;g=d[e];e++)g.setAttribute("unselectable",c)};f.Bc=function(a,b){this.Pc(a,this.lb()+"-rtl",b)};f.Gf=function(a){var b;return a.ea&32&&(b=a.Hb())?Wd(b)&&Xd(b):!1};
f.rd=function(a,b){var c;if(a.ea&32&&(c=a.Hb())){if(!b&&a.Kb()){try{c.blur()}catch(d){}a.Kb()&&a.Vg()}(Wd(c)&&Xd(c))!=b&&Vd(c,b)}};f.eg=function(a,b){ke(a,b);a&&mf(a,"hidden",!b)};f.Ca=function(a,b,c){var d=a.a();if(d){var e=wf(this,b);e&&this.Pc(a,e,c);this.Ua(d,b,c)}};f.Ua=function(a,b,c){of||(of={1:"disabled",8:"selected",16:"checked",64:"expanded"});b=of[b];var d=a.getAttribute("role")||null;d&&(d=qf[d]||b,b="checked"==b||"selected"==b?d:b);b&&mf(a,b,c)};f.Hb=function(a){return a.a()};f.lb=function(){return"goog-control"};
var rf=function(a,b){var c=a.lb(),d=[c],e=a.lb();e!=c&&d.push(e);c=b.l;for(e=[];c;){var g=c&-c;e.push(wf(a,g));c&=~g}d.push.apply(d,e);(c=b.oa)&&d.push.apply(d,c);F&&!H("7")&&d.push.apply(d,sf(d));return d},sf=function(a,b){var c=[];b&&(a=a.concat([b]));D([],function(d){!Qa(d,ma(Ta,a))||b&&!Ta(d,b)||c.push(d.join("_"))});return c},wf=function(a,b){a.Qd||xf(a);return a.Qd[b]},uf=function(a,b){if(!a.Hh){a.Qd||xf(a);var c=a.Qd,d={},e;for(e in c)d[c[e]]=e;a.Hh=d}c=parseInt(a.Hh[b],10);return isNaN(c)?
0:c},xf=function(a){var b=a.lb();b.replace(/\xa0|\s/g," ");a.Qd={1:b+"-disabled",2:b+"-hover",4:b+"-active",8:b+"-selected",16:b+"-checked",32:b+"-focused",64:b+"-open"}};var yf=function(a,b){if(!a)throw Error("Invalid class name "+a);if(!u(b))throw Error("Invalid decorator function "+b);},zf={};var R=function(a,b,c){P.call(this,c);if(!b){b=this.constructor;for(var d;b;){d=ja(b);if(d=zf[d])break;b=b.b?b.b.constructor:null}b=d?u(d.Ga)?d.Ga():new d:null}this.H=b;this.Bb=m(a)?a:null;this.ug=null};x(R,P);f=R.prototype;f.Bb=null;f.l=0;f.ea=39;f.Ic=255;f.Zj=0;f.Wa=!0;f.oa=null;f.ge=!0;f.Hd=!1;f.vh=null;var Bf=function(a){a.T&&0!=a.ge&&Af(a,!1);a.ge=!1};R.prototype.Hb=function(){return this.H.Hb(this)};var Cf=function(a,b){b&&(a.oa?Ta(a.oa,b)||a.oa.push(b):a.oa=[b],a.H.Pc(a,b,!0))};f=R.prototype;
f.Pc=function(a,b){b?Cf(this,a):a&&this.oa&&Va(this.oa,a)&&(0==this.oa.length&&(this.oa=null),this.H.Pc(this,a,!1))};f.F=function(){var a=this.H.F(this);this.m=a;vf(this.H,a,this.vh);this.Hd||this.H.qd(a,!1);this.Wa||this.H.eg(a,!1)};f.ag=function(a){this.ug=a;var b=this.a();b&&this.H.ag(b,a)};f.Uc=function(){return this.H.Uc(this.a())};f.Xb=function(a){return this.H.Xb(a)};f.ba=function(a){this.m=a=this.H.cc(this,a);vf(this.H,a,this.vh);this.Hd||this.H.qd(a,!1);this.Wa="none"!=a.style.display};
f.D=function(){R.b.D.call(this);var a=this.H,b=this.m,c=this.ug;null!=c&&a.ag(b,c);this.Wa||mf(b,"hidden",!this.Wa);this.isEnabled()||a.Ua(b,1,!this.isEnabled());this.ea&8&&a.Ua(b,8,!!(this.l&8));this.ea&16&&a.Ua(b,16,this.da());this.ea&64&&a.Ua(b,64,!!(this.l&64));this.H.bh(this);this.ea&-2&&(this.ge&&Af(this,!0),this.ea&32&&(a=this.Hb()))&&(b=this.X||(this.X=new ff),ef(b,a),Q(this).h(b,"key",this.Zi).h(a,"focus",this.Xi).h(a,"blur",this.Vg))};
var Af=function(a,b){var c=Q(a),d=a.a();b?(c.h(d,"mouseover",a.zf).h(d,"mousedown",a.ic).h(d,"mouseup",a.he).h(d,"mouseout",a.yf),a.de!=n&&c.h(d,"contextmenu",a.de),F&&(c.h(d,"dblclick",a.Wg),a.$c||(a.$c=new Df(a),J(a,a.$c)))):(c.ja(d,"mouseover",a.zf).ja(d,"mousedown",a.ic).ja(d,"mouseup",a.he).ja(d,"mouseout",a.yf),a.de!=n&&c.ja(d,"contextmenu",a.de),F&&(c.ja(d,"dblclick",a.Wg),Nb(a.$c),a.$c=null))};
R.prototype.kb=function(){R.b.kb.call(this);this.X&&this.X.detach();this.Wa&&this.isEnabled()&&this.H.rd(this,!1)};R.prototype.j=function(){R.b.j.call(this);this.X&&(this.X.N(),delete this.X);delete this.H;this.$c=this.oa=this.Bb=null};R.prototype.ya=function(){return this.Bb};var tf=function(a,b){a.Bb=b},Ef=function(a){return(a=a.ya())?(r(a)?a:p(a)?Oa(a,$d).join(""):Zd(a)).replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,""):""};f=R.prototype;
f.Bc=function(a){R.b.Bc.call(this,a);var b=this.a();b&&this.H.Bc(b,a)};f.qd=function(a){this.Hd=a;var b=this.a();b&&this.H.qd(b,a)};f.eg=function(a,b){if(b||this.Wa!=a&&this.dispatchEvent(a?"show":"hide")){var c=this.a();c&&this.H.eg(c,a);this.isEnabled()&&this.H.rd(this,a);this.Wa=a;return!0}return!1};f.isEnabled=function(){return!(this.l&1)};
f.ta=function(a){var b=this.getParent();b&&"function"==typeof b.isEnabled&&!b.isEnabled()||!Ff(this,1,!a)||(a||(this.setActive(!1),Gf(this,!1)),this.Wa&&this.H.rd(this,a),this.Ca(1,!a,!0))};var Gf=function(a,b){Ff(a,2,b)&&a.Ca(2,b)};f=R.prototype;f.nc=function(){return!!(this.l&4)};f.setActive=function(a){Ff(this,4,a)&&this.Ca(4,a)};f.da=function(){return!!(this.l&16)};f.Tb=function(a){Ff(this,16,a)&&this.Ca(16,a)};f.Kb=function(){return!!(this.l&32)};f.sd=function(a){Ff(this,32,a)&&this.Ca(32,a)};
f.Ca=function(a,b,c){c||1!=a?this.ea&a&&b!=!!(this.l&a)&&(this.H.Ca(this,a,b),this.l=b?this.l|a:this.l&~a):this.ta(!b)};var Hf=function(a,b,c){if(a.T&&a.l&b&&!c)throw Error("Component already rendered");!c&&a.l&b&&a.Ca(b,!1);a.ea=c?a.ea|b:a.ea&~b},If=function(a,b){return!!(a.Ic&b)&&!!(a.ea&b)},Ff=function(a,b,c){return!!(a.ea&b)&&!!(a.l&b)!=c&&(!(a.Zj&b)||a.dispatchEvent(Xe(b,c)))&&!a.isDisposed()};f=R.prototype;
f.zf=function(a){(!a.relatedTarget||!Rd(this.a(),a.relatedTarget))&&this.dispatchEvent("enter")&&this.isEnabled()&&If(this,2)&&Gf(this,!0)};f.yf=function(a){a.relatedTarget&&Rd(this.a(),a.relatedTarget)||!this.dispatchEvent("leave")||(If(this,4)&&this.setActive(!1),If(this,2)&&Gf(this,!1))};f.de=n;f.ic=function(a){this.isEnabled()&&(If(this,2)&&Gf(this,!0),!Qb(a)||G&&yb&&a.ctrlKey||(If(this,4)&&this.setActive(!0),this.H&&this.H.Gf(this)&&this.Hb().focus()));this.Hd||!Qb(a)||G&&yb&&a.ctrlKey||a.preventDefault()};
f.he=function(a){this.isEnabled()&&(If(this,2)&&Gf(this,!0),this.nc()&&this.nd(a)&&If(this,4)&&this.setActive(!1))};f.Wg=function(a){this.isEnabled()&&this.nd(a)};f.nd=function(a){If(this,16)&&this.Tb(!this.da());If(this,8)&&Ff(this,8,!0)&&this.Ca(8,!0);if(If(this,64)){var b=!(this.l&64);Ff(this,64,b)&&this.Ca(64,b)}b=new Ob("action",this);a&&(b.altKey=a.altKey,b.ctrlKey=a.ctrlKey,b.metaKey=a.metaKey,b.shiftKey=a.shiftKey,b.Tf=a.Tf);return this.dispatchEvent(b)};f.Xi=function(){If(this,32)&&this.sd(!0)};
f.Vg=function(){If(this,4)&&this.setActive(!1);If(this,32)&&this.sd(!1)};f.Zi=function(a){return this.Wa&&this.isEnabled()&&this.fe(a)?(a.preventDefault(),a.stopPropagation(),!0):!1};f.fe=function(a){return 13==a.keyCode&&this.nd(a)};if(!u(R))throw Error("Invalid component class "+R);if(!u(nf))throw Error("Invalid renderer class "+nf);var Jf=ja(R);zf[Jf]=nf;yf("goog-control",function(){return new R(null)});
var Df=function(a){this.Ud=a;this.Rd=!1;this.pa=new O(this);J(this,this.pa);a=this.Ud.m;this.pa.h(a,"mousedown",this.aj).h(a,"mouseup",this.bj).h(a,"click",this.ce)};x(Df,I);Df.prototype.aj=function(){this.Rd=!1};Df.prototype.bj=function(){this.Rd=!0};Df.prototype.ce=function(a){if(this.Rd)this.Rd=!1;else{var b=a.Fa,c=b.button,d=b.type;b.button=0;b.type="mousedown";this.Ud.ic(new K(b,a.currentTarget));b.type="mouseup";this.Ud.he(new K(b,a.currentTarget));b.button=c;b.type=d}};
Df.prototype.j=function(){this.Ud=null;Df.b.j.call(this)};F&&H(8);var Kf=function(a){if(null!=a)switch(a.mf){case 1:return 1;case -1:return-1;case 0:return 0}return null},Lf=function(){we.call(this)};x(Lf,we);Lf.prototype.Ab=re;var Mf=function(a){return null!=a&&a.Ab===re?a:a instanceof xd?S(a instanceof xd&&a.constructor===xd&&a.ii===wd?a.Vf:"type_error:SafeHtml",a.Sg()):S(Ba(String(String(a))),Kf(a))},S=function(a){function b(a){this.content=a}b.prototype=a.prototype;return function(a,d){var e=new b(String(a));void 0!==d&&(e.mf=d);return e}}(Lf);
(function(a){function b(a){this.content=a}b.prototype=a.prototype;return function(a,d){var e=String(a);if(!e)return"";e=new b(e);void 0!==d&&(e.mf=d);return e}})(Lf);
var Of=function(){var a;a=""+('<div class="rc-footer"><div class="rc-separator"></div><div class="rc-controls" role="region" aria-label= "'+Nf("reCAPTCHA \u8a2d\u5b9a")+'"><div class="rc-buttons"><div class="button-holder reload-button-holder"></div><div class="button-holder audio-button-holder"></div><div class="button-holder image-button-holder"></div><div class="button-holder help-button-holder"></div></div><div class="verify-button-holder"></div></div><div class="rc-challenge-help" style="display:none" tabIndex="0"></div></div>');a=
S(a);return Mf(a)},T=function(a){null!=a&&a.Ab===re?(a=a.ya(),a=String(a).replace(Pf,"").replace(Qf,"&lt;"),a=Nf(a)):a=Ba(String(a));return a},Uf=function(a){if(null!=a&&a.Ab===se)return String(a).replace(Rf,Sf);a instanceof vd?(a=a instanceof vd&&a.constructor===vd&&a.ki===ud?a.Vf:"type_error:SafeUrl",a=String(a).replace(Rf,Sf)):(a=String(a),a=Tf.test(a)?a.replace(Rf,Sf):"#zSoyz");return a},Wf=function(a){if(null!=a&&a.Ab===ue)return a.ya();null==a?a="":a instanceof td?a=a instanceof td&&a.constructor===
td&&a.ji===sd?a.Pj:"type_error:SafeStyle":(a=String(a),a=Vf.test(a)?a:"zSoyz");return a},Xf={"\x00":"&#0;","\t":"&#9;","\n":"&#10;","\x0B":"&#11;","\f":"&#12;","\r":"&#13;"," ":"&#32;",'"':"&quot;","&":"&amp;","'":"&#39;","-":"&#45;","/":"&#47;","<":"&lt;","=":"&#61;",">":"&gt;","`":"&#96;","\u0085":"&#133;","\u00a0":"&#160;","\u2028":"&#8232;","\u2029":"&#8233;"},Yf=function(a){return Xf[a]},Zf={"\x00":"%00","\u0001":"%01","\u0002":"%02","\u0003":"%03","\u0004":"%04","\u0005":"%05","\u0006":"%06",
"\u0007":"%07","\b":"%08","\t":"%09","\n":"%0A","\x0B":"%0B","\f":"%0C","\r":"%0D","\u000e":"%0E","\u000f":"%0F","\u0010":"%10","\u0011":"%11","\u0012":"%12","\u0013":"%13","\u0014":"%14","\u0015":"%15","\u0016":"%16","\u0017":"%17","\u0018":"%18","\u0019":"%19","\u001a":"%1A","\u001b":"%1B","\u001c":"%1C","\u001d":"%1D","\u001e":"%1E","\u001f":"%1F"," ":"%20",'"':"%22","'":"%27","(":"%28",")":"%29","<":"%3C",">":"%3E","\\":"%5C","{":"%7B","}":"%7D","\u007f":"%7F","\u0085":"%C2%85","\u00a0":"%C2%A0",
"\u2028":"%E2%80%A8","\u2029":"%E2%80%A9","\uff01":"%EF%BC%81","\uff03":"%EF%BC%83","\uff04":"%EF%BC%84","\uff06":"%EF%BC%86","\uff07":"%EF%BC%87","\uff08":"%EF%BC%88","\uff09":"%EF%BC%89","\uff0a":"%EF%BC%8A","\uff0b":"%EF%BC%8B","\uff0c":"%EF%BC%8C","\uff0f":"%EF%BC%8F","\uff1a":"%EF%BC%9A","\uff1b":"%EF%BC%9B","\uff1d":"%EF%BC%9D","\uff1f":"%EF%BC%9F","\uff20":"%EF%BC%A0","\uff3b":"%EF%BC%BB","\uff3d":"%EF%BC%BD"},Sf=function(a){return Zf[a]},$f=/[\x00\x22\x27\x3c\x3e]/g,Rf=/[\x00- \x22\x27-\x29\x3c\x3e\\\x7b\x7d\x7f\x85\xa0\u2028\u2029\uff01\uff03\uff04\uff06-\uff0c\uff0f\uff1a\uff1b\uff1d\uff1f\uff20\uff3b\uff3d]/g,
Vf=/^(?!-*(?:expression|(?:moz-)?binding))(?:[.#]?-?(?:[_a-z0-9-]+)(?:-[_a-z0-9-]+)*-?|-?(?:[0-9]+(?:\.[0-9]*)?|\.[0-9]+)(?:[a-z]{1,2}|%)?|!important|)$/i,Tf=/^(?![^#?]*\/(?:\.|%2E){2}(?:[\/?#]|$))(?:(?:https?|mailto):|[^&:\/?#]*(?:[\/?#]|$))/i,ag=/^(?!style|on|action|archive|background|cite|classid|codebase|data|dsync|href|longdesc|src|usemap)(?:[a-z0-9_$:-]*)$/i,Nf=function(a){return String(a).replace($f,Yf)},Pf=/<(?:!|\/?([a-zA-Z][a-zA-Z0-9:\-]*))(?:[^>'"]|"[^"]*"|'[^']*')*>/g,Qf=/</g;var bg=function(a){a=a||{};var b=S,c='<span class="recaptcha-checkbox goog-inline-block'+(a.checked?" recaptcha-checkbox-checked":" recaptcha-checkbox-unchecked")+(a.disabled?" recaptcha-checkbox-disabled":"")+(a.jf?" "+T(a.jf):"")+'" role="checkbox" aria-checked="'+(a.checked?"true":"false")+'"'+(a.ti?'aria-labelledby="'+T(a.ti)+'"':"")+(a.id?'id="'+T(a.id)+'"':"")+(a.disabled?'aria-disabled="true" tabindex="-1"':'tabindex="'+(a.hg?T(a.hg):"0")+'"'),d;a.attributes?(d=a.attributes,null!=d&&d.Ab===
te?d=d.ya().replace(/([^"'\s])$/,"$1 "):(d=String(d),d=ag.test(d)?d:"zSoyz"),d=" "+d):d="";c=c+d+'dir="ltr">';a=a={df:a.df,rc:a.rc};a=S((a.df?'<div class="'+(a.rc?"recaptcha-checkbox-nodatauri ":"")+'recaptcha-checkbox-border" role="presentation"></div><div class="'+(a.rc?"recaptcha-checkbox-nodatauri ":"")+'recaptcha-checkbox-borderAnimation" role="presentation"></div><div class="'+(a.rc?"recaptcha-checkbox-nodatauri ":"")+'recaptcha-checkbox-spinner" role="presentation"></div><div class="'+(a.rc?
"recaptcha-checkbox-nodatauri ":"")+'recaptcha-checkbox-spinnerAnimation" role="presentation"></div>':'<div class="recaptcha-checkbox-spinner-gif" role="presentation"></div>')+'<div class="recaptcha-checkbox-checkmark" role="presentation"></div>');return b(c+a+"</span>")};var cg=function(a,b){var c=pf(nf,"recaptcha-checkbox");R.call(this,null,c,b);this.U=1;this.G=null;this.tabIndex=a&&isFinite(a)&&0==a%1&&0<a?a:0};x(cg,R);f=cg.prototype;f.F=function(){this.m=Ae(bg,{id:this.getId(),jf:this.oa,checked:this.da(),disabled:!this.isEnabled(),hg:this.tabIndex},void 0,this.mb())};f.Xb=function(){return!1};
f.D=function(){cg.b.D.call(this);if(this.ge){var a=Q(this);this.G&&a.h(this.G,"click",this.wf).h(this.G,"mouseover",this.zf).h(this.G,"mouseout",this.yf).h(this.G,"mousedown",this.ic).h(this.G,"mouseup",this.he);a.h(this.a(),"click",this.wf)}if(this.G){if(!this.G.id){var a=this.G,b;b=this.getId()+".lbl";a.id=b}mf(this.a(),"labelledby",this.G.id)}};f.ta=function(a){cg.b.ta.call(this,a);a&&(this.a().tabIndex=this.tabIndex)};f.fe=function(a){32==a.keyCode&&this.wf(a);return!1};
f.wf=function(a){a.stopPropagation();if(this.isEnabled()&&3!=this.U&&!a.target.href){var b=!this.da();this.dispatchEvent(b?"before_checked":"before_unchecked")&&(a.preventDefault(),this.Tb(b))}};f.Kb=function(){return cg.b.Kb.call(this)&&!(this.isEnabled()&&this.a()&&Oe(this.a(),"recaptcha-checkbox-clearOutline"))};f.sd=function(a){cg.b.sd.call(this,a);dg(this,!1)};f.ic=function(a){cg.b.ic.call(this,a);dg(this,!0)};var dg=function(a,b){a.isEnabled()&&eg(a,"recaptcha-checkbox-clearOutline",b)};f=cg.prototype;
f.Je=function(a){this.T?(this.kb(),this.G=a,this.D()):this.G=a};f.da=function(){return 0==this.U};f.Tb=function(a){a&&this.da()||!a&&1==this.U||fg(this,a?0:1)};f.Bh=function(){2==this.U||fg(this,2)};f.Dh=function(a){3!=this.U&&(fg(this,3),a&&a())};
var fg=function(a,b){if(!(0==b&&a.da()||1==b&&1==a.U||2==b&&2==a.U||3==b&&3==a.U)){2==b&&a.sd(!1);a.U=b;eg(a,"recaptcha-checkbox-checked",0==b);eg(a,"recaptcha-checkbox-expired",2==b);eg(a,"recaptcha-checkbox-loading",3==b);var c=a.a();c&&mf(c,"checked",0==b?"true":"false");a.dispatchEvent("change")}},eg=function(a,b,c){a.a()&&(a=a.a(),c?Pe(a,b):Re(a,b))};var gg=function(a,b){cg.call(this,a,b);this.Oe=this.tb=null;this.Cc=!1};x(gg,cg);
var hg=function(a,b,c,d,e){this.Di=a;this.size=b;this.vi=c;this.time=17*d;this.loop=!!e},ig=new hg("recaptcha-checkbox-borderAnimation",new N(28,28),new ae(0,28,560,0),20),jg=new hg("recaptcha-checkbox-borderAnimation",new N(28,28),new ae(560,28,840,0),10),kg=new hg("recaptcha-checkbox-borderAnimation",new N(28,28),new ae(0,56,560,28),20),lg=new hg("recaptcha-checkbox-borderAnimation",new N(28,28),new ae(560,56,840,28),10),mg=new hg("recaptcha-checkbox-borderAnimation",new N(28,28),new ae(0,84,560,
56),20),ng=new hg("recaptcha-checkbox-borderAnimation",new N(28,28),new ae(560,84,840,56),10),og=new hg("recaptcha-checkbox-spinner",new N(36,36),new ae(0,36,2844,0),79,!0),pg=new hg("recaptcha-checkbox-spinnerAnimation",new N(38,38),new ae(0,38,3686,0),97),qg=new hg("recaptcha-checkbox-checkmark",new N(38,30),new ae(0,30,600,0),20),rg=new hg("recaptcha-checkbox-checkmark",new N(38,30),new ae(600,30,1200,0),20);f=gg.prototype;
f.F=function(){this.m=Ae(bg,{id:this.getId(),jf:this.oa,checked:this.da(),disabled:!this.isEnabled(),hg:this.tabIndex,df:!0,rc:!(F?H("9.0"):1)},void 0,this.mb())};
f.D=function(){gg.b.D.call(this);if(!this.tb){var a=this.J("recaptcha-checkbox-spinner");this.tb=sg(this,og);this.Oe=new qe(a,340);Je()&&Q(this).h(this.tb,"finish",v(function(){Je();var b=a.style[Ea("transform")],b=(("undefined"!==typeof b?b:a.style[be(a,"transform")]||"")||"rotate(0deg)").replace(/^rotate\(([-0-9]+)deg\)$/,"$1");isFinite(b)&&(b=String(b));b=r(b)?/^\s*-?0x/i.test(b)?parseInt(b,16):parseInt(b,10):NaN;isNaN(b)||ce(a,"transform",ra("rotate(%sdeg)",(b+180)%360))},this))}};
f.Tb=function(a){if(!(a&&this.da()||!a&&1==this.U||this.Cc)){var b=this.U,c=a?0:1,d=this.Kb(),e=v(function(){fg(this,c)},this),g=tg(this,!0),h;3==this.U?h=ug(this,!1,void 0,!a):(h=Oc(),g.add(this.da()?vg(this,!1):wg(this,!1,b,d)));a?g.add(vg(this,!0,e)):(h.then(e),g.add(wg(this,!0,c,d)));h.then(function(){g.play()},n)}};
f.Bh=function(){if(2!=this.U&&!this.Cc){var a=this.U,b=this.Kb(),c=v(function(){fg(this,2)},this),d=tg(this,!0),e;3==this.U?e=ug(this,!1,void 0,!0):(e=Oc(),d.add(this.da()?vg(this,!1):wg(this,!1,a,b)));e.then(c);d.add(wg(this,!0,2,!1));e.then(function(){d.play()},n)}};f.Dh=function(a){3==this.U||this.Cc||ug(this,!0,a)};
var ug=function(a,b,c,d){if(b==(3==a.U))return Oc();if(a.Cc)return Pc();if(b){b=a.U;d=a.Kb();var e=tg(a);a.da()?e.add(vg(a,!1)):e.add(wg(a,!1,b,d));e.add(xg(a,c));var g=Tc();Q(a).Y(e,"end",v(function(){g.resolve()},a));fg(a,3);e.play();return g.wh}yg(a,d);fg(a,1);return Oc()},yg=function(a,b){if(0!=a.tb.l&&!a.Oe.Ha()){var c=v(function(){this.tb.stop(!0);rd(this.tb);je(this.J("recaptcha-checkbox-spinner"),"");this.ta(!0)},a);b?(Q(a).Y(a.Oe,"end",c),a.Oe.play(!0)):c()}};
gg.prototype.Me=function(a){if(this.Cc==a)throw Error("Invalid state.");this.Cc=a};
var wg=function(a,b,c,d){c=2==c;d=sg(a,b?c?mg:d?ig:kg:c?ng:d?jg:lg);var e=a.Vc("recaptcha-checkbox-border");Q(a).Y(d,"play",v(function(){ke(e,!1)},a));Q(a).Y(d,"finish",v(function(){b&&ke(e,!0)},a));return d},vg=function(a,b,c){var d=sg(a,b?qg:rg);Q(a).Y(d,"play",v(function(){ce(this.a(),"overflow","visible")},a));Q(a).Y(d,"finish",v(function(){b||ce(this.a(),"overflow","");c&&c()},a));return d},xg=function(a,b){var c=v(function(){this.Me(!0);fd(v(function(){this.tb.Ha()||(this.ta(!1),this.tb.play(!0));
this.Me(!1);b&&b()},this),472)},a),d=sg(a,pg);Q(a).Y(d,"play",c);return d},tg=function(a,b){var c=new rc;b&&(Q(a).Y(c,"play",v(a.Me,a,!0)),Q(a).Y(c,"end",v(a.Me,a,!1)));return c},sg=function(a,b){var c=new qd(a.Vc(b.Di),b.size,b.vi,b.time,void 0,!b.loop);b.loop||ic(c,"end",v(function(){rd(this)},c));return c};var zg=function(a){a=String(a);if(/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}throw Error("Invalid JSON string: "+a);},Ag=function(a){return eval("("+a+")")},Cg=function(a){return(new Bg(void 0)).Ge(a)},Bg=function(a){this.Be=a};
Bg.prototype.Ge=function(a){var b=[];Dg(this,a,b);return b.join("")};
var Dg=function(a,b,c){if(null==b)c.push("null");else{if("object"==typeof b){if(p(b)){var d=b;b=d.length;c.push("[");for(var e="",g=0;g<b;g++)c.push(e),e=d[g],Dg(a,a.Be?a.Be.call(d,String(g),e):e,c),e=",";c.push("]");return}if(b instanceof String||b instanceof Number||b instanceof Boolean)b=b.valueOf();else{c.push("{");g="";for(d in b)Object.prototype.hasOwnProperty.call(b,d)&&(e=b[d],"function"!=typeof e&&(c.push(g),Eg(d,c),c.push(":"),Dg(a,a.Be?a.Be.call(b,d,e):e,c),g=","));c.push("}");return}}switch(typeof b){case "string":Eg(b,
c);break;case "number":c.push(isFinite(b)&&!isNaN(b)?b:"null");break;case "boolean":c.push(b);break;case "function":break;default:throw Error("Unknown type: "+typeof b);}}},Fg={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\u000b"},Gg=/\uffff/.test("\uffff")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g,Eg=function(a,b){b.push('"',a.replace(Gg,function(a){var b=Fg[a];b||(b="\\u"+(a.charCodeAt(0)|65536).toString(16).substr(1),Fg[a]=b);return b}),
'"')};var Hg=function(){},Jg=function(a,b,c,d){a.La=null;b||(b=c?[c]:[]);a.xk=c?String(c):void 0;a.Jd=0===c?-1:0;a.Da=b;a:{if(a.Da.length&&(b=a.Da.length-1,(c=a.Da[b])&&"object"==typeof c&&!p(c))){a.ye=b-a.Jd;a.Rc=c;break a}a.ye=Number.MAX_VALUE}if(d)for(b=0;b<d.length;b++)c=d[b],c<a.ye?(c+=a.Jd,a.Da[c]=a.Da[c]||Ig):a.Rc[c]=a.Rc[c]||Ig},Ig=[],U=function(a,b){if(b<a.ye){var c=b+a.Jd,d=a.Da[c];return d===Ig?a.Da[c]=[]:d}d=a.Rc[b];return d===Ig?a.Rc[b]=[]:d},Kg=function(a,b,c){b<a.ye?a.Da[b+a.Jd]=c:a.Rc[b]=
c},Lg=function(a,b,c){a.La||(a.La={});if(!a.La[c]){var d=U(a,c);d&&(a.La[c]=new b(d))}return a.La[c]},Ng=function(a){var b=Mg;a.La||(a.La={});if(!a.La[1]){for(var c=U(a,1),d=[],e=0;e<c.length;e++)d[e]=new b(c[e]);a.La[1]=d}b=a.La[1];b==Ig&&(b=a.La[1]=[]);return b};Hg.prototype.Ge=function(){return l.JSON&&l.JSON.stringify?l.JSON.stringify(this.Da):Cg(this.Da)};Hg.prototype.toString=function(){return this.Da.toString()};var Og=function(a,b){I.call(this);this.Wf=a;J(this,this.Wf);this.xb=b};x(Og,I);var Pg=function(a){Jg(this,a,"asconf",null)};x(Pg,Hg);Pg.eb="asconf";var Qg=function(a){Jg(this,a,"bgdata",null)};x(Qg,Hg);Qg.eb="bgdata";var Rg=function(a){Jg(this,a,"conf",null)};x(Rg,Hg);Rg.eb="conf";var Tg=function(){var a=Sg.Ga().get();return U(a,2)},Ug=function(){var a=Sg.Ga().get();return U(a,3)};var Mg=function(a){Jg(this,a,"hctask",null)};x(Mg,Hg);Mg.eb="hctask";var Wg=function(a){Jg(this,a,"ctask",Vg)};x(Wg,Hg);var Vg=[1];Wg.eb="ctask";var Xg=function(a){Jg(this,a,"ainput",null)};x(Xg,Hg);Xg.eb="ainput";Xg.prototype.Sc=function(){return Lg(this,Qg,1)};Xg.prototype.Yd=function(){return Lg(this,Rg,3)};Xg.prototype.Tc=function(){return Lg(this,Wg,5)};var Yg=function(a){Jg(this,a,0,null)};x(Yg,Hg);Yg.prototype.Tg=function(){return U(this,1)};Yg.prototype.Je=function(a){Kg(this,1,a)};var Zg=function(a){Jg(this,a,"pmeta",null)};x(Zg,Hg);Zg.eb="pmeta";var $g=function(a){Jg(this,a,0,null)};x($g,Hg);var bh=function(a){return Lg(a,ah,1)},ah=function(a){Jg(this,a,0,null)};x(ah,Hg);var ch=function(a){Jg(this,a,"rresp",null)};x(ch,Hg);ch.eb="rresp";f=ch.prototype;f.vf=function(){return U(this,3)};f.setTimeout=function(a){Kg(this,3,a)};f.clearTimeout=function(){Kg(this,3,void 0)};f.tf=function(){return U(this,6)};f.Sc=function(){return Lg(this,Qg,7)};var dh=function(a){Jg(this,a,"finput",null)};x(dh,Hg);dh.eb="finput";dh.prototype.Yd=function(){return Lg(this,Rg,2)};dh.prototype.Tc=function(){return Lg(this,Wg,4)};dh.prototype.Xc=function(){return Lg(this,ch,5)};var eh=function(a){Jg(this,a,"uvresp",null)};x(eh,Hg);eh.eb="uvresp";f=eh.prototype;f.vf=function(){return U(this,3)};f.setTimeout=function(a){Kg(this,3,a)};f.clearTimeout=function(){Kg(this,3,void 0)};f.tf=function(){return U(this,4)};f.Sc=function(){return Lg(this,Qg,5)};f.Xc=function(){return Lg(this,ch,7)};var fh=function(a,b,c){Og.call(this,a,c);this.Sd=gapi.iframes.getContext().getParentIframe();this.Td=(a=U(b,4))?gapi.iframes.makeWhiteListIframesFilter([a]):gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER;this.Ya=null;this.Jc="";this.lf=b.Tc();this.kf=""};x(fh,Og);fh.prototype.Tc=function(){return this.lf};var gh=function(a){this.A=a};gh.prototype.value=function(){return this.A};gh.prototype.Gh=function(a){this.A.width=a;return this};gh.prototype.Ch=function(a){this.A.height=a;return this};gh.prototype.Eh=function(a){this.A.style=a;return this};var hh=function(a){this.A=a};hh.prototype.Ch=function(a){this.A.height=a;return this};hh.prototype.Gh=function(a){this.A.width=a;return this};var ih=function(a){this.A=a||{}};f=ih.prototype;f.value=function(){return this.A};f.getUrl=function(){return this.A.url};f.Eh=function(a){this.A.style=a;return this};f.Ac=function(a){this.A.id=a;return this};f.getId=function(){return this.A.id};var jh=function(a,b){a.A.queryParams=b;return a};ih.prototype.getContext=function(){return this.A.context};ih.prototype.Zd=function(){return this.A.controller};var kh=function(a,b,c){this.ak=a;this.response=b;this.Kj=c},lh=function(a){this.visible=a},mh=function(a){this.response=a},nh=function(a){this.tabIndex=a};var oh=function(a){if(8192>a.length)return String.fromCharCode.apply(null,a);for(var b="",c=0;c<a.length;c+=8192)var d=Ya(a,c,c+8192),b=b+String.fromCharCode.apply(null,d);return b},ph=function(a){return Oa(a,function(a){a=a.toString(16);return 1<a.length?a:"0"+a}).join("")};var qh=null,rh=null,sh=null,uh=function(a){for(var b=[],c=0,d=0;d<a.length;d++){for(var e=a.charCodeAt(d);255<e;)b[c++]=e&255,e>>=8;b[c++]=e}if(!ea(b))throw Error("encodeByteArray takes an array as a parameter");th();a=sh;c=[];for(d=0;d<b.length;d+=3){var g=b[d],h=(e=d+1<b.length)?b[d+1]:0,k=d+2<b.length,q=k?b[d+2]:0,t=g>>2,g=(g&3)<<4|h>>4,h=(h&15)<<2|q>>6,q=q&63;k||(q=64,e||(h=64));c.push(a[t],a[g],a[h],a[q])}return c.join("")},vh=function(a){th();for(var b=rh,c=[],d=0;d<a.length;){var e=b[a.charAt(d++)],
g=d<a.length?b[a.charAt(d)]:0;++d;var h=d<a.length?b[a.charAt(d)]:64;++d;var k=d<a.length?b[a.charAt(d)]:64;++d;if(null==e||null==g||null==h||null==k)throw Error();c.push(e<<2|g>>4);64!=h&&(c.push(g<<4&240|h>>2),64!=k&&c.push(h<<6&192|k))}return c},th=function(){if(!qh){qh={};rh={};sh={};for(var a=0;65>a;a++)qh[a]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(a),rh[qh[a]]=a,sh[a]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(a),62<=a&&(rh["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(a)]=
a)}};var wh="StopIteration"in l?l.StopIteration:{message:"StopIteration",stack:""},xh=function(){};xh.prototype.next=function(){throw wh;};xh.prototype.Gc=function(){return this};
var yh=function(a){if(a instanceof xh)return a;if("function"==typeof a.Gc)return a.Gc(!1);if(ea(a)){var b=0,c=new xh;c.next=function(){for(;;){if(b>=a.length)throw wh;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");},zh=function(a,b){if(ea(a))try{D(a,b,void 0)}catch(c){if(c!==wh)throw c;}else{a=yh(a);try{for(;;)b.call(void 0,a.next(),void 0,a)}catch(d){if(d!==wh)throw d;}}};var Ah=function(a,b){this.O={};this.K=[];this.Dd=this.L=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this.addAll(a)};f=Ah.prototype;f.P=function(){return this.L};f.ca=function(){Bh(this);for(var a=[],b=0;b<this.K.length;b++)a.push(this.O[this.K[b]]);return a};f.za=function(){Bh(this);return this.K.concat()};f.zb=function(a){return Ch(this.O,a)};f.Sa=function(){return 0==this.L};
f.clear=function(){this.O={};this.Dd=this.L=this.K.length=0};f.remove=function(a){return Ch(this.O,a)?(delete this.O[a],this.L--,this.Dd++,this.K.length>2*this.L&&Bh(this),!0):!1};var Bh=function(a){if(a.L!=a.K.length){for(var b=0,c=0;b<a.K.length;){var d=a.K[b];Ch(a.O,d)&&(a.K[c++]=d);b++}a.K.length=c}if(a.L!=a.K.length){for(var e={},c=b=0;b<a.K.length;)d=a.K[b],Ch(e,d)||(a.K[c++]=d,e[d]=1),b++;a.K.length=c}};f=Ah.prototype;f.get=function(a,b){return Ch(this.O,a)?this.O[a]:b};
f.set=function(a,b){Ch(this.O,a)||(this.L++,this.K.push(a),this.Dd++);this.O[a]=b};f.addAll=function(a){var b;a instanceof Ah?(b=a.za(),a=a.ca()):(b=gb(a),a=fb(a));for(var c=0;c<b.length;c++)this.set(b[c],a[c])};f.forEach=function(a,b){for(var c=this.za(),d=0;d<c.length;d++){var e=c[d],g=this.get(e);a.call(b,g,e,this)}};f.clone=function(){return new Ah(this)};
f.Gc=function(a){Bh(this);var b=0,c=this.Dd,d=this,e=new xh;e.next=function(){if(c!=d.Dd)throw Error("The map has changed since the iterator was created");if(b>=d.K.length)throw wh;var e=d.K[b++];return a?e:d.O[e]};return e};var Ch=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};var Dh=function(a){if("function"==typeof a.ca)return a.ca();if(r(a))return a.split("");if(ea(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return fb(a)},Eh=function(a,b){if("function"==typeof a.forEach)a.forEach(b,void 0);else if(ea(a)||r(a))D(a,b,void 0);else{var c;if("function"==typeof a.za)c=a.za();else if("function"!=typeof a.ca)if(ea(a)||r(a)){c=[];for(var d=a.length,e=0;e<d;e++)c.push(e)}else c=gb(a);else c=void 0;for(var d=Dh(a),e=d.length,g=0;g<e;g++)b.call(void 0,d[g],c&&
c[g],a)}};var Fh=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/,Hh=function(a){if(Gh){Gh=!1;var b=l.location;if(b){var c=b.href;if(c&&(c=(c=Hh(c)[3]||null)?decodeURI(c):c)&&c!=b.hostname)throw Gh=!0,Error();}}return a.match(Fh)},Gh=G,Ih=function(a,b){for(var c=a.split("&"),d=0;d<c.length;d++){var e=c[d].indexOf("="),g=null,h=null;0<=e?(g=c[d].substring(0,e),h=c[d].substring(e+1)):g=c[d];b(g,h?decodeURIComponent(h.replace(/\+/g," ")):"")}},Jh=
function(a){if(a[1]){var b=a[0],c=b.indexOf("#");0<=c&&(a.push(b.substr(c)),a[0]=b=b.substr(0,c));c=b.indexOf("?");0>c?a[1]="?":c==b.length-1&&(a[1]=void 0)}return a.join("")},Kh=function(a,b,c){if(p(b))for(var d=0;d<b.length;d++)Kh(a,String(b[d]),c);else null!=b&&c.push("&",a,""===b?"":"=",encodeURIComponent(String(b)))},Lh=function(a,b,c){Math.max(b.length-(c||0),0);for(c=c||0;c<b.length;c+=2)Kh(b[c],b[c+1],a);return a},Mh=function(a,b){for(var c in b)Kh(c,b[c],a);return a},Nh=function(a,b){return Jh(2==
arguments.length?Lh([a],arguments[1],0):Lh([a],arguments,1))};var Oh=function(a,b){this.$a=this.Bd=this.fb="";this.uc=null;this.Fb=this.xe="";this.Aa=this.rj=!1;var c;if(a instanceof Oh)this.Aa=m(b)?b:a.Aa,Ph(this,a.fb),Qh(this,a.Bd),c=a.$a,Rh(this),this.$a=c,Sh(this,a.uc),Th(this,a.Ib()),Uh(this,a.ra.clone()),c=a.Fb,Rh(this),this.Fb=c;else if(a&&(c=Hh(String(a)))){this.Aa=!!b;Ph(this,c[1]||"",!0);Qh(this,c[2]||"",!0);var d=c[3]||"";Rh(this);this.$a=Vh(d,!0);Sh(this,c[4]);Th(this,c[5]||"",!0);Uh(this,c[6]||"",!0);c=c[7]||"";Rh(this);this.Fb=Vh(c)}else this.Aa=
!!b,this.ra=new Wh(null,0,this.Aa)};Oh.prototype.toString=function(){var a=[],b=this.fb;b&&a.push(Xh(b,Yh,!0),":");if(b=this.$a){a.push("//");var c=this.Bd;c&&a.push(Xh(c,Yh,!0),"@");a.push(encodeURIComponent(String(b)).replace(/%25([0-9a-fA-F]{2})/g,"%$1"));b=this.uc;null!=b&&a.push(":",String(b))}if(b=this.Ib())this.$a&&"/"!=b.charAt(0)&&a.push("/"),a.push(Xh(b,"/"==b.charAt(0)?Zh:$h,!0));(b=this.ra.toString())&&a.push("?",b);(b=this.Fb)&&a.push("#",Xh(b,ai));return a.join("")};
Oh.prototype.resolve=function(a){var b=this.clone(),c=!!a.fb;c?Ph(b,a.fb):c=!!a.Bd;c?Qh(b,a.Bd):c=!!a.$a;if(c){var d=a.$a;Rh(b);b.$a=d}else c=null!=a.uc;d=a.Ib();if(c)Sh(b,a.uc);else if(c=!!a.xe){if("/"!=d.charAt(0))if(this.$a&&!this.xe)d="/"+d;else{var e=b.Ib().lastIndexOf("/");-1!=e&&(d=b.Ib().substr(0,e+1)+d)}e=d;if(".."==e||"."==e)d="";else if(-1!=e.indexOf("./")||-1!=e.indexOf("/.")){for(var d=0==e.lastIndexOf("/",0),e=e.split("/"),g=[],h=0;h<e.length;){var k=e[h++];"."==k?d&&h==e.length&&g.push(""):
".."==k?((1<g.length||1==g.length&&""!=g[0])&&g.pop(),d&&h==e.length&&g.push("")):(g.push(k),d=!0)}d=g.join("/")}else d=e}c?Th(b,d):c=""!==a.ra.toString();c?Uh(b,Vh(a.ra.toString())):c=!!a.Fb;c&&(a=a.Fb,Rh(b),b.Fb=a);return b};Oh.prototype.clone=function(){return new Oh(this)};
var Ph=function(a,b,c){Rh(a);a.fb=c?Vh(b,!0):b;a.fb&&(a.fb=a.fb.replace(/:$/,""))},Qh=function(a,b,c){Rh(a);a.Bd=c?Vh(b):b},Sh=function(a,b){Rh(a);if(b){b=Number(b);if(isNaN(b)||0>b)throw Error("Bad port number "+b);a.uc=b}else a.uc=null};Oh.prototype.Ib=function(){return this.xe};
var Th=function(a,b,c){Rh(a);a.xe=c?Vh(b,!0):b},Uh=function(a,b,c){Rh(a);b instanceof Wh?(a.ra=b,a.ra.dg(a.Aa)):(c||(b=Xh(b,bi)),a.ra=new Wh(b,0,a.Aa))},di=function(a,b,c){Rh(a);p(c)||(c=[String(c)]);ci(a.ra,b,c)},Rh=function(a){if(a.rj)throw Error("Tried to modify a read-only Uri");};Oh.prototype.dg=function(a){this.Aa=a;this.ra&&this.ra.dg(a);return this};
var ei=function(a){return a instanceof Oh?a.clone():new Oh(a,void 0)},Vh=function(a,b){return a?b?decodeURI(a):decodeURIComponent(a):""},Xh=function(a,b,c){return r(a)?(a=encodeURI(a).replace(b,fi),c&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null},fi=function(a){a=a.charCodeAt(0);return"%"+(a>>4&15).toString(16)+(a&15).toString(16)},Yh=/[#\/\?@]/g,$h=/[\#\?:]/g,Zh=/[\#\?]/g,bi=/[\#\?@]/g,ai=/#/g,Wh=function(a,b,c){this.L=this.M=null;this.na=a||null;this.Aa=!!c},gi=function(a){a.M||(a.M=new Ah,
a.L=0,a.na&&Ih(a.na,function(b,c){a.add(decodeURIComponent(b.replace(/\+/g," ")),c)}))};f=Wh.prototype;f.P=function(){gi(this);return this.L};f.add=function(a,b){gi(this);this.na=null;a=hi(this,a);var c=this.M.get(a);c||this.M.set(a,c=[]);c.push(b);this.L++;return this};f.remove=function(a){gi(this);a=hi(this,a);return this.M.zb(a)?(this.na=null,this.L-=this.M.get(a).length,this.M.remove(a)):!1};f.clear=function(){this.M=this.na=null;this.L=0};f.Sa=function(){gi(this);return 0==this.L};
f.zb=function(a){gi(this);a=hi(this,a);return this.M.zb(a)};f.za=function(){gi(this);for(var a=this.M.ca(),b=this.M.za(),c=[],d=0;d<b.length;d++)for(var e=a[d],g=0;g<e.length;g++)c.push(b[d]);return c};f.ca=function(a){gi(this);var b=[];if(r(a))this.zb(a)&&(b=Wa(b,this.M.get(hi(this,a))));else{a=this.M.ca();for(var c=0;c<a.length;c++)b=Wa(b,a[c])}return b};f.set=function(a,b){gi(this);this.na=null;a=hi(this,a);this.zb(a)&&(this.L-=this.M.get(a).length);this.M.set(a,[b]);this.L++;return this};
f.get=function(a,b){var c=a?this.ca(a):[];return 0<c.length?String(c[0]):b};var ci=function(a,b,c){a.remove(b);0<c.length&&(a.na=null,a.M.set(hi(a,b),Xa(c)),a.L+=c.length)};Wh.prototype.toString=function(){if(this.na)return this.na;if(!this.M)return"";for(var a=[],b=this.M.za(),c=0;c<b.length;c++)for(var d=b[c],e=encodeURIComponent(String(d)),d=this.ca(d),g=0;g<d.length;g++){var h=e;""!==d[g]&&(h+="="+encodeURIComponent(String(d[g])));a.push(h)}return this.na=a.join("&")};
Wh.prototype.clone=function(){var a=new Wh;a.na=this.na;this.M&&(a.M=this.M.clone(),a.L=this.L);return a};var hi=function(a,b){var c=String(b);a.Aa&&(c=c.toLowerCase());return c};Wh.prototype.dg=function(a){a&&!this.Aa&&(gi(this),this.na=null,this.M.forEach(function(a,c){var d=c.toLowerCase();c!=d&&(this.remove(c),ci(this,d,a))},this));this.Aa=a};var ii=function(a,b,c){this.Xf=a;this.Cb=b;this.pd=c||null},ji=new ii(!0,null,"k"),ki;if(l.window){var li=new Oh(window.location);Qh(li,"");var mi=Hh(li.toString()),ni=mi[1],oi=mi[2],pi=mi[3],qi=mi[4],ri="";ni&&(ri+=ni+":");pi&&(ri+="//",oi&&(ri+=oi+"@"),ri+=pi,qi&&(ri+=":"+qi));ki=uh(ri)}else ki=null;
var si={sitekey:ji,origin:new ii(!1,ki,"co"),hl:new ii(!1,null,"hl"),type:new ii(!1,null,"type"),version:new ii(!1,"r20150429132001","v"),theme:new ii(!1,null,"theme"),stoken:new ii(!1,null,"stoken"),callback:new ii(!1),"expired-callback":new ii(!1),tabindex:new ii(!1,0)},ti=function(a){var b=l.__recaptcha_api||"https://www.google.com/recaptcha/";return(ei(b).fb?"":"//")+b+a},ui=function(a){var b=[];D(gb(si),function(c){var d=si[c];!d.Xf||a[c]||d.Cb||b.push(c)});return b},vi=function(a,b){var c=ui(a);
if(0<c.length)throw Error("Missing required parameters in RecaptchaOptions: "+c.join());var d={};D(gb(si),function(c){var g=si[c];b&&g.pd?g.Xf?d[g.pd]=a[c]||g.Cb:a[c]?d[g.pd]=a[c]:g.Cb&&(d[g.pd]=g.Cb):b||g.pd||(g.Xf?d[c]=a[c]||g.Cb:a[c]?d[c]=a[c]:g.Cb&&(d[c]=g.Cb))});return d};var Sg=function(){this.$=null};ca(Sg);Sg.prototype.get=function(){return this.$};Sg.prototype.Ra=function(a){this.$=a||new Rg};var wi=function(a){a=""+('<div class="rc-anchor"><div class="rc-anchor-aria-status"><section><h1>reCAPTCHA \u306e\u30b9\u30c6\u30fc\u30bf\u30b9</h1><span id="recaptcha-accessible-status" aria-live="assertive" aria-atomic="true">'+Mf(a.si)+'</span></section></div><div class="rc-anchor-expired-msg" style="display:none"><span>\u30bb\u30c3\u30b7\u30e7\u30f3\u306e\u6709\u52b9\u671f\u9650\u304c\u5207\u308c\u307e\u3057\u305f\u3002\u3082\u3046\u4e00\u5ea6\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002</span></div><div class="rc-anchor-content"><div class="rc-anchor-item"><div class="rc-anchor-checkbox-holder"></div></div><div class="rc-anchor-item"><div class="rc-anchor-center-container"><label class="rc-anchor-checkbox-label rc-anchor-center-item">\u79c1\u306f\u30ed\u30dc\u30c3\u30c8\u3067\u306f\u3042\u308a\u307e\u305b\u3093</label></div></div></div><div class="rc-anchor-item"><div class="rc-anchor-logo" role="presentation"><div class="rc-anchor-logo-img"></div><div class="rc-anchor-logo-text">reCAPTCHA</div></div><div class="rc-anchor-privacy"><a href="https://www.google.com/intl/'+
T(a.locale)+'/policies/privacy/" target="_blank">\u30d7\u30e9\u30a4\u30d0\u30b7\u30fc</a> - <a href="https://www.google.com/intl/'+T(a.locale)+'/policies/terms/" target="_blank">\u5229\u7528\u898f\u7d04</a></div></div></div>');return S(a)};var yi=function(a,b){P.call(this,b);this.la=new gg;this.la.Ac("recaptcha-anchor");Cf(this.la,"rc-anchor-checkbox");$e(this,this.la);this.Sj=Fd("recaptcha-token");this.Id=null;this.bk=xi[a]||xi.standard};x(yi,P);var xi={dark:"rc-anchor-dark",light:"rc-anchor-light",standard:"rc-anchor-standard"};yi.prototype.F=function(){this.m=Ae(wi,{si:"reCAPTCHA \u306b\u3088\u308b\u78ba\u8a8d\u304c\u5fc5\u8981\u3067\u3059",locale:"ja"});this.ba(this.a())};
yi.prototype.ba=function(a){yi.b.ba.call(this,a);a=this.J("rc-anchor-checkbox-label");a.setAttribute("id","recaptcha-anchor-label");this.la.Je(a);this.la.render(this.J("rc-anchor-checkbox-holder"))};yi.prototype.D=function(){yi.b.D.call(this);Pe(this.a(),this.bk);this.Id=Fd("recaptcha-accessible-status");Q(this).h(this.la,["before_checked","before_unchecked"],v(function(a){"before_checked"==a.type&&this.dispatchEvent("a");a.preventDefault()},this))};
yi.prototype.Ne=function(a){var b=this.a();a?Pe(b,"rc-anchor-expired"):Re(b,"rc-anchor-expired");ke(this.J("rc-anchor-expired-msg"),a)};var zi=function(a,b,c){a.Id&&(c&&window.focus(),Nd(a.Id),Sd(a.Id,b))};var Ai=function(a,b,c){O.call(this);this.w=a;J(this,this.w);this.g=b;J(this,this.g);this.Bg=0;this.ng=c;this.dc=null;this.Ff()};x(Ai,O);f=Ai.prototype;f.Ff=function(){this.h(this.w,"a",this.ej)};f.Ra=function(){this.g.Sd.register("dispose",v(this.Ui,this),this.g.Td);try{this.g.Sd.send("ready",void 0,v(this.Qj,this),this.g.Td)}catch(a){throw this.Pg(),a;}};f.Ui=function(){var a=v(this.Pg,this);this.dc?this.dc.wh.then(a):a()};
f.Pg=function(){var a=v(function(){this.N();gapi.iframes.getContext().closeSelf()},this);this.g.Ya?(a=v(this.Ag,this,a,5),this.g.Ya.close(void 0,a)):a()};f.Ag=function(a,b){if(0<=b--&&this.g.Ya)this.g.Ya.isDisposed()?a():fd(v(this.Ag,this,a,b),1);else throw Error("Unable to reset reCAPTCHA, please reload the page.");};f.Qj=function(a){a&&0<a.length&&(this.Bg=a[0].tabIndex)};
f.ej=function(){this.dc=Tc();zi(this.w,"\u78ba\u8a8d\u7528\u306e\u64cd\u4f5c\u3092\u53d7\u3051\u4ed8\u3051\u3066\u3044\u307e\u3059");this.w.la.Dh(v(function(){this.g.Ya?(this.g.Ya.send("show",new lh(!0)),this.w.Ne(!1),this.w.la.Tb(!1)):Bi(this)},this))};
var Bi=function(a){a.g.Jc="";var b=[],c=new M(function(b){var c=v(function(a){this.g.Jc=a;b()},a);Ci(a.g.xb,c,c)});b.push(c);a.ng.isEnabled()&&(c=new M(function(b){Di(a.ng,function(c){a.g.kf=c.data.data;"finish"==c.data.type&&b()});Ei(a.ng,Ga(a.g.Tc()))}),b.push(c));Rc(b).then(function(){var b={};b.c=a.w.Sj.value;b.hl="ja";b.k=Tg();b.v="r20150429132001";a.g.Jc&&(b.bg=a.g.Jc);a.g.kf&&(b.chr=a.g.kf);var c=(new ih({attributes:{title:"reCAPTCHA \u306b\u3088\u308b\u78ba\u8a8d",tabindex:String(a.Bg)}})).Eh("bubble"),
g=ti("api2/frame");c.A.url=g;b=jh(c,b);b.A.relayOpen=-1;c=new hh(b.A);c.A.bubbletype="pls-container";c.A.arrowPosition="top";c.A.anchorPosition="bottom";c.A.anchor=a.w.la.a();c.A.show=!1;c.A.showSpinner=!1;c.A.hideClickDetection=!Ke();gapi.iframes.getContext().open(b.value(),v(a.Dj,a));a.g.Jc=""})};f=Ai.prototype;f.Dj=function(a){this.g.Ya=a;a.register("ready",v(this.Oi,this));a.register("update",v(this.Qi,this));a.register("show",v(this.Pi,this));a.register("challenge_expired",v(this.Mi,this))};
f.Oi=function(){this.g.Ya.send("show",new lh(!0))};f.Qi=function(a){if(a.ak){this.w.la.Tb(!0);this.w.Ne(!1);zi(this.w,"\u78ba\u8a8d\u304c\u5b8c\u4e86\u3057\u307e\u3057\u305f",!0);var b=v(function(){fd(v(this.pj,this,a.response),1E3*a.Kj)},this);this.g.Sd.send("update",a,b,this.g.Td)}};f.Pi=function(a){a.visible&&this.w.la.Tb(!1);this.dc&&(this.dc.resolve(),this.dc=null)};
f.Mi=function(){zi(this.w,"\u78ba\u8a8d\u7528\u306e\u64cd\u4f5c\u306f\u6642\u9593\u5207\u308c\u3068\u306a\u308a\u307e\u3057\u305f\u3002\u30c1\u30a7\u30c3\u30af\u30dc\u30c3\u30af\u30b9\u3092\u30aa\u30f3\u306b\u3057\u3066\u65b0\u3057\u3044\u64cd\u4f5c\u3092\u958b\u59cb\u3057\u3066\u304f\u3060\u3055\u3044",!0)};
f.pj=function(a){if(this.w.la.da()){var b=v(function(){this.w.Ne(!0);this.w.la.Bh();zi(this.w,"\u78ba\u8a8d\u306f\u6642\u9593\u5207\u308c\u3068\u306a\u308a\u307e\u3057\u305f\u3002\u30c1\u30a7\u30c3\u30af\u30dc\u30c3\u30af\u30b9\u3092\u30aa\u30f3\u306b\u3057\u3066\u65b0\u3057\u3044\u64cd\u4f5c\u3092\u958b\u59cb\u3057\u3066\u304f\u3060\u3055\u3044");this.g.Sd.send("update",new kh(!1,""),void 0,this.g.Td)},this);this.g.Ya.send("timeout",new mh(a),b)}};var Fi=function(a){this.O=new Ah;a&&this.addAll(a)},Gi=function(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+ja(a):b.substr(0,1)+a};f=Fi.prototype;f.P=function(){return this.O.P()};f.add=function(a){this.O.set(Gi(a),a)};f.addAll=function(a){a=Dh(a);for(var b=a.length,c=0;c<b;c++)this.add(a[c])};f.od=function(a){a=Dh(a);for(var b=a.length,c=0;c<b;c++)this.remove(a[c])};f.remove=function(a){return this.O.remove(Gi(a))};f.clear=function(){this.O.clear()};f.Sa=function(){return this.O.Sa()};
f.contains=function(a){return this.O.zb(Gi(a))};f.ca=function(){return this.O.ca()};f.clone=function(){return new Fi(this)};f.Gc=function(){return this.O.Gc(!1)};var Hi=function(a){var b=l.onerror,c=!1;G&&!H("535.3")&&(c=!c);l.onerror=function(d,e,g,h,k){b&&b(d,e,g,h,k);a({message:d,fileName:e,wj:g,qk:h,error:k});return c}},Ji=function(a){for(var b=[],c=arguments.callee.caller,d=0;c&&(!a||d<a);){b.push(Ii(c));b.push("()\n");try{c=c.caller}catch(e){b.push("[exception trying to get caller]\n");break}d++;if(50<=d){b.push("[...long stack...]");break}}a&&d>=a?b.push("[...reached max depth limit...]"):b.push("[end]");return b.join("")},Ii=function(a){if(Li[a])return Li[a];
a=String(a);if(!Li[a]){var b=/function ([^\(]+)/.exec(a);Li[a]=b?b[1]:"[Anonymous]"}return Li[a]},Li={};var Mi=function(a){l.console&&(l.console.timeStamp?l.console.timeStamp(a):l.console.markTimeline&&l.console.markTimeline(a));l.msWriteProfilerMark&&l.msWriteProfilerMark(a)};var Ni=function(){};Ni.prototype.xg=null;var Pi=function(a){var b;(b=a.xg)||(b={},Oi(a)&&(b[0]=!0,b[1]=!0),b=a.xg=b);return b};var Qi,Ri=function(){};x(Ri,Ni);var Si=function(a){return(a=Oi(a))?new ActiveXObject(a):new XMLHttpRequest},Oi=function(a){if(!a.Zg&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],c=0;c<b.length;c++){var d=b[c];try{return new ActiveXObject(d),a.Zg=d}catch(e){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed");}return a.Zg};Qi=new Ri;var V=function(a){L.call(this);this.headers=new Ah;this.$e=a||null;this.gb=!1;this.Ze=this.C=null;this.Kf="";this.oc=0;this.se="";this.Jb=this.Ef=this.oe=this.pf=!1;this.ub=0;this.Qe=null;this.xc="";this.lg=this.ik=!1};x(V,L);var Ti=/^https?$/i,Ui=["POST","PUT"],Vi=[];V.prototype.zi=function(){this.N();Va(Vi,this)};V.prototype.Fh=function(a){this.ub=Math.max(0,a)};V.prototype.Ug=function(){return this.xc};
V.prototype.send=function(a,b,c,d){if(this.C)throw Error("[goog.net.XhrIo] Object is active with another request="+this.Kf+"; newUri="+a);b=b?b.toUpperCase():"GET";this.Kf=a;this.se="";this.oc=0;this.pf=!1;this.gb=!0;this.C=this.$e?Si(this.$e):Si(Qi);this.Ze=this.$e?Pi(this.$e):Pi(Qi);this.C.onreadystatechange=v(this.qh,this);try{this.Ef=!0,this.C.open(b,String(a),!0),this.Ef=!1}catch(e){this.Wd(5,e);return}a=c||"";var g=this.headers.clone();d&&Eh(d,function(a,b){g.set(b,a)});d=Sa(g.za());c=l.FormData&&
a instanceof l.FormData;!Ta(Ui,b)||d||c||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");g.forEach(function(a,b){this.C.setRequestHeader(b,a)},this);this.xc&&(this.C.responseType=this.xc);"withCredentials"in this.C&&(this.C.withCredentials=this.ik);try{Wi(this),0<this.ub&&((this.lg=Xi(this.C))?(this.C.timeout=this.ub,this.C.ontimeout=v(this.yd,this)):this.Qe=fd(this.yd,this.ub,this)),this.oe=!0,this.C.send(a),this.oe=!1}catch(h){this.Wd(5,h)}};
var Xi=function(a){return F&&H(9)&&fa(a.timeout)&&m(a.ontimeout)},Ra=function(a){return"content-type"==a.toLowerCase()};V.prototype.yd=function(){"undefined"!=typeof aa&&this.C&&(this.se="Timed out after "+this.ub+"ms, aborting",this.oc=8,this.dispatchEvent("timeout"),this.abort(8))};V.prototype.Wd=function(a,b){this.gb=!1;this.C&&(this.Jb=!0,this.C.abort(),this.Jb=!1);this.se=b;this.oc=a;Yi(this);Zi(this)};var Yi=function(a){a.pf||(a.pf=!0,a.dispatchEvent("complete"),a.dispatchEvent("error"))};
V.prototype.abort=function(a){this.C&&this.gb&&(this.gb=!1,this.Jb=!0,this.C.abort(),this.Jb=!1,this.oc=a||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Zi(this))};V.prototype.j=function(){this.C&&(this.gb&&(this.gb=!1,this.Jb=!0,this.C.abort(),this.Jb=!1),Zi(this,!0));V.b.j.call(this)};V.prototype.qh=function(){this.isDisposed()||(this.Ef||this.oe||this.Jb?$i(this):this.Rf())};V.prototype.Rf=function(){$i(this)};
var $i=function(a){if(a.gb&&"undefined"!=typeof aa&&(!a.Ze[1]||4!=aj(a)||2!=bj(a)))if(a.oe&&4==aj(a))fd(a.qh,0,a);else if(a.dispatchEvent("readystatechange"),4==aj(a)){a.gb=!1;try{if(cj(a))a.dispatchEvent("complete"),a.dispatchEvent("success");else{a.oc=6;var b;try{b=2<aj(a)?a.C.statusText:""}catch(c){b=""}a.se=b+" ["+bj(a)+"]";Yi(a)}}finally{Zi(a)}}},Zi=function(a,b){if(a.C){Wi(a);var c=a.C,d=a.Ze[0]?n:null;a.C=null;a.Ze=null;b||a.dispatchEvent("ready");try{c.onreadystatechange=d}catch(e){}}},Wi=
function(a){a.C&&a.lg&&(a.C.ontimeout=null);fa(a.Qe)&&(l.clearTimeout(a.Qe),a.Qe=null)};V.prototype.nc=function(){return!!this.C};
var cj=function(a){var b=bj(a),c;a:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:c=!0;break a;default:c=!1}if(!c){if(b=0===b)a=Hh(String(a.Kf))[1]||null,!a&&self.location&&(a=self.location.protocol,a=a.substr(0,a.length-1)),b=!Ti.test(a?a.toLowerCase():"");c=b}return c},aj=function(a){return a.C?a.C.readyState:0},bj=function(a){try{return 2<aj(a)?a.C.status:-1}catch(b){return-1}};cb(function(a){V.prototype.Rf=a(V.prototype.Rf)});var dj=function(a,b){I.call(this);this.Qg=this.Lg=null;this.Lb=b;this.W=[];if(a>this.Lb)throw Error("[goog.structs.SimplePool] Initial cannot be greater than max");for(var c=0;c<a;c++)this.W.push(this.Za())};x(dj,I);f=dj.prototype;f.cb=function(){return this.W.length?this.W.pop():this.Za()};f.Ja=function(a){this.W.length<this.Lb?this.W.push(a):this.Db(a)};f.Za=function(){return this.Lg?this.Lg():{}};f.Db=function(a){if(this.Qg)this.Qg(a);else if(ga(a))if(u(a.N))a.N();else for(var b in a)delete a[b]};
f.j=function(){dj.b.j.call(this);for(var a=this.W;a.length;)this.Db(a.pop());delete this.W};var gj=function(){this.ha=[];this.rb=new Ah;this.Mh=this.Se=this.Te=this.xd=0;this.Vb=new Ah;this.Eg=this.kg=0;this.qc=1;this.Eb=new dj(0,4E3);this.Eb.Za=function(){return new ej};this.gg=new dj(0,50);this.gg.Za=function(){return new fj};var a=this;this.jc=new dj(0,2E3);this.jc.Za=function(){return String(a.qc++)};this.jc.Db=function(){};this.Ng=3};gj.prototype.af=1E3;var fj=function(){this.Cd=this.time=this.count=0};
fj.prototype.toString=function(){var a=[];a.push(this.type," ",this.count," (",Math.round(10*this.time)/10," ms)");this.Cd&&a.push(" [VarAlloc = ",this.Cd,"]");return a.join("")};var ej=function(){},jj=function(a,b,c,d){var e=[];-1==c?e.push("    "):e.push(hj(a.Xd-c));e.push(" ",ij(a.Xd-b));0==a.Qc?e.push(" Start        "):1==a.Qc?(e.push(" Done "),e.push(hj(a.$j-a.startTime)," ms ")):e.push(" Comment      ");e.push(d,a);0<a.zd&&e.push("[VarAlloc ",a.zd,"] ");return e.join("")};
ej.prototype.toString=function(){return null==this.type?this.Kc:"["+this.type+"] "+this.Kc};gj.prototype.reset=function(a){this.Ng=a;for(a=0;a<this.ha.length;a++){var b=this.Eb.id;b&&this.jc.Ja(b);this.Eb.Ja(this.ha[a])}this.ha.length=0;this.rb.clear();this.xd=w();this.Eg=this.kg=this.Mh=this.Se=this.Te=0;b=this.Vb.za();for(a=0;a<b.length;a++){var c=this.Vb.get(b[a]);c.count=0;c.time=0;c.Cd=0;this.gg.Ja(c)}this.Vb.clear()};var kj=function(){var a=W.sk;return a&&a.isTracing()?a.totalVarAlloc:-1};
gj.prototype.toString=function(){for(var a=[],b=-1,c=[],d=0;d<this.ha.length;d++){var e=this.ha[d];1==e.Qc&&c.pop();a.push(" ",jj(e,this.xd,b,c.join("")));b=e.Xd;a.push("\n");0==e.Qc&&c.push("|  ")}if(0!=this.rb.P()){var g=w();a.push(" Unstopped timers:\n");zh(this.rb,function(b){a.push("  ",b," (",g-b.startTime," ms, started at ",ij(b.startTime),")\n")})}b=this.Vb.za();for(d=0;d<b.length;d++)c=this.Vb.get(b[d]),1<c.count&&a.push(" TOTAL ",c,"\n");a.push("Total tracers created ",this.kg,"\n","Total comments created ",
this.Eg,"\n","Overhead start: ",this.Te," ms\n","Overhead end: ",this.Se," ms\n","Overhead comment: ",this.Mh," ms\n");return a.join("")};var hj=function(a){a=Math.round(a);var b="";1E3>a&&(b=" ");100>a&&(b="  ");10>a&&(b="   ");return b+a},ij=function(a){a=Math.round(a);return String(100+a/1E3%60).substring(1,3)+"."+String(1E3+a%1E3).substring(1,4)},W=new gj;var lj=function(a){I.call(this);this.Ii=a;this.jk=!0;this.Oj=!1};x(lj,I);lj.prototype.pi=!1;lj.prototype.Uh=function(a){return mj(this,a)};
var nj=function(a,b){return(b?"__wrapper_":"__protected_")+ja(a)+"__"},mj=function(a,b){var c=nj(a,!0);b[c]||((b[c]=oj(a,b))[nj(a,!1)]=b);return b[c]},oj=function(a,b){var c=a.pi;if(c)var d=Ji(15);var e=function(){if(a.isDisposed())return b.apply(this,arguments);if(c){var e=d,h=[];h.push("##PE_STACK_START##");h.push(e.replace(/(\r\n|\r|\n)/g,"##STACK_BR##"));h.push("##PE_STACK_END##");var k="protectedEntryPoint: "+h.join(""),e=w(),q=kj(),t=W.rb.P();if(W.ha.length+t>W.af){if(W.ha.length>W.af/2){for(var C=
0;C<W.ha.length;C++)h=W.ha[C],h.id&&W.jc.Ja(h.id),W.Eb.Ja(h);W.ha.length=0}t>W.af/2&&W.rb.clear()}Mi("Start : "+k);h=W.Eb.cb();h.zd=q;h.Qc=0;h.id=Number(W.jc.cb());h.Kc=k;h.type=void 0;W.ha.push(h);W.rb.set(String(h.id),h);W.kg++;k=w();h.startTime=h.Xd=k;W.Te+=k-e;e=h.id}try{return b.apply(this,arguments)}catch(A){a.Ii(A);if(!a.jk)throw a.Oj&&("object"===typeof A?A.message="Error in protected function: "+A.message:A="Error in protected function: "+A),A;throw new pj(A);}finally{if(c&&(k=e,e=w(),q=
W.Ng,h=W.rb.get(String(k)),null!=h)){W.rb.remove(String(k));var z,k=e-h.startTime;if(k<q)for(q=W.ha.length-1;0<=q;q--){if(W.ha[q]==h){W.ha.splice(q,1);W.jc.Ja(h.id);W.Eb.Ja(h);break}}else z=W.Eb.cb(),z.Qc=1,z.startTime=h.startTime,z.Kc=h.Kc,z.type=h.type,z.$j=z.Xd=e,W.ha.push(z);q=h.type;t=null;q&&(t=W,C=t.Vb.get(q),C||(C=t.gg.cb(),C.type=q,t.Vb.set(q,C)),t=C,t.count++,t.time+=k);z&&(Mi("Stop : "+z.Kc),z.zd=kj(),t&&(t.Cd+=z.zd-h.zd));z=w();W.Se+=z-e}}};e[nj(a,!1)]=b;return e},qj=function(a,b){var c=
ba("window"),d=c[b];c[b]=function(b,c){r(b)&&(b=ma(oa,b));b=mj(a,b);return d.call?d.call(this,b,c):d(b,c)};c[b][nj(a,!1)]=d};lj.prototype.j=function(){var a=ba("window"),b;b=a.setTimeout;b=b[nj(this,!1)]||b;a.setTimeout=b;b=a.setInterval;b=b[nj(this,!1)]||b;a.setInterval=b;lj.b.j.call(this)};var pj=function(a){y.call(this,"Error in protected function: "+(a&&a.message?String(a.message):String(a)));(a=a&&a.stack)&&r(a)&&(this.stack=a)};x(pj,y);var sj=function(a,b,c){L.call(this);this.Ig=b||null;this.Bi="context.";this.Nh=null;this.sg={};this.kk=rj;this.kj=a;if(!c)if(this.gc=null,F&&!H("10"))Hi(v(this.Xg,this));else{this.gc=new lj(v(this.Xg,this));qj(this.gc,"setTimeout");qj(this.gc,"setInterval");a=this.gc;b=ba("window");c=["requestAnimationFrame","mozRequestAnimationFrame","webkitAnimationFrame","msRequestAnimationFrame"];for(var d=0;d<c.length;d++){var e=c[d];c[d]in b&&qj(a,e)}a=this.gc;bb=!0;b=v(a.Uh,a);for(c=0;c<$a.length;c++)$a[c](b);
ab.push(a)}};x(sj,L);var tj=function(a,b){Ob.call(this,"b");this.error=a;this.context=b};x(tj,Ob);var uj=function(){new sj("/recaptcha/api2/jserrorlogging",void 0,void 0)},rj=function(a,b,c,d){var e=new V;Vi.push(e);e.Y("ready",e.zi);e.send(a,b,c,d)};
sj.prototype.Xg=function(a,b){var c;c=ba("window.location.href");if(r(a))c={message:a,name:"Unknown error",lineNumber:"Not available",fileName:c,stack:"Not available"};else{var d,e,g=!1;try{d=a.lineNumber||a.wj||"Not available"}catch(h){d="Not available",g=!0}try{e=a.fileName||a.filename||a.sourceURL||l.$googDebugFname||c}catch(k){e="Not available",g=!0}c=!g&&a.lineNumber&&a.fileName&&a.stack&&a.message&&a.name?a:{message:a.message||"Not available",name:a.name||"UnknownError",lineNumber:d,fileName:e,
stack:a.stack||"Not available"}}var q;if(b){d={};for(q in b)d[q]=b[q];q=d}else q={};if(this.Ig)try{this.Ig(c,q)}catch(t){}e=c.message.substring(0,1900);if(!(a instanceof y)||a.Uj){d=c.stack;try{var C=Nh(this.kj,"script",c.fileName,"error",e,"line",c.lineNumber);hb(this.sg)||(C=Jh(Mh([C],this.sg)));e={};e.trace=d;if(q)for(var A in q)e[this.Bi+A]=q[A];var z,Ki=Mh([],e);Ki[0]="";z=Ki.join("");fa(this.Nh)&&(z=z.substring(0,this.Nh));this.kk(C,"POST",z,this.rk)}catch(Em){}}try{this.dispatchEvent(new tj(c,
q))}catch(Fm){}};sj.prototype.j=function(){Nb(this.gc);sj.b.j.call(this)};/*
 Portions of this code are from MochiKit, received by
 The Closure Authors under the MIT license. All other code is Copyright
 2005-2009 The Closure Authors. All Rights Reserved.
*/
var vj=function(a,b){this.Fe=[];this.lh=a;this.Mg=b||null;this.Yc=this.hc=!1;this.sa=void 0;this.fg=this.ui=this.gf=!1;this.Ue=0;this.B=null;this.hf=0};vj.prototype.cancel=function(a){if(this.hc)this.sa instanceof vj&&this.sa.cancel();else{if(this.B){var b=this.B;delete this.B;a?b.cancel(a):(b.hf--,0>=b.hf&&b.cancel())}this.lh?this.lh.call(this.Mg,this):this.fg=!0;this.hc||(a=new wj,this.Oa(),xj(this,!1,a))}};vj.prototype.Jg=function(a,b){this.gf=!1;xj(this,a,b)};
var xj=function(a,b,c){a.hc=!0;a.sa=c;a.Yc=!b;yj(a)};vj.prototype.Oa=function(){if(this.hc){if(!this.fg)throw new zj;this.fg=!1}};vj.prototype.yg=function(a){this.Oa();xj(this,!0,a)};var Aj=function(a,b,c){a.Fe.push([b,c,void 0]);a.hc&&yj(a)};vj.prototype.then=function(a,b,c){var d,e,g=new M(function(a,b){d=a;e=b});Aj(this,d,function(a){a instanceof wj?g.cancel():e(a)});return g.then(a,b,c)};Hc(vj);
var Bj=function(a){return Pa(a.Fe,function(a){return u(a[1])})},yj=function(a){if(a.Ue&&a.hc&&Bj(a)){var b=a.Ue,c=Cj[b];c&&(l.clearTimeout(c.S),delete Cj[b]);a.Ue=0}a.B&&(a.B.hf--,delete a.B);for(var b=a.sa,d=c=!1;a.Fe.length&&!a.gf;){var e=a.Fe.shift(),g=e[0],h=e[1],e=e[2];if(g=a.Yc?h:g)try{var k=g.call(e||a.Mg,b);m(k)&&(a.Yc=a.Yc&&(k==b||k instanceof Error),a.sa=b=k);if(Ic(b)||"function"===typeof l.Promise&&b instanceof l.Promise)d=!0,a.gf=!0}catch(q){b=q,a.Yc=!0,Bj(a)||(c=!0)}}a.sa=b;d&&(k=v(a.Jg,
a,!0),d=v(a.Jg,a,!1),b instanceof vj?(Aj(b,k,d),b.ui=!0):b.then(k,d));c&&(b=new Dj(b),Cj[b.S]=b,a.Ue=b.S)},zj=function(){y.call(this)};x(zj,y);zj.prototype.message="Deferred has already fired";zj.prototype.name="AlreadyCalledError";var wj=function(){y.call(this)};x(wj,y);wj.prototype.message="Deferred was canceled";wj.prototype.name="CanceledError";var Dj=function(a){this.S=l.setTimeout(v(this.ck,this),0);this.Wd=a};Dj.prototype.ck=function(){delete Cj[this.S];throw this.Wd;};var Cj={};var Ij=function(a,b){var c=b||{},d=c.document||document,e=document.createElement("SCRIPT"),g={Ah:e,yd:void 0},h=new vj(Ej,g),k=null,q=null!=c.timeout?c.timeout:5E3;0<q&&(k=window.setTimeout(function(){Fj(e,!0);var b=new Gj(1,"Timeout reached for loading script "+a);h.Oa();xj(h,!1,b)},q),g.yd=k);e.onload=e.onreadystatechange=function(){e.readyState&&"loaded"!=e.readyState&&"complete"!=e.readyState||(Fj(e,c.pk||!1,k),h.yg(null))};e.onerror=function(){Fj(e,!0,k);var b=new Gj(0,"Error while loading script "+
a);h.Oa();xj(h,!1,b)};Jd(e,{type:"text/javascript",charset:"UTF-8",src:a});Hj(d).appendChild(e);return h},Hj=function(a){var b=a.getElementsByTagName("HEAD");return b&&0!=b.length?b[0]:a.documentElement},Ej=function(){if(this&&this.Ah){var a=this.Ah;a&&"SCRIPT"==a.tagName&&Fj(a,!0,this.yd)}},Fj=function(a,b,c){null!=c&&l.clearTimeout(c);a.onload=n;a.onerror=n;a.onreadystatechange=n;b&&window.setTimeout(function(){Od(a)},0)},Gj=function(a,b){var c="Jsloader error (code #"+a+")";b&&(c+=": "+b);y.call(this,
c);this.code=a};x(Gj,y);var Jj=function(){this.Ob=this.Na=null};Jj.prototype.set=function(a){U(a,3);U(a,1)||U(a,2);this.Na=a;this.Ob=null};
Jj.prototype.load=function(){window.botguard&&(window.botguard=null);if(U(this.Na,3)&&(U(this.Na,1)||U(this.Na,2))){var a=oh(vh(U(this.Na,3)));if(U(this.Na,1))this.Ob=new M(function(b,c){var g=oh(vh(U(this.Na,1)));Ij(g).then(function(){try{window.botguard&&window.botguard.bg?b(new window.botguard.bg(a)):c(null)}catch(g){c(null)}},c)},this);else{if(U(this.Na,2)){var b=oh(vh(U(this.Na,2)));try{if(oa(b),window.botguard&&window.botguard.bg){this.Ob=Oc(new window.botguard.bg(a));return}}catch(c){}}this.Ob=
Pc()}}else this.Ob=Pc()};var Ci=function(a,b,c){Wc(a.Ob.then(function(a){a.invoke(function(a){b(a)})},function(){c()}),v(a.Ai,a))};Jj.prototype.Ai=function(){this.Ob=this.Na=null};var Kj=function(){this.wb=-1};var Nj=function(a,b){this.wb=-1;this.wb=64;this.Pd=l.Uint8Array?new Uint8Array(this.wb):Array(this.wb);this.Re=this.lc=0;this.I=[];this.zj=a;this.$g=b;this.hk=l.Int32Array?new Int32Array(64):Array(64);m(Lj)||(Lj=l.Int32Array?new Int32Array(Mj):Mj);this.reset()},Lj;x(Nj,Kj);for(var Oj=[],Pj=0;63>Pj;Pj++)Oj[Pj]=0;var Qj=Wa(128,Oj);Nj.prototype.reset=function(){this.Re=this.lc=0;this.I=l.Int32Array?new Int32Array(this.$g):Xa(this.$g)};
var Rj=function(a){for(var b=a.Pd,c=a.hk,d=0,e=0;e<b.length;)c[d++]=b[e]<<24|b[e+1]<<16|b[e+2]<<8|b[e+3],e=4*d;for(b=16;64>b;b++){var e=c[b-15]|0,d=c[b-2]|0,g=(c[b-16]|0)+((e>>>7|e<<25)^(e>>>18|e<<14)^e>>>3)|0,h=(c[b-7]|0)+((d>>>17|d<<15)^(d>>>19|d<<13)^d>>>10)|0;c[b]=g+h|0}for(var d=a.I[0]|0,e=a.I[1]|0,k=a.I[2]|0,q=a.I[3]|0,t=a.I[4]|0,C=a.I[5]|0,A=a.I[6]|0,g=a.I[7]|0,b=0;64>b;b++)var z=((d>>>2|d<<30)^(d>>>13|d<<19)^(d>>>22|d<<10))+(d&e^d&k^e&k)|0,h=t&C^~t&A,g=g+((t>>>6|t<<26)^(t>>>11|t<<21)^(t>>>
25|t<<7))|0,h=h+(Lj[b]|0)|0,h=g+(h+(c[b]|0)|0)|0,g=A,A=C,C=t,t=q+h|0,q=k,k=e,e=d,d=h+z|0;a.I[0]=a.I[0]+d|0;a.I[1]=a.I[1]+e|0;a.I[2]=a.I[2]+k|0;a.I[3]=a.I[3]+q|0;a.I[4]=a.I[4]+t|0;a.I[5]=a.I[5]+C|0;a.I[6]=a.I[6]+A|0;a.I[7]=a.I[7]+g|0};
Nj.prototype.update=function(a,b){m(b)||(b=a.length);var c=0,d=this.lc;if(r(a))for(;c<b;)this.Pd[d++]=a.charCodeAt(c++),d==this.wb&&(Rj(this),d=0);else if(p(a))for(;c<b;){var e=a[c++];if(!("number"==typeof e&&0<=e&&255>=e&&e==(e|0)))throw Error("message must be a byte array");this.Pd[d++]=e;d==this.wb&&(Rj(this),d=0)}else throw Error("message must be string or array");this.lc=d;this.Re+=b};
Nj.prototype.digest=function(){var a=[],b=8*this.Re;56>this.lc?this.update(Qj,56-this.lc):this.update(Qj,this.wb-(this.lc-56));for(var c=63;56<=c;c--)this.Pd[c]=b&255,b/=256;Rj(this);for(c=b=0;c<this.zj;c++)for(var d=24;0<=d;d-=8)a[b++]=this.I[c]>>d&255;return a};
var Mj=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,
4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];var Tj=function(){Nj.call(this,8,Sj)};x(Tj,Nj);var Sj=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];var Vj=function(a,b){var c=Array.prototype.slice.call(arguments),d=c.shift();if("undefined"==typeof d)throw Error("[goog.string.format] Template required");return d.replace(/%([0\-\ \+]*)(\d+)?(\.(\d+))?([%sfdiu])/g,function(a,b,d,k,q,t,C,A){if("%"==t)return"%";var z=c.shift();if("undefined"==typeof z)throw Error("[goog.string.format] Not enough arguments");arguments[0]=z;return Uj[t].apply(null,arguments)})},Uj={s:function(a,b,c){return isNaN(c)||""==c||a.length>=c?a:a=-1<b.indexOf("-",0)?a+Array(c-
a.length+1).join(" "):Array(c-a.length+1).join(" ")+a},f:function(a,b,c,d,e){d=a.toString();isNaN(e)||""==e||(d=parseFloat(a).toFixed(e));var g;g=0>a?"-":0<=b.indexOf("+")?"+":0<=b.indexOf(" ")?" ":"";0<=a&&(d=g+d);if(isNaN(c)||d.length>=c)return d;d=isNaN(e)?Math.abs(a).toString():Math.abs(a).toFixed(e);a=c-d.length-g.length;return d=0<=b.indexOf("-",0)?g+d+Array(a+1).join(" "):g+Array(a+1).join(0<=b.indexOf("0",0)?"0":" ")+d},d:function(a,b,c,d,e,g,h,k){return Uj.f(parseInt(a,10),b,c,d,0,g,h,k)}};
Uj.i=Uj.d;Uj.u=Uj.d;var Wj=function(a){Ng(a);for(var b=0;b<Ng(a).length;b++){var c=Ng(a)[b];U(c,3);U(c,4)}this.lf=a;this.sa=[]},Xj=function(a){for(var b=U(a,3);b<=U(a,4);b++){var c=b,d=a,c=Vj("%s_%d",U(d,1),c),e=new Tj;e.update(c);if(ph(e.digest())==U(d,2))return b}return-1},Yj=function(a,b,c){a.xd=(new Date).getTime();if(!F||H("8"))for(var d=Ng(a.lf),e=0;e<d.length;e++)a.sa.push(Xj(d[e])),c.call(void 0,Cg(a.sa),(new Date).getTime()-a.xd);b.call(void 0,Cg(a.sa),(new Date).getTime()-a.xd)};var Zj=function(a){this.vb=window.Worker&&a?new Worker(a):null};x(Zj,I);Zj.prototype.isEnabled=function(){return!!this.vb};var Di=function(a,b){a.vb&&(a.vb.onmessage=b)},Ei=function(a,b){a.vb&&a.vb.postMessage(ak("start",b.Ge()))};Zj.prototype.j=function(){this.vb&&this.vb.terminate();this.vb=null};
var ak=function(a,b){return{type:a,data:b}},bk=function(a){if("start"==a.data.type){a=new Wg(Ag(a.data.data));a=new Wj(a);var b=self;Yj(a,function(a){b.postMessage(ak("finish",a))},function(a){b.postMessage(ak("progress",a))})}};l.document||l.window||(self.onmessage=bk);var ck=function(){this.xa=[];this.Ma=[]};f=ck.prototype;f.Vd=function(a){this.Ma.push(a)};f.Mc=function(){0==this.xa.length&&(this.xa=this.Ma,this.xa.reverse(),this.Ma=[]);return this.xa.pop()};f.P=function(){return this.xa.length+this.Ma.length};f.Sa=function(){return 0==this.xa.length&&0==this.Ma.length};f.clear=function(){this.xa=[];this.Ma=[]};f.contains=function(a){return Ta(this.xa,a)||Ta(this.Ma,a)};
f.remove=function(a){var b=La(this.xa,a);if(0>b)return Va(this.Ma,a);B.splice.call(this.xa,b,1);return!0};f.ca=function(){for(var a=[],b=this.xa.length-1;0<=b;--b)a.push(this.xa[b]);for(var c=this.Ma.length,b=0;b<c;++b)a.push(this.Ma[b]);return a};var dk=function(a,b){I.call(this);this.ih=a||0;this.Lb=b||10;if(this.ih>this.Lb)throw Error("[goog.structs.Pool] Min can not be greater than max");this.W=new ck;this.ob=new Fi;this.nf=0;this.Jf=null;this.Gd()};x(dk,I);f=dk.prototype;f.cb=function(){var a=w();if(!(null!=this.Jf&&a-this.Jf<this.nf)){for(var b;0<this.W.P()&&(b=this.W.Mc(),!this.Pf(b));)this.Gd();!b&&this.P()<this.Lb&&(b=this.Za());b&&(this.Jf=a,this.ob.add(b));return b}};f.Ja=function(a){return this.ob.remove(a)?(this.bf(a),!0):!1};
f.bf=function(a){this.ob.remove(a);this.Pf(a)&&this.P()<this.Lb?this.W.Vd(a):this.Db(a)};f.Gd=function(){for(var a=this.W;this.P()<this.ih;)a.Vd(this.Za());for(;this.P()>this.Lb&&0<this.W.P();)this.Db(a.Mc())};f.Za=function(){return{}};f.Db=function(a){if("function"==typeof a.N)a.N();else for(var b in a)a[b]=null};f.Pf=function(a){return"function"==typeof a.xi?a.xi():!0};f.contains=function(a){return this.W.contains(a)||this.ob.contains(a)};f.P=function(){return this.W.P()+this.ob.P()};
f.Sa=function(){return this.W.Sa()&&this.ob.Sa()};f.j=function(){dk.b.j.call(this);if(0<this.ob.P())throw Error("[goog.structs.Pool] Objects not released");delete this.ob;for(var a=this.W;!a.Sa();)this.Db(a.Mc());delete this.W};var ek=function(a,b){this.gh=a;this.Dc=b};ek.prototype.getKey=function(){return this.gh};ek.prototype.R=function(){return this.Dc};ek.prototype.clone=function(){return new ek(this.gh,this.Dc)};var fk=function(a){this.Ia=[];if(a)a:{var b,c;if(a instanceof fk){if(b=a.za(),c=a.ca(),0>=a.P()){a=this.Ia;for(var d=0;d<b.length;d++)a.push(new ek(b[d],c[d]));break a}}else b=gb(a),c=fb(a);for(d=0;d<b.length;d++)gk(this,b[d],c[d])}},gk=function(a,b,c){var d=a.Ia;d.push(new ek(b,c));b=d.length-1;a=a.Ia;for(c=a[b];0<b;)if(d=b-1>>1,a[d].getKey()>c.getKey())a[b]=a[d],b=d;else break;a[b]=c};f=fk.prototype;
f.remove=function(){var a=this.Ia,b=a.length,c=a[0];if(!(0>=b)){if(1==b)Ua(a);else{a[0]=a.pop();for(var a=0,b=this.Ia,d=b.length,e=b[a];a<d>>1;){var g=2*a+1,h=2*a+2,g=h<d&&b[h].getKey()<b[g].getKey()?h:g;if(b[g].getKey()>e.getKey())break;b[a]=b[g];a=g}b[a]=e}return c.R()}};f.ca=function(){for(var a=this.Ia,b=[],c=a.length,d=0;d<c;d++)b.push(a[d].R());return b};f.za=function(){for(var a=this.Ia,b=[],c=a.length,d=0;d<c;d++)b.push(a[d].getKey());return b};
f.zb=function(a){return Pa(this.Ia,function(b){return b.getKey()==a})};f.clone=function(){return new fk(this)};f.P=function(){return this.Ia.length};f.Sa=function(){return 0==this.Ia.length};f.clear=function(){Ua(this.Ia)};var hk=function(){fk.call(this)};x(hk,fk);hk.prototype.Vd=function(a,b){gk(this,a,b)};hk.prototype.Mc=function(){return this.remove()};var ik=function(a,b){this.Og=void 0;this.Ce=new hk;dk.call(this,a,b)};x(ik,dk);f=ik.prototype;f.cb=function(a,b){if(!a){var c=ik.b.cb.call(this);c&&this.nf&&(this.Og=l.setTimeout(v(this.ie,this),this.nf));return c}this.Ce.Vd(m(b)?b:100,a);this.ie()};f.ie=function(){for(var a=this.Ce;0<a.P();){var b=this.cb();if(b)a.Mc().apply(this,[b]);else break}};f.bf=function(a){ik.b.bf.call(this,a);this.ie()};f.Gd=function(){ik.b.Gd.call(this);this.ie()};
f.j=function(){ik.b.j.call(this);l.clearTimeout(this.Og);this.Ce.clear();this.Ce=null};var jk=function(a,b,c){ik.call(this,b,c);this.Bf=a};x(jk,ik);jk.prototype.Za=function(){var a=new V,b=this.Bf;b&&b.forEach(function(b,d){a.headers.set(d,b)});return a};jk.prototype.Pf=function(a){return!a.isDisposed()&&!a.nc()};var kk=function(a,b,c,d,e){L.call(this);this.fd=m(a)?a:1;this.ub=m(e)?Math.max(0,e):0;this.Fc=new jk(b,c,d);this.Ka=new Ah;this.V=new O(this)};x(kk,L);var lk="ready complete success error abort timeout".split(" ");f=kk.prototype;f.Fh=function(a){this.ub=Math.max(0,a)};f.send=function(a,b,c,d,e,g,h,k,q){if(this.Ka.get(a))throw Error("[goog.net.XhrManager] ID in use");b=new mk(b,v(this.Wi,this,a),c,d,e,h,m(k)?k:this.fd,q);this.Ka.set(a,b);a=v(this.Si,this,a);this.Fc.cb(a,g);return b};
f.abort=function(a,b){var c=this.Ka.get(a);if(c){var d=c.Ye;c.pg=!0;b&&(d&&(this.V.ja(d,lk,c.og),ic(d,"ready",function(){this.Fc.Ja(d)},!1,this)),this.Ka.remove(a));d&&d.abort()}};f.Si=function(a,b){var c=this.Ka.get(a);c&&!c.Ye?(this.V.h(b,lk,c.og),b.Fh(this.ub),b.xc=c.Ug(),c.Ye=b,this.dispatchEvent(new nk("ready",this,a,b)),ok(this,a,b),c.pg&&b.abort()):this.Fc.Ja(b)};
f.Wi=function(a,b){var c=b.target;switch(b.type){case "ready":ok(this,a,c);break;case "complete":a:{var d=this.Ka.get(a);if(7==c.oc||cj(c)||d.Kd>d.fd)if(this.dispatchEvent(new nk("complete",this,a,c)),d&&(d.Gg=!0,d.Fg)){c=d.Fg.call(c,b);break a}c=null}return c;case "success":this.dispatchEvent(new nk("success",this,a,c));break;case "timeout":case "error":d=this.Ka.get(a);d.Kd>d.fd&&this.dispatchEvent(new nk("error",this,a,c));break;case "abort":this.dispatchEvent(new nk("abort",this,a,c))}return null};
var ok=function(a,b,c){var d=a.Ka.get(b);!d||d.Gg||d.Kd>d.fd?(d&&(a.V.ja(c,lk,d.og),a.Ka.remove(b)),a.Fc.Ja(c)):(d.Kd++,c.send(d.getUrl(),d.uf(),d.ya(),d.Bf))};kk.prototype.j=function(){kk.b.j.call(this);this.Fc.N();this.Fc=null;this.V.N();this.V=null;this.Ka.clear();this.Ka=null};var nk=function(a,b,c,d){Ob.call(this,a,b);this.id=c;this.Ye=d};x(nk,Ob);
var mk=function(a,b,c,d,e,g,h,k){this.fk=a;this.pc=c||"GET";this.Bb=d;this.Bf=e||null;this.fd=m(h)?h:1;this.Kd=0;this.pg=this.Gg=!1;this.og=b;this.Fg=g;this.xc=k||"";this.Ye=null};mk.prototype.getUrl=function(){return this.fk};mk.prototype.uf=function(){return this.pc};mk.prototype.ya=function(){return this.Bb};mk.prototype.Ug=function(){return this.xc};var qk=function(){I.call(this);this.Vh=new kk(0,pk,1,10,5E3);J(this,this.Vh);this.qc=0};x(qk,I);var pk=new Ah;qk.prototype.send=function(a){return new M(function(b,c){var d=String(this.qc++);this.Vh.send(d,a.We.toString(),a.uf(),a.ya(),pk,void 0,v(function(a,d){var h=d.target;if(cj(h)){var k=a.Wj;h.C?(h=h.C.responseText,0==h.indexOf(")]}'\n")&&(h=h.substring(5)),h=zg(h)):h=void 0;b(new k(h))}else c(new rk(a))},this,a))},this)};var rk=function(a){y.call(this);this.request=a};x(rk,y);
rk.prototype.name="XhrError";var sk=function(){return!(!window.gapi||!window.gapi.load)};var tk=function(a){Sg.Ga().Ra(a.Yd());Ug()&&uj();var b=U(a,2),b=new yi(b);b.render(document.body);var c=new qk,d=new Jj;d.set(Ga(a.Sc()));d.load();c=new fh(c,a,d);d="";a.Tc()&&(a=ei(ti("api2/webworker.js")),di(a,"hl","ja"),di(a,"v","r20150429132001"),d=a.toString());a=new Zj(d);this.Lc=new Ai(b,c,a)};tk.prototype.Zd=function(){return this.Lc};pa("recaptcha.anchor.Main.init",function(a){var b=new Xg(Ja(zg(a)));gapi.load("gapi.iframes:gapi.iframes.style.common",function(){(new tk(b)).Zd().Ra()})});var X=function(a){return X.eh(a)};X.eh=function(a){return a+"_"};X.wk=function(){throw Error("xid.literal must not be used in COMPILED mode.");};X.object=function(a){if(a&&a.constructor&&a.constructor.toString()===Object.toString()){var b={},c;for(c in a)a.hasOwnProperty(c)&&(b[X.eh(c)]=a[c]);return b}throw Error("xid.object must be called with an object literal.");};X.lk=!0;X.mk=function(a){return a};X.vk=function(){return"a_"!=X("a")};var uk=function(a,b){this.yj=a;this.ek=b;this.constructor.tg||(this.constructor.tg={});this.constructor.tg[this.toString()]=this};uk.prototype.Ge=function(){return this.toString()};uk.prototype.toString=function(){this.Lh||(this.Lh=this.yj.Of+":"+this.ek);return this.Lh};var vk=function(a,b){uk.call(this,a,b)};x(vk,uk);var wk=function(a){this.Of=a};new wk("lib");var Y=function(a){this.Xj=a};Y.prototype.toString=function(){return this.Xj};new Y(X("goog.ui.ActivityMonitor"));new Y(X("fava.app.AppLifetimeService"));new Y(X("fava.base.AsyncOperationServices"));new Y(X("fava.net.BrowserChannelServices"));new Y(X("fava.canvas.CanvasService"));new Y(X("fava.canvas.CanvasConfiguration"));new Y(X("fava.diagnostics.CsiService"));new Y(X("fava.data.DataServices"));new Y(X("fava.data.DataStoreUpdaterService"));new Y(X("fava.locale.DateTimeFormatService"));new Y(X("fava.debug.DeobfuscationService"));new Y(X("fava.diagnostics.Diagnostics"));
var xk=new Y(X("fava.component.DomServices"));new Y(X("fava.app.DragDropService"));new Y(X("fava.browser.ExportService"));new Y(X("fava.layout.FixedLayoutHelper"));new Y(X("fava.gbar.GbarService"));new Y(X("fava.gloader.GoogleLoaderService"));new Y(X("fava.controls.help.HelpOverlayService"));new Y(X("fava.view.HistoryInterface"));new Y(X("fava.view.HistoryManager"));new Y(X("fava.view.HistoryRegistry"));new Y(X("fava.identity.IdentityService"));new Y(X("fava.browser.IeCutCopyHandle"));new Y(X("fava.diagnostics.Impressions"));
new Y(X("fava.browser.KeyboardShortcutHandler"));new Y(X("fava.browser.KeyboardShortcutRegistry"));new Y(X("fava.mail.MailServices"));new Y(X("fava.controls.mole.MoleManager"));new Y(X("fava.app.NavBarService"));new Y(X("fava.view.NavigationServices"));new Y(X("fava.net.NetworkDiagnosticsService"));new Y(X("fava.app.NotificationService"));new Y(X("fava.request.OauthService"));new Y(X("fava.net.OfflineServices"));new Y(X("fava.modules.PrefetchService"));new Y(X("fava.controls.RelativeDateControl"));
new Y(X("fava.request.RequestService"));new Y(X("fava.base.Scheduler"));new Y(X("fava.net.ServerErrorService"));new Y(X("fava.dom.SoyRenderer"));new Y(X("fava.dom.SoyRendererConfig"));new Y(X("fava.app.TearoffManager"));new Y(X("fava.app.TearoffSharedData"));new Y(X("fava.app.TearoffRegistry"));new Y(X("fava.app.TitleBar"));new Y(X("fava.controls.Toast"));new Y(X("fava.app.UserActionService"));new Y(X("fava.browser.ViewportServices"));new Y(X("fava.diagnostics.ViewDiagnostics"));new Y(X("fava.view.ViewManagerInterface"));
new Y(X("fava.view.ViewRegistry"));new Y(X("fava.browser.WindowService"));new Y(X("fava.browser.WindowOpenerUtil"));new Y(X("fava.app.WindowWidget"));new Y(X("fava.request.XsrfService"));var zk=function(a){I.call(this);this.yc={};this.Lf={};this.$f={};this.Rb={};this.vg={};this.jh={};this.Rg=a?a.Rg:new L;this.Yj=!a;this.ld=null;a?(this.ld=a,this.$f=a.$f,this.Rb=a.Rb,this.Lf=a.Lf,this.vg=a.vg):w();a=yk(this);this!=a&&(a.Od?a.Od.push(this):a.Od=[this])};x(zk,I);Math.random();var yk=function(a){for(;a.ld;)a=a.ld;return a};zk.prototype.get=function(a){var b=Ak(this,a);if(null==b)throw new Bk(a);return b};
var Ak=function(a,b){for(var c=a;c;c=c.ld){if(c.isDisposed())throw Error("AppContext is disposed.");if(c.yc[b])return c.yc[b][0];if(c.jh[b])break}if(c=a.$f[b]){c=c(a);if(null==c)throw Error("Factory method for service "+b+" returned null or undefined.");if(a.isDisposed())Nb(c);else{a.yc[b]=[c,!0];for(var d=Ck(a,a,b),e=0;e<d.length;e++)d[e].yg(null);delete a.Lf[b]}return c}return null},Ck=function(a,b,c){var d=[],e=a.Rb[c];e&&(Ma(e,function(a){var c;a:{for(c=a.ri;c;){if(c==b){c=!0;break a}c=c.ld}c=
!1}c&&(d.push(a.d),Va(e,a))}),0==e.length&&delete a.Rb[c]);return d},Dk=function(a,b){a.Rb&&Eh(a.Rb,function(a,d,e){Ma(a,function(d){d.ri==b&&Va(a,d)});0==a.length&&delete e[d]})};
zk.prototype.j=function(){if(yk(this)==this){var a=this.Od;if(a)for(;a.length;)a[0].N()}else for(var a=yk(this).Od,b=0;b<a.length;b++)if(a[b]==this){a.splice(b,1);break}for(var c in this.yc)a=this.yc[c],a[1]&&"undefined"!=typeof a[0].N&&a[0].N();this.yc=null;this.Yj&&this.Rg.N();Dk(this,this);this.Rb=null;Nb(this.Lj);this.jh=this.Lj=null;zk.b.j.call(this)};var Bk=function(a){y.call(this);this.id=a;this.message='Service for "'+a+'" is not registered'};x(Bk,y);var Ek=new wk("fva");new vk(Ek,1);var Fk=function(){var a;a='<div class="rc-defaultchallenge-response-field"></div><div class="rc-defaultchallenge-payload"></div><div class="rc-defaultchallenge-incorrect-response" style="display:none">\u56de\u7b54\u304c\u9593\u9055\u3063\u3066\u3044\u307e\u3059\u3002\u3082\u3046\u4e00\u5ea6\u304a\u8a66\u3057\u304f\u3060\u3055\u3044\u3002</div>'+Of();return S(a)},Gk=function(a){a=""+('<img src="'+T(Uf(a.Ta))+'" alt="'+Nf("reCAPTCHA \u78ba\u8a8d\u7528\u753b\u50cf")+'" />');return S(a)},Hk=function(){return S('\u753b\u50cf\u306b\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u6587\u5b57\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u5225\u306e\u753b\u50cf\u3067\u8a8d\u8a3c\u3092\u884c\u3046\u5834\u5408\u306f\u3001\u518d\u8aad\u307f\u8fbc\u307f\u30a2\u30a4\u30b3\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u304f\u3060\u3055\u3044\u3002<a href="https://support.google.com/recaptcha" target="_blank">\u8a73\u7d30</a>')};var Ik=function(){};x(Ik,nf);ca(Ik);f=Ik.prototype;f.sf=function(){return"button"};f.Ua=function(a,b,c){switch(b){case 8:case 16:mf(a,"pressed",c);break;default:case 64:case 1:Ik.b.Ua.call(this,a,b,c)}};f.F=function(a){var b=Ik.b.F.call(this,a);this.Le(b,a.ae());var c=a.R();c&&this.ud(b,c);a.ea&16&&this.Ua(b,16,a.da());return b};f.cc=function(a,b){b=Ik.b.cc.call(this,a,b);var c=this.R(b);a.Dc=c;a.jg=this.ae(b);a.ea&16&&this.Ua(b,16,a.da());return b};f.R=n;f.ud=n;f.ae=function(a){return a.title};
f.Le=function(a,b){a&&(b?a.title=b:a.removeAttribute("title"))};f.lb=function(){return"goog-button"};var Jk=function(){};x(Jk,Ik);ca(Jk);f=Jk.prototype;f.sf=function(){};f.F=function(a){Bf(a);a.Ic&=-256;Hf(a,32,!1);return a.mb().F("BUTTON",{"class":rf(this,a).join(" "),disabled:!a.isEnabled(),title:a.ae()||"",value:a.R()||""},Ef(a)||"")};f.Xb=function(a){return"BUTTON"==a.tagName||"INPUT"==a.tagName&&("button"==a.type||"submit"==a.type||"reset"==a.type)};f.cc=function(a,b){Bf(a);a.Ic&=-256;Hf(a,32,!1);if(b.disabled){var c=Ia(wf(this,1));Pe(b,c)}return Jk.b.cc.call(this,a,b)};
f.bh=function(a){Q(a).h(a.a(),"click",a.nd)};f.qd=n;f.Bc=n;f.Gf=function(a){return a.isEnabled()};f.rd=n;f.Ca=function(a,b,c){Jk.b.Ca.call(this,a,b,c);(a=a.a())&&1==b&&(a.disabled=c)};f.R=function(a){return a.value};f.ud=function(a,b){a&&(a.value=b)};f.Ua=n;var Kk=function(a,b,c){R.call(this,a,b||Jk.Ga(),c)};x(Kk,R);f=Kk.prototype;f.R=function(){return this.Dc};f.ud=function(a){this.Dc=a;this.H.ud(this.a(),a)};f.ae=function(){return this.jg};f.Le=function(a){this.jg=a;this.H.Le(this.a(),a)};f.j=function(){Kk.b.j.call(this);delete this.Dc;delete this.jg};f.D=function(){Kk.b.D.call(this);if(this.ea&32){var a=this.Hb();a&&Q(this).h(a,"keyup",this.fe)}};f.fe=function(a){return 13==a.keyCode&&"key"==a.type||32==a.keyCode&&"keyup"==a.type?this.nd(a):32==a.keyCode};
yf("goog-button",function(){return new Kk(null)});var Lk=function(a,b,c,d){a=pf(Ik,a||"rc-button-default");Kk.call(this,b,a,d);this.Pe=c||0;Cf(this,"goog-inline-block")};x(Lk,Kk);Lk.prototype.D=function(){Lk.b.D.call(this);this.a().setAttribute("id",this.getId());this.a().tabIndex=this.Pe};Lk.prototype.ta=function(a){Lk.b.ta.call(this,a);if(a){this.Pe=a=this.Pe;var b=this.a();b&&(0<=a?b.tabIndex=this.Pe:Vd(b,!1))}else(a=this.a())&&Vd(a,!1)};var Z=function(a,b,c,d){P.call(this);this.Of=c;this.ac=this.Ub=new N(a,b);this.qj=d||!1;this.response={};this.Ae=Mk(this,Nk.Ed,void 0,Ok.hi,"\u5225\u306e\u5358\u8a9e\u3092\u53d6\u5f97",Nk.fi);this.Ld=Mk(this,Nk.Ed,void 0,Ok.Yh,"\u97f3\u58f0\u3067\u78ba\u8a8d",Nk.Wh);this.ne=Mk(this,Nk.Ed,void 0,Ok.ei,"\u753b\u50cf\u3067\u78ba\u8a8d",Nk.ci);this.Cf=Mk(this,Nk.Ed,void 0,Ok.bi,"\u30d8\u30eb\u30d7",Nk.$h,!0);this.Qh=Mk(this,void 0,"\u78ba\u8a8d",Ok.li,void 0,void 0,void 0)};x(Z,P);
var Nk={Ed:"rc-button",fi:"rc-button-reload",Wh:"rc-button-audio",ci:"rc-button-image",$h:"rc-button-help",gi:"reload-button-holder",Xh:"audio-button-holder",di:"image-button-holder",ai:"help-button-holder",mi:"verify-button-holder",Zh:"rc-challenge-help"},Ok={hi:"recaptcha-reload-button",Yh:"recaptcha-audio-button",ei:"recaptcha-image-button",bi:"recaptcha-help-button",li:"recaptcha-verify-button"};
Z.prototype.ba=function(a){Z.b.ba.call(this,a);a=this.J(Nk.gi);this.Ae.render(a);a=this.J(Nk.Xh);this.Ld.render(a);a=this.J(Nk.di);this.ne.render(a);a=this.J(Nk.ai);this.Cf.render(a);a=this.J(Nk.mi);this.Qh.render(a);this.qj?ke(this.Ld.a(),!1):ke(this.ne.a(),!1)};
Z.prototype.D=function(){Z.b.D.call(this);Q(this).h(this.Ae,"action",function(){Pk(this,!1);this.dispatchEvent("h")});Q(this).h(this.Ld,"action",function(){Pk(this,!1);this.dispatchEvent("i")});Q(this).h(this.ne,"action",function(){Pk(this,!1);this.dispatchEvent("j")});Q(this).h(this.Cf,"action",function(){a:{var a=this.Cf.da(),b=Hd(Nk.Zh,void 0),c;if(a){this.td(b);if(!Pd(b))break a;if(F){c=me(b,"paddingLeft");var d=me(b,"paddingRight"),e=me(b,"paddingTop"),g=me(b,"paddingBottom");c=new ae(e,d,g,
c)}else c=ee(b,"paddingLeft"),d=ee(b,"paddingRight"),e=ee(b,"paddingTop"),g=ee(b,"paddingBottom"),c=new ae(parseFloat(e),parseFloat(d),parseFloat(g),parseFloat(c));c=this.$d().width-(c.left+c.right);b.style.width=ge(c);c=ie(b).height}else c=-1*ie(b).height,Nd(b);d=this.ac;d.height+=c;Qk(this,d);ke(b,a);b.focus()}this.dispatchEvent("k")});Q(this).h(this.a(),"keyup",function(a){27==a.keyCode&&this.dispatchEvent("g")});Q(this).h(this.Qh,"action",this.Nc)};Z.prototype.getName=function(){return this.Of};
Z.prototype.$d=function(){return this.Ub.clone()};var Qk=function(a,b){a.ac=b;a.dispatchEvent("f")};Z.prototype.Nc=function(){this.vd()||(Pk(this,!1),this.dispatchEvent("l"))};var Rk=function(a,b,c,d){a.response={};a.ed(b,c,d).then(v(function(){Pk(this,!0);this.dispatchEvent("e")},a))},Sk=function(a){try{a.Ie()}catch(b){}};Z.prototype.Ta=function(a,b,c){c=c||"";c=new Oh(ti("api2/payload")+c);Rh(c);c.ra.set("c",a);a=Tg();Rh(c);c.ra.set("k",a);b&&(Rh(c),c.ra.set("id",b));return c.toString()};
Z.prototype.vd=function(){return!1};var Mk=function(a,b,c,d,e,g,h){b=new Lk(b,c,void 0,a.mb());d&&b.Ac(d);e&&b.Le(e);g&&Cf(b,g);h&&Hf(b,16,!0);$e(a,b);return b},Pk=function(a,b){a.Ae.ta(b);a.Ld.ta(b);a.ne.ta(b)};f=Z.prototype;f.Nb=function(){};f.Ie=function(){this.Ae.a().focus()};f.vc=function(){};f.hh=function(){};f.Yg=function(){};f.td=function(){};var Tk=function(a,b){P.call(this,b);this.G=a||""},Uk;x(Tk,P);Tk.prototype.Qa=null;Tk.prototype.tj=10;var Vk=function(){null!=Uk||(Uk="placeholder"in document.createElement("INPUT"));return Uk};f=Tk.prototype;f.Zc=!1;f.F=function(){this.m=this.mb().F("INPUT",{type:"text"})};
f.ba=function(a){Tk.b.ba.call(this,a);this.G||(this.G=a.getAttribute("label")||"");var b;a:{var c=Dd(a);try{b=c&&c.activeElement;break a}catch(d){}b=null}b==a&&(this.Zc=!0,Re(this.a(),this.dd));Vk()&&(this.a().placeholder=this.G);mf(this.a(),"label",this.G)};
f.D=function(){Tk.b.D.call(this);var a=new O(this);a.h(this.a(),"focus",this.xf);a.h(this.a(),"blur",this.Ti);if(Vk())this.V=a;else{wb&&a.h(this.a(),["keypress","keydown","keyup"],this.Vi);var b=Dd(this.a());a.h(b?b.parentWindow||b.defaultView:window,"load",this.jj);this.V=a;Wk(this)}this.Oa();this.a().sj=this};f.kb=function(){Tk.b.kb.call(this);this.V&&(this.V.N(),this.V=null);this.a().sj=null};var Wk=function(a){!a.Li&&a.V&&a.a().form&&(a.V.h(a.a().form,"submit",a.Yi),a.Li=!0)};f=Tk.prototype;
f.j=function(){Tk.b.j.call(this);this.V&&(this.V.N(),this.V=null)};f.dd="label-input-label";f.xf=function(){this.Zc=!0;Re(this.a(),this.dd);if(!Vk()&&!Xk(this)&&!this.Df){var a=this,b=function(){a.a()&&(a.a().value="")};F?fd(b,10):b()}};f.Ti=function(){Vk()||(this.V.ja(this.a(),"click",this.xf),this.Qa=null);this.Zc=!1;this.Oa()};f.Vi=function(a){27==a.keyCode&&("keydown"==a.type?this.Qa=this.a().value:"keypress"==a.type?this.a().value=this.Qa:"keyup"==a.type&&(this.Qa=null),a.preventDefault())};
f.Yi=function(){Xk(this)||(this.a().value="",fd(this.Ri,10,this))};f.Ri=function(){Xk(this)||(this.a().value=this.G)};f.jj=function(){this.Oa()};var Xk=function(a){return!!a.a()&&""!=a.a().value&&a.a().value!=a.G};f=Tk.prototype;f.clear=function(){this.a().value="";null!=this.Qa&&(this.Qa="")};f.reset=function(){Xk(this)&&(this.clear(),this.Oa())};f.ud=function(a){null!=this.Qa&&(this.Qa=a);this.a().value=a;this.Oa()};f.R=function(){return null!=this.Qa?this.Qa:Xk(this)?this.a().value:""};
f.Je=function(a){var b=this.a();Vk()?(b&&(b.placeholder=a),this.G=a):Xk(this)||(b&&(b.value=""),this.G=a,this.yh());b&&mf(b,"label",this.G)};f.Tg=function(){return this.G};f.Oa=function(){var a=this.a();Vk()?this.a().placeholder!=this.G&&(this.a().placeholder=this.G):Wk(this);mf(a,"label",this.G);Xk(this)?(a=this.a(),Re(a,this.dd)):(this.Df||this.Zc||(a=this.a(),Pe(a,this.dd)),Vk()||fd(this.yh,this.tj,this))};
var Yk=function(a){var b=Xk(a);a.Df=!0;a.a().focus();b||Vk()||(a.a().value=a.G);a.a().select();Vk()||(a.V&&a.V.Y(a.a(),"click",a.xf),fd(a.Ki,10,a))};Tk.prototype.ta=function(a){this.a().disabled=!a;var b=this.a(),c=this.dd+"-disabled";a?Re(b,c):Pe(b,c)};Tk.prototype.isEnabled=function(){return!this.a().disabled};Tk.prototype.Ki=function(){this.Df=!1};Tk.prototype.yh=function(){!this.a()||Xk(this)||this.Zc||(this.a().value=this.G)};var Zk=function(a,b){Tk.call(this,r(a)?a:"\u30c6\u30ad\u30b9\u30c8\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044",b)};x(Zk,Tk);Zk.prototype.F=function(){Zk.b.F.call(this);this.a().setAttribute("id",this.getId());this.a().setAttribute("autocomplete","off");this.a().setAttribute("autocorrect","off");this.a().setAttribute("autocapitalize","off");this.a().setAttribute("spellcheck","false");this.a().setAttribute("dir","ltr");Pe(this.a(),"rc-response-input-field")};
var $k=function(a,b){var c=a.a();b?Pe(c,"rc-response-input-field-error"):Re(c,"rc-response-input-field-error")};var bl=function(){Z.call(this,al.width,al.height,"default");this.md=null;this.o=new Zk;this.o.Je("\u6587\u5b57\u5217\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044");J(this,this.o);this.X=new ff;J(this,this.X)};x(bl,Z);var al=new N(300,200);f=bl.prototype;f.F=function(){bl.b.F.call(this);this.m=Ae(Fk);this.ba(this.a())};
f.D=function(){bl.b.D.call(this);this.md=this.J("rc-defaultchallenge-payload");this.o.render(this.J("rc-defaultchallenge-response-field"));this.o.a().setAttribute("id","default-response");ef(this.X,this.o.a());Q(this).h(this.X,"key",this.If);Q(this).h(this.o.a(),"keyup",this.gk)};f.If=function(a){13==a.keyCode&&this.Nc()};f.gk=function(){0<this.o.R().length&&this.ua(!1)};f.vd=function(){return sa(this.o.R())};f.ed=function(a,b,c){this.ua(!!c);this.o.clear();ze(this.md,Gk,{Ta:this.Ta(a)});return Oc()};
f.Nb=function(){Sk(this)};f.ua=function(a){var b=Hd("rc-defaultchallenge-incorrect-response",void 0);if("none"!=b.style.display!=a){var c=this.ac;c.height+=(a?1:-1)*ie(b).height;Qk(this,c);ke(b,a);$k(this.o,a)}};f.Ie=function(){Ab||Bb||(this.o.R()?this.o.a().focus():Yk(this.o))};f.vc=function(){this.response.response=this.o.R();this.o.clear()};f.td=function(a){ze(a,Hk)};var cl=function(){return S('<div class="rc-adcaptcha-response-field-container"></div><div class="rc-adcaptcha-ad-payload"></div><div class="rc-adcaptcha-fallback-payload"></div>'+Of())},dl=function(a){a=""+('<img src="'+T(Uf(a.Ta))+'" alt="'+Nf("reCAPTCHA \u78ba\u8a8d\u7528\u753b\u50cf")+'" />');return S(a)};var el=function(a){return S('<ins class="adsbygoogle" style="display:inline-block;width:336px;height:280px" data-ad-client="'+T(a.oi)+'" data-targeting="site" data-page-url="3pcerttesting.com/dab/recaptcha.html" data-captcha-token="'+T(a.yi)+'"></ins>')};var fl=function(){var a=Sg.Ga().get();this.$=Lg(a,Pg,1)},gl=function(a){return window.adsbygoogle?Oc():new M(function(a,c){var d=function(){window.adsbygoogle?a():c(null)};Ij(Ia(U(this.$,1))).then(d,d,this)},a)};fl.prototype.render=function(a,b){ze(a,el,{oi:U(this.$,2),yi:b});window.adsbygoogle.push({})};var hl=function(a){L.call(this);this.bd={};this.ad={};this.pa=new O(this);this.B=a};x(hl,L);var il=[F&&!H("11")?"readystatechange":"load","abort","error"];hl.prototype.start=function(){var a=this.bd;D(gb(a),function(b){var c=a[b];if(c&&(delete a[b],!this.isDisposed())){var d;d=this.B?Ed(this.B).F("IMG"):new Image;c.Kg&&(d.crossOrigin=c.Kg);this.pa.h(d,il,this.oh);this.ad[b]=d;d.id=b;d.src=c.src}},this)};
hl.prototype.oh=function(a){var b=a.currentTarget;if(b){if("readystatechange"==a.type)if("complete"==b.readyState)a.type="load";else return;"undefined"==typeof b.naturalWidth&&("load"==a.type?(b.naturalWidth=b.width,b.naturalHeight=b.height):(b.naturalWidth=0,b.naturalHeight=0));this.dispatchEvent({type:a.type,target:b});!this.isDisposed()&&(a=b.id,delete this.bd[a],b=this.ad[a])&&(delete this.ad[a],this.pa.ja(b,il,this.oh),hb(this.ad)&&hb(this.bd)&&this.dispatchEvent("complete"))}};
hl.prototype.j=function(){delete this.bd;delete this.ad;Nb(this.pa);hl.b.j.call(this)};var jl=0;var kl=function(){Z.call(this,0,0,"adcaptcha20");this.o=new Zk;$e(this,this.o);this.X=new ff;J(this,this.X);this.rg=new fl;this.Fd=null};x(kl,Z);var ll=new N(376,423);f=kl.prototype;f.F=function(){kl.b.F.call(this);this.m=Ae(cl);this.ba(this.a())};f.D=function(){kl.b.D.call(this);this.o.render(this.J("rc-adcaptcha-response-field-container"));ef(this.X,this.o.a());Q(this).h(this.X,"key",function(a){13==a.keyCode&&this.Nc()})};f.vd=function(){return sa(this.o.R())};
f.ed=function(a){this.o.clear();this.Fd=null;return gl(this.rg).then(v(this.Fj,this,a),v(this.Gj,this)).then(v(this.Ej,this),v(this.Tj,this,a))};f.Fj=function(a){this.rg.render(this.J("rc-adcaptcha-ad-payload"),a);return new M(function(a,c){window.recaptchaSetAdData=function(c){a(c)};fd(function(){c(null)},5E3)})};f.Gj=function(){return Pc()};f.Ej=function(a){this.Fd=a.adToken;Qk(this,ll)};
f.Tj=function(a){ke(this.J("rc-adcaptcha-ad-payload"),!1);ze(this.J("rc-adcaptcha-fallback-payload"),dl,{Ta:this.Ta(a)});Qk(this,al)};f.Nb=function(){Sk(this)};f.Ie=function(){this.o.R()?this.o.a().focus():Yk(this.o)};f.vc=function(){this.Fd&&(this.response.token=this.Fd);this.response.response=this.o.R()};
f.Yg=function(a){if(U(a,2)&&Lg(a,$g,6)&&bh(Lg(a,$g,6))){var b;a=bh(Lg(a,$g,6));if(b=U(a,1)){a=new hl;var c="recaptcha-api2-adcaptcha-utils-"+jl++;(b=r(b)?b:b.src)&&(a.bd[c]={src:b,Kg:m(void 0)?void 0:null});a.start()}}};f.td=function(a){ze(a,Hk)};var ml=function(a){a=""+('<div class="rc-audiochallenge-error-message" style="display:none" tabIndex="0"></div><div class="rc-audiochallenge-instructions" id="'+T(a.nj)+'" tabIndex="0">[\u518d\u751f] \u3092\u62bc\u3057\u3066\u805e\u3053\u3048\u3066\u304f\u308b\u756a\u53f7\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044</div><div class="rc-audiochallenge-control"></div><div class="rc-audiochallenge-response-field"></div><div class="rc-audiochallenge-download"></div>'+Of());return S(a)},nl=function(){return S('<div class="rc-audiochallenge-play-button"></div>')},
ol=function(a){return S('<center><audio controls id="audio-control"><source src="'+T(Uf(a.Mj))+'" type="audio/ogg"><source src="'+T(Uf(a.Sf))+'" type="audio/mpeg"></audio></center>')},pl=function(a){a=""+('<a class="rc-audiochallenge-download-link" target="_blank" href="'+T(Uf(a.Sf))+'" title="'+Nf("\u307e\u305f\u306f MP3 \u5f62\u5f0f\u3067\u97f3\u58f0\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9")+'"></a>');return S(a)},ql=function(){return S('\u540c\u3058\u78ba\u8a8d\u97f3\u58f0\u3092\u518d\u751f\u3059\u308b\u306b\u306f R \u30ad\u30fc\u3092\u62bc\u3057\u307e\u3059\u3002\u65b0\u3057\u3044\u78ba\u8a8d\u97f3\u58f0\u3092\u8074\u304f\u306b\u306f\u66f4\u65b0\u30dc\u30bf\u30f3\u3092\u62bc\u3057\u307e\u3059\u3002<a href="https://support.google.com/recaptcha/#6175971" target="_blank">\u3053\u306e\u78ba\u8a8d\u97f3\u58f0\u3078\u306e\u5bfe\u5fdc\u65b9\u6cd5\u3092\u3054\u78ba\u8a8d\u304f\u3060\u3055\u3044\u3002</a>')},
rl=function(){return S('\u65b0\u3057\u3044\u78ba\u8a8d\u97f3\u58f0\u3092\u8074\u304f\u306b\u306f\u66f4\u65b0\u30dc\u30bf\u30f3\u3092\u62bc\u3057\u307e\u3059\u3002<a href="https://support.google.com/recaptcha/#6175971" target="_blank">\u3053\u306e\u78ba\u8a8d\u97f3\u58f0\u3078\u306e\u5bfe\u5fdc\u65b9\u6cd5\u3092\u3054\u78ba\u8a8d\u304f\u3060\u3055\u3044\u3002</a>')};var ul=function(a,b,c,d){L.call(this);this.S=d||null;this.mc=m(d)?"u"+d:"_:"+(Ve.Ga().qc++).toString(36);this.Sb=a;this.gd=b;this.Qf=c;a=this.Sb;this.Ke(a);b=null;if(this.gd||this.Qf)b=a.ff?new sl(a.of,this,a.Rh):new tl(a.of,this,a.Rh);a.sb.set(this.mc,b);null===this.getId()||a.le.set(this.getId(),this)};x(ul,L);f=ul.prototype;f.j=function(){ul.b.j.call(this);var a=this.Sb,b=a.sb.get(this.mc);Nb(b);a.sb.remove(this.mc);null===this.getId()||a.le.remove(this.getId())};
f.clone=function(){return new vl(this.Sb,this.gd,this.Qf)};f.getId=function(){return this.S};f.play=function(a){var b=this.Sb;if(!b.xj){var c=r(this)?b.le.get(this)||null:this;null!==c&&(c.getId(),!a&&b.ff||wl(b),(a=b.sb.get(c.mc))&&a.play())}};f.stop=function(){var a=xl(this.Sb,this);a&&a.stop()};f.Ha=function(){var a=xl(this.Sb,this);return a?a.Ha():!1};var vl=function(a,b,c,d){ul.call(this,a,b,c,d)};x(vl,ul);vl.prototype.zc=function(a){this.Sb.zc(this,a)};var yl=function(a,b){this.start=a<b?a:b;this.end=a<b?b:a};yl.prototype.clone=function(){return new yl(this.start,this.end)};new Y("a");var Al=function(a){L.call(this);this.of=(a=Ak(a,xk))&&a.tk()?a.mb():Ed();this.le=new Ah;this.sb=new Ah;this.xj=!1;this.Rh=zl.end;this.ff=!!this.of.createElement("AUDIO").canPlayType};x(Al,L);var zl=new yl(0,1),wl=function(a){a=a.sb.ca();for(var b=0;b<a.length;b++)null!=a[b]&&a[b].stop()};Al.prototype.j=function(){Al.b.j.call(this);wl(this);for(var a=this.sb.ca(),b=0;b<a.length;b++)null!=a[b]&&Nb(a[b].clip)};
var xl=function(a,b){var c;c=r(b)?a.le.get(b)||null:b;return null===c?null:(c=a.sb.get(c.mc))?c:null};Al.prototype.zc=function(a,b){var c=this.sb.get(a.mc);c&&c.zc(b)};var Bl=function(a,b,c){I.call(this);this.Oc=a;this.clip=b;this.volume=c;this.element=null;this.cd=!1};x(Bl,I);f=Bl.prototype;f.play=function(){this.stop();this.cd=!0;this.clip.dispatchEvent("p");this.uh()};f.stop=function(){this.cd&&(this.cd=!1,this.clip.dispatchEvent("q"),this.Ih())};f.Ha=function(){return this.cd};
f.j=function(){Bl.b.j.call(this);this.stop();this.Oc.removeNode(this.element);delete this.element};f.zc=function(){};
var sl=function(a,b,c){Bl.call(this,a,b,c);this.element=a.createElement("AUDIO");this.element.canPlayType("audio/mp3")?this.element.src=b.gd:this.element.canPlayType("audio/ogg")&&(this.element.src=b.Qf);this.element.load();this.Xa=new O(this);J(this,this.Xa);this.Xa.h(this.element,"timeupdate",this.Hj);this.Xa.Y(this.element,"loadedmetadata",this.Cj);this.Xa.Y(this.element,"canplaythrough",this.Aj);this.Xa.Y(this.element,"error",this.Bj)};x(sl,Bl);f=sl.prototype;f.Hj=function(){this.clip.dispatchEvent("r")};
f.Cj=function(){this.clip.dispatchEvent("o")};f.Bj=function(){this.clip.dispatchEvent("n")};f.Aj=function(){this.clip.dispatchEvent("m")};f.Uf=function(){m(this.element.currentTime)&&(this.element.currentTime=0);this.element.volume=this.volume;this.element.play();this.Xa.Y(this.element,"ended",this.nh)};f.uh=function(){Cl(this);this.element.readyState<this.element.HAVE_CURRENT_DATA?this.Xa.Y(this.element,"loadeddata",this.Uf):this.Uf()};f.Ih=function(){Cl(this);this.element.pause()};
f.nh=function(){this.cd=!1;Cl(this);this.clip.dispatchEvent("q")};var Cl=function(a){a.Xa.ja(a.element,"loadeddata",a.Uf);a.Xa.ja(a.element,"ended",a.nh)};sl.prototype.zc=function(a){this.element.currentTime=a};var tl=function(a,b,c){Bl.call(this,a,b,c);this.element=new Image;this.element.src=b.gd};x(tl,Bl);tl.prototype.uh=function(){this.element=this.Oc.createElement("bgsound");this.element.src=this.clip.gd;this.Oc.appendChild(this.Oc.Pa.body,this.element)};
tl.prototype.Ih=function(){this.element.src="";this.Oc.removeNode(this.element)};var Dl=function(){I.call(this);this.fa=new Al(new zk);J(this,this.fa);this.Ea=null;this.Kh=0};x(Dl,I);Dl.prototype.play=function(a){this.stop();if(this.Ea){l.clearTimeout(this.Kh);var b=v(function(){if(this.fa.ff)this.Ea.play(!0),this.Ea.zc(0);else{var a=this.Ea.clone();Nb(this.Ea);this.Ea=a;this.Ea.play(!0)}},this);this.Kh=fd(b,a||0)}};Dl.prototype.stop=function(){this.Ea&&this.Ea.stop()};var Fl=function(){Z.call(this,El.width,El.height,"audio",!0);this.ab=this.ef=null;this.o=new Zk("");this.o.Ac("audio-response");J(this,this.o);this.X=new ff;J(this,this.X);(this.fa=Ke()?null:new Dl)&&J(this,this.fa)};x(Fl,Z);var El=new N(280,280);f=Fl.prototype;f.F=function(){Fl.b.F.call(this);this.m=Ae(ml,{nj:"audio-instructions"});this.ba(this.a())};
f.D=function(){Fl.b.D.call(this);this.ef=this.J("rc-audiochallenge-control");if(this.fa){ze(this.ef,nl);var a=this.J("rc-audiochallenge-play-button"),b=Mk(this,void 0,"\u518d\u751f",void 0,void 0,void 0,void 0);J(this,b);b.Ac("audio-control");b.render(a);Q(this).h(b,"action",v(this.Nj,this))}this.o.render(this.J("rc-audiochallenge-response-field"));a=this.o;Ab||Bb?a.a().setAttribute("pattern","[0-9]*"):Ke()&&a.a().setAttribute("type","number");Q(this).h(this.o.a(),"focus",v(this.Vj,this));this.ab=
this.J("rc-audiochallenge-error-message");ef(this.X,this.o.a());Q(this).h(this.X,"key",this.If)};f.Vj=function(){mf(this.o.a(),"label","\u97f3\u58f0\u304b\u3089\u805e\u3053\u3048\u3066\u304f\u308b\u756a\u53f7\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044")};f.Nj=function(){Ab||Bb||(this.o.R()?this.o.a().focus():Yk(this.o));this.fa.play(2E3)};
f.If=function(a){if(13==a.keyCode)this.Nc();else if(Ke())Gl(this)&&this.ua(!1);else if(af(a.keyCode)){if(82==a.keyCode&&this.fa)this.fa.play();else{var b;(b=32==a.keyCode)||(b=a.keyCode,b=48<=b&&57>=b||96<=b&&105>=b);if(b){Gl(this)&&this.ua(!1);return}}a.preventDefault()}};f.vd=function(){this.fa&&this.fa.stop();return sa(this.o.R())?(Fd("audio-instructions").focus(),!0):!1};
f.ed=function(a,b,c){this.ua(!!c);this.o.clear();this.o.ta(!0);ze(this.J("rc-audiochallenge-download"),pl,{Sf:this.Ta(a,void 0,"/audio.mp3")});b=this.Ta(a,"");a=this.Ta(a,"ogg");this.fa?(c=this.fa,Nb(c.Ea),c.Ea=new vl(c.fa,b,a)):ze(this.ef,ol,{Sf:b,Mj:a});return Oc()};f.Nb=function(){Sk(this)};f.ua=function(a){if(this.ab)if(Gl(this)==a)a&&Hl(this,!0);else{Hl(this,a);var b=this.ac;b.height+=(a?1:-1)*ie(this.ab).height;Qk(this,b)}};
var Gl=function(a){return!!a.ab&&0<Zd(a.ab).length},Hl=function(a,b){ke(a.ab,b);$k(a.o,b);Nd(a.ab);b&&Sd(a.ab,"\u56de\u7b54\u304c\u9593\u9055\u3063\u3066\u3044\u307e\u3059\u3002\u3082\u3046\u4e00\u5ea6\u304a\u8a66\u3057\u304f\u3060\u3055\u3044\u3002")};Fl.prototype.Ie=function(){Gl(this)?this.ab.focus():Fd("audio-control").focus()};Fl.prototype.vc=function(){this.response.response=this.o.R();this.o.ta(!1)};Fl.prototype.td=function(a){this.fa?ze(a,ql):ze(a,rl)};var Jl=function(a){L.call(this);this.m=a;bc(a,Il,this.ee,!1,this);bc(a,"click",this.ce,!1,this)};x(Jl,L);var Il=wb?"keypress":"keydown";Jl.prototype.ee=function(a){(13==a.keyCode||G&&3==a.keyCode)&&Kl(this,a)};Jl.prototype.ce=function(a){Kl(this,a)};var Kl=function(a,b){var c=new Ll(b);if(a.dispatchEvent(c)){c=new Ml(b);try{a.dispatchEvent(c)}finally{b.stopPropagation()}}};Jl.prototype.j=function(){Jl.b.j.call(this);jc(this.m,Il,this.ee,!1,this);jc(this.m,"click",this.ce,!1,this);delete this.m};
var Ml=function(a){K.call(this,a.Fa);this.type="action"};x(Ml,K);var Ll=function(a){K.call(this,a.Fa);this.type="beforeaction"};x(Ll,K);var Nl={"/m/0jbk":"\u52d5\u7269","/m/0bt9lr":"\u72ac","/m/0gy7v":"\u30e2\u30eb\u30e2\u30c3\u30c8","/m/01yrx":"\u732b","/m/05s2s":"\u690d\u7269","/m/06m11":"\u30d0\u30e9","/m/06m11-red":"\u8d64\u3044\u30d0\u30e9","/m/06m11-pink":"\u30d4\u30f3\u30af\u306e\u30d0\u30e9","/m/0gqbt":"\u4f4e\u6728","/m/01645p":"\u30a2\u30dc\u30ac\u30c9","/m/025_v":"\u30b5\u30dc\u30c6\u30f3","/m/044plb":"\u30bf\u30de\u30b5\u30dc\u30c6\u30f3","/m/0m5w_":"\u30b5\u30ef\u30ed\u30b5\u30dc\u30c6\u30f3","/m/025rm5":"\u30a6\u30c1\u30ef\u30b5\u30dc\u30c6\u30f3",
"/m/011s":"\u98df\u3079\u7269\u307e\u305f\u306f\u98f2\u307f\u7269","/m/05yxcqj":"\u98df\u3079\u7269","/m/0fszt":"\u30b1\u30fc\u30ad","/m/03p1r4":"\u30ab\u30c3\u30d7\u30b1\u30fc\u30ad","/m/022p83":"\u30a6\u30a8\u30c7\u30a3\u30f3\u30b0 \u30b1\u30fc\u30ad","/m/02czv8":"\u8a95\u751f\u65e5\u30b1\u30fc\u30ad","/m/09728":"\u30d1\u30f3","/m/0l515":"\u30b5\u30f3\u30c9\u30a4\u30c3\u30c1","/m/0cdn1":"\u30cf\u30f3\u30d0\u30fc\u30ac\u30fc","/m/01j3zr":"\u30d6\u30ea\u30c8\u30fc","/m/07pbfj":"\u9b5a","/m/0cxn2":"\u30a2\u30a4\u30b9\u30af\u30ea\u30fc\u30e0",
"/m/05z55":"\u30d1\u30b9\u30bf","/m/0grtl":"\u30b9\u30c6\u30fc\u30ad","/m/0663v":"\u30d4\u30b6","/m/01z1m1x":"\u30b9\u30fc\u30d7","/m/07030":"\u5bff\u53f8","/m/09759":"\u3054\u98ef\u3082\u306e","/m/01xs0yg":"\u98f2\u307f\u7269","/m/01599":"\u30d3\u30fc\u30eb","/m/081qc":"\u30ef\u30a4\u30f3","/m/02vqfm":"\u30b3\u30fc\u30d2\u30fc"};var Ol=function(){return S('<div id="rc-imageselect"><div class="rc-imageselect-response-field"></div><div class="rc-imageselect-payload"></div>'+Of()+"</div>")},Pl=function(a){var b;b='<div class="rc-imageselect-instructions"><div class="rc-imageselect-desc-wrapper"><div id="rc-imageselect-candidate" class="rc-imageselect-candidates"></div><div class="rc-imageselect-desc">';a.label?(a="\u4e0b\u306e\u4e2d\u304b\u3089"+(Mf(a.label)+"\u3092\u3059\u3079\u3066\u9078\u629e\u3057\u307e\u3059\u3002\u53f3\u5074\u306e\u30b5\u30f3\u30d7\u30eb\u753b\u50cf\u3092\u53c2\u8003\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),
b+=a):b+="\u53f3\u3068\u540c\u3058\u753b\u50cf\u3092\u4e0b\u306e\u4e2d\u304b\u3089\u3059\u3079\u3066\u9078\u629e\u3057\u307e\u3059\u3002";return S(b+'</div><div class="rc-imageselect-clear"></div></div><div class="rc-imageselect-challenge"><div id="rc-imageselect-target" class="rc-imageselect-target"></div><div class="rc-imageselect-incorrect-response" style="display:none">\u56de\u7b54\u304c\u9593\u9055\u3063\u3066\u3044\u307e\u3059\u3002\u3082\u3046\u4e00\u5ea6\u304a\u8a66\u3057\u304f\u3060\u3055\u3044\u3002</div><div class="rc-imageselect-error-select-one" style="display:none">\u4e0a\u306e\u753b\u50cf\u3068\u4e00\u81f4\u3059\u308b\u753b\u50cf\u3092 1 \u679a\u4ee5\u4e0a\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044\u3002</div><div class="rc-imageselect-error-select-more" style="display:none">\u9078\u629e\u3055\u308c\u3066\u3044\u308b\u753b\u50cf\u304c\u5c11\u306a\u3059\u304e\u307e\u3059\u3002\u4e00\u81f4\u3059\u308b\u753b\u50cf\u3092\u3059\u3079\u3066\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044\u3002</div></div></div>')},
Ql=function(){var a="",b;b="";var c;c=Nf("\u65b0\u3057\u3044\u97f3\u58f0\u306b\u5909\u66f4\u3057\u307e\u3059");b=S(b+('<img src="https://www.gstatic.com/recaptcha/api2/refresh.png" class="reload-icon" alt="'+c+'"></img>'));Mf(b);return S(a+'\u53f3\u4e0a\u306e\u753b\u50cf\u3068\u540c\u3058\u7a2e\u985e\u306e\u9805\u76ee\u3092\u542b\u3080\u753b\u50cf\u3092\u9078\u629e\u3057\u3001[\u78ba\u8a8d] \u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\u65b0\u3057\u3044\u753b\u50cf\u306b\u5909\u66f4\u3059\u308b\u5834\u5408\u306f\u3001\u518d\u8aad\u307f\u8fbc\u307f\u306e\u30a2\u30a4\u30b3\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002<a href="https://support.google.com/recaptcha" target="_blank">\u8a73\u7d30</a>')};var Sl=function(){var a=Rl();Z.call(this,a.width,a.height,"imageselect");this.md=null;this.$={candidate:{colSpan:1,kc:1},Z:{colSpan:3,kc:9,Th:"31%"}};this.Va={candidate:{element:null},Z:{bc:null,element:null}};this.Nf=1};x(Sl,Z);Sl.prototype.F=function(){Sl.b.F.call(this);this.m=Ae(Ol);this.ba(this.a())};Sl.prototype.ba=function(a){Sl.b.ba.call(this,a);this.md=this.J("rc-imageselect-payload")};Sl.prototype.D=function(){Sl.b.D.call(this)};
var Tl=function(a,b,c){b?(a.$.Z.colSpan=b,a.$.Z.kc=b*c):(a.$.Z.colSpan=3,a.$.Z.kc=9);a.$.Z.Th=Vj("%d%%",parseInt(100/a.$.Z.colSpan,10)-2)};
Sl.prototype.ed=function(a,b,c){b=Lg(b,Yg,1);Tl(this,U(b,5),U(b,4));var d=b.Tg(),d=Nl[d];this.Nf=U(b,3)||1;ze(this.md,Pl,{Ne:!!c,label:d});this.Va.candidate.element=document.getElementById("rc-imageselect-candidate");this.Va.Z.element=document.getElementById("rc-imageselect-target");Qk(this,Rl());c&&this.ua(Hd("rc-imageselect-incorrect-response",void 0),!0);return Rc([Ul(this,U(b,2)),Vl(this.Ta(a),this.$.Z.kc,this.$.Z.colSpan)]).then(function(a){this.Va.Z.bc=a[1];return a},null,this).then(this.uj,
null,this)};
var Ul=function(a,b){return Vl("data:image/png;base64,"+b,a.$.candidate.kc,a.$.candidate.colSpan)},Vl=function(a,b,c){return new M(function(d){var e=new Image;e.onload=function(){var a;a=e.width/c;var h=e.height/Math.ceil(b/c),k,q=document.createElement("canvas");q.width=a;q.height=h;var t=q.getContext("2d"),C=[];for(k=0;k<b;k++){var A={element:new Image,selected:!1};t.drawImage(e,k%c*a,Math.floor(k/c)*h,a,h,0,0,a,h);A.element.src=q.toDataURL();C.push(A)}a={uk:e,rowSpan:Math.ceil(b/c),kc:b,ig:C,Ee:0};
d(a)};e.src=a})};f=Sl.prototype;f.uj=function(a){function b(a){if(d){var b=document.createElement("div"),k=document.createElement("div");Pe(b,"rc-imageselect-tile");Pe(k,"rc-imageselect-checkbox");Md(d,b);Md(b,a.element);Md(b,k);e&&(b.style.width=this.$.Z.Th,a={Jh:a,Hg:b},b=new Jl(b),Q(this).h(b,"action",ma(c.dk,a)))}}var c=this,d=this.Va.candidate.element,e=!1;D(a[0].ig,b,this);d=this.Va.Z.element;e=!0;D(a[1].ig,b,this);xc(function(){c.J("rc-imageselect-payload").scrollIntoView()})};
f.dk=function(a){this.ua(Hd("rc-imageselect-error-select-more",void 0),!1);this.ua(Hd("rc-imageselect-error-select-one",void 0),!1);this.ua(Hd("rc-imageselect-incorrect-response",void 0),!1);var b=!a.Jh.selected;b?(++this.Va.Z.bc.Ee,Pe(a.Hg,"rc-imageselect-tileselected")):(--this.Va.Z.bc.Ee,Re(a.Hg,"rc-imageselect-tileselected"));a.Jh.selected=b};f.vc=function(){var a=[];D(this.Va.Z.bc.ig,function(b,c){b.selected&&a.push(c)});this.response.response=a.join(",")};f.td=function(a){ze(a,Ql)};
f.vd=function(){var a=this.Va.Z.bc.Ee;return 1<this.Nf&&a<this.Nf?(this.ua(Hd("rc-imageselect-error-select-more",void 0),!0),!0):0==this.Va.Z.bc.Ee?(this.ua(Hd("rc-imageselect-error-select-one",void 0),!0),!0):!1};f.ua=function(a,b){if("none"!=a.style.display!=b){var c=this.ac;c.height+=(b?1:-1)*ie(a).height;Qk(this,c);ke(a,b)}};
var Rl=function(){var a,b=a=0;Ab||Bb?(a=screen.availWidth,b=screen.availHeight):xb||zb?(a=window.outerWidth||screen.availWidth||screen.width,b=window.outerHeight||screen.availHeight||screen.height,Fe||(b-=20)):(a=window.outerWidth||window.innerWidth,b=window.outerHeight||window.innerHeight);a=new N(a,b);var b=120,c=69,d=Hd("rc-imageselect-challenge");d&&(b=(new yd(d.offsetLeft,d.offsetTop)).y);if(d=Hd("rc-footer"))c=ie(d).height;b+=c;c=Math.min(400,Math.max(280,a.width));d=b+c;d>a.height-20&&(c=Math.min(400,
Math.max(280,a.height-(b+20))),d=b+c);return new N(c,d)};var Wl=function(){return S(Of())};var Xl=function(){Z.call(this,0,0,"nocaptcha")};x(Xl,Z);Xl.prototype.F=function(){Xl.b.F.call(this);this.m=Ae(Wl);this.ba(this.a())};Xl.prototype.ed=function(){return Oc()};Xl.prototype.hh=function(){this.Nc()};Xl.prototype.vc=function(){this.response.response=""};var Yl=function(a){switch(a){case "default":return new bl;case "adcaptcha20":return new kl;case "nocaptcha":return new Xl;case "imageselect":return new Sl;case "audio":return new Fl}};var Zl=function(){};f=Zl.prototype;f.ph=function(a){a(new lh(!0))};f.Nb=function(){};f.rh=function(){};f.sh=function(a){RecaptchaEmbedder&&RecaptchaEmbedder.verifyCallback&&RecaptchaEmbedder.verifyCallback(a)};f.mh=function(){};var $l=function(a,b,c,d){Og.call(this,a,c);this.kd=d;this.Dg=null;this.Yb="uninitialized";this.th=this.xh=0;this.Ni=b.Xc()};x($l,Og);$l.prototype.Gb=function(){return this.Dg};$l.prototype.cg=function(a){this.Dg=a};$l.prototype.Xc=function(){return this.Ni};var am=function(a,b,c){this.pc=c||"GET";this.Wj=b;this.We=new Oh;Th(this.We,a);this.wg=new Wh;a=Ia(Tg());di(this.We,"k",a)};am.prototype.uf=function(){return this.pc};am.prototype.Ib=function(){return this.We.Ib()};am.prototype.ya=function(){if(Ta(Ui,this.pc))return this.wg.toString()};var bm=function(a,b,c){Ta(Ui,a.pc);a.wg.add(b,c)},cm=function(a,b,c){Ta(Ui,a.pc);null!=c&&bm(a,b,c)};var dm=function(a,b,c){am.call(this,"/recaptcha/api2/reload",ch,"POST");bm(this,"c",a);bm(this,"reason",b);cm(this,"bg",c)};x(dm,am);var em=function(a,b,c,d,e){am.call(this,"/recaptcha/api2/userverify",eh,"POST");bm(this,"c",a);bm(this,"response",b);cm(this,"t",c);cm(this,"ct",d);cm(this,"bg",e)};x(em,am);var fm=function(a,b){O.call(this);this.w=a;J(this,this.w);this.g=b;J(this,this.g);this.mg=!1;this.Ff()};x(fm,O);fm.prototype.Ff=function(){this.h(this.w,"e",function(){gm(this,!0)});this.h(this.w,"f",function(){var a=this.w.$d();0>=a.width&&0>=a.height?gm(this,!1):this.g.kd.rh(a)});this.h(this.w,"g",function(){gm(this,!1)});this.h(this.w,"h",function(){hm(this,"r")});this.h(this.w,"j",function(){hm(this,"i")});this.h(this.w,"i",function(){hm(this,"a")});this.h(this.w,"l",this.verify)};
fm.prototype.Ra=function(a){im(this,a);this.g.kd.ph(v(this.Ij,this),v(this.Jj,this))};fm.prototype.Ij=function(a){a.visible||gm(this,!1);switch(this.g.Yb){case "uninitialized":hm(this,"fi");break;case "timed-out":hm(this,"t");break;default:gm(this,!0)}};fm.prototype.Jj=function(a){this.g.Gb()==a.response&&(this.g.Yb="timed-out")};
var gm=function(a,b){var c=v(function(){this.w.ga.Nb()},a);a.g.kd.Nb(b,a.w.$d(),c)},hm=function(a,b){if("fi"==b||"t"==b)a.g.xh=w();a.g.th=w();if("uninitialized"==a.g.Yb)a.Af(a.g.Xc());else{var c=v(function(a){this.g.Wf.send(new dm(this.g.Gb(),b,a)).then(this.Af,this.dj,this)},a);Ci(a.g.xb,c,c)}};f=fm.prototype;
f.Af=function(a){if(null!=a.tf())alert("Error: Invalid reload parameters.");else{im(this,Ia(U(a,1)));this.g.Yb="active";var b=this.w,c=Ia(U(a,5));!b.a()||b.ga&&b.ga.getName()==c||(b.ga&&(b.removeChild(b.ga,!0),Nb(b.ga)),b.ga=Yl(c),$e(b,b.ga),b.ga.render(b.a()));Rk(this.w.ga,this.g.Gb(),Lg(a,Zg,4),this.mg);this.mg=!1;b=a.Sc();this.g.xb.set(b);this.g.xb.load();a=Math.max(Ha(a.vf())-5,1);fd(v(this.fj,this,this.g.Gb()),1E3*a,this);this.w.ga.hh()}};f.dj=function(){alert("An error occurred while contacting the recaptcha service.")};
f.fj=function(a){"timed-out"!=this.g.Yb&&this.g.Gb()==a&&(this.g.Yb="timed-out",gm(this,!1),this.g.kd.mh())};f.verify=function(){var a=v(function(a){var c=this.g.Gb(),d=this.w.ga;d.vc();var e="";ga(d.response)&&!hb(d.response)&&(d=Cg(d.response),e=uh(d));var d=e,e=this.g,e=w()-e.xh,g;g=this.g;g=w()-g.th;a=new em(c,d,e,g,a);this.g.Wf.send(a).then(this.ij,this.hj,this)},this);Ci(this.g.xb,a,a)};
f.ij=function(a){if(null!=a.tf())alert("Error: Invalid verify parameters.");else{this.w.ga.Yg(a);var b=Ia(U(a,1));im(this,b);var c=a.Sc();this.g.xb.set(c);this.g.xb.load();U(a,2)?(a=Ha(a.vf()),this.g.kd.sh(b,a),gm(this,!1)):(this.mg=!0,this.Af(Ga(a.Xc())))}};var im=function(a,b){a.g.cg(b);a.w.cg(b)};fm.prototype.hj=function(){alert("An error occurred while contacting the recaptcha service.")};var jm=function(a){P.call(this,a);this.ga=null;this.Cg=Fd("recaptcha-token")};x(jm,P);jm.prototype.Gb=function(){return this.Cg.value};jm.prototype.cg=function(a){this.Cg.value=a};jm.prototype.$d=function(){return this.ga?this.ga.ac:new N(0,0)};var km=function(a){Sg.Ga().Ra(a.Yd());var b=new jm;b.render(document.body);var c=new qk,c=new $l(c,a,new Jj,new Zl);this.Lc=new fm(b,c);this.Lc.Ra(Ia(U(a,1)))};pa("recaptcha.frame.embeddable.Main.init",function(a){a=new dh(Ja(zg(a)));new km(a)});var lm=function(){this.me=null};f=lm.prototype;f.ph=function(a,b){gapi.iframes.getContext().addOnOpenerHandler(v(function(c){this.me=c;gapi.iframes.getContext().ready();c.register("show",a);c.register("timeout",b);c.send("ready")},this))};
f.Nb=function(a,b,c){0>=b.width&&0>=b.height&&(a=!1);var d=v(function(){this.me.send("show",new lh(a))},this);a?gapi.iframes.getContext().restyleSelf({width:b.width,height:b.height}).then(function(){gapi.iframes.getContext().restyleSelf({show:!0,setHideOnLeave:!1}).then(c).then(d)}):gapi.iframes.getContext().restyleSelf({show:!1}).then(d)};f.rh=function(a){gapi.iframes.getContext().restyleSelf({width:a.width,height:a.height})};f.sh=function(a,b){this.me.send("update",new kh(!0,a,b))};f.mh=function(){this.me.send("challenge_expired")};var mm=function(a){Sg.Ga().Ra(a.Yd());Ug()&&uj();var b=new jm;b.render(document.body);var c=new qk;a=new $l(c,a,new Jj,new lm);this.Lc=new fm(b,a)};mm.prototype.Zd=function(){return this.Lc};pa("recaptcha.frame.Main.init",function(a){var b=new dh(Ja(zg(a)));gapi.load("gapi.iframes:gapi.iframes.style.common",function(){(new mm(b)).Zd().Ra(Ia(U(b,1)))})});var nm=function(){return"complete"==document.readyState||"interactive"==document.readyState&&!F},om=function(a){if(nm())a();else{var b=!1,c=function(){b||(b=!0,a())};window.addEventListener?(window.addEventListener("load",c,!1),window.addEventListener("DOMContentLoaded",c,!1)):window.attachEvent&&(window.attachEvent("onreadystatechange",function(){nm()&&c()}),window.attachEvent("onload",c))}};var qm=function(a){return S("<div><div></div>"+pm({id:a.Yf,name:a.Zf,display:!1})+"</div>")},rm=function(a){return S('<div style="width: '+T(Wf(a.width))+"; height: "+T(Wf(a.height))+'; position: relative;"><div style="width: '+T(Wf(a.width))+"; height: "+T(Wf(a.height))+'; position: absolute;"><iframe src="'+T(Uf(a.Rj))+'" frameborder="0" scrolling="no" style="width: '+T(Wf(a.width))+"; height:"+T(Wf(a.height))+'; border-style: none;"></iframe></div><div style="width: 250px; height: 80px; position: absolute; border-style: none; bottom: 21px; left: 25px; margin: 0px; padding: 0px; right: 25px;">'+
pm({id:a.Yf,name:a.Zf,display:!0})+"</div></div>")},pm=function(a){return S('<textarea dir="ltr" id="'+T(a.id)+'" name="'+T(a.name)+'" class="g-recaptcha-response" style="width: 250px; height: 80px; border: 1px solid #c1c1c1; margin: 0px; padding: 0px; resize: none; '+(a.display?"":" display: none; ")+'"></textarea>')};var tm=function(a,b){this.id=window.___grecaptcha_cfg.count++;this.$b=a;this.fc=!0;this.ah=0;this.hb=null;sm(this,b)},um=new N(302,352),vm=function(a){var b=!a.fc&&!a.hb&&!!Qd(a.$b);return!a.fc&&!!a.hb||b},sm=function(a,b){b.hl="ja";ui(b);a.Zb=vi(b,!1);a.He=vi(b,!0)},wm=function(a){var b=a.Zb.tabindex;return isFinite(b)&&0==b%1?Math.max(0,a.Zb.tabindex):0};f=tm.prototype;
f.mj=function(){Qd(this.$b)&&this.De();var a=Ae(qm,{Yf:xm(this.id),Zf:"g-recaptcha-response"});this.$b.appendChild(a);var a=Qd(a),b={attributes:{title:"reCAPTCHA \u30a6\u30a3\u30b8\u30a7\u30c3\u30c8",tabindex:String(wm(this)),role:"presentation"}},b=new ih(b),c=ti("api2/anchor");b.A.url=c;b=jh(b,this.He);b.A.where=a;b.A.messageHandlersFilter=gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER;c={ready:v(this.cj,this),update:v(this.gj,this)};b.A.messageHandlers=c;var d=c=new N(304,78),e;if(d instanceof N)e=d.height,
d=d.width;else throw Error("missing height argument");a.style.width=ge(d);a.style.height=ge(e);b.A.attributes=b.A.attributes||{};(new gh(b.A.attributes)).Gh(""+c.width).Ch(""+c.height);this.hb=gapi.iframes.getContext().openChild(b.value());fd(v(this.pe,this),3E4)};f.cj=function(){this.fc=!1;return new nh(wm(this))};f.gj=function(a){if((Fd(xm(this.id)).value=a.response)&&this.Zb.callback)this.Zb.callback(a.response);else if(!a.response&&this.Zb["expired-callback"])this.Zb["expired-callback"]()};
f.pe=function(){if(this.fc&&!Qd(this.$b)){this.fc=!1;this.hb=null;var a;a=new Wh;a.add("k",this.He.k);this.He.stoken&&a.add("stoken",this.He.stoken);a.add("hl","ja");a.add("v","r20150429132001");a.add("t",w()-this.ah);ym()&&a.add("ff",!0);a=ti("api/fallback")+"?"+a.toString();a=Ae(rm,{Rj:a,height:um.height+"px",width:um.width+"px",Yf:xm(this.id),Zf:"g-recaptcha-response"});this.$b.appendChild(a)}};
f.De=function(a){var b=v(function(){this.fc=!0;this.hb=null;Nd(this.$b);a&&a()},this);this.hb?(this.hb.registerWasClosed(b,gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.hb.send("dispose",void 0,void 0,gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)):b()};
var xm=function(a){return"g-recaptcha-response"+(a?"-"+a:"")},zm=function(a){a.ah=w();if(ym())a.pe();else if(Le()){var b=function(){sk()?gapi.load("gapi.iframes:gapi.iframes.style.common",v(a.mj,a)):a.pe()};sk()?b():Ij("https://apis.google.com/js/api.js",{timeout:3E4}).then(b,b)}else a.pe()},Am=function(a,b){var c;c="string"===typeof a?Fd(a):a;if(0!=Pd(c).length)throw Error("ReCAPTCHA placeholder element must be empty");c=new tm(c,b);zm(c);window.___grecaptcha_cfg.clients[c.id]=c;return c.id},Bm=
function(a,b){var c=window.___grecaptcha_cfg.clients[a||0];if(!c)throw Error("Invalid ReCAPTCHA client id: "+a);vm(c)&&(b&&sm(c,b),c.De(function(){zm(c)}))},Cm=function(a){var b=window.___grecaptcha_cfg.clients[a||0];if(!b)throw Error("Invalid ReCAPTCHA client id: "+a);return Fd(xm(b.id)).value},ym=function(){return!!window.___grecaptcha_cfg.fallback};
if(l.window&&l.window.__google_recaptcha_client)if(window.___grecaptcha_cfg||pa("___grecaptcha_cfg",{}),window.___grecaptcha_cfg.count=0,window.___grecaptcha_cfg.clients={},pa("grecaptcha.render",Am),pa("grecaptcha.reset",Bm),pa("grecaptcha.getResponse",Cm),"explicit"==window.___grecaptcha_cfg.render){var Dm=window.___grecaptcha_cfg.onload;u(window[Dm])&&om(window[Dm])}else om(function(){var a=Hd("g-recaptcha");if(a){var b=a.getAttribute("data-sitekey"),c=a.getAttribute("data-type"),d=a.getAttribute("data-theme"),
e=a.getAttribute("data-stoken"),b={sitekey:b,type:c,theme:d,stoken:e},c=a.getAttribute("data-callback");u(window[c])&&(b.callback=window[c]);c=a.getAttribute("data-expired-callback");u(window[c])&&(b["expired-callback"]=window[c]);Am(a,b)}});})()
_text/javascriptÔ	 _Xhttps://blog.st-hatena.com/css/globalheader.css?version=f95a219773244f14c2c322979e39f67bOwbplist00ÔjkX$versionX$objectsY$archiverT$top † ¯ #)*0123MNOPQRSTUVWXYZ[\]^_`adeU$nullİ	
 !"R$6S$10R$2R$7R$3S$11R$8V$classR$4R$9R$0R$5R$1€	€€€€€€€Ó$%&'(WNS.base[NS.relative€ €€_Xhttps://blog.st-hatena.com/css/globalheader.css?version=f95a219773244f14c2c322979e39f67bÒ+,-.Z$classnameX$classesUNSURL¢-/XNSObject#AºôÒ;:Oì ÈÓ456ALWNS.keysZNS.objectsª789:;<=>?@€	€
€€€€€€€€ªBDEFGHIJK€€€€€€€€€€€ZConnection\Content-TypeVServer]Last-Modified]Cache-ControlTVaryTDate_Content-EncodingWExpires_Transfer-EncodingZkeep-aliveXtext/cssUnginx_Thu, 01 Jan 1970 00:00:00 GMT_max-age=315360000_Accept-Encoding_Sat, 02 May 2015 09:36:59 GMTTgzip_Thu, 31 Dec 2037 23:55:55 GMTXIdentityÒ+,bc\NSDictionary¢b/ÿÿÿÿÿÿÿÿÒ+,fg_NSHTTPURLResponse£hi/_NSHTTPURLResponse]NSURLResponse_NSKeyedArchiverÑlm_WebResourceResponse€    # - 2 7 Z ` { ~ ‚ … ˆ ‹  ’ ™ œ Ÿ ¢ ¥ ¨ ª ¬ ® ° ² ³ µ · ¹ » ½ ¿ Á È Ğ Ü Ş à â=BMV\_hqsu|„šœ ¢¤¦¨ª¬®¹»½¿ÁÃÅÇÉËÍÏÚçîü
'/CNW]}‘£ÃÈèñö(,@N`cy             n              {OT/*
LESS Variables
Description: for Hatena Blog Admin
Author: Hatena Blog Team
Version: 1.0
*/
/* Background color */
/* Light Gray Background color */
/* dark background color */
/* Base text color */
/* light text color */
/* æ¨™æº–ãƒªãƒ³ã‚¯è‰² */
/* ãƒªãƒ³ã‚¯ã®hover */
/* ã‚°ãƒ¬ãƒ¼ã®æ¨™æº–ãƒœã‚¿ãƒ³è‰² */
/* æ¨™æº–ãƒœã‚¿ãƒ³ã®æ–‡å­—è‰² */
/* é’ã„æ¨™æº–ãƒœã‚¿ãƒ³è‰²  */
/* é’ã„æ¨™æº–ãƒœã‚¿ãƒ³è‰²(hover)  */
/* Registerç³»ã®ç·‘è‰²ãƒœã‚¿ãƒ³ */
/* Registerç³»ã®ç·‘è‰²ãƒœã‚¿ãƒ³ï¼ˆhoverï¼‰ */
/*
LESS Mixins
*/
/* box properties */
.clearfix {
  display: block;
  *zoom: 1;
}
.clearfix:after {
  display: block;
  visibility: hidden;
  font-size: 0;
  height: 0;
  clear: both;
  content: ".";
}
.inline-block {
  display: inline-block;
  *display: inline;
  *zoom: 1;
}
.ellipsis {
  white-space: nowrap;
  -webkit-text-overflow: ellipsis;
  -o-text-overflow: ellipsis;
  text-overflow: ellipsis;
  overflow: hidden;
}
/* text properties */
.font-default {
  font-family: 'Helvetica Neue', 'Helvetica', 'Arial', 'ãƒ’ãƒ©ã‚®ãƒè§’ã‚´ Pro W3', 'Hiragino Kaku Gothic Pro', 'ãƒ¡ã‚¤ãƒªã‚ª', Meiryo, 'ï¼­ï¼³ ï¼°ã‚´ã‚·ãƒƒã‚¯', 'MS PGothic', sans-serif;
}
/* CSS3 properties */
.border-box {
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  -ms-box-sizing: border-box;
  box-sizing: border-box;
}
.center {
  text-align: center;
  margin-left: auto;
  margin-right: auto;
}
.left {
  float: left;
}
.right {
  float: right;
}
.nofloat {
  float: none;
}
.clear {
  clear: both;
}
.block {
  display: block;
}
.inline {
  display: inline;
}
.nodisplay {
  display: none;
}
.relative {
  position: relative;
}
.absolute {
  position: absolute;
}
.static {
  position: static;
}
.fixed {
  position: fixed;
}
.margin0 {
  margin: 0 !important;
}
.padding0 {
  padding: 0 !important;
}
.bold {
  font-weight: bold;
}
.normal {
  font-weight: normal;
  font-style: normal;
}
.thin {
  font-weight: 300;
}
.italic {
  font-style: italic;
}
.nodeco {
  text-decoration: none;
}
.underline {
  text-decoration: underline;
}
.nolist {
  list-style-type: none;
}
.disc {
  list-style-type: disc;
}
.circle {
  list-style-type: circle;
}
.textleft {
  text-align: left;
}
.textright {
  text-align: right;
}
/*
Common.LESS
Description: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ–ãƒ­ã‚°ã€serviceã€admin ã®å…¨ã¦ã§èª­ã¿ã“ã¾ã‚Œã‚‹ã‚¹ã‚¿ã‚¤ãƒ«
Author: Hatena Blog Team
*/
/* åºƒå‘Šæ¶ˆã™ãƒœã‚¿ãƒ³ã‹ã‚‰PROã«èª˜å°ã™ã‚‹ */
.modal-window-background {
  position: fixed;
  left: 0px;
  top: 0px;
  width: 100%;
  height: 100%;
  background-color: #000000;
  z-index: 100;
  -moz-opacity: 0.5;
  opacity: 0.5;
  -khtml-opacity: 0.5;
  -webkit-opacity: 0.5;
  filter: alpha(opacity=50);
}
a.open-pro-modal {
  visibility: hidden;
}
.pro-modal-container {
  position: fixed;
  width: 500px;
  height: 250px;
  z-index: 110;
  background-color: #ffffff;
}
.favicon {
  margin-right: .3em;
  vertical-align: text-top;
}
@font-face {
  font-family: 'blogicon';
  src: url('/fonts/public/blogicon/blogicon-regular.eot');
  src: url('/fonts/public/blogicon/blogicon-regular.eot?#iefix') format('embedded-opentype'), url('/fonts/public/blogicon/blogicon-regular.woff') format('woff'), url('/fonts/public/blogicon/blogicon-regular.ttf') format('truetype'), url('/fonts/public/blogicon/blogicon-regular.svg#blogicon') format('svg');
  font-weight: normal;
  font-style: normal;
}
[class*="blogicon-"] {
  display: inline-block;
  font-family: 'blogicon';
  font-style: normal;
  font-weight: normal;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}
[class*="blogicon-"].lg {
  font-size: 1.3333333333333333em;
  line-height: 0.75em;
  vertical-align: -10%;
}
.blogicon-hatenablog:before {
  content: '\f000';
}
.blogicon-plus:before {
  content: '\f001';
}
.blogicon-minus:before {
  content: '\f002';
}
.blogicon-reorder:before {
  content: '\f003';
}
.blogicon-grid:before {
  content: '\f004';
}
.blogicon-chevron-left:before {
  content: '\f005';
}
.blogicon-chevron-right:before {
  content: '\f006';
}
.blogicon-chevron-up:before {
  content: '\f007';
}
.blogicon-chevron-down:before {
  content: '\f008';
}
.blogicon-external:before {
  content: '\f009';
}
.blogicon-plugin:before {
  content: '\f00a';
}
.blogicon-member:before {
  content: '\f00b';
}
.blogicon-account:before {
  content: '\f00c';
}
.blogicon-design:before {
  content: '\f00d';
}
.blogicon-cog:before {
  content: '\f00e';
}
.blogicon-edit:before {
  content: '\f010';
}
.blogicon-addstar:before {
  content: '\f011';
}
.blogicon-subscribe:before {
  content: '\f012';
}
.blogicon-entry:before {
  content: '\f013';
}
.blogicon-notify:before {
  content: '\f014';
}
.blogicon-private:before {
  content: '\f015';
}
.blogicon-user:before {
  content: '\f016';
}
.blogicon-home:before {
  content: '\f017';
}
.blogicon-setting:before {
  content: '\f018';
}
.blogicon-draft:before {
  content: '\f019';
}
.blogicon-search:before {
  content: '\f01a';
}
.blogicon-analytics:before {
  content: '\f01b';
}
.blogicon-help:before {
  content: '\f01c';
}
.blogicon-comment:before {
  content: '\f01d';
}
.blogicon-import:before {
  content: '\f01e';
}
.blogicon-truck:before {
  content: '\f020';
}
.blogicon-group:before {
  content: '\f021';
}
.blogicon-folder:before {
  content: '\f022';
}
.blogicon-add:before {
  content: '\f023';
}
.blogicon-pen:before {
  content: '\f024';
}
.blogicon-close:before {
  content: '\f025';
}
.blogicon-trash:before {
  content: '\f026';
}
.blogicon-bookmark:before {
  content: '\f027';
}
.blogicon-redirect:before {
  content: '\f028';
}
.blogicon-check:before {
  content: '\f029';
  color: #c3c1fd;
}
.blogicon-crop:before {
  content: '\f02a';
}
.blogicon-repeat:before {
  content: '\f02b';
}
.blogicon-logout:before {
  content: '\f02c';
}
.blogicon-star:before {
  content: '\f02d';
}
.blogicon-pro:before {
  content: '\f02e';
}
.blogicon-myblog:before {
  content: '\f030';
}
.blogicon-recent:before {
  content: '\f031';
}
.blogicon-info:before {
  content: '\f032';
}
.blogicon-good:before {
  content: '\f033';
}
.blogicon-amazon:before {
  content: '\f034';
}
.blogicon-twitter:before {
  content: '\f035';
}
.blogicon-facebook:before {
  content: '\f036';
}
.blogicon-share:before {
  content: '\f037';
}
.blogicon-code:before {
  content: '\f038';
}
.blogicon-list:before {
  content: '\f039';
}
.blogicon-calender:before {
  content: '\f03a';
}
.blogicon-bracket:before {
  content: '\f03b';
}
.blogicon-photo:before {
  content: '\f03c';
}
.blogicon-color:before {
  content: '\f03d';
}
.blogicon-public:before {
  content: '\f03e';
}
.blogicon-realtime-preview:before {
  content: '\f040';
}
.blogicon-warning:before {
  content: '\f041';
}
.blogicon-link:before {
  content: '\f042';
}
.blogicon-time:before {
  content: '\f043';
}
.blogicon-markdown:before {
  content: '\f044';
}
.blogicon-evernote:before {
  content: '\f045';
}
.blogicon-music:before {
  content: '\f046';
}
.blogicon-niconico:before {
  content: '\f047';
}
.blogicon-heart:before {
  content: '\f048';
}
.blogicon-heart-alt:before {
  content: '\f049';
}
.blogicon-tag:before {
  content: '\f04a';
}
.blogicon-mail:before {
  content: '\f04b';
}
.blogicon-help-alt:before {
  content: '\f04c';
}
.blogicon-sushi:before {
  content: '\f04d';
}
.blogicon-rss:before {
  content: '\f04e';
}
.blogicon-smartphone:before {
  content: '\f051';
}
.blogicon-laptop:before {
  content: '\f052';
}
.blogicon-mixi:before {
  content: '\f053';
}
.blogicon-haiku:before {
  content: '\f054';
}
.icon-allabout-guide {
  background-image: url(/images/sprite.png);
  width: 44px;
  height: 11px;
  background-position: 0px -210px;
}
.icon-curation-amazon-search-selected {
  background-image: url(/images/sprite.png);
  width: 30px;
  height: 30px;
  background-position: 0px -150px;
}
.icon-curation-amazon-search {
  background-image: url(/images/sprite.png);
  width: 30px;
  height: 30px;
  background-position: -150px -120px;
}
.icon-curation-archive-selected {
  background-image: url(/images/sprite.png);
  width: 30px;
  height: 30px;
  background-position: 0px -30px;
}
.icon-curation-archive {
  background-image: url(/images/sprite.png);
  width: 30px;
  height: 30px;
  background-position: -30px -30px;
}
.icon-curation-bar-close-hover {
  background-image: url(/images/sprite.png);
  width: 30px;
  height: 30px;
  background-position: -60px 0px;
}
.icon-curation-bar-close {
  background-image: url(/images/sprite.png);
  width: 30px;
  height: 30px;
  background-position: -60px -30px;
}
.icon-curation-bar-open-hover {
  background-image: url(/images/sprite.png);
  width: 30px;
  height: 30px;
  background-position: 0px -60px;
}
.icon-curation-bar-open {
  background-image: url(/images/sprite.png);
  width: 30px;
  height: 30px;
  background-position: -30px -60px;
}
.icon-curation-beginner-selected {
  background-image: url(/images/sprite.png);
  width: 30px;
  height: 30px;
  background-position: -60px -60px;
}
.icon-curation-beginner {
  background-image: url(/images/sprite.png);
  width: 30px;
  height: 30px;
  background-position: -90px 0px;
}
.icon-curation-bookmark-selected {
  background-image: url(/images/sprite.png);
  width: 30px;
  height: 30px;
  background-position: -90px -30px;
}
.icon-curation-bookmark {
  background-image: url(/images/sprite.png);
  width: 30px;
  height: 30px;
  background-position: -90px -60px;
}
.icon-curation-category-selected {
  background-image: url(/images/sprite.png);
  width: 30px;
  height: 30px;
  background-position: 0px -90px;
}
.icon-curation-category {
  background-image: url(/images/sprite.png);
  width: 30px;
  height: 30px;
  background-position: -30px -90px;
}
.icon-curation-evernote-selected {
  background-image: url(/images/sprite.png);
  width: 30px;
  height: 30px;
  background-position: -60px -90px;
}
.icon-curation-evernote {
  background-image: url(/images/sprite.png);
  width: 30px;
  height: 30px;
  background-position: -90px -90px;
}
.icon-curation-flickr-selected {
  background-image: url(/images/sprite.png);
  width: 30px;
  height: 30px;
  background-position: -120px 0px;
}
.icon-curation-flickr {
  background-image: url(/images/sprite.png);
  width: 30px;
  height: 30px;
  background-position: -120px -30px;
}
.icon-curation-fotolife-selected {
  background-image: url(/images/sprite.png);
  width: 30px;
  height: 30px;
  background-position: -120px -60px;
}
.icon-curation-fotolife {
  background-image: url(/images/sprite.png);
  width: 30px;
  height: 30px;
  background-position: -120px -90px;
}
.icon-curation-gist-selected {
  background-image: url(/images/sprite.png);
  width: 30px;
  height: 30px;
  background-position: 0px -120px;
}
.icon-curation-gist {
  background-image: url(/images/sprite.png);
  width: 30px;
  height: 30px;
  background-position: -30px -120px;
}
.icon-curation-gnavi-selected {
  background-image: url(/images/sprite.png);
  width: 30px;
  height: 30px;
  background-position: -60px -120px;
}
.icon-curation-gnavi {
  background-image: url(/images/sprite.png);
  width: 30px;
  height: 30px;
  background-position: -90px -120px;
}
.icon-curation-google-picker-selected {
  background-image: url(/images/sprite.png);
  width: 30px;
  height: 30px;
  background-position: -120px -120px;
}
.icon-curation-google-picker {
  background-image: url(/images/sprite.png);
  width: 30px;
  height: 30px;
  background-position: -150px 0px;
}
.icon-curation-gourmet-selected {
  background-image: url(/images/sprite.png);
  width: 30px;
  height: 30px;
  background-position: -150px -30px;
}
.icon-curation-gourmet {
  background-image: url(/images/sprite.png);
  width: 30px;
  height: 30px;
  background-position: -150px -60px;
}
.icon-curation-hatena-bookmark-selected {
  background-image: url(/images/sprite.png);
  width: 30px;
  height: 30px;
  background-position: -150px -90px;
}
.icon-curation-hatena-bookmark {
  background-image: url(/images/sprite.png);
  width: 30px;
  height: 30px;
  background-position: 0px 0px;
}
.icon-curation-home-selected {
  background-image: url(/images/sprite.png);
  width: 30px;
  height: 30px;
  background-position: -30px 0px;
}
.icon-curation-home {
  background-image: url(/images/sprite.png);
  width: 30px;
  height: 30px;
  background-position: -30px -150px;
}
.icon-curation-instagram-selected {
  background-image: url(/images/sprite.png);
  width: 30px;
  height: 30px;
  background-position: -60px -150px;
}
.icon-curation-instagram {
  background-image: url(/images/sprite.png);
  width: 30px;
  height: 30px;
  background-position: -90px -150px;
}
.icon-curation-itunes-selected {
  background-image: url(/images/sprite.png);
  width: 30px;
  height: 30px;
  background-position: -120px -150px;
}
.icon-curation-itunes {
  background-image: url(/images/sprite.png);
  width: 30px;
  height: 30px;
  background-position: -150px -150px;
}
.icon-curation-miil-selected {
  background-image: url(/images/sprite.png);
  width: 30px;
  height: 30px;
  background-position: -180px 0px;
}
.icon-curation-miil {
  background-image: url(/images/sprite.png);
  width: 30px;
  height: 30px;
  background-position: -180px -30px;
}
.icon-curation-nicovideo-selected {
  background-image: url(/images/sprite.png);
  width: 30px;
  height: 30px;
  background-position: -180px -60px;
}
.icon-curation-nicovideo {
  background-image: url(/images/sprite.png);
  width: 30px;
  height: 30px;
  background-position: -180px -90px;
}
.icon-curation-option-selected {
  background-image: url(/images/sprite.png);
  width: 30px;
  height: 30px;
  background-position: -180px -120px;
}
.icon-curation-option {
  background-image: url(/images/sprite.png);
  width: 30px;
  height: 30px;
  background-position: -180px -150px;
}
.icon-curation-paint-selected {
  background-image: url(/images/sprite.png);
  width: 30px;
  height: 30px;
  background-position: 0px -180px;
}
.icon-curation-paint {
  background-image: url(/images/sprite.png);
  width: 30px;
  height: 30px;
  background-position: -30px -180px;
}
.icon-curation-pixiv-selected {
  background-image: url(/images/sprite.png);
  width: 30px;
  height: 30px;
  background-position: -60px -180px;
}
.icon-curation-pixiv {
  background-image: url(/images/sprite.png);
  width: 30px;
  height: 30px;
  background-position: -90px -180px;
}
.icon-curation-twitter-selected {
  background-image: url(/images/sprite.png);
  width: 30px;
  height: 30px;
  background-position: -120px -180px;
}
.icon-curation-twitter {
  background-image: url(/images/sprite.png);
  width: 30px;
  height: 30px;
  background-position: -150px -180px;
}
.icon-curation-youtube-selected {
  background-image: url(/images/sprite.png);
  width: 30px;
  height: 30px;
  background-position: -180px -180px;
}
.icon-curation-youtube {
  background-image: url(/images/sprite.png);
  width: 30px;
  height: 30px;
  background-position: -210px 0px;
}
.icon-customize-article {
  background-image: url(/images/sprite.png);
  width: 16px;
  height: 16px;
  background-position: -210px -30px;
}
.icon-customize-background-color {
  background-image: url(/images/sprite.png);
  width: 16px;
  height: 15px;
  background-position: -210px -94px;
}
.icon-customize-background-image {
  background-image: url(/images/sprite.png);
  width: 16px;
  height: 12px;
  background-position: -210px -124px;
}
.icon-customize-css {
  background-image: url(/images/sprite.png);
  width: 16px;
  height: 15px;
  background-position: -210px -109px;
}
.icon-customize-footer {
  background-image: url(/images/sprite.png);
  width: 16px;
  height: 16px;
  background-position: -210px -46px;
}
.icon-customize-header {
  background-image: url(/images/sprite.png);
  width: 16px;
  height: 16px;
  background-position: -210px -62px;
}
.icon-customize-sidebar {
  background-image: url(/images/sprite.png);
  width: 16px;
  height: 16px;
  background-position: -210px -78px;
}
.icon-customize-smartphone {
  background-image: url(/images/sprite.png);
  width: 10px;
  height: 16px;
  background-position: -226px -30px;
}
.icon-library {
  background-image: url(/images/sprite.png);
  width: 41px;
  height: 11px;
  background-position: -44px -210px;
}
.icon-npo {
  background-image: url(/images/sprite.png);
  width: 25px;
  height: 11px;
  background-position: -210px -136px;
}
.icon-pro {
  background-image: url(/images/sprite.png);
  width: 25px;
  height: 11px;
  background-position: -210px -147px;
}
.icon-sponsored {
  background-image: url(/images/sprite.png);
  width: 58px;
  height: 11px;
  background-position: -85px -210px;
}
[class^="icon-"],
[class*=" icon-"] {
  display: inline-block;
  vertical-align: text-top;
  background-repeat: no-repeat;
  *margin-right: .3em;
  margin-right: 2px;
}
[class^="icon-"]:last-child,
[class*=" icon-"]:last-child {
  *margin-left: 0;
}
[class^="icon-big-"],
[class*=" icon-big-"] {
  display: inline-block;
  vertical-align: text-top;
  background-repeat: no-repeat;
  *margin-right: .3em;
  padding-right: 0;
  margin-right: 3px;
}
.icon-pro,
.icon-npo,
.icon-sponsored,
.icon-library,
.icon-allabout {
  margin: 0 3px;
  vertical-align: middle;
}
@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 2dppx) {
  [class^="icon-"],
  [class*=" icon-"] {
    background-image: url(/images/sprite@2x.png);
    background-size: 240px auto;
  }
}
#header,
#globalheader {
  position: relative;
  z-index: 99;
  width: 100%;
  border: none;
  font-family: 'Open Sans', 'Helvetica Neue', 'Helvetica', 'Arial', 'ãƒ’ãƒ©ã‚®ãƒè§’ã‚´ Pro W3', 'Hiragino Kaku Gothic Pro', 'ãƒ¡ã‚¤ãƒªã‚ª', Meiryo, 'ï¼­ï¼³ ï¼°ã‚´ã‚·ãƒƒã‚¯', 'MS PGothic', sans-serif;
}
#globalheader-container {
  height: 37px;
  width: 100%;
  z-index: 99;
}
.browsing-with-smartphone #globalheader-container {
  height: 44px;
}
.browsing-with-smartphone #globalheader-container iframe#globalheader {
  height: 44px;
}
.global-page #header a:link,
.global-page #header a:visited {
  color: #333 !important;
}
#header a:hover {
  text-decoration: underline;
}
.page-globalheader {
  margin: 0;
  padding: 0;
  height: 37px;
  overflow: hidden;
}
#header {
  width: 100%;
  background: transparent;
  /* service header-bg color */
}
#header #header-body {
  width: 100%;
  height: 37px;
  display: block;
  *zoom: 1;
  text-align: center;
  font-size: 75%;
  position: fixed;
  top: 0;
  left: 0;
  z-index: 9998;
}
#header #header-body:after {
  display: block;
  visibility: hidden;
  font-size: 0;
  height: 0;
  clear: both;
  content: ".";
}
#header img {
  border: 0;
}
#header a {
  text-decoration: none;
}
#header a:hover {
  text-decoration: underline;
}
.globalheader-nav {
  position: relative;
  float: left;
  margin: 0;
  padding: 0;
  list-style: none;
  display: block;
  *zoom: 1;
}
.globalheader-nav:after {
  display: block;
  visibility: hidden;
  font-size: 0;
  height: 0;
  clear: both;
  content: ".";
}
.globalheader-nav > li {
  float: left;
  padding: 0 10px;
}
.globalheader-nav > li a {
  float: none;
  line-height: 37px;
  text-decoration: none;
}
.globalheader-nav > li span {
  float: none;
  line-height: 37px;
  cursor: pointer;
}
.globalheader-nav .service-logo {
  vertical-align: middle;
  height: 37px;
}
.globalheader-nav .service-logo-container svg {
  width: 141px;
  height: 37px;
}
.globalheader-nav .current-blog a {
  display: block;
  max-width: 180px;
  white-space: nowrap;
  -webkit-text-overflow: ellipsis;
  -o-text-overflow: ellipsis;
  text-overflow: ellipsis;
  overflow: hidden;
}
.globalheader-nav .blog-private-badge {
  display: none;
  margin-right: .3em;
  float: left;
}
.globalheader-nav #subscribe span:hover {
  text-decoration: underline;
}
.globalheader-nav .subscribe .subscribe-count {
  vertical-align: middle;
  background: rgba(0, 0, 0, 0.3);
  padding: 3px 5px;
  font-size: 10px;
  -webkit-border-top-right-radius: 2px;
  -webkit-border-bottom-right-radius: 0;
  -webkit-border-bottom-left-radius: 0;
  -webkit-border-top-left-radius: 0;
  -moz-border-radius-topright: 2px;
  -moz-border-radius-bottomright: 0;
  -moz-border-radius-bottomleft: 0;
  -moz-border-radius-topleft: 0;
  border-top-right-radius: 2px;
  border-bottom-right-radius: 0;
  border-bottom-left-radius: 0;
  border-top-left-radius: 0;
  -webkit-border-radius: 2px;
  -moz-border-radius: 2px;
  border-radius: 2px;
  -moz-background-clip: padding;
  -webkit-background-clip: padding-box;
  background-clip: padding-box;
  color: #fff;
}
.globalheader-nav [class*="blogicon-"] {
  vertical-align: middle;
  font-size: 14px;
  margin-right: .2em;
}
.service-menu {
  position: absolute;
  top: 0;
  right: 0;
  margin: 0;
  padding: 0;
  display: block;
  *zoom: 1;
}
.service-menu:after {
  display: block;
  visibility: hidden;
  font-size: 0;
  height: 0;
  clear: both;
  content: ".";
}
.service-menu li {
  float: left;
  padding: 0 8px;
  line-height: 37px;
  vertical-align: middle;
  list-style-type: none;
}
.service-menu li span {
  cursor: pointer;
}
.service-menu li img {
  vertical-align: middle;
  margin-top: -2px;
}
.service-menu .upgrade-pro a {
  color: #62d7f4 !important;
}
.service-menu .header-user-image {
  width: 20px;
  height: 20px;
  -webkit-border-top-right-radius: 2px;
  -webkit-border-bottom-right-radius: 0;
  -webkit-border-bottom-left-radius: 0;
  -webkit-border-top-left-radius: 0;
  -moz-border-radius-topright: 2px;
  -moz-border-radius-bottomright: 0;
  -moz-border-radius-bottomleft: 0;
  -moz-border-radius-topleft: 0;
  border-top-right-radius: 2px;
  border-bottom-right-radius: 0;
  border-bottom-left-radius: 0;
  border-top-left-radius: 0;
  -webkit-border-radius: 2px;
  -moz-border-radius: 2px;
  border-radius: 2px;
  -moz-background-clip: padding;
  -webkit-background-clip: padding-box;
  background-clip: padding-box;
}
.service-menu .header-notify,
.service-menu .header-services,
.service-menu .header-unread {
  width: 36px;
  height: 37px;
}
.service-menu .global-notify {
  width: 25px;
  height: 25px;
}
.service-menu .global-logo {
  padding-left: 3px;
}
.service-menu .global-logo .global-hatena-logo {
  width: 76px;
  height: 12px;
}
.service-menu .global-logo .global-logo-svg-wrapper svg {
  width: 76px;
  height: 12px;
  vertical-align: middle;
}
#header .header-button {
  height: 37px;
  cursor: pointer;
  display: block;
}
#header .header-button.header-dropdown {
  background: url('/images/header/dropdown.gif') center right no-repeat;
  background-size: 12px 12px;
  padding-right: 12px;
}
#header .header-button img {
  vertical-align: middle;
}
#header .header-button .usermenu-svg-wrapper svg {
  width: 24px;
  height: 24px;
}
#header .header-button .notify-svg-wrapper svg {
  width: 25px;
  height: 25px;
}
#header .header-button .unread-svg-wrapper svg {
  width: 24px;
  height: 24px;
}
#header .header-button svg {
  vertical-align: middle;
}
.header-my .header-user-image {
  *padding-top: 11px !important;
}
.header-services img,
.header-notify img,
.header-unread img {
  *padding-top: 8px;
}
.global-logo img {
  *padding-top: 14px;
}
#header .header-notify,
#header .header-services,
#header .header-unread {
  margin-right: 2px;
  position: relative;
  padding: 0 3px !important;
}
#header .header-services span.header-dropdown {
  padding-right: 12px;
}
#header .header-notify span.header-dropdown,
#header .header-services span.header-dropdown,
#header .header-unread span.header-dropdown {
  padding-right: 9px;
  width: 25px;
}
#header .header-notify img,
#header .header-unread img {
  opacity: 1 !important;
}
#header .notify-count {
  font-weight: bold;
  color: #fff;
  background: url(/images/header/count-bg.png) top left no-repeat;
  background-size: 14px 14px;
  text-align: center;
  margin-right: 6px;
  position: absolute;
  top: 3px;
  right: 4px;
  width: 14px;
  height: 14px;
  line-height: 14px;
  font-size: 80%;
  display: none;
}
@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 2dppx) {
  #header .notify-count {
    background-image: url(/images/header/count-bg@2x.png);
  }
}
#header .unread-count {
  margin-right: 0;
  background-color: #c40017;
  position: absolute;
  top: 10px;
  right: 11px;
  width: 6px;
  height: 6px;
  border-radius: 6px;
  display: none;
  text-indent: 100%;
  white-space: nowrap;
  overflow: hidden;
  background-position: 0 0;
  background-repeat: no-repeat;
}
.page-globalheader .btn {
  display: inline-block;
  *display: inline;
  *zoom: 1;
  padding: 4px 10px 4px;
  margin-bottom: 0;
  line-height: 18px;
  color: #4f5051;
  background-color: #f7f8f9;
  text-align: center;
  vertical-align: middle;
  border: 1px solid #dfe5e7;
  -webkit-border-top-right-radius: 2px;
  -webkit-border-bottom-right-radius: 0;
  -webkit-border-bottom-left-radius: 0;
  -webkit-border-top-left-radius: 0;
  -moz-border-radius-topright: 2px;
  -moz-border-radius-bottomright: 0;
  -moz-border-radius-bottomleft: 0;
  -moz-border-radius-topleft: 0;
  border-top-right-radius: 2px;
  border-bottom-right-radius: 0;
  border-bottom-left-radius: 0;
  border-top-left-radius: 0;
  -webkit-border-radius: 2px;
  -moz-border-radius: 2px;
  border-radius: 2px;
  -moz-background-clip: padding;
  -webkit-background-clip: padding-box;
  background-clip: padding-box;
  cursor: pointer;
  font-size: 12px;
  text-decoration: none;
  font-weight: bold;
  -webkit-appearance: none;
}
.page-globalheader .btn:hover {
  border-color: #ccc;
  background-color: #eef0f2;
  text-decoration: none !important;
}
.page-globalheader .btn-blue,
.page-globalheader .btn-primary {
  color: #fff !important;
  background: #4eacd1;
  border: 1px solid transparent;
}
.page-globalheader .btn-blue:hover,
.page-globalheader .btn-primary:hover {
  border-color: #339bc3;
  background: #339bc3;
  background: -webkit-gradient(linear, left top, left bottom, from(#4eacd1), to(#339bc3));
  background: -ms-linear-gradient(top, #4eacd1, #339bc3);
  background: -moz-linear-gradient(top, #4eacd1 0%, #339bc3 100%);
}
.page-globalheader .btn-register {
  color: #fff !important;
  background: #5aba90 !important;
  border: 1px solid transparent;
}
.page-globalheader .btn-register:hover {
  background: #45a67c;
  background: -webkit-gradient(linear, left top, left bottom, from(#5aba90), to(#45a67c));
  background: -ms-linear-gradient(top, #5aba90, #45a67c);
  background: -moz-linear-gradient(top, #5aba90 0%, #45a67c 100%);
  border-color: #45a67c;
}
.page-globalheader .btn-pro {
  color: #fff !important;
  background: #333;
  border: 1px solid transparent;
}
.page-globalheader .btn-pro:hover {
  background: #111111;
  background: -webkit-gradient(linear, left top, left bottom, from(#333333), to(#111111));
  background: -ms-linear-gradient(top, #333333, #111111);
  background: -moz-linear-gradient(top, #333333 0%, #111111 100%);
  border-color: #000;
}
.page-globalheader .btn-small {
  padding: 2px 10px !important;
  font-size: 11px !important;
}
.page-globalheader .btn-large {
  padding: 13px 19px;
  font-size: 17px;
  line-height: normal;
  font-weight: bold;
}
.page-globalheader .btn[disabled="disabled"],
.page-globalheader .btn[disabled="disabled"]:hover,
.page-globalheader input#submit[disabled="disabled"],
.page-globalheader input#submit[disabled="disabled"]:hover,
.page-globalheader form input[disabled="disabled"],
.page-globalheader form input[disabled="disabled"]:hover {
  -moz-opacity: 0.4;
  opacity: 0.4;
  -khtml-opacity: 0.4;
  -webkit-opacity: 0.4;
  cursor: default;
  white-space: nowrap;
}
.page-globalheader .btn.disabled,
.page-globalheader .btn.disabled:hover {
  -moz-opacity: 0.4;
  opacity: 0.4;
  -khtml-opacity: 0.4;
  -webkit-opacity: 0.4;
  cursor: default;
  white-space: nowrap;
}
#header .cookie-notify {
  margin: 10px 10px 20px 10px;
  padding: 2px 10px 2px 30px;
  background: #ddcccc url('/images/admin/error.png') no-repeat 5px center;
  background-size: contain;
  border: 1px solid #EFCFD1;
  font-size: 11px;
  color: #9b4d51;
}
#header .cookie-notify a {
  font-weight: normal;
}
#header .btn {
  line-height: 13px;
  position: relative;
  top: -1px;
}
@media screen and (max-width: 550px) {
  #current-blog {
    display: none !important;
  }
}
#header-body-mobile {
  display: block;
  height: 44px;
  margin-left: 8px;
  margin-right: 8px;
}
#header-body-mobile .service-logo {
  margin: 5px 0;
}
#header-body-mobile .service-logo-container svg {
  width: 130px;
  height: 34px;
  margin: 5px 0;
}
#header-body-mobile .houyhnhnm-logo {
  margin: 3px 0 2px;
  display: inline-block;
}
#header-body-mobile .globalheader-right {
  position: absolute;
  top: 0;
  right: 8px;
  margin: 6px 0;
  height: 32px;
}
#header-body-mobile .globalheader-right-nav {
  margin: 0;
  padding: 0;
  list-style: none;
  display: block;
  *zoom: 1;
}
#header-body-mobile .globalheader-right-nav:after {
  display: block;
  visibility: hidden;
  font-size: 0;
  height: 0;
  clear: both;
  content: ".";
}
#header-body-mobile .globalheader-right-nav li {
  float: left;
  margin-left: 5px;
}
#header-body-mobile .globalheader-right-nav i {
  vertical-align: middle;
}
#header-body-mobile .touch-header-btn {
  margin: 3px 0;
}
#header-body-mobile .touch-header-btn a {
  background: #fff;
}
#header-body-mobile .profile-image {
  width: 32px;
  height: 32px;
  -webkit-border-top-right-radius: 3px;
  -webkit-border-bottom-right-radius: 0;
  -webkit-border-bottom-left-radius: 0;
  -webkit-border-top-left-radius: 0;
  -moz-border-radius-topright: 3px;
  -moz-border-radius-bottomright: 0;
  -moz-border-radius-bottomleft: 0;
  -moz-border-radius-topleft: 0;
  border-top-right-radius: 3px;
  border-bottom-right-radius: 0;
  border-bottom-left-radius: 0;
  border-top-left-radius: 0;
  -webkit-border-radius: 3px;
  -moz-border-radius: 3px;
  border-radius: 3px;
  -moz-background-clip: padding;
  -webkit-background-clip: padding-box;
  background-clip: padding-box;
}
#header-body-mobile .btn {
  display: inline-block;
  *display: inline;
  *zoom: 1;
  padding: 0px 5px;
  margin-bottom: 0;
  line-height: 26px;
  text-align: center;
  vertical-align: middle;
  border: 1px solid #dfe5e7;
  -webkit-border-top-right-radius: 3px;
  -webkit-border-bottom-right-radius: 0;
  -webkit-border-bottom-left-radius: 0;
  -webkit-border-top-left-radius: 0;
  -moz-border-radius-topright: 3px;
  -moz-border-radius-bottomright: 0;
  -moz-border-radius-bottomleft: 0;
  -moz-border-radius-topleft: 0;
  border-top-right-radius: 3px;
  border-bottom-right-radius: 0;
  border-bottom-left-radius: 0;
  border-top-left-radius: 0;
  -webkit-border-radius: 3px;
  -moz-border-radius: 3px;
  border-radius: 3px;
  -moz-background-clip: padding;
  -webkit-background-clip: padding-box;
  background-clip: padding-box;
  cursor: pointer;
  font-size: 70%;
  font-weight: normal;
  background: transparent;
}
#header-body-mobile .btn-register {
  background-color: #5aba90;
  border: 1px solid #5aba90;
}
.hatena-globalheader-window {
  position: fixed;
  top: 37px;
  right: 100px;
  width: 150px;
  height: 300px;
  margin: 0;
  padding: 0;
  border: 1px solid #ccc;
  background: #fff;
  font-size: 75%;
  z-index: 9999;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  -moz-box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  -webkit-box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}
.hatena-globalheader-window iframe {
  width: 100%;
  height: 100%;
}
.hatena-globalheader-window.message {
  font-weight: bold;
  font-size: 100%;
  font-size: 13px;
  line-height: 30px;
  margin: 0 0 20px 0;
  padding: 5px 10px 5px 35px;
  border: 1px solid #C6C3FF;
  background: #eff3ff url('/images/admin/check.png') no-repeat 7px 7px;
  color: #454545;
}
.globalheader-dropdown-wrapper .iframe-dropdown-list {
  padding: 5px 0 5px 0;
  margin: 0;
}
.globalheader-dropdown-wrapper .iframe-dropdown-list a,
.globalheader-dropdown-wrapper .iframe-dropdown-list li > span {
  display: block;
  width: 176px;
  padding: 8px 12px;
  color: #454545;
  height: 16px;
  line-height: 16px;
  white-space: nowrap;
  -webkit-text-overflow: ellipsis;
  -o-text-overflow: ellipsis;
  text-overflow: ellipsis;
  overflow: hidden;
  cursor: pointer;
}
.globalheader-dropdown-wrapper .iframe-dropdown-list a:hover,
.globalheader-dropdown-wrapper .iframe-dropdown-list li > span:hover {
  text-decoration: none;
  background-color: #f7f8f9;
}
.globalheader-dropdown-wrapper .iframe-dropdown-list a .blogicon-subscribe,
.globalheader-dropdown-wrapper .iframe-dropdown-list li > span .blogicon-subscribe {
  margin: 0 .1em;
}
.globalheader-dropdown-wrapper .iframe-dropdown-list .favicon {
  vertical-align: text-bottom;
  -webkit-border-top-right-radius: 2px;
  -webkit-border-bottom-right-radius: 0;
  -webkit-border-bottom-left-radius: 0;
  -webkit-border-top-left-radius: 0;
  -moz-border-radius-topright: 2px;
  -moz-border-radius-bottomright: 0;
  -moz-border-radius-bottomleft: 0;
  -moz-border-radius-topleft: 0;
  border-top-right-radius: 2px;
  border-bottom-right-radius: 0;
  border-bottom-left-radius: 0;
  border-top-left-radius: 0;
  -webkit-border-radius: 2px;
  -moz-border-radius: 2px;
  border-radius: 2px;
  -moz-background-clip: padding;
  -webkit-background-clip: padding-box;
  background-clip: padding-box;
}
.globalheader-dropdown-wrapper .iframe-dropdown-list .dropdown-divider {
  padding-top: 1px;
  margin: 5px 1px 6px;
  border-bottom: 1px solid #dfe5e7;
}
.globalheader-dropdown-wrapper .iframe-dropdown-list.section {
  padding-bottom: 5px;
}
.globalheader-dropdown-wrapper .iframe-dropdown-list .dropdown-mymenu-more-blogs {
  text-align: center;
}
.globalheader-dropdown-wrapper .upgrade-pro a {
  color: #4eacd1 !important;
}
.globalheader-dropdown-wrapper .arrow a {
  background-image: url('/images/header/header-arrow.png');
  background-repeat: no-repeat;
  background-position: 5% 50%;
  padding-left: 25px;
  width: 163px;
}
.globalheader-dropdown-wrapper h1 {
  margin-left: 8px;
  margin-right: 8px;
  margin-bottom: 0 !important;
  padding-top: 10px !important;
}
.globalheader-dropdown-wrapper h1 a {
  color: #3d3f44;
}
.globalheader-dropdown-wrapper .search {
  padding: 8px;
}
.globalheader-dropdown-wrapper .search-form {
  width: 100%;
  border: 1px solid #dfe5e7;
  -webkit-border-top-right-radius: 3px;
  -webkit-border-bottom-right-radius: 0;
  -webkit-border-bottom-left-radius: 0;
  -webkit-border-top-left-radius: 0;
  -moz-border-radius-topright: 3px;
  -moz-border-radius-bottomright: 0;
  -moz-border-radius-bottomleft: 0;
  -moz-border-radius-topleft: 0;
  border-top-right-radius: 3px;
  border-bottom-right-radius: 0;
  border-bottom-left-radius: 0;
  border-top-left-radius: 0;
  -webkit-border-radius: 3px;
  -moz-border-radius: 3px;
  border-radius: 3px;
  -moz-background-clip: padding;
  -webkit-background-clip: padding-box;
  background-clip: padding-box;
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  -ms-box-sizing: border-box;
  box-sizing: border-box;
  position: relative;
}
.globalheader-dropdown-wrapper .search-form .search-module-input {
  padding: 5px;
  color: #555555;
  background: none;
  border: none;
  outline: none;
  height: 30px;
  width: 90%;
  box-shadow: none;
}
.globalheader-dropdown-wrapper .search-form .search-module-button {
  width: 20px;
  height: 20px;
  background: transparent url(https://blog.st-hatena.com/images/theme/search.png) no-repeat right center;
  border: none;
  outline: none;
  text-indent: -9999px;
  position: absolute;
  top: 5px;
  right: 5px;
  -moz-opacity: 0.5;
  -khtml-opacity: 0.5;
  -webkit-opacity: 0.5;
  opacity: 0.5;
  filter: alpha(opacity=50);
  cursor: pointer;
}
@media (-webkit-min-device-pixel-ratio: 2) {
  .globalheader-dropdown-wrapper .search-form .search-module-button {
    background: transparent url(https://blog.st-hatena.com/images/theme/search@2x.png) no-repeat right center;
    background-size: 20px 20px;
  }
  .globalheader-dropdown-wrapper .arrow a {
    background-image: url('/images/header/header-arrow@2x.png');
    background-size: 7px 10px;
  }
}
#hatena-diary-dropdown-mymenu,
#hatena-diary-dropdown-blogmenu,
.hatena-diary-dropdown-myblogs {
  width: 200px;
}
#hatena-diary-feedback {
  position: fixed;
  padding: 0;
  margin: 0;
  top: 37px;
  right: 188px;
  border: 1px solid #ccc;
  background: #fff;
  z-index: 9999;
}
#hatena-diary-edit-in-place {
  max-width: 982px !important;
  left: 10%;
  top: 37px;
  border: 1px solid #ccc;
  overflow: hidden;
  background: #fff;
}
#hatena-diary-dropdown-notify {
  width: 250px;
  height: 300px;
}
.hatena-iframe-container {
  position: fixed;
  top: 37px;
  padding: 0;
  margin: 0;
  border: 1px solid #ccc;
  overflow: hidden;
  background: #fff;
  z-index: 9999;
}
.hatena-iframe-container .loading {
  display: block;
  position: absolute;
  margin: 0;
  padding: 10% 0;
  width: 100%;
  height: 100%;
  line-height: 100%;
  text-align: center;
  background: #fff;
  opacity: 0.8;
}
.hatena-iframe-container .loading img {
  vertical-align: middle;
  margin: 2px;
}
.hatena-iframe-container iframe {
  width: 100%;
  height: 100%;
}
.hatena-iframe-container.popup {
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  -moz-box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  -webkit-box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}
.globalheader-config-dropdown-window {
  padding: 10px;
  font-size: 12px;
}
.globalheader-config-dropdown-window h1 {
  border-bottom: 1px solid #ccc;
  margin-bottom: 8px;
  padding: 5px 0;
}
.globalheader-config-dropdown-window h1 a {
  display: block;
  color: #3d3f44;
}
.globalheader-config-dropdown-window ul a {
  display: block;
  padding: 8px 0;
  color: #3d3f44;
  white-space: nowrap;
  -webkit-text-overflow: ellipsis;
  -o-text-overflow: ellipsis;
  text-overflow: ellipsis;
  overflow: hidden;
}
.globalheader-config-dropdown-window ul a:hover {
  text-decoration: underline;
}
.globalheader-config-dropdown-window ul .goto-dashboard a {
  border-top: 1px solid #ccc;
  margin-top: 5px;
  padding-top: 13px;
}
#username-window {
  right: 0;
  width: 150px;
  overflow: hidden;
}
#username-window li a {
  display: block;
  color: #333;
}
#username-window li img {
  vertical-align: middle;
  margin-bottom: 2px;
  margin-left: 3px;
  border: 0;
  background: #fff;
}
#username-window img {
  border: 0;
}
#username-window a {
  text-decoration: none;
}
#username-window a:hover {
  text-decoration: underline;
}
#username-window dt.label span,
#username-window li.label span {
  display: block;
  font-weight: bold;
  margin-top: 3px;
  padding: 3px 0 5px 3px;
  border-bottom: 1px solid #ddd;
  background: #fff;
  color: #000;
}
#username-window dt,
#username-window dd,
#username-window li {
  display: block !important;
  line-height: 1.5;
  margin: 0 !important;
  padding: 3px 5px;
  text-align: left;
}
#username-window dd img {
  margin-right: 4px;
  margin-left: 3px;
}
#username-window a {
  color: #333 !important;
}
#username-window li:last-child {
  border-bottom: 0;
}
#username-window img {
  vertical-align: middle;
  margin-top: -2px;
}
#notify-window {
  width: 250px;
}
#header-container #sp-suggest {
  background: #3d3f44;
  padding: 1em;
  text-align: center;
}
#header-container #sp-suggest a {
  display: inline-block;
  color: #3d3f44;
  background: #fff;
  padding: 1em;
  border-radius: .5em;
}
@media (min-width: 300px) {
  #header-container #sp-suggest a {
    font-size: 16px;
  }
}
@media (min-width: 900px) {
  #header-container #sp-suggest {
    padding: 3em;
    text-align: center;
  }
  #header-container #sp-suggest a {
    font-size: 50px;
    padding: 1em;
    border-radius: .5em;
  }
}
body.hide-global-header #globalheader-container {
  display: none;
}
#header.admin {
  background: #000000 url('/images/stripe_gray.gif') !important;
  color: #fff;
}
#header.admin a:link,
#header.admin a:visited {
  color: #fff !important;
  text-decoration: none;
}
#header.admin a:hover {
  text-decoration: underline;
}
#header.admin #userinfo {
  background: #000000 url('/images/stripe_gray.gif');
  color: #fff;
  border: 1px solid #333;
  line-height: 2;
  padding: 10px;
}
#header.admin #userinfo table {
  border-collapse: collapse;
  margin: 0;
  padding: 0;
  width: 100%;
}
#header.admin #userinfo tr,
#header.admin #userinfo th {
  text-align: left;
  margin: 0;
  padding: 0 1em;
  overflow: hidden;
}
.globalheader-fixed {
  margin-top: 37px;
}
.globalheader-fixed #globalheader-container {
  width: 100%;
  position: fixed;
  z-index: 9999;
  top: 0;
  left: 0;
}
Xtext/cssÔ	"#$%_Fhttps://blog.st-hatena.com/fonts/public/blogicon/blogicon-regular.woffOCbplist00ÔghX$versionX$objectsY$archiverT$top † ¯#)*0123KLMNOPQRSTUVWXYZ[\]`abU$nullİ	
 !"R$6S$10R$2R$7R$3S$11R$8V$classR$4R$9R$0R$5R$1€	€€€€€€€Ó$%&'(WNS.base[NS.relative€ €€_Fhttps://blog.st-hatena.com/fonts/public/blogicon/blogicon-regular.woffÒ+,-.Z$classnameX$classesUNSURL¢-/XNSObject#AºôÒ;˜Iw ÈÓ456@JWNS.keysZNS.objects©789:;<=>?€	€
€€€€€€€©ABCDEFGHI€€€€€€€€€€VServer\Content-Type_Access-Control-Allow-Origin]Last-ModifiedTEtagTDate]Accept-Ranges^Content-LengthZConnectionUnginx_application/font-woffQ*_Fri, 01 May 2015 10:50:42 GMT_"55435a82-4c04"_Sat, 02 May 2015 09:36:59 GMTUbytesU19460Zkeep-aliveÒ+,^_\NSDictionary¢^/L_application/font-woffÒ+,cd_NSHTTPURLResponse£ef/_NSHTTPURLResponse]NSURLResponse_NSKeyedArchiverÑij_WebResourceResponse€    # - 2 7 Y _ z }  „ ‡ Š  ‘ ˜ ›  ¡ ¤ § © « ­ ¯ ± ² ´ ¶ ¸ º ¼ ¾ À Ç Ï Û İ ß á*/:CILU^`biq|†ˆŠŒ’”–˜¢¤¦¨ª¬®°²´¶½Êèöû (.FHhzš ¦±¶ÃÆÉáæúş 25K             k              MOLwOFF     L     kÔ                       FFTM  €      s~ó'GDEF  œ       ' gOS/2  ¸   D   `çaocmap  ü   v  ŠŸcvt   t       D¡fpgm  |  ±  eS´/§gasp  0         glyf  8  B»  \8—Û¼Jhead  Fô   3   6
Ñkhhea  G(       $hmtx  GH   è  „M ƒloca  H0   ²   Ä/Ømaxp  Hä        ‹pname  I  \   ²tppost  J`  k  â‹8»#prep  KÌ   .   .°ò+webf  Kü      ’»U4       ĞÊW    ÑZ¢•    ÑZC:xÚc`d``àb1 fb`Â fó ¾ xÚc`f3aœÀÀÊÀÂjÄr–a&„f:Ë`É¸ÈJa¡Şá~
BØnÿ»ÍÀÀvÑ(Ìˆ¤D Z¸=xÚc```f€`FhòÁ|† -Æ  aSàRĞWˆWıóïƒÜ½vü>„üÿÏÀ À gø ğAáƒÁ‡ÿÿ?`¾ÿş†["‚ü|¼<Pó± F6¸$#`BWÀ0ì w‰Õ      DxÚ]Q»N[AİÄØ 9Ú³™Æ{¡	ÄÕbd;…åi7r‘‹q@DÚ¯ ¡¤H›!H|B>!3kˆ¢4;;³sÎ™3KÊ‘ªwékÏSç$ÂİÍ6ıNHµ³ ÷¤ëëŒ´ƒZlfôÊuûş›Ñ”;j å=o)M;Z´§şÑü
†ûüó;´4ÓôÔ:	é!æ›qKƒïÍºËú‚Õáb00¤˜¦â.?¦Rş·4çjË°µ‘Ñ¼ƒ3ùÉ4@SkmšşÔ!ÕóqKË¦±6˜˜²ş$Á…ÉtUSµÌøÚÁ]²³è`ƒ*ÍØÃVy&Ò·$Ê,öb«Ä“
9åÜÉş¤@ùHÆ¼IJ;ã†µÆ‘×À 6O³ÿ<›MmoÂøYÁw¿K:øÈ†Úb;b)€	DBFUù†Ï½,äRûÏ@”€åñ´îØD<—µu1Vz~ÛÜòËŠ»V¹Î‹Bwoªj¨Ò)Íû^Î¾ÇÃAcÁ›ÏûşJú<,®4hCz7zÿ¢µêˆ«¼>²'Ó¿±Z     ÿÿ xÚ­¼	xÕ¹0<çÌ¦u4#4’,ÉÚeK²dK–y“Øqâìqv²‡ì!$Z–	ŠCËRJ¡´
#‡ÄÜR(ŞK¡UKïíMKÛŞï¹½Kéåk{KbM¾÷Œìò÷¶ÿ÷<_Íœ9ÛÌ¼ï{Şı…©Ù…·²#MñT¦‚¨l×Ïàßä*{®kŒÆP¤*4©fIõÏÑ“]cˆÔç¥I¡Ù8¨EÑCÚväü‰ÙL•¢(D]ö¯‚Ù©‹û¸qnˆ’¨5wUÙ¬ÚXU]YU¨"u^VEgUGUuˆ•”RMÕÊ|”ª48$ûI÷G•2Uq5JöSÈh¢’sàºµÍì.&Ÿ‹í"G#a†³‹öh>@v§Œ™H8Šzp©¤$°S |®Úã	Êˆæ"áxûšıüs¨ãç·Şúsí{^ûæošO¢¸K{åš×µ×Nÿƒöb,ñÅ¢âu#Öj4¸İÆ"|n¯2Ú7s­`¥j_Ò¾ùëc÷şõ£hÖoûMmİƒzNî<­]8şºöJe?hI^Û–éX®fx›I²cì}</¼´#3QÛµ:ì.¾Äq,¡(IvåCpèD¹bA
åŠİ?$µÇS(Ì9¥ú2h¢/3‘éCğëËh1ıB‹eúğL¯%•è\oæ\¦Ó{D{3ú}0ËÑ/Q6ÊN©tVµ &ÄlEB)ªµM¿óôıô»°{ÉàóÇëóêó‘yh‚cn‚‡y©,E>6Rú×© 7H¥“ã_.ë…Ñ@:@zËqr@§/áòü> ±úsô^z’‚ôçw¾tşFûÊN<Ô¹jUgm¼sååe†úŸZFÉ%ÿøñüÄ_®§êkå¢Æ,â&(Á·‚\ù\/*ÚFrÌ¢x$Ì#.„/†ZÒ¡kB¡ÚKxN
é–P…è½éĞäÅPèÚP:Â]x0”j	…&µĞås»	4ÉÜ%}n2«q²b„©™i
¦¦È¬0Ï©½úy½x‘ÔÑˆÜbE¨ö4PèbzpÎQ2P‘«PÉxn˜:ƒxDãğğÊ0îÄs‚«Â0MÁåäEôêòğuAÂµoÀé:˜’¦¡0Y›‚õ5îgÌÊIQ"ÀæEEX¤ñ0o¬?2<LDãÜ ´*Tûví›ú33sVÀ$0M‡—‡¯Óµ\c ¸ET‚šI]A©±¬*WÇä˜)u²OöSª5«2@úıY•:«JÕ1‰"M’š$±â~ªVf?rK’}¬)Ó].—Õ¤¦€)Ye`Q©İ:KÊ)¹üHæ>FQEXÂ.¸&õqÔ^B‰x¡Ş™T†³‘CüÌ]tL”eqrbx÷îaz|x·,Îå3wMİu†¶™ñ/ß„ƒÉzèr½YSÌómæ—éÓGÎ8Å!Ñ¹{xrˆöŠN§¨?ræúÇú¨F²Njã´>Ì|«yŠö6Áš¹’ÚAİC©¥¬ÚV=™n+Rj@d§Î–›ªjON]Q[\V¬5¦Nºšô«À/TWõdƒ~i®ªæ¬ÚPU›Dµ?xVRçWÕùYµ¿ª†r•]„Ÿ›%{Å±¬\®4!€dp`1@’ªt• zñ
 jZª´Csk›S
`…+Ğj@œdÂÅ¡2Zr
˜çœ2éÑƒõ&àå	C;ïó¼Àûa%ä Œä¡O"ƒ²(œãh’~n×ºd!Ò¹sÓº›²M›æÌEæâ8äkÊµ{ûÊkÛ®ØyåšÌòö…É›cÈcmºïúÂœMĞóÆ+6Ş	ã
Éu»37›lÓ™ãõ‘ù¼>rı©‘3»Vq4¥ß­ÜmãänÇÒÏ§9ÄØ-İ3“Û—eÖ\¹ãŠ¶µå>o>ßäCÆºåàg‚uöÅRFª™JQ-ÀÙS*—©ú²ª¡ª2€¥ê£#‡¡Œ)¤¶ê”ÌVÇX’Y(™+<P2È\Ø(Vœpƒbm•6À$ì¸ FãÉt&«Ë\H©SÉTºE¿nmó 3$9tÉß'$\ÒE*O€pv)€ ?*´ÚJìøù‰ãìéŸ§[ïz
K¹îÅ³°¹ÉsèPwNÂûoêÁóÊ2ÇORÚsß…«ín‹Åâ6İÜ¿r”!ûàş››ü.‹…ïº}cÂã‰.±Ÿû17|~µÔBd,ëZ\	QŠ•^x=cµ²ŞªW„w`,VvåjòNºâPŒèŒÆ@H
0±DÈH„PPU#*–Nj¤”ŠäzÄ§ÿ€3sÓl±Àßı.š¶¢Ù¿ºûî_ißÔÕ¾ù._v§9l<ñmÆÕ· :xhacÎh,¯l^Ğë¢_Î„s‰foG‡·9oíêî½ëãwõw–sùxÊS¦ÿ¦qóÇ&¼nòÇÏŞQ]Îá—>kmÎtÛGf\_T,ffİí³—?Şó9,ÂC§q®ÜÛs×ñîêí.ç[›É}|‰D._Ùùi£)îâï/ŞÁ%Ì@W%™ó¨¥ +ÔŞ¬ÊD—eÕÅgA/¨,×uG W*Å%Ğ€e%ÀqpJd0.Ê®\±=¶O£Ó×€–1 kº‰wô>ŠäS[ğúswŒÌ™e»V‡f®1¶ÉrÂé·šXCÃÓØµıßŞ¸ÿ†Eû.ÜïX¸Ñ¢ı¨i9YÂmíí›$ÿ¢×ãëïEâ{/¦=ÆÌÚı÷Î»ò›·î*™ËVÇ«ßáw5x,M#9‡ã–—{vÏğğa4¬Ÿ®'Ç¾Ñ±Ìøá@ß¡×Sº¼¸›àvO<@İJ©Yõ@Uİ  ˆ\£/­]UuW]2,Í©ª:G±²®Û«•kævQÀÒœ„¥¹¥Š²ÎûÉİ{®> ¨î“*óƒPÕn¯„‡<Ğ ½¹Tí‘N¶–·2¤×b{¥s3á… C@p+:‘9uR%
‚.tA¦èDIª¦I³Ø„L”+&‰Ë(d'Te(:Áê‘³!9™ö"a¥<v?Br2k6Z>cµÙÍO´t‘[Ô‚F‹³uÆc‚My2b2¯÷»ÿdu@okØÔ²ÉQKØô¥u•/EÌ–™å õGV;zöƒ#+>ÀŸ²¹qc¡«¡Ğ%Y›¹çV«éFEşGAf¿bóÂô…V³M²He:‚Ø#hĞ;˜-Ì*º,‚dè¾Ã|yïÍ_hMVañÂ,é}şƒ'YAMë…Ü
öĞr=TŒ*P«¨1‘¢töÇ×EQÇªÎ+FÀ"P|	°h4 ?dŠ×ˆÅ	N,R¥±@0ÆCË)³ì	ÄÒ¤‘Ôø%ñÏƒM$•¦$}ÌÑˆy– Dø”\
1>J¬_é›GkQæøèpñÂ‚â0ºÿÓk¥«‘væ¾®«iïôö9¾ù³»Û—O&û,æ[™“ÅáÑ{Ñøhí«Åááÿ…:éİşå7£ÇøıkğÚ9Ş¢`kÏÏ
Èò·iVs²¡uÚ¦7Pì MœÀ;USV•òDØrc&3&Ù˜3›HÑl%ÂL4x@˜gBnÌ!“&‡½d‡®B™Œ©Šü¡baQ1²:ÍÆ‹1ÖÁBXŠ 5"úáÛo£jê"m£¶q1ı#»Å´‰ûég¡§´5³´q­í§?E?p’êQmÅ¦lI6:,Cù©1Š`Î#b@ÎèªŠ«NgOm wÄÆj»¸‰c(N†]¼xñjö4·€òRqªH€í¹“Rº–ÒUSUuvVí¬ª¬:XUãYu(¯‹’yúäĞ©A¬D  qP¬øÑytÓ4
Köd¢©4Ğ_ñÂE¶µ·Ğ‚(Uä¹e"gx ‡^ƒ”(²Hô×p†.…À	:GáÏÆ¸ô±kB(f·Ó1ƒoaíÆ@—°;ÎOĞ&Cen×½TuÙˆâè´MNÊåe±§µyÜŒ¥™xP;œ';/Œ“©ÁÚx½œdL]8>dsÊâÍ¥ A¡´9]èq4>…ƒq6‰—µp@e y XDƒ Ğ¤±ãµñÏC1†"‚àOápˆj «6M©Á¬j‡‘Ñ¬ªœU} Éˆ•H}İÅ ¸’]Òx™—BDØˆ²+~åG}fˆX¦±¥G^ùş+G–‚Á‹öøàÙ}¤fú&¶C-4n3yßÄ¡gŸ=41¥ûŞÄà¶€Ä£œ¥ºÅ _8ƒJ	0OÀ,WPzq"¯”ˆ>PPòÈéâl˜\ñ²aø!gQçÆõŸCa’…¼dG×4Š"m!Ÿ!nÚ`pXƒM²¼<ìğx6E#û“‹aY†al,‡¹´İáeÂ6›5aµÿcËfgÌÀ·úyï•å8ÇÆÒf·os×â˜CNyÜŸqFÃ…”Ùô‡Ã)—ÓË5Â|Z±ZÌ,w Úc±.Uºò“enUsR(ÊNíxï™_ã_ùæ£(»«Õ}ğ—#ºœ’$Q·9g:[+¡èô<z>è°p•V9<9M·D'Çğ2µ«3	|_íj«ÅÄ÷eÂôÒpxò9ĞÏÖ\ìàŸã>CY(5ƒê×}=NÀvY_T°‘ºìl©V: ÛÈJ•!’rŒ5Ù‰mÕbWy`²N(à&%b¹‚ášA	ÄMI)Pæ)Pë‰5PÔµ|¨"|BŠ‰
	hMúPú†mŞÿõôäÓÈšêJ¥ıXrôåO K±A–sûÖº[œèZd··İ?{ÇËG{šoLÁ¨ô×÷Ã(©¬&š©¼ıòÑ%¯<²¤ÉîjŠ•l>:Œ¨3æ¤9_r´sêâ>–ø·>â3[¨±²Nœÿÿ9M€RÊ©­UµÀyÌóˆdqLqçÿårüæƒ¹Mi“—0˜ã²ˆöËT%ÇÊxkCC:ƒÁL,¨‡œò_d0£CÄ*‚‘¨@Äbu¢/ƒ¡êz×'¹ïróGÄ¨E”j×=„À"Ì & wVõWU¿X	0lU­ŠŸ«ÓNX³+fİšl´ø(@FQé$#Ø8İp‘Áâ.¹
l>Ç€æÏ€1( ¬î%Rù"á$z\Ü¿÷EDİóê~ñEíõ—¾{‚6`mCò†ö çë¯!§ö«×^o9=-Ï|ÿD½¸÷Eí5í¨öÚ‹û±‰†Iæ¤ö	íWÈ‰nGNÂöÈË(_Ó~©EºgŠ¸ôˆš¦;òØißÔ5ú¿¼–¥	Ú	IFã²xÀ¡ìÎItZï
ƒ$9¦Ÿ§ËÚKÚqrÄ£’Ã!Õö‘2£ãëÂ8)s:Pº-–º8‡ç¹ åĞßk©¾Öè´Ş¬{wm€»Å:‰÷UÕtNí»äà]èë#jr/YòÒ)ëÊçÖ]½ÍPo¢ˆ&AŒ3†8ìD’ucÅPN!¦p`²ì‰‘`ˆ8‹u{TWm#Ä¡Wºë…Ğ;é“:x=ğÛß}ç»ï¼^ÛûÛ÷¿ó½wÑ¿Œ"×¶+6B°EBé™Ñ¼¤k”ZFJzÌ’`xĞƒlÁÁ°_^w=:şÛ÷Ş‚‰j{vüïLÛ³›[[R…†XÔ9 È%‡î{
©xga‘ÀpN>1syJ/½øûÏz©—
SIj?¥Z²`NTœ±\Nõf+¡æ|I¤tÊUU®sÎºÄB)
+D¬4Õ­İ4ñQÉ°"Är%lbÌ"°úšXˆf&œ½pT•µ«¢¥µ÷ Ë–rÄ/ÙqÌÇÎß@Î‡ŞB«Ş|S{ú­ÆÍğà½OV·lE›¶nE[7n¦7<µç´ö†öí;§9mİ¶~B:’ÿĞ§^Ğ×ÅÅ`gu€NÑFÍ¤–PË©/Sc&Â3ÓUb²yµXUeÕªJª_İÒªJçˆ·<€@êØªgÇ0«ä j¦ªê„£Xqã¬ª.+f(%ª• h¨/0¹|ÿ,¢¶™—‚ÚÖÑ9o>QÛR%µŒÀª—h±c¹\AE¹T–ÀÙUV’:å)APJÒ%.+%ş'NŒ>ÆoIÃ#*Ú(s+a¶umè|QƒXòŞi–|NoCQ§HGAE&Ï‰Îs²ˆ‰¾&ÔÆmN´—0bô4Ú¨v|T£&k—¸¯64ZçïS<úr%=œØe\.”Ÿ**.ôáÌÄßò'°^¢BTènPc~‚#{^ug+”5¯Û1â0ãu§*o"vCKVœÕK¢ê%ØfŞ˜U½Õ±F/éÕHS¤ÍXUÀãë)±:&:I«¶G%Cl°F@ï+ğWšÓpíª xŠ™ÀÃÍÉr¹ny†ò%”
õ€øÿJ•h°?€'µ¸paCÃ¿µ`¯Ñç¯}ü _Ëñ¿–_‰f=]îÁÍlìüÄo°”¿uÿ&Ÿÿüäö—ñ‹ı®úYˆá8
Ü7W{>0ÿ0PÌ‚ÔŸG-¤$jl6ÀáV×íx¶¿âYr)Å¿æw¢!'*øüZv<tVW$İ±2R2™z7µŒ¸éï¯[ûVG‹>ÕfSïF½úºGvf&j/Ó4}7Æ7e{+ßÀ’¥Êúù·ììòZ¬Ì¶Ñùë+¥æF§U˜·H°‹Ğ¨n h¼rªQŒ¹_>ÌÒ^#61cœ²É¸Ÿ²@Vƒ,`Hº‡&â(‹B‰PX ¢â6¸.ÚÜà”šdG-÷ÅZ›~±Ø²2ÚB.ú•H¡?èåi`ğ„!'%ªK—& ùërdÆe\0Q"e p¼Š%k×ßzInHAnÔ×â%_ü¥U(ÕE¬ãp|Z<üò:àêuñ°/@Ñt`4B1âD×&ôX”v.Âº$ c>€1Dho‡Q½ã9=<Ià*šÒyş¸×¹¡d¦<T,+…â#è(Å|ÄÙeD¥bû”&>Ak±É¡ÑÈºãp«ï6˜½†Ú³Ÿ@¯$“ÚïSİ½Mfú4:794~x‡öû`C›xÁk6Ô>k Oh±—“‡SÈ’JMÛÔ§ØÓ`½†tzf‰ñôÚE‚9ñö^TÌ)F8€ò-óF8Øˆ¶dÔ&¬Ô~g2İm˜°ó¦€ù¨Ù\;­fósÀ\û öK¨»ûñ€»°mªùÌ™¡0Õ>„ÁzjïBİ”¯sCÜÏà™ˆ–4H­¤¶SwRª!Kä­XcÀk‚ ûr9¤î qvJşµÅ¹ª–ÄÊ\(-¡!VVAiCUİP§°,w­´F•7–Õ’¤ö•Õ¹vuf¹²jÔ”Õ’:r€°zªB§%û©|çüek·èú£ƒ½ÍÉO‡/‰¥
ë¬”2à=$Ê
'â¥)hR¸Q#úÛŠÜŞzØgÑ ´ÇK«3ÚñÌji±öEPîÀ¦v™É!lôŒê!‡4Orì›a4¡]fcIÅnˆ(C¤/œt%[’Ùù¢|áÕwÙÈté#¾•ìêJ~ºL×…o·úL¦ÀO>RùĞèf„Ìw\8W¯#³ÔÕ@Òª§¯ÿYì“ Ó&©ÕG- ùı5f%’A¬ªsrDgIWO§S†”º°J\l€¡dV]œ×]nKõÅ\wÖ§ AÅœÚVU»ªj›X	Áõ’ªºDT=UÕ“…BeQ]ÃY8µ¾üeu‰T™Ùbz‘ıœùdı§D(ÎÒ#Iª§\Y8]ÛÊjQ"Jv5tYn:Ëç.óì_æáO!G!ŸÓ#\„ş¨HÉõĞtó‰¼YßÏÒıë×÷Ÿ¯õ¯G¿½§v¢İïË·®]ˆº•ÖXWñşÿ<»lI¨1^²¸mÄh¬Ä\0˜i	†ƒÁõÊ[o=Ál&3\xlÖúõ/›Í._¾Ğ¿®\2¸’©Ár*íuMµ-/ºœ…¬ìDŸ‘ÙŒÃ®=¶¦1®
66nÀÍÔ”Ÿ…b÷>§vSc^‚‰Ñ!Ë«\UÀâIè¡ëÔÃF_uÆÊ±*Q'+ª¯”¸¤Êe5f?éö6(uåœ 0 Ù(QÈ­`Q×¼a‰)Ü_VòÄ«`D„§& R(æ`—.¸â‰-™®&o£ìÆÂ“uã±¶oÿ—ç£´E‘v¿úÓ7\±E›5y=¡èö¡ŠiC ÚÄºæ!¼€>€´wĞ”ú»rÕcÅ®zh»0¶¡ .×é³Áàç	°kvM…ëÏã^¬½Ò?&µƒ5	->º®³›ßÇ½Cå€ªg|”ñ“0PQ÷; ?OÇ€7†·KŠ’Eú\İö¢ÈÚ¹H!¯Ylfí?'ë&ÆE¨ÇCøéÚ=øiæ”$O‚1vQïƒ‰QFy¬>—Iû˜æEÊ)N®‚1ø­ªû°vƒ¼¤Z©v]ZÚ«$^Ñ¬MG±R­äˆo¶¬âe…‰²Û"Uš’åËrhJz˜R$ª«!
Ï]ò¼ÙP=ÁæÈûhàùo£Í7™ùÖ°aÙï\÷Îãk×>şÎuÿñÌc‘x+¦©5áÏŞ¨½ñ´ª½ô>}D{\ûæûGŸzĞì3=f¢Í{BßwaÈ£…×¦˜jG_{ó‘÷ë²ÿFŞÍÍ£xJ æRÄÁÈV	÷7NÅ8‘j›
l‚®©â\E:åÙ)uªˆ¿ÈJÈRµ”UÆ®šõH²îÛ’hI§FzCíg8ü!‡wÔú4÷íõ'´×ñ÷=Xû÷Ú ;¦s2†€6À:Òs2hN<ƒ\$‘`´E#‰	ˆåüèñ-Ø£È^Œ0ò8]¼}1ĞW{M»¨ô+ÚÅÚk}ôãJPÛSû¶L{‚´„ ÇlÁ]è€'i^†ÙlíOËÌ¼=Ñ'Èf šÁ2šG­ 6R¿¸Ä]Ç’¹…ÄÖiÊªájeÖj(†E"ëúIH¸Ò»<_g±›.c±ÄV”r°¸ÕXİ„œYUgŠÄbTûuÓÜ*ñ8uÂõüêXç|Â:KÀæ‹••P¹®ª®‰Í®ª•Í ÷X¸Y@/¯´¦‰?JsA%oËˆA?_RóåÊº•Ğ¶p9ÁÎ±Î‹ÃRŸIvÛÓ­…ÎÁùKt÷y?t
ÄÊ7;ò…©, =Øê(§£ı(ÙÊsğê±ú/ë=X¹*âP¦|†áø–îù-[>\2°åŸîuúîœÓ1»ïS×İğ:f–#èö{“éŒÅg»ß˜ôv´ôwô½vè^O¢­ÔU@³¾x×=O?vÏ‘§?·ô¥KîYöufÓÀæÍ¾8xå•¨ë_éşÂÆuÅœUû·¿ãÚàı´SLu\ï•]ïÆâ²òò4}ğ,Û²¼µéè©ÊÃwúÆ=ëo8´jı×NÅúµ	îmĞ}I.°ï À=YŒ©"+À­ã®±Â6èjÅØ`É>n0Z¬¢$;u.Íë5&‹ Úe×tì^Ï×sÀ¯ ?4uæŞşpœ?æ!°bfôÂ>`ICµqòÓ&ø}=ÎÂÇÑøù	EQX«ğ27A5ÂJ½™""&¢?£)‚Ô!ı1ƒU5(VòzXTmÕÄœ­{‡f
İoj¼Ál §S,oà²ƒ„CÍ^h-tõÍ$ôÑÔ.ÙOÑÒÙÓ[·î¬3Õ¢¿—£hïA½(<Â»”R¢¤ğ	ŞEs˜cÒ(K¥¸zèN ƒCÅ’Cq/ó¤—’(eP	ônÇÛŸ{ï.t=¦nFëOçÉe†¾ÈĞ·œÕ&´×´ŸıàĞ›Zöû&ßÄ¬~ô'7ûïåè^ÑèÉ™ÃI„;ºJF|D£İµß{±ß9¢dQT;×š›•nº=3ôÏÚ_Ô~şöÜ-gQüÑßk_bñšÏ¿óşÄ›0ºaöGFë‘ö¸Ğg…ÄÊ»/;#Eîò­çÎs«€.À¶Q£:Ç¸¯Íª›uE‰XIW^f% ¾Uu@TĞƒ‚RÔã•äj=i¨ê†Ôv@ARMÍ°x¤S6O„m)ğ/}ëdÿ²µ›ÉÅzXĞjOYHj7`b-`â”IPåeSjòtNf¡}*)+SNWIËäH^fÇˆÍ;­P9§ô©RBwÚMe•LkdÄrsè=.]{Í;uÍ{ÿŞcïi§OŸÒN¿ìëÎ óèqd>sàÀíÇGµ?œ9€~çËn«™a#Y«Å×6<¼´Ñ/+f‹5a“ÙÁ×<oÑz·;Ş:àqÇ²Ñ8­~ïØ½pÓ§àÇ½¯>5:=ñèq21¹Ù«ş¸ L¶á/ş`[ÂáèéÛçÚì&Şå†2¦'’Q›ÔÙ‹üÍÏÒPƒ»9MQÓ¹°°vÚ¨êZ´œÛSiAgÈ1äª³ª–sjåêŠÜXWaÈ]`È+õàå"Âû‘zì|UÍ‹$bM†uŠ•¥Pª»Ê7BÉQ=iul-|g•dtY«êFQİJ(ÀFnU…×TÕ5Y²]Üûßüüµ/RÎ”I5d•{µ²}¨xUåÄ“<gp¤ÔâÉıö9Rcpp‚d/AãGWÔÜ¾ıøù‡Néeƒ~‘Qû¼¨RÊ)ÑåÊÒN /&Ü²‚¬{¿¤6”Õvu{YµJ•+6ƒX±m…I#=­Î5;ë:Œ
ÇûXzÖ"pI/ø©¡åõD<İRSô‰b‚ÎÔµº¯èHw“?¢¶Ù§ED^š²ˆÓ¦~¨gE8Cz^w<ë%8€Ş7•
4Ò†n{ğ‡;øÒëh“6Ïøúõo–šméL¥2’Õ×´ôº&íî‘ÑTW:İu>o+D³~ÎÂ£ùVZ²
ş]JE4Ú±ª=,)]rsˆ;wô¡÷fH%_Æ?Ú=’)d¿ñ…•×JÁ«šË¶üúU{o]º`8™úôÚrÇçFºk‹`ê€?Ï5gZÊqƒhDk­}³ÛÎ9p`ÎªÌVä˜ã_T·¤—Iû·–99»Á4Å_q§¸~*E]GİM¡ŞÕs%…ê˜ »õÆ˜:I	 Ák²ê¡êÉ]T5^U¿‘SÇEu´:6>J:¿]îÊ²ì%Ñ ¤¾¶àYõ`U=(VîNÓ~è,u•¢ôöxu¬ò8Y¹ÇHÏS•×¡ÛA¢Yôrï”NF…k>Mğ¾Î>¶b×Uãé¤Ë·íARù¸]}dÈN}¦¬J/ìÜõ™G¿@š´«”+‡®–«Êê]ÒXzË:]éò›½bµn¾Hí:;
p€ûh¬WO#ê İ†8†'Z1Ø0íºX*táMìC‚€˜J=t‰tp>ªK€U\„°ĞKgiñ˜®ŒäØ.ÔM2p>Q)_rê|°å]Š“Ì7Å ëÜ¯0•e:¥YÁj^”¹öíWîädAAÉÊÚ»QnDîpß¡}ãaùšŸüı#ëí(÷É=k]ºÓœ‰‹/³u­¸à?Ùœ¬´ê¦»dV½Ğ-ùdÁÈbÆÊ)l9={”€7aKp;¶-¼oõÌíædfYÂ`5r4Ş8ëIüäô(˜mëhrb„ÌÍè°ÚE£™ö²v„xÚ¯-ÃÑ¬`¶¢€d¶ğ)ïü†¼lÇÌAÁFÌù^ÉëDË73åıW/Ğ×oO7Ë&ÖO7™Â’W6ÍàfuÆ/ír®¸e~‚)ÍÃÉÆbCŸkI;áŒEQC8K«E³«Ù^2ìi”Õ7æ®d‹„€Óæ"ÓbËÖsÚ\VÄZ°I°b,yÍ½ŸË›fÑÈÏ;½4M#øchÌÓ¹ÇodÇÉ†…BpØ%`%'¿z"©&ô<Çx‚	¶HáBa0HKÿ,*ŸyíYpå¾ëSWİ¸÷‰G~lü_Ú5wçW-X³àéOµ·È¹è+×¿u‘Ê<õTï~” ú)ÆM‹¯j±Ş>Ó}İI¦Ìß}vÕæõ_ÊÓiöÓßõZ¹«îÃÕí‘qnTÄµDÏ°äIŞ™S¥¬êË“ ³»Ö¼rDù²Öõ~âd	¿Ê•×“,‚”îF¡>®tkI™SŞjU˜ğ_ÙÍ4ïşÊWvk?C¢ö~ÈqîÜM§Şx£öß»¿ò:ÓºëÉ'w]x{×—ğFdÙİØŒ,ß?²Cû}íñ/QÓ>	~‚sSF°¦lR#Y5x–¤ÕßxHâÉK!ªG_FÄHÃ4ïÌ şª?|Íü V@Ï˜ºËùÓ?VWã_Ö”õ/kæ–—Fˆ±àÇwhéÇª]OeV÷áVòÔ~XûG´†¶w¤Ã«æÏt8ly]îÖ).B¹©&²;@üríˆ#	wÅ©ÌswL¥èîX’5ïÔÓæÍØi¶‰æ²Ù¬õ¢3f(ˆ6síWø=Æ&ZXô5½àec)›¤7´B¡l± 3Z¯…nŠú8t¦¨ÏVûUÍ-xYF³ß*\ÈÚ`2G}¢²Å&X´^˜E÷Å­à~Ân«ÁCèäjXßÑÁëÙDÌÙ®:[1ˆÀ}ÙjÅ"çrºË·ÂÓÀhİ^"kIŠ¶/ %Å¥`XwîLñÇÎH·ê¿å—-;¸ü²#ÚÃºÏÿ×ôIõRôeÒ´N¤Ó…à›(CşOÇC÷rÿ2eÿ8©e …ˆícªª®œšÍªl~Ô¤.×iUê³Ô½¿.İ<.ˆ‰!’œ45‘#Ò»Å¤;*³g€Èzô Ÿ"©A’Ämc‰R_¹<å0 /†@"SÉ½	RsI)¸ÌG8¬äÛëÓJíåÜ¿|!?dşù÷àÓ-É6¤á£Ú‘d2#¢¦t,ât¹=ÉT±Ø½`fo¢I–é</YŞæÎhÌîr7ú¢K¼¹¦˜â:Î¾t~7otò©ÚºÚ¹f#üÃ3íÑXÈäjàƒÉæB~x \N$dW ˜/Ï™½"m
ù9ÊîF‡İ×ãjÊ·õvMÅ]îçŞ‚µ1‹ºd?á*só@2êí9â{É“ğı9â¿='‚}Wo<«væˆ®ÏuóS òƒ9uqUİ”«!ùF€z¸¬~J—œÙüì¹»öÕs[ÕîŒ¸0’ÔõIcáÕ7¹´ŸŒwn¾~Ê  @êGzæ«rÉ@şºÑ”ÇVüù:m!?R/ iû¢ŞóÏXŸc
“Î©›ÔïvùŠ3Ë±OØ•dª¯oV{8x•ŸÎØD_Ãü!Ÿ?ŞŠLÌõ…%sš¢VÛ-iSÒá`¬PûÂ¹ƒñ˜`=êğ49e‡#Ùh¿Ã!g2å… ß­–·ß78è÷¹œsİ.<‘s»ØûüµŸˆ%\Š×Û²ÎÆ £×³å¾Gfö¶µÌ™ó™û¶¶‘c]‹§¡Áß–-w}öš§İFÆäqM~÷úü¾L¶Ôñù'¼4kjpgÒ.Ù€¾zàDyfªYv64äZáFÅ•ùŞ}³Z²3g~şõ‚¢-.¥Ëä÷¤)eYSÏ·tÇ¢©î‚p\æ‚° Ô”ƒÉPwFÈd©1€tdBêi\$¿kŒaúê"9šF\b¥Ğtf¿ïÃ(úüİúá8C­8<2r˜¸#Ğ8ºR{çÖ3ô¾ÿ"U#S¶<ßW¹Qİ;’¦’S>19«Ç›½gÕx•D©Šl•ì§k`D)¨’F>Ü[qÉ|=Š‹'‰ÓPÓa~ü'tºæóÕšııµè£?ŒiŞÓÛÚdå8Ş;Ô¿¤£iÆš½{Öøğı´­CÑøújI¿#–ÖÑBïÊ¯lÛz«Í†+&{÷ÜsıÂ‹À³¾oa.%ãíø|¾CoÚN;i…¢ÜÈ^úÈLæëv²ƒ­ÎNtn$–§¸:Q/’;%Ô(Ä6m*7Ò ¤@%¯ä]Ğ(+\}kƒLºÂx¾•tj‡î®:­+0·Ë	$Ï»”<\–H]ÑHÎ9afù\AW‰0—à³ ƒÂÛ^Š“;Ó5Õ.T ¹’dñáúìĞ+—èEJQq•W±()%EğG˜U†xT,Ç^T 7‚
Yâ\½ÓÉëyı%"§»á½9"§Ãñ©Ğ[/¬àp‚¬ot‡™\ÄÎ# K:Pzq;YÛ…	°—ŠD‹· /sÎêx aÊ…|©˜Å<Ÿ »‰È¶QÅ•à	¤l¨ÎxıÍÁôƒGO8Eò&p‡"1*u>R,éÀ¨ƒ!^ç6äIã`RÊ— *qİì 	áqxAP7J¹:3rÊøa'afú³Õ¡ªïË"}â:ÇÊë»ò h°%8§B,“‹$tÎá•°C$FàI0
h›>¦¹e#b¡VVñF&Ş ´h)ODøRœ¼Ü^:ÁÃ5hA [¾]¿—Ó†"ğ*€—!Ï£8^±a9Â;ybÃ€p#	[Uqg-Ø°âLØ5ğ
O¬ëF@$±·¥<§KÂ‘Ã7¢nõyÔûû£Gn<¬y^Õ^ÿã,–13ƒ8‹0b9Ï0&KÑ,ëy†ÃcÁ‹6Aä±íÈ-ÚÌ±ŒÄMÈÂ³|#–¼‰çLŒİn¦9–ícÍ)¶% yLÁ`ÔÖÀú¬ŒÉh0ò˜6ÒpOV´7˜°	n.( ı±v3‡–Ì.¥M2²‚`0
FFÀ´Åçá%ÆbLa§›æhÎÅ2´‡SÉhâ|’Ál0ÂcØo5ˆØÂXÀ¡ÍfV“|œ1aÆ€Xì4
î6£èÄpÿ Ía“}AQ¦=Œİ0+50<¬“5h« Àp6£ –ÁğÀP=0f8e-ns<cOZ 7Úh‚»³8ÏòX´Ò€±2`ƒÑŒÍâ‚‰°ävÙEÆV ÍÒcŞHúÙ,¤¸±l… ËJŒ³ĞÃ£¸Ã »¥‘™±Ñ‚AäxD[³‰A`h±ğ$¼ÉHİvši œƒ7c^f„¬c<&æ1gä³%%bäi?vÌºjr
‚IâL˜eMó<‹MlL~Œ‚QÀ¥ÑÄ\†âTlb9fiÖÌÒ)"a­X004m3X)Äñ4ƒxŞˆÁöÅ´ŞŒá90™À dhÃXŠ¶ğÄª…æ³ò0M‡0ı)œBQßáï:ò{í[„4o<|ä®?ÒwB˜„axƒÁ(¤	ì,4à‹¡ƒ0'æˆÉéÃ8+9xVÎ²Ö ‚Mo0vE€2€Ğ*ñvÚ(eiŸ…q[ \ƒ]””MCnZğ‹n‘i_€±:˜ dSLf 6á-¬‘méáÀ=2ó¦Fî†p€a]ŠÙ"ÈÅæq¹¼@v@Q´CÀ¬&Û€İ€eÆĞ"MN§ÇÎ›íÈÊ¬’ eB¬ÃfàXZâÉkğğDfÜ `Äc‹Å„{˜¬²l‚Å‹UÚÃ€uÆÂZ8 nÖNs˜12fÖ˜©â¢†¼ÇÀs¬ú²‚4€6´›iÀ39@	,2™yƒ…µ…iƒÉ@Å J˜¬>»…á8‰P.ØIÈèÁ !XªÛ`…ÁR€ƒghe˜E„-é07Yˆ“`~†åd-€\X
FËòÖläyKY€Xàß°Fxdr±š¾jÕOÖ‹AÃaa9Ãã˜¹¸YyôùÏ€Y²ß$ËÜ` «‘šŒ44Ğ,,Ú)š`Nln `È;ÒğÒ<<²4³ğìDãJZ$+hÁ6@‡‘8 P€d9Ëø{4ıF“ßfõ˜ÒÅ¸×¹N°
ST'µ’ÚDí¡¡ÆÊDkj¬’,ŒµÕ“ôÚ¥†IØ–%[Û6f‰Õš%;­YÕ:ß^]çÓ½z.zºª¦ETwTOÚwl67³º£qˆTÉV¸ŠÏXOŸÜL¼xİ«@±ß!š½tÍÚI$Áa‡æ+ÊjARçƒ–¸kôZuÖ&²ûÃQÎº)½¼—6VçÿÃæ}ÇÇC‡ñR“Ï0(2¼Àè¼Ñ9a‚0§è9=8xhä“Ÿ$ÙZôÕä‡F&ï9„ÆĞWÜpƒ~u{ZoK&ï¤G¬VƒoÍ†{fÏ9ºu±ì´Zyßšõ÷Ì™}tÛço·Û²åØÖ‘|$ÚÖäQmäĞI2¦øa2ßùŸŒÒç>DîToi“Iôœİn
Ì,äçÎõxIyùÌBnî'5°uëÀà–-ƒ‘|nn.w)~@rä"TZ®GÚª$¬ªJ=
Ô®#,J²=H‚TI&Ù±A•(qıÈz É›SMvµP ÿzöÜTŞ- =[şXfõÿ7s¿é’.H.¹Ä‰.ìÎ	N'Ü!mõX%ÉZë°ˆ’Y»şÁíß]n]çGó³‰j¦ÊÔj#¥.Ìª\D¬m9¢öõĞyxİÊÚõ$7l«şö®ªê+3áÕGª•mğŞ3]’}œ³ù“ms×ê‘Ä–¹ ‰9$Aè$åš92erè|NßZŞ‹X’ß«ç–†2L„$6²û|EÊh²7İ†B¦Ù¡hACÆ|ûğ¦%‘î_û;ÖµY¦ö¿9g±)Êd$ó´5Õº Y{"µbÕ¬.”üø×@MòÏÀ3±EïÌfD±öa½+Ú w%sFsg»õ9quõ=K:ÛßïVhZÏËeƒŒŒş¡rÆÓµæØ°¿¥ÅÏùÓiÿ“×ÛC„şyĞŞ½æØªÕ÷,):P¦¿_™ŠO]Ãı›6VˆÊR{uú?¬çôËYİÓzÙ^k²ZšEŠ&YZd/y˜¤bY ®f©â—áì±YØ˜Ş“Ğ€<ÄÚ—¥SFJt§[>ú¨Kpê›.A†s´ëŸtÁ"ÙÒŸÁlH_´$ã@÷/Ñ,´Í"{¢µ—µÇ´—¹ñŠ}ıÖ_mÛ¶¯ıúÖ[~}búwô«p[kDûfÛ@+}éôîÑ£ïN„’fù:ŠØvâ×šV¶:¢·Ã­­a}ïèMü?±õ½)*Gv3Ñ:4äú÷Rò—åX·ç«•vx{¼ıÉ`<Ñ©Lö“«DKët*á_e\¥¼¤”ˆï	´h#Hi¤“;Ùµ|y×‡:G6údî¤Ãïw|¸@öyõÌ™WÉ~ …PğÕ3ÈÚ92ÒIWÈqr]‘}>yrtÿ2ºáw¿ÓîÂ÷}ğöœö:êFKµç(æ¢6éO¹ğ~{¨ıÔ'¨·õ=³ªÀõÕL–Äí‹zˆùê¬z}UİU÷VI’­ª¬¨^ ¸išzt\0Ø‚D$iGj¢ª&DµPUY(T†ëäq3 ¨‡Ç{İo»
–à•e5dBÒ¼ö“‘•WïOe¸@²Gn$ã¥Ç+Åv8Ï(W® ù‡‰¿¨²ız}ËƒºWR·•Õ•$ÎSa-P·¿\ß„ùgbV7I(”`±êÌK Sˆ|c"¯ÂK¾Ñ‰z8²†ëÛ¥aİ‡É—'ÀB	L	Ì6DXÕqœ
pó“ÉÆOR2EŠWö/=0·	lKszvxåNlò#œè+æY±5]Hx›f6=ÊÉ]Å™­AÁ%Ñşpñyl7ÍŠ¥‹N¦[{—6{e©ó×è]„Í‚Çæî“ågáF©”~£#¦v?|Ó“ x›ø'9g¡94Rş4mñ»ìŒØæC_8‹7Úí]›•ëÏ¬»á•wüøÆa·»±›".[ÄãæéïõbCc¸ãïËïÕV0– [înll†{ñÂÅkÙÿä–‚„™C‘•OWUZTİ$T<µq“=«gô‹o};‰)xI²¾ì"£‰xgÉ®>ÕhpÅÁöT¤-£½ÄÅöq¢^	ö‰ä"_P0¸iõ<ïÄ^;òÌ›‡¿|ğğI–yêğ²Áo?®]Ã¸éfæ{sl„™m‰-´Ë^š>ÿ³÷°Üí[·>ÀÑü	Gdıäè•s\=ŸæâÜßq7é¹4
å§‚T’z’3€îS¡è|°j‰™ÍÕ=ä'›‡AßTc«ûºêoô~“™P¯êÎ”Œ&ƒ¾±´!Ş­Œƒ¥A¾£†²jœ,=òB×÷ä8¥zÆjH:éñ‰·3n¯xœ¢’ü¬óIIö‘Eœ‘BÈé&I:ÓN (aÄ!»¤ÅpwÛ:ndÿş|çÆüÜ|~®ïÇWÏªıcíG¨	›´èïõê<óò…Y‡É?ú;Ú17¿¡mG_©G{ÏïEc‘\.Íçë±¦mŠë£| a ÕŸ­PfÃéC‘a¸ê	—T¡
ñ4©|¬q…ÇiÂoÊ]2şâ´Ÿ]¤İ}İâåWİı™‹”ö3¦yî—zÚ÷z\†ÚbYÆÏ!nòò­Y°xùĞíºzúŞİT"tÖ–W½UÕR½GGF=±aFèzº3w5›ìŞú×=şêó)õÌ’zæù.\?K}7™ÅÿÖŒz”áòú›ÊGº·Ìv8goí:Rîjÿä¼Dëk;k;Îşõ¼°aÎœe¾–rËğgáü–²Ñ½(ı™Õ¯ş¸vşÔÙº~7èëY€¼|‡´9±Jp :ÎÁ]†‚K©zz=|»¡;E·¥nHã¶drò©Ñn-Ú¹rbÅá‘dê0}¦{49ùıT
ç’‡Stkª{e§öŸÄ»šLÕõJ¥Ç+MÍ§†¨±¤—RU½ºDh­K¼ái‰×’#?^Ïİ¹·€ø]gyë{¥Z¥“ÎPLº,ãrçRæÓß¯(ÆŠÓL¨³kĞÙı˜ì€a‰wJ}gQ4ß=Ì’ï}¸ox÷h,‰:ŸíŠ$oÌã=ÃÛLÜ³¨3S„÷	Š"p£0Ö¶Ï<¡ıkS_¼;‹³é®&í_O<#30ú–.Äè½ÉĞïîÏ{ƒy_xÄÀŞÿ»Prò8Œg~)(“Á)Zf~5Ç/BEO2éË‡~qÇí–‹%‡\Dm ®Õµ¤ .4êZ8ù®İF]8Ú|E²ˆlî]Y=Ù¶r1ğŠŞ¼:²´nOb¾	Hy1Ù»KLB$ÅMP‚º‘Í¼ÏBMÈgO4w-[û?|Ïqy®q!cÄÕ¿úEè\OZzÓÎPÿê¾<Û•zì=4Ÿä@½wŒäY:­z¯‘d>×³¡Îh/¼şmí…3h­è>ê KW©}as~`§Ãò–UnÅg‡-5{Æá#©í²õ»VY?Ğ÷k+˜}Ú35;õQ‚Õ·µSgÎ ù˜kpìä…éB4Ñ¦oš— ì
oÍ+}#s>Õ²ñÂ»dÎ·¬N§•bA—yÿû;j&Ø×RQ_Oìƒ@^İÈx:[y†è¾ Ñ€÷0ğöDPt#v‘ıã‚MÎäó)|„xP³|{BÿtJ¢T÷˜°’È0zØ(Ãe‘ƒ¸ØY=µD>òá€y‹@àŒàg£Ißh‚U¦?ıÁbÖÖTZYhÛy×Ú“w·º×œ¸fµÓÙëõrıé¡X³½¥E`xŸÙ4oÍÌMô
ÃëãWö.¦{4?· ·[ËÎOÿ|ÍêW6ĞNé¼ªcñsÌ¢™ç1‹¸ƒ¼#%uïN®(ğæÂpúåUÃØÇXó›‹w î?‚²>éŠ)âR1oûgKú¶›¿:gŸöµk1+œén\qvAÿ{èwf”;YÑFÇ|«›;¼Ö¶O^µÉç[‰oÎFCÈ`‹w%Xéõûƒ(¢œhpF[OŠç÷®£/É÷Ç…âHgWe·ÖĞ0kÖêDqCC+oµ€U.Ñ)M]š‹÷æºûü²QQşk~ïø:ŞÕ‘Ms¶ÎÖ–§ûLÅp³ßä‰™L‡n‹Ÿ»åŞDï§Báe…†5ÁÆºu~Ç‚Öz|ˆ¿ØÍ›¹Nàaà`3(•ÉV:tY?µ×¾"fs9’ÅL6ÓHlJçu«„Ä­*îRYÿâ€ryŞ1G8®VÕ4ÏJÄ1AixÊ	Oš-ˆ²;¦›±Çô~ÑÂ«÷,Y´hÉe#ŸEæ·?eeòáš=~V:ıĞÃÚïĞ£pƒ¯-‚,èçhÿ;"nœŠy‚¬C{OËÕÔc#^ß¼ı‹.\p`/L¶gƒEÆúÉ·µ?|6’õ54¿ƒnø¡qáOúl¤‹?Õ>£…µßGÚ|ş(Z†¯@ß†âõÄ§ó\ş |>E¦Æâ„Ç7gÕppzˆÙ´Îà¹ªÊÕ•˜:ûòè#„
Gvme=CÏ‡³İ^19‰‰'U\`á©öŠÕ½8tu¡Š–Æ&«İ©xëVĞÔ7İxä q™zòï@ñé½‘Ô0jHöÔò®Îå^tá[‰Ö‘Ã+ZßB“¤jy§dÓjöišMìZÎ|ÔdcÚsèyûÜt÷ÈHwz®][‚–Æ³¤¥k9}áŒ‘^>Å¿w0İÆm¤š©vjn×å«„_Ô­»& ˜‚ŠTUß—ªKMSjjÚÖóğ¤Ò“%ik˜1U)êºğ7L<Ôd¢'Ú§¿¹	ïÄ¯îÜ9XëÜy[ƒ¿"y½R­ßŞ€®sNç9—«o]_0Ô’q“^ìMƒÛ·^XOÿƒÔĞ Mv@gæ.—rşÖu}}™–`èÒ·£€k#å÷l£ŠÔM0ŞV%x6ê¾„şU
¼o.«šÎuË[ÿ‹T%ÙÛ½¨£ËíF‘Wƒ7Û=ÌG‡wÿ÷>Û5ÌœÓemtx×¨K`Î	.—p!*¸pÔ1n·ëßiÙ‹¨á]»†i]6ONĞ1"Â'' «öD4ªç]<vñf>Ë­§dª‡²ƒfÚ›Ucg‰ØWÿ:F.6€Šyg±uöX”e¹,’tcòm:—!Òd‚k–"±ÔNÂ~°Â^D‰¢í¡yH¬æøÏŞä-Ú*íß´/×´GönùÄhiág‡nx´¿¹%wÀ—BèzÔµ`Íj1´v¥væ_}4¢ŸGxñï!+úî/¹qRÂwí¹á#W+æÃÑ–{µÿÑwzæb"5»¿I{=†Ê=[ÃÉ|~wR{¼£ıâ‡Ú/¸ãÜA÷KSıÔ
j;uõêYêeêÔ¿R5$£4 +Ğ!òåM]Ó-–êA]P<GD‰V¶'Ú‰È"‘;¨°½Ó¤AïJ@ÀÛ]
«ï?.%bÓuDœéáÖ^°ÑmŸ¾I!ƒñTG j×¥š>¯ÎIä$ğ3L§PqõmÎú‡àÈèÒÇ+8r[RÑ>]¡ch'‰¸~êE©ÙĞeÏÔƒKö:®KSìbf’&`Ì ãI"ßô”dšºåGw,A­€Jdjx±<IIƒ©t]ÊæqEXĞŒä@8*2Vš—ËÚW)§Êçr³.n'iÍüZ9fD£NÁ¸ÉÂ•8ÆŞb“Ñ“´•ï–Â="²¹X›ÜÎÇ&,ì~ßLíO3#Afì¬7ƒÖ‡achGÌ$pnÜ°Éäé7uÄ=†æ°Ù>ÏÑáaíRjf‹huÉ©ˆ G£#jê¶:Å¶°UäyABaG*H»Õ 	‡íQƒeP˜áI™9!k§;i¢wúhĞ;xšhœğ‡,ô?ŠJ4é‘´3´¹ÉjçF˜°ÃØÃ),<o10ÂÍ·^kEˆ7¹¢¸î*Ê‹ALcÆÄ¬,¾53,mğsÚ[Á›5!1²œ09nö;i3æÜ%±SlØŞ qqS,dr;~Â—‚¢ÙLÇ%ÿ{·0u4ÄğSWm’›óp¶˜öé­M¯´?bJašAkËİp#µ¡ş¨ÉPšh+ŠX2X^ßÜcÿÙ»J.ÙùMë=¢FáÉš#Ylè Íï¤9’¡Í‹öh£U¶{°EQÍrfó	µÿíj‹v,ºº›ÈÜÑ<€\?[ëšE[$~«Ñ)[/ˆ¶,ví'~§lEî h·J·6ºäƒ |$^\5<äµH[m¥çyÍ¢;°ÁöÇ‰½"cJ$"íáÑw"İ’$*‘Ú|À>5‘ ”ÕÁúEKĞ
`g“·E-ëzg<L»8—Áe#Ñx?omx‡ö–s¡È¬§™¡ó±À™7‹bà€İ?à¶Ø}tÈ&ÊQn¼ÅÀ˜Sœ­msç/;¶h¶t#6—c›è!sØ¸°ÉHQÿ®Jq‘ xÚc`d```dpä)=ø)ßæ+ƒ<\Œr¶‚Ñÿûşİæ˜ÄvÈå``‰ Ps| xÚc`d``»÷o3Ç¤ÿ}ÿâ8&1 EP@" «"xÚczÃàÂ L«˜óØî!h&/Æí@¬
Á·t<N„Ğ 9&k Úm@ì	Å@5ì¹,¾@¹µ şÿ¿ 1ˆ8ˆÍvˆ•şa{ ¤C!r¬*@¼íÿÖm6Ûj°¸#GÄØNCÍPaĞf½1Äa¶[PsõîºÃJ¿FØË.aƒõ\ bK¶_P½[€rœ=`sµì@|ˆOAô±o€ºı0Â~9ì—@êşÿc}óÿ7ÛN$w†Ò¿@ôÿìLìì_€a#äOùåÛâÿ?PûB“xÚc``Ğ! MN1ücTbLc<ÄøI†Éƒ©ˆ™ùK+k[Ûö ö:_œZœK¸Ü¸6q+pïã±ãâ]Ä'ÃçÁ·ƒï¿›€ŒÀÁ8ÁÁBnB=B§„‰Èˆ\İ%Î&Ñ&qEÒH²Lò‘”›4‹‡L„Ì6…Š·”‚”¹”'¨0¨ò¨æ©q©y¨PgSŸ£‘¦™¡ùK«Fëƒv˜ö	= å-û      a            T    xÚ•’ËNÂP†¿PC\±pÕ°4±â6êÂ˜‰•5¨\"V­•è‹ŸÇ…ñòú6ş…	bNÚóÍ?—sfZ`Wâ8‰Õ3`GzÖ8Fš‚qœ5¶Œ¸ôŒ§xàÉx×I'ÅqJ\1eÑñçÄÏÆodœãwrÎ—ñéXÒø“™XfÀßqb.g\sÃ#Z´	u³+ñV_Zƒ®bZ²¢XŸ#.dİK­++GN+O™ö©Qç,eûİ1ÿ©¬ ƒwô”CªRÖŸÚVdhÕzÃu½Ëê¨Î¥jF1M©]UnèËx¬öŸVdmN¼÷Ş¡_»ËE»K«ë”Işh¾¡æ]bY«=ı{²×?ù?‘5éuİ7v~`“ÛV@{AšÛŸU‰¢şÄ’:.š×ÎU¥©êQ§¡r›ıî°n•[y;òŠíş bJoIxÚmÍÅrUAEá³$¸»'¸ßş»;ÉÅB¬qw'# Š¢˜0à™xHì¬ÌØ“Uµ'_7ÒıÛ¯Ÿİ°ûß–ºV°’UŒ2ÆjÖ°–u¬gÙÄf¶°•mlg;ÙÅnö°—}ìç 9ÄaÆ™àG9ÆqNp’Sœæg9Çy.0 d
•I¦˜fÈE.q™+\e†kÌ2Ç<,Ò¸Înr‹ÛÜá.÷¸ÏòˆÇ<á)ÏxÎ^òŠ×¼á-ïxÏ–F?~ùñíSêcß¿~Á``“]ş³-¶ÚI;e§íĞÎöÖ·ö­mşo›^ÓkzM¯é5½¦×ôš^Ókz:g—»Ø7é&İ¤›t“nÒMºI7é&İ¤›t“nÒMº¡º¡º¡º¡º¡º¡º¡º¡›u³nÖÍºY7ëfİ¬›u³nÖÍºY7ëfİ¢[t‹nÑ-ºE·èİ¢[t‹nÑ-ºE·èVİª[u«n-¿–çø ¸ÿ…° K°PX±Y±F+X!°YK°RX!°€Y°+\XY°+   U4’º  _application/font-woffÕ	'()*+Uutf-8_ªhttps://apis.google.com/_/scs/apps-static/_/js/k=oz.gapi.ja.GaAqtE9vSt8.O/m=plusone/rt=j/sv=1/d=1/ed=1/am=IQ/rs=AGLTcCObdvcYYb_30dT3f0o1AM2Q88jrEw/t=zcms/cb=gapi.loaded_0O|bplist00ÔwxX$versionX$objectsY$archiverT$top † ¯'#)*0123STUVWXYZ[\]^_`abcdefghijklmpqrU$nullİ	
 !"R$6S$10R$2R$7R$3S$11R$8V$classR$4R$9R$0R$5R$1€	€€€$€&€€%€Ó$%&'(WNS.base[NS.relative€ €€_ªhttps://apis.google.com/_/scs/apps-static/_/js/k=oz.gapi.ja.GaAqtE9vSt8.O/m=plusone/rt=j/sv=1/d=1/ed=1/am=IQ/rs=AGLTcCObdvcYYb_30dT3f0o1AM2Q88jrEw/t=zcms/cb=gapi.loaded_0Ò+,-.Z$classnameX$classesUNSURL¢-/XNSObject#AºôÒ:èå ÈÓ456DRWNS.keysZNS.objects­789:;<=>?@ABC€	€
€€€€€€€€€€€­EFGHIJKLMNOPQ€€€€€€€€€€€ €!€"€#\Content-Type_alternate-protocol_Content-EncodingVServer_x-xss-protectionWExpiresSAge]Cache-ControlTDate^Content-Length_x-content-type-optionsTVary]Last-Modified_text/javascript; charset=UTF-8\443:quic,p=1TgzipTsffe]1; mode=block_Sun, 01 May 2016 00:53:12 GMTU31426_public, max-age=31536000_Sat, 02 May 2015 00:53:12 GMTU40781Wnosniff_Accept-Encoding_Fri, 01 May 2015 01:17:55 GMTÒ+,no\NSDictionary¢n/ÿÿÿÿÿÿÿÿ_text/javascriptÒ+,st_NSHTTPURLResponse£uv/_NSHTTPURLResponse]NSURLResponse_NSKeyedArchiverÑyz_WebResourceResponse€    # - 2 7 a g ‚ … ‰ Œ  ’ – ™   £ ¦ © ¬ ¯ ± ³ µ · ¹ º ¼ ¾ À Â Ä Æ È Ï × ã å ç é–›¦¯µ¸ÁÊÌÎÕİèöøúüş 
 "$&(*,.02468:G\ov‰‘•£¨·ĞÕã)IOjŠ˜ªÊÏÜßèúÿ+9KNd             {              fO Â»/* JS */ gapi.loaded_0(function(_){var window=this;
var ia,la;_.b=function(a){return function(){return _.aa[a].apply(this,arguments)}};var _DumpException=function(a){throw a;};_.aa=[];_.na=_.na||{};_.D=this;_.kf=function(a){return void 0!==a};
_.da=function(a){var c=typeof a;if("object"==c)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return c;var f=Object.prototype.toString.call(a);if("[object Window]"==f)return"object";if("[object Array]"==f||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==f||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==c&&"undefined"==typeof a.call)return"object";return c};_.ea=function(a){return"array"==_.da(a)};_.fa=function(a){return"string"==typeof a};_.oa="closure_uid_"+(1E9*Math.random()>>>0);ia=function(a,c,f){return a.call.apply(a.bind,arguments)};
la=function(a,c,f){if(!a)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var f=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(f,g);return a.apply(c,f)}}return function(){return a.apply(c,arguments)}};_.H=function(a,c,f){_.H=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ia:la;return _.H.apply(null,arguments)};
_.ma=function(a,c){var f=Array.prototype.slice.call(arguments,1);return function(){var c=f.slice();c.push.apply(c,arguments);return a.apply(this,c)}};_.pa=Date.now||function(){return+new Date};_.J=function(a,c){function f(){}f.prototype=c.prototype;a.T=c.prototype;a.prototype=new f;a.prototype.constructor=a;a.yc=function(a,f,l){for(var n=Array(arguments.length-2),q=2;q<arguments.length;q++)n[q-2]=arguments[q];return c.prototype[f].apply(a,n)}};
_.ra=window.gadgets||{};_.L=window.osapi=window.osapi||{};_.google=window.google||{};
window.___jsl=window.___jsl||{};
(window.___jsl.cd=window.___jsl.cd||[]).push({gwidget:{parsetags:"explicit"},appsapi:{plus_one_service:"/plus/v1"},client:{jsonpOverride:!1,rms:"migrated"},csi:{rate:.01},poshare:{hangoutContactPickerServer:"https://plus.google.com"},gappsutil:{required_scopes:["https://www.googleapis.com/auth/plus.me","https://www.googleapis.com/auth/plus.people.recommended"],display_on_page_ready:!1},appsutil:{required_scopes:["https://www.googleapis.com/auth/plus.me","https://www.googleapis.com/auth/plus.people.recommended"],display_on_page_ready:!1},
"oauth-flow":{authUrl:"https://accounts.google.com/o/oauth2/auth",proxyUrl:"https://accounts.google.com/o/oauth2/postmessageRelay",redirectUri:"postmessage"},iframes:{sharebox:{params:{json:"&"},url:":socialhost:/:session_prefix:_/sharebox/dialog"},plus:{url:":socialhost:/:session_prefix:_/widget/render/badge?usegapi=1"},":socialhost:":"https://apis.google.com",":im_socialhost:":"https://plus.googleapis.com",domains_suggest:{url:"https://domains.google.com/suggest/flow"},card:{params:{s:"#",userid:"&"},
url:":socialhost:/:session_prefix:_/hovercard/internalcard"},":signuphost:":"https://plus.google.com",":gplus_url:":"https://plus.google.com",plusone:{url:":socialhost:/:session_prefix:_/+1/fastbutton?usegapi=1"},plus_share:{url:":socialhost:/:session_prefix:_/+1/sharebutton?plusShare=true&usegapi=1"},plus_circle:{url:":socialhost:/:session_prefix:_/widget/plus/circle?usegapi=1"},plus_followers:{url:":socialhost:/_/im/_/widget/render/plus/followers?usegapi=1"},configurator:{url:":socialhost:/:session_prefix:_/plusbuttonconfigurator?usegapi=1"},
appcirclepicker:{url:":socialhost:/:session_prefix:_/widget/render/appcirclepicker"},page:{url:":socialhost:/:session_prefix:_/widget/render/page?usegapi=1"},person:{url:":socialhost:/:session_prefix:_/widget/render/person?usegapi=1"},community:{url:":ctx_socialhost:/:session_prefix::im_prefix:_/widget/render/community?usegapi=1"},follow:{url:":socialhost:/:session_prefix:_/widget/render/follow?usegapi=1"},commentcount:{url:":socialhost:/:session_prefix:_/widget/render/commentcount?usegapi=1"},comments:{url:":socialhost:/:session_prefix:_/widget/render/comments?usegapi=1"},
youtube:{url:":socialhost:/:session_prefix:_/widget/render/youtube?usegapi=1"},reportabuse:{url:":socialhost:/:session_prefix:_/widget/render/reportabuse?usegapi=1"},additnow:{url:":socialhost:/additnow/additnow.html"},udc_webconsentflow:{url:"https://myaccount.google.com/webconsent?usegapi=1"},":source:":"1p"},poclient:{update_session:"google.updateSessionCallback"},"googleapis.config":{methods:{"pos.plusones.list":!0,"pos.plusones.get":!0,"pos.plusones.insert":!0,"pos.plusones.delete":!0,"pos.plusones.getSignupState":!0},
requestCache:{enabled:!0},versions:{pos:"v1"},rpc:"/rpc",root:"https://content.googleapis.com","root-1p":"https://clients6.google.com",sessionCache:{enabled:!0},transport:{isProxyShared:!0},xd3:"/static/proxy.html",developerKey:"AIzaSyCKSbrvQasunBoV16zDH9R33D88CeLr9gQ",auth:{useInterimAuth:!1}},report:{apis:["iframes\\..*","gadgets\\..*","gapi\\.appcirclepicker\\..*","gapi\\.client\\..*"],rate:1E-4}});

window.___jsl=window.___jsl||{};(window.___jsl.cd=window.___jsl.cd||[]).push({gwidget:{parsetags:"onload"},iframes:{":source:":"3p"},client:{rms:""}});
_.ba=function(a,c){return c};_.Mu=function(a,c){var f=a.split("."),g=_.D;f[0]in g||!g.execScript||g.execScript("var "+f[0]);for(var h;f.length&&(h=f.shift());)!f.length&&_.kf(c)?g[h]=c:g[h]?g=g[h]:g=g[h]={}};_.e=function(a,c){c=_.ba(a,c);_.Mu(a,c)};_.ta=window;_.ua=window.document;_.Ha=_.ta.location;_.Ia=/\[native code\]/;_.Ka=function(a,c,f){return a[c]=a[c]||f};_.r=function(){var a;if((a=Object.create)&&_.Ia.test(a))a=a(null);else{a={};for(var c in a)a[c]=void 0}return a};_.Qa=function(a,c){return Object.prototype.hasOwnProperty.call(a,c)};_.Sl=function(a,c){a=a||{};for(var f in a)_.Qa(a,f)&&(c[f]=a[f])};_.Sa=function(a,c){if(!a)throw Error(c||"");};_.Ua=_.Ka(_.ta,"gapi",{});
_.Wa=function(a,c,f){var g=new RegExp("([#].*&|[#])"+c+"=([^&#]*)","g");c=new RegExp("([?#].*&|[?#])"+c+"=([^&#]*)","g");if(a=a&&(g.exec(a)||c.exec(a)))try{f=(0,window.decodeURIComponent)(a[2])}catch(h){}return f};_.Za=function(a,c,f){_.Xa(a,c,f,"add","at")};_.Xa=function(a,c,f,g,h){if(a[g+"EventListener"])a[g+"EventListener"](c,f,!1);else if(a[h+"tachEvent"])a[h+"tachEvent"]("on"+c,f)};_.bb=_.Ka(_.ta,"___jsl",_.r());_.Ka(_.bb,"I",0);_.Ka(_.bb,"hel",10);var ya,za,Aa,Ba,Da,Ea;ya=function(a){var c=window.___jsl=window.___jsl||{};c[a]=c[a]||[];return c[a]};za=function(a){var c=window.___jsl=window.___jsl||{};c.cfg=!a&&c.cfg||{};return c.cfg};Aa=function(a){return"object"===typeof a&&/\[native code\]/.test(a.push)};Ba=function(a,c){if(c)for(var f in c)c.hasOwnProperty(f)&&(a[f]&&c[f]&&"object"===typeof a[f]&&"object"===typeof c[f]&&!Aa(a[f])&&!Aa(c[f])?Ba(a[f],c[f]):c[f]&&"object"===typeof c[f]?(a[f]=Aa(c[f])?[]:{},Ba(a[f],c[f])):a[f]=c[f])};
Da=function(a){if(a&&!/^\s+$/.test(a)){for(;0==a.charCodeAt(a.length-1);)a=a.substring(0,a.length-1);var c;try{c=window.JSON.parse(a)}catch(f){}if("object"===typeof c)return c;try{c=(new Function("return ("+a+"\n)"))()}catch(g){}if("object"===typeof c)return c;try{c=(new Function("return ({"+a+"\n})"))()}catch(h){}return"object"===typeof c?c:{}}};
Ea=function(a){za(!0);var c=window.___gcfg,f=ya("cu");if(c&&c!==window.___gu){var g={};Ba(g,c);f.push(g);window.___gu=c}var c=ya("cu"),h=window.document.scripts||window.document.getElementsByTagName("script")||[],g=[],l=[];l.push.apply(l,ya("us"));for(var n=0;n<h.length;++n)for(var q=h[n],t=0;t<l.length;++t)q.src&&0==q.src.indexOf(l[t])&&g.push(q);0==g.length&&0<h.length&&h[h.length-1].src&&g.push(h[h.length-1]);for(h=0;h<g.length;++h)g[h].getAttribute("gapi_processed")||(g[h].setAttribute("gapi_processed",
!0),(l=g[h])?(n=l.nodeType,l=3==n||4==n?l.nodeValue:l.textContent||l.innerText||l.innerHTML||""):l=void 0,(l=Da(l))&&c.push(l));a&&(g={},Ba(g,a),f.push(g));g=ya("cd");a=0;for(c=g.length;a<c;++a)Ba(za(),g[a]);g=ya("ci");a=0;for(c=g.length;a<c;++a)Ba(za(),g[a]);a=0;for(c=f.length;a<c;++a)Ba(za(),f[a])};_.P=function(a,c){if(!a)return za();for(var f=a.split("/"),g=za(),h=0,l=f.length;g&&"object"===typeof g&&h<l;++h)g=g[f[h]];return h===f.length&&void 0!==g?g:c}; _.Fa=function(a,c){var f=a;if("string"===typeof a){for(var g=f={},h=a.split("/"),l=0,n=h.length;l<n-1;++l)var q={},g=g[h[l]]=q;g[h[l]]=c}Ea(f)};
var Ga=function(){var a=window.__GOOGLEAPIS;a&&(a.googleapis&&!a["googleapis.config"]&&(a["googleapis.config"]=a.googleapis),_.Ka(_.bb,"ci",[]).push(a),window.__GOOGLEAPIS=void 0)};Ga&&Ga();Ea();_.e("gapi.config.get",_.P);_.e("gapi.config.update",_.Fa);
var ib,jb,Nb,sb,Fb,Hb,Kb,Na,Pa,Wb,Yb,qb,Ma,cc,Lc;_.cb=function(a){return!!a&&"object"===typeof a&&_.Ia.test(a.push)};_.eb=function(a,c,f){if(a){_.Sa(_.cb(a),"arrayForEach was called with a non array value");for(var g=0;g<a.length;g++)c.call(f,a[g],g)}};_.fb=function(a,c,f){if(a)if(_.cb(a))_.eb(a,c,f);else{_.Sa("object"===typeof a,"objectForEach was called with a non object value");f=f||a;for(var g in a)_.Qa(a,g)&&void 0!==a[g]&&c.call(f,a[g],g)}};
ib=function(a){a=a.sort();for(var c=[],f=void 0,g=0;g<a.length;g++){var h=a[g];h!=f&&c.push(h);f=h}return c};jb=function(){var a=[],c=_.bb.H;c&&_.fb(c,function(c){a.push.apply(a,c.L)});return ib(a)};_.kb=function(a){if(_.Ia.test(Object.keys))return Object.keys(a);var c=[],f;for(f in a)_.Qa(a,f)&&c.push(f);return c};Na={};Pa=0;Wb=_.r();Yb=_.r();qb=function(a){return"number"===typeof a&&a>Math.random()};
_.La=function(a){if("undefined"===typeof Nb){var c=_.P("report")||{},f=c.rate;Math.random();Hb=c.timeout||1E3;sb=c.host||"https://plus.google.com";Fb=c.path||"/_/widget/report";Nb=[];qb(f)&&(Nb=c.apis||[]);var c=c.apiRate||{},g;for(g in c)qb(c[g])&&Nb.push(g)}for(g=0;g<Nb.length;++g)if((new RegExp("^"+Nb[g]+"$")).test(a))return!0;return!1};Ma=function(a){delete Na[a]};
cc=function(){Kb&&(_.ta.clearTimeout(Kb),Kb=0);Kb=_.ta.setTimeout(function(){var a;a=window.document.location;a=a.protocol+"//"+a.host+a.pathname;var c=_.kb(Yb).join(":");a=[sb,Fb,"?api=",(0,window.encodeURIComponent)(c),"&url=",(0,window.encodeURIComponent)(a),"&loaded=",(0,window.encodeURIComponent)(jb().join(":"))].join("");Yb=_.r();var c=new window.Image,f=Pa++;Na[f]=c;c.onload=c.onerror=_.ma(Ma,f);c.src=a;Kb=0},Hb)};_.wc=function(a){Wb[a]||(Yb[a]=!0,Wb[a]=!0,cc())};Lc=_.ba; _.ba=function(a,c){var f=Lc(a,c);"function"===typeof c&&_.La(a)&&(f=function(f){_.wc(a);return c.apply(this,arguments)});return f};

_.e("gapi.plusone.render",_.pG);_.e("gapi.plusone.go",_.qG);
var Ed={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},Nd=function(a){var c,f,g;c=/[\"\\\x00-\x1f\x7f-\x9f]/g;if(void 0!==a){switch(typeof a){case "string":return c.test(a)?'"'+a.replace(c,function(a){var c=Ed[a];if(c)return c;c=a.charCodeAt();return"\\u00"+Math.floor(c/16).toString(16)+(c%16).toString(16)})+'"':'"'+a+'"';case "number":return(0,window.isFinite)(a)?String(a):"null";case "boolean":case "null":return String(a);case "object":if(!a)return"null";c=[];if("number"===
typeof a.length&&!a.propertyIsEnumerable("length")){g=a.length;for(f=0;f<g;f+=1)c.push(Nd(a[f])||"null");return"["+c.join(",")+"]"}for(f in a)!/___$/.test(f)&&_.Qa(a,f)&&"string"===typeof f&&(g=Nd(a[f]))&&c.push(Nd(f)+":"+g);return"{"+c.join(",")+"}"}return""}},me=function(a){if(!a)return!1;if(/^[\],:{}\s]*$/.test(a.replace(/\\["\\\/b-u]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))try{return eval("("+a+")")}catch(c){}return!1}, Qe=!1,af;try{Qe=!!window.JSON&&'["a"]'===window.JSON.stringify(["a"])&&"a"===window.JSON.parse('["a"]')[0]}catch(Ie){}af=function(a){try{return window.JSON.parse(a)}catch(c){return!1}};_.mf=Qe?window.JSON.stringify:Nd;_.of=Qe?af:me;

_.e("gadgets.json.stringify",_.mf);_.e("gadgets.json.parse",_.of);_.Wa(_.ta.location.href,"rpctoken")&&_.Za(_.ua,"unload",function(){});
_.Rb=window.gapi&&window.gapi.util||{};
_.Vo=function(a){if(!a)return"";a=a.split("#")[0].split("?")[0];a=a.toLowerCase();0==a.indexOf("//")&&(a=window.location.protocol+a);/^[\w\-]*:\/\//.test(a)||(a=window.location.href);var c=a.substring(a.indexOf("://")+3),f=c.indexOf("/");-1!=f&&(c=c.substring(0,f));a=a.substring(0,a.indexOf("://"));if("http"!==a&&"https"!==a&&"chrome-extension"!==a&&"file"!==a)throw Error("Pa");var f="",g=c.indexOf(":");if(-1!=g){var h=c.substring(g+1),c=c.substring(0,g);if("http"===a&&"80"!==h||"https"===a&&"443"!== h)f=":"+h}return a+"://"+c+f};

_.Rb.Pq=function(a){return _.Vo(a)};
_.Kd=window.console;_.kd=function(a){_.Kd&&_.Kd.log&&_.Kd.log(a)};_.ke=function(){};
_.R=_.R||{};
_.xd=function(a){for(var c=0;c<this.length;c++)if(this[c]===a)return c;return-1};_.Sc=function(a,c){var f=_.Ka(_.bb,"watt",_.r());_.Ka(f,a,c)};_.R=_.R||{};
(function(){var a=null;_.R.dc=function(c){var f="undefined"===typeof c;if(null!==a&&f)return a;var g={};c=c||window.location.href;var h=c.indexOf("?"),l=c.indexOf("#");c=(-1===l?c.substr(h+1):[c.substr(h+1,l-h-1),"&",c.substr(l+1)].join("")).split("&");for(var h=window.decodeURIComponent?window.decodeURIComponent:window.unescape,l=0,n=c.length;l<n;++l){var q=c[l].indexOf("=");if(-1!==q){var t=c[l].substring(0,q),q=c[l].substring(q+1),q=q.replace(/\+/g," ");try{g[t]=h(q)}catch(v){}}}f&&(a=g);return g}; _.R.dc()})();
_.e("gadgets.util.getUrlParameters",_.R.dc);
var jz=function(a){this.G=a;this.B=_.ta;this.qa=this.Ka;this.wc=/MSIE\s*[0-8](\D|$)/.test(window.navigator.userAgent);if(this.G.RE){this.B=this.G.kq(this.B,this.G.RE);a=this.B.document;var c=a.createElement("script");c.setAttribute("type","text/javascript");c.text="window.doPostMsg=function(w,s,o) {window.setTimeout(function(){w.postMessage(s,o);},0);};";a.body.appendChild(c);this.qa=this.B.doPostMsg}this.ha={};this.M={};a=(0,_.H)(this.Ld,this);_.Za(this.B,"message",a);_.Ka(_.bb,"RPMQ",[]).push(a);
this.B!=this.B.parent&&CC(this,this.B.parent,"{h:'"+(0,window.escape)(this.B.name)+"'}","*")},lz=function(a){var c=null;0===a.indexOf("{h:'")&&a.indexOf("'}")===a.length-2&&(c=(0,window.unescape)(a.substring(4,a.length-2)));return c},kz=function(a){if(!/^\s*{/.test(a))return!1;a=(0,_.of)(a);return null!==a&&"object"===typeof a&&!!a.g};
jz.prototype.Ld=function(a){var c=String(a.data);(0,_.ke)("gapi.rpc.receive("+Qz+"): "+(!c||512>=c.length?c:c.substr(0,512)+"... ("+c.length+" bytes)"));var f=0!==c.indexOf("!_");f||(c=c.substring(2));var g=kz(c);if(!f&&!g){if(!g&&(f=lz(c))){if(this.ha[f])this.ha[f]();else this.M[f]=1;return}var h=a.origin,l=this.G.zp;this.wc?_.ta.setTimeout(function(){l(c,h)},0):l(c,h)}};jz.prototype.sf=function(a,c){".."===a||this.M[a]?(c(),delete this.M[a]):this.ha[a]=c};
var CC=function(a,c,f,g){var h=kz(f)?"":"!_";(0,_.ke)("gapi.rpc.send("+Qz+"): "+(!f||512>=f.length?f:f.substr(0,512)+"... ("+f.length+" bytes)"));a.qa(c,h+f,g)};jz.prototype.Ka=function(a,c,f){a.postMessage(c,f)};jz.prototype.send=function(a,c,f){(a=this.G.kq(this.B,a))&&!a.closed&&CC(this,a,c,f)};
var Rz,Hz,pz,uz,Nz,Sz,Pz,Oz,Dl,Qz,Cz,Ez,mz,Gz,nz,oz,qz,rz,yz,xz,zz,Bz,Dz,Fz,tz,vz,Iz,Jz,Kz,Lz;Rz=0;Hz=[];pz={};uz={};Nz=_.R.dc;Sz=Nz();Pz=Sz.rpctoken;Oz=Sz.parent||_.ua.referrer;Dl=Sz.rly;Qz=Dl||(_.ta!==_.ta.top||_.ta.opener)&&_.ta.name||"..";Cz=null;Ez={};mz=function(){};Gz={send:mz,sf:mz};
nz=function(a,c){"/"==c.charAt(0)&&(c=c.substring(1),a=_.ta.top);for(var f=c.split("/");f.length;){var g;g=f.shift();"{"==g.charAt(0)&&"}"==g.charAt(g.length-1)&&(g=g.substring(1,g.length-1));if(".."===g)a=a==a.parent?a.opener:a.parent;else if(".."!==g&&a.frames[g]){if(a=a.frames[g],!("postMessage"in a))throw"Not a window";}else return null}return a};oz=function(a){return(a=pz[a])&&a.ve};
qz=function(a){if(a.f in{})return!1;var c=a.t,f=pz[a.r];a=a.origin;return f&&(f.ve===c||!f.ve&&!c)&&(a===f.origin||"*"===f.origin)};rz=function(a){var c=a.id.split("/"),f=c[c.length-1],g=a.origin;return function(a){var c=a.origin;return a.f==f&&(g==c||"*"==g)}};_.sz=function(a,c,f){a=tz(a);uz[a.name]={Ip:c,lf:a.lf,Us:f||qz};vz()};_.wz=function(a){delete uz[tz(a).name]};yz={};xz=function(a,c){var f=yz["_"+a];f&&f[1](this)&&f[0].call(this,c)};
zz=function(a){var c=a.c;if(!c)return mz;var f=a.r,g=a.g?"legacy__":"";return function(){var a=[].slice.call(arguments,0);a.unshift(f,g+"__cb",null,c);_.Az.apply(null,a)}};Bz=function(a){Cz=a};Dz=function(a){Ez[a]||(Ez[a]=_.ta.setTimeout(function(){Ez[a]=!1;Fz(a)},0))};Fz=function(a){var c=pz[a];if(c&&c.ready){var f=c.kj;for(c.kj=[];f.length;)Gz.send(a,(0,_.mf)(f.shift()),c.origin)}};tz=function(a){return 0===a.indexOf("legacy__")?{name:a.substring(8),lf:!0}:{name:a,lf:!1}};
vz=function(){for(var a=_.P("rpc/residenceSec")||60,c=(new Date).getTime()/1E3,f=0,g;g=Hz[f];++f){var h=g.qf;if(!h||0<a&&c-g.timestamp>a)Hz.splice(f,1),--f;else{var l=h.s,n=uz[l]||uz["*"];if(n)if(Hz.splice(f,1),--f,h.origin=g.origin,g=zz(h),h.callback=g,n.Us(h)){if("__cb"!==l&&!!n.lf!=!!h.g)break;h=n.Ip.apply(h,h.a);void 0!==h&&g(h)}else(0,_.ke)("gapi.rpc.rejected("+Qz+"): "+l)}}};Iz=function(a,c,f){Hz.push({qf:a,origin:c,timestamp:(new Date).getTime()/1E3});f||vz()};
Jz=function(a,c){var f=(0,_.of)(a);Iz(f,c,!1)};Kz=function(a){for(;a.length;)Iz(a.shift(),this.origin,!0);vz()};Lz=function(a){var c=!1;a=a.split("|");var f=a[0];0<=f.indexOf("/")&&(c=!0);return{id:f,origin:a[1]||"*",Ki:c}};
_.Mz=function(a,c,f,g){var h=Lz(a);g&&(_.ta.frames[h.id]=_.ta.frames[h.id]||g);a=h.id;if(!pz.hasOwnProperty(a)){f=f||null;g=h.origin;if(".."===a)g=_.Rb.Pq(Oz),f=f||Pz;else if(!h.Ki){var l=_.ua.getElementById(a);l&&(l=l.src,g=_.Rb.Pq(l),f=f||Nz(l).rpctoken)}"*"===h.origin&&g||(g=h.origin);pz[a]={ve:f,kj:[],origin:g,hs:c,xm:function(){var c=a;pz[c].ready=1;Fz(c)}};Gz.sf(a,pz[a].xm)}return pz[a].xm};
_.Az=function(a,c,f,g){a=a||"..";_.Mz(a);a=a.split("|",1)[0];var h=c,l=[].slice.call(arguments,3),n=f,q=Qz,t=Pz,v=pz[a],w=q,A=Lz(a);if(v&&".."!==a){if(A.Ki){if(!(t=pz[a].hs)){t=null;Cz?t=Cz.substring(1).split("/"):t=[Qz];for(var w=t.length-1,F=_.ta.parent;F!==_.ta.top;){var z=F.parent;if(!w--){for(var I=null,E=z.frames.length,K=0;K<E;++K)z.frames[K]==F&&(I=K);t.unshift("{"+I+"}")}F=z}t="/"+t.join("/")}w=t}else w=q="..";t=v.ve}n&&A?(v=qz,A.Ki&&(v=rz(A)),yz["_"+ ++Rz]=[n,v],A=Rz):A=null;l={s:h,f:q,
r:w,t:t,c:A,a:l};h=tz(h);l.s=h.name;l.g=h.lf;pz[a].kj.push(l);Dz(a)};if("function"===typeof _.ta.postMessage||"object"===typeof _.ta.postMessage)Gz=new jz({RE:Dl?"../"+Dl:null,zp:Jz,kq:nz,GP:Qz,$f:oz,$P:Bz}),_.sz("__cb",xz,function(){return!0}),_.sz("_processBatch",Kz,function(){return!0}),_.Mz("..");

_.Tc=_.Ka(_.bb,"rw",_.r());
var Uc=function(a,c){var f=_.Tc[a];f&&f.state<c&&(f.state=c)};var Vc=function(a){a=(a=_.Tc[a])?a.oid:void 0;if(a){var c=_.ua.getElementById(a);c&&c.parentNode.removeChild(c);delete _.Tc[a];Vc(a)}};_.bf=function(a){a=a.container;"string"===typeof a&&(a=window.document.getElementById(a));return a};_.gf=function(a){var c=a.clientWidth;return"position:absolute;top:-10000px;width:"+(c?c+"px":a.style.width||"300px")+";margin:0px;border-style:none;"};
_.hf=function(a,c){var f={},g=a.va(),h=c&&c.width,l=c&&c.height,n=c&&c.verticalAlign;n&&(f.verticalAlign=n);h||(h=g.width||a.width);l||(l=g.height||a.height);g.width=f.width=h;g.height=f.height=l;g=a.rb();h=a.Hh();Uc(h,2);a:{h=a.V();f=f||{};if(_.bb.oa){var q=g.id;if(q){l=(l=_.Tc[q])?l.state:void 0;if(1===l||4===l)break a;Vc(q)}}(l=h.nextSibling)&&l.getAttribute&&l.getAttribute("data-gapistub")&&(h.parentNode.removeChild(l),h.style.cssText="");var l=f.width,n=f.height,t=h.style;t.textIndent="0";t.margin=
"0";t.padding="0";t.background="transparent";t.borderStyle="none";t.cssFloat="none";t.styleFloat="none";t.lineHeight="normal";t.fontSize="1px";t.verticalAlign="baseline";h=h.style;h.display="inline-block";g=g.style;g.position="static";g.left=0;g.top=0;g.visibility="visible";l&&(h.width=g.width=l+"px");n&&(h.height=g.height=n+"px");f.verticalAlign&&(h.verticalAlign=f.verticalAlign);q&&Uc(q,3)}(q=c?c.title:null)&&a.rb().setAttribute("title",q)};_.jf=function(a){var c=a.V();c&&c.removeChild(a.rb())};
_.Ru=function(a){a.where=_.bf(a);var c=a.messageHandlers=a.messageHandlers||{},f=function(a){_.hf(this,a)};c._ready=f;c._renderstart=f;var g=a.onClose;a.onClose=function(a){g&&g.call(this,a);_.jf(this)};a.onCreate=function(a){a=a.rb();a.style.cssText=_.gf(a)}};

var ku=_.Rb=_.Rb||{};window.___jsl=window.___jsl||{};ku.xh={B:function(){return window.___jsl.bsh},Ok:function(){return window.___jsl.h},pj:function(a){window.___jsl.bsh=a},ys:function(a){window.___jsl.h=a}};
var uh,Bh;uh=/^https?:\/\/(?:\w|[\-\.])+\.google\.(?:\w|[\-:\.])+(?:\/[^\?\#]*)?\/u\/(\d)\//;Bh=/^https?:\/\/(?:\w|[\-\.])+\.google\.(?:\w|[\-:\.])+(?:\/[^\?\#]*)?\/b\/(\d{10,})\//;_.Dh=function(a){var c=_.P("googleapis.config/sessionIndex");null==c&&(c=window.__X_GOOG_AUTHUSER);if(null==c){var f=window.google;f&&(c=f.authuser)}null==c&&(a=a||window.location.href,c=_.Wa(a,"authuser")||null,null==c&&(c=(c=a.match(uh))?c[1]:null));return null==c?null:String(c)};
_.Rh=function(a){var c=_.P("googleapis.config/sessionDelegate");null==c&&(c=(a=(a||window.location.href).match(Bh))?a[1]:null);return null==c?null:String(c)};_.ci=function(a,c){var f=_.Dh(a)||c,g=_.Rh(a),h="";f&&(h+="u/"+f+"/");g&&(h+="b/"+g+"/");return h||null};

_.Ve=function(a){var c;if(c=_.P("enableMultilogin"))if(c=a("cookie_policy"))c=String(a("immediate")||""),a=String(a("prompt")||""),c=!("true"===c.toLowerCase()||"none"===a.toLowerCase());return c?!0:!1};
_.Xb=function(a,c,f){a=String(a);if(null!=(_.Wa(a,"authuser")||null)||null!=(_.Wa(a,"hd")||null))return a;c=_.Dh(c);if(f){var g=a,h=g.match(/^((https?:)?\/\/[^\/?#]*)?(\/[^\/?#]+)\/[0-9]+([\/][^?#]*)([?#].*)?$/);if(h&&h[0]){var l=h[1],n=h[4],q=h[5];h[3]=="/"+f&&(g=(l||"")+(n||"/")+(q||""))}if((h=g.match(/^(((https?:)?\/\/[^\/?#]*)([\/][^?#]*)?|([\/][^?#]*))([?#].*)?$/))&&h[0]){var l=h[2],t=h[4]||h[5],q=h[6];null!=c&&(g=(l||"")+"/"+f+"/"+(0,window.encodeURIComponent)(c)+(t||"/")+(q||""));return g}}null==
c?_.Ve(function(c){return _.Wa(a,c)||null})||(t=(0,window.encodeURIComponent)("authuser")+"=0"):t=c.match(/^([-a-z0-9]+[.])+[-a-z0-9]+$/)?[(0,window.encodeURIComponent)("authuser")+"=",(0,window.encodeURIComponent)(String(c)),"&"+(0,window.encodeURIComponent)("hd")+"=",(0,window.encodeURIComponent)(c)].join(""):["authuser=",(0,window.encodeURIComponent)(c)].join("");f=a.split("#");c=f[0].indexOf("?");0>c?f[0]=[f[0],"?",t].join(""):(g=[f[0]],c<f[0].length-1&&g.push("&"),g.push(t),f[0]=g.join("")); return g=f.join("#")};_.google.ko=_.Xb;_.google.mr=_.Dh;_.google.pP=_.Rh;_.google.qP=_.ci;

_.wb=function(){this.G=-1};
var xb=function(){this.G=-1;this.G=64;this.B=[];this.Ka=[];this.wc=[];this.M=[];this.M[0]=128;for(var a=1;a<this.G;++a)this.M[a]=0;this.qa=this.ha=0;this.reset()};_.J(xb,_.wb);xb.prototype.reset=function(){this.B[0]=1732584193;this.B[1]=4023233417;this.B[2]=2562383102;this.B[3]=271733878;this.B[4]=3285377520;this.qa=this.ha=0};
var tk=function(a,c,f){f||(f=0);var g=a.wc;if(_.fa(c))for(var h=0;16>h;h++)g[h]=c.charCodeAt(f)<<24|c.charCodeAt(f+1)<<16|c.charCodeAt(f+2)<<8|c.charCodeAt(f+3),f+=4;else for(h=0;16>h;h++)g[h]=c[f]<<24|c[f+1]<<16|c[f+2]<<8|c[f+3],f+=4;for(h=16;80>h;h++){var l=g[h-3]^g[h-8]^g[h-14]^g[h-16];g[h]=(l<<1|l>>>31)&4294967295}c=a.B[0];f=a.B[1];for(var n=a.B[2],q=a.B[3],t=a.B[4],v,h=0;80>h;h++)40>h?20>h?(l=q^f&(n^q),v=1518500249):(l=f^n^q,v=1859775393):60>h?(l=f&n|q&(f|n),v=2400959708):(l=f^n^q,v=3395469782),
l=(c<<5|c>>>27)+l+t+v+g[h]&4294967295,t=q,q=n,n=(f<<30|f>>>2)&4294967295,f=c,c=l;a.B[0]=a.B[0]+c&4294967295;a.B[1]=a.B[1]+f&4294967295;a.B[2]=a.B[2]+n&4294967295;a.B[3]=a.B[3]+q&4294967295;a.B[4]=a.B[4]+t&4294967295};
xb.prototype.update=function(a,c){if(null!=a){_.kf(c)||(c=a.length);for(var f=c-this.G,g=0,h=this.Ka,l=this.ha;g<c;){if(0==l)for(;g<=f;)tk(this,a,g),g+=this.G;if(_.fa(a))for(;g<c;){if(h[l]=a.charCodeAt(g),++l,++g,l==this.G){tk(this,h);l=0;break}}else for(;g<c;)if(h[l]=a[g],++l,++g,l==this.G){tk(this,h);l=0;break}}this.ha=l;this.qa+=c}};
xb.prototype.digest=function(){var a=[],c=8*this.qa;56>this.ha?this.update(this.M,56-this.ha):this.update(this.M,this.G-(this.ha-56));for(var f=this.G-1;56<=f;f--)this.Ka[f]=c&255,c/=256;tk(this,this.Ka);for(f=c=0;5>f;f++)for(var g=24;0<=g;g-=8)a[c]=this.B[f]>>g&255,++c;return a};
_.pi=function(){this.zx=new xb};_.k=_.pi.prototype;_.k.reset=function(){this.zx.reset()};_.k.AF=function(a){this.zx.update(a)};_.k.GC=function(){return this.zx.digest()};_.k.bB=function(a){a=(0,window.unescape)((0,window.encodeURIComponent)(a));for(var c=[],f=0,g=a.length;f<g;++f)c.push(a.charCodeAt(f));this.AF(c)};_.k.Of=function(){for(var a=this.GC(),c="",f=0;f<a.length;f++)c+="0123456789ABCDEF".charAt(Math.floor(a[f]/16))+"0123456789ABCDEF".charAt(a[f]%16);return c};

var Ib,Jb,Cb,Db,Ab,Bb,Gb,zb,Eb,Jb;_.Rl=function(){var a;Jb?(a=new _.ta.Uint32Array(1),Ib.getRandomValues(a),a=Number("0."+a[0])):(a=Ab,a+=(0,window.parseInt)(Gb.substr(0,20),16),Gb=Eb(Gb),a=a/(Bb+Math.pow(16,20)));return a};Ib=_.ta.crypto;Jb=!1;Cb=0;Db=0;Ab=1;Bb=0;Gb="";zb=function(a){a=a||_.ta.event;var c=a.screenX+a.clientX<<16,c=c+(a.screenY+a.clientY),c=c*((new Date).getTime()%1E6);Ab=Ab*c%Bb;0<Cb&&++Db==Cb&&_.Xa(_.ta,"mousemove",zb,"remove","de")};Eb=function(a){var c=new _.pi;c.bB(a);return c.Of()};
Jb=!!Ib&&"function"==typeof Ib.getRandomValues;Jb||(Bb=1E6*(window.screen.width*window.screen.width+window.screen.height),Gb=Eb(_.ua.cookie+"|"+_.ua.location+"|"+(new Date).getTime()+"|"+Math.random()),Cb=_.P("random/maxObserveMousemove")||0,0!=Cb&&_.Za(_.ta,"mousemove",zb));

var Tl,Wl,zm,Tm,Um,on,vn,wn,xn,zn,Cn,kc,mb,nb,ob,pb;Tl=/^([^?#]*)(\?([^#]*))?(\#(.*))?$/;_.Ul=/^https?:\/\/[^\/%\\?#\s]+\/[^\s]*$/i;Wl=function(a,c){var f=[];if(a)for(var g in a)if(_.Qa(a,g)&&null!=a[g]){var h=c?c(a[g]):a[g];f.push((0,window.encodeURIComponent)(g)+"="+(0,window.encodeURIComponent)(h))}return f};zm=function(a){return a.yc+(0<a.query.length?"?"+a.query.join("&"):"")+(0<a.Vf.length?"#"+a.Vf.join("&"):"")};
Tm=function(a){a=a.match(Tl);var c=_.r();c.yc=a[1];c.query=a[3]?[a[3]]:[];c.Vf=a[5]?[a[5]]:[];return c};Um=/'/g;on=/"/g;vn=/>/g;wn=/</g;xn=/&/g;zn=function(a){for(;a.firstChild;)a.removeChild(a.firstChild)};_.An=function(a,c){var f="";2E3<c.length&&(f=c.substring(2E3),c=c.substring(0,2E3));var g=a.createElement("div"),h=a.createElement("a");h.href=c;g.appendChild(h);g.innerHTML=g.innerHTML;c=String(g.firstChild.href);g.parentNode&&g.parentNode.removeChild(g);return c+f};
_.Bn=function(a,c,f,g){a=Tm(a);a.query.push.apply(a.query,Wl(c,g));a.Vf.push.apply(a.Vf,Wl(f,g));return zm(a)};Cn=function(a){return String(a).replace(xn,"&amp;").replace(wn,"&lt;").replace(vn,"&gt;").replace(on,"&quot;").replace(Um,"&#39;")};mb=function(){var a=_.bb.onl;if(!a){a=_.r();_.bb.onl=a;var c=_.r();a.e=function(a){var g=c[a];g&&(delete c[a],g())};a.a=function(a,g){c[a]=g};a.r=function(a){delete c[a]}}return a};nb=function(a,c){var f=c.onload;return"function"===typeof f?(mb().a(a,f),f):null}; ob=function(a){_.Sa(/^\w+$/.test(a),"Unsupported id - "+a);mb();return'onload="window.___jsl.onl.e(&#34;'+a+'&#34;)"'};pb=function(a){mb().r(a)};
var rb,ub,hc;_.vb={allowtransparency:"true",frameborder:"0",hspace:"0",marginheight:"0",marginwidth:"0",scrolling:"no",style:"",tabindex:"0",vspace:"0",width:"100%"};rb={allowtransparency:!0,onload:!0};ub=0;_.Dn=function(a,c){var f,g=0;do f=c.id||["I",ub++,"_",(new Date).getTime()].join("");while(a.getElementById(f)&&5>++g);_.Sa(5>g,"Error creating iframe id");return f};_.Ln=function(a,c){return a?c+"/"+a:""};
_.qa=function(a,c,f,g){var h={},l={};a.documentMode&&9>a.documentMode&&(h.hostiemode=a.documentMode);_.Sl(g.queryParams||{},h);_.Sl(g.fragmentParams||{},l);var n=g.connectWithQueryParams?h:l,q=g.pfname,t=_.r();t.id=f;t.parent=a.location.protocol+"//"+a.location.host;f=_.Wa(a.location.href,"parent");q=q||"";!q&&f&&(q=_.Ln(_.Wa(a.location.href,"id",""),_.Wa(a.location.href,"pfname","")));t.pfname=q;_.Sl(t,n);(t=_.Wa(c,"rpctoken")||h.rpctoken||l.rpctoken)||(t=n.rpctoken=g.rpctoken||String(Math.round(1E8*
_.Rl())));g.rpctoken=t;n=a.location.href;a=_.r();(t=_.Wa(n,"_bsh",_.bb.bsh))&&(a._bsh=t);(n=_.bb.dpo?_.bb.h:_.Wa(n,"jsh",_.bb.h))&&(a.jsh=n);g.hintInFragment?_.Sl(a,l):_.Sl(a,h);return _.Bn(c,h,l,g.paramsSerializer)};hc=function(a){_.Sa(!a||_.Ul.test(a),"Illegal url for new iframe - "+a)};
_.Pn=function(a,c,f,g,h){hc(f.src);var l,n=nb(g,f),q=n?ob(g):"";try{window.document.all&&(l=a.createElement('<iframe frameborder="'+Cn(String(f.frameborder))+'" scrolling="'+Cn(String(f.scrolling))+'" '+q+' name="'+Cn(String(f.name))+'"/>'))}catch(t){}finally{l||(l=a.createElement("iframe"),n&&(l.onload=function(){l.onload=null;n.call(this)},pb(g)))}for(var v in f)a=f[v],"style"===v&&"object"===typeof a?_.Sl(a,l.style):rb[v]||l.setAttribute(v,String(a));(v=h&&h.beforeNode||null)||h&&h.dontclear|| zn(c);c.insertBefore(l,v);l=v?v.previousSibling:c.lastChild;f.allowtransparency&&(l.allowTransparency=!0);return l};
var zd,jc;zd=/^:[\w]+$/;_.nc=/:([a-zA-Z_]+):/g;_.ql=function(){var a=_.Dh()||"0",c=_.Rh(),f=_.ci(void 0,a),g=!1===_.P("isLoggedIn"),h=g?"_/im/":"";h&&(f="");var l=_.P("iframes/:socialhost:"),n=_.P("iframes/:im_socialhost:");return kc={socialhost:l,ctx_socialhost:g?n:l,session_index:a,session_delegate:c,session_prefix:f,im_prefix:h}};jc=function(a,c){return _.ql()[c]||""};_.mc=function(a){return _.An(_.ua,a.replace(_.nc,jc))};
_.Un=function(a){var c=a;zd.test(a)&&(c=_.P("iframes/"+c.substring(1)+"/url"),_.Sa(!!c,"Unknown iframe url config for - "+a));return _.mc(c)};
_.tb=function(a,c,f){var g=f||{};f=g.attributes||{};_.Sa(!g.allowPost||!f.onload,"onload is not supported by post iframe");a=_.Un(a);f=c.ownerDocument||_.ua;var h=_.Dn(f,g);a=_.qa(f,a,h,g);var l=_.r();_.Sl(_.vb,l);_.Sl(g.attributes,l);l.name=l.id=h;l.src=a;g.eurl=a;if((g||{}).allowPost&&2E3<a.length){var n=Tm(a);l.src="";l["data-postorigin"]=a;a=_.Pn(f,c,l,h);var q;if(-1!=window.navigator.userAgent.indexOf("WebKit")){q=a.contentWindow.document;q.open();var l=q.createElement("div"),t={},v=h+"_inner";
t.name=v;t.src="";t.style="display:none";_.Pn(f,l,t,v,g)}l=(g=n.query[0])?g.split("&"):[];g=[];for(t=0;t<l.length;t++)v=l[t].split("=",2),g.push([(0,window.decodeURIComponent)(v[0]),(0,window.decodeURIComponent)(v[1])]);n.query=[];l=zm(n);_.Sa(_.Ul.test(l),"Invalid URL: "+l);n=f.createElement("form");n.action=l;n.method="POST";n.target=h;n.style.display="none";for(h=0;h<g.length;h++)l=f.createElement("input"),l.type="hidden",l.name=g[h][0],l.value=g[h][1],n.appendChild(l);c.appendChild(n);n.submit(); n.parentNode.removeChild(n);q&&q.close();c=a}else c=_.Pn(f,c,l,h,g);return c};

_.R=_.R||{};_.R.Dg=function(a,c,f){for(var g=[],h=2,l=arguments.length;h<l;++h)g.push(arguments[h]);return function(){for(var f=g.slice(),h=0,l=arguments.length;h<l;++h)f.push(arguments[h]);return c.apply(a,f)}};_.R.nf=function(a){var c,f,g={};for(c=0;f=a[c];++c)g[f]=f;return g};

_.R=_.R||{};
(function(){function a(a,c){return String.fromCharCode(c)}var c={0:!1,10:!0,13:!0,34:!0,39:!0,60:!0,62:!0,92:!0,8232:!0,8233:!0,65282:!0,65287:!0,65308:!0,65310:!0,65340:!0};_.R.escape=function(a,c){if(a){if("string"===typeof a)return _.R.Qf(a);if("Array"===typeof a)for(var h=0,l=a.length;h<l;++h)a[h]=_.R.escape(a[h]);else if("object"===typeof a&&c){h={};for(l in a)a.hasOwnProperty(l)&&(h[_.R.Qf(l)]=_.R.escape(a[l],!0));return h}}return a};_.R.Qf=function(a){if(!a)return a;for(var g=[],h,l,n=0,q= a.length;n<q;++n)h=a.charCodeAt(n),l=c[h],!0===l?g.push("&#",h,";"):!1!==l&&g.push(a.charAt(n));return g.join("")};_.R.su=function(c){return c?c.replace(/&#([0-9]+);/g,a):c}})();

_.Ob=_.Ob||{};_.Ob.Xk=function(){var a=0,c=0;window.self.innerHeight?(a=window.self.innerWidth,c=window.self.innerHeight):window.document.documentElement&&window.document.documentElement.clientHeight?(a=window.document.documentElement.clientWidth,c=window.document.documentElement.clientHeight):window.document.body&&(a=window.document.body.clientWidth,c=window.document.body.clientHeight);return{width:a,height:c}};

_.Ob=_.Ob||{};
(function(){function a(a,f){window.getComputedStyle(a,"").getPropertyValue(f).match(/^([0-9]+)/);return(0,window.parseInt)(RegExp.$1,10)}_.Ob.Cd=function(){var c=_.Ob.Xk().height,f=window.document.body,g=window.document.documentElement;if("CSS1Compat"===window.document.compatMode&&g.scrollHeight)return g.scrollHeight!==c?g.scrollHeight:g.offsetHeight;if(0<=window.navigator.userAgent.indexOf("AppleWebKit")){c=0;for(f=[window.document.body];0<f.length;){var h=f.shift(),g=h.childNodes;if("undefined"!==
typeof h.style){var l=h.style.overflowY;l||(l=(l=window.document.defaultView.getComputedStyle(h,null))?l.overflowY:null);if("visible"!=l&&"inherit"!=l&&(l=h.style.height,l||(l=(l=window.document.defaultView.getComputedStyle(h,null))?l.height:""),0<l.length&&"auto"!=l))continue}for(h=0;h<g.length;h++){l=g[h];if("undefined"!==typeof l.offsetTop&&"undefined"!==typeof l.offsetHeight)var n=l.offsetTop+l.offsetHeight+a(l,"margin-bottom"),c=Math.max(c,n);f.push(l)}}return c+a(window.document.body,"border-bottom")+ a(window.document.body,"margin-bottom")+a(window.document.body,"padding-bottom")}if(f&&g)return h=g.scrollHeight,l=g.offsetHeight,g.clientHeight!==l&&(h=f.scrollHeight,l=f.offsetHeight),h>c?h>l?h:l:h<l?h:l}})();

_.Mb=function(){function a(a,c){if(!(a<f)&&g)if(2===a&&g.warn)g.warn(c);else if(3===a&&g.error)try{g.error(c)}catch(n){}else g.log&&g.log(c)}var c=function(c){a(1,c)};_.Lb=function(c){a(2,c)};_.sa=function(c){a(3,c)};_.Fc=function(){};c.INFO=1;c.WARNING=2;c.NONE=4;var f=1,g=window.console?window.console:window.opera?window.opera.postError:void 0;return c}();

_.R=_.R||{};(function(){var a=[];_.R.du=function(c){a.push(c)};_.R.ku=function(){for(var c=0,f=a.length;c<f;++c)a[c]()}})();
_.Pb=function(){var a=window.gadgets&&window.gadgets.config&&window.gadgets.config.get;a&&_.Fa(a());return{register:function(a,f,g){g&&g(_.P())},get:function(a){return _.P(a)},update:function(a,f){if(f)throw"Config replacement is not supported";_.Fa(a)},kc:function(){}}}();
_.e("gadgets.config.register",_.Pb.register);_.e("gadgets.config.get",_.Pb.get);_.e("gadgets.config.init",_.Pb.kc);_.e("gadgets.config.update",_.Pb.update);
var yg,Qb;yg=function(){var a=_.ua.readyState;return"complete"===a||"interactive"===a&&-1==window.navigator.userAgent.indexOf("MSIE")};_.$g=function(a){if(yg())a();else{var c=!1,f=function(){if(!c)return c=!0,a.apply(this,arguments)};_.ta.addEventListener?(_.ta.addEventListener("load",f,!1),_.ta.addEventListener("DOMContentLoaded",f,!1)):_.ta.attachEvent&&(_.ta.attachEvent("onreadystatechange",function(){yg()&&f.apply(this,arguments)}),_.ta.attachEvent("onload",f))}};_.rh=function(a,c){if(!yg())try{a()}catch(f){}_.$g(c)}; Qb=Qb||{};Qb.Km=null;Qb.bm=null;Qb.pg=null;Qb.frameElement=null;
Qb=Qb||{};
Qb.Lj||(Qb.Lj=function(){function a(a){"undefined"!=typeof window.addEventListener?window.addEventListener("message",a,!1):"undefined"!=typeof window.attachEvent&&window.attachEvent("onmessage",a);window.___jsl=window.___jsl||{};var c=window.___jsl;c.RPMQ=c.RPMQ||[];c.RPMQ.push(a)}function c(a){var c=(0,_.of)(a.data);if(c&&c.f){(0,_.Fc)("gadgets.rpc.receive("+window.name+"): "+a.data);var g=_.T.$d(c.f);h&&("undefined"!==typeof a.origin?a.origin!==g:a.domain!==/^.+:\/\/([^:]+).*/.exec(g)[1])?_.sa("Invalid rpc message origin. "+
g+" vs "+(a.origin||"")):f(c,a.origin)}}var f,g,h=!0;return{Kk:function(){return"wpm"},B:function(){return!0},kc:function(l,n){_.Pb.register("rpc",null,function(a){"true"===String((a&&a.rpc||{}).disableForceSecure)&&(h=!1)});f=l;g=n;a(c);g("..",!0);return!0},sf:function(a){g(a,!0);return!0},call:function(a,c,f){var g=_.T.$d(a),h=_.T.dk(a);g?window.setTimeout(function(){var a=(0,_.mf)(f);(0,_.Fc)("gadgets.rpc.send("+window.name+"): "+a);h.postMessage(a,g)},0):".."!=a&&_.sa("No relay set (used as window.postMessage targetOrigin), cannot send cross-domain message"); return!0}}}());
Qb=Qb||{};
Qb.Uf||(Qb.Uf=function(){function a(a,c){Ca[c]=Ca[c]||function(){a.apply({},arguments)}}function c(){if(null===F&&window.document.body&&t){var a=t+"?cb="+Math.random()+"&origin="+S+"&jsl=1",f=window.document.createElement("div");f.style.height="1px";f.style.width="1px";a='<object height="1" width="1" id="___xpcswf" type="application/x-shockwave-flash"><param name="allowScriptAccess" value="always"></param><param name="movie" value="'+a+'"></param><embed type="application/x-shockwave-flash" allowScriptAccess="always" src="'+a+
'" height="1" width="1"></embed></object>';window.document.body.appendChild(f);f.innerHTML=a;F=f.firstChild}++E;null!==I&&(null!==F||50<=E)?window.clearTimeout(I):I=window.setTimeout(c,100)}function f(){ka[".."]||(q(".."),K++,50<=K&&null!==U?(window.clearTimeout(U),U=null):U=window.setTimeout(f,100))}function g(){if(null!==F&&F.setup)for(;0<z.length;){var a=z.shift(),c=a.Qs;F.setup(a.ve,".."===c?_.T.lh:c,".."===c?"INNER":"OUTER")}null!==I&&window.clearTimeout(I);I=null}function h(){ka[".."]||null!==
U||(U=window.setTimeout(f,100))}function l(a,c,f){c=_.T.$d(a);var g=_.T.Wd(a);F["sendMessage_"+(".."===a?_.T.lh:a)+"_"+g+"_"+(".."===a?"INNER":"OUTER")].call(F,(0,_.mf)(f),c);return!0}function n(a,c){var f=(0,_.of)(a),g=f._scr;g?(A(g,!0),ka[g]=!0,".."!==g&&q(g,!0)):window.setTimeout(function(){w(f,c)},0)}function q(a,c){var f=_.T.lh,g={};g._scr=c?"..":f;g._pnt=f;l(a,0,g)}var t=null,v=!1,w=null,A=null,F=null,z=[],I=null,E=0,K=0,U=null,ka={},S=window.location.protocol+"//"+window.location.host,Ca;window.___jsl=
window.___jsl||{};Ca=window.___jsl._fm={};_.Pb.register("rpc",null,function(a){v&&(t=a&&a.rpc&&a.rpc.commSwf||"//xpc.googleusercontent.com/gadgets/xpc.swf")});a(g,"ready");a(h,"setupDone");a(n,"receiveMessage");return{Kk:function(){return"flash"},B:function(){return!0},kc:function(a,c){w=a;A=c;return v=!0},sf:function(a,f){z.push({ve:f,Qs:a});null===F&&null===I&&(I=window.setTimeout(c,100));return!0},call:l,Vo:n,G:g,ha:h}}());
if(window.gadgets&&window.gadgets.rpc)"undefined"!=typeof _.T&&_.T||(_.T=window.gadgets.rpc,_.T.config=_.T.config,_.T.register=_.T.register,_.T.unregister=_.T.unregister,_.T.Am=_.T.registerDefault,_.T.aB=_.T.unregisterDefault,_.T.Fk=_.T.forceParentVerifiable,_.T.call=_.T.call,_.T.Rk=_.T.getRelayUrl,_.T.Xg=_.T.setRelayUrl,_.T.Wg=_.T.setAuthToken,_.T.tf=_.T.setupReceiver,_.T.Wd=_.T.getAuthToken,_.T.mj=_.T.removeReceiver,_.T.Qk=_.T.getRelayChannel,_.T.ym=_.T.receive,_.T.zm=_.T.receiveSameDomain,_.T.Pq=
_.T.getOrigin,_.T.$d=_.T.getTargetOrigin,_.T.dk=_.T._getTargetWin,_.T.Uo=_.T._parseSiblingId);else{_.T=function(){function a(a,c){if(!Ta[a]){var f=fc;c||(f=te);Ta[a]=f;for(var g=Ya[a]||[],h=0;h<g.length;++h){var l=g[h];l.t=ka[a];f.call(a,l.f,l)}Ya[a]=[]}}function c(){function a(){Go=!0}Ho||("undefined"!=typeof window.addEventListener?window.addEventListener("unload",a,!1):"undefined"!=typeof window.attachEvent&&window.attachEvent("onunload",a),Ho=!0)}function f(a,f,g,h,l){ka[f]&&ka[f]===g||(_.sa("Invalid gadgets.rpc token. "+
ka[f]+" vs "+g),ok(f,2));l.onunload=function(){ja[f]&&!Go&&(ok(f,1),_.T.mj(f))};c();h=(0,_.of)((0,window.decodeURIComponent)(h))}function g(c,f){if(c&&"string"===typeof c.s&&"string"===typeof c.f&&c.a instanceof Array)if(ka[c.f]&&ka[c.f]!==c.t&&(_.sa("Invalid gadgets.rpc token. "+ka[c.f]+" vs "+c.t),ok(c.f,2)),"__ack"===c.s)window.setTimeout(function(){a(c.f,!0)},0);else{c.c&&(c.callback=function(a){_.T.call(c.f,(c.g?"legacy__":"")+"__cb",null,c.c,a)});if(f){var g=h(f);c.origin=f;var l=c.r,n;try{n=
h(l)}catch(q){}l&&n==g||(l=f);c.referer=l}g=(E[c.s]||E[""]).apply(c,c.a);c.c&&"undefined"!==typeof g&&_.T.call(c.f,"__cb",null,c.c,g)}}function h(a){if(!a)return"";a=a.split("#")[0].split("?")[0];a=a.toLowerCase();0==a.indexOf("//")&&(a=window.location.protocol+a);-1==a.indexOf("://")&&(a=window.location.protocol+"//"+a);var c=a.substring(a.indexOf("://")+3),f=c.indexOf("/");-1!=f&&(c=c.substring(0,f));a=a.substring(0,a.indexOf("://"));if("http"!==a&&"https"!==a&&"chrome-extension"!==a&&"file"!==
a)throw Error("Pa");var f="",g=c.indexOf(":");if(-1!=g){var h=c.substring(g+1),c=c.substring(0,g);if("http"===a&&"80"!==h||"https"===a&&"443"!==h)f=":"+h}return a+"://"+c+f}function l(a){if("/"==a.charAt(0)){var c=a.indexOf("|");return{id:0<c?a.substring(1,c):a.substring(1),origin:0<c?a.substring(c+1):null}}return null}function n(a){if("undefined"===typeof a||".."===a)return window.parent;var c=l(a);if(c)return window.top.frames[c.id];a=String(a);return(c=window.frames[a])?c:(c=window.document.getElementById(a))&&
c.contentWindow?c.contentWindow:null}function q(a,c){if(!0!==ja[a]){"undefined"===typeof ja[a]&&(ja[a]=0);var f=n(a);".."!==a&&null==f||!0!==fc.sf(a,c)?!0!==ja[a]&&10>ja[a]++?window.setTimeout(function(){q(a,c)},500):(Ta[a]=te,ja[a]=!0):ja[a]=!0}}function t(a){(a=K[a])&&"/"===a.substring(0,1)&&(a="/"===a.substring(1,2)?window.document.location.protocol+a:window.document.location.protocol+"//"+window.document.location.host+a);return a}function v(a,c,f){c&&!/http(s)?:\/\/.+/.test(c)&&(0==c.indexOf("//")?
c=window.location.protocol+c:"/"==c.charAt(0)?c=window.location.protocol+"//"+window.location.host+c:-1==c.indexOf("://")&&(c=window.location.protocol+"//"+c));K[a]=c;"undefined"!==typeof f&&(U[a]=!!f)}function w(a,c){c=c||"";ka[a]=String(c);q(a,c)}function A(a){a=(a.passReferrer||"").split(":",2);If=a[0]||"none";wh=a[1]||"origin"}function F(c){"true"===String(c.useLegacyProtocol)&&(fc=Qb.pg||te,fc.kc(g,a))}function z(a,c){function f(g){g=g&&g.rpc||{};A(g);var l=g.parentRelayUrl||"",l=h(rw.parent||
c)+l;v("..",l,"true"===String(g.useLegacyProtocol));F(g);w("..",a)}!rw.parent&&c?f({}):_.Pb.register("rpc",null,f)}function I(a,c,f){if(".."===a)z(f||rw.rpctoken||rw.ifpctok||"",c);else a:{var g=null;if("/"!=a.charAt(0)){if(!_.R)break a;g=window.document.getElementById(a);if(!g)throw Error("h`"+a);}g=g&&g.src;c=c||_.T.Pq(g);v(a,c);c=_.R.dc(g);w(a,f||c.rpctoken)}}var E={},K={},U={},ka={},S=0,Ca={},ja={},rw={},Ta={},Ya={},If=null,wh=null,nk=window.top!==window.self,Yw=window.name,ok=function(){},pk=
window.console,Io=pk&&pk.log&&function(a){pk.log(a)}||function(){},te=function(){function a(c){return function(){Io(c+": call ignored")}}return{getCode:function(){return"noop"},isParentVerifiable:function(){return!0},init:a("init"),setup:a("setup"),call:a("call")}}();_.R&&(rw=_.R.dc());var Go=!1,Ho=!1,fc=function(){if("flash"==rw.rpctx)return Qb.Uf;if("rmr"==rw.rpctx)return Qb.Km;var a="function"===typeof window.postMessage?Qb.Lj:"object"===typeof window.postMessage?Qb.Lj:window.ActiveXObject?Qb.Uf?
Qb.Uf:Qb.bm?Qb.bm:Qb.pg:0<window.navigator.userAgent.indexOf("WebKit")?Qb.Km:"Gecko"===window.navigator.product?Qb.frameElement:Qb.pg;a||(a=te);return a}();E[""]=function(){Io("Unknown RPC service: "+this.s)};E.__cb=function(a,c){var f=Ca[a];f&&(delete Ca[a],f.call(this,c))};return{config:function(a){"function"===typeof a.Mm&&(ok=a.Mm)},register:function(a,c){if("__cb"===a||"__ack"===a)throw Error("i");if(""===a)throw Error("j");E[a]=c},unregister:function(a){if("__cb"===a||"__ack"===a)throw Error("k");
if(""===a)throw Error("l");delete E[a]},Am:function(a){E[""]=a},aB:function(){delete E[""]},Fk:function(){},call:function(a,c,f,g){a=a||"..";var h="..";".."===a?h=Yw:"/"==a.charAt(0)&&(h=_.T.Pq(window.location.href),h="/"+Yw+(h?"|"+h:""));++S;f&&(Ca[S]=f);var n={s:c,f:h,c:f?S:0,a:Array.prototype.slice.call(arguments,3),t:ka[a],l:!!U[a]},q;a:if("bidir"===If||"c2p"===If&&".."===a||"p2c"===If&&".."!==a){q=window.location.href;var t="?";if("query"===wh)t="#";else if("hash"===wh)break a;t=q.lastIndexOf(t);
t=-1===t?q.length:t;q=q.substring(0,t)}else q=null;q&&(n.r=q);if(".."===a||null!=l(a)||window.document.getElementById(a))(q=Ta[a])||null===l(a)||(q=fc),0===c.indexOf("legacy__")&&(q=fc,n.s=c.substring(8),n.c=n.c?n.c:S),n.g=!0,n.r=h,q?(U[a]&&(q=Qb.pg),!1===q.call(a,h,n)&&(Ta[a]=te,fc.call(a,h,n))):Ya[a]?Ya[a].push(n):Ya[a]=[n]},Rk:t,Xg:v,Wg:w,tf:I,Wd:function(a){return ka[a]},mj:function(a){delete K[a];delete U[a];delete ka[a];delete ja[a];delete Ta[a]},Qk:function(){return fc.Kk()},ym:function(a,
c){4<a.length?fc.Vo(a,g):f.apply(null,a.concat(c))},zm:function(a){a.a=Array.prototype.slice.call(a.a);window.setTimeout(function(){g(a)},0)},Pq:h,$d:function(a){var c=null,f=t(a);f?c=f:(f=l(a))?c=f.origin:c=".."==a?rw.parent:window.document.getElementById(a).src;return h(c)},kc:function(){!1===fc.kc(g,a)&&(fc=te);nk?I(".."):_.Pb.register("rpc",null,function(a){a=a.rpc||{};A(a);F(a)})},dk:n,Uo:l,B:"__ack",lh:Yw||"..",M:0,ha:1,G:2}}();_.T.kc()};
_.T.config({Mm:function(a){throw Error("m`"+a);}});_.Fc=_.ke;_.e("gadgets.rpc.config",_.T.config);_.e("gadgets.rpc.register",_.T.register);_.e("gadgets.rpc.unregister",_.T.unregister);_.e("gadgets.rpc.registerDefault",_.T.Am);_.e("gadgets.rpc.unregisterDefault",_.T.aB);_.e("gadgets.rpc.forceParentVerifiable",_.T.Fk);_.e("gadgets.rpc.call",_.T.call);_.e("gadgets.rpc.getRelayUrl",_.T.Rk);_.e("gadgets.rpc.setRelayUrl",_.T.Xg);_.e("gadgets.rpc.setAuthToken",_.T.Wg);_.e("gadgets.rpc.setupReceiver",_.T.tf);_.e("gadgets.rpc.getAuthToken",_.T.Wd); _.e("gadgets.rpc.removeReceiver",_.T.mj);_.e("gadgets.rpc.getRelayChannel",_.T.Qk);_.e("gadgets.rpc.receive",_.T.ym);_.e("gadgets.rpc.receiveSameDomain",_.T.zm);_.e("gadgets.rpc.getOrigin",_.T.Pq);_.e("gadgets.rpc.getTargetOrigin",_.T.$d);

_.R=_.R||{};_.R.Ee=function(a,c,f,g){"undefined"!=typeof a.addEventListener?a.addEventListener(c,f,g):"undefined"!=typeof a.attachEvent?a.attachEvent("on"+c,f):_.Lb("cannot attachBrowserEvent: "+c)};_.R.Vr=function(a){var c=window;c.removeEventListener?c.removeEventListener("mousemove",a,!1):c.detachEvent?c.detachEvent("onmousemove",a):_.Lb("cannot removeBrowserEvent: mousemove")};

_.Tb=function(){function a(){h[0]=1732584193;h[1]=4023233417;h[2]=2562383102;h[3]=271733878;h[4]=3285377520;w=v=0}function c(a){for(var c=n,f=0;64>f;f+=4)c[f/4]=a[f]<<24|a[f+1]<<16|a[f+2]<<8|a[f+3];for(f=16;80>f;f++)a=c[f-3]^c[f-8]^c[f-14]^c[f-16],c[f]=(a<<1|a>>>31)&4294967295;a=h[0];for(var g=h[1],l=h[2],q=h[3],t=h[4],v,w,f=0;80>f;f++)40>f?20>f?(v=q^g&(l^q),w=1518500249):(v=g^l^q,w=1859775393):60>f?(v=g&l|q&(g|l),w=2400959708):(v=g^l^q,w=3395469782),v=((a<<5|a>>>27)&4294967295)+v+t+w+c[f]&4294967295,
t=q,q=l,l=(g<<30|g>>>2)&4294967295,g=a,a=v;h[0]=h[0]+a&4294967295;h[1]=h[1]+g&4294967295;h[2]=h[2]+l&4294967295;h[3]=h[3]+q&4294967295;h[4]=h[4]+t&4294967295}function f(a,f){if("string"===typeof a){a=(0,window.unescape)((0,window.encodeURIComponent)(a));for(var g=[],h=0,n=a.length;h<n;++h)g.push(a.charCodeAt(h));a=g}f||(f=a.length);g=0;if(0==v)for(;g+64<f;)c(a.slice(g,g+64)),g+=64,w+=64;for(;g<f;)if(l[v++]=a[g++],w++,64==v)for(v=0,c(l);g+64<f;)c(a.slice(g,g+64)),g+=64,w+=64}function g(){var a=[],
g=8*w;56>v?f(q,56-v):f(q,64-(v-56));for(var n=63;56<=n;n--)l[n]=g&255,g>>>=8;c(l);for(n=g=0;5>n;n++)for(var t=24;0<=t;t-=8)a[g++]=h[n]>>t&255;return a}for(var h=[],l=[],n=[],q=[128],t=1;64>t;++t)q[t]=0;var v,w;a();return{reset:a,update:f,digest:g,Of:function(){for(var a=g(),c="",f=0;f<a.length;f++)c+="0123456789ABCDEF".charAt(Math.floor(a[f]/16))+"0123456789ABCDEF".charAt(a[f]%16);return c}}};
_.Vb=function(){function a(a){var c=_.Tb();c.update(a);return c.Of()}var c=window.crypto;if(c&&"function"==typeof c.getRandomValues)return function(){var a=new window.Uint32Array(1);c.getRandomValues(a);return Number("0."+a[0])};var f=_.P("random/maxObserveMousemove");null==f&&(f=-1);var g=0,h=Math.random(),l=1,n=1E6*(window.screen.width*window.screen.width+window.screen.height),q=function(a){a=a||window.event;var c=a.screenX+a.clientX<<16,c=c+(a.screenY+a.clientY),c=c*((new Date).getTime()%1E6);
l=l*c%n;0<f&&++g==f&&_.R.Vr(q)};0!=f&&_.R.Ee(window,"mousemove",q,!1);var t=a(window.document.cookie+"|"+window.document.location+"|"+(new Date).getTime()+"|"+h);return function(){var c=l,c=c+(0,window.parseInt)(t.substr(0,20),16);t=a(t);return c/(n+Math.pow(16,20))}}();
_.e("shindig.random",_.Vb);
_.V={};_.Sb={};window.iframer=_.Sb;
_.V.J=_.V.J||{};_.V.J.jp=function(a){try{return!!a.document}catch(c){}return!1};_.V.J.Uk=function(a){var c=a.parent;return a!=c&&_.V.J.jp(c)?_.V.J.Uk(c):a};_.V.J.St=function(a){var c=a.userAgent||"";a=a.product||"";return 0!=c.indexOf("Opera")&&-1==c.indexOf("WebKit")&&"Gecko"==a&&0<c.indexOf("rv:1.")};

var gc=function(){_.V.Kl++;return["I",_.V.Kl,"_",(new Date).getTime()].join("")},ec;var ic=function(a){return a instanceof Array?a.join(","):a instanceof Object?(0,_.mf)(a):a};var lc=function(){};var oc=function(a){a&&a.match(pc)&&_.Fa("googleapis.config/gcv",a)};var qc=function(a){_.Rb.xh.ys(a)};var rc=function(a){_.Rb.xh.pj(a)};_.sc=function(a,c){var f=c||{},g;for(g in a)a.hasOwnProperty(g)&&(f[g]=a[g]);return f};
_.tc=function(a,c,f,g,h){var l=[],n;for(n in a)if(a.hasOwnProperty(n)){var q=c,t=f,v=a[n],w=g,A=Zb(n);A[q]=A[q]||{};w=_.R.Dg(w,v);v._iframe_wrapped_rpc_&&(w._iframe_wrapped_rpc_=!0);A[q][t]=w;l.push(n)}if(h)for(n in _.V.bo)_.V.bo.hasOwnProperty(n)&&l.push(n);return l.join(",")};var uc=function(a,c,f){var g={};if(a&&a._methods){a=a._methods.split(",");for(var h=0;h<a.length;h++){var l=a[h];g[l]=$b(l,c,f)}}return g};
var vc=function(a){if(a&&a.disableMultiLevelParentRelay)a=!1;else{var c;if(c=_.Sb&&_.Sb._open&&"inline"!=a.style&&!0!==a.inline)a=a.container,c=!(a&&("string"==typeof a&&window.document.getElementById(a)||window.document==(a.ownerDocument||a.document)));a=c}return a};var eo=function(a,c){var f={},g=c.params||{},h;for(h in a)"#"==h.charAt(0)&&(f[h.substring(1)]=a[h]),0==h.indexOf("fr-")&&(f[h.substring(3)]=a[h]),"#"==g[h]&&(f[h]=a[h]);for(var l in f)delete a["fr-"+l],delete a["#"+l],delete a[l];return f};
var xc=function(a){if(":"==a.charAt(0)){var c=_.P("iframes/"+a.substring(1));a={};_.Sl(c,a);(c=a.url)&&(a.url=_.mc(c));a.params||(a.params={});return a}return{url:_.mc(a)}};var yc=function(a){function c(){}c.prototype=zc.prototype;a.prototype=new c};var Mc=function(a){return _.V.yf[a]};var Nc=function(a,c){_.V.yf[a]=c};var Oc=function(a){a=a||{};"auto"===a.height&&(a.height=_.Ob.Cd());var c=window&&Pc&&Pc.ma();c?c.Gm(a.width||0,a.height||0):_.Sb&&_.Sb._resizeMe&&_.Sb._resizeMe(a)};var Qc=function(a){oc(a)};
ec=function(a){var c=_.Wa(a.location.href,"urlindex");if(c=_.Ka(_.bb,"fUrl",[])[c]){var f=a.location.hash,c=c+(/#/.test(c)?f.replace(/^#/,"&"):f);a.location.replace(c)}};_.Qu=function(){return _.ta.location.origin||_.ta.location.protocol+"//"+_.ta.location.host};
if(window.ToolbarApi)Pc=window.ToolbarApi,Pc.ma=window.ToolbarApi.getInstance,Pc.prototype=window.ToolbarApi.prototype,_.k=Pc.prototype,_.k.openWindow=Pc.prototype.openWindow,_.k.rk=Pc.prototype.closeWindow,_.k.Tm=Pc.prototype.setOnCloseHandler,_.k.jj=Pc.prototype.canClosePopup,_.k.Gm=Pc.prototype.resizeWindow;else{var Pc=function(){},Rc=null;Pc.ma=function(){!Rc&&window.external&&window.external.GTB_IsToolbar&&(Rc=new Pc);return Rc};_.k=Pc.prototype;_.k.openWindow=function(a){return window.external.GTB_OpenPopup&&
window.external.GTB_OpenPopup(a)};_.k.rk=function(a){window.external.GTB_ClosePopupWindow&&window.external.GTB_ClosePopupWindow(a)};_.k.Tm=function(a,c){window.external.GTB_SetOnCloseHandler&&window.external.GTB_SetOnCloseHandler(a,c)};_.k.jj=function(a){return window.external.GTB_CanClosePopup&&window.external.GTB_CanClosePopup(a)};_.k.Gm=function(a,c){return window.external.GTB_ResizeWindow&&window.external.GTB_ResizeWindow(a,c)};window.ToolbarApi=Pc;window.ToolbarApi.getInstance=Pc.ma};
var bc=function(){_.T.register("_noop_echo",function(){this.callback(_.V.UI(_.V.Uc[this.f]))})},ac=function(){window.setTimeout(function(){_.T.call("..","_noop_echo",_.V.Lr)},0)},$b=function(a,c,f){var g=function(g){var l=Array.prototype.slice.call(arguments,0),n=l[l.length-1];if("function"===typeof n){var q=n;l.pop()}l.unshift(c,a,q,f);_.T.call.apply(_.T,l)};g._iframe_wrapped_rpc_=!0;return g},Zb=function(a){_.V.Rg[a]||(_.V.Rg[a]={},_.T.register(a,function(c,f){var g=this.f;if(!("string"!=typeof c||
c in{}||g in{})){var h=this.callback,l=_.V.Rg[a][g],n;l&&Object.hasOwnProperty.call(l,c)?n=l[c]:Object.hasOwnProperty.call(_.V.bo,a)&&(n=_.V.bo[a]);if(n)return g=Array.prototype.slice.call(arguments,1),n._iframe_wrapped_rpc_&&h&&g.push(h),n.apply({},g)}_.sa(['Unregistered call in window "',window.name,'" for method "',a,'", via proxyId "',c,'" from frame "',g,'".'].join(""));return null}));return _.V.Rg[a]};
_.V.ip=function(a,c,f){var g=Array.prototype.slice.call(arguments);_.V.Pk(function(a){a.sameOrigin&&(g.unshift("/"+a.claimedOpenerId+"|"+window.location.protocol+"//"+window.location.host),_.T.call.apply(_.T,g))})};_.V.Sr=function(a,c){_.T.register(a,c)};
var pc=/^[-_.0-9A-Za-z]+$/,Hc={open:"open",onready:"ready",close:"close",onresize:"resize",onOpen:"open",onReady:"ready",onClose:"close",onResize:"resize",onRenderStart:"renderstart"},Jc={onBeforeParentOpen:"beforeparentopen"},Cc={onOpen:function(a){var c=a.va();a.Pa(c.container||c.element);return a},onClose:function(a){a.remove()}};_.V.Wp=function(a){var c=_.r();_.Sl(_.vb,c);_.Sl(a,c);return c};
var zc=function(a,c,f,g,h,l,n,q){this.config=xc(a);this.openParams=this.ss=c||{};this.params=f||{};this.methods=g;this.qy=!1;Ac(this,c.style);this.Aq={};Bc(this,function(){var a;(a=this.ss.style)&&_.V.yf[a]?a=_.V.yf[a]:a?(_.Lb(['Missing handler for style "',a,'". Continuing with default handler.'].join("")),a=null):a=Cc;if(a){var c;if("function"===typeof a)c=a(this);else{var f={};for(c in a){var g=a[c];f[c]="function"===typeof g?_.R.Dg(a,g,this):g}c=f}for(var n in h)a=c[n],"function"===typeof a&&
Dc(this,h[n],_.R.Dg(c,a))}l&&Dc(this,"close",l)});this.ya=this.ac=n;this.dj=(q||[]).slice();n&&this.dj.unshift(n.Hh())};zc.prototype.va=function(){return this.ss};zc.prototype.tb=function(){return this.params};zc.prototype.bi=function(){return this.methods};zc.prototype.ci=function(){return this.ya};var Ac=function(a,c){if(!a.qy){var f=c&&!_.V.yf[c]&&_.V.XR[c];f?(a.kz=[],f(function(){a.qy=!0;for(var c=0,f=a.kz.length;c<f;++c)a.kz[c].call(a)})):a.qy=!0}},Bc=function(a,c){a.qy?c.call(a):a.kz.push(c)};
zc.prototype.ea=function(a,c){Bc(this,function(){Dc(this,a,c)})};var Dc=function(a,c,f){a.Aq[c]=a.Aq[c]||[];a.Aq[c].push(f)};zc.prototype.Ub=function(a,c){Bc(this,function(){var f=this.Aq[a];if(f)for(var g=0,h=f.length;g<h;++g)if(f[g]===c){f.splice(g,1);break}})};
zc.prototype.Pb=function(a,c){var f,g=this.Aq[a];if(g)for(var h=Array.prototype.slice.call(arguments,1),l=0,n=g.length;l<n;++l)try{f=g[l].apply({},h)}catch(q){_.sa(['Exception when calling callback "',a,'" with exception "',q.name,": ",q.message,'".'].join(""))}return f};
var Ec=function(a){return"number"==typeof a?{value:a,od:a+"px"}:"100%"==a?{value:100,od:"100%",Ul:!0}:null},Gc=function(a,c,f,g,h,l,n){zc.call(this,a,c,f,g,Hc,h,l,n);this.id=c.id||gc();this.G=c.rpctoken&&String(c.rpctoken)||Math.round(1E9*(0,_.Vb)());this.M=eo(this.params,this.config);this.Cz={};Bc(this,function(){this.Pb("open");_.sc(this.Cz,this)})};yc(Gc);_.k=Gc.prototype;
_.k.Pa=function(a,c){if(!this.config.url)return _.sa("Cannot open iframe, empty URL."),this;var f=this.id;_.V.Uc[f]=this;var g=_.sc(this.methods);g._ready=this.Jg;g._close=this.close;g._open=this.HB;g._resizeMe=this.Ug;g._renderstart=this.PA;var h=this.M;this.G&&(h.rpctoken=this.G);h._methods=_.tc(g,f,"",this,!0);this.ha=a="string"===typeof a?window.document.getElementById(a):a;g={};g.id=f;if(c){g.attributes=c;var l=c.style;if("string"===typeof l){var n;if(l){n=[];for(var l=l.split(";"),q=0,t=l.length;q<
t;++q){var v=l[q];if(0!=v.length||q+1!=t)v=v.split(":"),2==v.length&&v[0].match(/^[ a-zA-Z_-]+$/)&&v[1].match(/^[ +.%0-9a-zA-Z_-]+$/)?n.push(v.join(":")):_.sa(['Iframe style "',l[q],'" not allowed.'].join(""))}n=n.join(";")}else n="";c.style=n}}this.va().allowPost&&(g.allowPost=!0);g.queryParams=this.params;g.fragmentParams=h;g.paramsSerializer=ic;this.B=_.tb(this.config.url,a,g);h=this.B.getAttribute("data-postorigin")||this.B.src;_.V.Uc[f]=this;_.T.Wg(this.id,this.G);_.T.Xg(this.id,h);return this};
_.k.fg=function(a,c){this.Cz[a]=c};_.k.Hh=function(){return this.id};_.k.rb=function(){return this.B};_.k.V=function(){return this.ha};_.k.qc=function(a){this.ha=a};_.k.Jg=function(a){var c=uc(a,this.id,"");this.ya&&"function"==typeof this.methods._ready&&(a._methods=_.tc(c,this.ya.Hh(),this.id,this,!1),this.methods._ready(a));_.sc(a,this);_.sc(c,this);this.Pb("ready",a)};_.k.PA=function(a){this.Pb("renderstart",a)};_.k.close=function(a){a=this.Pb("close",a);delete _.V.Uc[this.id];return a};
_.k.remove=function(){var a=window.document.getElementById(this.id);a&&a.parentNode&&a.parentNode.removeChild(a)};
_.k.HB=function(a){var c=uc(a.params,this.id,a.proxyId);delete a.params._methods;"_parent"==a.openParams.anchor&&(a.openParams.anchor=this.ha);if(vc(a.openParams))new Ic(a.url,a.openParams,a.params,c,c._onclose,this,a.openedByProxyChain);else{var f=new Gc(a.url,a.openParams,a.params,c,c._onclose,this,a.openedByProxyChain),g=this;Bc(f,function(){var a={childId:f.Hh()},l=f.Cz;l._toclose=f.close;a._methods=_.tc(l,g.id,f.id,f,!1);c._onopen(a)})}};
_.k.Ug=function(a){if(void 0===this.Pb("resize",a)&&this.B){var c=Ec(a.width);null!=c&&(this.B.style.width=c.od);a=Ec(a.height);null!=a&&(this.B.style.height=a.od);this.B.parentElement&&(null!=c&&c.Ul||null!=a&&a.Ul)&&(this.B.parentElement.style.display="block")}};
var Ic=function(a,c,f,g,h,l,n){zc.call(this,a,c,f,g,Jc,h,l,n);this.url=a;this.B=null;this.xA=gc();Bc(this,function(){var a;this.Pb("beforeparentopen");var c=_.sc(this.methods);c._onopen=this.UK;c._ready=this.Jg;c._onclose=this.TK;this.params._methods=_.tc(c,"..",this.xA,this,!0);c={};for(a in this.params)c[a]=ic(this.params[a]);var f=this.config.url;if(this.ss.hideUrlFromParent){a=window.name;var g=f,f=_.Bn(this.config.url,this.params,{},ic),h=c,c={};c._methods=h._methods;c["#opener"]=h["#opener"];
c["#urlindex"]=h["#urlindex"];c["#opener"]&&void 0!=h["#urlindex"]?(c["#opener"]=a+","+c["#opener"],a=g):(g=_.Ka(_.bb,"fUrl",[]),h=g.length,g[h]=f,_.bb.rUrl=ec,c["#opener"]=a,c["#urlindex"]=h,a=_.Rb.Pq(_.ta.location.href),f=_.P("iframes/relay_url_"+(0,window.encodeURIComponent)(a))||"/_/gapi/sibling/1/frame.html",a=a+f);f=a}_.Sb._open({url:f,openParams:this.ss,params:c,proxyId:this.xA,openedByProxyChain:this.dj})})};yc(Ic);Ic.prototype.G=function(){return this.B};
Ic.prototype.UK=function(a){this.B=a.childId;var c=uc(a,"..",this.B);_.sc(c,this);this.close=c._toclose;_.V.Uc[this.B]=this;this.ya&&this.methods._onopen&&(a._methods=_.tc(c,this.ya.Hh(),this.B,this,!1),this.methods._onopen(a))};Ic.prototype.Jg=function(a){var c=String(this.B),f=uc(a,"..",c);_.sc(a,this);_.sc(f,this);this.Pb("ready",a);this.ya&&this.methods._ready&&(a._methods=_.tc(f,this.ya.Hh(),c,this,!1),this.methods._ready(a))};
Ic.prototype.TK=function(a){if(this.ya&&this.methods._onclose)this.methods._onclose(a);else return a=this.Pb("close",a),delete _.V.Uc[this.B],a};
var Kc=function(a,c,f,g,h,l,n){zc.call(this,a,c,f,g,Jc,l,n);this.id=c.id||gc();this.G=h;g._close=this.close;this.onClosed=this.B;this.DF=0;Bc(this,function(){this.Pb("beforeparentopen");var c=_.sc(this.methods);this.params._methods=_.tc(c,"..",this.xA,this,!0);c={};c.queryParams=this.params;a=_.qa(_.ua,this.config.url,this.id,c);var f=h.openWindow(a);this.canAutoClose=function(a){a(h.jj(f))};h.Tm(f,this);this.DF=f})};yc(Kc);Kc.prototype.close=function(a){a=this.Pb("close",a);this.G.rk(this.DF);return a};
Kc.prototype.B=function(){this.Pb("close")};
(function(){_.V.Uc={};_.V.yf={};_.V.XR={};_.V.Kl=0;_.V.Rg={};_.V.bo={};_.V.Ng=null;_.V.Mg=[];_.V.Lr=function(a){var c=!1;try{if(null!=a)var h=window.parent.frames[a.id],c=h.iframer.id==a.id&&h.iframes.openedId_(_.Sb.id)}catch(l){}try{_.V.Ng={origin:this.origin,referer:this.referer,claimedOpenerId:a&&a.id,claimedOpenerProxyChain:a&&a.proxyChain||[],sameOrigin:c};for(a=0;a<_.V.Mg.length;++a)_.V.Mg[a](_.V.Ng);_.V.Mg=[]}catch(n){}};_.V.UI=function(a){var c=a&&a.ya,h=null;c&&(h={},h.id=c.Hh(),h.proxyChain=
a.dj);return h};bc();if(window.parent!=window){var a=_.R.dc();a.gcv&&oc(a.gcv);var c=a.jsh;c&&qc(c);_.sc(uc(a,"..",""),_.Sb);_.sc(a,_.Sb);ac()}_.V.Cr=Mc;_.V.na=Nc;_.V.xs=Qc;_.V.resize=Oc;_.V.Rp=function(a){return _.V.XR[a]};_.V.qj=function(a,c){_.V.XR[a]=c};_.V.rD=Oc;_.V.Ds=Qc;_.V.ng={};_.V.ng.get=Mc;_.V.ng.set=Nc;_.V.Zo=function(a,c){Zb(a);_.V.bo[a]=c||window[a]};_.V.Mt=function(a){delete _.V.bo[a]};_.V.open=function(a,c,h,l,n,q){3==arguments.length?l={}:4==arguments.length&&"function"===typeof l&&
(n=l,l={});var t="bubble"===c.style&&Pc?Pc.ma():null;return t?new Kc(a,c,h,l,t,n,q):vc(c)?new Ic(a,c,h,l,n,q):new Gc(a,c,h,l,n,q)};_.V.close=function(a,c){_.Sb&&_.Sb._close&&_.Sb._close(a,c)};_.V.ready=function(a,c,h){2==arguments.length&&"function"===typeof c&&(h=c,c={});var l=a||{};"height"in l||(l.height=_.Ob.Cd());l._methods=_.tc(c||{},"..","",_.Sb,!0);_.Sb&&_.Sb._ready&&_.Sb._ready(l,h)};_.V.Pk=function(a){_.V.Ng?a(_.V.Ng):_.V.Mg.push(a)};_.V.Ir=function(a){return!!_.V.Uc[a]};_.V.Vp=function(){return["https://ssl.gstatic.com/gb/js/",
_.P("googleapis.config/gcv")].join("")};_.V.Qr=function(a){var c={mouseover:1,mouseout:1};if(_.Sb._event)for(var h=0;h<a.length;h++){var l=a[h];l in c&&_.R.Ee(window.document,l,function(a){_.Sb._event({event:a.type,timestamp:(new Date).getTime()})},!0)}};_.V.zs=qc;_.V.pj=rc;_.V.kr=lc;_.V.dE=_.Sb})();
_.e("iframes.allow",_.V.Zo);_.e("iframes.callSiblingOpener",_.V.ip);_.e("iframes.registerForOpenedSibling",_.V.Sr);_.e("iframes.close",_.V.close);_.e("iframes.getGoogleConnectJsUri",_.V.Vp);_.e("iframes.getHandler",_.V.Cr);_.e("iframes.getDeferredHandler",_.V.Rp);_.e("iframes.getParentInfo",_.V.Pk);_.e("iframes.iframer",_.V.dE);_.e("iframes.open",_.V.open);_.e("iframes.openedId_",_.V.Ir);_.e("iframes.propagate",_.V.Qr);_.e("iframes.ready",_.V.ready);_.e("iframes.resize",_.V.resize);
_.e("iframes.setGoogleConnectJsVersion",_.V.xs);_.e("iframes.setBootstrapHint",_.V.pj);_.e("iframes.setJsHint",_.V.zs);_.e("iframes.setHandler",_.V.na);_.e("iframes.setDeferredHandler",_.V.qj);_.e("IframeBase",zc);_.e("IframeBase.prototype.addCallback",zc.prototype.ea);_.e("IframeBase.prototype.getMethods",zc.prototype.bi);_.e("IframeBase.prototype.getOpenerIframe",zc.prototype.ci);_.e("IframeBase.prototype.getOpenParams",zc.prototype.va);_.e("IframeBase.prototype.getParams",zc.prototype.tb);
_.e("IframeBase.prototype.removeCallback",zc.prototype.Ub);_.e("Iframe",Gc);_.e("Iframe.prototype.close",Gc.prototype.close);_.e("Iframe.prototype.exposeMethod",Gc.prototype.fg);_.e("Iframe.prototype.getId",Gc.prototype.Hh);_.e("Iframe.prototype.getIframeEl",Gc.prototype.rb);_.e("Iframe.prototype.getSiteEl",Gc.prototype.V);_.e("Iframe.prototype.openInto",Gc.prototype.Pa);_.e("Iframe.prototype.remove",Gc.prototype.remove);_.e("Iframe.prototype.setSiteEl",Gc.prototype.qc);
_.e("Iframe.prototype.addCallback",Gc.prototype.ea);_.e("Iframe.prototype.getMethods",Gc.prototype.bi);_.e("Iframe.prototype.getOpenerIframe",Gc.prototype.ci);_.e("Iframe.prototype.getOpenParams",Gc.prototype.va);_.e("Iframe.prototype.getParams",Gc.prototype.tb);_.e("Iframe.prototype.removeCallback",Gc.prototype.Ub);_.e("IframeProxy",Ic);_.e("IframeProxy.prototype.getTargetIframeId",Ic.prototype.G);_.e("IframeProxy.prototype.addCallback",Ic.prototype.ea);_.e("IframeProxy.prototype.getMethods",Ic.prototype.bi);
_.e("IframeProxy.prototype.getOpenerIframe",Ic.prototype.ci);_.e("IframeProxy.prototype.getOpenParams",Ic.prototype.va);_.e("IframeProxy.prototype.getParams",Ic.prototype.tb);_.e("IframeProxy.prototype.removeCallback",Ic.prototype.Ub);_.e("IframeWindow",Kc);_.e("IframeWindow.prototype.close",Kc.prototype.close);_.e("IframeWindow.prototype.onClosed",Kc.prototype.B);_.e("iframes.util.getTopMostAccessibleWindow",_.V.J.Uk);_.e("iframes.handlers.get",_.V.ng.get);_.e("iframes.handlers.set",_.V.ng.set); _.e("iframes.resizeMe",_.V.rD);_.e("iframes.setVersionOverride",_.V.Ds);
zc.prototype.send=function(a,c,f){_.V.Gr(this,a,c,f)};_.Sb.send=function(a,c,f){_.V.Gr(_.Sb,a,c,f)};zc.prototype.register=function(a,c){var f=this;f.ea(a,function(a){c.call(f,a)})};_.V.Gr=function(a,c,f,g){var h=[];void 0!==f&&h.push(f);g&&h.push(function(a){g.call(this,[a])});a[c]&&a[c].apply(a,h)};_.V.Fa=function(){return!0};_.e("iframes.CROSS_ORIGIN_IFRAMES_FILTER",_.V.Fa);_.e("IframeBase.prototype.send",zc.prototype.send);_.e("IframeBase.prototype.register",zc.prototype.register);
_.e("Iframe.prototype.send",Gc.prototype.send);_.e("Iframe.prototype.register",Gc.prototype.register);_.e("IframeProxy.prototype.send",Ic.prototype.send);_.e("IframeProxy.prototype.register",Ic.prototype.register);_.e("IframeWindow.prototype.send",Kc.prototype.send);_.e("IframeWindow.prototype.register",Kc.prototype.register);_.e("iframes.iframer.send",_.V.dE.send);

var lN=_.V.na,EN={open:function(a){var c=_.bf(a.va());return a.Pa(c,{style:_.gf(c)})},attach:function(a,c){var f=_.bf(a.va()),g=c.id,h=c.getAttribute("data-postorigin")||c.src,l=/#(?:.*&)?rpctoken=(\d+)/.exec(h),l=l&&l[1];a.id=g;a.G=l;a.ha=f;a.B=c;_.V.Uc[g]=a;l=_.sc(a.methods);l._ready=a.Jg;l._close=a.close;l._open=a.HB;l._resizeMe=a.Ug;l._renderstart=a.PA;_.tc(l,g,"",a,!0);_.T.Wg(a.id,a.G);_.T.Xg(a.id,h);var f=_.V.Wp({style:_.gf(f)}),n;for(n in f)Object.prototype.hasOwnProperty.call(f,n)&&("style"== n?a.B.style.cssText=f[n]:a.B.setAttribute(n,f[n]))}};EN.onready=_.hf;EN.onRenderStart=_.hf;EN.close=_.jf;lN("inline",EN);

_.At=(window.gapi||{}).load;
var pe;_.d=function(a,c){return _.aa[a]=c};_.re=function(a){var c=_.da(a);return"array"==c||"object"==c&&"number"==typeof a.length};pe=0;_.oe=function(a){return a[_.oa]||(a[_.oa]=++pe)};_.Vg=function(a){var c=typeof a;return"object"==c&&null!=a||"function"==c};_.vd=function(a){return"function"==_.da(a)};_.qe=function(a){return"number"==typeof a};
_.jd=function(a,c){return 0==a.lastIndexOf(c,0)};_.Ge=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};_.Gf=function(a,c){return Array(c+1).join(a)};_.ne=2147483648*Math.random()|0;_.Cg=function(a){return String(a).replace(/\-([a-z])/g,function(a,f){return f.toUpperCase()})};
_.ye=Array.prototype;_.we=_.ye.indexOf?function(a,c,f){return _.ye.indexOf.call(a,c,f)}:function(a,c,f){f=null==f?0:0>f?Math.max(0,a.length+f):f;if(_.fa(a))return _.fa(c)&&1==c.length?a.indexOf(c,f):-1;for(;f<a.length;f++)if(f in a&&a[f]===c)return f;return-1};
_.Wf=_.ye.lastIndexOf?function(a,c,f){return _.ye.lastIndexOf.call(a,c,null==f?a.length-1:f)}:function(a,c,f){f=null==f?a.length-1:f;0>f&&(f=Math.max(0,a.length+f));if(_.fa(a))return _.fa(c)&&1==c.length?a.lastIndexOf(c,f):-1;for(;0<=f;f--)if(f in a&&a[f]===c)return f;return-1};_.Be=_.ye.forEach?function(a,c,f){_.ye.forEach.call(a,c,f)}:function(a,c,f){for(var g=a.length,h=_.fa(a)?a.split(""):a,l=0;l<g;l++)l in h&&c.call(f,h[l],l,a)};
_.Ce=_.ye.filter?function(a,c,f){return _.ye.filter.call(a,c,f)}:function(a,c,f){for(var g=a.length,h=[],l=0,n=_.fa(a)?a.split(""):a,q=0;q<g;q++)if(q in n){var t=n[q];c.call(f,t,q,a)&&(h[l++]=t)}return h};_.De=_.ye.map?function(a,c,f){return _.ye.map.call(a,c,f)}:function(a,c,f){for(var g=a.length,h=Array(g),l=_.fa(a)?a.split(""):a,n=0;n<g;n++)n in l&&(h[n]=c.call(f,l[n],n,a));return h};
_.Ee=_.ye.some?function(a,c,f){return _.ye.some.call(a,c,f)}:function(a,c,f){for(var g=a.length,h=_.fa(a)?a.split(""):a,l=0;l<g;l++)if(l in h&&c.call(f,h[l],l,a))return!0;return!1};_.Fe=_.ye.every?function(a,c,f){return _.ye.every.call(a,c,f)}:function(a,c,f){for(var g=a.length,h=_.fa(a)?a.split(""):a,l=0;l<g;l++)if(l in h&&!c.call(f,h[l],l,a))return!1;return!0};_.ve=function(a,c){return 0<=(0,_.we)(a,c)}; _.Gl=function(a,c){for(var f=1;f<arguments.length;f++){var g=arguments[f];if(_.re(g)){var h=a.length||0,l=g.length||0;a.length=h+l;for(var n=0;n<l;n++)a[h+n]=g[n]}else a.push(g)}};

_.Uo=_.r();
_.Uu=function(a){var c=window;a=(a||c.location.href).match(/.*(\?|#|&)usegapi=([^&#]+)/)||[];return"1"===(0,window.decodeURIComponent)(a[a.length-1]||"")};
var dC,Yu,Zu,$u,Ak,Fk,Ck,Dk,Fm;_.Vu={apppackagename:1,callback:1,clientid:1,cookiepolicy:1,openidrealm:-1,includegrantedscopes:-1,requestvisibleactions:1,scope:1};_.Wu=!1;
_.Xu=function(){if(!_.Wu){for(var a=window.document.getElementsByTagName("meta"),c=0;c<a.length;++c){var f=a[c].name.toLowerCase();if(_.jd(f,"google-signin-")){var f=f.substring(14),g=a[c].content;_.Vu[f]&&g&&(_.Uo[f]=g)}}if(window.self!==window.top){var a=window.document.location.toString(),h;for(h in _.Vu)0<_.Vu[h]&&(c=_.Wa(a,h,""))&&(_.Uo[h]=c)}_.Wu=!0}h=_.r();_.Sl(_.Uo,h);return h};dC=function(a){return function(c,f){return a?_.ql()[f]||a[f]||"":_.ql()[f]||""}};Yu={button:!0,div:!0,span:!0};
Zu=function(a){return _.Ka(_.bb,"watt",_.r())[a]};$u=function(a){var c=_.Ka(_.bb,"sws",[]);return 0<=_.xd.call(c,a)};Ak=function(){};
Fk=function(a){var c=a.Ws,f=function(a){f.T.constructor.call(this,a);var c=this.Ya.length;this.B=[];for(var g=0;g<c;++g)this.Ya[g].zK||(this.B[g]=new this.Ya[g](a))};_.J(f,c);for(var g=[];a;){if(c=a.Ws){c.Ya&&_.Gl(g,c.Ya);var h=c.prototype,l;for(l in h)if(h.hasOwnProperty(l)&&_.vd(h[l])&&h[l]!==c){var n=!!h[l].RH,q=Ck(l,h,g,n);(n=Dk(l,h,q,n))&&(f.prototype[l]=n)}}a=a.T&&a.T.constructor}f.prototype.Ya=g;return f};
Ck=function(a,c,f,g){for(var h=[],l=0;l<f.length&&(f[l].prototype[a]===c[a]||(h.push(l),!g));++l);return h};
Dk=function(a,c,f,g){var h;f.length?g?h=function(c){var g=this.B[f[0]];return g?g[a].apply(this.B[f[0]],arguments):this.Ya[f[0]].prototype[a].apply(this,arguments)}:c[a].uH?h=function(c){var g;a:{g=Array.prototype.slice.call(arguments,0);for(var h=0;h<f.length;++h){var t=this.B[f[h]];if(t=t?t[a].apply(t,g):this.Ya[f[h]].prototype[a].apply(this,g)){g=t;break a}}g=!1}return g}:c[a].VF?h=function(c){var g;a:{g=Array.prototype.slice.call(arguments,0);for(var h=0;h<f.length;++h){var t=this.B[f[h]],t=t?
t[a].apply(t,g):this.Ya[f[h]].prototype[a].apply(this,g);if(null!=t){g=t;break a}}g=void 0}return g}:c[a].AE?h=function(c){for(var g=Array.prototype.slice.call(arguments,0),h=0;h<f.length;++h){var t=this.B[f[h]];t?t[a].apply(t,g):this.Ya[f[h]].prototype[a].apply(this,g)}}:h=function(c){for(var g=Array.prototype.slice.call(arguments,0),h=[],t=0;t<f.length;++t){var v=this.B[f[t]];h.push(v?v[a].apply(v,g):this.Ya[f[t]].prototype[a].apply(this,g))}return h}:g||c[a].uH||c[a].VF||c[a].AE?h=null:h=Fm;return h}; Fm=function(){return[]};Ak.prototype.G=function(a){if(this.B)for(var c=0;c<this.B.length;++c)if(this.B[c]instanceof a)return this.B[c];return null};
var Nn=function(a){return this.Vx.G(a)};var Xc;Xc=function(a){var c;a.match(/^https?%3A/i)&&(c=(0,window.decodeURIComponent)(a));return _.An(window.document,c?c:a)};_.Yc=function(a){a=a||"canonical";for(var c=window.document.getElementsByTagName("link"),f=0,g=c.length;f<g;f++){var h=c[f],l=h.getAttribute("rel");if(l&&l.toLowerCase()==a&&(h=h.getAttribute("href"))&&(h=Xc(h))&&null!=h.match(/^https?:\/\/[\w\-\_\.]+/i))return h}return window.location.href};_.md=function(){return window.location.origin||window.location.protocol+"//"+window.location.host};
_.Zc=function(a,c,f,g){return(a="string"==typeof a?a:void 0)?Xc(a):_.Yc(g)};_.fd=function(a,c,f){null==a&&f&&(a=f.db,null==a&&(a=f.gwidget&&f.gwidget.db));return a||void 0};_.gd=function(a,c,f){null==a&&f&&(a=f.ecp,null==a&&(a=f.gwidget&&f.gwidget.ecp));return a||void 0};
_.ld=function(a,c){return _.Zc(a,0,0,c.action?void 0:"publisher")};var Wo,av,Md,Ld,id,Gd,bv,nd;Wo={se:"0"};av={post:!0};Md={style:"position:absolute;top:-10000px;width:450px;margin:0px;border-style:none"};Ld="onPlusOne _ready _close _open _resizeMe _renderstart oncircled drefresh erefresh".split(" ");id=_.Ka(_.bb,"WI",_.r());Gd=["style","data-gapiscan"];
bv=function(a){for(var c=_.r(),f=0!=a.nodeName.toLowerCase().indexOf("g:"),g=0,h=a.attributes.length;g<h;g++){var l=a.attributes[g],n=l.name,q=l.value;0<=_.xd.call(Gd,n)||f&&0!=n.indexOf("data-")||"null"===q||"specified"in l&&!l.specified||(f&&(n=n.substr(5)),c[n.toLowerCase()]=q)}a=a.style;(f=nd(a&&a.height))&&(c.height=String(f));(a=nd(a&&a.width))&&(c.width=String(a));return c};
_.cv=function(a,c,f,g,h,l){var n;f.rd?n=c:(n=window.document.createElement("div"),c.setAttribute("data-gapistub",!0),n.style.cssText="position:absolute;width:450px;left:-10000px;",c.parentNode.insertBefore(n,c));l.siteElement=n;n.id||(n.id=_.lf(a));c=_.r();c[">type"]=a;_.Sl(f,c);a=_.tb(g,n,h);l.iframeNode=a;l.id=a.getAttribute("id")};_.lf=function(a){_.Ka(id,a,0);return"___"+a+"_"+id[a]++};nd=function(a){var c=void 0;"number"===typeof a?c=a:"string"===typeof a&&(c=(0,window.parseInt)(a,10));return c};
var Bd,Cd,Dd,Fd,dv=/(?:^|\s)g-((\S)*)(?:$|\s)/,ev={plusone:!0,autocomplete:!0,profile:!0,signin:!0,signin2:!0};Bd=_.Ka(_.bb,"SW",_.r());Cd=_.Ka(_.bb,"SA",_.r());Dd=_.Ka(_.bb,"SM",_.r());Fd=_.Ka(_.bb,"FW",[]);
var fv=function(a,c){var f;"string"===typeof a?f=window.document.getElementById(a):f=a;return f||c},hv=function(a,c){var f,g,h,l;_.gv("ps0");var n=fv(a,_.ua);g=_.ua.documentMode;if(n.querySelectorAll&&(!g||8<g)){g=c?[c]:_.kb(Bd).concat(_.kb(Cd)).concat(_.kb(Dd));h=[];for(var q=0;q<g.length;q++){var t=g[q];h.push(".g-"+t,"g\\:"+t)}g=n.querySelectorAll(h.join(","))}else g=n.getElementsByTagName("*");n=_.r();for(h=0;h<g.length;h++){q=g[h];var v=q,t=c,w=v.nodeName.toLowerCase(),A=void 0;v.getAttribute("data-gapiscan")?
t=null:(0==w.indexOf("g:")?A=w.substr(2):(v=(v=String(v.className||v.getAttribute("class")))&&dv.exec(v))&&(A=v[1]),t=!A||!(Bd[A]||Cd[A]||Dd[A])||t&&A!==t?null:A);t&&(ev[t]||0==q.nodeName.toLowerCase().indexOf("g:")||0!=_.kb(bv(q)).length)&&(q.setAttribute("data-gapiscan",!0),_.Ka(n,t,[]).push(q))}for(f in n)Fd.push(f);_.gv("ps1");if(f=Fd.join(":"))try{_.Ua.load(f,void 0)}catch(F){_.kd(F);return}q=[];for(l in n)for(h=n[l],g=0,f=h.length;g<f;g++)t=h[g],Hd(l,t,bv(t),q,f)};
var Id=function(a,c){var f=Zu(a);c&&f?(f(c),(f=c.iframeNode)&&f.setAttribute("data-gapiattached",!0)):_.Ua.load(a,function(){var f=Zu(a),h=c&&c.iframeNode,l=c&&c.userParams;h&&f?(f(c),h.setAttribute("data-gapiattached",!0)):(f=_.Ua[a].go,"signin2"==a?f(h,l):f(h&&h.parentNode,l))})},Hd=function(a,c,f,g,h,l){switch(Jd(c,a,l)){case 0:a=Dd[a]?a+"_annotation":a;g={};g.iframeNode=c;g.userParams=f;Id(a,g);break;case 1:if(c.parentNode){for(var n in f){if(l=_.Qa(f,n))l=f[n],l=!!l&&"object"===typeof l&&(!l.toString||
l.toString===Object.prototype.toString||l.toString===Array.prototype.toString);if(l)try{f[n]=(0,_.mf)(f[n])}catch(q){delete f[n]}}n=!0;f.dontclear&&(n=!1);delete f.dontclear;var t,v,w;l={};var A=w=a;"plus"==a&&f.action&&(w=a+"_"+f.action,A=a+"/"+f.action);(w=_.P("iframes/"+w+"/url"))||(w=":im_socialhost:/:session_prefix::im_prefix:_/widget/render/"+A+"?usegapi=1");for(v in Wo)l[v]=v+"/"+(f[v]||Wo[v])+"/";v=_.An(_.ua,w.replace(_.nc,dC(l)));A="iframes/"+a+"/params/";l={};_.Sl(f,l);(w=_.P("lang")||_.P("gwidget/lang"))&&
(l.hl=w);av[a]||(l.origin=_.md());l.exp=_.P(A+"exp");if(A=_.P(A+"location"))for(w=0;w<A.length;w++){var F=A[w];l[F]=_.ta.location[F]}switch(a){case "plus":case "follow":l.url=_.ld(l.href,f);delete l.href;break;case "plusone":A=(A=f.href)?Xc(A):_.Yc();l.url=A;l.db=_.fd(f.db,0,_.P());l.ecp=_.gd(f.ecp,0,_.P());delete l.href;break;case "signin":l.url=_.Yc()}_.bb.ILI&&(l.iloader="1");delete l["data-onload"];delete l.rd;for(var z in Wo)l[z]&&delete l[z];l.gsrc=_.P("iframes/:source:");z=_.P("inline/css");
"undefined"!==typeof z&&0<h&&z>=h&&(l.ic="1");z=/^#|^fr-/;h={};for(var I in l)_.Qa(l,I)&&z.test(I)&&(h[I.replace(z,"")]=l[I],delete l[I]);I="q"==_.P("iframes/"+a+"/params/si")?l:h;z=_.Xu();for(t in z)!_.Qa(z,t)||_.Qa(l,t)||_.Qa(h,t)||(I[t]=z[t]);t=[].concat(Ld);I=_.P("iframes/"+a+"/methods");_.cb(I)&&(t=t.concat(I));for(var E in f)_.Qa(f,E)&&/^on/.test(E)&&("plus"!=a||"onconnect"!=E)&&(t.push(E),delete l[E]);delete l.callback;h._methods=t.join(",");t=_.Bn(v,l,h);I={allowPost:1,attributes:Md};I.dontclear=
!n;E={};E.userParams=f;E.url=t;E.type=a;_.cv(a,c,f,t,I,E);c=E.id;f=_.r();f.id=c;f.userParams=E.userParams;f.url=E.url;f.type=E.type;f.state=1;_.Tc[c]=f;c=E}else c=null;c&&((f=c.id)&&g.push(f),Id(a,c))}},Jd=function(a,c,f){if(a&&1===a.nodeType&&c){if(f)return 1;if(Dd[c]){if(Yu[a.nodeName.toLowerCase()])return(a=a.innerHTML)&&a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")?0:1}else{if(Cd[c])return 0;if(Bd[c])return 1}}return null};
_.Ka(_.Ua,"platform",{}).go=function(a,c){hv(a,c)};var Rd=_.Ka(_.bb,"perf",_.r()),yd=_.Ka(Rd,"g",_.r()),Ud=_.Ka(Rd,"i",_.r()),Pd,Qd,Od,Ad,Td,Vd;_.Ka(Rd,"r",[]);Pd=_.r();Qd=_.r();Od=function(a,c,f,g){Pd[f]=Pd[f]||!!g;_.Ka(Qd,f,[]);Qd[f].push([a,c])};Ad=function(a,c,f){var g=Rd.r;"function"===typeof g?g(a,c,f):g.push([a,c,f])};_.gv=function(a,c){var f=c||(new Date).getTime();yd[a]=f;Ad(a)};_.Sd=function(a,c,f,g){if("_p"==c)throw Error("Ra");_.nf(a,c,f,g)};_.nf=function(a,c,f,g){Td(c,f)[a]=g||(new Date).getTime();Ad(a,c,f)}; Td=function(a,c){var f=_.Ka(Ud,a,_.r());return _.Ka(f,c,_.r())};Vd=function(a,c,f){var g=null;c&&f&&(g=Td(c,f)[a]);return g||yd[a]};_.iv=function(a,c,f,g,h,l){_.Sd("wrt0",a,c,f);_.Sd("wrt1",a,c,g);_.Sd("wrt2",a,c,h);_.Sd("wrt3",a,c,l)};
(function(){function a(a){this.t={};this.tick=function(a,c,f){var g=void 0!=f?f:(new Date).getTime();this.t[a]=[g,c];if(void 0==f)try{window.console.timeStamp("CSI/"+a)}catch(h){}};this.tick("start",null,a)}var c;window.performance&&(c=window.performance.timing);var f=c?new a(c.responseStart):new a;window.__gapi_jstiming__={Timer:a,load:f};if(c){var g=c.navigationStart,h=c.responseStart;0<g&&h>=g&&(window.__gapi_jstiming__.srt=h-g)}if(c){var l=window.__gapi_jstiming__.load;0<g&&h>=g&&(l.tick("_wtsrt",
void 0,g),l.tick("wtsrt_","_wtsrt",h),l.tick("tbsd_","wtsrt_"))}try{c=null,window.chrome&&window.chrome.csi&&(c=Math.floor(window.chrome.csi().pageT),l&&0<g&&(l.tick("_tbnd",void 0,window.chrome.csi().startE),l.tick("tbnd_","_tbnd",g))),null==c&&window.gtbExternal&&(c=window.gtbExternal.pageT()),null==c&&window.external&&(c=window.external.pageT,l&&0<g&&(l.tick("_tbnd",void 0,window.external.startE),l.tick("tbnd_","_tbnd",g))),c&&(window.__gapi_jstiming__.pt=c)}catch(n){}})();
if(window.__gapi_jstiming__){window.__gapi_jstiming__.Pz={};window.__gapi_jstiming__.Yr=1;var he=function(a,c,f){var g=a.t[c],h=a.t.start;if(g&&(h||f))return g=a.t[c][0],void 0!=f?h=f:h=h[0],Math.round(g-h)};window.__gapi_jstiming__.getTick=he;window.__gapi_jstiming__.getLabels=function(a){var c=[],f;for(f in a.t)c.push(f);return c};var ie=function(a,c,f){var g="";window.__gapi_jstiming__.srt&&(g+="&srt="+window.__gapi_jstiming__.srt);window.__gapi_jstiming__.pt&&(g+="&tbsrt="+window.__gapi_jstiming__.pt);
try{window.external&&window.external.tran?g+="&tran="+window.external.tran:window.gtbExternal&&window.gtbExternal.tran?g+="&tran="+window.gtbExternal.tran():window.chrome&&window.chrome.csi&&(g+="&tran="+window.chrome.csi().tran)}catch(h){}var l=window.chrome;if(l&&(l=l.loadTimes)){l().wasFetchedViaSpdy&&(g+="&p=s");if(l().wasNpnNegotiated){var g=g+"&npn=1",n=l().npnNegotiatedProtocol;n&&(g+="&npnv="+(window.encodeURIComponent||window.escape)(n))}l().wasAlternateProtocolAvailable&&(g+="&apa=1")}var q=
a.t,t=q.start,l=[],n=[],v;for(v in q)if("start"!=v&&0!=v.indexOf("_")){var w=q[v][1];w?q[w]&&n.push(v+"."+he(a,v,q[w][0])):t&&l.push(v+"."+he(a,v))}if(c)for(var A in c)g+="&"+A+"="+c[A];(c=f)||(c="https:"==window.document.location.protocol?"https://csi.gstatic.com/csi":"http://csi.gstatic.com/csi");return[c,"?v=3","&s="+(window.__gapi_jstiming__.sn||"oz")+"&action=",a.name,n.length?"&it="+n.join(","):"",g,"&rt=",l.join(",")].join("")},je=function(a,c,f){a=ie(a,c,f);if(!a)return"";c=new window.Image;
var g=window.__gapi_jstiming__.Yr++;window.__gapi_jstiming__.Pz[g]=c;c.onload=c.onerror=function(){window.__gapi_jstiming__&&delete window.__gapi_jstiming__.Pz[g]};c.src=a;c=null;return a};window.__gapi_jstiming__.report=function(a,c,f){if("prerender"==window.document.webkitVisibilityState){var g=!1,h=function(){if(!g){c?c.prerender="1":c={prerender:"1"};var l;"prerender"==window.document.webkitVisibilityState?l=!1:(je(a,c,f),l=!0);l&&(g=!0,window.document.removeEventListener("webkitvisibilitychange", h,!1))}};window.document.addEventListener("webkitvisibilitychange",h,!1);return""}return je(a,c,f)}};
var fe=[73,74,77,78],ee={g:"gapi_global",m:"gapi_module",w:"gwidget"},Wd=function(a,c){this.type=a?"_p"==a?"m":"w":"g";this.name=a;this.B=c};Wd.prototype.key=function(){switch(this.type){case "g":return this.type;case "m":return this.type+"."+this.B;case "w":return this.type+"."+this.name+this.B}};
var ce=new Wd,Yd=window.navigator.userAgent.match(/iPhone|iPad|Android|PalmWebOS|Maemo|Bada/),$d=_.Ka(Rd,"_c",_.r()),ae=Math.random()<(_.P("csi/rate")||0),Zd=function(a,c,f){for(var g=new Wd(c,f),h=_.Ka($d,g.key(),_.r()),l=Qd[a]||[],n=0;n<l.length;++n){var q=l[n],t=q[0],v=a,w=c,A=f,q=Vd(q[1],w,A),v=Vd(v,w,A);h[t]=q&&v?v-q:null}Pd[a]&&ae&&(be(ce),be(g))},de=function(a,c){c=c||[];for(var f=[],g=0;g<c.length;g++)f.push(a+c[g]);return f},Zo=function(a,c){var f=[];f.push("l"+(_.P("isPlusUser")?"1":"0"));
var g="m"+(Yd?"1":"0");f.push(g);if("m"==a.type)f.push("p"+a.B);else if("w"==a.type){var h="n"+a.B;f.push(h);"0"==a.B&&f.push(g+h)}f.push("u"+(_.P("isLoggedIn")?"1":"0"));return de(c?"e"+c:"",f)},be=function(a){var c=_.ta.__gapi_jstiming__;c.sn=ee[a.type];var f=new c.Timer(0),g;a:{switch(a.type){case "g":g="global";break a;case "m":g=a.B;break a;case "w":g=a.name;break a}g=void 0}f.name=g;g=!1;var h=a.key(),l=$d[h];f.tick("_start",null,0);for(var n in l)f.tick(n,"_start",l[n]),g=!0;$d[h]=_.r();if(g){n=
[];g=_.P("lexps");n=n.concat(de("e",g));n=n.concat(Zo(a));for(h=0;h<fe.length;h++)l=fe[h],0<=_.xd.call(g,l)&&(n=n.concat(Zo(a,l)));n=de("abc_",n);c.report(f,{e:n.join(",")})}};Od("blt","bs0","bs1");Od("psi","ps0","ps1");Od("rpcqi","rqe","rqd");Od("bsprt","bsrt0","bsrt1");Od("bsrqt","bsrt1","bsrt2");Od("bsrst","bsrt2","bsrt3");Od("mli","ml0","ml1");Od("mei","me0","me1",!0);Od("wcdi","wrs","wcdi");Od("wci","wrs","wdc");Od("wdi","wrs","wrdi");Od("wdt","bs0","wrdt");Od("wri","wrs","wrri",!0);
Od("wrt","bs0","wrrt");Od("wji","wje0","wje1",!0);Od("wjli","wjl0","wjl1");Od("whi","wh0","wh1",!0);Od("wai","waaf0","waaf1",!0);Od("wadi","wrs","waaf1",!0);Od("wadt","bs0","waaf1",!0);Od("wprt","wrt0","wrt1");Od("wrqt","wrt1","wrt2");Od("wrst","wrt2","wrt3",!0);Od("fbprt","fsrt0","fsrt1");Od("fbrqt","fsrt1","fsrt2");Od("fbrst","fsrt2","fsrt3",!0);Od("fdns","fdns0","fdns1");Od("fcon","fcon0","fcon1");Od("freq","freq0","freq1");Od("frsp","frsp0","frsp1");Od("fttfb","fttfb0","fttfb1"); Od("ftot","ftot0","ftot1",!0);var jw=Rd.r;if("function"!==typeof jw){for(var wx;wx=jw.shift();)Zd.apply(null,wx);Rd.r=Zd};
var Rt=["div"],jC="onload",zx=!0,cB=!0,gg=function(a){return a},gC=null,Kg=function(a){var c=_.P(a);return"undefined"!==typeof c?c:_.P("gwidget/"+a)},gC=_.P(),ov,pv,Uj,En,Ft,It,Mt,Jt,St,tw,Ds,yE,uv,vv,Cv,Tt,sw,Ev,Ut,eC,fC,hC,Fv;_.P("gwidget");var xx=Kg("parsetags"),jC="explicit"===xx||"onload"===xx?xx:jC,yx=Kg("google_analytics");"undefined"!==typeof yx&&(zx=!!yx);var XC=Kg("data_layer");"undefined"!==typeof XC&&(cB=!!XC);ov=function(){var a=this&&this.Hh();a&&(_.bb.drw=a)};
pv=function(){_.bb.drw=null};Uj=function(a){return function(c){var f=a;"number"===typeof c?f=c:"string"===typeof c&&(f=c.indexOf("px"),-1!=f&&(c=c.substring(0,f)),f=(0,window.parseInt)(c,10));return f}};En=function(a){"string"===typeof a&&(a=window[a]);return"function"===typeof a?a:null};Ft=function(){return Kg("lang")||"en-US"};
It=function(a){if(!_.V.Cr("attach")){var c={},f=_.V.Cr("inline"),g;for(g in f)f.hasOwnProperty(g)&&(c[g]=f[g]);c.open=function(a){var c=a.va().renderData.id,c=window.document.getElementById(c);if(!c)throw Error("o");return f.attach(a,c)};_.V.na("attach",c)}a.style="attach"};Mt=function(){var a={};a.width=[Uj(450)];a.height=[Uj(24)];a.onready=[En];a.lang=[Ft,"hl"];a.iloader=[function(){return _.bb.ILI},"iloader"];return a}();
Jt=function(a){var c={};c.Fb=a[0];c.Kj=-1;c.tn="___"+c.Fb+"_";c.Xs="g:"+c.Fb;c.Wt="g-"+c.Fb;c.Dm=[];c.config={};c.jd=[];c.Rh={};c.Ie={};var f=function(a){for(var f in a)if(_.Qa(a,f)){c.config[f]=[En];c.jd.push(f);var g=a[f],q=null,t=null,v=null;"function"===typeof g?q=g:g&&"object"===typeof g&&(q=g.Er,t=g.Kg,v=g.Qh);v&&(c.jd.push(v),c.config[v]=[En],c.Rh[f]=v);q&&(c.config[f]=[q]);t&&(c.Ie[f]=t)}},g=function(a){for(var f={},g=0;g<a.length;++g)f[a[g].toLowerCase()]=1;f[c.Xs]=1;c.nr=f};a[1]&&(c.Jr=
a[1]);(function(a){c.config=a;for(var f in Mt)Mt.hasOwnProperty(f)&&!c.config.hasOwnProperty(f)&&(c.config[f]=Mt[f])})(a[2]||{});a[3]&&f(a[3]);a[4]&&g(a[4]);a[5]&&(c.qe=a[5]);c.nu=!0===a[6];c.Or=a[7];c.lM=a[8];c.nr||g(Rt);c.bj=function(a){c.Kj++;_.Sd("wrs",c.Fb,String(c.Kj));var f=[],g=a.element,q=a.config,t=":"+c.Fb;":plus"==t&&a.pe&&a.pe.action&&(t+="_"+a.pe.action);var v=St(c,q),w={};_.Sl(_.Xu(),w);for(var A in a.pe)null!=a.pe[A]&&(w[A]=a.pe[A]);A={container:g.id,renderData:a.Xr,style:"inline",
height:q.height,width:q.width};It(A);c.qe&&(f[2]=A,f[3]=w,f[4]=v,c.qe("i",f));t=_.V.open(t,A,w,v);(0,_.qv)(c,t,q,g,a.xp);f[5]=t;c.qe&&c.qe("e",f)};return c};St=function(a,c){for(var f={},g=a.jd.length-1;0<=g;--g){var h=a.jd[g],l=c[a.Rh[h]||h]||c[h],n=c[h];n&&l!==n&&(l=function(a,c){return function(f){c.apply(this,arguments);a.apply(this,arguments)}}(l,n));l&&(f[h]=l)}for(var q in a.Ie)a.Ie.hasOwnProperty(q)&&(f[q]=tw(f[q]||function(){},a.Ie[q]));f.drefresh=ov;f.erefresh=pv;return f};
tw=function(a,c){return function(f){var g=c(f);if(g){var h=f.href||null;if(zx){if(window._gat)try{var l=window._gat._getTrackerByName("~0");l&&"UA-XXXXX-X"!=l._getAccount()?l._trackSocial("Google",g,h):window._gaq&&window._gaq.push(["_trackSocial","Google",g,h])}catch(n){}if(window.ga&&window.ga.getAll)try{for(var q=window.ga.getAll(),l=0;l<q.length;l++)q[l].send("social","Google",g,h)}catch(t){}}if(cB&&window.dataLayer)try{window.dataLayer.push({event:"social",socialNetwork:"Google",socialAction:g,
socialTarget:h})}catch(v){}}a.call(this,f)}};_.qv=function(a,c,f,g,h){Tt(c,f);Ut(c,g);sw(a,c,h);XF(a.Fb,a.Kj.toString(),c);(new Ds).Vx.Ep(a,c,f,g,h)};Ds=function(){if(!this.Vx){for(var a=this.constructor;a&&!a.Ws;)a=a.T&&a.T.constructor;a.Ws.UD||(a.Ws.UD=Fk(a));this.Vx=new a.Ws.UD(this);this.G||(this.G=Nn)}};_.Gs=function(){};yE=Ds;_.Gs.T||_.J(_.Gs,Ak);yE.Ws=_.Gs;_.Gs.prototype.Ep=function(a){a=a?a:function(){};a.AE=!0;return a}();uv=function(a){return _.Rm&&a instanceof _.Rm};
vv=function(a){return uv(a)?"_renderstart":"renderstart"};Cv=function(a){return uv(a)?"_ready":"ready"};_.Dv=function(){return!0};Tt=function(a,c){if(c.onready){var f=!1,g=function(){f||(f=!0,c.onready.call(null))};a.register(Cv(a),g,_.Dv);a.register(vv(a),g,_.Dv)}};
sw=function(a,c,f){var g=a.Fb,h=String(a.Kj),l=!1,n=function(){l||(l=!0,f&&_.Sd("wrdt",g,h),_.Sd("wrdi",g,h))};c.register(vv(c),n,_.Dv);var q=!1;a=function(){q||(q=!0,n(),f&&_.Sd("wrrt",g,h),_.Sd("wrri",g,h))};c.register(Cv(c),a,_.Dv);uv(c)?c.register("widget-interactive-"+c.id,a,_.Dv):_.T.register("widget-interactive-"+c.id,a);_.T.register("widget-csi-tick-"+c.id,function(a,c,f){"wdc"===a?_.Sd("wdc",g,h,f):"wje0"===a?_.Sd("wje0",g,h,f):"wje1"===a?_.Sd("wje1",g,h,f):"wh0"==a?_.nf("wh0",g,h,f):"wh1"==
a?_.nf("wh1",g,h,f):"wcdi"==a&&_.nf("wcdi",g,h,f)})};Ev=function(a){return"number"==typeof a?a+"px":"100%"==a?a:null};Ut=function(a,c){var f=function(f){f=f||a;var h=Ev(f.width);h&&c.style.width!=h&&(c.style.width=h);(f=Ev(f.height))&&c.style.height!=f&&(c.style.height=f)};uv(a)?a.Vm("onRestyle",f):(a.register("ready",f,_.Dv),a.register("renderstart",f,_.Dv),a.register("resize",f,_.Dv))};eC=function(a,c){for(var f in Mt)if(Mt.hasOwnProperty(f)){var g=Mt[f][1];g&&!c.hasOwnProperty(g)&&(c[g]=a[g])}return c};
fC=function(a,c){var f={},g;for(g in a)a.hasOwnProperty(g)&&(f[a[g][1]||g]=(a[g]&&a[g][0]||gg)(c[g.toLowerCase()],c,gC));return f};hC=function(a){if(a=a.Or)for(var c=0;c<a.length;c++)(new window.Image).src=a[c]};Fv=function(a,c){var f=c.userParams,g=c.siteElement;g||(g=(g=c.iframeNode)&&g.parentNode);if(g&&1===g.nodeType){var h=fC(a.config,f);a.Dm.push({element:g,config:h,pe:eC(h,fC(a.Jr,f)),Sg:3,xp:!!f["data-onload"],Xr:c})}f=a.Dm;for(g=a.bj;0<f.length;)g(f.shift())};
_.iC=function(a){var c=Jt(a);hC(c);_.Sc(c.Fb,function(a){Fv(c,a)});Bd[c.Fb]=!0;var f={S:function(a,f){var l=f||{};l.type=c.Fb;var n=l.type;delete l.type;var q=fv(a);if(q){var t={},v;for(v in l)_.Qa(l,v)&&(t[v.toLowerCase()]=l[v]);t.rd=1;(l=!!t.ri)&&delete t.ri;Hd(n,q,t,[],0,l)}else _.kd("string"==="gapi."+n+".render: missing element "+typeof a?a:"")},go:function(a){hv(a,c.Fb)},B:function(){var a=_.Ka(_.bb,"WI",_.r()),c;for(c in a)delete a[c]}};a=function(){"onload"===jC&&f.go()};$u(c.Fb)||_.rh(a, a);_.e("gapi."+c.Fb+".go",f.go);_.e("gapi."+c.Fb+".render",f.S);return f};
var Gv=Fv,Hv=function(a,c){a.Kj++;_.Sd("wrs",a.Fb,String(a.Kj));var f=c.userParams,g=fC(a.config,f),h=[],l=c.iframeNode,n=c.siteElement,q=St(a,g),t=fC(a.Jr,f);_.Sl(_.Xu(),t);var t=eC(g,t),f=!!f["data-onload"],v=_.Sm,w=_.r();w.renderData=c;w.height=g.height;w.width=g.width;w.id=c.id;w.url=c.url;w.iframeEl=l;w.where=w.container=n;w.apis=["_open"];w.messageHandlers=q;w.messageHandlersFilter=_.Vz;_.Ru(w);l=t;a.qe&&(h[2]=w,h[3]=l,h[4]=q,a.qe("i",h));q=v.Pe(w);q.id=c.id;q.NA(q,w);(0,_.qv)(a,q,g,n,f);h[5]= q;a.qe&&a.qe("e",h)},Fv=function(a,c){var f=c.url;a.lM||_.Uu(f)?_.jo?Hv(a,c):(0,_.At)("gapi.iframes.impl",function(){Hv(a,c)}):_.V.open?Gv(a,c):(0,_.At)("iframes",function(){Gv(a,c)})};
var XF;_.Iv=function(){var a=window;return!!a.performance&&!!a.performance.getEntries};_.Jv=function(a){var c=a.indexOf("#");-1!=c&&(a=a.substring(0,c));a=window.performance.getEntriesByName(a);if(1>a.length)return null;a=a[0];return 0==a.responseStart?null:a};
XF=function(a,c,f){if(_.Iv()){var g=function(){var a=!1;return function(){if(a)return!0;a=!0;return!1}}(),h=function(){g()||window.setTimeout(function(){var g=_.Jv(f.rb().src);g&&_.iv(a,c,Math.round(g.startTime),Math.round(g.requestStart),Math.round(g.responseStart),Math.round(g.responseEnd))},1E3)};f.register(vv(f),h,_.Dv);f.register(Cv(f),h,_.Dv)}};
_.e("gapi.widget.make",_.iC);
_.Up=function(a){a.ma=function(){return a.Tl?a.Tl:a.Tl=new a}};_.Li=function(a){var c=[],f=0,g;for(g in a)c[f++]=a[g];return c};_.Ki=function(a){var c=[],f=0,g;for(g in a)c[f++]=g;return c};_.hi=function(a,c){for(var f in a)if(a[f]==c)return!0;return!1};
a:{var Oe=_.D.navigator;if(Oe){var pg=Oe.userAgent;if(pg){_.We=pg;break a}}_.We=""}_.pf=function(a){return-1!=_.We.indexOf(a)};_.lm=function(){return _.pf("Edge")||_.pf("Trident")||_.pf("MSIE")};
_.gh=function(){};_.ih=[];_.kh=[];_.jh=!1;_.hh=function(a){_.ih[_.ih.length]=a;if(_.jh)for(var c=0;c<_.kh.length;c++)a((0,_.H)(_.kh[c].wrap,_.kh[c]))};
var hD;_.se=function(a){if(Error.captureStackTrace)Error.captureStackTrace(this,_.se);else{var c=Error().stack;c&&(this.stack=c)}a&&(this.message=String(a))};_.J(_.se,Error);_.se.prototype.name="CustomError";_.vC=function(a){return a};_.rf=function(a){var c={},f;for(f in a)c[f]=a[f];return c};_.Og=function(a){for(var c in a)return!1;return!0};
_.RE=function(a){for(var c={},f=0,g=0;g<a.length;){var h=a[g++],l=_.Vg(h)?"o"+_.oe(h):(typeof h).charAt(0)+h;Object.prototype.hasOwnProperty.call(c,l)||(c[l]=!0,a[f++]=h)}a.length=f};hD=function(a,c,f){this.M=f;this.ha=a;this.qa=c;this.G=0;this.B=null};hD.prototype.get=function(){var a;0<this.G?(this.G--,a=this.B,this.B=a.next,a.next=null):a=this.ha();return a};hD.prototype.put=function(a){this.qa(a);this.G<this.M&&(this.G++,a.next=this.B,this.B=a)};
var tp,$o,ep,Yo;tp=function(a){_.D.setTimeout(function(){throw a;},0)};_.qk=function(a){a=Yo(a);!_.vd(_.D.setImmediate)||_.D.Window&&_.D.Window.prototype&&_.D.Window.prototype.setImmediate==_.D.setImmediate?($o||($o=ep()),$o(a)):_.D.setImmediate(a)};
ep=function(){var a=_.D.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!_.pf("Presto")&&(a=function(){var a=window.document.createElement("IFRAME");a.style.display="none";a.src="";window.document.documentElement.appendChild(a);var c=a.contentWindow,a=c.document;a.open();a.write("");a.close();var f="callImmediate"+Math.random(),g="file:"==c.location.protocol?"*":c.location.protocol+"//"+c.location.host,a=(0,_.H)(function(a){if(("*"==
g||a.origin==g)&&a.data==f)this.port1.onmessage()},this);c.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){c.postMessage(f,g)}}});if("undefined"!==typeof a&&!_.lm()){var c=new a,f={},g=f;c.port1.onmessage=function(){if(_.kf(f.next)){f=f.next;var a=f.xC;f.xC=null;a()}};return function(a){g.next={xC:a};g=g.next;c.port2.postMessage(0)}}return"undefined"!==typeof window.document&&"onreadystatechange"in window.document.createElement("SCRIPT")?function(a){var c=window.document.createElement("SCRIPT"); c.onreadystatechange=function(){c.onreadystatechange=null;c.parentNode.removeChild(c);c=null;a();a=null};window.document.documentElement.appendChild(c)}:function(a){_.D.setTimeout(a,0)}};Yo=_.vC;_.hh(function(a){Yo=a});
var LD=function(){this.G=this.B=null},xE=new hD(function(){return new uE},function(a){a.reset()},100);LD.prototype.add=function(a,c){var f=xE.get();f.set(a,c);this.G?this.G.next=f:this.B=f;this.G=f};LD.prototype.remove=function(){var a=null;this.B&&(a=this.B,this.B=this.B.next,this.B||(this.G=null),a.next=null);return a};var uE=function(){this.next=this.scope=this.Ip=null};uE.prototype.set=function(a,c){this.Ip=a;this.scope=c;this.next=null}; uE.prototype.reset=function(){this.next=this.scope=this.Ip=null};
var Qp=function(a,c){um||Pm();up||(um(),up=!0);Lp.add(a,c)},um,Pm=function(){if(_.D.Promise&&_.D.Promise.resolve){var a=_.D.Promise.resolve();um=function(){a.then(Ap)}}else um=function(){_.qk(Ap)}},up=!1,Lp=new LD,Ap=function(){for(var a=null;a=Lp.remove();){try{a.Ip.call(a.scope)}catch(c){tp(c)}xE.put(a)}up=!1};
_.Rp=function(a){a.prototype.then=a.prototype.then;a.prototype.$goog_Thenable=!0};_.Wp=function(a){if(!a)return!1;try{return!!a.$goog_Thenable}catch(c){return!1}};var Xq,Bs,Dt;_.C=function(a,c){this.B=0;this.wc=void 0;this.M=this.G=this.ha=null;this.qa=this.Ka=!1;if(a==_.yk)hq(this,2,c);else try{var f=this;a.call(c,function(a){hq(f,2,a)},function(a){hq(f,3,a)})}catch(g){hq(this,3,g)}};Xq=function(){this.next=this.ha=this.G=this.M=this.B=null;this.qa=!1};Xq.prototype.reset=function(){this.ha=this.G=this.M=this.B=null;this.qa=!1};Bs=new hD(function(){return new Xq},function(a){a.reset()},100);Dt=function(a,c,f){var g=Bs.get();g.M=a;g.G=c;g.ha=f;return g};
_.yk=function(){};_.C.prototype.then=function(a,c,f){return uq(this,_.vd(a)?a:null,_.vd(c)?c:null,f)};_.Rp(_.C);_.$t=function(a,c,f,g){a instanceof _.C?lr(a,Dt(c||_.gh,f||null,g)):a.then(c,f,g)};_.C.prototype.cancel=function(a){0==this.B&&Qp(function(){var c=new tq(a);Mq(this,c)},this)};
var Mq=function(a,c){if(0==a.B)if(a.ha){var f=a.ha;if(f.G){for(var g=0,h=null,l=null,n=f.G;n&&(n.qa||(g++,n.B==a&&(h=n),!(h&&1<g)));n=n.next)h||(l=n);h&&(0==f.B&&1==g?Mq(f,c):(l?(g=l,g.next==f.M&&(f.M=g),g.next=g.next.next):ju(f),Wq(f,h,3,c)))}a.ha=null}else hq(a,3,c)},lr=function(a,c){a.G||2!=a.B&&3!=a.B||er(a);a.M?a.M.next=c:a.G=c;a.M=c},uq=function(a,c,f,g){var h=Dt(null,null,null);h.B=new _.C(function(a,n){h.M=c?function(f){try{var h=c.call(g,f);a(h)}catch(v){n(v)}}:a;h.G=f?function(c){try{var h=
f.call(g,c);!_.kf(h)&&c instanceof tq?n(c):a(h)}catch(v){n(v)}}:n});h.B.ha=a;lr(a,h);return h.B};_.C.prototype.Ld=function(a){this.B=0;hq(this,2,a)};_.C.prototype.ye=function(a){this.B=0;hq(this,3,a)};
var hq=function(a,c,f){if(0==a.B){if(a==f)c=3,f=new TypeError("Promise cannot resolve to itself");else{if(_.Wp(f)){a.B=1;_.$t(f,a.Ld,a.ye,a);return}if(_.Vg(f))try{var g=f.then;if(_.vd(g)){mr(a,f,g);return}}catch(h){c=3,f=h}}a.wc=f;a.B=c;a.ha=null;er(a);3!=c||f instanceof tq||wq(a,f)}},mr=function(a,c,f){a.B=1;var g=!1,h=function(c){g||(g=!0,a.Ld(c))},l=function(c){g||(g=!0,a.ye(c))};try{f.call(c,h,l)}catch(n){l(n)}},er=function(a){a.Ka||(a.Ka=!0,Qp(a.Kh,a))},ju=function(a){var c=null;a.G&&(c=a.G,
a.G=c.next,c.next=null);a.G||(a.M=null);return c};_.C.prototype.Kh=function(){for(var a=null;a=ju(this);)Wq(this,a,this.B,this.wc);this.Ka=!1};var Wq=function(a,c,f,g){if(3==f&&c.G&&!c.qa)for(;a&&a.qa;a=a.ha)a.qa=!1;if(c.B)c.B.ha=null,xs(c,f,g);else try{c.qa?c.M.call(c.ha):xs(c,f,g)}catch(h){nr.call(null,h)}Bs.put(c)},xs=function(a,c,f){2==c?a.M.call(a.ha,f):a.G&&a.G.call(a.ha,f)},wq=function(a,c){a.qa=!0;Qp(function(){a.qa&&nr.call(null,c)})},nr=tp,tq=function(a){_.se.call(this,a)};_.J(tq,_.se); tq.prototype.name="cancel";

_.Fu=function(a){return new _.C(a)};
var AB=function(a){this.B=a};_.k=AB.prototype;_.k.value=function(){return this.B};_.k.Es=function(a){this.B.width=a;return this};_.k.Ne=function(){return this.B.width};_.k.Rm=function(a){this.B.height=a;return this};_.k.Cd=function(){return this.B.height};
var FN;FN=function(a){this.B=a};_.jN=function(a){a.B.closeClickDetection=!0};FN.prototype.Rm=function(a){this.B.height=a;return this};FN.prototype.Cd=function(){return this.B.height};FN.prototype.Es=function(a){this.B.width=a;return this};FN.prototype.Ne=function(){return this.B.width};
_.BB=function(a){this.B=a||{}};_.BB.prototype.value=function(){return this.B};_.IB=function(a,c){a.B.url=c;return a};_.BB.prototype.getUrl=function(){return this.B.url};_.DN=function(a,c){a.B.style=c;return a};_.BB.prototype.Hh=function(){return this.B.id};_.CN=function(a,c){a.B.queryParams=c;return a};_.Ko=function(a,c){a.B.relayOpen=c;return a};_.BB.prototype.Rd=_.b(15);_.BB.prototype.getContext=_.b(16);_.BB.prototype.ci=function(){return this.B.openerIframe};_.Du=function(a){return new FN(a.B)}; _.BB.prototype.Wp=function(){this.B.attributes=this.B.attributes||{};return new AB(this.B.attributes)};_.KN=function(a){a.B.connectWithQueryParams=!0;return a};

var Ek,pl,Bp,Lu,Ku,Nu,Zz,Xz;_.Qm=function(a){a.B.waitForOnload=!0;return a};_.BB.prototype.getContext=_.d(16,function(){return this.B.context});_.BB.prototype.Rd=_.d(15,function(){return this.B.apis});Ek=function(a){return(a=a.B.timeout)?a:null};_.AN=function(a,c){a.B.messageHandlersFilter=c;return a};_.BN=function(a,c){a.B.messageHandlers=c;return a};_.rl=function(a){return a.B.rpctoken};pl=function(a,c){a.B.onload=c};Bp=function(a,c,f){this.promise=a;this.resolve=c;this.reject=f};
Lu=function(a){this.resolve=this.reject=null;this.promise=_.Fu((0,_.H)(function(a,f){this.resolve=a;this.reject=f},this));a&&(this.promise=Ku(this.promise,a))};Ku=function(a,c){return a.then(function(a){try{c(a)}catch(g){}return a})};_.Su=function(){var a,c,f=new _.C(function(f,h){a=f;c=h});return new Bp(f,a,c)};_.Pr=function(a){return new _.C(function(c,f){var g=a.length,h=[];if(g)for(var l=function(a,f){g--;h[a]=f;0==g&&c(h)},n=function(a){f(a)},q=0,t;t=a[q];q++)_.$t(t,_.ma(l,q),n);else c(h)})}; Nu=function(a){return new _.C(_.yk,a)};
_.yp=function(a){this.B=a||{}};_.J(_.yp,_.BB);_.oq=function(a,c){a.B.frameName=c;return a};_.yp.prototype.Tp=function(){return this.B.frameName};_.Lr=function(a,c){a.B.rpcAddr=c;return a};_.yp.prototype.Fl=function(){return this.B.rpcAddr};_.Mr=function(a,c){a.B.retAddr=c;return a};_.Ss=function(a){return a.B.retAddr};_.yp.prototype.Og=function(a){this.B.origin=a;return this};_.yp.prototype.Pq=function(){return this.B.origin};_.yp.prototype.vj=function(a){this.B.setRpcReady=a;return this}; _.yp.prototype.Pm=function(a){this.B.context=a;return this};var ft=function(a,c){a.B._rpcReadyFn=c};_.yp.prototype.rb=function(){return this.B.iframeEl};
var co,Wz;co=/^[\w\.\-]*$/;_.Uz=function(a){return a.Db===a.getContext().Db};_.Vz=function(){return!0};_.AD=function(a){for(var c=_.r(),f=0;f<a.length;f++)c[a[f]]=!0;return function(a){return!!c[a.Db]}};Wz=function(a,c,f){var g=Xz[a];return function(a){if(!c.Ma()&&(_.Sa(this.origin===c.Db,"Wrong origin "+this.origin+" != "+c.Db),g&&0<g.length)){for(var l=this.callback,n=[],q=0;q<g.length;q++)n.push(Nu(g[q].call(c,a,c)));f||_.Pr(n).then(l)}}};
_.Yz=function(a,c,f){_.Sa("_default"!=a,"Cannot update default api");Zz[a]={map:c,filter:f}};_.$z=function(a,c,f){_.Sa("_default"!=a,"Cannot update default api");_.Ka(Zz,a,{map:{},filter:_.Uz}).map[c]=f};_.aA=function(a,c){_.Ka(Zz,"_default",{map:{},filter:_.Vz}).map[a]=c;_.fb(_.Sm.B,function(f){f.register(a,c,_.Vz)})};_.jo=function(){return _.Sm};
_.bA=function(a){a=a||{};this.Oj=!1;this.zt=_.r();this.B=_.r();this.ye=a._window||_.ta;this.ha=this.ye.location.href;this.pa=(this.Na=_.Wa(this.ha,"parent",""))?_.Wa(this.ha,"pfname",""):"";this.El=this.Na?_.Wa(this.ha,"id",""):"";this.Jh=_.Ln(this.El,this.pa);this.Db=_.Rb.Pq(this.ha);if(this.El){var c=new _.yp;_.Lr(c,a._parentRpcAddr||"..");_.Mr(c,a._parentRetAddr||this.El);c.Og(_.Rb.Pq(_.Wa(this.ha,"parent",this.ha)));_.oq(c,this.pa);this.G=this.Pe(c.value())}else this.G=null};_.k=_.bA.prototype;
_.k.Ma=function(){return this.Oj};_.k.U=function(){if(!this.Ma()){for(var a=0;a<this.B.length;a++)this.B[a].U();this.Oj=!0}};_.k.Tp=function(){return this.Jh};_.k.Aa=function(){return this.ye};_.k.sj=_.b(17);_.k.$h=function(a){return this.zt[a]};
_.k.Pe=function(a){_.Sa(!this.Ma(),"Cannot attach iframe in disposed context");a=new _.yp(a);a.Fl()||_.Lr(a,a.Hh());_.Ss(a)||_.Mr(a,"..");a.Pq()||a.Og(_.Rb.Pq(a.getUrl()));a.Tp()||_.oq(a,_.Ln(a.Hh(),this.Jh));var c=a.Tp();if(this.B[c])return this.B[c];var f=a.Fl(),g=f;a.Pq()&&(g=f+"|"+a.Pq());var h=_.Ss(a),l=_.rl(a);l||(l=(l=a.rb())&&(l.getAttribute("data-postorigin")||l.src)||a.getUrl(),l=_.Wa(l,"rpctoken"));ft(a,_.Mz(g,h,l,a.B._popupWindow));g=((window.gadgets||{}).rpc||{}).setAuthToken;l&&g&&g(f,
l);var n=new _.Rm(this,f,c,a),q=a.B.messageHandlersFilter;_.fb(a.B.messageHandlers,function(a,c){n.register(c,a,q)});a.B.setRpcReady&&n.vj();_.jA(n,"_g_rpcReady");return n};_.k.CA=function(a){_.oq(a,null);var c=a.Hh();!c||co.test(c)&&!this.Aa().document.getElementById(c)||(_.kd("Ignoring requested iframe ID - "+c),a.B.id=null)};
_.k.cj=function(a){_.Sa(!this.Ma(),"Cannot open iframe in disposed context");var c=new _.yp(a);rt(this,c);var f=c.Tp();if(f&&this.B[f])return this.B[f];this.CA(c);f=c.getUrl();_.Sa(f,"No url for new iframe");var g=c.B.queryParams||{};g.usegapi="1";_.CN(c,g);g=this.te&&this.te(f,c);g||(g=c.B.where,_.Sa(!!g,"No location for new iframe"),f=_.tb(f,g,a),c.B.iframeEl=f,g=f.getAttribute("id"));_.Lr(c,g).B.id=g;c.Og(_.Rb.Pq(c.B.eurl||""));this.ca&&this.ca(c,c.rb());f=this.Pe(a);f.NA&&f.NA(f,a);(a=c.B.onCreate)&&
a(f);c.B.disableRelayOpen||f.Ce("_open");return f};
var cA=function(a,c,f){var g=c.B.canvasUrl;if(!g)return f;_.Sa(!c.B.allowPost,"Post is not supported when using canvas url");var h=c.getUrl();_.Sa(h&&_.Rb.Pq(h)===a.Db&&_.Rb.Pq(g)===a.Db,"Wrong origin for canvas or hidden url "+g);_.IB(c,g);_.Qm(c);c.B.canvasUrl=null;return function(a){var c=a.Aa(),g=c.location.hash,g=_.Un(h)+(/#/.test(h)?g.replace(/^#/,"&"):g);c.location.replace(g);f&&f(a)}},dA=function(a,c,f){var g=c.B.relayOpen;if(g){var h=a.G;g instanceof _.Rm?(h=g,_.Ko(c,0)):0<Number(g)&&_.Ko(c,
Number(g)-1);if(h){_.Sa(!!h.DE,"Relaying iframe open is disabled");if(g=c.B.style)if(g=_.eA[g])c.Pm(a),g(c.value()),c.Pm(null);c.B.openerIframe=null;f.resolve(h.DE(c));return!0}}return!1},fA=function(a,c,f){var g=c.B.style;if(g)if(_.Sa(!!_.gA,"Defer style is disabled, when requesting style "+g),_.hA[g])rt(a,c);else return iA(g,function(){_.Sa(!!_.hA[g],"Fail to load style - "+g);f.resolve(a.open(c.value()))}),!0;return!1};
_.bA.prototype.open=function(a,c){_.Sa(!this.Ma(),"Cannot open iframe in disposed context");var f=new _.yp(a),g=cA(this,f,c),h=new Lu(g);(g=f.getUrl())&&_.IB(f,_.Un(g));if(dA(this,f,h)||fA(this,f,h)||dA(this,f,h))return h.promise;var l;if(null!=Ek(f)){var n=(0,window.setTimeout)(function(){l.rb().src="about:blank";h.reject({timeout:"Exceeded time limit of :"+Ek(f)+"milliseconds"})},Ek(f)),q=h.resolve;h.resolve=function(a){(0,window.clearTimeout)(n);q(a)}}f.B.waitForOnload&&pl(f.Wp(),function(){h.resolve(l)});
l=this.cj(a);f.B.waitForOnload||h.resolve(l);return h.promise};_.bA.prototype.Ei=_.b(18);_.Rm=function(a,c,f,g){this.Oj=!1;this.Yf=a;this.Nc=c;this.Jh=f;this.zd=g;this.re=_.Ss(this.zd);this.Db=this.zd.Pq();this.iK=this.zd.rb();this.vF=this.zd.B.where;this.$o=[];this.Ce("_default");a=this.zd.Rd()||[];for(c=0;c<a.length;c++)this.Ce(a[c]);this.Yf.B[f]=this};_.k=_.Rm.prototype;_.k.Ma=function(){return this.Oj};
_.k.U=function(){if(!this.Ma()){for(var a=0;a<this.$o.length;a++)this.unregister(this.$o[a]);delete _.Sm.B[this.Tp()];this.Oj=!0}};_.k.getContext=function(){return this.Yf};_.k.Fl=function(){return this.Nc};_.k.Tp=function(){return this.Jh};_.k.rb=function(){return this.iK};_.k.V=function(){return this.vF};_.k.qc=function(a){this.vF=a};_.k.vj=function(){(0,this.zd.B._rpcReadyFn)()};_.k.Vm=function(a,c){this.zd.value()[a]=c};_.k.Zf=function(a){return this.zd.value()[a]};_.k.va=function(){return this.zd.value()};
_.k.Hh=function(){return this.zd.Hh()};_.k.Pq=function(){return this.Db};_.k.register=function(a,c,f){_.Sa(!this.Ma(),"Cannot register handler on disposed iframe "+a);_.Sa((f||_.Uz)(this),"Rejecting untrusted message "+a);f=this.Jh+":"+this.Yf.Jh+":"+a;1==_.Ka(Xz,f,[]).push(c)&&(this.$o.push(a),_.sz(f,Wz(f,this,"_g_wasClosed"===a)))};
_.k.unregister=function(a,c){var f=this.Jh+":"+this.Yf.Jh+":"+a,g=Xz[f];if(g){if(c){var h=_.xd.call(g,c);0<=h&&g.splice(h,1)}else g.splice(0,g.length);0==g.length&&(h=_.xd.call(this.$o,a),0<=h&&this.$o.splice(h,1),_.wz(f))}};_.k.fq=function(){return this.$o};_.k.Ce=function(a){this.Sy=this.Sy||[];if(!(0<=_.xd.call(this.Sy,a))){this.Sy.push(a);a=Zz[a]||{map:{}};for(var c in a.map)_.Qa(a.map,c)&&this.register(c,a.map[c],a.filter)}};
_.k.send=function(a,c,f,g){_.Sa(!this.Ma(),"Cannot send message to disposed iframe - "+a);_.Sa((g||_.Uz)(this),"Wrong target for message "+a);f=new Lu(f);_.Az(this.Nc,this.Yf.Jh+":"+this.Jh+":"+a,f.resolve,c);return f.promise};_.jA=function(a,c,f,g){return a.send(c,f,g,_.Vz)};_.Rm.prototype.aL=function(a){return a};_.Rm.prototype.ping=_.b(19);Xz=_.r();Zz=_.r();_.Sm=new _.bA;_.aA("_g_rpcReady",_.Rm.prototype.vj);_.aA("_g_discover",_.Rm.prototype.fq);_.aA("_g_ping",_.Rm.prototype.aL);
var iA,rt;_.hA=_.r();_.eA=_.r();_.gA=function(a){return _.hA[a]};iA=function(a,c){_.Ua.load("gapi.iframes.style."+a,c)};rt=function(a,c){var f=c.B.style;if(f){_.DN(c,null);var g=_.hA[f];_.Sa(g,"No such style: "+f);c.Pm(a);g(c.value());c.Pm(null)}};var nA,oA;nA={height:!0,width:!0};oA=/^(?!-*(?:expression|(?:moz-)?binding))(?:[.#]?-?(?:[_a-z0-9-]+)(?:-[_a-z0-9-]+)*-?|-?(?:[0-9]+(?:\.[0-9]*)?|\.[0-9]+)(?:[a-z]{1,2}|%)?|!important|)$/i;_.no=function(a){"number"===typeof a&&(a=String(a)+"px");return a};_.Rm.prototype.Aa=function(){if(!_.Uz(this))return null;var a=this.zd.B._popupWindow;if(a)return a;for(var c=this.Nc.split("/"),a=this.getContext().Aa(),f=0;f<c.length&&a;f++){var g=c[f];".."===g?a=a==a.parent?a.opener:a.parent:a=a.frames[g]}return a};
var lA=function(a,c){var f=a.G,g=!0;c.filter&&(g=c.filter.call(c.qg,c.params));return Nu(g).then(function(g){if(g&&f){var l;c.um&&c.um.call(a,c.params);c.dF?l=c.dF(c.params):l=_.jA(f,c.message,c.params);return c.pn?l.then(function(){return!0}):!0}return!1})};
_.bA.prototype.Ka=function(a,c,f){a=lA(this,{dF:function(a){var c=_.Sm.G;_.fb(_.Sm.B,function(f){f!==c&&_.jA(f,"_g_wasClosed",a)});var f=_.jA(c,"_g_closeMe",a);_.jA(c,"_g_wasClosed",a);return f},message:"_g_closeMe",params:a,qg:f,filter:this.$h("onCloseSelfFilter")});c=new Lu(c);c.resolve(a);return c.promise};_.bA.prototype.po=function(a,c,f){a=a||{};c=new Lu(c);c.resolve(lA(this,{message:"_g_restyleMe",params:a,qg:f,filter:this.$h("onRestyleSelfFilter"),pn:!0,um:this.Kb}));return c.promise};
_.bA.prototype.Kb=function(a){"auto"===a.height&&(a.height=_.Ob.Cd())};_.mA=function(a){var c={};if(a)for(var f in a)_.Qa(a,f)&&_.Qa(nA,f)&&oA.test(a[f])&&(c[f]=a[f]);return c};_.k=_.Rm.prototype;_.k.close=function(a,c){return _.jA(this,"_g_close",a,c)};_.k.sD=function(a,c){return _.jA(this,"_g_restyle",a,c)};_.k.ds=function(a,c){return _.jA(this,"_g_restyleDone",a,c)};_.k.qp=function(a){return this.getContext().Ka(a,void 0,this)};
_.k.tD=function(a){if(a&&"object"===typeof a)return this.getContext().po(a,void 0,this)};_.k.fs=function(a){var c=this.zd.B.onRestyle;c&&c.call(this,a,this);a=a&&"object"===typeof a?_.mA(a):{};(c=this.rb())&&a&&"object"===typeof a&&(_.Qa(a,"height")&&(a.height=_.no(a.height)),_.Qa(a,"width")&&(a.width=_.no(a.width)),_.Sl(a,c.style))};
_.k.rp=function(a){var c=this.zd.B.onClose;c&&c.call(this,a,this);this.BC&&this.BC()||(a=this.rb())&&a.parentNode&&a.parentNode.removeChild(a);if(a=this.zd.B.controller)c={},c.frameName=this.Tp(),_.jA(a,"_g_disposeControl",c)};_.bA.prototype.Za=_.b(20);_.bA.prototype.fb=_.b(21);_.Rm.prototype.QE=_.b(22);_.Rm.prototype.PE=function(a,c){this.register("_g_wasClosed",a,c)};_.Rm.prototype.pM=function(){this.getContext().Aa().setTimeout((0,_.H)(function(){this.U()},this),0)};_.aA("_g_close",_.Rm.prototype.qp); _.aA("_g_closeMe",_.Rm.prototype.rp);_.aA("_g_restyle",_.Rm.prototype.tD);_.aA("_g_restyleMe",_.Rm.prototype.fs);_.aA("_g_wasClosed",_.Rm.prototype.pM);

var ol,jv,Tu;_.Pu=function(a,c){a.B.onClose=c};ol=function(a,c){a.B.apis=c;return a};jv=function(a,c){a.B.rpctoken=c;return a};_.JB=function(a,c){a.B.where=c;return a};_.uW=function(a){a.B.show=!0;return a};_.Lv=function(a,c){a.B.anchor=c;return a};Tu=function(a){this.Kd=a||{}};Tu.prototype.value=function(){return this.Kd};var Kv=function(a){var c=new Tu;c.Kd.role=a;return c};Tu.prototype.na=function(a){this.Kd.handler=a;return this};Tu.prototype.Cr=function(){return this.Kd.handler};
var yn=function(a,c){a.Kd.filter=c;return a};Tu.prototype.KE=function(){return this.Kd.filter};var Mv=function(a,c){a.Kd.apis=c;return a};Tu.prototype.Rd=function(){return this.Kd.apis};var $v=function(a){a.Kd.runOnce=!0;return a},kv=function(a){this.B=a||{}};kv.prototype.value=function(){return this.B};kv.prototype.getIframe=function(){return this.B.iframe};var lv=function(a,c){a.B.role=c;return a},mv=function(a,c){a.B.data=c;return a};kv.prototype.vj=function(a){this.B.setRpcReady=a;return this};
var Tz=function(a,c){a.B.rpctoken=c;return a},tB=function(a){a.B.selfConnect=!0;return a},fB=/^https?:\/\/[^\/%\\?#\s]+$/i,bB={longdesc:!0,name:!0,src:!0,frameborder:!0,marginwidth:!0,marginheight:!0,scrolling:!0,align:!0,height:!0,width:!0,id:!0,"class":!0,title:!0,tabindex:!0,hspace:!0,vspace:!0,allowtransparency:!0},ZA=function(a,c,f){var g=a.Nc,h=c.re;_.Mr(_.Lr(f,a.re+"/"+c.Nc),h+"/"+g);_.oq(f,c.Tp()).Og(c.Db)};
_.bA.prototype.wc=function(a,c){var f=new kv(a),g=new kv(c),h=f.B.setRpcReady,l=f.getIframe(),n=g.getIframe();if(n){var q=f.B.rpctoken,t=new _.yp;ZA(l,n,t);mv(lv(Tz(new kv(t.value()),q),f.B.role),f.B.data).vj(h);var v=new _.yp;ZA(n,l,v);mv(lv(Tz(new kv(v.value()),q),g.B.role),g.B.data).vj(!0);_.jA(l,"_g_connect",t.value(),function(){h||_.jA(n,"_g_connect",v.value())});h&&_.jA(n,"_g_connect",v.value())}else g={},mv(lv(tB(new kv(g)),f.B.role),f.B.data),_.jA(l,"_g_connect",g)};_.k=_.Rm.prototype;
_.k.$H=function(a){var c,f=new _.yp(a);a=new kv(f.value());a.B.selfConnect?c=this:(_.Sa(fB.test(f.Pq()),"Illegal origin for connected iframe - "+f.Pq()),c=this.Yf.B[f.Tp()],c)?f.B.setRpcReady&&(c.vj(),_.jA(c,"_g_rpcReady")):(f=_.oq(_.Mr(_.Lr(jv(new _.yp,_.rl(f)),f.Fl()),_.Ss(f)).Og(f.Pq()),f.Tp()).vj(f.B.setRpcReady),c=this.Yf.Pe(f.value()));var f=this.Yf,g=a.B.role;a=a.B.data;dB(f);g=g||"";_.Ka(f.Ld,g,[]).push({qg:c.Tp(),data:a});eB(c,a,f.Kh[g])};
_.k.NA=function(a,c){if(!(new _.yp(c)).B._relayedDepth){var f={};tB(lv(new kv(f),"_opener"));_.jA(a,"_g_connect",f)}};
_.k.DE=function(a){var c=this,f=a.B.messageHandlers,g=a.B.messageHandlersFilter,h=a.B.onClose;_.Pu(_.AN(_.BN(a,null),null),null);_.Su();return _.jA(this,"_g_open",a.value()).then(function(l){var n=new _.yp(l[0]),q=n.Tp();l=new _.yp;var t=c.re,v=_.Ss(n);_.Mr(_.Lr(l,c.Nc+"/"+n.Fl()),v+"/"+t);_.oq(l,q);l.Og(n.Pq());ol(l,n.Rd());jv(l,_.rl(a));_.BN(l,f);_.AN(l,g);_.Pu(l,h);(n=c.Yf.B[q])||(n=c.Yf.Pe(l.value()));return n})};
_.k.CA=function(a){var c=a.getUrl();_.Sa(!c||_.Ul.test(c),"Illegal url for new iframe - "+c);var f=a.Wp().value(),c={},g;for(g in f)_.Qa(f,g)&&_.Qa(bB,g)&&(c[g]=f[g]);_.Qa(f,"style")&&(g=f.style,"object"===typeof g&&(c.style=_.mA(g)));a.value().attributes=c};
_.k.VK=function(a){a=new _.yp(a);this.CA(a);var c=a.B._relayedDepth||0;a.B._relayedDepth=c+1;a.B.openerIframe=this;_.Su();var f=_.rl(a);jv(a,null);return this.Yf.open(a.value()).then((0,_.H)(function(a){var h=(new _.yp(a.va())).Rd(),l=new _.yp;ZA(a,this,l);0==c&&lv(new kv(l.value()),"_opener");l.vj(!0);jv(l,f);_.jA(a,"_g_connect",l.value());l=new _.yp;_.oq(_.Mr(_.Lr(ol(l,h),a.Fl()),a.re),a.Tp()).Og(a.Pq());return l.value()},this))};var dB=function(a){a.Ld||(a.Ld=_.r(),a.Kh=_.r())};
_.bA.prototype.qa=function(a,c,f,g){dB(this);"object"===typeof a?(c=new Tu(a),f=c.Kd.role||""):(c=yn(Mv(Kv(a).na(c),f),g),f=a);g=this.Ld[f]||[];a=!1;for(var h=0;h<g.length&&!a;h++)eB(this.B[g[h].qg],g[h].data,[c]),a=c.Kd.runOnce;f=_.Ka(this.Kh,f,[]);a||c.Kd.dontWait||f.push(c)};_.bA.prototype.eb=_.b(23);
var eB=function(a,c,f){f=f||[];for(var g=0;g<f.length;g++){var h=f[g];if(h&&a){var l=h.KE()||_.Uz;if(a&&l(a)){for(var l=h.Rd()||[],n=0;n<l.length;n++)a.Ce(l[n]);h.Cr()&&h.Cr()(a,c);h.Kd.runOnce&&(f.splice(g,1),--g)}}}};_.bA.prototype.M=function(a,c,f){this.qa($v(yn(Mv(Kv("_opener").na(a),c),f)).value())};_.Rm.prototype.pL=function(a){this.getContext().M(function(c){c.send("_g_wasRestyled",a,void 0,_.Vz)},null,_.Vz)};var gB=_.Sm.G;gB&&gB.register("_g_restyleDone",_.Rm.prototype.pL,_.Vz); _.aA("_g_connect",_.Rm.prototype.$H);var hB={};hB._g_open=_.Rm.prototype.VK;_.Yz("_open",hB,_.Vz);

var od,qd,sd,rd;od=function(a,c){if("string"==typeof a){a=a.toLowerCase();var f;for(f=0;f<c.length;f++)if(c[f]==a)return a}};qd="inline bubble none only pp vertical-bubble".split(" ");sd=["left","right"];_.pd=function(a){return od(a,qd)};rd=function(a){return od(a,sd)};_.td=function(a){a.source=[null,"source"];a.expandTo=[null,"expandTo"];a.align=[rd];a.annotation=[_.pd];a.origin=[_.md]};

_.V.qj("bubble",function(a){(0,_.At)("iframes-styles-bubble",a)});
_.V.qj("slide-menu",function(a){(0,_.At)("iframes-styles-slide-menu",a)});
var dd={tall:{"true":{width:50,height:60},"false":{width:50,height:24}},small:{"false":{width:24,height:15},"true":{width:70,height:15}},medium:{"false":{width:32,height:20},"true":{width:90,height:20}},standard:{"false":{width:38,height:24},"true":{width:106,height:24}}},cd=function(a){return"string"==typeof a&&dd[a.toLowerCase()]?a.toLowerCase():"standard"},$c=function(a){return"string"==typeof a?""!=a&&"0"!=a&&"false"!=a.toLowerCase():!!a},ed=function(a,c){return"tall"==cd(c)?"true":null==a||$c(a)?
"true":"false"},bd=function(a){if($c(a))return"true"},ad=function(a){var c=(0,window.parseInt)(a,10);if(c==a)return String(c)},xv={width:180,height:35},hd={href:[_.Zc,"url"],width:[ad],size:[cd],resize:[bd],autosize:[bd],count:[function(a,c){return ed(c.count,c.size)}],db:[_.fd],ecp:[_.gd],textcolor:[function(a){if("string"==typeof a&&a.match(/^[0-9A-F]{6}$/i))return a}],drm:[bd],recommendations:[],fu:[],ad:[bd],cr:[ad],ag:[ad],"fr-ai":[],"fr-sigh":[]},wv=function(a,c,f){a=_.pd(a);c=cd(c);if(""!=
a){if("inline"==a||"only"==a)return a=450,f.width&&(a=120<f.width?f.width:120),{width:a,height:dd[c]["false"].height};if("bubble"!=a){if("none"==a)return dd[c]["false"];if("pp"==a)return xv}}return dd[c]["true"]},gO=function(a,c){return dd[cd(a)][ed(c,a)]};
(function(){var a={0:"plusone"},c=_.P("iframes/plusone/preloadUrl");c&&(a[7]=c);_.td(hd);a[1]=hd;a[2]={width:[function(a,c){return c.annotation?wv(c.annotation,c.size,c).width:gO(c.size,c.count).width}],height:[function(a,c){return c.annotation?wv(c.annotation,c.size,c).height:gO(c.size,c.count).height}]};a[3]={onPlusOne:{Kg:function(a){return"on"==a.state?"+1":null},Qh:"callback"},onstartinteraction:!0,onendinteraction:!0,onpopup:!0};a[4]=["div","button"];a=_.iC(a);_.qG=a.go;_.pG=a.S})();

});
// Google Inc.
_text/javascriptÕ	'-./0_'https://platform.twitter.com/widgets.jsObplist00Ô‹ŒX$versionX$objectsY$archiverT$top † ¯1#)*0123]^_`abcdefghijklmnopqrstuvwxyz{|}~€„…†U$nullİ	
 !"R$6S$10R$2R$7R$3S$11R$8V$classR$4R$9R$0R$5R$1€	€€€.€0€€/€Ó$%&'(WNS.base[NS.relative€ €€_'https://platform.twitter.com/widgets.jsÒ+,-.Z$classnameX$classesUNSURL¢-/XNSObject#AºôÒ:ˆ1H ÈÓ456I\WNS.keysZNS.objects¯789:;<=>?@ABCDEFGH€	€
€€€€€€€€€€€€€€€€¯JKLMNOPQRSTUVWXYZ[€€€€€€ €!€"€#€$€%€&€'€(€)€*€+€,€-\Content-TypeSP3P\X-Cache-HitsZKeep-Alive]Last-Modified_Content-EncodingVServerSAgeSVia[X-Served-By]Cache-ControlTDateWX-Timer^Content-LengthZConnectionTEtagTVaryWX-Cache_%application/javascript; charset=utf-8_TCP="CAO DSP LAW CURa ADMa DEVa TAIa PSAa PSDa IVAa IVDa OUR BUS IND UNI COM NAV INT"V244278_timeout=7, max=50_Mon, 27 Apr 2015 21:40:59 GMTTgzipVApacheT1329[1.1 varnish_cache-tw-tyo1-cr1-4-TWTYO1_public, max-age=1800_Sat, 02 May 2015 09:36:58 GMT_S1430559418.620628,VS0,VE0U34206ZKeep-Alive_'"44a1bc9b6f728cd735a94b8506487699+gzip"_Accept-EncodingSHITÒ+,‚ƒ\NSDictionary¢‚/…_application/javascriptÒ+,‡ˆ_NSHTTPURLResponse£‰Š/_NSHTTPURLResponse]NSURLResponse_NSKeyedArchiverÑ_WebResourceResponse€    # - 2 7 k q Œ  “ – ™ œ   £ ª ­ ° ³ ¶ ¹ » ½ ¿ Á Ã Ä Æ È Ê Ì Î Ğ Ò Ù á í ï ñ ó"-6<?HQSU\do„†ˆŠŒ’”–˜šœ ¢¤¦¨½¿ÁÃÅÇÉËÍÏÑÓÕ×ÙÛİßáãğô-48<HV[cr}‚‡·)INUZfƒšº×İè$(-:=@Y^rvŠ˜ª­Ã                           ÅO  é!function(){var t;Function&&Function.prototype&&Function.prototype.bind&&(/MSIE [678]/.test(navigator.userAgent)||!function e(t,n,i){function r(o,a){if(!n[o]){if(!t[o]){var c="function"==typeof require&&require;if(!a&&c)return c(o,!0);if(s)return s(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var d=n[o]={exports:{}};t[o][0].call(d.exports,function(e){var n=t[o][1][e];return r(n?n:e)},d,d.exports,e,t,n,i)}return n[o].exports}for(var s="function"==typeof require&&require,o=0;o<i.length;o++)r(i[o]);return r}({1:[function(e,n,i){(function(){"use strict";function e(t){return"function"==typeof t||"object"==typeof t&&null!==t}function i(t){return"function"==typeof t}function r(t){return"object"==typeof t&&null!==t}function s(){}function o(){return function(){process.nextTick(d)}}function a(){var t=0,e=new j(d),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}function c(){var t=new MessageChannel;return t.port1.onmessage=d,function(){t.port2.postMessage(0)}}function u(){return function(){setTimeout(d,1)}}function d(){for(var t=0;k>t;t+=2){var e=q[t],n=q[t+1];e(n),q[t]=void 0,q[t+1]=void 0}k=0}function h(){}function l(){return new TypeError("You cannot resolve a promise with itself")}function f(){return new TypeError("A promises callback cannot return that same promise.")}function p(t){try{return t.then}catch(e){return V.error=e,V}}function m(t,e,n,i){try{t.call(e,n,i)}catch(r){return r}}function g(t,e,n){H(function(t){var i=!1,r=m(n,e,function(n){i||(i=!0,e!==n?w(t,n):_(t,n))},function(e){i||(i=!0,A(t,e))},"Settle: "+(t._label||" unknown promise"));!i&&r&&(i=!0,A(t,r))},t)}function v(t,e){e._state===z?_(t,e._result):t._state===B?A(t,e._result):E(e,void 0,function(e){w(t,e)},function(e){A(t,e)})}function y(t,e){if(e.constructor===t.constructor)v(t,e);else{var n=p(e);n===V?A(t,V.error):void 0===n?_(t,e):i(n)?g(t,e,n):_(t,e)}}function w(t,n){t===n?A(t,l()):e(n)?y(t,n):_(t,n)}function b(t){t._onerror&&t._onerror(t._result),T(t)}function _(t,e){t._state===F&&(t._result=e,t._state=z,0===t._subscribers.length||H(T,t))}function A(t,e){t._state===F&&(t._state=B,t._result=e,H(b,t))}function E(t,e,n,i){var r=t._subscribers,s=r.length;t._onerror=null,r[s]=e,r[s+z]=n,r[s+B]=i,0===s&&t._state&&H(T,t)}function T(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var i,r,s=t._result,o=0;o<e.length;o+=3)i=e[o],r=e[o+n],i?D(n,i,r,s):r(s);t._subscribers.length=0}}function x(){this.error=null}function I(t,e){try{return t(e)}catch(n){return G.error=n,G}}function D(t,e,n,r){var s,o,a,c,u=i(n);if(u){if(s=I(n,r),s===G?(c=!0,o=s.error,s=null):a=!0,e===s)return void A(e,f())}else s=r,a=!0;e._state!==F||(u&&a?w(e,s):c?A(e,o):t===z?_(e,s):t===B&&A(e,s))}function N(t,e){try{e(function(e){w(t,e)},function(e){A(t,e)})}catch(n){A(t,n)}}function S(t,e,n,i){this._instanceConstructor=t,this.promise=new t(h,i),this._abortOnReject=n,this._validateInput(e)?(this._input=e,this.length=e.length,this._remaining=e.length,this._init(),0===this.length?_(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&_(this.promise,this._result))):A(this.promise,this._validationError())}function C(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function R(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function P(t){this._id=X++,this._state=void 0,this._result=void 0,this._subscribers=[],h!==t&&(i(t)||C(),this instanceof P||R(),N(this,t))}var L;L=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var M,O=L,k=(Date.now||function(){return(new Date).getTime()},Object.create||function(t){if(arguments.length>1)throw new Error("Second argument not supported");if("object"!=typeof t)throw new TypeError("Argument must be an object");return s.prototype=t,new s},0),H=function(t,e){q[k]=t,q[k+1]=e,k+=2,2===k&&M()},W="undefined"!=typeof window?window:{},j=W.MutationObserver||W.WebKitMutationObserver,U="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,q=new Array(1e3);M="undefined"!=typeof process&&"[object process]"==={}.toString.call(process)?o():j?a():U?c():u();var F=void 0,z=1,B=2,V=new x,G=new x;S.prototype._validateInput=function(t){return O(t)},S.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},S.prototype._init=function(){this._result=new Array(this.length)};var $=S;S.prototype._enumerate=function(){for(var t=this.length,e=this.promise,n=this._input,i=0;e._state===F&&t>i;i++)this._eachEntry(n[i],i)},S.prototype._eachEntry=function(t,e){var n=this._instanceConstructor;r(t)?t.constructor===n&&t._state!==F?(t._onerror=null,this._settledAt(t._state,e,t._result)):this._willSettleAt(n.resolve(t),e):(this._remaining--,this._result[e]=this._makeResult(z,e,t))},S.prototype._settledAt=function(t,e,n){var i=this.promise;i._state===F&&(this._remaining--,this._abortOnReject&&t===B?A(i,n):this._result[e]=this._makeResult(t,e,n)),0===this._remaining&&_(i,this._result)},S.prototype._makeResult=function(t,e,n){return n},S.prototype._willSettleAt=function(t,e){var n=this;E(t,void 0,function(t){n._settledAt(z,e,t)},function(t){n._settledAt(B,e,t)})};var J=function(t,e){return new $(this,t,!0,e).promise},K=function(t,e){function n(t){w(s,t)}function i(t){A(s,t)}var r=this,s=new r(h,e);if(!O(t))return A(s,new TypeError("You must pass an array to race.")),s;for(var o=t.length,a=0;s._state===F&&o>a;a++)E(r.resolve(t[a]),void 0,n,i);return s},Y=function(t,e){var n=this;if(t&&"object"==typeof t&&t.constructor===n)return t;var i=new n(h,e);return w(i,t),i},Q=function(t,e){var n=this,i=new n(h,e);return A(i,t),i},X=0,Z=P;P.all=J,P.race=K,P.resolve=Y,P.reject=Q,P.prototype={constructor:P,then:function(t,e){var n=this,i=n._state;if(i===z&&!t||i===B&&!e)return this;var r=new this.constructor(h),s=n._result;if(i){var o=arguments[i-1];H(function(){D(i,r,o,s)})}else E(n,r,t,e);return r},"catch":function(t){return this.then(null,t)}};var tt=function(){var t;t="undefined"!=typeof global?global:"undefined"!=typeof window&&window.document?window:self;var e="Promise"in t&&"resolve"in t.Promise&&"reject"in t.Promise&&"all"in t.Promise&&"race"in t.Promise&&function(){var e;return new t.Promise(function(t){e=t}),i(e)}();e||(t.Promise=Z)},et={Promise:Z,polyfill:tt};"function"==typeof t&&t.amd?t(function(){return et}):"undefined"!=typeof n&&n.exports?n.exports=et:"undefined"!=typeof this&&(this.ES6Promise=et)}).call(this)},{}],2:[function(t,e,n){function i(t,e){var n;return e=e||o,(n=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.msRequestAnimationFrame||e.oRequestAnimationFrame||function(){e.setTimeout(function(){t(+new Date)},1e3/60)})(t)}function r(t,e){return Math.sin(Math.PI/2*e)*t}function s(t,e,n,r,s){function o(){var c=+new Date,u=c-a,d=Math.min(u/n,1),h=r?r(e,d):e*d,l=1==d;t(h,l),l||i(o,s)}var a=+new Date;i(o)}var o=t(12);e.exports={animate:s,requestAnimationFrame:i,easeOut:r}},{12:12}],3:[function(t,e,n){function i(){return a.builtUrl(u)}function r(t){return"dark"===t?"dark":"light"}function s(t,e,n){var i,s;return n=r(n),i=o.isRtlLang(e)?"rtl":"ltr",s=[t,c.css,n,i,"css"].join("."),a.base()+"/css/"+s}var o=t(19),a=t(37),c=t(77),u="embed/timeline.css";e.exports={tweet:s.bind(null,"tweet"),timeline:i,video:s.bind(null,"video")}},{19:19,37:37,77:77}],4:[function(t,e,n){function i(t){return new RegExp("\\b"+t+"\\b","g")}function r(t,e){return t.classList?void t.classList.add(e):void(i(e).test(t.className)||(t.className+=" "+e))}function s(t,e){return t.classList?void t.classList.remove(e):void(t.className=t.className.replace(i(e)," "))}function o(t,e,n){return void 0===n&&t.classList&&t.classList.toggle?t.classList.toggle(e,n):(n?r(t,e):s(t,e),n)}function a(t,e,n){return t.classList&&c(t,e)?(s(t,e),void r(t,n)):void(t.className=t.className.replace(i(e),n))}function c(t,e){return t.classList?t.classList.contains(e):i(e).test(t.className)}e.exports={add:r,remove:s,replace:a,toggle:o,present:c}},{}],5:[function(t,e,n){function i(t){var e=t.getAttribute("data-twitter-event-id");return e?e:(t.setAttribute("data-twitter-event-id",++m),m)}function r(t,e,n){var i=0,r=t&&t.length||0;for(i=0;r>i;i++)t[i].call(e,n)}function s(t,e,n){for(var i=n||t.target||t.srcElement,o=i.className.split(" "),a=0,c=o.length;c>a;a++)r(e["."+o[a]],i,t);r(e[i.tagName],i,t),t.cease||i!==this&&s.call(this,t,e,i.parentElement||i.parentNode)}function o(t,e,n,i){function r(i){s.call(t,i,n[e])}a(t,r,e,i),t.addEventListener(e,r,!1)}function a(t,e,n,i){t.id&&(g[t.id]=g[t.id]||[],g[t.id].push({el:t,listener:e,type:n,rootId:i}))}function c(t){var e=g[t];e&&(e.forEach(function(t){t.el.removeEventListener(t.type,t.listener,!1),delete p[t.rootId]}),delete g[t])}function u(t,e,n,r){var s=i(t);p[s]=p[s]||{},p[s][e]||(p[s][e]={},o(t,e,p[s],s)),p[s][e][n]=p[s][e][n]||[],p[s][e][n].push(r)}function d(t,e,n){var r=i(e),o=p[r]&&p[r];s.call(e,{target:n},o[t])}function h(t){return f(t),l(t),!1}function l(t){t&&t.preventDefault?t.preventDefault():t.returnValue=!1}function f(t){t&&(t.cease=!0)&&t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}var p={},m=-1,g={};e.exports={stop:h,stopPropagation:f,preventDefault:l,delegate:u,simulate:d,removeDelegatesForWidget:c}},{}],6:[function(t,e,n){function i(t){var e=t.charAt(0);return"."===e?function(e){var n=e.className?e.className.split(/\s+/):[];return s.contains(n,t.slice(1))}:"#"===e?function(e){return e.id===t.slice(1)}:function(e){return e.tagName===t.toUpperCase()}}function r(t,e,n){var o;if(e)return n=n||e&&e.ownerDocument,o=s.isType("function",t)?t:i(t),e===n?o(e)?e:void 0:o(e)?e:r(o,e.parentNode,n)}var s=t(74);e.exports={closest:r}},{74:74}],7:[function(t,e,n){function i(t){return t=t||r,t.getSelection&&t.getSelection().toString()}var r=t(12);e.exports={getSelection:i}},{12:12}],8:[function(t,e,n){function i(t){return t&&1===t.nodeType?t.offsetWidth||i(t.parentNode):0}e.exports={effectiveWidth:i}},{}],9:[function(t,e,n){e.exports=document},{}],10:[function(t,e,n){e.exports=location},{}],11:[function(t,e,n){e.exports=navigator},{}],12:[function(t,e,n){e.exports=window},{}],13:[function(t,e,n){function i(t,e,n){e.ready=t.then.bind(t),n&&Array.isArray(e[n])&&(e[n].forEach(t.then.bind(t)),delete e[n])}e.exports={exposeReadyPromise:i}},{}],14:[function(t,e,n){function i(t){return a.isType("string",t)?t.split("."):a.isType("array",t)?t:[]}function r(t,e){var n=i(e),r=n.slice(0,-1);return r.reduce(function(t,e,n){if(t[e]=t[e]||{},!a.isObject(t[e]))throw new Error(r.slice(0,n+1).join(".")+" is already defined with a value.");return t[e]},t)}function s(t,e){e=e||o,e[t]=e[t]||{},Object.defineProperty(this,"base",{value:e[t]}),Object.defineProperty(this,"name",{value:t})}var o=t(12),a=t(74);a.aug(s.prototype,{get:function(t){var e=i(t);return e.reduce(function(t,e){return a.isObject(t)?t[e]:void 0},this.base)},set:function(t,e,n){var s=i(t),o=r(this.base,t),a=s.slice(-1);return n&&a in o?o[a]:o[a]=e},init:function(t,e){return this.set(t,e,!0)},unset:function(t){var e=i(t),n=this.get(e.slice(0,-1));n&&delete n[e.slice(-1)]},aug:function(t){var e=this.get(t),n=a.toRealArray(arguments).slice(1);if(e="undefined"!=typeof e?e:{},n.unshift(e),!n.every(a.isObject))throw new Error("Cannot augment non-object.");return this.set(t,a.aug.apply(null,n))},call:function(t){var e=this.get(t),n=a.toRealArray(arguments).slice(1);if(!a.isType("function",e))throw new Error("Function "+t+"does not exist.");return e.apply(null,n)},fullPath:function(t){var e=i(t);return e.unshift(this.name),e.join(".")}}),e.exports=s},{12:12,74:74}],15:[function(t,e,n){function i(t){var e,n,i,r=0;for(s={},t=t||o,e=t.getElementsByTagName("meta");n=e[r];r++)/^twitter:/.test(n.name)&&(i=n.name.replace(/^twitter:/,""),s[i]=n.content)}function r(t){return s[t]}var s,o=t(9);i(),e.exports={init:i,val:r}},{9:9}],16:[function(t,e,n){var i=t(14);e.exports=new i("__twttr")},{14:14}],17:[function(t,e,n){var i=t(14);e.exports=new i("twttr")},{14:14}],18:[function(t,e,n){e.exports=["hi","zh-cn","fr","zh-tw","msa","fil","fi","sv","pl","ja","ko","de","it","pt","es","ru","id","tr","da","no","nl","hu","fa","ar","ur","he","th","cs","uk","vi","ro","bn"]},{}],19:[function(t,e,n){function i(t){return t=String(t).toLowerCase(),r.contains(s,t)}var r=t(74),s=["ar","fa","he","ur"];e.exports={isRtlLang:i}},{74:74}],20:[function(t,e,n){function i(t){var e=~o.host.indexOf("poptip.com")?"https://poptip.com":o.href,n="original_referer="+e;return[t,n].join(-1==t.indexOf("?")?"?":"&")}function r(t){var e,n;t.altKey||t.metaKey||t.shiftKey||(e=c.closest(function(t){return"A"===t.tagName||"AREA"===t.tagName},t.target),e&&d.isIntentURL(e.href)&&(n=i(e.href),n=n.replace(/^http[:]/,"https:"),n=n.replace(/^\/\//,"https://"),u.open(n,e),a.preventDefault(t)))}function s(t){t.addEventListener("click",r,!1)}var o=t(10),a=t(5),c=t(6),u=t(46),d=t(70);e.exports={attachTo:s}},{10:10,46:46,5:5,6:6,70:70}],21:[function(t,e,n){function i(t){var e=[];return l.forIn(t,function(t,n){e.push(t+"="+n)}),e.join(",")}function r(){return f+h.generate()}function s(t,e){function n(t){return Math.round(t/2)}return t>e?{coordinate:0,size:e}:{coordinate:n(e)-n(t),size:t}}function o(t,e,n){var r,o;e=a.parse(e),n=n||{},r=s(e.width,n.width||p),e.left=r.coordinate,e.width=r.size,o=s(e.height,n.height||m),e.top=o.coordinate,e.height=o.size,this.win=t,this.features=i(e)}var a,c=t(12),u=t(63),d=t(70),h=t(72),l=t(74),f="intent_",p=c.screen.width,m=c.screen.height;a=(new u).defaults({width:550,height:520,personalbar:"0",toolbar:"0",location:"1",scrollbars:"1",resizable:"1"}),o.prototype.open=function(t){return d.isTwitterURL(t)?(this.name=r(),this.popup=this.win.open(t,this.name,this.features),this):void 0},o.open=function(t,e){var n=new o(c,e);return n.open(t)},e.exports=o},{12:12,63:63,70:70,72:72,74:74}],22:[function(t,e,n){function i(t){u[t]=+new Date}function r(t){return u[t]?+new Date-u[t]:null}function s(t,e,n,i,s){var a=r(e);a&&o(t,n,i,a,s)}function o(t,e,n,i,r){var s,o=void 0===r?d:r;100*Math.random()>o||(n=c.aug(n||{},{duration_ms:i}),s={page:e,component:"performance",action:t},a.clientEvent(s,n,!0))}var a=t(32),c=t(74),u={},d=1;e.exports={start:i,end:r,track:o,endAndTrack:s}},{32:32,74:74}],23:[function(t,e,n){function i(t){if(!t)throw new Error("JsonRpcClient requires a dispatcher");this.idIterator=0,this.dispatcher=t,this.idPrefix=String(+new Date)+a++}function r(t){var e={jsonrpc:o,method:t};return arguments.length>1&&(e.params=[].slice.call(arguments,1)),e}var s=t(66),o="2.0",a=0;i.prototype._generateId=function(){return this.idPrefix+this.idIterator++},i.prototype.notify=function(){this.dispatcher.send(r.apply(null,arguments))},i.prototype.request=function(){var t=r.apply(null,arguments);return t.id=this._generateId(),this.dispatcher.send(t).then(function(t){return"result"in t?t.result:s.reject(t.error)})},e.exports=i},{66:66}],24:[function(t,e,n){e.exports={PARSE_ERROR:{code:-32700,message:"Parse error"},INVALID_REQUEST:{code:-32600,message:"Invalid Request"},INVALID_PARAMS:{code:-32602,message:"Invalid params"},METHOD_NOT_FOUND:{code:-32601,message:"Method not found"},INTERNAL_ERROR:{code:-32603,message:"Internal error"}}},{}],25:[function(t,e,n){function i(t){this.registry=t||{}}function r(t){return l.isType("string",t)?JSON.parse(t):t}function s(t){var e,n,i;return l.isObject(t)?(e=t.jsonrpc===m,n=l.isType("string",t.method),i=!("id"in t)||o(t.id),e&&n&&i):!1}function o(t){var e,n,i;return e=l.isType("string",t),n=l.isType("number",t),i=null===t,e||n||i}function a(t){return l.isObject(t)&&!l.isType("function",t)}function c(t,e){return{jsonrpc:m,id:t,result:e}}function u(t,e){return{jsonrpc:m,id:o(t)?t:null,error:e}}function d(t){return f.all(t).then(function(t){return t=t.filter(function(t){return void 0!==t}),t.length?t:void 0})}var h=t(24),l=t(74),f=t(66),p=t(67),m="2.0";i.prototype._invoke=function(t,e){var n,i,r;n=this.registry[t.method],i=t.params||[],i=l.isType("array",i)?i:[i];try{r=n.apply(e.source||null,i)}catch(s){r=f.reject(s.message)}return p.isPromise(r)?r:f.resolve(r)},i.prototype._processRequest=function(t,e){function n(e){return c(t.id,e)}function i(){return u(t.id,h.INTERNAL_ERROR)}var r;return s(t)?(r="params"in t&&!a(t.params)?f.resolve(u(t.id,h.INVALID_PARAMS)):this.registry[t.method]?this._invoke(t,{source:e}).then(n,i):f.resolve(u(t.id,h.METHOD_NOT_FOUND)),null!=t.id?r:f.resolve()):f.resolve(u(t.id,h.INVALID_REQUEST))},i.prototype.attachReceiver=function(t){return t.attachTo(this),this},i.prototype.bind=function(t,e){return this.registry[t]=e,this},i.prototype.receive=function(t,e){var n,i,s,o=this;try{t=r(t)}catch(a){return f.resolve(u(null,h.PARSE_ERROR))}return e=e||null,n=l.isType("array",t),i=n?t:[t],s=i.map(function(t){return o._processRequest(t,e)}),n?d(s):s[0]},e.exports=i},{24:24,66:66,67:67,74:74}],26:[function(t,e,n){function i(t,e,n){var i;t&&t.postMessage&&(m?i=(n||"")+JSON.stringify(e):n?(i={},i[n]=e):i=e,t.postMessage(i,"*"))}function r(t){return f.isType("string",t)?t:"JSONRPC"}function s(t,e){return e?f.isType("string",t)&&0===t.indexOf(e)?t.substring(e.length):t[e]?t[e]:void 0:t}function o(t,e){var n=t.document;this.filter=r(e),this.server=null,this.isTwitterFrame=p.isTwitterURL(n.location.href),t.addEventListener("message",this._onMessage.bind(this),!1)}function a(t,e){this.pending={},this.target=t,this.isTwitterHost=p.isTwitterURL(u.href),this.filter=r(e),d.addEventListener("message",this._onMessage.bind(this),!1)}function c(t){return arguments.length>0&&(m=!!t),m}var u=t(10),d=t(12),h=t(65),l=t(57),f=t(74),p=t(70),m=l.ie9();f.aug(o.prototype,{_onMessage:function(t){var e,n=this;this.server&&(!this.isTwitterFrame||p.isTwitterURL(t.origin))&&(e=s(t.data,this.filter),e&&this.server.receive(e,t.source).then(function(e){e&&i(t.source,e,n.filter)}))},attachTo:function(t){this.server=t},detach:function(){this.server=null}}),f.aug(a.prototype,{_processResponse:function(t){var e=this.pending[t.id];e&&(e.resolve(t),delete this.pending[t.id])},_onMessage:function(t){var e;if((!this.isTwitterHost||p.isTwitterURL(t.origin))&&(e=s(t.data,this.filter))){if(f.isType("string",e))try{e=JSON.parse(e)}catch(n){return}e=f.isType("array",e)?e:[e],e.forEach(this._processResponse.bind(this))}},send:function(t){var e=new h;return t.id?this.pending[t.id]=e:e.resolve(),i(this.target,t,this.filter),e.promise}}),e.exports={Receiver:o,Dispatcher:a,_stringifyPayload:c}},{10:10,12:12,57:57,65:65,70:70,74:74}],27:[function(t,e,n){function i(t,e,n,i){var o,u=this;this.readyDeferred=new s,this.attrs=t||{},this.styles=e||{},this.appender=n||function(t){r.body.appendChild(t)},this.layout=i||function(t){return c.resolve(t())},this.frame=o=a(this.attrs,this.styles),o.onreadystatechange=o.onload=this.getCallback(this.onLoad),this.layout(function(){u.appender(o)})}var r=t(9),s=t(65),o=t(57),a=t(60),c=t(66),u=t(16),d=0;i.prototype.getCallback=function(t){var e=this,n=!1;return function(){n||(n=!0,t.call(e))}},i.prototype.registerCallback=function(t){var e="cb"+d++;return u.set(["sandbox",e],t),e},i.prototype.onLoad=function(){try{this.document=this.frame.contentWindow.document}catch(t){return void this.setDocDomain()}this.writeStandardsDoc(),this.readyDeferred.resolve(this)},i.prototype.ready=function(){return this.readyDeferred.promise},i.prototype.setDocDomain=function(){var t=this,e=a(this.attrs,this.styles),n=this.registerCallback(this.getCallback(this.onLoad));e.src=["javascript:",'document.write("");',"try { window.parent.document; }","catch (e) {",'document.domain="'+r.domain+'";',"}","window.parent."+u.fullPath(["sandbox",n])+"();"].join(""),this.layout(function(){t.frame.parentNode.removeChild(t.frame),t.frame=null,t.appender?t.appender(e):r.body.appendChild(e),t.frame=e})},i.prototype.writeStandardsDoc=function(){if(o.anyIE()&&!o.cspEnabled()){var t=["<!DOCTYPE html>","<html>","<head>","<scr","ipt>","try { window.parent.document; }",'catch (e) {document.domain="'+r.domain+'";}',"</scr","ipt>","</head>","<body></body>","</html>"].join("");this.document.write(t),this.document.close()}},e.exports=i},{16:16,57:57,60:60,65:65,66:66,9:9}],28:[function(t,e,n){function i(){var t,e;y={},o||(t=a.body.offsetHeight,e=a.body.offsetWidth,(t!=b||e!=w)&&(v.forEach(function(t){t.dispatchFrameResize(w,b)}),b=t,w=e))}function r(t){var e;return t.id?t.id:(e=t.getAttribute("data-twttr-id"))?e:(e="twttr-sandbox-"+g++,t.setAttribute("data-twttr-id",e),e)}function s(t,e){var n=this;d.apply(this,[t,e]),this._resizeHandlers=[],v=v.filter(function(t){var e=t._frame.parentElement;return e||f.async(function(){p.removeDelegatesForWidget(t._frame.id)}),e}),v.push(this),this._win.addEventListener("resize",function(){n.dispatchFrameResize()},!1)}var o,a=t(9),c=t(12),u=t(27),d=t(29),h=t(57),l=t(66),f=t(74),p=t(5),m=t(4),g=0,v=[],y={},w=0,b=0;c.addEventListener("resize",i,!1),s.prototype=new d,f.aug(s.prototype,{dispatchFrameResize:function(){var t=this._frame.parentNode,e=r(t),n=y[e];o=!0,this._resizeHandlers.length&&(n||(n=y[e]={w:this._frame.offsetWidth,h:this._frame.offsetHeight}),(this._frameWidth!=n.w||this._frameHeight!=n.h)&&(this._frameWidth=n.w,this._frameHeight=n.h,this._resizeHandlers.forEach(function(t){t(n.w,n.h)}),c.setTimeout(function(){y={}},50)))},addClass:function(t){var e=this._doc.documentElement;return this.layout(function(){m.add(e,t)})},appendStyleSheet:function(t,e){var n=this,i=this._doc.createElement("link");return i.type="text/css",i.rel="stylesheet",i.href=t,e&&(i.onload=e),this.layout(function(){return n._head.appendChild(i)})},removeStyleSheet:function(t){var e,n=this;return e='link[rel="stylesheet"][href="'+t+'"]',this.layout(function(){var t=n._doc.querySelector(e);return t&&n._head.removeChild(t)})},appendCss:function(t){var e,n=this;return h.cspEnabled()?l.reject("CSP enabled; cannot embed inline styles."):(e=this._doc.createElement("style"),e.type="text/css",e.styleSheet?e.styleSheet.cssText=t:e.appendChild(this._doc.createTextNode(t)),this.layout(function(){return n._head.appendChild(e)}))},style:function(t,e){var n=this;return this.layout(function(){e&&(n._frame.style.cssText=""),f.forIn(t,function(t,e){n._frame.style[t]=e})})},onresize:function(t){this._resizeHandlers.push(t)},width:function(t){return void 0!==t&&(this._frame.style.width=t+"px"),h.ios()?Math.min(this._frame.parentNode.offsetWidth,this._frame.offsetWidth):this._frame.offsetWidth},height:function(t){return void 0!==t&&(this._frame.height=t),this._frame.offsetHeight},contentHeight:function(){return this._doc.body.firstChild.offsetHeight},hasContent:function(){return!!this._doc.body.firstChild},resizeToContent:function(){var t=this;return this.layout(function(){return t.height(t.contentHeight())})}}),s.createSandbox=function(t,e,n,i){var r=new u(t,e,n,i);return r.ready().then(function(t){return new s(t.frame,t.layout)})},e.exports=s},{12:12,27:27,29:29,4:4,5:5,57:57,66:66,74:74,9:9}],29:[function(t,e,n){function i(t,e){t&&(this._frame=t,this._win=t.contentWindow,this._doc=this._win.document,this._body=this._doc.body,this._head=this._body.parentNode.children[0],this.layout=e,this.root=this._doc.documentElement,this.root.className="SandboxRoot")}var r=t(27),s=t(74);s.aug(i.prototype,{createElement:function(t){return this._doc.createElement(t)},createDocumentFragment:function(){return this._doc.createDocumentFragment()},appendChild:function(t){var e=this;return this.layout(function(){return e._body.appendChild(t)})},setBaseTarget:function(t){var e=this,n=this._doc.createElement("base");return n.target=t,this.layout(function(){return e._head.appendChild(n)})},setTitle:function(t){t&&(this._frame.title=t)},element:function(){return this._frame},document:function(){return this._doc}}),i.createSandbox=function(t,e,n,s){var o=new r(t,e,n,s);return o.ready().then(function(t){return new i(t.frame,t.layout)})},e.exports=i},{27:27,74:74}],30:[function(t,e,n){function i(){return d.formatGenericEventData("syndicated_impression",{})}function r(){c("tweet")}function s(){c("timeline")}function o(){c("video")}function a(){c("partnertweet")}function c(t){h.isHostPageSensitive()||l[t]||(l[t]=!0,u.scribe(d.formatClientEventNamespace({page:t,action:"impression"}),i(),d.AUDIENCE_ENDPOINT))}var u=t(32),d=t(33),h=t(69),l={};e.exports={scribePartnerTweetAudienceImpression:a,scribeTweetAudienceImpression:r,scribeTimelineAudienceImpression:s,scribeVideoAudienceImpression:o}},{32:32,33:33,69:69}],31:[function(t,e,n){function i(){return x?I.promise:(m.createSandbox({id:"rufous-sandbox"},{display:"none"}).then(function(t){l=t,d=c(),h=u(),I.resolve([d,h])}),x=!0,I.promise)}function r(t,e){var n,i,r;w.isObject(t)&&w.isObject(e)&&(r=y.flattenClientEventPayload(t,e),n=d.firstChild,n.value=+(+n.value||r.dnt||0),i=l.createElement("input"),i.type="hidden",i.name="l",i.value=y.stringify(r),d.appendChild(i))}function s(t,e,n){var i=!w.isObject(t),s=e?!w.isObject(e):!1;i||s||I.promise.then(function(){r(y.formatClientEventNamespace(t),y.formatClientEventData(e,n))})}function o(){return I.promise.then(function(){if(d.children.length<=2)return v.reject();var t=v.all([l.appendChild(d),l.appendChild(h)]).then(function(t){var e=t[0],n=t[1];return n.addEventListener("load",function(){a(e,n)(),b.get("events").trigger("logFlushed")}),e.submit(),t});return d=c(),h=u(),t})}function a(t,e){return function(){var n=t.parentNode;n&&(n.removeChild(t),n.removeChild(e))}}function c(){var t=l.createElement("form"),e=l.createElement("input"),n=l.createElement("input");return T++,t.action=y.CLIENT_EVENT_ENDPOINT,t.method="POST",t.target=A+T,t.id=E+T,e.type="hidden",e.name="dnt",e.value=p.enabled(),n.type="hidden",n.name="tfw_redirect",n.value=y.RUFOUS_REDIRECT,t.appendChild(e),t.appendChild(n),t}function u(){var t=A+T;return f({id:t,name:t,width:0,height:0,border:0},{display:"none"},l.document())}var d,h,l,f=t(60),p=t(56),m=t(29),g=t(65),v=t(66),y=t(33),w=t(74),b=t(17),_=Math.floor(1e3*Math.random())+"_",A="rufous-frame-"+_+"-",E="rufous-form-"+_+"-",T=0,x=!1,I=new g;e.exports={clientEvent:s,flush:o,init:i}},{17:17,29:29,33:33,56:56,60:60,65:65,66:66,74:74}],32:[function(t,e,n){function i(t,e,n){return r(t,e,n,2)}function r(t,e,n,i){var r=!p.isObject(t),s=e?!p.isObject(e):!1;r||s||o(f.formatClientEventNamespace(t),f.formatClientEventData(e,n,i),f.CLIENT_EVENT_ENDPOINT)}function s(t,e,n,i){var s=f.extractTermsFromDOM(t.target||t.srcElement);s.action=i||"click",r(s,e,n)}function o(t,e,n){var i,r;n&&p.isObject(t)&&p.isObject(e)&&(i=f.flattenClientEventPayload(t,e),r={l:f.stringify(i)},i.dnt&&(r.dnt=1),d(l.url(n,r)))}function a(t,e,n,i){var r,s=!p.isObject(t),o=e?!p.isObject(e):!1;if(!s&&!o)return r=f.flattenClientEventPayload(f.formatClientEventNamespace(t),f.formatClientEventData(e,n,i)),c(r)}function c(t){return g.push(t),g}function u(){var t,e,n=l.url(f.CLIENT_EVENT_ENDPOINT,{dnt:0,l:""}),i=encodeURIComponent(n).length;return g.length>1&&a({page:"widgets_js",component:"scribe_pixel",action:"batch_log"},{}),t=g,g=[],e=t.reduce(function(e,n,r){var s,o,a=e.length,c=a&&e[a-1],u=r+1==t.length;return u&&n.event_namespace&&"batch_log"==n.event_namespace.action&&(n.message=["entries:"+r,"requests:"+a].join("/")),s=f.stringify(n),o=encodeURIComponent(s).length+3,i+o>m?e:((!c||c.urlLength+o>m)&&(c={urlLength:i,items:[]},e.push(c)),c.urlLength+=o,c.items.push(s),e)},[]),e.map(function(t){var e={l:t.items};return h.enabled()&&(e.dnt=1),d(l.url(f.CLIENT_EVENT_ENDPOINT,e))})}function d(t){var e=new Image;return e.src=t}var h=t(56),l=t(68),f=t(33),p=t(74),m=2083,g=[];e.exports={_enqueueRawObject:c,scribe:o,clientEvent:r,clientEvent2:i,enqueueClientEvent:a,flushClientEvents:u,interaction:s}},{33:33,56:56,68:68,74:74}],33:[function(t,e,n){function i(t,e){var n;return e=e||{},t&&t.nodeType===Node.ELEMENT_NODE?((n=t.getAttribute("data-scribe"))&&n.split(" ").forEach(function(t){var n=t.trim().split(":"),i=n[0],r=n[1];i&&r&&!e[i]&&(e[i]=r)}),i(t.parentNode,e)):e}function r(t){return h.aug({client:"tfw"},t||{})}function s(t,e,n){var i=t&&t.widget_origin||u.referrer;return t=o("tfw_client_event",t,i),t.client_version=p,t.format_version=void 0!==n?n:1,e||(t.widget_origin=i),t}function o(t,e,n){return e=e||{},h.aug(e,{_category_:t,triggered_on:e.triggered_on||+new Date,dnt:d.enabled(n)})}function a(t,e){return h.aug({},e,{event_namespace:t})}function c(t){var e,n=Array.prototype.toJSON;return delete Array.prototype.toJSON,e=JSON.stringify(t),n&&(Array.prototype.toJSON=n),e}var u=t(9),d=t(56),h=t(74),l=t(76),f=t(16),p=l.version,m=f.get("endpoints.rufous")||"https://syndication.twitter.com/i/jot",g=f.get("endpoints.rufousAudience")||"https://syndication.twitter.com/i/jot/syndication",v=f.get("endpoints.rufousRedirect")||"https://platform.twitter.com/jot.html";e.exports={extractTermsFromDOM:i,flattenClientEventPayload:a,formatGenericEventData:o,formatClientEventData:s,formatClientEventNamespace:r,stringify:c,AUDIENCE_ENDPOINT:g,CLIENT_EVENT_ENDPOINT:m,RUFOUS_REDIRECT:v}},{16:16,56:56,74:74,76:76,9:9}],34:[function(t,e,n){function i(t,e,n,i){return t=t||[],n=n||{},function(){var r,s,c,d,h=Array.prototype.slice.apply(arguments,[0,t.length]),l=Array.prototype.slice.apply(arguments,[t.length]);return l.forEach(function(t){return t?1===t.nodeType?void(c=t):o.isType("function",t)?void(r=t):void(o.isType("object",t)&&(s=t)):void 0}),h.length!=t.length||0===l.length?(r&&o.async(function(){r(!1)}),a.reject("Not enough parameters")):c?(s=o.aug(s||{},n),s.targetEl=c,t.forEach(function(t){s[t]=h.shift()}),d=new e(s),u.doLayout(),d.render(),i&&i(),r&&d.completed().then(r,function(){r(!1)}),d.completed()):(r&&o.async(function(){r(!1)}),a.reject("No target specified"))}}function r(t){var e;t.linkColor=t.linkColor||t.previewParams.link_color,t.theme=t.theme||t.previewParams.theme,t.height=t.height||t.previewParams.height,e=new p(t),this.render=e.render.bind(e),this.completed=e.completed.bind(e)}var s=t(12),o=t(74),a=t(66),c=t(70),u=t(43),d=t(49),h=t(45),l=t(44),f=t(50),p=t(48),m=i(["url"],d,{type:"share"}),g=i(["hashtag"],d,{type:"hashtag"}),v=i(["screenName"],d,{type:"mention"}),y=i(["screenName"],h),w=i(["tweetId"],l,{},l.fetchAndRender),b=i(["tweetId"],f,{},f.fetchAndRender),_=i(["widgetId"],p),A=i(["previewParams"],r),E={createShareButton:m,createMentionButton:v,createHashtagButton:g,createFollowButton:y,createTweet:w,createVideo:b,createTweetEmbed:w,createTimeline:_};c.isTwitterURL(s.location.href)&&(E.createTimelinePreview=A),e.exports=E},{12:12,43:43,44:44,45:45,48:48,49:49,50:50,66:66,70:70,74:74}],35:[function(t,e,n){function i(t,e){var n=u.connect({src:t,iframe:{name:e,style:"position:absolute;top:-9999em;width:10px;height:10px"}});return d(n).expose({trigger:function(t,e,n){e=e||{};var i=e.region;delete e.region,f.get("events").trigger(t,{target:h.find(n),data:e,region:i,type:t})},initXPHub:function(){s(!0)}}),n}function r(t){return t?l.secureHubId:l.contextualHubId}function s(t){var e=c.base(t)+"/widgets/hub.f15fe2cd70788a40560e69fa17341d5e.html",n=r(t);if(!a.getElementById(n))return i(e,n)}function o(t,e){var n=u.connect({window:{width:550,height:450},src:t});d(n).expose({trigger:function(t,n){f.get("events").trigger(t,{target:e,region:"intent",type:t,data:n})}})}var a=t(9),c=t(37),u=t(83),d=t(82),h=t(43),l=t(75),f=t(17);e.exports={init:s,openIntent:o}},{17:17,37:37,43:43,75:75,82:82,83:83,9:9}],36:[function(t,e,n){function i(){return s!==s.top?r.request(h).then(function(t){o.rootDocumentLocation(t.url),t.dnt&&a.setOn()}):void 0}var r,s=t(12),o=t(54),a=t(56),c=t(25),u=t(23),d=t(26),h="twttr.private.requestArticleUrl",l="twttr.article";s===s.top?(new c).attachReceiver(new d.Receiver(s,l)).bind(h,function(){return{url:o.rootDocumentLocation(),dnt:a.enabled()}}):r=new u(new d.Dispatcher(s.top,l)),e.exports={requestArticleUrl:i}},{12:12,23:23,25:25,26:26,54:54,56:56}],37:[function(t,e,n){function i(t,e){var n,i=u[t];return"embed/timeline.css"===t&&c.contains(s.href,"localhost.twitter.com")?"/node_modules/syndication-templates/lib/css/index.css":(n=a.retina()?"2x":"default",
e&&(n+=".rtl"),r()+"/"+i[n])}function r(t){var e=o.get("host");return d(t)+"://"+e}var s=t(10),o=t(16),a=t(57),c=t(74),u={"embed/timeline.css":{"default":"embed/timeline.438399f9c19919ece063ecfc9ead5a7c.default.css","2x":"embed/timeline.438399f9c19919ece063ecfc9ead5a7c.2x.css",gif:"embed/timeline.438399f9c19919ece063ecfc9ead5a7c.gif.css","default.rtl":"embed/timeline.438399f9c19919ece063ecfc9ead5a7c.default.rtl.css","2x.rtl":"embed/timeline.438399f9c19919ece063ecfc9ead5a7c.2x.rtl.css","gif.rtl":"embed/timeline.438399f9c19919ece063ecfc9ead5a7c.gif.rtl.css"}},d=function(){return/^http\:$/.test(s.protocol)?function(t){return t?"https":"http"}:function(){return"https"}}();e.exports={builtUrl:i,base:r}},{10:10,16:16,57:57,74:74}],38:[function(t,e,n){function i(t){return function(e){e.error?t.error&&t.error(e):e.headers&&200!=e.headers.status?(t.error&&t.error(e),u.warn(e.headers.message)):t.success&&t.success(e),t.complete&&t.complete(e),r(t)}}function r(t){var e=t.script;e&&(e.onload=e.onreadystatechange=null,e.parentNode&&e.parentNode.removeChild(e),t.script=void 0,e=void 0),t.callbackName&&c.unset(["callbacks",t.callbackName])}function s(t){var e={};return t.success&&d.isType("function",t.success)&&(e.success=t.success),t.error&&d.isType("function",t.error)&&(e.error=t.error),t.complete&&d.isType("function",t.complete)&&(e.complete=t.complete),e}var o=t(9),a=t(10),c=t(16),u=t(62),d=t(74),h=t(68),l="cb",f=0,p=!1,m={},g=d.aug({tweets:"https://syndication.twitter.com/tweets.json",timeline:"https://cdn.syndication.twimg.com/widgets/timelines/",timelinePoll:"https://syndication.twitter.com/widgets/timelines/paged/",timelinePreview:"https://syndication.twitter.com/widgets/timelines/preview/",videos:"https://syndication.twitter.com/widgets/video/"},c.get("endpoints")||{});m.jsonp=function(t,e,n){var r=n||l+f,s=c.fullPath(["callbacks",r]),u=o.createElement("script"),d={callback:s,suppress_response_codes:!0};c.set(["callbacks",r],i(e)),(p||!/^https?\:$/.test(a.protocol))&&(t=t.replace(/^\/\//,"https://")),u.src=h.url(t,d),u.async="async",o.body.appendChild(u),e.script=u,e.callbackName=r,n||f++},m.config=function(t){(t.forceSSL===!0||t.forceSSL===!1)&&(p=t.forceSSL)},m.tweets=function(t){var e,n=s(t),i={ids:t.ids.join(","),lang:t.lang,new_html:!0};e=h.url(g.tweets,i),this.jsonp(e,n)},m.videos=function(t){var e=s(t),n={ids:t.ids.join(","),lang:t.lang},i=h.url(g.videos,n);this.jsonp(i,e)},m.timeline=function(t){var e,n=s(t),i=9e5,r=Math.floor(+new Date/i),o={lang:t.lang,t:r,domain:a.host,dnt:t.dnt,override_type:t.overrideType,override_id:t.overrideId,override_name:t.overrideName,override_owner_id:t.overrideOwnerId,override_owner_name:t.overrideOwnerName,with_replies:t.withReplies};d.compact(o),e=h.url(g.timeline+t.id,o),this.jsonp(e,n,"tl_"+t.id+"_"+t.instanceId)},m.timelinePoll=function(t){var e,n=s(t),i={lang:t.lang,since_id:t.sinceId,max_id:t.maxId,min_position:t.minPosition,max_position:t.maxPosition,domain:a.host,dnt:t.dnt,override_type:t.overrideType,override_id:t.overrideId,override_name:t.overrideName,override_owner_id:t.overrideOwnerId,override_owner_name:t.overrideOwnerName,with_replies:t.withReplies};d.compact(i),e=h.url(g.timelinePoll+t.id,i),this.jsonp(e,n,"tlPoll_"+t.id+"_"+t.instanceId+"_"+(t.sinceId||t.maxId||t.maxPosition||t.minPosition))},m.timelinePreview=function(t){var e=s(t),n=t.params,i=h.url(g.timelinePreview,n);this.jsonp(i,e)},e.exports=m},{10:10,16:16,62:62,68:68,74:74,9:9}],39:[function(t,e,n){function i(){var t=36e5,e=o.combined(s)._;return void 0!==r?r:(r=!1,e&&/^\d+$/.test(e)&&(r=+new Date-parseInt(e)<t),r)}var r,s=t(10),o=t(64);e.exports={isDynamicWidget:i}},{10:10,64:64}],40:[function(t,e,n){function i(t,e){return 2==t||3==t&&0===+e}function r(t){var e=t.split(" ");this.url=decodeURIComponent(e[0].trim()),this.width=+e[1].replace(/w$/,"").trim()}function s(t,e,n){var i,s,o,a;if(t=f.devicePixelRatio?t*f.devicePixelRatio:t,s=e.split(",").map(function(t){return new r(t.trim())}),n)for(a=0;a<s.length;a++)s[a].url===n&&(i=s[a]);return o=s.reduce(function(e,n){return n.width<e.width&&n.width>=t?n:e},s[0]),i&&i.width>o.width?i:o}function o(t,e){var n,i=t.getAttribute("data-srcset"),r=t.src;i&&(n=s(e,i,r),t.src=n.url)}function a(t,e){e=void 0!==e?!!e:m.retina(),p.toRealArray(t.getElementsByTagName("IMG")).forEach(function(t){var n=t.getAttribute("data-src-1x")||t.getAttribute("src"),i=t.getAttribute("data-src-2x");e&&i?t.src=i:n&&(t.src=n)})}function c(t,e,n,r){var s=0,a=t.querySelector(".multi-photo"),c=a&&+a.getAttribute("data-photo-count");if(t)return p.toRealArray(t.querySelectorAll(".NaturalImage-image")).forEach(function(t){r(function(){o(t,e)})}),p.toRealArray(t.querySelectorAll(".CroppedImage-image")).forEach(function(t){r(function(){o(t,e/2)})}),(m.ios()||m.android())&&p.toRealArray(t.querySelectorAll(".FilledIframe")).forEach(function(t){r(function(){d(t,{width:t.offsetWidth,height:t.offsetHeight})})}),p.toRealArray(t.querySelectorAll(".autosized-media")).forEach(function(t){var i=u(t.getAttribute("data-width"),t.getAttribute("data-height"),e,n);r(function(){o(t,e),t.width=i.width,t.height=i.height,d(t,i)}),s=i.height>s?i.height:s}),p.toRealArray(t.querySelectorAll("img.cropped-media")).forEach(function(t){var a,d,h,l=e-12,f=t.parentNode,p=t.getAttribute("data-crop-x")||0,m=t.getAttribute("data-crop-y")||0,g=i(c,t.getAttribute("data-image-index")),b=Math.floor(l/2-v),_=Math.floor(b/(g?y:w));g||(_-=v/2),h=u(t.getAttribute("data-width"),t.getAttribute("data-height"),b,n,b,_),a=h.width-b-p,d=h.height-_-m,0>a&&Math.max(0,p+=a),0>d&&Math.max(0,m+=d),r(function(){o(t,b),t.width=h.width,t.height=h.height,f.style.width=b-1+"px",f.style.height=_+"px",p&&(t.style.marginLeft="-"+Math.floor(h.width*p/100)+"px"),m&&(t.style.marginTop="-"+Math.floor(h.height*m/100)+"px")}),s=h.height*(g?2:1)>s?h.height:s}),s}function u(t,e,n,i,r,s){return n=n||t,i=i||e,r=r||0,s=s||0,t>n&&(e*=n/t,t=n),e>i&&(t*=i/e,e=i),r>t&&(e*=r/t,t=r),s>e&&(t*=s/e,e=s),{width:Math.floor(t),height:Math.floor(e)}}function d(t,e){function n(){var t={name:"tfw:resize",dimensions:e};r.postMessage(t,"*")}var i,r,s,o,a;t&&(r=t.contentWindow,i=t.ownerDocument&&t.ownerDocument.defaultView,s=m.ios()||m.android(),o=g.isTwitterURL(t.src),a=r&&m.canPostMessage(r),s&&o&&a&&(n(),i&&i.addEventListener("message",function(t){"tfw:requestsize"===t.data&&n()},!1)))}function h(t,e,n,i){p.toRealArray(t.querySelectorAll(e)).forEach(function(t){var e=t.getAttribute("style")||t.getAttribute("data-style"),r=i.test(e)&&RegExp.$1;r&&(t.setAttribute("data-csp-fix",!0),t.style[n]=r)})}function l(t){m.cspEnabled()&&(h(t,".MediaCard-widthConstraint","maxWidth",b),h(t,".MediaCard-mediaContainer","paddingBottom",x),h(t,".CroppedImage-image","marginTop",E),h(t,".CroppedImage-image","marginLeft",T),h(t,".CroppedImage-image","top",_),h(t,".CroppedImage-image","left",A))}var f=t(12),p=t(74),m=t(57),g=t(70),v=6,y=8/9,w=16/9,b=/max-width:\s*([\d\.]+px)/,_=/top:\s*(\-?[\d\.]+%)/,A=/left:\s*(\-?[\d\.]+%)/,E=/margin-top:\s*(\-?[\d\.]+%)/,T=/margin-left:\s*(\-?[\d\.]+%)/,x=/padding-bottom:\s*([\d\.]+%)/;e.exports={scaleDimensions:u,retinize:a,constrainMedia:c,fixMediaCardLayout:l,__setSrcFromSet:o}},{12:12,57:57,70:70,74:74}],41:[function(t,e,n){var i=t(68),r=t(70);e.exports=function(t,e){return function(n){var s,o,a="data-tw-params";if(n&&r.isTwitterURL(n.href)&&!n.getAttribute(a)){if(n.setAttribute(a,!0),"function"==typeof e){s=e.call(this,n);for(o in s)s.hasOwnProperty(o)&&(t[o]=s[o])}n.href=i.url(n.href,t)}}}},{68:68,70:70}],42:[function(t,e,n){function i(){(new o).attachReceiver(new a.Receiver(r,"twttr.resize")).bind("twttr.private.resizeButton",function(t){var e=u(this),n=e&&e.id,i=n&&s.findInstance(n),r=c.asInt(t.width),o=c.asInt(t.height);i&&r&&o&&i.setInitialSize(r,o)})}var r=t(12),s=t(43),o=t(25),a=t(26),c=t(71),u=t(59);e.exports=i},{12:12,25:25,26:26,43:43,59:59,71:71}],43:[function(t,e,n){function i(t){var e;t&&(t.ownerDocument?(this.srcEl=t,this.classAttr=t.className.split(" ")):(this.srcOb=t,this.classAttr=[]),e=this.params(),this.id=this.generateId(),this.setLanguage(),this.related=e.related||this.dataAttr("related"),this.partner=e.partner||this.dataAttr("partner")||y.val("partner"),this.styleAttr=[],this.targetEl=t.targetEl,g.asBoolean(e.dnt||this.dataAttr("dnt"))&&w.setOn(),x[this.id]=this,this.completeDeferred=new h,this.completed().then(function(t){t&&t!=a.body&&A.get("events").trigger("rendered",{target:t})}))}function r(){I.forEach(function(t){t()}),i.doLayout()}function s(t){return t?t.lang?t.lang:s(t.parentNode):void 0}var o,a=t(9),c=t(12),u=t(37),d=t(22),h=t(65),l=t(60),f=t(61),p=t(66),m=t(68),g=t(71),v=t(74),y=t(15),w=t(56),b=t(62),_=t(54),A=t(17),E=t(18),T=0,x={},I=[],D=new f,N="data-twttr-rendered";v.aug(i.prototype,{setLanguage:function(t){var e;return t||(t=this.params().lang||this.dataAttr("lang")||s(this.srcEl)),(t=t&&t.toLowerCase())?v.contains(E,t)?this.lang=t:(e=t.replace(/[\-_].*/,""),v.contains(E,t)?this.lang=e:void(this.lang="en")):this.lang="en"},ringo:function(t,e,n){return n=n||/\{\{([\w_]+)\}\}/g,t.replace(n,function(t,n){return void 0!==e[n]?e[n]:t})},makeIframeSource:function(){if(this.iframeSource){var t=m.encode(this.widgetUrlParams());return[u.base(),"/",this.ringo(this.iframeSource,{lang:this.lang}),"#",t].join("")}},add:function(t){x[this.id]=t},create:function(t,e){var n,i=this;return e[N]=!0,n=l(v.aug({id:this.id,src:t,"class":this.classAttr.join(" ")},e),{position:"absolute",visibility:"hidden"},this.targetEl&&this.targetEl.ownerDocument),this.srcEl?this.layout(function(){return i.srcEl.parentNode.replaceChild(n,i.srcEl),n}):this.targetEl?this.layout(function(){return i.targetEl.appendChild(n),n}):p.reject("Did not append widget")},setInitialSize:function(t,e){var n=this,i=this.element;return i?void this.layout(function(){n.width=t,n.height=e,i.style.width=t+"px",i.style.height=e+"px",i.style.position="static",i.style.visibility="visible"}).then(function(){n.completeDeferred.resolve(i)}):!1},params:function(){var t,e;return this.srcOb?e=this.srcOb:(t=this.srcEl&&this.srcEl.href&&this.srcEl.href.split("?")[1],e=t?m.decode(t):{}),this.params=function(){return e},e},widgetUrlParams:function(){return{}},dataAttr:function(t){return this.srcEl&&this.srcEl.getAttribute("data-"+t)},attr:function(t){return this.srcEl&&this.srcEl.getAttribute(t)},layout:function(t){return D.enqueue(t)},generateId:function(){return this.srcEl&&this.srcEl.id||"twitter-widget-"+T++},completed:function(){return this.completeDeferred?this.completeDeferred.promise:void 0}}),i.afterLoad=function(t){I.push(t)},i.doLayout=function(){D.exec()},i.doLayoutAsync=function(){D.delayedExec()},i.init=function(t){o=t},i.reset=function(){x={}},i.findInstance=function(t){return t&&x[t]?x[t]:null},i.find=function(t){var e=i.findInstance(t);return e&&e.element||null},i.embed=function(t){var e=[],n=[],s=[];g.isArray(t)||(t=[t||a]),b.time("sandboxes"),t.forEach(function(t){v.forIn(o,function(n,i){var r=t.querySelectorAll(n);v.toRealArray(r).forEach(function(t){var n;t.getAttribute(N)||(t.setAttribute(N,"true"),n=new i(t),e.push(n),s.push(n.sandboxCreated))})})}),p.all(s).then(function(){b.timeEnd("sandboxes")}),i.doLayout(),e.forEach(function(t){n.push(t.completed()),t.render()}),p.all(n).then(function(t){t=t.filter(function(t){return t}),t.length&&(A.get("events").trigger("loaded",{widgets:t}),b.timeEnd("load"))}).then(i.trackRender),i.doLayoutAsync(),r()},i.trackRender=function(){d.endAndTrack("render","widgets-js-load","page",{widget_origin:_.rootDocumentLocation(),widget_frame:_.isFramed()&&_.currentDocumentLocation()})},c.setInterval(function(){i.doLayout()},500),e.exports=i},{12:12,15:15,17:17,18:18,22:22,37:37,54:54,56:56,60:60,61:61,62:62,65:65,66:66,68:68,71:71,74:74,9:9}],44:[function(t,e,n){function i(t,e){var n=t.querySelector("blockquote.subject"),i=t.querySelector("blockquote.reply"),r=n&&n.getAttribute("data-tweet-id"),s=i&&i.getAttribute("data-tweet-id"),o={},a={};r&&(o[r]={item_type:0},A.clientEvent({page:"tweet",section:"subject",component:"tweet",action:"results"},y.aug({},e,{item_ids:[r],item_details:o}),!0),_.scribeTweetAudienceImpression(),s&&(a[s]={item_type:0},A.clientEvent({page:"tweet",section:"conversation",component:"tweet",action:"results"},y.aug({},e,{item_ids:[s],item_details:a,associations:{4:{association_id:r,association_type:4}}}),!0)))}function r(t,e){var n={};t&&(n[t]={item_type:0},A.clientEvent({page:"tweet",section:"subject",component:"rawembedcode",action:"no_results"},{widget_origin:T.rootDocumentLocation(),widget_frame:T.isFramed()&&T.currentDocumentLocation(),message:e,item_ids:[t],item_details:n},!0),_.scribeTweetAudienceImpression())}function s(t,e,n,i){S[t]=S[t]||[],S[t].push({s:n,f:i,lang:e})}function o(t){if(t){var e,n,i;h.apply(this,[t]),e=this.params(),n=this.srcEl&&this.srcEl.getElementsByTagName("A"),i=n&&n[n.length-1],this.hideThread="none"==(e.conversation||this.dataAttr("conversation"))||y.contains(this.classAttr,"tw-hide-thread"),this.hideCard="hidden"==(e.cards||this.dataAttr("cards"))||y.contains(this.classAttr,"tw-hide-media"),"left"==(e.align||this.attr("align"))||y.contains(this.classAttr,"tw-align-left")?this.align="left":"right"==(e.align||this.attr("align"))||y.contains(this.classAttr,"tw-align-right")?this.align="right":("center"==(e.align||this.attr("align"))||y.contains(this.classAttr,"tw-align-center"))&&(this.align="center",this.containerWidth>this.dimensions.MIN_WIDTH*(1/.7)&&this.width>.7*this.containerWidth&&(this.width=.7*this.containerWidth)),this.narrow=e.narrow||this.width<=this.dimensions.NARROW_WIDTH,this.narrow&&this.classAttr.push("var-narrow"),this.tweetId=e.tweetId||i&&w.status(i.href)}}var a=t(3),c=t(12),u=t(7),d=t(43),h=t(47),l=t(53),f=t(41),p=t(4),m=t(6),g=t(22),v=t(66),y=t(74),w=t(70),b=t(38),_=t(30),A=t(31),E=t(40),T=t(54),x=t(17),I=t(5),D=t(32),N="tweetembed",S={},C=[];o.prototype=new h,y.aug(o.prototype,{renderedClassNames:"twitter-tweet twitter-tweet-rendered",dimensions:{DEFAULT_HEIGHT:"0",DEFAULT_WIDTH:"500",NARROW_WIDTH:"350",maxHeight:"375",FULL_BLEED_PHOTO_MAX_HEIGHT:"600",MIN_WIDTH:"220",MIN_HEIGHT:"0",MARGIN:"10px 0",WIDE_MEDIA_PADDING:32,NARROW_MEDIA_PADDING:32,BORDERS:0},styleSheetUrl:a.tweet,onStyleSheetLoad:function(){var t=this;this.sandbox.hasContent()&&(d.doLayoutAsync(),this.sandbox.resizeToContent().then(function(e){t.height=e}))},loadCardCss:function(t){var e=this,n=t&&t.getAttribute("data-css");n&&this.sandbox.appendStyleSheet(n,function(){p.add(t,"is-ready"),d.doLayoutAsync(),e.sandbox.resizeToContent().then(function(t){e.height=t})})},create:function(t){var e,n,r=this,s=this.sandbox.createElement("div");return s.innerHTML=t,(e=s.children[0]||!1)?("dark"==this.theme&&this.classAttr.push("thm-dark"),this.linkColor&&this.addSiteStyles(),p.present(e,"media-forward")&&(this.fullBleedPhoto=!0,this.dimensions.maxHeight=this.dimensions.FULL_BLEED_PHOTO_MAX_HEIGHT),E.retinize(e),E.fixMediaCardLayout(e),e.id=this.id,e.className+=" "+this.classAttr.join(" "),e.lang=this.lang,this.sandbox.setTitle(e.getAttribute("data-iframe-title")||"Tweet"),this.loadCardCss(e.querySelector(".PrerenderedCard")),this.sandbox.appendChild(e).then(function(){r.renderedDeferred.resolve(r.sandbox)}),n=this.layout(function(){r.predefinedWidth=r.width,r.width=r.sandbox.width(r.width),r.collapseRegions()}),n.then(function(){r.constrainMedia(e,r.contentWidth(r.width)),r.setNarrow().then(function(){r.layout(function(){r.completeDeferred.resolve(r.sandbox.element())})})}),i(e,this.baseScribeData(),this.partner),e):void 0},render:function(){var t=this,e="",n=this.tweetId;return n?(this.hideCard&&(e+="c"),this.hideThread&&(e+="t"),e&&(n+="-"+e),this.rendered().then(function(e){var n=t.srcEl;n&&n.parentNode&&t.layout(function(){n&&n.parentNode&&n.parentNode.removeChild(n)}),"center"==t.align?e.style({margin:"7px auto",cssFloat:"none"}):t.align&&(t.width==t.dimensions.DEFAULT_WIDTH&&(t.predefinedWidth=t.width=t.dimensions.NARROW_WIDTH),e.style({cssFloat:t.align})),t.sandbox.resizeToContent().then(function(e){return t.height=e,d.doLayoutAsync(),t.sandbox.resizeToContent().then(function(e){t.height=e})}).then(function(){e.onresize(t.handleResize.bind(t))}),e.style({position:"static",visibility:"visible"}),d.doLayoutAsync()}),s(n,this.lang,function(e){t.ready().then(function(){t.element=t.create(e),t.readTimestampTranslations(),t.updateTimeStamps(),t.bindIntentHandlers(),t.bindUIHandlers(),t.bindPermalinkHandler(),d.doLayoutAsync()})},function(){r(t.tweetId,t.partner),t.completeDeferred.resolve(t.srcEl)}),C.push(this.completed()),this.completed().then(this.scribePerformance.bind(this)),this.completed()):(this.completeDeferred.resolve(this.srcEl),this.completed())},bindPermalinkHandler:function(){var t=this;I.delegate(this.element,"click","A",function(t){I.stopPropagation(t)}),I.delegate(this.element,"click",".twitter-tweet",function(e){var n,i;u.getSelection(t.sandbox._win)||(n=t.element.querySelectorAll("blockquote.tweet"),i=n[n.length-1],t.openPermalink(i),t.scribePermalinkClick(i,e),I.stopPropagation(e))})},scribePermalinkClick:function(t,e){var n=this.createScribeData(t);D.interaction(e,n,!1)},openPermalink:function(t){var e=t.cite;w.isStatus(e)&&c.open(e)},scribePerformance:function(){g.endAndTrack("render","widgets-js-load","tweet",this.baseScribeData())},addUrlParams:function(t){var e=this,n={related:this.related,partner:this.partner,original_referer:T.rootDocumentLocation(),tw_p:N};return this.addUrlParams=f(n,function(t){var n=m.closest(".tweet",t,e.element);return{tw_i:n.getAttribute("data-tweet-id")}}),this.addUrlParams(t)},baseScribeData:function(){return{widget_origin:T.rootDocumentLocation(),widget_frame:T.isFramed()&&T.currentDocumentLocation(),message:this.partner}},handleResize:function(t){var e=this;t!=this.width&&(this.width=t,this.setNarrow(),this.constrainMedia(this.element,this.contentWidth(t)),this.collapseRegions(),this.sandbox.resizeToContent().then(function(t){e.height=t,x.get("events").trigger("resize",{target:e.sandbox.element()})}),d.doLayoutAsync())},readTimestampTranslations:function(){var t=this.element,e="data-dt-",n=t.getAttribute(e+"months")||"";this.datetime=new l(y.compact({phrases:{AM:t.getAttribute(e+"am"),PM:t.getAttribute(e+"pm")},months:n.split("|"),formats:{full:t.getAttribute(e+"full")}}))},updateTimeStamps:function(){var t=this.element.querySelector(".long-permalink"),e=t.getAttribute("data-datetime"),n=e&&this.datetime.localTimeStamp(e),i=t.getElementsByTagName("TIME")[0];n&&(this.layout(function(){return i&&i.innerHTML?void(i.innerHTML=n):void(t.innerHTML=n)},"Update Timestamp"),d.doLayoutAsync())}}),o.fetchAndRender=function(){var t,e,n=S,i=[];if(S={},n.keys)i=n.keys();else for(t in n)n.hasOwnProperty(t)&&i.push(t);i.length&&(A.init(),e=n[i[0]][0].lang,b.tweets({ids:i.sort(),lang:e,complete:function(t){y.forIn(t,function(t,e){var i=n[t];i.forEach(function(t){t.s&&t.s.call(this,e)}),delete n[t]}),d.doLayout(),y.forIn(n,function(t,e){e.forEach(function(e){e.f&&e.f.call(this,t)})}),d.doLayout()}}),v.all(C).then(function(){A.flush()}),C=[])},d.afterLoad(o.fetchAndRender),e.exports=o},{12:12,17:17,22:22,3:3,30:30,31:31,32:32,38:38,4:4,40:40,41:41,43:43,47:47,5:5,53:53,54:54,6:6,66:66,7:7,70:70,74:74}],45:[function(t,e,n){function i(t){if(t){var e,n,i,r;o.apply(this,[t]),e=this.params(),n=e.size||this.dataAttr("size"),i=e.showScreenName||this.dataAttr("show-screen-name"),r=e.count||this.dataAttr("count"),this.classAttr.push("twitter-follow-button"),this.showScreenName="false"!=i,this.showCount=!(e.showCount===!1||"false"==this.dataAttr("show-count")),"none"==r&&(this.showCount=!1),this.explicitWidth=e.width||this.dataAttr("width")||"",this.screenName=e.screen_name||e.screenName||a.screenName(this.attr("href")),this.preview=e.preview||this.dataAttr("preview")||"",this.align=e.align||this.dataAttr("align")||"",this.size="large"==n?"l":"m"}}var r=t(56),s=t(74),o=t(43),a=t(70),c=t(66);i.prototype=new o,s.aug(i.prototype,{iframeSource:"widgets/follow_button.f399ce91824b7ff2ece442a414e1a813.{{lang}}.html",widgetUrlParams:function(){return s.compact({screen_name:this.screenName,lang:this.lang,show_count:this.showCount,show_screen_name:this.showScreenName,align:this.align,id:this.id,preview:this.preview,size:this.size,partner:this.partner,dnt:r.enabled(),_:+new Date})},render:function(){if(!this.screenName)return c.reject("Missing Screen Name");var t=this,e=this.makeIframeSource(),n=this.create(e,{title:"Twitter Follow Button"}).then(function(e){return t.element=e});return n}}),e.exports=i},{43:43,56:56,66:66,70:70,74:74}],46:[function(t,e,n){function i(t){p.open(t)}function r(e,n){var i=t(35);i.openIntent(e,n)}function s(t,e){if(f.isTwitterURL(t))if(g.get("eventsHub")&&e){var n=new o(c.generateId(),e);c.add(n),r(t,e),m.get("events").trigger("click",{target:e,region:"intent",type:"click",data:{}})}else i(t)}function o(t,e){this.id=t,this.element=this.srcEl=e}function a(t){this.srcEl=[],this.element=t}var c,u=t(9),d=t(43),h=t(74),l=t(66),f=t(70),p=t(21),m=t(17),g=t(16);a.prototype=new d,h.aug(a.prototype,{render:function(){return c=this,l.resolve(u.body)}}),a.open=s,e.exports=a},{16:16,17:17,21:21,35:35,43:43,66:66,70:70,74:74,9:9}],47:[function(t,e,n){function i(){o=r.VALID_COLOR.test(l.val("widgets:link-color"))&&RegExp.$1,c=r.VALID_COLOR.test(l.val("widgets:border-color"))&&RegExp.$1,a=l.val("widgets:theme")}function r(t){if(t){var e,n=this;this.readyDeferred=new A,this.renderedDeferred=new A,d.apply(this,[t]),e=this.params(),this.targetEl=this.srcEl&&this.srcEl.parentNode||e.targetEl||u.body,this.predefinedWidth=r.VALID_UNIT.test(e.width||this.attr("width"))&&RegExp.$1,this.layout(function(){return n.containerWidth=w.effectiveWidth(n.targetEl)}).then(function(t){var i=n.predefinedWidth||t||n.dimensions.DEFAULT_WIDTH;n.height=r.VALID_UNIT.test(e.height||n.attr("height"))&&RegExp.$1,n.width=Math.max(n.dimensions.MIN_WIDTH,Math.min(i,n.dimensions.DEFAULT_WIDTH))}),this.linkColor=r.VALID_COLOR.test(e.linkColor||this.dataAttr("link-color"))?RegExp.$1:o,this.borderColor=r.VALID_COLOR.test(e.borderColor||this.dataAttr("border-color"))?RegExp.$1:c,this.theme=e.theme||this.attr("data-theme")||a,this.theme=/(dark|light)/.test(this.theme)?this.theme:"",this.classAttr.push(E.touch()?"is-touch":"not-touch"),E.ie9()&&this.classAttr.push("ie9"),this.sandboxCreated=b.createSandbox({"class":this.renderedClassNames,id:this.id,allowfullscreen:""},{position:"absolute",visibility:"hidden"},function(t){n.modifyFrame&&(t=n.modifyFrame(t)),n.srcEl?n.targetEl.insertBefore(t,n.srcEl):n.targetEl.appendChild(t)},this.layout).then(function(t){n.setupSandbox(t),new m(t.element().contentWindow)}),this.rendered().then(function(t){n.applyVisibleSandboxStyles(t)})}}function s(t,e){return t+e}var o,a,c,u=t(9),d=t(43),h=t(46),l=t(15),f=t(40),p=t(32),m=t(78),g=t(4),v=t(6),y=t(5),w=t(8),b=t(28),_=t(51),A=t(65),E=t(57),T=t(66),x=t(70),I=t(71),D=t(74),N=t(67),S=[".customisable",".customisable:link",".customisable:visited"],C=[".customisable:hover",".customisable:focus",".customisable:active",".customisable-highlight:hover",".customisable-highlight:focus","a:hover .customisable-highlight","a:focus .customisable-highlight"],R=["a:hover .ic-mask","a:focus .ic-mask"],P=[".customisable-border"],L=[".timeline-header h1.summary",".timeline-header h1.summary a:link",".timeline-header h1.summary a:visited"],M={TWEET:0,RETWEET:10};r.prototype=new d,D.aug(r.prototype,{dimensions:{},styleSheetUrl:function(){throw new Error("must set styleSheetUrl")},onStyleSheetLoad:function(){},setupSandbox:function(t){var e,n,i=this;this.sandbox=t,e=this.styleSheetUrl(this.lang,this.theme),n=this.onStyleSheetLoad.bind(this),N.some([i.applyInitialSandboxStyles(t),t.appendCss(".SandboxRoot { display:none }"),t.setBaseTarget("_blank"),t.appendStyleSheet(e,n)]).then(function(){i.readyDeferred.resolve(t)})},ready:function(){return this.readyDeferred.promise},rendered:function(){return this.renderedDeferred.promise},contentWidth:function(t){var e=this.dimensions,n=this.borderless?0:e.BORDERS,i=this.fullBleedPhoto?0:this.chromeless&&this.narrow?e.NARROW_MEDIA_PADDING_CL:this.chromeless?e.WIDE_MEDIA_PADDING_CL:this.narrow?e.NARROW_MEDIA_PADDING:e.WIDE_MEDIA_PADDING;return(t||this.width)-(i+n)},applyInitialSandboxStyles:function(t){var e=this;return t.style({border:"none",maxWidth:"100%",minWidth:e.dimensions.MIN_WIDTH+"px",margin:e.dimensions.MARGIN,padding:"0",display:"block",position:"absolute",visibility:"hidden"},!0)},applyVisibleSandboxStyles:function(t){return t.style({position:"static",visibility:"visible"})},addSiteStyles:function(){function t(t){return("dark"==e.theme?".thm-dark ":"")+t}var e=this,n=[];return this.headingStyle&&n.push(L.map(t).join(",")+"{"+this.headingStyle+"}"),this.linkColor&&(n.push(S.map(t).join(",")+"{color:"+this.linkColor+"}"),n.push(R.map(t).join(",")+"{background-color:"+this.linkColor+"}"),n.push(C.map(t).join(",")+"{color:"+_.lighten(this.linkColor,.2)+"}")),this.borderColor&&n.push(P.map(t).concat("dark"==this.theme?[".thm-dark.customisable-border"]:[]).join(",")+"{border-color:"+this.borderColor+"}"),n.length?this.sandbox.appendCss(n.join("")):void 0},setNarrow:function(){var t=this,e=this.narrow;return this.narrow=this.width<this.dimensions.NARROW_WIDTH,e!=this.narrow?this.layout(function(){g.toggle(t.sandbox.root,"env-narrow",t.narrow),g.toggle(t.element,"var-narrow",t.narrow)}):T.resolve(this.narrow)},createScribeData:function(t){var e=D.aug({},this.baseScribeData(),{item_ids:[],item_details:this.extractTweetScribeDetails(t)});return D.forIn(e.item_details,function(t){e.item_ids.push(t)}),e},bindUIHandlers:function(){var t=this.element;y.delegate(t,"click",".MediaCard-dismissNsfw",function(){var e=v.closest(".MediaCard",this,t);g.remove(e,"MediaCard--nsfw")})},bindIntentHandlers:function(){function t(t){var i=v.closest(".tweet",this,n),r=e.createScribeData(i);p.interaction(t,r,!0)}var e=this,n=this.element;y.delegate(n,"click","A",t),y.delegate(n,"click","BUTTON",t),y.delegate(n,"click",".profile",function(){e.addUrlParams(this)}),y.delegate(n,"click",".follow-button",function(t){var n;t.altKey||t.metaKey||t.shiftKey||E.ios()||E.android()||I.asBoolean(this.getAttribute("data-age-gate"))||(n=x.intentForFollowURL(this.href,!0),n&&(h.open(n,e.sandbox.element()),y.preventDefault(t)))}),y.delegate(n,"click",".web-intent",function(t){e.addUrlParams(this),t.altKey||t.metaKey||t.shiftKey||(h.open(this.href,e.sandbox.element()),y.preventDefault(t))})},baseScribeData:function(){return{}},extractTweetScribeDetails:function(t){var e,n,i={};return t?(e=t.getAttribute("data-tweet-id"),n=t.getAttribute("data-rendered-tweet-id")||e,n==e?i[n]={item_type:M.TWEET}:e&&(i[n]={item_type:M.RETWEET,target_type:M.TWEET,target_id:e}),i):i},constrainMedia:function(t,e){return f.constrainMedia(t||this.element,e||this.contentWidth(),this.dimensions.maxHeight,this.layout)},collapseRegions:function(){var t=this;D.toRealArray(this.element.querySelectorAll(".collapsible-container")).forEach(function(e){var n,i,r=D.toRealArray(e.children),o=r.length&&e.offsetWidth,a=r.length&&r.map(function(t){return t.offsetWidth}),c=r.length;if(r.length)for(;c>0;){if(c--,n=a.reduce(s,0),!o||!n)return;if(o>n)return;i=r[c].getAttribute("data-collapsed-class"),i&&(g.add(t.element,i),a[c]=r[c].offsetWidth)}})}}),r.VALID_UNIT=/^([0-9]+)( ?px)?$/,r.VALID_COLOR=/^(#(?:[0-9a-f]{3}|[0-9a-f]{6}))$/i,i(),e.exports=r},{15:15,28:28,32:32,4:4,40:40,43:43,46:46,5:5,51:51,57:57,6:6,65:65,66:66,67:67,70:70,71:71,74:74,78:78,8:8,9:9}],48:[function(t,e,n){function i(t){if(t){var e,n,i,r,s,o,c,u;a.apply(this,[t]),e=this.params(),n=(e.chrome||this.dataAttr("chrome")||"").split(" "),this.preview=e.previewParams,this.widgetId=e.widgetId||this.dataAttr("widget-id"),this.instanceId=++z,this.cursors={maxPosition:0,minPosition:0},this.override=(r=e.screenName||this.dataAttr("screen-name"))||(s=e.userId||this.dataAttr("user-id"))?{overrideType:"user",overrideId:s,overrideName:r,withReplies:y.asBoolean(e.showReplies||this.dataAttr("show-replies"))?"true":"false"}:(r=e.favoritesScreenName||this.dataAttr("favorites-screen-name"))||(s=e.favoritesUserId||this.dataAttr("favorites-user-id"))?{overrideType:"favorites",overrideId:s,overrideName:r}:((r=e.listOwnerScreenName||this.dataAttr("list-owner-screen-name"))||(s=e.listOwnerId||this.dataAttr("list-owner-id")))&&((o=e.listId||this.dataAttr("list-id"))||(c=e.listSlug||this.dataAttr("list-slug")))?{overrideType:"list",overrideOwnerId:s,overrideOwnerName:r,overrideId:o,overrideName:c}:(u=e.customTimelineId||this.dataAttr("custom-timeline-id"))?{overrideType:"custom",overrideId:u}:{},this.tweetLimit=y.asInt(e.tweetLimit||this.dataAttr("tweet-limit")),this.staticTimeline=this.tweetLimit>0,n.length&&(i=w.contains(n,"none"),this.chromeless=i||w.contains(n,"transparent"),this.headerless=i||w.contains(n,"noheader"),this.footerless=i||w.contains(n,"nofooter"),this.borderless=i||w.contains(n,"noborders"),this.noscrollbar=w.contains(n,"noscrollbar")),this.headingStyle=g.sanitize(e.headingStyle||this.dataAttr("heading-style"),void 0,!0),this.classAttr.push("twitter-timeline-rendered"),this.ariaPolite=e.ariaPolite||this.dataAttr("aria-polite")}}var r=t(12),s=t(3),o=t(43),a=t(47),c=t(53),u=t(2),d=t(22),h=t(38),l=t(40),f=t(30),p=t(31),m=t(41),g=t(52),v=t(57),y=t(71),w=t(74),b=t(5),_=t(4),A=t(6),E=t(56),T=t(54),x=t(17),I=t(16),D={CLIENT_SIDE_USER:0,CLIENT_SIDE_APP:2},N=".timeline",S=".new-tweets-bar",C=".timeline-header",R=".timeline-footer",P=".stream",L=".h-feed",M=".tweet",O=".detail-expander",k=".expand",H=".permalink",W=".no-more-pane",j="expanded",U="pending-scroll-in",q="pending-new-tweet-display",F="pending-new-tweet",z=0;i.prototype=new a,w.aug(i.prototype,{renderedClassNames:"twitter-timeline twitter-timeline-rendered",dimensions:{DEFAULT_HEIGHT:"600",DEFAULT_WIDTH:"520",NARROW_WIDTH:"320",maxHeight:"375",MIN_WIDTH:"180",MIN_HEIGHT:"200",MARGIN:"0",WIDE_MEDIA_PADDING:81,NARROW_MEDIA_PADDING:16,WIDE_MEDIA_PADDING_CL:60,NARROW_MEDIA_PADDING_CL:12,BORDERS:2},styleSheetUrl:s.timeline,create:function(t){var e,n,i,r,s=this,o=this.sandbox.createElement("div"),a=[];return o.innerHTML=t.body,(e=o.children[0]||!1)?(this.reconfigure(t.config),this.discardStaticOverflow(e),this.sandbox.setTitle(e.getAttribute("data-iframe-title")||"Timeline"),l.retinize(e),this.constrainMedia(e),this.searchQuery=e.getAttribute("data-search-query"),this.profileId=e.getAttribute("data-profile-id"),this.timelineType=e.getAttribute("data-timeline-type"),r=this.getTweetDetails(o.querySelector(L)),w.forIn(r,function(t){a.push(t)}),i=this.baseScribeData(),i.item_ids=a,i.item_details=r,this.timelineType&&p.clientEvent({page:this.timelineType+"_timeline",component:"timeline",element:"initial",action:a.length?"results":"no_results"},i,!0),p.clientEvent({page:"timeline",component:"timeline",element:"initial",action:a.length?"results":"no_results"},i,!0),f.scribeTimelineAudienceImpression(),p.flush(),"assertive"==this.ariaPolite&&(n=e.querySelector(S),n.setAttribute("aria-polite","assertive")),e.id=this.id,e.className+=" "+this.classAttr.join(" "),e.lang=this.lang,this.ready().then(function(t){t.appendChild(e).then(function(){s.renderedDeferred.resolve(s.sandbox)}),t.style({display:"inline-block"}),s.layout(function(){s.srcEl&&s.srcEl.parentNode&&s.srcEl.parentNode.removeChild(s.srcEl),s.predefinedWidth=s.width,s.predefinedHeight=s.height,s.width=t.width(s.width),s.height=t.height(s.height)}).then(function(){s.setNarrow(),s.sandbox.onresize(s.handleResize.bind(s)),s.completeDeferred.resolve(s.sandbox.element())})}),e):void 0},render:function(){var t=this;return this.preview||this.widgetId?(this.rendered().then(this.staticTimeline?function(t){t.resizeToContent(),o.doLayoutAsync()}:function(){t.recalculateStreamHeight(),o.doLayoutAsync()}),this.preview?this.getPreviewTimeline():this.getTimeline(),this.completed().then(this.scribePerformance.bind(this)),this.completed()):(this.completeDeferred.reject(400),this.completed())},scribePerformance:function(){d.endAndTrack("render","widgets-js-load","timeline",this.baseScribeData())},getPreviewTimeline:function(){var t=this;h.timelinePreview({success:function(e){t.ready().then(function(){t.element=t.create(e),t.readTranslations(),t.bindInteractions(),t.updateCursors(e.headers,{
initial:!0}),o.doLayoutAsync()})},error:function(e){return e&&e.headers?void t.completeDeferred.reject(e.headers.status):void t.completeDeferred.resolve(t.srcEl)},params:this.preview})},getTimeline:function(){var t=this;p.init(),h.timeline(w.aug({id:this.widgetId,instanceId:this.instanceId,dnt:E.enabled(),lang:this.lang,success:function(e){t.ready().then(function(){t.element=t.create(e),t.readTranslations(),t.bindInteractions(),t.updateTimeStamps(),t.updateCursors(e.headers,{initial:!0}),e.headers.xPolling&&/\d/.test(e.headers.xPolling)&&(t.pollInterval=1e3*e.headers.xPolling),t.staticTimeline||t.schedulePolling(),o.doLayoutAsync()})},error:function(e){return e&&e.headers?void t.completeDeferred.reject(e.headers.status):void t.completeDeferred.resolve(t.srcEl)}},this.override))},reconfigure:function(t){this.lang=t.lang,this.theme||(this.theme=t.theme),"dark"==this.theme&&this.classAttr.push("thm-dark"),this.chromeless&&this.classAttr.push("var-chromeless"),this.borderless&&this.classAttr.push("var-borderless"),this.headerless&&this.classAttr.push("var-headerless"),this.footerless&&this.classAttr.push("var-footerless"),this.staticTimeline&&this.classAttr.push("var-static"),!this.linkColor&&t.linkColor&&a.VALID_COLOR.test(t.linkColor)&&(this.linkColor=RegExp.$1),!this.height&&a.VALID_UNIT.test(t.height)&&(this.height=RegExp.$1),this.height=Math.max(this.dimensions.MIN_HEIGHT,this.height?this.height:this.dimensions.DEFAULT_HEIGHT),this.preview&&this.classAttr.push("var-preview"),this.narrow=this.width<=this.dimensions.NARROW_WIDTH,this.narrow&&this.classAttr.push("var-narrow"),this.addSiteStyles()},getTweetDetails:function(t){var e,n=this,i={};return e=t&&t.children||[],w.toRealArray(e).forEach(function(t){w.aug(i,n.extractTweetScribeDetails(t))}),i},baseScribeData:function(){return{widget_id:this.widgetId,widget_origin:T.rootDocumentLocation(),widget_frame:T.isFramed()&&T.currentDocumentLocation(),message:this.partner,query:this.searchQuery,profile_id:this.profileId}},bindInteractions:function(){var t=this,e=this.element,n=!0;this.bindIntentHandlers(),this.bindUIHandlers(),b.delegate(e,"click",".load-tweets",function(e){n&&(n=!1,t.forceLoad(),b.stop(e))}),b.delegate(e,"click",".display-sensitive-image",function(n){t.showNSFW(A.closest(M,this,e)),b.stop(n)}),b.delegate(e,"mouseover",N,function(){t.mouseOver=!0}),b.delegate(e,"mouseout",N,function(){t.mouseOver=!1}),b.delegate(e,"mouseover",S,function(){t.mouseOverNotifier=!0}),b.delegate(e,"mouseout",S,function(){t.mouseOverNotifier=!1,r.setTimeout(function(){t.hideNewTweetNotifier()},3e3)}),this.staticTimeline||(b.delegate(e,"click",k,function(n){n.altKey||n.metaKey||n.shiftKey||(t.toggleExpando(A.closest(M,this,e)),b.stop(n))}),b.delegate(e,"click","A",function(t){b.stopPropagation(t)}),b.delegate(e,"click",".with-expansion",function(e){t.toggleExpando(this),b.stop(e)}),b.delegate(e,"click",".load-more",function(){t.loadMore()}),b.delegate(e,"click",S,function(){t.scrollToTop(),t.hideNewTweetNotifier(!0)}))},scrollToTop:function(){var t=this.element.querySelector(P);t.scrollTop=0,t.focus()},update:function(){var t=this,e=this.element.querySelector(L),n=e&&e.children[0],i=n&&n.getAttribute("data-tweet-id");this.updateTimeStamps(),this.requestTweets(i,!0,function(e){e.childNodes.length>0&&t.insertNewTweets(e)})},loadMore:function(){var t=this,e=w.toRealArray(this.element.querySelectorAll(M)).pop(),n=e&&e.getAttribute("data-tweet-id");this.requestTweets(n,!1,function(e){var i=t.element.querySelector(W),r=e.childNodes[0];return i.style.cssText="",r&&r.getAttribute("data-tweet-id")==n&&e.removeChild(r),e.childNodes.length>0?void t.appendTweets(e):(_.add(t.element,"no-more"),void i.focus())})},forceLoad:function(){var t=this,e=!!this.element.querySelectorAll(L).length;this.requestTweets(1,!0,function(n){n.childNodes.length&&(t[e?"insertNewTweets":"appendTweets"](n),_.add(t.element,"has-tweets"))})},schedulePolling:function(t){var e=this;null!==this.pollInterval&&(t=I.get("timeline.pollInterval")||t||this.pollInterval||1e4,t>-1&&r.setTimeout(function(){e.isUpdating||e.update(),e.schedulePolling()},t))},updateCursors:function(t,e){(e||{}).initial?(this.cursors.maxPosition=t.maxPosition,this.cursors.minPosition=t.minPosition):(e||{}).newer?this.cursors.maxPosition=t.maxPosition||this.cursors.maxPosition:this.cursors.minPosition=t.minPosition||this.cursors.minPosition},requestTweets:function(t,e,n){var i=this,r={id:this.widgetId,instanceId:this.instanceId,screenName:this.widgetScreenName,userId:this.widgetUserId,withReplies:this.widgetShowReplies,dnt:E.enabled(),lang:this.lang};e&&this.cursors.maxPosition?r.minPosition=this.cursors.maxPosition:!e&&this.cursors.minPosition?r.maxPosition=this.cursors.minPosition:e?r.sinceId=t:r.maxId=t,r.complete=function(){i.isUpdating=!1},r.error=function(t){if(t&&t.headers){if("404"==t.headers.status)return void(i.pollInterval=null);if("503"==t.headers.status)return void(i.pollInterval*=1.5)}},r.success=function(t){var r,s,o=i.sandbox.createDocumentFragment(),a=i.sandbox.createElement("ol"),c=[];if(i.updateCursors(t.headers,{newer:e}),t&&t.headers&&t.headers.xPolling&&/\d+/.test(t.headers.xPolling)&&(i.pollInterval=1e3*t.headers.xPolling),t&&void 0!==t.body){if(a.innerHTML=t.body,a.children[0]&&"LI"!=a.children[0].tagName)return;for(s=i.getTweetDetails(a),w.forIn(s,function(t){c.push(t)}),c.length&&(r=i.baseScribeData(),r.item_ids=c,r.item_details=s,r.event_initiator=e?D.CLIENT_SIDE_APP:D.CLIENT_SIDE_USER,i.timelineType&&p.clientEvent({page:i.timelineType+"_timeline",component:"timeline",element:"initial",action:c.length?"results":"no_results"},r,!0),p.clientEvent({page:"timeline",component:"timeline",element:e?"newer":"older",action:"results"},r,!0),p.flush()),l.retinize(a),i.constrainMedia(a);a.children[0];)o.appendChild(a.children[0]);n(o)}},h.timelinePoll(w.aug(r,this.override))},insertNewTweets:function(t){var e,n=this,i=this.element.querySelector(P),s=i.querySelector(L),o=s.offsetHeight;return s.insertBefore(t,s.firstChild),e=s.offsetHeight-o,x.get("events").trigger("timelineUpdated",{target:this.sandbox.element(),region:"newer"}),i.scrollTop>40||this.mouseIsOver()?(i.scrollTop=i.scrollTop+e,this.updateTimeStamps(),void this.showNewTweetNotifier()):(_.remove(this.element,U),s.style.cssText="margin-top: -"+e+"px",r.setTimeout(function(){i.scrollTop=0,_.add(n.element,U),v.cssTransitions()?s.style.cssText="":u.animate(function(t){s.style.cssText=e>t?"margin-top: -"+(e-t)+"px":""},e,500,u.easeOut)},500),this.updateTimeStamps(),void("custom"!=this.timelineType&&this.gcTweets(50)))},appendTweets:function(t){var e=this.element.querySelector(L);e.appendChild(t),this.updateTimeStamps(),x.get("events").trigger("timelineUpdated",{target:this.sandbox.element(),region:"older"})},gcTweets:function(t){var e,n=this.element.querySelector(L),i=n.children.length;for(t=t||50;i>t&&(e=n.children[i-1]);i--)n.removeChild(e)},showNewTweetNotifier:function(){var t=this,e=this.element.querySelector(S),n=e.children[0];e.style.cssText="",e.removeChild(n),e.appendChild(n),_.add(this.element,q),r.setTimeout(function(){_.add(t.element,F)},10),this.newNoticeDisplayTime=+new Date,r.setTimeout(function(){t.hideNewTweetNotifier()},5e3)},hideNewTweetNotifier:function(t){var e=this;(t||!this.mouseOverNotifier)&&(_.remove(this.element,F),r.setTimeout(function(){_.remove(e.element,q)},500))},discardStaticOverflow:function(t){var e,n=t.querySelector(L);if(this.staticTimeline)for(this.height=0;e=n.children[this.tweetLimit];)n.removeChild(e)},hideStreamScrollBar:function(){var t,e=this.element.querySelector(P),n=this.element.querySelector(L);e.style.width="",t=this.element.offsetWidth-n.offsetWidth,t>0&&(e.style.width=this.element.offsetWidth+t+"px")},readTranslations:function(){var t=this.element,e="data-dt-";this.datetime=new c(w.compact({phrases:{now:t.getAttribute(e+"now"),s:t.getAttribute(e+"s"),m:t.getAttribute(e+"m"),h:t.getAttribute(e+"h"),second:t.getAttribute(e+"second"),seconds:t.getAttribute(e+"seconds"),minute:t.getAttribute(e+"minute"),minutes:t.getAttribute(e+"minutes"),hour:t.getAttribute(e+"hour"),hours:t.getAttribute(e+"hours")},months:t.getAttribute(e+"months").split("|"),formats:{abbr:t.getAttribute(e+"abbr"),shortdate:t.getAttribute(e+"short"),longdate:t.getAttribute(e+"long")}}))},updateTimeStamps:function(){for(var t,e,n,i,r=this.element.querySelectorAll(H),s=0;t=r[s];s++)n=t.getAttribute("data-datetime"),i=n&&this.datetime.timeAgo(n,this.i18n),e=t.getElementsByTagName("TIME")[0],i&&(e&&e.innerHTML?e.innerHTML=i:t.innerHTML=i)},mouseIsOver:function(){return this.mouseOver},addUrlParams:function(t){var e=this,n={tw_w:this.widgetId,related:this.related,partner:this.partner,query:this.searchQuery,profile_id:this.profileId,original_referer:T.rootDocumentLocation(),tw_p:"embeddedtimeline"};return this.addUrlParams=m(n,function(t){var n=A.closest(M,t,e.element);return n&&{tw_i:n.getAttribute("data-tweet-id")}}),this.addUrlParams(t)},showNSFW:function(t){var e,n,i,r,s,o,a=t.querySelector(".nsfw"),c=0;a&&(n=l.scaleDimensions(a.getAttribute("data-width"),a.getAttribute("data-height"),this.contentWidth(),a.getAttribute("data-height")),e=!!(r=a.getAttribute("data-player")),e?s=this.sandbox.createElement("iframe"):(s=this.sandbox.createElement("img"),r=a.getAttribute(v.retina()?"data-image-2x":"data-image"),s.alt=a.getAttribute("data-alt"),o=this.sandbox.createElement("a"),o.href=a.getAttribute("data-href"),o.appendChild(s)),s.title=a.getAttribute("data-title"),s.src=r,s.width=n.width,s.height=n.height,i=A.closest(O,a,t),c=n.height-a.offsetHeight,a.parentNode.replaceChild(e?s:o,a),i.style.cssText="height:"+(i.offsetHeight+c)+"px")},toggleExpando:function(t){var e,n,i=t.querySelector(O),r=i&&i.children[0],s=r&&r.getAttribute("data-expanded-media"),a=0,c=t.querySelector(k),u=c&&c.getElementsByTagName("B")[0],d=u&&(u.innerText||u.textContent);if(u){if(this.layout(function(){u.innerHTML=c.getAttribute("data-toggled-text"),c.setAttribute("data-toggled-text",d)}),_.present(t,j))return this.layout(function(){_.remove(t,j)}),i?(this.layout(function(){i.style.cssText="",r.innerHTML=""}),void o.doLayout()):void o.doLayout();s&&(e=this.sandbox.createElement("DIV"),e.innerHTML=s,l.retinize(e),a=this.constrainMedia(e),this.layout(function(){r.appendChild(e)})),i&&this.layout(function(){n=Math.max(r.offsetHeight,a),i.style.cssText="height:"+n+"px"}),this.layout(function(){_.add(t,j)}),o.doLayout()}},recalculateStreamHeight:function(t){var e=this,n=this.element.querySelector(C),i=this.element.querySelector(R),r=this.element.querySelector(P);this.layout(function(){var s=n.offsetHeight+(i?i.offsetHeight:0),o=t||e.sandbox.height();r.style.cssText="height:"+(o-s-2)+"px",e.noscrollbar&&e.hideStreamScrollBar()})},handleResize:function(t,e){var n=this,i=Math.min(this.dimensions.DEFAULT_WIDTH,Math.max(this.dimensions.MIN_WIDTH,Math.min(this.predefinedWidth||this.dimensions.DEFAULT_WIDTH,t)));(i!=this.width||e!=this.height)&&(this.width=i,this.height=e,this.setNarrow(),this.constrainMedia(this.element,this.contentWidth(i)),this.staticTimeline?this.layout(function(){n.height=n.element.offsetHeight,n.sandbox.height(n.height),x.get("events").trigger("resize",{target:n.sandbox.element()})}):(this.recalculateStreamHeight(e),x.get("events").trigger("resize",{target:this.sandbox.element()})),o.doLayoutAsync())}}),e.exports=i},{12:12,16:16,17:17,2:2,22:22,3:3,30:30,31:31,38:38,4:4,40:40,41:41,43:43,47:47,5:5,52:52,53:53,54:54,56:56,57:57,6:6,71:71,74:74}],49:[function(t,e,n){function i(t){o.apply(this,[t]);var e=this.params(),n=e.count||this.dataAttr("count"),i=e.size||this.dataAttr("size"),r=u.getScreenNameFromPage(),s=""+(e.shareWithRetweet||this.dataAttr("share-with-retweet")||a.val("share-with-retweet"));this.classAttr.push("twitter-tweet-button"),"hashtag"==e.type||c.contains(this.classAttr,"twitter-hashtag-button")?(this.type="hashtag",this.classAttr.push("twitter-hashtag-button")):"mention"==e.type||c.contains(this.classAttr,"twitter-mention-button")?(this.type="mention",this.classAttr.push("twitter-mention-button")):this.classAttr.push("twitter-share-button"),this.text=e.text||this.dataAttr("text"),this.text&&/\+/.test(this.text)&&!/ /.test(this.text)&&(this.text=this.text.replace(/\+/g," ")),this.counturl=e.counturl||this.dataAttr("counturl"),this.searchlink=e.searchlink||this.dataAttr("searchlink"),this.button_hashtag=d.hashTag(e.button_hashtag||e.hashtag||this.dataAttr("button-hashtag"),!1),this.size="large"==i?"l":"m",this.align=e.align||this.dataAttr("align")||"",this.via=e.via||this.dataAttr("via"),this.hashtags=e.hashtags||this.dataAttr("hashtags"),this.screen_name=d.screenName(e.screen_name||e.screenName||this.dataAttr("button-screen-name")),this.url=e.url||this.dataAttr("url"),this.type?(this.count="none",this.shareWithRetweet="never",r&&(this.related=this.related?r+","+this.related:r)):(this.text=this.text||l,this.url=this.url||u.getCanonicalURL()||f,this.count=c.contains(p,n)?n:"horizontal",this.via=this.via||r,s&&c.contains(m,s)&&(this.shareWithRetweet=s.replace("-","_")))}var r=t(9),s=t(10),o=t(43),a=t(15),c=t(74),u=t(73),d=t(70),h=t(56),l=r.title,f=s.href,p=["vertical","horizontal","none"],m=["never","publisher-first","publisher-only","author-first","author-only"];i.prototype=new o,c.aug(i.prototype,{iframeSource:"widgets/tweet_button.341448ccd3e070268cd097e6a7ee603f.{{lang}}.html",widgetUrlParams:function(){return c.compact({text:this.text,url:this.url,via:this.via,related:this.related,count:this.count,lang:this.lang,counturl:this.counturl,searchlink:this.searchlink,placeid:this.placeid,original_referer:s.href,id:this.id,size:this.size,type:this.type,screen_name:this.screen_name,share_with_retweet:this.shareWithRetweet,button_hashtag:this.button_hashtag,hashtags:this.hashtags,align:this.align,partner:this.partner,dnt:h.enabled(),_:+new Date})},render:function(){var t,e=this,n=this.makeIframeSource();return this.count&&this.classAttr.push("twitter-count-"+this.count),t=this.create(n,{title:"Twitter Tweet Button"}).then(function(t){return e.element=t})}}),e.exports=i},{10:10,15:15,43:43,56:56,70:70,73:73,74:74,9:9}],50:[function(t,e,n){function i(t,e,n,i){w[t]=w[t]||[],w[t].push({s:n,f:i,lang:e})}function r(t,e){var n={};n[t]={item_type:0},g.clientEvent({page:"video",component:"tweet",action:"results"},l.aug({},e,{item_ids:[t],item_details:n}),!0),m.scribeVideoAudienceImpression()}function s(t,e){var n={};n[t]={item_type:0},g.clientEvent({page:"video",component:"rawembedcode",action:"no_results"},{widget_origin:f.rootDocumentLocation(),widget_frame:f.isFramed()&&f.currentDocumentLocation(),message:e,item_ids:[t],item_details:n},!0),m.scribeVideoAudienceImpression()}function o(t){if(t){u.apply(this,[t]);var e=this.srcEl&&this.srcEl.getElementsByTagName("A"),n=e&&e[e.length-1],i=this.params();this.hideStatus="hidden"===(i.status||this.dataAttr("status")),this.tweetId=i.tweetId||n&&v.status(n.href)}}var a=t(3),c=t(43),u=t(47),d=t(53),h=t(66),l=t(74),f=t(54),p=t(38),m=t(30),g=t(31),v=t(70),y=t(9),w={},b=[];o.prototype=new u,l.aug(o.prototype,{renderedClassNames:"twitter-video twitter-video-rendered",videoPlayer:!0,dimensions:{DEFAULT_HEIGHT:"0",DEFAULT_WIDTH:"0",maxHeight:"500",MIN_WIDTH:"320",MIN_HEIGHT:"180",MARGIN:"10px 0",WIDE_MEDIA_PADDING:0,NARROW_MEDIA_PADDING:0,BORDERS:0},styleSheetUrl:a.video,applyVisibleSandboxStyles:function(t){return t.style({visibility:"visible"})},applyInitialSandboxStyles:function(t){return t.style({position:"absolute",top:0,left:0,width:"100%",height:"100%",visiblity:"hidden"})},modifyFrame:function(t){return this.constrainingWrapper=y.createElement("div"),this.constrainingWrapper.style.minWidth=this.dimensions.MIN_WIDTH+"px",this.constrainingWrapper.style.margin=this.dimensions.MARGIN,this.wrapper=y.createElement("div"),this.wrapper.style.position="relative",this.wrapper.style.height=0,this.constrainingWrapper.appendChild(this.wrapper),this.wrapper.appendChild(t),this.constrainingWrapper},create:function(t){var e,n,i=this,s=this.sandbox.createElement("div");if(s.innerHTML=t,e=s.children[0]){n=e.children[0],this.playerConfig=JSON.parse(e.getAttribute("data-player-config")),this.sandbox.setTitle(e.getAttribute("data-iframe-title")||"Video"),this.sandbox.appendChild(e).then(function(){i.renderedDeferred.resolve(i.sandbox),i.completeDeferred.resolve(i.sandbox.element())});var o=n.getAttribute("data-width"),a=n.getAttribute("data-height"),c=o/a,u=1/c*100+"%";return this.layout(function(){i.wrapper.style.paddingBottom=u,i.constrainingWrapper.style.maxWidth=parseInt(i.dimensions.maxHeight,10)*c+"px"}),r(this.tweetId,this.baseScribeData()),e}},render:function(){var t=this;return this.tweetId?(this.rendered().then(function(){var e=t.srcEl;e&&e.parentNode&&t.layout(function(){e.parentNode.removeChild(e)})}),i(this.tweetId,this.lang,function(e){t.ready().then(function(){t.element=t.create(e),t.readTimestampTranslations(),t.writePlayerConfig()})},function(){s(t.tweetId,t.partner),t.completeDeferred.resolve(t.srcEl)}),b.push(this.completed()),this.completed()):(this.completeDeferred.resolve(this.srcEl),this.completed())},baseScribeData:function(){return{widget_origin:f.rootDocumentLocation(),widget_frame:f.isFramed()&&f.currentDocumentLocation(),message:this.partner}},readTimestampTranslations:function(){var t=this.element,e="data-dt-",n=t.getAttribute(e+"months")||"";this.datetime=new d(l.compact({phrases:{AM:t.getAttribute(e+"am"),PM:t.getAttribute(e+"pm")},months:n.split("|"),formats:{full:t.getAttribute(e+"full")}}))},getTimestamp:function(){var t=this.element.getAttribute("data-datetime"),e=t&&this.datetime.localTimeStamp(t);return{local:e}},writePlayerConfig:function(){this.playerConfig.statusTimestamp=this.getTimestamp(),this.playerConfig.hideStatus=this.hideStatus,this.element.setAttribute("data-player-config",JSON.stringify(this.playerConfig))}}),o.fetchAndRender=function(){var t=w,e=[];w={};for(var n in t)t.hasOwnProperty(n)&&e.push(n);e.length&&(p.videos({ids:e.sort(),lang:t[e[0]][0].lang,complete:function(e){l.forIn(e,function(e,n){var i=t[e];i.forEach(function(t){t.s&&t.s.call(this,n)}),delete t[e]}),l.forIn(t,function(t,e){e.forEach(function(e){e.f&&e.f.call(this,t)})})}}),h.all(b),b=[])},c.afterLoad(o.fetchAndRender),e.exports=o},{3:3,30:30,31:31,38:38,43:43,47:47,53:53,54:54,66:66,70:70,74:74,9:9}],51:[function(t,e,n){function i(t){return c.parseInt(t,16)}function r(t){return u.isType("string",t)?(t=t.replace(d,""),t+=3===t.length?t:""):null}function s(t,e){var n,s,o,a;return t=r(t),e=e||0,t?(n=0>e?0:255,e=0>e?-Math.max(e,-1):Math.min(e,1),s=i(t.substring(0,2)),o=i(t.substring(2,4)),a=i(t.substring(4,6)),"#"+(16777216+65536*(Math.round((n-s)*e)+s)+256*(Math.round((n-o)*e)+o)+(Math.round((n-a)*e)+a)).toString(16).slice(1)):void 0}function o(t,e){return s(t,-e)}function a(t,e){return s(t,e)}var c=t(12),u=t(74),d=/^#/;e.exports={darken:o,lighten:a}},{12:12,74:74}],52:[function(t,e,n){e.exports={sanitize:function(t,e,n){var i,r=/^[\w ,%\/"'\-_#]+$/,s=t&&t.split(";").map(function(t){return t.split(":").slice(0,2).map(function(t){return t.trim()})}),o=0,a=[],c=n?"!important":"";for(e=e||/^(font|text\-|letter\-|color|line\-)[\w\-]*$/;s&&(i=s[o]);o++)i[0].match(e)&&i[1].match(r)&&a.push(i.join(":")+c);return a.join(";")}}},{}],53:[function(t,e,n){function i(t){return 10>t?"0"+t:t}function r(t){function e(t,e){return n&&n[t]&&(t=n[t]),t.replace(/%\{([\w_]+)\}/g,function(t,n){return void 0!==e[n]?e[n]:t})}var n=t&&t.phrases,s=t&&t.months||c,o=t&&t.formats||u;this.timeAgo=function(t){var n,i=r.parseDate(t),a=+new Date,c=a-i;return i?isNaN(c)||2*d>c?e("now"):h>c?(n=Math.floor(c/d),e(o.abbr,{number:n,symbol:e(p,{abbr:e("s"),expanded:e(n>1?"seconds":"second")})})):l>c?(n=Math.floor(c/h),e(o.abbr,{number:n,symbol:e(p,{abbr:e("m"),expanded:e(n>1?"minutes":"minute")})})):f>c?(n=Math.floor(c/l),e(o.abbr,{number:n,symbol:e(p,{abbr:e("h"),expanded:e(n>1?"hours":"hour")})})):365*f>c?e(o.shortdate,{day:i.getDate(),month:e(s[i.getMonth()])}):e(o.longdate,{day:i.getDate(),month:e(s[i.getMonth()]),year:i.getFullYear().toString().slice(2)}):""},this.localTimeStamp=function(t){var n=r.parseDate(t),a=n&&n.getHours();return n?e(o.full,{day:n.getDate(),month:e(s[n.getMonth()]),year:n.getFullYear(),hours24:i(a),hours12:13>a?a?a:"12":a-12,minutes:i(n.getMinutes()),seconds:i(n.getSeconds()),amPm:e(12>a?"AM":"PM")}):""}}var s=/(\d{4})-?(\d{2})-?(\d{2})T(\d{2}):?(\d{2}):?(\d{2})(Z|[\+\-]\d{2}:?\d{2})/,o=/[a-z]{3,4} ([a-z]{3}) (\d{1,2}) (\d{1,2}):(\d{2}):(\d{2}) ([\+\-]\d{2}:?\d{2}) (\d{4})/i,a=/^\d+$/,c=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],u={abbr:"%{number}%{symbol}",shortdate:"%{day} %{month}",longdate:"%{day} %{month} %{year}",full:"%{hours12}:%{minutes} %{amPm} - %{day} %{month} %{year}"},d=1e3,h=60*d,l=60*h,f=24*l,p='<abbr title="%{expanded}">%{abbr}</abbr>';r.parseDate=function(t){var e,n,i=t||"",r=i.toString();return(e=function(){var t;return a.test(r)?parseInt(r,10):(t=r.match(o))?Date.UTC(t[7],c.indexOf(t[1]),t[2],t[3],t[4],t[5]):(t=r.match(s))?Date.UTC(t[1],t[2]-1,t[3],t[4],t[5],t[6]):void 0}())?(n=new Date(e),!isNaN(n.getTime())&&n):!1},e.exports=r},{}],54:[function(t,e,n){function i(t){return t&&c.isType("string",t)&&(u=t),u}function r(){return d}function s(){return u!==d}var o=t(10),a=t(73),c=t(74),u=a.getCanonicalURL()||o.href,d=u;e.exports={isFramed:s,rootDocumentLocation:i,currentDocumentLocation:r}},{10:10,73:73,74:74}],55:[function(t,e,n){function i(){u=1;for(var t=0,e=d.length;e>t;t++)d[t]()}var r,s,o,a=t(9),c=t(12),u=0,d=[],h=!1,l=a.createElement("a");/^loade|c/.test(a.readyState)&&(u=1),a.addEventListener&&a.addEventListener("DOMContentLoaded",s=function(){a.removeEventListener("DOMContentLoaded",s,h),i()},h),l.doScroll&&a.attachEvent("onreadystatechange",r=function(){/^c/.test(a.readyState)&&(a.detachEvent("onreadystatechange",r),i())}),o=l.doScroll?function(t){c.self!=c.top?u?t():d.push(t):!function(){try{l.doScroll("left")}catch(e){return setTimeout(function(){o(t)},50)}t()}()}:function(t){u?t():d.push(t)},e.exports=o},{12:12,9:9}],56:[function(t,e,n){function i(){l=!0}function r(t,e){return l?!0:d.asBoolean(h.val("dnt"))?!0:!a||1!=a.doNotTrack&&1!=a.msDoNotTrack?u.isUrlSensitive(e||o.host)?!0:c.isFramed()&&u.isUrlSensitive(c.rootDocumentLocation())?!0:(t=f.test(t||s.referrer)&&RegExp.$1,t&&u.isUrlSensitive(t)?!0:!1):!0}var s=t(9),o=t(10),a=t(11),c=t(54),u=t(69),d=t(71),h=t(15),l=!1,f=/https?:\/\/([^\/]+).*/i;e.exports={setOn:i,enabled:r}},{10:10,11:11,15:15,54:54,69:69,71:71,9:9}],57:[function(t,e,n){function i(t){return t=t||g,t.devicePixelRatio?t.devicePixelRatio>=1.5:t.matchMedia?t.matchMedia("only screen and (min-resolution: 144dpi)").matches:!1}function r(t){return t=t||E,/(Trident|MSIE \d)/.test(t)}function s(t){return t=t||E,/MSIE 9/.test(t)}function o(t){return t=t||E,/(iPad|iPhone|iPod)/.test(t)}function a(t){return t=t||E,/^Mozilla\/5\.0 \(Linux; (U; )?Android/.test(t)}function c(){return T}function u(t,e){return t=t||g,e=e||E,t.postMessage&&!(r(e)&&t.opener)}function d(t){t=t||m;try{return!!t.plugins["Shockwave Flash"]||!!new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(e){return!1}}function h(t,e,n){return t=t||g,e=e||m,n=n||E,"ontouchstart"in t||/Opera Mini/.test(n)||e.msMaxTouchPoints>0}function l(){var t=p.body.style;return void 0!==t.transition||void 0!==t.webkitTransition||void 0!==t.mozTransition||void 0!==t.oTransition||void 0!==t.msTransition}function f(){return!!(g.Promise&&g.Promise.resolve&&g.Promise.reject&&g.Promise.all&&g.Promise.race&&function(){var t;return new g.Promise(function(e){t=e}),b.isType("function",t)}())}var p=t(9),m=t(11),g=t(12),v=t(55),y=t(62),w=t(71),b=t(74),_=t(15),A=t(16),E=m.userAgent,T=!1,x=!1,I="twitter-csp-test";A.set("verifyCSP",function(t){var e=p.getElementById(I);x=!0,T=!!t,e&&e.parentNode.removeChild(e)}),v(function(){var t;return w.asBoolean(_.val("widgets:csp"))?T=!0:(t=p.createElement("script"),t.id=I,t.text=A.fullPath("verifyCSP")+"(false);",p.body.appendChild(t),void g.setTimeout(function(){x||(y.warn('TWITTER: Content Security Policy restrictions may be applied to your site. Add <meta name="twitter:widgets:csp" content="on"> to supress this warning.'),y.warn("TWITTER: Please note: Not all embedded timeline and embedded Tweet functionality is supported when CSP is applied."))},5e3))}),e.exports={retina:i,anyIE:r,ie9:s,ios:o,android:a,cspEnabled:c,flashEnabled:d,canPostMessage:u,touch:h,cssTransitions:l,hasPromiseSupport:f}},{11:11,12:12,15:15,16:16,55:55,62:62,71:71,74:74,9:9}],58:[function(t,e,n){var i=t(74),r={bind:function(t,e){return this._handlers=this._handlers||{},this._handlers[t]=this._handlers[t]||[],this._handlers[t].push(e)},unbind:function(t,e){if(this._handlers[t])if(e){var n=this._handlers[t].indexOf(e);n>=0&&this._handlers[t].splice(n,1)}else this._handlers[t]=[]},trigger:function(t,e){var n=this._handlers&&this._handlers[t];e=e||{},e.type=t,n&&n.forEach(function(t){i.async(t.bind(this,e))})}};e.exports={Emitter:r}},{74:74}],59:[function(t,e,n){function i(t){for(var e,n=r.getElementsByTagName("iframe"),i=0;e=n[i];i++)if(e.contentWindow===t)return e}var r=t(9);e.exports=i},{9:9}],60:[function(t,e,n){var i=t(9),r=t(74);e.exports=function(t,e,n){var s;if(n=n||i,t=t||{},e=e||{},t.name){try{s=n.createElement('<iframe name="'+t.name+'"></iframe>')}catch(o){s=n.createElement("iframe"),s.name=t.name}delete t.name}else s=n.createElement("iframe");return t.id&&(s.id=t.id,delete t.id),s.allowtransparency="true",s.scrolling="no",s.setAttribute("frameBorder",0),s.setAttribute("allowTransparency",!0),r.forIn(t,function(t,e){s.setAttribute(t,e)}),r.forIn(e,function(t,e){s.style[t]=e}),s}},{74:74,9:9}],61:[function(t,e,n){function i(){}var r,s=t(12),o=t(65),a=[];i.prototype.enqueue=function(t,e){var n=new o;return a.push({action:t,deferred:n,note:e}),n.promise},i.prototype.exec=function(){var t,e=a;if(e.length)for(a=[];e.length;)t=e.shift(),t&&t.action?t.deferred.resolve(t.action()):t.deferred.reject()},i.prototype.delayedExec=function(){r&&s.clearTimeout(r),r=s.setTimeout(this.exec,100)},e.exports=i},{12:12,65:65}],62:[function(t,e,n){function i(){u("info",l.toRealArray(arguments))}function r(){u("warn",l.toRealArray(arguments))}function s(){u("error",l.toRealArray(arguments))}function o(t){m&&(p[t]=c())}function a(t){var e;m&&(p[t]?(e=c(),i("_twitter",t,e-p[t])):s("timeEnd() called before time() for id: ",t))}function c(){return h.performance&&+h.performance.now()||+new Date}function u(t,e){if(h[f]&&h[f][t])switch(e.length){case 1:h[f][t](e[0]);break;case 2:h[f][t](e[0],e[1]);break;case 3:h[f][t](e[0],e[1],e[2]);break;case 4:h[f][t](e[0],e[1],e[2],e[3]);break;case 5:h[f][t](e[0],e[1],e[2],e[3],e[4]);break;default:0!==e.length&&h[f].warn&&h[f].warn("too many params passed to logger."+t)}}var d=t(10),h=t(12),l=t(74),f=["con","sole"].join(""),p={},m=l.contains(d.href,"tw_debug=true");e.exports={info:i,warn:r,error:s,time:o,timeEnd:a}},{10:10,12:12,74:74}],63:[function(t,e,n){function i(t){return function(e){return s.hasValue(e[t])}}function r(){this.assertions=[],this._defaults={}}var s=t(71),o=t(74);r.prototype.assert=function(t,e){return this.assertions.push({fn:t,msg:e||"assertion failed"}),this},r.prototype.defaults=function(t){return this._defaults=t||this._defaults,this},r.prototype.require=function(t){var e=this;return t=Array.isArray(t)?t:o.toRealArray(arguments),t.forEach(function(t){e.assert(i(t),"required: "+t)}),this},r.prototype.parse=function(t){var e,n;if(e=o.aug({},this._defaults,t||{}),n=this.assertions.reduce(function(t,n){return n.fn(e)||t.push(n.msg),t},[]),n.length>0)throw new Error(n.join("\n"));return e},e.exports=r},{71:71,74:74}],64:[function(t,e,n){var i,r,s,o=t(68);i=function(t){var e=t.search.substr(1);return o.decode(e)},r=function(t){var e=t.href,n=e.indexOf("#"),i=0>n?"":e.substring(n+1);return o.decode(i)},s=function(t){var e,n={},s=i(t),o=r(t);for(e in s)s.hasOwnProperty(e)&&(n[e]=s[e]);for(e in o)o.hasOwnProperty(e)&&(n[e]=o[e]);return n},e.exports={combined:s,fromQuery:i,fromFragment:r}},{68:68}],65:[function(t,e,n){function i(){var t=this;this.promise=new r(function(e,n){t.resolve=e,t.reject=n})}var r=t(66);e.exports=i},{66:66}],66:[function(t,e,n){var i=t(1).Promise,r=t(12),s=t(57);e.exports=s.hasPromiseSupport()?r.Promise:i},{1:1,12:12,57:57}],67:[function(t,e,n){function i(t){var e;return t=t||[],e=t.length,t=t.filter(r),e?e!==t.length?s.reject("non-Promise passed to .some"):new s(function(e,n){function i(){r+=1,r===t.length&&n()}var r=0;t.forEach(function(t){t.then(e,i)})}):s.reject("no promises passed to .some")}function r(t){return t instanceof s}var s=t(66);e.exports={some:i,isPromise:r}},{66:66}],68:[function(t,e,n){function i(t){return encodeURIComponent(t).replace(/\+/g,"%2B").replace(/'/g,"%27")}function r(t){return decodeURIComponent(t)}function s(t){var e=[];return d.forIn(t,function(t,n){var r=i(t);d.isType("array",n)||(n=[n]),n.forEach(function(t){u.hasValue(t)&&e.push(r+"="+i(t))})}),e.sort().join("&")}function o(t){var e,n={};return t?(e=t.split("&"),e.forEach(function(t){var e=t.split("="),i=r(e[0]),s=r(e[1]);return 2==e.length?d.isType("array",n[i])?void n[i].push(s):i in n?(n[i]=[n[i]],void n[i].push(s)):void(n[i]=s):void 0}),n):{}}function a(t,e){var n=s(e);return n.length>0?d.contains(t,"?")?t+"&"+s(e):t+"?"+s(e):t}function c(t){var e=t&&t.split("?");return 2==e.length?o(e[1]):{}}var u=t(71),d=t(74);e.exports={url:a,decodeURL:c,decode:o,encode:s,encodePart:i,decodePart:r}},{71:71,74:74}],69:[function(t,e,n){function i(t){return t in a?a[t]:a[t]=o.test(t)}function r(){return i(s.host)}var s=t(10),o=/^[^#?]*\.(gov|mil)(:\d+)?([#?].*)?$/i,a={};e.exports={isUrlSensitive:i,isHostPageSensitive:r}},{10:10}],70:[function(t,e,n){function i(t){return"string"==typeof t&&m.test(t)&&RegExp.$1.length<=20}function r(t){return i(t)?RegExp.$1:void 0}function s(t,e){var n=p.decodeURL(t);return e=e||!1,n.screen_name=r(t),n.screen_name?p.url("https://twitter.com/intent/"+(e?"follow":"user"),n):void 0}function o(t){return s(t,!0)}function a(t){return"string"==typeof t&&w.test(t)}function c(t,e){return e=void 0===e?!0:e,a(t)?(e?"#":"")+RegExp.$1:void 0}function u(t){return"string"==typeof t&&g.test(t)}function d(t){return u(t)&&RegExp.$1}function h(t){return v.test(t)}function l(t){return y.test(t)}function f(t){return b.test(t)}var p=t(68),m=/(?:^|(?:https?\:)?\/\/(?:www\.)?twitter\.com(?:\:\d+)?(?:\/intent\/(?:follow|user)\/?\?screen_name=|(?:\/#!)?\/))@?([\w]+)(?:\?|&|$)/i,g=/(?:^|(?:https?\:)?\/\/(?:www\.)?twitter\.com(?:\:\d+)?\/(?:#!\/)?[\w_]+\/status(?:es)?\/)(\d+)/i,v=/^http(s?):\/\/(\w+\.)*twitter\.com([\:\/]|$)/i,y=/^http(s?):\/\/pbs\.twimg\.com\//,w=/^#?([^.,<>!\s\/#\-\(\)\'\"]+)$/,b=/twitter\.com(\:\d{2,4})?\/intent\/(\w+)/;e.exports={isHashTag:a,hashTag:c,isScreenName:i,screenName:r,isStatus:u,status:d,intentForProfileURL:s,intentForFollowURL:o,isTwitterURL:h,isTwimgURL:l,isIntentURL:f,regexen:{profile:m}}},{68:68}],71:[function(t,e,n){function i(t){return void 0!==t&&null!==t&&""!==t}function r(t){return o(t)&&t%1===0}function s(t){return o(t)&&!r(t)}function o(t){return i(t)&&!isNaN(t)}function a(t){return i(t)&&"array"==l.toType(t)}function c(t){if(!i(t))return!1;switch(t){case"1":case"on":case"ON":case"true":case"TRUE":case"yes":case"YES":return!0;case"0":case"off":case"OFF":case"false":case"FALSE":case"no":case"NO":return!1;default:return!!t}}function u(t){return o(t)?t:void 0}function d(t){return s(t)?t:void 0}function h(t){return r(t)?t:void 0}var l=t(74);e.exports={hasValue:i,isInt:r,isFloat:s,isNumber:o,isArray:a,asInt:h,asFloat:d,asNumber:u,asBoolean:c}},{74:74}],72:[function(t,e,n){function i(){return String(+new Date)+Math.floor(1e5*Math.random())+r++}var r=0;e.exports={generate:i}},{}],73:[function(t,e,n){function i(t,e){var n,i;return e=e||a,/^https?:\/\//.test(t)?t:/^\/\//.test(t)?e.protocol+t:(n=e.host+(e.port.length?":"+e.port:""),0!==t.indexOf("/")&&(i=e.pathname.split("/"),i.pop(),i.push(t),t="/"+i.join("/")),[e.protocol,"//",n,t].join(""))}function r(){for(var t,e=o.getElementsByTagName("link"),n=0;t=e[n];n++)if("canonical"==t.rel)return i(t.href);

}function s(){for(var t,e,n,i=o.getElementsByTagName("a"),r=o.getElementsByTagName("link"),s=[i,r],a=0,u=0,d=/\bme\b/;t=s[a];a++)for(u=0;e=t[u];u++)if(d.test(e.rel)&&(n=c.screenName(e.href)))return n}var o=t(9),a=t(10),c=t(70);e.exports={absolutize:i,getCanonicalURL:r,getScreenNameFromPage:s}},{10:10,70:70,9:9}],74:[function(t,e,n){function i(t){return h(arguments).slice(1).forEach(function(e){s(e,function(e,n){t[e]=n})}),t}function r(t){return s(t,function(e,n){c(n)&&(r(n),u(n)&&delete t[e]),(void 0===n||null===n||""===n)&&delete t[e]}),t}function s(t,e){for(var n in t)(!t.hasOwnProperty||t.hasOwnProperty(n))&&e(n,t[n]);return t}function o(t){return{}.toString.call(t).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function a(t,e){return t==o(e)}function c(t){return t===Object(t)}function u(t){if(!c(t))return!1;if(Object.keys)return!Object.keys(t).length;for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}function d(t,e){f.setTimeout(function(){t.call(e||null)},0)}function h(t){return Array.prototype.slice.call(t)}function l(t,e){return t&&t.indexOf?t.indexOf(e)>-1:!1}var f=t(12);e.exports={aug:i,async:d,compact:r,contains:l,forIn:s,isObject:c,isEmptyObject:u,toType:o,isType:a,toRealArray:h}},{12:12}],75:[function(t,e,n){function i(){if(s)return s;if(u.isDynamicWidget()){var t,e=0,n=c.parent.frames.length;try{if(s=c.parent.frames[l])return s}catch(i){}if(d.anyIE())for(;n>e;e++)try{if(t=c.parent.frames[e],t&&"function"==typeof t.openIntent)return s=t}catch(i){}}}function r(){var t,e,n,s,a,d,h={};if("function"===(typeof arguments[0]).toLowerCase()?h.success=arguments[0]:h=arguments[0],t=h.success||function(){},e=h.timeout||function(){},n=h.nohub||function(){},s=h.complete||function(){},a=void 0!==h.attempt?h.attempt:m,!u.isDynamicWidget()||o)return n(),s(),!1;d=i(),a--;try{if(d&&d.trigger)return t(d),void s()}catch(l){}return 0>=a?(o=!0,e(),void s()):+new Date-f>p*m?(o=!0,void n()):void c.setTimeout(function(){r({success:t,timeout:e,nohub:n,attempt:a,complete:s})},p)}var s,o,a=t(10),c=t(12),u=t(39),d=t(57),h="twttrHubFrameSecure",l="http:"==a.protocol?"twttrHubFrame":h,f=+new Date,p=100,m=20;e.exports={withHub:r,contextualHubId:l,secureHubId:h}},{10:10,12:12,39:39,57:57}],76:[function(t,e,n){e.exports={version:"f5045446417440a57140409dd3a851300aa9ddbd:1430170814284"}},{}],77:[function(t,e,n){e.exports={css:"1b8dc0da7dca587361635cb7eae65382"}},{}],78:[function(t,e,n){function i(t,e){return t&&t.getAttribute?t.getAttribute("data-"+e):void 0}function r(t,e){return{element:t.element||g,action:t.action||v,page:s(e)?"video":void 0}}function s(t){return d.closest(".embedded-video",t)}function o(t){return JSON.parse(i(s(t),"player-config"))}function a(t,e){var n,r,o,a=s(e);return a?n=u.aug({item_type:p,card_type:m,id:i(a,"tweet-id"),card_name:i(a,"card-name"),publisher_id:i(a,"publisher-id"),content_id:i(a,"content-id")},t.itemData||{}):(r=d.closest(".cards-multimedia",e),o=d.closest(".tweet",e),n=u.aug({item_type:p,card_type:m,id:i(o,"tweet-id"),card_name:i(r,"card-name"),publisher_id:i(r,"publisher-id"),content_id:i(r,"video-content-id")},t.itemData||{})),{items:[n]}}function c(t){var e=this;this.global=t,this.server=(new h).attachReceiver(new f.Receiver(t,"")).bind("scribe",function(t){e.scribe(t,this)}).bind("requestPlayerConfig",function(){return e.requestPlayerConfig(this)})}var u=t(74),d=t(6),h=t(25),l=t(32),f=t(26),p=0,m=6,g="amplify_player",v="undefined";c.prototype.findIframeByWindow=function(t){for(var e=this.global.document.getElementsByTagName("iframe"),n=e.length,i=0;n>i;i++)if(e[i].contentWindow==t)return e[i]},c.prototype.requestPlayerConfig=function(t){var e=this.findIframeByWindow(t);if(e)return o(e)},c.prototype.scribe=function(t,e){var n,i,s,o;n=t&&t.customScribe,i=this.findIframeByWindow(e),n&&i&&(s=r(n,i),o=a(n,i),l.clientEvent2(s,o,!0))},e.exports=c},{25:25,26:26,32:32,6:6,74:74}],79:[function(t,e,n){!function(){var e=t(9),n=t(36),i=t(55),r=t(62),s=t(22),o=t(43),a=t(45),c=t(49),u=t(44),d=t(48),h=t(50),l=t(46),f=t(34),p=t(58),m=t(35),g=t(20),v=t(17),y=t(16),w=t(13),b=t(65),_=t(42);if(y.init("host","platform.twitter.com"),s.start("widgets-js-load"),n.requestArticleUrl(),_(),y.get("widgets.loaded"))return v.call("widgets.load"),!1;if(y.get("widgets.init"))return!1;y.set("widgets.init",!0),v.set("init",!0);var A=new b;w.exposeReadyPromise(A.promise,v.base,"_e"),v.set("events",{bind:function(t,e){A.promise.then(function(n){n.events.bind(t,e)})}}),i(function(){function t(){y.set("eventsHub",m.init()),m.init(!0)}var n,i={"a.twitter-share-button":c,"a.twitter-mention-button":c,"a.twitter-hashtag-button":c,"a.twitter-follow-button":a,"blockquote.twitter-tweet":u,"a.twitter-timeline":d,"div.twitter-timeline":d,"blockquote.twitter-video":h,body:l},s=y.get("eventsHub")?v.get("events"):{};v.aug("widgets",f,{load:function(t){r.time("load"),o.init(i),o.embed(t),y.set("widgets.loaded",!0)}}),v.aug("events",s,p.Emitter),n=v.get("events.bind"),v.set("events.bind",function(e,i){t(),this.bind=n,this.bind(e,i)}),A.resolve(v.base),g.attachTo(e),v.call("widgets.load")})}()},{13:13,16:16,17:17,20:20,22:22,34:34,35:35,36:36,42:42,43:43,44:44,45:45,46:46,48:48,49:49,50:50,55:55,58:58,62:62,65:65,9:9}],80:[function(t,e,n){function i(){}var r=t(74),s=t(58);r.aug(i.prototype,s.Emitter,{transportMethod:"",init:function(){},send:function(t){var e;this._ready?this._performSend(t):e=this.bind("ready",function(){this.unbind("ready",e),this._performSend(t)})},ready:function(){this.trigger("ready",this),this._ready=!0},isReady:function(){return!!this._ready},receive:function(t){this.trigger("message",t)}}),e.exports={Connection:i}},{58:58,74:74}],81:[function(t,e,n){function i(t,e){var n=e||Math.floor(100*Math.random()),i=['<object id="xdflashshim'+n+'" name="xdflashshim'+n+'"','type="application/x-shockwave-flash" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"','width="1" height="1" style="position:absolute;left:-9999px;top:-9999px;">','<param name="movie" value="'+t+"&debug="+r.__XDDEBUG__+'">','<param name="wmode" value="window">','<param name="allowscriptaccess" value="always">',"</object>"].join(" ");return i}var r=t(12);e.exports={object:i}},{12:12}],82:[function(t,e,n){function i(t){return(JSON.parse||JSON.decode)(t)}function r(t){this.con=t}function s(){this.id=s.id++}var o=t(74),a=t(58);o.aug(r.prototype,{expose:function(t){this.con.bind("message",this._handleRequest(t))},call:function(t){var e,n=this;return this._requests||(this._requests={},this.con.bind("message",function(t){var e;try{t=i(t)}catch(r){return}t.callback&&"number"==typeof t.id&&(e=n._requests[t.id])&&(t.error?e.trigger("error",t):e.trigger("success",t),delete n._requests[t.id])})),e=new s,this._requests[e.id]=e,e.send(this.con,t,Array.prototype.slice.call(arguments,1))},_handleRequest:function(t){var e=this;return function(n){var r,s;try{n=i(n)}catch(o){return}n.callback||"number"==typeof n.id&&"function"==typeof t[n.method]&&(s=e._responseCallbacks(n.id),r=t[n.method].apply(t,n.params.concat(s)),"undefined"!=typeof r&&s[0](r))}},_responseCallbacks:function(t){var e=this.con;return[function(n){e.send(JSON.stringify({id:t,result:n,callback:!0}))},function n(i){e.send(JSON.stringify({id:t,error:n,callback:i}))}]}}),s.id=0,o.aug(s.prototype,a.Emitter,{send:function(t,e,n){return t.send(JSON.stringify({id:this.id,method:e,params:n})),this},success:function(t){return this.bind("success",t),this},error:function(t){return this.bind("error",t),this}}),e.exports=function(t){return new r(t)}},{58:58,74:74}],83:[function(t,e,n){function i(){}function r(t){this.transportMethod="PostMessage",this.options=t,this._createChild()}function s(t){this.transportMethod="Flash",this.options=t,this.token=Math.random().toString(16).substring(2),this._setup()}function o(t){this.transportMethod="Fallback",this.options=t,this._createChild()}var a,c=t(9),u=t(12),d=t(80),h=t(74),l=t(57),f=t(21),p="__ready__",m=0;i.prototype=new d.Connection,h.aug(i.prototype,{_createChild:function(){this.options.window?this._createWindow():this._createIframe()},_createIframe:function(){function t(){s.child=e.contentWindow,s._ready||s.init()}var e,n,i,r,s=this,o={allowTransparency:!0,frameBorder:"0",scrolling:"no",tabIndex:"0",name:this._name()},d=h.aug(h.aug({},o),this.options.iframe);u.postMessage?(a||(a=c.createElement("iframe")),e=a.cloneNode(!1)):e=c.createElement('<iframe name="'+d.name+'">'),e.id=d.name,h.forIn(d,function(t,n){"style"!=t&&e.setAttribute(t,n)}),r=e.getAttribute("style"),r&&"undefined"!=typeof r.cssText?r.cssText=d.style:e.style.cssText=d.style,e.addEventListener("load",t,!1),e.src=this._source(),(n=this.options.appendTo)?n.appendChild(e):(i=this.options.replace)?(n=i.parentNode,n&&n.replaceChild(e,i)):c.body.insertBefore(e,c.body.firstChild)},_createWindow:function(){var t=f.open(this._source()).popup;t&&t.focus(),this.child=t,this.init()},_source:function(){return this.options.src},_name:function(){var t="_xd_"+m++;return u.parent&&u.parent!=u&&u.name&&(t=u.name+t),t}}),r.prototype=new i,h.aug(r.prototype,{init:function(){function t(t){t.source===e.child&&(e._ready||t.data!==p?e.receive(t.data):e.ready())}var e=this;u.addEventListener("message",t,!1)},_performSend:function(t){this.child.postMessage(t,this.options.src)}}),s.prototype=new i,h.aug(s.prototype,{_setup:function(){var e=this,n=t(81);u["__xdcb"+e.token]={receive:function(t){e._ready||t!==p?e.receive(t):e.ready()},loaded:function(){}};var i=c.createElement("div");i.innerHTML=n.object("https://platform.twitter.com/xd/ft.swf?&token="+e.token+"&parent=true&callback=__xdcb"+e.token+"&xdomain="+e._host(),e.token),c.body.insertBefore(i,c.body.firstChild),e.proxy=i.firstChild,e._createChild()},init:function(){},_performSend:function(t){this.proxy.send(t)},_host:function(){return this.options.src.replace(/https?:\/\//,"").split(/(:|\/)/)[0]},_source:function(){return this.options.src+(this.options.src.match(/\?/)?"&":"?")+"xd_token="+u.escape(this.token)}}),o.prototype=new i,h.aug(o.prototype,{init:function(){},_performSend:function(){}}),e.exports={connect:function(t){return!l.canPostMessage()||l.anyIE()&&t.window?l.anyIE()&&l.flashEnabled()?new s(t):new o(t):new r(t)}}},{12:12,21:21,57:57,74:74,80:80,81:81,9:9}]},{},[79]))}();_application/javascriptÕ	'2345_%https://apis.google.com/js/plusone.jsOabplist00Ô{|X$versionX$objectsY$archiverT$top † ¯)#)*0123UVWXYZ[\]^_`abcdefghijklmnopqtuvU$nullİ	
 !"R$6S$10R$2R$7R$3S$11R$8V$classR$4R$9R$0R$5R$1€	€€€&€(€€'€Ó$%&'(WNS.base[NS.relative€ €€_%https://apis.google.com/js/plusone.jsÒ+,-.Z$classnameX$classesUNSURL¢-/XNSObject#AºôÒ:Á«° ÈÓ456ETWNS.keysZNS.objects®789:;<=>?@ABCD€	€
€€€€€€€€€€€€®FGHIJKLMNOPQRS€€€€€€€€€€ €!€"€#€$€%\Content-Type_alternate-protocol_Content-EncodingVServer_x-xss-protectionWExpires_timing-allow-origin]Cache-ControlTDate_Strict-Transport-Security_x-content-type-optionsTEtag_x-frame-options_x-ua-compatible_%application/javascript; charset=utf-8\443:quic,p=1TgzipSGSE]1; mode=block_Sat, 02 May 2015 09:36:58 GMTQ*_private, max-age=1800_Sat, 02 May 2015 09:36:58 GMT_max-age=10886400Wnosniff_""e210ac97d5b0e7294f0fffafe6d5f34d"ZSAMEORIGIN_IE=edge, chrome=1Ò+,rs\NSDictionary¢r/ÿÿÿÿÿÿÿÿ_application/javascriptÒ+,wx_NSHTTPURLResponse£yz/_NSHTTPURLResponse]NSURLResponse_NSKeyedArchiverÑ}~_WebResourceResponse€    # - 2 7 c i „ ‡ ‹  ‘ ” ˜ › ¢ ¥ ¨ « ® ± ³ µ · ¹ » ¼ ¾ À Â Ä Æ È Ê Ñ Ù å ç é ë#,25>GIKRZetvxz|~€‚„†ˆŠŒŸ¡£¥§©«­¯±³µ·¹»½Êßòù*8=Yrw‰›ÃĞÕÙç	!AT\Œ ¥²µ¾×Üğô(+A                           CO‘¸var gapi=window.gapi=window.gapi||{};gapi._bs=new Date().getTime();(function(){var aa=encodeURIComponent,k=window,ba=Object,q=document,ca=Array,da=parseInt,r=String,ea=decodeURIComponent;function ga(a,b){return a.type=b}
var ha="appendChild",ia="shift",ja="exec",ka="width",t="replace",la="concat",ma="charAt",na="match",v="createElement",x="setAttribute",oa="bind",pa="getTime",qa="getElementsByTagName",y="substr",z="toString",A="split",B="location",ra="style",sa="protocol",C="href",ta="action",D="apply",ua="attributes",va="height",E="push",F="test",wa="getElementById",xa="JSON",G="indexOf",ya="nodeName",za="type",H="length",I="prototype",Aa="removeChild",K="call",Ba="getAttribute",Ca="charCodeAt",Da="substring",Ea=
"documentMode",L="parentNode",Fa="update",M="join",Ga="toLowerCase",Ha=function(a,b,c){return a[K][D](a[oa],arguments)},Ia=function(a,b,c){if(!a)throw Error();if(2<arguments[H]){var d=ca[I].slice[K](arguments,2);return function(){var c=ca[I].slice[K](arguments);ca[I].unshift[D](c,d);return a[D](b,c)}}return function(){return a[D](b,arguments)}},Ja=function(a,b,c){Ja=Function[I][oa]&&-1!=Function[I][oa][z]()[G]("native code")?Ha:Ia;return Ja[D](null,arguments)};
Function[I].bind=Function[I][oa]||function(a,b){if(1<arguments[H]){var c=ca[I].slice[K](arguments,1);c.unshift(this,a);return Ja[D](null,c)}return Ja(this,a)};var N=k,P=q,Ka=N[B],La=function(){},Ma=/\[native code\]/,Q=function(a,b,c){return a[b]=a[b]||c},Na=function(a){for(var b=0;b<this[H];b++)if(this[b]===a)return b;return-1},Oa=function(a){a=a.sort();for(var b=[],c=void 0,d=0;d<a[H];d++){var e=a[d];e!=c&&b[E](e);c=e}return b},Pa=/&/g,Qa=/</g,Ra=/>/g,Sa=/"/g,Ta=/'/g,Ua=function(a){return r(a)[t](Pa,"&amp;")[t](Qa,"&lt;")[t](Ra,"&gt;")[t](Sa,"&quot;")[t](Ta,"&#39;")},R=function(){var a;if((a=ba.create)&&Ma[F](a))a=a(null);else{a={};for(var b in a)a[b]=
void 0}return a},S=function(a,b){return ba[I].hasOwnProperty[K](a,b)},Va=function(a){if(Ma[F](ba.keys))return ba.keys(a);var b=[],c;for(c in a)S(a,c)&&b[E](c);return b},T=function(a,b){a=a||{};for(var c in a)S(a,c)&&(b[c]=a[c])},Wa=function(a){return function(){N.setTimeout(a,0)}},Xa=function(a,b){if(!a)throw Error(b||"");},U=Q(N,"gapi",{});var V=function(a,b,c){var d=new RegExp("([#].*&|[#])"+b+"=([^&#]*)","g");b=new RegExp("([?#].*&|[?#])"+b+"=([^&#]*)","g");if(a=a&&(d[ja](a)||b[ja](a)))try{c=ea(a[2])}catch(e){}return c},Ya=/^([^?#]*)(\?([^#]*))?(\#(.*))?$/,Za=function(a){a=a[na](Ya);var b=R();b.K=a[1];b.l=a[3]?[a[3]]:[];b.v=a[5]?[a[5]]:[];return b},$a=function(a){return a.K+(0<a.l[H]?"?"+a.l[M]("&"):"")+(0<a.v[H]?"#"+a.v[M]("&"):"")},ab=function(a,b){var c=[];if(a)for(var d in a)if(S(a,d)&&null!=a[d]){var e=b?b(a[d]):a[d];c[E](aa(d)+
"="+aa(e))}return c},bb=function(a,b,c,d){a=Za(a);a.l[E][D](a.l,ab(b,d));a.v[E][D](a.v,ab(c,d));return $a(a)},cb=function(a,b){var c="";2E3<b[H]&&(c=b[Da](2E3),b=b[Da](0,2E3));var d=a[v]("div"),e=a[v]("a");e.href=b;d[ha](e);d.innerHTML=d.innerHTML;b=r(d.firstChild[C]);d[L]&&d[L][Aa](d);return b+c},db=/^https?:\/\/[^\/%\\?#\s]+\/[^\s]*$/i;var eb=function(a,b,c,d){if(N[c+"EventListener"])N[c+"EventListener"](a,b,!1);else if(N[d+"tachEvent"])N[d+"tachEvent"]("on"+a,b)},fb=function(){var a=P.readyState;return"complete"===a||"interactive"===a&&-1==navigator.userAgent[G]("MSIE")},ib=function(a){var b=gb;if(!fb())try{b()}catch(c){}hb(a)},hb=function(a){if(fb())a();else{var b=!1,c=function(){if(!b)return b=!0,a[D](this,arguments)};N.addEventListener?(N.addEventListener("load",c,!1),N.addEventListener("DOMContentLoaded",c,!1)):N.attachEvent&&
(N.attachEvent("onreadystatechange",function(){fb()&&c[D](this,arguments)}),N.attachEvent("onload",c))}},jb=function(a){for(;a.firstChild;)a[Aa](a.firstChild)},kb={button:!0,div:!0,span:!0};var W;W=Q(N,"___jsl",R());Q(W,"I",0);Q(W,"hel",10);var lb=function(a){return W.dpo?W.h:V(a,"jsh",W.h)},mb=function(a){var b=Q(W,"sws",[]);b[E][D](b,a)},nb=function(a){return Q(W,"watt",R())[a]},pb=function(a){var b=Q(W,"PQ",[]);W.PQ=[];var c=b[H];if(0===c)a();else for(var d=0,e=function(){++d===c&&a()},f=0;f<c;f++)b[f](e)},qb=function(a){return Q(Q(W,"H",R()),a,R())};var rb=Q(W,"perf",R()),sb=Q(rb,"g",R()),tb=Q(rb,"i",R());Q(rb,"r",[]);R();R();var ub=function(a,b,c){var d=rb.r;"function"===typeof d?d(a,b,c):d[E]([a,b,c])},vb=function(a,b,c){sb[a]=!b&&sb[a]||c||(new Date)[pa]();ub(a)},xb=function(a,b,c){b&&0<b[H]&&(b=wb(b),c&&0<c[H]&&(b+="___"+wb(c)),28<b[H]&&(b=b[y](0,28)+(b[H]-28)),c=b,b=Q(tb,"_p",R()),Q(b,c,R())[a]=(new Date)[pa](),ub(a,"_p",c))},wb=function(a){return a[M]("__")[t](/\./g,"_")[t](/\-/g,"_")[t](/\,/g,"_")};var yb=R(),zb=[],X=function(a){throw Error("Bad hint"+(a?": "+a:""));};zb[E](["jsl",function(a){for(var b in a)if(S(a,b)){var c=a[b];"object"==typeof c?W[b]=Q(W,b,[])[la](c):Q(W,b,c)}if(b=a.u)a=Q(W,"us",[]),a[E](b),(b=/^https:(.*)$/[ja](b))&&a[E]("http:"+b[1])}]);var Ab=/^(\/[a-zA-Z0-9_\-]+)+$/,Bb=/^[a-zA-Z0-9\-_\.,!]+$/,Cb=/^gapi\.loaded_[0-9]+$/,Db=/^[a-zA-Z0-9,._-]+$/,Hb=function(a,b,c,d){var e=a[A](";"),f=e[ia](),g=yb[f],h=null;g?h=g(e,b,c,d):X("no hint processor for: "+f);h||X("failed to generate load url");b=h;c=b[na](Eb);(d=b[na](Fb))&&1===d[H]&&Gb[F](b)&&c&&1===c[H]||X("failed sanity: "+a);return h},Kb=function(a,b,c,d){a=Ib(a);Cb[F](c)||X("invalid_callback");b=Jb(b);d=d&&d[H]?Jb(d):null;var e=function(a){return aa(a)[t](/%2C/g,",")};return[aa(a.$)[t](/%2C/g,
",")[t](/%2F/g,"/"),"/k=",e(a.version),"/m=",e(b),d?"/exm="+e(d):"","/rt=j/sv=1/d=1/ed=1",a.J?"/am="+e(a.J):"",a.T?"/rs="+e(a.T):"",a.V?"/t="+e(a.V):"","/cb=",e(c)][M]("")},Ib=function(a){"/"!==a[ma](0)&&X("relative path");for(var b=a[Da](1)[A]("/"),c=[];b[H];){a=b[ia]();if(!a[H]||0==a[G]("."))X("empty/relative directory");else if(0<a[G]("=")){b.unshift(a);break}c[E](a)}a={};for(var d=0,e=b[H];d<e;++d){var f=b[d][A]("="),g=ea(f[0]),h=ea(f[1]);2==f[H]&&g&&h&&(a[g]=a[g]||h)}b="/"+c[M]("/");Ab[F](b)||
X("invalid_prefix");c=Lb(a,"k",!0);d=Lb(a,"am");e=Lb(a,"rs");a=Lb(a,"t");return{$:b,version:c,J:d,T:e,V:a}},Jb=function(a){for(var b=[],c=0,d=a[H];c<d;++c){var e=a[c][t](/\./g,"_")[t](/-/g,"_");Db[F](e)&&b[E](e)}return b[M](",")},Lb=function(a,b,c){a=a[b];!a&&c&&X("missing: "+b);if(a){if(Bb[F](a))return a;X("invalid: "+b)}return null},Gb=/^https?:\/\/[a-z0-9_.-]+\.google\.com(:\d+)?\/[a-zA-Z0-9_.,!=\-\/]+$/,Fb=/\/cb=/g,Eb=/\/\//g,Mb=function(){var a=lb(Ka[C]);if(!a)throw Error("Bad hint");return a};
yb.m=function(a,b,c,d){(a=a[0])||X("missing_hint");return"https://apis.google.com"+Kb(a,b,c,d)};var Nb=decodeURI("%73cript"),Ob=function(a,b){for(var c=[],d=0;d<a[H];++d){var e=a[d];e&&0>Na[K](b,e)&&c[E](e)}return c},Qb=function(a){"loading"!=P.readyState?Pb(a):P.write("<"+Nb+' src="'+encodeURI(a)+'"></'+Nb+">")},Pb=function(a){var b=P[v](Nb);b[x]("src",a);b.async="true";(a=P[qa](Nb)[0])?a[L].insertBefore(b,a):(P.head||P.body||P.documentElement)[ha](b)},Rb=function(a,b){var c=b&&b._c;if(c)for(var d=0;d<zb[H];d++){var e=zb[d][0],f=zb[d][1];f&&S(c,e)&&f(c[e],a,b)}},Tb=function(a,b,c){Sb(function(){var c;
c=b===lb(Ka[C])?Q(U,"_",R()):R();c=Q(qb(b),"_",c);a(c)},c)},Vb=function(a,b){var c=b||{};"function"==typeof b&&(c={},c.callback=b);Rb(a,c);var d=a?a[A](":"):[],e=c.h||Mb(),f=Q(W,"ah",R());if(f["::"]&&d[H]){for(var g=[],h=null;h=d[ia]();){var l=h[A]("."),l=f[h]||f[l[1]&&"ns:"+l[0]||""]||e,n=g[H]&&g[g[H]-1]||null,m=n;n&&n.hint==l||(m={hint:l,N:[]},g[E](m));m.N[E](h)}var p=g[H];if(1<p){var w=c.callback;w&&(c.callback=function(){0==--p&&w()})}for(;d=g[ia]();)Ub(d.N,c,d.hint)}else Ub(d||[],c,e)},Ub=function(a,
b,c){a=Oa(a)||[];var d=b.callback,e=b.config,f=b.timeout,g=b.ontimeout,h=b.onerror,l=void 0;"function"==typeof h&&(l=h);var n=null,m=!1;if(f&&!g||!f&&g)throw"Timeout requires both the timeout parameter and ontimeout parameter to be set";var h=Q(qb(c),"r",[]).sort(),p=Q(qb(c),"L",[]).sort(),w=[][la](h),O=function(a,b){if(m)return 0;N.clearTimeout(n);p[E][D](p,u);var d=((U||{}).config||{})[Fa];d?d(e):e&&Q(W,"cu",[])[E](e);if(b){xb("me0",a,w);try{Tb(b,c,l)}finally{xb("me1",a,w)}}return 1};0<f&&(n=N.setTimeout(function(){m=
!0;g()},f));var u=Ob(a,p);if(u[H]){var u=Ob(a,h),J=Q(W,"CP",[]),fa=J[H];J[fa]=function(a){if(!a)return 0;xb("ml1",u,w);var b=function(b){J[fa]=null;O(u,a)&&pb(function(){d&&d();b()})},c=function(){var a=J[fa+1];a&&a()};0<fa&&J[fa-1]?J[fa]=function(){b(c)}:b(c)};if(u[H]){var ob="loaded_"+W.I++;U[ob]=function(a){J[fa](a);U[ob]=null};a=Hb(c,u,"gapi."+ob,h);h[E][D](h,u);xb("ml0",u,w);b.sync||N.___gapisync?Qb(a):Pb(a)}else J[fa](La)}else O(u)&&d&&d()};var Sb=function(a,b){if(W.hee&&0<W.hel)try{return a()}catch(c){b&&b(c),W.hel--,Vb("debug_error",function(){try{k.___jsl.hefn(c)}catch(a){throw c;}})}else try{return a()}catch(d){throw b&&b(d),d;}};U.load=function(a,b){return Sb(function(){return Vb(a,b)})};var Wb=function(a){var b=k.___jsl=k.___jsl||{};b[a]=b[a]||[];return b[a]},Xb=function(a){var b=k.___jsl=k.___jsl||{};b.cfg=!a&&b.cfg||{};return b.cfg},Yb=function(a){return"object"===typeof a&&/\[native code\]/[F](a[E])},Zb=function(a,b){if(b)for(var c in b)b.hasOwnProperty(c)&&(a[c]&&b[c]&&"object"===typeof a[c]&&"object"===typeof b[c]&&!Yb(a[c])&&!Yb(b[c])?Zb(a[c],b[c]):b[c]&&"object"===typeof b[c]?(a[c]=Yb(b[c])?[]:{},Zb(a[c],b[c])):a[c]=b[c])},$b=function(a){if(a&&!/^\s+$/[F](a)){for(;0==a[Ca](a[H]-
1);)a=a[Da](0,a[H]-1);var b;try{b=k[xa].parse(a)}catch(c){}if("object"===typeof b)return b;try{b=(new Function("return ("+a+"\n)"))()}catch(d){}if("object"===typeof b)return b;try{b=(new Function("return ({"+a+"\n})"))()}catch(e){}return"object"===typeof b?b:{}}},ac=function(a){Xb(!0);var b=k.___gcfg,c=Wb("cu");if(b&&b!==k.___gu){var d={};Zb(d,b);c[E](d);k.___gu=b}var b=Wb("cu"),e=q.scripts||q[qa]("script")||[],d=[],f=[];f[E][D](f,Wb("us"));for(var g=0;g<e[H];++g)for(var h=e[g],l=0;l<f[H];++l)h.src&&
0==h.src[G](f[l])&&d[E](h);0==d[H]&&0<e[H]&&e[e[H]-1].src&&d[E](e[e[H]-1]);for(e=0;e<d[H];++e)d[e][Ba]("gapi_processed")||(d[e][x]("gapi_processed",!0),(f=d[e])?(g=f.nodeType,f=3==g||4==g?f.nodeValue:f.textContent||f.innerText||f.innerHTML||""):f=void 0,(f=$b(f))&&b[E](f));a&&(d={},Zb(d,a),c[E](d));d=Wb("cd");a=0;for(b=d[H];a<b;++a)Zb(Xb(),d[a]);d=Wb("ci");a=0;for(b=d[H];a<b;++a)Zb(Xb(),d[a]);a=0;for(b=c[H];a<b;++a)Zb(Xb(),c[a])},Y=function(a){if(!a)return Xb();a=a[A]("/");for(var b=Xb(),c=0,d=a[H];b&&
"object"===typeof b&&c<d;++c)b=b[a[c]];return c===a[H]&&void 0!==b?b:void 0},bc=function(a,b){var c=a;if("string"===typeof a){for(var d=c={},e=a[A]("/"),f=0,g=e[H];f<g-1;++f)var h={},d=d[e[f]]=h;d[e[f]]=b}ac(c)};var cc=function(){var a=k.__GOOGLEAPIS;a&&(a.googleapis&&!a["googleapis.config"]&&(a["googleapis.config"]=a.googleapis),Q(W,"ci",[])[E](a),k.__GOOGLEAPIS=void 0)};var dc={apppackagename:1,callback:1,clientid:1,cookiepolicy:1,openidrealm:-1,includegrantedscopes:-1,requestvisibleactions:1,scope:1},ec=!1,fc=R(),gc=function(){if(!ec){for(var a=q[qa]("meta"),b=0;b<a[H];++b){var c=a[b].name[Ga]();if(0==c.lastIndexOf("google-signin-",0)){var c=c[Da](14),d=a[b].content;dc[c]&&d&&(fc[c]=d)}}if(k.self!==k.top){var a=q[B][z](),e;for(e in dc)0<dc[e]&&(b=V(a,e,""))&&(fc[e]=b)}ec=!0}e=R();T(fc,e);return e},hc=function(a){return!!(a.clientid&&a.scope&&a.callback)};var ic=k.console,jc=function(a){ic&&ic.log&&ic.log(a)};var kc=function(){return!!W.oa},lc=function(){};var Z=Q(W,"rw",R()),mc=function(a){for(var b in Z)a(Z[b])},nc=function(a,b){var c=Z[a];c&&c.state<b&&(c.state=b)};var oc;var pc=/^https?:\/\/(?:\w|[\-\.])+\.google\.(?:\w|[\-:\.])+(?:\/[^\?\#]*)?\/u\/(\d)\//,qc=/^https?:\/\/(?:\w|[\-\.])+\.google\.(?:\w|[\-:\.])+(?:\/[^\?\#]*)?\/b\/(\d{10,})\//,rc=function(a){var b=Y("googleapis.config/sessionIndex");null==b&&(b=k.__X_GOOG_AUTHUSER);if(null==b){var c=k.google;c&&(b=c.authuser)}null==b&&(a=a||k[B][C],b=V(a,"authuser")||null,null==b&&(b=(b=a[na](pc))?b[1]:null));return null==b?null:r(b)},sc=function(a){var b=Y("googleapis.config/sessionDelegate");null==b&&(b=(a=(a||k[B][C])[na](qc))?
a[1]:null);return null==b?null:r(b)};var tc=function(){this.c=-1};var uc=function(){this.c=-1;this.c=64;this.b=[];this.C=[];this.W=[];this.w=[];this.w[0]=128;for(var a=1;a<this.c;++a)this.w[a]=0;this.A=this.j=0;this.reset()};(function(){function a(){}a.prototype=tc[I];uc.ia=tc[I];uc.prototype=new a;uc.K=function(a,c,d){for(var e=ca(arguments[H]-2),f=2;f<arguments[H];f++)e[f-2]=arguments[f];return tc[I][c][D](a,e)}})();uc[I].reset=function(){this.b[0]=1732584193;this.b[1]=4023233417;this.b[2]=2562383102;this.b[3]=271733878;this.b[4]=3285377520;this.A=this.j=0};
var vc=function(a,b,c){c||(c=0);var d=a.W;if("string"==typeof b)for(var e=0;16>e;e++)d[e]=b[Ca](c)<<24|b[Ca](c+1)<<16|b[Ca](c+2)<<8|b[Ca](c+3),c+=4;else for(e=0;16>e;e++)d[e]=b[c]<<24|b[c+1]<<16|b[c+2]<<8|b[c+3],c+=4;for(e=16;80>e;e++){var f=d[e-3]^d[e-8]^d[e-14]^d[e-16];d[e]=(f<<1|f>>>31)&4294967295}b=a.b[0];c=a.b[1];for(var g=a.b[2],h=a.b[3],l=a.b[4],n,e=0;80>e;e++)40>e?20>e?(f=h^c&(g^h),n=1518500249):(f=c^g^h,n=1859775393):60>e?(f=c&g|h&(c|g),n=2400959708):(f=c^g^h,n=3395469782),f=(b<<5|b>>>27)+
f+l+n+d[e]&4294967295,l=h,h=g,g=(c<<30|c>>>2)&4294967295,c=b,b=f;a.b[0]=a.b[0]+b&4294967295;a.b[1]=a.b[1]+c&4294967295;a.b[2]=a.b[2]+g&4294967295;a.b[3]=a.b[3]+h&4294967295;a.b[4]=a.b[4]+l&4294967295};
uc[I].update=function(a,b){if(null!=a){void 0===b&&(b=a[H]);for(var c=b-this.c,d=0,e=this.C,f=this.j;d<b;){if(0==f)for(;d<=c;)vc(this,a,d),d+=this.c;if("string"==typeof a)for(;d<b;){if(e[f]=a[Ca](d),++f,++d,f==this.c){vc(this,e);f=0;break}}else for(;d<b;)if(e[f]=a[d],++f,++d,f==this.c){vc(this,e);f=0;break}}this.j=f;this.A+=b}};
uc[I].digest=function(){var a=[],b=8*this.A;56>this.j?this[Fa](this.w,56-this.j):this[Fa](this.w,this.c-(this.j-56));for(var c=this.c-1;56<=c;c--)this.C[c]=b&255,b/=256;vc(this,this.C);for(c=b=0;5>c;c++)for(var d=24;0<=d;d-=8)a[b]=this.b[c]>>d&255,++b;return a};var wc=function(){this.G=new uc};wc[I].reset=function(){this.G.reset()};var xc=N.crypto,yc=!1,zc=0,Ac=0,Bc=1,Cc=0,Dc="",Ec=function(a){a=a||N.event;var b=a.screenX+a.clientX<<16,b=b+(a.screenY+a.clientY),b=(new Date)[pa]()%1E6*b;Bc=Bc*b%Cc;0<zc&&++Ac==zc&&eb("mousemove",Ec,"remove","de")},Fc=function(a){var b=new wc;a=unescape(aa(a));for(var c=[],d=0,e=a[H];d<e;++d)c[E](a[Ca](d));b.G[Fa](c);b=b.G.digest();a="";for(c=0;c<b[H];c++)a+="0123456789ABCDEF"[ma](Math.floor(b[c]/16))+"0123456789ABCDEF"[ma](b[c]%16);return a},yc=!!xc&&"function"==typeof xc.getRandomValues;
yc||(Cc=1E6*(screen[ka]*screen[ka]+screen[va]),Dc=Fc(P.cookie+"|"+P[B]+"|"+(new Date)[pa]()+"|"+Math.random()),zc=Y("random/maxObserveMousemove")||0,0!=zc&&eb("mousemove",Ec,"add","at"));var Gc=function(){var a=Bc,a=a+da(Dc[y](0,20),16);Dc=Fc(Dc);return a/(Cc+Math.pow(16,20))},Hc=function(){var a=new N.Uint32Array(1);xc.getRandomValues(a);return Number("0."+a[0])};var Ic=function(){var a=W.onl;if(!a){a=R();W.onl=a;var b=R();a.e=function(a){var d=b[a];d&&(delete b[a],d())};a.a=function(a,d){b[a]=d};a.r=function(a){delete b[a]}}return a},Jc=function(a,b){var c=b.onload;return"function"===typeof c?(Ic().a(a,c),c):null},Kc=function(a){Xa(/^\w+$/[F](a),"Unsupported id - "+a);Ic();return'onload="window.___jsl.onl.e(&#34;'+a+'&#34;)"'},Lc=function(a){Ic().r(a)};var Mc={allowtransparency:"true",frameborder:"0",hspace:"0",marginheight:"0",marginwidth:"0",scrolling:"no",style:"",tabindex:"0",vspace:"0",width:"100%"},Nc={allowtransparency:!0,onload:!0},Oc=0,Pc=function(a){Xa(!a||db[F](a),"Illegal url for new iframe - "+a)},Qc=function(a,b,c,d,e){Pc(c.src);var f,g=Jc(d,c),h=g?Kc(d):"";try{q.all&&(f=a[v]('<iframe frameborder="'+Ua(r(c.frameborder))+'" scrolling="'+Ua(r(c.scrolling))+'" '+h+' name="'+Ua(r(c.name))+'"/>'))}catch(l){}finally{f||(f=a[v]("iframe"),
g&&(f.onload=function(){f.onload=null;g[K](this)},Lc(d)))}for(var n in c)a=c[n],"style"===n&&"object"===typeof a?T(a,f[ra]):Nc[n]||f[x](n,r(a));(n=e&&e.beforeNode||null)||e&&e.dontclear||jb(b);b.insertBefore(f,n);f=n?n.previousSibling:b.lastChild;c.allowtransparency&&(f.allowTransparency=!0);return f};var Rc=/^:[\w]+$/,Sc=/:([a-zA-Z_]+):/g,Tc=function(){var a=rc()||"0",b=sc(),c;c=rc(void 0)||a;var d=sc(void 0),e="";c&&(e+="u/"+c+"/");d&&(e+="b/"+d+"/");c=e||null;(e=(d=!1===Y("isLoggedIn"))?"_/im/":"")&&(c="");var f=Y("iframes/:socialhost:"),g=Y("iframes/:im_socialhost:");return oc={socialhost:f,ctx_socialhost:d?g:f,session_index:a,session_delegate:b,session_prefix:c,im_prefix:e}},Uc=function(a,b){return Tc()[b]||""},Vc=function(a){return function(b,c){return a?Tc()[c]||a[c]||"":Tc()[c]||""}};var Wc={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},Xc=function(a){var b,c,d;b=/[\"\\\x00-\x1f\x7f-\x9f]/g;if(void 0!==a){switch(typeof a){case "string":return b[F](a)?'"'+a[t](b,function(a){var b=Wc[a];if(b)return b;b=a[Ca]();return"\\u00"+Math.floor(b/16)[z](16)+(b%16)[z](16)})+'"':'"'+a+'"';case "number":return isFinite(a)?r(a):"null";case "boolean":case "null":return r(a);case "object":if(!a)return"null";b=[];if("number"===typeof a[H]&&!a.propertyIsEnumerable("length")){d=
a[H];for(c=0;c<d;c+=1)b[E](Xc(a[c])||"null");return"["+b[M](",")+"]"}for(c in a)!/___$/[F](c)&&S(a,c)&&"string"===typeof c&&(d=Xc(a[c]))&&b[E](Xc(c)+":"+d);return"{"+b[M](",")+"}"}return""}},Yc=function(a){if(!a)return!1;if(/^[\],:{}\s]*$/[F](a[t](/\\["\\\/b-u]/g,"@")[t](/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]")[t](/(?:^|:|,)(?:\s*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}return!1},Zc=!1;try{Zc=!!k[xa]&&'["a"]'===k[xa].stringify(["a"])&&"a"===k[xa].parse('["a"]')[0]}catch($c){}
var ad=function(a){try{return k[xa].parse(a)}catch(b){return!1}},bd=Zc?k[xa].stringify:Xc,cd=Zc?ad:Yc;var dd=function(a){var b;a[na](/^https?%3A/i)&&(b=ea(a));return cb(q,b?b:a)},ed=function(a){a=a||"canonical";for(var b=q[qa]("link"),c=0,d=b[H];c<d;c++){var e=b[c],f=e[Ba]("rel");if(f&&f[Ga]()==a&&(e=e[Ba]("href"))&&(e=dd(e))&&null!=e[na](/^https?:\/\/[\w\-\_\.]+/i))return e}return k[B][C]};var fd={se:"0"},gd={post:!0},hd={style:"position:absolute;top:-10000px;width:450px;margin:0px;border-style:none"},id="onPlusOne _ready _close _open _resizeMe _renderstart oncircled drefresh erefresh".split(" "),jd=Q(W,"WI",R()),kd=function(a,b,c){var d,e;d={};var f=e=a;"plus"==a&&b[ta]&&(e=a+"_"+b[ta],f=a+"/"+b[ta]);(e=Y("iframes/"+e+"/url"))||(e=":im_socialhost:/:session_prefix::im_prefix:_/widget/render/"+f+"?usegapi=1");for(var g in fd)d[g]=g+"/"+(b[g]||fd[g])+"/";d=cb(P,e[t](Sc,Vc(d)));g="iframes/"+
a+"/params/";f={};T(b,f);(e=Y("lang")||Y("gwidget/lang"))&&(f.hl=e);gd[a]||(f.origin=k[B].origin||k[B][sa]+"//"+k[B].host);f.exp=Y(g+"exp");if(g=Y(g+"location"))for(e=0;e<g[H];e++){var h=g[e];f[h]=N[B][h]}switch(a){case "plus":case "follow":g=f[C];e=b[ta]?void 0:"publisher";g=(g="string"==typeof g?g:void 0)?dd(g):ed(e);f.url=g;delete f[C];break;case "plusone":g=(g=b[C])?dd(g):ed();f.url=g;g=b.db;e=Y();null==g&&e&&(g=e.db,null==g&&(g=e.gwidget&&e.gwidget.db));f.db=g||void 0;g=b.ecp;e=Y();null==g&&
e&&(g=e.ecp,null==g&&(g=e.gwidget&&e.gwidget.ecp));f.ecp=g||void 0;delete f[C];break;case "signin":f.url=ed()}W.ILI&&(f.iloader="1");delete f["data-onload"];delete f.rd;for(var l in fd)f[l]&&delete f[l];f.gsrc=Y("iframes/:source:");l=Y("inline/css");"undefined"!==typeof l&&0<c&&l>=c&&(f.ic="1");l=/^#|^fr-/;c={};for(var n in f)S(f,n)&&l[F](n)&&(c[n[t](l,"")]=f[n],delete f[n]);n="q"==Y("iframes/"+a+"/params/si")?f:c;l=gc();for(var m in l)!S(l,m)||S(f,m)||S(c,m)||(n[m]=l[m]);m=[][la](id);(n=Y("iframes/"+
a+"/methods"))&&"object"===typeof n&&Ma[F](n[E])&&(m=m[la](n));for(var p in b)S(b,p)&&/^on/[F](p)&&("plus"!=a||"onconnect"!=p)&&(m[E](p),delete f[p]);delete f.callback;c._methods=m[M](",");return bb(d,f,c)},ld=["style","data-gapiscan"],nd=function(a){for(var b=R(),c=0!=a[ya][Ga]()[G]("g:"),d=0,e=a[ua][H];d<e;d++){var f=a[ua][d],g=f.name,h=f.value;0<=Na[K](ld,g)||c&&0!=g[G]("data-")||"null"===h||"specified"in f&&!f.specified||(c&&(g=g[y](5)),b[g[Ga]()]=h)}a=a[ra];(c=md(a&&a[va]))&&(b.height=r(c));
(a=md(a&&a[ka]))&&(b.width=r(a));return b},md=function(a){var b=void 0;"number"===typeof a?b=a:"string"===typeof a&&(b=da(a,10));return b},pd=function(){var a=W.drw;mc(function(b){if(a!==b.id&&4!=b.state&&"share"!=b[za]){var c=b.id,d=b[za],e=b.url;b=b.userParams;var f=P[wa](c);if(f){var g=kd(d,b,0);g?(f=f[L],e[t](/\#.*/,"")[t](/(\?|&)ic=1/,"")!==g[t](/\#.*/,"")[t](/(\?|&)ic=1/,"")&&(b.dontclear=!0,b.rd=!0,b.ri=!0,ga(b,d),od(f,b),(d=Z[f.lastChild.id])&&(d.oid=c),nc(c,4))):delete Z[c]}else delete Z[c]}})};var qd,rd,sd,td,ud,vd=/(?:^|\s)g-((\S)*)(?:$|\s)/,wd={plusone:!0,autocomplete:!0,profile:!0,signin:!0,signin2:!0};qd=Q(W,"SW",R());rd=Q(W,"SA",R());sd=Q(W,"SM",R());td=Q(W,"FW",[]);ud=null;
var yd=function(a,b){xd(void 0,!1,a,b)},xd=function(a,b,c,d){vb("ps0",!0);c=("string"===typeof c?q[wa](c):c)||P;var e;e=P[Ea];if(c.querySelectorAll&&(!e||8<e)){e=d?[d]:Va(qd)[la](Va(rd))[la](Va(sd));for(var f=[],g=0;g<e[H];g++){var h=e[g];f[E](".g-"+h,"g\\:"+h)}e=c.querySelectorAll(f[M](","))}else e=c[qa]("*");c=R();for(f=0;f<e[H];f++){g=e[f];var l=g,h=d,n=l[ya][Ga](),m=void 0;l[Ba]("data-gapiscan")?h=null:(0==n[G]("g:")?m=n[y](2):(l=(l=r(l.className||l[Ba]("class")))&&vd[ja](l))&&(m=l[1]),h=!m||
!(qd[m]||rd[m]||sd[m])||h&&m!==h?null:m);h&&(wd[h]||0==g[ya][Ga]()[G]("g:")||0!=Va(nd(g))[H])&&(g[x]("data-gapiscan",!0),Q(c,h,[])[E](g))}if(b)for(var p in c)for(b=c[p],d=0;d<b[H];d++)b[d][x]("data-onload",!0);for(var w in c)td[E](w);vb("ps1",!0);if((p=td[M](":"))||a)try{U.load(p,a)}catch(O){jc(O);return}if(zd(ud||{}))for(var u in c){a=c[u];w=0;for(b=a[H];w<b;w++)a[w].removeAttribute("data-gapiscan");Ad(u)}else{d=[];for(u in c)for(a=c[u],w=0,b=a[H];w<b;w++)e=a[w],Bd(u,e,nd(e),d,b);Cd(p,d)}},Dd=function(a){var b=
Q(U,a,{});b.go||(b.go=function(b){return yd(b,a)},b.render=function(b,d){var e=d||{};ga(e,a);return od(b,e)})},Ed=function(a){qd[a]=!0},Fd=function(a){rd[a]=!0},Gd=function(a){sd[a]=!0};var Ad=function(a,b){var c=nb(a);b&&c?(c(b),(c=b.iframeNode)&&c[x]("data-gapiattached",!0)):U.load(a,function(){var c=nb(a),e=b&&b.iframeNode,f=b&&b.userParams;e&&c?(c(b),e[x]("data-gapiattached",!0)):(c=U[a].go,"signin2"==a?c(e,f):c(e&&e[L],f))})},zd=function(){return!1},Cd=function(){},Bd=function(a,b,c,d,e,f){switch(Hd(b,a,f)){case 0:a=sd[a]?a+"_annotation":a;d={};d.iframeNode=b;d.userParams=c;Ad(a,d);break;case 1:var g;if(b[L]){for(var h in c){if(f=S(c,h))f=c[h],f=!!f&&"object"===typeof f&&(!f[z]||
f[z]===ba[I][z]||f[z]===ca[I][z]);if(f)try{c[h]=bd(c[h])}catch(l){delete c[h]}}var n=!0;c.dontclear&&(n=!1);delete c.dontclear;lc();f=kd(a,c,e);h={allowPost:1,attributes:hd};h.dontclear=!n;e={};e.userParams=c;e.url=f;ga(e,a);var m;c.rd?m=b:(m=q[v]("div"),b[x]("data-gapistub",!0),m[ra].cssText="position:absolute;width:450px;left:-10000px;",b[L].insertBefore(m,b));e.siteElement=m;m.id||(b=m,Q(jd,a,0),n="___"+a+"_"+jd[a]++,b.id=n);b=R();b[">type"]=a;T(c,b);n=f;c=m;f=h||{};b=f[ua]||{};Xa(!f.allowPost||
!b.onload,"onload is not supported by post iframe");h=b=n;Rc[F](b)&&(h=Y("iframes/"+h[Da](1)+"/url"),Xa(!!h,"Unknown iframe url config for - "+b));n=cb(P,h[t](Sc,Uc));b=c.ownerDocument||P;m=0;do h=f.id||["I",Oc++,"_",(new Date)[pa]()][M]("");while(b[wa](h)&&5>++m);Xa(5>m,"Error creating iframe id");m={};var p={};b[Ea]&&9>b[Ea]&&(m.hostiemode=b[Ea]);T(f.queryParams||{},m);T(f.fragmentParams||{},p);var w=f.connectWithQueryParams?m:p,O=f.pfname,u=R();u.id=h;u.parent=b[B][sa]+"//"+b[B].host;var J=V(b[B][C],
"parent"),O=O||"";!O&&J&&(J=V(b[B][C],"id",""),O=V(b[B][C],"pfname",""),O=J?O+"/"+J:"");u.pfname=O;T(u,w);(u=V(n,"rpctoken")||m.rpctoken||p.rpctoken)||(u=w.rpctoken=f.rpctoken||r(Math.round(1E8*(yc?Hc():Gc()))));f.rpctoken=u;u=b[B][C];w=R();(J=V(u,"_bsh",W.bsh))&&(w._bsh=J);(u=lb(u))&&(w.jsh=u);f.hintInFragment?T(w,p):T(w,m);n=bb(n,m,p,f.paramsSerializer);p=R();T(Mc,p);T(f[ua],p);p.name=p.id=h;p.src=n;f.eurl=n;if((f||{}).allowPost&&2E3<n[H]){m=Za(n);p.src="";p["data-postorigin"]=n;n=Qc(b,c,p,h);-1!=
navigator.userAgent[G]("WebKit")&&(g=n.contentWindow.document,g.open(),p=g[v]("div"),w={},u=h+"_inner",w.name=u,w.src="",w.style="display:none",Qc(b,p,w,u,f));p=(f=m.l[0])?f[A]("&"):[];f=[];for(w=0;w<p[H];w++)u=p[w][A]("=",2),f[E]([ea(u[0]),ea(u[1])]);m.l=[];p=$a(m);Xa(db[F](p),"Invalid URL: "+p);m=b[v]("form");m.action=p;m.method="POST";m.target=h;m[ra].display="none";for(h=0;h<f[H];h++)p=b[v]("input"),ga(p,"hidden"),p.name=f[h][0],p.value=f[h][1],m[ha](p);c[ha](m);m.submit();m[L][Aa](m);g&&g.close();
g=n}else g=Qc(b,c,p,h,f);e.iframeNode=g;e.id=g[Ba]("id");g=e.id;c=R();c.id=g;c.userParams=e.userParams;c.url=e.url;ga(c,e[za]);c.state=1;Z[g]=c;g=e}else g=null;g&&((e=g.id)&&d[E](e),Ad(a,g))}},Hd=function(a,b,c){if(a&&1===a.nodeType&&b){if(c)return 1;if(sd[b]){if(kb[a[ya][Ga]()])return(a=a.innerHTML)&&a[t](/^[\s\xa0]+|[\s\xa0]+$/g,"")?0:1}else{if(rd[b])return 0;if(qd[b])return 1}}return null},od=function(a,b){var c=b[za];delete b[za];var d=("string"===typeof a?q[wa](a):a)||void 0;if(d){var e={},f;
for(f in b)S(b,f)&&(e[f[Ga]()]=b[f]);e.rd=1;(f=!!e.ri)&&delete e.ri;var g=[];Bd(c,d,e,g,0,f);Cd(c,g)}else jc("string"==="gapi."+c+".render: missing element "+typeof a?a:"")};Q(U,"platform",{}).go=yd;var zd=function(a){for(var b=["_c","jsl","h"],c=0;c<b[H]&&a;c++)a=a[b[c]];b=lb(Ka[C]);return!a||0!=a[G]("n;")&&0!=b[G]("n;")&&a!==b},Cd=function(a,b){Id(a,b)},gb=function(a){xd(a,!0)},Jd=function(a,b){for(var c=b||[],d=0;d<c[H];++d)a(c[d]);for(d=0;d<c[H];d++)Dd(c[d])};
zb[E](["platform",function(a,b,c){ud=c;b&&td[E](b);Jd(Ed,a);Jd(Fd,c._c.annotation);Jd(Gd,c._c.bimodal);cc();ac();if("explicit"!=Y("parsetags")){mb(a);hc(gc())&&!Y("disableRealtimeCallback")&&lc();var d;c&&(a=c.callback)&&(d=Wa(a),delete c.callback);ib(function(){gb(d)})}}]);U._pl=!0;var Kd=function(a){a=(a=Z[a])?a.oid:void 0;if(a){var b=P[wa](a);b&&b[L][Aa](b);delete Z[a];Kd(a)}};var Ld=/^\{h\:'/,Md=/^!_/,Nd="",Id=function(a,b){function c(){eb("message",d,"remove","de")}function d(d){var g=d.data,h=d.origin;if(Od(g,b)){var l=e;e=!1;l&&vb("rqe");Pd(a,function(){l&&vb("rqd");c();for(var a=Q(W,"RPMQ",[]),b=0;b<a[H];b++)a[b]({data:g,origin:h})})}}if(0!==b[H]){Nd=V(Ka[C],"pfname","");var e=!0;eb("message",d,"add","at");Vb(a,c)}},Od=function(a,b){a=r(a);if(Ld[F](a))return!0;var c=!1;Md[F](a)&&(c=!0,a=a[y](2));if(!/^\{/[F](a))return!1;var d=cd(a);if(!d)return!1;var e=d.f;if(d.s&&
e&&-1!=Na[K](b,e)){if("_renderstart"===d.s||d.s===Nd+"/"+e+"::_renderstart"){var f=d.a&&d.a[c?0:1],c=P[wa](e);nc(e,2);if(f&&c&&f[ka]&&f[va]){a:{d=c[L];e=f||{};if(kc()){var g=c.id;if(g){f=(f=Z[g])?f.state:void 0;if(1===f||4===f)break a;Kd(g)}}(f=d.nextSibling)&&f[Ba]&&f[Ba]("data-gapistub")&&(d[L][Aa](f),d[ra].cssText="");var f=e[ka],h=e[va],l=d[ra];l.textIndent="0";l.margin="0";l.padding="0";l.background="transparent";l.borderStyle="none";l.cssFloat="none";l.styleFloat="none";l.lineHeight="normal";
l.fontSize="1px";l.verticalAlign="baseline";d=d[ra];d.display="inline-block";l=c[ra];l.position="static";l.left=0;l.top=0;l.visibility="visible";f&&(d.width=l.width=f+"px");h&&(d.height=l.height=h+"px");e.verticalAlign&&(d.verticalAlign=e.verticalAlign);g&&nc(g,3)}c["data-csi-wdt"]=(new Date)[pa]()}}return!0}return!1},Pd=function(a,b){Vb(a,b)};var Qd=function(a,b){this.P=a;var c=b||{};this.Z=c.ga;this.M=c.domain;this.R=c.path;this.aa=c.ha},Rd=/^[-+/_=.:|%&a-zA-Z0-9@]*$/,Sd=/^[A-Z_][A-Z0-9_]{0,63}$/;
Qd[I].write=function(a,b){if(!Sd[F](this.P))throw"Invalid cookie name";if(!Rd[F](a))throw"Invalid cookie value";var c=this.P+"="+a;this.M&&(c+=";domain="+this.M);this.R&&(c+=";path="+this.R);var d="number"===typeof b?b:this.Z;if(0<=d){var e=new Date;e.setSeconds(e.getSeconds()+d);c+=";expires="+e.toUTCString()}this.aa&&(c+=";secure");q.cookie=c;return!0};Qd.iterate=function(a){for(var b=q.cookie[A](/;\s*/),c=0;c<b[H];++c){var d=b[c][A]("="),e=d[ia]();a(e,d[M]("="))}};var Td=function(a){this.Y=a},Ud={};Td[I].write=function(a){Ud[this.Y]=a;return!0};Td.iterate=function(a){for(var b in Ud)Ud.hasOwnProperty(b)&&a(b,Ud[b])};var Vd="https:"===k[B][sa],Wd=Vd||"http:"===k[B][sa]?Qd:Td,Xd=function(a){var b=a[y](1),c="",d=k[B].hostname;if(""!==b){c=da(b,10);if(isNaN(c))return null;b=d[A](".");if(b[H]<c-1)return null;b[H]==c-1&&(d="."+d)}else d="";return{g:"S"==a[ma](0),domain:d,i:c}},Yd=function(){var a,b=null;Wd.iterate(function(c,d){if(0===c[G]("G_AUTHUSER_")){var e=Xd(c[Da](11));if(!a||e.g&&!a.g||e.g==a.g&&e.i>a.i)a=e,b=d}});return{X:a,B:b}};var Zd=function(a){if(0!==a[G]("GCSC"))return null;var b={O:!1};a=a[y](4);if(!a)return b;var c=a[ma](0);a=a[y](1);var d=a.lastIndexOf("_");if(-1==d)return b;var e=Xd(a[y](d+1));if(null==e)return b;a=a[Da](0,d);if("_"!==a[ma](0))return b;d="E"===c&&e.g;return!d&&("U"!==c||e.g)||d&&!Vd?b:{O:!0,g:d,da:a[y](1),domain:e.domain,i:e.i}},$d=function(a){if(!a)return[];a=a[A]("=");return a[1]?a[1][A]("|"):[]},ae=function(a){a=a[A](":");return{D:a[0][A]("=")[1],ca:$d(a[1]),fa:$d(a[2]),ea:$d(a[3])}},be=function(){var a=
Yd(),b=a.X,a=a.B;if(null!==a){var c;Wd.iterate(function(a,d){var e=Zd(a);e&&e.O&&e.g==b.g&&e.i==b.i&&(c=d)});if(c){var d=ae(c),e=d&&d.ca[Number(a)],d=d&&d.D;if(e)return{B:a,ba:e,D:d}}}return null};var ce=function(a){this.L=a};ce[I].o=0;ce[I].H=2;ce[I].L=null;ce[I].F=!1;ce[I].U=function(){this.F||(this.o=0,this.F=!0,this.S())};ce[I].S=function(){this.F&&(this.L()?this.o=this.H:this.o=Math.min(2*(this.o||this.H),120),k.setTimeout(Ja(this.S,this),1E3*this.o))};for(var de=0;64>de;++de);var ee=null,kc=function(){return W.oa=!0},lc=function(){W.oa=!0;var a=be();(a=a&&a.B)&&bc("googleapis.config/sessionIndex",a);ee||(ee=Q(W,"ss",new ce(fe)));a=ee;a.U&&a.U()},fe=function(){var a=be(),b=a&&a.ba||null,c=a&&a.D;Vb("auth",{callback:function(){var a=N.gapi.auth,e={client_id:c,session_state:b};a.checkSessionState(e,function(b){var c=e.session_state,h=Y("isLoggedIn");b=Y("debug/forceIm")?!1:c&&b||!c&&!b;if(h=h!=b)bc("isLoggedIn",b),lc(),pd(),b||((b=a.signOut)?b():(b=a.setToken)&&b(null));
b=gc();var l=Y("savedUserState"),c=a._guss(b.cookiepolicy),l=l!=c&&"undefined"!=typeof l;bc("savedUserState",c);(h||l)&&hc(b)&&!Y("disableRealtimeCallback")&&a._pimf(b,!0)})}});return!0};vb("bs0",!0,k.gapi._bs);vb("bs1",!0);delete k.gapi._bs;})();
gapi.load("plusone",{callback:window["gapi_onload"],_c:{"jsl":{"ci":{"llang":"ja","client":{"headers":{"response":["Cache-Control","Content-Disposition","Content-Encoding","Content-Language","Content-Length","Content-MD5","Content-Range","Content-Type","Date","ETag","Expires","Last-Modified","Location","Pragma","Range","Server","Transfer-Encoding","WWW-Authenticate","Vary","X-Goog-Safety-Content-Type","X-Goog-Safety-Encoding","X-Goog-Upload-Chunk-Granularity","X-Goog-Upload-Control-URL","X-Goog-Upload-Size-Received","X-Goog-Upload-Status","X-Goog-Upload-URL","X-Goog-Diff-Download-Range","X-Goog-Hash","X-Goog-Updated-Authorization","X-Server-Object-Version","X-Guploader-Customer","X-Guploader-Upload-Result","X-Guploader-Uploadid"],"request":["Accept","Accept-Language","Authorization","Cache-Control","Content-Disposition","Content-Encoding","Content-Language","Content-Length","Content-MD5","Content-Range","Content-Type","Date","GData-Version","Host","If-Match","If-Modified-Since","If-None-Match","If-Unmodified-Since","Origin","OriginToken","Pragma","Range","Slug","Transfer-Encoding","X-ClientDetails","X-GData-Client","X-GData-Key","X-Goog-AuthUser","X-Goog-PageId","X-Goog-Encode-Response-If-Executable","X-Goog-Correlation-Id","X-Goog-Request-Info","X-Goog-Experiments","x-goog-iam-role","x-goog-iam-authorization-token","X-Goog-Spatula","X-Goog-Upload-Command","X-Goog-Upload-Content-Disposition","X-Goog-Upload-Content-Length","X-Goog-Upload-Content-Type","X-Goog-Upload-File-Name","X-Goog-Upload-Offset","X-Goog-Upload-Protocol","X-Goog-Visitor-Id","X-HTTP-Method-Override","X-JavaScript-User-Agent","X-Pan-Versionid","X-Origin","X-Referer","X-Upload-Content-Length","X-Upload-Content-Type","X-Use-HTTP-Status-Code-Override","X-YouTube-VVT","X-YouTube-Page-CL","X-YouTube-Page-Timestamp"]},"rms":"migrated","cors":false},"plus_layer":{"isEnabled":false},"enableMultilogin":true,"drive_share":{"useStandaloneSharingService":true},"disableRealtimeCallback":false,"isLoggedIn":true,"iframes":{"additnow":{"methods":["launchurl"],"url":"https://apis.google.com/additnow/additnow.html?usegapi\u003d1"},"person":{"url":":socialhost:/:session_prefix:_/widget/render/person?usegapi\u003d1"},"visibility":{"params":{"url":""},"url":":socialhost:/:session_prefix:_/widget/render/visibility?usegapi\u003d1"},"photocomments":{"url":":socialhost:/:session_prefix:_/widget/render/photocomments?usegapi\u003d1"},"plus_followers":{"params":{"url":""},"url":":socialhost:/_/im/_/widget/render/plus/followers?usegapi\u003d1"},"playreview":{"url":"https://play.google.com/store/ereview?usegapi\u003d1"},"signin":{"methods":["onauth"],"params":{"url":""},"url":":socialhost:/:session_prefix:_/widget/render/signin?usegapi\u003d1"},"share":{"url":":socialhost:/:session_prefix::im_prefix:_/widget/render/share?usegapi\u003d1"},"commentcount":{"url":":socialhost:/:session_prefix:_/widget/render/commentcount?usegapi\u003d1"},"page":{"url":":socialhost:/:session_prefix:_/widget/render/page?usegapi\u003d1"},"hangout":{"url":"https://talkgadget.google.com/:session_prefix:talkgadget/_/widget"},"plus_circle":{"params":{"url":""},"url":":socialhost:/:session_prefix::se:_/widget/plus/circle?usegapi\u003d1"},"youtube":{"methods":["scroll","openwindow"],"params":{"location":["search","hash"]},"url":":socialhost:/:session_prefix:_/widget/render/youtube?usegapi\u003d1"},"zoomableimage":{"url":"https://ssl.gstatic.com/microscope/embed/"},"card":{"url":":socialhost:/:session_prefix:_/hovercard/card"},"evwidget":{"params":{"url":""},"url":":socialhost:/:session_prefix:_/events/widget?usegapi\u003d1"},"reportabuse":{"params":{"url":""},"url":":socialhost:/:session_prefix:_/widget/render/reportabuse?usegapi\u003d1"},"follow":{"url":":socialhost:/:session_prefix:_/widget/render/follow?usegapi\u003d1"},"shortlists":{"url":""},"plus":{"url":":socialhost:/:session_prefix:_/widget/render/badge?usegapi\u003d1"},"configurator":{"url":":socialhost:/:session_prefix:_/plusbuttonconfigurator?usegapi\u003d1"},":socialhost:":"https://apis.google.com","post":{"params":{"url":""},"url":":socialhost:/:session_prefix::im_prefix:_/widget/render/post?usegapi\u003d1"},"community":{"url":":ctx_socialhost:/:session_prefix::im_prefix:_/widget/render/community?usegapi\u003d1"},":gplus_url:":"https://plus.google.com","rbr_s":{"params":{"url":""},"url":":socialhost:/:session_prefix::se:_/widget/render/recobarsimplescroller"},"autocomplete":{"params":{"url":""},"url":":socialhost:/:session_prefix:_/widget/render/autocomplete"},"plus_share":{"params":{"url":""},"url":":socialhost:/:session_prefix::se:_/+1/sharebutton?plusShare\u003dtrue\u0026usegapi\u003d1"},":source:":"3p","blogger":{"methods":["scroll","openwindow"],"params":{"location":["search","hash"]},"url":":socialhost:/:session_prefix:_/widget/render/blogger?usegapi\u003d1"},"savetowallet":{"url":"https://clients5.google.com/s2w/o/savetowallet"},"rbr_i":{"params":{"url":""},"url":":socialhost:/:session_prefix::se:_/widget/render/recobarinvitation"},"appcirclepicker":{"url":":socialhost:/:session_prefix:_/widget/render/appcirclepicker"},"udc_webconsentflow":{"params":{"url":""},"url":"https://www.google.com/settings/webconsent?usegapi\u003d1"},"savetodrive":{"methods":["save"],"url":"https://drive.google.com/savetodrivebutton?usegapi\u003d1"},":im_socialhost:":"https://plus.googleapis.com","ytshare":{"params":{"url":""},"url":":socialhost:/:session_prefix:_/widget/render/ytshare?usegapi\u003d1"},":signuphost:":"https://plus.google.com","plusone":{"params":{"count":"","size":"","url":""},"url":":socialhost:/:session_prefix::se:_/+1/fastbutton?usegapi\u003d1"},"comments":{"methods":["scroll","openwindow"],"params":{"location":["search","hash"]},"url":":socialhost:/:session_prefix:_/widget/render/comments?usegapi\u003d1"},"ytsubscribe":{"url":"https://www.youtube.com/subscribe_embed?usegapi\u003d1"}},"isPlusUser":true,"debug":{"host":"https://apis.google.com","forceIm":false,"reportExceptionRate":0.05,"rethrowException":false},"deviceType":"desktop","inline":{"css":1},"lexps":[100,81,97,127,79,123,122,61,30,45],"include_granted_scopes":true,"oauth-flow":{"usegapi":false,"disableOpt":true,"authUrl":"https://accounts.google.com/o/oauth2/auth","proxyUrl":"https://accounts.google.com/o/oauth2/postmessageRelay","idpIframeUrl":"https://accounts.google.com/o/oauth2/iframe"},"report":{"apiRate":{"gapi\\.signin\\..*":0.05},"host":"https://apis.google.com","rate":0.001,"apis":["iframes\\..*","gadgets\\..*","gapi\\.appcirclepicker\\..*","gapi\\.auth\\..*","gapi\\.client\\..*"]},"csi":{"rate":0.01},"googleapis.config":{"auth":{"useFirstPartyAuthV2":true}}},"h":"m;/_/scs/apps-static/_/js/k\u003doz.gapi.ja.GaAqtE9vSt8.O/m\u003d__features__/am\u003dIQ/rt\u003dj/d\u003d1/t\u003dzcms/rs\u003dAGLTcCObdvcYYb_30dT3f0o1AM2Q88jrEw","u":"https://apis.google.com/js/plusone.js","hee":true,"fp":"c55510e6c6d81365278400d0ed0943a52fcf4b02","dpo":false},"platform":["additnow","blogger","comments","commentcount","community","follow","page","person","playreview","plus","plusone","post","reportabuse","savetodrive","savetowallet","sharetoclassroom","shortlists","visibility","youtube","ytsubscribe","zoomableimage","signin2","photocomments","hangout","udc_webconsentflow"],"fp":"c55510e6c6d81365278400d0ed0943a52fcf4b02","annotation":["interactivepost","recobar","autocomplete","profile","signin2"],"bimodal":["signin","share"]}});_application/javascriptÔ	789:_-https://b.st-hatena.com/js/bookmark_button.jsOvbplist00ÔklX$versionX$objectsY$archiverT$top † ¯!#)*0123MNOPQRSTUVWXYZ[\]^_`adefU$nullİ	
 !"R$6S$10R$2R$7R$3S$11R$8V$classR$4R$9R$0R$5R$1€	€€€€ €€€Ó$%&'(WNS.base[NS.relative€ €€_-https://b.st-hatena.com/js/bookmark_button.jsÒ+,-.Z$classnameX$classesUNSURL¢-/XNSObject#AºôÒ:‘Ê ÈÓ456ALWNS.keysZNS.objectsª789:;<=>?@€	€
€€€€€€€€ªBCDEFGHIJK€€€€€€€€€€€ZConnection\Content-TypeVServer]Last-ModifiedWExpiresTVaryTDate_Content-Encoding]Cache-Control_Transfer-EncodingZkeep-alive_application/x-javascriptUnginx_Fri, 01 May 2015 08:31:09 GMT_Sun, 03 May 2015 09:36:59 GMT_Accept-Encoding_Sat, 02 May 2015 09:36:59 GMTTgzip]max-age=86400XIdentityÒ+,bc\NSDictionary¢b/ÿÿÿÿÿÿÿÿ_application/x-javascriptÒ+,gh_NSHTTPURLResponse£ij/_NSHTTPURLResponse]NSURLResponse_NSKeyedArchiverÑmn_WebResourceResponse€    # - 2 7 [ a |  ƒ † ‰ Œ  “ š    £ ¦ © « ­ ¯ ± ³ ´ ¶ ¸ º ¼ ¾ À Â É Ñ İ ß á ã#,25>GIKRZeprtvxz|~€‚„‘“•—™›Ÿ¡£¥°½ÄÒÚßä÷$?Ee…—·¼ÊÓØåèñ%)=K]`v             o              xOyRvar Hatena = Hatena || {};

/* UTF-8 ã§ãªã„ãƒšãƒ¼ã‚¸ã‹ã‚‰èª­ã¿è¾¼ã¾ã‚Œã¦ã‚‚å‹•ãã‚ˆã†ã«ã€
 * ã‚³ãƒ¡ãƒ³ãƒˆã¯è¤‡æ•°è¡Œã‚³ãƒ¡ãƒ³ãƒˆ (é–‰ã˜ã‚‹ "*" ã®å‰ã«ã‚¹ãƒšãƒ¼ã‚¹ã‚’ç½®ã) ã‚’ä½¿ã„ã€
 * æ–‡å­—åˆ—ãƒªãƒ†ãƒ©ãƒ«ä¸­ã® ASCII å¤–ã®æ–‡å­—ã¯ \uXXXX ã¨ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ã™ã‚‹ã€‚
 */

(function (Hatena) {

var B = Hatena.Bookmark = Hatena.Bookmark || {};
if (B.BookmarkButton) return;

if (location.protocol === 'https:') {
    B.apiOrigin = 'https://b.hatena.ne.jp';
} else {
    B.apiOrigin = 'http://cdn.api.b.hatena.ne.jp';
}
B.origin = location.protocol + '//b.hatena.ne.jp';
B.staticOrigin = location.protocol + '//b.st-hatena.com';

var match = new RegExp('^((?:local|b(?!log)\\w+)\\.hatena\\.ne\\.jp(?::3000)?)$').exec(location.host);
var isLocal;
if (match) {
    B.origin = B.apiOrigin = B.staticOrigin = 'http://' + match[1];
    isLocal = true;
}

var U = B.ButtonUtils = {};

var extend = U.extend = function (dest, src) {
    for (var i in src)
        dest[i] = src[i];
    return dest;
};

var E = U.createElement = function (name, props) {
    var element = document.createElement(name);
    for (var p in props)
        element[p] = props[p];
    for (var i = 2; i < arguments.length; i++) {
        var child = arguments[i];
        if (!child.nodeType)
            child = document.createTextNode(child);
        element.appendChild(child);
    }
    return element;
};

var getLocation = U.getLocation = function () {
    var url = location.href;
    /* Safari ã¯ location.href ã§ãƒ‘ã‚¹ä¸­ã® URI ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ã‚’
     * ãƒ‡ã‚³ãƒ¼ãƒ‰ã—ã¦ã—ã¾ã†ã®ã§ã€document.URL ã‚‚èª¿ã¹ã¦ã¿ã‚‹
     */
    if (url.length < document.URL.length)
        url = document.URL;
    return url;
};

var View = U.View = {
    root: null,
    clientLeft: 0,
    clientTop: 0,
    init: function () {
        this.root = ((document.compatMode || '') === 'CSS1Compat')
                    ? document.documentElement : document.body;
        this.clientLeft = this.root.clientLeft || 0;
        this.clientTop = this.root.clientTop || 0;
    },
    getElementRect: function (element) {
        if (!this.root) this.init();
        this.getElementRect = element.getBoundingClientRect
            ? this.getElementRectByRect : this.getElementRectByOffset;
        return this.getElementRect(element);
    },
    getElementRectByRect: function (element) {
        var rect = element.getBoundingClientRect();
        var scroll = this.getScroll();
        return {
            x: rect.left + scroll.x - this.clientLeft,
            y: rect.top + scroll.y - this.clientTop,
            width: rect.width || rect.right - rect.left,
            height: rect.height || rect.bottom - rect.top
        };
    },
    getElementRectByOffset: function (element) {
        var x = 0, y = 0;
        for (var node = element, base; base = node.offsetParent; node = base) {
            x += node.offsetLeft;
            y += node.offsetTop;
        }
        return { x: x, y: y, width: element.offsetWidth, height: element.offsetHeight };
    },
    getWindowSize: function () {
        if (!this.root) this.init();
        return { width: this.root.clientWidth, height: this.root.clientHeight };
    },
    getDocumentSize: function () {
        if (!this.root) this.init();
        return { width: this.root.scrollWidth, height: this.root.scrollHeight };
    },
    getScroll: function () {
        if (!this.root) this.init();
        this.getScroll = (typeof window.pageXOffset === 'number')
                         ? this.getScrollByPage : this.getScrollByRoot;
        return this.getScroll();
    },
    getScrollByPage: function () {
        return { x: window.pageXOffset, y: window.pageYOffset };
    },
    getScrollByRoot: function () {
        return { x: this.root.scrollLeft, y: this.root.scrollTop };
    }
};

var Dispatchable = U.Dispatchable = {
    addEventListener: function (type, listener) {
        var listeners = this.getListeners(type);
        for (var i = 0; i < listeners.length; i++)
            if (listeners[i] === listener)
                return;
        listeners.push(listener);
    },
    removeEventListener: function (type, listener) {
        var listeners = this.getListeners(type);
        for (var i = 0; i < listeners.length; i++) {
            if (listeners[i] === listener) {
                listeners.splice(i, 1);
                return;
            }
        }
    },
    dispatchEvent: function (type, data) {
        var event = new Dispatchable.Event(type, data);
        var listeners = this.getListeners(type);
        for (var i = 0; i < listeners.length; i++)
            listeners[i].call(this, event);
        return !event.defaultPrevented;
    },
    getListeners: function (type) {
        if (!this.hasOwnProperty('_listenersMap'))
            this._listenersMap = {};
        return this._listenersMap[type] || (this._listenersMap[type] = []);
    }
};

Dispatchable.Event = function (type, data) {
    this.type = type;
    this.data = data;
    this.defaultPrevented = false;
};

extend(Dispatchable.Event.prototype, {
    preventDefault: function () {
        this.defaultPrevented = true;
    }
});

var Observer = U.Observer = function (target, type, handler, method) {
    this.target = target;
    this.type = type;
    this.listener = handler;
    if (method) {
        this.listener = (typeof method === 'string')
            ? function () { return handler[method].apply(handler, arguments); }
            : function () { return handler.apply(method, arguments); };
    }
    if (!target.addEventListener && target.attachEvent) {
        var listener = this.listener;
        this.listener = function (event) {
            return listener.call(target, Observer.WrappedEvent.create(event));
        };
        this.start = this.startAttach;
        this.stop = this.stopAttach;
    }
    this.start();
};

extend(Observer.prototype, {
    start: function () {
        this.target.addEventListener(this.type, this.listener, false);
    },
    stop: function () {
        this.target.removeEventListener(this.type, this.listener, false);
    },
    startAttach: function () {
        this.target.attachEvent('on' + this.type, this.listener);
    },
    stopAttach: function () {
        this.target.detachEvent('on' + this.type, this.listener);
    }
});

Observer.WrappedEvent = {
    create: function (event) {
        /* ä¸€éƒ¨ã® IE8 ã§ã®ã‚¯ãƒ©ãƒƒã‚·ãƒ¥å¯¾ç­–
         * cf: http://vividcode.hatenablog.com/entry/ie/ie8_posmes_crash */
        if ( event.type === "message" ) {
            return event;
        }
        var e = document.createEventObject(event);
        e._event = event;
        e.target = event.srcElement;
        var scroll = View.getScroll();
        e.pageX = event.clientX + scroll.x - View.clientLeft;
        e.pageY = event.clientY + scroll.y - View.clientTop;
        e.stopPropagation = this.stopPropagation;
        e.preventDefault = this.preventDefault;
        return e;
    },
    stopPropagation: function () {
        this._event.cancelBubble = true;
    },
    preventDefault: function () {
        this._event.returnValue = false;
    }
};

var JSON = U.JSON = window.JSON || {
    _tokenRE: /[{}\[\],:]|-?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?\b|\"(?:[^\u0000-\u001f\"\\]|\\(?:[\"\\\/bfnrt]|u[0-9A-Fa-f]{4}))*\"|\b(?:true|false|null)\b|\s+/g,
    _escapeChar: function (c) {
        return '\\u' + (0x10000 + c.charCodeAt(0)).toString(16).substring(1);
    },

    parse: function (json) {
        json = String(json);
        if (json.replace(JSON._tokenRE, '') !== '')
            throw new Error('Invalid JSON sytax');
        return eval('(' + json + ')');
    },
    stringify: function (value) {
        switch (typeof value) {
        case 'string':
            return '"' + value.replace(/[\u0000-\u001f\"\\\u2028\u2029]/g, JSON._escapeChar) + '"';
        case 'number':
        case 'boolean':
            return '' + value;
        case 'object':
            if (!value) return 'null';
            var stringify = JSON.stringify;
            var type = Object.prototype.toString.call(value).slice(8, -1);
            switch (type) {
            case 'String': case 'Number': case 'Boolean':
                return stringify(value.valueOf());
            case 'Array':
                var members = [];
                for (var i = 0; i < value.length; i++)
                    members.push(stringify(value[i]));
                return '[' + members.join(',') + ']';
            case 'Object':
                var members = [];
                for (var i in value)
                    if (value.hasOwnProperty(i))
                        members.push(stringify(i) + ':' + stringify(value[i]));
                return '{' + members.join(',') + '}';
            }
            return 'null';
        }
        return 'null';
    }
};

var WindowMessenger = U.WindowMessenger = function (win, url) {
    this.win = win;
    this.origin = url.replace(/^(https?:\/\/[^\/?#]+)[\s\S]*/, '$1');
    this.observer = new Observer(window, 'message', this, 'messageHandler');
};

extend(WindowMessenger, {
    usePostMessage: true,
    keySeed: (Math.random() * 0x10000) << 8,
    createForFrame: function (frame, url) {
        var win = frame.contentWindow;
        /* WebKit ã§ã¯ãƒ•ãƒ¬ãƒ¼ãƒ ã”ã¨ã«åˆ¥ã®åå‰ã‚’ã¤ã‘ã‚‹å¿…è¦ã‚ã‚Š */
        win.name = (++this.keySeed).toString(36) + '|' + getLocation();
        win.location.replace(url);
        return new this(win, url);
    }
});

extend(WindowMessenger.prototype, Dispatchable);
extend(WindowMessenger.prototype, {
    send: function (type, data) {
        if (typeof data === 'undefined') data = null;
        var message = 'HBMessage@' + JSON.stringify({ type: type, data: data });
        this.win.postMessage(message, this.origin);
    },
    messageHandler: function (event) {
        var origin = event.origin || event.uri.replace(/^(https?:\/\/[^\/?#]+)[\s\S]*/, '$1');
        if (origin !== this.origin || event.source != this.win ||
            !/^HBMessage@/.test(event.data)) return;
        var message = JSON.parse(event.data.substring(10));
        this.dispatchEvent(message.type, message.data);
    },
    destroy: function () {
        this.observer.stop();
    }
});

if (!window.postMessage) {

WindowMessenger = U.WindowMessenger = function (win, url, key) {
    this.win = win;
    this.url = url.replace(/#[\s\S]*/, '');
    this.key = key;
    WindowMessenger.instances[this.key] = this;
    if (!WindowMessenger.timerId) WindowMessenger.init();
};

extend(WindowMessenger, {
    usePostMessage: false,
    instances: {},
    interval: 20,
    timerId: 0,
    createForFrame: function (frame, url) {
        var win = frame.contentWindow;
        var key = this.makeFNVHash(url + '|' + Math.random()).toString(36);
        win.name = key + '|' + getLocation();
        win.location.replace(url);
        return new this(win, url, key);
    },
    /* http://en.wikipedia.org/wiki/Fowler%E2%80%93Noll%E2%80%93Vo_hash_function */
    makeFNVHash: function (string) {
        var hash = 2166136261;
        for (var i = 0; i < string.length; i++)
            hash = ((hash * 16777619) ^ string.charCodeAt(i)) >>> 0;
        return hash;
    },
    init: function () {
        this.lastFragment = location.hash;
        var WM = this;
        this.timerId = window.setInterval(function () { WM.observe(); }, this.interval);
    },
    observe: function () {
        var fragment = location.hash;
        if (fragment === this.lastFragment) return;
        var match = fragment.match(/^#HBMessage-(\w+)-([^\/]+)\/(.+)/);
        if (!match) {
            this.lastFragment = fragment;
            return;
        }
        /* "#" ã ã¨ãƒšãƒ¼ã‚¸æœ€ä¸Šéƒ¨ã¸ã®ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãŒç™ºç”Ÿã™ã‚‹ã®ã§ "#_" ã§ */
        this.lastFragment = this.lastFragment || '#_';
        var scroll = View.getScroll();
        location.replace(this.lastFragment);
        window.scrollTo(scroll.x, scroll.y);
        var messenger = this.instances[match[1]];
        if (!messenger) return;
        var type = decodeURIComponent(match[2]);
        var data = JSON.parse(decodeURIComponent(match[3]));
        messenger.dispatchEvent(type, data);
    }
});

extend(WindowMessenger.prototype, Dispatchable);
extend(WindowMessenger.prototype, {
    send: function (type, data) {
        if (typeof data === 'undefined') data = null;
        var url = this.url + '#HBMessage-' + this.key + '-' +
                  encodeURIComponent(type) + '/' +
                  encodeURIComponent(JSON.stringify(data));
        try {
            this.win.location.replace(url);
        } catch (ex) {
            this.win.location.href = url;
        }
    },
    destroy: function () {
        delete WindowMessenger.instances[this.key];
    }
});

} /* WindowMessenger implementation with fragment identifier */

B.BookmarkButton = function (link) {
    this.url = link.getAttribute('data-hatena-bookmark-url') ||
               B.BookmarkButton.extractURL(link.href) ||
               B.BookmarkButton.getCurrentURL();
    this.link = link;
    this.mode = B.BookmarkButton.isTouchBrowser
        ? 'goto-touch' : this.link.getAttribute('data-hatena-bookmark-mode');
    /* IE 7 ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®šã«ã‚ˆã‚Šãƒ•ãƒ¬ãƒ¼ãƒ å†…ã§ã®ãƒ‘ãƒãƒ«ã®å‹•ä½œã«
     * æ”¯éšœã‚’ããŸã™ã®ã§ã€ãƒ•ãƒ¬ãƒ¼ãƒ å†…ã§ã¯ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã‚’é–‹ãã“ã¨ã‚’å¼·åˆ¶ã™ã‚‹ã€‚
     */
    if (!WindowMessenger.usePostMessage &&
        /\bMSIE 7\b/.test(navigator.userAgent) &&
        window.self != window.top) {
        this.mode = 'popup';
    }
    this.setup();
};

extend(B.BookmarkButton, {
    interval: 428, /* Welcome to Shibuya.js! */
    timerId: 0,
    setup: function () {
        if (this.timerId) return;
        var Button = this;
        this.timerId = window.setInterval(function () { Button.tryCreate(); }, this.interval);
        this.tryCreate();
    },
    lastLinkCount: 0,
    tryCreate: function () {
        var links = document.getElementsByTagName('a');
        var linkCount = links.length;
        if (linkCount === this.lastLinkCount) return;
        var buttonLinks = [];
        var classRE = /(?:^|\s)hatena-bookmark-button(?:\s|$)/;
        for (var i = 0; i < linkCount; i++)
            if (classRE.test(links[i].className) &&
                !links[i].getAttribute('data-hatena-bookmark-initialized'))
                buttonLinks.push(links[i]);
        for (var i = 0; i < buttonLinks.length; i++)
            new B.BookmarkButton(buttonLinks[i]);
        this.lastLinkCount = links.length;
    },
    extractURL: function (entryURL) {
        if (!entryURL) return null;
        var match = entryURL.match(/^http:\/\/b\.hatena\.ne\.jp\/entry\/(?:add\/)?(.+)/);
        if (!match) return null;
        var url = match[1];
        var parts = url.match(/^(?:https?(?:(:)|(%3A))|(s\/))?/);
        if (parts[2]) {
            try {
                return decodeURIComponent(url);
            } catch (ex) {
                return unescape(url);
            }
        }
        if (!parts[1])
            url = parts[3] ? 'https://' + url.substring(2) : 'http://' + url;
        return url.replace(/%23/g, '#');
    },
    getCurrentURL: function () {
        var url = getLocation();
        var canonicalURL = this.getCanonicalURL();
        if (canonicalURL) {
            var index = url.indexOf('#');
            if (index >= 0 && canonicalURL.indexOf('#') < 0)
                canonicalURL += url.substring(index);
            url = canonicalURL;
        }
        return url;
    },
    getCanonicalURL: function () {
        var links = document.getElementsByTagName('link');
        for (var i = 0; i < links.length; i++) {
            if (links[i].rel.toLowerCase() !== 'canonical' || !links[i].href) continue;
            /* IE ã§ href ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒçµ¶å¯¾ URL ã«è§£æ±ºã•ã‚Œãªã„ã“ã¨ãŒã‚ã‚‹ */
            var a = document.createElement('a');
            a.href = links[i].href;
            return a.cloneNode(false).href;
        }
        return null;
    },
    isTouchBrowser: /\b(?:iPhone|iPod);| Android /.test(navigator.userAgent),
    forcedLayout: ''
});

extend(B.BookmarkButton.prototype, {
    setup: function () {
        var layout = B.BookmarkButton.forcedLayout || this.link.getAttribute('data-hatena-bookmark-layout');
        if (layout === 'simple') {
            this.link.setAttribute('data-hatena-bookmark-initialized', '1');
            this.observer = new Observer(this.link, 'click', this, 'clickHandler');
            this.button = this.link;
            /* ãƒªãƒ³ã‚¯ã®å†…å®¹ãŒç”»åƒã²ã¨ã¤ã®ã¿ãªã‚‰ãã®ç”»åƒã‚’åŸºæº–ã«ãƒ‘ãƒãƒ«ã‚’è¡¨ç¤º */
            var images = this.link.getElementsByTagName('img');
            this.anchor = (images.length === 1) ? images[0] : this.link;
            if (!isLocal && !/^https?:\/\/b\.hatena\.ne\.jp\/(?!articles(?![\w-]))/.test(getLocation())) {
                this.image = new Image();
                this.image.src = B.apiOrigin + '/entry/button/?url=' + encodeURIComponent(this.url) + '&layout=simple&format=image';
            }
        } else {
            var config = {
                vertical: { height: 50 },
                'simple-balloon'  : { width: 70,  height: 20 },
                'standard-balloon': { width: 130, height: 20 },
                'standard-noballoon': { width: 80, height: 20 },
                'vertical-balloon': { width: 80,  height: 60 }
            };
            var width = 50, height = 20;
            if (config[layout]) {
                width  = config[layout]['width']  || width;
                height = config[layout]['height'] || height;
            }
            this.frame = E('iframe', { className: 'hatena-bookmark-button-frame', title: this.link.title, frameBorder: 0, scrolling: 'no', allowTransparency: true, width: width, height: height, src:'javascript:false' });
            this.frame.style.cssText = 'width: ' + width + 'px; height: ' + height + 'px;';
            this.link.parentNode.replaceChild(this.frame, this.link);

            var buttonURL = B.apiOrigin + '/entry/button/?url=' + encodeURIComponent(this.url);
            if (layout && layout !== 'standard')
                buttonURL += '&layout=' + encodeURIComponent(layout);
            var lang = this.link.getAttribute('data-hatena-bookmark-lang');
            if (lang)
                buttonURL += '&lang=' + encodeURIComponent(lang);
            if (this.mode === 'popup')
                buttonURL += '&mode=' + encodeURIComponent(this.mode);
            this.messenger = WindowMessenger.createForFrame(this.frame, buttonURL);
            this.observer = new Observer(this.messenger, 'click', this, 'clickHandler');
            this._resizeObserver = new Observer(this.messenger, "resize", this, "resizeMessageHandler");
            this.button = this.frame;
            this.anchor = this.frame;
        }
    },
    getTitle: function () {
        var title = this.link.getAttribute('data-hatena-bookmark-title');
        if (!title) {
            title = this.link.getAttribute('data-hatena-bookmark-escaped-title');
            if (title)
                try { title = decodeURIComponent(title); } catch (ex) {}
        }
        if (!title && this.url.replace(/#.*/, '') === getLocation().replace(/#.*/, ''))
            title = document.title;
        return title;
    },
    togglePanel: function () {
        if (!this.panel)
            this.panel = new B.BookmarkPanel(this.url, this.getTitle());
        if (this.panel.isShown) {
            this.panel.hide();
        } else {
            var position = this.link.getAttribute('data-hatena-bookmark-position');
            var hideBg = this.link.getAttribute('data-hatena-bookmark-hide-bg');
            var hideBackground = !hideBg || hideBg.toLowerCase() !== 'false';
            this.panel.show(this.anchor, position, hideBackground);
        }
    },
    gotoTouchEntry: function () {
        var entryURL = B.origin + '/entry.touch/';
        var urlMatch = this.url.match(/^http(s)?:\/\/([\s\S]*)$/);
        if (urlMatch)
            entryURL += (urlMatch[1] ? 's/' : '') + urlMatch[2];
        else
            entryURL += this.url;
        location.href = entryURL.replace(/#/g, '%23');
    },
    gotoTouchBookmarklet: function () {
        var bookmarkletURL = B.origin + '/bookmarklet.touch?url=' + encodeURIComponent(this.url);
        var title = this.getTitle();
        if (title)
            bookmarkletURL += '&btitle=' + encodeURIComponent(title);
        location.href = bookmarkletURL;
    },
    clickHandler: function (event) {
        if ((event.which || event.button || 0) > 1) return;
        if (event.stopPropagation) event.stopPropagation();
        if (event.preventDefault) event.preventDefault();
        switch (this.mode) {
        case 'popup':
            B.BookmarkPanel.openPopup(this.url, this.getTitle());
            break;
        case 'goto-touch':
            this.gotoTouchEntry();
            break;
        default:
            this.togglePanel();
        }
    },
    resizeMessageHandler: function (evt) {
        var width = evt.data.width + "";
        var height = evt.data.height + "";
        if (/^\d+$/.test(width)) this.frame.style.width = width + "px";
        if (/^\d+$/.test(height)) this.frame.style.height = height + "px";
    },
    destroy: function () {
        if (this.observer) this.observer.stop();
        if (this._resizeObserver) this._resizeObserver.stop();
        if (this.messenger) this.messenger.destroy();
        if (this.panel) this.panel.destroy();
        if (this.button && this.button.parentNode)
            this.button.parentNode.removeChild(this.button);
    }
});

B.BookmarkPanel = function (url, title) {
    this.url = url;
    this.title = title || '';
    this.isShown = false;
    this.width = 365;
    this.height = 160;
    this.fixedTo = 'top';
    this.hiddenFlashes = [];
    this.clickObserver = new Observer(document, 'click', this, 'clickHandler');
    this.clickObserver.stop();
    this.observers = [this.clickObserver];
    this.setup();
};

extend(B.BookmarkPanel, {
    currentPanel: null,
    makePanelURL: function (url, title) {
        var panelURL = B.origin + '/entry/panel/?url=' + encodeURIComponent(url);
        if (title)
            panelURL += '&btitle=' + encodeURIComponent(title);
        return panelURL;
    },
    openPopup: function (url, title) {
        var panelURL = this.makePanelURL(url, title);
        var win = window.open(panelURL, 'hatena_bookmark_panel_popup', 'width=365,height=220,menubar=no,toolbar=no,resizable=yes');
    },
    hasCommonStyle: false,
    setupCommonStyle: function () {
        if (this.hasCommonStyle) return;
        this.hasCommonStyle = true;
        var resetCSSDeclarations =
            'margin: 0; padding: 0; border: none; ' +
            'position: static; float: none; width: auto; height: auto; ' +
            'line-height: 1; vertical-align: baseline; ' +
            'color: #222; background: none; ' +
            'font-style: normal; font-weight:normal; font-size: medium; ' +
            'text-indent: 0; text-align: left; text-decoration: none; ' +
            'letter-spacing: normal; word-spacing: normal; white-space: normal;';
        var resetCSSText =
            '.hatena-bookmark-bookmark-panel, ' +
            '.hatena-bookmark-bookmark-panel * ' +
            '{' + resetCSSDeclarations + '}';
        try {
            var style = document.createElement('style');
            style.type = 'text/css';
            style.appendChild(document.createTextNode(resetCSSText));
            document.getElementsByTagName('head')[0].appendChild(style);
        } catch (ex) {
            document.createStyleSheet().cssText = resetCSSText;
        }
    },
    needsRebase: null,
    getBasePosition: function () {
        if (this.needsRebase === null) {
            var style = window.getComputedStyle
                ? getComputedStyle(document.body, null)
                : document.body.currentStyle;
            this.needsRebase = !!style && style.position !== 'static';
        }
        return this.needsRebase ? View.getElementRect(document.body) : { x: 0, y: 0 };
    }
});

extend(B.BookmarkPanel.prototype, {
    setup: function () {
        /* var frameTitle = (this.title ? 'ã€' + this.title + 'ã€' : 'ã“ã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼') + 'ã‚’ã¯ã¦ãªãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ã«è¿½åŠ '; */
        var frameTitle = (this.title ? '\u300E' + this.title + '\u300F' : '\u3053\u306E\u30A8\u30F3\u30C8\u30EA\u30FC') + '\u3092\u306F\u3066\u306A\u30D6\u30C3\u30AF\u30DE\u30FC\u30AF\u306B\u8FFD\u52A0';
        this.panel = E('div', { className: 'hatena-bookmark-bookmark-panel' },
            this.loading = E('div', null, E('span', null, 'Now Loading...')),
            this.content = E('div', null,
                this.frame = E('iframe', { title: frameTitle, scrolling: 'no', frameBorder: 0, allowTransparency: true, src: 'javascript:false' })
            )
        );
        this.setupStyle();
        document.body.appendChild(this.panel);
        var panelURL = B.BookmarkPanel.makePanelURL(this.url, this.title);
        this.messenger = WindowMessenger.createForFrame(this.frame, panelURL);
        this.observers.push(
            /* frame ã‹ã‚‰ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å—ä¿¡å¤±æ•—æ™‚ã®ä¿é™º */
            new Observer(this.frame, 'load', this, 'showContent'),
            new Observer(this.messenger, 'ready', this, 'showContent'),
            new Observer(this.messenger, 'resize', this, 'resizeMessageHandler')
        );
    },
    setupStyle: function () {
        B.BookmarkPanel.setupCommonStyle();
        var size = 'width: ' + this.width + 'px; height: ' + this.height + 'px;';
        this.panel.style.cssText = 'position: absolute; z-index: 10002; display: none; ' + size;
        this.loading.style.cssText = 'background-color: #fff; border: 3px solid #2c6ebd; -moz-border-radius: 5px; -webkit-border-radius: 5px; border-radius: 5px; text-align: center; width: ' + (this.width - 6) + 'px; height: ' + (this.height - 6) + 'px;';
        this.loading.firstChild.style.cssText = 'background: url("' + B.staticOrigin + '/images/loading.gif") left center no-repeat; padding-left: 23px; font-size: 0.85em; position: relative; top: ' + (this.height / 2 - 10) + 'px;';
        this.content.style.cssText = 'display: none;';
        this.frame.style.cssText = 'display: block; ' + size;
    },
    show: function (anchor, position, hideBackground) {
        if (this.isShown) return;
        if (B.BookmarkPanel.currentPanel)
            B.BookmarkPanel.currentPanel.hide();
        if (anchor)
            this.anchorTo(anchor, position);
        this.panel.style.display = '';
        this.isShown = true;
        this.clickObserver.start();
        if (hideBackground)
            this.hideFlashes();
        B.BookmarkPanel.currentPanel = this;
        if (!this.loading)
            this.messenger.send('notifysize');
    },
    hideFlashes: function () {
        var flashes = [];
        var embeds = document.getElementsByTagName('embed');
        for (var i = 0, embed; embed = embeds[i]; i++)
            if (embed.type === 'application/x-shockwave-flash')
                flashes.push(embed);
        var objects = document.getElementsByTagName('object');
        for (var i = 0, object; object = objects[i]; i++)
            if (object.type === 'application/x-shockwave-flash' ||
                (object.classid || '').toLowerCase() === 'clsid:d27cdb6e-ae6d-11cf-96b8-444553540000')
                flashes.push(object);
        if (!flashes.length) return;
        var panelRect = View.getElementRect(this.panel);
        var left = panelRect.x;
        var top = panelRect.y;
        var right = panelRect.x + panelRect.width;
        var bottom = panelRect.y + Math.max(panelRect.height, 300);
        for (var i = 0, flash; flash = flashes[i]; i++) {
            var rect = View.getElementRect(flash);
            if (rect.x + rect.width < left || right < rect.x ||
                rect.y + rect.height < top || bottom < rect.y)
                continue;
            flash.style.visibility = 'hidden';
            this.hiddenFlashes.push(flash);
        }
    },
    showContent: function () {
        if (!this.loading) return;
        this.panel.removeChild(this.loading);
        this.loading = null;
        this.content.style.display = '';
    },
    hide: function () {
        if (!this.isShown) return;
        this.panel.style.display = 'none';
        this.isShown = false;
        this.clickObserver.stop();
        for (var i = 0, flash; flash = this.hiddenFlashes[i]; i++)
            flash.style.visibility = '';
        this.hiddenFlashes = [];
        B.BookmarkPanel.currentPanel = null;
    },
    resize: function (width, height) {
        if (width > 0) {
            this.panel.style.width = width + 'px';
            this.frame.style.width = width + 'px';
            this.width = width;
        }
        if (height > 0) {
            if (this.fixedTo === 'bottom')
                this.panel.style.top = parseFloat(this.panel.style.top) + this.height - height + 'px';
            this.panel.style.height = height + 'px';
            this.frame.style.height = height + 'px';
            this.height = height;
        }
    },
    anchorTo: function (anchor, position) {
        var rect = View.getElementRect(anchor);
        var isLeft = position && position.indexOf('left') >= 0;
        var isTop = position && position.indexOf('top') >= 0;
        if (!position) {
            var size = View.getWindowSize();
            var scroll = View.getScroll();
            isLeft = (scroll.x + size.width) - rect.x < this.width &&
                     (rect.x + rect.width) - scroll.x >= this.width;
            var h = Math.max(this.height, 300);
            isTop = (scroll.y + size.height) - (rect.y + rect.height) < h &&
                    rect.y - scroll.y >= h;
        }
        var left = isLeft ? rect.x + rect.width - this.width : rect.x;
        var top = isTop ? rect.y - this.height - 2 : rect.y + rect.height + 2;
        var base = B.BookmarkPanel.getBasePosition();
        this.panel.style.left = (Math.max(left, 2) - base.x) + 'px';
        this.panel.style.top = (Math.max(top, 2) - base.y) + 'px';
        this.fixedTo = isTop ? 'bottom' : 'top';
    },
    clickHandler: function (event) {
        for (var node = event.target; node; node = node.parentNode)
            if (node === this.panel)
                return;
        this.hide();
    },
    resizeMessageHandler: function (event) {
        this.resize(event.data.width || -1, event.data.height || -1);
    },
    destroy: function () {
        this.hide();
        for (var i = 0, observer; observer = this.observers[i]; i++)
            observer.stop();
        this.messenger.destroy();
        if (this.panel.parentNode)
            this.panel.parentNode.removeChild(this.panel);
    }
});

})(Hatena);

Hatena.Bookmark.BookmarkButton.setup();
_application/x-javascriptÕ	'<=>?_'https://www.google.com/recaptcha/api.jsO˜bplist00ÔopX$versionX$objectsY$archiverT$top † ¯##)*0123OPQRSTUVWXYZ[\]^_`abcdehijU$nullİ	
 !"R$6S$10R$2R$7R$3S$11R$8V$classR$4R$9R$0R$5R$1€	€€€ €"€€!€Ó$%&'(WNS.base[NS.relative€ €€_'https://www.google.com/recaptcha/api.jsÒ+,-.Z$classnameX$classesUNSURL¢-/XNSObject#AºôÒˆÎY\ ÈÓ456BNWNS.keysZNS.objects«789:;<=>?@A€	€
€€€€€€€€€«CDEFGHIJKLM€€€€€€€€€€€€_x-content-type-options\Content-TypeVServer_alternate-protocolTDate_x-frame-options_x-xss-protection_Content-Encoding^Content-LengthWExpires]Cache-ControlWnosniff_text/javascript; charset=UTF-8SGSE\443:quic,p=1_Sat, 02 May 2015 09:38:16 GMTZSAMEORIGIN]1; mode=blockTgzipS325_Sat, 02 May 2015 09:38:16 GMT_private, max-age=0Ò+,fg\NSDictionary¢f/_text/javascriptÒ+,kl_NSHTTPURLResponse£mn/_NSHTTPURLResponse]NSURLResponse_NSKeyedArchiverÑqr_WebResourceResponse€    # - 2 7 ] c ~  … ˆ ‹  ’ • œ Ÿ ¢ ¥ ¨ « ­ ¯ ± ³ µ ¶ ¸ º ¼ ¾ À Â Ä Ë Ó ß á ã å(.1:CEGNVamoqsuwy{}ƒ‘“•—™›Ÿ¡£¥§ÀÍÔéî &5=KStx…¥°¾ÃÇçü&+?CWewz             s              ’O/* PLEASE DO NOT COPY AND PASTE THIS CODE. */(function() {if (!window['___grecaptcha_cfg']) { window['___grecaptcha_cfg'] = {}; };if (!window['___grecaptcha_cfg']['render']) { window['___grecaptcha_cfg']['render'] = 'onload'; };window['__google_recaptcha_client'] = true;var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;po.src = 'https://www.gstatic.com/recaptcha/api2/r20150429132001/recaptcha__ja.js';var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);})();_text/javascriptÕ	'ABCD_Dhttp://blog.hatena.ne.jp/js?version=f95a219773244f14c2c322979e39f67bO„bplist00ÔX$versionX$objectsY$archiverT$top † ¯3#)*0123_`abcdefghijklmnopqrstuvwxyz{|}~€‚ƒ„…ˆ‰ŠU$nullİ	
 !"R$6S$10R$2R$7R$3S$11R$8V$classR$4R$9R$0R$5R$1€	€€€0€2€€1€Ó$%&'(WNS.base[NS.relative€ €€_Dhttp://blog.hatena.ne.jp/js?version=f95a219773244f14c2c322979e39f67bÒ+,-.Z$classnameX$classesUNSURL¢-/XNSObject#AºôÒ:œ+ ÈÓ456J^WNS.keysZNS.objects¯789:;<=>?@ABCDEFGHI€	€
€€€€€€€€€€€€€€€€€¯KLMNOPQRSTUVWXYZ[\]€€€€€ €!€"€#€$€%€&€'€(€)€*€+€,€-€.€/\Content-TypeSP3P]Last-ModifiedYX-Runtime_Content-EncodingVServer_X-XSS-ProtectionWExpires_Transfer-EncodingZSet-Cookie]Cache-Control\X-Page-CacheTDateZX-DispatchZX-RevisionZConnection_X-Content-Type-Options_X-Frame-OptionsTVary_text/javascript; charset=utf-8_CP="OTI CUR OUR BUS STA"_Thu, 01 Jan 1970 00:00:00 GMTX0.017250TgzipUnginxQ1_Fri, 02 May 2025 09:36:58 GMTXIdentity_3sk=6ec6b503f3d622e2957139fc054488954c0f66d9; path=/_-public, max-age=315360000, s-maxage=315360000Shit_Sat, 02 May 2015 09:36:58 GMT_Hatena::Epic::Admin::Static#js_ f95a219773244f14c2c322979e39f67bZkeep-aliveWnosniffTDENY_(Accept-Encoding, Accept-Language, CookieÒ+,†‡\NSDictionary¢†/ÿÿÿÿÿÿÿÿ_text/javascriptÒ+,‹Œ_NSHTTPURLResponse£/_NSHTTPURLResponse]NSURLResponse_NSKeyedArchiverÑ‘’_WebResourceResponse€    # - 2 7 m s  ‘ • ˜ ›  ¢ ¥ ¬ ¯ ² µ ¸ » ½ ¿ Á Ã Å Æ È Ê Ì Î Ğ Ò Ô Û ã ï ñ ó õ<ALU[^gprt{ƒ¤¦¨ª¬®°²´¶¸º¼¾ÀÂÄÆÈÊàâäæèêìîğòôöøúüş '1DK^fz…“ ¥°»Æßñö2R[`fhˆ‘Ç÷û<_jrw¢§´·ÀÒ×ëï#&<             “              >O ¸ü// XXX: twitterã®widget.jsãŒwindow.defineã‚’å®šç¾©ã—ã¦ã„ã‚‹ï¼
//      ãã‚Œã«ã‚ˆã£ã¦ï¼Œjquery.cookieãŒdefineã‚ã‚‹ã¨ãã¯AMDå½¢å¼ã®exportã™ã‚‹ã®ã§ï¼Œjquery.cookieãŒå®šç¾©ã•ã‚Œãªããªã‚‹ï¼
//      ãã®å¯¾ç­–ã¨ã—ã¦ï¼Œå…ˆã«window.defineæ¶ˆã—ã¦ãŠãï¼
window.define = undefined;

/*! jQuery v1.9.1 | (c) 2005, 2012 jQuery Foundation, Inc. | jquery.org/license
//@ sourceMappingURL=jquery.min.map
*/(function(e,t){var n,r,i=typeof t,o=e.document,a=e.location,s=e.jQuery,u=e.$,l={},c=[],p="1.9.1",f=c.concat,d=c.push,h=c.slice,g=c.indexOf,m=l.toString,y=l.hasOwnProperty,v=p.trim,b=function(e,t){return new b.fn.init(e,t,r)},x=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,w=/\S+/g,T=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,N=/^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/,C=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,k=/^[\],:{}\s]*$/,E=/(?:^|:|,)(?:\s*\[)+/g,S=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,A=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,j=/^-ms-/,D=/-([\da-z])/gi,L=function(e,t){return t.toUpperCase()},H=function(e){(o.addEventListener||"load"===e.type||"complete"===o.readyState)&&(q(),b.ready())},q=function(){o.addEventListener?(o.removeEventListener("DOMContentLoaded",H,!1),e.removeEventListener("load",H,!1)):(o.detachEvent("onreadystatechange",H),e.detachEvent("onload",H))};b.fn=b.prototype={jquery:p,constructor:b,init:function(e,n,r){var i,a;if(!e)return this;if("string"==typeof e){if(i="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:N.exec(e),!i||!i[1]&&n)return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e);if(i[1]){if(n=n instanceof b?n[0]:n,b.merge(this,b.parseHTML(i[1],n&&n.nodeType?n.ownerDocument||n:o,!0)),C.test(i[1])&&b.isPlainObject(n))for(i in n)b.isFunction(this[i])?this[i](n[i]):this.attr(i,n[i]);return this}if(a=o.getElementById(i[2]),a&&a.parentNode){if(a.id!==i[2])return r.find(e);this.length=1,this[0]=a}return this.context=o,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):b.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),b.makeArray(e,this))},selector:"",length:0,size:function(){return this.length},toArray:function(){return h.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e){var t=b.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return b.each(this,e,t)},ready:function(e){return b.ready.promise().done(e),this},slice:function(){return this.pushStack(h.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},map:function(e){return this.pushStack(b.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:d,sort:[].sort,splice:[].splice},b.fn.init.prototype=b.fn,b.extend=b.fn.extend=function(){var e,n,r,i,o,a,s=arguments[0]||{},u=1,l=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[1]||{},u=2),"object"==typeof s||b.isFunction(s)||(s={}),l===u&&(s=this,--u);l>u;u++)if(null!=(o=arguments[u]))for(i in o)e=s[i],r=o[i],s!==r&&(c&&r&&(b.isPlainObject(r)||(n=b.isArray(r)))?(n?(n=!1,a=e&&b.isArray(e)?e:[]):a=e&&b.isPlainObject(e)?e:{},s[i]=b.extend(c,a,r)):r!==t&&(s[i]=r));return s},b.extend({noConflict:function(t){return e.$===b&&(e.$=u),t&&e.jQuery===b&&(e.jQuery=s),b},isReady:!1,readyWait:1,holdReady:function(e){e?b.readyWait++:b.ready(!0)},ready:function(e){if(e===!0?!--b.readyWait:!b.isReady){if(!o.body)return setTimeout(b.ready);b.isReady=!0,e!==!0&&--b.readyWait>0||(n.resolveWith(o,[b]),b.fn.trigger&&b(o).trigger("ready").off("ready"))}},isFunction:function(e){return"function"===b.type(e)},isArray:Array.isArray||function(e){return"array"===b.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?l[m.call(e)]||"object":typeof e},isPlainObject:function(e){if(!e||"object"!==b.type(e)||e.nodeType||b.isWindow(e))return!1;try{if(e.constructor&&!y.call(e,"constructor")&&!y.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var r;for(r in e);return r===t||y.call(e,r)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw Error(e)},parseHTML:function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||o;var r=C.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=b.buildFragment([e],t,i),i&&b(i).remove(),b.merge([],r.childNodes))},parseJSON:function(n){return e.JSON&&e.JSON.parse?e.JSON.parse(n):null===n?n:"string"==typeof n&&(n=b.trim(n),n&&k.test(n.replace(S,"@").replace(A,"]").replace(E,"")))?Function("return "+n)():(b.error("Invalid JSON: "+n),t)},parseXML:function(n){var r,i;if(!n||"string"!=typeof n)return null;try{e.DOMParser?(i=new DOMParser,r=i.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(o){r=t}return r&&r.documentElement&&!r.getElementsByTagName("parsererror").length||b.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&b.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(j,"ms-").replace(D,L)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,o=e.length,a=M(e);if(n){if(a){for(;o>i;i++)if(r=t.apply(e[i],n),r===!1)break}else for(i in e)if(r=t.apply(e[i],n),r===!1)break}else if(a){for(;o>i;i++)if(r=t.call(e[i],i,e[i]),r===!1)break}else for(i in e)if(r=t.call(e[i],i,e[i]),r===!1)break;return e},trim:v&&!v.call("\ufeff\u00a0")?function(e){return null==e?"":v.call(e)}:function(e){return null==e?"":(e+"").replace(T,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(M(Object(e))?b.merge(n,"string"==typeof e?[e]:e):d.call(n,e)),n},inArray:function(e,t,n){var r;if(t){if(g)return g.call(t,e,n);for(r=t.length,n=n?0>n?Math.max(0,r+n):n:0;r>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,i=e.length,o=0;if("number"==typeof r)for(;r>o;o++)e[i++]=n[o];else while(n[o]!==t)e[i++]=n[o++];return e.length=i,e},grep:function(e,t,n){var r,i=[],o=0,a=e.length;for(n=!!n;a>o;o++)r=!!t(e[o],o),n!==r&&i.push(e[o]);return i},map:function(e,t,n){var r,i=0,o=e.length,a=M(e),s=[];if(a)for(;o>i;i++)r=t(e[i],i,n),null!=r&&(s[s.length]=r);else for(i in e)r=t(e[i],i,n),null!=r&&(s[s.length]=r);return f.apply([],s)},guid:1,proxy:function(e,n){var r,i,o;return"string"==typeof n&&(o=e[n],n=e,e=o),b.isFunction(e)?(r=h.call(arguments,2),i=function(){return e.apply(n||this,r.concat(h.call(arguments)))},i.guid=e.guid=e.guid||b.guid++,i):t},access:function(e,n,r,i,o,a,s){var u=0,l=e.length,c=null==r;if("object"===b.type(r)){o=!0;for(u in r)b.access(e,n,u,r[u],!0,a,s)}else if(i!==t&&(o=!0,b.isFunction(i)||(s=!0),c&&(s?(n.call(e,i),n=null):(c=n,n=function(e,t,n){return c.call(b(e),n)})),n))for(;l>u;u++)n(e[u],r,s?i:i.call(e[u],u,n(e[u],r)));return o?e:c?n.call(e):l?n(e[0],r):a},now:function(){return(new Date).getTime()}}),b.ready.promise=function(t){if(!n)if(n=b.Deferred(),"complete"===o.readyState)setTimeout(b.ready);else if(o.addEventListener)o.addEventListener("DOMContentLoaded",H,!1),e.addEventListener("load",H,!1);else{o.attachEvent("onreadystatechange",H),e.attachEvent("onload",H);var r=!1;try{r=null==e.frameElement&&o.documentElement}catch(i){}r&&r.doScroll&&function a(){if(!b.isReady){try{r.doScroll("left")}catch(e){return setTimeout(a,50)}q(),b.ready()}}()}return n.promise(t)},b.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){l["[object "+t+"]"]=t.toLowerCase()});function M(e){var t=e.length,n=b.type(e);return b.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||"function"!==n&&(0===t||"number"==typeof t&&t>0&&t-1 in e)}r=b(o);var _={};function F(e){var t=_[e]={};return b.each(e.match(w)||[],function(e,n){t[n]=!0}),t}b.Callbacks=function(e){e="string"==typeof e?_[e]||F(e):b.extend({},e);var n,r,i,o,a,s,u=[],l=!e.once&&[],c=function(t){for(r=e.memory&&t,i=!0,a=s||0,s=0,o=u.length,n=!0;u&&o>a;a++)if(u[a].apply(t[0],t[1])===!1&&e.stopOnFalse){r=!1;break}n=!1,u&&(l?l.length&&c(l.shift()):r?u=[]:p.disable())},p={add:function(){if(u){var t=u.length;(function i(t){b.each(t,function(t,n){var r=b.type(n);"function"===r?e.unique&&p.has(n)||u.push(n):n&&n.length&&"string"!==r&&i(n)})})(arguments),n?o=u.length:r&&(s=t,c(r))}return this},remove:function(){return u&&b.each(arguments,function(e,t){var r;while((r=b.inArray(t,u,r))>-1)u.splice(r,1),n&&(o>=r&&o--,a>=r&&a--)}),this},has:function(e){return e?b.inArray(e,u)>-1:!(!u||!u.length)},empty:function(){return u=[],this},disable:function(){return u=l=r=t,this},disabled:function(){return!u},lock:function(){return l=t,r||p.disable(),this},locked:function(){return!l},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],!u||i&&!l||(n?l.push(t):c(t)),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!i}};return p},b.extend({Deferred:function(e){var t=[["resolve","done",b.Callbacks("once memory"),"resolved"],["reject","fail",b.Callbacks("once memory"),"rejected"],["notify","progress",b.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return b.Deferred(function(n){b.each(t,function(t,o){var a=o[0],s=b.isFunction(e[t])&&e[t];i[o[1]](function(){var e=s&&s.apply(this,arguments);e&&b.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[a+"With"](this===r?n.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?b.extend(e,r):r}},i={};return r.pipe=r.then,b.each(t,function(e,o){var a=o[2],s=o[3];r[o[1]]=a.add,s&&a.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this},i[o[0]+"With"]=a.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=h.call(arguments),r=n.length,i=1!==r||e&&b.isFunction(e.promise)?r:0,o=1===i?e:b.Deferred(),a=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?h.call(arguments):r,n===s?o.notifyWith(t,n):--i||o.resolveWith(t,n)}},s,u,l;if(r>1)for(s=Array(r),u=Array(r),l=Array(r);r>t;t++)n[t]&&b.isFunction(n[t].promise)?n[t].promise().done(a(t,l,n)).fail(o.reject).progress(a(t,u,s)):--i;return i||o.resolveWith(l,n),o.promise()}}),b.support=function(){var t,n,r,a,s,u,l,c,p,f,d=o.createElement("div");if(d.setAttribute("className","t"),d.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=d.getElementsByTagName("*"),r=d.getElementsByTagName("a")[0],!n||!r||!n.length)return{};s=o.createElement("select"),l=s.appendChild(o.createElement("option")),a=d.getElementsByTagName("input")[0],r.style.cssText="top:1px;float:left;opacity:.5",t={getSetAttribute:"t"!==d.className,leadingWhitespace:3===d.firstChild.nodeType,tbody:!d.getElementsByTagName("tbody").length,htmlSerialize:!!d.getElementsByTagName("link").length,style:/top/.test(r.getAttribute("style")),hrefNormalized:"/a"===r.getAttribute("href"),opacity:/^0.5/.test(r.style.opacity),cssFloat:!!r.style.cssFloat,checkOn:!!a.value,optSelected:l.selected,enctype:!!o.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==o.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===o.compatMode,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},a.checked=!0,t.noCloneChecked=a.cloneNode(!0).checked,s.disabled=!0,t.optDisabled=!l.disabled;try{delete d.test}catch(h){t.deleteExpando=!1}a=o.createElement("input"),a.setAttribute("value",""),t.input=""===a.getAttribute("value"),a.value="t",a.setAttribute("type","radio"),t.radioValue="t"===a.value,a.setAttribute("checked","t"),a.setAttribute("name","t"),u=o.createDocumentFragment(),u.appendChild(a),t.appendChecked=a.checked,t.checkClone=u.cloneNode(!0).cloneNode(!0).lastChild.checked,d.attachEvent&&(d.attachEvent("onclick",function(){t.noCloneEvent=!1}),d.cloneNode(!0).click());for(f in{submit:!0,change:!0,focusin:!0})d.setAttribute(c="on"+f,"t"),t[f+"Bubbles"]=c in e||d.attributes[c].expando===!1;return d.style.backgroundClip="content-box",d.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle="content-box"===d.style.backgroundClip,b(function(){var n,r,a,s="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",u=o.getElementsByTagName("body")[0];u&&(n=o.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",u.appendChild(n).appendChild(d),d.innerHTML="<table><tr><td></td><td>t</td></tr></table>",a=d.getElementsByTagName("td"),a[0].style.cssText="padding:0;margin:0;border:0;display:none",p=0===a[0].offsetHeight,a[0].style.display="",a[1].style.display="none",t.reliableHiddenOffsets=p&&0===a[0].offsetHeight,d.innerHTML="",d.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",t.boxSizing=4===d.offsetWidth,t.doesNotIncludeMarginInBodyOffset=1!==u.offsetTop,e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(d,null)||{}).top,t.boxSizingReliable="4px"===(e.getComputedStyle(d,null)||{width:"4px"}).width,r=d.appendChild(o.createElement("div")),r.style.cssText=d.style.cssText=s,r.style.marginRight=r.style.width="0",d.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(r,null)||{}).marginRight)),typeof d.style.zoom!==i&&(d.innerHTML="",d.style.cssText=s+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=3===d.offsetWidth,d.style.display="block",d.innerHTML="<div></div>",d.firstChild.style.width="5px",t.shrinkWrapBlocks=3!==d.offsetWidth,t.inlineBlockNeedsLayout&&(u.style.zoom=1)),u.removeChild(n),n=d=a=r=null)}),n=s=u=l=r=a=null,t}();var O=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,B=/([A-Z])/g;function P(e,n,r,i){if(b.acceptData(e)){var o,a,s=b.expando,u="string"==typeof n,l=e.nodeType,p=l?b.cache:e,f=l?e[s]:e[s]&&s;if(f&&p[f]&&(i||p[f].data)||!u||r!==t)return f||(l?e[s]=f=c.pop()||b.guid++:f=s),p[f]||(p[f]={},l||(p[f].toJSON=b.noop)),("object"==typeof n||"function"==typeof n)&&(i?p[f]=b.extend(p[f],n):p[f].data=b.extend(p[f].data,n)),o=p[f],i||(o.data||(o.data={}),o=o.data),r!==t&&(o[b.camelCase(n)]=r),u?(a=o[n],null==a&&(a=o[b.camelCase(n)])):a=o,a}}function R(e,t,n){if(b.acceptData(e)){var r,i,o,a=e.nodeType,s=a?b.cache:e,u=a?e[b.expando]:b.expando;if(s[u]){if(t&&(o=n?s[u]:s[u].data)){b.isArray(t)?t=t.concat(b.map(t,b.camelCase)):t in o?t=[t]:(t=b.camelCase(t),t=t in o?[t]:t.split(" "));for(r=0,i=t.length;i>r;r++)delete o[t[r]];if(!(n?$:b.isEmptyObject)(o))return}(n||(delete s[u].data,$(s[u])))&&(a?b.cleanData([e],!0):b.support.deleteExpando||s!=s.window?delete s[u]:s[u]=null)}}}b.extend({cache:{},expando:"jQuery"+(p+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?b.cache[e[b.expando]]:e[b.expando],!!e&&!$(e)},data:function(e,t,n){return P(e,t,n)},removeData:function(e,t){return R(e,t)},_data:function(e,t,n){return P(e,t,n,!0)},_removeData:function(e,t){return R(e,t,!0)},acceptData:function(e){if(e.nodeType&&1!==e.nodeType&&9!==e.nodeType)return!1;var t=e.nodeName&&b.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),b.fn.extend({data:function(e,n){var r,i,o=this[0],a=0,s=null;if(e===t){if(this.length&&(s=b.data(o),1===o.nodeType&&!b._data(o,"parsedAttrs"))){for(r=o.attributes;r.length>a;a++)i=r[a].name,i.indexOf("data-")||(i=b.camelCase(i.slice(5)),W(o,i,s[i]));b._data(o,"parsedAttrs",!0)}return s}return"object"==typeof e?this.each(function(){b.data(this,e)}):b.access(this,function(n){return n===t?o?W(o,e,b.data(o,e)):null:(this.each(function(){b.data(this,e,n)}),t)},null,n,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){b.removeData(this,e)})}});function W(e,n,r){if(r===t&&1===e.nodeType){var i="data-"+n.replace(B,"-$1").toLowerCase();if(r=e.getAttribute(i),"string"==typeof r){try{r="true"===r?!0:"false"===r?!1:"null"===r?null:+r+""===r?+r:O.test(r)?b.parseJSON(r):r}catch(o){}b.data(e,n,r)}else r=t}return r}function $(e){var t;for(t in e)if(("data"!==t||!b.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}b.extend({queue:function(e,n,r){var i;return e?(n=(n||"fx")+"queue",i=b._data(e,n),r&&(!i||b.isArray(r)?i=b._data(e,n,b.makeArray(r)):i.push(r)),i||[]):t},dequeue:function(e,t){t=t||"fx";var n=b.queue(e,t),r=n.length,i=n.shift(),o=b._queueHooks(e,t),a=function(){b.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),o.cur=i,i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,a,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return b._data(e,n)||b._data(e,n,{empty:b.Callbacks("once memory").add(function(){b._removeData(e,t+"queue"),b._removeData(e,n)})})}}),b.fn.extend({queue:function(e,n){var r=2;return"string"!=typeof e&&(n=e,e="fx",r--),r>arguments.length?b.queue(this[0],e):n===t?this:this.each(function(){var t=b.queue(this,e,n);b._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&b.dequeue(this,e)})},dequeue:function(e){return this.each(function(){b.dequeue(this,e)})},delay:function(e,t){return e=b.fx?b.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var r,i=1,o=b.Deferred(),a=this,s=this.length,u=function(){--i||o.resolveWith(a,[a])};"string"!=typeof e&&(n=e,e=t),e=e||"fx";while(s--)r=b._data(a[s],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(u));return u(),o.promise(n)}});var I,z,X=/[\t\r\n]/g,U=/\r/g,V=/^(?:input|select|textarea|button|object)$/i,Y=/^(?:a|area)$/i,J=/^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i,G=/^(?:checked|selected)$/i,Q=b.support.getSetAttribute,K=b.support.input;b.fn.extend({attr:function(e,t){return b.access(this,b.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){b.removeAttr(this,e)})},prop:function(e,t){return b.access(this,b.prop,e,t,arguments.length>1)},removeProp:function(e){return e=b.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,o,a=0,s=this.length,u="string"==typeof e&&e;if(b.isFunction(e))return this.each(function(t){b(this).addClass(e.call(this,t,this.className))});if(u)for(t=(e||"").match(w)||[];s>a;a++)if(n=this[a],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(X," "):" ")){o=0;while(i=t[o++])0>r.indexOf(" "+i+" ")&&(r+=i+" ");n.className=b.trim(r)}return this},removeClass:function(e){var t,n,r,i,o,a=0,s=this.length,u=0===arguments.length||"string"==typeof e&&e;if(b.isFunction(e))return this.each(function(t){b(this).removeClass(e.call(this,t,this.className))});if(u)for(t=(e||"").match(w)||[];s>a;a++)if(n=this[a],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(X," "):"")){o=0;while(i=t[o++])while(r.indexOf(" "+i+" ")>=0)r=r.replace(" "+i+" "," ");n.className=e?b.trim(r):""}return this},toggleClass:function(e,t){var n=typeof e,r="boolean"==typeof t;return b.isFunction(e)?this.each(function(n){b(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n){var o,a=0,s=b(this),u=t,l=e.match(w)||[];while(o=l[a++])u=r?u:!s.hasClass(o),s[u?"addClass":"removeClass"](o)}else(n===i||"boolean"===n)&&(this.className&&b._data(this,"__className__",this.className),this.className=this.className||e===!1?"":b._data(this,"__className__")||"")})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(X," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,r,i,o=this[0];{if(arguments.length)return i=b.isFunction(e),this.each(function(n){var o,a=b(this);1===this.nodeType&&(o=i?e.call(this,n,a.val()):e,null==o?o="":"number"==typeof o?o+="":b.isArray(o)&&(o=b.map(o,function(e){return null==e?"":e+""})),r=b.valHooks[this.type]||b.valHooks[this.nodeName.toLowerCase()],r&&"set"in r&&r.set(this,o,"value")!==t||(this.value=o))});if(o)return r=b.valHooks[o.type]||b.valHooks[o.nodeName.toLowerCase()],r&&"get"in r&&(n=r.get(o,"value"))!==t?n:(n=o.value,"string"==typeof n?n.replace(U,""):null==n?"":n)}}}),b.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,r=e.options,i=e.selectedIndex,o="select-one"===e.type||0>i,a=o?null:[],s=o?i+1:r.length,u=0>i?s:o?i:0;for(;s>u;u++)if(n=r[u],!(!n.selected&&u!==i||(b.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&b.nodeName(n.parentNode,"optgroup"))){if(t=b(n).val(),o)return t;a.push(t)}return a},set:function(e,t){var n=b.makeArray(t);return b(e).find("option").each(function(){this.selected=b.inArray(b(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attr:function(e,n,r){var o,a,s,u=e.nodeType;if(e&&3!==u&&8!==u&&2!==u)return typeof e.getAttribute===i?b.prop(e,n,r):(a=1!==u||!b.isXMLDoc(e),a&&(n=n.toLowerCase(),o=b.attrHooks[n]||(J.test(n)?z:I)),r===t?o&&a&&"get"in o&&null!==(s=o.get(e,n))?s:(typeof e.getAttribute!==i&&(s=e.getAttribute(n)),null==s?t:s):null!==r?o&&a&&"set"in o&&(s=o.set(e,r,n))!==t?s:(e.setAttribute(n,r+""),r):(b.removeAttr(e,n),t))},removeAttr:function(e,t){var n,r,i=0,o=t&&t.match(w);if(o&&1===e.nodeType)while(n=o[i++])r=b.propFix[n]||n,J.test(n)?!Q&&G.test(n)?e[b.camelCase("default-"+n)]=e[r]=!1:e[r]=!1:b.attr(e,n,""),e.removeAttribute(Q?n:r)},attrHooks:{type:{set:function(e,t){if(!b.support.radioValue&&"radio"===t&&b.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,r){var i,o,a,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return a=1!==s||!b.isXMLDoc(e),a&&(n=b.propFix[n]||n,o=b.propHooks[n]),r!==t?o&&"set"in o&&(i=o.set(e,r,n))!==t?i:e[n]=r:o&&"get"in o&&null!==(i=o.get(e,n))?i:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):V.test(e.nodeName)||Y.test(e.nodeName)&&e.href?0:t}}}}),z={get:function(e,n){var r=b.prop(e,n),i="boolean"==typeof r&&e.getAttribute(n),o="boolean"==typeof r?K&&Q?null!=i:G.test(n)?e[b.camelCase("default-"+n)]:!!i:e.getAttributeNode(n);return o&&o.value!==!1?n.toLowerCase():t},set:function(e,t,n){return t===!1?b.removeAttr(e,n):K&&Q||!G.test(n)?e.setAttribute(!Q&&b.propFix[n]||n,n):e[b.camelCase("default-"+n)]=e[n]=!0,n}},K&&Q||(b.attrHooks.value={get:function(e,n){var r=e.getAttributeNode(n);return b.nodeName(e,"input")?e.defaultValue:r&&r.specified?r.value:t},set:function(e,n,r){return b.nodeName(e,"input")?(e.defaultValue=n,t):I&&I.set(e,n,r)}}),Q||(I=b.valHooks.button={get:function(e,n){var r=e.getAttributeNode(n);return r&&("id"===n||"name"===n||"coords"===n?""!==r.value:r.specified)?r.value:t},set:function(e,n,r){var i=e.getAttributeNode(r);return i||e.setAttributeNode(i=e.ownerDocument.createAttribute(r)),i.value=n+="","value"===r||n===e.getAttribute(r)?n:t}},b.attrHooks.contenteditable={get:I.get,set:function(e,t,n){I.set(e,""===t?!1:t,n)}},b.each(["width","height"],function(e,n){b.attrHooks[n]=b.extend(b.attrHooks[n],{set:function(e,r){return""===r?(e.setAttribute(n,"auto"),r):t}})})),b.support.hrefNormalized||(b.each(["href","src","width","height"],function(e,n){b.attrHooks[n]=b.extend(b.attrHooks[n],{get:function(e){var r=e.getAttribute(n,2);return null==r?t:r}})}),b.each(["href","src"],function(e,t){b.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}})),b.support.style||(b.attrHooks.style={get:function(e){return e.style.cssText||t},set:function(e,t){return e.style.cssText=t+""}}),b.support.optSelected||(b.propHooks.selected=b.extend(b.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),b.support.enctype||(b.propFix.enctype="encoding"),b.support.checkOn||b.each(["radio","checkbox"],function(){b.valHooks[this]={get:function(e){return null===e.getAttribute("value")?"on":e.value}}}),b.each(["radio","checkbox"],function(){b.valHooks[this]=b.extend(b.valHooks[this],{set:function(e,n){return b.isArray(n)?e.checked=b.inArray(b(e).val(),n)>=0:t}})});var Z=/^(?:input|select|textarea)$/i,et=/^key/,tt=/^(?:mouse|contextmenu)|click/,nt=/^(?:focusinfocus|focusoutblur)$/,rt=/^([^.]*)(?:\.(.+)|)$/;function it(){return!0}function ot(){return!1}b.event={global:{},add:function(e,n,r,o,a){var s,u,l,c,p,f,d,h,g,m,y,v=b._data(e);if(v){r.handler&&(c=r,r=c.handler,a=c.selector),r.guid||(r.guid=b.guid++),(u=v.events)||(u=v.events={}),(f=v.handle)||(f=v.handle=function(e){return typeof b===i||e&&b.event.triggered===e.type?t:b.event.dispatch.apply(f.elem,arguments)},f.elem=e),n=(n||"").match(w)||[""],l=n.length;while(l--)s=rt.exec(n[l])||[],g=y=s[1],m=(s[2]||"").split(".").sort(),p=b.event.special[g]||{},g=(a?p.delegateType:p.bindType)||g,p=b.event.special[g]||{},d=b.extend({type:g,origType:y,data:o,handler:r,guid:r.guid,selector:a,needsContext:a&&b.expr.match.needsContext.test(a),namespace:m.join(".")},c),(h=u[g])||(h=u[g]=[],h.delegateCount=0,p.setup&&p.setup.call(e,o,m,f)!==!1||(e.addEventListener?e.addEventListener(g,f,!1):e.attachEvent&&e.attachEvent("on"+g,f))),p.add&&(p.add.call(e,d),d.handler.guid||(d.handler.guid=r.guid)),a?h.splice(h.delegateCount++,0,d):h.push(d),b.event.global[g]=!0;e=null}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,p,f,d,h,g,m=b.hasData(e)&&b._data(e);if(m&&(c=m.events)){t=(t||"").match(w)||[""],l=t.length;while(l--)if(s=rt.exec(t[l])||[],d=g=s[1],h=(s[2]||"").split(".").sort(),d){p=b.event.special[d]||{},d=(r?p.delegateType:p.bindType)||d,f=c[d]||[],s=s[2]&&RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),u=o=f.length;while(o--)a=f[o],!i&&g!==a.origType||n&&n.guid!==a.guid||s&&!s.test(a.namespace)||r&&r!==a.selector&&("**"!==r||!a.selector)||(f.splice(o,1),a.selector&&f.delegateCount--,p.remove&&p.remove.call(e,a));u&&!f.length&&(p.teardown&&p.teardown.call(e,h,m.handle)!==!1||b.removeEvent(e,d,m.handle),delete c[d])}else for(d in c)b.event.remove(e,d+t[l],n,r,!0);b.isEmptyObject(c)&&(delete m.handle,b._removeData(e,"events"))}},trigger:function(n,r,i,a){var s,u,l,c,p,f,d,h=[i||o],g=y.call(n,"type")?n.type:n,m=y.call(n,"namespace")?n.namespace.split("."):[];if(l=f=i=i||o,3!==i.nodeType&&8!==i.nodeType&&!nt.test(g+b.event.triggered)&&(g.indexOf(".")>=0&&(m=g.split("."),g=m.shift(),m.sort()),u=0>g.indexOf(":")&&"on"+g,n=n[b.expando]?n:new b.Event(g,"object"==typeof n&&n),n.isTrigger=!0,n.namespace=m.join("."),n.namespace_re=n.namespace?RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=t,n.target||(n.target=i),r=null==r?[n]:b.makeArray(r,[n]),p=b.event.special[g]||{},a||!p.trigger||p.trigger.apply(i,r)!==!1)){if(!a&&!p.noBubble&&!b.isWindow(i)){for(c=p.delegateType||g,nt.test(c+g)||(l=l.parentNode);l;l=l.parentNode)h.push(l),f=l;f===(i.ownerDocument||o)&&h.push(f.defaultView||f.parentWindow||e)}d=0;while((l=h[d++])&&!n.isPropagationStopped())n.type=d>1?c:p.bindType||g,s=(b._data(l,"events")||{})[n.type]&&b._data(l,"handle"),s&&s.apply(l,r),s=u&&l[u],s&&b.acceptData(l)&&s.apply&&s.apply(l,r)===!1&&n.preventDefault();if(n.type=g,!(a||n.isDefaultPrevented()||p._default&&p._default.apply(i.ownerDocument,r)!==!1||"click"===g&&b.nodeName(i,"a")||!b.acceptData(i)||!u||!i[g]||b.isWindow(i))){f=i[u],f&&(i[u]=null),b.event.triggered=g;try{i[g]()}catch(v){}b.event.triggered=t,f&&(i[u]=f)}return n.result}},dispatch:function(e){e=b.event.fix(e);var n,r,i,o,a,s=[],u=h.call(arguments),l=(b._data(this,"events")||{})[e.type]||[],c=b.event.special[e.type]||{};if(u[0]=e,e.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,e)!==!1){s=b.event.handlers.call(this,e,l),n=0;while((o=s[n++])&&!e.isPropagationStopped()){e.currentTarget=o.elem,a=0;while((i=o.handlers[a++])&&!e.isImmediatePropagationStopped())(!e.namespace_re||e.namespace_re.test(i.namespace))&&(e.handleObj=i,e.data=i.data,r=((b.event.special[i.origType]||{}).handle||i.handler).apply(o.elem,u),r!==t&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,n){var r,i,o,a,s=[],u=n.delegateCount,l=e.target;if(u&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(l.disabled!==!0||"click"!==e.type)){for(o=[],a=0;u>a;a++)i=n[a],r=i.selector+" ",o[r]===t&&(o[r]=i.needsContext?b(r,this).index(l)>=0:b.find(r,this,null,[l]).length),o[r]&&o.push(i);o.length&&s.push({elem:l,handlers:o})}return n.length>u&&s.push({elem:this,handlers:n.slice(u)}),s},fix:function(e){if(e[b.expando])return e;var t,n,r,i=e.type,a=e,s=this.fixHooks[i];s||(this.fixHooks[i]=s=tt.test(i)?this.mouseHooks:et.test(i)?this.keyHooks:{}),r=s.props?this.props.concat(s.props):this.props,e=new b.Event(a),t=r.length;while(t--)n=r[t],e[n]=a[n];return e.target||(e.target=a.srcElement||o),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,s.filter?s.filter(e,a):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,i,a,s=n.button,u=n.fromElement;return null==e.pageX&&null!=n.clientX&&(i=e.target.ownerDocument||o,a=i.documentElement,r=i.body,e.pageX=n.clientX+(a&&a.scrollLeft||r&&r.scrollLeft||0)-(a&&a.clientLeft||r&&r.clientLeft||0),e.pageY=n.clientY+(a&&a.scrollTop||r&&r.scrollTop||0)-(a&&a.clientTop||r&&r.clientTop||0)),!e.relatedTarget&&u&&(e.relatedTarget=u===e.target?n.toElement:u),e.which||s===t||(e.which=1&s?1:2&s?3:4&s?2:0),e}},special:{load:{noBubble:!0},click:{trigger:function(){return b.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):t}},focus:{trigger:function(){if(this!==o.activeElement&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===o.activeElement&&this.blur?(this.blur(),!1):t},delegateType:"focusout"},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=b.extend(new b.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?b.event.trigger(i,null,t):b.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},b.removeEvent=o.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]===i&&(e[r]=null),e.detachEvent(r,n))},b.Event=function(e,n){return this instanceof b.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?it:ot):this.type=e,n&&b.extend(this,n),this.timeStamp=e&&e.timeStamp||b.now(),this[b.expando]=!0,t):new b.Event(e,n)},b.Event.prototype={isDefaultPrevented:ot,isPropagationStopped:ot,isImmediatePropagationStopped:ot,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=it,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=it,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=it,this.stopPropagation()}},b.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){b.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;
return(!i||i!==r&&!b.contains(r,i))&&(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),b.support.submitBubbles||(b.event.special.submit={setup:function(){return b.nodeName(this,"form")?!1:(b.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=b.nodeName(n,"input")||b.nodeName(n,"button")?n.form:t;r&&!b._data(r,"submitBubbles")&&(b.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),b._data(r,"submitBubbles",!0))}),t)},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&b.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return b.nodeName(this,"form")?!1:(b.event.remove(this,"._submit"),t)}}),b.support.changeBubbles||(b.event.special.change={setup:function(){return Z.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(b.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),b.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),b.event.simulate("change",this,e,!0)})),!1):(b.event.add(this,"beforeactivate._change",function(e){var t=e.target;Z.test(t.nodeName)&&!b._data(t,"changeBubbles")&&(b.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||b.event.simulate("change",this.parentNode,e,!0)}),b._data(t,"changeBubbles",!0))}),t)},handle:function(e){var n=e.target;return this!==n||e.isSimulated||e.isTrigger||"radio"!==n.type&&"checkbox"!==n.type?e.handleObj.handler.apply(this,arguments):t},teardown:function(){return b.event.remove(this,"._change"),!Z.test(this.nodeName)}}),b.support.focusinBubbles||b.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){b.event.simulate(t,e.target,b.event.fix(e),!0)};b.event.special[t]={setup:function(){0===n++&&o.addEventListener(e,r,!0)},teardown:function(){0===--n&&o.removeEventListener(e,r,!0)}}}),b.fn.extend({on:function(e,n,r,i,o){var a,s;if("object"==typeof e){"string"!=typeof n&&(r=r||n,n=t);for(a in e)this.on(a,n,r,e[a],o);return this}if(null==r&&null==i?(i=n,r=n=t):null==i&&("string"==typeof n?(i=r,r=t):(i=r,r=n,n=t)),i===!1)i=ot;else if(!i)return this;return 1===o&&(s=i,i=function(e){return b().off(e),s.apply(this,arguments)},i.guid=s.guid||(s.guid=b.guid++)),this.each(function(){b.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,o;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,b(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(o in e)this.off(o,n,e[o]);return this}return(n===!1||"function"==typeof n)&&(r=n,n=t),r===!1&&(r=ot),this.each(function(){b.event.remove(this,e,r,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},trigger:function(e,t){return this.each(function(){b.event.trigger(e,t,this)})},triggerHandler:function(e,n){var r=this[0];return r?b.event.trigger(e,n,r,!0):t}}),function(e,t){var n,r,i,o,a,s,u,l,c,p,f,d,h,g,m,y,v,x="sizzle"+-new Date,w=e.document,T={},N=0,C=0,k=it(),E=it(),S=it(),A=typeof t,j=1<<31,D=[],L=D.pop,H=D.push,q=D.slice,M=D.indexOf||function(e){var t=0,n=this.length;for(;n>t;t++)if(this[t]===e)return t;return-1},_="[\\x20\\t\\r\\n\\f]",F="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",O=F.replace("w","w#"),B="([*^$|!~]?=)",P="\\["+_+"*("+F+")"+_+"*(?:"+B+_+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+O+")|)|)"+_+"*\\]",R=":("+F+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+P.replace(3,8)+")*)|.*)\\)|)",W=RegExp("^"+_+"+|((?:^|[^\\\\])(?:\\\\.)*)"+_+"+$","g"),$=RegExp("^"+_+"*,"+_+"*"),I=RegExp("^"+_+"*([\\x20\\t\\r\\n\\f>+~])"+_+"*"),z=RegExp(R),X=RegExp("^"+O+"$"),U={ID:RegExp("^#("+F+")"),CLASS:RegExp("^\\.("+F+")"),NAME:RegExp("^\\[name=['\"]?("+F+")['\"]?\\]"),TAG:RegExp("^("+F.replace("w","w*")+")"),ATTR:RegExp("^"+P),PSEUDO:RegExp("^"+R),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+_+"*(even|odd|(([+-]|)(\\d*)n|)"+_+"*(?:([+-]|)"+_+"*(\\d+)|))"+_+"*\\)|)","i"),needsContext:RegExp("^"+_+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+_+"*((?:-\\d)?\\d*)"+_+"*\\)|)(?=[^-]|$)","i")},V=/[\x20\t\r\n\f]*[+~]/,Y=/^[^{]+\{\s*\[native code/,J=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,G=/^(?:input|select|textarea|button)$/i,Q=/^h\d$/i,K=/'|\\/g,Z=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,et=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,tt=function(e,t){var n="0x"+t-65536;return n!==n?t:0>n?String.fromCharCode(n+65536):String.fromCharCode(55296|n>>10,56320|1023&n)};try{q.call(w.documentElement.childNodes,0)[0].nodeType}catch(nt){q=function(e){var t,n=[];while(t=this[e++])n.push(t);return n}}function rt(e){return Y.test(e+"")}function it(){var e,t=[];return e=function(n,r){return t.push(n+=" ")>i.cacheLength&&delete e[t.shift()],e[n]=r}}function ot(e){return e[x]=!0,e}function at(e){var t=p.createElement("div");try{return e(t)}catch(n){return!1}finally{t=null}}function st(e,t,n,r){var i,o,a,s,u,l,f,g,m,v;if((t?t.ownerDocument||t:w)!==p&&c(t),t=t||p,n=n||[],!e||"string"!=typeof e)return n;if(1!==(s=t.nodeType)&&9!==s)return[];if(!d&&!r){if(i=J.exec(e))if(a=i[1]){if(9===s){if(o=t.getElementById(a),!o||!o.parentNode)return n;if(o.id===a)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(a))&&y(t,o)&&o.id===a)return n.push(o),n}else{if(i[2])return H.apply(n,q.call(t.getElementsByTagName(e),0)),n;if((a=i[3])&&T.getByClassName&&t.getElementsByClassName)return H.apply(n,q.call(t.getElementsByClassName(a),0)),n}if(T.qsa&&!h.test(e)){if(f=!0,g=x,m=t,v=9===s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){l=ft(e),(f=t.getAttribute("id"))?g=f.replace(K,"\\$&"):t.setAttribute("id",g),g="[id='"+g+"'] ",u=l.length;while(u--)l[u]=g+dt(l[u]);m=V.test(e)&&t.parentNode||t,v=l.join(",")}if(v)try{return H.apply(n,q.call(m.querySelectorAll(v),0)),n}catch(b){}finally{f||t.removeAttribute("id")}}}return wt(e.replace(W,"$1"),t,n,r)}a=st.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},c=st.setDocument=function(e){var n=e?e.ownerDocument||e:w;return n!==p&&9===n.nodeType&&n.documentElement?(p=n,f=n.documentElement,d=a(n),T.tagNameNoComments=at(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),T.attributes=at(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return"boolean"!==t&&"string"!==t}),T.getByClassName=at(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",e.getElementsByClassName&&e.getElementsByClassName("e").length?(e.lastChild.className="e",2===e.getElementsByClassName("e").length):!1}),T.getByName=at(function(e){e.id=x+0,e.innerHTML="<a name='"+x+"'></a><div name='"+x+"'></div>",f.insertBefore(e,f.firstChild);var t=n.getElementsByName&&n.getElementsByName(x).length===2+n.getElementsByName(x+0).length;return T.getIdNotName=!n.getElementById(x),f.removeChild(e),t}),i.attrHandle=at(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==A&&"#"===e.firstChild.getAttribute("href")})?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},T.getIdNotName?(i.find.ID=function(e,t){if(typeof t.getElementById!==A&&!d){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},i.filter.ID=function(e){var t=e.replace(et,tt);return function(e){return e.getAttribute("id")===t}}):(i.find.ID=function(e,n){if(typeof n.getElementById!==A&&!d){var r=n.getElementById(e);return r?r.id===e||typeof r.getAttributeNode!==A&&r.getAttributeNode("id").value===e?[r]:t:[]}},i.filter.ID=function(e){var t=e.replace(et,tt);return function(e){var n=typeof e.getAttributeNode!==A&&e.getAttributeNode("id");return n&&n.value===t}}),i.find.TAG=T.tagNameNoComments?function(e,n){return typeof n.getElementsByTagName!==A?n.getElementsByTagName(e):t}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){while(n=o[i++])1===n.nodeType&&r.push(n);return r}return o},i.find.NAME=T.getByName&&function(e,n){return typeof n.getElementsByName!==A?n.getElementsByName(name):t},i.find.CLASS=T.getByClassName&&function(e,n){return typeof n.getElementsByClassName===A||d?t:n.getElementsByClassName(e)},g=[],h=[":focus"],(T.qsa=rt(n.querySelectorAll))&&(at(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||h.push("\\["+_+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||h.push(":checked")}),at(function(e){e.innerHTML="<input type='hidden' i=''/>",e.querySelectorAll("[i^='']").length&&h.push("[*^$]="+_+"*(?:\"\"|'')"),e.querySelectorAll(":enabled").length||h.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),h.push(",.*:")})),(T.matchesSelector=rt(m=f.matchesSelector||f.mozMatchesSelector||f.webkitMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&at(function(e){T.disconnectedMatch=m.call(e,"div"),m.call(e,"[s!='']:x"),g.push("!=",R)}),h=RegExp(h.join("|")),g=RegExp(g.join("|")),y=rt(f.contains)||f.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},v=f.compareDocumentPosition?function(e,t){var r;return e===t?(u=!0,0):(r=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t))?1&r||e.parentNode&&11===e.parentNode.nodeType?e===n||y(w,e)?-1:t===n||y(w,t)?1:0:4&r?-1:1:e.compareDocumentPosition?-1:1}:function(e,t){var r,i=0,o=e.parentNode,a=t.parentNode,s=[e],l=[t];if(e===t)return u=!0,0;if(!o||!a)return e===n?-1:t===n?1:o?-1:a?1:0;if(o===a)return ut(e,t);r=e;while(r=r.parentNode)s.unshift(r);r=t;while(r=r.parentNode)l.unshift(r);while(s[i]===l[i])i++;return i?ut(s[i],l[i]):s[i]===w?-1:l[i]===w?1:0},u=!1,[0,0].sort(v),T.detectDuplicates=u,p):p},st.matches=function(e,t){return st(e,null,null,t)},st.matchesSelector=function(e,t){if((e.ownerDocument||e)!==p&&c(e),t=t.replace(Z,"='$1']"),!(!T.matchesSelector||d||g&&g.test(t)||h.test(t)))try{var n=m.call(e,t);if(n||T.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(r){}return st(t,p,null,[e]).length>0},st.contains=function(e,t){return(e.ownerDocument||e)!==p&&c(e),y(e,t)},st.attr=function(e,t){var n;return(e.ownerDocument||e)!==p&&c(e),d||(t=t.toLowerCase()),(n=i.attrHandle[t])?n(e):d||T.attributes?e.getAttribute(t):((n=e.getAttributeNode(t))||e.getAttribute(t))&&e[t]===!0?t:n&&n.specified?n.value:null},st.error=function(e){throw Error("Syntax error, unrecognized expression: "+e)},st.uniqueSort=function(e){var t,n=[],r=1,i=0;if(u=!T.detectDuplicates,e.sort(v),u){for(;t=e[r];r++)t===e[r-1]&&(i=n.push(r));while(i--)e.splice(n[i],1)}return e};function ut(e,t){var n=t&&e,r=n&&(~t.sourceIndex||j)-(~e.sourceIndex||j);if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function lt(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function ct(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function pt(e){return ot(function(t){return t=+t,ot(function(n,r){var i,o=e([],n.length,t),a=o.length;while(a--)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}o=st.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r];r++)n+=o(t);return n},i=st.selectors={cacheLength:50,createPseudo:ot,match:U,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(et,tt),e[3]=(e[4]||e[5]||"").replace(et,tt),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||st.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&st.error(e[0]),e},PSEUDO:function(e){var t,n=!e[5]&&e[2];return U.CHILD.test(e[0])?null:(e[4]?e[2]=e[4]:n&&z.test(n)&&(t=ft(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){return"*"===e?function(){return!0}:(e=e.replace(et,tt).toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=k[e+" "];return t||(t=RegExp("(^|"+_+")"+e+"("+_+"|$)"))&&k(e,function(e){return t.test(e.className||typeof e.getAttribute!==A&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=st.attr(r,e);return null==i?"!="===t:t?(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i+" ").indexOf(n)>-1:"|="===t?i===n||i.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,u){var l,c,p,f,d,h,g=o!==a?"nextSibling":"previousSibling",m=t.parentNode,y=s&&t.nodeName.toLowerCase(),v=!u&&!s;if(m){if(o){while(g){p=t;while(p=p[g])if(s?p.nodeName.toLowerCase()===y:1===p.nodeType)return!1;h=g="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?m.firstChild:m.lastChild],a&&v){c=m[x]||(m[x]={}),l=c[e]||[],d=l[0]===N&&l[1],f=l[0]===N&&l[2],p=d&&m.childNodes[d];while(p=++d&&p&&p[g]||(f=d=0)||h.pop())if(1===p.nodeType&&++f&&p===t){c[e]=[N,d,f];break}}else if(v&&(l=(t[x]||(t[x]={}))[e])&&l[0]===N)f=l[1];else while(p=++d&&p&&p[g]||(f=d=0)||h.pop())if((s?p.nodeName.toLowerCase()===y:1===p.nodeType)&&++f&&(v&&((p[x]||(p[x]={}))[e]=[N,f]),p===t))break;return f-=i,f===r||0===f%r&&f/r>=0}}},PSEUDO:function(e,t){var n,r=i.pseudos[e]||i.setFilters[e.toLowerCase()]||st.error("unsupported pseudo: "+e);return r[x]?r(t):r.length>1?(n=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?ot(function(e,n){var i,o=r(e,t),a=o.length;while(a--)i=M.call(e,o[a]),e[i]=!(n[i]=o[a])}):function(e){return r(e,0,n)}):r}},pseudos:{not:ot(function(e){var t=[],n=[],r=s(e.replace(W,"$1"));return r[x]?ot(function(e,t,n,i){var o,a=r(e,null,i,[]),s=e.length;while(s--)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),!n.pop()}}),has:ot(function(e){return function(t){return st(e,t).length>0}}),contains:ot(function(e){return function(t){return(t.textContent||t.innerText||o(t)).indexOf(e)>-1}}),lang:ot(function(e){return X.test(e||"")||st.error("unsupported lang: "+e),e=e.replace(et,tt).toLowerCase(),function(t){var n;do if(n=d?t.getAttribute("xml:lang")||t.getAttribute("lang"):t.lang)return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===f},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!i.pseudos.empty(e)},header:function(e){return Q.test(e.nodeName)},input:function(e){return G.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},first:pt(function(){return[0]}),last:pt(function(e,t){return[t-1]}),eq:pt(function(e,t,n){return[0>n?n+t:n]}),even:pt(function(e,t){var n=0;for(;t>n;n+=2)e.push(n);return e}),odd:pt(function(e,t){var n=1;for(;t>n;n+=2)e.push(n);return e}),lt:pt(function(e,t,n){var r=0>n?n+t:n;for(;--r>=0;)e.push(r);return e}),gt:pt(function(e,t,n){var r=0>n?n+t:n;for(;t>++r;)e.push(r);return e})}};for(n in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[n]=lt(n);for(n in{submit:!0,reset:!0})i.pseudos[n]=ct(n);function ft(e,t){var n,r,o,a,s,u,l,c=E[e+" "];if(c)return t?0:c.slice(0);s=e,u=[],l=i.preFilter;while(s){(!n||(r=$.exec(s)))&&(r&&(s=s.slice(r[0].length)||s),u.push(o=[])),n=!1,(r=I.exec(s))&&(n=r.shift(),o.push({value:n,type:r[0].replace(W," ")}),s=s.slice(n.length));for(a in i.filter)!(r=U[a].exec(s))||l[a]&&!(r=l[a](r))||(n=r.shift(),o.push({value:n,type:a,matches:r}),s=s.slice(n.length));if(!n)break}return t?s.length:s?st.error(e):E(e,u).slice(0)}function dt(e){var t=0,n=e.length,r="";for(;n>t;t++)r+=e[t].value;return r}function ht(e,t,n){var i=t.dir,o=n&&"parentNode"===i,a=C++;return t.first?function(t,n,r){while(t=t[i])if(1===t.nodeType||o)return e(t,n,r)}:function(t,n,s){var u,l,c,p=N+" "+a;if(s){while(t=t[i])if((1===t.nodeType||o)&&e(t,n,s))return!0}else while(t=t[i])if(1===t.nodeType||o)if(c=t[x]||(t[x]={}),(l=c[i])&&l[0]===p){if((u=l[1])===!0||u===r)return u===!0}else if(l=c[i]=[p],l[1]=e(t,n,s)||r,l[1]===!0)return!0}}function gt(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function mt(e,t,n,r,i){var o,a=[],s=0,u=e.length,l=null!=t;for(;u>s;s++)(o=e[s])&&(!n||n(o,r,i))&&(a.push(o),l&&t.push(s));return a}function yt(e,t,n,r,i,o){return r&&!r[x]&&(r=yt(r)),i&&!i[x]&&(i=yt(i,o)),ot(function(o,a,s,u){var l,c,p,f=[],d=[],h=a.length,g=o||xt(t||"*",s.nodeType?[s]:s,[]),m=!e||!o&&t?g:mt(g,f,e,s,u),y=n?i||(o?e:h||r)?[]:a:m;if(n&&n(m,y,s,u),r){l=mt(y,d),r(l,[],s,u),c=l.length;while(c--)(p=l[c])&&(y[d[c]]=!(m[d[c]]=p))}if(o){if(i||e){if(i){l=[],c=y.length;while(c--)(p=y[c])&&l.push(m[c]=p);i(null,y=[],l,u)}c=y.length;while(c--)(p=y[c])&&(l=i?M.call(o,p):f[c])>-1&&(o[l]=!(a[l]=p))}}else y=mt(y===a?y.splice(h,y.length):y),i?i(null,a,y,u):H.apply(a,y)})}function vt(e){var t,n,r,o=e.length,a=i.relative[e[0].type],s=a||i.relative[" "],u=a?1:0,c=ht(function(e){return e===t},s,!0),p=ht(function(e){return M.call(t,e)>-1},s,!0),f=[function(e,n,r){return!a&&(r||n!==l)||((t=n).nodeType?c(e,n,r):p(e,n,r))}];for(;o>u;u++)if(n=i.relative[e[u].type])f=[ht(gt(f),n)];else{if(n=i.filter[e[u].type].apply(null,e[u].matches),n[x]){for(r=++u;o>r;r++)if(i.relative[e[r].type])break;return yt(u>1&&gt(f),u>1&&dt(e.slice(0,u-1)).replace(W,"$1"),n,r>u&&vt(e.slice(u,r)),o>r&&vt(e=e.slice(r)),o>r&&dt(e))}f.push(n)}return gt(f)}function bt(e,t){var n=0,o=t.length>0,a=e.length>0,s=function(s,u,c,f,d){var h,g,m,y=[],v=0,b="0",x=s&&[],w=null!=d,T=l,C=s||a&&i.find.TAG("*",d&&u.parentNode||u),k=N+=null==T?1:Math.random()||.1;for(w&&(l=u!==p&&u,r=n);null!=(h=C[b]);b++){if(a&&h){g=0;while(m=e[g++])if(m(h,u,c)){f.push(h);break}w&&(N=k,r=++n)}o&&((h=!m&&h)&&v--,s&&x.push(h))}if(v+=b,o&&b!==v){g=0;while(m=t[g++])m(x,y,u,c);if(s){if(v>0)while(b--)x[b]||y[b]||(y[b]=L.call(f));y=mt(y)}H.apply(f,y),w&&!s&&y.length>0&&v+t.length>1&&st.uniqueSort(f)}return w&&(N=k,l=T),x};return o?ot(s):s}s=st.compile=function(e,t){var n,r=[],i=[],o=S[e+" "];if(!o){t||(t=ft(e)),n=t.length;while(n--)o=vt(t[n]),o[x]?r.push(o):i.push(o);o=S(e,bt(i,r))}return o};function xt(e,t,n){var r=0,i=t.length;for(;i>r;r++)st(e,t[r],n);return n}function wt(e,t,n,r){var o,a,u,l,c,p=ft(e);if(!r&&1===p.length){if(a=p[0]=p[0].slice(0),a.length>2&&"ID"===(u=a[0]).type&&9===t.nodeType&&!d&&i.relative[a[1].type]){if(t=i.find.ID(u.matches[0].replace(et,tt),t)[0],!t)return n;e=e.slice(a.shift().value.length)}o=U.needsContext.test(e)?0:a.length;while(o--){if(u=a[o],i.relative[l=u.type])break;if((c=i.find[l])&&(r=c(u.matches[0].replace(et,tt),V.test(a[0].type)&&t.parentNode||t))){if(a.splice(o,1),e=r.length&&dt(a),!e)return H.apply(n,q.call(r,0)),n;break}}}return s(e,p)(r,t,d,n,V.test(e)),n}i.pseudos.nth=i.pseudos.eq;function Tt(){}i.filters=Tt.prototype=i.pseudos,i.setFilters=new Tt,c(),st.attr=b.attr,b.find=st,b.expr=st.selectors,b.expr[":"]=b.expr.pseudos,b.unique=st.uniqueSort,b.text=st.getText,b.isXMLDoc=st.isXML,b.contains=st.contains}(e);var at=/Until$/,st=/^(?:parents|prev(?:Until|All))/,ut=/^.[^:#\[\.,]*$/,lt=b.expr.match.needsContext,ct={children:!0,contents:!0,next:!0,prev:!0};b.fn.extend({find:function(e){var t,n,r,i=this.length;if("string"!=typeof e)return r=this,this.pushStack(b(e).filter(function(){for(t=0;i>t;t++)if(b.contains(r[t],this))return!0}));for(n=[],t=0;i>t;t++)b.find(e,this[t],n);return n=this.pushStack(i>1?b.unique(n):n),n.selector=(this.selector?this.selector+" ":"")+e,n},has:function(e){var t,n=b(e,this),r=n.length;return this.filter(function(){for(t=0;r>t;t++)if(b.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(ft(this,e,!1))},filter:function(e){return this.pushStack(ft(this,e,!0))},is:function(e){return!!e&&("string"==typeof e?lt.test(e)?b(e,this.context).index(this[0])>=0:b.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var n,r=0,i=this.length,o=[],a=lt.test(e)||"string"!=typeof e?b(e,t||this.context):0;for(;i>r;r++){n=this[r];while(n&&n.ownerDocument&&n!==t&&11!==n.nodeType){if(a?a.index(n)>-1:b.find.matchesSelector(n,e)){o.push(n);break}n=n.parentNode}}return this.pushStack(o.length>1?b.unique(o):o)},index:function(e){return e?"string"==typeof e?b.inArray(this[0],b(e)):b.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n="string"==typeof e?b(e,t):b.makeArray(e&&e.nodeType?[e]:e),r=b.merge(this.get(),n);return this.pushStack(b.unique(r))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),b.fn.andSelf=b.fn.addBack;function pt(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}b.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return b.dir(e,"parentNode")},parentsUntil:function(e,t,n){return b.dir(e,"parentNode",n)},next:function(e){return pt(e,"nextSibling")},prev:function(e){return pt(e,"previousSibling")},nextAll:function(e){return b.dir(e,"nextSibling")},prevAll:function(e){return b.dir(e,"previousSibling")},nextUntil:function(e,t,n){return b.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return b.dir(e,"previousSibling",n)},siblings:function(e){return b.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return b.sibling(e.firstChild)},contents:function(e){return b.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:b.merge([],e.childNodes)}},function(e,t){b.fn[e]=function(n,r){var i=b.map(this,t,n);return at.test(e)||(r=n),r&&"string"==typeof r&&(i=b.filter(r,i)),i=this.length>1&&!ct[e]?b.unique(i):i,this.length>1&&st.test(e)&&(i=i.reverse()),this.pushStack(i)}}),b.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),1===t.length?b.find.matchesSelector(t[0],e)?[t[0]]:[]:b.find.matches(e,t)},dir:function(e,n,r){var i=[],o=e[n];while(o&&9!==o.nodeType&&(r===t||1!==o.nodeType||!b(o).is(r)))1===o.nodeType&&i.push(o),o=o[n];return i},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});function ft(e,t,n){if(t=t||0,b.isFunction(t))return b.grep(e,function(e,r){var i=!!t.call(e,r,e);return i===n});if(t.nodeType)return b.grep(e,function(e){return e===t===n});if("string"==typeof t){var r=b.grep(e,function(e){return 1===e.nodeType});if(ut.test(t))return b.filter(t,r,!n);t=b.filter(t,r)}return b.grep(e,function(e){return b.inArray(e,t)>=0===n})}function dt(e){var t=ht.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}var ht="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",gt=/ jQuery\d+="(?:null|\d+)"/g,mt=RegExp("<(?:"+ht+")[\\s/>]","i"),yt=/^\s+/,vt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bt=/<([\w:]+)/,xt=/<tbody/i,wt=/<|&#?\w+;/,Tt=/<(?:script|style|link)/i,Nt=/^(?:checkbox|radio)$/i,Ct=/checked\s*(?:[^=]|=\s*.checked.)/i,kt=/^$|\/(?:java|ecma)script/i,Et=/^true\/(.*)/,St=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,At={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:b.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},jt=dt(o),Dt=jt.appendChild(o.createElement("div"));At.optgroup=At.option,At.tbody=At.tfoot=At.colgroup=At.caption=At.thead,At.th=At.td,b.fn.extend({text:function(e){return b.access(this,function(e){return e===t?b.text(this):this.empty().append((this[0]&&this[0].ownerDocument||o).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(b.isFunction(e))return this.each(function(t){b(this).wrapAll(e.call(this,t))});if(this[0]){var t=b(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&1===e.firstChild.nodeType)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return b.isFunction(e)?this.each(function(t){b(this).wrapInner(e.call(this,t))}):this.each(function(){var t=b(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=b.isFunction(e);return this.each(function(n){b(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){b.nodeName(this,"body")||b(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.insertBefore(e,this.firstChild)})},before:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){var n,r=0;for(;null!=(n=this[r]);r++)(!e||b.filter(e,[n]).length>0)&&(t||1!==n.nodeType||b.cleanData(Ot(n)),n.parentNode&&(t&&b.contains(n.ownerDocument,n)&&Mt(Ot(n,"script")),n.parentNode.removeChild(n)));return this},empty:function(){var e,t=0;for(;null!=(e=this[t]);t++){1===e.nodeType&&b.cleanData(Ot(e,!1));while(e.firstChild)e.removeChild(e.firstChild);e.options&&b.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return b.clone(this,e,t)})},html:function(e){return b.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return 1===n.nodeType?n.innerHTML.replace(gt,""):t;if(!("string"!=typeof e||Tt.test(e)||!b.support.htmlSerialize&&mt.test(e)||!b.support.leadingWhitespace&&yt.test(e)||At[(bt.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(vt,"<$1></$2>");try{for(;i>r;r++)n=this[r]||{},1===n.nodeType&&(b.cleanData(Ot(n,!1)),n.innerHTML=e);n=0}catch(o){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){var t=b.isFunction(e);return t||"string"==typeof e||(e=b(e).not(this).detach()),this.domManip([e],!0,function(e){var t=this.nextSibling,n=this.parentNode;n&&(b(this).remove(),n.insertBefore(e,t))})},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,r){e=f.apply([],e);var i,o,a,s,u,l,c=0,p=this.length,d=this,h=p-1,g=e[0],m=b.isFunction(g);if(m||!(1>=p||"string"!=typeof g||b.support.checkClone)&&Ct.test(g))return this.each(function(i){var o=d.eq(i);m&&(e[0]=g.call(this,i,n?o.html():t)),o.domManip(e,n,r)});if(p&&(l=b.buildFragment(e,this[0].ownerDocument,!1,this),i=l.firstChild,1===l.childNodes.length&&(l=i),i)){for(n=n&&b.nodeName(i,"tr"),s=b.map(Ot(l,"script"),Ht),a=s.length;p>c;c++)o=l,c!==h&&(o=b.clone(o,!0,!0),a&&b.merge(s,Ot(o,"script"))),r.call(n&&b.nodeName(this[c],"table")?Lt(this[c],"tbody"):this[c],o,c);if(a)for(u=s[s.length-1].ownerDocument,b.map(s,qt),c=0;a>c;c++)o=s[c],kt.test(o.type||"")&&!b._data(o,"globalEval")&&b.contains(u,o)&&(o.src?b.ajax({url:o.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):b.globalEval((o.text||o.textContent||o.innerHTML||"").replace(St,"")));l=i=null}return this}});function Lt(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function Ht(e){var t=e.getAttributeNode("type");return e.type=(t&&t.specified)+"/"+e.type,e}function qt(e){var t=Et.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function Mt(e,t){var n,r=0;for(;null!=(n=e[r]);r++)b._data(n,"globalEval",!t||b._data(t[r],"globalEval"))}function _t(e,t){if(1===t.nodeType&&b.hasData(e)){var n,r,i,o=b._data(e),a=b._data(t,o),s=o.events;if(s){delete a.handle,a.events={};for(n in s)for(r=0,i=s[n].length;i>r;r++)b.event.add(t,n,s[n][r])}a.data&&(a.data=b.extend({},a.data))}}function Ft(e,t){var n,r,i;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!b.support.noCloneEvent&&t[b.expando]){i=b._data(t);for(r in i.events)b.removeEvent(t,r,i.handle);t.removeAttribute(b.expando)}"script"===n&&t.text!==e.text?(Ht(t).text=e.text,qt(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),b.support.html5Clone&&e.innerHTML&&!b.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&Nt.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}}b.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){b.fn[e]=function(e){var n,r=0,i=[],o=b(e),a=o.length-1;for(;a>=r;r++)n=r===a?this:this.clone(!0),b(o[r])[t](n),d.apply(i,n.get());return this.pushStack(i)}});function Ot(e,n){var r,o,a=0,s=typeof e.getElementsByTagName!==i?e.getElementsByTagName(n||"*"):typeof e.querySelectorAll!==i?e.querySelectorAll(n||"*"):t;if(!s)for(s=[],r=e.childNodes||e;null!=(o=r[a]);a++)!n||b.nodeName(o,n)?s.push(o):b.merge(s,Ot(o,n));return n===t||n&&b.nodeName(e,n)?b.merge([e],s):s}function Bt(e){Nt.test(e.type)&&(e.defaultChecked=e.checked)}b.extend({clone:function(e,t,n){var r,i,o,a,s,u=b.contains(e.ownerDocument,e);if(b.support.html5Clone||b.isXMLDoc(e)||!mt.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(Dt.innerHTML=e.outerHTML,Dt.removeChild(o=Dt.firstChild)),!(b.support.noCloneEvent&&b.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||b.isXMLDoc(e)))for(r=Ot(o),s=Ot(e),a=0;null!=(i=s[a]);++a)r[a]&&Ft(i,r[a]);if(t)if(n)for(s=s||Ot(e),r=r||Ot(o),a=0;null!=(i=s[a]);a++)_t(i,r[a]);else _t(e,o);return r=Ot(o,"script"),r.length>0&&Mt(r,!u&&Ot(e,"script")),r=s=i=null,o},buildFragment:function(e,t,n,r){var i,o,a,s,u,l,c,p=e.length,f=dt(t),d=[],h=0;for(;p>h;h++)if(o=e[h],o||0===o)if("object"===b.type(o))b.merge(d,o.nodeType?[o]:o);else if(wt.test(o)){s=s||f.appendChild(t.createElement("div")),u=(bt.exec(o)||["",""])[1].toLowerCase(),c=At[u]||At._default,s.innerHTML=c[1]+o.replace(vt,"<$1></$2>")+c[2],i=c[0];while(i--)s=s.lastChild;if(!b.support.leadingWhitespace&&yt.test(o)&&d.push(t.createTextNode(yt.exec(o)[0])),!b.support.tbody){o="table"!==u||xt.test(o)?"<table>"!==c[1]||xt.test(o)?0:s:s.firstChild,i=o&&o.childNodes.length;while(i--)b.nodeName(l=o.childNodes[i],"tbody")&&!l.childNodes.length&&o.removeChild(l)
}b.merge(d,s.childNodes),s.textContent="";while(s.firstChild)s.removeChild(s.firstChild);s=f.lastChild}else d.push(t.createTextNode(o));s&&f.removeChild(s),b.support.appendChecked||b.grep(Ot(d,"input"),Bt),h=0;while(o=d[h++])if((!r||-1===b.inArray(o,r))&&(a=b.contains(o.ownerDocument,o),s=Ot(f.appendChild(o),"script"),a&&Mt(s),n)){i=0;while(o=s[i++])kt.test(o.type||"")&&n.push(o)}return s=null,f},cleanData:function(e,t){var n,r,o,a,s=0,u=b.expando,l=b.cache,p=b.support.deleteExpando,f=b.event.special;for(;null!=(n=e[s]);s++)if((t||b.acceptData(n))&&(o=n[u],a=o&&l[o])){if(a.events)for(r in a.events)f[r]?b.event.remove(n,r):b.removeEvent(n,r,a.handle);l[o]&&(delete l[o],p?delete n[u]:typeof n.removeAttribute!==i?n.removeAttribute(u):n[u]=null,c.push(o))}}});var Pt,Rt,Wt,$t=/alpha\([^)]*\)/i,It=/opacity\s*=\s*([^)]*)/,zt=/^(top|right|bottom|left)$/,Xt=/^(none|table(?!-c[ea]).+)/,Ut=/^margin/,Vt=RegExp("^("+x+")(.*)$","i"),Yt=RegExp("^("+x+")(?!px)[a-z%]+$","i"),Jt=RegExp("^([+-])=("+x+")","i"),Gt={BODY:"block"},Qt={position:"absolute",visibility:"hidden",display:"block"},Kt={letterSpacing:0,fontWeight:400},Zt=["Top","Right","Bottom","Left"],en=["Webkit","O","Moz","ms"];function tn(e,t){if(t in e)return t;var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=en.length;while(i--)if(t=en[i]+n,t in e)return t;return r}function nn(e,t){return e=t||e,"none"===b.css(e,"display")||!b.contains(e.ownerDocument,e)}function rn(e,t){var n,r,i,o=[],a=0,s=e.length;for(;s>a;a++)r=e[a],r.style&&(o[a]=b._data(r,"olddisplay"),n=r.style.display,t?(o[a]||"none"!==n||(r.style.display=""),""===r.style.display&&nn(r)&&(o[a]=b._data(r,"olddisplay",un(r.nodeName)))):o[a]||(i=nn(r),(n&&"none"!==n||!i)&&b._data(r,"olddisplay",i?n:b.css(r,"display"))));for(a=0;s>a;a++)r=e[a],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?o[a]||"":"none"));return e}b.fn.extend({css:function(e,n){return b.access(this,function(e,n,r){var i,o,a={},s=0;if(b.isArray(n)){for(o=Rt(e),i=n.length;i>s;s++)a[n[s]]=b.css(e,n[s],!1,o);return a}return r!==t?b.style(e,n,r):b.css(e,n)},e,n,arguments.length>1)},show:function(){return rn(this,!0)},hide:function(){return rn(this)},toggle:function(e){var t="boolean"==typeof e;return this.each(function(){(t?e:nn(this))?b(this).show():b(this).hide()})}}),b.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Wt(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":b.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,a,s,u=b.camelCase(n),l=e.style;if(n=b.cssProps[u]||(b.cssProps[u]=tn(l,u)),s=b.cssHooks[n]||b.cssHooks[u],r===t)return s&&"get"in s&&(o=s.get(e,!1,i))!==t?o:l[n];if(a=typeof r,"string"===a&&(o=Jt.exec(r))&&(r=(o[1]+1)*o[2]+parseFloat(b.css(e,n)),a="number"),!(null==r||"number"===a&&isNaN(r)||("number"!==a||b.cssNumber[u]||(r+="px"),b.support.clearCloneStyle||""!==r||0!==n.indexOf("background")||(l[n]="inherit"),s&&"set"in s&&(r=s.set(e,r,i))===t)))try{l[n]=r}catch(c){}}},css:function(e,n,r,i){var o,a,s,u=b.camelCase(n);return n=b.cssProps[u]||(b.cssProps[u]=tn(e.style,u)),s=b.cssHooks[n]||b.cssHooks[u],s&&"get"in s&&(a=s.get(e,!0,r)),a===t&&(a=Wt(e,n,i)),"normal"===a&&n in Kt&&(a=Kt[n]),""===r||r?(o=parseFloat(a),r===!0||b.isNumeric(o)?o||0:a):a},swap:function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];i=n.apply(e,r||[]);for(o in t)e.style[o]=a[o];return i}}),e.getComputedStyle?(Rt=function(t){return e.getComputedStyle(t,null)},Wt=function(e,n,r){var i,o,a,s=r||Rt(e),u=s?s.getPropertyValue(n)||s[n]:t,l=e.style;return s&&(""!==u||b.contains(e.ownerDocument,e)||(u=b.style(e,n)),Yt.test(u)&&Ut.test(n)&&(i=l.width,o=l.minWidth,a=l.maxWidth,l.minWidth=l.maxWidth=l.width=u,u=s.width,l.width=i,l.minWidth=o,l.maxWidth=a)),u}):o.documentElement.currentStyle&&(Rt=function(e){return e.currentStyle},Wt=function(e,n,r){var i,o,a,s=r||Rt(e),u=s?s[n]:t,l=e.style;return null==u&&l&&l[n]&&(u=l[n]),Yt.test(u)&&!zt.test(n)&&(i=l.left,o=e.runtimeStyle,a=o&&o.left,a&&(o.left=e.currentStyle.left),l.left="fontSize"===n?"1em":u,u=l.pixelLeft+"px",l.left=i,a&&(o.left=a)),""===u?"auto":u});function on(e,t,n){var r=Vt.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function an(e,t,n,r,i){var o=n===(r?"border":"content")?4:"width"===t?1:0,a=0;for(;4>o;o+=2)"margin"===n&&(a+=b.css(e,n+Zt[o],!0,i)),r?("content"===n&&(a-=b.css(e,"padding"+Zt[o],!0,i)),"margin"!==n&&(a-=b.css(e,"border"+Zt[o]+"Width",!0,i))):(a+=b.css(e,"padding"+Zt[o],!0,i),"padding"!==n&&(a+=b.css(e,"border"+Zt[o]+"Width",!0,i)));return a}function sn(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,o=Rt(e),a=b.support.boxSizing&&"border-box"===b.css(e,"boxSizing",!1,o);if(0>=i||null==i){if(i=Wt(e,t,o),(0>i||null==i)&&(i=e.style[t]),Yt.test(i))return i;r=a&&(b.support.boxSizingReliable||i===e.style[t]),i=parseFloat(i)||0}return i+an(e,t,n||(a?"border":"content"),r,o)+"px"}function un(e){var t=o,n=Gt[e];return n||(n=ln(e,t),"none"!==n&&n||(Pt=(Pt||b("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(Pt[0].contentWindow||Pt[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),n=ln(e,t),Pt.detach()),Gt[e]=n),n}function ln(e,t){var n=b(t.createElement(e)).appendTo(t.body),r=b.css(n[0],"display");return n.remove(),r}b.each(["height","width"],function(e,n){b.cssHooks[n]={get:function(e,r,i){return r?0===e.offsetWidth&&Xt.test(b.css(e,"display"))?b.swap(e,Qt,function(){return sn(e,n,i)}):sn(e,n,i):t},set:function(e,t,r){var i=r&&Rt(e);return on(e,t,r?an(e,n,r,b.support.boxSizing&&"border-box"===b.css(e,"boxSizing",!1,i),i):0)}}}),b.support.opacity||(b.cssHooks.opacity={get:function(e,t){return It.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=b.isNumeric(t)?"alpha(opacity="+100*t+")":"",o=r&&r.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===b.trim(o.replace($t,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||r&&!r.filter)||(n.filter=$t.test(o)?o.replace($t,i):o+" "+i)}}),b(function(){b.support.reliableMarginRight||(b.cssHooks.marginRight={get:function(e,n){return n?b.swap(e,{display:"inline-block"},Wt,[e,"marginRight"]):t}}),!b.support.pixelPosition&&b.fn.position&&b.each(["top","left"],function(e,n){b.cssHooks[n]={get:function(e,r){return r?(r=Wt(e,n),Yt.test(r)?b(e).position()[n]+"px":r):t}}})}),b.expr&&b.expr.filters&&(b.expr.filters.hidden=function(e){return 0>=e.offsetWidth&&0>=e.offsetHeight||!b.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||b.css(e,"display"))},b.expr.filters.visible=function(e){return!b.expr.filters.hidden(e)}),b.each({margin:"",padding:"",border:"Width"},function(e,t){b.cssHooks[e+t]={expand:function(n){var r=0,i={},o="string"==typeof n?n.split(" "):[n];for(;4>r;r++)i[e+Zt[r]+t]=o[r]||o[r-2]||o[0];return i}},Ut.test(e)||(b.cssHooks[e+t].set=on)});var cn=/%20/g,pn=/\[\]$/,fn=/\r?\n/g,dn=/^(?:submit|button|image|reset|file)$/i,hn=/^(?:input|select|textarea|keygen)/i;b.fn.extend({serialize:function(){return b.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=b.prop(this,"elements");return e?b.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!b(this).is(":disabled")&&hn.test(this.nodeName)&&!dn.test(e)&&(this.checked||!Nt.test(e))}).map(function(e,t){var n=b(this).val();return null==n?null:b.isArray(n)?b.map(n,function(e){return{name:t.name,value:e.replace(fn,"\r\n")}}):{name:t.name,value:n.replace(fn,"\r\n")}}).get()}}),b.param=function(e,n){var r,i=[],o=function(e,t){t=b.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(n===t&&(n=b.ajaxSettings&&b.ajaxSettings.traditional),b.isArray(e)||e.jquery&&!b.isPlainObject(e))b.each(e,function(){o(this.name,this.value)});else for(r in e)gn(r,e[r],n,o);return i.join("&").replace(cn,"+")};function gn(e,t,n,r){var i;if(b.isArray(t))b.each(t,function(t,i){n||pn.test(e)?r(e,i):gn(e+"["+("object"==typeof i?t:"")+"]",i,n,r)});else if(n||"object"!==b.type(t))r(e,t);else for(i in t)gn(e+"["+i+"]",t[i],n,r)}b.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){b.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),b.fn.hover=function(e,t){return this.mouseenter(e).mouseleave(t||e)};var mn,yn,vn=b.now(),bn=/\?/,xn=/#.*$/,wn=/([?&])_=[^&]*/,Tn=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Nn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Cn=/^(?:GET|HEAD)$/,kn=/^\/\//,En=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Sn=b.fn.load,An={},jn={},Dn="*/".concat("*");try{yn=a.href}catch(Ln){yn=o.createElement("a"),yn.href="",yn=yn.href}mn=En.exec(yn.toLowerCase())||[];function Hn(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(w)||[];if(b.isFunction(n))while(r=o[i++])"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function qn(e,n,r,i){var o={},a=e===jn;function s(u){var l;return o[u]=!0,b.each(e[u]||[],function(e,u){var c=u(n,r,i);return"string"!=typeof c||a||o[c]?a?!(l=c):t:(n.dataTypes.unshift(c),s(c),!1)}),l}return s(n.dataTypes[0])||!o["*"]&&s("*")}function Mn(e,n){var r,i,o=b.ajaxSettings.flatOptions||{};for(i in n)n[i]!==t&&((o[i]?e:r||(r={}))[i]=n[i]);return r&&b.extend(!0,e,r),e}b.fn.load=function(e,n,r){if("string"!=typeof e&&Sn)return Sn.apply(this,arguments);var i,o,a,s=this,u=e.indexOf(" ");return u>=0&&(i=e.slice(u,e.length),e=e.slice(0,u)),b.isFunction(n)?(r=n,n=t):n&&"object"==typeof n&&(a="POST"),s.length>0&&b.ajax({url:e,type:a,dataType:"html",data:n}).done(function(e){o=arguments,s.html(i?b("<div>").append(b.parseHTML(e)).find(i):e)}).complete(r&&function(e,t){s.each(r,o||[e.responseText,t,e])}),this},b.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){b.fn[t]=function(e){return this.on(t,e)}}),b.each(["get","post"],function(e,n){b[n]=function(e,r,i,o){return b.isFunction(r)&&(o=o||i,i=r,r=t),b.ajax({url:e,type:n,dataType:o,data:r,success:i})}}),b.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:yn,type:"GET",isLocal:Nn.test(mn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Dn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":b.parseJSON,"text xml":b.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Mn(Mn(e,b.ajaxSettings),t):Mn(b.ajaxSettings,e)},ajaxPrefilter:Hn(An),ajaxTransport:Hn(jn),ajax:function(e,n){"object"==typeof e&&(n=e,e=t),n=n||{};var r,i,o,a,s,u,l,c,p=b.ajaxSetup({},n),f=p.context||p,d=p.context&&(f.nodeType||f.jquery)?b(f):b.event,h=b.Deferred(),g=b.Callbacks("once memory"),m=p.statusCode||{},y={},v={},x=0,T="canceled",N={readyState:0,getResponseHeader:function(e){var t;if(2===x){if(!c){c={};while(t=Tn.exec(a))c[t[1].toLowerCase()]=t[2]}t=c[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===x?a:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return x||(e=v[n]=v[n]||e,y[e]=t),this},overrideMimeType:function(e){return x||(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>x)for(t in e)m[t]=[m[t],e[t]];else N.always(e[N.status]);return this},abort:function(e){var t=e||T;return l&&l.abort(t),k(0,t),this}};if(h.promise(N).complete=g.add,N.success=N.done,N.error=N.fail,p.url=((e||p.url||yn)+"").replace(xn,"").replace(kn,mn[1]+"//"),p.type=n.method||n.type||p.method||p.type,p.dataTypes=b.trim(p.dataType||"*").toLowerCase().match(w)||[""],null==p.crossDomain&&(r=En.exec(p.url.toLowerCase()),p.crossDomain=!(!r||r[1]===mn[1]&&r[2]===mn[2]&&(r[3]||("http:"===r[1]?80:443))==(mn[3]||("http:"===mn[1]?80:443)))),p.data&&p.processData&&"string"!=typeof p.data&&(p.data=b.param(p.data,p.traditional)),qn(An,p,n,N),2===x)return N;u=p.global,u&&0===b.active++&&b.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Cn.test(p.type),o=p.url,p.hasContent||(p.data&&(o=p.url+=(bn.test(o)?"&":"?")+p.data,delete p.data),p.cache===!1&&(p.url=wn.test(o)?o.replace(wn,"$1_="+vn++):o+(bn.test(o)?"&":"?")+"_="+vn++)),p.ifModified&&(b.lastModified[o]&&N.setRequestHeader("If-Modified-Since",b.lastModified[o]),b.etag[o]&&N.setRequestHeader("If-None-Match",b.etag[o])),(p.data&&p.hasContent&&p.contentType!==!1||n.contentType)&&N.setRequestHeader("Content-Type",p.contentType),N.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Dn+"; q=0.01":""):p.accepts["*"]);for(i in p.headers)N.setRequestHeader(i,p.headers[i]);if(p.beforeSend&&(p.beforeSend.call(f,N,p)===!1||2===x))return N.abort();T="abort";for(i in{success:1,error:1,complete:1})N[i](p[i]);if(l=qn(jn,p,n,N)){N.readyState=1,u&&d.trigger("ajaxSend",[N,p]),p.async&&p.timeout>0&&(s=setTimeout(function(){N.abort("timeout")},p.timeout));try{x=1,l.send(y,k)}catch(C){if(!(2>x))throw C;k(-1,C)}}else k(-1,"No Transport");function k(e,n,r,i){var c,y,v,w,T,C=n;2!==x&&(x=2,s&&clearTimeout(s),l=t,a=i||"",N.readyState=e>0?4:0,r&&(w=_n(p,N,r)),e>=200&&300>e||304===e?(p.ifModified&&(T=N.getResponseHeader("Last-Modified"),T&&(b.lastModified[o]=T),T=N.getResponseHeader("etag"),T&&(b.etag[o]=T)),204===e?(c=!0,C="nocontent"):304===e?(c=!0,C="notmodified"):(c=Fn(p,w),C=c.state,y=c.data,v=c.error,c=!v)):(v=C,(e||!C)&&(C="error",0>e&&(e=0))),N.status=e,N.statusText=(n||C)+"",c?h.resolveWith(f,[y,C,N]):h.rejectWith(f,[N,C,v]),N.statusCode(m),m=t,u&&d.trigger(c?"ajaxSuccess":"ajaxError",[N,p,c?y:v]),g.fireWith(f,[N,C]),u&&(d.trigger("ajaxComplete",[N,p]),--b.active||b.event.trigger("ajaxStop")))}return N},getScript:function(e,n){return b.get(e,t,n,"script")},getJSON:function(e,t,n){return b.get(e,t,n,"json")}});function _n(e,n,r){var i,o,a,s,u=e.contents,l=e.dataTypes,c=e.responseFields;for(s in c)s in r&&(n[c[s]]=r[s]);while("*"===l[0])l.shift(),o===t&&(o=e.mimeType||n.getResponseHeader("Content-Type"));if(o)for(s in u)if(u[s]&&u[s].test(o)){l.unshift(s);break}if(l[0]in r)a=l[0];else{for(s in r){if(!l[0]||e.converters[s+" "+l[0]]){a=s;break}i||(i=s)}a=a||i}return a?(a!==l[0]&&l.unshift(a),r[a]):t}function Fn(e,t){var n,r,i,o,a={},s=0,u=e.dataTypes.slice(),l=u[0];if(e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u[1])for(i in e.converters)a[i.toLowerCase()]=e.converters[i];for(;r=u[++s];)if("*"!==r){if("*"!==l&&l!==r){if(i=a[l+" "+r]||a["* "+r],!i)for(n in a)if(o=n.split(" "),o[1]===r&&(i=a[l+" "+o[0]]||a["* "+o[0]])){i===!0?i=a[n]:a[n]!==!0&&(r=o[0],u.splice(s--,0,r));break}if(i!==!0)if(i&&e["throws"])t=i(t);else try{t=i(t)}catch(c){return{state:"parsererror",error:i?c:"No conversion from "+l+" to "+r}}}l=r}return{state:"success",data:t}}b.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return b.globalEval(e),e}}}),b.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),b.ajaxTransport("script",function(e){if(e.crossDomain){var n,r=o.head||b("head")[0]||o.documentElement;return{send:function(t,i){n=o.createElement("script"),n.async=!0,e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,t){(t||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null,t||i(200,"success"))},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(t,!0)}}}});var On=[],Bn=/(=)\?(?=&|$)|\?\?/;b.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=On.pop()||b.expando+"_"+vn++;return this[e]=!0,e}}),b.ajaxPrefilter("json jsonp",function(n,r,i){var o,a,s,u=n.jsonp!==!1&&(Bn.test(n.url)?"url":"string"==typeof n.data&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Bn.test(n.data)&&"data");return u||"jsonp"===n.dataTypes[0]?(o=n.jsonpCallback=b.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,u?n[u]=n[u].replace(Bn,"$1"+o):n.jsonp!==!1&&(n.url+=(bn.test(n.url)?"&":"?")+n.jsonp+"="+o),n.converters["script json"]=function(){return s||b.error(o+" was not called"),s[0]},n.dataTypes[0]="json",a=e[o],e[o]=function(){s=arguments},i.always(function(){e[o]=a,n[o]&&(n.jsonpCallback=r.jsonpCallback,On.push(o)),s&&b.isFunction(a)&&a(s[0]),s=a=t}),"script"):t});var Pn,Rn,Wn=0,$n=e.ActiveXObject&&function(){var e;for(e in Pn)Pn[e](t,!0)};function In(){try{return new e.XMLHttpRequest}catch(t){}}function zn(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}b.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&In()||zn()}:In,Rn=b.ajaxSettings.xhr(),b.support.cors=!!Rn&&"withCredentials"in Rn,Rn=b.support.ajax=!!Rn,Rn&&b.ajaxTransport(function(n){if(!n.crossDomain||b.support.cors){var r;return{send:function(i,o){var a,s,u=n.xhr();if(n.username?u.open(n.type,n.url,n.async,n.username,n.password):u.open(n.type,n.url,n.async),n.xhrFields)for(s in n.xhrFields)u[s]=n.xhrFields[s];n.mimeType&&u.overrideMimeType&&u.overrideMimeType(n.mimeType),n.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");try{for(s in i)u.setRequestHeader(s,i[s])}catch(l){}u.send(n.hasContent&&n.data||null),r=function(e,i){var s,l,c,p;try{if(r&&(i||4===u.readyState))if(r=t,a&&(u.onreadystatechange=b.noop,$n&&delete Pn[a]),i)4!==u.readyState&&u.abort();else{p={},s=u.status,l=u.getAllResponseHeaders(),"string"==typeof u.responseText&&(p.text=u.responseText);try{c=u.statusText}catch(f){c=""}s||!n.isLocal||n.crossDomain?1223===s&&(s=204):s=p.text?200:404}}catch(d){i||o(-1,d)}p&&o(s,c,p,l)},n.async?4===u.readyState?setTimeout(r):(a=++Wn,$n&&(Pn||(Pn={},b(e).unload($n)),Pn[a]=r),u.onreadystatechange=r):r()},abort:function(){r&&r(t,!0)}}}});var Xn,Un,Vn=/^(?:toggle|show|hide)$/,Yn=RegExp("^(?:([+-])=|)("+x+")([a-z%]*)$","i"),Jn=/queueHooks$/,Gn=[nr],Qn={"*":[function(e,t){var n,r,i=this.createTween(e,t),o=Yn.exec(t),a=i.cur(),s=+a||0,u=1,l=20;if(o){if(n=+o[2],r=o[3]||(b.cssNumber[e]?"":"px"),"px"!==r&&s){s=b.css(i.elem,e,!0)||n||1;do u=u||".5",s/=u,b.style(i.elem,e,s+r);while(u!==(u=i.cur()/a)&&1!==u&&--l)}i.unit=r,i.start=s,i.end=o[1]?s+(o[1]+1)*n:n}return i}]};function Kn(){return setTimeout(function(){Xn=t}),Xn=b.now()}function Zn(e,t){b.each(t,function(t,n){var r=(Qn[t]||[]).concat(Qn["*"]),i=0,o=r.length;for(;o>i;i++)if(r[i].call(e,t,n))return})}function er(e,t,n){var r,i,o=0,a=Gn.length,s=b.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;var t=Xn||Kn(),n=Math.max(0,l.startTime+l.duration-t),r=n/l.duration||0,o=1-r,a=0,u=l.tweens.length;for(;u>a;a++)l.tweens[a].run(o);return s.notifyWith(e,[l,o,n]),1>o&&u?n:(s.resolveWith(e,[l]),!1)},l=s.promise({elem:e,props:b.extend({},t),opts:b.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Xn||Kn(),duration:n.duration,tweens:[],createTween:function(t,n){var r=b.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(r),r},stop:function(t){var n=0,r=t?l.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)l.tweens[n].run(1);return t?s.resolveWith(e,[l,t]):s.rejectWith(e,[l,t]),this}}),c=l.props;for(tr(c,l.opts.specialEasing);a>o;o++)if(r=Gn[o].call(l,e,c,l.opts))return r;return Zn(l,c),b.isFunction(l.opts.start)&&l.opts.start.call(e,l),b.fx.timer(b.extend(u,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function tr(e,t){var n,r,i,o,a;for(i in e)if(r=b.camelCase(i),o=t[r],n=e[i],b.isArray(n)&&(o=n[1],n=e[i]=n[0]),i!==r&&(e[r]=n,delete e[i]),a=b.cssHooks[r],a&&"expand"in a){n=a.expand(n),delete e[r];for(i in n)i in e||(e[i]=n[i],t[i]=o)}else t[r]=o}b.Animation=b.extend(er,{tweener:function(e,t){b.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");var n,r=0,i=e.length;for(;i>r;r++)n=e[r],Qn[n]=Qn[n]||[],Qn[n].unshift(t)},prefilter:function(e,t){t?Gn.unshift(e):Gn.push(e)}});function nr(e,t,n){var r,i,o,a,s,u,l,c,p,f=this,d=e.style,h={},g=[],m=e.nodeType&&nn(e);n.queue||(c=b._queueHooks(e,"fx"),null==c.unqueued&&(c.unqueued=0,p=c.empty.fire,c.empty.fire=function(){c.unqueued||p()}),c.unqueued++,f.always(function(){f.always(function(){c.unqueued--,b.queue(e,"fx").length||c.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],"inline"===b.css(e,"display")&&"none"===b.css(e,"float")&&(b.support.inlineBlockNeedsLayout&&"inline"!==un(e.nodeName)?d.zoom=1:d.display="inline-block")),n.overflow&&(d.overflow="hidden",b.support.shrinkWrapBlocks||f.always(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]}));for(i in t)if(a=t[i],Vn.exec(a)){if(delete t[i],u=u||"toggle"===a,a===(m?"hide":"show"))continue;g.push(i)}if(o=g.length){s=b._data(e,"fxshow")||b._data(e,"fxshow",{}),"hidden"in s&&(m=s.hidden),u&&(s.hidden=!m),m?b(e).show():f.done(function(){b(e).hide()}),f.done(function(){var t;b._removeData(e,"fxshow");for(t in h)b.style(e,t,h[t])});for(i=0;o>i;i++)r=g[i],l=f.createTween(r,m?s[r]:0),h[r]=s[r]||b.style(e,r),r in s||(s[r]=l.start,m&&(l.end=l.start,l.start="width"===r||"height"===r?1:0))}}function rr(e,t,n,r,i){return new rr.prototype.init(e,t,n,r,i)}b.Tween=rr,rr.prototype={constructor:rr,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(b.cssNumber[n]?"":"px")},cur:function(){var e=rr.propHooks[this.prop];return e&&e.get?e.get(this):rr.propHooks._default.get(this)},run:function(e){var t,n=rr.propHooks[this.prop];return this.pos=t=this.options.duration?b.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):rr.propHooks._default.set(this),this}},rr.prototype.init.prototype=rr.prototype,rr.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=b.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){b.fx.step[e.prop]?b.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[b.cssProps[e.prop]]||b.cssHooks[e.prop])?b.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},rr.propHooks.scrollTop=rr.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},b.each(["toggle","show","hide"],function(e,t){var n=b.fn[t];b.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(ir(t,!0),e,r,i)}}),b.fn.extend({fadeTo:function(e,t,n,r){return this.filter(nn).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=b.isEmptyObject(e),o=b.speed(t,n,r),a=function(){var t=er(this,b.extend({},e),o);a.finish=function(){t.stop(!0)},(i||b._data(this,"finish"))&&t.stop(!0)};return a.finish=a,i||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return"string"!=typeof e&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=null!=e&&e+"queueHooks",o=b.timers,a=b._data(this);if(n)a[n]&&a[n].stop&&i(a[n]);else for(n in a)a[n]&&a[n].stop&&Jn.test(n)&&i(a[n]);for(n=o.length;n--;)o[n].elem!==this||null!=e&&o[n].queue!==e||(o[n].anim.stop(r),t=!1,o.splice(n,1));(t||!r)&&b.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=b._data(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=b.timers,a=r?r.length:0;for(n.finish=!0,b.queue(this,e,[]),i&&i.cur&&i.cur.finish&&i.cur.finish.call(this),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;a>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}});function ir(e,t){var n,r={height:e},i=0;for(t=t?1:0;4>i;i+=2-t)n=Zt[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}b.each({slideDown:ir("show"),slideUp:ir("hide"),slideToggle:ir("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){b.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),b.speed=function(e,t,n){var r=e&&"object"==typeof e?b.extend({},e):{complete:n||!n&&t||b.isFunction(e)&&e,duration:e,easing:n&&t||t&&!b.isFunction(t)&&t};return r.duration=b.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in b.fx.speeds?b.fx.speeds[r.duration]:b.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){b.isFunction(r.old)&&r.old.call(this),r.queue&&b.dequeue(this,r.queue)},r},b.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},b.timers=[],b.fx=rr.prototype.init,b.fx.tick=function(){var e,n=b.timers,r=0;for(Xn=b.now();n.length>r;r++)e=n[r],e()||n[r]!==e||n.splice(r--,1);n.length||b.fx.stop(),Xn=t},b.fx.timer=function(e){e()&&b.timers.push(e)&&b.fx.start()},b.fx.interval=13,b.fx.start=function(){Un||(Un=setInterval(b.fx.tick,b.fx.interval))},b.fx.stop=function(){clearInterval(Un),Un=null},b.fx.speeds={slow:600,fast:200,_default:400},b.fx.step={},b.expr&&b.expr.filters&&(b.expr.filters.animated=function(e){return b.grep(b.timers,function(t){return e===t.elem}).length}),b.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){b.offset.setOffset(this,e,t)});var n,r,o={top:0,left:0},a=this[0],s=a&&a.ownerDocument;if(s)return n=s.documentElement,b.contains(n,a)?(typeof a.getBoundingClientRect!==i&&(o=a.getBoundingClientRect()),r=or(s),{top:o.top+(r.pageYOffset||n.scrollTop)-(n.clientTop||0),left:o.left+(r.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}):o},b.offset={setOffset:function(e,t,n){var r=b.css(e,"position");"static"===r&&(e.style.position="relative");var i=b(e),o=i.offset(),a=b.css(e,"top"),s=b.css(e,"left"),u=("absolute"===r||"fixed"===r)&&b.inArray("auto",[a,s])>-1,l={},c={},p,f;u?(c=i.position(),p=c.top,f=c.left):(p=parseFloat(a)||0,f=parseFloat(s)||0),b.isFunction(t)&&(t=t.call(e,n,o)),null!=t.top&&(l.top=t.top-o.top+p),null!=t.left&&(l.left=t.left-o.left+f),"using"in t?t.using.call(e,l):i.css(l)}},b.fn.extend({position:function(){if(this[0]){var e,t,n={top:0,left:0},r=this[0];return"fixed"===b.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),b.nodeName(e[0],"html")||(n=e.offset()),n.top+=b.css(e[0],"borderTopWidth",!0),n.left+=b.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-b.css(r,"marginTop",!0),left:t.left-n.left-b.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||o.documentElement;while(e&&!b.nodeName(e,"html")&&"static"===b.css(e,"position"))e=e.offsetParent;return e||o.documentElement})}}),b.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r=/Y/.test(n);b.fn[e]=function(i){return b.access(this,function(e,i,o){var a=or(e);return o===t?a?n in a?a[n]:a.document.documentElement[i]:e[i]:(a?a.scrollTo(r?b(a).scrollLeft():o,r?o:b(a).scrollTop()):e[i]=o,t)},e,i,arguments.length,null)}});function or(e){return b.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}b.each({Height:"height",Width:"width"},function(e,n){b.each({padding:"inner"+e,content:n,"":"outer"+e},function(r,i){b.fn[i]=function(i,o){var a=arguments.length&&(r||"boolean"!=typeof i),s=r||(i===!0||o===!0?"margin":"border");return b.access(this,function(n,r,i){var o;return b.isWindow(n)?n.document.documentElement["client"+e]:9===n.nodeType?(o=n.documentElement,Math.max(n.body["scroll"+e],o["scroll"+e],n.body["offset"+e],o["offset"+e],o["client"+e])):i===t?b.css(n,r,s):b.style(n,r,i,s)},n,a?i:t,a,null)}})}),e.jQuery=e.$=b,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return b})})(window);
/*! jQuery UI - v1.10.0 - 2013-01-18
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.position.js, jquery.ui.draggable.js, jquery.ui.droppable.js, jquery.ui.resizable.js, jquery.ui.selectable.js, jquery.ui.sortable.js, jquery.ui.accordion.js, jquery.ui.autocomplete.js, jquery.ui.button.js, jquery.ui.datepicker.js, jquery.ui.dialog.js, jquery.ui.menu.js, jquery.ui.progressbar.js, jquery.ui.slider.js, jquery.ui.spinner.js, jquery.ui.tabs.js, jquery.ui.tooltip.js, jquery.ui.effect.js, jquery.ui.effect-blind.js, jquery.ui.effect-bounce.js, jquery.ui.effect-clip.js, jquery.ui.effect-drop.js, jquery.ui.effect-explode.js, jquery.ui.effect-fade.js, jquery.ui.effect-fold.js, jquery.ui.effect-highlight.js, jquery.ui.effect-pulsate.js, jquery.ui.effect-scale.js, jquery.ui.effect-shake.js, jquery.ui.effect-slide.js, jquery.ui.effect-transfer.js
* Copyright (c) 2013 jQuery Foundation and other contributors Licensed MIT */

(function(e,t){function i(t,n){var r,i,o,u=t.nodeName.toLowerCase();return"area"===u?(r=t.parentNode,i=r.name,!t.href||!i||r.nodeName.toLowerCase()!=="map"?!1:(o=e("img[usemap=#"+i+"]")[0],!!o&&s(o))):(/input|select|textarea|button|object/.test(u)?!t.disabled:"a"===u?t.href||n:n)&&s(t)}function s(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return e.css(this,"visibility")==="hidden"}).length}var n=0,r=/^ui-id-\d+$/;e.ui=e.ui||{};if(e.ui.version)return;e.extend(e.ui,{version:"1.10.0",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({_focus:e.fn.focus,focus:function(t,n){return typeof t=="number"?this.each(function(){var r=this;setTimeout(function(){e(r).focus(),n&&n.call(r)},t)}):this._focus.apply(this,arguments)},scrollParent:function(){var t;return e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?t=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):t=this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length){var r=e(this[0]),i,s;while(r.length&&r[0]!==document){i=r.css("position");if(i==="absolute"||i==="relative"||i==="fixed"){s=parseInt(r.css("zIndex"),10);if(!isNaN(s)&&s!==0)return s}r=r.parent()}}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++n)})},removeUniqueId:function(){return this.each(function(){r.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,r){return!!e.data(t,r[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var n=e.attr(t,"tabindex"),r=isNaN(n);return(r||n>=0)&&i(t,!r)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(n,r){function u(t,n,r,s){return e.each(i,function(){n-=parseFloat(e.css(t,"padding"+this))||0,r&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),s&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var i=r==="Width"?["Left","Right"]:["Top","Bottom"],s=r.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+r]=function(n){return n===t?o["inner"+r].call(this):this.each(function(){e(this).css(s,u(this,n)+"px")})},e.fn["outer"+r]=function(t,n){return typeof t!="number"?o["outer"+r].call(this,t):this.each(function(){e(this).css(s,u(this,t,!0,n)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(n){return arguments.length?t.call(this,e.camelCase(n)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,n,r){var i,s=e.ui[t].prototype;for(i in r)s.plugins[i]=s.plugins[i]||[],s.plugins[i].push([n,r[i]])},call:function(e,t,n){var r,i=e.plugins[t];if(!i||!e.element[0].parentNode||e.element[0].parentNode.nodeType===11)return;for(r=0;r<i.length;r++)e.options[i[r][0]]&&i[r][1].apply(e.element,n)}},hasScroll:function(t,n){if(e(t).css("overflow")==="hidden")return!1;var r=n&&n==="left"?"scrollLeft":"scrollTop",i=!1;return t[r]>0?!0:(t[r]=1,i=t[r]>0,t[r]=0,i)}})})(jQuery);(function(e,t){var n=0,r=Array.prototype.slice,i=e.cleanData;e.cleanData=function(t){for(var n=0,r;(r=t[n])!=null;n++)try{e(r).triggerHandler("remove")}catch(s){}i(t)},e.widget=function(t,n,r){var i,s,o,u,a={},f=t.split(".")[0];t=t.split(".")[1],i=f+"-"+t,r||(r=n,n=e.Widget),e.expr[":"][i.toLowerCase()]=function(t){return!!e.data(t,i)},e[f]=e[f]||{},s=e[f][t],o=e[f][t]=function(e,t){if(!this._createWidget)return new o(e,t);arguments.length&&this._createWidget(e,t)},e.extend(o,s,{version:r.version,_proto:e.extend({},r),_childConstructors:[]}),u=new n,u.options=e.widget.extend({},u.options),e.each(r,function(t,r){if(!e.isFunction(r)){a[t]=r;return}a[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},i=function(e){return n.prototype[t].apply(this,e)};return function(){var t=this._super,n=this._superApply,s;return this._super=e,this._superApply=i,s=r.apply(this,arguments),this._super=t,this._superApply=n,s}}()}),o.prototype=e.widget.extend(u,{widgetEventPrefix:s?u.widgetEventPrefix:t},a,{constructor:o,namespace:f,widgetName:t,widgetFullName:i}),s?(e.each(s._childConstructors,function(t,n){var r=n.prototype;e.widget(r.namespace+"."+r.widgetName,o,n._proto)}),delete s._childConstructors):n._childConstructors.push(o),e.widget.bridge(t,o)},e.widget.extend=function(n){var i=r.call(arguments,1),s=0,o=i.length,u,a;for(;s<o;s++)for(u in i[s])a=i[s][u],i[s].hasOwnProperty(u)&&a!==t&&(e.isPlainObject(a)?n[u]=e.isPlainObject(n[u])?e.widget.extend({},n[u],a):e.widget.extend({},a):n[u]=a);return n},e.widget.bridge=function(n,i){var s=i.prototype.widgetFullName||n;e.fn[n]=function(o){var u=typeof o=="string",a=r.call(arguments,1),f=this;return o=!u&&a.length?e.widget.extend.apply(null,[o].concat(a)):o,u?this.each(function(){var r,i=e.data(this,s);if(!i)return e.error("cannot call methods on "+n+" prior to initialization; "+"attempted to call method '"+o+"'");if(!e.isFunction(i[o])||o.charAt(0)==="_")return e.error("no such method '"+o+"' for "+n+" widget instance");r=i[o].apply(i,a);if(r!==i&&r!==t)return f=r&&r.jquery?f.pushStack(r.get()):r,!1}):this.each(function(){var t=e.data(this,s);t?t.option(o||{})._init():e.data(this,s,new i(o,this))}),f}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,r){r=e(r||this.defaultElement||this)[0],this.element=e(r),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),r!==this&&(e.data(r,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===r&&this.destroy()}}),this.document=e(r.style?r.ownerDocument:r.document||r),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(n,r){var i=n,s,o,u;if(arguments.length===0)return e.widget.extend({},this.options);if(typeof n=="string"){i={},s=n.split("."),n=s.shift();if(s.length){o=i[n]=e.widget.extend({},this.options[n]);for(u=0;u<s.length-1;u++)o[s[u]]=o[s[u]]||{},o=o[s[u]];n=s.pop();if(r===t)return o[n]===t?null:o[n];o[n]=r}else{if(r===t)return this.options[n]===t?null:this.options[n];i[n]=r}}return this._setOptions(i),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,e==="disabled"&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,n,r){var i,s=this;typeof t!="boolean"&&(r=n,n=t,t=!1),r?(n=i=e(n),this.bindings=this.bindings.add(n)):(r=n,n=this.element,i=this.widget()),e.each(r,function(r,o){function u(){if(!t&&(s.options.disabled===!0||e(this).hasClass("ui-state-disabled")))return;return(typeof o=="string"?s[o]:o).apply(s,arguments)}typeof o!="string"&&(u.guid=o.guid=o.guid||u.guid||e.guid++);var a=r.match(/^(\w+)\s*(.*)$/),f=a[1]+s.eventNamespace,l=a[2];l?i.delegate(l,f,u):n.bind(f,u)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function n(){return(typeof e=="string"?r[e]:e).apply(r,arguments)}var r=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,r){var i,s,o=this.options[t];r=r||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],s=n.originalEvent;if(s)for(i in s)i in n||(n[i]=s[i]);return this.element.trigger(n,r),!(e.isFunction(o)&&o.apply(this.element[0],[n].concat(r))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(r,i,s){typeof i=="string"&&(i={effect:i});var o,u=i?i===!0||typeof i=="number"?n:i.effect||n:t;i=i||{},typeof i=="number"&&(i={duration:i}),o=!e.isEmptyObject(i),i.complete=s,i.delay&&r.delay(i.delay),o&&e.effects&&e.effects.effect[u]?r[t](i):u!==t&&r[u]?r[u](i.duration,i.easing,s):r.queue(function(n){e(this)[t](),s&&s.call(r[0]),n()})}})})(jQuery);(function(e,t){var n=!1;e(document).mouseup(function(){n=!1}),e.widget("ui.mouse",{version:"1.10.0",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent"))return e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(n)return;this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var r=this,i=t.which===1,s=typeof this.options.cancel=="string"&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;if(!i||s||!this._mouseCapture(t))return!0;this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){r.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)){this._mouseStarted=this._mouseStart(t)!==!1;if(!this._mouseStarted)return t.preventDefault(),!0}return!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return r._mouseMove(e)},this._mouseUpDelegate=function(e){return r._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),n=!0,!0},_mouseMove:function(t){return e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})(jQuery);(function(e,t){function h(e,t,n){return[parseInt(e[0],10)*(l.test(e[0])?t/100:1),parseInt(e[1],10)*(l.test(e[1])?n/100:1)]}function p(t,n){return parseInt(e.css(t,n),10)||0}function d(t){var n=t[0];return n.nodeType===9?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(n)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:n.preventDefault?{width:0,height:0,offset:{top:n.pageY,left:n.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.ui=e.ui||{};var n,r=Math.max,i=Math.abs,s=Math.round,o=/left|center|right/,u=/top|center|bottom/,a=/[\+\-]\d+%?/,f=/^\w+/,l=/%$/,c=e.fn.position;e.position={scrollbarWidth:function(){if(n!==t)return n;var r,i,s=e("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=s.children()[0];return e("body").append(s),r=o.offsetWidth,s.css("overflow","scroll"),i=o.offsetWidth,r===i&&(i=s[0].clientWidth),s.remove(),n=r-i},getScrollInfo:function(t){var n=t.isWindow?"":t.element.css("overflow-x"),r=t.isWindow?"":t.element.css("overflow-y"),i=n==="scroll"||n==="auto"&&t.width<t.element[0].scrollWidth,s=r==="scroll"||r==="auto"&&t.height<t.element[0].scrollHeight;return{width:i?e.position.scrollbarWidth():0,height:s?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var n=e(t||window),r=e.isWindow(n[0]);return{element:n,isWindow:r,offset:n.offset()||{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:r?n.width():n.outerWidth(),height:r?n.height():n.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return c.apply(this,arguments);t=e.extend({},t);var n,l,v,m,g,y,b=e(t.of),w=e.position.getWithinInfo(t.within),E=e.position.getScrollInfo(w),S=(t.collision||"flip").split(" "),x={};return y=d(b),b[0].preventDefault&&(t.at="left top"),l=y.width,v=y.height,m=y.offset,g=e.extend({},m),e.each(["my","at"],function(){var e=(t[this]||"").split(" "),n,r;e.length===1&&(e=o.test(e[0])?e.concat(["center"]):u.test(e[0])?["center"].concat(e):["center","center"]),e[0]=o.test(e[0])?e[0]:"center",e[1]=u.test(e[1])?e[1]:"center",n=a.exec(e[0]),r=a.exec(e[1]),x[this]=[n?n[0]:0,r?r[0]:0],t[this]=[f.exec(e[0])[0],f.exec(e[1])[0]]}),S.length===1&&(S[1]=S[0]),t.at[0]==="right"?g.left+=l:t.at[0]==="center"&&(g.left+=l/2),t.at[1]==="bottom"?g.top+=v:t.at[1]==="center"&&(g.top+=v/2),n=h(x.at,l,v),g.left+=n[0],g.top+=n[1],this.each(function(){var o,u,a=e(this),f=a.outerWidth(),c=a.outerHeight(),d=p(this,"marginLeft"),y=p(this,"marginTop"),T=f+d+p(this,"marginRight")+E.width,N=c+y+p(this,"marginBottom")+E.height,C=e.extend({},g),k=h(x.my,a.outerWidth(),a.outerHeight());t.my[0]==="right"?C.left-=f:t.my[0]==="center"&&(C.left-=f/2),t.my[1]==="bottom"?C.top-=c:t.my[1]==="center"&&(C.top-=c/2),C.left+=k[0],C.top+=k[1],e.support.offsetFractions||(C.left=s(C.left),C.top=s(C.top)),o={marginLeft:d,marginTop:y},e.each(["left","top"],function(r,i){e.ui.position[S[r]]&&e.ui.position[S[r]][i](C,{targetWidth:l,targetHeight:v,elemWidth:f,elemHeight:c,collisionPosition:o,collisionWidth:T,collisionHeight:N,offset:[n[0]+k[0],n[1]+k[1]],my:t.my,at:t.at,within:w,elem:a})}),t.using&&(u=function(e){var n=m.left-C.left,s=n+l-f,o=m.top-C.top,u=o+v-c,h={target:{element:b,left:m.left,top:m.top,width:l,height:v},element:{element:a,left:C.left,top:C.top,width:f,height:c},horizontal:s<0?"left":n>0?"right":"center",vertical:u<0?"top":o>0?"bottom":"middle"};l<f&&i(n+s)<l&&(h.horizontal="center"),v<c&&i(o+u)<v&&(h.vertical="middle"),r(i(n),i(s))>r(i(o),i(u))?h.important="horizontal":h.important="vertical",t.using.call(this,e,h)}),a.offset(e.extend(C,{using:u}))})},e.ui.position={fit:{left:function(e,t){var n=t.within,i=n.isWindow?n.scrollLeft:n.offset.left,s=n.width,o=e.left-t.collisionPosition.marginLeft,u=i-o,a=o+t.collisionWidth-s-i,f;t.collisionWidth>s?u>0&&a<=0?(f=e.left+u+t.collisionWidth-s-i,e.left+=u-f):a>0&&u<=0?e.left=i:u>a?e.left=i+s-t.collisionWidth:e.left=i:u>0?e.left+=u:a>0?e.left-=a:e.left=r(e.left-o,e.left)},top:function(e,t){var n=t.within,i=n.isWindow?n.scrollTop:n.offset.top,s=t.within.height,o=e.top-t.collisionPosition.marginTop,u=i-o,a=o+t.collisionHeight-s-i,f;t.collisionHeight>s?u>0&&a<=0?(f=e.top+u+t.collisionHeight-s-i,e.top+=u-f):a>0&&u<=0?e.top=i:u>a?e.top=i+s-t.collisionHeight:e.top=i:u>0?e.top+=u:a>0?e.top-=a:e.top=r(e.top-o,e.top)}},flip:{left:function(e,t){var n=t.within,r=n.offset.left+n.scrollLeft,s=n.width,o=n.isWindow?n.scrollLeft:n.offset.left,u=e.left-t.collisionPosition.marginLeft,a=u-o,f=u+t.collisionWidth-s-o,l=t.my[0]==="left"?-t.elemWidth:t.my[0]==="right"?t.elemWidth:0,c=t.at[0]==="left"?t.targetWidth:t.at[0]==="right"?-t.targetWidth:0,h=-2*t.offset[0],p,d;if(a<0){p=e.left+l+c+h+t.collisionWidth-s-r;if(p<0||p<i(a))e.left+=l+c+h}else if(f>0){d=e.left-t.collisionPosition.marginLeft+l+c+h-o;if(d>0||i(d)<f)e.left+=l+c+h}},top:function(e,t){var n=t.within,r=n.offset.top+n.scrollTop,s=n.height,o=n.isWindow?n.scrollTop:n.offset.top,u=e.top-t.collisionPosition.marginTop,a=u-o,f=u+t.collisionHeight-s-o,l=t.my[1]==="top",c=l?-t.elemHeight:t.my[1]==="bottom"?t.elemHeight:0,h=t.at[1]==="top"?t.targetHeight:t.at[1]==="bottom"?-t.targetHeight:0,p=-2*t.offset[1],d,v;a<0?(v=e.top+c+h+p+t.collisionHeight-s-r,e.top+c+h+p>a&&(v<0||v<i(a))&&(e.top+=c+h+p)):f>0&&(d=e.top-t.collisionPosition.marginTop+c+h+p-o,e.top+c+h+p>f&&(d>0||i(d)<f)&&(e.top+=c+h+p))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,n,r,i,s,o=document.getElementsByTagName("body")[0],u=document.createElement("div");t=document.createElement(o?"div":"body"),r={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},o&&e.extend(r,{position:"absolute",left:"-1000px",top:"-1000px"});for(s in r)t.style[s]=r[s];t.appendChild(u),n=o||document.documentElement,n.insertBefore(t,n.firstChild),u.style.cssText="position: absolute; left: 10.7432222px;",i=e(u).offset().left,e.support.offsetFractions=i>10&&i<11,t.innerHTML="",n.removeChild(t)}()})(jQuery);(function(e,t){e.widget("ui.draggable",e.ui.mouse,{version:"1.10.0",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){this.options.helper==="original"&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var n=this.options;return this.helper||n.disabled||e(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(e(n.iframeFix===!0?"iframe":n.iframeFix).each(function(){e("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var n=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),n.containment&&this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,n){this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute");if(!n){var r=this._uiHash();if(this._trigger("drag",t,r)===!1)return this._mouseUp({}),!1;this.position=r.position}if(!this.options.axis||this.options.axis!=="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!=="x")this.helper[0].style.top=this.position.top+"px";return e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var n,r=this,i=!1,s=!1;e.ui.ddmanager&&!this.options.dropBehaviour&&(s=e.ui.ddmanager.drop(this,t)),this.dropped&&(s=this.dropped,this.dropped=!1),n=this.element[0];while(n&&(n=n.parentNode))n===document&&(i=!0);return!i&&this.options.helper==="original"?!1:(this.options.revert==="invalid"&&!s||this.options.revert==="valid"&&s||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,s)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){r._trigger("stop",t)!==!1&&r._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1)},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){var n=!this.options.handle||!e(this.options.handle,this.element).length?!0:!1;return e(this.options.handle,this.element).find("*").addBack().each(function(){this===t.target&&(n=!0)}),n},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t])):n.helper==="clone"?this.element.clone().removeAttr("id"):this.element;return r.parents("body").length||r.appendTo(n.appendTo==="parent"?this.element[0].parentNode:n.appendTo),r[0]!==this.element[0]&&!/(fixed|absolute)/.test(r.css("position"))&&r.css("position","absolute"),r},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();this.cssPosition==="absolute"&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&e.ui.ie)t={top:0,left:0};return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,r,i=this.options;i.containment==="parent"&&(i.containment=this.helper[0].parentNode);if(i.containment==="document"||i.containment==="window")this.containment=[i.containment==="document"?0:e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,i.containment==="document"?0:e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(i.containment==="document"?0:e(window).scrollLeft())+e(i.containment==="document"?document:window).width()-this.helperProportions.width-this.margins.left,(i.containment==="document"?0:e(window).scrollTop())+(e(i.containment==="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(i.containment)&&i.containment.constructor!==Array){n=e(i.containment),r=n[0];if(!r)return;t=e(r).css("overflow")!=="hidden",this.containment=[(parseInt(e(r).css("borderLeftWidth"),10)||0)+(parseInt(e(r).css("paddingLeft"),10)||0),(parseInt(e(r).css("borderTopWidth"),10)||0)+(parseInt(e(r).css("paddingTop"),10)||0),(t?Math.max(r.scrollWidth,r.offsetWidth):r.offsetWidth)-(parseInt(e(r).css("borderLeftWidth"),10)||0)-(parseInt(e(r).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(r.scrollHeight,r.offsetHeight):r.offsetHeight)-(parseInt(e(r).css("borderTopWidth"),10)||0)-(parseInt(e(r).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=n}else i.containment.constructor===Array&&(this.containment=i.containment)},_convertPositionTo:function(t,n){n||(n=this.position);var r=t==="absolute"?1:-1,i=this.cssPosition!=="absolute"||this.scrollParent[0]!==document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,s=/(html|body)/i.test(i[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():s?0:i.scrollTop())*r,left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():s?0:i.scrollLeft())*r}},_generatePosition:function(t){var n,r,i,s,o=this.options,u=this.cssPosition!=="absolute"||this.scrollParent[0]!==document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(u[0].tagName),f=t.pageX,l=t.pageY;return this.originalPosition&&(this.containment&&(this.relative_container?(r=this.relative_container.offset(),n=[this.containment[0]+r.left,this.containment[1]+r.top,this.containment[2]+r.left,this.containment[3]+r.top]):n=this.containment,t.pageX-this.offset.click.left<n[0]&&(f=n[0]+this.offset.click.left),t.pageY-this.offset.click.top<n[1]&&(l=n[1]+this.offset.click.top),t.pageX-this.offset.click.left>n[2]&&(f=n[2]+this.offset.click.left),t.pageY-this.offset.click.top>n[3]&&(l=n[3]+this.offset.click.top)),o.grid&&(i=o.grid[1]?this.originalPageY+Math.round((l-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,l=n?i-this.offset.click.top>=n[1]||i-this.offset.click.top>n[3]?i:i-this.offset.click.top>=n[1]?i-o.grid[1]:i+o.grid[1]:i,s=o.grid[0]?this.originalPageX+Math.round((f-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,f=n?s-this.offset.click.left>=n[0]||s-this.offset.click.left>n[2]?s:s-this.offset.click.left>=n[0]?s-o.grid[0]:s+o.grid[0]:s)),{top:l-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():a?0:u.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():a?0:u.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!==this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,n,r){return r=r||this._uiHash(),e.ui.plugin.call(this,t,[n,r]),t==="drag"&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,n,r)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,n){var r=e(this).data("ui-draggable"),i=r.options,s=e.extend({},n,{item:r.element});r.sortables=[],e(i.connectToSortable).each(function(){var n=e.data(this,"ui-sortable");n&&!n.options.disabled&&(r.sortables.push({instance:n,shouldRevert:n.options.revert}),n.refreshPositions(),n._trigger("activate",t,s))})},stop:function(t,n){var r=e(this).data("ui-draggable"),i=e.extend({},n,{item:r.element});e.each(r.sortables,function(){this.instance.isOver?(this.instance.isOver=0,r.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,r.options.helper==="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,i))})},drag:function(t,n){var r=e(this).data("ui-draggable"),i=this;e.each(r.sortables,function(){var s=!1,o=this;this.instance.positionAbs=r.positionAbs,this.instance.helperProportions=r.helperProportions,this.instance.offset.click=r.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(s=!0,e.each(r.sortables,function(){return this.instance.positionAbs=r.positionAbs,this.instance.helperProportions=r.helperProportions,this.instance.offset.click=r.offset.click,this!==o&&this.instance._intersectsWith(this.instance.containerCache)&&e.ui.contains(o.instance.element[0],this.instance.element[0])&&(s=!1),s})),s?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(i).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return n.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=r.offset.click.top,this.instance.offset.click.left=r.offset.click.left,this.instance.offset.parent.left-=r.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=r.offset.parent.top-this.instance.offset.parent.top,r._trigger("toSortable",t),r.dropped=this.instance.element,r.currentItem=r.element,this.instance.fromOutside=r),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),r._trigger("fromSortable",t),r.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(){var t=e("body"),n=e(this).data("ui-draggable").options;t.css("cursor")&&(n._cursor=t.css("cursor")),t.css("cursor",n.cursor)},stop:function(){var t=e(this).data("ui-draggable").options;t._cursor&&e("body").css("cursor",t._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,n){var r=e(n.helper),i=e(this).data("ui-draggable").options;r.css("opacity")&&(i._opacity=r.css("opacity")),r.css("opacity",i.opacity)},stop:function(t,n){var r=e(this).data("ui-draggable").options;r._opacity&&e(n.helper).css("opacity",r._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(){var t=e(this).data("ui-draggable");t.scrollParent[0]!==document&&t.scrollParent[0].tagName!=="HTML"&&(t.overflowOffset=t.scrollParent.offset())},drag:function(t){var n=e(this).data("ui-draggable"),r=n.options,i=!1;if(n.scrollParent[0]!==document&&n.scrollParent[0].tagName!=="HTML"){if(!r.axis||r.axis!=="x")n.overflowOffset.top+n.scrollParent[0].offsetHeight-t.pageY<r.scrollSensitivity?n.scrollParent[0].scrollTop=i=n.scrollParent[0].scrollTop+r.scrollSpeed:t.pageY-n.overflowOffset.top<r.scrollSensitivity&&(n.scrollParent[0].scrollTop=i=n.scrollParent[0].scrollTop-r.scrollSpeed);if(!r.axis||r.axis!=="y")n.overflowOffset.left+n.scrollParent[0].offsetWidth-t.pageX<r.scrollSensitivity?n.scrollParent[0].scrollLeft=i=n.scrollParent[0].scrollLeft+r.scrollSpeed:t.pageX-n.overflowOffset.left<r.scrollSensitivity&&(n.scrollParent[0].scrollLeft=i=n.scrollParent[0].scrollLeft-r.scrollSpeed)}else{if(!r.axis||r.axis!=="x")t.pageY-e(document).scrollTop()<r.scrollSensitivity?i=e(document).scrollTop(e(document).scrollTop()-r.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<r.scrollSensitivity&&(i=e(document).scrollTop(e(document).scrollTop()+r.scrollSpeed));if(!r.axis||r.axis!=="y")t.pageX-e(document).scrollLeft()<r.scrollSensitivity?i=e(document).scrollLeft(e(document).scrollLeft()-r.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<r.scrollSensitivity&&(i=e(document).scrollLeft(e(document).scrollLeft()+r.scrollSpeed))}i!==!1&&e.ui.ddmanager&&!r.dropBehaviour&&e.ui.ddmanager.prepareOffsets(n,t)}}),e.ui.plugin.add("draggable","snap",{start:function(){var t=e(this).data("ui-draggable"),n=t.options;t.snapElements=[],e(n.snap.constructor!==String?n.snap.items||":data(ui-draggable)":n.snap).each(function(){var n=e(this),r=n.offset();this!==t.element[0]&&t.snapElements.push({item:this,width:n.outerWidth(),height:n.outerHeight(),top:r.top,left:r.left})})},drag:function(t,n){var r,i,s,o,u,a,f,l,c,h,p=e(this).data("ui-draggable"),d=p.options,v=d.snapTolerance,m=n.offset.left,g=m+p.helperProportions.width,y=n.offset.top,b=y+p.helperProportions.height;for(c=p.snapElements.length-1;c>=0;c--){u=p.snapElements[c].left,a=u+p.snapElements[c].width,f=p.snapElements[c].top,l=f+p.snapElements[c].height;if(!(u-v<m&&m<a+v&&f-v<y&&y<l+v||u-v<m&&m<a+v&&f-v<b&&b<l+v||u-v<g&&g<a+v&&f-v<y&&y<l+v||u-v<g&&g<a+v&&f-v<b&&b<l+v)){p.snapElements[c].snapping&&p.options.snap.release&&p.options.snap.release.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[c].item})),p.snapElements[c].snapping=!1;continue}d.snapMode!=="inner"&&(r=Math.abs(f-b)<=v,i=Math.abs(l-y)<=v,s=Math.abs(u-g)<=v,o=Math.abs(a-m)<=v,r&&(n.position.top=p._convertPositionTo("relative",{top:f-p.helperProportions.height,left:0}).top-p.margins.top),i&&(n.position.top=p._convertPositionTo("relative",{top:l,left:0}).top-p.margins.top),s&&(n.position.left=p._convertPositionTo("relative",{top:0,left:u-p.helperProportions.width}).left-p.margins.left),o&&(n.position.left=p._convertPositionTo("relative",{top:0,left:a}).left-p.margins.left)),h=r||i||s||o,d.snapMode!=="outer"&&(r=Math.abs(f-y)<=v,i=Math.abs(l-b)<=v,s=Math.abs(u-m)<=v,o=Math.abs(a-g)<=v,r&&(n.position.top=p._convertPositionTo("relative",{top:f,left:0}).top-p.margins.top),i&&(n.position.top=p._convertPositionTo("relative",{top:l-p.helperProportions.height,left:0}).top-p.margins.top),s&&(n.position.left=p._convertPositionTo("relative",{top:0,left:u}).left-p.margins.left),o&&(n.position.left=p._convertPositionTo("relative",{top:0,left:a-p.helperProportions.width}).left-p.margins.left)),!p.snapElements[c].snapping&&(r||i||s||o||h)&&p.options.snap.snap&&p.options.snap.snap.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[c].item})),p.snapElements[c].snapping=r||i||s||o||h}}}),e.ui.plugin.add("draggable","stack",{start:function(){var t,n=e(this).data("ui-draggable").options,r=e.makeArray(e(n.stack)).sort(function(t,n){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(n).css("zIndex"),10)||0)});if(!r.length)return;t=parseInt(r[0].style.zIndex,10)||0,e(r).each(function(e){this.style.zIndex=t+e}),this[0].style.zIndex=t+r.length}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,n){var r=e(n.helper),i=e(this).data("ui-draggable").options;r.css("zIndex")&&(i._zIndex=r.css("zIndex")),r.css("zIndex",i.zIndex)},stop:function(t,n){var r=e(this).data("ui-draggable").options;r._zIndex&&e(n.helper).css("zIndex",r._zIndex)}})})(jQuery);(function(e,t){function n(e,t,n){return e>t&&e<t+n}e.widget("ui.droppable",{version:"1.10.0",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t=this.options,n=t.accept;this.isover=!1,this.isout=!0,this.accept=e.isFunction(n)?n:function(e){return e.is(n)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},e.ui.ddmanager.droppables[t.scope]=e.ui.ddmanager.droppables[t.scope]||[],e.ui.ddmanager.droppables[t.scope].push(this),t.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){var t=0,n=e.ui.ddmanager.droppables[this.options.scope];for(;t<n.length;t++)n[t]===this&&n.splice(t,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,n){t==="accept"&&(this.accept=e.isFunction(n)?n:function(e){return e.is(n)}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),n&&this._trigger("activate",t,this.ui(n))},_deactivate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),n&&this._trigger("deactivate",t,this.ui(n))},_over:function(t){var n=e.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]===this.element[0])return;this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(n)))},_out:function(t){var n=e.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]===this.element[0])return;this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(n)))},_drop:function(t,n){var r=n||e.ui.ddmanager.current,i=!1;return!r||(r.currentItem||r.element)[0]===this.element[0]?!1:(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var t=e.data(this,"ui-droppable");if(t.options.greedy&&!t.options.disabled&&t.options.scope===r.options.scope&&t.accept.call(t.element[0],r.currentItem||r.element)&&e.ui.intersect(r,e.extend(t,{offset:t.element.offset()}),t.options.tolerance))return i=!0,!1}),i?!1:this.accept.call(this.element[0],r.currentItem||r.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(r)),this.element):!1)},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(e,t,r){if(!t.offset)return!1;var i,s,o=(e.positionAbs||e.position.absolute).left,u=o+e.helperProportions.width,a=(e.positionAbs||e.position.absolute).top,f=a+e.helperProportions.height,l=t.offset.left,c=l+t.proportions.width,h=t.offset.top,p=h+t.proportions.height;switch(r){case"fit":return l<=o&&u<=c&&h<=a&&f<=p;case"intersect":return l<o+e.helperProportions.width/2&&u-e.helperProportions.width/2<c&&h<a+e.helperProportions.height/2&&f-e.helperProportions.height/2<p;case"pointer":return i=(e.positionAbs||e.position.absolute).left+(e.clickOffset||e.offset.click).left,s=(e.positionAbs||e.position.absolute).top+(e.clickOffset||e.offset.click).top,n(s,h,t.proportions.height)&&n(i,l,t.proportions.width);case"touch":return(a>=h&&a<=p||f>=h&&f<=p||a<h&&f>p)&&(o>=l&&o<=c||u>=l&&u<=c||o<l&&u>c);default:return!1}},e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,n){var r,i,s=e.ui.ddmanager.droppables[t.options.scope]||[],o=n?n.type:null,u=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(r=0;r<s.length;r++){if(s[r].options.disabled||t&&!s[r].accept.call(s[r].element[0],t.currentItem||t.element))continue;for(i=0;i<u.length;i++)if(u[i]===s[r].element[0]){s[r].proportions.height=0;continue e}s[r].visible=s[r].element.css("display")!=="none";if(!s[r].visible)continue;o==="mousedown"&&s[r]._activate.call(s[r],n),s[r].offset=s[r].element.offset(),s[r].proportions={width:s[r].element[0].offsetWidth,height:s[r].element[0].offsetHeight}}},drop:function(t,n){var r=!1;return e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options)return;!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance)&&(r=this._drop.call(this,n)||r),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,n))}),r},dragStart:function(t,n){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)})},drag:function(t,n){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,n),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible)return;var r,i,s,o=e.ui.intersect(t,this,this.options.tolerance),u=!o&&this.isover?"isout":o&&!this.isover?"isover":null;if(!u)return;this.options.greedy&&(i=this.options.scope,s=this.element.parents(":data(ui-droppable)").filter(function(){return e.data(this,"ui-droppable").options.scope===i}),s.length&&(r=e.data(s[0],"ui-droppable"),r.greedyChild=u==="isover")),r&&u==="isover"&&(r.isover=!1,r.isout=!0,r._out.call(r,n)),this[u]=!0,this[u==="isout"?"isover":"isout"]=!1,this[u==="isover"?"_over":"_out"].call(this,n),r&&u==="isout"&&(r.isout=!1,r.isover=!0,r._over.call(r,n))})},dragStop:function(t,n){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)}}})(jQuery);(function(e,t){function n(e){return parseInt(e,10)||0}function r(e){return!isNaN(parseInt(e,10))}e.widget("ui.resizable",e.ui.mouse,{version:"1.10.0",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var t,n,r,i,s,o=this,u=this.options;this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!u.aspectRatio,aspectRatio:u.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:u.helper||u.ghost||u.animate?u.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=u.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");if(this.handles.constructor===String){this.handles==="all"&&(this.handles="n,e,s,w,se,sw,ne,nw"),t=this.handles.split(","),this.handles={};for(n=0;n<t.length;n++)r=e.trim(t[n]),s="ui-resizable-"+r,i=e("<div class='ui-resizable-handle "+s+"'></div>"),i.css({zIndex:u.zIndex}),"se"===r&&i.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[r]=".ui-resizable-"+r,this.element.append(i)}this._renderAxis=function(t){var n,r,i,s;t=t||this.element;for(n in this.handles){this.handles[n].constructor===String&&(this.handles[n]=e(this.handles[n],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(r=e(this.handles[n],this.element),s=/sw|ne|nw|se|n|s/.test(n)?r.outerHeight():r.outerWidth(),i=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join(""),t.css(i,s),this._proportionallyResize());if(!e(this.handles[n]).length)continue}},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){o.resizing||(this.className&&(i=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),o.axis=i&&i[1]?i[1]:"se")}),u.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){if(u.disabled)return;e(this).removeClass("ui-resizable-autohide"),o._handles.show()}).mouseleave(function(){if(u.disabled)return;o.resizing||(e(this).addClass("ui-resizable-autohide"),o._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,n=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(n(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),n(this.originalElement),this},_mouseCapture:function(t){var n,r,i=!1;for(n in this.handles){r=e(this.handles[n])[0];if(r===t.target||e.contains(r,t.target))i=!0}return!this.options.disabled&&i},_mouseStart:function(t){var r,i,s,o=this.options,u=this.element.position(),a=this.element;return this.resizing=!0,/absolute/.test(a.css("position"))?a.css({position:"absolute",top:a.css("top"),left:a.css("left")}):a.is(".ui-draggable")&&a.css({position:"absolute",top:u.top,left:u.left}),this._renderProxy(),r=n(this.helper.css("left")),i=n(this.helper.css("top")),o.containment&&(r+=e(o.containment).scrollLeft()||0,i+=e(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:r,top:i},this.size=this._helper?{width:a.outerWidth(),height:a.outerHeight()}:{width:a.width(),height:a.height()},this.originalSize=this._helper?{width:a.outerWidth(),height:a.outerHeight()}:{width:a.width(),height:a.height()},this.originalPosition={left:r,top:i},this.sizeDiff={width:a.outerWidth()-a.width(),height:a.outerHeight()-a.height()},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio=typeof o.aspectRatio=="number"?o.aspectRatio:this.originalSize.width/this.originalSize.height||1,s=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor",s==="auto"?this.axis+"-resize":s),a.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var n,r=this.helper,i={},s=this.originalMousePosition,o=this.axis,u=this.position.top,a=this.position.left,f=this.size.width,l=this.size.height,c=t.pageX-s.left||0,h=t.pageY-s.top||0,p=this._change[o];if(!p)return!1;n=p.apply(this,[t,c,h]),this._updateVirtualBoundaries(t.shiftKey);if(this._aspectRatio||t.shiftKey)n=this._updateRatio(n,t);return n=this._respectSize(n,t),this._updateCache(n),this._propagate("resize",t),this.position.top!==u&&(i.top=this.position.top+"px"),this.position.left!==a&&(i.left=this.position.left+"px"),this.size.width!==f&&(i.width=this.size.width+"px"),this.size.height!==l&&(i.height=this.size.height+"px"),r.css(i),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(i)||this._trigger("resize",t,this.ui()),!1},_mouseStop:function(t){this.resizing=!1;var n,r,i,s,o,u,a,f=this.options,l=this;return this._helper&&(n=this._proportionallyResizeElements,r=n.length&&/textarea/i.test(n[0].nodeName),i=r&&e.ui.hasScroll(n[0],"left")?0:l.sizeDiff.height,s=r?0:l.sizeDiff.width,o={width:l.helper.width()-s,height:l.helper.height()-i},u=parseInt(l.element.css("left"),10)+(l.position.left-l.originalPosition.left)||null,a=parseInt(l.element.css("top"),10)+(l.position.top-l.originalPosition.top)||null,f.animate||this.element.css(e.extend(o,{top:a,left:u})),l.helper.height(l.size.height),l.helper.width(l.size.width),this._helper&&!f.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(e){var t,n,i,s,o,u=this.options;o={minWidth:r(u.minWidth)?u.minWidth:0,maxWidth:r(u.maxWidth)?u.maxWidth:Infinity,minHeight:r(u.minHeight)?u.minHeight:0,maxHeight:r(u.maxHeight)?u.maxHeight:Infinity};if(this._aspectRatio||e)t=o.minHeight*this.aspectRatio,i=o.minWidth/this.aspectRatio,n=o.maxHeight*this.aspectRatio,s=o.maxWidth/this.aspectRatio,t>o.minWidth&&(o.minWidth=t),i>o.minHeight&&(o.minHeight=i),n<o.maxWidth&&(o.maxWidth=n),s<o.maxHeight&&(o.maxHeight=s);this._vBoundaries=o},_updateCache:function(e){this.offset=this.helper.offset(),r(e.left)&&(this.position.left=e.left),r(e.top)&&(this.position.top=e.top),r(e.height)&&(this.size.height=e.height),r(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,n=this.size,i=this.axis;return r(e.height)?e.width=e.height*this.aspectRatio:r(e.width)&&(e.height=e.width/this.aspectRatio),i==="sw"&&(e.left=t.left+(n.width-e.width),e.top=null),i==="nw"&&(e.top=t.top+(n.height-e.height),e.left=t.left+(n.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,n=this.axis,i=r(e.width)&&t.maxWidth&&t.maxWidth<e.width,s=r(e.height)&&t.maxHeight&&t.maxHeight<e.height,o=r(e.width)&&t.minWidth&&t.minWidth>e.width,u=r(e.height)&&t.minHeight&&t.minHeight>e.height,a=this.originalPosition.left+this.originalSize.width,f=this.position.top+this.size.height,l=/sw|nw|w/.test(n),c=/nw|ne|n/.test(n);return o&&(e.width=t.minWidth),u&&(e.height=t.minHeight),i&&(e.width=t.maxWidth),s&&(e.height=t.maxHeight),o&&l&&(e.left=a-t.minWidth),i&&l&&(e.left=a-t.maxWidth),u&&c&&(e.top=f-t.minHeight),s&&c&&(e.top=f-t.maxHeight),!e.width&&!e.height&&!e.left&&e.top?e.top=null:!e.width&&!e.height&&!e.top&&e.left&&(e.left=null),e},_proportionallyResize:function(){if(!this._proportionallyResizeElements.length)return;var e,t,n,r,i,s=this.helper||this.element;for(e=0;e<this._proportionallyResizeElements.length;e++){i=this._proportionallyResizeElements[e];if(!this.borderDif){this.borderDif=[],n=[i.css("borderTopWidth"),i.css("borderRightWidth"),i.css("borderBottomWidth"),i.css("borderLeftWidth")],r=[i.css("paddingTop"),i.css("paddingRight"),i.css("paddingBottom"),i.css("paddingLeft")];for(t=0;t<n.length;t++)this.borderDif[t]=(parseInt(n[t],10)||0)+(parseInt(r[t],10)||0)}i.css({height:s.height()-this.borderDif[0]-this.borderDif[2]||0,width:s.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var t=this.element,n=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var n=this.originalSize,r=this.originalPosition;return{left:r.left+t,width:n.width-t}},n:function(e,t,n){var r=this.originalSize,i=this.originalPosition;return{top:i.top+n,height:r.height-n}},s:function(e,t,n){return{height:this.originalSize.height+n}},se:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},sw:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,n,r]))},ne:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},nw:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,n,r]))}},_propagate:function(t,n){e.ui.plugin.call(this,t,[n,this.ui()]),t!=="resize"&&this._trigger(t,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var n=e(this).data("ui-resizable"),r=n.options,i=n._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),o=s&&e.ui.hasScroll(i[0],"left")?0:n.sizeDiff.height,u=s?0:n.sizeDiff.width,a={width:n.size.width-u,height:n.size.height-o},f=parseInt(n.element.css("left"),10)+(n.position.left-n.originalPosition.left)||null,l=parseInt(n.element.css("top"),10)+(n.position.top-n.originalPosition.top)||null;n.element.animate(e.extend(a,l&&f?{top:l,left:f}:{}),{duration:r.animateDuration,easing:r.animateEasing,step:function(){var r={width:parseInt(n.element.css("width"),10),height:parseInt(n.element.css("height"),10),top:parseInt(n.element.css("top"),10),left:parseInt(n.element.css("left"),10)};i&&i.length&&e(i[0]).css({width:r.width,height:r.height}),n._updateCache(r),n._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var t,r,i,s,o,u,a,f=e(this).data("ui-resizable"),l=f.options,c=f.element,h=l.containment,p=h instanceof e?h.get(0):/parent/.test(h)?c.parent().get(0):h;if(!p)return;f.containerElement=e(p),/document/.test(h)||h===document?(f.containerOffset={left:0,top:0},f.containerPosition={left:0,top:0},f.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(t=e(p),r=[],e(["Top","Right","Left","Bottom"]).each(function(e,i){r[e]=n(t.css("padding"+i))}),f.containerOffset=t.offset(),f.containerPosition=t.position(),f.containerSize={height:t.innerHeight()-r[3],width:t.innerWidth()-r[1]},i=f.containerOffset,s=f.containerSize.height,o=f.containerSize.width,u=e.ui.hasScroll(p,"left")?p.scrollWidth:o,a=e.ui.hasScroll(p)?p.scrollHeight:s,f.parentData={element:p,left:i.left,top:i.top,width:u,height:a})},resize:function(t){var n,r,i,s,o=e(this).data("ui-resizable"),u=o.options,a=o.containerOffset,f=o.position,l=o._aspectRatio||t.shiftKey,c={top:0,left:0},h=o.containerElement;h[0]!==document&&/static/.test(h.css("position"))&&(c=a),f.left<(o._helper?a.left:0)&&(o.size.width=o.size.width+(o._helper?o.position.left-a.left:o.position.left-c.left),l&&(o.size.height=o.size.width/o.aspectRatio),o.position.left=u.helper?a.left:0),f.top<(o._helper?a.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-a.top:o.position.top),l&&(o.size.width=o.size.height*o.aspectRatio),o.position.top=o._helper?a.top:0),o.offset.left=o.parentData.left+o.position.left,o.offset.top=o.parentData.top+o.position.top,n=Math.abs((o._helper?o.offset.left-c.left:o.offset.left-c.left)+o.sizeDiff.width),r=Math.abs((o._helper?o.offset.top-c.top:o.offset.top-a.top)+o.sizeDiff.height),i=o.containerElement.get(0)===o.element.parent().get(0),s=/relative|absolute/.test(o.containerElement.css("position")),i&&s&&(n-=o.parentData.left),n+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-n,l&&(o.size.height=o.size.width/o.aspectRatio)),r+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-r,l&&(o.size.width=o.size.height*o.aspectRatio))},stop:function(){var t=e(this).data("ui-resizable"),n=t.options,r=t.containerOffset,i=t.containerPosition,s=t.containerElement,o=e(t.helper),u=o.offset(),a=o.outerWidth()-t.sizeDiff.width,f=o.outerHeight()-t.sizeDiff.height;t._helper&&!n.animate&&/relative/.test(s.css("position"))&&e(this).css({left:u.left-i.left-r.left,width:a,height:f}),t._helper&&!n.animate&&/static/.test(s.css("position"))&&e(this).css({left:u.left-i.left-r.left,width:a,height:f})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).data("ui-resizable"),n=t.options,r=function(t){e(t).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};typeof n.alsoResize=="object"&&!n.alsoResize.parentNode?n.alsoResize.length?(n.alsoResize=n.alsoResize[0],r(n.alsoResize)):e.each(n.alsoResize,function(e){r(e)}):r(n.alsoResize)},resize:function(t,n){var r=e(this).data("ui-resizable"),i=r.options,s=r.originalSize,o=r.originalPosition,u={height:r.size.height-s.height||0,width:r.size.width-s.width||0,top:r.position.top-o.top||0,left:r.position.left-o.left||0},a=function(t,r){e(t).each(function(){var t=e(this),i=e(this).data("ui-resizable-alsoresize"),s={},o=r&&r.length?r:t.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(o,function(e,t){var n=(i[t]||0)+(u[t]||0);n&&n>=0&&(s[t]=n||null)}),t.css(s)})};typeof i.alsoResize=="object"&&!i.alsoResize.nodeType?e.each(i.alsoResize,function(e,t){a(e,t)}):a(i.alsoResize)},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).data("ui-resizable"),n=t.options,r=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:r.height,width:r.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof n.ghost=="string"?n.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).data("ui-resizable");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).data("ui-resizable");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t=e(this).data("ui-resizable"),n=t.options,r=t.size,i=t.originalSize,s=t.originalPosition,o=t.axis,u=typeof n.grid=="number"?[n.grid,n.grid]:n.grid,a=u[0]||1,f=u[1]||1,l=Math.round((r.width-i.width)/a)*a,c=Math.round((r.height-i.height)/f)*f,h=i.width+l,p=i.height+c,d=n.maxWidth&&n.maxWidth<h,v=n.maxHeight&&n.maxHeight<p,m=n.minWidth&&n.minWidth>h,g=n.minHeight&&n.minHeight>p;n.grid=u,m&&(h+=a),g&&(p+=f),d&&(h-=a),v&&(p-=f),/^(se|s|e)$/.test(o)?(t.size.width=h,t.size.height=p):/^(ne)$/.test(o)?(t.size.width=h,t.size.height=p,t.position.top=s.top-c):/^(sw)$/.test(o)?(t.size.width=h,t.size.height=p,t.position.left=s.left-l):(t.size.width=h,t.size.height=p,t.position.top=s.top-c,t.position.left=s.left-l)}})})(jQuery);(function(e,t){e.widget("ui.selectable",e.ui.mouse,{version:"1.10.0",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t,n=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){t=e(n.options.filter,n.element[0]),t.addClass("ui-selectee"),t.each(function(){var t=e(this),n=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:n.left,top:n.top,right:n.left+t.outerWidth(),bottom:n.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=t.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(t){var n=this,r=this.options;this.opos=[t.pageX,t.pageY];if(this.options.disabled)return;this.selectees=e(r.filter,this.element[0]),this._trigger("start",t),e(r.appendTo).append(this.helper),this.helper.css({left:t.pageX,top:t.pageY,width:0,height:0}),r.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var r=e.data(this,"selectable-item");r.startselected=!0,!t.metaKey&&!t.ctrlKey&&(r.$element.removeClass("ui-selected"),r.selected=!1,r.$element.addClass("ui-unselecting"),r.unselecting=!0,n._trigger("unselecting",t,{unselecting:r.element}))}),e(t.target).parents().addBack().each(function(){var r,i=e.data(this,"selectable-item");if(i)return r=!t.metaKey&&!t.ctrlKey||!i.$element.hasClass("ui-selected"),i.$element.removeClass(r?"ui-unselecting":"ui-selected").addClass(r?"ui-selecting":"ui-unselecting"),i.unselecting=!r,i.selecting=r,i.selected=r,r?n._trigger("selecting",t,{selecting:i.element}):n._trigger("unselecting",t,{unselecting:i.element}),!1})},_mouseDrag:function(t){this.dragged=!0;if(this.options.disabled)return;var n,r=this,i=this.options,s=this.opos[0],o=this.opos[1],u=t.pageX,a=t.pageY;return s>u&&(n=u,u=s,s=n),o>a&&(n=a,a=o,o=n),this.helper.css({left:s,top:o,width:u-s,height:a-o}),this.selectees.each(function(){var n=e.data(this,"selectable-item"),f=!1;if(!n||n.element===r.element[0])return;i.tolerance==="touch"?f=!(n.left>u||n.right<s||n.top>a||n.bottom<o):i.tolerance==="fit"&&(f=n.left>s&&n.right<u&&n.top>o&&n.bottom<a),f?(n.selected&&(n.$element.removeClass("ui-selected"),n.selected=!1),n.unselecting&&(n.$element.removeClass("ui-unselecting"),n.unselecting=!1),n.selecting||(n.$element.addClass("ui-selecting"),n.selecting=!0,r._trigger("selecting",t,{selecting:n.element}))):(n.selecting&&((t.metaKey||t.ctrlKey)&&n.startselected?(n.$element.removeClass("ui-selecting"),n.selecting=!1,n.$element.addClass("ui-selected"),n.selected=!0):(n.$element.removeClass("ui-selecting"),n.selecting=!1,n.startselected&&(n.$element.addClass("ui-unselecting"),n.unselecting=!0),r._trigger("unselecting",t,{unselecting:n.element}))),n.selected&&!t.metaKey&&!t.ctrlKey&&!n.startselected&&(n.$element.removeClass("ui-selected"),n.selected=!1,n.$element.addClass("ui-unselecting"),n.unselecting=!0,r._trigger("unselecting",t,{unselecting:n.element})))}),!1},_mouseStop:function(t){var n=this;return this.dragged=!1,e(".ui-unselecting",this.element[0]).each(function(){var r=e.data(this,"selectable-item");r.$element.removeClass("ui-unselecting"),r.unselecting=!1,r.startselected=!1,n._trigger("unselected",t,{unselected:r.element})}),e(".ui-selecting",this.element[0]).each(function(){var r=e.data(this,"selectable-item");r.$element.removeClass("ui-selecting").addClass("ui-selected"),r.selecting=!1,r.selected=!0,r.startselected=!0,n._trigger("selected",t,{selected:r.element})}),this._trigger("stop",t),this.helper.remove(),!1}})})(jQuery);(function(e,t){function n(e,t,n){return e>t&&e<t+n}e.widget("ui.sortable",e.ui.mouse,{version:"1.10.0",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?e.axis==="x"||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,n){t==="disabled"?(this.options[t]=n,this.widget().toggleClass("ui-sortable-disabled",!!n)):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,n){var r=null,i=!1,s=this;if(this.reverting)return!1;if(this.options.disabled||this.options.type==="static")return!1;this._refreshItems(t),e(t.target).parents().each(function(){if(e.data(this,s.widgetName+"-item")===s)return r=e(this),!1}),e.data(t.target,s.widgetName+"-item")===s&&(r=e(t.target));if(!r)return!1;if(this.options.handle&&!n){e(this.options.handle,r).find("*").addBack().each(function(){this===t.target&&(i=!0)});if(!i)return!1}return this.currentItem=r,this._removeCurrentsFromItems(),!0},_mouseStart:function(t,n,r){var i,s=this.options;this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,s.cursorAt&&this._adjustOffsetFromHelper(s.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),s.containment&&this._setContainment(),s.cursor&&(e("body").css("cursor")&&(this._storedCursor=e("body").css("cursor")),e("body").css("cursor",s.cursor)),s.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",s.opacity)),s.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",s.zIndex)),this.scrollParent[0]!==document&&this.scrollParent[0].tagName!=="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions();if(!r)for(i=this.containers.length-1;i>=0;i--)this.containers[i]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!s.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var n,r,i,s,o=this.options,u=!1;this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&this.scrollParent[0].tagName!=="HTML"?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=u=this.scrollParent[0].scrollTop+o.scrollSpeed:t.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=u=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=u=this.scrollParent[0].scrollLeft+o.scrollSpeed:t.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=u=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(t.pageY-e(document).scrollTop()<o.scrollSensitivity?u=e(document).scrollTop(e(document).scrollTop()-o.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<o.scrollSensitivity&&(u=e(document).scrollTop(e(document).scrollTop()+o.scrollSpeed)),t.pageX-e(document).scrollLeft()<o.scrollSensitivity?u=e(document).scrollLeft(e(document).scrollLeft()-o.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<o.scrollSensitivity&&(u=e(document).scrollLeft(e(document).scrollLeft()+o.scrollSpeed))),u!==!1&&e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!=="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!=="x")this.helper[0].style.top=this.position.top+"px";for(n=this.items.length-1;n>=0;n--){r=this.items[n],i=r.item[0],s=this._intersectsWithPointer(r);if(!s)continue;if(r.instance!==this.currentContainer)continue;if(i!==this.currentItem[0]&&this.placeholder[s===1?"next":"prev"]()[0]!==i&&!e.contains(this.placeholder[0],i)&&(this.options.type==="semi-dynamic"?!e.contains(this.element[0],i):!0)){this.direction=s===1?"down":"up";if(this.options.tolerance!=="pointer"&&!this._intersectsWithSides(r))break;this._rearrange(t,r),this._trigger("change",t,this._uiHash());break}}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,n){if(!t)return;e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t);if(this.options.revert){var r=this,i=this.placeholder.offset();this.reverting=!0,e(this.helper).animate({left:i.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft),top:i.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){r._clear(t)})}else this._clear(t,n);return!1},cancel:function(){if(this.dragging){this._mouseUp({target:null}),this.options.helper==="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.options.helper!=="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},e(n).each(function(){var n=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);n&&r.push((t.key||n[1]+"[]")+"="+(t.key&&t.expression?n[1]:n[2]))}),!r.length&&t.key&&r.push(t.key+"="),r.join("&")},toArray:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},n.each(function(){r.push(e(t.item||this).attr(t.attribute||"id")||"")}),r},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,r=this.positionAbs.top,i=r+this.helperProportions.height,s=e.left,o=s+e.width,u=e.top,a=u+e.height,f=this.offset.click.top,l=this.offset.click.left,c=r+f>u&&r+f<a&&t+l>s&&t+l<o;return this.options.tolerance==="pointer"||this.options.forcePointerForContainers||this.options.tolerance!=="pointer"&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?c:s<t+this.helperProportions.width/2&&n-this.helperProportions.width/2<o&&u<r+this.helperProportions.height/2&&i-this.helperProportions.height/2<a},_intersectsWithPointer:function(e){var t=this.options.axis==="x"||n(this.positionAbs.top+this.offset.click.top,e.top,e.height),r=this.options.axis==="y"||n(this.positionAbs.left+this.offset.click.left,e.left,e.width),i=t&&r,s=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return i?this.floating?o&&o==="right"||s==="down"?2:1:s&&(s==="down"?2:1):!1},_intersectsWithSides:function(e){var t=n(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),r=n(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),i=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return this.floating&&s?s==="right"&&r||s==="left"&&!r:i&&(i==="down"&&t||i==="up"&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return e!==0&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return e!==0&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var n,r,i,s,o=[],u=[],a=this._connectWith();if(a&&t)for(n=a.length-1;n>=0;n--){i=e(a[n]);for(r=i.length-1;r>=0;r--)s=e.data(i[r],this.widgetFullName),s&&s!==this&&!s.options.disabled&&u.push([e.isFunction(s.options.items)?s.options.items.call(s.element):e(s.options.items,s.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),s])}u.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(n=u.length-1;n>=0;n--)u[n][0].each(function(){o.push(this)});return e(o)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var n=0;n<t.length;n++)if(t[n]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var n,r,i,s,o,u,a,f,l=this.items,c=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],h=this._connectWith();if(h&&this.ready)for(n=h.length-1;n>=0;n--){i=e(h[n]);for(r=i.length-1;r>=0;r--)s=e.data(i[r],this.widgetFullName),s&&s!==this&&!s.options.disabled&&(c.push([e.isFunction(s.options.items)?s.options.items.call(s.element[0],t,{item:this.currentItem}):e(s.options.items,s.element),s]),this.containers.push(s))}for(n=c.length-1;n>=0;n--){o=c[n][1],u=c[n][0];for(r=0,f=u.length;r<f;r++)a=e(u[r]),a.data(this.widgetName+"-item",o),l.push({item:a,instance:o,width:0,height:0,left:0,top:0})}},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var n,r,i,s;for(n=this.items.length-1;n>=0;n--){r=this.items[n];if(r.instance!==this.currentContainer&&this.currentContainer&&r.item[0]!==this.currentItem[0])continue;i=this.options.toleranceElement?e(this.options.toleranceElement,r.item):r.item,t||(r.width=i.outerWidth(),r.height=i.outerHeight()),s=i.offset(),r.left=s.left,r.top=s.top}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(n=this.containers.length-1;n>=0;n--)s=this.containers[n].element.offset(),this.containers[n].containerCache.left=s.left,this.containers[n].containerCache.top=s.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var n,r=t.options;if(!r.placeholder||r.placeholder.constructor===String)n=r.placeholder,r.placeholder={element:function(){var r=e(document.createElement(t.currentItem[0].nodeName)).addClass(n||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return n||(r.style.visibility="hidden"),r},update:function(e,i){if(n&&!r.forcePlaceholderSize)return;i.height()||i.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),i.width()||i.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10))}};t.placeholder=e(r.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),r.placeholder.update(t,t.placeholder)},_contactContainers:function(t){var n,r,i,s,o,u,a,f,l,c=null,h=null;for(n=this.containers.length-1;n>=0;n--){if(e.contains(this.currentItem[0],this.containers[n].element[0]))continue;if(this._intersectsWith(this.containers[n].containerCache)){if(c&&e.contains(this.containers[n].element[0],c.element[0]))continue;c=this.containers[n],h=n}else this.containers[n].containerCache.over&&(this.containers[n]._trigger("out",t,this._uiHash(this)),this.containers[n].containerCache.over=0)}if(!c)return;if(this.containers.length===1)this.containers[h]._trigger("over",t,this._uiHash(this)),this.containers[h].containerCache.over=1;else{i=1e4,s=null,o=this.containers[h].floating?"left":"top",u=this.containers[h].floating?"width":"height",a=this.positionAbs[o]+this.offset.click[o];for(r=this.items.length-1;r>=0;r--){if(!e.contains(this.containers[h].element[0],this.items[r].item[0]))continue;if(this.items[r].item[0]===this.currentItem[0])continue;f=this.items[r].item.offset()[o],l=!1,Math.abs(f-a)>Math.abs(f+this.items[r][u]-a)&&(l=!0,f+=this.items[r][u]),Math.abs(f-a)<i&&(i=Math.abs(f-a),s=this.items[r],this.direction=l?"up":"down")}if(!s&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[h],s?this._rearrange(t,s,null,!0):this._rearrange(t,null,this.containers[h].element,!0),this._trigger("change",t,this._uiHash()),this.containers[h]._trigger("change",t,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[h]._trigger("over",t,this._uiHash(this)),this.containers[h].containerCache.over=1}},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t,this.currentItem])):n.helper==="clone"?this.currentItem.clone():this.currentItem;return r.parents("body").length||e(n.appendTo!=="parent"?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(r[0]),r[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!r[0].style.width||n.forceHelperSize)&&r.width(this.currentItem.width()),(!r[0].style.height||n.forceHelperSize)&&r.height(this.currentItem.height()),r},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();this.cssPosition==="absolute"&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&e.ui.ie)t={top:0,left:0};return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,r,i=this.options;i.containment==="parent"&&(i.containment=this.helper[0].parentNode);if(i.containment==="document"||i.containment==="window")this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e(i.containment==="document"?document:window).width()-this.helperProportions.width-this.margins.left,(e(i.containment==="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];/^(document|window|parent)$/.test(i.containment)||(t=e(i.containment)[0],n=e(i.containment).offset(),r=e(t).css("overflow")!=="hidden",this.containment=[n.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,n.left+(r?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(r?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,n){n||(n=this.position);var r=t==="absolute"?1:-1,i=this.cssPosition!=="absolute"||this.scrollParent[0]!==document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,s=/(html|body)/i.test(i[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():s?0:i.scrollTop())*r,left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():s?0:i.scrollLeft())*r}},_generatePosition:function(t){var n,r,i=this.options,s=t.pageX,o=t.pageY,u=this.cssPosition!=="absolute"||this.scrollParent[0]!==document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(u[0].tagName);return this.cssPosition==="relative"&&(this.scrollParent[0]===document||this.scrollParent[0]===this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(s=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(s=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),i.grid&&(n=this.originalPageY+Math.round((o-this.originalPageY)/i.grid[1])*i.grid[1],o=this.containment?n-this.offset.click.top>=this.containment[1]&&n-this.offset.click.top<=this.containment[3]?n:n-this.offset.click.top>=this.containment[1]?n-i.grid[1]:n+i.grid[1]:n,r=this.originalPageX+Math.round((s-this.originalPageX)/i.grid[0])*i.grid[0],s=this.containment?r-this.offset.click.left>=this.containment[0]&&r-this.offset.click.left<=this.containment[2]?r:r-this.offset.click.left>=this.containment[0]?r-i.grid[0]:r+i.grid[0]:r)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():a?0:u.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():a?0:u.scrollLeft())}},_rearrange:function(e,t,n,r){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],this.direction==="down"?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var i=this.counter;this._delay(function(){i===this.counter&&this.refreshPositions(!r)})},_clear:function(t,n){this.reverting=!1;var r,i=[];!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null;if(this.helper[0]===this.currentItem[0]){for(r in this._storedCSS)if(this._storedCSS[r]==="auto"||this._storedCSS[r]==="static")this._storedCSS[r]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!n&&i.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!==this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!==this.currentItem.parent()[0])&&!n&&i.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(n||(i.push(function(e){this._trigger("remove",e,this._uiHash())}),i.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),i.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer))));for(r=this.containers.length-1;r>=0;r--)n||i.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[r])),this.containers[r].containerCache.over&&(i.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[r])),this.containers[r].containerCache.over=0);this._storedCursor&&e("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex",this._storedZIndex==="auto"?"":this._storedZIndex),this.dragging=!1;if(this.cancelHelperRemoval){if(!n){this._trigger("beforeStop",t,this._uiHash());for(r=0;r<i.length;r++)i[r].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!1}n||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null;if(!n){for(r=0;r<i.length;r++)i[r].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var n=t||this;return{helper:n.helper,placeholder:n.placeholder||e([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:t?t.element:null}}})})(jQuery);(function(e,t){var n=0,r={},i={};r.height=r.paddingTop=r.paddingBottom=r.borderTopWidth=r.borderBottomWidth="hide",i.height=i.paddingTop=i.paddingBottom=i.borderTopWidth=i.borderBottomWidth="show",e.widget("ui.accordion",{version:"1.10.0",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var t=this.options;this.prevShow=this.prevHide=e(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),!t.collapsible&&(t.active===!1||t.active==null)&&(t.active=0),this._processPanels(),t.active<0&&(t.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,content:this.active.length?this.active.next():e()}},_createIcons:function(){var t=this.options.icons;t&&(e("<span>").addClass("ui-accordion-header-icon ui-icon "+t.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this._destroyIcons(),e=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this.options.heightStyle!=="content"&&e.css("height","")},_setOption:function(e,t){if(e==="active"){this._activate(t);return}e==="event"&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(e,t),e==="collapsible"&&!t&&this.options.active===!1&&this._activate(0),e==="icons"&&(this._destroyIcons(),t&&this._createIcons()),e==="disabled"&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!t)},_keydown:function(t){if(t.altKey||t.ctrlKey)return;var n=e.ui.keyCode,r=this.headers.length,i=this.headers.index(t.target),s=!1;switch(t.keyCode){case n.RIGHT:case n.DOWN:s=this.headers[(i+1)%r];break;case n.LEFT:case n.UP:s=this.headers[(i-1+r)%r];break;case n.SPACE:case n.ENTER:this._eventHandler(t);break;case n.HOME:s=this.headers[0];break;case n.END:s=this.headers[r-1]}s&&(e(t.target).attr("tabIndex",-1),e(s).attr("tabIndex",0),s.focus(),t.preventDefault())},_panelKeyDown:function(t){t.keyCode===e.ui.keyCode.UP&&t.ctrlKey&&e(t.currentTarget).prev().focus()},refresh:function(){var t=this.options;this._processPanels();if(t.active===!1&&t.collapsible===!0||!this.headers.length)t.active=!1,this.active=e();t.active===!1?this._activate(0):this.active.length&&!e.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(t.active=!1,this.active=e()):this._activate(Math.max(0,t.active-1)):t.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide()},_refresh:function(){var t,r=this.options,i=r.heightStyle,s=this.element.parent(),o=this.accordionId="ui-accordion-"+(this.element.attr("id")||++n);this.active=this._findActive(r.active).addClass("ui-accordion-header-active ui-state-active").toggleClass("ui-corner-all ui-corner-top"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(t){var n=e(this),r=n.attr("id"),i=n.next(),s=i.attr("id");r||(r=o+"-header-"+t,n.attr("id",r)),s||(s=o+"-panel-"+t,i.attr("id",s)),n.attr("aria-controls",s),i.attr("aria-labelledby",r)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(r.event),i==="fill"?(t=s.height(),this.element.siblings(":visible").each(function(){var n=e(this),r=n.css("position");if(r==="absolute"||r==="fixed")return;t-=n.outerHeight(!0)}),this.headers.each(function(){t-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,t-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):i==="auto"&&(t=0,this.headers.next().each(function(){t=Math.max(t,e(this).css("height","").height())}).height(t))},_activate:function(t){var n=this._findActive(t)[0];if(n===this.active[0])return;n=n||this.active[0],this._eventHandler({target:n,currentTarget:n,preventDefault:e.noop})},_findActive:function(t){return typeof t=="number"?this.headers.eq(t):e()},_setupEvents:function(t){var n={keydown:"_keydown"};t&&e.each(t.split(" "),function(e,t){n[t]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,n),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(t){var n=this.options,r=this.active,i=e(t.currentTarget),s=i[0]===r[0],o=s&&n.collapsible,u=o?e():i.next(),a=r.next(),f={oldHeader:r,oldPanel:a,newHeader:o?e():i,newPanel:u};t.preventDefault();if(s&&!n.collapsible||this._trigger("beforeActivate",t,f)===!1)return;n.active=o?!1:this.headers.index(i),this.active=s?e():i,this._toggle(f),r.removeClass("ui-accordion-header-active ui-state-active"),n.icons&&r.children(".ui-accordion-header-icon").removeClass(n.icons.activeHeader).addClass(n.icons.header),s||(i.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),n.icons&&i.children(".ui-accordion-header-icon").removeClass(n.icons.header).addClass(n.icons.activeHeader),i.next().addClass("ui-accordion-content-active"))},_toggle:function(t){var n=t.newPanel,r=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=n,this.prevHide=r,this.options.animate?this._animate(n,r,t):(r.hide(),n.show(),this._toggleComplete(t)),r.attr({"aria-expanded":"false","aria-hidden":"true"}),r.prev().attr("aria-selected","false"),n.length&&r.length?r.prev().attr("tabIndex",-1):n.length&&this.headers.filter(function(){return e(this).attr("tabIndex")===0}).attr("tabIndex",-1),n.attr({"aria-expanded":"true","aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(e,t,n){var s,o,u,a=this,f=0,l=e.length&&(!t.length||e.index()<t.index()),c=this.options.animate||{},h=l&&c.down||c,p=function(){a._toggleComplete(n)};typeof h=="number"&&(u=h),typeof h=="string"&&(o=h),o=o||h.easing||c.easing,u=u||h.duration||c.duration;if(!t.length)return e.animate(i,u,o,p);if(!e.length)return t.animate(r,u,o,p);s=e.show().outerHeight(),t.animate(r,{duration:u,easing:o,step:function(e,t){t.now=Math.round(e)}}),e.hide().animate(i,{duration:u,easing:o,complete:p,step:function(e,n){n.now=Math.round(e),n.prop!=="height"?f+=n.now:a.options.heightStyle!=="content"&&(n.now=Math.round(s-t.outerHeight()-f),f=0)}})},_toggleComplete:function(e){var t=e.oldPanel;t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),t.length&&(t.parent()[0].className=t.parent()[0].className),this._trigger("activate",null,e)}})})(jQuery);(function(e,t){var n=0;e.widget("ui.autocomplete",{version:"1.10.0",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var t,n,r;this.isMultiLine=this._isMultiLine(),this.valueMethod=this.element[this.element.is("input,textarea")?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(i){if(this.element.prop("readOnly")){t=!0,r=!0,n=!0;return}t=!1,r=!1,n=!1;var s=e.ui.keyCode;switch(i.keyCode){case s.PAGE_UP:t=!0,this._move("previousPage",i);break;case s.PAGE_DOWN:t=!0,this._move("nextPage",i);break;case s.UP:t=!0,this._keyEvent("previous",i);break;case s.DOWN:t=!0,this._keyEvent("next",i);break;case s.ENTER:case s.NUMPAD_ENTER:this.menu.active&&(t=!0,i.preventDefault(),this.menu.select(i));break;case s.TAB:this.menu.active&&this.menu.select(i);break;case s.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(i),i.preventDefault());break;default:n=!0,this._searchTimeout(i)}},keypress:function(r){if(t){t=!1,r.preventDefault();return}if(n)return;var i=e.ui.keyCode;switch(r.keyCode){case i.PAGE_UP:this._move("previousPage",r);break;case i.PAGE_DOWN:this._move("nextPage",r);break;case i.UP:this._keyEvent("previous",r);break;case i.DOWN:this._keyEvent("next",r)}},input:function(e){if(r){r=!1,e.preventDefault();return}this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){if(this.cancelBlur){delete this.cancelBlur;return}clearTimeout(this.searching),this.close(e),this._change(e)}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete").appendTo(this._appendTo()).menu({input:e(),role:null}).zIndex(this.element.zIndex()+1).hide().data("ui-menu"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var n=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(r){r.target!==t.element[0]&&r.target!==n&&!e.contains(n,r.target)&&t.close()})})},menufocus:function(t,n){if(this.isNewMenu){this.isNewMenu=!1;if(t.originalEvent&&/^mouse/.test(t.originalEvent.type)){this.menu.blur(),this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)});return}}var r=n.item.data("ui-autocomplete-item");!1!==this._trigger("focus",t,{item:r})?t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(r.value):this.liveRegion.text(r.value)},menuselect:function(e,t){var n=t.item.data("ui-autocomplete-item"),r=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=r,this._delay(function(){this.previous=r,this.selectedItem=n})),!1!==this._trigger("select",e,{item:n})&&this._value(n.value),this.term=this._value(),this.close(e),this.selectedItem=n}}),this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertAfter(this.element),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),e==="source"&&this._initSource(),e==="appendTo"&&this.menu.element.appendTo(this._appendTo()),e==="disabled"&&t&&this.xhr&&this.xhr.abort()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_isMultiLine:function(){return this.element.is("textarea")?!0:this.element.is("input")?!1:this.element.prop("isContentEditable")},_initSource:function(){var t,n,r=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(n,r){r(e.ui.autocomplete.filter(t,n.term))}):typeof this.options.source=="string"?(n=this.options.source,this.source=function(t,i){r.xhr&&r.xhr.abort(),r.xhr=e.ajax({url:n,data:t,dataType:"json",success:function(e){i(e)},error:function(){i([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){e=e!=null?e:this._value(),this.term=this._value();if(e.length<this.options.minLength)return this.close(t);if(this._trigger("search",t)===!1)return;return this._search(e)},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var e=this,t=++n;return function(r){t===n&&e.__response(r),e.pending--,e.pending||e.element.removeClass("ui-autocomplete-loading")}},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return typeof t=="string"?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)})},_suggest:function(t){var n=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(n,t),this.menu.refresh(),n.show(),this._resizeMenu(),n.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,n){var r=this;e.each(n,function(e,n){r._renderItemData(t,n)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,n){return e("<li>").append(e("<a>").text(n.label)).appendTo(t)},_move:function(e,t){if(!this.menu.element.is(":visible")){this.search(null,t);return}if(this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)){this._value(this.term),this.menu.blur();return}this.menu[e](t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){if(!this.isMultiLine||this.menu.element.is(":visible"))this._move(e,t),t.preventDefault()}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,n){var r=new RegExp(e.ui.autocomplete.escapeRegex(n),"i");return e.grep(t,function(e){return r.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var t;this._superApply(arguments);if(this.options.disabled||this.cancelSearch)return;e&&e.length?t=this.options.messages.results(e.length):t=this.options.messages.noResults,this.liveRegion.text(t)}})})(jQuery);(function(e,t){var n,r,i,s,o="ui-button ui-widget ui-state-default ui-corner-all",u="ui-state-hover ui-state-active ",a="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",f=function(){var t=e(this).find(":ui-button");setTimeout(function(){t.button("refresh")},1)},l=function(t){var n=t.name,r=t.form,i=e([]);return n&&(n=n.replace(/'/g,"\\'"),r?i=e(r).find("[name='"+n+"']"):i=e("[name='"+n+"']",t.ownerDocument).filter(function(){return!this.form})),i};e.widget("ui.button",{version:"1.10.0",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,f),typeof this.options.disabled!="boolean"?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var t=this,u=this.options,a=this.type==="checkbox"||this.type==="radio",c=a?"":"ui-state-active",h="ui-state-focus";u.label===null&&(u.label=this.type==="input"?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(o).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){if(u.disabled)return;this===n&&e(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){if(u.disabled)return;e(this).removeClass(c)}).bind("click"+this.eventNamespace,function(e){u.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this.element.bind("focus"+this.eventNamespace,function(){t.buttonElement.addClass(h)}).bind("blur"+this.eventNamespace,function(){t.buttonElement.removeClass(h)}),a&&(this.element.bind("change"+this.eventNamespace,function(){if(s)return;t.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(e){if(u.disabled)return;s=!1,r=e.pageX,i=e.pageY}).bind("mouseup"+this.eventNamespace,function(e){if(u.disabled)return;if(r!==e.pageX||i!==e.pageY)s=!0})),this.type==="checkbox"?this.buttonElement.bind("click"+this.eventNamespace,function(){if(u.disabled||s)return!1}):this.type==="radio"?this.buttonElement.bind("click"+this.eventNamespace,function(){if(u.disabled||s)return!1;e(this).addClass("ui-state-active"),t.buttonElement.attr("aria-pressed","true");var n=t.element[0];l(n).not(n).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){if(u.disabled)return!1;e(this).addClass("ui-state-active"),n=this,t.document.one("mouseup",function(){n=null})}).bind("mouseup"+this.eventNamespace,function(){if(u.disabled)return!1;e(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(t){if(u.disabled)return!1;(t.keyCode===e.ui.keyCode.SPACE||t.keyCode===e.ui.keyCode.ENTER)&&e(this).addClass("ui-state-active")}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",u.disabled),this._resetButton()},_determineButtonType:function(){var e,t,n;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button",this.type==="checkbox"||this.type==="radio"?(e=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),n=this.element.is(":checked"),n&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",n)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(o+" "+u+" "+a).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(e,t){this._super(e,t);if(e==="disabled"){t?this.element.prop("disabled",!0):this.element.prop("disabled",!1);return}this._resetButton()},refresh:function(){var t=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t),this.type==="radio"?l(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):this.type==="checkbox"&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if(this.type==="input"){this.options.label&&this.element.val(this.options.label);return}var t=this.buttonElement.removeClass(a),n=e("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),r=this.options.icons,i=r.primary&&r.secondary,s=[];r.primary||r.secondary?(this.options.text&&s.push("ui-button-text-icon"+(i?"s":r.primary?"-primary":"-secondary")),r.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+r.primary+"'></span>"),r.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+r.secondary+"'></span>"),this.options.text||(s.push(i?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",e.trim(n)))):s.push("ui-button-text-only"),t.addClass(s.join(" "))}}),e.widget("ui.buttonset",{version:"1.10.0",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){e==="disabled"&&this.buttons.button("option",e,t),this._super(e,t)},refresh:function(){var t=this.element.css("direction")==="rtl";this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})})(jQuery);(function(e,t){function s(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},e.extend(this._defaults,this.regional[""]),this.dpDiv=o(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function o(t){var n="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.delegate(n,"mouseout",function(){e(this).removeClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!==-1&&e(this).removeClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!==-1&&e(this).removeClass("ui-datepicker-next-hover")}).delegate(n,"mouseover",function(){e.datepicker._isDisabledDatepicker(i.inline?t.parent()[0]:i.input[0])||(e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!==-1&&e(this).addClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!==-1&&e(this).addClass("ui-datepicker-next-hover"))})}function u(t,n){e.extend(t,n);for(var r in n)n[r]==null&&(t[r]=n[r]);return t}e.extend(e.ui,{datepicker:{version:"1.10.0"}});var n="datepicker",r=(new Date).getTime(),i;e.extend(s.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return u(this._defaults,e||{}),this},_attachDatepicker:function(t,n){var r,i,s;r=t.nodeName.toLowerCase(),i=r==="div"||r==="span",t.id||(this.uuid+=1,t.id="dp"+this.uuid),s=this._newInst(e(t),i),s.settings=e.extend({},n||{}),r==="input"?this._connectDatepicker(t,s):i&&this._inlineDatepicker(t,s)},_newInst:function(t,n){var r=t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:r,input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:n,dpDiv:n?o(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,r){var i=e(t);r.append=e([]),r.trigger=e([]);if(i.hasClass(this.markerClassName))return;this._attachments(i,r),i.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(r),e.data(t,n,r),r.settings.disabled&&this._disableDatepicker(t)},_attachments:function(t,n){var r,i,s,o=this._get(n,"appendText"),u=this._get(n,"isRTL");n.append&&n.append.remove(),o&&(n.append=e("<span class='"+this._appendClass+"'>"+o+"</span>"),t[u?"before":"after"](n.append)),t.unbind("focus",this._showDatepicker),n.trigger&&n.trigger.remove(),r=this._get(n,"showOn"),(r==="focus"||r==="both")&&t.focus(this._showDatepicker);if(r==="button"||r==="both")i=this._get(n,"buttonText"),s=this._get(n,"buttonImage"),n.trigger=e(this._get(n,"buttonImageOnly")?e("<img/>").addClass(this._triggerClass).attr({src:s,alt:i,title:i}):e("<button type='button'></button>").addClass(this._triggerClass).html(s?e("<img/>").attr({src:s,alt:i,title:i}):i)),t[u?"before":"after"](n.trigger),n.trigger.click(function(){return e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]?e.datepicker._hideDatepicker():e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]?(e.datepicker._hideDatepicker(),e.datepicker._showDatepicker(t[0])):e.datepicker._showDatepicker(t[0]),!1})},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,n,r,i,s=new Date(2009,11,20),o=this._get(e,"dateFormat");o.match(/[DM]/)&&(t=function(e){n=0,r=0;for(i=0;i<e.length;i++)e[i].length>n&&(n=e[i].length,r=i);return r},s.setMonth(t(this._get(e,o.match(/MM/)?"monthNames":"monthNamesShort"))),s.setDate(t(this._get(e,o.match(/DD/)?"dayNames":"dayNamesShort"))+20-s.getDay())),e.input.attr("size",this._formatDate(e,s).length)}},_inlineDatepicker:function(t,r){var i=e(t);if(i.hasClass(this.markerClassName))return;i.addClass(this.markerClassName).append(r.dpDiv),e.data(t,n,r),this._setDate(r,this._getDefaultDate(r),!0),this._updateDatepicker(r),this._updateAlternate(r),r.settings.disabled&&this._disableDatepicker(t),r.dpDiv.css("display","block")},_dialogDatepicker:function(t,r,i,s,o){var a,f,l,c,h,p=this._dialogInst;return p||(this.uuid+=1,a="dp"+this.uuid,this._dialogInput=e("<input type='text' id='"+a+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),e("body").append(this._dialogInput),p=this._dialogInst=this._newInst(this._dialogInput,!1),p.settings={},e.data(this._dialogInput[0],n,p)),u(p.settings,s||{}),r=r&&r.constructor===Date?this._formatDate(p,r):r,this._dialogInput.val(r),this._pos=o?o.length?o:[o.pageX,o.pageY]:null,this._pos||(f=document.documentElement.clientWidth,l=document.documentElement.clientHeight,c=document.documentElement.scrollLeft||document.body.scrollLeft,h=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[f/2-100+c,l/2-150+h]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),p.settings.onSelect=i,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),e.blockUI&&e.blockUI(this.dpDiv),e.data(this._dialogInput[0],n,p),this},_destroyDatepicker:function(t){var r,i=e(t),s=e.data(t,n);if(!i.hasClass(this.markerClassName))return;r=t.nodeName.toLowerCase(),e.removeData(t,n),r==="input"?(s.append.remove(),s.trigger.remove(),i.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):(r==="div"||r==="span")&&i.removeClass(this.markerClassName).empty()},_enableDatepicker:function(t){var r,i,s=e(t),o=e.data(t,n);if(!s.hasClass(this.markerClassName))return;r=t.nodeName.toLowerCase();if(r==="input")t.disabled=!1,o.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if(r==="div"||r==="span")i=s.children("."+this._inlineClass),i.children().removeClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1);this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e})},_disableDatepicker:function(t){var r,i,s=e(t),o=e.data(t,n);if(!s.hasClass(this.markerClassName))return;r=t.nodeName.toLowerCase();if(r==="input")t.disabled=!0,o.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if(r==="div"||r==="span")i=s.children("."+this._inlineClass),i.children().addClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0);this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(t){try{return e.data(t,n)}catch(r){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(n,r,i){var s,o,a,f,l=this._getInst(n);if(arguments.length===2&&typeof r=="string")return r==="defaults"?e.extend({},e.datepicker._defaults):l?r==="all"?e.extend({},l.settings):this._get(l,r):null;s=r||{},typeof r=="string"&&(s={},s[r]=i),l&&(this._curInst===l&&this._hideDatepicker(),o=this._getDateDatepicker(n,!0),a=this._getMinMaxDate(l,"min"),f=this._getMinMaxDate(l,"max"),u(l.settings,s),a!==null&&s.dateFormat!==t&&s.minDate===t&&(l.settings.minDate=this._formatDate(l,a)),f!==null&&s.dateFormat!==t&&s.maxDate===t&&(l.settings.maxDate=this._formatDate(l,f)),"disabled"in s&&(s.disabled?this._disableDatepicker(n):this._enableDatepicker(n)),this._attachments(e(n),l),this._autoSize(l),this._setDate(l,o),this._updateAlternate(l),this._updateDatepicker(l))},_changeDatepicker:function(e,t,n){this._optionDatepicker(e,t,n)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var n=this._getInst(e);n&&(this._setDate(n,t),this._updateDatepicker(n),this._updateAlternate(n))},_getDateDatepicker:function(e,t){var n=this._getInst(e);return n&&!n.inline&&this._setDateFromField(n,t),n?this._getDate(n):null},_doKeyDown:function(t){var n,r,i,s=e.datepicker._getInst(t.target),o=!0,u=s.dpDiv.is(".ui-datepicker-rtl");s._keyEvent=!0;if(e.datepicker._datepickerShowing)switch(t.keyCode){case 9:e.datepicker._hideDatepicker(),o=!1;break;case 13:return i=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",s.dpDiv),i[0]&&e.datepicker._selectDay(t.target,s.selectedMonth,s.selectedYear,i[0]),n=e.datepicker._get(s,"onSelect"),n?(r=e.datepicker._formatDate(s),n.apply(s.input?s.input[0]:null,[r,s])):e.datepicker._hideDatepicker(),!1;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(s,"stepBigMonths"):-e.datepicker._get(s,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(s,"stepBigMonths"):+e.datepicker._get(s,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&e.datepicker._clearDate(t.target),o=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&e.datepicker._gotoToday(t.target),o=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,u?1:-1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(s,"stepBigMonths"):-e.datepicker._get(s,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,-7,"D"),o=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,u?-1:1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(s,"stepBigMonths"):+e.datepicker._get(s,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,7,"D"),o=t.ctrlKey||t.metaKey;break;default:o=!1}else t.keyCode===36&&t.ctrlKey?e.datepicker._showDatepicker(this):o=!1;o&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var n,r,i=e.datepicker._getInst(t.target);if(e.datepicker._get(i,"constrainInput"))return n=e.datepicker._possibleChars(e.datepicker._get(i,"dateFormat")),r=String.fromCharCode(t.charCode==null?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||r<" "||!n||n.indexOf(r)>-1},_doKeyUp:function(t){var n,r=e.datepicker._getInst(t.target);if(r.input.val()!==r.lastVal)try{n=e.datepicker.parseDate(e.datepicker._get(r,"dateFormat"),r.input?r.input.val():null,e.datepicker._getFormatConfig(r)),n&&(e.datepicker._setDateFromField(r),e.datepicker._updateAlternate(r),e.datepicker._updateDatepicker(r))}catch(i){}return!0},_showDatepicker:function(t){t=t.target||t,t.nodeName.toLowerCase()!=="input"&&(t=e("input",t.parentNode)[0]);if(e.datepicker._isDisabledDatepicker(t)||e.datepicker._lastInput===t)return;var n,r,i,s,o,a,f;n=e.datepicker._getInst(t),e.datepicker._curInst&&e.datepicker._curInst!==n&&(e.datepicker._curInst.dpDiv.stop(!0,!0),n&&e.datepicker._datepickerShowing&&e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])),r=e.datepicker._get(n,"beforeShow"),i=r?r.apply(t,[t,n]):{};if(i===!1)return;u(n.settings,i),n.lastVal=null,e.datepicker._lastInput=t,e.datepicker._setDateFromField(n),e.datepicker._inDialog&&(t.value=""),e.datepicker._pos||(e.datepicker._pos=e.datepicker._findPos(t),e.datepicker._pos[1]+=t.offsetHeight),s=!1,e(t).parents().each(function(){return s|=e(this).css("position")==="fixed",!s}),o={left:e.datepicker._pos[0],top:e.datepicker._pos[1]},e.datepicker._pos=null,n.dpDiv.empty(),n.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),e.datepicker._updateDatepicker(n),o=e.datepicker._checkOffset(n,o,s),n.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":s?"fixed":"absolute",display:"none",left:o.left+"px",top:o.top+"px"}),n.inline||(a=e.datepicker._get(n,"showAnim"),f=e.datepicker._get(n,"duration"),n.dpDiv.zIndex(e(t).zIndex()+1),e.datepicker._datepickerShowing=!0,e.effects&&e.effects.effect[a]?n.dpDiv.show(a,e.datepicker._get(n,"showOptions"),f):n.dpDiv[a||"show"](a?f:null),n.input.is(":visible")&&!n.input.is(":disabled")&&n.input.focus(),e.datepicker._curInst=n)},_updateDatepicker:function(t){this.maxRows=4,i=t,t.dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t),t.dpDiv.find("."+this._dayOverClass+" a").mouseover();var n,r=this._getNumberOfMonths(t),s=r[1],o=17;t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),s>1&&t.dpDiv.addClass("ui-datepicker-multi-"+s).css("width",o*s+"em"),t.dpDiv[(r[0]!==1||r[1]!==1?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===e.datepicker._curInst&&e.datepicker._datepickerShowing&&t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&t.input[0]!==document.activeElement&&t.input.focus(),t.yearshtml&&(n=t.yearshtml,setTimeout(function(){n===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),n=t.yearshtml=null},0))},_getBorders:function(e){var t=function(e){return{thin:1,medium:2,thick:3}[e]||e};return[parseFloat(t(e.css("border-left-width"))),parseFloat(t(e.css("border-top-width")))]},_checkOffset:function(t,n,r){var i=t.dpDiv.outerWidth(),s=t.dpDiv.outerHeight(),o=t.input?t.input.outerWidth():0,u=t.input?t.input.outerHeight():0,a=document.documentElement.clientWidth+(r?0:e(document).scrollLeft()),f=document.documentElement.clientHeight+(r?0:e(document).scrollTop());return n.left-=this._get(t,"isRTL")?i-o:0,n.left-=r&&n.left===t.input.offset().left?e(document).scrollLeft():0,n.top-=r&&n.top===t.input.offset().top+u?e(document).scrollTop():0,n.left-=Math.min(n.left,n.left+i>a&&a>i?Math.abs(n.left+i-a):0),n.top-=Math.min(n.top,n.top+s>f&&f>s?Math.abs(s+u):0),n},_findPos:function(t){var n,r=this._getInst(t),i=this._get(r,"isRTL");while(t&&(t.type==="hidden"||t.nodeType!==1||e.expr.filters.hidden(t)))t=t[i?"previousSibling":"nextSibling"];return n=e(t).offset(),[n.left,n.top]},_hideDatepicker:function(t){var r,i,s,o,u=this._curInst;if(!u||t&&u!==e.data(t,n))return;this._datepickerShowing&&(r=this._get(u,"showAnim"),i=this._get(u,"duration"),s=function(){e.datepicker._tidyDialog(u)},e.effects&&(e.effects.effect[r]||e.effects[r])?u.dpDiv.hide(r,e.datepicker._get(u,"showOptions"),i,s):u.dpDiv[r==="slideDown"?"slideUp":r==="fadeIn"?"fadeOut":"hide"](r?i:null,s),r||s(),this._datepickerShowing=!1,o=this._get(u,"onClose"),o&&o.apply(u.input?u.input[0]:null,[u.input?u.input.val():"",u]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI&&(e.unblockUI(),e("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(!e.datepicker._curInst)return;var n=e(t.target),r=e.datepicker._getInst(n[0]);(n[0].id!==e.datepicker._mainDivId&&n.parents("#"+e.datepicker._mainDivId).length===0&&!n.hasClass(e.datepicker.markerClassName)&&!n.closest("."+e.datepicker._triggerClass).length&&e.datepicker._datepickerShowing&&(!e.datepicker._inDialog||!e.blockUI)||n.hasClass(e.datepicker.markerClassName)&&e.datepicker._curInst!==r)&&e.datepicker._hideDatepicker()},_adjustDate:function(t,n,r){var i=e(t),s=this._getInst(i[0]);if(this._isDisabledDatepicker(i[0]))return;this._adjustInstDate(s,n+(r==="M"?this._get(s,"showCurrentAtPos"):0),r),this._updateDatepicker(s)},_gotoToday:function(t){var n,r=e(t),i=this._getInst(r[0]);this._get(i,"gotoCurrent")&&i.currentDay?(i.selectedDay=i.currentDay,i.drawMonth=i.selectedMonth=i.currentMonth,i.drawYear=i.selectedYear=i.currentYear):(n=new Date,i.selectedDay=n.getDate(),i.drawMonth=i.selectedMonth=n.getMonth(),i.drawYear=i.selectedYear=n.getFullYear()),this._notifyChange(i),this._adjustDate(r)},_selectMonthYear:function(t,n,r){var i=e(t),s=this._getInst(i[0]);s["selected"+(r==="M"?"Month":"Year")]=s["draw"+(r==="M"?"Month":"Year")]=parseInt(n.options[n.selectedIndex].value,10),this._notifyChange(s),this._adjustDate(i)},_selectDay:function(t,n,r,i){var s,o=e(t);if(e(i).hasClass(this._unselectableClass)||this._isDisabledDatepicker(o[0]))return;s=this._getInst(o[0]),s.selectedDay=s.currentDay=e("a",i).html(),s.selectedMonth=s.currentMonth=n,s.selectedYear=s.currentYear=r,this._selectDate(t,this._formatDate(s,s.currentDay,s.currentMonth,s.currentYear))},_clearDate:function(t){var n=e(t);this._selectDate(n,"")},_selectDate:function(t,n){var r,i=e(t),s=this._getInst(i[0]);n=n!=null?n:this._formatDate(s),s.input&&s.input.val(n),this._updateAlternate(s),r=this._get(s,"onSelect"),r?r.apply(s.input?s.input[0]:null,[n,s]):s.input&&s.input.trigger("change"),s.inline?this._updateDatepicker(s):(this._hideDatepicker(),this._lastInput=s.input[0],typeof s.input[0]!="object"&&s.input.focus(),this._lastInput=null)},_updateAlternate:function(t){var n,r,i,s=this._get(t,"altField");s&&(n=this._get(t,"altFormat")||this._get(t,"dateFormat"),r=this._getDate(t),i=this.formatDate(n,r,this._getFormatConfig(t)),e(s).each(function(){e(this).val(i)}))},noWeekends:function(e){var t=e.getDay();return[t>0&&t<6,""]},iso8601Week:function(e){var t,n=new Date(e.getTime());return n.setDate(n.getDate()+4-(n.getDay()||7)),t=n.getTime(),n.setMonth(0),n.setDate(1),Math.floor(Math.round((t-n)/864e5)/7)+1},parseDate:function(t,n,r){if(t==null||n==null)throw"Invalid arguments";n=typeof n=="object"?n.toString():n+"";if(n==="")return null;var i,s,o,u=0,a=(r?r.shortYearCutoff:null)||this._defaults.shortYearCutoff,f=typeof a!="string"?a:(new Date).getFullYear()%100+parseInt(a,10),l=(r?r.dayNamesShort:null)||this._defaults.dayNamesShort,c=(r?r.dayNames:null)||this._defaults.dayNames,h=(r?r.monthNamesShort:null)||this._defaults.monthNamesShort,p=(r?r.monthNames:null)||this._defaults.monthNames,d=-1,v=-1,m=-1,g=-1,y=!1,b,w=function(e){var n=i+1<t.length&&t.charAt(i+1)===e;return n&&i++,n},E=function(e){var t=w(e),r=e==="@"?14:e==="!"?20:e==="y"&&t?4:e==="o"?3:2,i=new RegExp("^\\d{1,"+r+"}"),s=n.substring(u).match(i);if(!s)throw"Missing number at position "+u;return u+=s[0].length,parseInt(s[0],10)},S=function(t,r,i){var s=-1,o=e.map(w(t)?i:r,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});e.each(o,function(e,t){var r=t[1];if(n.substr(u,r.length).toLowerCase()===r.toLowerCase())return s=t[0],u+=r.length,!1});if(s!==-1)return s+1;throw"Unknown name at position "+u},x=function(){if(n.charAt(u)!==t.charAt(i))throw"Unexpected literal at position "+u;u++};for(i=0;i<t.length;i++)if(y)t.charAt(i)==="'"&&!w("'")?y=!1:x();else switch(t.charAt(i)){case"d":m=E("d");break;case"D":S("D",l,c);break;case"o":g=E("o");break;case"m":v=E("m");break;case"M":v=S("M",h,p);break;case"y":d=E("y");break;case"@":b=new Date(E("@")),d=b.getFullYear(),v=b.getMonth()+1,m=b.getDate();break;case"!":b=new Date((E("!")-this._ticksTo1970)/1e4),d=b.getFullYear(),v=b.getMonth()+1,m=b.getDate();break;case"'":w("'")?x():y=!0;break;default:x()}if(u<n.length){o=n.substr(u);if(!/^\s+/.test(o))throw"Extra/unparsed characters found in date: "+o}d===-1?d=(new Date).getFullYear():d<100&&(d+=(new Date).getFullYear()-(new Date).getFullYear()%100+(d<=f?0:-100));if(g>-1){v=1,m=g;do{s=this._getDaysInMonth(d,v-1);if(m<=s)break;v++,m-=s}while(!0)}b=this._daylightSavingAdjust(new Date(d,v-1,m));if(b.getFullYear()!==d||b.getMonth()+1!==v||b.getDate()!==m)throw"Invalid date";return b},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*24*60*60*1e7,formatDate:function(e,t,n){if(!t)return"";var r,i=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,s=(n?n.dayNames:null)||this._defaults.dayNames,o=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,u=(n?n.monthNames:null)||this._defaults.monthNames,a=function(t){var n=r+1<e.length&&e.charAt(r+1)===t;return n&&r++,n},f=function(e,t,n){var r=""+t;if(a(e))while(r.length<n)r="0"+r;return r},l=function(e,t,n,r){return a(e)?r[t]:n[t]},c="",h=!1;if(t)for(r=0;r<e.length;r++)if(h)e.charAt(r)==="'"&&!a("'")?h=!1:c+=e.charAt(r);else switch(e.charAt(r)){case"d":c+=f("d",t.getDate(),2);break;case"D":c+=l("D",t.getDay(),i,s);break;case"o":c+=f("o",Math.round(((new Date(t.getFullYear(),t.getMonth(),t.getDate())).getTime()-(new Date(t.getFullYear(),0,0)).getTime())/864e5),3);break;case"m":c+=f("m",t.getMonth()+1,2);break;case"M":c+=l("M",t.getMonth(),o,u);break;case"y":c+=a("y")?t.getFullYear():(t.getYear()%100<10?"0":"")+t.getYear()%100;break;case"@":c+=t.getTime();break;case"!":c+=t.getTime()*1e4+this._ticksTo1970;break;case"'":a("'")?c+="'":h=!0;break;default:c+=e.charAt(r)}return c},_possibleChars:function(e){var t,n="",r=!1,i=function(n){var r=t+1<e.length&&e.charAt(t+1)===n;return r&&t++,r};for(t=0;t<e.length;t++)if(r)e.charAt(t)==="'"&&!i("'")?r=!1:n+=e.charAt(t);else switch(e.charAt(t)){case"d":case"m":case"y":case"@":n+="0123456789";break;case"D":case"M":return null;case"'":i("'")?n+="'":r=!0;break;default:n+=e.charAt(t)}return n},_get:function(e,n){return e.settings[n]!==t?e.settings[n]:this._defaults[n]},_setDateFromField:function(e,t){if(e.input.val()===e.lastVal)return;var n=this._get(e,"dateFormat"),r=e.lastVal=e.input?e.input.val():null,i=this._getDefaultDate(e),s=i,o=this._getFormatConfig(e);try{s=this.parseDate(n,r,o)||i}catch(u){r=t?"":r}e.selectedDay=s.getDate(),e.drawMonth=e.selectedMonth=s.getMonth(),e.drawYear=e.selectedYear=s.getFullYear(),e.currentDay=r?s.getDate():0,e.currentMonth=r?s.getMonth():0,e.currentYear=r?s.getFullYear():0,this._adjustInstDate(e)},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,n,r){var i=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},s=function(n){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),n,e.datepicker._getFormatConfig(t))}catch(r){}var i=(n.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,s=i.getFullYear(),o=i.getMonth(),u=i.getDate(),a=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,f=a.exec(n);while(f){switch(f[2]||"d"){case"d":case"D":u+=parseInt(f[1],10);break;case"w":case"W":u+=parseInt(f[1],10)*7;break;case"m":case"M":o+=parseInt(f[1],10),u=Math.min(u,e.datepicker._getDaysInMonth(s,o));break;case"y":case"Y":s+=parseInt(f[1],10),u=Math.min(u,e.datepicker._getDaysInMonth(s,o))}f=a.exec(n)}return new Date(s,o,u)},o=n==null||n===""?r:typeof n=="string"?s(n):typeof n=="number"?isNaN(n)?r:i(n):new Date(n.getTime());return o=o&&o.toString()==="Invalid Date"?r:o,o&&(o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0)),this._daylightSavingAdjust(o)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,n){var r=!t,i=e.selectedMonth,s=e.selectedYear,o=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=o.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=o.getMonth(),e.drawYear=e.selectedYear=e.currentYear=o.getFullYear(),(i!==e.selectedMonth||s!==e.selectedYear)&&!n&&this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(r?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&e.input.val()===""?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(t){var n=this._get(t,"stepMonths"),i="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){window["DP_jQuery_"+r].datepicker._adjustDate(i,-n,"M")},next:function(){window["DP_jQuery_"+r].datepicker._adjustDate(i,+n,"M")},hide:function(){window["DP_jQuery_"+r].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+r].datepicker._gotoToday(i)},selectDay:function(){return window["DP_jQuery_"+r].datepicker._selectDay(i,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return window["DP_jQuery_"+r].datepicker._selectMonthYear(i,this,"M"),!1},selectYear:function(){return window["DP_jQuery_"+r].datepicker._selectMonthYear(i,this,"Y"),!1}};e(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q=new Date,R=this._daylightSavingAdjust(new Date(q.getFullYear(),q.getMonth(),q.getDate())),U=this._get(e,"isRTL"),z=this._get(e,"showButtonPanel"),W=this._get(e,"hideIfNoPrevNext"),X=this._get(e,"navigationAsDateFormat"),V=this._getNumberOfMonths(e),$=this._get(e,"showCurrentAtPos"),J=this._get(e,"stepMonths"),K=V[0]!==1||V[1]!==1,Q=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),G=this._getMinMaxDate(e,"min"),Y=this._getMinMaxDate(e,"max"),Z=e.drawMonth-$,et=e.drawYear;Z<0&&(Z+=12,et--);if(Y){t=this._daylightSavingAdjust(new Date(Y.getFullYear(),Y.getMonth()-V[0]*V[1]+1,Y.getDate())),t=G&&t<G?G:t;while(this._daylightSavingAdjust(new Date(et,Z,1))>t)Z--,Z<0&&(Z=11,et--)}e.drawMonth=Z,e.drawYear=et,n=this._get(e,"prevText"),n=X?this.formatDate(n,this._daylightSavingAdjust(new Date(et,Z-J,1)),this._getFormatConfig(e)):n,r=this._canAdjustMonth(e,-1,et,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"e":"w")+"'>"+n+"</span></a>":W?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"e":"w")+"'>"+n+"</span></a>",i=this._get(e,"nextText"),i=X?this.formatDate(i,this._daylightSavingAdjust(new Date(et,Z+J,1)),this._getFormatConfig(e)):i,s=this._canAdjustMonth(e,1,et,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"w":"e")+"'>"+i+"</span></a>":W?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"w":"e")+"'>"+i+"</span></a>",o=this._get(e,"currentText"),u=this._get(e,"gotoCurrent")&&e.currentDay?Q:R,o=X?this.formatDate(o,u,this._getFormatConfig(e)):o,a=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",f=z?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(U?a:"")+(this._isInRange(e,u)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+o+"</button>":"")+(U?"":a)+"</div>":"",l=parseInt(this._get(e,"firstDay"),10),l=isNaN(l)?0:l,c=this._get(e,"showWeek"),h=this._get(e,"dayNames"),p=this._get(e,"dayNamesMin"),d=this._get(e,"monthNames"),v=this._get(e,"monthNamesShort"),m=this._get(e,"beforeShowDay"),g=this._get(e,"showOtherMonths"),y=this._get(e,"selectOtherMonths"),b=this._getDefaultDate(e),w="",E;for(S=0;S<V[0];S++){x="",this.maxRows=4;for(T=0;T<V[1];T++){N=this._daylightSavingAdjust(new Date(et,Z,e.selectedDay)),C=" ui-corner-all",k="";if(K){k+="<div class='ui-datepicker-group";if(V[1]>1)switch(T){case 0:k+=" ui-datepicker-group-first",C=" ui-corner-"+(U?"right":"left");break;case V[1]-1:k+=" ui-datepicker-group-last",C=" ui-corner-"+(U?"left":"right");break;default:k+=" ui-datepicker-group-middle",C=""}k+="'>"}k+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+C+"'>"+(/all|left/.test(C)&&S===0?U?s:r:"")+(/all|right/.test(C)&&S===0?U?r:s:"")+this._generateMonthYearHeader(e,Z,et,G,Y,S>0||T>0,d,v)+"</div><table class='ui-datepicker-calendar'><thead>"+"<tr>",L=c?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"";for(E=0;E<7;E++)A=(E+l)%7,L+="<th"+((E+l+6)%7>=5?" class='ui-datepicker-week-end'":"")+">"+"<span title='"+h[A]+"'>"+p[A]+"</span></th>";k+=L+"</tr></thead><tbody>",O=this._getDaysInMonth(et,Z),et===e.selectedYear&&Z===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,O)),M=(this._getFirstDayOfMonth(et,Z)-l+7)%7,_=Math.ceil((M+O)/7),D=K?this.maxRows>_?this.maxRows:_:_,this.maxRows=D,P=this._daylightSavingAdjust(new Date(et,Z,1-M));for(H=0;H<D;H++){k+="<tr>",B=c?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(P)+"</td>":"";for(E=0;E<7;E++)j=m?m.apply(e.input?e.input[0]:null,[P]):[!0,""],F=P.getMonth()!==Z,I=F&&!y||!j[0]||G&&P<G||Y&&P>Y,B+="<td class='"+((E+l+6)%7>=5?" ui-datepicker-week-end":"")+(F?" ui-datepicker-other-month":"")+(P.getTime()===N.getTime()&&Z===e.selectedMonth&&e._keyEvent||b.getTime()===P.getTime()&&b.getTime()===N.getTime()?" "+this._dayOverClass:"")+(I?" "+this._unselectableClass+" ui-state-disabled":"")+(F&&!g?"":" "+j[1]+(P.getTime()===Q.getTime()?" "+this._currentClass:"")+(P.getTime()===R.getTime()?" ui-datepicker-today":""))+"'"+((!F||g)&&j[2]?" title='"+j[2]+"'":"")+(I?"":" data-handler='selectDay' data-event='click' data-month='"+P.getMonth()+"' data-year='"+P.getFullYear()+"'")+">"+(F&&!g?"&#xa0;":I?"<span class='ui-state-default'>"+P.getDate()+"</span>":"<a class='ui-state-default"+(P.getTime()===R.getTime()?" ui-state-highlight":"")+(P.getTime()===Q.getTime()?" ui-state-active":"")+(F?" ui-priority-secondary":"")+"' href='#'>"+P.getDate()+"</a>")+"</td>",P.setDate(P.getDate()+1),P=this._daylightSavingAdjust(P);k+=B+"</tr>"}Z++,Z>11&&(Z=0,et++),k+="</tbody></table>"+(K?"</div>"+(V[0]>0&&T===V[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),x+=k}w+=x}return w+=f,e._keyEvent=!1,w},_generateMonthYearHeader:function(e,t,n,r,i,s,o,u){var a,f,l,c,h,p,d,v,m=this._get(e,"changeMonth"),g=this._get(e,"changeYear"),y=this._get(e,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",w="";if(s||!m)w+="<span class='ui-datepicker-month'>"+o[t]+"</span>";else{a=r&&r.getFullYear()===n,f=i&&i.getFullYear()===n,w+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>";for(l=0;l<12;l++)(!a||l>=r.getMonth())&&(!f||l<=i.getMonth())&&(w+="<option value='"+l+"'"+(l===t?" selected='selected'":"")+">"+u[l]+"</option>");w+="</select>"}y||(b+=w+(s||!m||!g?"&#xa0;":""));if(!e.yearshtml){e.yearshtml="";if(s||!g)b+="<span class='ui-datepicker-year'>"+n+"</span>";else{c=this._get(e,"yearRange").split(":"),h=(new Date).getFullYear(),p=function(e){var t=e.match(/c[+\-].*/)?n+parseInt(e.substring(1),10):e.match(/[+\-].*/)?h+parseInt(e,10):parseInt(e,10);return isNaN(t)?h:t},d=p(c[0]),v=Math.max(d,p(c[1]||"")),d=r?Math.max(d,r.getFullYear()):d,v=i?Math.min(v,i.getFullYear()):v,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";for(;d<=v;d++)e.yearshtml+="<option value='"+d+"'"+(d===n?" selected='selected'":"")+">"+d+"</option>";e.yearshtml+="</select>",b+=e.yearshtml,e.yearshtml=null}}return b+=this._get(e,"yearSuffix"),y&&(b+=(s||!m||!g?"&#xa0;":"")+w),b+="</div>",b},_adjustInstDate:function(e,t,n){var r=e.drawYear+(n==="Y"?t:0),i=e.drawMonth+(n==="M"?t:0),s=Math.min(e.selectedDay,this._getDaysInMonth(r,i))+(n==="D"?t:0),o=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(r,i,s)));e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),(n==="M"||n==="Y")&&this._notifyChange(e)},_restrictMinMax:function(e,t){var n=this._getMinMaxDate(e,"min"),r=this._getMinMaxDate(e,"max"),i=n&&t<n?n:t;return r&&i>r?r:i},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return t==null?[1,1]:typeof t=="number"?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return(new Date(e,t,1)).getDay()},_canAdjustMonth:function(e,t,n,r){var i=this._getNumberOfMonths(e),s=this._daylightSavingAdjust(new Date(n,r+(t<0?t:i[0]*i[1]),1));return t<0&&s.setDate(this._getDaysInMonth(s.getFullYear(),s.getMonth())),this._isInRange(e,s)},_isInRange:function(e,t){var n,r,i=this._getMinMaxDate(e,"min"),s=this._getMinMaxDate(e,"max"),o=null,u=null,a=this._get(e,"yearRange");return a&&(n=a.split(":"),r=(new Date).getFullYear(),o=parseInt(n[0],10)+r,u=parseInt(n[1],10)+r),(!i||t.getTime()>=i.getTime())&&(!s||t.getTime()<=s.getTime())&&(!o||t.getFullYear()>=o)&&(!u||t.getFullYear()<=u)},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t=typeof t!="string"?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,n,r){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var i=t?typeof t=="object"?t:this._daylightSavingAdjust(new Date(r,n,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),i,this._getFormatConfig(e))}}),e.fn.datepicker=function(t){if(!this.length)return this;e.datepicker.initialized||(e(document).mousedown(e.datepicker._checkExternalClick),e.datepicker.initialized=!0),e("#"+e.datepicker._mainDivId).length===0&&e("body").append(e.datepicker.dpDiv);var n=Array.prototype.slice.call(arguments,1);return typeof t!="string"||t!=="isDisabled"&&t!=="getDate"&&t!=="widget"?t==="option"&&arguments.length===2&&typeof arguments[1]=="string"?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(n)):this.each(function(){typeof t=="string"?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(n)):e.datepicker._attachDatepicker(this,t)}):e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(n))},e.datepicker=new s,e.datepicker.initialized=!1,e.datepicker.uuid=(new Date).getTime(),e.datepicker.version="1.10.0",window["DP_jQuery_"+r]=e})(jQuery);(function(e,t){var n={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},r={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};e.widget("ui.dialog",{version:"1.10.0",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var n=e(this).css(t).offset().top;n<0&&e(this).css("top",t.top-n)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&e.fn.draggable&&this._makeDraggable(),this.options.resizable&&e.fn.resizable&&this._makeResizable(),this._isOpen=!1},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?e(t):this.document.find(t||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),e=t.parent.children().eq(t.index),e.length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(t){var n=this;if(!this._isOpen||this._trigger("beforeClose",t)===!1)return;this._isOpen=!1,this._destroyOverlay(),this.opener.filter(":focusable").focus().length||e(this.document[0].activeElement).blur(),this._hide(this.uiDialog,this.options.hide,function(){n._trigger("close",t)})},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(e,t){var n=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;return n&&!t&&this._trigger("focus",e),n},open:function(){if(this._isOpen){this._moveToTop()&&this._focusTabbable();return}this.opener=e(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show),this._focusTabbable(),this._isOpen=!0,this._trigger("open"),this._trigger("focus")},_focusTabbable:function(){var e=this.element.find("[autofocus]");e.length||(e=this.element.find(":tabbable")),e.length||(e=this.uiDialogButtonPane.find(":tabbable")),e.length||(e=this.uiDialogTitlebarClose.filter(":tabbable")),e.length||(e=this.uiDialog),e.eq(0).focus()},_keepFocus:function(t){function n(){var t=this.document[0].activeElement,n=this.uiDialog[0]===t||e.contains(this.uiDialog[0],t);n||this._focusTabbable()}t.preventDefault(),n.call(this),this._delay(n)},_createWrapper:function(){this.uiDialog=e("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE){t.preventDefault(),this.close(t);return}if(t.keyCode!==e.ui.keyCode.TAB)return;var n=this.uiDialog.find(":tabbable"),r=n.filter(":first"),i=n.filter(":last");t.target!==i[0]&&t.target!==this.uiDialog[0]||!!t.shiftKey?(t.target===r[0]||t.target===this.uiDialog[0])&&t.shiftKey&&(i.focus(1),t.preventDefault()):(r.focus(1),t.preventDefault())},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=e("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(t){e(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=e("<button></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),t=e("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(t),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(e){this.options.title||e.html("&#160;"),e.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=e("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var t=this,n=this.options.buttons;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty();if(e.isEmptyObject(n)){this.uiDialog.removeClass("ui-dialog-buttons");return}e.each(n,function(n,r){var i,s;r=e.isFunction(r)?{click:r,text:n}:r,r=e.extend({type:"button"},r),i=r.click,r.click=function(){i.apply(t.element[0],arguments)},s={icons:r.icons,text:r.showText},delete r.icons,delete r.showText,e("<button></button>",r).button(s).appendTo(t.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog)},_makeDraggable:function(){function r(e){return{position:e.position,offset:e.offset}}var t=this,n=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(n,i){e(this).addClass("ui-dialog-dragging"),t._trigger("dragStart",n,r(i))},drag:function(e,n){t._trigger("drag",e,r(n))},stop:function(i,s){n.position=[s.position.left-t.document.scrollLeft(),s.position.top-t.document.scrollTop()],e(this).removeClass("ui-dialog-dragging"),t._trigger("dragStop",i,r(s))}})},_makeResizable:function(){function o(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}var t=this,n=this.options,r=n.resizable,i=this.uiDialog.css("position"),s=typeof r=="string"?r:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:n.maxWidth,maxHeight:n.maxHeight,minWidth:n.minWidth,minHeight:this._minHeight(),handles:s,start:function(n,r){e(this).addClass("ui-dialog-resizing"),t._trigger("resizeStart",n,o(r))},resize:function(e,n){t._trigger("resize",e,o(n))},stop:function(r,i){n.height=e(this).height(),n.width=e(this).width(),e(this).removeClass("ui-dialog-resizing"),t._trigger("resizeStop",r,o(i))}}).css("position",i)},_minHeight:function(){var e=this.options;return e.height==="auto"?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide()},_setOptions:function(t){var i=this,s=!1,o={};e.each(t,function(e,t){i._setOption(e,t),e in n&&(s=!0),e in r&&(o[e]=t)}),s&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",o)},_setOption:function(e,t){var n,r,i=this.uiDialog;e==="dialogClass"&&i.removeClass(this.options.dialogClass).addClass(t);if(e==="disabled")return;this._super(e,t),e==="appendTo"&&this.uiDialog.appendTo(this._appendTo()),e==="buttons"&&this._createButtons(),e==="closeText"&&this.uiDialogTitlebarClose.button({label:""+t}),e==="draggable"&&(n=i.is(":data(ui-draggable)"),n&&!t&&i.draggable("destroy"),!n&&t&&this._makeDraggable()),e==="position"&&this._position(),e==="resizable"&&(r=i.is(":data(ui-resizable)"),r&&!t&&i.resizable("destroy"),r&&typeof t=="string"&&i.resizable("option","handles",t),!r&&t!==!1&&this._makeResizable()),e==="title"&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title"))},_size:function(){var e,t,n,r=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),r.minWidth>r.width&&(r.width=r.minWidth),e=this.uiDialog.css({height:"auto",width:r.width}).outerHeight(),t=Math.max(0,r.minHeight-e),n=typeof r.maxHeight=="number"?Math.max(0,r.maxHeight-e):"none",r.height==="auto"?this.element.css({minHeight:t,maxHeight:n,height:"auto"}):this.element.height(Math.max(0,r.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_createOverlay:function(){if(!this.options.modal)return;e.ui.dialog.overlayInstances||this._delay(function(){e.ui.dialog.overlayInstances&&this._on(this.document,{focusin:function(t){e(t.target).closest(".ui-dialog").length||(t.preventDefault(),e(".ui-dialog:visible:last .ui-dialog-content").data("ui-dialog")._focusTabbable())}})}),this.overlay=e("<div>").addClass("ui-widget-overlay ui-front").appendTo(this.document[0].body),this._on(this.overlay,{mousedown:"_keepFocus"}),e.ui.dialog.overlayInstances++},_destroyOverlay:function(){if(!this.options.modal)return;e.ui.dialog.overlayInstances--,e.ui.dialog.overlayInstances||this._off(this.document,"focusin"),this.overlay.remove()}}),e.ui.dialog.overlayInstances=0,e.uiBackCompat!==!1&&e.widget("ui.dialog",e.ui.dialog,{_position:function(){var t=this.options.position,n=[],r=[0,0],i;if(t){if(typeof t=="string"||typeof t=="object"&&"0"in t)n=t.split?t.split(" "):[t[0],t[1]],n.length===1&&(n[1]=n[0]),e.each(["left","top"],function(e,t){+n[e]===n[e]&&(r[e]=n[e],n[e]=t)}),t={my:n[0]+(r[0]<0?r[0]:"+"+r[0])+" "+n[1]+(r[1]<0?r[1]:"+"+r[1]),at:n.join(" ")};t=e.extend({},e.ui.dialog.prototype.options.position,t)}else t=e.ui.dialog.prototype.options.position;i=this.uiDialog.is(":visible"),i||this.uiDialog.show(),this.uiDialog.position(t),i||this.uiDialog.hide()}})})(jQuery);(function(e,t){e.widget("ui.menu",{version:"1.10.0",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,e.proxy(function(e){this.options.disabled&&e.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(e){e.preventDefault()},"click .ui-state-disabled > a":function(e){e.preventDefault()},"click .ui-menu-item:has(a)":function(t){var n=e(t.target).closest(".ui-menu-item");!this.mouseHandled&&n.not(".ui-state-disabled").length&&(this.mouseHandled=!0,this.select(t),n.has(".ui-menu").length?this.expand(t):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&this.active.parents(".ui-menu").length===1&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){var n=e(t.currentTarget);n.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(t,n)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var n=this.active||this.element.children(".ui-menu-item").eq(0);t||this.focus(e,n)},blur:function(t){this._delay(function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){e(t.target).closest(".ui-menu").length||this.collapseAll(t),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){function a(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var n,r,i,s,o,u=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:u=!1,r=this.previousFilter||"",i=String.fromCharCode(t.keyCode),s=!1,clearTimeout(this.filterTimer),i===r?s=!0:i=r+i,o=new RegExp("^"+a(i),"i"),n=this.activeMenu.children(".ui-menu-item").filter(function(){return o.test(e(this).children("a").text())}),n=s&&n.index(this.active.next())!==-1?this.active.nextAll(".ui-menu-item"):n,n.length||(i=String.fromCharCode(t.keyCode),o=new RegExp("^"+a(i),"i"),n=this.activeMenu.children(".ui-menu-item").filter(function(){return o.test(e(this).children("a").text())})),n.length?(this.focus(t,n),n.length>1?(this.previousFilter=i,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}u&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var t,n=this.options.icons.submenu,r=this.element.find(this.options.menus);r.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=e(this),r=t.prev("a"),i=e("<span>").addClass("ui-menu-icon ui-icon "+n).data("ui-menu-submenu-carat",!0);r.attr("aria-haspopup","true").prepend(i),t.attr("aria-labelledby",r.attr("id"))}),t=r.add(this.element),t.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),t.children(":not(.ui-menu-item)").each(function(){var t=e(this);/[^\-â€”â€“\s]/.test(t.text())||t.addClass("ui-widget-content ui-menu-divider")}),t.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){e==="icons"&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu),this._super(e,t)},focus:function(e,t){var n,r;this.blur(e,e&&e.type==="focus"),this._scrollIntoView(t),this.active=t.first(),r=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",r.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),e&&e.type==="keydown"?this._close():this.timer=this._delay(function(){this._close()},this.delay),n=t.children(".ui-menu"),n.length&&/^mouse/.test(e.type)&&this._startOpening(n),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var n,r,i,s,o,u;this._hasScroll()&&(n=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,r=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,i=t.offset().top-this.activeMenu.offset().top-n-r,s=this.activeMenu.scrollTop(),o=this.activeMenu.height(),u=t.height(),i<0?this.activeMenu.scrollTop(s+i):i+u>o&&this.activeMenu.scrollTop(s+i-o+u))},blur:function(e,t){t||clearTimeout(this.timer);if(!this.active)return;this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active})},_startOpening:function(e){clearTimeout(this.timer);if(e.attr("aria-hidden")!=="true")return;this.timer=this._delay(function(){this._close(),this._open(e)},this.delay)},_open:function(t){var n=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(n)},collapseAll:function(t,n){clearTimeout(this.timer),this.timer=this._delay(function(){var r=n?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));r.length||(r=this.element),this._close(r),this.blur(t),this.activeMenu=r},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,n){var r;this.active&&(e==="first"||e==="last"?r=this.active[e==="first"?"prevAll":"nextAll"](".ui-menu-item").eq(-1):r=this.active[e+"All"](".ui-menu-item").eq(0));if(!r||!r.length||!this.active)r=this.activeMenu.children(".ui-menu-item")[t]();this.focus(n,r)},nextPage:function(t){var n,r,i;if(!this.active){this.next(t);return}if(this.isLastItem())return;this._hasScroll()?(r=this.active.offset().top,i=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return n=e(this),n.offset().top-r-i<0}),this.focus(t,n)):this.focus(t,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())},previousPage:function(t){var n,r,i;if(!this.active){this.next(t);return}if(this.isFirstItem())return;this._hasScroll()?(r=this.active.offset().top,i=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return n=e(this),n.offset().top-r+i>0}),this.focus(t,n)):this.focus(t,this.activeMenu.children(".ui-menu-item").first())},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var n={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,n)}})})(jQuery);(function(e,t){e.widget("ui.progressbar",{version:"1.10.0",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(e){if(e===t)return this.options.value;this.options.value=this._constrainedValue(e),this._refreshValue()},_constrainedValue:function(e){return e===t&&(e=this.options.value),this.indeterminate=e===!1,typeof e!="number"&&(e=0),this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,e))},_setOptions:function(e){var t=e.value;delete e.value,this._super(e),this.options.value=this._constrainedValue(t),this._refreshValue()},_setOption:function(e,t){e==="max"&&(t=Math.max(this.min,t)),this._super(e,t)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var t=this.options.value,n=this._percentage();this.valueDiv.toggle(this.indeterminate||t>this.min).toggleClass("ui-corner-right",t===this.options.max).width(n.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=e("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":t}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==t&&(this.oldValue=t,this._trigger("change")),t===this.options.max&&this._trigger("complete")}})})(jQuery);(function(e,t){var n=5;e.widget("ui.slider",e.ui.mouse,{version:"1.10.0",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){var t,n,r=this.options,i=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),s="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",o=[];this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"),this.range=e([]),r.range&&(r.range===!0&&(r.values?r.values.length&&r.values.length!==2?r.values=[r.values[0],r.values[0]]:e.isArray(r.values)&&(r.values=r.values.slice(0)):r.values=[this._valueMin(),this._valueMin()]),this.range=e("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+(r.range==="min"||r.range==="max"?" ui-slider-range-"+r.range:""))),n=r.values&&r.values.length||1;for(t=i.length;t<n;t++)o.push(s);this.handles=i.add(e(o.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(e){e.preventDefault()}).mouseenter(function(){r.disabled||e(this).addClass("ui-state-hover")}).mouseleave(function(){e(this).removeClass("ui-state-hover")}).focus(function(){r.disabled?e(this).blur():(e(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),e(this).addClass("ui-state-focus"))}).blur(function(){e(this).removeClass("ui-state-focus")}),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t)}),this._setOption("disabled",r.disabled),this._on(this.handles,this._handleEvents),this._refreshValue(),this._animateOff=!1},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var n,r,i,s,o,u,a,f,l=this,c=this.options;return c.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),n={x:t.pageX,y:t.pageY},r=this._normValueFromMouse(n),i=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var n=Math.abs(r-l.values(t));if(i>n||i===n&&(t===l._lastChangedValue||l.values(t)===c.min))i=n,s=e(this),o=t}),u=this._start(t,o),u===!1?!1:(this._mouseSliding=!0,this._handleIndex=o,s.addClass("ui-state-active").focus(),a=s.offset(),f=!e(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=f?{left:0,top:0}:{left:t.pageX-a.left-s.width()/2,top:t.pageY-a.top-s.height()/2-(parseInt(s.css("borderTopWidth"),10)||0)-(parseInt(s.css("borderBottomWidth"),10)||0)+(parseInt(s.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,o,r),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,n),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,n,r,i,s;return this.orientation==="horizontal"?(t=this.elementSize.width,n=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,n=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),r=n/t,r>1&&(r=1),r<0&&(r=0),this.orientation==="vertical"&&(r=1-r),i=this._valueMax()-this._valueMin(),s=this._valueMin()+r*i,this._trimAlignValue(s)},_start:function(e,t){var n={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("start",e,n)},_slide:function(e,t,n){var r,i,s;this.options.values&&this.options.values.length?(r=this.values(t?0:1),this.options.values.length===2&&this.options.range===!0&&(t===0&&n>r||t===1&&n<r)&&(n=r),n!==this.values(t)&&(i=this.values(),i[t]=n,s=this._trigger("slide",e,{handle:this.handles[t],value:n,values:i}),r=this.values(t?0:1),s!==!1&&this.values(t,n,!0))):n!==this.value()&&(s=this._trigger("slide",e,{handle:this.handles[t],value:n}),s!==!1&&this.value(n))},_stop:function(e,t){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("stop",e,n)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._lastChangedValue=t,this._trigger("change",e,n)}},value:function(e){if(arguments.length){this.options.value=this._trimAlignValue(e),this._refreshValue(),this._change(null,0);return}return this._value()},values:function(t,n){var r,i,s;if(arguments.length>1){this.options.values[t]=this._trimAlignValue(n),this._refreshValue(),this._change(null,t);return}if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();r=this.options.values,i=arguments[0];for(s=0;s<r.length;s+=1)r[s]=this._trimAlignValue(i[s]),this._change(null,s);this._refreshValue()},_setOption:function(t,n){var r,i=0;e.isArray(this.options.values)&&(i=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments);switch(t){case"disabled":n?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.prop("disabled",!0)):this.handles.prop("disabled",!1);break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":this._animateOff=!0,this._refreshValue();for(r=0;r<i;r+=1)this._change(null,r);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e),e},_values:function(e){var t,n,r;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t),t;n=this.options.values.slice();for(r=0;r<n.length;r+=1)n[r]=this._trimAlignValue(n[r]);return n},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,n=(e-this._valueMin())%t,r=e-n;return Math.abs(n)*2>=t&&(r+=n>0?t:-t),parseFloat(r.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t,n,r,i,s,o=this.options.range,u=this.options,a=this,f=this._animateOff?!1:u.animate,l={};this.options.values&&this.options.values.length?this.handles.each(function(r){n=(a.values(r)-a._valueMin())/(a._valueMax()-a._valueMin())*100,l[a.orientation==="horizontal"?"left":"bottom"]=n+"%",e(this).stop(1,1)[f?"animate":"css"](l,u.animate),a.options.range===!0&&(a.orientation==="horizontal"?(r===0&&a.range.stop(1,1)[f?"animate":"css"]({left:n+"%"},u.animate),r===1&&a.range[f?"animate":"css"]({width:n-t+"%"},{queue:!1,duration:u.animate})):(r===0&&a.range.stop(1,1)[f?"animate":"css"]({bottom:n+"%"},u.animate),r===1&&a.range[f?"animate":"css"]({height:n-t+"%"},{queue:!1,duration:u.animate}))),t=n}):(r=this.value(),i=this._valueMin(),s=this._valueMax(),n=s!==i?(r-i)/(s-i)*100:0,l[this.orientation==="horizontal"?"left":"bottom"]=n+"%",this.handle.stop(1,1)[f?"animate":"css"](l,u.animate),o==="min"&&this.orientation==="horizontal"&&this.range.stop(1,1)[f?"animate":"css"]({width:n+"%"},u.animate),o==="max"&&this.orientation==="horizontal"&&this.range[f?"animate":"css"]({width:100-n+"%"},{queue:!1,duration:u.animate}),o==="min"&&this.orientation==="vertical"&&this.range.stop(1,1)[f?"animate":"css"]({height:n+"%"},u.animate),o==="max"&&this.orientation==="vertical"&&this.range[f?"animate":"css"]({height:100-n+"%"},{queue:!1,duration:u.animate}))},_handleEvents:{keydown:function(t){var r,i,s,o,u=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:t.preventDefault();if(!this._keySliding){this._keySliding=!0,e(t.target).addClass("ui-state-active"),r=this._start(t,u);if(r===!1)return}}o=this.options.step,this.options.values&&this.options.values.length?i=s=this.values(u):i=s=this.value();switch(t.keyCode){case e.ui.keyCode.HOME:s=this._valueMin();break;case e.ui.keyCode.END:s=this._valueMax();break;case e.ui.keyCode.PAGE_UP:s=this._trimAlignValue(i+(this._valueMax()-this._valueMin())/n);break;case e.ui.keyCode.PAGE_DOWN:s=this._trimAlignValue(i-(this._valueMax()-this._valueMin())/n);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(i===this._valueMax())return;s=this._trimAlignValue(i+o);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(i===this._valueMin())return;s=this._trimAlignValue(i-o)}this._slide(t,u,s)},keyup:function(t){var n=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,n),this._change(t,n),e(t.target).removeClass("ui-state-active"))}}})})(jQuery);(function(e){function t(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}e.widget("ui.spinner",{version:"1.10.0",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var t={},n=this.element;return e.each(["min","max","step"],function(e,r){var i=n.attr(r);i!==undefined&&i.length&&(t[r]=i)}),t},_events:{keydown:function(e){this._start(e)&&this._keydown(e)&&e.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(e){if(this.cancelBlur){delete this.cancelBlur;return}this._refresh(),this.previous!==this.element.val()&&this._trigger("change",e)},mousewheel:function(e,t){if(!t)return;if(!this.spinning&&!this._start(e))return!1;this._spin((t>0?1:-1)*this.options.step,e),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(e)},100),e.preventDefault()},"mousedown .ui-spinner-button":function(t){function r(){var e=this.element[0]===this.document[0].activeElement;e||(this.element.focus(),this.previous=n,this._delay(function(){this.previous=n}))}var n;n=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),t.preventDefault(),r.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,r.call(this)});if(this._start(t)===!1)return;this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){if(!e(t.currentTarget).hasClass("ui-state-active"))return;if(this._start(t)===!1)return!1;this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var e=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=e.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(e.height()*.5)&&e.height()>0&&e.height(e.height()),this.options.disabled&&this.disable()},_keydown:function(t){var n=this.options,r=e.ui.keyCode;switch(t.keyCode){case r.UP:return this._repeat(null,1,t),!0;case r.DOWN:return this._repeat(null,-1,t),!0;case r.PAGE_UP:return this._repeat(null,n.page,t),!0;case r.PAGE_DOWN:return this._repeat(null,-n.page,t),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span>"+"</a>"+"<a class='ui-spinner-button ui-spinner-down ui-corner-br'>"+"<span class='ui-icon "+this.options.icons.down+"'>&#9660;</span>"+"</a>"},_start:function(e){return!this.spinning&&this._trigger("start",e)===!1?!1:(this.counter||(this.counter=1),this.spinning=!0,!0)},_repeat:function(e,t,n){e=e||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,t,n)},e),this._spin(t*this.options.step,n)},_spin:function(e,t){var n=this.value()||0;this.counter||(this.counter=1),n=this._adjustValue(n+e*this._increment(this.counter));if(!this.spinning||this._trigger("spin",t,{value:n})!==!1)this._value(n),this.counter++},_increment:function(t){var n=this.options.incremental;return n?e.isFunction(n)?n(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var e=this._precisionOf(this.options.step);return this.options.min!==null&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=e.toString(),n=t.indexOf(".");return n===-1?0:t.length-n-1},_adjustValue:function(e){var t,n,r=this.options;return t=r.min!==null?r.min:0,n=e-t,n=Math.round(n/r.step)*r.step,e=t+n,e=parseFloat(e.toFixed(this._precision())),r.max!==null&&e>r.max?r.max:r.min!==null&&e<r.min?r.min:e},_stop:function(e){if(!this.spinning)return;clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",e)},_setOption:function(e,t){if(e==="culture"||e==="numberFormat"){var n=this._parse(this.element.val());this.options[e]=t,this.element.val(this._format(n));return}(e==="max"||e==="min"||e==="step")&&typeof t=="string"&&(t=this._parse(t)),e==="icons"&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(t.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(t.down)),this._super(e,t),e==="disabled"&&(t?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:t(function(e){this._super(e),this._value(this.element.val())}),_parse:function(e){return typeof e=="string"&&e!==""&&(e=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e),e===""||isNaN(e)?null:e},_format:function(e){return e===""?"":window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(e,t){var n;e!==""&&(n=this._parse(e),n!==null&&(t||(n=this._adjustValue(n)),e=this._format(n))),this.element.val(e),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:t(function(e){this._stepUp(e)}),_stepUp:function(e){this._start()&&(this._spin((e||1)*this.options.step),this._stop())},stepDown:t(function(e){this._stepDown(e)}),_stepDown:function(e){this._start()&&(this._spin((e||1)*-this.options.step),this._stop())},pageUp:t(function(e){this._stepUp((e||1)*this.options.page)}),pageDown:t(function(e){this._stepDown((e||1)*this.options.page)}),value:function(e){if(!arguments.length)return this._parse(this.element.val());t(this._value).call(this,e)},widget:function(){return this.uiSpinner}})})(jQuery);(function(e,t){function i(){return++n}function s(e){return e.hash.length>1&&decodeURIComponent(e.href.replace(r,""))===decodeURIComponent(location.href.replace(r,""))}var n=0,r=/#.*$/;e.widget("ui.tabs",{version:"1.10.0",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var t=this,n=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",n.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(t){e(this).is(".ui-state-disabled")&&t.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){e(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this._processTabs(),n.active=this._initialActive(),e.isArray(n.disabled)&&(n.disabled=e.unique(n.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),function(e){return t.tabs.index(e)}))).sort()),this.options.active!==!1&&this.anchors.length?this.active=this._findActive(n.active):this.active=e(),this._refresh(),this.active.length&&this.load(n.active)},_initialActive:function(){var t=this.options.active,n=this.options.collapsible,r=location.hash.substring(1);if(t===null){r&&this.tabs.each(function(n,i){if(e(i).attr("aria-controls")===r)return t=n,!1}),t===null&&(t=this.tabs.index(this.tabs.filter(".ui-tabs-active")));if(t===null||t===-1)t=this.tabs.length?0:!1}return t!==!1&&(t=this.tabs.index(this.tabs.eq(t)),t===-1&&(t=n?!1:0)),!n&&t===!1&&this.anchors.length&&(t=0),t},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()}},_tabKeydown:function(t){var n=e(this.document[0].activeElement).closest("li"),r=this.tabs.index(n),i=!0;if(this._handlePageNav(t))return;switch(t.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:r++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:i=!1,r--;break;case e.ui.keyCode.END:r=this.anchors.length-1;break;case e.ui.keyCode.HOME:r=0;break;case e.ui.keyCode.SPACE:t.preventDefault(),clearTimeout(this.activating),this._activate(r);return;case e.ui.keyCode.ENTER:t.preventDefault(),clearTimeout(this.activating),this._activate(r===this.options.active?!1:r);return;default:return}t.preventDefault(),clearTimeout(this.activating),r=this._focusNextTab(r,i),t.ctrlKey||(n.attr("aria-selected","false"),this.tabs.eq(r).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",r)},this.delay))},_panelKeydown:function(t){if(this._handlePageNav(t))return;t.ctrlKey&&t.keyCode===e.ui.keyCode.UP&&(t.preventDefault(),this.active.focus())},_handlePageNav:function(t){if(t.altKey&&t.keyCode===e.ui.keyCode.PAGE_UP)return this._activate(this._focusNextTab(this.options.active-1,!1)),!0;if(t.altKey&&t.keyCode===e.ui.keyCode.PAGE_DOWN)return this._activate(this._focusNextTab(this.options.active+1,!0)),!0},_findNextTab:function(t,n){function i(){return t>r&&(t=0),t<0&&(t=r),t}var r=this.tabs.length-1;while(e.inArray(i(),this.options.disabled)!==-1)t=n?t+1:t-1;return t},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).focus(),e},_setOption:function(e,t){if(e==="active"){this._activate(t);return}if(e==="disabled"){this._setupDisabled(t);return}this._super(e,t),e==="collapsible"&&(this.element.toggleClass("ui-tabs-collapsible",t),!t&&this.options.active===!1&&this._activate(0)),e==="event"&&this._setupEvents(t),e==="heightStyle"&&this._setupHeightStyle(t)},_tabId:function(e){return e.attr("aria-controls")||"ui-tabs-"+i()},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,n=this.tablist.children(":has(a[href])");t.disabled=e.map(n.filter(".ui-state-disabled"),function(e){return n.index(e)}),this._processTabs(),t.active===!1||!this.anchors.length?(t.active=!1,this.active=e()):this.active.length&&!e.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=e()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return e("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=e(),this.anchors.each(function(n,r){var i,o,u,a=e(r).uniqueId().attr("id"),f=e(r).closest("li"),l=f.attr("aria-controls");s(r)?(i=r.hash,o=t.element.find(t._sanitizeSelector(i))):(u=t._tabId(f),i="#"+u,o=t.element.find(i),o.length||(o=t._createPanel(u),o.insertAfter(t.panels[n-1]||t.tablist)),o.attr("aria-live","polite")),o.length&&(t.panels=t.panels.add(o)),l&&f.data("ui-tabs-aria-controls",l),f.attr({"aria-controls":i.substring(1),"aria-labelledby":a}),o.attr("aria-labelledby",a)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(t){e.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1);for(var n=0,r;r=this.tabs[n];n++)t===!0||e.inArray(n,t)!==-1?e(r).addClass("ui-state-disabled").attr("aria-disabled","true"):e(r).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=t},_setupEvents:function(t){var n={click:function(e){e.preventDefault()}};t&&e.each(t.split(" "),function(e,t){n[t]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,n),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var n,r=this.element.parent();t==="fill"?(n=r.height(),n-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var t=e(this),r=t.css("position");if(r==="absolute"||r==="fixed")return;n-=t.outerHeight(!0)}),this.element.children().not(this.panels).each(function(){n-=e(this).outerHeight(!0)}),this.panels.each(function(){e(this).height(Math.max(0,n-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):t==="auto"&&(n=0,this.panels.each(function(){n=Math.max(n,e(this).height("").height())}).height(n))},_eventHandler:function(t){var n=this.options,r=this.active,i=e(t.currentTarget),s=i.closest("li"),o=s[0]===r[0],u=o&&n.collapsible,a=u?e():this._getPanelForTab(s),f=r.length?this._getPanelForTab(r):e(),l={oldTab:r,oldPanel:f,newTab:u?e():s,newPanel:a};t.preventDefault();if(s.hasClass("ui-state-disabled")||s.hasClass("ui-tabs-loading")||this.running||o&&!n.collapsible||this._trigger("beforeActivate",t,l)===!1)return;n.active=u?!1:this.tabs.index(s),this.active=o?e():s,this.xhr&&this.xhr.abort(),!f.length&&!a.length&&e.error("jQuery UI Tabs: Mismatching fragment identifier."),a.length&&this.load(this.tabs.index(s),t),this._toggle(t,l)},_toggle:function(t,n){function o(){r.running=!1,r._trigger("activate",t,n)}function u(){n.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),i.length&&r.options.show?r._show(i,r.options.show,o):(i.show(),o())}var r=this,i=n.newPanel,s=n.oldPanel;this.running=!0,s.length&&this.options.hide?this._hide(s,this.options.hide,function(){n.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),u()}):(n.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),s.hide(),u()),s.attr({"aria-expanded":"false","aria-hidden":"true"}),n.oldTab.attr("aria-selected","false"),i.length&&s.length?n.oldTab.attr("tabIndex",-1):i.length&&this.tabs.filter(function(){return e(this).attr("tabIndex")===0}).attr("tabIndex",-1),i.attr({"aria-expanded":"true","aria-hidden":"false"}),n.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(t){var n,r=this._findActive(t);if(r[0]===this.active[0])return;r.length||(r=this.active),n=r.find(".ui-tabs-anchor")[0],this._eventHandler({target:n,currentTarget:n,preventDefault:e.noop})},_findActive:function(t){return t===!1?e():this.tabs.eq(t)},_getIndex:function(e){return typeof e=="string"&&(e=this.anchors.index(this.anchors.filter("[href$='"+e+"']"))),e},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var t=e(this),n=t.data("ui-tabs-aria-controls");n?t.attr("aria-controls",n).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls")}),this.panels.show(),this.options.heightStyle!=="content"&&this.panels.css("height","")},enable:function(n){var r=this.options.disabled;if(r===!1)return;n===t?r=!1:(n=this._getIndex(n),e.isArray(r)?r=e.map(r,function(e){return e!==n?e:null}):r=e.map(this.tabs,function(e,t){return t!==n?t:null})),this._setupDisabled(r)},disable:function(n){var r=this.options.disabled;if(r===!0)return;if(n===t)r=!0;else{n=this._getIndex(n);if(e.inArray(n,r)!==-1)return;e.isArray(r)?r=e.merge([n],r).sort():r=[n]}this._setupDisabled(r)},load:function(t,n){t=this._getIndex(t);var r=this,i=this.tabs.eq(t),o=i.find(".ui-tabs-anchor"),u=this._getPanelForTab(i),a={tab:i,panel:u};if(s(o[0]))return;this.xhr=e.ajax(this._ajaxSettings(o,n,a)),this.xhr&&this.xhr.statusText!=="canceled"&&(i.addClass("ui-tabs-loading"),u.attr("aria-busy","true"),this.xhr.success(function(e){setTimeout(function(){u.html(e),r._trigger("load",n,a)},1)}).complete(function(e,t){setTimeout(function(){t==="abort"&&r.panels.stop(!1,!0),i.removeClass("ui-tabs-loading"),u.removeAttr("aria-busy"),e===r.xhr&&delete r.xhr},1)}))},_ajaxSettings:function(t,n,r){var i=this;return{url:t.attr("href"),beforeSend:function(t,s){return i._trigger("beforeLoad",n,e.extend({jqXHR:t,ajaxSettings:s},r))}}},_getPanelForTab:function(t){var n=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+n))}})})(jQuery);(function(e){function n(t,n){var r=(t.attr("aria-describedby")||"").split(/\s+/);r.push(n),t.data("ui-tooltip-id",n).attr("aria-describedby",e.trim(r.join(" ")))}function r(t){var n=t.data("ui-tooltip-id"),r=(t.attr("aria-describedby")||"").split(/\s+/),i=e.inArray(n,r);i!==-1&&r.splice(i,1),t.removeData("ui-tooltip-id"),r=e.trim(r.join(" ")),r?t.attr("aria-describedby",r):t.removeAttr("aria-describedby")}var t=0;e.widget("ui.tooltip",{version:"1.10.0",options:{content:function(){var t=e(this).attr("title")||"";return e("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable()},_setOption:function(t,n){var r=this;if(t==="disabled"){this[n?"_disable":"_enable"](),this.options[t]=n;return}this._super(t,n),t==="content"&&e.each(this.tooltips,function(e,t){r._updateContent(t)})},_disable:function(){var t=this;e.each(this.tooltips,function(n,r){var i=e.Event("blur");i.target=i.currentTarget=r[0],t.close(i,!0)}),this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.is("[title]")&&t.data("ui-tooltip-title",t.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))})},open:function(t){var n=this,r=e(t?t.target:this.element).closest(this.options.items);if(!r.length||r.data("ui-tooltip-id"))return;r.attr("title")&&r.data("ui-tooltip-title",r.attr("title")),r.data("ui-tooltip-open",!0),t&&t.type==="mouseover"&&r.parents().each(function(){var t=e(this),r;t.data("ui-tooltip-open")&&(r=e.Event("blur"),r.target=r.currentTarget=this,n.close(r,!0)),t.attr("title")&&(t.uniqueId(),n.parents[this.id]={element:this,title:t.attr("title")},t.attr("title",""))}),this._updateContent(r,t)},_updateContent:function(e,t){var n,r=this.options.content,i=this,s=t?t.type:null;if(typeof r=="string")return this._open(t,e,r);n=r.call(e[0],function(n){if(!e.data("ui-tooltip-open"))return;i._delay(function(){t&&(t.type=s),this._open(t,e,n)})}),n&&this._open(t,e,n)},_open:function(t,r,i){function f(e){a.of=e;if(s.is(":hidden"))return;s.position(a)}var s,o,u,a=e.extend({},this.options.position);if(!i)return;s=this._find(r);if(s.length){s.find(".ui-tooltip-content").html(i);return}r.is("[title]")&&(t&&t.type==="mouseover"?r.attr("title",""):r.removeAttr("title")),s=this._tooltip(r),n(r,s.attr("id")),s.find(".ui-tooltip-content").html(i),this.options.track&&t&&/^mouse/.test(t.type)?(this._on(this.document,{mousemove:f}),f(t)):s.position(e.extend({of:r},this.options.position)),s.hide(),this._show(s,this.options.show),this.options.show&&this.options.show.delay&&(u=this.delayedShow=setInterval(function(){s.is(":visible")&&(f(a.of),clearInterval(u))},e.fx.interval)),this._trigger("open",t,{tooltip:s}),o={keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var n=e.Event(t);n.currentTarget=r[0],this.close(n,!0)}},remove:function(){this._removeTooltip(s)}};if(!t||t.type==="mouseover")o.mouseleave="close";if(!t||t.type==="focusin")o.focusout="close";this._on(!0,r,o)},close:function(t){var n=this,i=e(t?t.currentTarget:this.element),s=this._find(i);if(this.closing)return;clearInterval(this.delayedShow),i.data("ui-tooltip-title")&&i.attr("title",i.data("ui-tooltip-title")),r(i),s.stop(!0),this._hide(s,this.options.hide,function(){n._removeTooltip(e(this))}),i.removeData("ui-tooltip-open"),this._off(i,"mouseleave focusout keyup"),i[0]!==this.element[0]&&this._off(i,"remove"),this._off(this.document,"mousemove"),t&&t.type==="mouseleave"&&e.each(this.parents,function(t,r){e(r.element).attr("title",r.title),delete n.parents[t]}),this.closing=!0,this._trigger("close",t,{tooltip:s}),this.closing=!1},_tooltip:function(n){var r="ui-tooltip-"+t++,i=e("<div>").attr({id:r,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));return e("<div>").addClass("ui-tooltip-content").appendTo(i),i.appendTo(this.document[0].body),this.tooltips[r]=n,i},_find:function(t){var n=t.data("ui-tooltip-id");return n?e("#"+n):e()},_removeTooltip:function(e){e.remove(),delete this.tooltips[e.attr("id")]},_destroy:function(){var t=this;e.each(this.tooltips,function(n,r){var i=e.Event("blur");i.target=i.currentTarget=r[0],t.close(i,!0),e("#"+n).remove(),r.data("ui-tooltip-title")&&(r.attr("title",r.data("ui-tooltip-title")),r.removeData("ui-tooltip-title"))})}})})(jQuery);jQuery.effects||function(e,t){var n="ui-effects-";e.effects={effect:{}},function(e,t){function h(e,t,n){var r=u[t.type]||{};return e==null?n||!t.def?null:t.def:(e=r.floor?~~e:parseFloat(e),isNaN(e)?t.def:r.mod?(e+r.mod)%r.mod:0>e?0:r.max<e?r.max:e)}function p(t){var n=s(),r=n._rgba=[];return t=t.toLowerCase(),c(i,function(e,i){var s,u=i.re.exec(t),a=u&&i.parse(u),f=i.space||"rgba";if(a)return s=n[f](a),n[o[f].cache]=s[o[f].cache],r=n._rgba=s._rgba,!1}),r.length?(r.join()==="0,0,0,0"&&e.extend(r,l.transparent),n):l[t]}function d(e,t,n){return n=(n+1)%1,n*6<1?e+(t-e)*n*6:n*2<1?t:n*3<2?e+(t-e)*(2/3-n)*6:e}var n="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",r=/^([\-+])=\s*(\d+\.?\d*)/,i=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1]*2.55,e[2]*2.55,e[3]*2.55,e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],s=e.Color=function(t,n,r,i){return new e.Color.fn.parse(t,n,r,i)},o={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},u={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},a=s.support={},f=e("<p>")[0],l,c=e.each;f.style.cssText="background-color:rgba(1,1,1,.5)",a.rgba=f.style.backgroundColor.indexOf("rgba")>-1,c(o,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),s.fn=e.extend(s.prototype,{parse:function(n,r,i,u){if(n===t)return this._rgba=[null,null,null,null],this;if(n.jquery||n.nodeType)n=e(n).css(r),r=t;var a=this,f=e.type(n),d=this._rgba=[];r!==t&&(n=[n,r,i,u],f="array");if(f==="string")return this.parse(p(n)||l._default);if(f==="array")return c(o.rgba.props,function(e,t){d[t.idx]=h(n[t.idx],t)}),this;if(f==="object")return n instanceof s?c(o,function(e,t){n[t.cache]&&(a[t.cache]=n[t.cache].slice())}):c(o,function(t,r){var i=r.cache;c(r.props,function(e,t){if(!a[i]&&r.to){if(e==="alpha"||n[e]==null)return;a[i]=r.to(a._rgba)}a[i][t.idx]=h(n[e],t,!0)}),a[i]&&e.inArray(null,a[i].slice(0,3))<0&&(a[i][3]=1,r.from&&(a._rgba=r.from(a[i])))}),this},is:function(e){var t=s(e),n=!0,r=this;return c(o,function(e,i){var s,o=t[i.cache];return o&&(s=r[i.cache]||i.to&&i.to(r._rgba)||[],c(i.props,function(e,t){if(o[t.idx]!=null)return n=o[t.idx]===s[t.idx],n})),n}),n},_space:function(){var e=[],t=this;return c(o,function(n,r){t[r.cache]&&e.push(n)}),e.pop()},transition:function(e,t){var n=s(e),r=n._space(),i=o[r],a=this.alpha()===0?s("transparent"):this,f=a[i.cache]||i.to(a._rgba),l=f.slice();return n=n[i.cache],c(i.props,function(e,r){var i=r.idx,s=f[i],o=n[i],a=u[r.type]||{};if(o===null)return;s===null?l[i]=o:(a.mod&&(o-s>a.mod/2?s+=a.mod:s-o>a.mod/2&&(s-=a.mod)),l[i]=h((o-s)*t+s,r))}),this[r](l)},blend:function(t){if(this._rgba[3]===1)return this;var n=this._rgba.slice(),r=n.pop(),i=s(t)._rgba;return s(e.map(n,function(e,t){return(1-r)*i[t]+r*e}))},toRgbaString:function(){var t="rgba(",n=e.map(this._rgba,function(e,t){return e==null?t>2?1:0:e});return n[3]===1&&(n.pop(),t="rgb("),t+n.join()+")"},toHslaString:function(){var t="hsla(",n=e.map(this.hsla(),function(e,t){return e==null&&(e=t>2?1:0),t&&t<3&&(e=Math.round(e*100)+"%"),e});return n[3]===1&&(n.pop(),t="hsl("),t+n.join()+")"},toHexString:function(t){var n=this._rgba.slice(),r=n.pop();return t&&n.push(~~(r*255)),"#"+e.map(n,function(e){return e=(e||0).toString(16),e.length===1?"0"+e:e}).join("")},toString:function(){return this._rgba[3]===0?"transparent":this.toRgbaString()}}),s.fn.parse.prototype=s.fn,o.hsla.to=function(e){if(e[0]==null||e[1]==null||e[2]==null)return[null,null,null,e[3]];var t=e[0]/255,n=e[1]/255,r=e[2]/255,i=e[3],s=Math.max(t,n,r),o=Math.min(t,n,r),u=s-o,a=s+o,f=a*.5,l,c;return o===s?l=0:t===s?l=60*(n-r)/u+360:n===s?l=60*(r-t)/u+120:l=60*(t-n)/u+240,u===0?c=0:f<=.5?c=u/a:c=u/(2-a),[Math.round(l)%360,c,f,i==null?1:i]},o.hsla.from=function(e){if(e[0]==null||e[1]==null||e[2]==null)return[null,null,null,e[3]];var t=e[0]/360,n=e[1],r=e[2],i=e[3],s=r<=.5?r*(1+n):r+n-r*n,o=2*r-s;return[Math.round(d(o,s,t+1/3)*255),Math.round(d(o,s,t)*255),Math.round(d(o,s,t-1/3)*255),i]},c(o,function(n,i){var o=i.props,u=i.cache,a=i.to,f=i.from;s.fn[n]=function(n){a&&!this[u]&&(this[u]=a(this._rgba));if(n===t)return this[u].slice();var r,i=e.type(n),l=i==="array"||i==="object"?n:arguments,p=this[u].slice();return c(o,function(e,t){var n=l[i==="object"?e:t.idx];n==null&&(n=p[t.idx]),p[t.idx]=h(n,t)}),f?(r=s(f(p)),r[u]=p,r):s(p)},c(o,function(t,i){if(s.fn[t])return;s.fn[t]=function(s){var o=e.type(s),u=t==="alpha"?this._hsla?"hsla":"rgba":n,a=this[u](),f=a[i.idx],l;return o==="undefined"?f:(o==="function"&&(s=s.call(this,f),o=e.type(s)),s==null&&i.empty?this:(o==="string"&&(l=r.exec(s),l&&(s=f+parseFloat(l[2])*(l[1]==="+"?1:-1))),a[i.idx]=s,this[u](a)))}})}),s.hook=function(t){var n=t.split(" ");c(n,function(t,n){e.cssHooks[n]={set:function(t,r){var i,o,u="";if(r!=="transparent"&&(e.type(r)!=="string"||(i=p(r)))){r=s(i||r);if(!a.rgba&&r._rgba[3]!==1){o=n==="backgroundColor"?t.parentNode:t;while((u===""||u==="transparent")&&o&&o.style)try{u=e.css(o,"backgroundColor"),o=o.parentNode}catch(f){}r=r.blend(u&&u!=="transparent"?u:"_default")}r=r.toRgbaString()}try{t.style[n]=r}catch(f){}}},e.fx.step[n]=function(t){t.colorInit||(t.start=s(t.elem,n),t.end=s(t.end),t.colorInit=!0),e.cssHooks[n].set(t.elem,t.start.transition(t.end,t.pos))}})},s.hook(n),e.cssHooks.borderColor={expand:function(e){var t={};return c(["Top","Right","Bottom","Left"],function(n,r){t["border"+r+"Color"]=e}),t}},l=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function i(t){var n,r,i=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,s={};if(i&&i.length&&i[0]&&i[i[0]]){r=i.length;while(r--)n=i[r],typeof i[n]=="string"&&(s[e.camelCase(n)]=i[n])}else for(n in i)typeof i[n]=="string"&&(s[n]=i[n]);return s}function s(t,n){var i={},s,o;for(s in n)o=n[s],t[s]!==o&&!r[s]&&(e.fx.step[s]||!isNaN(parseFloat(o)))&&(i[s]=o);return i}var n=["add","remove","toggle"],r={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,n){e.fx.step[n]=function(e){if(e.end!=="none"&&!e.setAttr||e.pos===1&&!e.setAttr)jQuery.style(e.elem,n,e.end),e.setAttr=!0}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}),e.effects.animateClass=function(t,r,o,u){var a=e.speed(r,o,u);return this.queue(function(){var r=e(this),o=r.attr("class")||"",u,f=a.children?r.find("*").addBack():r;f=f.map(function(){var t=e(this);return{el:t,start:i(this)}}),u=function(){e.each(n,function(e,n){t[n]&&r[n+"Class"](t[n])})},u(),f=f.map(function(){return this.end=i(this.el[0]),this.diff=s(this.start,this.end),this}),r.attr("class",o),f=f.map(function(){var t=this,n=e.Deferred(),r=e.extend({},a,{queue:!1,complete:function(){n.resolve(t)}});return this.el.animate(this.diff,r),n.promise()}),e.when.apply(e,f.get()).done(function(){u(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),a.complete.call(r[0])})})},e.fn.extend({_addClass:e.fn.addClass,addClass:function(t,n,r,i){return n?e.effects.animateClass.call(this,{add:t},n,r,i):this._addClass(t)},_removeClass:e.fn.removeClass,removeClass:function(t,n,r,i){return n?e.effects.animateClass.call(this,{remove:t},n,r,i):this._removeClass(t)},_toggleClass:e.fn.toggleClass,toggleClass:function(n,r,i,s,o){return typeof r=="boolean"||r===t?i?e.effects.animateClass.call(this,r?{add:n}:{remove:n},i,s,o):this._toggleClass(n,r):e.effects.animateClass.call(this,{toggle:n},r,i,s)},switchClass:function(t,n,r,i,s){return e.effects.animateClass.call(this,{add:n,remove:t},r,i,s)}})}(),function(){function r(t,n,r,i){e.isPlainObject(t)&&(n=t,t=t.effect),t={effect:t},n==null&&(n={}),e.isFunction(n)&&(i=n,r=null,n={});if(typeof n=="number"||e.fx.speeds[n])i=r,r=n,n={};return e.isFunction(r)&&(i=r,r=null),n&&e.extend(t,n),r=r||n.duration,t.duration=e.fx.off?0:typeof r=="number"?r:r in e.fx.speeds?e.fx.speeds[r]:e.fx.speeds._default,t.complete=i||n.complete,t}function i(t){return!t||typeof t=="number"||e.fx.speeds[t]?!0:typeof t=="string"&&!e.effects.effect[t]}e.extend(e.effects,{version:"1.10.0",save:function(e,t){for(var r=0;r<t.length;r++)t[r]!==null&&e.data(n+t[r],e[0].style[t[r]])},restore:function(e,r){var i,s;for(s=0;s<r.length;s++)r[s]!==null&&(i=e.data(n+r[s]),i===t&&(i=""),e.css(r[s],i))},setMode:function(e,t){return t==="toggle"&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var n,r;switch(e[0]){case"top":n=0;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=e[0]/t.height}switch(e[1]){case"left":r=0;break;case"center":r=.5;break;case"right":r=1;break;default:r=e[1]/t.width}return{x:r,y:n}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var n={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},r=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),i={width:t.width(),height:t.height()},s=document.activeElement;try{s.id}catch(o){s=document.body}return t.wrap(r),(t[0]===s||e.contains(t[0],s))&&e(s).focus(),r=t.parent(),t.css("position")==="static"?(r.css({position:"relative"}),t.css({position:"relative"})):(e.extend(n,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,r){n[r]=t.css(r),isNaN(parseInt(n[r],10))&&(n[r]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(i),r.css(n).show()},removeWrapper:function(t){var n=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===n||e.contains(t[0],n))&&e(n).focus()),t},setTransition:function(t,n,r,i){return i=i||{},e.each(n,function(e,n){var s=t.cssUnit(n);s[0]>0&&(i[n]=s[0]*r+s[1])}),i}}),e.fn.extend({effect:function(){function o(n){function u(){e.isFunction(i)&&i.call(r[0]),e.isFunction(n)&&n()}var r=e(this),i=t.complete,o=t.mode;(r.is(":hidden")?o==="hide":o==="show")?u():s.call(r[0],t,u)}var t=r.apply(this,arguments),n=t.mode,i=t.queue,s=e.effects.effect[t.effect];return e.fx.off||!s?n?this[n](t.duration,t.complete):this.each(function(){t.complete&&t.complete.call(this)}):i===!1?this.each(o):this.queue(i||"fx",o)},_show:e.fn.show,show:function(e){if(i(e))return this._show.apply(this,arguments);var t=r.apply(this,arguments);return t.mode="show",this.effect.call(this,t)},_hide:e.fn.hide,hide:function(e){if(i(e))return this._hide.apply(this,arguments);var t=r.apply(this,arguments);return t.mode="hide",this.effect.call(this,t)},__toggle:e.fn.toggle,toggle:function(t){if(i(t)||typeof t=="boolean"||e.isFunction(t))return this.__toggle.apply(this,arguments);var n=r.apply(this,arguments);return n.mode="toggle",this.effect.call(this,n)},cssUnit:function(t){var n=this.css(t),r=[];return e.each(["em","px","%","pt"],function(e,t){n.indexOf(t)>0&&(r=[parseFloat(n),t])}),r}})}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,n){t[n]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return e===0||e===1?e:-Math.pow(2,8*(e-1))*Math.sin(((e-1)*80-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){var t,n=4;while(e<((t=Math.pow(2,--n))-1)/11);return 1/Math.pow(4,3-n)-7.5625*Math.pow((t*3-2)/22-e,2)}}),e.each(t,function(t,n){e.easing["easeIn"+t]=n,e.easing["easeOut"+t]=function(e){return 1-n(1-e)},e.easing["easeInOut"+t]=function(e){return e<.5?n(e*2)/2:1-n(e*-2+2)/2}})}()}(jQuery);(function(e,t){var n=/up|down|vertical/,r=/up|left|vertical|horizontal/;e.effects.effect.blind=function(t,i){var s=e(this),o=["position","top","bottom","left","right","height","width"],u=e.effects.setMode(s,t.mode||"hide"),a=t.direction||"up",f=n.test(a),l=f?"height":"width",c=f?"top":"left",h=r.test(a),p={},d=u==="show",v,m,g;s.parent().is(".ui-effects-wrapper")?e.effects.save(s.parent(),o):e.effects.save(s,o),s.show(),v=e.effects.createWrapper(s).css({overflow:"hidden"}),m=v[l](),g=parseFloat(v.css(c))||0,p[l]=d?m:0,h||(s.css(f?"bottom":"right",0).css(f?"top":"left","auto").css({position:"absolute"}),p[c]=d?g:m+g),d&&(v.css(l,0),h||v.css(c,g+m)),v.animate(p,{duration:t.duration,easing:t.easing,queue:!1,complete:function(){u==="hide"&&s.hide(),e.effects.restore(s,o),e.effects.removeWrapper(s),i()}})}})(jQuery);(function(e,t){e.effects.effect.bounce=function(t,n){var r=e(this),i=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(r,t.mode||"effect"),o=s==="hide",u=s==="show",a=t.direction||"up",f=t.distance,l=t.times||5,c=l*2+(u||o?1:0),h=t.duration/c,p=t.easing,d=a==="up"||a==="down"?"top":"left",v=a==="up"||a==="left",m,g,y,b=r.queue(),w=b.length;(u||o)&&i.push("opacity"),e.effects.save(r,i),r.show(),e.effects.createWrapper(r),f||(f=r[d==="top"?"outerHeight":"outerWidth"]()/3),u&&(y={opacity:1},y[d]=0,r.css("opacity",0).css(d,v?-f*2:f*2).animate(y,h,p)),o&&(f/=Math.pow(2,l-1)),y={},y[d]=0;for(m=0;m<l;m++)g={},g[d]=(v?"-=":"+=")+f,r.animate(g,h,p).animate(y,h,p),f=o?f*2:f/2;o&&(g={opacity:0},g[d]=(v?"-=":"+=")+f,r.animate(g,h,p)),r.queue(function(){o&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}),w>1&&b.splice.apply(b,[1,0].concat(b.splice(w,c+1))),r.dequeue()}})(jQuery);(function(e,t){e.effects.effect.clip=function(t,n){var r=e(this),i=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(r,t.mode||"hide"),o=s==="show",u=t.direction||"vertical",a=u==="vertical",f=a?"height":"width",l=a?"top":"left",c={},h,p,d;e.effects.save(r,i),r.show(),h=e.effects.createWrapper(r).css({overflow:"hidden"}),p=r[0].tagName==="IMG"?h:r,d=p[f](),o&&(p.css(f,0),p.css(l,d/2)),c[f]=o?d:0,c[l]=o?0:d/2,p.animate(c,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){o||r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}})}})(jQuery);(function(e,t){e.effects.effect.drop=function(t,n){var r=e(this),i=["position","top","bottom","left","right","opacity","height","width"],s=e.effects.setMode(r,t.mode||"hide"),o=s==="show",u=t.direction||"left",a=u==="up"||u==="down"?"top":"left",f=u==="up"||u==="left"?"pos":"neg",l={opacity:o?1:0},c;e.effects.save(r,i),r.show(),e.effects.createWrapper(r),c=t.distance||r[a==="top"?"outerHeight":"outerWidth"](!0)/2,o&&r.css("opacity",0).css(a,f==="pos"?-c:c),l[a]=(o?f==="pos"?"+=":"-=":f==="pos"?"-=":"+=")+c,r.animate(l,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){s==="hide"&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}})}})(jQuery);(function(e,t){e.effects.effect.explode=function(t,n){function y(){c.push(this),c.length===r*i&&b()}function b(){s.css({visibility:"visible"}),e(c).remove(),u||s.hide(),n()}var r=t.pieces?Math.round(Math.sqrt(t.pieces)):3,i=r,s=e(this),o=e.effects.setMode(s,t.mode||"hide"),u=o==="show",a=s.show().css("visibility","hidden").offset(),f=Math.ceil(s.outerWidth()/i),l=Math.ceil(s.outerHeight()/r),c=[],h,p,d,v,m,g;for(h=0;h<r;h++){v=a.top+h*l,g=h-(r-1)/2;for(p=0;p<i;p++)d=a.left+p*f,m=p-(i-1)/2,s.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-p*f,top:-h*l}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:f,height:l,left:d+(u?m*f:0),top:v+(u?g*l:0),opacity:u?0:1}).animate({left:d+(u?0:m*f),top:v+(u?0:g*l),opacity:u?1:0},t.duration||500,t.easing,y)}}})(jQuery);(function(e,t){e.effects.effect.fade=function(t,n){var r=e(this),i=e.effects.setMode(r,t.mode||"toggle");r.animate({opacity:i},{queue:!1,duration:t.duration,easing:t.easing,complete:n})}})(jQuery);(function(e,t){e.effects.effect.fold=function(t,n){var r=e(this),i=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(r,t.mode||"hide"),o=s==="show",u=s==="hide",a=t.size||15,f=/([0-9]+)%/.exec(a),l=!!t.horizFirst,c=o!==l,h=c?["width","height"]:["height","width"],p=t.duration/2,d,v,m={},g={};e.effects.save(r,i),r.show(),d=e.effects.createWrapper(r).css({overflow:"hidden"}),v=c?[d.width(),d.height()]:[d.height(),d.width()],f&&(a=parseInt(f[1],10)/100*v[u?0:1]),o&&d.css(l?{height:0,width:a}:{height:a,width:0}),m[h[0]]=o?v[0]:a,g[h[1]]=o?v[1]:0,d.animate(m,p,t.easing).animate(g,p,t.easing,function(){u&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()})}})(jQuery);(function(e,t){e.effects.effect.highlight=function(t,n){var r=e(this),i=["backgroundImage","backgroundColor","opacity"],s=e.effects.setMode(r,t.mode||"show"),o={backgroundColor:r.css("backgroundColor")};s==="hide"&&(o.opacity=0),e.effects.save(r,i),r.show().css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(o,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){s==="hide"&&r.hide(),e.effects.restore(r,i),n()}})}})(jQuery);(function(e,t){e.effects.effect.pulsate=function(t,n){var r=e(this),i=e.effects.setMode(r,t.mode||"show"),s=i==="show",o=i==="hide",u=s||i==="hide",a=(t.times||5)*2+(u?1:0),f=t.duration/a,l=0,c=r.queue(),h=c.length,p;if(s||!r.is(":visible"))r.css("opacity",0).show(),l=1;for(p=1;p<a;p++)r.animate({opacity:l},f,t.easing),l=1-l;r.animate({opacity:l},f,t.easing),r.queue(function(){o&&r.hide(),n()}),h>1&&c.splice.apply(c,[1,0].concat(c.splice(h,a+1))),r.dequeue()}})(jQuery);(function(e,t){e.effects.effect.puff=function(t,n){var r=e(this),i=e.effects.setMode(r,t.mode||"hide"),s=i==="hide",o=parseInt(t.percent,10)||150,u=o/100,a={height:r.height(),width:r.width(),outerHeight:r.outerHeight(),outerWidth:r.outerWidth()};e.extend(t,{effect:"scale",queue:!1,fade:!0,mode:i,complete:n,percent:s?o:100,from:s?a:{height:a.height*u,width:a.width*u,outerHeight:a.outerHeight*u,outerWidth:a.outerWidth*u}}),r.effect(t)},e.effects.effect.scale=function(t,n){var r=e(this),i=e.extend(!0,{},t),s=e.effects.setMode(r,t.mode||"effect"),o=parseInt(t.percent,10)||(parseInt(t.percent,10)===0?0:s==="hide"?0:100),u=t.direction||"both",a=t.origin,f={height:r.height(),width:r.width(),outerHeight:r.outerHeight(),outerWidth:r.outerWidth()},l={y:u!=="horizontal"?o/100:1,x:u!=="vertical"?o/100:1};i.effect="size",i.queue=!1,i.complete=n,s!=="effect"&&(i.origin=a||["middle","center"],i.restore=!0),i.from=t.from||(s==="show"?{height:0,width:0,outerHeight:0,outerWidth:0}:f),i.to={height:f.height*l.y,width:f.width*l.x,outerHeight:f.outerHeight*l.y,outerWidth:f.outerWidth*l.x},i.fade&&(s==="show"&&(i.from.opacity=0,i.to.opacity=1),s==="hide"&&(i.from.opacity=1,i.to.opacity=0)),r.effect(i)},e.effects.effect.size=function(t,n){var r,i,s,o=e(this),u=["position","top","bottom","left","right","width","height","overflow","opacity"],a=["position","top","bottom","left","right","overflow","opacity"],f=["width","height","overflow"],l=["fontSize"],c=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],h=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],p=e.effects.setMode(o,t.mode||"effect"),d=t.restore||p!=="effect",v=t.scale||"both",m=t.origin||["middle","center"],g=o.css("position"),y=d?u:a,b={height:0,width:0,outerHeight:0,outerWidth:0};p==="show"&&o.show(),r={height:o.height(),width:o.width(),outerHeight:o.outerHeight(),outerWidth:o.outerWidth()},t.mode==="toggle"&&p==="show"?(o.from=t.to||b,o.to=t.from||r):(o.from=t.from||(p==="show"?b:r),o.to=t.to||(p==="hide"?b:r)),s={from:{y:o.from.height/r.height,x:o.from.width/r.width},to:{y:o.to.height/r.height,x:o.to.width/r.width}};if(v==="box"||v==="both")s.from.y!==s.to.y&&(y=y.concat(c),o.from=e.effects.setTransition(o,c,s.from.y,o.from),o.to=e.effects.setTransition(o,c,s.to.y,o.to)),s.from.x!==s.to.x&&(y=y.concat(h),o.from=e.effects.setTransition(o,h,s.from.x,o.from),o.to=e.effects.setTransition(o,h,s.to.x,o.to));(v==="content"||v==="both")&&s.from.y!==s.to.y&&(y=y.concat(l).concat(f),o.from=e.effects.setTransition(o,l,s.from.y,o.from),o.to=e.effects.setTransition(o,l,s.to.y,o.to)),e.effects.save(o,y),o.show(),e.effects.createWrapper(o),o.css("overflow","hidden").css(o.from),m&&(i=e.effects.getBaseline(m,r),o.from.top=(r.outerHeight-o.outerHeight())*i.y,o.from.left=(r.outerWidth-o.outerWidth())*i.x,o.to.top=(r.outerHeight-o.to.outerHeight)*i.y,o.to.left=(r.outerWidth-o.to.outerWidth)*i.x),o.css(o.from);if(v==="content"||v==="both")c=c.concat(["marginTop","marginBottom"]).concat(l),h=h.concat(["marginLeft","marginRight"]),f=u.concat(c).concat(h),o.find("*[width]").each(function(){var n=e(this),r={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()};d&&e.effects.save(n,f),n.from={height:r.height*s.from.y,width:r.width*s.from.x,outerHeight:r.outerHeight*s.from.y,outerWidth:r.outerWidth*s.from.x},n.to={height:r.height*s.to.y,width:r.width*s.to.x,outerHeight:r.height*s.to.y,outerWidth:r.width*s.to.x},s.from.y!==s.to.y&&(n.from=e.effects.setTransition(n,c,s.from.y,n.from),n.to=e.effects.setTransition(n,c,s.to.y,n.to)),s.from.x!==s.to.x&&(n.from=e.effects.setTransition(n,h,s.from.x,n.from),n.to=e.effects.setTransition(n,h,s.to.x,n.to)),n.css(n.from),n.animate(n.to,t.duration,t.easing,function(){d&&e.effects.restore(n,f)})});o.animate(o.to,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){o.to.opacity===0&&o.css("opacity",o.from.opacity),p==="hide"&&o.hide(),e.effects.restore(o,y),d||(g==="static"?o.css({position:"relative",top:o.to.top,left:o.to.left}):e.each(["top","left"],function(e,t){o.css(t,function(t,n){var r=parseInt(n,10),i=e?o.to.left:o.to.top;return n==="auto"?i+"px":r+i+"px"})})),e.effects.removeWrapper(o),n()}})}})(jQuery);(function(e,t){e.effects.effect.shake=function(t,n){var r=e(this),i=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(r,t.mode||"effect"),o=t.direction||"left",u=t.distance||20,a=t.times||3,f=a*2+1,l=Math.round(t.duration/f),c=o==="up"||o==="down"?"top":"left",h=o==="up"||o==="left",p={},d={},v={},m,g=r.queue(),y=g.length;e.effects.save(r,i),r.show(),e.effects.createWrapper(r),p[c]=(h?"-=":"+=")+u,d[c]=(h?"+=":"-=")+u*2,v[c]=(h?"-=":"+=")+u*2,r.animate(p,l,t.easing);for(m=1;m<a;m++)r.animate(d,l,t.easing).animate(v,l,t.easing);r.animate(d,l,t.easing).animate(p,l/2,t.easing).queue(function(){s==="hide"&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}),y>1&&g.splice.apply(g,[1,0].concat(g.splice(y,f+1))),r.dequeue()}})(jQuery);(function(e,t){e.effects.effect.slide=function(t,n){var r=e(this),i=["position","top","bottom","left","right","width","height"],s=e.effects.setMode(r,t.mode||"show"),o=s==="show",u=t.direction||"left",a=u==="up"||u==="down"?"top":"left",f=u==="up"||u==="left",l,c={};e.effects.save(r,i),r.show(),l=t.distance||r[a==="top"?"outerHeight":"outerWidth"](!0),e.effects.createWrapper(r).css({overflow:"hidden"}),o&&r.css(a,f?isNaN(l)?"-"+l:-l:l),c[a]=(o?f?"+=":"-=":f?"-=":"+=")+l,r.animate(c,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){s==="hide"&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}})}})(jQuery);(function(e,t){e.effects.effect.transfer=function(t,n){var r=e(this),i=e(t.to),s=i.css("position")==="fixed",o=e("body"),u=s?o.scrollTop():0,a=s?o.scrollLeft():0,f=i.offset(),l={top:f.top-u,left:f.left-a,height:i.innerHeight(),width:i.innerWidth()},c=r.offset(),h=e("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(t.className).css({top:c.top-u,left:c.left-a,height:r.innerHeight(),width:r.innerWidth(),position:s?"fixed":"absolute"}).animate(l,t.duration,t.easing,function(){h.remove(),n()})}})(jQuery);
/*!
 * jQuery Cookie Plugin v1.4.0
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2013 Klaus Hartl
 * Released under the MIT license
 */
(function (factory) {
	if (typeof define === 'function' && define.amd) {
		// AMD. Register as anonymous module.
		define(['jquery'], factory);
	} else {
		// Browser globals.
		factory(jQuery);
	}
}(function ($) {

	var pluses = /\+/g;

	function encode(s) {
		return config.raw ? s : encodeURIComponent(s);
	}

	function decode(s) {
		return config.raw ? s : decodeURIComponent(s);
	}

	function stringifyCookieValue(value) {
		return encode(config.json ? JSON.stringify(value) : String(value));
	}

	function parseCookieValue(s) {
		if (s.indexOf('"') === 0) {
			// This is a quoted cookie as according to RFC2068, unescape...
			s = s.slice(1, -1).replace(/\\"/g, '"').replace(/\\\\/g, '\\');
		}

		try {
			// Replace server-side written pluses with spaces.
			// If we can't decode the cookie, ignore it, it's unusable.
			s = decodeURIComponent(s.replace(pluses, ' '));
		} catch(e) {
			return;
		}

		try {
			// If we can't parse the cookie, ignore it, it's unusable.
			return config.json ? JSON.parse(s) : s;
		} catch(e) {}
	}

	function read(s, converter) {
		var value = config.raw ? s : parseCookieValue(s);
		return $.isFunction(converter) ? converter(value) : value;
	}

	var config = $.cookie = function (key, value, options) {

		// Write
		if (value !== undefined && !$.isFunction(value)) {
			options = $.extend({}, config.defaults, options);

			if (typeof options.expires === 'number') {
				var days = options.expires, t = options.expires = new Date();
				t.setDate(t.getDate() + days);
			}

			return (document.cookie = [
				encode(key), '=', stringifyCookieValue(value),
				options.expires ? '; expires=' + options.expires.toUTCString() : '', // use expires attribute, max-age is not supported by IE
				options.path    ? '; path=' + options.path : '',
				options.domain  ? '; domain=' + options.domain : '',
				options.secure  ? '; secure' : ''
			].join(''));
		}

		// Read

		var result = key ? undefined : {};

		// To prevent the for loop in the first place assign an empty array
		// in case there are no cookies at all. Also prevents odd result when
		// calling $.cookie().
		var cookies = document.cookie ? document.cookie.split('; ') : [];

		for (var i = 0, l = cookies.length; i < l; i++) {
			var parts = cookies[i].split('=');
			var name = decode(parts.shift());
			var cookie = parts.join('=');

			if (key && key === name) {
				// If second argument (value) is a function it's a converter...
				result = read(cookie, value);
				break;
			}

			// Prevent storing a cookie that we couldn't decode.
			if (!key && (cookie = read(cookie)) !== undefined) {
				result[name] = cookie;
			}
		}

		return result;
	};

	config.defaults = {};

	$.removeCookie = function (key, options) {
		if ($.cookie(key) !== undefined) {
			// Must not alter options, thus extending a fresh object...
			$.cookie(key, '', $.extend({}, options, { expires: -1 }));
			return true;
		}
		return false;
	};

}));

(function ($) {
    var last = location.hash;

    $.fn.hashchange = function (fun) {
        if (fun) {
            arguments.callee.setup.apply(this);
            return this.bind('hashchange', fun);
        } else {
            return this.trigger('hashchange');
        }
    };

    var setuped;
    $.fn.hashchange.setup = function () {
        if (setuped) return; setuped = true;
        var self = this;
        (function () {
            if (location.hash != last) {
                self.trigger('hashchange');
            }
            setTimeout(arguments.callee, 500);
        })();
    };

    $(window).hashchange(function () {
        last = location.hash;
    });
})(jQuery);

/*!
	jQuery ColorBox v1.4.0 - 2013-02-12
	(c) 2013 Jack Moore - jacklmoore.com/colorbox
	license: http://www.opensource.org/licenses/mit-license.php
*/
(function(e,t,i){function o(i,o,n){var r=t.createElement(i);return o&&(r.id=Y+o),n&&(r.style.cssText=n),e(r)}function n(e){var t=T.length,i=(A+e)%t;return 0>i?t+i:i}function r(e,t){return Math.round((/%/.test(e)?("x"===t?k.width():k.height())/100:1)*parseInt(e,10))}function h(e){return _.photo||_.photoRegex.test(e)}function l(e){return _.retinaUrl&&i.devicePixelRatio>1?e.replace(_.photoRegex,_.retinaSuffix):e}function s(t){e.contains(w[0],t.target)||w[0]===t.target||(t.stopPropagation(),w.focus())}function a(){var t,i=e.data(N,V);null==i?(_=e.extend({},J),console&&console.log&&console.log("Error: cboxElement missing settings object")):_=e.extend({},i);for(t in _)e.isFunction(_[t])&&"on"!==t.slice(0,2)&&(_[t]=_[t].call(N));_.rel=_.rel||N.rel||e(N).data("rel")||"nofollow",_.href=_.href||e(N).attr("href"),_.title=_.title||N.title,"string"==typeof _.href&&(_.href=e.trim(_.href))}function d(i,o){e(t).trigger(i),at.trigger(i),e.isFunction(o)&&o.call(N)}function c(){var e,t,i,o,n,r=Y+"Slideshow_",h="click."+Y;_.slideshow&&T[1]?(t=function(){clearTimeout(e)},i=function(){(_.loop||T[A+1])&&(e=setTimeout(G.next,_.slideshowSpeed))},o=function(){M.html(_.slideshowStop).unbind(h).one(h,n),at.bind(it,i).bind(tt,t).bind(ot,n),w.removeClass(r+"off").addClass(r+"on")},n=function(){t(),at.unbind(it,i).unbind(tt,t).unbind(ot,n),M.html(_.slideshowStart).unbind(h).one(h,function(){G.next(),o()}),w.removeClass(r+"on").addClass(r+"off")},_.slideshowAuto?o():n()):w.removeClass(r+"off "+r+"on")}function u(i){U||(N=i,a(),T=e(N),A=0,"nofollow"!==_.rel&&(T=e("."+Z).filter(function(){var t,i=e.data(this,V);return i&&(t=e(this).data("rel")||i.rel||this.rel),t===_.rel}),A=T.index(N),-1===A&&(T=T.add(N),A=T.length-1)),j||(j=q=!0,w.css({visibility:"hidden",display:"block"}),E=o(dt,"LoadedContent","width:0; height:0; overflow:hidden").appendTo(v),K=x.height()+C.height()+v.outerHeight(!0)-v.height(),z=y.width()+b.width()+v.outerWidth(!0)-v.width(),D=E.outerHeight(!0),B=E.outerWidth(!0),m.css({opacity:parseFloat(_.opacity),cursor:_.overlayClose?"pointer":"auto",visibility:"visible"}).show(),_.w=r(_.initialWidth,"x"),_.h=r(_.initialHeight,"y"),G.position(),lt&&k.bind("resize."+st+" scroll."+st,function(){m.css({width:k.width(),height:k.height(),top:k.scrollTop(),left:k.scrollLeft()})}).trigger("resize."+st),c(),d(et,_.onOpen),P.add(W).hide(),R.html(_.close).show(),w.focus(),t.addEventListener&&(t.addEventListener("focus",s,!0),at.one(nt,function(){t.removeEventListener("focus",s,!0)})),_.returnFocus&&at.one(nt,function(){e(N).focus()})),G.load(!0))}function f(){!w&&t.body&&(X=!1,k=e(i),w=o(dt).attr({id:V,"class":ht?Y+(lt?"IE6":"IE"):"",role:"dialog",tabindex:"-1"}).hide(),m=o(dt,"Overlay",lt?"position:absolute":"").hide(),L=o(dt,"LoadingOverlay").add(o(dt,"LoadingGraphic")),g=o(dt,"Wrapper"),v=o(dt,"Content").append(W=o(dt,"Title"),H=o(dt,"Current"),F=o("button","Previous"),S=o("button","Next"),M=o("button","Slideshow"),L,R=o("button","Close")),g.append(o(dt).append(o(dt,"TopLeft"),x=o(dt,"TopCenter"),o(dt,"TopRight")),o(dt,!1,"clear:left").append(y=o(dt,"MiddleLeft"),v,b=o(dt,"MiddleRight")),o(dt,!1,"clear:left").append(o(dt,"BottomLeft"),C=o(dt,"BottomCenter"),o(dt,"BottomRight"))).find("div div").css({"float":"left"}),I=o(dt,!1,"position:absolute; width:9999px; visibility:hidden; display:none"),P=S.add(F).add(H).add(M),e(t.body).append(m,w.append(g,I)))}function p(){function i(e){e.which>1||e.shiftKey||e.altKey||e.metaKey||(e.preventDefault(),u(this))}return w?(X||(X=!0,S.click(function(){G.next()}),F.click(function(){G.prev()}),R.click(function(){G.close()}),m.click(function(){_.overlayClose&&G.close()}),e(t).bind("keydown."+Y,function(e){var t=e.keyCode;j&&_.escKey&&27===t&&(e.preventDefault(),G.close()),j&&_.arrowKey&&T[1]&&(37===t?(e.preventDefault(),F.click()):39===t&&(e.preventDefault(),S.click()))}),e.isFunction(e.fn.on)?e(t).on("click."+Y,"."+Z,i):e("."+Z).live("click."+Y,i)),!0):!1}var m,w,g,v,x,y,b,C,T,k,E,I,L,W,H,M,S,F,R,P,_,K,z,D,B,N,A,O,j,q,U,$,G,Q,X,J={transition:"elastic",speed:300,width:!1,initialWidth:"600",innerWidth:!1,maxWidth:!1,height:!1,initialHeight:"450",innerHeight:!1,maxHeight:!1,scalePhotos:!0,scrolling:!0,inline:!1,html:!1,iframe:!1,fastIframe:!0,photo:!1,href:!1,title:!1,rel:!1,opacity:.9,preloading:!0,className:!1,retinaImage:!1,retinaUrl:!1,retinaSuffix:"@2x.$1",current:"image {current} of {total}",previous:"previous",next:"next",close:"close",xhrError:"This content failed to load.",imgError:"This image failed to load.",open:!1,returnFocus:!0,reposition:!0,loop:!0,slideshow:!1,slideshowAuto:!0,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",photoRegex:/\.(gif|png|jp(e|g|eg)|bmp|ico)((#|\?).*)?$/i,onOpen:!1,onLoad:!1,onComplete:!1,onCleanup:!1,onClosed:!1,overlayClose:!0,escKey:!0,arrowKey:!0,top:!1,bottom:!1,left:!1,right:!1,fixed:!1,data:void 0},V="colorbox",Y="cbox",Z=Y+"Element",et=Y+"_open",tt=Y+"_load",it=Y+"_complete",ot=Y+"_cleanup",nt=Y+"_closed",rt=Y+"_purge",ht=!e.support.leadingWhitespace,lt=ht&&!i.XMLHttpRequest,st=Y+"_IE6",at=e({}),dt="div";e.colorbox||(e(f),G=e.fn[V]=e[V]=function(t,i){var o=this;if(t=t||{},f(),p()){if(e.isFunction(o))o=e("<a/>"),t.open=!0;else if(!o[0])return o;i&&(t.onComplete=i),o.each(function(){e.data(this,V,e.extend({},e.data(this,V)||J,t))}).addClass(Z),(e.isFunction(t.open)&&t.open.call(o)||t.open)&&u(o[0])}return o},G.position=function(e,t){function i(e){x[0].style.width=C[0].style.width=v[0].style.width=parseInt(e.style.width,10)-z+"px",v[0].style.height=y[0].style.height=b[0].style.height=parseInt(e.style.height,10)-K+"px"}var o,n,h,l=0,s=0,a=w.offset();k.unbind("resize."+Y),w.css({top:-9e4,left:-9e4}),n=k.scrollTop(),h=k.scrollLeft(),_.fixed&&!lt?(a.top-=n,a.left-=h,w.css({position:"fixed"})):(l=n,s=h,w.css({position:"absolute"})),s+=_.right!==!1?Math.max(k.width()-_.w-B-z-r(_.right,"x"),0):_.left!==!1?r(_.left,"x"):Math.round(Math.max(k.width()-_.w-B-z,0)/2),l+=_.bottom!==!1?Math.max(k.height()-_.h-D-K-r(_.bottom,"y"),0):_.top!==!1?r(_.top,"y"):Math.round(Math.max(k.height()-_.h-D-K,0)/2),w.css({top:a.top,left:a.left,visibility:"visible"}),e=w.width()===_.w+B&&w.height()===_.h+D?0:e||0,g[0].style.width=g[0].style.height="9999px",o={width:_.w+B+z,height:_.h+D+K,top:l,left:s},0===e&&w.css(o),w.dequeue().animate(o,{duration:e,complete:function(){i(this),q=!1,g[0].style.width=_.w+B+z+"px",g[0].style.height=_.h+D+K+"px",_.reposition&&setTimeout(function(){k.bind("resize."+Y,G.position)},1),t&&t()},step:function(){i(this)}})},G.resize=function(e){j&&(e=e||{},e.width&&(_.w=r(e.width,"x")-B-z),e.innerWidth&&(_.w=r(e.innerWidth,"x")),E.css({width:_.w}),e.height&&(_.h=r(e.height,"y")-D-K),e.innerHeight&&(_.h=r(e.innerHeight,"y")),e.innerHeight||e.height||(E.css({height:"auto"}),_.h=E.height()),E.css({height:_.h}),G.position("none"===_.transition?0:_.speed))},G.prep=function(t){function i(){return _.w=_.w||E.width(),_.w=_.mw&&_.mw<_.w?_.mw:_.w,_.w}function r(){return _.h=_.h||E.height(),_.h=_.mh&&_.mh<_.h?_.mh:_.h,_.h}if(j){var l,s="none"===_.transition?0:_.speed;E.empty().remove(),E=o(dt,"LoadedContent").append(t),E.hide().appendTo(I.show()).css({width:i(),overflow:_.scrolling?"auto":"hidden"}).css({height:r()}).prependTo(v),I.hide(),e(O).css({"float":"none"}),l=function(){function t(){ht&&w[0].style.removeAttribute("filter")}var i,r,l=T.length,a="frameBorder",c="allowTransparency";j&&(r=function(){clearTimeout($),L.hide(),d(it,_.onComplete)},ht&&O&&E.fadeIn(100),W.html(_.title).add(E).show(),l>1?("string"==typeof _.current&&H.html(_.current.replace("{current}",A+1).replace("{total}",l)).show(),S[_.loop||l-1>A?"show":"hide"]().html(_.next),F[_.loop||A?"show":"hide"]().html(_.previous),_.slideshow&&M.show(),_.preloading&&e.each([n(-1),n(1)],function(){var t,i,o=T[this],n=e.data(o,V);n&&n.href?(t=n.href,e.isFunction(t)&&(t=t.call(o))):t=e(o).attr("href"),t&&(h(t)||n.photo)&&(i=new Image,i.src=t)})):P.hide(),_.iframe?(i=o("iframe")[0],a in i&&(i[a]=0),c in i&&(i[c]="true"),_.scrolling||(i.scrolling="no"),e(i).attr({src:_.href,name:(new Date).getTime(),"class":Y+"Iframe",allowFullScreen:!0,webkitAllowFullScreen:!0,mozallowfullscreen:!0}).one("load",r).appendTo(E),at.one(rt,function(){i.src="//about:blank"}),_.fastIframe&&e(i).trigger("load")):r(),"fade"===_.transition?w.fadeTo(s,1,t):t())},"fade"===_.transition?w.fadeTo(s,0,function(){G.position(0,l)}):G.position(s,l)}},G.load=function(t){var n,s,c,u=G.prep;q=!0,O=!1,N=T[A],t||a(),Q&&w.add(m).removeClass(Q),_.className&&w.add(m).addClass(_.className),Q=_.className,d(rt),d(tt,_.onLoad),_.h=_.height?r(_.height,"y")-D-K:_.innerHeight&&r(_.innerHeight,"y"),_.w=_.width?r(_.width,"x")-B-z:_.innerWidth&&r(_.innerWidth,"x"),_.mw=_.w,_.mh=_.h,_.maxWidth&&(_.mw=r(_.maxWidth,"x")-B-z,_.mw=_.w&&_.w<_.mw?_.w:_.mw),_.maxHeight&&(_.mh=r(_.maxHeight,"y")-D-K,_.mh=_.h&&_.h<_.mh?_.h:_.mh),n=_.href,$=setTimeout(function(){L.show()},100),_.inline?(c=o(dt).hide().insertBefore(e(n)[0]),at.one(rt,function(){c.replaceWith(E.children())}),u(e(n))):_.iframe?u(" "):_.html?u(_.html):h(n)?(n=l(n),e(O=new Image).addClass(Y+"Photo").bind("error",function(){_.title=!1,u(o(dt,"Error").html(_.imgError))}).one("load",function(){var e;_.retinaImage&&i.devicePixelRatio>1&&(O.height=O.height/i.devicePixelRatio,O.width=O.width/i.devicePixelRatio),_.scalePhotos&&(s=function(){O.height-=O.height*e,O.width-=O.width*e},_.mw&&O.width>_.mw&&(e=(O.width-_.mw)/O.width,s()),_.mh&&O.height>_.mh&&(e=(O.height-_.mh)/O.height,s())),_.h&&(O.style.marginTop=Math.max(_.mh-O.height,0)/2+"px"),T[1]&&(_.loop||T[A+1])&&(O.style.cursor="pointer",O.onclick=function(){G.next()}),ht&&(O.style.msInterpolationMode="bicubic"),setTimeout(function(){u(O)},1)}),setTimeout(function(){O.src=n},1)):n&&I.load(n,_.data,function(t,i){u("error"===i?o(dt,"Error").html(_.xhrError):e(this).contents())})},G.next=function(){!q&&T[1]&&(_.loop||T[A+1])&&(A=n(1),G.load())},G.prev=function(){!q&&T[1]&&(_.loop||A)&&(A=n(-1),G.load())},G.close=function(){j&&!U&&(U=!0,j=!1,d(ot,_.onCleanup),k.unbind("."+Y+" ."+st),m.fadeTo(200,0),w.stop().fadeTo(300,0,function(){w.add(m).css({opacity:1,cursor:"auto"}).hide(),d(rt),E.empty().remove(),setTimeout(function(){U=!1,d(nt,_.onClosed)},1)}))},G.remove=function(){e([]).add(w).add(m).remove(),w=null,e("."+Z).removeData(V).removeClass(Z),e(t).unbind("click."+Y)},G.element=function(){return e(N)},G.settings=J)})(jQuery,document,window);
/*! Javascript plotting library for jQuery, v. 0.7.
 *
 * Released under the MIT license by IOLA, December 2007.
 *
 */

// first an inline dependency, jquery.colorhelpers.js, we inline it here
// for convenience

/* Plugin for jQuery for working with colors.
 * 
 * Version 1.1.
 * 
 * Inspiration from jQuery color animation plugin by John Resig.
 *
 * Released under the MIT license by Ole Laursen, October 2009.
 *
 * Examples:
 *
 *   $.color.parse("#fff").scale('rgb', 0.25).add('a', -0.5).toString()
 *   var c = $.color.extract($("#mydiv"), 'background-color');
 *   console.log(c.r, c.g, c.b, c.a);
 *   $.color.make(100, 50, 25, 0.4).toString() // returns "rgba(100,50,25,0.4)"
 *
 * Note that .scale() and .add() return the same modified object
 * instead of making a new one.
 *
 * V. 1.1: Fix error handling so e.g. parsing an empty string does
 * produce a color rather than just crashing.
 */ 
(function(B){B.color={};B.color.make=function(F,E,C,D){var G={};G.r=F||0;G.g=E||0;G.b=C||0;G.a=D!=null?D:1;G.add=function(J,I){for(var H=0;H<J.length;++H){G[J.charAt(H)]+=I}return G.normalize()};G.scale=function(J,I){for(var H=0;H<J.length;++H){G[J.charAt(H)]*=I}return G.normalize()};G.toString=function(){if(G.a>=1){return"rgb("+[G.r,G.g,G.b].join(",")+")"}else{return"rgba("+[G.r,G.g,G.b,G.a].join(",")+")"}};G.normalize=function(){function H(J,K,I){return K<J?J:(K>I?I:K)}G.r=H(0,parseInt(G.r),255);G.g=H(0,parseInt(G.g),255);G.b=H(0,parseInt(G.b),255);G.a=H(0,G.a,1);return G};G.clone=function(){return B.color.make(G.r,G.b,G.g,G.a)};return G.normalize()};B.color.extract=function(D,C){var E;do{E=D.css(C).toLowerCase();if(E!=""&&E!="transparent"){break}D=D.parent()}while(!B.nodeName(D.get(0),"body"));if(E=="rgba(0, 0, 0, 0)"){E="transparent"}return B.color.parse(E)};B.color.parse=function(F){var E,C=B.color.make;if(E=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(F)){return C(parseInt(E[1],10),parseInt(E[2],10),parseInt(E[3],10))}if(E=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(F)){return C(parseInt(E[1],10),parseInt(E[2],10),parseInt(E[3],10),parseFloat(E[4]))}if(E=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(F)){return C(parseFloat(E[1])*2.55,parseFloat(E[2])*2.55,parseFloat(E[3])*2.55)}if(E=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(F)){return C(parseFloat(E[1])*2.55,parseFloat(E[2])*2.55,parseFloat(E[3])*2.55,parseFloat(E[4]))}if(E=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(F)){return C(parseInt(E[1],16),parseInt(E[2],16),parseInt(E[3],16))}if(E=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(F)){return C(parseInt(E[1]+E[1],16),parseInt(E[2]+E[2],16),parseInt(E[3]+E[3],16))}var D=B.trim(F).toLowerCase();if(D=="transparent"){return C(255,255,255,0)}else{E=A[D]||[0,0,0];return C(E[0],E[1],E[2])}};var A={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})(jQuery);

// the actual Flot code
(function($) {
    function Plot(placeholder, data_, options_, plugins) {
        // data is on the form:
        //   [ series1, series2 ... ]
        // where series is either just the data as [ [x1, y1], [x2, y2], ... ]
        // or { data: [ [x1, y1], [x2, y2], ... ], label: "some label", ... }
        
        var series = [],
            options = {
                // the color theme used for graphs
                colors: ["#edc240", "#afd8f8", "#cb4b4b", "#4da74d", "#9440ed"],
                legend: {
                    show: true,
                    noColumns: 1, // number of colums in legend table
                    labelFormatter: null, // fn: string -> string
                    labelBoxBorderColor: "#ccc", // border color for the little label boxes
                    container: null, // container (as jQuery object) to put legend in, null means default on top of graph
                    position: "ne", // position of default legend container within plot
                    margin: 5, // distance from grid edge to default legend container within plot
                    backgroundColor: null, // null means auto-detect
                    backgroundOpacity: 0.85 // set to 0 to avoid background
                },
                xaxis: {
                    show: null, // null = auto-detect, true = always, false = never
                    position: "bottom", // or "top"
                    mode: null, // null or "time"
                    color: null, // base color, labels, ticks
                    tickColor: null, // possibly different color of ticks, e.g. "rgba(0,0,0,0.15)"
                    transform: null, // null or f: number -> number to transform axis
                    inverseTransform: null, // if transform is set, this should be the inverse function
                    min: null, // min. value to show, null means set automatically
                    max: null, // max. value to show, null means set automatically
                    autoscaleMargin: null, // margin in % to add if auto-setting min/max
                    ticks: null, // either [1, 3] or [[1, "a"], 3] or (fn: axis info -> ticks) or app. number of ticks for auto-ticks
                    tickFormatter: null, // fn: number -> string
                    labelWidth: null, // size of tick labels in pixels
                    labelHeight: null,
                    reserveSpace: null, // whether to reserve space even if axis isn't shown
                    tickLength: null, // size in pixels of ticks, or "full" for whole line
                    alignTicksWithAxis: null, // axis number or null for no sync
                    
                    // mode specific options
                    tickDecimals: null, // no. of decimals, null means auto
                    tickSize: null, // number or [number, "unit"]
                    minTickSize: null, // number or [number, "unit"]
                    monthNames: null, // list of names of months
                    timeformat: null, // format string to use
                    twelveHourClock: false // 12 or 24 time in time mode
                },
                yaxis: {
                    autoscaleMargin: 0.02,
                    position: "left" // or "right"
                },
                xaxes: [],
                yaxes: [],
                series: {
                    points: {
                        show: false,
                        radius: 3,
                        lineWidth: 2, // in pixels
                        fill: true,
                        fillColor: "#ffffff",
                        symbol: "circle" // or callback
                    },
                    lines: {
                        // we don't put in show: false so we can see
                        // whether lines were actively disabled 
                        lineWidth: 2, // in pixels
                        fill: false,
                        fillColor: null,
                        steps: false
                    },
                    bars: {
                        show: false,
                        lineWidth: 2, // in pixels
                        barWidth: 1, // in units of the x axis
                        fill: true,
                        fillColor: null,
                        align: "left", // or "center" 
                        horizontal: false
                    },
                    shadowSize: 3
                },
                grid: {
                    show: true,
                    aboveData: false,
                    color: "#545454", // primary color used for outline and labels
                    backgroundColor: null, // null for transparent, else color
                    borderColor: null, // set if different from the grid color
                    tickColor: null, // color for the ticks, e.g. "rgba(0,0,0,0.15)"
                    labelMargin: 5, // in pixels
                    axisMargin: 8, // in pixels
                    borderWidth: 2, // in pixels
                    minBorderMargin: null, // in pixels, null means taken from points radius
                    markings: null, // array of ranges or fn: axes -> array of ranges
                    markingsColor: "#f4f4f4",
                    markingsLineWidth: 2,
                    // interactive stuff
                    clickable: false,
                    hoverable: false,
                    autoHighlight: true, // highlight in case mouse is near
                    mouseActiveRadius: 10 // how far the mouse can be away to activate an item
                },
                hooks: {}
            },
        canvas = null,      // the canvas for the plot itself
        overlay = null,     // canvas for interactive stuff on top of plot
        eventHolder = null, // jQuery object that events should be bound to
        ctx = null, octx = null,
        xaxes = [], yaxes = [],
        plotOffset = { left: 0, right: 0, top: 0, bottom: 0},
        canvasWidth = 0, canvasHeight = 0,
        plotWidth = 0, plotHeight = 0,
        hooks = {
            processOptions: [],
            processRawData: [],
            processDatapoints: [],
            drawSeries: [],
            draw: [],
            bindEvents: [],
            drawOverlay: [],
            shutdown: []
        },
        plot = this;

        // public functions
        plot.setData = setData;
        plot.setupGrid = setupGrid;
        plot.draw = draw;
        plot.getPlaceholder = function() { return placeholder; };
        plot.getCanvas = function() { return canvas; };
        plot.getPlotOffset = function() { return plotOffset; };
        plot.width = function () { return plotWidth; };
        plot.height = function () { return plotHeight; };
        plot.offset = function () {
            var o = eventHolder.offset();
            o.left += plotOffset.left;
            o.top += plotOffset.top;
            return o;
        };
        plot.getData = function () { return series; };
        plot.getAxes = function () {
            var res = {}, i;
            $.each(xaxes.concat(yaxes), function (_, axis) {
                if (axis)
                    res[axis.direction + (axis.n != 1 ? axis.n : "") + "axis"] = axis;
            });
            return res;
        };
        plot.getXAxes = function () { return xaxes; };
        plot.getYAxes = function () { return yaxes; };
        plot.c2p = canvasToAxisCoords;
        plot.p2c = axisToCanvasCoords;
        plot.getOptions = function () { return options; };
        plot.highlight = highlight;
        plot.unhighlight = unhighlight;
        plot.triggerRedrawOverlay = triggerRedrawOverlay;
        plot.pointOffset = function(point) {
            return {
                left: parseInt(xaxes[axisNumber(point, "x") - 1].p2c(+point.x) + plotOffset.left),
                top: parseInt(yaxes[axisNumber(point, "y") - 1].p2c(+point.y) + plotOffset.top)
            };
        };
        plot.shutdown = shutdown;
        plot.resize = function () {
            getCanvasDimensions();
            resizeCanvas(canvas);
            resizeCanvas(overlay);
        };

        // public attributes
        plot.hooks = hooks;
        
        // initialize
        initPlugins(plot);
        parseOptions(options_);
        setupCanvases();
        setData(data_);
        setupGrid();
        draw();
        bindEvents();


        function executeHooks(hook, args) {
            args = [plot].concat(args);
            for (var i = 0; i < hook.length; ++i)
                hook[i].apply(this, args);
        }

        function initPlugins() {
            for (var i = 0; i < plugins.length; ++i) {
                var p = plugins[i];
                p.init(plot);
                if (p.options)
                    $.extend(true, options, p.options);
            }
        }
        
        function parseOptions(opts) {
            var i;
            
            $.extend(true, options, opts);
            
            if (options.xaxis.color == null)
                options.xaxis.color = options.grid.color;
            if (options.yaxis.color == null)
                options.yaxis.color = options.grid.color;
            
            if (options.xaxis.tickColor == null) // backwards-compatibility
                options.xaxis.tickColor = options.grid.tickColor;
            if (options.yaxis.tickColor == null) // backwards-compatibility
                options.yaxis.tickColor = options.grid.tickColor;

            if (options.grid.borderColor == null)
                options.grid.borderColor = options.grid.color;
            if (options.grid.tickColor == null)
                options.grid.tickColor = $.color.parse(options.grid.color).scale('a', 0.22).toString();
            
            // fill in defaults in axes, copy at least always the
            // first as the rest of the code assumes it'll be there
            for (i = 0; i < Math.max(1, options.xaxes.length); ++i)
                options.xaxes[i] = $.extend(true, {}, options.xaxis, options.xaxes[i]);
            for (i = 0; i < Math.max(1, options.yaxes.length); ++i)
                options.yaxes[i] = $.extend(true, {}, options.yaxis, options.yaxes[i]);

            // backwards compatibility, to be removed in future
            if (options.xaxis.noTicks && options.xaxis.ticks == null)
                options.xaxis.ticks = options.xaxis.noTicks;
            if (options.yaxis.noTicks && options.yaxis.ticks == null)
                options.yaxis.ticks = options.yaxis.noTicks;
            if (options.x2axis) {
                options.xaxes[1] = $.extend(true, {}, options.xaxis, options.x2axis);
                options.xaxes[1].position = "top";
            }
            if (options.y2axis) {
                options.yaxes[1] = $.extend(true, {}, options.yaxis, options.y2axis);
                options.yaxes[1].position = "right";
            }
            if (options.grid.coloredAreas)
                options.grid.markings = options.grid.coloredAreas;
            if (options.grid.coloredAreasColor)
                options.grid.markingsColor = options.grid.coloredAreasColor;
            if (options.lines)
                $.extend(true, options.series.lines, options.lines);
            if (options.points)
                $.extend(true, options.series.points, options.points);
            if (options.bars)
                $.extend(true, options.series.bars, options.bars);
            if (options.shadowSize != null)
                options.series.shadowSize = options.shadowSize;

            // save options on axes for future reference
            for (i = 0; i < options.xaxes.length; ++i)
                getOrCreateAxis(xaxes, i + 1).options = options.xaxes[i];
            for (i = 0; i < options.yaxes.length; ++i)
                getOrCreateAxis(yaxes, i + 1).options = options.yaxes[i];

            // add hooks from options
            for (var n in hooks)
                if (options.hooks[n] && options.hooks[n].length)
                    hooks[n] = hooks[n].concat(options.hooks[n]);

            executeHooks(hooks.processOptions, [options]);
        }

        function setData(d) {
            series = parseData(d);
            fillInSeriesOptions();
            processData();
        }
        
        function parseData(d) {
            var res = [];
            for (var i = 0; i < d.length; ++i) {
                var s = $.extend(true, {}, options.series);

                if (d[i].data != null) {
                    s.data = d[i].data; // move the data instead of deep-copy
                    delete d[i].data;

                    $.extend(true, s, d[i]);

                    d[i].data = s.data;
                }
                else
                    s.data = d[i];
                res.push(s);
            }

            return res;
        }
        
        function axisNumber(obj, coord) {
            var a = obj[coord + "axis"];
            if (typeof a == "object") // if we got a real axis, extract number
                a = a.n;
            if (typeof a != "number")
                a = 1; // default to first axis
            return a;
        }

        function allAxes() {
            // return flat array without annoying null entries
            return $.grep(xaxes.concat(yaxes), function (a) { return a; });
        }
        
        function canvasToAxisCoords(pos) {
            // return an object with x/y corresponding to all used axes 
            var res = {}, i, axis;
            for (i = 0; i < xaxes.length; ++i) {
                axis = xaxes[i];
                if (axis && axis.used)
                    res["x" + axis.n] = axis.c2p(pos.left);
            }

            for (i = 0; i < yaxes.length; ++i) {
                axis = yaxes[i];
                if (axis && axis.used)
                    res["y" + axis.n] = axis.c2p(pos.top);
            }
            
            if (res.x1 !== undefined)
                res.x = res.x1;
            if (res.y1 !== undefined)
                res.y = res.y1;

            return res;
        }
        
        function axisToCanvasCoords(pos) {
            // get canvas coords from the first pair of x/y found in pos
            var res = {}, i, axis, key;

            for (i = 0; i < xaxes.length; ++i) {
                axis = xaxes[i];
                if (axis && axis.used) {
                    key = "x" + axis.n;
                    if (pos[key] == null && axis.n == 1)
                        key = "x";

                    if (pos[key] != null) {
                        res.left = axis.p2c(pos[key]);
                        break;
                    }
                }
            }
            
            for (i = 0; i < yaxes.length; ++i) {
                axis = yaxes[i];
                if (axis && axis.used) {
                    key = "y" + axis.n;
                    if (pos[key] == null && axis.n == 1)
                        key = "y";

                    if (pos[key] != null) {
                        res.top = axis.p2c(pos[key]);
                        break;
                    }
                }
            }
            
            return res;
        }
        
        function getOrCreateAxis(axes, number) {
            if (!axes[number - 1])
                axes[number - 1] = {
                    n: number, // save the number for future reference
                    direction: axes == xaxes ? "x" : "y",
                    options: $.extend(true, {}, axes == xaxes ? options.xaxis : options.yaxis)
                };
                
            return axes[number - 1];
        }

        function fillInSeriesOptions() {
            var i;
            
            // collect what we already got of colors
            var neededColors = series.length,
                usedColors = [],
                assignedColors = [];
            for (i = 0; i < series.length; ++i) {
                var sc = series[i].color;
                if (sc != null) {
                    --neededColors;
                    if (typeof sc == "number")
                        assignedColors.push(sc);
                    else
                        usedColors.push($.color.parse(series[i].color));
                }
            }
            
            // we might need to generate more colors if higher indices
            // are assigned
            for (i = 0; i < assignedColors.length; ++i) {
                neededColors = Math.max(neededColors, assignedColors[i] + 1);
            }

            // produce colors as needed
            var colors = [], variation = 0;
            i = 0;
            while (colors.length < neededColors) {
                var c;
                if (options.colors.length == i) // check degenerate case
                    c = $.color.make(100, 100, 100);
                else
                    c = $.color.parse(options.colors[i]);

                // vary color if needed
                var sign = variation % 2 == 1 ? -1 : 1;
                c.scale('rgb', 1 + sign * Math.ceil(variation / 2) * 0.2)

                // FIXME: if we're getting to close to something else,
                // we should probably skip this one
                colors.push(c);
                
                ++i;
                if (i >= options.colors.length) {
                    i = 0;
                    ++variation;
                }
            }

            // fill in the options
            var colori = 0, s;
            for (i = 0; i < series.length; ++i) {
                s = series[i];
                
                // assign colors
                if (s.color == null) {
                    s.color = colors[colori].toString();
                    ++colori;
                }
                else if (typeof s.color == "number")
                    s.color = colors[s.color].toString();

                // turn on lines automatically in case nothing is set
                if (s.lines.show == null) {
                    var v, show = true;
                    for (v in s)
                        if (s[v] && s[v].show) {
                            show = false;
                            break;
                        }
                    if (show)
                        s.lines.show = true;
                }

                // setup axes
                s.xaxis = getOrCreateAxis(xaxes, axisNumber(s, "x"));
                s.yaxis = getOrCreateAxis(yaxes, axisNumber(s, "y"));
            }
        }
        
        function processData() {
            var topSentry = Number.POSITIVE_INFINITY,
                bottomSentry = Number.NEGATIVE_INFINITY,
                fakeInfinity = Number.MAX_VALUE,
                i, j, k, m, length,
                s, points, ps, x, y, axis, val, f, p;

            function updateAxis(axis, min, max) {
                if (min < axis.datamin && min != -fakeInfinity)
                    axis.datamin = min;
                if (max > axis.datamax && max != fakeInfinity)
                    axis.datamax = max;
            }

            $.each(allAxes(), function (_, axis) {
                // init axis
                axis.datamin = topSentry;
                axis.datamax = bottomSentry;
                axis.used = false;
            });
            
            for (i = 0; i < series.length; ++i) {
                s = series[i];
                s.datapoints = { points: [] };
                
                executeHooks(hooks.processRawData, [ s, s.data, s.datapoints ]);
            }
            
            // first pass: clean and copy data
            for (i = 0; i < series.length; ++i) {
                s = series[i];

                var data = s.data, format = s.datapoints.format;

                if (!format) {
                    format = [];
                    // find out how to copy
                    format.push({ x: true, number: true, required: true });
                    format.push({ y: true, number: true, required: true });

                    if (s.bars.show || (s.lines.show && s.lines.fill)) {
                        format.push({ y: true, number: true, required: false, defaultValue: 0 });
                        if (s.bars.horizontal) {
                            delete format[format.length - 1].y;
                            format[format.length - 1].x = true;
                        }
                    }
                    
                    s.datapoints.format = format;
                }

                if (s.datapoints.pointsize != null)
                    continue; // already filled in

                s.datapoints.pointsize = format.length;
                
                ps = s.datapoints.pointsize;
                points = s.datapoints.points;

                insertSteps = s.lines.show && s.lines.steps;
                s.xaxis.used = s.yaxis.used = true;
                
                for (j = k = 0; j < data.length; ++j, k += ps) {
                    p = data[j];

                    var nullify = p == null;
                    if (!nullify) {
                        for (m = 0; m < ps; ++m) {
                            val = p[m];
                            f = format[m];

                            if (f) {
                                if (f.number && val != null) {
                                    val = +val; // convert to number
                                    if (isNaN(val))
                                        val = null;
                                    else if (val == Infinity)
                                        val = fakeInfinity;
                                    else if (val == -Infinity)
                                        val = -fakeInfinity;
                                }

                                if (val == null) {
                                    if (f.required)
                                        nullify = true;
                                    
                                    if (f.defaultValue != null)
                                        val = f.defaultValue;
                                }
                            }
                            
                            points[k + m] = val;
                        }
                    }
                    
                    if (nullify) {
                        for (m = 0; m < ps; ++m) {
                            val = points[k + m];
                            if (val != null) {
                                f = format[m];
                                // extract min/max info
                                if (f.x)
                                    updateAxis(s.xaxis, val, val);
                                if (f.y)
                                    updateAxis(s.yaxis, val, val);
                            }
                            points[k + m] = null;
                        }
                    }
                    else {
                        // a little bit of line specific stuff that
                        // perhaps shouldn't be here, but lacking
                        // better means...
                        if (insertSteps && k > 0
                            && points[k - ps] != null
                            && points[k - ps] != points[k]
                            && points[k - ps + 1] != points[k + 1]) {
                            // copy the point to make room for a middle point
                            for (m = 0; m < ps; ++m)
                                points[k + ps + m] = points[k + m];

                            // middle point has same y
                            points[k + 1] = points[k - ps + 1];

                            // we've added a point, better reflect that
                            k += ps;
                        }
                    }
                }
            }

            // give the hooks a chance to run
            for (i = 0; i < series.length; ++i) {
                s = series[i];
                
                executeHooks(hooks.processDatapoints, [ s, s.datapoints]);
            }

            // second pass: find datamax/datamin for auto-scaling
            for (i = 0; i < series.length; ++i) {
                s = series[i];
                points = s.datapoints.points,
                ps = s.datapoints.pointsize;

                var xmin = topSentry, ymin = topSentry,
                    xmax = bottomSentry, ymax = bottomSentry;
                
                for (j = 0; j < points.length; j += ps) {
                    if (points[j] == null)
                        continue;

                    for (m = 0; m < ps; ++m) {
                        val = points[j + m];
                        f = format[m];
                        if (!f || val == fakeInfinity || val == -fakeInfinity)
                            continue;
                        
                        if (f.x) {
                            if (val < xmin)
                                xmin = val;
                            if (val > xmax)
                                xmax = val;
                        }
                        if (f.y) {
                            if (val < ymin)
                                ymin = val;
                            if (val > ymax)
                                ymax = val;
                        }
                    }
                }
                
                if (s.bars.show) {
                    // make sure we got room for the bar on the dancing floor
                    var delta = s.bars.align == "left" ? 0 : -s.bars.barWidth/2;
                    if (s.bars.horizontal) {
                        ymin += delta;
                        ymax += delta + s.bars.barWidth;
                    }
                    else {
                        xmin += delta;
                        xmax += delta + s.bars.barWidth;
                    }
                }
                
                updateAxis(s.xaxis, xmin, xmax);
                updateAxis(s.yaxis, ymin, ymax);
            }

            $.each(allAxes(), function (_, axis) {
                if (axis.datamin == topSentry)
                    axis.datamin = null;
                if (axis.datamax == bottomSentry)
                    axis.datamax = null;
            });
        }

        function makeCanvas(skipPositioning, cls) {
            var c = document.createElement('canvas');
            c.className = cls;
            c.width = canvasWidth;
            c.height = canvasHeight;
                    
            if (!skipPositioning)
                $(c).css({ position: 'absolute', left: 0, top: 0 });
                
            $(c).appendTo(placeholder);
                
            if (!c.getContext) // excanvas hack
                c = window.G_vmlCanvasManager.initElement(c);

            // used for resetting in case we get replotted
            c.getContext("2d").save();
            
            return c;
        }

        function getCanvasDimensions() {
            canvasWidth = placeholder.width();
            canvasHeight = placeholder.height();
            
            if (canvasWidth <= 0 || canvasHeight <= 0)
                throw "Invalid dimensions for plot, width = " + canvasWidth + ", height = " + canvasHeight;
        }

        function resizeCanvas(c) {
            // resizing should reset the state (excanvas seems to be
            // buggy though)
            if (c.width != canvasWidth)
                c.width = canvasWidth;

            if (c.height != canvasHeight)
                c.height = canvasHeight;

            // so try to get back to the initial state (even if it's
            // gone now, this should be safe according to the spec)
            var cctx = c.getContext("2d");
            cctx.restore();

            // and save again
            cctx.save();
        }
        
        function setupCanvases() {
            var reused,
                existingCanvas = placeholder.children("canvas.base"),
                existingOverlay = placeholder.children("canvas.overlay");

            if (existingCanvas.length == 0 || existingOverlay == 0) {
                // init everything
                
                placeholder.html(""); // make sure placeholder is clear
            
                placeholder.css({ padding: 0 }); // padding messes up the positioning
                
                if (placeholder.css("position") == 'static')
                    placeholder.css("position", "relative"); // for positioning labels and overlay

                getCanvasDimensions();
                
                canvas = makeCanvas(true, "base");
                overlay = makeCanvas(false, "overlay"); // overlay canvas for interactive features

                reused = false;
            }
            else {
                // reuse existing elements

                canvas = existingCanvas.get(0);
                overlay = existingOverlay.get(0);

                reused = true;
            }

            ctx = canvas.getContext("2d");
            octx = overlay.getContext("2d");

            // we include the canvas in the event holder too, because IE 7
            // sometimes has trouble with the stacking order
            eventHolder = $([overlay, canvas]);

            if (reused) {
                // run shutdown in the old plot object
                placeholder.data("plot").shutdown();

                // reset reused canvases
                plot.resize();
                
                // make sure overlay pixels are cleared (canvas is cleared when we redraw)
                octx.clearRect(0, 0, canvasWidth, canvasHeight);
                
                // then whack any remaining obvious garbage left
                eventHolder.unbind();
                placeholder.children().not([canvas, overlay]).remove();
            }

            // save in case we get replotted
            placeholder.data("plot", plot);
        }

        function bindEvents() {
            // bind events
            if (options.grid.hoverable) {
                eventHolder.mousemove(onMouseMove);
                eventHolder.mouseleave(onMouseLeave);
            }

            if (options.grid.clickable)
                eventHolder.click(onClick);

            executeHooks(hooks.bindEvents, [eventHolder]);
        }

        function shutdown() {
            if (redrawTimeout)
                clearTimeout(redrawTimeout);
            
            eventHolder.unbind("mousemove", onMouseMove);
            eventHolder.unbind("mouseleave", onMouseLeave);
            eventHolder.unbind("click", onClick);
            
            executeHooks(hooks.shutdown, [eventHolder]);
        }

        function setTransformationHelpers(axis) {
            // set helper functions on the axis, assumes plot area
            // has been computed already
            
            function identity(x) { return x; }
            
            var s, m, t = axis.options.transform || identity,
                it = axis.options.inverseTransform;
            
            // precompute how much the axis is scaling a point
            // in canvas space
            if (axis.direction == "x") {
                s = axis.scale = plotWidth / Math.abs(t(axis.max) - t(axis.min));
                m = Math.min(t(axis.max), t(axis.min));
            }
            else {
                s = axis.scale = plotHeight / Math.abs(t(axis.max) - t(axis.min));
                s = -s;
                m = Math.max(t(axis.max), t(axis.min));
            }

            // data point to canvas coordinate
            if (t == identity) // slight optimization
                axis.p2c = function (p) { return (p - m) * s; };
            else
                axis.p2c = function (p) { return (t(p) - m) * s; };
            // canvas coordinate to data point
            if (!it)
                axis.c2p = function (c) { return m + c / s; };
            else
                axis.c2p = function (c) { return it(m + c / s); };
        }

        function measureTickLabels(axis) {
            var opts = axis.options, i, ticks = axis.ticks || [], labels = [],
                l, w = opts.labelWidth, h = opts.labelHeight, dummyDiv;

            function makeDummyDiv(labels, width) {
                return $('<div style="position:absolute;top:-10000px;' + width + 'font-size:smaller">' +
                         '<div class="' + axis.direction + 'Axis ' + axis.direction + axis.n + 'Axis">'
                         + labels.join("") + '</div></div>')
                    .appendTo(placeholder);
            }
            
            if (axis.direction == "x") {
                // to avoid measuring the widths of the labels (it's slow), we
                // construct fixed-size boxes and put the labels inside
                // them, we don't need the exact figures and the
                // fixed-size box content is easy to center
                if (w == null)
                    w = Math.floor(canvasWidth / (ticks.length > 0 ? ticks.length : 1));

                // measure x label heights
                if (h == null) {
                    labels = [];
                    for (i = 0; i < ticks.length; ++i) {
                        l = ticks[i].label;
                        if (l)
                            labels.push('<div class="tickLabel" style="float:left;width:' + w + 'px">' + l + '</div>');
                    }

                    if (labels.length > 0) {
                        // stick them all in the same div and measure
                        // collective height
                        labels.push('<div style="clear:left"></div>');
                        dummyDiv = makeDummyDiv(labels, "width:10000px;");
                        h = dummyDiv.height();
                        dummyDiv.remove();
                    }
                }
            }
            else if (w == null || h == null) {
                // calculate y label dimensions
                for (i = 0; i < ticks.length; ++i) {
                    l = ticks[i].label;
                    if (l)
                        labels.push('<div class="tickLabel">' + l + '</div>');
                }
                
                if (labels.length > 0) {
                    dummyDiv = makeDummyDiv(labels, "");
                    if (w == null)
                        w = dummyDiv.children().width();
                    if (h == null)
                        h = dummyDiv.find("div.tickLabel").height();
                    dummyDiv.remove();
                }
            }

            if (w == null)
                w = 0;
            if (h == null)
                h = 0;

            axis.labelWidth = w;
            axis.labelHeight = h;
        }

        function allocateAxisBoxFirstPhase(axis) {
            // find the bounding box of the axis by looking at label
            // widths/heights and ticks, make room by diminishing the
            // plotOffset

            var lw = axis.labelWidth,
                lh = axis.labelHeight,
                pos = axis.options.position,
                tickLength = axis.options.tickLength,
                axismargin = options.grid.axisMargin,
                padding = options.grid.labelMargin,
                all = axis.direction == "x" ? xaxes : yaxes,
                index;

            // determine axis margin
            var samePosition = $.grep(all, function (a) {
                return a && a.options.position == pos && a.reserveSpace;
            });
            if ($.inArray(axis, samePosition) == samePosition.length - 1)
                axismargin = 0; // outermost

            // determine tick length - if we're innermost, we can use "full"
            if (tickLength == null)
                tickLength = "full";

            var sameDirection = $.grep(all, function (a) {
                return a && a.reserveSpace;
            });

            var innermost = $.inArray(axis, sameDirection) == 0;
            if (!innermost && tickLength == "full")
                tickLength = 5;
                
            if (!isNaN(+tickLength))
                padding += +tickLength;

            // compute box
            if (axis.direction == "x") {
                lh += padding;
                
                if (pos == "bottom") {
                    plotOffset.bottom += lh + axismargin;
                    axis.box = { top: canvasHeight - plotOffset.bottom, height: lh };
                }
                else {
                    axis.box = { top: plotOffset.top + axismargin, height: lh };
                    plotOffset.top += lh + axismargin;
                }
            }
            else {
                lw += padding;
                
                if (pos == "left") {
                    axis.box = { left: plotOffset.left + axismargin, width: lw };
                    plotOffset.left += lw + axismargin;
                }
                else {
                    plotOffset.right += lw + axismargin;
                    axis.box = { left: canvasWidth - plotOffset.right, width: lw };
                }
            }

             // save for future reference
            axis.position = pos;
            axis.tickLength = tickLength;
            axis.box.padding = padding;
            axis.innermost = innermost;
        }

        function allocateAxisBoxSecondPhase(axis) {
            // set remaining bounding box coordinates
            if (axis.direction == "x") {
                axis.box.left = plotOffset.left;
                axis.box.width = plotWidth;
            }
            else {
                axis.box.top = plotOffset.top;
                axis.box.height = plotHeight;
            }
        }
        
        function setupGrid() {
            var i, axes = allAxes();

            // first calculate the plot and axis box dimensions

            $.each(axes, function (_, axis) {
                axis.show = axis.options.show;
                if (axis.show == null)
                    axis.show = axis.used; // by default an axis is visible if it's got data
                
                axis.reserveSpace = axis.show || axis.options.reserveSpace;

                setRange(axis);
            });

            allocatedAxes = $.grep(axes, function (axis) { return axis.reserveSpace; });

            plotOffset.left = plotOffset.right = plotOffset.top = plotOffset.bottom = 0;
            if (options.grid.show) {
                $.each(allocatedAxes, function (_, axis) {
                    // make the ticks
                    setupTickGeneration(axis);
                    setTicks(axis);
                    snapRangeToTicks(axis, axis.ticks);

                    // find labelWidth/Height for axis
                    measureTickLabels(axis);
                });

                // with all dimensions in house, we can compute the
                // axis boxes, start from the outside (reverse order)
                for (i = allocatedAxes.length - 1; i >= 0; --i)
                    allocateAxisBoxFirstPhase(allocatedAxes[i]);

                // make sure we've got enough space for things that
                // might stick out
                var minMargin = options.grid.minBorderMargin;
                if (minMargin == null) {
                    minMargin = 0;
                    for (i = 0; i < series.length; ++i)
                        minMargin = Math.max(minMargin, series[i].points.radius + series[i].points.lineWidth/2);
                }
                    
                for (var a in plotOffset) {
                    plotOffset[a] += options.grid.borderWidth;
                    plotOffset[a] = Math.max(minMargin, plotOffset[a]);
                }
            }
            
            plotWidth = canvasWidth - plotOffset.left - plotOffset.right;
            plotHeight = canvasHeight - plotOffset.bottom - plotOffset.top;

            // now we got the proper plotWidth/Height, we can compute the scaling
            $.each(axes, function (_, axis) {
                setTransformationHelpers(axis);
            });

            if (options.grid.show) {
                $.each(allocatedAxes, function (_, axis) {
                    allocateAxisBoxSecondPhase(axis);
                });

                insertAxisLabels();
            }
            
            insertLegend();
        }
        
        function setRange(axis) {
            var opts = axis.options,
                min = +(opts.min != null ? opts.min : axis.datamin),
                max = +(opts.max != null ? opts.max : axis.datamax),
                delta = max - min;

            if (delta == 0.0) {
                // degenerate case
                var widen = max == 0 ? 1 : 0.01;

                if (opts.min == null)
                    min -= widen;
                // always widen max if we couldn't widen min to ensure we
                // don't fall into min == max which doesn't work
                if (opts.max == null || opts.min != null)
                    max += widen;
            }
            else {
                // consider autoscaling
                var margin = opts.autoscaleMargin;
                if (margin != null) {
                    if (opts.min == null) {
                        min -= delta * margin;
                        // make sure we don't go below zero if all values
                        // are positive
                        if (min < 0 && axis.datamin != null && axis.datamin >= 0)
                            min = 0;
                    }
                    if (opts.max == null) {
                        max += delta * margin;
                        if (max > 0 && axis.datamax != null && axis.datamax <= 0)
                            max = 0;
                    }
                }
            }
            axis.min = min;
            axis.max = max;
        }

        function setupTickGeneration(axis) {
            var opts = axis.options;
                
            // estimate number of ticks
            var noTicks;
            if (typeof opts.ticks == "number" && opts.ticks > 0)
                noTicks = opts.ticks;
            else
                // heuristic based on the model a*sqrt(x) fitted to
                // some data points that seemed reasonable
                noTicks = 0.3 * Math.sqrt(axis.direction == "x" ? canvasWidth : canvasHeight);

            var delta = (axis.max - axis.min) / noTicks,
                size, generator, unit, formatter, i, magn, norm;

            if (opts.mode == "time") {
                // pretty handling of time
                
                // map of app. size of time units in milliseconds
                var timeUnitSize = {
                    "second": 1000,
                    "minute": 60 * 1000,
                    "hour": 60 * 60 * 1000,
                    "day": 24 * 60 * 60 * 1000,
                    "month": 30 * 24 * 60 * 60 * 1000,
                    "year": 365.2425 * 24 * 60 * 60 * 1000
                };


                // the allowed tick sizes, after 1 year we use
                // an integer algorithm
                var spec = [
                    [1, "second"], [2, "second"], [5, "second"], [10, "second"],
                    [30, "second"], 
                    [1, "minute"], [2, "minute"], [5, "minute"], [10, "minute"],
                    [30, "minute"], 
                    [1, "hour"], [2, "hour"], [4, "hour"],
                    [8, "hour"], [12, "hour"],
                    [1, "day"], [2, "day"], [3, "day"],
                    [0.25, "month"], [0.5, "month"], [1, "month"],
                    [2, "month"], [3, "month"], [6, "month"],
                    [1, "year"]
                ];

                var minSize = 0;
                if (opts.minTickSize != null) {
                    if (typeof opts.tickSize == "number")
                        minSize = opts.tickSize;
                    else
                        minSize = opts.minTickSize[0] * timeUnitSize[opts.minTickSize[1]];
                }

                for (var i = 0; i < spec.length - 1; ++i)
                    if (delta < (spec[i][0] * timeUnitSize[spec[i][1]]
                                 + spec[i + 1][0] * timeUnitSize[spec[i + 1][1]]) / 2
                       && spec[i][0] * timeUnitSize[spec[i][1]] >= minSize)
                        break;
                size = spec[i][0];
                unit = spec[i][1];
                
                // special-case the possibility of several years
                if (unit == "year") {
                    magn = Math.pow(10, Math.floor(Math.log(delta / timeUnitSize.year) / Math.LN10));
                    norm = (delta / timeUnitSize.year) / magn;
                    if (norm < 1.5)
                        size = 1;
                    else if (norm < 3)
                        size = 2;
                    else if (norm < 7.5)
                        size = 5;
                    else
                        size = 10;

                    size *= magn;
                }

                axis.tickSize = opts.tickSize || [size, unit];
                
                generator = function(axis) {
                    var ticks = [],
                        tickSize = axis.tickSize[0], unit = axis.tickSize[1],
                        d = new Date(axis.min);
                    
                    var step = tickSize * timeUnitSize[unit];

                    if (unit == "second")
                        d.setUTCSeconds(floorInBase(d.getUTCSeconds(), tickSize));
                    if (unit == "minute")
                        d.setUTCMinutes(floorInBase(d.getUTCMinutes(), tickSize));
                    if (unit == "hour")
                        d.setUTCHours(floorInBase(d.getUTCHours(), tickSize));
                    if (unit == "month")
                        d.setUTCMonth(floorInBase(d.getUTCMonth(), tickSize));
                    if (unit == "year")
                        d.setUTCFullYear(floorInBase(d.getUTCFullYear(), tickSize));
                    
                    // reset smaller components
                    d.setUTCMilliseconds(0);
                    if (step >= timeUnitSize.minute)
                        d.setUTCSeconds(0);
                    if (step >= timeUnitSize.hour)
                        d.setUTCMinutes(0);
                    if (step >= timeUnitSize.day)
                        d.setUTCHours(0);
                    if (step >= timeUnitSize.day * 4)
                        d.setUTCDate(1);
                    if (step >= timeUnitSize.year)
                        d.setUTCMonth(0);


                    var carry = 0, v = Number.NaN, prev;
                    do {
                        prev = v;
                        v = d.getTime();
                        ticks.push(v);
                        if (unit == "month") {
                            if (tickSize < 1) {
                                // a bit complicated - we'll divide the month
                                // up but we need to take care of fractions
                                // so we don't end up in the middle of a day
                                d.setUTCDate(1);
                                var start = d.getTime();
                                d.setUTCMonth(d.getUTCMonth() + 1);
                                var end = d.getTime();
                                d.setTime(v + carry * timeUnitSize.hour + (end - start) * tickSize);
                                carry = d.getUTCHours();
                                d.setUTCHours(0);
                            }
                            else
                                d.setUTCMonth(d.getUTCMonth() + tickSize);
                        }
                        else if (unit == "year") {
                            d.setUTCFullYear(d.getUTCFullYear() + tickSize);
                        }
                        else
                            d.setTime(v + step);
                    } while (v < axis.max && v != prev);

                    return ticks;
                };

                formatter = function (v, axis) {
                    var d = new Date(v);

                    // first check global format
                    if (opts.timeformat != null)
                        return $.plot.formatDate(d, opts.timeformat, opts.monthNames);
                    
                    var t = axis.tickSize[0] * timeUnitSize[axis.tickSize[1]];
                    var span = axis.max - axis.min;
                    var suffix = (opts.twelveHourClock) ? " %p" : "";
                    
                    if (t < timeUnitSize.minute)
                        fmt = "%h:%M:%S" + suffix;
                    else if (t < timeUnitSize.day) {
                        if (span < 2 * timeUnitSize.day)
                            fmt = "%h:%M" + suffix;
                        else
                            fmt = "%b %d %h:%M" + suffix;
                    }
                    else if (t < timeUnitSize.month)
                        fmt = "%b %d";
                    else if (t < timeUnitSize.year) {
                        if (span < timeUnitSize.year)
                            fmt = "%b";
                        else
                            fmt = "%b %y";
                    }
                    else
                        fmt = "%y";
                    
                    return $.plot.formatDate(d, fmt, opts.monthNames);
                };
            }
            else {
                // pretty rounding of base-10 numbers
                var maxDec = opts.tickDecimals;
                var dec = -Math.floor(Math.log(delta) / Math.LN10);
                if (maxDec != null && dec > maxDec)
                    dec = maxDec;

                magn = Math.pow(10, -dec);
                norm = delta / magn; // norm is between 1.0 and 10.0
                
                if (norm < 1.5)
                    size = 1;
                else if (norm < 3) {
                    size = 2;
                    // special case for 2.5, requires an extra decimal
                    if (norm > 2.25 && (maxDec == null || dec + 1 <= maxDec)) {
                        size = 2.5;
                        ++dec;
                    }
                }
                else if (norm < 7.5)
                    size = 5;
                else
                    size = 10;

                size *= magn;
                
                if (opts.minTickSize != null && size < opts.minTickSize)
                    size = opts.minTickSize;

                axis.tickDecimals = Math.max(0, maxDec != null ? maxDec : dec);
                axis.tickSize = opts.tickSize || size;

                generator = function (axis) {
                    var ticks = [];

                    // spew out all possible ticks
                    var start = floorInBase(axis.min, axis.tickSize),
                        i = 0, v = Number.NaN, prev;
                    do {
                        prev = v;
                        v = start + i * axis.tickSize;
                        ticks.push(v);
                        ++i;
                    } while (v < axis.max && v != prev);
                    return ticks;
                };

                formatter = function (v, axis) {
                    return v.toFixed(axis.tickDecimals);
                };
            }

            if (opts.alignTicksWithAxis != null) {
                var otherAxis = (axis.direction == "x" ? xaxes : yaxes)[opts.alignTicksWithAxis - 1];
                if (otherAxis && otherAxis.used && otherAxis != axis) {
                    // consider snapping min/max to outermost nice ticks
                    var niceTicks = generator(axis);
                    if (niceTicks.length > 0) {
                        if (opts.min == null)
                            axis.min = Math.min(axis.min, niceTicks[0]);
                        if (opts.max == null && niceTicks.length > 1)
                            axis.max = Math.max(axis.max, niceTicks[niceTicks.length - 1]);
                    }
                    
                    generator = function (axis) {
                        // copy ticks, scaled to this axis
                        var ticks = [], v, i;
                        for (i = 0; i < otherAxis.ticks.length; ++i) {
                            v = (otherAxis.ticks[i].v - otherAxis.min) / (otherAxis.max - otherAxis.min);
                            v = axis.min + v * (axis.max - axis.min);
                            ticks.push(v);
                        }
                        return ticks;
                    };
                    
                    // we might need an extra decimal since forced
                    // ticks don't necessarily fit naturally
                    if (axis.mode != "time" && opts.tickDecimals == null) {
                        var extraDec = Math.max(0, -Math.floor(Math.log(delta) / Math.LN10) + 1),
                            ts = generator(axis);

                        // only proceed if the tick interval rounded
                        // with an extra decimal doesn't give us a
                        // zero at end
                        if (!(ts.length > 1 && /\..*0$/.test((ts[1] - ts[0]).toFixed(extraDec))))
                            axis.tickDecimals = extraDec;
                    }
                }
            }

            axis.tickGenerator = generator;
            if ($.isFunction(opts.tickFormatter))
                axis.tickFormatter = function (v, axis) { return "" + opts.tickFormatter(v, axis); };
            else
                axis.tickFormatter = formatter;
        }
        
        function setTicks(axis) {
            var oticks = axis.options.ticks, ticks = [];
            if (oticks == null || (typeof oticks == "number" && oticks > 0))
                ticks = axis.tickGenerator(axis);
            else if (oticks) {
                if ($.isFunction(oticks))
                    // generate the ticks
                    ticks = oticks({ min: axis.min, max: axis.max });
                else
                    ticks = oticks;
            }

            // clean up/labelify the supplied ticks, copy them over
            var i, v;
            axis.ticks = [];
            for (i = 0; i < ticks.length; ++i) {
                var label = null;
                var t = ticks[i];
                if (typeof t == "object") {
                    v = +t[0];
                    if (t.length > 1)
                        label = t[1];
                }
                else
                    v = +t;
                if (label == null)
                    label = axis.tickFormatter(v, axis);
                if (!isNaN(v))
                    axis.ticks.push({ v: v, label: label });
            }
        }

        function snapRangeToTicks(axis, ticks) {
            if (axis.options.autoscaleMargin && ticks.length > 0) {
                // snap to ticks
                if (axis.options.min == null)
                    axis.min = Math.min(axis.min, ticks[0].v);
                if (axis.options.max == null && ticks.length > 1)
                    axis.max = Math.max(axis.max, ticks[ticks.length - 1].v);
            }
        }
      
        function draw() {
            ctx.clearRect(0, 0, canvasWidth, canvasHeight);

            var grid = options.grid;

            // draw background, if any
            if (grid.show && grid.backgroundColor)
                drawBackground();
            
            if (grid.show && !grid.aboveData)
                drawGrid();

            for (var i = 0; i < series.length; ++i) {
                executeHooks(hooks.drawSeries, [ctx, series[i]]);
                drawSeries(series[i]);
            }

            executeHooks(hooks.draw, [ctx]);
            
            if (grid.show && grid.aboveData)
                drawGrid();
        }

        function extractRange(ranges, coord) {
            var axis, from, to, key, axes = allAxes();

            for (i = 0; i < axes.length; ++i) {
                axis = axes[i];
                if (axis.direction == coord) {
                    key = coord + axis.n + "axis";
                    if (!ranges[key] && axis.n == 1)
                        key = coord + "axis"; // support x1axis as xaxis
                    if (ranges[key]) {
                        from = ranges[key].from;
                        to = ranges[key].to;
                        break;
                    }
                }
            }

            // backwards-compat stuff - to be removed in future
            if (!ranges[key]) {
                axis = coord == "x" ? xaxes[0] : yaxes[0];
                from = ranges[coord + "1"];
                to = ranges[coord + "2"];
            }

            // auto-reverse as an added bonus
            if (from != null && to != null && from > to) {
                var tmp = from;
                from = to;
                to = tmp;
            }
            
            return { from: from, to: to, axis: axis };
        }
        
        function drawBackground() {
            ctx.save();
            ctx.translate(plotOffset.left, plotOffset.top);

            ctx.fillStyle = getColorOrGradient(options.grid.backgroundColor, plotHeight, 0, "rgba(255, 255, 255, 0)");
            ctx.fillRect(0, 0, plotWidth, plotHeight);
            ctx.restore();
        }

        function drawGrid() {
            var i;
            
            ctx.save();
            ctx.translate(plotOffset.left, plotOffset.top);

            // draw markings
            var markings = options.grid.markings;
            if (markings) {
                if ($.isFunction(markings)) {
                    var axes = plot.getAxes();
                    // xmin etc. is backwards compatibility, to be
                    // removed in the future
                    axes.xmin = axes.xaxis.min;
                    axes.xmax = axes.xaxis.max;
                    axes.ymin = axes.yaxis.min;
                    axes.ymax = axes.yaxis.max;
                    
                    markings = markings(axes);
                }

                for (i = 0; i < markings.length; ++i) {
                    var m = markings[i],
                        xrange = extractRange(m, "x"),
                        yrange = extractRange(m, "y");

                    // fill in missing
                    if (xrange.from == null)
                        xrange.from = xrange.axis.min;
                    if (xrange.to == null)
                        xrange.to = xrange.axis.max;
                    if (yrange.from == null)
                        yrange.from = yrange.axis.min;
                    if (yrange.to == null)
                        yrange.to = yrange.axis.max;

                    // clip
                    if (xrange.to < xrange.axis.min || xrange.from > xrange.axis.max ||
                        yrange.to < yrange.axis.min || yrange.from > yrange.axis.max)
                        continue;

                    xrange.from = Math.max(xrange.from, xrange.axis.min);
                    xrange.to = Math.min(xrange.to, xrange.axis.max);
                    yrange.from = Math.max(yrange.from, yrange.axis.min);
                    yrange.to = Math.min(yrange.to, yrange.axis.max);

                    if (xrange.from == xrange.to && yrange.from == yrange.to)
                        continue;

                    // then draw
                    xrange.from = xrange.axis.p2c(xrange.from);
                    xrange.to = xrange.axis.p2c(xrange.to);
                    yrange.from = yrange.axis.p2c(yrange.from);
                    yrange.to = yrange.axis.p2c(yrange.to);
                    
                    if (xrange.from == xrange.to || yrange.from == yrange.to) {
                        // draw line
                        ctx.beginPath();
                        ctx.strokeStyle = m.color || options.grid.markingsColor;
                        ctx.lineWidth = m.lineWidth || options.grid.markingsLineWidth;
                        ctx.moveTo(xrange.from, yrange.from);
                        ctx.lineTo(xrange.to, yrange.to);
                        ctx.stroke();
                    }
                    else {
                        // fill area
                        ctx.fillStyle = m.color || options.grid.markingsColor;
                        ctx.fillRect(xrange.from, yrange.to,
                                     xrange.to - xrange.from,
                                     yrange.from - yrange.to);
                    }
                }
            }
            
            // draw the ticks
            var axes = allAxes(), bw = options.grid.borderWidth;

            for (var j = 0; j < axes.length; ++j) {
                var axis = axes[j], box = axis.box,
                    t = axis.tickLength, x, y, xoff, yoff;
                if (!axis.show || axis.ticks.length == 0)
                    continue
                
                ctx.strokeStyle = axis.options.tickColor || $.color.parse(axis.options.color).scale('a', 0.22).toString();
                ctx.lineWidth = 1;

                // find the edges
                if (axis.direction == "x") {
                    x = 0;
                    if (t == "full")
                        y = (axis.position == "top" ? 0 : plotHeight);
                    else
                        y = box.top - plotOffset.top + (axis.position == "top" ? box.height : 0);
                }
                else {
                    y = 0;
                    if (t == "full")
                        x = (axis.position == "left" ? 0 : plotWidth);
                    else
                        x = box.left - plotOffset.left + (axis.position == "left" ? box.width : 0);
                }
                
                // draw tick bar
                if (!axis.innermost) {
                    ctx.beginPath();
                    xoff = yoff = 0;
                    if (axis.direction == "x")
                        xoff = plotWidth;
                    else
                        yoff = plotHeight;
                    
                    if (ctx.lineWidth == 1) {
                        x = Math.floor(x) + 0.5;
                        y = Math.floor(y) + 0.5;
                    }

                    ctx.moveTo(x, y);
                    ctx.lineTo(x + xoff, y + yoff);
                    ctx.stroke();
                }

                // draw ticks
                ctx.beginPath();
                for (i = 0; i < axis.ticks.length; ++i) {
                    var v = axis.ticks[i].v;
                    
                    xoff = yoff = 0;

                    if (v < axis.min || v > axis.max
                        // skip those lying on the axes if we got a border
                        || (t == "full" && bw > 0
                            && (v == axis.min || v == axis.max)))
                        continue;

                    if (axis.direction == "x") {
                        x = axis.p2c(v);
                        yoff = t == "full" ? -plotHeight : t;
                        
                        if (axis.position == "top")
                            yoff = -yoff;
                    }
                    else {
                        y = axis.p2c(v);
                        xoff = t == "full" ? -plotWidth : t;
                        
                        if (axis.position == "left")
                            xoff = -xoff;
                    }

                    if (ctx.lineWidth == 1) {
                        if (axis.direction == "x")
                            x = Math.floor(x) + 0.5;
                        else
                            y = Math.floor(y) + 0.5;
                    }

                    ctx.moveTo(x, y);
                    ctx.lineTo(x + xoff, y + yoff);
                }
                
                ctx.stroke();
            }
            
            
            // draw border
            if (bw) {
                ctx.lineWidth = bw;
                ctx.strokeStyle = options.grid.borderColor;
                ctx.strokeRect(-bw/2, -bw/2, plotWidth + bw, plotHeight + bw);
            }

            ctx.restore();
        }

        function insertAxisLabels() {
            placeholder.find(".tickLabels").remove();
            
            var html = ['<div class="tickLabels" style="font-size:smaller">'];

            var axes = allAxes();
            for (var j = 0; j < axes.length; ++j) {
                var axis = axes[j], box = axis.box;
                if (!axis.show)
                    continue;
                //debug: html.push('<div style="position:absolute;opacity:0.10;background-color:red;left:' + box.left + 'px;top:' + box.top + 'px;width:' + box.width +  'px;height:' + box.height + 'px"></div>')
                html.push('<div class="' + axis.direction + 'Axis ' + axis.direction + axis.n + 'Axis" style="color:' + axis.options.color + '">');
                for (var i = 0; i < axis.ticks.length; ++i) {
                    var tick = axis.ticks[i];
                    if (!tick.label || tick.v < axis.min || tick.v > axis.max)
                        continue;

                    var pos = {}, align;
                    
                    if (axis.direction == "x") {
                        align = "center";
                        pos.left = Math.round(plotOffset.left + axis.p2c(tick.v) - axis.labelWidth/2);
                        if (axis.position == "bottom")
                            pos.top = box.top + box.padding;
                        else
                            pos.bottom = canvasHeight - (box.top + box.height - box.padding);
                    }
                    else {
                        pos.top = Math.round(plotOffset.top + axis.p2c(tick.v) - axis.labelHeight/2);
                        if (axis.position == "left") {
                            pos.right = canvasWidth - (box.left + box.width - box.padding)
                            align = "right";
                        }
                        else {
                            pos.left = box.left + box.padding;
                            align = "left";
                        }
                    }

                    pos.width = axis.labelWidth;

                    var style = ["position:absolute", "text-align:" + align ];
                    for (var a in pos)
                        style.push(a + ":" + pos[a] + "px")
                    
                    html.push('<div class="tickLabel" style="' + style.join(';') + '">' + tick.label + '</div>');
                }
                html.push('</div>');
            }

            html.push('</div>');

            placeholder.append(html.join(""));
        }

        function drawSeries(series) {
            if (series.lines.show)
                drawSeriesLines(series);
            if (series.bars.show)
                drawSeriesBars(series);
            if (series.points.show)
                drawSeriesPoints(series);
        }
        
        function drawSeriesLines(series) {
            function plotLine(datapoints, xoffset, yoffset, axisx, axisy) {
                var points = datapoints.points,
                    ps = datapoints.pointsize,
                    prevx = null, prevy = null;
                
                ctx.beginPath();
                for (var i = ps; i < points.length; i += ps) {
                    var x1 = points[i - ps], y1 = points[i - ps + 1],
                        x2 = points[i], y2 = points[i + 1];
                    
                    if (x1 == null || x2 == null)
                        continue;

                    // clip with ymin
                    if (y1 <= y2 && y1 < axisy.min) {
                        if (y2 < axisy.min)
                            continue;   // line segment is outside
                        // compute new intersection point
                        x1 = (axisy.min - y1) / (y2 - y1) * (x2 - x1) + x1;
                        y1 = axisy.min;
                    }
                    else if (y2 <= y1 && y2 < axisy.min) {
                        if (y1 < axisy.min)
                            continue;
                        x2 = (axisy.min - y1) / (y2 - y1) * (x2 - x1) + x1;
                        y2 = axisy.min;
                    }

                    // clip with ymax
                    if (y1 >= y2 && y1 > axisy.max) {
                        if (y2 > axisy.max)
                            continue;
                        x1 = (axisy.max - y1) / (y2 - y1) * (x2 - x1) + x1;
                        y1 = axisy.max;
                    }
                    else if (y2 >= y1 && y2 > axisy.max) {
                        if (y1 > axisy.max)
                            continue;
                        x2 = (axisy.max - y1) / (y2 - y1) * (x2 - x1) + x1;
                        y2 = axisy.max;
                    }

                    // clip with xmin
                    if (x1 <= x2 && x1 < axisx.min) {
                        if (x2 < axisx.min)
                            continue;
                        y1 = (axisx.min - x1) / (x2 - x1) * (y2 - y1) + y1;
                        x1 = axisx.min;
                    }
                    else if (x2 <= x1 && x2 < axisx.min) {
                        if (x1 < axisx.min)
                            continue;
                        y2 = (axisx.min - x1) / (x2 - x1) * (y2 - y1) + y1;
                        x2 = axisx.min;
                    }

                    // clip with xmax
                    if (x1 >= x2 && x1 > axisx.max) {
                        if (x2 > axisx.max)
                            continue;
                        y1 = (axisx.max - x1) / (x2 - x1) * (y2 - y1) + y1;
                        x1 = axisx.max;
                    }
                    else if (x2 >= x1 && x2 > axisx.max) {
                        if (x1 > axisx.max)
                            continue;
                        y2 = (axisx.max - x1) / (x2 - x1) * (y2 - y1) + y1;
                        x2 = axisx.max;
                    }

                    if (x1 != prevx || y1 != prevy)
                        ctx.moveTo(axisx.p2c(x1) + xoffset, axisy.p2c(y1) + yoffset);
                    
                    prevx = x2;
                    prevy = y2;
                    ctx.lineTo(axisx.p2c(x2) + xoffset, axisy.p2c(y2) + yoffset);
                }
                ctx.stroke();
            }

            function plotLineArea(datapoints, axisx, axisy) {
                var points = datapoints.points,
                    ps = datapoints.pointsize,
                    bottom = Math.min(Math.max(0, axisy.min), axisy.max),
                    i = 0, top, areaOpen = false,
                    ypos = 1, segmentStart = 0, segmentEnd = 0;

                // we process each segment in two turns, first forward
                // direction to sketch out top, then once we hit the
                // end we go backwards to sketch the bottom
                while (true) {
                    if (ps > 0 && i > points.length + ps)
                        break;

                    i += ps; // ps is negative if going backwards

                    var x1 = points[i - ps],
                        y1 = points[i - ps + ypos],
                        x2 = points[i], y2 = points[i + ypos];

                    if (areaOpen) {
                        if (ps > 0 && x1 != null && x2 == null) {
                            // at turning point
                            segmentEnd = i;
                            ps = -ps;
                            ypos = 2;
                            continue;
                        }

                        if (ps < 0 && i == segmentStart + ps) {
                            // done with the reverse sweep
                            ctx.fill();
                            areaOpen = false;
                            ps = -ps;
                            ypos = 1;
                            i = segmentStart = segmentEnd + ps;
                            continue;
                        }
                    }

                    if (x1 == null || x2 == null)
                        continue;

                    // clip x values
                    
                    // clip with xmin
                    if (x1 <= x2 && x1 < axisx.min) {
                        if (x2 < axisx.min)
                            continue;
                        y1 = (axisx.min - x1) / (x2 - x1) * (y2 - y1) + y1;
                        x1 = axisx.min;
                    }
                    else if (x2 <= x1 && x2 < axisx.min) {
                        if (x1 < axisx.min)
                            continue;
                        y2 = (axisx.min - x1) / (x2 - x1) * (y2 - y1) + y1;
                        x2 = axisx.min;
                    }

                    // clip with xmax
                    if (x1 >= x2 && x1 > axisx.max) {
                        if (x2 > axisx.max)
                            continue;
                        y1 = (axisx.max - x1) / (x2 - x1) * (y2 - y1) + y1;
                        x1 = axisx.max;
                    }
                    else if (x2 >= x1 && x2 > axisx.max) {
                        if (x1 > axisx.max)
                            continue;
                        y2 = (axisx.max - x1) / (x2 - x1) * (y2 - y1) + y1;
                        x2 = axisx.max;
                    }

                    if (!areaOpen) {
                        // open area
                        ctx.beginPath();
                        ctx.moveTo(axisx.p2c(x1), axisy.p2c(bottom));
                        areaOpen = true;
                    }
                    
                    // now first check the case where both is outside
                    if (y1 >= axisy.max && y2 >= axisy.max) {
                        ctx.lineTo(axisx.p2c(x1), axisy.p2c(axisy.max));
                        ctx.lineTo(axisx.p2c(x2), axisy.p2c(axisy.max));
                        continue;
                    }
                    else if (y1 <= axisy.min && y2 <= axisy.min) {
                        ctx.lineTo(axisx.p2c(x1), axisy.p2c(axisy.min));
                        ctx.lineTo(axisx.p2c(x2), axisy.p2c(axisy.min));
                        continue;
                    }
                    
                    // else it's a bit more complicated, there might
                    // be a flat maxed out rectangle first, then a
                    // triangular cutout or reverse; to find these
                    // keep track of the current x values
                    var x1old = x1, x2old = x2;

                    // clip the y values, without shortcutting, we
                    // go through all cases in turn
                    
                    // clip with ymin
                    if (y1 <= y2 && y1 < axisy.min && y2 >= axisy.min) {
                        x1 = (axisy.min - y1) / (y2 - y1) * (x2 - x1) + x1;
                        y1 = axisy.min;
                    }
                    else if (y2 <= y1 && y2 < axisy.min && y1 >= axisy.min) {
                        x2 = (axisy.min - y1) / (y2 - y1) * (x2 - x1) + x1;
                        y2 = axisy.min;
                    }

                    // clip with ymax
                    if (y1 >= y2 && y1 > axisy.max && y2 <= axisy.max) {
                        x1 = (axisy.max - y1) / (y2 - y1) * (x2 - x1) + x1;
                        y1 = axisy.max;
                    }
                    else if (y2 >= y1 && y2 > axisy.max && y1 <= axisy.max) {
                        x2 = (axisy.max - y1) / (y2 - y1) * (x2 - x1) + x1;
                        y2 = axisy.max;
                    }

                    // if the x value was changed we got a rectangle
                    // to fill
                    if (x1 != x1old) {
                        ctx.lineTo(axisx.p2c(x1old), axisy.p2c(y1));
                        // it goes to (x1, y1), but we fill that below
                    }
                    
                    // fill triangular section, this sometimes result
                    // in redundant points if (x1, y1) hasn't changed
                    // from previous line to, but we just ignore that
                    ctx.lineTo(axisx.p2c(x1), axisy.p2c(y1));
                    ctx.lineTo(axisx.p2c(x2), axisy.p2c(y2));

                    // fill the other rectangle if it's there
                    if (x2 != x2old) {
                        ctx.lineTo(axisx.p2c(x2), axisy.p2c(y2));
                        ctx.lineTo(axisx.p2c(x2old), axisy.p2c(y2));
                    }
                }
            }

            ctx.save();
            ctx.translate(plotOffset.left, plotOffset.top);
            ctx.lineJoin = "round";

            var lw = series.lines.lineWidth,
                sw = series.shadowSize;
            // FIXME: consider another form of shadow when filling is turned on
            if (lw > 0 && sw > 0) {
                // draw shadow as a thick and thin line with transparency
                ctx.lineWidth = sw;
                ctx.strokeStyle = "rgba(0,0,0,0.1)";
                // position shadow at angle from the mid of line
                var angle = Math.PI/18;
                plotLine(series.datapoints, Math.sin(angle) * (lw/2 + sw/2), Math.cos(angle) * (lw/2 + sw/2), series.xaxis, series.yaxis);
                ctx.lineWidth = sw/2;
                plotLine(series.datapoints, Math.sin(angle) * (lw/2 + sw/4), Math.cos(angle) * (lw/2 + sw/4), series.xaxis, series.yaxis);
            }

            ctx.lineWidth = lw;
            ctx.strokeStyle = series.color;
            var fillStyle = getFillStyle(series.lines, series.color, 0, plotHeight);
            if (fillStyle) {
                ctx.fillStyle = fillStyle;
                plotLineArea(series.datapoints, series.xaxis, series.yaxis);
            }

            if (lw > 0)
                plotLine(series.datapoints, 0, 0, series.xaxis, series.yaxis);
            ctx.restore();
        }

        function drawSeriesPoints(series) {
            function plotPoints(datapoints, radius, fillStyle, offset, shadow, axisx, axisy, symbol) {
                var points = datapoints.points, ps = datapoints.pointsize;

                for (var i = 0; i < points.length; i += ps) {
                    var x = points[i], y = points[i + 1];
                    if (x == null || x < axisx.min || x > axisx.max || y < axisy.min || y > axisy.max)
                        continue;
                    
                    ctx.beginPath();
                    x = axisx.p2c(x);
                    y = axisy.p2c(y) + offset;
                    if (symbol == "circle")
                        ctx.arc(x, y, radius, 0, shadow ? Math.PI : Math.PI * 2, false);
                    else
                        symbol(ctx, x, y, radius, shadow);
                    ctx.closePath();
                    
                    if (fillStyle) {
                        ctx.fillStyle = fillStyle;
                        ctx.fill();
                    }
                    ctx.stroke();
                }
            }
            
            ctx.save();
            ctx.translate(plotOffset.left, plotOffset.top);

            var lw = series.points.lineWidth,
                sw = series.shadowSize,
                radius = series.points.radius,
                symbol = series.points.symbol;
            if (lw > 0 && sw > 0) {
                // draw shadow in two steps
                var w = sw / 2;
                ctx.lineWidth = w;
                ctx.strokeStyle = "rgba(0,0,0,0.1)";
                plotPoints(series.datapoints, radius, null, w + w/2, true,
                           series.xaxis, series.yaxis, symbol);

                ctx.strokeStyle = "rgba(0,0,0,0.2)";
                plotPoints(series.datapoints, radius, null, w/2, true,
                           series.xaxis, series.yaxis, symbol);
            }

            ctx.lineWidth = lw;
            ctx.strokeStyle = series.color;
            plotPoints(series.datapoints, radius,
                       getFillStyle(series.points, series.color), 0, false,
                       series.xaxis, series.yaxis, symbol);
            ctx.restore();
        }

        function drawBar(x, y, b, barLeft, barRight, offset, fillStyleCallback, axisx, axisy, c, horizontal, lineWidth) {
            var left, right, bottom, top,
                drawLeft, drawRight, drawTop, drawBottom,
                tmp;

            // in horizontal mode, we start the bar from the left
            // instead of from the bottom so it appears to be
            // horizontal rather than vertical
            if (horizontal) {
                drawBottom = drawRight = drawTop = true;
                drawLeft = false;
                left = b;
                right = x;
                top = y + barLeft;
                bottom = y + barRight;

                // account for negative bars
                if (right < left) {
                    tmp = right;
                    right = left;
                    left = tmp;
                    drawLeft = true;
                    drawRight = false;
                }
            }
            else {
                drawLeft = drawRight = drawTop = true;
                drawBottom = false;
                left = x + barLeft;
                right = x + barRight;
                bottom = b;
                top = y;

                // account for negative bars
                if (top < bottom) {
                    tmp = top;
                    top = bottom;
                    bottom = tmp;
                    drawBottom = true;
                    drawTop = false;
                }
            }
           
            // clip
            if (right < axisx.min || left > axisx.max ||
                top < axisy.min || bottom > axisy.max)
                return;
            
            if (left < axisx.min) {
                left = axisx.min;
                drawLeft = false;
            }

            if (right > axisx.max) {
                right = axisx.max;
                drawRight = false;
            }

            if (bottom < axisy.min) {
                bottom = axisy.min;
                drawBottom = false;
            }
            
            if (top > axisy.max) {
                top = axisy.max;
                drawTop = false;
            }

            left = axisx.p2c(left);
            bottom = axisy.p2c(bottom);
            right = axisx.p2c(right);
            top = axisy.p2c(top);
            
            // fill the bar
            if (fillStyleCallback) {
                c.beginPath();
                c.moveTo(left, bottom);
                c.lineTo(left, top);
                c.lineTo(right, top);
                c.lineTo(right, bottom);
                c.fillStyle = fillStyleCallback(bottom, top);
                c.fill();
            }

            // draw outline
            if (lineWidth > 0 && (drawLeft || drawRight || drawTop || drawBottom)) {
                c.beginPath();

                // FIXME: inline moveTo is buggy with excanvas
                c.moveTo(left, bottom + offset);
                if (drawLeft)
                    c.lineTo(left, top + offset);
                else
                    c.moveTo(left, top + offset);
                if (drawTop)
                    c.lineTo(right, top + offset);
                else
                    c.moveTo(right, top + offset);
                if (drawRight)
                    c.lineTo(right, bottom + offset);
                else
                    c.moveTo(right, bottom + offset);
                if (drawBottom)
                    c.lineTo(left, bottom + offset);
                else
                    c.moveTo(left, bottom + offset);
                c.stroke();
            }
        }
        
        function drawSeriesBars(series) {
            function plotBars(datapoints, barLeft, barRight, offset, fillStyleCallback, axisx, axisy) {
                var points = datapoints.points, ps = datapoints.pointsize;
                
                for (var i = 0; i < points.length; i += ps) {
                    if (points[i] == null)
                        continue;
                    drawBar(points[i], points[i + 1], points[i + 2], barLeft, barRight, offset, fillStyleCallback, axisx, axisy, ctx, series.bars.horizontal, series.bars.lineWidth);
                }
            }

            ctx.save();
            ctx.translate(plotOffset.left, plotOffset.top);

            // FIXME: figure out a way to add shadows (for instance along the right edge)
            ctx.lineWidth = series.bars.lineWidth;
            ctx.strokeStyle = series.color;
            var barLeft = series.bars.align == "left" ? 0 : -series.bars.barWidth/2;
            var fillStyleCallback = series.bars.fill ? function (bottom, top) { return getFillStyle(series.bars, series.color, bottom, top); } : null;
            plotBars(series.datapoints, barLeft, barLeft + series.bars.barWidth, 0, fillStyleCallback, series.xaxis, series.yaxis);
            ctx.restore();
        }

        function getFillStyle(filloptions, seriesColor, bottom, top) {
            var fill = filloptions.fill;
            if (!fill)
                return null;

            if (filloptions.fillColor)
                return getColorOrGradient(filloptions.fillColor, bottom, top, seriesColor);
            
            var c = $.color.parse(seriesColor);
            c.a = typeof fill == "number" ? fill : 0.4;
            c.normalize();
            return c.toString();
        }
        
        function insertLegend() {
            placeholder.find(".legend").remove();

            if (!options.legend.show)
                return;
            
            var fragments = [], rowStarted = false,
                lf = options.legend.labelFormatter, s, label;
            for (var i = 0; i < series.length; ++i) {
                s = series[i];
                label = s.label;
                if (!label)
                    continue;
                
                if (i % options.legend.noColumns == 0) {
                    if (rowStarted)
                        fragments.push('</tr>');
                    fragments.push('<tr>');
                    rowStarted = true;
                }

                if (lf)
                    label = lf(label, s);
                
                fragments.push(
                    '<td class="legendColorBox"><div style="border:1px solid ' + options.legend.labelBoxBorderColor + ';padding:1px"><div style="width:4px;height:0;border:5px solid ' + s.color + ';overflow:hidden"></div></div></td>' +
                    '<td class="legendLabel">' + label + '</td>');
            }
            if (rowStarted)
                fragments.push('</tr>');
            
            if (fragments.length == 0)
                return;

            var table = '<table style="font-size:smaller;color:' + options.grid.color + '">' + fragments.join("") + '</table>';
            if (options.legend.container != null)
                $(options.legend.container).html(table);
            else {
                var pos = "",
                    p = options.legend.position,
                    m = options.legend.margin;
                if (m[0] == null)
                    m = [m, m];
                if (p.charAt(0) == "n")
                    pos += 'top:' + (m[1] + plotOffset.top) + 'px;';
                else if (p.charAt(0) == "s")
                    pos += 'bottom:' + (m[1] + plotOffset.bottom) + 'px;';
                if (p.charAt(1) == "e")
                    pos += 'right:' + (m[0] + plotOffset.right) + 'px;';
                else if (p.charAt(1) == "w")
                    pos += 'left:' + (m[0] + plotOffset.left) + 'px;';
                var legend = $('<div class="legend">' + table.replace('style="', 'style="position:absolute;' + pos +';') + '</div>').appendTo(placeholder);
                if (options.legend.backgroundOpacity != 0.0) {
                    // put in the transparent background
                    // separately to avoid blended labels and
                    // label boxes
                    var c = options.legend.backgroundColor;
                    if (c == null) {
                        c = options.grid.backgroundColor;
                        if (c && typeof c == "string")
                            c = $.color.parse(c);
                        else
                            c = $.color.extract(legend, 'background-color');
                        c.a = 1;
                        c = c.toString();
                    }
                    var div = legend.children();
                    $('<div style="position:absolute;width:' + div.width() + 'px;height:' + div.height() + 'px;' + pos +'background-color:' + c + ';"> </div>').prependTo(legend).css('opacity', options.legend.backgroundOpacity);
                }
            }
        }


        // interactive features
        
        var highlights = [],
            redrawTimeout = null;
        
        // returns the data item the mouse is over, or null if none is found
        function findNearbyItem(mouseX, mouseY, seriesFilter) {
            var maxDistance = options.grid.mouseActiveRadius,
                smallestDistance = maxDistance * maxDistance + 1,
                item = null, foundPoint = false, i, j;

            for (i = series.length - 1; i >= 0; --i) {
                if (!seriesFilter(series[i]))
                    continue;
                
                var s = series[i],
                    axisx = s.xaxis,
                    axisy = s.yaxis,
                    points = s.datapoints.points,
                    ps = s.datapoints.pointsize,
                    mx = axisx.c2p(mouseX), // precompute some stuff to make the loop faster
                    my = axisy.c2p(mouseY),
                    maxx = maxDistance / axisx.scale,
                    maxy = maxDistance / axisy.scale;

                // with inverse transforms, we can't use the maxx/maxy
                // optimization, sadly
                if (axisx.options.inverseTransform)
                    maxx = Number.MAX_VALUE;
                if (axisy.options.inverseTransform)
                    maxy = Number.MAX_VALUE;
                
                if (s.lines.show || s.points.show) {
                    for (j = 0; j < points.length; j += ps) {
                        var x = points[j], y = points[j + 1];
                        if (x == null)
                            continue;
                        
                        // For points and lines, the cursor must be within a
                        // certain distance to the data point
                        if (x - mx > maxx || x - mx < -maxx ||
                            y - my > maxy || y - my < -maxy)
                            continue;

                        // We have to calculate distances in pixels, not in
                        // data units, because the scales of the axes may be different
                        var dx = Math.abs(axisx.p2c(x) - mouseX),
                            dy = Math.abs(axisy.p2c(y) - mouseY),
                            dist = dx * dx + dy * dy; // we save the sqrt

                        // use <= to ensure last point takes precedence
                        // (last generally means on top of)
                        if (dist < smallestDistance) {
                            smallestDistance = dist;
                            item = [i, j / ps];
                        }
                    }
                }
                    
                if (s.bars.show && !item) { // no other point can be nearby
                    var barLeft = s.bars.align == "left" ? 0 : -s.bars.barWidth/2,
                        barRight = barLeft + s.bars.barWidth;
                    
                    for (j = 0; j < points.length; j += ps) {
                        var x = points[j], y = points[j + 1], b = points[j + 2];
                        if (x == null)
                            continue;
  
                        // for a bar graph, the cursor must be inside the bar
                        if (series[i].bars.horizontal ? 
                            (mx <= Math.max(b, x) && mx >= Math.min(b, x) && 
                             my >= y + barLeft && my <= y + barRight) :
                            (mx >= x + barLeft && mx <= x + barRight &&
                             my >= Math.min(b, y) && my <= Math.max(b, y)))
                                item = [i, j / ps];
                    }
                }
            }

            if (item) {
                i = item[0];
                j = item[1];
                ps = series[i].datapoints.pointsize;
                
                return { datapoint: series[i].datapoints.points.slice(j * ps, (j + 1) * ps),
                         dataIndex: j,
                         series: series[i],
                         seriesIndex: i };
            }
            
            return null;
        }

        function onMouseMove(e) {
            if (options.grid.hoverable)
                triggerClickHoverEvent("plothover", e,
                                       function (s) { return s["hoverable"] != false; });
        }

        function onMouseLeave(e) {
            if (options.grid.hoverable)
                triggerClickHoverEvent("plothover", e,
                                       function (s) { return false; });
        }

        function onClick(e) {
            triggerClickHoverEvent("plotclick", e,
                                   function (s) { return s["clickable"] != false; });
        }

        // trigger click or hover event (they send the same parameters
        // so we share their code)
        function triggerClickHoverEvent(eventname, event, seriesFilter) {
            var offset = eventHolder.offset(),
                canvasX = event.pageX - offset.left - plotOffset.left,
                canvasY = event.pageY - offset.top - plotOffset.top,
            pos = canvasToAxisCoords({ left: canvasX, top: canvasY });

            pos.pageX = event.pageX;
            pos.pageY = event.pageY;

            var item = findNearbyItem(canvasX, canvasY, seriesFilter);

            if (item) {
                // fill in mouse pos for any listeners out there
                item.pageX = parseInt(item.series.xaxis.p2c(item.datapoint[0]) + offset.left + plotOffset.left);
                item.pageY = parseInt(item.series.yaxis.p2c(item.datapoint[1]) + offset.top + plotOffset.top);
            }

            if (options.grid.autoHighlight) {
                // clear auto-highlights
                for (var i = 0; i < highlights.length; ++i) {
                    var h = highlights[i];
                    if (h.auto == eventname &&
                        !(item && h.series == item.series &&
                          h.point[0] == item.datapoint[0] &&
                          h.point[1] == item.datapoint[1]))
                        unhighlight(h.series, h.point);
                }
                
                if (item)
                    highlight(item.series, item.datapoint, eventname);
            }
            
            placeholder.trigger(eventname, [ pos, item ]);
        }

        function triggerRedrawOverlay() {
            if (!redrawTimeout)
                redrawTimeout = setTimeout(drawOverlay, 30);
        }

        function drawOverlay() {
            redrawTimeout = null;

            // draw highlights
            octx.save();
            octx.clearRect(0, 0, canvasWidth, canvasHeight);
            octx.translate(plotOffset.left, plotOffset.top);
            
            var i, hi;
            for (i = 0; i < highlights.length; ++i) {
                hi = highlights[i];

                if (hi.series.bars.show)
                    drawBarHighlight(hi.series, hi.point);
                else
                    drawPointHighlight(hi.series, hi.point);
            }
            octx.restore();
            
            executeHooks(hooks.drawOverlay, [octx]);
        }
        
        function highlight(s, point, auto) {
            if (typeof s == "number")
                s = series[s];

            if (typeof point == "number") {
                var ps = s.datapoints.pointsize;
                point = s.datapoints.points.slice(ps * point, ps * (point + 1));
            }

            var i = indexOfHighlight(s, point);
            if (i == -1) {
                highlights.push({ series: s, point: point, auto: auto });

                triggerRedrawOverlay();
            }
            else if (!auto)
                highlights[i].auto = false;
        }
            
        function unhighlight(s, point) {
            if (s == null && point == null) {
                highlights = [];
                triggerRedrawOverlay();
            }
            
            if (typeof s == "number")
                s = series[s];

            if (typeof point == "number")
                point = s.data[point];

            var i = indexOfHighlight(s, point);
            if (i != -1) {
                highlights.splice(i, 1);

                triggerRedrawOverlay();
            }
        }
        
        function indexOfHighlight(s, p) {
            for (var i = 0; i < highlights.length; ++i) {
                var h = highlights[i];
                if (h.series == s && h.point[0] == p[0]
                    && h.point[1] == p[1])
                    return i;
            }
            return -1;
        }
        
        function drawPointHighlight(series, point) {
            var x = point[0], y = point[1],
                axisx = series.xaxis, axisy = series.yaxis;
            
            if (x < axisx.min || x > axisx.max || y < axisy.min || y > axisy.max)
                return;
            
            var pointRadius = series.points.radius + series.points.lineWidth / 2;
            octx.lineWidth = pointRadius;
            octx.strokeStyle = $.color.parse(series.color).scale('a', 0.5).toString();
            var radius = 1.5 * pointRadius,
                x = axisx.p2c(x),
                y = axisy.p2c(y);
            
            octx.beginPath();
            if (series.points.symbol == "circle")
                octx.arc(x, y, radius, 0, 2 * Math.PI, false);
            else
                series.points.symbol(octx, x, y, radius, false);
            octx.closePath();
            octx.stroke();
        }

        function drawBarHighlight(series, point) {
            octx.lineWidth = series.bars.lineWidth;
            octx.strokeStyle = $.color.parse(series.color).scale('a', 0.5).toString();
            var fillStyle = $.color.parse(series.color).scale('a', 0.5).toString();
            var barLeft = series.bars.align == "left" ? 0 : -series.bars.barWidth/2;
            drawBar(point[0], point[1], point[2] || 0, barLeft, barLeft + series.bars.barWidth,
                    0, function () { return fillStyle; }, series.xaxis, series.yaxis, octx, series.bars.horizontal, series.bars.lineWidth);
        }

        function getColorOrGradient(spec, bottom, top, defaultColor) {
            if (typeof spec == "string")
                return spec;
            else {
                // assume this is a gradient spec; IE currently only
                // supports a simple vertical gradient properly, so that's
                // what we support too
                var gradient = ctx.createLinearGradient(0, top, 0, bottom);
                
                for (var i = 0, l = spec.colors.length; i < l; ++i) {
                    var c = spec.colors[i];
                    if (typeof c != "string") {
                        var co = $.color.parse(defaultColor);
                        if (c.brightness != null)
                            co = co.scale('rgb', c.brightness)
                        if (c.opacity != null)
                            co.a *= c.opacity;
                        c = co.toString();
                    }
                    gradient.addColorStop(i / (l - 1), c);
                }
                
                return gradient;
            }
        }
    }

    $.plot = function(placeholder, data, options) {
        //var t0 = new Date();
        var plot = new Plot($(placeholder), data, options, $.plot.plugins);
        //(window.console ? console.log : alert)("time used (msecs): " + ((new Date()).getTime() - t0.getTime()));
        return plot;
    };

    $.plot.version = "0.7";
    
    $.plot.plugins = [];

    // returns a string with the date d formatted according to fmt
    $.plot.formatDate = function(d, fmt, monthNames) {
        var leftPad = function(n) {
            n = "" + n;
            return n.length == 1 ? "0" + n : n;
        };
        
        var r = [];
        var escape = false, padNext = false;
        var hours = d.getUTCHours();
        var isAM = hours < 12;
        if (monthNames == null)
            monthNames = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];

        if (fmt.search(/%p|%P/) != -1) {
            if (hours > 12) {
                hours = hours - 12;
            } else if (hours == 0) {
                hours = 12;
            }
        }
        for (var i = 0; i < fmt.length; ++i) {
            var c = fmt.charAt(i);
            
            if (escape) {
                switch (c) {
                case 'h': c = "" + hours; break;
                case 'H': c = leftPad(hours); break;
                case 'M': c = leftPad(d.getUTCMinutes()); break;
                case 'S': c = leftPad(d.getUTCSeconds()); break;
                case 'd': c = "" + d.getUTCDate(); break;
                case 'm': c = "" + (d.getUTCMonth() + 1); break;
                case 'y': c = "" + d.getUTCFullYear(); break;
                case 'b': c = "" + monthNames[d.getUTCMonth()]; break;
                case 'p': c = (isAM) ? ("" + "am") : ("" + "pm"); break;
                case 'P': c = (isAM) ? ("" + "AM") : ("" + "PM"); break;
                case '0': c = ""; padNext = true; break;
                }
                if (c && padNext) {
                    c = leftPad(c);
                    padNext = false;
                }
                r.push(c);
                if (!padNext)
                    escape = false;
            }
            else {
                if (c == "%")
                    escape = true;
                else
                    r.push(c);
            }
        }
        return r.join("");
    };
    
    // round to nearby lower multiple of base
    function floorInBase(n, base) {
        return base * Math.floor(n / base);
    }
    
})(jQuery);

/*! jQuery UI - v1.10.0 - 2013-01-17
* http://jqueryui.com
* Includes: jquery.ui.datepicker-ja.js
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
jQuery(function(e){e.datepicker.regional.ja={closeText:"é–‰ã˜ã‚‹",prevText:"&#x3C;å‰",nextText:"æ¬¡&#x3E;",currentText:"ä»Šæ—¥",monthNames:["1æœˆ","2æœˆ","3æœˆ","4æœˆ","5æœˆ","6æœˆ","7æœˆ","8æœˆ","9æœˆ","10æœˆ","11æœˆ","12æœˆ"],monthNamesShort:["1æœˆ","2æœˆ","3æœˆ","4æœˆ","5æœˆ","6æœˆ","7æœˆ","8æœˆ","9æœˆ","10æœˆ","11æœˆ","12æœˆ"],dayNames:["æ—¥æ›œæ—¥","æœˆæ›œæ—¥","ç«æ›œæ—¥","æ°´æ›œæ—¥","æœ¨æ›œæ—¥","é‡‘æ›œæ—¥","åœŸæ›œæ—¥"],dayNamesShort:["æ—¥","æœˆ","ç«","æ°´","æœ¨","é‡‘","åœŸ"],dayNamesMin:["æ—¥","æœˆ","ç«","æ°´","æœ¨","é‡‘","åœŸ"],weekHeader:"é€±",dateFormat:"yy/mm/dd",firstDay:0,isRTL:!1,showMonthAfterYear:!0,yearSuffix:"å¹´"},e.datepicker.setDefaults(e.datepicker.regional.ja)});
// tipsy, facebook style tooltips for jquery
// version 1.0.0a
// (c) 2008-2010 jason frame [jason@onehackoranother.com]
// released under the MIT license

(function($, window, undefined) {

    function maybeCall(thing, ctx) {
        return (typeof thing == 'function') ? (thing.call(ctx)) : thing;
    }

    function isElementInDOM(ele) {
        while (ele = ele.parentNode) {
            if (ele == document) return true;
        }
        return false;
    }

	// Returns true if it is a DOM element
	// http://stackoverflow.com/a/384380/999
	function isElement(o){
		return (
			typeof HTMLElement === "object" ? o instanceof HTMLElement : //DOM2
			o && typeof o === "object" && o.nodeType === 1 && typeof o.nodeName==="string"
		);	
	}

    var tipsyIDcounter = 0;
    function tipsyID() {
        return "tipsyuid" + (tipsyIDcounter++);
    }

    function Tipsy(element, options) {
        this.$element = $(element);
        this.options = options;
        this.enabled = true;
        this.fixTitle();
    }

    Tipsy.prototype = {
        show: function() {
            if (!isElementInDOM(this.$element[0])) {
                return;
            }

            if (isElement(this.$element) && !this.$element.is(':visible')) { 
                return; 
            }
            
            var title;
            if (this.enabled && (title = this.getTitle())) {
                var $tip = this.tip();

                $tip.find('.tipsy-inner' + this.options.theme)[this.options.html ? 'html' : 'text'](title);

                $tip[0].className = 'tipsy' + this.options.theme; // reset classname in case of dynamic gravity
                if (this.options.className) {
                    $tip.addClass(maybeCall(this.options.className, this.$element[0]));
                }

                $tip.remove().css({top: 0, left: 0, visibility: 'hidden', display: 'block'}).prependTo(document.body);

                var pos = $.extend({}, this.$element.offset());

                // If the element is contained in a SVG object, use getBBox
                if (this.$element.parents('svg').size() > 0) {
                    pos = $.extend(pos, this.$element[0].getBBox());
                } else {
                    pos = $.extend(pos, {
                        width: this.$element[0].offsetWidth || 0,
                        height: this.$element[0].offsetHeight || 0
                    });
                }

                var actualWidth = $tip[0].offsetWidth,
                    actualHeight = $tip[0].offsetHeight,
                    gravity = maybeCall(this.options.gravity, this.$element[0]);

                var tp;
                switch (gravity.charAt(0)) {
                    case 'n':
                        tp = {top: pos.top + pos.height + this.options.offset, left: pos.left + pos.width / 2 - actualWidth / 2};
                        break;
                    case 's':
                        tp = {top: pos.top - actualHeight - this.options.offset, left: pos.left + pos.width / 2 - actualWidth / 2};
                        break;
                    case 'e':
                        tp = {top: pos.top + pos.height / 2 - actualHeight / 2, left: pos.left - actualWidth - this.options.offset};
                        break;
                    case 'w':
                        tp = {top: pos.top + pos.height / 2 - actualHeight / 2, left: pos.left + pos.width + this.options.offset};
                        break;
                    default:
                        break;
                }

                if (gravity.length == 2) {
                    if (gravity.charAt(1) == 'w') {
                        tp.left = pos.left + pos.width / 2 - 15;
                    } else {
                        tp.left = pos.left + pos.width / 2 - actualWidth + 15;
                    }
                }

                $tip.css(tp).addClass('tipsy-' + gravity + this.options.theme);
                $tip.find('.tipsy-arrow' + this.options.theme)[0].className = 'tipsy-arrow' + this.options.theme + ' tipsy-arrow-' + gravity.charAt(0) + this.options.theme;
                $tip.css({width: (actualWidth - 10) + 'px'});

                if (this.options.fade) {
                    if(this.options.shadow)
                        $(".tipsy-inner").css({'box-shadow': '0px 0px '+this.options.shadowBlur+'px '+this.options.shadowSpread+'px rgba(0, 0, 0, '+this.options.shadowOpacity+')', '-webkit-box-shadow': '0px 0px '+this.options.shadowBlur+'px '+this.options.shadowSpread+'px rgba(0, 0, 0, '+this.options.shadowOpacity+')'});
                    $tip.stop().css({opacity: 0, display: 'block', visibility: 'visible'}).animate({opacity: this.options.opacity}, this.options.fadeInTime);
                } else {
                    $tip.css({visibility: 'visible', opacity: this.options.opacity});
                }

                if (this.options.aria) {
                    var $tipID = tipsyID();
                    $tip.attr("id", $tipID);
                    this.$element.attr("aria-describedby", $tipID);
                }
            }
        },

        hide: function() {
            if (this.options.fade) {
                this.tip().stop().fadeOut(this.options.fadeOutTime, function() { $(this).remove(); });
            } else {
                this.tip().remove();
            }
            if (this.options.aria) {
                this.$element.removeAttr("aria-describedby");
            }
        },

        fixTitle: function() {
            var $e = this.$element;
            if ($e.attr('title') || typeof($e.attr('original-title')) != 'string') {
                $e.attr('original-title', $e.attr('title') || '').removeAttr('title');
            }
        },

        getTitle: function() {
            var title, $e = this.$element, o = this.options;
            this.fixTitle();
            if (typeof o.title == 'string') {
                title = $e.attr(o.title == 'title' ? 'original-title' : o.title);
            } else if (typeof o.title == 'function') {
                title = o.title.call($e[0]);
            }
            title = ('' + title).replace(/(^\s*|\s*$)/, "");
            return title || o.fallback;
        },

        tip: function() {
            if (!this.$tip) {
                this.$tip = $('<div class="tipsy' + this.options.theme + '"></div>').html('<div class="tipsy-arrow' + this.options.theme + '"></div><div class="tipsy-inner' + this.options.theme + '"></div>').attr("role","tooltip");
                this.$tip.data('tipsy-pointee', this.$element[0]);
            }
            return this.$tip;
        },

        validate: function() {
            if (!this.$element[0].parentNode) {
                this.hide();
                this.$element = null;
                this.options = null;
            }
        },

        enable: function() { this.enabled = true; },
        disable: function() { this.enabled = false; },
        toggleEnabled: function() { this.enabled = !this.enabled; }
    };

    $.fn.tipsy = function(options) {

        $.fn.tipsy.enable();

        if (options === true) {
            return this.data('tipsy');
        } else if (typeof options == 'string') {
            var tipsy = this.data('tipsy');
            if (tipsy) tipsy[options]();
            return this;
        }

        options = $.extend({}, $.fn.tipsy.defaults, options);

        // Establish theme
        options.theme = (options.theme && options.theme !== '') ? '-' + options.theme : '';

        function get(ele) {
            var tipsy = $.data(ele, 'tipsy');
            if (!tipsy) {
                tipsy = new Tipsy(ele, $.fn.tipsy.elementOptions(ele, options));
                $.data(ele, 'tipsy', tipsy);
            }
            return tipsy;
        }

        function enter() {
            if ($.fn.tipsy.enabled !== true) {
                return;
            }
            var tipsy = get(this);
            tipsy.hoverState = 'in';
            if (options.delayIn === 0) {
                tipsy.show();
            } else {
                tipsy.fixTitle();
                setTimeout(function() {
                    if (tipsy.hoverState == 'in' && isElementInDOM(tipsy.$element)) {
                        tipsy.show();
                    }
                }, options.delayIn);
            }
        }

        function leave() {
            var tipsy = get(this);
            tipsy.hoverState = 'out';
            if (options.delayOut === 0) {
                tipsy.hide();
            } else {
                setTimeout(function() { if (tipsy.hoverState == 'out' || !tipsy.$element || !tipsy.$element.is(':visible')) tipsy.hide(); }, options.delayOut);
            }
        }

        if (!options.live) this.each(function() { get(this); });

        if (options.trigger != 'manual') {
            var eventIn  = options.trigger == 'hover' ? 'mouseenter mouseover' : 'focus',
                eventOut = options.trigger == 'hover' ? 'mouseleave mouseout' : 'blur';

            if (options.live && options.live !== true) {
                $(this).on(eventIn, options.live, enter);
                $(this).on(eventOut, options.live, leave);
            } else {
                if (options.live && !$.live) {
                    //live === true and using jQuery >= 1.9
                    throw "Since jQuery 1.9, pass selector as live argument. eg. $(document).tipsy({live: 'a.live'});";
                }
                var binder = options.live ? 'live' : 'bind';
                this[binder](eventIn, enter)[binder](eventOut, leave);
            }
        }

        return this;

    };

    $.fn.tipsy.defaults = {
        aria: false,
        className: null,
        delayIn: 0,
        delayOut: 0,
        fade: false,
        fadeInTime: 400,
        fadeOutTime: 400, 
        shadow: false,
        shadowBlur: 8,
        shadowOpacity: 1,
        shadowSpread: 0,
        fallback: '',
        gravity: 'n',
        html: false,
        live: false,
        offset: 0,
        opacity: 0.8,
        title: 'title',
        trigger: 'hover',
        theme: ''
    };

    $.fn.tipsy.revalidate = function() {
      $('.tipsy').each(function() {
        var pointee = $.data(this, 'tipsy-pointee');
        if (!pointee || !isElementInDOM(pointee)) {
          $(this).remove();
        }
      });
    };

    $.fn.tipsy.enable = function() {
        $.fn.tipsy.enabled = true;
    };

    $.fn.tipsy.disable = function() {
        $.fn.tipsy.enabled = false;
    };

    // Overwrite this method to provide options on a per-element basis.
    // For example, you could store the gravity in a 'tipsy-gravity' attribute:
    // return $.extend({}, options, {gravity: $(ele).attr('tipsy-gravity') || 'n' });
    // (remember - do not modify 'options' in place!)
    $.fn.tipsy.elementOptions = function(ele, options) {
        return $.metadata ? $.extend({}, options, $(ele).metadata()) : options;
    };

    $.fn.tipsy.autoNS = function() {
        return $(this).offset().top > ($(document).scrollTop() + $(window).height() / 2) ? 's' : 'n';
    };

    $.fn.tipsy.autoWE = function() {
        return $(this).offset().left > ($(document).scrollLeft() + $(window).width() / 2) ? 'e' : 'w';
    };

    $.fn.tipsy.autoNWNE = function() {
        return $(this).offset().left > ($(document).scrollLeft() + $(window).width() / 2) ? 'ne' : 'nw';
    };

    $.fn.tipsy.autoSWSE = function() {
        return $(this).offset().left > ($(document).scrollLeft() + $(window).width() / 2) ? 'se' : 'sw';
    };

    /**
     * yields a closure of the supplied parameters, producing a function that takes
     * no arguments and is suitable for use as an autogravity function like so:
     *
     * @param margin (int) - distance from the viewable region edge that an
     *        element should be before setting its tooltip's gravity to be away
     *        from that edge.
     * @param prefer (string, e.g. 'n', 'sw', 'w') - the direction to prefer
     *        if there are no viewable region edges effecting the tooltip's
     *        gravity. It will try to vary from this minimally, for example,
     *        if 'sw' is preferred and an element is near the right viewable
     *        region edge, but not the top edge, it will set the gravity for
     *        that element's tooltip to be 'se', preserving the southern
     *        component.
     */
    $.fn.tipsy.autoBounds = function(marginNorth, marginEast, prefer) {
        return function() {
            var dir = {ns: prefer[0], ew: (prefer.length > 1 ? prefer[1] : false)},
                boundTop = $(document).scrollTop() + marginNorth,
                boundLeft = $(document).scrollLeft() + marginEast,
                $this = $(this);

            if ($this.offset().top < boundTop) dir.ns = 'n';
            if ($this.offset().left < boundLeft) dir.ew = 'w';
            if ($(window).width() + $(document).scrollLeft() - $this.offset().left < marginEast) dir.ew = 'e';
            if ($(window).height() + $(document).scrollTop() - $this.offset().top < marginNorth) dir.ns = 's';

            return dir.ns + (dir.ew ? dir.ew : '');
        };
    };

    /**
     * Improved version of autoBounds for automatic placement of chunky tips
     * The original autoBounds failed in two regards: 1. it would never return a 'w' or 'e', gravity even if they
     * were preferred and/or optimal, 2. it only respected the margin between the left hand side of an element and
     * left hand side of the viewport, and the top of an element and the top of the viewport. This version checks
     * to see if the bottom of an element is too close to the bottom of the screen, similarly for the right hand side
     */
    $.fn.tipsy.autoBounds2 = function(margin, prefer) {
        return function() {
            var dir = {},
                boundTop = $(document).scrollTop() + margin,
                boundLeft = $(document).scrollLeft() + margin,
                $this = $(this);

            // bi-directional string (ne, se, sw, etc...)
            if (prefer.length > 1) {
                dir.ns = prefer[0];
                dir.ew = prefer[1];
            } else {
                // single direction string (e, w, n or s)
                if (prefer[0] == 'e' || prefer[0] == 'w') {
                    dir.ew = prefer[0];
                } else {
                    dir.ns = prefer[0];
                }
            }

            if ($this.offset().top < boundTop) dir.ns = 'n';
            if ($this.offset().left < boundLeft) dir.ew = 'w';
            if ($(window).width() + $(document).scrollLeft() - ($this.offset().left + $this.width()) < margin) dir.ew = 'e';
            if ($(window).height() + $(document).scrollTop() - ($this.offset().top + $this.height()) < margin) dir.ns = 's';

            if (dir.ns) {
                return dir.ns + (dir.ew ? dir.ew : '');
            }
            return dir.ew;
        }
    };
    
})(jQuery, window);
/**
 * jquery.Jcrop.min.js v0.9.12 (build:20130202)
 * jQuery Image Cropping Plugin - released under MIT License
 * Copyright (c) 2008-2013 Tapmodo Interactive LLC
 * https://github.com/tapmodo/Jcrop
 */
(function(a){a.Jcrop=function(b,c){function i(a){return Math.round(a)+"px"}function j(a){return d.baseClass+"-"+a}function k(){return a.fx.step.hasOwnProperty("backgroundColor")}function l(b){var c=a(b).offset();return[c.left,c.top]}function m(a){return[a.pageX-e[0],a.pageY-e[1]]}function n(b){typeof b!="object"&&(b={}),d=a.extend(d,b),a.each(["onChange","onSelect","onRelease","onDblClick"],function(a,b){typeof d[b]!="function"&&(d[b]=function(){})})}function o(a,b,c){e=l(D),bc.setCursor(a==="move"?a:a+"-resize");if(a==="move")return bc.activateHandlers(q(b),v,c);var d=_.getFixed(),f=r(a),g=_.getCorner(r(f));_.setPressed(_.getCorner(f)),_.setCurrent(g),bc.activateHandlers(p(a,d),v,c)}function p(a,b){return function(c){if(!d.aspectRatio)switch(a){case"e":c[1]=b.y2;break;case"w":c[1]=b.y2;break;case"n":c[0]=b.x2;break;case"s":c[0]=b.x2}else switch(a){case"e":c[1]=b.y+1;break;case"w":c[1]=b.y+1;break;case"n":c[0]=b.x+1;break;case"s":c[0]=b.x+1}_.setCurrent(c),bb.update()}}function q(a){var b=a;return bd.watchKeys
(),function(a){_.moveOffset([a[0]-b[0],a[1]-b[1]]),b=a,bb.update()}}function r(a){switch(a){case"n":return"sw";case"s":return"nw";case"e":return"nw";case"w":return"ne";case"ne":return"sw";case"nw":return"se";case"se":return"nw";case"sw":return"ne"}}function s(a){return function(b){return d.disabled?!1:a==="move"&&!d.allowMove?!1:(e=l(D),W=!0,o(a,m(b)),b.stopPropagation(),b.preventDefault(),!1)}}function t(a,b,c){var d=a.width(),e=a.height();d>b&&b>0&&(d=b,e=b/a.width()*a.height()),e>c&&c>0&&(e=c,d=c/a.height()*a.width()),T=a.width()/d,U=a.height()/e,a.width(d).height(e)}function u(a){return{x:a.x*T,y:a.y*U,x2:a.x2*T,y2:a.y2*U,w:a.w*T,h:a.h*U}}function v(a){var b=_.getFixed();b.w>d.minSelect[0]&&b.h>d.minSelect[1]?(bb.enableHandles(),bb.done()):bb.release(),bc.setCursor(d.allowSelect?"crosshair":"default")}function w(a){if(d.disabled)return!1;if(!d.allowSelect)return!1;W=!0,e=l(D),bb.disableHandles(),bc.setCursor("crosshair");var b=m(a);return _.setPressed(b),bb.update(),bc.activateHandlers(x,v,a.type.substring
(0,5)==="touch"),bd.watchKeys(),a.stopPropagation(),a.preventDefault(),!1}function x(a){_.setCurrent(a),bb.update()}function y(){var b=a("<div></div>").addClass(j("tracker"));return g&&b.css({opacity:0,backgroundColor:"white"}),b}function be(a){G.removeClass().addClass(j("holder")).addClass(a)}function bf(a,b){function t(){window.setTimeout(u,l)}var c=a[0]/T,e=a[1]/U,f=a[2]/T,g=a[3]/U;if(X)return;var h=_.flipCoords(c,e,f,g),i=_.getFixed(),j=[i.x,i.y,i.x2,i.y2],k=j,l=d.animationDelay,m=h[0]-j[0],n=h[1]-j[1],o=h[2]-j[2],p=h[3]-j[3],q=0,r=d.swingSpeed;c=k[0],e=k[1],f=k[2],g=k[3],bb.animMode(!0);var s,u=function(){return function(){q+=(100-q)/r,k[0]=Math.round(c+q/100*m),k[1]=Math.round(e+q/100*n),k[2]=Math.round(f+q/100*o),k[3]=Math.round(g+q/100*p),q>=99.8&&(q=100),q<100?(bh(k),t()):(bb.done(),bb.animMode(!1),typeof b=="function"&&b.call(bs))}}();t()}function bg(a){bh([a[0]/T,a[1]/U,a[2]/T,a[3]/U]),d.onSelect.call(bs,u(_.getFixed())),bb.enableHandles()}function bh(a){_.setPressed([a[0],a[1]]),_.setCurrent([a[2],
a[3]]),bb.update()}function bi(){return u(_.getFixed())}function bj(){return _.getFixed()}function bk(a){n(a),br()}function bl(){d.disabled=!0,bb.disableHandles(),bb.setCursor("default"),bc.setCursor("default")}function bm(){d.disabled=!1,br()}function bn(){bb.done(),bc.activateHandlers(null,null)}function bo(){G.remove(),A.show(),A.css("visibility","visible"),a(b).removeData("Jcrop")}function bp(a,b){bb.release(),bl();var c=new Image;c.onload=function(){var e=c.width,f=c.height,g=d.boxWidth,h=d.boxHeight;D.width(e).height(f),D.attr("src",a),H.attr("src",a),t(D,g,h),E=D.width(),F=D.height(),H.width(E).height(F),M.width(E+L*2).height(F+L*2),G.width(E).height(F),ba.resize(E,F),bm(),typeof b=="function"&&b.call(bs)},c.src=a}function bq(a,b,c){var e=b||d.bgColor;d.bgFade&&k()&&d.fadeTime&&!c?a.animate({backgroundColor:e},{queue:!1,duration:d.fadeTime}):a.css("backgroundColor",e)}function br(a){d.allowResize?a?bb.enableOnly():bb.enableHandles():bb.disableHandles(),bc.setCursor(d.allowSelect?"crosshair":"default"),bb
.setCursor(d.allowMove?"move":"default"),d.hasOwnProperty("trueSize")&&(T=d.trueSize[0]/E,U=d.trueSize[1]/F),d.hasOwnProperty("setSelect")&&(bg(d.setSelect),bb.done(),delete d.setSelect),ba.refresh(),d.bgColor!=N&&(bq(d.shade?ba.getShades():G,d.shade?d.shadeColor||d.bgColor:d.bgColor),N=d.bgColor),O!=d.bgOpacity&&(O=d.bgOpacity,d.shade?ba.refresh():bb.setBgOpacity(O)),P=d.maxSize[0]||0,Q=d.maxSize[1]||0,R=d.minSize[0]||0,S=d.minSize[1]||0,d.hasOwnProperty("outerImage")&&(D.attr("src",d.outerImage),delete d.outerImage),bb.refresh()}var d=a.extend({},a.Jcrop.defaults),e,f=navigator.userAgent.toLowerCase(),g=/msie/.test(f),h=/msie [1-6]\./.test(f);typeof b!="object"&&(b=a(b)[0]),typeof c!="object"&&(c={}),n(c);var z={border:"none",visibility:"visible",margin:0,padding:0,position:"absolute",top:0,left:0},A=a(b),B=!0;if(b.tagName=="IMG"){if(A[0].width!=0&&A[0].height!=0)A.width(A[0].width),A.height(A[0].height);else{var C=new Image;C.src=A[0].src,A.width(C.width),A.height(C.height)}var D=A.clone().removeAttr("id").
css(z).show();D.width(A.width()),D.height(A.height()),A.after(D).hide()}else D=A.css(z).show(),B=!1,d.shade===null&&(d.shade=!0);t(D,d.boxWidth,d.boxHeight);var E=D.width(),F=D.height(),G=a("<div />").width(E).height(F).addClass(j("holder")).css({position:"relative",backgroundColor:d.bgColor}).insertAfter(A).append(D);d.addClass&&G.addClass(d.addClass);var H=a("<div />"),I=a("<div />").width("100%").height("100%").css({zIndex:310,position:"absolute",overflow:"hidden"}),J=a("<div />").width("100%").height("100%").css("zIndex",320),K=a("<div />").css({position:"absolute",zIndex:600}).dblclick(function(){var a=_.getFixed();d.onDblClick.call(bs,a)}).insertBefore(D).append(I,J);B&&(H=a("<img />").attr("src",D.attr("src")).css(z).width(E).height(F),I.append(H)),h&&K.css({overflowY:"hidden"});var L=d.boundary,M=y().width(E+L*2).height(F+L*2).css({position:"absolute",top:i(-L),left:i(-L),zIndex:290}).mousedown(w),N=d.bgColor,O=d.bgOpacity,P,Q,R,S,T,U,V=!0,W,X,Y;e=l(D);var Z=function(){function a(){var a={},b=["touchstart"
,"touchmove","touchend"],c=document.createElement("div"),d;try{for(d=0;d<b.length;d++){var e=b[d];e="on"+e;var f=e in c;f||(c.setAttribute(e,"return;"),f=typeof c[e]=="function"),a[b[d]]=f}return a.touchstart&&a.touchend&&a.touchmove}catch(g){return!1}}function b(){return d.touchSupport===!0||d.touchSupport===!1?d.touchSupport:a()}return{createDragger:function(a){return function(b){return d.disabled?!1:a==="move"&&!d.allowMove?!1:(e=l(D),W=!0,o(a,m(Z.cfilter(b)),!0),b.stopPropagation(),b.preventDefault(),!1)}},newSelection:function(a){return w(Z.cfilter(a))},cfilter:function(a){return a.pageX=a.originalEvent.changedTouches[0].pageX,a.pageY=a.originalEvent.changedTouches[0].pageY,a},isSupported:a,support:b()}}(),_=function(){function h(d){d=n(d),c=a=d[0],e=b=d[1]}function i(a){a=n(a),f=a[0]-c,g=a[1]-e,c=a[0],e=a[1]}function j(){return[f,g]}function k(d){var f=d[0],g=d[1];0>a+f&&(f-=f+a),0>b+g&&(g-=g+b),F<e+g&&(g+=F-(e+g)),E<c+f&&(f+=E-(c+f)),a+=f,c+=f,b+=g,e+=g}function l(a){var b=m();switch(a){case"ne":return[
b.x2,b.y];case"nw":return[b.x,b.y];case"se":return[b.x2,b.y2];case"sw":return[b.x,b.y2]}}function m(){if(!d.aspectRatio)return p();var f=d.aspectRatio,g=d.minSize[0]/T,h=d.maxSize[0]/T,i=d.maxSize[1]/U,j=c-a,k=e-b,l=Math.abs(j),m=Math.abs(k),n=l/m,r,s,t,u;return h===0&&(h=E*10),i===0&&(i=F*10),n<f?(s=e,t=m*f,r=j<0?a-t:t+a,r<0?(r=0,u=Math.abs((r-a)/f),s=k<0?b-u:u+b):r>E&&(r=E,u=Math.abs((r-a)/f),s=k<0?b-u:u+b)):(r=c,u=l/f,s=k<0?b-u:b+u,s<0?(s=0,t=Math.abs((s-b)*f),r=j<0?a-t:t+a):s>F&&(s=F,t=Math.abs(s-b)*f,r=j<0?a-t:t+a)),r>a?(r-a<g?r=a+g:r-a>h&&(r=a+h),s>b?s=b+(r-a)/f:s=b-(r-a)/f):r<a&&(a-r<g?r=a-g:a-r>h&&(r=a-h),s>b?s=b+(a-r)/f:s=b-(a-r)/f),r<0?(a-=r,r=0):r>E&&(a-=r-E,r=E),s<0?(b-=s,s=0):s>F&&(b-=s-F,s=F),q(o(a,b,r,s))}function n(a){return a[0]<0&&(a[0]=0),a[1]<0&&(a[1]=0),a[0]>E&&(a[0]=E),a[1]>F&&(a[1]=F),[Math.round(a[0]),Math.round(a[1])]}function o(a,b,c,d){var e=a,f=c,g=b,h=d;return c<a&&(e=c,f=a),d<b&&(g=d,h=b),[e,g,f,h]}function p(){var d=c-a,f=e-b,g;return P&&Math.abs(d)>P&&(c=d>0?a+P:a-P),Q&&Math.abs
(f)>Q&&(e=f>0?b+Q:b-Q),S/U&&Math.abs(f)<S/U&&(e=f>0?b+S/U:b-S/U),R/T&&Math.abs(d)<R/T&&(c=d>0?a+R/T:a-R/T),a<0&&(c-=a,a-=a),b<0&&(e-=b,b-=b),c<0&&(a-=c,c-=c),e<0&&(b-=e,e-=e),c>E&&(g=c-E,a-=g,c-=g),e>F&&(g=e-F,b-=g,e-=g),a>E&&(g=a-F,e-=g,b-=g),b>F&&(g=b-F,e-=g,b-=g),q(o(a,b,c,e))}function q(a){return{x:a[0],y:a[1],x2:a[2],y2:a[3],w:a[2]-a[0],h:a[3]-a[1]}}var a=0,b=0,c=0,e=0,f,g;return{flipCoords:o,setPressed:h,setCurrent:i,getOffset:j,moveOffset:k,getCorner:l,getFixed:m}}(),ba=function(){function f(a,b){e.left.css({height:i(b)}),e.right.css({height:i(b)})}function g(){return h(_.getFixed())}function h(a){e.top.css({left:i(a.x),width:i(a.w),height:i(a.y)}),e.bottom.css({top:i(a.y2),left:i(a.x),width:i(a.w),height:i(F-a.y2)}),e.right.css({left:i(a.x2),width:i(E-a.x2)}),e.left.css({width:i(a.x)})}function j(){return a("<div />").css({position:"absolute",backgroundColor:d.shadeColor||d.bgColor}).appendTo(c)}function k(){b||(b=!0,c.insertBefore(D),g(),bb.setBgOpacity(1,0,1),H.hide(),l(d.shadeColor||d.bgColor,1),bb.
isAwake()?n(d.bgOpacity,1):n(1,1))}function l(a,b){bq(p(),a,b)}function m(){b&&(c.remove(),H.show(),b=!1,bb.isAwake()?bb.setBgOpacity(d.bgOpacity,1,1):(bb.setBgOpacity(1,1,1),bb.disableHandles()),bq(G,0,1))}function n(a,e){b&&(d.bgFade&&!e?c.animate({opacity:1-a},{queue:!1,duration:d.fadeTime}):c.css({opacity:1-a}))}function o(){d.shade?k():m(),bb.isAwake()&&n(d.bgOpacity)}function p(){return c.children()}var b=!1,c=a("<div />").css({position:"absolute",zIndex:240,opacity:0}),e={top:j(),left:j().height(F),right:j().height(F),bottom:j()};return{update:g,updateRaw:h,getShades:p,setBgColor:l,enable:k,disable:m,resize:f,refresh:o,opacity:n}}(),bb=function(){function k(b){var c=a("<div />").css({position:"absolute",opacity:d.borderOpacity}).addClass(j(b));return I.append(c),c}function l(b,c){var d=a("<div />").mousedown(s(b)).css({cursor:b+"-resize",position:"absolute",zIndex:c}).addClass("ord-"+b);return Z.support&&d.bind("touchstart.jcrop",Z.createDragger(b)),J.append(d),d}function m(a){var b=d.handleSize,e=l(a,c++
).css({opacity:d.handleOpacity}).addClass(j("handle"));return b&&e.width(b).height(b),e}function n(a){return l(a,c++).addClass("jcrop-dragbar")}function o(a){var b;for(b=0;b<a.length;b++)g[a[b]]=n(a[b])}function p(a){var b,c;for(c=0;c<a.length;c++){switch(a[c]){case"n":b="hline";break;case"s":b="hline bottom";break;case"e":b="vline right";break;case"w":b="vline"}e[a[c]]=k(b)}}function q(a){var b;for(b=0;b<a.length;b++)f[a[b]]=m(a[b])}function r(a,b){d.shade||H.css({top:i(-b),left:i(-a)}),K.css({top:i(b),left:i(a)})}function t(a,b){K.width(Math.round(a)).height(Math.round(b))}function v(){var a=_.getFixed();_.setPressed([a.x,a.y]),_.setCurrent([a.x2,a.y2]),w()}function w(a){if(b)return x(a)}function x(a){var c=_.getFixed();t(c.w,c.h),r(c.x,c.y),d.shade&&ba.updateRaw(c),b||A(),a?d.onSelect.call(bs,u(c)):d.onChange.call(bs,u(c))}function z(a,c,e){if(!b&&!c)return;d.bgFade&&!e?D.animate({opacity:a},{queue:!1,duration:d.fadeTime}):D.css("opacity",a)}function A(){K.show(),d.shade?ba.opacity(O):z(O,!0),b=!0}function B
(){F(),K.hide(),d.shade?ba.opacity(1):z(1),b=!1,d.onRelease.call(bs)}function C(){h&&J.show()}function E(){h=!0;if(d.allowResize)return J.show(),!0}function F(){h=!1,J.hide()}function G(a){a?(X=!0,F()):(X=!1,E())}function L(){G(!1),v()}var b,c=370,e={},f={},g={},h=!1;d.dragEdges&&a.isArray(d.createDragbars)&&o(d.createDragbars),a.isArray(d.createHandles)&&q(d.createHandles),d.drawBorders&&a.isArray(d.createBorders)&&p(d.createBorders),a(document).bind("touchstart.jcrop-ios",function(b){a(b.currentTarget).hasClass("jcrop-tracker")&&b.stopPropagation()});var M=y().mousedown(s("move")).css({cursor:"move",position:"absolute",zIndex:360});return Z.support&&M.bind("touchstart.jcrop",Z.createDragger("move")),I.append(M),F(),{updateVisible:w,update:x,release:B,refresh:v,isAwake:function(){return b},setCursor:function(a){M.css("cursor",a)},enableHandles:E,enableOnly:function(){h=!0},showHandles:C,disableHandles:F,animMode:G,setBgOpacity:z,done:L}}(),bc=function(){function f(b){M.css({zIndex:450}),b?a(document).bind("touchmove.jcrop"
,k).bind("touchend.jcrop",l):e&&a(document).bind("mousemove.jcrop",h).bind("mouseup.jcrop",i)}function g(){M.css({zIndex:290}),a(document).unbind(".jcrop")}function h(a){return b(m(a)),!1}function i(a){return a.preventDefault(),a.stopPropagation(),W&&(W=!1,c(m(a)),bb.isAwake()&&d.onSelect.call(bs,u(_.getFixed())),g(),b=function(){},c=function(){}),!1}function j(a,d,e){return W=!0,b=a,c=d,f(e),!1}function k(a){return b(m(Z.cfilter(a))),!1}function l(a){return i(Z.cfilter(a))}function n(a){M.css("cursor",a)}var b=function(){},c=function(){},e=d.trackDocument;return e||M.mousemove(h).mouseup(i).mouseout(i),D.before(M),{activateHandlers:j,setCursor:n}}(),bd=function(){function e(){d.keySupport&&(b.show(),b.focus())}function f(a){b.hide()}function g(a,b,c){d.allowMove&&(_.moveOffset([b,c]),bb.updateVisible(!0)),a.preventDefault(),a.stopPropagation()}function i(a){if(a.ctrlKey||a.metaKey)return!0;Y=a.shiftKey?!0:!1;var b=Y?10:1;switch(a.keyCode){case 37:g(a,-b,0);break;case 39:g(a,b,0);break;case 38:g(a,0,-b);break;
case 40:g(a,0,b);break;case 27:d.allowSelect&&bb.release();break;case 9:return!0}return!1}var b=a('<input type="radio" />').css({position:"fixed",left:"-120px",width:"12px"}).addClass("jcrop-keymgr"),c=a("<div />").css({position:"absolute",overflow:"hidden"}).append(b);return d.keySupport&&(b.keydown(i).blur(f),h||!d.fixedSupport?(b.css({position:"absolute",left:"-20px"}),c.append(b).insertBefore(D)):b.insertBefore(D)),{watchKeys:e}}();Z.support&&M.bind("touchstart.jcrop",Z.newSelection),J.hide(),br(!0);var bs={setImage:bp,animateTo:bf,setSelect:bg,setOptions:bk,tellSelect:bi,tellScaled:bj,setClass:be,disable:bl,enable:bm,cancel:bn,release:bb.release,destroy:bo,focus:bd.watchKeys,getBounds:function(){return[E*T,F*U]},getWidgetSize:function(){return[E,F]},getScaleFactor:function(){return[T,U]},getOptions:function(){return d},ui:{holder:G,selection:K}};return g&&G.bind("selectstart",function(){return!1}),A.data("Jcrop",bs),bs},a.fn.Jcrop=function(b,c){var d;return this.each(function(){if(a(this).data("Jcrop")){if(
b==="api")return a(this).data("Jcrop");a(this).data("Jcrop").setOptions(b)}else this.tagName=="IMG"?a.Jcrop.Loader(this,function(){a(this).css({display:"block",visibility:"hidden"}),d=a.Jcrop(this,b),a.isFunction(c)&&c.call(d)}):(a(this).css({display:"block",visibility:"hidden"}),d=a.Jcrop(this,b),a.isFunction(c)&&c.call(d))}),this},a.Jcrop.Loader=function(b,c,d){function g(){f.complete?(e.unbind(".jcloader"),a.isFunction(c)&&c.call(f)):window.setTimeout(g,50)}var e=a(b),f=e[0];e.bind("load.jcloader",g).bind("error.jcloader",function(b){e.unbind(".jcloader"),a.isFunction(d)&&d.call(f)}),f.complete&&a.isFunction(c)&&(e.unbind(".jcloader"),c.call(f))},a.Jcrop.defaults={allowSelect:!0,allowMove:!0,allowResize:!0,trackDocument:!0,baseClass:"jcrop",addClass:null,bgColor:"black",bgOpacity:.6,bgFade:!1,borderOpacity:.4,handleOpacity:.5,handleSize:null,aspectRatio:0,keySupport:!0,createHandles:["n","s","e","w","nw","ne","se","sw"],createDragbars:["n","s","e","w"],createBorders:["n","s","e","w"],drawBorders:!0,dragEdges
:!0,fixedSupport:!0,touchSupport:null,shade:null,boxWidth:0,boxHeight:0,boundary:2,fadeTime:400,animationDelay:20,swingSpeed:3,minSelect:[0,0],maxSize:[0,0],minSize:[0,0],onChange:function(){},onSelect:function(){},onDblClick:function(){},onRelease:function(){}}})(jQuery);
/**
 * menu-aim is a jQuery plugin for dropdown menus that can differentiate
 * between a user trying hover over a dropdown item vs trying to navigate into
 * a submenu's contents.
 *
 * menu-aim assumes that you have are using a menu with submenus that expand
 * to the menu's right. It will fire events when the user's mouse enters a new
 * dropdown item *and* when that item is being intentionally hovered over.
 *
 * __________________________
 * | Monkeys  >|   Gorilla  |
 * | Gorillas >|   Content  |
 * | Chimps   >|   Here     |
 * |___________|____________|
 *
 * In the above example, "Gorillas" is selected and its submenu content is
 * being shown on the right. Imagine that the user's cursor is hovering over
 * "Gorillas." When they move their mouse into the "Gorilla Content" area, they
 * may briefly hover over "Chimps." This shouldn't close the "Gorilla Content"
 * area.
 *
 * This problem is normally solved using timeouts and delays. menu-aim tries to
 * solve this by detecting the direction of the user's mouse movement. This can
 * make for quicker transitions when navigating up and down the menu. The
 * experience is hopefully similar to amazon.com/'s "Shop by Department"
 * dropdown.
 *
 * Use like so:
 *
 *      $("#menu").menuAim({
 *          activate: $.noop,  // fired on row activation
 *          deactivate: $.noop  // fired on row deactivation
 *      });
 *
 *  ...to receive events when a menu's row has been purposefully (de)activated.
 *
 * The following options can be passed to menuAim. All functions execute with
 * the relevant row's HTML element as the execution context ('this'):
 *
 *      .menuAim({
 *          // Function to call when a row is purposefully activated. Use this
 *          // to show a submenu's content for the activated row.
 *          activate: function() {},
 *
 *          // Function to call when a row is deactivated.
 *          deactivate: function() {},
 *
 *          // Function to call when mouse enters a menu row. Entering a row
 *          // does not mean the row has been activated, as the user may be
 *          // mousing over to a submenu.
 *          enter: function() {},
 *
 *          // Function to call when mouse exits a menu row.
 *          exit: function() {},
 *
 *          // Selector for identifying which elements in the menu are rows
 *          // that can trigger the above events. Defaults to "> li".
 *          rowSelector: "> li",
 *
 *          // You may have some menu rows that aren't submenus and therefore
 *          // shouldn't ever need to "activate." If so, filter submenu rows w/
 *          // this selector. Defaults to "*" (all elements).
 *          submenuSelector: "*",
 *
 *          // Direction the submenu opens relative to the main menu. Can be
 *          // left, right, above, or below. Defaults to "right".
 *          submenuDirection: "right"
 *      });
 *
 * https://github.com/kamens/jQuery-menu-aim
*/
(function($) {

    $.fn.menuAim = function(opts) {
        // Initialize menu-aim for all elements in jQuery collection
        this.each(function() {
            init.call(this, opts);
        });

        return this;
    };

    function init(opts) {
        var $menu = $(this),
            activeRow = null,
            mouseLocs = [],
            lastDelayLoc = null,
            timeoutId = null,
            options = $.extend({
                rowSelector: "> li",
                submenuSelector: "*",
                submenuDirection: "right",
                tolerance: 75,  // bigger = more forgivey when entering submenu
                enter: $.noop,
                exit: $.noop,
                activate: $.noop,
                deactivate: $.noop,
                exitMenu: $.noop
            }, opts);

        var MOUSE_LOCS_TRACKED = 3,  // number of past mouse locations to track
            DELAY = 300;  // ms delay when user appears to be entering submenu

        /**
         * Keep track of the last few locations of the mouse.
         */
        var mousemoveDocument = function(e) {
                mouseLocs.push({x: e.pageX, y: e.pageY});

                if (mouseLocs.length > MOUSE_LOCS_TRACKED) {
                    mouseLocs.shift();
                }
            };

        /**
         * Cancel possible row activations when leaving the menu entirely
         */
        var mouseleaveMenu = function() {
                if (timeoutId) {
                    clearTimeout(timeoutId);
                }

                // If exitMenu is supplied and returns true, deactivate the
                // currently active row on menu exit.
                if (options.exitMenu(this)) {
                    if (activeRow) {
                        options.deactivate(activeRow);
                    }

                    activeRow = null;
                }
            };

        /**
         * Trigger a possible row activation whenever entering a new row.
         */
        var mouseenterRow = function() {
                if (timeoutId) {
                    // Cancel any previous activation delays
                    clearTimeout(timeoutId);
                }

                options.enter(this);
                possiblyActivate(this);
            },
            mouseleaveRow = function() {
                options.exit(this);
            };

        /*
         * Immediately activate a row if the user clicks on it.
         */
        var clickRow = function() {
                activate(this);
            };

        /**
         * Activate a menu row.
         */
        var activate = function(row) {
                if (row == activeRow) {
                    return;
                }

                if (activeRow) {
                    options.deactivate(activeRow);
                }

                options.activate(row);
                activeRow = row;
            };

        /**
         * Possibly activate a menu row. If mouse movement indicates that we
         * shouldn't activate yet because user may be trying to enter
         * a submenu's content, then delay and check again later.
         */
        var possiblyActivate = function(row) {
                var delay = activationDelay();

                if (delay) {
                    timeoutId = setTimeout(function() {
                        possiblyActivate(row);
                    }, delay);
                } else {
                    activate(row);
                }
            };

        /**
         * Return the amount of time that should be used as a delay before the
         * currently hovered row is activated.
         *
         * Returns 0 if the activation should happen immediately. Otherwise,
         * returns the number of milliseconds that should be delayed before
         * checking again to see if the row should be activated.
         */
        var activationDelay = function() {
                if (!activeRow || !$(activeRow).is(options.submenuSelector)) {
                    // If there is no other submenu row already active, then
                    // go ahead and activate immediately.
                    return 0;
                }

                var offset = $menu.offset(),
                    upperLeft = {
                        x: offset.left,
                        y: offset.top - options.tolerance
                    },
                    upperRight = {
                        x: offset.left + $menu.outerWidth(),
                        y: upperLeft.y
                    },
                    lowerLeft = {
                        x: offset.left,
                        y: offset.top + $menu.outerHeight() + options.tolerance
                    },
                    lowerRight = {
                        x: offset.left + $menu.outerWidth(),
                        y: lowerLeft.y
                    },
                    loc = mouseLocs[mouseLocs.length - 1],
                    prevLoc = mouseLocs[0];

                if (!loc) {
                    return 0;
                }

                if (!prevLoc) {
                    prevLoc = loc;
                }

                if (prevLoc.x < offset.left || prevLoc.x > lowerRight.x ||
                    prevLoc.y < offset.top || prevLoc.y > lowerRight.y) {
                    // If the previous mouse location was outside of the entire
                    // menu's bounds, immediately activate.
                    return 0;
                }

                if (lastDelayLoc &&
                        loc.x == lastDelayLoc.x && loc.y == lastDelayLoc.y) {
                    // If the mouse hasn't moved since the last time we checked
                    // for activation status, immediately activate.
                    return 0;
                }

                // Detect if the user is moving towards the currently activated
                // submenu.
                //
                // If the mouse is heading relatively clearly towards
                // the submenu's content, we should wait and give the user more
                // time before activating a new row. If the mouse is heading
                // elsewhere, we can immediately activate a new row.
                //
                // We detect this by calculating the slope formed between the
                // current mouse location and the upper/lower right points of
                // the menu. We do the same for the previous mouse location.
                // If the current mouse location's slopes are
                // increasing/decreasing appropriately compared to the
                // previous's, we know the user is moving toward the submenu.
                //
                // Note that since the y-axis increases as the cursor moves
                // down the screen, we are looking for the slope between the
                // cursor and the upper right corner to decrease over time, not
                // increase (somewhat counterintuitively).
                function slope(a, b) {
                    return (b.y - a.y) / (b.x - a.x);
                };

                var decreasingCorner = upperRight,
                    increasingCorner = lowerRight;

                // Our expectations for decreasing or increasing slope values
                // depends on which direction the submenu opens relative to the
                // main menu. By default, if the menu opens on the right, we
                // expect the slope between the cursor and the upper right
                // corner to decrease over time, as explained above. If the
                // submenu opens in a different direction, we change our slope
                // expectations.
                if (options.submenuDirection == "left") {
                    decreasingCorner = lowerLeft;
                    increasingCorner = upperLeft;
                } else if (options.submenuDirection == "below") {
                    decreasingCorner = lowerRight;
                    increasingCorner = lowerLeft;
                } else if (options.submenuDirection == "above") {
                    decreasingCorner = upperLeft;
                    increasingCorner = upperRight;
                }

                var decreasingSlope = slope(loc, decreasingCorner),
                    increasingSlope = slope(loc, increasingCorner),
                    prevDecreasingSlope = slope(prevLoc, decreasingCorner),
                    prevIncreasingSlope = slope(prevLoc, increasingCorner);

                if (decreasingSlope < prevDecreasingSlope &&
                        increasingSlope > prevIncreasingSlope) {
                    // Mouse is moving from previous location towards the
                    // currently activated submenu. Delay before activating a
                    // new menu row, because user may be moving into submenu.
                    lastDelayLoc = loc;
                    return DELAY;
                }

                lastDelayLoc = null;
                return 0;
            };

        /**
         * Hook up initial menu events
         */
        $menu
            .mouseleave(mouseleaveMenu)
            .find(options.rowSelector)
                .mouseenter(mouseenterRow)
                .mouseleave(mouseleaveRow)
                .click(clickRow);

        $(document).mousemove(mousemoveDocument);

    };
})(jQuery);


/*
 * jQuery Highlight plugin
 *
 * Based on highlight v3 by Johann Burkard
 * http://johannburkard.de/blog/programming/javascript/highlight-javascript-text-higlighting-jquery-plugin.html
 *
 * Code a little bit refactored and cleaned (in my humble opinion).
 * Most important changes:
 *  - has an option to highlight only entire words (wordsOnly - false by default),
 *  - has an option to be case sensitive (caseSensitive - false by default)
 *  - highlight element tag and class names can be specified in options
 *
 * Usage:
 *   // wrap every occurrance of text 'lorem' in content
 *   // with <span class='highlight'> (default options)
 *   $('#content').highlight('lorem');
 *
 *   // search for and highlight more terms at once
 *   // so you can save some time on traversing DOM
 *   $('#content').highlight(['lorem', 'ipsum']);
 *   $('#content').highlight('lorem ipsum');
 *
 *   // search only for entire word 'lorem'
 *   $('#content').highlight('lorem', { wordsOnly: true });
 *
 *   // don't ignore case during search of term 'lorem'
 *   $('#content').highlight('lorem', { caseSensitive: true });
 *
 *   // wrap every occurrance of term 'ipsum' in content
 *   // with <em class='important'>
 *   $('#content').highlight('ipsum', { element: 'em', className: 'important' });
 *
 *   // remove default highlight
 *   $('#content').unhighlight();
 *
 *   // remove custom highlight
 *   $('#content').unhighlight({ element: 'em', className: 'important' });
 *
 *
 * Copyright (c) 2009 Bartek Szopka
 *
 * Licensed under MIT license.
 *
 */
(function (factory) {
    if (typeof define === 'function' && define.amd) {
        // AMD. Register as an anonymous module.
        define(['jquery'], factory);
    } else if (typeof exports === 'object') {
        // Node/CommonJS
        factory(require('jquery'));
    } else {
        // Browser globals
        factory(jQuery);
    }
}(function (jQuery) {
    jQuery.extend({
        highlight: function (node, re, nodeName, className) {
            if (node.nodeType === 3) {
                var match = node.data.match(re);
                if (match) {
                    var highlight = document.createElement(nodeName || 'span');
                    highlight.className = className || 'highlight';
                    var wordNode = node.splitText(match.index);
                    wordNode.splitText(match[0].length);
                    var wordClone = wordNode.cloneNode(true);
                    highlight.appendChild(wordClone);
                    wordNode.parentNode.replaceChild(highlight, wordNode);
                    return 1; //skip added node in parent
                }
            } else if ((node.nodeType === 1 && node.childNodes) && // only element nodes that have children
                    !/(script|style)/i.test(node.tagName) && // ignore script and style nodes
                    !(node.tagName === nodeName.toUpperCase() && node.className === className)) { // skip if already highlighted
                for (var i = 0; i < node.childNodes.length; i++) {
                    i += jQuery.highlight(node.childNodes[i], re, nodeName, className);
                }
            }
            return 0;
        }
    });

    jQuery.fn.unhighlight = function (options) {
        var settings = { className: 'highlight', element: 'span' };
        jQuery.extend(settings, options);

        return this.find(settings.element + "." + settings.className).each(function () {
            var parent = this.parentNode;
            parent.replaceChild(this.firstChild, this);
            parent.normalize();
        }).end();
    };

    jQuery.fn.highlight = function (words, options) {
        var settings = { className: 'highlight', element: 'span', caseSensitive: false, wordsOnly: false };
        jQuery.extend(settings, options);
        
        if (words.constructor === String) {
            words = [words];
        }
        words = jQuery.grep(words, function(word, i){
          return word != '';
        });
        words = jQuery.map(words, function(word, i) {
          return word.replace(/[-[\]{}()*+?.,\\^$|#\s]/g, "\\$&");
        });
        if (words.length == 0) { return this; };

        var flag = settings.caseSensitive ? "" : "i";
        var pattern = "(" + words.join("|") + ")";
        if (settings.wordsOnly) {
            pattern = "\\b" + pattern + "\\b";
        }
        var re = new RegExp(pattern, flag);
        
        return this.each(function () {
            jQuery.highlight(this, re, settings.element, settings.className);
        });
    };
}));

;(function () {
	'use strict';

	/**
	 * @preserve FastClick: polyfill to remove click delays on browsers with touch UIs.
	 *
	 * @codingstandard ftlabs-jsv2
	 * @copyright The Financial Times Limited [All Rights Reserved]
	 * @license MIT License (see LICENSE.txt)
	 */

	/*jslint browser:true, node:true*/
	/*global define, Event, Node*/


	/**
	 * Instantiate fast-clicking listeners on the specified layer.
	 *
	 * @constructor
	 * @param {Element} layer The layer to listen on
	 * @param {Object} [options={}] The options to override the defaults
	 */
	function FastClick(layer, options) {
		var oldOnClick;

		options = options || {};

		/**
		 * Whether a click is currently being tracked.
		 *
		 * @type boolean
		 */
		this.trackingClick = false;


		/**
		 * Timestamp for when click tracking started.
		 *
		 * @type number
		 */
		this.trackingClickStart = 0;


		/**
		 * The element being tracked for a click.
		 *
		 * @type EventTarget
		 */
		this.targetElement = null;


		/**
		 * X-coordinate of touch start event.
		 *
		 * @type number
		 */
		this.touchStartX = 0;


		/**
		 * Y-coordinate of touch start event.
		 *
		 * @type number
		 */
		this.touchStartY = 0;


		/**
		 * ID of the last touch, retrieved from Touch.identifier.
		 *
		 * @type number
		 */
		this.lastTouchIdentifier = 0;


		/**
		 * Touchmove boundary, beyond which a click will be cancelled.
		 *
		 * @type number
		 */
		this.touchBoundary = options.touchBoundary || 10;


		/**
		 * The FastClick layer.
		 *
		 * @type Element
		 */
		this.layer = layer;

		/**
		 * The minimum time between tap(touchstart and touchend) events
		 *
		 * @type number
		 */
		this.tapDelay = options.tapDelay || 200;

		/**
		 * The maximum time for a tap
		 *
		 * @type number
		 */
		this.tapTimeout = options.tapTimeout || 700;

		if (FastClick.notNeeded(layer)) {
			return;
		}

		// Some old versions of Android don't have Function.prototype.bind
		function bind(method, context) {
			return function() { return method.apply(context, arguments); };
		}


		var methods = ['onMouse', 'onClick', 'onTouchStart', 'onTouchMove', 'onTouchEnd', 'onTouchCancel'];
		var context = this;
		for (var i = 0, l = methods.length; i < l; i++) {
			context[methods[i]] = bind(context[methods[i]], context);
		}

		// Set up event handlers as required
		if (deviceIsAndroid) {
			layer.addEventListener('mouseover', this.onMouse, true);
			layer.addEventListener('mousedown', this.onMouse, true);
			layer.addEventListener('mouseup', this.onMouse, true);
		}

		layer.addEventListener('click', this.onClick, true);
		layer.addEventListener('touchstart', this.onTouchStart, false);
		layer.addEventListener('touchmove', this.onTouchMove, false);
		layer.addEventListener('touchend', this.onTouchEnd, false);
		layer.addEventListener('touchcancel', this.onTouchCancel, false);

		// Hack is required for browsers that don't support Event#stopImmediatePropagation (e.g. Android 2)
		// which is how FastClick normally stops click events bubbling to callbacks registered on the FastClick
		// layer when they are cancelled.
		if (!Event.prototype.stopImmediatePropagation) {
			layer.removeEventListener = function(type, callback, capture) {
				var rmv = Node.prototype.removeEventListener;
				if (type === 'click') {
					rmv.call(layer, type, callback.hijacked || callback, capture);
				} else {
					rmv.call(layer, type, callback, capture);
				}
			};

			layer.addEventListener = function(type, callback, capture) {
				var adv = Node.prototype.addEventListener;
				if (type === 'click') {
					adv.call(layer, type, callback.hijacked || (callback.hijacked = function(event) {
						if (!event.propagationStopped) {
							callback(event);
						}
					}), capture);
				} else {
					adv.call(layer, type, callback, capture);
				}
			};
		}

		// If a handler is already declared in the element's onclick attribute, it will be fired before
		// FastClick's onClick handler. Fix this by pulling out the user-defined handler function and
		// adding it as listener.
		if (typeof layer.onclick === 'function') {

			// Android browser on at least 3.2 requires a new reference to the function in layer.onclick
			// - the old one won't work if passed to addEventListener directly.
			oldOnClick = layer.onclick;
			layer.addEventListener('click', function(event) {
				oldOnClick(event);
			}, false);
			layer.onclick = null;
		}
	}

	/**
	* Windows Phone 8.1 fakes user agent string to look like Android and iPhone.
	*
	* @type boolean
	*/
	var deviceIsWindowsPhone = navigator.userAgent.indexOf("Windows Phone") >= 0;

	/**
	 * Android requires exceptions.
	 *
	 * @type boolean
	 */
	var deviceIsAndroid = navigator.userAgent.indexOf('Android') > 0 && !deviceIsWindowsPhone;


	/**
	 * iOS requires exceptions.
	 *
	 * @type boolean
	 */
	var deviceIsIOS = /iP(ad|hone|od)/.test(navigator.userAgent) && !deviceIsWindowsPhone;


	/**
	 * iOS 4 requires an exception for select elements.
	 *
	 * @type boolean
	 */
	var deviceIsIOS4 = deviceIsIOS && (/OS 4_\d(_\d)?/).test(navigator.userAgent);


	/**
	 * iOS 6.0-7.* requires the target element to be manually derived
	 *
	 * @type boolean
	 */
	var deviceIsIOSWithBadTarget = deviceIsIOS && (/OS [6-7]_\d/).test(navigator.userAgent);

	/**
	 * BlackBerry requires exceptions.
	 *
	 * @type boolean
	 */
	var deviceIsBlackBerry10 = navigator.userAgent.indexOf('BB10') > 0;

	/**
	 * Determine whether a given element requires a native click.
	 *
	 * @param {EventTarget|Element} target Target DOM element
	 * @returns {boolean} Returns true if the element needs a native click
	 */
	FastClick.prototype.needsClick = function(target) {
		switch (target.nodeName.toLowerCase()) {

		// Don't send a synthetic click to disabled inputs (issue #62)
		case 'button':
		case 'select':
		case 'textarea':
			if (target.disabled) {
				return true;
			}

			break;
		case 'input':

			// File inputs need real clicks on iOS 6 due to a browser bug (issue #68)
			if ((deviceIsIOS && target.type === 'file') || target.disabled) {
				return true;
			}

			break;
		case 'label':
		case 'iframe': // iOS8 homescreen apps can prevent events bubbling into frames
		case 'video':
			return true;
		}

		return (/\bneedsclick\b/).test(target.className);
	};


	/**
	 * Determine whether a given element requires a call to focus to simulate click into element.
	 *
	 * @param {EventTarget|Element} target Target DOM element
	 * @returns {boolean} Returns true if the element requires a call to focus to simulate native click.
	 */
	FastClick.prototype.needsFocus = function(target) {
		switch (target.nodeName.toLowerCase()) {
		case 'textarea':
			return true;
		case 'select':
			return !deviceIsAndroid;
		case 'input':
			switch (target.type) {
			case 'button':
			case 'checkbox':
			case 'file':
			case 'image':
			case 'radio':
			case 'submit':
				return false;
			}

			// No point in attempting to focus disabled inputs
			return !target.disabled && !target.readOnly;
		default:
			return (/\bneedsfocus\b/).test(target.className);
		}
	};


	/**
	 * Send a click event to the specified element.
	 *
	 * @param {EventTarget|Element} targetElement
	 * @param {Event} event
	 */
	FastClick.prototype.sendClick = function(targetElement, event) {
		var clickEvent, touch;

		// On some Android devices activeElement needs to be blurred otherwise the synthetic click will have no effect (#24)
		if (document.activeElement && document.activeElement !== targetElement) {
			document.activeElement.blur();
		}

		touch = event.changedTouches[0];

		// Synthesise a click event, with an extra attribute so it can be tracked
		clickEvent = document.createEvent('MouseEvents');
		clickEvent.initMouseEvent(this.determineEventType(targetElement), true, true, window, 1, touch.screenX, touch.screenY, touch.clientX, touch.clientY, false, false, false, false, 0, null);
		clickEvent.forwardedTouchEvent = true;
		targetElement.dispatchEvent(clickEvent);
	};

	FastClick.prototype.determineEventType = function(targetElement) {

		//Issue #159: Android Chrome Select Box does not open with a synthetic click event
		if (deviceIsAndroid && targetElement.tagName.toLowerCase() === 'select') {
			return 'mousedown';
		}

		return 'click';
	};


	/**
	 * @param {EventTarget|Element} targetElement
	 */
	FastClick.prototype.focus = function(targetElement) {
		var length;

		// Issue #160: on iOS 7, some input elements (e.g. date datetime month) throw a vague TypeError on setSelectionRange. These elements don't have an integer value for the selectionStart and selectionEnd properties, but unfortunately that can't be used for detection because accessing the properties also throws a TypeError. Just check the type instead. Filed as Apple bug #15122724.
		if (deviceIsIOS && targetElement.setSelectionRange && targetElement.type.indexOf('date') !== 0 && targetElement.type !== 'time' && targetElement.type !== 'month') {
			length = targetElement.value.length;
			targetElement.setSelectionRange(length, length);
		} else {
			targetElement.focus();
		}
	};


	/**
	 * Check whether the given target element is a child of a scrollable layer and if so, set a flag on it.
	 *
	 * @param {EventTarget|Element} targetElement
	 */
	FastClick.prototype.updateScrollParent = function(targetElement) {
		var scrollParent, parentElement;

		scrollParent = targetElement.fastClickScrollParent;

		// Attempt to discover whether the target element is contained within a scrollable layer. Re-check if the
		// target element was moved to another parent.
		if (!scrollParent || !scrollParent.contains(targetElement)) {
			parentElement = targetElement;
			do {
				if (parentElement.scrollHeight > parentElement.offsetHeight) {
					scrollParent = parentElement;
					targetElement.fastClickScrollParent = parentElement;
					break;
				}

				parentElement = parentElement.parentElement;
			} while (parentElement);
		}

		// Always update the scroll top tracker if possible.
		if (scrollParent) {
			scrollParent.fastClickLastScrollTop = scrollParent.scrollTop;
		}
	};


	/**
	 * @param {EventTarget} targetElement
	 * @returns {Element|EventTarget}
	 */
	FastClick.prototype.getTargetElementFromEventTarget = function(eventTarget) {

		// On some older browsers (notably Safari on iOS 4.1 - see issue #56) the event target may be a text node.
		if (eventTarget.nodeType === Node.TEXT_NODE) {
			return eventTarget.parentNode;
		}

		return eventTarget;
	};


	/**
	 * On touch start, record the position and scroll offset.
	 *
	 * @param {Event} event
	 * @returns {boolean}
	 */
	FastClick.prototype.onTouchStart = function(event) {
		var targetElement, touch, selection;

		// Ignore multiple touches, otherwise pinch-to-zoom is prevented if both fingers are on the FastClick element (issue #111).
		if (event.targetTouches.length > 1) {
			return true;
		}

		targetElement = this.getTargetElementFromEventTarget(event.target);
		touch = event.targetTouches[0];

		if (deviceIsIOS) {

			// Only trusted events will deselect text on iOS (issue #49)
			selection = window.getSelection();
			if (selection.rangeCount && !selection.isCollapsed) {
				return true;
			}

			if (!deviceIsIOS4) {

				// Weird things happen on iOS when an alert or confirm dialog is opened from a click event callback (issue #23):
				// when the user next taps anywhere else on the page, new touchstart and touchend events are dispatched
				// with the same identifier as the touch event that previously triggered the click that triggered the alert.
				// Sadly, there is an issue on iOS 4 that causes some normal touch events to have the same identifier as an
				// immediately preceeding touch event (issue #52), so this fix is unavailable on that platform.
				// Issue 120: touch.identifier is 0 when Chrome dev tools 'Emulate touch events' is set with an iOS device UA string,
				// which causes all touch events to be ignored. As this block only applies to iOS, and iOS identifiers are always long,
				// random integers, it's safe to to continue if the identifier is 0 here.
				if (touch.identifier && touch.identifier === this.lastTouchIdentifier) {
					event.preventDefault();
					return false;
				}

				this.lastTouchIdentifier = touch.identifier;

				// If the target element is a child of a scrollable layer (using -webkit-overflow-scrolling: touch) and:
				// 1) the user does a fling scroll on the scrollable layer
				// 2) the user stops the fling scroll with another tap
				// then the event.target of the last 'touchend' event will be the element that was under the user's finger
				// when the fling scroll was started, causing FastClick to send a click event to that layer - unless a check
				// is made to ensure that a parent layer was not scrolled before sending a synthetic click (issue #42).
				this.updateScrollParent(targetElement);
			}
		}

		this.trackingClick = true;
		this.trackingClickStart = event.timeStamp;
		this.targetElement = targetElement;

		this.touchStartX = touch.pageX;
		this.touchStartY = touch.pageY;

		// Prevent phantom clicks on fast double-tap (issue #36)
		if ((event.timeStamp - this.lastClickTime) < this.tapDelay) {
			event.preventDefault();
		}

		return true;
	};


	/**
	 * Based on a touchmove event object, check whether the touch has moved past a boundary since it started.
	 *
	 * @param {Event} event
	 * @returns {boolean}
	 */
	FastClick.prototype.touchHasMoved = function(event) {
		var touch = event.changedTouches[0], boundary = this.touchBoundary;

		if (Math.abs(touch.pageX - this.touchStartX) > boundary || Math.abs(touch.pageY - this.touchStartY) > boundary) {
			return true;
		}

		return false;
	};


	/**
	 * Update the last position.
	 *
	 * @param {Event} event
	 * @returns {boolean}
	 */
	FastClick.prototype.onTouchMove = function(event) {
		if (!this.trackingClick) {
			return true;
		}

		// If the touch has moved, cancel the click tracking
		if (this.targetElement !== this.getTargetElementFromEventTarget(event.target) || this.touchHasMoved(event)) {
			this.trackingClick = false;
			this.targetElement = null;
		}

		return true;
	};


	/**
	 * Attempt to find the labelled control for the given label element.
	 *
	 * @param {EventTarget|HTMLLabelElement} labelElement
	 * @returns {Element|null}
	 */
	FastClick.prototype.findControl = function(labelElement) {

		// Fast path for newer browsers supporting the HTML5 control attribute
		if (labelElement.control !== undefined) {
			return labelElement.control;
		}

		// All browsers under test that support touch events also support the HTML5 htmlFor attribute
		if (labelElement.htmlFor) {
			return document.getElementById(labelElement.htmlFor);
		}

		// If no for attribute exists, attempt to retrieve the first labellable descendant element
		// the list of which is defined here: http://www.w3.org/TR/html5/forms.html#category-label
		return labelElement.querySelector('button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea');
	};


	/**
	 * On touch end, determine whether to send a click event at once.
	 *
	 * @param {Event} event
	 * @returns {boolean}
	 */
	FastClick.prototype.onTouchEnd = function(event) {
		var forElement, trackingClickStart, targetTagName, scrollParent, touch, targetElement = this.targetElement;

		if (!this.trackingClick) {
			return true;
		}

		// Prevent phantom clicks on fast double-tap (issue #36)
		if ((event.timeStamp - this.lastClickTime) < this.tapDelay) {
			this.cancelNextClick = true;
			return true;
		}

		if ((event.timeStamp - this.trackingClickStart) > this.tapTimeout) {
			return true;
		}

		// Reset to prevent wrong click cancel on input (issue #156).
		this.cancelNextClick = false;

		this.lastClickTime = event.timeStamp;

		trackingClickStart = this.trackingClickStart;
		this.trackingClick = false;
		this.trackingClickStart = 0;

		// On some iOS devices, the targetElement supplied with the event is invalid if the layer
		// is performing a transition or scroll, and has to be re-detected manually. Note that
		// for this to function correctly, it must be called *after* the event target is checked!
		// See issue #57; also filed as rdar://13048589 .
		if (deviceIsIOSWithBadTarget) {
			touch = event.changedTouches[0];

			// In certain cases arguments of elementFromPoint can be negative, so prevent setting targetElement to null
			targetElement = document.elementFromPoint(touch.pageX - window.pageXOffset, touch.pageY - window.pageYOffset) || targetElement;
			targetElement.fastClickScrollParent = this.targetElement.fastClickScrollParent;
		}

		targetTagName = targetElement.tagName.toLowerCase();
		if (targetTagName === 'label') {
			forElement = this.findControl(targetElement);
			if (forElement) {
				this.focus(targetElement);
				if (deviceIsAndroid) {
					return false;
				}

				targetElement = forElement;
			}
		} else if (this.needsFocus(targetElement)) {

			// Case 1: If the touch started a while ago (best guess is 100ms based on tests for issue #36) then focus will be triggered anyway. Return early and unset the target element reference so that the subsequent click will be allowed through.
			// Case 2: Without this exception for input elements tapped when the document is contained in an iframe, then any inputted text won't be visible even though the value attribute is updated as the user types (issue #37).
			if ((event.timeStamp - trackingClickStart) > 100 || (deviceIsIOS && window.top !== window && targetTagName === 'input')) {
				this.targetElement = null;
				return false;
			}

			this.focus(targetElement);
			this.sendClick(targetElement, event);

			// Select elements need the event to go through on iOS 4, otherwise the selector menu won't open.
			// Also this breaks opening selects when VoiceOver is active on iOS6, iOS7 (and possibly others)
			if (!deviceIsIOS || targetTagName !== 'select') {
				this.targetElement = null;
				event.preventDefault();
			}

			return false;
		}

		if (deviceIsIOS && !deviceIsIOS4) {

			// Don't send a synthetic click event if the target element is contained within a parent layer that was scrolled
			// and this tap is being used to stop the scrolling (usually initiated by a fling - issue #42).
			scrollParent = targetElement.fastClickScrollParent;
			if (scrollParent && scrollParent.fastClickLastScrollTop !== scrollParent.scrollTop) {
				return true;
			}
		}

		// Prevent the actual click from going though - unless the target node is marked as requiring
		// real clicks or if it is in the whitelist in which case only non-programmatic clicks are permitted.
		if (!this.needsClick(targetElement)) {
			event.preventDefault();
			this.sendClick(targetElement, event);
		}

		return false;
	};


	/**
	 * On touch cancel, stop tracking the click.
	 *
	 * @returns {void}
	 */
	FastClick.prototype.onTouchCancel = function() {
		this.trackingClick = false;
		this.targetElement = null;
	};


	/**
	 * Determine mouse events which should be permitted.
	 *
	 * @param {Event} event
	 * @returns {boolean}
	 */
	FastClick.prototype.onMouse = function(event) {

		// If a target element was never set (because a touch event was never fired) allow the event
		if (!this.targetElement) {
			return true;
		}

		if (event.forwardedTouchEvent) {
			return true;
		}

		// Programmatically generated events targeting a specific element should be permitted
		if (!event.cancelable) {
			return true;
		}

		// Derive and check the target element to see whether the mouse event needs to be permitted;
		// unless explicitly enabled, prevent non-touch click events from triggering actions,
		// to prevent ghost/doubleclicks.
		if (!this.needsClick(this.targetElement) || this.cancelNextClick) {

			// Prevent any user-added listeners declared on FastClick element from being fired.
			if (event.stopImmediatePropagation) {
				event.stopImmediatePropagation();
			} else {

				// Part of the hack for browsers that don't support Event#stopImmediatePropagation (e.g. Android 2)
				event.propagationStopped = true;
			}

			// Cancel the event
			event.stopPropagation();
			event.preventDefault();

			return false;
		}

		// If the mouse event is permitted, return true for the action to go through.
		return true;
	};


	/**
	 * On actual clicks, determine whether this is a touch-generated click, a click action occurring
	 * naturally after a delay after a touch (which needs to be cancelled to avoid duplication), or
	 * an actual click which should be permitted.
	 *
	 * @param {Event} event
	 * @returns {boolean}
	 */
	FastClick.prototype.onClick = function(event) {
		var permitted;

		// It's possible for another FastClick-like library delivered with third-party code to fire a click event before FastClick does (issue #44). In that case, set the click-tracking flag back to false and return early. This will cause onTouchEnd to return early.
		if (this.trackingClick) {
			this.targetElement = null;
			this.trackingClick = false;
			return true;
		}

		// Very odd behaviour on iOS (issue #18): if a submit element is present inside a form and the user hits enter in the iOS simulator or clicks the Go button on the pop-up OS keyboard the a kind of 'fake' click event will be triggered with the submit-type input element as the target.
		if (event.target.type === 'submit' && event.detail === 0) {
			return true;
		}

		permitted = this.onMouse(event);

		// Only unset targetElement if the click is not permitted. This will ensure that the check for !targetElement in onMouse fails and the browser's click doesn't go through.
		if (!permitted) {
			this.targetElement = null;
		}

		// If clicks are permitted, return true for the action to go through.
		return permitted;
	};


	/**
	 * Remove all FastClick's event listeners.
	 *
	 * @returns {void}
	 */
	FastClick.prototype.destroy = function() {
		var layer = this.layer;

		if (deviceIsAndroid) {
			layer.removeEventListener('mouseover', this.onMouse, true);
			layer.removeEventListener('mousedown', this.onMouse, true);
			layer.removeEventListener('mouseup', this.onMouse, true);
		}

		layer.removeEventListener('click', this.onClick, true);
		layer.removeEventListener('touchstart', this.onTouchStart, false);
		layer.removeEventListener('touchmove', this.onTouchMove, false);
		layer.removeEventListener('touchend', this.onTouchEnd, false);
		layer.removeEventListener('touchcancel', this.onTouchCancel, false);
	};


	/**
	 * Check whether FastClick is needed.
	 *
	 * @param {Element} layer The layer to listen on
	 */
	FastClick.notNeeded = function(layer) {
		var metaViewport;
		var chromeVersion;
		var blackberryVersion;
		var firefoxVersion;

		// Devices that don't support touch don't need FastClick
		if (typeof window.ontouchstart === 'undefined') {
			return true;
		}

		// Chrome version - zero for other browsers
		chromeVersion = +(/Chrome\/([0-9]+)/.exec(navigator.userAgent) || [,0])[1];

		if (chromeVersion) {

			if (deviceIsAndroid) {
				metaViewport = document.querySelector('meta[name=viewport]');

				if (metaViewport) {
					// Chrome on Android with user-scalable="no" doesn't need FastClick (issue #89)
					if (metaViewport.content.indexOf('user-scalable=no') !== -1) {
						return true;
					}
					// Chrome 32 and above with width=device-width or less don't need FastClick
					if (chromeVersion > 31 && document.documentElement.scrollWidth <= window.outerWidth) {
						return true;
					}
				}

			// Chrome desktop doesn't need FastClick (issue #15)
			} else {
				return true;
			}
		}

		if (deviceIsBlackBerry10) {
			blackberryVersion = navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/);

			// BlackBerry 10.3+ does not require Fastclick library.
			// https://github.com/ftlabs/fastclick/issues/251
			if (blackberryVersion[1] >= 10 && blackberryVersion[2] >= 3) {
				metaViewport = document.querySelector('meta[name=viewport]');

				if (metaViewport) {
					// user-scalable=no eliminates click delay.
					if (metaViewport.content.indexOf('user-scalable=no') !== -1) {
						return true;
					}
					// width=device-width (or less than device-width) eliminates click delay.
					if (document.documentElement.scrollWidth <= window.outerWidth) {
						return true;
					}
				}
			}
		}

		// IE10 with -ms-touch-action: none or manipulation, which disables double-tap-to-zoom (issue #97)
		if (layer.style.msTouchAction === 'none' || layer.style.touchAction === 'manipulation') {
			return true;
		}

		// Firefox version - zero for other browsers
		firefoxVersion = +(/Firefox\/([0-9]+)/.exec(navigator.userAgent) || [,0])[1];

		if (firefoxVersion >= 27) {
			// Firefox 27+ does not have tap delay if the content is not zoomable - https://bugzilla.mozilla.org/show_bug.cgi?id=922896

			metaViewport = document.querySelector('meta[name=viewport]');
			if (metaViewport && (metaViewport.content.indexOf('user-scalable=no') !== -1 || document.documentElement.scrollWidth <= window.outerWidth)) {
				return true;
			}
		}

		// IE11: prefixed -ms-touch-action is no longer supported and it's recomended to use non-prefixed version
		// http://msdn.microsoft.com/en-us/library/windows/apps/Hh767313.aspx
		if (layer.style.touchAction === 'none' || layer.style.touchAction === 'manipulation') {
			return true;
		}

		return false;
	};


	/**
	 * Factory method for creating a FastClick object
	 *
	 * @param {Element} layer The layer to listen on
	 * @param {Object} [options={}] The options to override the defaults
	 */
	FastClick.attach = function(layer, options) {
		return new FastClick(layer, options);
	};


	if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {

		// AMD. Register as an anonymous module.
		define(function() {
			return FastClick;
		});
	} else if (typeof module !== 'undefined' && module.exports) {
		module.exports = FastClick.attach;
		module.exports.FastClick = FastClick;
	} else {
		window.FastClick = FastClick;
	}
}());

/*! overthrow - An overflow:auto polyfill for responsive design. - v0.7.0 - 2013-11-04
* Copyright (c) 2013 Scott Jehl, Filament Group, Inc.; Licensed MIT */
/*! Overthrow. An overflow:auto polyfill for responsive design. (c) 2012: Scott Jehl, Filament Group, Inc. http://filamentgroup.github.com/Overthrow/license.txt */
(function( w, undefined ){
	
	var doc = w.document,
		docElem = doc.documentElement,
		enabledClassName = "overthrow-enabled",

		// Touch events are used in the polyfill, and thus are a prerequisite
		canBeFilledWithPoly = "ontouchmove" in doc,
		
		// The following attempts to determine whether the browser has native overflow support
		// so we can enable it but not polyfill
		nativeOverflow = 
			// Features-first. iOS5 overflow scrolling property check - no UA needed here. thanks Apple :)
			"WebkitOverflowScrolling" in docElem.style ||
			// Test the windows scrolling property as well
			"msOverflowStyle" in docElem.style ||
			// Touch events aren't supported and screen width is greater than X
			// ...basically, this is a loose "desktop browser" check. 
			// It may wrongly opt-in very large tablets with no touch support.
			( !canBeFilledWithPoly && w.screen.width > 800 ) ||
			// Hang on to your hats.
			// Whitelist some popular, overflow-supporting mobile browsers for now and the future
			// These browsers are known to get overlow support right, but give us no way of detecting it.
			(function(){
				var ua = w.navigator.userAgent,
					// Webkit crosses platforms, and the browsers on our list run at least version 534
					webkit = ua.match( /AppleWebKit\/([0-9]+)/ ),
					wkversion = webkit && webkit[1],
					wkLte534 = webkit && wkversion >= 534;
					
				return (
					/* Android 3+ with webkit gte 534
					~: Mozilla/5.0 (Linux; U; Android 3.0; en-us; Xoom Build/HRI39) AppleWebKit/534.13 (KHTML, like Gecko) Version/4.0 Safari/534.13 */
					ua.match( /Android ([0-9]+)/ ) && RegExp.$1 >= 3 && wkLte534 ||
					/* Blackberry 7+ with webkit gte 534
					~: Mozilla/5.0 (BlackBerry; U; BlackBerry 9900; en-US) AppleWebKit/534.11+ (KHTML, like Gecko) Version/7.0.0 Mobile Safari/534.11+ */
					ua.match( / Version\/([0-9]+)/ ) && RegExp.$1 >= 0 && w.blackberry && wkLte534 ||
					/* Blackberry Playbook with webkit gte 534
					~: Mozilla/5.0 (PlayBook; U; RIM Tablet OS 1.0.0; en-US) AppleWebKit/534.8+ (KHTML, like Gecko) Version/0.0.1 Safari/534.8+ */   
					ua.indexOf( "PlayBook" ) > -1 && wkLte534 && !ua.indexOf( "Android 2" ) === -1 ||
					/* Firefox Mobile (Fennec) 4 and up
					~: Mozilla/5.0 (Mobile; rv:15.0) Gecko/15.0 Firefox/15.0 */
					ua.match(/Firefox\/([0-9]+)/) && RegExp.$1 >= 4 ||
					/* WebOS 3 and up (TouchPad too)
					~: Mozilla/5.0 (hp-tablet; Linux; hpwOS/3.0.0; U; en-US) AppleWebKit/534.6 (KHTML, like Gecko) wOSBrowser/233.48 Safari/534.6 TouchPad/1.0 */
					ua.match( /wOSBrowser\/([0-9]+)/ ) && RegExp.$1 >= 233 && wkLte534 ||
					/* Nokia Browser N8
					~: Mozilla/5.0 (Symbian/3; Series60/5.2 NokiaN8-00/012.002; Profile/MIDP-2.1 Configuration/CLDC-1.1 ) AppleWebKit/533.4 (KHTML, like Gecko) NokiaBrowser/7.3.0 Mobile Safari/533.4 3gpp-gba 
					~: Note: the N9 doesn't have native overflow with one-finger touch. wtf */
					ua.match( /NokiaBrowser\/([0-9\.]+)/ ) && parseFloat(RegExp.$1) === 7.3 && webkit && wkversion >= 533
				);
			})();

	// Expose overthrow API
	w.overthrow = {};

	w.overthrow.enabledClassName = enabledClassName;

	w.overthrow.addClass = function(){
		if( docElem.className.indexOf( w.overthrow.enabledClassName ) === -1 ){
			docElem.className += " " + w.overthrow.enabledClassName;
		}
	};

	w.overthrow.removeClass = function(){
		docElem.className = docElem.className.replace( w.overthrow.enabledClassName, "" );
	};

	// Enable and potentially polyfill overflow
	w.overthrow.set = function(){
			
		// If nativeOverflow or at least the element canBeFilledWithPoly, add a class to cue CSS that assumes overflow scrolling will work (setting height on elements and such)
		if( nativeOverflow ){
			w.overthrow.addClass();
		}

	};

	// expose polyfillable 
	w.overthrow.canBeFilledWithPoly = canBeFilledWithPoly;

	// Destroy everything later. If you want to.
	w.overthrow.forget = function(){

		w.overthrow.removeClass();
		
	};
		
	// Expose overthrow API
	w.overthrow.support = nativeOverflow ? "native" : "none";
		
})( this );

/*! Overthrow. An overflow:auto polyfill for responsive design. (c) 2012: Scott Jehl, Filament Group, Inc. http://filamentgroup.github.com/Overthrow/license.txt */
(function( w, o, undefined ){

	// o is overthrow reference from overthrow-polyfill.js
	if( o === undefined ){
		return;
	}

	// Easing can use any of Robert Penner's equations (http://www.robertpenner.com/easing_terms_of_use.html). By default, overthrow includes ease-out-cubic
	// arguments: t = current iteration, b = initial value, c = end value, d = total iterations
	// use w.overthrow.easing to provide a custom function externally, or pass an easing function as a callback to the toss method
	o.easing = function (t, b, c, d) {
		return c*((t=t/d-1)*t*t + 1) + b;
	};

	// tossing property is true during a programatic scroll
	o.tossing = false;

	// Keeper of intervals
	var timeKeeper;

	/* toss scrolls and element with easing

	// elem is the element to scroll
	// options hash:
		* left is the desired horizontal scroll. Default is "+0". For relative distances, pass a string with "+" or "-" in front.
		* top is the desired vertical scroll. Default is "+0". For relative distances, pass a string with "+" or "-" in front.
		* duration is the number of milliseconds the throw will take. Default is 100.
		* easing is an optional custom easing function. Default is w.overthrow.easing. Must follow the easing function signature

	*/
	o.toss = function( elem, options ){
		o.intercept();
		var i = 0,
			sLeft = elem.scrollLeft,
			sTop = elem.scrollTop,
			// Toss defaults
			op = {
				top: "+0",
				left: "+0",
				duration: 50,
				easing: o.easing,
				finished: function() {}
			},
			endLeft, endTop, finished = false;

		// Mixin based on predefined defaults
		if( options ){
			for( var j in op ){
				if( options[ j ] !== undefined ){
					op[ j ] = options[ j ];
				}
			}
		}

		// Convert relative values to ints
		// First the left val
		if( typeof op.left === "string" ){
			op.left = parseFloat( op.left );
			endLeft = op.left + sLeft;
		}
		else {
			endLeft = op.left;
			op.left = op.left - sLeft;
		}
		// Then the top val
		if( typeof op.top === "string" ){

			op.top = parseFloat( op.top );
			endTop = op.top + sTop;
		}
		else {
			endTop = op.top;
			op.top = op.top - sTop;
		}

		o.tossing = true;
		timeKeeper = setInterval(function(){
			if( i++ < op.duration ){
				elem.scrollLeft = op.easing( i, sLeft, op.left, op.duration );
				elem.scrollTop = op.easing( i, sTop, op.top, op.duration );
			}
			else{
				if( endLeft !== elem.scrollLeft ){
					elem.scrollLeft = endLeft;
				} else {
					// if the end of the vertical scrolling has taken place
					// we know that we're done here call the callback
					// otherwise signal that horizontal scrolling is complete
					if( finished ) {
						op.finished();
					}
					finished = true;
				}

				if( endTop !== elem.scrollTop ){
					elem.scrollTop = endTop;
				} else {
					// if the end of the horizontal scrolling has taken place
					// we know that we're done here call the callback
					if( finished ) {
						op.finished();
					}
					finished = true;
				}

				o.intercept();
			}
		}, 1 );

		// Return the values, post-mixin, with end values specified
		return { top: endTop, left: endLeft, duration: o.duration, easing: o.easing };
	};

	// Intercept any throw in progress
	o.intercept = function(){
		clearInterval( timeKeeper );
		o.tossing = false;
	};

})( this, this.overthrow );

/*! Overthrow. An overflow:auto polyfill for responsive design. (c) 2012: Scott Jehl, Filament Group, Inc. http://filamentgroup.github.com/Overthrow/license.txt */
(function( w, o, undefined ){

	// o is overthrow reference from overthrow-polyfill.js
	if( o === undefined ){
		return;
	}

	o.scrollIndicatorClassName = "overthrow";
	
	var doc = w.document,
		docElem = doc.documentElement,
		// o api
		nativeOverflow = o.support === "native",
		canBeFilledWithPoly = o.canBeFilledWithPoly,
		configure = o.configure,
		set = o.set,
		forget = o.forget,
		scrollIndicatorClassName = o.scrollIndicatorClassName;

	// find closest overthrow (elem or a parent)
	o.closest = function( target, ascend ){
		return !ascend && target.className && target.className.indexOf( scrollIndicatorClassName ) > -1 && target || o.closest( target.parentNode );
	};
		
	// polyfill overflow
	var enabled = false;
	o.set = function(){
			
		set();

		// If nativeOverflow or it doesn't look like the browser canBeFilledWithPoly, our job is done here. Exit viewport left.
		if( enabled || nativeOverflow || !canBeFilledWithPoly ){
			return;
		}

		w.overthrow.addClass();

		enabled = true;

		o.support = "polyfilled";

		o.forget = function(){
			forget();
			enabled = false;
			// Remove touch binding (check for method support since this part isn't qualified by touch support like the rest)
			if( doc.removeEventListener ){
				doc.removeEventListener( "touchstart", start, false );
			}
		};

		// Fill 'er up!
		// From here down, all logic is associated with touch scroll handling
			// elem references the overthrow element in use
		var elem,
			
			// The last several Y values are kept here
			lastTops = [],
	
			// The last several X values are kept here
			lastLefts = [],
			
			// lastDown will be true if the last scroll direction was down, false if it was up
			lastDown,
			
			// lastRight will be true if the last scroll direction was right, false if it was left
			lastRight,
			
			// For a new gesture, or change in direction, reset the values from last scroll
			resetVertTracking = function(){
				lastTops = [];
				lastDown = null;
			},
			
			resetHorTracking = function(){
				lastLefts = [];
				lastRight = null;
			},
		
			// On webkit, touch events hardly trickle through textareas and inputs
			// Disabling CSS pointer events makes sure they do, but it also makes the controls innaccessible
			// Toggling pointer events at the right moments seems to do the trick
			// Thanks Thomas Bachem http://stackoverflow.com/a/5798681 for the following
			inputs,
			setPointers = function( val ){
				inputs = elem.querySelectorAll( "textarea, input" );
				for( var i = 0, il = inputs.length; i < il; i++ ) {
					inputs[ i ].style.pointerEvents = val;
				}
			},
			
			// For nested overthrows, changeScrollTarget restarts a touch event cycle on a parent or child overthrow
			changeScrollTarget = function( startEvent, ascend ){
				if( doc.createEvent ){
					var newTarget = ( !ascend || ascend === undefined ) && elem.parentNode || elem.touchchild || elem,
						tEnd;
							
					if( newTarget !== elem ){
						tEnd = doc.createEvent( "HTMLEvents" );
						tEnd.initEvent( "touchend", true, true );
						elem.dispatchEvent( tEnd );
						newTarget.touchchild = elem;
						elem = newTarget;
						newTarget.dispatchEvent( startEvent );
					}
				}
			},
			
			// Touchstart handler
			// On touchstart, touchmove and touchend are freshly bound, and all three share a bunch of vars set by touchstart
			// Touchend unbinds them again, until next time
			start = function( e ){

				// Stop any throw in progress
				if( o.intercept ){
					o.intercept();
				}
				
				// Reset the distance and direction tracking
				resetVertTracking();
				resetHorTracking();
				
				elem = o.closest( e.target );
					
				if( !elem || elem === docElem || e.touches.length > 1 ){
					return;
				}			

				setPointers( "none" );
				var touchStartE = e,
					scrollT = elem.scrollTop,
					scrollL = elem.scrollLeft,
					height = elem.offsetHeight,
					width = elem.offsetWidth,
					startY = e.touches[ 0 ].pageY,
					startX = e.touches[ 0 ].pageX,
					scrollHeight = elem.scrollHeight,
					scrollWidth = elem.scrollWidth,
				
					// Touchmove handler
					move = function( e ){
					
						var ty = scrollT + startY - e.touches[ 0 ].pageY,
							tx = scrollL + startX - e.touches[ 0 ].pageX,
							down = ty >= ( lastTops.length ? lastTops[ 0 ] : 0 ),
							right = tx >= ( lastLefts.length ? lastLefts[ 0 ] : 0 );
							
						// If there's room to scroll the current container, prevent the default window scroll
						if( ( ty > 0 && ty < scrollHeight - height ) || ( tx > 0 && tx < scrollWidth - width ) ){
							e.preventDefault();
						}
						// This bubbling is dumb. Needs a rethink.
						else {
							changeScrollTarget( touchStartE );
						}
						
						// If down and lastDown are inequal, the y scroll has changed direction. Reset tracking.
						if( lastDown && down !== lastDown ){
							resetVertTracking();
						}
						
						// If right and lastRight are inequal, the x scroll has changed direction. Reset tracking.
						if( lastRight && right !== lastRight ){
							resetHorTracking();
						}
						
						// remember the last direction in which we were headed
						lastDown = down;
						lastRight = right;							
						
						// set the container's scroll
						elem.scrollTop = ty;
						elem.scrollLeft = tx;
					
						lastTops.unshift( ty );
						lastLefts.unshift( tx );
					
						if( lastTops.length > 3 ){
							lastTops.pop();
						}
						if( lastLefts.length > 3 ){
							lastLefts.pop();
						}
					},
				
					// Touchend handler
					end = function( e ){

						// Bring the pointers back
						setPointers( "auto" );
						setTimeout( function(){
							setPointers( "none" );
						}, 450 );
						elem.removeEventListener( "touchmove", move, false );
						elem.removeEventListener( "touchend", end, false );
					};
				
				elem.addEventListener( "touchmove", move, false );
				elem.addEventListener( "touchend", end, false );
			};
			
		// Bind to touch, handle move and end within
		doc.addEventListener( "touchstart", start, false );
	};
		
})( this, this.overthrow );

/*! Overthrow. An overflow:auto polyfill for responsive design. (c) 2012: Scott Jehl, Filament Group, Inc. http://filamentgroup.github.com/Overthrow/license.txt */
(function( w, undefined ){
	
	// Auto-init
	w.overthrow.set();

}( this ));
/*
    json2.js
    2014-02-04

    Public Domain.

    NO WARRANTY EXPRESSED OR IMPLIED. USE AT YOUR OWN RISK.

    See http://www.JSON.org/js.html


    This code should be minified before deployment.
    See http://javascript.crockford.com/jsmin.html

    USE YOUR OWN COPY. IT IS EXTREMELY UNWISE TO LOAD CODE FROM SERVERS YOU DO
    NOT CONTROL.


    This file creates a global JSON object containing two methods: stringify
    and parse.

        JSON.stringify(value, replacer, space)
            value       any JavaScript value, usually an object or array.

            replacer    an optional parameter that determines how object
                        values are stringified for objects. It can be a
                        function or an array of strings.

            space       an optional parameter that specifies the indentation
                        of nested structures. If it is omitted, the text will
                        be packed without extra whitespace. If it is a number,
                        it will specify the number of spaces to indent at each
                        level. If it is a string (such as '\t' or '&nbsp;'),
                        it contains the characters used to indent at each level.

            This method produces a JSON text from a JavaScript value.

            When an object value is found, if the object contains a toJSON
            method, its toJSON method will be called and the result will be
            stringified. A toJSON method does not serialize: it returns the
            value represented by the name/value pair that should be serialized,
            or undefined if nothing should be serialized. The toJSON method
            will be passed the key associated with the value, and this will be
            bound to the value

            For example, this would serialize Dates as ISO strings.

                Date.prototype.toJSON = function (key) {
                    function f(n) {
                        // Format integers to have at least two digits.
                        return n < 10 ? '0' + n : n;
                    }

                    return this.getUTCFullYear()   + '-' +
                         f(this.getUTCMonth() + 1) + '-' +
                         f(this.getUTCDate())      + 'T' +
                         f(this.getUTCHours())     + ':' +
                         f(this.getUTCMinutes())   + ':' +
                         f(this.getUTCSeconds())   + 'Z';
                };

            You can provide an optional replacer method. It will be passed the
            key and value of each member, with this bound to the containing
            object. The value that is returned from your method will be
            serialized. If your method returns undefined, then the member will
            be excluded from the serialization.

            If the replacer parameter is an array of strings, then it will be
            used to select the members to be serialized. It filters the results
            such that only members with keys listed in the replacer array are
            stringified.

            Values that do not have JSON representations, such as undefined or
            functions, will not be serialized. Such values in objects will be
            dropped; in arrays they will be replaced with null. You can use
            a replacer function to replace those with JSON values.
            JSON.stringify(undefined) returns undefined.

            The optional space parameter produces a stringification of the
            value that is filled with line breaks and indentation to make it
            easier to read.

            If the space parameter is a non-empty string, then that string will
            be used for indentation. If the space parameter is a number, then
            the indentation will be that many spaces.

            Example:

            text = JSON.stringify(['e', {pluribus: 'unum'}]);
            // text is '["e",{"pluribus":"unum"}]'


            text = JSON.stringify(['e', {pluribus: 'unum'}], null, '\t');
            // text is '[\n\t"e",\n\t{\n\t\t"pluribus": "unum"\n\t}\n]'

            text = JSON.stringify([new Date()], function (key, value) {
                return this[key] instanceof Date ?
                    'Date(' + this[key] + ')' : value;
            });
            // text is '["Date(---current time---)"]'


        JSON.parse(text, reviver)
            This method parses a JSON text to produce an object or array.
            It can throw a SyntaxError exception.

            The optional reviver parameter is a function that can filter and
            transform the results. It receives each of the keys and values,
            and its return value is used instead of the original value.
            If it returns what it received, then the structure is not modified.
            If it returns undefined then the member is deleted.

            Example:

            // Parse the text. Values that look like ISO date strings will
            // be converted to Date objects.

            myData = JSON.parse(text, function (key, value) {
                var a;
                if (typeof value === 'string') {
                    a =
/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)Z$/.exec(value);
                    if (a) {
                        return new Date(Date.UTC(+a[1], +a[2] - 1, +a[3], +a[4],
                            +a[5], +a[6]));
                    }
                }
                return value;
            });

            myData = JSON.parse('["Date(09/09/2001)"]', function (key, value) {
                var d;
                if (typeof value === 'string' &&
                        value.slice(0, 5) === 'Date(' &&
                        value.slice(-1) === ')') {
                    d = new Date(value.slice(5, -1));
                    if (d) {
                        return d;
                    }
                }
                return value;
            });


    This is a reference implementation. You are free to copy, modify, or
    redistribute.
*/

/*jslint evil: true, regexp: true */

/*members "", "\b", "\t", "\n", "\f", "\r", "\"", JSON, "\\", apply,
    call, charCodeAt, getUTCDate, getUTCFullYear, getUTCHours,
    getUTCMinutes, getUTCMonth, getUTCSeconds, hasOwnProperty, join,
    lastIndex, length, parse, prototype, push, replace, slice, stringify,
    test, toJSON, toString, valueOf
*/


// Create a JSON object only if one does not already exist. We create the
// methods in a closure to avoid creating global variables.

if (typeof JSON !== 'object') {
    JSON = {};
}

(function () {
    'use strict';

    function f(n) {
        // Format integers to have at least two digits.
        return n < 10 ? '0' + n : n;
    }

    if (typeof Date.prototype.toJSON !== 'function') {

        Date.prototype.toJSON = function () {

            return isFinite(this.valueOf())
                ? this.getUTCFullYear()     + '-' +
                    f(this.getUTCMonth() + 1) + '-' +
                    f(this.getUTCDate())      + 'T' +
                    f(this.getUTCHours())     + ':' +
                    f(this.getUTCMinutes())   + ':' +
                    f(this.getUTCSeconds())   + 'Z'
                : null;
        };

        String.prototype.toJSON      =
            Number.prototype.toJSON  =
            Boolean.prototype.toJSON = function () {
                return this.valueOf();
            };
    }

    var cx,
        escapable,
        gap,
        indent,
        meta,
        rep;


    function quote(string) {

// If the string contains no control characters, no quote characters, and no
// backslash characters, then we can safely slap some quotes around it.
// Otherwise we must also replace the offending characters with safe escape
// sequences.

        escapable.lastIndex = 0;
        return escapable.test(string) ? '"' + string.replace(escapable, function (a) {
            var c = meta[a];
            return typeof c === 'string'
                ? c
                : '\\u' + ('0000' + a.charCodeAt(0).toString(16)).slice(-4);
        }) + '"' : '"' + string + '"';
    }


    function str(key, holder) {

// Produce a string from holder[key].

        var i,          // The loop counter.
            k,          // The member key.
            v,          // The member value.
            length,
            mind = gap,
            partial,
            value = holder[key];

// If the value has a toJSON method, call it to obtain a replacement value.

        if (value && typeof value === 'object' &&
                typeof value.toJSON === 'function') {
            value = value.toJSON(key);
        }

// If we were called with a replacer function, then call the replacer to
// obtain a replacement value.

        if (typeof rep === 'function') {
            value = rep.call(holder, key, value);
        }

// What happens next depends on the value's type.

        switch (typeof value) {
        case 'string':
            return quote(value);

        case 'number':

// JSON numbers must be finite. Encode non-finite numbers as null.

            return isFinite(value) ? String(value) : 'null';

        case 'boolean':
        case 'null':

// If the value is a boolean or null, convert it to a string. Note:
// typeof null does not produce 'null'. The case is included here in
// the remote chance that this gets fixed someday.

            return String(value);

// If the type is 'object', we might be dealing with an object or an array or
// null.

        case 'object':

// Due to a specification blunder in ECMAScript, typeof null is 'object',
// so watch out for that case.

            if (!value) {
                return 'null';
            }

// Make an array to hold the partial results of stringifying this object value.

            gap += indent;
            partial = [];

// Is the value an array?

            if (Object.prototype.toString.apply(value) === '[object Array]') {

// The value is an array. Stringify every element. Use null as a placeholder
// for non-JSON values.

                length = value.length;
                for (i = 0; i < length; i += 1) {
                    partial[i] = str(i, value) || 'null';
                }

// Join all of the elements together, separated with commas, and wrap them in
// brackets.

                v = partial.length === 0
                    ? '[]'
                    : gap
                    ? '[\n' + gap + partial.join(',\n' + gap) + '\n' + mind + ']'
                    : '[' + partial.join(',') + ']';
                gap = mind;
                return v;
            }

// If the replacer is an array, use it to select the members to be stringified.

            if (rep && typeof rep === 'object') {
                length = rep.length;
                for (i = 0; i < length; i += 1) {
                    if (typeof rep[i] === 'string') {
                        k = rep[i];
                        v = str(k, value);
                        if (v) {
                            partial.push(quote(k) + (gap ? ': ' : ':') + v);
                        }
                    }
                }
            } else {

// Otherwise, iterate through all of the keys in the object.

                for (k in value) {
                    if (Object.prototype.hasOwnProperty.call(value, k)) {
                        v = str(k, value);
                        if (v) {
                            partial.push(quote(k) + (gap ? ': ' : ':') + v);
                        }
                    }
                }
            }

// Join all of the member texts together, separated with commas,
// and wrap them in braces.

            v = partial.length === 0
                ? '{}'
                : gap
                ? '{\n' + gap + partial.join(',\n' + gap) + '\n' + mind + '}'
                : '{' + partial.join(',') + '}';
            gap = mind;
            return v;
        }
    }

// If the JSON object does not yet have a stringify method, give it one.

    if (typeof JSON.stringify !== 'function') {
        escapable = /[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;
        meta = {    // table of character substitutions
            '\b': '\\b',
            '\t': '\\t',
            '\n': '\\n',
            '\f': '\\f',
            '\r': '\\r',
            '"' : '\\"',
            '\\': '\\\\'
        };
        JSON.stringify = function (value, replacer, space) {

// The stringify method takes a value and an optional replacer, and an optional
// space parameter, and returns a JSON text. The replacer can be a function
// that can replace values, or an array of strings that will select the keys.
// A default replacer method can be provided. Use of the space parameter can
// produce text that is more easily readable.

            var i;
            gap = '';
            indent = '';

// If the space parameter is a number, make an indent string containing that
// many spaces.

            if (typeof space === 'number') {
                for (i = 0; i < space; i += 1) {
                    indent += ' ';
                }

// If the space parameter is a string, it will be used as the indent string.

            } else if (typeof space === 'string') {
                indent = space;
            }

// If there is a replacer, it must be a function or an array.
// Otherwise, throw an error.

            rep = replacer;
            if (replacer && typeof replacer !== 'function' &&
                    (typeof replacer !== 'object' ||
                    typeof replacer.length !== 'number')) {
                throw new Error('JSON.stringify');
            }

// Make a fake root object containing our value under the key of ''.
// Return the result of stringifying the value.

            return str('', {'': value});
        };
    }


// If the JSON object does not yet have a parse method, give it one.

    if (typeof JSON.parse !== 'function') {
        cx = /[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;
        JSON.parse = function (text, reviver) {

// The parse method takes a text and an optional reviver function, and returns
// a JavaScript value if the text is a valid JSON text.

            var j;

            function walk(holder, key) {

// The walk method is used to recursively walk the resulting structure so
// that modifications can be made.

                var k, v, value = holder[key];
                if (value && typeof value === 'object') {
                    for (k in value) {
                        if (Object.prototype.hasOwnProperty.call(value, k)) {
                            v = walk(value, k);
                            if (v !== undefined) {
                                value[k] = v;
                            } else {
                                delete value[k];
                            }
                        }
                    }
                }
                return reviver.call(holder, key, value);
            }


// Parsing happens in four stages. In the first stage, we replace certain
// Unicode characters with escape sequences. JavaScript handles many characters
// incorrectly, either silently deleting them, or treating them as line endings.

            text = String(text);
            cx.lastIndex = 0;
            if (cx.test(text)) {
                text = text.replace(cx, function (a) {
                    return '\\u' +
                        ('0000' + a.charCodeAt(0).toString(16)).slice(-4);
                });
            }

// In the second stage, we run the text against regular expressions that look
// for non-JSON patterns. We are especially concerned with '()' and 'new'
// because they can cause invocation, and '=' because it can cause mutation.
// But just to be safe, we want to reject all unexpected forms.

// We split the second stage into 4 regexp operations in order to work around
// crippling inefficiencies in IE's and Safari's regexp engines. First we
// replace the JSON backslash pairs with '@' (a non-JSON character). Second, we
// replace all simple value tokens with ']' characters. Third, we delete all
// open brackets that follow a colon or comma or that begin the text. Finally,
// we look to see that the remaining characters are only whitespace or ']' or
// ',' or ':' or '{' or '}'. If that is so, then the text is safe for eval.

            if (/^[\],:{}\s]*$/
                    .test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g, '@')
                        .replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g, ']')
                        .replace(/(?:^|:|,)(?:\s*\[)+/g, ''))) {

// In the third stage we use the eval function to compile the text into a
// JavaScript structure. The '{' operator is subject to a syntactic ambiguity
// in JavaScript: it can begin a block or an object literal. We wrap the text
// in parens to eliminate the ambiguity.

                j = eval('(' + text + ')');

// In the optional fourth stage, we recursively walk the new structure, passing
// each name/value pair to a reviver function for possible transformation.

                return typeof reviver === 'function'
                    ? walk({'': j}, '')
                    : j;
            }

// If the text is not JSON parseable, then a SyntaxError is thrown.

            throw new SyntaxError('JSON.parse');
        };
    }
}());


var Messenger = function () { this.init.apply(this, arguments) };
Messenger.SIGNATURE = 'MZ';

if (window.postMessage) {
    Messenger.createForParent = function () {
        var key    = window.name;
        return new this({
            key   : key,
            window : window.opener || window.parent
        });
    };

    Messenger.createForFrame = function (frame, url) {
        return this.createForWindow(frame.contentWindow, url);
    };

    Messenger.createForWindow = function (window, url) {
        var key    = Messenger.SIGNATURE + Math.floor(Math.random() * 2821109907456 + 2821109907456).toString(36).substring(1) + '@';
        window.name = key;
        if (typeof url !== 'undefined' && url !== null) {
            window.location.replace(url);
        }
        return new this({
            key : key,
            window : window
        });
    };

    Messenger.prototype = {
        init : function (opts) {
            var self = this;
            self.window = opts.window;
            self.key    = opts.key;
            self._eventListeners = {};

            self.observeEvent();
        },

        send : function (type, obj) {
            var self = this;
            this.window.postMessage(JSON.stringify({
                key  : this.key,
                type : type,
                data : obj
            }), '*');
        },

        observeEvent : function () {
            var self = this;
            self.messageListener = function (e) {
                var data;
                try {
                    data = JSON.parse(e.data);
                } catch (err) {
                    if (Messenger.ENABLE_DEBUG && window.console && window.console.log) console.log(err.name + ': ' + err.message);
                    return;
                }
                if (data.key != self.key) return;
                self.dispatchEvent(data.type, data.data);
            };
            if (window.attachEvent) {
                window.attachEvent("onmessage", self.messageListener, false);
            } else {
                window.addEventListener("message", self.messageListener, false);
            }
        },

        destroy : function () {
            var self = this;
            if (window.detachEvent) {
                window.detachEvent("onmessage", self.messageListener, false);
            } else {
                window.removeEventListener("message", self.messageListener, false);
            }
        },

        hasEventListener: function (type) {
            return !!(this._eventListeners[type] instanceof Array && this._eventListeners[type].length);
        },

        addEventListener: function (type, listener) {
            if (!listener) return;
            if (!this.hasEventListener(type)) {
                this._eventListeners[type] = [];
            }
            var listeners = this._eventListeners[type];
            for (var i = 0, it; (it = listeners[i]); i++) {
                if (listener == it) {
                    return;
                }
            }
            listeners.push(listener);
        },

        removeEventListener: function (type, listener) {
            if (this.hasEventListener(type)) {
                var listeners = this._eventListeners[type];
                for (var i = 0, it; (it = listeners[i]); i++) {
                    if (listener == it) {
                        listeners.splice(i, 1);
                        return;
                    }
                }
            }
        },

        dispatchEvent: function (type, opt) {
            if (!this.hasEventListener(type)) return false;
            var listeners = this._eventListeners[type];
            for (var i = 0, it; (it = listeners[i]); i++) {
                it.call(this, opt);
            }
            return true; // preventDefault is not implemented
        }
    };
} else {
    Messenger.createForParent = function () {
        if (window.parent == window && !window.opener) return null;
        var iframe = document.createElement('iframe');
        var opts   = window.name.split('|', 2);
        var key    = opts[0];
        var url    = opts[1];
        document.body.appendChild(iframe);
        var output = iframe.contentWindow;
        output.name = key;
        iframe.width = 1;
        iframe.height = 1;
        iframe.setAttribute('style', 'height:1px;width:1px;visibility:hidden;');
        output.location.replace(url);
        return new this({
            key : key,
            url : url,
            input : window,
            output : output
        });
    };
    Messenger.createForFrame = function (frame, url) {
        return this.createForWindow(frame.contentWindow, url);
    };
    Messenger.createForWindow = function (window, url) {
        // 2821109907456 = 36 ** 8
        var key    = Messenger.SIGNATURE + Math.floor(Math.random() * 2821109907456 + 2821109907456).toString(36).substring(1) + '@';
        var empty  = this.findEmptyResource();
        if (!empty) return null;
        window.name  = key + '|' + empty;
        window.location.replace(url);
        return new this({
            key : key,
            url : url,
            input : function () { return window[0] },
            output : window
        });
    };
    Messenger.findEmptyResource = function () {
        var origin = location.protocol + '//' + location.host;
        var imgs = document.getElementsByTagName('img');
        for (var i = 0, it; (it = imgs[i]); i++) {
            if (it.src.indexOf(origin) === 0) return it.src;
        }

        var links = document.getElementsByTagName('link');
        for (var i = 0, it; (it = links[i]); i++) {
            if (it.href.indexOf(origin) === 0) return it.href;
        }

        return null;
    };
    Messenger.absolute = function (url) {
        var img = new Image();
        img.src = url;
        var ret = img.src;
        img.src = '';
        img = null;
        return ret;
    };
    Messenger.prototype = {
        init : function (opts) {
            var self = this;
            self._eventListeners	 = {};
            self.key = opts.key;
            self.url = opts.url;
            self.input = typeof(opts.input) == 'function' ? opts.input : function () { return opts.input };
            self.output = typeof(opts.output) == 'function' ? opts.output : function () { return opts.output };
            /** read buffer */
            self.buffer = [];
            /** received msg sequence id */
            self.ack   = 0;
            /** write queue */
            self.queue = [];
            /** sent messages */
            self.sent  = [];
            /** sent msg sequence id */
            self.msgid = 0;
            self.regexp = new RegExp('^(' + Messenger.SIGNATURE + '[A-Za-z0-9]{8}@)([A-Za-z0-9]{4})([A-Za-z0-9]{4})([A-Za-z0-9]{2})(.+)');
            self.setupTimer();
        },

        send : function (type, obj) {
            var self = this;

            if (typeof data === 'undefined') data = null;
            var body = encodeURIComponent(JSON.stringify({
                type : type,
                data : obj
            }));

            /*
             * Data Structure
             * message : '#' + header (20bytes) + data (rest)
             * header  : key (11bytes) + msgid (4bytes) + ack (4bytes) + msg rest (2byte)
             * key	   : 'XX' + random (8bytes) + '@'
             */

            var dataLimit = 2083 - (this.url.length) - 22;
            var sequence  = [];
            while (body.length) {
                sequence.push(body.substring(0, dataLimit));
                body = body.substring(dataLimit);
            }

            var msglen = sequence.length;
            for (var i = 0, data; (data = sequence[i]); i++) {
                var msgseq = i.toString(36);
                self.queue.push({
                    msgid   : self.msgid++,
                    msgrest : msglen - i - 1,
                    data    : data
                });
            }

            self.exhaust();
        },

        setupTimer : function () {
            var self = this;
            if (self.timer) return;
            self.timer = setInterval(function () {
                var data;
                try {
                    var input  = self.input();
                    data = input.location.hash.substring(1);
                    if (!data || data == '_') return;
                    var base  = input.location.protocol + '//' + input.location.host + input.location.pathname + input.location.search;
                    input.location.replace(base + '#_');
                } catch (_) { return }

                var match = data.match(self.regexp);
                if (!match) return;

                var message = {
                    key      : match[1],
                    msgidraw : match[2],
                    msgid    : parseInt(match[2], 36),
                    ack      : parseInt(match[3], 36),
                    msgrest  : parseInt(match[4], 36),
                    data     : match[5]
                };

                for (var i = 0, it; (it = self.sent[i]); i++) {
                    if (it.msgid < message.ack) self.sent.splice(i--, 1);
                }

                for (var i = 0, it; (it = self.queue[i]); i++) {
                    if (it.msgid < message.ack) self.queue.splice(i--, 1);
                }

                // log(['ack', self.ack + '=' + message.msgid, message.data == 'ACK', message.ack, self.sent]);

                if (message.data == 'ACK') return;

                if (self.ack != message.msgid) return;

                self.ack = message.msgid + 1;

                // log(['recv', message]);

                self.buffer.push(message);

                if (message.msgrest !== 0) return;

                data = '';
                for (var i = 0, it; (it = self.buffer[i]); i++) {
                    data += it.data;
                }
                self.buffer = [];

                var obj;
                try {
                    obj = JSON.parse(decodeURIComponent(data));
                } catch (e) {
                    if (Messenger.ENABLE_DEBUG && window.console && window.console.log) console.log(e.name + ': ' + e.message);
                    return;
                }

                if (!self.queue.length) {
                    self.queue.push({
                        msgid   : 0,
                        msgrest : 0,
                        data    : 'ACK'
                    });
                    self.exhaust();
                }

                self.dispatchEvent(obj.type, obj.data);
            }, 10);
        },

        destroy : function () {
        },

        exhaust : function () {
            var self = this;
            if (!self.queue.length) return;

            var now  = new Date().getTime();
            if (now < self.lastSent + 50) {
                setTimeout(function () {
                    self.exhaust();
                }, 50);
                return;
            }

            var message = self.queue.shift();
            var ack     = (self.ack % 1679616 + 1679616).toString(36).substring(1);
            var msgid   = (message.msgid % 1679616 + 1679616).toString(36).substring(1);
            var msgrest = (message.msgrest % 1296 + 1296).toString(36).substring(1);

            // log(['send', message]);
            var url = self.url + '#' + self.key + msgid + ack + msgrest + message.data;
            self.output().location.replace(url);
            self.lastSent = new Date().getTime();
            if (message.data != 'ACK') self.sent.push(message);

            clearTimeout(self.ackTimer);
            self.ackTimer = setTimeout(function () {
                if (self.sent.length) {
                    self.queue = self.sent.concat(self.queue).sort(function (a, b) {
                        return a.msgid - b.msgid;
                    });
                    // log(['resend', self.queue]);
                    self.sent  = [];
                    setTimeout(function () {
                        self.exhaust();
                    }, Math.random() * 200);
                }
            }, 500);

            setTimeout(function () {
                self.exhaust();
            }, 50);
        },

        hasEventListener: function (type) {
            return !!(this._eventListeners[type] instanceof Array && this._eventListeners[type].length);
        },

        addEventListener: function (type, listener) {
            if (!listener) return;
            if (!this.hasEventListener(type)) {
                this._eventListeners[type] = [];
            }
            var listeners = this._eventListeners[type];
            for (var i = 0, it; (it = listeners[i]); i++) {
                if (listener == it) {
                    return;
                }
            }
            listeners.push(listener);
        },

        removeEventListener: function (type, listener) {
            if (this.hasEventListener(type)) {
                var listeners = this._eventListeners[type];
                for (var i = 0, it; (it = listeners[i]); i++) {
                    if (listener == it) {
                        listeners.splice(i, 1);
                        return;
                    }
                }
            }
        },

        dispatchEvent: function (type, opt) {
            if (!this.hasEventListener(type)) return false;
            var listeners = this._eventListeners[type];
            for (var i = 0, it; (it = listeners[i]); i++) {
                it.call(this, opt);
            }
            return true; // preventDefault is not implemented
        }
    };
}

// Epic
Messenger.findEmptyResource = function () {
    var img = new Image();
    img.src = "/images/spacer.gif";
    var ret = img.src;
    img = null;
    return ret;
};

function keyString (e) {
	var ret = '';
	if (e.ctrlKey) ret += 'C-';
	if (e.altKey)  ret += 'M-';
	if (e.metaKey) ret += 'W-';
	if (e.which === 0) {
		if (e.shiftKey) ret += 'S-';
		ret += arguments.callee.table1[e.keyCode];
	} else {
		var key = arguments.callee.table2[e.which];
		if (typeof key == "string") {
			if (e.shiftKey) ret += 'S-';
			ret += key;
		} else {
			if (e.ctrlKey && e.which <= 26) {
				e.which += 64;
			}
			if ((65 <= e.which && e.which <= 90) || (97 <= e.which && e.which <= 122)) {
				ret += String.fromCharCode(e.which)[e.shiftKey ? 'toUpperCase' : 'toLowerCase']();
			} else {
				if (e.keyCode && e.shiftKey) ret += 'S-';
				ret += String.fromCharCode(e.which);
			}
		}
	}
	return ret;
}
keyString.table1 = { 9 : "TAB", 27 : "ESC", 33 : "PageUp", 34 : "PageDown", 35 : "End", 36 : "Home", 37 : "Left", 38 : "Up", 39 : "Right", 40 : "Down", 45 : "Insert", 46 : "Delete", 112 : "F1", 113 : "F2", 114 : "F3", 115 : "F4", 116 : "F5", 117 : "F6", 118 : "F7", 119 : "F8", 120 : "F9", 121 : "F10", 122 : "F11", 123 : "F12" };
keyString.table2 = { 8 : "BS", 9 : "TAB", 16:"", 17:"", 18:"", 27 : "ESC", 13 : "RET", 32 : "SPC", 224: "" };

this.keyString = keyString;

// Usage (with jQuery):
// var keyConfig = {
//     'M-1' : function () {},
//     'M-2' : function () {},
//     'M-3' : function () {},
//     'M-4' : function () {},
//     'M-0' : function () {},
//     '.'   : function () {},
//     'ESC' : function () {},
// };
// $(window).keydown(function (e) {
//     if (!e.altKey) return;
//     var key = keyString(e);
//     var handler = keyConfig[key];
//     handler && handler();
// });
// $(window).keypress(function (e) {
//     var key = keyString(e);
//     var handler = keyConfig[key];
//     handler && handler();
// });
//

var EditDesign = function () { this.init.apply(this, arguments) };
EditDesign.prototype = {
    init : function (css) {
        var self = this;
        self.data = {};
        self.setCSS(css);
    },

    setCSS : function (css) {
        var self = this;
        self.css = css;
        self.scanCSS(function (attrs, content) {
            var section = attrs['section'];
            delete attrs['section'];
            attrs.content = content;
            self.data[section] = attrs;
        });
    },

    getCSS : function () {
        var self = this;
        var done = {};
        var css =  this.scanCSS(function (attrs, content) {
            var section = attrs.section;
            if (done[section]) return '';

            var index  = self.indexOf(section);

            var ret = self.getSectionAsCSS(section);
            done[section] = true;

            for (var i = 0, len = index || EditDesign.sections.length; i < len; i++) { 
                section = EditDesign.sections[i];
                if (done[section]) continue;
                ret = self.getSectionAsCSS(section) + ret;
                done[section] = true;
            }

            return ret;
        });

        var rest = [];
        for (var key in self.data) if (self.data.hasOwnProperty(key)) rest.push(key);
        rest.sort(function (a, b) { return self.indexOf(a) - self.indexOf(b) });

        for (var i = 0, it; (it = rest[i]); i++) {
            var section = it;
            if (!done[section]) {
                css += self.getSectionAsCSS(section);
            }
        }

        return css.replace(/^\s+|\s+$/g, '');
    },

    getSectionAsCSS : function (section) {
        var self = this;
        if ( ! self.data[section] ) return '';
        var selected = self.data[section].selected;
        content = self.data[section].content;
        return '\n/* <system section="' + section + '" selected="' + selected + '"> */\n' + content + '\n/* </system> */\n';
    },

    indexOf : function me (section) {
        if (!me.map) {
            me.map = {};
            for (var i = 0, len = EditDesign.sections.length; i < len; i++) {
                me.map[section] = i;
            }
        }
        return me.map[section];
    },

    scanCSS : function (callback) {
        return this.css.replace(/\n?\/\* <system([^>]+)> \*\/\n*([\s\S]+?)\n*\/\* <\/system> \*\/\n?/g, function (_, attributes, content) {
            var attrs = {}; attributes.replace(/(\S+)="([^"]+)"/g, function (_, key, val) { attrs[key] = val });
            var ret = callback(attrs, content);
            return typeof(ret) == 'undefined' ? _ : ret;
        });
    },

    getData : function (section) {
        return this.data[section] || {};
    },

    setData : function (section, selected, content) {
        this.data[section] = {
            selected : selected,
            content  : content
        };
        delete this.indexOf.me;
    }
};
EditDesign.sections = [ ];

this.EditDesign = EditDesign;


//     Underscore.js 1.5.2
//     http://underscorejs.org
//     (c) 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Underscore may be freely distributed under the MIT license.
(function(){var n=this,t=n._,r={},e=Array.prototype,u=Object.prototype,i=Function.prototype,a=e.push,o=e.slice,c=e.concat,l=u.toString,f=u.hasOwnProperty,s=e.forEach,p=e.map,h=e.reduce,v=e.reduceRight,g=e.filter,d=e.every,m=e.some,y=e.indexOf,b=e.lastIndexOf,x=Array.isArray,w=Object.keys,_=i.bind,j=function(n){return n instanceof j?n:this instanceof j?(this._wrapped=n,void 0):new j(n)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=j),exports._=j):n._=j,j.VERSION="1.5.2";var A=j.each=j.forEach=function(n,t,e){if(null!=n)if(s&&n.forEach===s)n.forEach(t,e);else if(n.length===+n.length){for(var u=0,i=n.length;i>u;u++)if(t.call(e,n[u],u,n)===r)return}else for(var a=j.keys(n),u=0,i=a.length;i>u;u++)if(t.call(e,n[a[u]],a[u],n)===r)return};j.map=j.collect=function(n,t,r){var e=[];return null==n?e:p&&n.map===p?n.map(t,r):(A(n,function(n,u,i){e.push(t.call(r,n,u,i))}),e)};var E="Reduce of empty array with no initial value";j.reduce=j.foldl=j.inject=function(n,t,r,e){var u=arguments.length>2;if(null==n&&(n=[]),h&&n.reduce===h)return e&&(t=j.bind(t,e)),u?n.reduce(t,r):n.reduce(t);if(A(n,function(n,i,a){u?r=t.call(e,r,n,i,a):(r=n,u=!0)}),!u)throw new TypeError(E);return r},j.reduceRight=j.foldr=function(n,t,r,e){var u=arguments.length>2;if(null==n&&(n=[]),v&&n.reduceRight===v)return e&&(t=j.bind(t,e)),u?n.reduceRight(t,r):n.reduceRight(t);var i=n.length;if(i!==+i){var a=j.keys(n);i=a.length}if(A(n,function(o,c,l){c=a?a[--i]:--i,u?r=t.call(e,r,n[c],c,l):(r=n[c],u=!0)}),!u)throw new TypeError(E);return r},j.find=j.detect=function(n,t,r){var e;return O(n,function(n,u,i){return t.call(r,n,u,i)?(e=n,!0):void 0}),e},j.filter=j.select=function(n,t,r){var e=[];return null==n?e:g&&n.filter===g?n.filter(t,r):(A(n,function(n,u,i){t.call(r,n,u,i)&&e.push(n)}),e)},j.reject=function(n,t,r){return j.filter(n,function(n,e,u){return!t.call(r,n,e,u)},r)},j.every=j.all=function(n,t,e){t||(t=j.identity);var u=!0;return null==n?u:d&&n.every===d?n.every(t,e):(A(n,function(n,i,a){return(u=u&&t.call(e,n,i,a))?void 0:r}),!!u)};var O=j.some=j.any=function(n,t,e){t||(t=j.identity);var u=!1;return null==n?u:m&&n.some===m?n.some(t,e):(A(n,function(n,i,a){return u||(u=t.call(e,n,i,a))?r:void 0}),!!u)};j.contains=j.include=function(n,t){return null==n?!1:y&&n.indexOf===y?n.indexOf(t)!=-1:O(n,function(n){return n===t})},j.invoke=function(n,t){var r=o.call(arguments,2),e=j.isFunction(t);return j.map(n,function(n){return(e?t:n[t]).apply(n,r)})},j.pluck=function(n,t){return j.map(n,function(n){return n[t]})},j.where=function(n,t,r){return j.isEmpty(t)?r?void 0:[]:j[r?"find":"filter"](n,function(n){for(var r in t)if(t[r]!==n[r])return!1;return!0})},j.findWhere=function(n,t){return j.where(n,t,!0)},j.max=function(n,t,r){if(!t&&j.isArray(n)&&n[0]===+n[0]&&n.length<65535)return Math.max.apply(Math,n);if(!t&&j.isEmpty(n))return-1/0;var e={computed:-1/0,value:-1/0};return A(n,function(n,u,i){var a=t?t.call(r,n,u,i):n;a>e.computed&&(e={value:n,computed:a})}),e.value},j.min=function(n,t,r){if(!t&&j.isArray(n)&&n[0]===+n[0]&&n.length<65535)return Math.min.apply(Math,n);if(!t&&j.isEmpty(n))return 1/0;var e={computed:1/0,value:1/0};return A(n,function(n,u,i){var a=t?t.call(r,n,u,i):n;a<e.computed&&(e={value:n,computed:a})}),e.value},j.shuffle=function(n){var t,r=0,e=[];return A(n,function(n){t=j.random(r++),e[r-1]=e[t],e[t]=n}),e},j.sample=function(n,t,r){return arguments.length<2||r?n[j.random(n.length-1)]:j.shuffle(n).slice(0,Math.max(0,t))};var k=function(n){return j.isFunction(n)?n:function(t){return t[n]}};j.sortBy=function(n,t,r){var e=k(t);return j.pluck(j.map(n,function(n,t,u){return{value:n,index:t,criteria:e.call(r,n,t,u)}}).sort(function(n,t){var r=n.criteria,e=t.criteria;if(r!==e){if(r>e||r===void 0)return 1;if(e>r||e===void 0)return-1}return n.index-t.index}),"value")};var F=function(n){return function(t,r,e){var u={},i=null==r?j.identity:k(r);return A(t,function(r,a){var o=i.call(e,r,a,t);n(u,o,r)}),u}};j.groupBy=F(function(n,t,r){(j.has(n,t)?n[t]:n[t]=[]).push(r)}),j.indexBy=F(function(n,t,r){n[t]=r}),j.countBy=F(function(n,t){j.has(n,t)?n[t]++:n[t]=1}),j.sortedIndex=function(n,t,r,e){r=null==r?j.identity:k(r);for(var u=r.call(e,t),i=0,a=n.length;a>i;){var o=i+a>>>1;r.call(e,n[o])<u?i=o+1:a=o}return i},j.toArray=function(n){return n?j.isArray(n)?o.call(n):n.length===+n.length?j.map(n,j.identity):j.values(n):[]},j.size=function(n){return null==n?0:n.length===+n.length?n.length:j.keys(n).length},j.first=j.head=j.take=function(n,t,r){return null==n?void 0:null==t||r?n[0]:o.call(n,0,t)},j.initial=function(n,t,r){return o.call(n,0,n.length-(null==t||r?1:t))},j.last=function(n,t,r){return null==n?void 0:null==t||r?n[n.length-1]:o.call(n,Math.max(n.length-t,0))},j.rest=j.tail=j.drop=function(n,t,r){return o.call(n,null==t||r?1:t)},j.compact=function(n){return j.filter(n,j.identity)};var M=function(n,t,r){return t&&j.every(n,j.isArray)?c.apply(r,n):(A(n,function(n){j.isArray(n)||j.isArguments(n)?t?a.apply(r,n):M(n,t,r):r.push(n)}),r)};j.flatten=function(n,t){return M(n,t,[])},j.without=function(n){return j.difference(n,o.call(arguments,1))},j.uniq=j.unique=function(n,t,r,e){j.isFunction(t)&&(e=r,r=t,t=!1);var u=r?j.map(n,r,e):n,i=[],a=[];return A(u,function(r,e){(t?e&&a[a.length-1]===r:j.contains(a,r))||(a.push(r),i.push(n[e]))}),i},j.union=function(){return j.uniq(j.flatten(arguments,!0))},j.intersection=function(n){var t=o.call(arguments,1);return j.filter(j.uniq(n),function(n){return j.every(t,function(t){return j.indexOf(t,n)>=0})})},j.difference=function(n){var t=c.apply(e,o.call(arguments,1));return j.filter(n,function(n){return!j.contains(t,n)})},j.zip=function(){for(var n=j.max(j.pluck(arguments,"length").concat(0)),t=new Array(n),r=0;n>r;r++)t[r]=j.pluck(arguments,""+r);return t},j.object=function(n,t){if(null==n)return{};for(var r={},e=0,u=n.length;u>e;e++)t?r[n[e]]=t[e]:r[n[e][0]]=n[e][1];return r},j.indexOf=function(n,t,r){if(null==n)return-1;var e=0,u=n.length;if(r){if("number"!=typeof r)return e=j.sortedIndex(n,t),n[e]===t?e:-1;e=0>r?Math.max(0,u+r):r}if(y&&n.indexOf===y)return n.indexOf(t,r);for(;u>e;e++)if(n[e]===t)return e;return-1},j.lastIndexOf=function(n,t,r){if(null==n)return-1;var e=null!=r;if(b&&n.lastIndexOf===b)return e?n.lastIndexOf(t,r):n.lastIndexOf(t);for(var u=e?r:n.length;u--;)if(n[u]===t)return u;return-1},j.range=function(n,t,r){arguments.length<=1&&(t=n||0,n=0),r=arguments[2]||1;for(var e=Math.max(Math.ceil((t-n)/r),0),u=0,i=new Array(e);e>u;)i[u++]=n,n+=r;return i};var R=function(){};j.bind=function(n,t){var r,e;if(_&&n.bind===_)return _.apply(n,o.call(arguments,1));if(!j.isFunction(n))throw new TypeError;return r=o.call(arguments,2),e=function(){if(!(this instanceof e))return n.apply(t,r.concat(o.call(arguments)));R.prototype=n.prototype;var u=new R;R.prototype=null;var i=n.apply(u,r.concat(o.call(arguments)));return Object(i)===i?i:u}},j.partial=function(n){var t=o.call(arguments,1);return function(){return n.apply(this,t.concat(o.call(arguments)))}},j.bindAll=function(n){var t=o.call(arguments,1);if(0===t.length)throw new Error("bindAll must be passed function names");return A(t,function(t){n[t]=j.bind(n[t],n)}),n},j.memoize=function(n,t){var r={};return t||(t=j.identity),function(){var e=t.apply(this,arguments);return j.has(r,e)?r[e]:r[e]=n.apply(this,arguments)}},j.delay=function(n,t){var r=o.call(arguments,2);return setTimeout(function(){return n.apply(null,r)},t)},j.defer=function(n){return j.delay.apply(j,[n,1].concat(o.call(arguments,1)))},j.throttle=function(n,t,r){var e,u,i,a=null,o=0;r||(r={});var c=function(){o=r.leading===!1?0:new Date,a=null,i=n.apply(e,u)};return function(){var l=new Date;o||r.leading!==!1||(o=l);var f=t-(l-o);return e=this,u=arguments,0>=f?(clearTimeout(a),a=null,o=l,i=n.apply(e,u)):a||r.trailing===!1||(a=setTimeout(c,f)),i}},j.debounce=function(n,t,r){var e,u,i,a,o;return function(){i=this,u=arguments,a=new Date;var c=function(){var l=new Date-a;t>l?e=setTimeout(c,t-l):(e=null,r||(o=n.apply(i,u)))},l=r&&!e;return e||(e=setTimeout(c,t)),l&&(o=n.apply(i,u)),o}},j.once=function(n){var t,r=!1;return function(){return r?t:(r=!0,t=n.apply(this,arguments),n=null,t)}},j.wrap=function(n,t){return function(){var r=[n];return a.apply(r,arguments),t.apply(this,r)}},j.compose=function(){var n=arguments;return function(){for(var t=arguments,r=n.length-1;r>=0;r--)t=[n[r].apply(this,t)];return t[0]}},j.after=function(n,t){return function(){return--n<1?t.apply(this,arguments):void 0}},j.keys=w||function(n){if(n!==Object(n))throw new TypeError("Invalid object");var t=[];for(var r in n)j.has(n,r)&&t.push(r);return t},j.values=function(n){for(var t=j.keys(n),r=t.length,e=new Array(r),u=0;r>u;u++)e[u]=n[t[u]];return e},j.pairs=function(n){for(var t=j.keys(n),r=t.length,e=new Array(r),u=0;r>u;u++)e[u]=[t[u],n[t[u]]];return e},j.invert=function(n){for(var t={},r=j.keys(n),e=0,u=r.length;u>e;e++)t[n[r[e]]]=r[e];return t},j.functions=j.methods=function(n){var t=[];for(var r in n)j.isFunction(n[r])&&t.push(r);return t.sort()},j.extend=function(n){return A(o.call(arguments,1),function(t){if(t)for(var r in t)n[r]=t[r]}),n},j.pick=function(n){var t={},r=c.apply(e,o.call(arguments,1));return A(r,function(r){r in n&&(t[r]=n[r])}),t},j.omit=function(n){var t={},r=c.apply(e,o.call(arguments,1));for(var u in n)j.contains(r,u)||(t[u]=n[u]);return t},j.defaults=function(n){return A(o.call(arguments,1),function(t){if(t)for(var r in t)n[r]===void 0&&(n[r]=t[r])}),n},j.clone=function(n){return j.isObject(n)?j.isArray(n)?n.slice():j.extend({},n):n},j.tap=function(n,t){return t(n),n};var S=function(n,t,r,e){if(n===t)return 0!==n||1/n==1/t;if(null==n||null==t)return n===t;n instanceof j&&(n=n._wrapped),t instanceof j&&(t=t._wrapped);var u=l.call(n);if(u!=l.call(t))return!1;switch(u){case"[object String]":return n==String(t);case"[object Number]":return n!=+n?t!=+t:0==n?1/n==1/t:n==+t;case"[object Date]":case"[object Boolean]":return+n==+t;case"[object RegExp]":return n.source==t.source&&n.global==t.global&&n.multiline==t.multiline&&n.ignoreCase==t.ignoreCase}if("object"!=typeof n||"object"!=typeof t)return!1;for(var i=r.length;i--;)if(r[i]==n)return e[i]==t;var a=n.constructor,o=t.constructor;if(a!==o&&!(j.isFunction(a)&&a instanceof a&&j.isFunction(o)&&o instanceof o))return!1;r.push(n),e.push(t);var c=0,f=!0;if("[object Array]"==u){if(c=n.length,f=c==t.length)for(;c--&&(f=S(n[c],t[c],r,e)););}else{for(var s in n)if(j.has(n,s)&&(c++,!(f=j.has(t,s)&&S(n[s],t[s],r,e))))break;if(f){for(s in t)if(j.has(t,s)&&!c--)break;f=!c}}return r.pop(),e.pop(),f};j.isEqual=function(n,t){return S(n,t,[],[])},j.isEmpty=function(n){if(null==n)return!0;if(j.isArray(n)||j.isString(n))return 0===n.length;for(var t in n)if(j.has(n,t))return!1;return!0},j.isElement=function(n){return!(!n||1!==n.nodeType)},j.isArray=x||function(n){return"[object Array]"==l.call(n)},j.isObject=function(n){return n===Object(n)},A(["Arguments","Function","String","Number","Date","RegExp"],function(n){j["is"+n]=function(t){return l.call(t)=="[object "+n+"]"}}),j.isArguments(arguments)||(j.isArguments=function(n){return!(!n||!j.has(n,"callee"))}),"function"!=typeof/./&&(j.isFunction=function(n){return"function"==typeof n}),j.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},j.isNaN=function(n){return j.isNumber(n)&&n!=+n},j.isBoolean=function(n){return n===!0||n===!1||"[object Boolean]"==l.call(n)},j.isNull=function(n){return null===n},j.isUndefined=function(n){return n===void 0},j.has=function(n,t){return f.call(n,t)},j.noConflict=function(){return n._=t,this},j.identity=function(n){return n},j.times=function(n,t,r){for(var e=Array(Math.max(0,n)),u=0;n>u;u++)e[u]=t.call(r,u);return e},j.random=function(n,t){return null==t&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))};var I={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};I.unescape=j.invert(I.escape);var T={escape:new RegExp("["+j.keys(I.escape).join("")+"]","g"),unescape:new RegExp("("+j.keys(I.unescape).join("|")+")","g")};j.each(["escape","unescape"],function(n){j[n]=function(t){return null==t?"":(""+t).replace(T[n],function(t){return I[n][t]})}}),j.result=function(n,t){if(null==n)return void 0;var r=n[t];return j.isFunction(r)?r.call(n):r},j.mixin=function(n){A(j.functions(n),function(t){var r=j[t]=n[t];j.prototype[t]=function(){var n=[this._wrapped];return a.apply(n,arguments),z.call(this,r.apply(j,n))}})};var N=0;j.uniqueId=function(n){var t=++N+"";return n?n+t:t},j.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var q=/(.)^/,B={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},D=/\\|'|\r|\n|\t|\u2028|\u2029/g;j.template=function(n,t,r){var e;r=j.defaults({},r,j.templateSettings);var u=new RegExp([(r.escape||q).source,(r.interpolate||q).source,(r.evaluate||q).source].join("|")+"|$","g"),i=0,a="__p+='";n.replace(u,function(t,r,e,u,o){return a+=n.slice(i,o).replace(D,function(n){return"\\"+B[n]}),r&&(a+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'"),e&&(a+="'+\n((__t=("+e+"))==null?'':__t)+\n'"),u&&(a+="';\n"+u+"\n__p+='"),i=o+t.length,t}),a+="';\n",r.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{e=new Function(r.variable||"obj","_",a)}catch(o){throw o.source=a,o}if(t)return e(t,j);var c=function(n){return e.call(this,n,j)};return c.source="function("+(r.variable||"obj")+"){\n"+a+"}",c},j.chain=function(n){return j(n).chain()};var z=function(n){return this._chain?j(n).chain():n};j.mixin(j),A(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var t=e[n];j.prototype[n]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!=n&&"splice"!=n||0!==r.length||delete r[0],z.call(this,r)}}),A(["concat","join","slice"],function(n){var t=e[n];j.prototype[n]=function(){return z.call(this,t.apply(this._wrapped,arguments))}}),j.extend(j.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this);
//# sourceMappingURL=underscore-min.map
var AccessLog = {
    showGraph: function (counts, opts) {
        var offset = new Date().getTimezoneOffset() * 60 * 1000;
        var unit   = opts.unit;
        var end    = Math.floor(new Date().getTime() / unit) * unit + unit;
        var start  = end - (unit * opts.number);

        var graphAreaMarginRight = opts.graphAreaMarginRight || 50;
        var barWidth = opts.barWidth || 15;

        var data = [];
        var n = 0;
        while (start <= end) {
            n += counts[start] || 0;
            if ( (start - offset) % unit === 0) {
                // jQuery flot ã¯ UTC ã§è¡¨ç¤ºã—ã¦ã—ã¾ã†ã®ã§ã€
                // ã‚ã‚‰ã‹ã˜ã‚ offset ã‚’è¨ˆç®—ã—ã¦ epoch ã‚’ã‚ºãƒ©ã™
                data.push([ start - offset - unit, n ]);
                n = 0;
            }
            start += 60 * 15 * 1000; // ã‚¢ã‚¯ã‚»ã‚¹ãƒ­ã‚°ã¯15åˆ†ã”ã¨ã«è¨˜éŒ²ã•ã‚Œã¦ã„ã‚‹
        }

        opts.parent.show();
        opts.parent.
            height(+opts.parent.attr('data-graph-height')).
            width(opts.parent.parent().width() - graphAreaMarginRight);

        var plot = $.plot(opts.parent, [
            {
                label : '',
                data  : data,
                bars   : { show: true, lineWidth: barWidth },
                legend : { show: false }
            }
        ], {
            xaxis : {
                mode: "time",
                minTickSize: opts.minTickSize,
                timeformat : opts.timeformat
            },
            yaxis : {
                min: 0,
                minTickSize: 1,
                autoscaleMargin: 0.5,
                labelWidth: +opts.parent.attr('data-yaxis-width'),
                tickFormatter : function (number) {
                    return number.toString();
                }
            },
            grid : {
                axisMargin : 5,
                labelMargin : 5,
                minBorderMargin : 0,
                borderWidth : 1,
                borderColor : "#CCCCCC",
                hoverable: true
            }
        });

        var tooltip = $('.tooltip', opts.parent);
        if (tooltip.length === 0) {
            tooltip = $('<div class="tooltip"></div>').appendTo(opts.parent).hide();
        }
        opts.parent.bind('plothover', function (e, pos, item) {
            var axes = plot.getAxes();
            if (pos.x < axes.xaxis.min || pos.x > axes.xaxis.max || pos.y < axes.yaxis.min || pos.y > axes.yaxis.max) return;

            var series = plot.getData()[0];

            for (var n = 0; n < series.data.length; ++n) if (series.data[n][0] > pos.x) break;

            var p1 = series.data[n - 1], p2 = series.data[n];
            var p  = (p1 === null) ? p2:
                     (p2 === null) ? p1:
                     (pos.x - p1[0] < p2[0] - pos.x) ? p1 : p2;

            tooltip.show();
            showTooltip(
                tooltip,
                axes.xaxis.p2c(p[0]),
                axes.yaxis.p2c(p[1]),
                p[1]
            );
        });

        function showTooltip (tooltip, x, y, contents) {
            tooltip.css({
                    position: 'absolute',
                    top: y - 25,
                    left: x + 13
                }).text(contents);
        }
    }
};
(function() {
  if (typeof twttr === "undefined" || twttr === null) {
    var twttr = {};
  }

  twttr.txt = {};
  twttr.txt.regexen = {};

  var HTML_ENTITIES = {
    '&': '&amp;',
    '>': '&gt;',
    '<': '&lt;',
    '"': '&quot;',
    "'": '&#39;'
  };

  // HTML escaping
  twttr.txt.htmlEscape = function(text) {
    return text && text.replace(/[&"'><]/g, function(character) {
      return HTML_ENTITIES[character];
    });
  };

  // Builds a RegExp
  function regexSupplant(regex, flags) {
    flags = flags || "";
    if (typeof regex !== "string") {
      if (regex.global && flags.indexOf("g") < 0) {
        flags += "g";
      }
      if (regex.ignoreCase && flags.indexOf("i") < 0) {
        flags += "i";
      }
      if (regex.multiline && flags.indexOf("m") < 0) {
        flags += "m";
      }

      regex = regex.source;
    }

    return new RegExp(regex.replace(/#\{(\w+)\}/g, function(match, name) {
      var newRegex = twttr.txt.regexen[name] || "";
      if (typeof newRegex !== "string") {
        newRegex = newRegex.source;
      }
      return newRegex;
    }), flags);
  }

  twttr.txt.regexSupplant = regexSupplant;

  // simple string interpolation
  function stringSupplant(str, values) {
    return str.replace(/#\{(\w+)\}/g, function(match, name) {
      return values[name] || "";
    });
  }

  twttr.txt.stringSupplant = stringSupplant;

  function addCharsToCharClass(charClass, start, end) {
    var s = String.fromCharCode(start);
    if (end !== start) {
      s += "-" + String.fromCharCode(end);
    }
    charClass.push(s);
    return charClass;
  }

  twttr.txt.addCharsToCharClass = addCharsToCharClass;

  // Space is more than %20, U+3000 for example is the full-width space used with Kanji. Provide a short-hand
  // to access both the list of characters and a pattern suitible for use with String#split
  // Taken from: ActiveSupport::Multibyte::Handlers::UTF8Handler::UNICODE_WHITESPACE
  var fromCode = String.fromCharCode;
  var UNICODE_SPACES = [
    fromCode(0x0020), // White_Space # Zs       SPACE
    fromCode(0x0085), // White_Space # Cc       <control-0085>
    fromCode(0x00A0), // White_Space # Zs       NO-BREAK SPACE
    fromCode(0x1680), // White_Space # Zs       OGHAM SPACE MARK
    fromCode(0x180E), // White_Space # Zs       MONGOLIAN VOWEL SEPARATOR
    fromCode(0x2028), // White_Space # Zl       LINE SEPARATOR
    fromCode(0x2029), // White_Space # Zp       PARAGRAPH SEPARATOR
    fromCode(0x202F), // White_Space # Zs       NARROW NO-BREAK SPACE
    fromCode(0x205F), // White_Space # Zs       MEDIUM MATHEMATICAL SPACE
    fromCode(0x3000)  // White_Space # Zs       IDEOGRAPHIC SPACE
  ];
  addCharsToCharClass(UNICODE_SPACES, 0x009, 0x00D); // White_Space # Cc   [5] <control-0009>..<control-000D>
  addCharsToCharClass(UNICODE_SPACES, 0x2000, 0x200A); // White_Space # Zs  [11] EN QUAD..HAIR SPACE

  var INVALID_CHARS = [
    fromCode(0xFFFE),
    fromCode(0xFEFF), // BOM
    fromCode(0xFFFF) // Special
  ];
  addCharsToCharClass(INVALID_CHARS, 0x202A, 0x202E); // Directional change

  twttr.txt.regexen.spaces_group = regexSupplant(UNICODE_SPACES.join(""));
  twttr.txt.regexen.spaces = regexSupplant("[" + UNICODE_SPACES.join("") + "]");
  twttr.txt.regexen.invalid_chars_group = regexSupplant(INVALID_CHARS.join(""));
  twttr.txt.regexen.punct = /\!'#%&'\(\)*\+,\\\-\.\/:;<=>\?@\[\]\^_{|}~\$/;
  twttr.txt.regexen.rtl_chars = /[\u0600-\u06FF]|[\u0750-\u077F]|[\u0590-\u05FF]|[\uFE70-\uFEFF]/mg;
  twttr.txt.regexen.non_bmp_code_pairs = /[\uD800-\uDBFF][\uDC00-\uDFFF]/mg;

  var nonLatinHashtagChars = [];
  // Cyrillic
  addCharsToCharClass(nonLatinHashtagChars, 0x0400, 0x04ff); // Cyrillic
  addCharsToCharClass(nonLatinHashtagChars, 0x0500, 0x0527); // Cyrillic Supplement
  addCharsToCharClass(nonLatinHashtagChars, 0x2de0, 0x2dff); // Cyrillic Extended A
  addCharsToCharClass(nonLatinHashtagChars, 0xa640, 0xa69f); // Cyrillic Extended B
  // Hebrew
  addCharsToCharClass(nonLatinHashtagChars, 0x0591, 0x05bf); // Hebrew
  addCharsToCharClass(nonLatinHashtagChars, 0x05c1, 0x05c2);
  addCharsToCharClass(nonLatinHashtagChars, 0x05c4, 0x05c5);
  addCharsToCharClass(nonLatinHashtagChars, 0x05c7, 0x05c7);
  addCharsToCharClass(nonLatinHashtagChars, 0x05d0, 0x05ea);
  addCharsToCharClass(nonLatinHashtagChars, 0x05f0, 0x05f4);
  addCharsToCharClass(nonLatinHashtagChars, 0xfb12, 0xfb28); // Hebrew Presentation Forms
  addCharsToCharClass(nonLatinHashtagChars, 0xfb2a, 0xfb36);
  addCharsToCharClass(nonLatinHashtagChars, 0xfb38, 0xfb3c);
  addCharsToCharClass(nonLatinHashtagChars, 0xfb3e, 0xfb3e);
  addCharsToCharClass(nonLatinHashtagChars, 0xfb40, 0xfb41);
  addCharsToCharClass(nonLatinHashtagChars, 0xfb43, 0xfb44);
  addCharsToCharClass(nonLatinHashtagChars, 0xfb46, 0xfb4f);
  // Arabic
  addCharsToCharClass(nonLatinHashtagChars, 0x0610, 0x061a); // Arabic
  addCharsToCharClass(nonLatinHashtagChars, 0x0620, 0x065f);
  addCharsToCharClass(nonLatinHashtagChars, 0x066e, 0x06d3);
  addCharsToCharClass(nonLatinHashtagChars, 0x06d5, 0x06dc);
  addCharsToCharClass(nonLatinHashtagChars, 0x06de, 0x06e8);
  addCharsToCharClass(nonLatinHashtagChars, 0x06ea, 0x06ef);
  addCharsToCharClass(nonLatinHashtagChars, 0x06fa, 0x06fc);
  addCharsToCharClass(nonLatinHashtagChars, 0x06ff, 0x06ff);
  addCharsToCharClass(nonLatinHashtagChars, 0x0750, 0x077f); // Arabic Supplement
  addCharsToCharClass(nonLatinHashtagChars, 0x08a0, 0x08a0); // Arabic Extended A
  addCharsToCharClass(nonLatinHashtagChars, 0x08a2, 0x08ac);
  addCharsToCharClass(nonLatinHashtagChars, 0x08e4, 0x08fe);
  addCharsToCharClass(nonLatinHashtagChars, 0xfb50, 0xfbb1); // Arabic Pres. Forms A
  addCharsToCharClass(nonLatinHashtagChars, 0xfbd3, 0xfd3d);
  addCharsToCharClass(nonLatinHashtagChars, 0xfd50, 0xfd8f);
  addCharsToCharClass(nonLatinHashtagChars, 0xfd92, 0xfdc7);
  addCharsToCharClass(nonLatinHashtagChars, 0xfdf0, 0xfdfb);
  addCharsToCharClass(nonLatinHashtagChars, 0xfe70, 0xfe74); // Arabic Pres. Forms B
  addCharsToCharClass(nonLatinHashtagChars, 0xfe76, 0xfefc);
  addCharsToCharClass(nonLatinHashtagChars, 0x200c, 0x200c); // Zero-Width Non-Joiner
  // Thai
  addCharsToCharClass(nonLatinHashtagChars, 0x0e01, 0x0e3a);
  addCharsToCharClass(nonLatinHashtagChars, 0x0e40, 0x0e4e);
  // Hangul (Korean)
  addCharsToCharClass(nonLatinHashtagChars, 0x1100, 0x11ff); // Hangul Jamo
  addCharsToCharClass(nonLatinHashtagChars, 0x3130, 0x3185); // Hangul Compatibility Jamo
  addCharsToCharClass(nonLatinHashtagChars, 0xA960, 0xA97F); // Hangul Jamo Extended-A
  addCharsToCharClass(nonLatinHashtagChars, 0xAC00, 0xD7AF); // Hangul Syllables
  addCharsToCharClass(nonLatinHashtagChars, 0xD7B0, 0xD7FF); // Hangul Jamo Extended-B
  addCharsToCharClass(nonLatinHashtagChars, 0xFFA1, 0xFFDC); // half-width Hangul
  // Japanese and Chinese
  addCharsToCharClass(nonLatinHashtagChars, 0x30A1, 0x30FA); // Katakana (full-width)
  addCharsToCharClass(nonLatinHashtagChars, 0x30FC, 0x30FE); // Katakana Chouon and iteration marks (full-width)
  addCharsToCharClass(nonLatinHashtagChars, 0xFF66, 0xFF9F); // Katakana (half-width)
  addCharsToCharClass(nonLatinHashtagChars, 0xFF70, 0xFF70); // Katakana Chouon (half-width)
  addCharsToCharClass(nonLatinHashtagChars, 0xFF10, 0xFF19); // \
  addCharsToCharClass(nonLatinHashtagChars, 0xFF21, 0xFF3A); //  - Latin (full-width)
  addCharsToCharClass(nonLatinHashtagChars, 0xFF41, 0xFF5A); // /
  addCharsToCharClass(nonLatinHashtagChars, 0x3041, 0x3096); // Hiragana
  addCharsToCharClass(nonLatinHashtagChars, 0x3099, 0x309E); // Hiragana voicing and iteration mark
  addCharsToCharClass(nonLatinHashtagChars, 0x3400, 0x4DBF); // Kanji (CJK Extension A)
  addCharsToCharClass(nonLatinHashtagChars, 0x4E00, 0x9FFF); // Kanji (Unified)
  // -- Disabled as it breaks the Regex.
  //addCharsToCharClass(nonLatinHashtagChars, 0x20000, 0x2A6DF); // Kanji (CJK Extension B)
  addCharsToCharClass(nonLatinHashtagChars, 0x2A700, 0x2B73F); // Kanji (CJK Extension C)
  addCharsToCharClass(nonLatinHashtagChars, 0x2B740, 0x2B81F); // Kanji (CJK Extension D)
  addCharsToCharClass(nonLatinHashtagChars, 0x2F800, 0x2FA1F); // Kanji (CJK supplement)
  addCharsToCharClass(nonLatinHashtagChars, 0x3003, 0x3003); // Kanji iteration mark
  addCharsToCharClass(nonLatinHashtagChars, 0x3005, 0x3005); // Kanji iteration mark
  addCharsToCharClass(nonLatinHashtagChars, 0x303B, 0x303B); // Han iteration mark

  twttr.txt.regexen.nonLatinHashtagChars = regexSupplant(nonLatinHashtagChars.join(""));

  var latinAccentChars = [];
  // Latin accented characters (subtracted 0xD7 from the range, it's a confusable multiplication sign. Looks like "x")
  addCharsToCharClass(latinAccentChars, 0x00c0, 0x00d6);
  addCharsToCharClass(latinAccentChars, 0x00d8, 0x00f6);
  addCharsToCharClass(latinAccentChars, 0x00f8, 0x00ff);
  // Latin Extended A and B
  addCharsToCharClass(latinAccentChars, 0x0100, 0x024f);
  // assorted IPA Extensions
  addCharsToCharClass(latinAccentChars, 0x0253, 0x0254);
  addCharsToCharClass(latinAccentChars, 0x0256, 0x0257);
  addCharsToCharClass(latinAccentChars, 0x0259, 0x0259);
  addCharsToCharClass(latinAccentChars, 0x025b, 0x025b);
  addCharsToCharClass(latinAccentChars, 0x0263, 0x0263);
  addCharsToCharClass(latinAccentChars, 0x0268, 0x0268);
  addCharsToCharClass(latinAccentChars, 0x026f, 0x026f);
  addCharsToCharClass(latinAccentChars, 0x0272, 0x0272);
  addCharsToCharClass(latinAccentChars, 0x0289, 0x0289);
  addCharsToCharClass(latinAccentChars, 0x028b, 0x028b);
  // Okina for Hawaiian (it *is* a letter character)
  addCharsToCharClass(latinAccentChars, 0x02bb, 0x02bb);
  // Combining diacritics
  addCharsToCharClass(latinAccentChars, 0x0300, 0x036f);
  // Latin Extended Additional
  addCharsToCharClass(latinAccentChars, 0x1e00, 0x1eff);
  twttr.txt.regexen.latinAccentChars = regexSupplant(latinAccentChars.join(""));

  // A hashtag must contain characters, numbers and underscores, but not all numbers.
  twttr.txt.regexen.hashSigns = /[#ï¼ƒ]/;
  twttr.txt.regexen.hashtagAlpha = regexSupplant(/[a-z_#{latinAccentChars}#{nonLatinHashtagChars}]/i);
  twttr.txt.regexen.hashtagAlphaNumeric = regexSupplant(/[a-z0-9_#{latinAccentChars}#{nonLatinHashtagChars}]/i);
  twttr.txt.regexen.endHashtagMatch = regexSupplant(/^(?:#{hashSigns}|:\/\/)/);
  twttr.txt.regexen.hashtagBoundary = regexSupplant(/(?:^|$|[^&a-z0-9_#{latinAccentChars}#{nonLatinHashtagChars}])/);
  twttr.txt.regexen.validHashtag = regexSupplant(/(#{hashtagBoundary})(#{hashSigns})(#{hashtagAlphaNumeric}*#{hashtagAlpha}#{hashtagAlphaNumeric}*)/gi);

  // Mention related regex collection
  twttr.txt.regexen.validMentionPrecedingChars = /(?:^|[^a-zA-Z0-9_!#$%&*@ï¼ ]|(?:rt|RT|rT|Rt):?)/;
  twttr.txt.regexen.atSigns = /[@ï¼ ]/;
  twttr.txt.regexen.validMentionOrList = regexSupplant(
    '(#{validMentionPrecedingChars})' +  // $1: Preceding character
    '(#{atSigns})' +                     // $2: At mark
    '([a-zA-Z0-9_]{1,20})' +             // $3: Screen name
    '(\/[a-zA-Z][a-zA-Z0-9_\-]{0,24})?'  // $4: List (optional)
  , 'g');
  twttr.txt.regexen.validReply = regexSupplant(/^(?:#{spaces})*#{atSigns}([a-zA-Z0-9_]{1,20})/);
  twttr.txt.regexen.endMentionMatch = regexSupplant(/^(?:#{atSigns}|[#{latinAccentChars}]|:\/\/)/);

  // URL related regex collection
  twttr.txt.regexen.validUrlPrecedingChars = regexSupplant(/(?:[^A-Za-z0-9@ï¼ $#ï¼ƒ#{invalid_chars_group}]|^)/);
  twttr.txt.regexen.invalidUrlWithoutProtocolPrecedingChars = /[-_.\/]$/;
  twttr.txt.regexen.invalidDomainChars = stringSupplant("#{punct}#{spaces_group}#{invalid_chars_group}", twttr.txt.regexen);
  twttr.txt.regexen.validDomainChars = regexSupplant(/[^#{invalidDomainChars}]/);
  twttr.txt.regexen.validSubdomain = regexSupplant(/(?:(?:#{validDomainChars}(?:[_-]|#{validDomainChars})*)?#{validDomainChars}\.)/);
  twttr.txt.regexen.validDomainName = regexSupplant(/(?:(?:#{validDomainChars}(?:-|#{validDomainChars})*)?#{validDomainChars}\.)/);
  twttr.txt.regexen.validGTLD = regexSupplant(RegExp(
    '(?:(?:' +
    'abogado|academy|accountants|active|actor|aero|agency|airforce|allfinanz|alsace|archi|army|arpa|' +
    'asia|associates|attorney|auction|audio|autos|axa|band|bar|bargains|bayern|beer|berlin|best|bid|' +
    'bike|bio|biz|black|blackfriday|blue|bmw|bnpparibas|boo|boutique|brussels|budapest|build|' +
    'builders|business|buzz|bzh|cab|cal|camera|camp|cancerresearch|capetown|capital|caravan|cards|' +
    'care|career|careers|casa|cash|cat|catering|center|ceo|cern|channel|cheap|christmas|chrome|' +
    'church|citic|city|claims|cleaning|click|clinic|clothing|club|codes|coffee|college|cologne|com|' +
    'community|company|computer|condos|construction|consulting|contractors|cooking|cool|coop|country|' +
    'credit|creditcard|crs|cruises|cuisinella|cymru|dad|dance|dating|day|deals|degree|democrat|' +
    'dental|dentist|desi|diamonds|diet|digital|direct|directory|discount|dnp|domains|durban|dvag|eat|' +
    'edu|education|email|emerck|engineer|engineering|enterprises|equipment|esq|estate|eus|events|' +
    'exchange|expert|exposed|fail|farm|feedback|finance|financial|fish|fishing|fitness|flights|' +
    'florist|flsmidth|fly|foo|forsale|foundation|frl|frogans|fund|furniture|futbol|gal|gallery|gbiz|' +
    'gent|gift|gifts|gives|glass|gle|global|globo|gmail|gmo|gmx|google|gop|gov|graphics|gratis|green|' +
    'gripe|guide|guitars|guru|hamburg|haus|healthcare|help|here|hiphop|hiv|holdings|holiday|homes|' +
    'horse|host|hosting|house|how|ibm|immo|immobilien|industries|info|ing|ink|institute|insure|int|' +
    'international|investments|jetzt|jobs|joburg|juegos|kaufen|kim|kitchen|kiwi|koeln|krd|kred|' +
    'lacaixa|land|lawyer|lease|lgbt|life|lighting|limited|limo|link|loans|london|lotto|ltda|luxe|' +
    'luxury|maison|management|mango|market|marketing|media|meet|melbourne|meme|menu|miami|mil|mini|' +
    'mobi|moda|moe|monash|mortgage|moscow|motorcycles|mov|museum|nagoya|name|navy|net|network|' +
    'neustar|new|nexus|ngo|nhk|ninja|nra|nrw|nyc|okinawa|ong|onl|ooo|org|organic|otsuka|ovh|paris|' +
    'partners|parts|pharmacy|photo|photography|photos|physio|pics|pictures|pink|pizza|place|plumbing|' +
    'pohl|poker|post|praxi|press|pro|prod|productions|prof|properties|property|pub|qpon|quebec|' +
    'realtor|recipes|red|rehab|reise|reisen|ren|rentals|repair|report|republican|rest|restaurant|' +
    'reviews|rich|rio|rip|rocks|rodeo|rsvp|ruhr|ryukyu|saarland|sarl|sca|scb|schmidt|schule|scot|' +
    'services|sexy|shiksha|shoes|singles|social|software|sohu|solar|solutions|soy|space|spiegel|' +
    'supplies|supply|support|surf|surgery|suzuki|systems|taipei|tatar|tattoo|tax|technology|tel|' +
    'tienda|tips|tirol|today|tokyo|tools|top|town|toys|trade|training|travel|tui|university|uno|uol|' +
    'vacations|vegas|ventures|vermÃ¶gensberater|vermÃ¶gensberatung|versicherung|vet|viajes|villas|' +
    'vision|vlaanderen|vodka|vote|voting|voto|voyage|wales|wang|watch|webcam|website|wed|wedding|' +
    'whoswho|wien|wiki|williamhill|wme|work|works|world|wtc|wtf|xxx|xyz|yachts|yandex|yoga|yokohama|' +
    'youtube|zip|zone|Ğ´ĞµÑ‚Ğ¸|Ğ¼Ğ¾ÑĞºĞ²Ğ°|Ğ¾Ğ½Ğ»Ğ°Ğ¹Ğ½|Ğ¾Ñ€Ğ³|Ñ€ÑƒÑ|ÑĞ°Ğ¹Ñ‚|Ø¨Ø§Ø²Ø§Ø±|Ø´Ø¨ÙƒØ©|Ù…ÙˆÙ‚Ø¹|à¤¸à¤‚à¤—à¤ à¤¨|ã¿ã‚“ãª|ä¸–ç•Œ|ä¸­ä¿¡|ä¸­æ–‡ç½‘|ä¼ä¸š|ä½›å±±|å…¬å¸|' +
    'å…¬ç›Š|å•†åŸ|å•†æ ‡|åœ¨çº¿|å¹¿ä¸œ|æˆ‘çˆ±ä½ |æ‰‹æœº|æ”¿åŠ¡|æœºæ„|æ¸¸æˆ|ç§»åŠ¨|ç»„ç»‡æœºæ„|ç½‘å€|ç½‘ç»œ|é›†å›¢|ì‚¼ì„±' +
    ')(?=[^0-9a-zA-Z@]|$))'));
  twttr.txt.regexen.validCCTLD = regexSupplant(RegExp(
    '(?:(?:' +
    'ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bl|bm|bn|bo|bq|' +
    'br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cu|cv|cw|cx|cy|cz|de|dj|dk|dm|do|dz|' +
    'ec|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|' +
    'gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|' +
    'la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mf|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|' +
    'my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|' +
    'rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|ss|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|' +
    'tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|um|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|za|zm|zw|' +
    'Ğ±ĞµĞ»|Ğ¼ĞºĞ´|Ğ¼Ğ¾Ğ½|Ñ€Ñ„|ÑÑ€Ğ±|ÑƒĞºÑ€|Ò›Ğ°Ğ·|Ø§Ù„Ø§Ø±Ø¯Ù†|Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±|Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©|Ø§Ù„Ù…ØºØ±Ø¨|Ø§Ù…Ø§Ø±Ø§Øª|Ø§ÛŒØ±Ø§Ù†|Ø¨Ú¾Ø§Ø±Øª|ØªÙˆÙ†Ø³|Ø³ÙˆØ¯Ø§Ù†|Ø³ÙˆØ±ÙŠØ©|' +
    'Ø¹Ø±Ø§Ù‚|Ø¹Ù…Ø§Ù†|ÙÙ„Ø³Ø·ÙŠÙ†|Ù‚Ø·Ø±|Ù…ØµØ±|Ù…Ù„ÙŠØ³ÙŠØ§|Ù¾Ø§Ú©Ø³ØªØ§Ù†|à¤­à¤¾à¤°à¤¤|à¦¬à¦¾à¦‚à¦²à¦¾|à¦­à¦¾à¦°à¦¤|à¨­à¨¾à¨°à¨¤|àª­àª¾àª°àª¤|à®‡à®¨à¯à®¤à®¿à®¯à®¾|à®‡à®²à®™à¯à®•à¯ˆ|à®šà®¿à®™à¯à®•à®ªà¯à®ªà¯‚à®°à¯|' +
    'à°­à°¾à°°à°¤à±|à¶½à¶‚à¶šà·|à¹„à¸—à¸¢|áƒ’áƒ”|ä¸­å›½|ä¸­åœ‹|å°æ¹¾|å°ç£|æ–°åŠ å¡|é¦™æ¸¯|í•œêµ­' +
    ')(?=[^0-9a-zA-Z@]|$))'));
  twttr.txt.regexen.validPunycode = regexSupplant(/(?:xn--[0-9a-z]+)/);
  twttr.txt.regexen.validSpecialCCTLD = regexSupplant(RegExp(
    '(?:(?:co|tv)(?=[^0-9a-zA-Z@]|$))'));
  twttr.txt.regexen.validDomain = regexSupplant(/(?:#{validSubdomain}*#{validDomainName}(?:#{validGTLD}|#{validCCTLD}|#{validPunycode}))/);
  twttr.txt.regexen.validAsciiDomain = regexSupplant(/(?:(?:[\-a-z0-9#{latinAccentChars}]+)\.)+(?:#{validGTLD}|#{validCCTLD}|#{validPunycode})/gi);
  twttr.txt.regexen.invalidShortDomain = regexSupplant(/^#{validDomainName}#{validCCTLD}$/i);
  twttr.txt.regexen.validSpecialShortDomain = regexSupplant(/^#{validDomainName}#{validSpecialCCTLD}$/i);

  twttr.txt.regexen.validPortNumber = regexSupplant(/[0-9]+/);

  twttr.txt.regexen.validGeneralUrlPathChars = regexSupplant(/[a-z0-9!\*';:=\+,\.\$\/%#\[\]\-_~@|&#{latinAccentChars}]/i);
  // Allow URL paths to contain up to two nested levels of balanced parens
  //  1. Used in Wikipedia URLs like /Primer_(film)
  //  2. Used in IIS sessions like /S(dfd346)/
  //  3. Used in Rdio URLs like /track/We_Up_(Album_Version_(Edited))/
  twttr.txt.regexen.validUrlBalancedParens = regexSupplant(
    '\\('                                   +
      '(?:'                                 +
        '#{validGeneralUrlPathChars}+'      +
        '|'                                 +
        // allow one nested level of balanced parentheses
        '(?:'                               +
          '#{validGeneralUrlPathChars}*'    +
          '\\('                             +
            '#{validGeneralUrlPathChars}+'  +
          '\\)'                             +
          '#{validGeneralUrlPathChars}*'    +
        ')'                                 +
      ')'                                   +
    '\\)'
  , 'i');
  // Valid end-of-path chracters (so /foo. does not gobble the period).
  // 1. Allow =&# for empty URL parameters and other URL-join artifacts
  twttr.txt.regexen.validUrlPathEndingChars = regexSupplant(/[\+\-a-z0-9=_#\/#{latinAccentChars}]|(?:#{validUrlBalancedParens})/i);
  // Allow @ in a url, but only in the middle. Catch things like http://example.com/@user/
  twttr.txt.regexen.validUrlPath = regexSupplant('(?:' +
    '(?:' +
      '#{validGeneralUrlPathChars}*' +
        '(?:#{validUrlBalancedParens}#{validGeneralUrlPathChars}*)*' +
        '#{validUrlPathEndingChars}'+
      ')|(?:@#{validGeneralUrlPathChars}+\/)'+
    ')', 'i');

  twttr.txt.regexen.validUrlQueryChars = /[a-z0-9!?\*'@\(\);:&=\+\$\/%#\[\]\-_\.,~|]/i;
  twttr.txt.regexen.validUrlQueryEndingChars = /[a-z0-9_&=#\/]/i;
  twttr.txt.regexen.extractUrl = regexSupplant(
    '('                                                            + // $1 total match
      '(#{validUrlPrecedingChars})'                                + // $2 Preceeding chracter
      '('                                                          + // $3 URL
        '(https?:\\/\\/)?'                                         + // $4 Protocol (optional)
        '(#{validDomain})'                                         + // $5 Domain(s)
        '(?::(#{validPortNumber}))?'                               + // $6 Port number (optional)
        '(\\/#{validUrlPath}*)?'                                   + // $7 URL Path
        '(\\?#{validUrlQueryChars}*#{validUrlQueryEndingChars})?'  + // $8 Query String
      ')'                                                          +
    ')'
  , 'gi');

  twttr.txt.regexen.validTcoUrl = /^https?:\/\/t\.co\/[a-z0-9]+/i;
  twttr.txt.regexen.urlHasProtocol = /^https?:\/\//i;
  twttr.txt.regexen.urlHasHttps = /^https:\/\//i;

  // cashtag related regex
  twttr.txt.regexen.cashtag = /[a-z]{1,6}(?:[._][a-z]{1,2})?/i;
  twttr.txt.regexen.validCashtag = regexSupplant('(^|#{spaces})(\\$)(#{cashtag})(?=$|\\s|[#{punct}])', 'gi');

  // These URL validation pattern strings are based on the ABNF from RFC 3986
  twttr.txt.regexen.validateUrlUnreserved = /[a-z0-9\-._~]/i;
  twttr.txt.regexen.validateUrlPctEncoded = /(?:%[0-9a-f]{2})/i;
  twttr.txt.regexen.validateUrlSubDelims = /[!$&'()*+,;=]/i;
  twttr.txt.regexen.validateUrlPchar = regexSupplant('(?:' +
    '#{validateUrlUnreserved}|' +
    '#{validateUrlPctEncoded}|' +
    '#{validateUrlSubDelims}|' +
    '[:|@]' +
  ')', 'i');

  twttr.txt.regexen.validateUrlScheme = /(?:[a-z][a-z0-9+\-.]*)/i;
  twttr.txt.regexen.validateUrlUserinfo = regexSupplant('(?:' +
    '#{validateUrlUnreserved}|' +
    '#{validateUrlPctEncoded}|' +
    '#{validateUrlSubDelims}|' +
    ':' +
  ')*', 'i');

  twttr.txt.regexen.validateUrlDecOctet = /(?:[0-9]|(?:[1-9][0-9])|(?:1[0-9]{2})|(?:2[0-4][0-9])|(?:25[0-5]))/i;
  twttr.txt.regexen.validateUrlIpv4 = regexSupplant(/(?:#{validateUrlDecOctet}(?:\.#{validateUrlDecOctet}){3})/i);

  // Punting on real IPv6 validation for now
  twttr.txt.regexen.validateUrlIpv6 = /(?:\[[a-f0-9:\.]+\])/i;

  // Also punting on IPvFuture for now
  twttr.txt.regexen.validateUrlIp = regexSupplant('(?:' +
    '#{validateUrlIpv4}|' +
    '#{validateUrlIpv6}' +
  ')', 'i');

  // This is more strict than the rfc specifies
  twttr.txt.regexen.validateUrlSubDomainSegment = /(?:[a-z0-9](?:[a-z0-9_\-]*[a-z0-9])?)/i;
  twttr.txt.regexen.validateUrlDomainSegment = /(?:[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?)/i;
  twttr.txt.regexen.validateUrlDomainTld = /(?:[a-z](?:[a-z0-9\-]*[a-z0-9])?)/i;
  twttr.txt.regexen.validateUrlDomain = regexSupplant(/(?:(?:#{validateUrlSubDomainSegment]}\.)*(?:#{validateUrlDomainSegment]}\.)#{validateUrlDomainTld})/i);

  twttr.txt.regexen.validateUrlHost = regexSupplant('(?:' +
    '#{validateUrlIp}|' +
    '#{validateUrlDomain}' +
  ')', 'i');

  // Unencoded internationalized domains - this doesn't check for invalid UTF-8 sequences
  twttr.txt.regexen.validateUrlUnicodeSubDomainSegment = /(?:(?:[a-z0-9]|[^\u0000-\u007f])(?:(?:[a-z0-9_\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i;
  twttr.txt.regexen.validateUrlUnicodeDomainSegment = /(?:(?:[a-z0-9]|[^\u0000-\u007f])(?:(?:[a-z0-9\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i;
  twttr.txt.regexen.validateUrlUnicodeDomainTld = /(?:(?:[a-z]|[^\u0000-\u007f])(?:(?:[a-z0-9\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i;
  twttr.txt.regexen.validateUrlUnicodeDomain = regexSupplant(/(?:(?:#{validateUrlUnicodeSubDomainSegment}\.)*(?:#{validateUrlUnicodeDomainSegment}\.)#{validateUrlUnicodeDomainTld})/i);

  twttr.txt.regexen.validateUrlUnicodeHost = regexSupplant('(?:' +
    '#{validateUrlIp}|' +
    '#{validateUrlUnicodeDomain}' +
  ')', 'i');

  twttr.txt.regexen.validateUrlPort = /[0-9]{1,5}/;

  twttr.txt.regexen.validateUrlUnicodeAuthority = regexSupplant(
    '(?:(#{validateUrlUserinfo})@)?'  + // $1 userinfo
    '(#{validateUrlUnicodeHost})'     + // $2 host
    '(?::(#{validateUrlPort}))?'        //$3 port
  , "i");

  twttr.txt.regexen.validateUrlAuthority = regexSupplant(
    '(?:(#{validateUrlUserinfo})@)?' + // $1 userinfo
    '(#{validateUrlHost})'           + // $2 host
    '(?::(#{validateUrlPort}))?'       // $3 port
  , "i");

  twttr.txt.regexen.validateUrlPath = regexSupplant(/(\/#{validateUrlPchar}*)*/i);
  twttr.txt.regexen.validateUrlQuery = regexSupplant(/(#{validateUrlPchar}|\/|\?)*/i);
  twttr.txt.regexen.validateUrlFragment = regexSupplant(/(#{validateUrlPchar}|\/|\?)*/i);

  // Modified version of RFC 3986 Appendix B
  twttr.txt.regexen.validateUrlUnencoded = regexSupplant(
    '^'                               + // Full URL
    '(?:'                             +
      '([^:/?#]+):\\/\\/'             + // $1 Scheme
    ')?'                              +
    '([^/?#]*)'                       + // $2 Authority
    '([^?#]*)'                        + // $3 Path
    '(?:'                             +
      '\\?([^#]*)'                    + // $4 Query
    ')?'                              +
    '(?:'                             +
      '#(.*)'                         + // $5 Fragment
    ')?$'
  , "i");


  // Default CSS class for auto-linked lists (along with the url class)
  var DEFAULT_LIST_CLASS = "tweet-url list-slug";
  // Default CSS class for auto-linked usernames (along with the url class)
  var DEFAULT_USERNAME_CLASS = "tweet-url username";
  // Default CSS class for auto-linked hashtags (along with the url class)
  var DEFAULT_HASHTAG_CLASS = "tweet-url hashtag";
  // Default CSS class for auto-linked cashtags (along with the url class)
  var DEFAULT_CASHTAG_CLASS = "tweet-url cashtag";
  // Options which should not be passed as HTML attributes
  var OPTIONS_NOT_ATTRIBUTES = {'urlClass':true, 'listClass':true, 'usernameClass':true, 'hashtagClass':true, 'cashtagClass':true,
                            'usernameUrlBase':true, 'listUrlBase':true, 'hashtagUrlBase':true, 'cashtagUrlBase':true,
                            'usernameUrlBlock':true, 'listUrlBlock':true, 'hashtagUrlBlock':true, 'linkUrlBlock':true,
                            'usernameIncludeSymbol':true, 'suppressLists':true, 'suppressNoFollow':true, 'targetBlank':true,
                            'suppressDataScreenName':true, 'urlEntities':true, 'symbolTag':true, 'textWithSymbolTag':true, 'urlTarget':true,
                            'invisibleTagAttrs':true, 'linkAttributeBlock':true, 'linkTextBlock': true, 'htmlEscapeNonEntities': true
                            };

  var BOOLEAN_ATTRIBUTES = {'disabled':true, 'readonly':true, 'multiple':true, 'checked':true};

  // Simple object cloning function for simple objects
  function clone(o) {
    var r = {};
    for (var k in o) {
      if (o.hasOwnProperty(k)) {
        r[k] = o[k];
      }
    }

    return r;
  }

  twttr.txt.tagAttrs = function(attributes) {
    var htmlAttrs = "";
    for (var k in attributes) {
      var v = attributes[k];
      if (BOOLEAN_ATTRIBUTES[k]) {
        v = v ? k : null;
      }
      if (v == null) continue;
      htmlAttrs += " " + twttr.txt.htmlEscape(k) + "=\"" + twttr.txt.htmlEscape(v.toString()) + "\"";
    }
    return htmlAttrs;
  };

  twttr.txt.linkToText = function(entity, text, attributes, options) {
    if (!options.suppressNoFollow) {
      attributes.rel = "nofollow";
    }
    // if linkAttributeBlock is specified, call it to modify the attributes
    if (options.linkAttributeBlock) {
      options.linkAttributeBlock(entity, attributes);
    }
    // if linkTextBlock is specified, call it to get a new/modified link text
    if (options.linkTextBlock) {
      text = options.linkTextBlock(entity, text);
    }
    var d = {
      text: text,
      attr: twttr.txt.tagAttrs(attributes)
    };
    return stringSupplant("<a#{attr}>#{text}</a>", d);
  };

  twttr.txt.linkToTextWithSymbol = function(entity, symbol, text, attributes, options) {
    var taggedSymbol = options.symbolTag ? "<" + options.symbolTag + ">" + symbol + "</"+ options.symbolTag + ">" : symbol;
    text = twttr.txt.htmlEscape(text);
    var taggedText = options.textWithSymbolTag ? "<" + options.textWithSymbolTag + ">" + text + "</"+ options.textWithSymbolTag + ">" : text;

    if (options.usernameIncludeSymbol || !symbol.match(twttr.txt.regexen.atSigns)) {
      return twttr.txt.linkToText(entity, taggedSymbol + taggedText, attributes, options);
    } else {
      return taggedSymbol + twttr.txt.linkToText(entity, taggedText, attributes, options);
    }
  };

  twttr.txt.linkToHashtag = function(entity, text, options) {
    var hash = text.substring(entity.indices[0], entity.indices[0] + 1);
    var hashtag = twttr.txt.htmlEscape(entity.hashtag);
    var attrs = clone(options.htmlAttrs || {});
    attrs.href = options.hashtagUrlBase + hashtag;
    attrs.title = "#" + hashtag;
    attrs["class"] = options.hashtagClass;
    if (hashtag.charAt(0).match(twttr.txt.regexen.rtl_chars)){
      attrs["class"] += " rtl";
    }
    if (options.targetBlank) {
      attrs.target = '_blank';
    }

    return twttr.txt.linkToTextWithSymbol(entity, hash, hashtag, attrs, options);
  };

  twttr.txt.linkToCashtag = function(entity, text, options) {
    var cashtag = twttr.txt.htmlEscape(entity.cashtag);
    var attrs = clone(options.htmlAttrs || {});
    attrs.href = options.cashtagUrlBase + cashtag;
    attrs.title = "$" + cashtag;
    attrs["class"] =  options.cashtagClass;
    if (options.targetBlank) {
      attrs.target = '_blank';
    }

    return twttr.txt.linkToTextWithSymbol(entity, "$", cashtag, attrs, options);
  };

  twttr.txt.linkToMentionAndList = function(entity, text, options) {
    var at = text.substring(entity.indices[0], entity.indices[0] + 1);
    var user = twttr.txt.htmlEscape(entity.screenName);
    var slashListname = twttr.txt.htmlEscape(entity.listSlug);
    var isList = entity.listSlug && !options.suppressLists;
    var attrs = clone(options.htmlAttrs || {});
    attrs["class"] = (isList ? options.listClass : options.usernameClass);
    attrs.href = isList ? options.listUrlBase + user + slashListname : options.usernameUrlBase + user;
    if (!isList && !options.suppressDataScreenName) {
      attrs['data-screen-name'] = user;
    }
    if (options.targetBlank) {
      attrs.target = '_blank';
    }

    return twttr.txt.linkToTextWithSymbol(entity, at, isList ? user + slashListname : user, attrs, options);
  };

  twttr.txt.linkToUrl = function(entity, text, options) {
    var url = entity.url;
    var displayUrl = url;
    var linkText = twttr.txt.htmlEscape(displayUrl);

    // If the caller passed a urlEntities object (provided by a Twitter API
    // response with include_entities=true), we use that to render the display_url
    // for each URL instead of it's underlying t.co URL.
    var urlEntity = (options.urlEntities && options.urlEntities[url]) || entity;
    if (urlEntity.display_url) {
      linkText = twttr.txt.linkTextWithEntity(urlEntity, options);
    }

    var attrs = clone(options.htmlAttrs || {});

    if (!url.match(twttr.txt.regexen.urlHasProtocol)) {
      url = "http://" + url;
    }
    attrs.href = url;

    if (options.targetBlank) {
      attrs.target = '_blank';
    }

    // set class only if urlClass is specified.
    if (options.urlClass) {
      attrs["class"] = options.urlClass;
    }

    // set target only if urlTarget is specified.
    if (options.urlTarget) {
      attrs.target = options.urlTarget;
    }

    if (!options.title && urlEntity.display_url) {
      attrs.title = urlEntity.expanded_url;
    }

    return twttr.txt.linkToText(entity, linkText, attrs, options);
  };

  twttr.txt.linkTextWithEntity = function (entity, options) {
    var displayUrl = entity.display_url;
    var expandedUrl = entity.expanded_url;

    // Goal: If a user copies and pastes a tweet containing t.co'ed link, the resulting paste
    // should contain the full original URL (expanded_url), not the display URL.
    //
    // Method: Whenever possible, we actually emit HTML that contains expanded_url, and use
    // font-size:0 to hide those parts that should not be displayed (because they are not part of display_url).
    // Elements with font-size:0 get copied even though they are not visible.
    // Note that display:none doesn't work here. Elements with display:none don't get copied.
    //
    // Additionally, we want to *display* ellipses, but we don't want them copied.  To make this happen we
    // wrap the ellipses in a tco-ellipsis class and provide an onCopy handler that sets display:none on
    // everything with the tco-ellipsis class.
    //
    // Exception: pic.twitter.com images, for which expandedUrl = "https://twitter.com/#!/username/status/1234/photo/1
    // For those URLs, display_url is not a substring of expanded_url, so we don't do anything special to render the elided parts.
    // For a pic.twitter.com URL, the only elided part will be the "https://", so this is fine.

    var displayUrlSansEllipses = displayUrl.replace(/â€¦/g, ""); // We have to disregard ellipses for matching
    // Note: we currently only support eliding parts of the URL at the beginning or the end.
    // Eventually we may want to elide parts of the URL in the *middle*.  If so, this code will
    // become more complicated.  We will probably want to create a regexp out of display URL,
    // replacing every ellipsis with a ".*".
    if (expandedUrl.indexOf(displayUrlSansEllipses) != -1) {
      var displayUrlIndex = expandedUrl.indexOf(displayUrlSansEllipses);
      var v = {
        displayUrlSansEllipses: displayUrlSansEllipses,
        // Portion of expandedUrl that precedes the displayUrl substring
        beforeDisplayUrl: expandedUrl.substr(0, displayUrlIndex),
        // Portion of expandedUrl that comes after displayUrl
        afterDisplayUrl: expandedUrl.substr(displayUrlIndex + displayUrlSansEllipses.length),
        precedingEllipsis: displayUrl.match(/^â€¦/) ? "â€¦" : "",
        followingEllipsis: displayUrl.match(/â€¦$/) ? "â€¦" : ""
      };
      for (var k in v) {
        if (v.hasOwnProperty(k)) {
          v[k] = twttr.txt.htmlEscape(v[k]);
        }
      }
      // As an example: The user tweets "hi http://longdomainname.com/foo"
      // This gets shortened to "hi http://t.co/xyzabc", with display_url = "â€¦nname.com/foo"
      // This will get rendered as:
      // <span class='tco-ellipsis'> <!-- This stuff should get displayed but not copied -->
      //   â€¦
      //   <!-- There's a chance the onCopy event handler might not fire. In case that happens,
      //        we include an &nbsp; here so that the â€¦ doesn't bump up against the URL and ruin it.
      //        The &nbsp; is inside the tco-ellipsis span so that when the onCopy handler *does*
      //        fire, it doesn't get copied.  Otherwise the copied text would have two spaces in a row,
      //        e.g. "hi  http://longdomainname.com/foo".
      //   <span style='font-size:0'>&nbsp;</span>
      // </span>
      // <span style='font-size:0'>  <!-- This stuff should get copied but not displayed -->
      //   http://longdomai
      // </span>
      // <span class='js-display-url'> <!-- This stuff should get displayed *and* copied -->
      //   nname.com/foo
      // </span>
      // <span class='tco-ellipsis'> <!-- This stuff should get displayed but not copied -->
      //   <span style='font-size:0'>&nbsp;</span>
      //   â€¦
      // </span>
      v['invisible'] = options.invisibleTagAttrs;
      return stringSupplant("<span class='tco-ellipsis'>#{precedingEllipsis}<span #{invisible}>&nbsp;</span></span><span #{invisible}>#{beforeDisplayUrl}</span><span class='js-display-url'>#{displayUrlSansEllipses}</span><span #{invisible}>#{afterDisplayUrl}</span><span class='tco-ellipsis'><span #{invisible}>&nbsp;</span>#{followingEllipsis}</span>", v);
    }
    return displayUrl;
  };

  twttr.txt.autoLinkEntities = function(text, entities, options) {
    options = clone(options || {});

    options.hashtagClass = options.hashtagClass || DEFAULT_HASHTAG_CLASS;
    options.hashtagUrlBase = options.hashtagUrlBase || "https://twitter.com/#!/search?q=%23";
    options.cashtagClass = options.cashtagClass || DEFAULT_CASHTAG_CLASS;
    options.cashtagUrlBase = options.cashtagUrlBase || "https://twitter.com/#!/search?q=%24";
    options.listClass = options.listClass || DEFAULT_LIST_CLASS;
    options.usernameClass = options.usernameClass || DEFAULT_USERNAME_CLASS;
    options.usernameUrlBase = options.usernameUrlBase || "https://twitter.com/";
    options.listUrlBase = options.listUrlBase || "https://twitter.com/";
    options.htmlAttrs = twttr.txt.extractHtmlAttrsFromOptions(options);
    options.invisibleTagAttrs = options.invisibleTagAttrs || "style='position:absolute;left:-9999px;'";

    // remap url entities to hash
    var urlEntities, i, len;
    if(options.urlEntities) {
      urlEntities = {};
      for(i = 0, len = options.urlEntities.length; i < len; i++) {
        urlEntities[options.urlEntities[i].url] = options.urlEntities[i];
      }
      options.urlEntities = urlEntities;
    }

    var result = "";
    var beginIndex = 0;

    // sort entities by start index
    entities.sort(function(a,b){ return a.indices[0] - b.indices[0]; });

    var nonEntity = options.htmlEscapeNonEntities ? twttr.txt.htmlEscape : function(text) {
      return text;
    };

    for (var i = 0; i < entities.length; i++) {
      var entity = entities[i];
      result += nonEntity(text.substring(beginIndex, entity.indices[0]));

      if (entity.url) {
        result += twttr.txt.linkToUrl(entity, text, options);
      } else if (entity.hashtag) {
        result += twttr.txt.linkToHashtag(entity, text, options);
      } else if (entity.screenName) {
        result += twttr.txt.linkToMentionAndList(entity, text, options);
      } else if (entity.cashtag) {
        result += twttr.txt.linkToCashtag(entity, text, options);
      }
      beginIndex = entity.indices[1];
    }
    result += nonEntity(text.substring(beginIndex, text.length));
    return result;
  };

  twttr.txt.autoLinkWithJSON = function(text, json, options) {
    // map JSON entity to twitter-text entity
    if (json.user_mentions) {
      for (var i = 0; i < json.user_mentions.length; i++) {
        // this is a @mention
        json.user_mentions[i].screenName = json.user_mentions[i].screen_name;
      }
    }

    if (json.hashtags) {
      for (var i = 0; i < json.hashtags.length; i++) {
        // this is a #hashtag
        json.hashtags[i].hashtag = json.hashtags[i].text;
      }
    }

    if (json.symbols) {
      for (var i = 0; i < json.symbols.length; i++) {
        // this is a $CASH tag
        json.symbols[i].cashtag = json.symbols[i].text;
      }
    }

    // concatenate all entities
    var entities = [];
    for (var key in json) {
      entities = entities.concat(json[key]);
    }

    // modify indices to UTF-16
    twttr.txt.modifyIndicesFromUnicodeToUTF16(text, entities);

    return twttr.txt.autoLinkEntities(text, entities, options);
  };

  twttr.txt.extractHtmlAttrsFromOptions = function(options) {
    var htmlAttrs = {};
    for (var k in options) {
      var v = options[k];
      if (OPTIONS_NOT_ATTRIBUTES[k]) continue;
      if (BOOLEAN_ATTRIBUTES[k]) {
        v = v ? k : null;
      }
      if (v == null) continue;
      htmlAttrs[k] = v;
    }
    return htmlAttrs;
  };

  twttr.txt.autoLink = function(text, options) {
    var entities = twttr.txt.extractEntitiesWithIndices(text, {extractUrlsWithoutProtocol: false});
    return twttr.txt.autoLinkEntities(text, entities, options);
  };

  twttr.txt.autoLinkUsernamesOrLists = function(text, options) {
    var entities = twttr.txt.extractMentionsOrListsWithIndices(text);
    return twttr.txt.autoLinkEntities(text, entities, options);
  };

  twttr.txt.autoLinkHashtags = function(text, options) {
    var entities = twttr.txt.extractHashtagsWithIndices(text);
    return twttr.txt.autoLinkEntities(text, entities, options);
  };

  twttr.txt.autoLinkCashtags = function(text, options) {
    var entities = twttr.txt.extractCashtagsWithIndices(text);
    return twttr.txt.autoLinkEntities(text, entities, options);
  };

  twttr.txt.autoLinkUrlsCustom = function(text, options) {
    var entities = twttr.txt.extractUrlsWithIndices(text, {extractUrlsWithoutProtocol: false});
    return twttr.txt.autoLinkEntities(text, entities, options);
  };

  twttr.txt.removeOverlappingEntities = function(entities) {
    entities.sort(function(a,b){ return a.indices[0] - b.indices[0]; });

    var prev = entities[0];
    for (var i = 1; i < entities.length; i++) {
      if (prev.indices[1] > entities[i].indices[0]) {
        entities.splice(i, 1);
        i--;
      } else {
        prev = entities[i];
      }
    }
  };

  twttr.txt.extractEntitiesWithIndices = function(text, options) {
    var entities = twttr.txt.extractUrlsWithIndices(text, options)
                    .concat(twttr.txt.extractMentionsOrListsWithIndices(text))
                    .concat(twttr.txt.extractHashtagsWithIndices(text, {checkUrlOverlap: false}))
                    .concat(twttr.txt.extractCashtagsWithIndices(text));

    if (entities.length == 0) {
      return [];
    }

    twttr.txt.removeOverlappingEntities(entities);
    return entities;
  };

  twttr.txt.extractMentions = function(text) {
    var screenNamesOnly = [],
        screenNamesWithIndices = twttr.txt.extractMentionsWithIndices(text);

    for (var i = 0; i < screenNamesWithIndices.length; i++) {
      var screenName = screenNamesWithIndices[i].screenName;
      screenNamesOnly.push(screenName);
    }

    return screenNamesOnly;
  };

  twttr.txt.extractMentionsWithIndices = function(text) {
    var mentions = [],
        mentionOrList,
        mentionsOrLists = twttr.txt.extractMentionsOrListsWithIndices(text);

    for (var i = 0 ; i < mentionsOrLists.length; i++) {
      mentionOrList = mentionsOrLists[i];
      if (mentionOrList.listSlug == '') {
        mentions.push({
          screenName: mentionOrList.screenName,
          indices: mentionOrList.indices
        });
      }
    }

    return mentions;
  };

  /**
   * Extract list or user mentions.
   * (Presence of listSlug indicates a list)
   */
  twttr.txt.extractMentionsOrListsWithIndices = function(text) {
    if (!text || !text.match(twttr.txt.regexen.atSigns)) {
      return [];
    }

    var possibleNames = [],
        slashListname;

    text.replace(twttr.txt.regexen.validMentionOrList, function(match, before, atSign, screenName, slashListname, offset, chunk) {
      var after = chunk.slice(offset + match.length);
      if (!after.match(twttr.txt.regexen.endMentionMatch)) {
        slashListname = slashListname || '';
        var startPosition = offset + before.length;
        var endPosition = startPosition + screenName.length + slashListname.length + 1;
        possibleNames.push({
          screenName: screenName,
          listSlug: slashListname,
          indices: [startPosition, endPosition]
        });
      }
    });

    return possibleNames;
  };


  twttr.txt.extractReplies = function(text) {
    if (!text) {
      return null;
    }

    var possibleScreenName = text.match(twttr.txt.regexen.validReply);
    if (!possibleScreenName ||
        RegExp.rightContext.match(twttr.txt.regexen.endMentionMatch)) {
      return null;
    }

    return possibleScreenName[1];
  };

  twttr.txt.extractUrls = function(text, options) {
    var urlsOnly = [],
        urlsWithIndices = twttr.txt.extractUrlsWithIndices(text, options);

    for (var i = 0; i < urlsWithIndices.length; i++) {
      urlsOnly.push(urlsWithIndices[i].url);
    }

    return urlsOnly;
  };

  twttr.txt.extractUrlsWithIndices = function(text, options) {
    if (!options) {
      options = {extractUrlsWithoutProtocol: true};
    }
    if (!text || (options.extractUrlsWithoutProtocol ? !text.match(/\./) : !text.match(/:/))) {
      return [];
    }

    var urls = [];

    while (twttr.txt.regexen.extractUrl.exec(text)) {
      var before = RegExp.$2, url = RegExp.$3, protocol = RegExp.$4, domain = RegExp.$5, path = RegExp.$7;
      var endPosition = twttr.txt.regexen.extractUrl.lastIndex,
          startPosition = endPosition - url.length;

      // if protocol is missing and domain contains non-ASCII characters,
      // extract ASCII-only domains.
      if (!protocol) {
        if (!options.extractUrlsWithoutProtocol
            || before.match(twttr.txt.regexen.invalidUrlWithoutProtocolPrecedingChars)) {
          continue;
        }
        var lastUrl = null,
            asciiEndPosition = 0;
        domain.replace(twttr.txt.regexen.validAsciiDomain, function(asciiDomain) {
          var asciiStartPosition = domain.indexOf(asciiDomain, asciiEndPosition);
          asciiEndPosition = asciiStartPosition + asciiDomain.length;
          lastUrl = {
            url: asciiDomain,
            indices: [startPosition + asciiStartPosition, startPosition + asciiEndPosition]
          };
          if (path
              || asciiDomain.match(twttr.txt.regexen.validSpecialShortDomain)
              || !asciiDomain.match(twttr.txt.regexen.invalidShortDomain)) {
            urls.push(lastUrl);
          }
        });

        // no ASCII-only domain found. Skip the entire URL.
        if (lastUrl == null) {
          continue;
        }

        // lastUrl only contains domain. Need to add path and query if they exist.
        if (path) {
          lastUrl.url = url.replace(domain, lastUrl.url);
          lastUrl.indices[1] = endPosition;
        }
      } else {
        // In the case of t.co URLs, don't allow additional path characters.
        if (url.match(twttr.txt.regexen.validTcoUrl)) {
          url = RegExp.lastMatch;
          endPosition = startPosition + url.length;
        }
        urls.push({
          url: url,
          indices: [startPosition, endPosition]
        });
      }
    }

    return urls;
  };

  twttr.txt.extractHashtags = function(text) {
    var hashtagsOnly = [],
        hashtagsWithIndices = twttr.txt.extractHashtagsWithIndices(text);

    for (var i = 0; i < hashtagsWithIndices.length; i++) {
      hashtagsOnly.push(hashtagsWithIndices[i].hashtag);
    }

    return hashtagsOnly;
  };

  twttr.txt.extractHashtagsWithIndices = function(text, options) {
    if (!options) {
      options = {checkUrlOverlap: true};
    }

    if (!text || !text.match(twttr.txt.regexen.hashSigns)) {
      return [];
    }

    var tags = [];

    text.replace(twttr.txt.regexen.validHashtag, function(match, before, hash, hashText, offset, chunk) {
      var after = chunk.slice(offset + match.length);
      if (after.match(twttr.txt.regexen.endHashtagMatch))
        return;
      var startPosition = offset + before.length;
      var endPosition = startPosition + hashText.length + 1;
      tags.push({
        hashtag: hashText,
        indices: [startPosition, endPosition]
      });
    });

    if (options.checkUrlOverlap) {
      // also extract URL entities
      var urls = twttr.txt.extractUrlsWithIndices(text);
      if (urls.length > 0) {
        var entities = tags.concat(urls);
        // remove overlap
        twttr.txt.removeOverlappingEntities(entities);
        // only push back hashtags
        tags = [];
        for (var i = 0; i < entities.length; i++) {
          if (entities[i].hashtag) {
            tags.push(entities[i]);
          }
        }
      }
    }

    return tags;
  };

  twttr.txt.extractCashtags = function(text) {
    var cashtagsOnly = [],
        cashtagsWithIndices = twttr.txt.extractCashtagsWithIndices(text);

    for (var i = 0; i < cashtagsWithIndices.length; i++) {
      cashtagsOnly.push(cashtagsWithIndices[i].cashtag);
    }

    return cashtagsOnly;
  };

  twttr.txt.extractCashtagsWithIndices = function(text) {
    if (!text || text.indexOf("$") == -1) {
      return [];
    }

    var tags = [];

    text.replace(twttr.txt.regexen.validCashtag, function(match, before, dollar, cashtag, offset, chunk) {
      var startPosition = offset + before.length;
      var endPosition = startPosition + cashtag.length + 1;
      tags.push({
        cashtag: cashtag,
        indices: [startPosition, endPosition]
      });
    });

    return tags;
  };

  twttr.txt.modifyIndicesFromUnicodeToUTF16 = function(text, entities) {
    twttr.txt.convertUnicodeIndices(text, entities, false);
  };

  twttr.txt.modifyIndicesFromUTF16ToUnicode = function(text, entities) {
    twttr.txt.convertUnicodeIndices(text, entities, true);
  };

  twttr.txt.getUnicodeTextLength = function(text) {
    return text.replace(twttr.txt.regexen.non_bmp_code_pairs, ' ').length;
  };

  twttr.txt.convertUnicodeIndices = function(text, entities, indicesInUTF16) {
    if (entities.length == 0) {
      return;
    }

    var charIndex = 0;
    var codePointIndex = 0;

    // sort entities by start index
    entities.sort(function(a,b){ return a.indices[0] - b.indices[0]; });
    var entityIndex = 0;
    var entity = entities[0];

    while (charIndex < text.length) {
      if (entity.indices[0] == (indicesInUTF16 ? charIndex : codePointIndex)) {
        var len = entity.indices[1] - entity.indices[0];
        entity.indices[0] = indicesInUTF16 ? codePointIndex : charIndex;
        entity.indices[1] = entity.indices[0] + len;

        entityIndex++;
        if (entityIndex == entities.length) {
          // no more entity
          break;
        }
        entity = entities[entityIndex];
      }

      var c = text.charCodeAt(charIndex);
      if (0xD800 <= c && c <= 0xDBFF && charIndex < text.length - 1) {
        // Found high surrogate char
        c = text.charCodeAt(charIndex + 1);
        if (0xDC00 <= c && c <= 0xDFFF) {
          // Found surrogate pair
          charIndex++;
        }
      }
      codePointIndex++;
      charIndex++;
    }
  };

  // this essentially does text.split(/<|>/)
  // except that won't work in IE, where empty strings are ommitted
  // so "<>".split(/<|>/) => [] in IE, but is ["", "", ""] in all others
  // but "<<".split("<") => ["", "", ""]
  twttr.txt.splitTags = function(text) {
    var firstSplits = text.split("<"),
        secondSplits,
        allSplits = [],
        split;

    for (var i = 0; i < firstSplits.length; i += 1) {
      split = firstSplits[i];
      if (!split) {
        allSplits.push("");
      } else {
        secondSplits = split.split(">");
        for (var j = 0; j < secondSplits.length; j += 1) {
          allSplits.push(secondSplits[j]);
        }
      }
    }

    return allSplits;
  };

  twttr.txt.hitHighlight = function(text, hits, options) {
    var defaultHighlightTag = "em";

    hits = hits || [];
    options = options || {};

    if (hits.length === 0) {
      return text;
    }

    var tagName = options.tag || defaultHighlightTag,
        tags = ["<" + tagName + ">", "</" + tagName + ">"],
        chunks = twttr.txt.splitTags(text),
        i,
        j,
        result = "",
        chunkIndex = 0,
        chunk = chunks[0],
        prevChunksLen = 0,
        chunkCursor = 0,
        startInChunk = false,
        chunkChars = chunk,
        flatHits = [],
        index,
        hit,
        tag,
        placed,
        hitSpot;

    for (i = 0; i < hits.length; i += 1) {
      for (j = 0; j < hits[i].length; j += 1) {
        flatHits.push(hits[i][j]);
      }
    }

    for (index = 0; index < flatHits.length; index += 1) {
      hit = flatHits[index];
      tag = tags[index % 2];
      placed = false;

      while (chunk != null && hit >= prevChunksLen + chunk.length) {
        result += chunkChars.slice(chunkCursor);
        if (startInChunk && hit === prevChunksLen + chunkChars.length) {
          result += tag;
          placed = true;
        }

        if (chunks[chunkIndex + 1]) {
          result += "<" + chunks[chunkIndex + 1] + ">";
        }

        prevChunksLen += chunkChars.length;
        chunkCursor = 0;
        chunkIndex += 2;
        chunk = chunks[chunkIndex];
        chunkChars = chunk;
        startInChunk = false;
      }

      if (!placed && chunk != null) {
        hitSpot = hit - prevChunksLen;
        result += chunkChars.slice(chunkCursor, hitSpot) + tag;
        chunkCursor = hitSpot;
        if (index % 2 === 0) {
          startInChunk = true;
        } else {
          startInChunk = false;
        }
      } else if(!placed) {
        placed = true;
        result += tag;
      }
    }

    if (chunk != null) {
      if (chunkCursor < chunkChars.length) {
        result += chunkChars.slice(chunkCursor);
      }
      for (index = chunkIndex + 1; index < chunks.length; index += 1) {
        result += (index % 2 === 0 ? chunks[index] : "<" + chunks[index] + ">");
      }
    }

    return result;
  };

  var MAX_LENGTH = 140;

  // Characters not allowed in Tweets
  var INVALID_CHARACTERS = [
    // BOM
    fromCode(0xFFFE),
    fromCode(0xFEFF),

    // Special
    fromCode(0xFFFF),

    // Directional Change
    fromCode(0x202A),
    fromCode(0x202B),
    fromCode(0x202C),
    fromCode(0x202D),
    fromCode(0x202E)
  ];

  // Returns the length of Tweet text with consideration to t.co URL replacement
  // and chars outside the basic multilingual plane that use 2 UTF16 code points
  twttr.txt.getTweetLength = function(text, options) {
    if (!options) {
      options = {
          // These come from https://api.twitter.com/1/help/configuration.json
          // described by https://dev.twitter.com/docs/api/1/get/help/configuration
          short_url_length: 22,
          short_url_length_https: 23
      };
    }
    var textLength = twttr.txt.getUnicodeTextLength(text),
        urlsWithIndices = twttr.txt.extractUrlsWithIndices(text);
    twttr.txt.modifyIndicesFromUTF16ToUnicode(text, urlsWithIndices);

    for (var i = 0; i < urlsWithIndices.length; i++) {
    	// Subtract the length of the original URL
      textLength += urlsWithIndices[i].indices[0] - urlsWithIndices[i].indices[1];

      // Add 23 characters for URL starting with https://
      // Otherwise add 22 characters
      if (urlsWithIndices[i].url.toLowerCase().match(twttr.txt.regexen.urlHasHttps)) {
         textLength += options.short_url_length_https;
      } else {
        textLength += options.short_url_length;
      }
    }

    return textLength;
  };

  // Check the text for any reason that it may not be valid as a Tweet. This is meant as a pre-validation
  // before posting to api.twitter.com. There are several server-side reasons for Tweets to fail but this pre-validation
  // will allow quicker feedback.
  //
  // Returns false if this text is valid. Otherwise one of the following strings will be returned:
  //
  //   "too_long": if the text is too long
  //   "empty": if the text is nil or empty
  //   "invalid_characters": if the text contains non-Unicode or any of the disallowed Unicode characters
  twttr.txt.isInvalidTweet = function(text) {
    if (!text) {
      return "empty";
    }

    // Determine max length independent of URL length
    if (twttr.txt.getTweetLength(text) > MAX_LENGTH) {
      return "too_long";
    }

    for (var i = 0; i < INVALID_CHARACTERS.length; i++) {
      if (text.indexOf(INVALID_CHARACTERS[i]) >= 0) {
        return "invalid_characters";
      }
    }

    return false;
  };

  twttr.txt.isValidTweetText = function(text) {
    return !twttr.txt.isInvalidTweet(text);
  };

  twttr.txt.isValidUsername = function(username) {
    if (!username) {
      return false;
    }

    var extracted = twttr.txt.extractMentions(username);

    // Should extract the username minus the @ sign, hence the .slice(1)
    return extracted.length === 1 && extracted[0] === username.slice(1);
  };

  var VALID_LIST_RE = regexSupplant(/^#{validMentionOrList}$/);

  twttr.txt.isValidList = function(usernameList) {
    var match = usernameList.match(VALID_LIST_RE);

    // Must have matched and had nothing before or after
    return !!(match && match[1] == "" && match[4]);
  };

  twttr.txt.isValidHashtag = function(hashtag) {
    if (!hashtag) {
      return false;
    }

    var extracted = twttr.txt.extractHashtags(hashtag);

    // Should extract the hashtag minus the # sign, hence the .slice(1)
    return extracted.length === 1 && extracted[0] === hashtag.slice(1);
  };

  twttr.txt.isValidUrl = function(url, unicodeDomains, requireProtocol) {
    if (unicodeDomains == null) {
      unicodeDomains = true;
    }

    if (requireProtocol == null) {
      requireProtocol = true;
    }

    if (!url) {
      return false;
    }

    var urlParts = url.match(twttr.txt.regexen.validateUrlUnencoded);

    if (!urlParts || urlParts[0] !== url) {
      return false;
    }

    var scheme = urlParts[1],
        authority = urlParts[2],
        path = urlParts[3],
        query = urlParts[4],
        fragment = urlParts[5];

    if (!(
      (!requireProtocol || (isValidMatch(scheme, twttr.txt.regexen.validateUrlScheme) && scheme.match(/^https?$/i))) &&
      isValidMatch(path, twttr.txt.regexen.validateUrlPath) &&
      isValidMatch(query, twttr.txt.regexen.validateUrlQuery, true) &&
      isValidMatch(fragment, twttr.txt.regexen.validateUrlFragment, true)
    )) {
      return false;
    }

    return (unicodeDomains && isValidMatch(authority, twttr.txt.regexen.validateUrlUnicodeAuthority)) ||
           (!unicodeDomains && isValidMatch(authority, twttr.txt.regexen.validateUrlAuthority));
  };

  function isValidMatch(string, regex, optional) {
    if (!optional) {
      // RegExp["$&"] is the text of the last match
      // blank strings are ok, but are falsy, so we check stringiness instead of truthiness
      return ((typeof string === "string") && string.match(regex) && RegExp["$&"] === string);
    }

    // RegExp["$&"] is the text of the last match
    return (!string || (string.match(regex) && RegExp["$&"] === string));
  }

  if (typeof module != 'undefined' && module.exports) {
    module.exports = twttr.txt;
  }

  if (typeof define == 'function' && define.amd) {
    define([], twttr.txt);
  }

  if (typeof window != 'undefined') {
    if (window.twttr) {
      for (var prop in twttr) {
        window.twttr[prop] = twttr[prop];
      }
    } else {
      window.twttr = twttr;
    }
  }
})();

(function($){

if (!window.Hatena) window.Hatena = {};
if (!Hatena.Diary) Hatena.Diary = {};

Hatena.Diary.BUG = function (error, append) {
    $.ajax({
        type: 'get',
        url: Hatena.Diary.URLGenerator.static_url('/js/vendor/stacktrace/stacktrace.js'),
        cache: true,
        dataType: 'script'
    }).done(function () {
        var trace;
        try {
            trace = printStackTrace({ e: error });
            trace.pop();        // printStackTraceã‚’é™¤ã
        } catch (e) {
            trace = null;
        }
        var msg = '[BUG] ' + (append || '') + ' ' + error;

        var content = [
            location.href,
            msg,
            trace
        ];

        var img = new Image();
        img.src = (Hatena.Diary.data('admin-domain') || '') + '/api/bug?content=' + encodeURIComponent(JSON.stringify(content));
        Hatena.Diary.LOG(msg);
        Hatena.Diary.LOG(trace);
    });
};

/**
 * Ajax ã® onerror ã¨ã‹ã«ã„ã‚Œã‚‹
 */
Hatena.Diary.REPORT_BUG = function (name) {
    return function (error) {
        Hatena.Diary.BUG(error, name);
    };
};

Hatena.Diary.LOG = (function() {
    if (window.console && window.console.log) {
        if (console.log.bind) {
            return console.log.bind(console);
        } else {
            return function(obj) { console.log(obj) };
        }
    } else {
        return function() {};
    }
})();

Hatena.Diary.data = function (name) {
    var html = document.documentElement;
    return html.getAttribute('data-' + name);
};

Hatena.Diary.SpeedTrack = {
    init: function () {
        if (this.initialized === true) return;

        // é€ä¿¡ã¯100åˆ†ã®1ã«ã—ãŸã„
        this.enabled = Math.floor(Math.random() * 100) === 0;

        var now = new Date();
        this.startTime = now;
        this.data = {};
        this.checkpoints = [];
        this.elapsedTimes = [];

        this.initialized = true;
    },
    setDomain: function (domain) {
        this.domain = domain;
    },
    setPage: function (page) {
        this.page = page;
    },
    record: function (name) {
        var endTime = new Date();
        var elapsed = endTime.getTime() - this.startTime.getTime();
        this.checkpoints.push(name);
        this.elapsedTimes.push(elapsed);

        this.send();
    },
    send: function () {
        if (this._send) return this._send();

        // 1ç§’ã«1å›ã¾ã§é€ä¿¡ã™ã‚‹
        this._send = _.throttle(function () {
            if (!this.enabled) return;

            var img = new Image();
            img.src = (Hatena.Diary.data('admin-domain') || '') + '/api/track/speed?' + $.param({
                track_domain: this.domain,
                track_page: this.page,
                track_speed_checkpoints: this.checkpoints,
                track_speed_elapsed_times: this.elapsedTimes,
                blog : Hatena.Diary.data('blogs-uri-base') || ('http://' + Hatena.Diary.data('blog'))
            });

            this.checkpoints = [];
            this.elapsedTimes = [];
        }, 1000);

        this._send();
    }
};
Hatena.Diary.SpeedTrack.init();

Hatena.Diary.Dropdown = {
    id : 'hatena-diary-dropdown',

    /*
     * options:
     * - show       [Boolean] dropdown ã®è¡¨ç¤ºéè¡¨ç¤ºã‚’æ˜ç¤ºçš„ã«æŒ‡å®š (ç„¡æŒ‡å®šã§ãƒˆã‚°ãƒ«)
     * - key        [String]  ã™ã§ã« dropdown ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã¦ã‚‚ã“ã®å€¤ãŒé•ã£ã¦ã„ãŸã‚‰ç ´æ£„ã—ã¦ä½œã‚ŠãªãŠã™
     * - parent     [String]  è¦ª dropdown ã® id ã‚’æŒ‡å®šã™ã‚‹ã€‚è¦ªãŒæ¶ˆãˆãŸã‚‰è‡ªåˆ†ã‚‚æ¶ˆãˆã‚‹
     * - className  [String]  containerè¦ç´ ã«æŒ‡å®šã™ã‚‹ã‚¯ãƒ©ã‚¹ã€‚ã‚¹ãƒšãƒ¼ã‚¹åŒºåˆ‡ã‚Šã§è¤‡æ•°æŒ‡å®š ("a-class b-class")
     * - callback   [function(dropdown, messenger)]
     */
    toggle : function (uri, init, id, options) {
        id = Hatena.Diary.Dropdown.id + (id ? '-' + id : uri.replace(/\//, '-'));
        options = options || {};

        if (typeof options !== 'object') {
            Hatena.Diary.BUG('Wrong type of options given: ' + options);
        }

        var $container = $(document.getElementById(id));

        if (options.key) {
            if ($container.length && $container.attr('data-dropdown-key') !== options.key) {
                $container.remove();
                $container = $();
            }
        }

        if ($container.length) {
            var show;
            if ('show' in options) {
                show = !!options.show;
            } else {
                show = !$container.is(':visible');
            }
            $container[ show ? 'fadeIn' : 'fadeOut' ]('fast');
            $container.trigger('dropdown:' + (show ? 'show' : 'hide') + ':start');
        } else if ('show' in options && options.show === false) {
            // nop
        } else {
            $container = $('<div class="hatena-globalheader-window"></div>').
                hide().
                attr('id', id).
                appendTo(document.body);

            if (options.key) {
                $container.attr('data-dropdown-key', options.key);
            }

            if (options.parent) {
                var parent = document.getElementById(Hatena.Diary.Dropdown.id + '-' + options.parent);
                $(parent).on('dropdown:hide:start', function () {
                    $container.fadeOut('fast');
                });
            }

            if (options.className) {
                $container.addClass(options.className);
            }

            var iframe = $('<iframe frameborder="0" width="150" height="300"></iframe>').appendTo($container);

            var dropdown = iframe[0];

            if (!/^https?:/.test(uri)) {
                uri = Hatena.Diary.data('admin-domain') + uri;
            }

            var messenger = Messenger.createForFrame(dropdown, uri);
            messenger.addEventListener('close', function () {
                Hatena.Diary.Window.hide(iframe);
            });

            messenger.addEventListener('init', function (css) {
                if (css) $container.css(css);
                messenger.send('init', init);
            });

            messenger.addEventListener('resize', function (css) {
                if (css) $container.css(css);
            });

            messenger.addEventListener('reload', function (data) {
                location.reload(true);
            });

            if (options.callback) {
                options.callback(dropdown, messenger);
            }

            Hatena.Diary.Window.show($container, {
                destroy : function () {
                    $container.remove();
                    messenger.destroy();
                },
                keepOthers: !!options.parent || false
            });

            if (init) {
                if ('left' in init || 'right' in init || 'top' in init) {
                    var offset = $container.offset();
                    if ('left' in init) {
                        offset.left = init.left;
                    } else if ('right' in init) {
                        offset.left = init.right - $container.width();
                    }
                    if ('top' in init) {
                        offset.top = init.top;
                    }
                    $container.offset(offset);
                }

                if ('height' in init) {
                    $container.height(init.height);
                }
            }
        }
    }
};

Hatena.Diary.Feedback = {
    id : 'hatena-diary-feedback',

    toggle : function (uri) {
        var feedback = document.getElementById(Hatena.Diary.Feedback.id);
        if (feedback) {
            $(feedback).fadeToggle('fast');
        } else {
            var iframe = $('<iframe frameborder="0" width="320" height="320"></iframe>').
                hide().
                attr('id', Hatena.Diary.Feedback.id).
                appendTo(document.body);

            feedback = iframe[0];

            var messenger = Messenger.createForFrame(feedback, uri + '?uri=' + encodeURIComponent(location.href) + '&page_id=' + encodeURIComponent(Hatena.Diary.data('page')));
            messenger.addEventListener('close', function () {
                Hatena.Diary.Window.hide(iframe);
            });

            messenger.addEventListener('resize', function (css) {
                if (css) iframe.css(css);
            });

            Hatena.Diary.Window.show(iframe, {
                destroy : function () {
                    iframe.remove();
                    messenger.destroy();
                },
                fixScroll : true
            });
       }
    }
};

Hatena.Diary.Util = {
    canonicalizeColor : function (color) {
        if (color.match(/#([0-9a-f]{6})/i)) {
            color = RegExp.$1;
        } else
        if (color.match(/#([0-9a-f])([0-9a-f])([0-9a-f])/i)) {
            color = RegExp.$1 + RegExp.$1 + RegExp.$2 + RegExp.$2 + RegExp.$3 + RegExp.$3;
        } else
        if (color.match(/rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+)\s*)?/)) {
            var transparent = (RegExp.$4.length && +RegExp.$4 === 0);
            color =
                transparent ? null :
                ("0" + (+RegExp.$1).toString(16)).slice(-2) +
                ("0" + (+RegExp.$2).toString(16)).slice(-2) +
                ("0" + (+RegExp.$3).toString(16)).slice(-2);
        } else {
            color = null;
        }
        return color ? color.toLowerCase() : null;
    },

    updateDynamicPieces : function (container) {
        container = $(container[0]);
        Hatena.Locale.updateTimestamps(container[0]);
        if (Hatena.Star && Hatena.Star.WindowObserver.loaded) {
            container.find('span.hatena-star-comment-container, span.hatena-star-star-container').remove();
            Hatena.Star.EntryLoader.loadNewEntries(container[0]);
        }
        Hatena.Diary.Util.loadNicknames(container);
        Hatena.Diary.setupMathJax(container);
    },

    // iframeã®é«˜ã•ãŒdocument.body.heightã«ãªã‚‹ã‚ˆã†ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ã‚‹
    // Operaã®JSON.stringifyãŒãƒã‚°ã£ã¦ã‚‹ã®ã§ï¼Œã“ã“ã§å¸å è©³ã—ãã¯Redmineã®ãƒã‚±ãƒƒãƒˆ615å‚ç…§
    // Operaã®ãƒã‚°ãŒç›´ã£ãŸã‚‰*1ã¯æ¶ˆã—ã¦ã‚ˆã„
    sendResizeRequest : function  () {
        Hatena.Diary.Pages.send('resize', {
            height: $(document.body).height() * 1
        });
    },
    backupTab: function (args) {
        var $container = args.$container;
        var key = args.key;
        var onchange = args.onchange;

        var isAvailable;

        try {
            isAvailable = localStorage;
        } catch(ignore) {}

        if (!isAvailable) return;

        var localStorageKey = 'Hatena.Diary.Util.backupTab.' + key;

        var getValue = function() {
            return localStorage[localStorageKey];
        };

        var setValue = function(value) {
            localStorage[localStorageKey] = value;
        };

        var restoreLastValue = function() {
            var lastValue = getValue();
            if (lastValue === undefined) return;

            var $input = $container.find('input[value="' + lastValue + '"]');
            $input.trigger('click');
            onchange($input);
        };

        restoreLastValue();

        $container.delegate('input', 'change', function() {
            var $input = $(this);

            setValue($input.val());

            onchange($input);
        });
    },
    preventDuplicateSubmit: function($form) {
        // äºŒé‡submitå¯¾ç­–
        // submitãƒœã‚¿ãƒ³ãŒè¤‡æ•°ã‚ã‚‹ã¨ãsubmitå‰ã«disabledã«ã™ã‚‹ã¨å€¤è‡ªä½“é€ã‚‰ã‚Œãªããªã£ã¦ã—ã¾ã†å¯¾ç­–ã§ï¼ŒsubmitãŒæ¸ˆã‚“ã§ã‹ã‚‰disabledã«ã—ã¦ã„ã¾ã™
        _.defer(function() {
            $form.find(':submit').prop('disabled', true);
        });
    },
    extend: function(target, parent) {
        // parentã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’é †ã«targetã«ç§»ã—ã¦ã„ã
        // targetã«ã™ã§ã«å­˜åœ¨ã™ã‚‹ã¨ãã¯ç§»ã•ãªã„
        for (var key in parent) if (parent.hasOwnProperty(key) && ! target.hasOwnProperty(key)) {
            target[key] = parent[key];
        }

    },
    // get_resource()ãŒçœŸã«ãªã£ãŸã‚‰ä¸€åº¦ã ã‘main_fun()ã™ã‚‹
    // ä¸€åº¦åŒæœŸçš„ã«ãƒã‚§ãƒƒã‚¯ã—ï¼Œãã®å¾Œã¯polling
    // intervalãŒæŒ‡å®šã•ã‚Œã¦ã„ãªã‘ã‚Œã°500msã”ã¨
    waitForResource: function(get_resource, main_fun, interval) {
        if (!interval) interval = 500;
        var role = function() {
            if (get_resource()) {
                main_fun();
                return true;
            }
            return false;
        };
        if (role()) return;
        var timer = setInterval(function() {
            if (role()) clearInterval(timer);
        }, interval);
    },
    setupTipsy: function() {
        // touchãƒ‡ãƒã‚¤ã‚¹ã§ã¯ä¸€åº¦ã‚¿ãƒƒãƒ—ã—ãªã„ã¨tipsyå‡ºãªã„ï¼Œä½¿ã„å‹æ‰‹ä¸‹ãŒã‚‹ã®ã§tipsyç„¡åŠ¹åŒ–
        if (Hatena.Diary.Browser.isTouch) return;

        if ( ! $.fn.tipsy ) return;

         // n
        // w e
        //  s

        var rules = {
            left: 'e',
            right: 'w',
            bottom: 'n',
            top: 's',
            northwest: 'nw',
            southwest: 'sw',
            northeast: 'ne',
            southeast: 'se'
        };
        var $body = $(document.body);

        for (var rule in rules) if (rules.hasOwnProperty(rule)) {
            var selector = '.tipsy-' + rule;
            var gravity = rules[rule];

            $body.tipsy({
                gravity: gravity,
                fade: false,
                opacity: 1.0,
                live: selector
            });
        }
    },
    // $.paramã®é€†
    // input: key=value1&key=value2 å½¢å¼ã®String
    // output: { key: [value1, value2] }
    decodeParam : function (data) {
        var params = {};
        var values = data.split('&');
        for (var i = 0, len = values.length; i < len; i++) {
            if (!values[i].match(/[=]/)) continue;
            var kv = values[i].split('=');
            var key = decodeURIComponent(kv[0]);
            var val = kv[1].replace(/\+/g, ' ');
            if (!params[key]) params[key] = [];
            params[key].push(decodeURIComponent(val));
        }

        return params;
    },
    // decodeParamã§é…åˆ—ã«ãªã£ãŸã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’locationã«å¤‰æ›ã™ã‚‹
    // decodeParamã§ã¯å€¤ãŒ1ã¤ã®ã¨ãã‚‚é…åˆ—ã‚’è¿”ã™ã®ã§, é…åˆ—ã®è¦ç´ ãŒ1ã¤ã®ã¨ãã¯ã‚­ãƒ¼ã‚’å¤‰æ›´ã—ãªã„
    // input: { key: value1, key1: [value1], key2: [value1,value2] }
    // output: location?key=value1&key1=value1&key2[]=value1&key2[]=value2
    locationWithParam: function (params) {
        _.each(params, function(value, key){
            if ( _.isArray(value) && value.length == 1) params[key] = value[0];
        });
        return location.pathname + '?' + $.param(params);
    },
    replaceYoutubeURL: function ($entry) {
        // ä»¥å‰è²¼ã‚Šä»˜ã‘ãŸyoutubeå‹•ç”»ãŒå†ç”Ÿã•ã‚Œãªã„ã®ã§iframeã®srcã®URLã‚’è¡¨ç¤ºæ™‚ã«æ›¸ãæ›ãˆã‚‹
        $entry.find('iframe[src*="youtube.com/"],iframe[src*="youtube.googleapis.com/"]').each(function() {
            var $iframe = $(this);
            var src = $iframe.attr('src');
            $iframe.attr('src', Hatena.Diary.Util.migrateOldStyleYoutubeURL(src));
        });
    },
    migrateOldStyleYoutubeURL: function (url) {
        // XXX: /v/ä»¥ä¸‹ã®URLã¯iframeã«å…¥ã‚Œã‚‰ã‚Œãªããªã£ãŸï¼/embed/ã«ã—ãŸã‚‰å†ç”Ÿã§ãã‚‹ï¼ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚‚æ¶ˆã™å¿…è¦ã‚ã‚‹ï¼
        // æ—§: https://www.youtube.com/v/***&aaa=bbbb&
        // æ–°: https://www.youtube.com/embed/***
        // /embed/ ã§ãƒ—ãƒ¬ã‚¤ãƒªã‚¹ãƒˆã‚’è²¼ã‚Šä»˜ã‘ã‚‹å ´åˆã¯?list= ã¨ã„ã†ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒæ¥ã‚‹ã®ã§ï¼Œ/v/ã˜ã‚ƒãªã„ã¨ãã¯ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æ¶ˆã—ã¦ã¯ã„ã‘ãªã„
        if (url.match(/\/v\//i)) {
            url = url.split(/[?&]/)[0];
            url = url.replace(/\/v\//i, '/embed/');
        }

        // XXX: youtube.googleapis.com ã¯iPhoneã§å†ç”Ÿã§ããªããªã£ãŸï¼www.youtube.com/embed/ ãªã‚‰å†ç”Ÿã§ãã‚‹ï¼
        url = url.replace('youtube.googleapis.com', 'www.youtube.com');

        // XXX: httpsã‚‚è²¼ã‚Œãªããªã£ãŸã®ã§//ã§è²¼ã£ã¦ç¾åœ¨ã®ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã¨ä¸€è‡´ã•ã›ã‚‹
        url = url.replace(/^https:/, '');
        return url;
    },
    showFlashMessage: function (message) {
        var $container = $(
            '<div class="hatena-globalheader-window message">' +
              '<div class="message">' + message + '</div>' +
            '</div>')
            .css({
                width: 200,
                height: 'auto',
                right: 'auto',
                left: ($(window).width() - 200) / 2
            })
            .appendTo(document.body);

        Hatena.Diary.Window.show($container, {
            destroy : function () {
                $container.remove();
            }
        });
    },
    // windowã®åº§æ¨™ã‚’è¡¨ã™hashã‚’window.openã«æŒ‡å®šã§ãã‚‹æ–‡å­—åˆ—ã«å¤‰æ›
    // position: { width, height, left, top } valueã¯int
    // return: "width=\d,height=\d,left=\d,top=\d"
    positionToPositionString: function(position) {
        return _.map(_.keys(position), function(key) {
            return key + '=' + position[key];
        }).join(',');
    },
    // åˆ©ç”¨è¦ç´„å†åŒæ„ notices.count.jsonã®è¿”ã‚Šå€¤ã‚’å—ã‘å–ã‚‹
    needComrule2013: function(data) {
        if (!data.need_comrule2013) return;
        _.defer(function() {
            var BASE     = location.hostname.match(/\.hatena\.[^:]+/)[0];
            window.top.location.href = 'http://www' + BASE + '/login?need_comrule2013=1';
        });
    },

    // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã«ã¤ã„ã¦ãã‚‹è¦ç´ ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
    // $container: ç›´ä¸‹ã«å­è¦ç´ è¦ç´ ã‚’1ã¤ã ã‘å«ã‚€è¦ç´  å…ˆé ­ã®1ã¤ã ã‘ç›£è¦–ã™ã‚‹ã®ã§ï¼Œè¤‡æ•°ã®è¦ç´ ã‚’ç›£è¦–ã—ãŸã„å ´åˆã¯ï¼Œã“ã®é–¢æ•°ã‚’è¤‡æ•°å›å‘¼ã‚“ã§ãã ã•ã„
    // enable_bottom: #containerã®ä¸‹ã«åˆã‚ã›ã¦æ­¢ã‚ã‚‹ã¨ãtrue
    initScrollFollowedElement: function ($container, enable_bottom) {
        var $target = $($container.children()[0]);

        if ($target.length === 0) {
            Hatena.Diary.BUG("ad element not found: " + $container.html(), 'followedAd');
            return;
        }

        var $document = $(document);
        var $page_container = $('#container');

        var onScroll = function() {
            var container_offset = $container.offset();
            var scroll_top = $document.scrollTop();
            var target_height = $target.height();
            var page_container_top = $page_container.offset().top;
            var page_container_height = $page_container.height();

            if (scroll_top + page_container_top < container_offset.top) {
                // ä¸Šã§å›ºå®š
                $target.css({
                    position: 'static'
                });
            } else if (!enable_bottom || (scroll_top <  page_container_height - target_height)) {
                // çœŸã‚“ä¸­ ã¤ã„ã¦ãã‚‹

                $target.css({
                    position: 'fixed',
                    top: page_container_top,
                    left: container_offset.left
                });
            } else {
                // ä¸‹ã§å›ºå®š #containerã®åº•è¾ºã«åˆã‚ã›ã‚‹
                $target.css({
                    position: 'absolute',
                    top: page_container_top + page_container_height - target_height,
                    left: container_offset.left
                });

            }
        };

        var onResize = function() {

            var container_offset = $container.offset();

            $target.css({
                left: container_offset.left
            });
        };

        $(window).scroll(onScroll).resize(onResize);
        onScroll();

    },

    // $container å†…ã® data-load-nicknames ã®ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ ã‚’å–ã£ã¦ãã¦è¦ç´ ã®ãƒ†ã‚­ã‚¹ãƒˆã‚’å·®ã—æ›¿ãˆã‚‹
    loadNicknames: function($container) {
        var template = _.template('<span class="user-name-nickname"><%- nickname %></span> <span class="user-name-paren">(</span><span class="user-name-hatena-id">id:<%- hatena_id %></span><span class="user-name-paren">)</span>');
        var $elements = $container.find('[data-load-nickname]');
        var user_names = [];
        $elements.each(function() {
            var $element = $(this);
            var user_name = $element.attr('data-user-name');
            user_names.push(user_name);
        });
        user_names = _.uniq(user_names);
        if (user_names.length === 0) return;
        if (user_names.length === 1) user_names.push('hatenablog'); // APIã®ä»•æ§˜ä¸Šuser_namesã¯2ã¤ä»¥ä¸Šå¿…è¦

        var displayNicknames = function(friendships) {
            $elements.each(function() {
                $element = $(this);
                var user_name = $element.attr('data-user-name');
                if (friendships[user_name] && user_name != friendships[user_name].name) {
                    var html = template({
                        nickname: friendships[user_name].name,
                        hatena_id: user_name
                    });
                    $element.html(html);
                }
            });
        };

        // JSONPã®ä¸Šé™ã«é€¹ã—ãªã„ãŸã‚å°åˆ†ã‘ã«ã—ã¦é€šä¿¡
        var request = function() {
            var user_names_current = user_names.splice(0, 20);
            $.ajax({
                url: 'https://h.hatena.ne.jp/api/friendships/show.json',
                dataType: 'jsonp',
                data: {
                    url_name: user_names_current
                },
                traditional: true
            }).done(function(friendships) {
                displayNicknames(friendships);
                if(user_names.length > 0) {
                    request();
                }
            });
        };

        request();

    },

    // W3CDTFå½¢å¼ã®Stringã‚’ãƒ‘ãƒ¼ã‚¹ã—ã¦Dateã‚’è¿”ã™
    // IE8ä»¥å‰ã¯new Date( )ã§ã“ã®å½¢å¼ã‚’ãƒ‘ãƒ¼ã‚¹ã§ããªã„ã®ã§æ­£è¦è¡¨ç¾ã§ãªã‚“ã¨ã‹ã™ã‚‹
    // datetime: YYYY-MM-DDThh:mm:ss å½¢å¼ã®String
    // returns: Date | null
    parseW3CDTF: function(datetime) {
        var matched = datetime.match(/(\d+)-(\d+)-(\d+)T(\d+):(\d+):(\d+)/);
        if (!matched) return null;
        return new Date(+matched[1], +matched[2] - 1, +matched[3], +matched[4], +matched[5], +matched[6]);
    },

    // ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ˜ãƒƒãƒ€å›ºå®šæ™‚ã«idæŒ‡å®šã®ãƒªãƒ³ã‚¯ã‚’è¸ã‚€ã¨ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã®è¦ç´ ãŒã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ˜ãƒƒãƒ€ã«éš ã‚Œã‚‹å•é¡Œã®å¯¾å¿œ
    // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«çµ‚ã‚ã£ãŸã‚ã¨ï¼Œã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ˜ãƒƒãƒ€åˆ†ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚’ã¡ã‚‡ã£ã¨æˆ»ã™
    // ä»–ã®JSãŒã‚¤ãƒ™ãƒ³ãƒˆè¦‹ã¦ã‚‹ã¨ã‹ã§ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ä½ç½®å¤‰ã‚ã‚‰ãªã„ã“ã¨ã‚‚ã‚ã‚‹ã®ã§
    // ã—ã°ã‚‰ãã—ã¦å¤‰åŒ–ãªã‘ã‚Œã°ã‚ãã‚‰ã‚ã‚‹
    setupScrollAdjustForFixedGlobalHeader: function() {
        var $header = $('#globalheader-container');
        if ($header.css('position') !== 'fixed') return;

        var headerHeight = $('#globalheader-container').height();
        var $document = $(document);

        $document.on('click', 'a[href^="#"]', function() {
            var positionBefore = $document.scrollTop();
            var checkCount = 0;
            var check = function() {
                if ($document.scrollTop() !== positionBefore) {
                    window.scrollBy(0, -headerHeight);
                } else if (checkCount++ < 10) {
                    setTimeout(check, 0);
                }
            };
            setTimeout(check, 0);
        });
    },
    // æŒ‡å®šã—ãŸURLã®ç”»åƒãƒªã‚½ãƒ¼ã‚¹ã‚’ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã¾ã§å¾…ã¤
    // ãƒ­ãƒ¼ãƒ‰ã§ããŸã‚‰resolve, å¤±æ•—ã™ã‚‹ã¨rejectã•ã‚Œã‚‹Deferredã‚’è¿”ã™
    loadImages: function(urls) {
        var loaded = $.Deferred();
        var images;

        var count = 0;
        var onload = function() {
            count++;
            if (count === urls.length) {
                loaded.resolve(images);
            }
        };
        var onerror = function() {
            loaded.reject(images);
        };

        images = _.map(urls, function(url) {
            var $img = $('<img>');
            $img.on('load', onload)
                .on('error', onerror)
                .attr('src', url);
            return $img[0];
        });

        return loaded.promise();
    }
};

// Google Image Charts APIã¯deprecatedãªã®ã§mathjaxã§ç½®ãæ›ãˆã‚‹
// å…¨ã¦ã®ãƒ–ãƒ­ã‚°ã§å¿…è¦ã«ãªã‚‹ã‚ã‘ã§ã¯ãªã„ã®ã§ï¼Œå¿…è¦ã«ãªã£ã¦ã‹ã‚‰èª­ã¿è¾¼ã‚€
// TeXè¨˜æ³•ç”Ÿæˆã™ã‚‹ã¨altã«TeXã®ã‚½ãƒ¼ã‚¹ãŒå…¥ã£ã¦ã‚‹ã®ã§ï¼ŒaltãŒã‚ã£ãŸã‚‰ç½®ãæ›ãˆã‚‹
// å‚è€ƒï¼š http://docs.mathjax.org/en/latest/typeset.html
Hatena.Diary.setupMathJax = (function() {
    var loaded;

    return function($root) {
        var $imgs = $root.find('img[src*="chart.apis.google.com/chart?cht=tx&chl="]');
        if (!$imgs.length) return;

        if (!loaded) {
            loaded = $.getScript("https://cdn.mathjax.org/mathjax/2.3-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML");
        }

        loaded.done(function() {
            $imgs.each(function() {
                var $img = $(this);
                var source = $img.attr('alt');
                if (!source) return;
                var $script = $('<script type="math/tex">');
                $img.replaceWith($script);
                MathJax.HTML.setScript($script[0], source);
            });
            MathJax.Hub.Queue(["Typeset", MathJax.Hub, $root[0]]);
        });
    };
})();

Hatena.Diary.Location = {
    setup : function () {
        var data = location.search.slice(1);

        Hatena.Diary.Location._params = Hatena.Diary.Util.decodeParam(data);
    },

    param : function (name) {
        return this.params()[name] ? this.params()[name][0] : null;
    },

    params : function () {
        if (!this._params) this.setup();
        return this._params;
    }
};

Hatena.Diary.Window = {
    shown : [],

    init : function () {
        var self = this;

        $(document.body).click(function (event) {
            var windowClicked = _.any(self.shown, function(win) {
                return win.win[0] === event.target || $.contains(win.win[0], event.target);
            });
            // è¡¨ç¤ºä¸­ã®windowãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸã¨ãã¯é–‰ã˜ãªã„
            if (windowClicked) {
                return;
            }

            self.hideAll();
        });

        self.init = function () { };
    },

    /**
     * opts.closeExplicitlyãŒtrueã ã¨ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ä»¥å¤–ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã‚‚é–‰ã˜ã‚‰ã‚Œãªã„
     * ãã®å ´åˆã€æ˜ç¤ºçš„ã«ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’é–‰ã˜ã‚‹å¿…è¦ãŒã‚ã‚‹
     * opts.keepOthers ãŒçœŸå€¤ã ã¨ä»–ã®ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã‚’è‡ªå‹•çš„ã«é–‰ã˜ãªã„
     */
    show : function (win, opts) {
        var self = this;
        if (!opts) opts = {};
        self.init();
        if (opts.keepOthers) {
             // nop
        } else {
            self.hideAll();
        }
        if (opts.fixScroll) {
            Hatena.Diary.FixScroll.enable();
        }
        if (opts.center) {
            Hatena.Diary.Window._setCenter(win);
        }
        if (opts.showBackground) {
            Hatena.Diary.Window._showBackground();
        }
        self.shown.push({
            closeExplicitly : !!opts.closeExplicitly,
            win : win,
            destroy : opts.destroy || function () {},
            fixScroll: !!opts.fixScroll,
            showBackground: !!opts.showBackground
        });
        win.fadeIn('fast');
    },

    hide : function (win) {
        var self = this;
        for (var i = 0, len = self.shown.length; i < len; i++) {
            var obj = self.shown[i];
            if (obj.win === win) {
                win.fadeOut('fast', obj.destroy);
                $('.modal-window-background').fadeOut('fast');
                if (obj.fixScroll) {
                    Hatena.Diary.FixScroll.disable();
                }
                break;
            }
        }
    },

    hideAll : function () {
        var self = this, restWindows = [];
        for (var i = 0, len = self.shown.length; i < len; i++) {
            if (self.shown[i].closeExplicitly) {
                restWindows.push(self.shown[i]);
            } else {
                self.hide(self.shown[i].win);
            }
        }
        self.shown = restWindows;
    },

    toggle: function (win, option) {
        if (win.is(':visible')) {
            this.hide(win);
            return false;
        } else {
            this.show(win, option);
            return true;
        }
    },

    _setCenter: function (win) {
        var setSize = _.throttle(function() {
            if (!$(win).is(':visible')) {
                $(window).off('resize', setSize);
                return;
            }
            var margin_top = ($(window).height()-$(win).height())/2;
            var margin_left = ($(window).width()-$(win).width())/2;
            $(win).css({
                top:  margin_top,
                left: margin_left
            });
        }, 100);

        $(window).on('resize', setSize);

        setSize();
    },

    _showBackground: function() {
        var $screen = $('<div>').addClass('modal-window-background');
        $screen.appendTo(document.body);
    }
};

Hatena.Diary.FixScroll = {
    enabled: false,
    enable: function() {
        if (this.enabled) return;

        this._top = $(window).scrollTop();
        $(window).bind('scroll', this._scrollHandler);
        this.enabled = true;
    },
    disable: function() {
        if (!this.enabled) return;

        $(window).unbind('scroll', this._scrollHandler);
        this.enabled = false;
    },

    _top: 0,
    _scrollHandler: function(event) {
        if ($(window).scrollTop() == Hatena.Diary.FixScroll._top) return;

        $(window).scrollTop(Hatena.Diary.FixScroll._top);
    }
};

Hatena.Diary.Pages = {
    Blogs      : {},
    Admin      : {},
    BlogsTouch : {},
    AdminTouch : {},

    // ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ˜ãƒƒãƒ€ãŒãƒ­ãƒ¼ãƒ‰ã•ã‚Œã¦ï¼Œé€šä¿¡ãŒå®Œäº†ã™ã‚‹ã¨resolveã•ã‚Œã‚‹deferred
    // loadGlobalHeaderå†…ã§å†ä»£å…¥ã•ã‚Œã‚‹
    // ã“ã“ã§å®šç¾©ã—ãŸdeferredã¯ãƒ€ãƒŸãƒ¼ã§ï¼Œå³åº§ã«rejectã—ã¦ã„ã‚‹
    // å‘¼ã³å‡ºã—å…ƒã§å®šç¾©æ¸ˆã‹ã©ã†ã‹ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹æ‰‹é–“ã‚’çœããŸã‚ï¼
    infoLoaded : (function() {
        var nullObject = $.Deferred();
        nullObject.reject();
        return nullObject.promise();
    })(),

    // init.jsonã‚’å‘¼ã³å‡ºã™
    // ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ˜ãƒƒãƒ€ã‹ã‚‰åˆ©ç”¨ã™ã‚‹
    // å®Œäº†ã™ã‚‹ã¨ï¼Œinfo, privateInfo ã‚’resolveã™ã‚‹Deferredã‚’è¿”ã™
    loadInfo: function() {
        var blogUri = decodeURIComponent(location.hash.substring(1));
        var circleId = Hatena.Diary.Location.param('circle_id');

        var init;
        if (circleId) {
            init = $.ajax({
                url: '/api/init/circle',
                type: 'get',
                dataType: 'json',
                data: {
                    circle_id: circleId
                }
            });
        } else {
            init = $.ajax({
                url : '/api/init',
                type : "get",
                dataType : 'json',
                data : {
                    name : Hatena.Diary.data('name'),
                    blog : blogUri
                }
            });
        }

        var loaded = $.Deferred();
        init.done(function(info) {
            var privateInfo = info['private'];

            // privateã«å…¥ã£ã¦ã‚‹æƒ…å ±ã¯å¤–å´ã«é…ä¿¡ã—ãªã„ï¼ã“ã“ã§å‰Šé™¤ã—ã¦ãŠã
            delete info['private'];

            // å¤–ã®ãƒ•ãƒ¬ãƒ¼ãƒ ã«æƒ…å ±é€ã‚‹
            Hatena.Diary.Pages.send('init', info);

            // ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ˜ãƒƒãƒ€ã«æƒ…å ±é€ã‚‹ï¼ã“ã£ã¡ã¯privateInfoã‚‚ä¸€ç·’ã«æ¸¡ã™
            loaded.resolve(info, privateInfo);
        });

        return loaded.promise();
    },

    messenger : null,

    createForParent : function () {
        this.messenger = Messenger.createForParent();

        if (Hatena.Diary.data('page') != 'globalheader') {
            $('.close').on('click', function (e) {
                Hatena.Diary.Pages.send('close', { name : window.name });
                return false;
            });

            $(window).keyup(function (e) {
                if (keyString(e) == 'S-ESC') {
                    Hatena.Diary.Pages.send('close', { name : window.name });
                }
            });
        }
    },

    createForFrame : function (iframe, url) {
        this.messenger = Messenger.createForFrame(iframe, url);
    },

    send : function (type, obj) {
        Hatena.Diary.LOG(['send', type, obj]);
        try {
            this.messenger.send(type, obj);
        } catch(error) {
            Hatena.Diary.BUG(error, 'Pages.send(' + type + ')');
        }
    },

    message : function (type, func) {
        this.messenger.addEventListener(type, func);
    },

    // è¡¨ç¤ºä¸­ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ãƒ‡ãƒã‚¤ã‚¹ã‚’è¿”ã™
    // pc | touch
    device: function() {
        var device = Hatena.Diary.data('device');

        if (!device) {
            var message = "device is undefined, page: " + Hatena.Diary.data('page') + ", location: " + location.href;
            Hatena.Diary.BUG(message);
        }

        return device || 'pc';
    }
};

Hatena.Diary.Devices = {
    /*
     * PC ã§è¦‹ã¦ã‚‹ãƒ¦ãƒ¼ã‚¶ã«ã¯ä½•ã‚‚ã—ãªã„
     * touch ã§è¦‹ã¦ã‚‹ãƒ¦ãƒ¼ã‚¶ã¯
     *   cookie ãŒã‚ã‚Œã°ãã‚Œã‚’è¦‹ã¦ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
     *   UA ãŒã‚ã‚Œã°ãã‚Œã‚’è¦‹ã¦ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
     */

    use : function (device) {
        if (this.userAgent() == device) {
            document.cookie = 'device=' + encodeURIComponent(device) + '; expires=' + new Date(0).toUTCString() + '; path=/';
        } else {
            var expires = new Date();
            expires.setFullYear(expires.getFullYear() + 1);
            document.cookie = 'device=' + encodeURIComponent(device) + '; expires=' + expires.toUTCString() + '; path=/';
        }
        location.reload();
    },

    userAgent : function () {
        // adminãƒ‰ãƒ¡ã‚¤ãƒ³ã®ãƒ˜ãƒƒãƒ€ãƒ¼ã«ã‚‚åŒã˜ã‚‚ã®ãŒã‚ã‚Šã¾ã™
        if (Hatena.Diary.Browser.isTouch) {
            return 'touch';
        } else {
            return 'pc';
        }
    }
};

// https://github.com/wakaba/opentenjs/blob/master/src/Ten.base.js
Hatena.Diary.Browser = {
    isIE: navigator.userAgent.indexOf('MSIE') != -1 || navigator.userAgent.indexOf('Trident/') != -1,
    isIE6 : navigator.userAgent.indexOf('MSIE 6.') != -1,
    isIE7 : navigator.userAgent.indexOf('MSIE 7.') != -1,
    isIE8 : navigator.userAgent.indexOf('MSIE 8.') != -1,
    isIE9 : navigator.userAgent.indexOf('MSIE 9.') != -1,
    isIE10 : navigator.userAgent.indexOf('MSIE 10.') != -1,
    isIE11: navigator.userAgent.indexOf('Trident/') != -1 && navigator.userAgent.indexOf('rv:11.') != -1,
    isMozilla: navigator.userAgent.indexOf('Mozilla') != -1 && !/compatible|WebKit/.test(navigator.userAgent),
    isOpera: !!window.opera,
    isSafari: navigator.userAgent.indexOf('WebKit') != -1 && navigator.userAgent.indexOf('Chrome/') == -1,
    isChrome : navigator.userAgent.indexOf('Chrome/') != -1,
    isFirefox : navigator.userAgent.indexOf('Firefox/') != -1,
    isDSi : navigator.userAgent.indexOf('Nintendo DSi') != -1,
    is3DS : navigator.userAgent.indexOf('Nintendo 3DS') != -1,
    isWii : navigator.userAgent.indexOf('Nintendo Wii') != -1,
    isAndroid : navigator.userAgent.indexOf('Android') != -1,
    isAndroidMobile : navigator.userAgent.indexOf('Android') != -1 && navigator.userAgent.indexOf('Mobile') != -1,
    isAndroidTablet : navigator.userAgent.indexOf('Android') != -1 && navigator.userAgent.indexOf('Mobile') == -1,
    isIPhone : (navigator.userAgent.indexOf('iPod;') != -1 || navigator.userAgent.indexOf('iPhone;') != -1 || navigator.userAgent.indexOf('iPhone Simulator;') != -1),
    isWindowsPhone: navigator.userAgent.indexOf('Windows Phone') != -1,
    isIPad : navigator.userAgent.indexOf('iPad') != -1,
    isSupportsXPath : !!document.evaluate,
    version: {
        string: (/(?:Firefox\/|MSIE |Opera\/|Chrome\/|Version\/)([\d.]+)/.exec(navigator.userAgent) || []).pop(),
        valueOf: function() { return parseFloat(this.string) },
        toString: function() { return this.string }
    }
};
Hatena.Diary.Browser.isTouch = Hatena.Diary.Browser.isIPhone || Hatena.Diary.Browser.isAndroidMobile || Hatena.Diary.Browser.isDSi || Hatena.Diary.Browser.is3DS || Hatena.Diary.Browser.isWindowsPhone;
Hatena.Diary.Browser.isSmartPhone = Hatena.Diary.Browser.isIPhone || Hatena.Diary.Browser.isAndroidMobile || Hatena.Diary.Browser.isWindowsPhone;
Hatena.Diary.Browser.isTablet = Hatena.Diary.Browser.isAndroidTablet || Hatena.Diary.Browser.isIPad;

Hatena.Diary.Browser.thirdPartyCookiesBlocked = $.Deferred(); // ãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã¦ã‚‹ã‹åˆ†ã‹ã£ãŸã‚‰ Hatena.Diary.Pages.Blogs['*'].init ã§ resolveã•ã‚Œã‚‹ ãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã¦ãŸã‚‰true

// ã¯ã¦ãªè¨˜æ³•å±•é–‹
// hatena_syntax: String or [String]ï¼ŒArrayã®ã¨ãï¼Œå„è¡ŒãŒ<p>ã§å›²ã¾ã‚Œã‚‹
// æˆåŠŸã—ãŸã¨ã { html } ã‚’è¿”ã™Deferredã‚’è¿”ã™
Hatena.Diary.extractSyntax = function(hatena_syntax) {
    var dfd = $.Deferred();
    if (_.isArray(hatena_syntax)) {
        hatena_syntax = hatena_syntax.join("\n\n");
    }

    $.ajax({
        url: "/api/support.expand",
        type : "POST",
        data : {
            syntax: hatena_syntax,
            rkm: Hatena.Diary.data('rkm'),
            rkc: Hatena.Diary.data('rkc')
        },
        dataType: 'json'
    }).done(function(data) {
        dfd.resolve({
            html : data.html
        });
    }).fail(function(error) {
        dfd.reject(error);
    });

    return dfd;
};

// fotolifeã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å®Œäº†ã™ã‚‹ã¨è¿”ã•ã‚Œã‚‹fotolifeè¨˜æ³•ã‚’:plainå½¢å¼ã®HTMLã«å±•é–‹
// æˆåŠŸã—ãŸã¨ã { image, syntax, html } ã‚’è¿”ã™Deferredã‚’è¿”ã™
Hatena.Diary.extractFotolifeSyntax = function (string) {
    var ret   = $.Deferred();
    var match = string.match(/f:id:([^:]+):(\d+)([jpg]):image/);
    if (match) {
        var syntax = '[' + match[0].replace(':image', ':plain') + ']';
        var name  = match[1];
        var id    = match[2];
        var type  = match[3];
        var path  = [ name.substring(0, 1), name, id.substring(0, 8), id ].join('/');
        var image = 'http://cdn-ak.f.st-hatena.com/images/fotolife/' + path + '_120.jpg';

        Hatena.Diary.extractSyntax(syntax).done(function(data) {
            ret.resolve({
                image : image,
                syntax : syntax,
                html : data.html
            });
        }).fail(function(error) {
            ret.reject(error);
        });
    } else {
        _.defer(function() {
            ret.reject('Invalid format? ' + string);
        });
    }
    return ret.promise();
};

Hatena.Diary.AccessLog = {
    ping : function () {
        var adminDomain = $('html').attr('data-admin-domain');
        if (!adminDomain) return;

        var url = adminDomain + '/api/log';
        var data = {
            uri : location.href,
            referer : document.referrer
        };
        $.ajax({
            url   : url,
            type  : "get",
            cache : false,
            data  : data,
            xhrFields: {
                withCredentials: true
            }
        }).fail(function (e) {
            data._ = new Date().getTime();
            new Image().src = url + '?' + $.param(data);
        });
    }
};

// æœ€å¤§ã§1ç§’ã«1å›ã ã‘ãƒˆãƒ©ãƒƒã‚¯
Hatena.Diary.trackEvent = (function() {
    var trackNamesQueue = [];
    var timer = null;

    var postTrackNames = function () {
        timer = null;
        var img = new Image();
        img.src = (Hatena.Diary.data('admin-domain') || '') + '/api/track?' + $.param({
            track_name: trackNamesQueue,
            blog : Hatena.Diary.data('blogs-uri-base') || ('http://' + Hatena.Diary.data('blog'))
        });
        trackNamesQueue = [];
    };

    return function(trackNames) {
        if (!timer) {
            timer = setTimeout(postTrackNames, 1000);
        }
        _.each($.makeArray(trackNames), function(name) {
            trackNamesQueue.push(name);
        });
    };
})();

// ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ã¯ï¼Œdata-track-selectorã«CSSã‚»ãƒ¬ã‚¯ã‚¿ã‚’æ›¸ãã“ã¨ã«ã‚ˆã£ã¦ç‰¹å®šã®è¦ç´ ã®ã¿ã§ãƒ•ã‚£ãƒ«ã‚¿ã§ãã‚‹ï¼
// 1ã¤ã®è¦ç´ å†…ã«è¤‡æ•°ã®aã‚¿ã‚°ãŒã‚ã‚‹ãŒï¼Œã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸä»¶æ•°ã®é–¢ä¿‚ã§ï¼Œè¤‡æ•°data-track-nameã‚’è¨­å®šã§ããªã„å ´åˆã«æœ‰ç”¨ï¼
// returns: ã‚»ãƒ¬ã‚¯ã‚¿ãŒãªã„ã‹ï¼Œã¾ãŸã¯ï¼Œã‚»ãƒ¬ã‚¯ã‚¿ãŒã‚ã‚‹ã¨ããƒãƒƒãƒã—ãŸã‹
Hatena.Diary.trackEvent.checkSelector = function($container, $clicked) {
    var selector = $container.attr('data-track-selector');
    if (!selector) return true;

    // ã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸã¨ãåå¿œã™ã‚‹è¦ç´ ãŸã¡
    var $candicates = $container.find(selector);

    // ã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸè¦ç´ ãŒï¼Œåå¿œã—ã¦è‰¯ã„è¦ç´ ãŸã¡è‡ªèº«ã‹ï¼Œåå¿œã—ã¦è‰¯ã„è¦ç´ ãŸã¡ã«å«ã¾ã‚Œã‚‹ï¼Ÿ
    return !!($candicates.is($clicked) || $candicates.find($clicked).get(0));
};

// æŒ‡å®šã—ãŸè¦ç´ ã®data-track-nameã‚’é…åˆ—ã§è¿”ã™
Hatena.Diary.trackEvent.getDataTrackNames = function($element) {
    var dataTrackAttr = $element.attr('data-track-name');
    var trackNames = dataTrackAttr.split(/\s+/);
    return trackNames;
};

// ä»Šã™ããƒˆãƒ©ãƒƒã‚¯
// ã‚¤ãƒ™ãƒ³ãƒˆåã‹ã€ã‚¤ãƒ™ãƒ³ãƒˆåã®Arrayã‚’æ¸¡ã™
// returns: dfd.promiseã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã€‚ç”»åƒã®èª­ã¿è¾¼ã¿ãŒæˆåŠŸã—ãŸã‚‰resolveã€å¤±æ•—ã—ãŸã‚‰rejectã™ã‚‹ã€‚
Hatena.Diary.trackEventNow = function(trackNames) {
    var dfd = $.Deferred();

    var img = new Image();
    img.onload  = function () {
        dfd.resolve();
    };
    img.onerror = function () {
        dfd.reject();
    };

    img.src = (Hatena.Diary.data('admin-domain') || '') + '/api/track?' + $.param({
        track_name: $.makeArray(trackNames),
        blog : Hatena.Diary.data('blogs-uri-base') || ('http://' + Hatena.Diary.data('blog'))
    });

    // ãšã£ã¨èª­ã¿è¾¼ã¿ãŒçµ‚ã‚ã‚‰ãªã‹ã£ãŸã‚‰ã€rejectã™ã‚‹
    setTimeout(function () {
        dfd.reject();
    }, 5000);

    return dfd.promise();
};

Hatena.Diary.setupTrack = function () {
    $(document).on('mousedown', '[data-track-name]:not([data-track-once])', function(event) {
        if (event.which !== 1) return; // å·¦ã‚¯ãƒªãƒƒã‚¯ã®ã¿
        var $element = $(this);
        if (!Hatena.Diary.trackEvent.checkSelector($element, $(event.target))) return;

        var trackNames = Hatena.Diary.trackEvent.getDataTrackNames($element);
        Hatena.Diary.trackEvent(trackNames);
    });

    $(document).on('mousedown', '[data-track-name][data-track-once]:not([data-track-once-tracked])', function(event) {
        if (event.which !== 1) return; // å·¦ã‚¯ãƒªãƒƒã‚¯ã®ã¿
        var $element = $(this);
        if (!Hatena.Diary.trackEvent.checkSelector($element, $(event.target))) return;

        var trackNames = Hatena.Diary.trackEvent.getDataTrackNames($element);
        Hatena.Diary.trackEventNow(trackNames);

        // ã“ã‚Œä»¥é™ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ã—ãªã„
        $element.attr('data-track-once-tracked', '');
    });
};

// jQuery Deferredã‚’ä½¿ã£ãŸé…å»¶ãƒªã‚¹ãƒˆ
Hatena.Diary.LazyList = function () { this.init.apply(this, arguments) };
Hatena.Diary.LazyList.prototype = {
    // generator
    //   å‰ã®LazyListã‚’å—ã‘å–ã‚‹
    //   Deferred Objectã‚’è¿”ã™
    //   å€¤ã‚’resolveã™ã‚‹ã‹rejectã™ã‚‹é–¢æ•°
    // prevã¯å‰ã®LazyList æ™®é€šã¯æ¸¡ã•ãªã„ é€”ä¸­ã§åˆ†å²ã•ã›ã‚‹å ´åˆã¯æ¸¡ã—ã¦ã‚‚ã‚ˆã„
    init: function (generator, prev) {
        if (!$.isFunction(generator)) {
            throw("generator must be a function (" + generator + ")");
        }
        this.generator = generator;

        if (prev) {
            if (!(prev instanceof Hatena.Diary.LazyList)) {
                throw("prev must be a instance of LazyList");
            }
            this._prev = prev;
        }
    },
    // å€¤ã®èª­ã¿è¾¼ã¿ï¼Œdeferredã‚’è¿”ã™
    promise: function() {
        if (!this._promise) {
            var dfd = this.generator(this.prev());
            if (!$.isFunction(dfd.promise)) {
                throw("generator must return a Deferred Object (" + dfd + ")");
            }
            this._promise = dfd.promise();
        }

        return this._promise;
    },
    // å‰ã®ãƒãƒ¼ãƒ‰ã‚’å¾—ã‚‹
    prev: function() {
        return this._prev;
    },
    // æ¬¡ã®ãƒãƒ¼ãƒ‰ã‚’å¾—ã‚‹
    next: function() {
        if (!this._next) {
            this._next = new Hatena.Diary.LazyList(this.generator, this);
        }
        return this._next;
    },
    // æœ€åˆã®ãƒãƒ¼ãƒ‰ã‚’å¾—ã‚‹
    root: function() {
        if (this._prev) {
            return this._prev.root();
        } else {
            return this;
        }
    }
};

Hatena.Diary.EditorConnector = {
    // æŒ‡å®šã•ã‚ŒãŸæ–‡å­—åˆ—ã‚’ã‚¨ãƒ‡ã‚£ã‚¿ã«æŒ¿å…¥ã™ã‚‹
    // PCï¼Œtouchï¼ŒiOSã«å¯¾å¿œ
    // å…¨è¨˜æ³•å‘ãã®ãƒ†ã‚­ã‚¹ãƒˆãŒå¿…è¦
    // Arrayã®å„è¡ŒãŒå„è¦ç´ 
    // data: { hatena: [], html: [], markdown: [] }
    insertLines: function(data) {
        this._validate(data);
        this._setup();
        this._insertLinesImplement(data);

    },

    // iOSã‚¢ãƒ—ãƒªã‹ã‚‰é–‹ã‹ã‚Œã¦ã„ã‚‹ã‹ã©ã†ã‹
    // åŸºæœ¬çš„ã«ã¯EditorConnectorã«ä»»ã›ã‚‹ã¹ãã ãŒ, ã„ã‚ã„ã‚ã‚ã£ã¦ã†ã¾ãã„ã‹ãªã„ã¨ãã®ãŸã‚ç”¨æ„
    isiOS: function() {
        return Hatena.Diary.Util.decodeParam(location.search.substr(1))['ios'];
    },

    // Androidã‚¢ãƒ—ãƒªã‹ã‚‰é–‹ã‹ã‚Œã¦ã„ã‚‹ã‹ã©ã†ã‹
    isAndroid: function() {
        return Hatena.Diary.Util.decodeParam(location.search.substr(1))['android'];
    },

    // æŒ‡å®šã•ã‚ŒãŸURLã‚’window.openã—ã¦é€šä¿¡ã‚’å¾…ã¤
    loadServiceOnChildWindow: function(url) {
        var self = this;
        var curationWindow = window.open();
        var messenger = Messenger.createForWindow(curationWindow, url);

        messenger.addEventListener('insertLines', function(data) {
            self.insertLines(data);
        });
    },

    _validate: function(data) {
        _.each(['html', 'hatena', 'markdown'], function(mode) {
            if (!data[mode]) throw "missing " + mode;
        });
    },

    _setup: function() {
        if (this._insertLinesImplement) return;

        // ãƒ¢ãƒ¼ãƒ‰ã«åˆã‚ã›ã¦å®Ÿè£…ã®é–¢æ•°ã‚’è¨­å®š
        var isPC = Hatena.Diary && Hatena.Diary.Pages.device() === 'pc' && Hatena.Diary.Editor.Support && Hatena.Diary.Editor.Support.currentEditor;

        var isTouchEditor = Hatena.Diary && Hatena.Diary.Pages.device() === 'touch';

        var isChildFrame = window.opener;

        // ?ios=1ã¨ã„ã†ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¤ã„ã¦ã‚‹ã¨ãiOS
        var isiOS = this.isiOS();
        // ?android=1ã¨ã„ã†ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã®ã¨ãAndroid
        var isAndroid = this.isAndroid();

        if (isiOS || isAndroid) {
            // è¦å®šã®URLé–‹ã
            this._insertLinesImplement = this._insertLinesOpenURL;
        } else if (isPC) {
            // PCç·¨é›†ç”»é¢
            this._insertLinesImplement = this._insertLinesPC;
        } else if (isTouchEditor) {
            // touchç·¨é›†ç”»é¢
            this._insertLinesImplement = this._insertLinesTouch;
        } else if (isChildFrame) {
            // è¦ªãƒ•ãƒ¬ãƒ¼ãƒ ã«postMessageã§é€ä¿¡
            this._insertLinesImplement = this._insertLinesMessenger;
        } else {
            throw "handling failed";
        }

    },

    _insertLinesPC: function(data) {
        var editor = Hatena.Diary.Editor.Support.currentEditor;
        var mode = editor.mode;
        var lines = data[mode];
        editor.insertLines(lines);
    },
    _insertLinesTouch: function(data) {
        var syntax = $('#edit-entry').attr('data-entry-syntax');

        // HTMLãƒ¢ãƒ¼ãƒ‰ã§ï¼ŒcontentEditableç„¡åŠ¹ã®ã¨ã(Androidã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ–ãƒ©ã‚¦ã‚¶ãªã©)ï¼ŒãŸã ã®textareaãªã®ã§ï¼Œã¯ã¦ãªè¨˜æ³•ã‚’ä½¿ã†
        if (syntax === 'html' && ! Hatena.Diary.Pages.AdminTouch['user-blog-edit'].contentEditableEnabledAndEditorModeIsHTML()) {
            syntax = 'hatena';
        }

        var lines = (data[syntax] || data['hatena'] || data['markdown']);

        Hatena.Diary.Pages.AdminTouch['user-blog-edit'].insertText(lines.join("\n"));
    },
    _insertLinesMessenger: function(data) {
        var messenger = Messenger.createForParent();
        messenger.send('insertLines', data);
        window.close();
    },
    _insertLinesOpenURL: function(data) {
        var html_lines = _.map(data.html, function(line) {
            return '<p>' + line + '</p>';
        });
        location.href = 'hatenablog:/entry/body/insert?' + $.param({
            hatena:   data.hatena.join("\n"),
            html:     html_lines.join(''),
            markdown: data.markdown.join("\n\n"),
            version: 1
        });
    }
};

// ãƒ•ã‚©ãƒ¼ãƒ ã‚’ç›£è¦–ã—ï¼Œãƒšãƒ¼ã‚¸é–‰ã˜ã‚‹ã¨ãã«confirmå‡ºã™ãŸã‚ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
// ãƒ•ã‚©ãƒ¼ãƒ ãªãã¦ã‚‚ä½¿ãˆã‚‹
Hatena.Diary.FormState = function() {
    var self = this;
    self.confirmEnabled = false;

    var pageLeaveEvent = window.onbeforeunload !== undefined ? 'beforeunload' : 'unload';

    $(window).on(pageLeaveEvent, function() {
        $(window).triggerHandler('close-preview-window');
        if (self.confirmEnabled) return Hatena.Locale.text('form.confirm.changed');
    });
};

Hatena.Diary.FormState.prototype = {
    // ãƒšãƒ¼ã‚¸é–‰ã˜ã‚‹ã¨ãã«confirmå‡ºã™ãƒ¢ãƒ¼ãƒ‰ã‚’æœ‰åŠ¹ã«ã™ã‚‹
    enableConfirm: function() {
        this.confirmEnabled = true;
    },
    // ãƒšãƒ¼ã‚¸é–‰ã˜ã‚‹ã¨ãã«confirmå‡ºã™ãƒ¢ãƒ¼ãƒ‰ã‚’ç„¡åŠ¹ã«ã™ã‚‹
    disableConfirm: function() {
        this.confirmEnabled = false;
    },
    // formã‚’ç›£è¦–ã™ã‚‹ åˆæœŸçŠ¶æ…‹ã‚’ã‚»ãƒƒãƒˆã—ï¼Œé€ä¿¡ã‚’ç›£è¦–
    observeForm: function($form) {
        var self = this;
        this.$form = $form;
        this.setFormInitialState();

        $form.on('submit', function() {
            self.disableConfirm();
        });
    },
    // formã®changeã‚¤ãƒ™ãƒ³ãƒˆã‚’ç›£è¦–
    observeFormChange: function() {
        var self = this;
        self.$form.on('change', function() {
            self.checkFormState();
        });
    },
    // formã®çŠ¶æ…‹ã‚’ç¢ºèª
    checkFormState: function() {
        if (this.$form.serialize() !== this.initialState) {
            this.enableConfirm();
        } else {
            this.disableConfirm();
        }
    },
    // æœ‰åŠ¹ã‹ã©ã†ã‹ã‚’è¿”ã™
    isConfirmEnabled: function() {
        return this.confirmEnabled;
    },
    // ç¾åœ¨ã®formã®å€¤ã‚’åˆæœŸçŠ¶æ…‹ã¨ã™ã‚‹
    // ã“ã“ã‹ã‚‰å¤‰ã‚ã£ãŸã‚‰confirmãŒå‡ºã‚‹
    // ãƒšãƒ¼ã‚¸ãƒ­ãƒ¼ãƒ‰æ™‚ã«JSã§å€¤ã‚’å·®ã—æ›¿ãˆãŸã¨ãã«å‘¼ã¶
    setFormInitialState: function() {
        this.initialState = this.$form.serialize();
        this.disableConfirm();
    }
};

Hatena.Diary.setupProModal = function() {
    var openProModal = function(modalURL) {
        var iframeContainer = $('<div class="hatena-iframe-container pro-modal-container">').appendTo(document.body);
        var iframe = $('<iframe frameborder="0"></iframe>').appendTo(iframeContainer);

        var messenger = Messenger.createForFrame(iframe[0], modalURL);
        messenger.addEventListener('close', function () {
            Hatena.Diary.Window.hide(iframeContainer);
        });

        Hatena.Diary.Window.show(iframeContainer, {
            destroy : function () {
                iframe.remove();
                messenger.destroy();
            },
            fixScroll: true,
            center: true,
            showBackground: true
        });
    };

    $('.open-pro-modal').css('visibility', 'visible');
    $(document.body).on('click', '.open-pro-modal', function() {
        var $self = $(this);
        var modalURL = $self.attr('data-guide-pro-modal-ad-url');
        openProModal(modalURL);
        return false;
    });

};

Hatena.Diary.loadGlobalHeader = function () {
    var globalheader = document.getElementById('globalheader');

    // ã‚¹ãƒãƒ•ã‚©ã®ä¼æ¥­ãƒ–ãƒ­ã‚°ã§ã¯globalheaderæ¶ˆã•ã‚Œã¦ã‚‹ã“ã¨ãŒã‚ã‚‹ã®ã§ï¼Œã“ã“ã§éè¡¨ç¤ºã§ãã£ã¤ã‘ã‚‹
    if (!globalheader) {
        var $globalheader = $('<iframe id="globalheader" style="display: none"></iframe>');
        $globalheader.appendTo(document.body);
        globalheader = $globalheader[0];
    }
    var color = Hatena.Diary.Util.canonicalizeColor($(globalheader).css('color')) || '000000';

    var backgroundColor = null;
    var target = globalheader;
    while (!backgroundColor && target && target != document.documentElement) {
        var css = $(target).css('backgroundColor');
        backgroundColor = Hatena.Diary.Util.canonicalizeColor(css);
        target = target.parentNode;
    }
    if (!backgroundColor) backgroundColor = 'ffffff';

    var params = {};

    var globalheaderType = $('html').data('globalheaderType');
    if (!globalheaderType) globalheaderType = 'auto';
    if (globalheaderType === 'auto') {
        params['device'] = Hatena.Diary.Devices.userAgent();
    }
    else {
        params['device'] = globalheaderType;
    }

    var circleId = Hatena.Diary.data('circle-id');
    if (circleId) {
        params['circle_id'] = circleId;
    }

    var pageCategory = 'global';
    if (/\.hatena\.ne\.jp(:\d+)?$/.test(location.host)) {
        pageCategory = 'admin';
    } else if (Hatena.Diary.data('blog')) {
        pageCategory = 'blogs';
    } else if (circleId) {
        pageCategory = 'circle';
    }

    if (
        pageCategory === 'admin' &&
        Hatena.Diary.data('pro') &&
        Hatena.Diary.data('pro') === 'false'
    ) {
        params['show_upgrade_pro'] = 'yes';
    }

    if (Hatena.Diary.data('brand')) {
        params['brand'] = Hatena.Diary.data('brand');
    }

    Hatena.Diary.Pages.createForFrame(
        globalheader,
        Hatena.Diary.data('admin-domain') + '/-/globalheader/' + encodeURIComponent(color) + '/' + encodeURIComponent(backgroundColor) + '/' + pageCategory + '?' + $.param(params) + '#' + encodeURIComponent(location.href)
    );

    Hatena.Diary.Pages.infoLoaded = $.Deferred();

    Hatena.Diary.Pages.message('init', function (info) {
        $(function() {
            Hatena.Diary.LOG(['init', info]);
            Hatena.Diary.Pages.infoLoaded.resolve(info);
        });
    });

    Hatena.Diary.SpeedTrack.record("loadGlobalHeader");
};

// ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³ã‚¢ãƒ—ãƒªã‹ã‚‰ä½¿ã†ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã§ã™
Hatena.Diary.AppAPI = {
    _setup: function () {
        if (this._reloadStarImplement) return;

        // 1ç§’ã«1å›ã¾ã§ã—ã‹å®Ÿè¡Œã—ãªã„
        this._reloadStarImplement = _.throttle(function () {
            // ã‚¹ã‚¿ãƒ¼ã‚’å†èª­ã¿è¾¼ã¿ã™ã‚‹
            $body = $(document.body);
            $starContainer = $body.find('span.hatena-star-comment-container, span.hatena-star-star-container');
            if ($starContainer.length > 0) {
                $starContainer.remove();
                Hatena.Star.EntryLoader.loadNewEntries($body[0]);
            }
        }, 1000);
    },
    reloadStar: function () {
        this._setup();
        this._reloadStarImplement();
    }
};

// JSç”¨URLç”Ÿæˆ
Hatena.Diary.URLGenerator = {
    // pathæŒ‡å®šã§ãƒ¦ãƒ¼ã‚¶ãƒ–ãƒ­ã‚°ã®URLã‚’è¿”ã™ã€‚APIã®URLã‚’ä½œã‚‹ã¨ããªã©ã¯å¿…ãšã“ã‚Œã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨
    user_blog_url: function (path) {
        var blog_url_base = Hatena.Diary.data('blogs-uri-base');
        return blog_url_base + path;
    },
    static_url: function (path) {
        var static_base = Hatena.Diary.data('static-domain');
        return static_base + path;
    }
};


$(function() {
    if (arguments.callee.called) return; arguments.callee.called = true;


    // ç‰¹å®šã®ã¯ã¦ãªã®ãƒ‰ãƒ¡ã‚¤ãƒ³(b.hatena.ne.jpã¨ã‹)ã§Adminãƒ‰ãƒ¡ã‚¤ãƒ³ã¨ã¿ãªã•ã‚Œã¦ã—ã¾ã†ã®ã§
    // admin-domainãŒã‚ã£ãŸã‚‰ãã®å€¤ã§åˆ¤åˆ¥ã™ã‚‹
    // ãªã‹ã£ãŸã‚‰æ­£è¦è¡¨ç¾ã§åˆ¤åˆ¥ã™ã‚‹
    var domain = '';
    var admin_domain = Hatena.Diary.data('admin-domain');
    if (admin_domain) {
        var is_admin_domain = new RegExp('^(http|https)://' + location.host + '$').test(admin_domain);
        domain = is_admin_domain ? "Admin" : "Blogs";
    }
    else {
        domain = /\.hatena\.ne\.jp(:\d+)?$/.test(location.host) ? "Admin" : "Blogs";
    }

    var deviceSuffix = Hatena.Diary.Pages.device() === 'pc' ? '' : 'Touch';
    var namespace = domain + deviceSuffix;

    var page = Hatena.Diary.data('page');

    Hatena.Diary.SpeedTrack.setDomain(domain);
    Hatena.Diary.SpeedTrack.setPage(page);

    var func;
    try {
        Hatena.Diary.LOG('Pages["' + namespace + '"]["*"]');
        if ((func = Hatena.Diary.Pages[namespace]["*"])) {
            func();
        }
        Hatena.Diary.LOG('Pages["' + namespace + '"]["*"] done');

        Hatena.Diary.SpeedTrack.record('Pages["' + namespace + '"]["*"]');

        Hatena.Diary.LOG('Pages["' + namespace + '"]["' + page + '"]');
        if ((func = Hatena.Diary.Pages[namespace][page])) {
            func();
        }
        Hatena.Diary.LOG('Pages["' + namespace + '"]["' + page + '"] done');

        Hatena.Diary.SpeedTrack.record('Pages["' + namespace + '"]["' + page + '"]');
    } catch (e) {
        Hatena.Diary.BUG(e, 'toplevel');
    }

    Hatena.Diary.setupTrack();

    Hatena.Diary.Util.setupTipsy();

    Hatena.Diary.Util.setupScrollAdjustForFixedGlobalHeader();

    if (window != window.parent) {
        // ã‚¯ãƒªãƒƒã‚¯ã‚¸ãƒ£ãƒƒã‚­ãƒ³ã‚°å¯¾ç­–
        //   iframe ã§èª­ã¿ã“ã¾ã‚Œã¦ãƒ»ãã®ã¾ã¾ã‚¯ãƒªãƒƒã‚¯ã—ã¦é€ä¿¡ã•ã‚Œã¦ã—ã¾ã†ã®ãŒå•é¡Œãªã®ã§
        //   iframe ã®ä¸­ã§èª­ã¿ã“ã¾ã‚ŒãŸã¨ãã¯ã€submit æ™‚ã«å€¤ã®å¤‰æ›´ãƒã‚§ãƒƒã‚¯ã‚’ã—ã¦ã€å¤‰æ›´ã•ã‚Œã¦ãªã„ãªã‚‰ submit ã§ããªã„ã‚ˆã†ã«ã™ã‚‹
        $('form').each(function () {
            var $this    = $(this);

            // ãƒªã‚¹ã‚¯ã‚’æ‰¿çŸ¥ã§ã€ã‚ã‚‹ã„ã¯åˆ¥ã®æ‰‹æ®µã«ã‚ˆã£ã¦ã‚¯ãƒªãƒƒã‚¯ã‚¸ãƒ£ãƒƒã‚­ãƒ³ã‚°å¯¾ç­–ãŒæ–½ã•ã‚Œã¦ãŠã‚Šã€
            // ãªãŠã‹ã¤ã€ã‚¯ãƒªãƒƒã‚¯ã‚¸ãƒ£ãƒƒã‚­ãƒ³ã‚°å¯¾ç­–ã®å®Ÿè£…ãŒè¡çªã™ã‚‹å ´åˆã«è¿‚å›ã™ã‚‹ã“ã¨ãŒã§ãã‚‹
            if ($this.attr('data-pass-through-click-jacking-validation')) return;

            var $buttons = $this.find('input[type=submit][name!=delete][name!=draft]');
            var $delete_button = $this.find('input[type=submit][name=delete], input[type=submit][name=draft]');
            var disable = function() {
                $this.addClass('unedited');
                $buttons.attr('disabled', 'disabled');
            };
            var enable = function() {
                $this.removeClass('unedited');
                $buttons.removeAttr('disabled');
            };
            var serialize = function($form) {
                return $({
                    elements: $form.find(':input:not([data-ignore-click-jacking])')
                }).serialize();
            };

            disable();
            $delete_button.attr('disabled', 'disabled');
            var init = serialize($this);
            var timer = setInterval(function () {
                $delete_button.removeAttr('disabled');
                if (init != serialize($this)) {
                    clearInterval(timer);
                    enable();
                }
            }, 1500);
        });
    }

    if (page != 'globalheader') $('a.feedback').on('click', function () {
        Hatena.Diary.Feedback.toggle(Hatena.Diary.data('feedback'));
        return false;
    });
});

// locationã®viaã‚’ãƒªãƒ³ã‚¯ã«å¼•ãç¶™ã
Hatena.Diary.inheritVia = function(via) {
    if (!via) return;

    $('a[data-inherit-via]').each(function () {
        var $self = $(this);
        var href  = $self.attr('href').split(/\?/);
        var query = href[1] || '';

        var params = Hatena.Diary.Util.decodeParam(query);
        params['via'] = via;

        $self.attr('href', href[0] + '?' + $.param(params));
    });
};

Hatena.Diary.validationTweetLength = function(tweet) {
    var length = twttr.txt.getTweetLength(tweet || '');
    // ãƒ„ã‚¤ãƒ¼ãƒˆã®æœ€å¤§æ–‡å­—æ•° - httpã®url - httpsã®ç”»åƒurl - æ”¹è¡Œ = 95
    // 95ã‚ˆã‚Šã‚ªãƒ¼ãƒãƒ¼ã—ã¦ã„ãŸå ´åˆã¯false, ã‚ªãƒ¼ãƒãƒ¼ã—ã¦ã„ãªã„å ´åˆã¯trueã‚’è¿”ã—ã¾ã™
    // ã“ã“ã§ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã¯å˜ç´”ãªæ–‡å­—æ•°ã§è¡Œã£ã¦ã„ã‚‹ã‚ã‘ã§ã¯ãªãã€
    // å…¬å¼ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ç”¨ã„ã¦twitterã®ä»•æ§˜ã«åˆã‚ã›ã¦ã‚ˆã—ãªã«ã‚„ã£ã¦ãã‚Œã¾ã™
    // ä¾‹ãˆã°å‡„ã„é•·ã„urlã‚’è²¼ã£ã¦ã‚‚httpã®urlã ã¨22æ–‡å­—ã§ã‚«ã‚¦ãƒ³ãƒˆã—ã¦ãã‚Œã¾ã™ã€‚
    return length < 140 - 22 - 23 - 1;
};

})(jQuery);

(function($) {

    Hatena.Diary.Circle = {
        updateMembershipCategory: function($select) {
            var circleId = $select.attr('data-circle-id');
            var blogId = $select.attr('data-blog-id');
            var selection = $select.find('option:selected').val();

            var $indSuccess = $select;

            var operation, categoryId;
            if (selection === 'delete') {
                operation = 'delete';
            }
            else {
                operation = 'update';
                categoryId = selection;
            }

            return $.ajax({
                url  : '/api/circle/membership/category',
                type : 'POST',
                data : {
                    rkm         : Hatena.Diary.data('rkm'),
                    rkc         : Hatena.Diary.data('rkc'),
                    operation   : operation,
                    circle_id   : circleId,
                    blog_id     : blogId,
                    category_id : categoryId
                }
            });
        }
    };

})(jQuery);

(function($){

Hatena.Diary.Backup = {

    // data: {
    //   modified: epoch,
    //   data: serializeã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿,
    //   id: formã®id
    // }

    UI: 'default', // or 'touch'
    setup: function () {
        var self = this;

        // ã‚µãƒ¼ãƒãƒ¼ã§backupã™ã‚‹ã®ã¯å»ƒæ­¢ã«ãªã£ãŸã®ã§
        // ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«å¯¾å¿œã—ã¦ã„ãªã„ãƒ–ãƒ©ã‚¦ã‚¶ã®å ´åˆã¯å³returnã™ã‚‹
        if (!self.localStorageEnabled()) return;

        var target = $('form[data-backup-id]');

        self.clearPreviousBackup();

        target.each(function () {
            var $form = $(this);

            self.load($form).done(function(res) {
                self.loadDone($form, res);
            });

            setInterval(function () {
                var data = self.save($form);
                if (data) {
                    self.saveDone($form, data);
                }
            }, +$form.attr('data-backup-interval') * 1000 || self.defaultInterval());
        });
    },

    defaultInterval: function() {
        // localStorageä½¿ãˆãŸã‚‰é »ç¹ã«ï¼Œä½¿ãˆãªã‹ã£ãŸã‚‰é€šä¿¡ç™ºç”Ÿã™ã‚‹ã®ã§é »åº¦ä½ã
        return this.localStorageEnabled() ? 3000 : 9000;
    },

    localStorageEnabled: function() {
        // localStorageãŒä½¿ãˆã¦ï¼Œã‹ã¤ï¼Œãƒ‡ã‚¶ã‚¤ãƒ³è¨­å®šç”»é¢ã§ãªã„ã¨ãæœ‰åŠ¹
        // ãƒ‡ã‚¶ã‚¤ãƒ³è¨­å®šã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã¯ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’é€šã—ã¦ã‚„ã£ã¦ã‚‹ãŸã‚
        var enabled = false;
        try {
            enabled = window.localStorage && Hatena.Diary.data('page') !== 'user-blog-config-design-detail';
        } catch(ignore_error) { }
        return enabled;
    },

    localStorageKey: 'backup',

    clearBackup: function () {
        localStorage.removeItem(this.localStorageKey);
    },

    clearPreviousBackup: function() {
        // ä»¥å‰ã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’æ¶ˆã™ã‚ˆã†ã«ã¨ã„ã†ã‚ã‚ŒãŒã‚ã‚Œã°localStorageã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’ãƒªã‚»ãƒƒãƒˆ
        // ã“ã®cookieã¯è¨˜äº‹æŠ•ç¨¿æˆåŠŸæ™‚ã«ã‚»ãƒƒãƒˆã•ã‚Œï¼Œã‚¯ãƒªã‚¢ã—ãŸã‚‰ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã§æ¶ˆã™

        if (!$.cookie('clear_backup')) return;

        this.clearBackup();
        $.removeCookie('clear_backup', { path: '/' });
    },

    // ãƒ­ãƒ¼ãƒ‰ã«æˆåŠŸã—ãŸã‚‰resolveã•ã‚Œã‚‹Deferredã‚’è¿”ã™
    load : function ($form) {
        var self = this;

        var id   = $form.attr('data-backup-id');
        $form.data('backup', self.serialize($form));

        var loaded = $.Deferred();

        _.defer(function() {
            var backup;
            try {
                backup = JSON.parse(localStorage.getItem(self.localStorageKey));
            } catch (ignore_error) { }

            if (backup && backup.id === id) {
                // ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãŒã‚ã‚Šï¼Œformã®idãŒä¸€è‡´
                loaded.resolve(backup);
            } else {
                // å¤±æ•—
                loaded.reject();
            }
        });

        return loaded.promise();
    },

    // ãƒ­ãƒ¼ãƒ‰å®Œäº†æ™‚ã®ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯
    loadDone: function ($form, res) {
        var self = this;

        if (!res) return;

        Hatena.Diary.LOG(['backup.load', res]);
        var backupTime = new Date(+res.modified * 1000);

        // å¤ã™ãã‚‹ã¨ãæ¨ã¦ã‚‹
        if (new Date() - backupTime > 1000 * 60 * 60) return;

        // touchã§ã¯ã¨ã‚Šã‚ãˆãšæ‰‹å‹•å¾©å…ƒ
        if (self.shouldAutoRestore[Hatena.Diary.Backup.UI]($form)) {
            var prev = self.serialize($form);

            self.restoreBackup($form, res.data);
            self.promptAutoRestored($form, backupTime, function () {
                self.clearRestore($form, prev);
            });
        } else {
            self.promptRestore[Hatena.Diary.Backup.UI]($form, backupTime, function () {
                self.restoreBackup($form, res.data);
            });
        }
    },

    // ä¿å­˜ã«æˆåŠŸã—ãŸã‚‰ä¿å­˜ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’è¿”ã™
    save : function ($form, force) {
        var self = this;

        var id   = $form.attr('data-backup-id');
        var prev = $form.data('backup');
        var now  = self.serialize($form);
        if (prev == now && !force) {
            // ãƒ•ã‚©ãƒ¼ãƒ ã®çŠ¶æ…‹ãŒå¤‰åŒ–ã—ã¦ã„ãªã„ã¨ãä½•ã‚‚ã—ãªã„
            return false;
        }

        $form.trigger('backup-presave');

        $form.data('backup', now);

        var backupTime = Math.floor(new Date().getTime() / 1000);

        backup = {
            id: id,
            modified: backupTime,
            data:     now
        };
        localStorage.setItem(self.localStorageKey, JSON.stringify(backup));

        return backup;
    },

    // ä¿å­˜å®Œäº†æ™‚ã®ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯
    saveDone : function ($form, res) {
        Hatena.Diary.LOG(['backup.save', res]);
        $form.trigger('backup-save');
    },

    serialize : function ($form) {
        var values = [];
        var inputs = $form.find('input[type="text"], textarea, input[data-with-backup], input[type="hidden"].backup, input[type="radio"].backup, input[type="checkbox"].backup-button');
        for (var i = 0, it; (it = inputs[i]); i++) {
            if (!it.name) continue;
            if (it.type == 'radio' && !it.checked) continue;
            // selectã•ã‚Œã¦ãªã„å ´åˆã¯0ã‚’é€ã‚‹
            if (it.type == 'checkbox' && !it.checked) {
                values.push(encodeURIComponent(it.name) + '=0');
                continue;
            }
            values.push(encodeURIComponent(it.name) + '=' + encodeURIComponent(it.value));
        }
        $form.find('select').each( function () {
            var select  = this;
            var $select = $(select);
            if (select.getAttribute('data-without-backup') !== null) return;
            var selectItem = $select.find('option:selected');
            if ( selectItem.length === 0 ) return;
            values.push(encodeURIComponent(select.name) + '=' + encodeURIComponent($(selectItem[0]).val()));
        });
        return values.join('&');
    },

    shouldAutoRestore: {
        'default': function ($form) {
            // æ–°è¦æŠ•ç¨¿ã‹ã¤ã‚¿ã‚¤ãƒˆãƒ«ã¨æœ¬æ–‡ãŒç©ºã®ã¨ãè‡ªå‹•ã§å¾©å…ƒ
            var newEntryBackupIDRegex = new RegExp("user/blog/edit-\\d+-new");
            var isNewEntry = newEntryBackupIDRegex.test($form.attr('data-backup-id'));

            var $title = $form.find(':input[name="title"]');
            var titleIsEmpty = $title[0] && $title.val().length === 0;

            var $body = $form.find(':input[name="body"]');
            var bodyIsEmpty = $body[0] && $body.val().length === 0;

            return isNewEntry && titleIsEmpty && bodyIsEmpty;
        },
        'touch': function () {
            // touchç‰ˆã§ã¯è‡ªå‹•çš„ã«å¾©å…ƒã›ãšã«ã€æ‰‹å‹•ã§å¾©å…ƒã™ã‚‹
            return false;
        }
    },

    restoreBackup : function ($form, data) {
        var self = this;

        Hatena.Diary.LOG('restore backup');

        self.assignData($form, data);
    },

    clearRestore : function ($form, prev) {
        var self = this;

        Hatena.Diary.LOG('clear restore');

        self.assignData($form, prev);
    },

    assignData : function ($form, data) {
        var params = Hatena.Diary.Util.decodeParam(data);
        for (var name in params) if (params.hasOwnProperty(name)) {
            $form.find('input[name="' + name + '"], textarea[name="' + name + '"]').val(params[name]);
        }

        $form.data('backup', data);
        $form.trigger('backup-restore', data);
        $form.trigger('backup-restore-params', [ params ]);
    },

    promptRestore : {
        'default' : function ($form, backupTime, callback) {
            var $message = Hatena.Diary.Backup.initMessage($form);
            $message.prepend(
                $(Hatena.Locale.text('backup.notice', '<time data-relative data-epoch="' + backupTime.getTime() + '"></time>') +
                ' <a href="javascript:void(0)">(' + Hatena.Locale.text('backup.restore') + ')</a>')
            ).show();

            Hatena.Locale.updateTimestamps($message[0]);

            $message.find('a').click(callback);
        },


        'touch' : function ($form, backupTime, callback) {
            if (confirm(Hatena.Locale.text('backup.notice.ask_restore', backupTime))) {
                callback();
            }
        }
    },

    promptAutoRestored : function ($form, backupTime, callback) {
        var self = this;

        var $message = self.initMessage($form);

        $message.prepend(
            $(Hatena.Locale.text('backup.notice.auto_restored', '<time data-relative data-epoch="' + backupTime.getTime() + '"></time>') +
            ' <a href="javascript:void(0)">(' + Hatena.Locale.text('backup.clear_restore') + ')</a>')
        ).show();

        Hatena.Locale.updateTimestamps($message[0]);

        $message.find('a').click(callback);
    },

    initMessage : function ($form) {
        var $message = $('<div class="backup-message"></div>').hide()
            .appendTo($form.find('#editor-main .body'));

        var $editarea = $('#editor .editarea');

        $message.append($('<div class="backup-message-close"><img src="' + Hatena.Diary.URLGenerator.static_url('/images/admin/close.gif') + '"></div>'));

        // ä¸‹éƒ¨ã®ãƒœãƒ¼ãƒ€ãƒ¼ã‚’editareaã®ãƒœãƒ¼ãƒ€ãƒ¼ã«é‡ã­ã‚‹ãŸã‚ã«,
        // ä¸Šéƒ¨ã®ãƒœãƒ¼ãƒ€ãƒ¼ã‚’å«ã¿, ä¸‹éƒ¨ã®ãƒœãƒ¼ãƒ€ãƒ¼ã‚’å«ã¾ãªã„ã‚ˆã†ã«è¨ˆç®—ã™ã‚‹
        var message_height = $message.outerHeight() - (parseInt($message.css('border-width'), 10) || 1);

        $message.css('top', parseInt($editarea.css('top'), 10));
        $editarea.css('top', '+=' + message_height);

        $form.data('backup-message', $message);

        var clearMessage = _.once(function () {
            $message.remove();
            $editarea.css('top', '-=' + message_height);
        });

        $form.on('backup-restore', function () {
            clearMessage();
        });

        $form.on('backup-presave', function () {
            clearMessage();
        });

        $('.backup-message-close').click(function () {
            clearMessage();
        });

        // ç·¨é›†ã‚¿ãƒ–ä»¥å¤–ã§ã¯éš ã™
        $('#editor-main .ui-tabs').on('tabsactivate', function (event, ui) {
            if (ui.newPanel.attr('aria-labelledby') === 'ui-id-1') {
                $message.show();
            } else {
                $message.hide();
            }
        });

        return $message;
    }
};

})(jQuery);

(function ($) {
    if (!Hatena.Epic) Hatena.Epic = {};

    /*
    * ç‰¹å®šã® DOM ãƒ„ãƒªãƒ¼ã¨é–¢é€£ä»˜ã‘ã‚‰ã‚ŒãŸé–¢æ•°ã‚’é›†ã‚ã‚‹ãŸã‚ã®åå‰ç©ºé–“
    * è¤‡æ•°ã®ãƒšãƒ¼ã‚¸ã§ä½¿ã‚ã‚Œã‚‹å‡¦ç†ã‚’ã¾ã¨ã‚ã‚‹ãŸã‚ã«å­˜åœ¨ã™ã‚‹
    * DOM ãƒãƒ¼ãƒ‰ã‚’ãƒ©ãƒƒãƒ—ã—ãŸ jQuery ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æ¸¡ã™ã“ã¨ãŒå¼·ãæ¨å¥¨ã•ã‚Œã‚‹
    */
    Hatena.Epic.Component = {
        // <div id="preview" data-uri="[% uri %]?preview=1">
        //   <iframe></iframe>
        // </div>
        // å­è¦ç´ ã® iframe ã§è¡¨ç¤ºã™ã‚‹ URL ã‚’ $preview ã® data-uri ã«è¨­å®šã™ã‚‹
        setupPreviewFrameLocation: function ($preview) {
            var locationURI = $preview.attr('data-uri');
            var iframeNode = $preview.find('iframe')[0];
            iframeNode.contentWindow.location.replace(locationURI);
        },

        setupTouchViewSuggest: function () {
            var suggest_touch_view = !Hatena.Diary.data('no-suggest-touch-view');
            var has_touch_view     = Hatena.Diary.data('has-touch-view');
            var is_touch_agent     = Hatena.Diary.Devices.userAgent() === 'touch';

            if (suggest_touch_view && has_touch_view && is_touch_agent) {
                $('#sp-suggest-link').on('click', function () {
                    Hatena.Diary.Devices.use('touch');
                    return false;
                });
                $('#sp-suggest').show();
            }
        }
    };
})(jQuery);

(function($){
    var setupStar = function() {
        if (!Hatena.Star) return;

        var entryConfig = {
            entryNodes: {
                // PC, article
                'article.entry' : {
                    uri: '.hatena-star-metadata .hatena-star-permalink',
                    title: '.hatena-star-metadata .hatena-star-permalink',
                    container: 'div.hatena-star-container'
                },
                // PC, archive
                'section.archive-entry' : {
                    uri: '.hatena-star-metadata .hatena-star-permalink',
                    title: '.hatena-star-metadata .hatena-star-permalink',
                    container: 'span.star-container'
                },
                // touch, article
                '.entry-article' : {
                    uri: '.hatena-star-metadata .hatena-star-permalink',
                    title: '.hatena-star-metadata .hatena-star-permalink',
                    container: 'div.hatena-star-container'
                },
                // touch, comment
                'li.entry-comment' : {
                    uri: 'p.comment-metadata a.permalink',
                    title: 'div.comment-content',
                    container: '.comment-metadata'
                }
            }
        };

        var commentConfig = {
            entryNodes: {
                'li.entry-comment' : {
                    uri: 'p.comment-metadata a.permalink',
                    title: 'div.comment-content::-ten-truncate',
                    container: '.comment-metadata'
                }
            }
        };

        Hatena.Star.SiteConfig = entryConfig;

        Hatena.Star.EntryLoader.intoCommentScope = function (func) {
            Hatena.Star.SiteConfig = commentConfig;
            func();
            Hatena.Star.SiteConfig = entryConfig;
        };

        Hatena.Star.User.prototype.userPage = function() {
            var uri = Hatena.Diary.data('admin-domain') + '/' + this.name + '/';
            return uri;
        };

        var img_src = Hatena.Diary.URLGenerator.static_url('/images/theme/star/hatena-star-add-button.png');
        Hatena.Star.AddButton.ImgSrc            = img_src;
        Hatena.Star.AddButton.SmartPhone.ImgSrc = img_src;
    };

    setupStar();

    Hatena.Diary.Star = {
        // ã‚¹ã‚¿ãƒ¼å¤§ããã—ã¦ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚¢ã‚¤ã‚³ãƒ³é‡ã­ã‚‹
        initBigStar: function () {
            if (!Hatena.Star) return;

            // ä½“è£å¤‰æ›´
            Hatena.Star.Star.prototype.generateImg = function () {
                var img, star_img, user_img, span, user_icon;

                user_icon = function (name) {
                    return "http://cdn1.www.st-hatena.com/users/" + (encodeURI(name.slice(0, 2))) + "/" + (encodeURI(name)) + "/profile.gif";
                };

                star_img = Hatena.Star.Star.getImage(this.container);
                star_img.alt = this.screen_name;
                star_img.title = '';

                if (this.color && this.color != 'yellow' && this.color != 'temp') {
                    star_img.alt = star_img.alt + ' (' + this.color  + ')';
                }

                this.img = star_img;

                if (this.screen_name) {
                    if (!Hatena.Star.Star.gotImage[this.screen_name]) {
                        Hatena.Star.Star.gotImage[this.screen_name] = {};
                    }

                    if (!Hatena.Star.Star.gotImage[this.screen_name][this.color]) {
                        span = document.createElement('span');
                        span.className = 'hatena-big-star-star-container';
                        user_img = document.createElement('img');
                        user_img.src = user_icon(this.screen_name);
                        user_img.setAttribute('tabIndex', 0);
                        user_img.className = 'hatena-star-user';
                        user_img.style.padding = '0';
                        user_img.style.border = 'none';

                        span.appendChild(user_img);
                        span.appendChild(star_img);

                        Hatena.Star.Star.gotImage[this.screen_name][this.color] = span;
                    }

                    this.img = Hatena.Star.Star.gotImage[this.screen_name][this.color].cloneNode(true);
                }
            };

            // posã®å€¤ã®èª¿æ•´
            Hatena.Star.AddButton.prototype.showColorPallet = function (e) {
                this.clearSelectedColorTimer();
                if (!this.pallet) this.pallet = new Hatena.Star.Pallet();
                var pos = Ten.Geometry.getElementPosition(this.img);
                pos.x += 2;
                pos.y += 22;
                this.pallet.showPallet(pos, this);
            };

            Hatena.Star.AddButton.SmartPhone.prototype.showColorPallet = function (e) {
                this.clearSelectedColorTimer();

                if (!this.pallet) {
                    this.pallet = new Hatena.Star.Pallet.SmartPhone();
                }

                var pos = Ten.Geometry.getElementPosition(this.img);
                pos.x = Ten.Browser.isDSi ? 5 : 15;
                pos.y += 30;
                this.pallet.showPallet(pos, this);
                this.pallet.show(Hatena.Star.UseAnimation ? { x: 0, y: 0 } : pos);
            };

            // ã‚¹ã‚¿ãƒ¼ãƒœã‚¿ãƒ³æŠ¼ã•ã‚ŒãŸã‚‰å¿…è¦ãªæƒ…å ±ã‚’ã¯ã¦ãªãƒ–ãƒ­ã‚°ã®ã‚µãƒ¼ãƒãƒ¼ã«é€ã‚‹
            Hatena.Star.AddButton.prototype.addStar = _.wrap(Hatena.Star.AddButton.prototype.addStar, function(fun, e) {
                fun.apply(this, [e]);
                Hatena.Diary.trackEvent('hatena-star-add');
            });

            Hatena.Star.AddButton.SmartPhone.prototype.addStar = _.wrap(Hatena.Star.AddButton.SmartPhone.prototype.addStar, function(fun, e) {
                fun.apply(this, [e]);
                Hatena.Diary.trackEvent('hatena-star-add-smartphone');
            });
        },

        // ã‚¹ã‚¿ãƒ¼ä»˜ã‘ãŸã“ã¨ãªã„å ´åˆã€ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—ã‚’è¡¨ç¤ºã™ã‚‹
        initStarNavigation: function() {

            if (!Hatena.Star) return;

            var TIPSY_ALLOW_OFFSET = 8;
            var $tipsy_arrow = $('<div>').addClass('tipsy-arrow blue'),
                $star_navigation_tooltip = $('<div>').addClass('star-navigation-tooltip tipsy-n')
                .append($('<p>').text(Hatena.Locale.text('star-navigation-message')))
                .prepend($tipsy_arrow);

            $.getJSON("https://www.hatena.ne.jp/notify/notices.count.json?services=1&callback=?", function (res) {

                // ã‚¹ã‚¿ãƒ¼åˆ©ç”¨ä¸­ãªã‚‰ãªã«ã‚‚ã—ãªã„
                if (res.services.s) return;

                // ã¯ã¦ãªã‚¹ã‚¿ãƒ¼åˆ©ç”¨ä¸­ã§ã¯ãªã„ã‘ã©ã‚¹ã‚¿ãƒ¼ã¤ã‘ãŸ
                Hatena.Star.AddButton.prototype.addStar = _.wrap(Hatena.Star.AddButton.prototype.addStar, function(fun, e) {
                    fun.apply(this, [e]);
                    Hatena.Diary.trackEvent('hatena-star-add-first');
                });

                // æ—¢èª­ã‹ã©ã†ã‹ã‚’ localStorage ã«ä¿å­˜ã™ã‚‹
                var localStorageKey = 'Hatena.Diary.Blogs.StarNavigation.Read';

                var isRead = function () {
                    try {
                        return localStorage[localStorageKey] === 'already';
                    } catch(ignore) {}
                };

                var setIsRead = function (isRead) {
                    try {
                        localStorage[localStorageKey] = isRead ? 'already' : 'not yet';
                    } catch(ignore) {}
                };

                // æ—¢èª­ã®ã¨ã tipsy å‡ºã™å¿…è¦ãªã„
                if (isRead()) return;

                var wait_for_star_load = function (func) {
                    setTimeout(function () {
                        var $star_button = $('.hatena-star-add-button');

                        if ($star_button.length !== 0) {
                            func();
                            return;
                        }

                        wait_for_star_load(func);
                    }, 200);
                };

                wait_for_star_load(function () {
                    $('.hatena-star-container').after($star_navigation_tooltip);

                    $('.tipsy-arrow.blue').each(function () {
                        $(this).css({ left: $(this).parent().siblings().find('.hatena-star-add-button').offset().left - $star_navigation_tooltip.offset().left + TIPSY_ALLOW_OFFSET });
                    });

                    $('.star-navigation-tooltip').click(function () {
                        setIsRead(true);
                        $(this).fadeOut(1000);
                    });

                    $('.hatena-star-add-button').click(function () {
                        setIsRead(true);
                        $('.star-navigation-tooltip').fadeOut(1000);
                    });
                });
            });
        },

        initDeleteStar: function () {
            if (!Hatena.Star) return;

            Hatena.Star.Star.prototype.setImgObservers = function () {
                var self = this;
                new Ten.Observer(self.img,'onmouseover',self,'showName');
                new Ten.Observer(self.img,'onmouseout',self,'hideName');
            };

            Hatena.Star.Star.prototype.asElement = _.wrap(Hatena.Star.Star.prototype.asElement, function(func) {
                var self = this;
                var element = func.call(self);

                if ( !Hatena.Star.Config.isStarDeletable ) return element;

                // ä»¥ä¸‹ã¯ã‚¹ã‚¿ãƒ¼ãŒdocumentã«appendã•ã‚Œã¦ã‹ã‚‰å®Ÿè¡Œ

                // ã‚¹ã‚¿ãƒ¼å‰Šé™¤ã§ãã‚‹ã¨ãæˆåŠŸã™ã‚‹Deferredã‚’è¿”ã™
                var checkCanDelete = _.once(function() {
                    var dfd = $.Deferred();

                    var uri = Hatena.Star.BaseURL.replace(/^http:/, Hatena.Star.BaseURLProtocol) + 'star.deletable.json';
                    var data = {
                        name: self.name,
                        uri: self.entry.uri
                    };
                    if (self.color) data.color = self.color;
                    if (self.quote) data.quote = self.quote;

                    $.ajax({
                        type: 'get',
                        dataType: 'jsonp',
                        url: uri,
                        data: data
                    }).done(function(res) {
                        var can_delete = res.result && (res.message || res.confirm_html);
                        if (can_delete) {
                            dfd.resolve(res);
                        } else {
                            dfd.reject(res);
                        }
                    });

                    return dfd;
                });

                var $star_container = $(self.anchor);

                $star_container.hover(
                    function () {
                        // å‰Šé™¤å¯èƒ½ãªã¨ãï¼Œå³ä¸Šã«å‰Šé™¤ãƒœã‚¿ãƒ³ã‚’è¡¨ç¤º
                        checkCanDelete().done(function(deletion_info) {
                            var $delete_button =  $("<img>").addClass('star-delete-button').attr(
                                "src", Hatena.Diary.URLGenerator.static_url('/images/theme/star/star-delete.png')
                            );
                            $star_container.append($delete_button);
                            var button_position = $delete_button.position();
                            $delete_button.css({
                                left: button_position.left - 9,
                                top : button_position.top
                            });

                            //ã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸã‚‰å‰Šé™¤ç¢ºèª
                            $delete_button.click(function () {
                                if (deletion_info.confirm_html) {
                                    var pos = Ten.Geometry.getElementPosition(self.anchor);
                                    var scr = new Hatena.Star.DeleteConfirmScreen();
                                    scr.showConfirm(deletion_info.confirm_html, self, pos);
                                } else if (confirm(deletion_info.message)) {
                                    self.deleteStar();
                                }

                                return false;
                            });
                        });
                    },
                    function () {
                        $(this).find(".star-delete-button").remove();
                    });

                return element;
            });
        },

        initSelectStar: function () {
            if (!Hatena.Star) return;

            var SELECT_STAR_OPACITY = 0.6, SELECT_STAR_OFFSET = 60, SELECT_STAR_SIZE = 32, GET_BIGGER_SIZE = 24.0;

            var $target_article;
            var $select_star = $('.select_star_button_container');
            var $message_box = $('#select-star-message-box');
            var using_select_star = false;
            var message_fadeout_timer;

            // ã‚¹ã‚¿ãƒ¼ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ãŸã¨ã
            Hatena.Star.AddButton.prototype.addStar = _.wrap(Hatena.Star.AddButton.prototype.addStar, function (func, e) {
                this.copySelectedText();

                func.call(this, e);

                if (this.selectedText !== '') {
                    Hatena.Diary.trackEvent('hatena-star-add-quote');
                }
            });

            // ã‚¹ã‚¿ãƒ¼æŠ•ç¨¿ã®çµæœãŒè¿”ã£ã¦ããŸã¨ã
            Hatena.Star.AddButton.prototype.receiveResult = _.wrap(Hatena.Star.AddButton.prototype.receiveResult, function (func, args) {
                // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å‡ºã™ä½ç½®
                var message_box_offset = {
                    top: $select_star.offset().top,
                    left: $select_star.offset().left + SELECT_STAR_SIZE
                };

                if (using_select_star) {
                    // ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ã‚‹ã¨ãã®ã¿ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å‡ºã™
                    if (args.is_guest) {
                        var pos = { x: message_box_offset.left, y: message_box_offset.top };

                        // HatenaStar.jsæœ¬ä½“ã§ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦å‡ºã™ä½ç½®ã‚’èª¿æ•´ã•ã‚Œã‚‹ã®ã§, ãã®åˆ†è¶³ã—å¼•ãã—ã¦èª¿æ•´ã‚’æ‰“ã¡æ¶ˆã™
                        pos.x += 10;
                        pos.y -= 25;

                        this.lastPosition = pos;
                    } else {
                        $message_box
                            .stop()
                            .css(_.extend(message_box_offset, { opacity: 1.0 }))
                            .show();

                        if (message_fadeout_timer) {
                            clearTimeout(message_fadeout_timer);
                        }
                        message_fadeout_timer = setTimeout(function () { $message_box.fadeOut(1000); }, 1000);

                        Hatena.Diary.trackEvent('hatena-star-add-select');
                    }
                }

                using_select_star = false;

                func.call(this, args);
            });

            // ãƒ†ã‚­ã‚¹ãƒˆã‚’é¸æŠã—ãŸã¨ã
            $(document).mouseup(function (e) {
                var $target = $(e.target);

                // deferã—ãªã„ã¨ã‚¿ã‚¤ãƒŸãƒ³ã‚°çš„ã«ã†ã¾ãé¸æŠé ˜åŸŸã‚’å–å¾—ã§ããªã„
                _.defer(function () {
                    var selected_text = Ten.DOM.getSelectedText();
                    var selection_is_blank = (selected_text === '');
                    var is_article = $target.closest('article').length > 0;
                    var is_comment = $target.closest('.comment').length > 0;
                    var is_select_star = $target.closest('.select_star_button_container').length > 0;

                    if (is_select_star) {
                        return;
                    }

                    if (!is_article || is_comment || selection_is_blank) {
                        $select_star.hide();
                        return;
                    }

                    $target_article = $target.closest('article');

                    $select_star.css({ top: e.pageY, left: $target_article.offset().left - SELECT_STAR_OFFSET });
                    $select_star.show();
                });
            });

            $select_star.on('mouseenter', function () {
                $(this).css({ opacity: 1.0 });
            });

            $select_star.on('mouseleave', function () {
                $(this).css({ opacity: SELECT_STAR_OPACITY });
            });

            $('.select_star_button').on('click', function (e) {
                using_select_star = true;

                $(this)
                    .stop()
                    .animate({
                        width: SELECT_STAR_SIZE + GET_BIGGER_SIZE, height: SELECT_STAR_SIZE + GET_BIGGER_SIZE,
                        top: -GET_BIGGER_SIZE/2, left: -GET_BIGGER_SIZE/2
                    }, 80)
                    .animate({width: SELECT_STAR_SIZE, height: SELECT_STAR_SIZE, top: 0, left: 0 }, 400);
            });

            // HatenaStarã‹ã‚‰å¼•ç”¨ã‚¹ã‚¿ãƒ¼ãƒœã‚¿ãƒ³ã«ã‚¯ãƒªãƒƒã‚¯ãƒãƒ³ãƒ‰ãƒ©ã‚’ãŸã¦ã‚‹
            Hatena.Star.AddButton.prototype.setupObservers = _.wrap(Hatena.Star.AddButton.prototype.setupObservers, function (func) {
                func.call(this);

                new Ten.Observer($select_star[0], 'onclick', this, 'beforeAddStar');
            });

            Hatena.Star.AddButton.prototype.beforeAddStar = function (e) {
                if ($target_article.attr('data-uuid') === $(this.entry.entryNode).attr('data-uuid')) {
                    this.addStar(e);
                }
            };
        },

        // ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒƒã‚­ãƒ¼é€ä¿¡ã•ã‚Œã¦ãªã„ã¨ãmobileç”¨ã®ã‚¨ãƒ³ãƒˆãƒªãƒšãƒ¼ã‚¸ã‚’æ–°ã—ã„ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã§é–‹ã
        initStarForThirdPartyCookiesDisabled: function (info) {
            Hatena.Diary.Util.waitForResource(function() {
                return Hatena.Star;
            }, function() {
                _.extend(Hatena.Star.AddButton.prototype, {
                    addStar: function() {
                        var self = this;

                        // uri:      ã‚¨ãƒ³ãƒˆãƒªã®URI
                        // location: ã‚¹ã‚¿ãƒ¼ã¤ã‘ãŸã‚ã¨ã®ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆå…ˆ
                        var url = 'http://s.hatena.ne.jp/star.add?' + $.param({
                            uri:      self.entry.uri,
                            location: Hatena.Diary.data('admin-domain') + '/-/close'
                        });

                        var position = {
                            width:  500,
                            height: 200
                        };
                        position.left = Math.floor((screen.width - position.width) / 2);
                        position.top = Math.floor((screen.height - position.height) / 2);

                        var position_string = Hatena.Diary.Util.positionToPositionString(position);

                        var star_window = window.open(url, 'add_star', position_string);

                        // windowé–‰ã˜ã‚‰ã‚ŒãŸã‚‰èª­ã¿è¾¼ã¿ãªãŠã™
                        Hatena.Diary.Util.waitForResource(function() {
                            return star_window.closed;
                        }, function() {
                            Hatena.Diary.Util.updateDynamicPieces([self.entry.entryNode.parentNode]);
                        });
                    },
                    // ã‚«ãƒ©ãƒ¼ã‚¹ã‚¿ãƒ¼ã¤ã‘ã‚‰ã‚Œãªã„ã®ã§ãƒ‘ãƒ¬ãƒƒãƒˆé–‹ã‹ãªãã™ã‚‹
                    showColorPallet: function() {
                    },
                    showColorPalletDelay: function() {
                    }
                });
            });
        }
    };
})(jQuery);

(function($, Hatena, Messenger){
    'use strict';

    /**
     * ãƒ¦ãƒ¼ã‚¶ã®æƒ…å ±
     *
     * @param {boolean} [userData.isSubscribing] - è³¼èª­ä¸­ã‹å¦ã‹
     * @param {boolean} [userData.isGuest]       - ã‚²ã‚¹ãƒˆãƒ¦ãƒ¼ã‚¶ã‹å¦ã‹
     */
    var User = function (userData) {
        this.initialize(userData);
    };
    User.prototype = {
        initialize: function (userData) {
            this.isSubscribing = userData.isSubscribing || false;
            this.isGuest       = userData.isGuest       || false;
        },
        toggle: function () {
            this.isSubscribing = !this.isSubscribing;
        }
    };

    /**
     * ãƒ–ãƒ­ã‚°ã®æƒ…å ±
     * ã‚µãƒ¼ãƒã¨ã®é€šä¿¡ã‚‚è¡Œã†
     *
     * @param {number} [blogData.subscribersCount] - ãƒ–ãƒ­ã‚°ã®è³¼èª­è€…æ•°
     */
    var Blog = function (blogData) {
        this.initialize(blogData);
    };
    Blog.prototype = {
        initialize: function (blogData) {
            this.subscribersCount = +blogData.subscribersCount || 0;
            this.blogUrl = Hatena.Diary.data('blog') || Hatena.Diary.data('blog-host');
            this.requestUrl = [
                Hatena.Diary.data('admin-domain'),
                Hatena.Diary.data('author'),
                this.blogUrl,
                'subscribe'
            ].join('/');
        },

        requestUpdate: function (user) {
            var ajax = $.ajax({
                type: "POST",
                url: this.requestUrl,
                data: {
                    rkm: Hatena.Diary.data('rkm'),
                    rkc: Hatena.Diary.data('rkc'),
                    "delete": user.isSubscribing ? 1 : 0
                }
            });
            return ajax;
        },

        updateSubscribersCount: function (user) {
            this.subscribersCount += user.isSubscribing ? 1 : -1;
        }
    };

    /**
     * è³¼èª­ãƒœã‚¿ãƒ³ã®æŠ½è±¡ã‚¯ãƒ©ã‚¹
     * å¤–éƒ¨ã‹ã‚‰ã¯ openSubscribeWindow ã—ã‹å‘¼ã°ã‚Œãªã„
     *
     * @param {$element}  [$el]       - è¦ç´ ã®jQueryã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
     * @param {Object}    [userData]  - Userã‚¯ãƒ©ã‚¹ã®å¼•æ•°
     * @param {Object}    [blogData]  - Blogã‚¯ãƒ©ã‚¹ã®å¼•æ•°
     */
    var SubscribeButton = function ($el, userData, blogData) {
        this.initialize($el, userData, blogData);
    };
    SubscribeButton.prototype = {
        initialize: function ($el, userData, blogData) {
            var self = this;

            self.$el = $el;

            // ãƒ¢ãƒ‡ãƒ«åˆæœŸåŒ–
            self.user = new User(userData);
            self.blog = new Blog(blogData);

            // è¦ç´ ã®åˆæœŸåŒ–
            self.$subscribeBtn         = self.$el.find('.js-hatena-follow-button');
            self.$subscriptionCount    = self.$el.find('.js-subscription-count');
            self.$subscriptionCountBox = self.$el.find('.js-subscription-count-box');

            self.updateViews();

            // ãƒã‚¦ã‚¹ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†
            self.initEvents();
        },

        // ãƒã‚¦ã‚¹ã‚¤ãƒ™ãƒ³ãƒˆã®ãƒãƒ³ãƒ‰ãƒ©ã‚’ç™»éŒ²ã™ã‚‹
        initEvents: function () {
            var self = this;
            this.$subscribeBtn
                .on('mouseenter', function () {
                    $(this).addClass('hover');
                })
                .on('mouseleave', function () {
                    $(this).removeClass('hover');
                })
                .on('click', function (e) {
                    var offset = self.$subscribeBtn.offset();
                    offset.top += self.$subscribeBtn.height();
                    self.openSubscribeWindow(offset);
                    return false;
                });
        },

        /**
         * è³¼èª­ãƒœã‚¿ãƒ³é–“ã§åŒæœŸã™ã‚‹ãŸã‚ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒãƒ³ãƒ‰ãƒ©ã‚’ç™»éŒ²ã™ã‚‹
         * @abstract
         */
        initMessages: function () {},

        // user, blogã®çŠ¶æ…‹ã«åˆã‚ã›ã¦è¡¨ç¤ºã‚’æ›´æ–°ã™ã‚‹
        updateViews: function () {
            // åˆæœŸåŒ–æ™‚ã«ã‚‚å‘¼ã°ã‚Œã‚‹ãŸã‚ã€toggleClassã¯ä½¿ã‚ãªã„
            var isSubscribing = this.user.isSubscribing;
            this.$subscribeBtn
                .addClass(isSubscribing ? 'subscribing' : 'unsubscribing')
                .removeClass(isSubscribing ? 'unsubscribing' : 'subscribing');

            // hoverã‚¯ãƒ©ã‚¹ã‚’å¤–ã™
            // æ“¬ä¼¼ã‚¯ãƒ©ã‚¹ã§ã¯ãªãã‚¯ãƒ©ã‚¹ã‚’ä½¿ã†ã“ã¨ã§ã€ãƒã‚¦ã‚¹ã®ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ãŒå¤–ã‚Œã¦ã„ã¦ã‚‚æ“ä½œã§ãã‚‹
            this.$subscribeBtn.removeClass('hover');

            this.updateCountBox();
        },

        // è³¼èª­è€…æ•°ãƒãƒ«ãƒ¼ãƒ³ã‚’å‡ºã™
        updateCountBox: function () {
            if (this.blog.subscribersCount >= 1) {
                this.$subscriptionCountBox.show();
                this.$subscriptionCount.text(this.blog.subscribersCount);
            }
            else {
                this.$subscriptionCountBox.hide();
            }
        },

        /**
         * ç¢ºèªç”¨ã®iframeã‚„ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã€confirmãªã©ã‚’é–‹ã
         * è³¼èª­ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ãŸã‚‰å‘¼ã°ã‚Œã‚‹
         * @abstract
         * @public
         */
        openSubscribeWindow: function (offset, isFixed) {},

        /**
         * è¬›èª­å‡¦ç†æˆåŠŸæ™‚ã«å‘¼ã°ã‚Œã‚‹
         * @abstract
         */
        toggleState: function () {},

        // è¬›èª­æ™‚ã«model, viewã‚’æ›´æ–°ã™ã‚‹
        subscribe: function () {
            this.user.isSubscribing = true;
            this.blog.subscribersCount++;
            this.updateViews();
        },

        // è¬›èª­è§£é™¤æ™‚ã«model, viewã‚’æ›´æ–°ã™ã‚‹
        unsubscribe: function () {
            this.user.isSubscribing = false;
            this.blog.subscribersCount--;
            this.updateViews();
        }
    };

    Hatena.Diary.SubscribeButton = SubscribeButton;

})(jQuery, Hatena, Messenger);

(function ($, _, Hatena) {
    'use strict';

    /**
     * adminç‰ˆè¬›èª­ãƒœã‚¿ãƒ³
     * Hatena.Diary.SubscribeButton ã‚’ç¶™æ‰¿
     * ãƒœã‚¿ãƒ³é–“ã®åŒæœŸã«ã¯ Messenger ã§ã¯ãªã localStorage ã‚’ä½¿ã†
     */
    var SubscribeButtonAdmin = function ($el, userData, blogData) {
        this.initialize($el, userData, blogData);
    };
    Hatena.Diary.Util.extend(
        SubscribeButtonAdmin.prototype, Hatena.Diary.SubscribeButton.prototype
    );

    /** @override */
    SubscribeButtonAdmin.prototype.initialize = function ($el, userData, blogData, messenger) {
        Hatena.Diary.SubscribeButton.prototype.initialize.call(this, $el, userData, blogData);

        // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å‡¦ç†
        this.initMessages();
    };

    /** @override */
    SubscribeButtonAdmin.prototype.initMessages = function () {
        // localStorageã®storageã‚¤ãƒ™ãƒ³ãƒˆã§åŒæœŸã‚’è¡Œã†
        var self = this;
        window.addEventListener("storage", function (event) {
            if (event.key !== 'subscription') { return; }
            var data = JSON.parse(event.newValue);
            var blogData = data[self.blog.blogUrl];

            // å¤‰åŒ–ãŒç„¡ã„ã¨ãã¯ä½•ã‚‚ã—ãªã„
            if (blogData === self.user.isSubscribing) { return; }

            // trueã§ã‚‚falseã§ã‚‚ç„¡ã„ã¨ãã¯ä½•ã‚‚ã—ãªã„ (undefinedãªã©)
            if (blogData === true) {
                self.subscribe();
            }
            if (blogData === false) {
                self.unsubscribe();
            }
        });
    };

    /**
     * @override
     * @public
     */
    SubscribeButtonAdmin.prototype.openSubscribeWindow = function () {
        var self = this;

        // ãƒ‰ãƒ¡ã‚¤ãƒ³ã«ã‹ã‹ã‚ã‚‰ãšã€confirmã‚’å‡ºã™
        // ã‚¯ãƒªãƒƒã‚¯ã‚¸ãƒ£ãƒƒã‚­ãƒ³ã‚°å¯¾ç­–
        var confirmMessage = Hatena.Locale.text(
            self.user.isSubscribing ? 'epic.confirm_unsubscribe' : 'epic.confirm_subscribe'
        );
        var res = window.confirm(confirmMessage);
        if (!res) {
            return false;
        }

        // ã‚²ã‚¹ãƒˆã ã£ãŸã‚‰ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã§ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ã‚’å‡ºã™
        if (self.user.isGuest) {
            self.popupLoginWindow();
            return false;
        }

        // è³¼èª­æˆåŠŸã—ãŸã‚‰çŠ¶æ…‹æ›´æ–°
        self.blog.requestUpdate(self.user).success(function() {
            self.toggleState();
        });
    };

    SubscribeButtonAdmin.prototype.popupLoginWindow = function () {
        // ä½ç½®ã‚’æŒ‡å®š
        var options = { width: 900, height: 600, scrollbars: 'yes' };
        options.left = Math.floor((screen.width - options.width) / 2);
        options.top  = Math.floor((screen.height - options.height) / 2);

        // ãƒ­ã‚°ã‚¤ãƒ³URLã‚’ä½œæˆ
        var targetURL = [
            Hatena.Diary.data('admin-domain') + '/',
            Hatena.Diary.data('author')       + '/',
            Hatena.Diary.data('blog-host')    + '/subscribe?iframe=1'
        ].join('');
        var loginURL = 'http://www.hatena.ne.jp/login?location=' + encodeURIComponent(targetURL);

        // ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã‚’é–‹ã
        var loginWindow = window.open(
            loginURL,
            'login',
            Hatena.Diary.Util.positionToPositionString(options)
        );
    };

    /** @override */
    SubscribeButtonAdmin.prototype.toggleState = function () {
        if (this.user.isSubscribing) {
            this.unsubscribe();
            SubscribeButtonAdmin.setSubscription(this.blog.blogUrl, false);
        }
        else {
            this.subscribe();
            SubscribeButtonAdmin.setSubscription(this.blog.blogUrl, true);
        }
    };

    /**
     * localStorageã«ãƒ–ãƒ­ã‚°æ¯ã®è¬›èª­ã«è¬›èª­æƒ…å ±ã‚’ä¿å­˜ã™ã‚‹
     * @static
     */
    SubscribeButtonAdmin.setSubscription = function (blogUrl, isSubscribing) {
        var value = JSON.parse(window.localStorage.getItem('subscription'));
        value = _.isObject(value) ? value : {};
        value[blogUrl] = isSubscribing;
        window.localStorage.setItem('subscription', JSON.stringify(value));
    };

    Hatena.Diary.SubscribeButtonAdmin = SubscribeButtonAdmin;

})(jQuery, _, Hatena);

(function ($, Hatena, Messenger) {

    /**
     * blogsç‰ˆã®è³¼èª­ãƒœã‚¿ãƒ³
     * ãƒœã‚¿ãƒ³é–“ã®åŒæœŸã«ã¯Messengerã‚’ä½¿ã†
     *
     * @param {$element}  [$el]       - è¦ç´ ã®jQueryã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
     * @param {Object}    [userData]  - Userã‚¯ãƒ©ã‚¹ã®å¼•æ•°
     * @param {Object}    [blogData]  - Blogã‚¯ãƒ©ã‚¹ã®å¼•æ•°
     * @param {Messenger} [messenger] - ãƒœã‚¿ãƒ³é–“ã§åŒæœŸã™ã‚‹ç‚ºã€windowã¨é€šä¿¡ã™ã‚‹Messenger
     */
    var SubscribeButtonBlogs = function ($el, userData, blogData, messenger) {
        this.initialize($el, userData, blogData, messenger);
    };
    Hatena.Diary.Util.extend(
        SubscribeButtonBlogs.prototype, Hatena.Diary.SubscribeButton.prototype
    );

    /** @override */
    SubscribeButtonBlogs.prototype.initialize = function ($el, userData, blogData, messenger) {
        Hatena.Diary.SubscribeButton.prototype.initialize.call(this, $el, userData, blogData);

        // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å‡¦ç†
        this.messenger = messenger;
        this.initMessages();
    };

    /** @override */
    SubscribeButtonBlogs.prototype.initMessages = function () {
        // é€šå¸¸ç‰ˆã§ã¯localStorageã¯ä½¿ã‚ãšã«postMessageã‚’ä½¿ã£ã¦å‡¦ç†ã™ã‚‹
        // localStorageã¯åŒä¸€ãƒšãƒ¼ã‚¸å†…ã§ã¯storageã‚¤ãƒ™ãƒ³ãƒˆã‚’ç›£è¦–ã§ããªã„
        var self = this;
        self.messenger.addEventListener('subscription', function (data) {
            var blogData = data[self.blog.blogUrl];

            // å¤‰åŒ–ãŒç„¡ã„ã¨ãã¯ä½•ã‚‚ã—ãªã„
            if (blogData === self.user.isSubscribing) { return; }

            // trueã§ã‚‚falseã§ã‚‚ç„¡ã„ã¨ãã¯ä½•ã‚‚ã—ãªã„ (undefinedãªã©)
            if (blogData === true) {
                self.subscribe();
            }
            if (blogData === false) {
                self.unsubscribe();
            }
        });
    };

    /**
     * ç¢ºèªç”¨ã®iframeã¾ãŸã¯ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã‚’é–‹ã
     * è³¼èª­ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ãŸã‚‰å‘¼ã°ã‚Œã‚‹
     *
     * @public
     * @param {Object}  [offset]  - ç¢ºèªiframeã‚’å‡ºã™ä½ç½®ã®offset
     * @param {boolean} [isFixed] - ç¢ºèªiframeã‚’å›ºå®šã™ã‚‹ã‹ã©ã†ã‹
     */
    SubscribeButtonBlogs.prototype.openSubscribeWindow = function (offset, isFixed) {
        var uri = '' +
            Hatena.Diary.data('admin-domain') + '/' +
            Hatena.Diary.data('author')       + '/' +
            Hatena.Diary.data('blog')         + '/subscribe?iframe=1';

        var self = this;
        Hatena.Diary.Browser.thirdPartyCookiesBlocked.done(function (blocked) {
            if (blocked) {
                self.subscribeButtonHandlerWindow(uri);
            } else {
                self.subscribeButtonHandlerIframe(uri, offset, isFixed);
            }
        });
    };

    // è¬›èª­ç¢ºèªiframeã‚’å‡ºã™
    SubscribeButtonBlogs.prototype.subscribeButtonHandlerIframe = function (uri, offset, isFixed) {
        var $container = $('<div class="hatena-iframe-container popup"></div>');
        var $loading   = $([
            '<div class="loading">',
            '<img src="',
            Hatena.Diary.URLGenerator.static_url('/images/loading.gif'),
            '" alt="loading"/>',
            Hatena.Locale.text('loading'),
            '</div>'
        ].join(''));
        var $iframe    = $('<iframe frameborder="0"></iframe>');

        // windowã®å¤§ãã•ã‚’è¨ˆç®—
        var maxWidth = $(window).width();
        var winWidth = 300;
        var padding  = 20;
        if ((maxWidth - offset.left) < (winWidth + padding)) {
            offset.left = maxWidth - (winWidth + padding);
        }

        // DOMçµ„ã¿ç«‹ã¦
        $container.appendTo(document.body);
        $loading.appendTo($container);
        $iframe.appendTo($container);

        // ã‚¹ã‚¿ã‚¤ãƒ«ã‚’ã‚ã¦ã‚‹
        $container.hide().css({
            width   : winWidth,
            height  : 155,
            position: isFixed ? 'fixed' : 'absolute'
        });
        if (offset) {
            $container.offset(offset);  // offsetã¯cssã®å¾Œã«å½“ã¦ãªã„ã¨ãƒ€ãƒ¡
        }
        $loading.hide().delay(250).show();
        $iframe.on('load', function () { $loading.hide(); });

        // messageæº–å‚™
        var iframeMessenger = Messenger.createForFrame($iframe[0], uri);

        iframeMessenger.addEventListener('resize', function (data) {
            if (data) {
                $container.css(data);
            }
        });

        iframeMessenger.addEventListener('close', function () {
            Hatena.Diary.Window.hide($container);
        });

        var self = this;
        iframeMessenger.addEventListener('done', function () {
            self.toggleState();
        });

        Hatena.Diary.Window.show($container, {
            destroy : function () {
                $container.remove();
                iframeMessenger.destroy();
            }
        });
    };

    // è³¼èª­ç¢ºèªãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã‚’å‡ºã™
    SubscribeButtonBlogs.prototype.subscribeButtonHandlerWindow = function (uri) {
        // windowã‚’è¡¨ç¤ºã™ã‚‹ä½ç½®ã‚’æ±‚ã‚ã‚‹
        var position = {
            width:  300,
            height: 150
        };
        position.left = Math.floor((screen.width  - position.width)  / 2);
        position.top  = Math.floor((screen.height - position.height) / 2);

        // windowã‚’ä½œæˆ
        var subscribeWindow = window.open(
            '', 'subscribe', Hatena.Diary.Util.positionToPositionString(position)
        );

        var popupMessenger = Messenger.createForWindow(subscribeWindow, uri);

        var self = this;
        popupMessenger.addEventListener('done', function() {
            self.toggleState();
            close();
        });

        var close = function() {
            popupMessenger.destroy();
            subscribeWindow.close();
        };

        popupMessenger.addEventListener('close', close);

        // è¦ªwindowã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ãŒç§»ã£ãŸã‚‰é–‰ã˜ã‚‹
        $(document.body).one('focus', close);
    };

    /** @override */
    SubscribeButtonBlogs.prototype.toggleState = function () {
        var data = {};
        data[this.blog.blogUrl] = !this.user.isSubscribing;
        this.messenger.send('subscription', data);
    };

    Hatena.Diary.SubscribeButtonBlogs = SubscribeButtonBlogs;

})(jQuery, Hatena, Messenger);

(function($){

Hatena.Diary.EntryModuleCarousel = function($container, opts) {
    this.init($container, opts);
};

Hatena.Diary.EntryModuleCarousel.prototype = {
    init: function($container, opts) {
        if (!opts) opts = {};

        var self = this;
        self.moveInProgress = false;
        self.$containerElem = $container;
        self.$goBackElem = $($.parseHTML('<a class="module-entries-carousel-button back"><span>Back</span<</a>'));
        self.$goForwardElem = $($.parseHTML('<a class="module-entries-carousel-button forward"><span>Forward</span></a>'));

        self.isAutoScroll = opts.isAutoScroll || false;
        self.autoScrollInterval = opts.autoScrollInterval || 5000;
        // åŒæ™‚ã«è¡¨ç¤ºã•ã‚Œã‚‹è¦ç´ ã®å€‹æ•°
        self.displayEntrySizeAtOnce = opts.displayEntrySizeAtOnce || 2;

        if (self.isAutoScroll) {
            self.autoScrollIntervalId = window.setInterval(function (self) {
                self.goForwardWithLoop();
            }, self.autoScrollInterval, self);
        }

        self.$containerElem.on('click', '.module-entries-carousel-button.back.active',    function() {
            if (self.isAutoScroll) { window.clearInterval(self.autoScrollIntervalId); }
            self.goBack();
        });
        self.$containerElem.on('click', '.module-entries-carousel-button.forward.active', function() {
            if (self.isAutoScroll) { window.clearInterval(self.autoScrollIntervalId); }
            self.goForward();
        });
        self.currentPosition = 0;

        var $carouselBodyElem = self.getCarouselBodyElem();
        self.carouselList = $carouselBodyElem.find('.urllist-item');
        self.carouselElementsSize = self.carouselList.length;
        // è¨˜äº‹ã¯1ã¤ãšã¤å‹•ãã®ã§, ç§»å‹•ã™ã‚‹å›æ•°ã¯`è¦ç´ æ•° - (åŒæ™‚ã«è¡¨ç¤ºã•ã‚Œã‚‹è¦ç´ æ•° - 1)`ã¨ãªã‚‹
        self.carouselSize = self.carouselElementsSize - (self.displayEntrySizeAtOnce - 1);

        self.$directNavigationListElem = $($.parseHTML('<ol class="module-entries-carousel-navigation">'));
        var counter = 0;
        while ( counter < self.carouselSize) {
            self.$directNavigationListElem.append($($.parseHTML('<li><a data-carousel-index="' + counter + '"><span>' + counter + '</span></a></li>')));
            counter++;
        }
        self.$containerElem.on('click', '.module-entries-carousel-navigation a.active', function(event) {
            // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ˜ç¤ºçš„ã«ã‚«ãƒ«ãƒ¼ã‚»ãƒ«ã®è¦ç´ ã‚’é¸æŠã—ãŸã‚‰ã€ ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ“ä½œã‚’å°Šé‡ã—ã¦ä»¥å¾Œã¯å‹æ‰‹ã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã—ãªã„
            if (self.isAutoScroll) { window.clearInterval(self.autoScrollIntervalId); }
            self.goToIndex(Number($(this).attr('data-carousel-index')));
        });

        self.updateNavigationElementsClass();

        self.$containerElem.append(self.$goBackElem);
        self.$containerElem.append(self.$goForwardElem);
        self.$containerElem.append(self.$directNavigationListElem);
    },
    canGoBack: function() {
        var self = this;
        if (self.currentPosition > 0 ) { return true; }
        return false;
    },
    // è¦ç´ ãŒ6å€‹ã®æ™‚ã¯Carouselã¯5é …ç›®ã—ã‹ãªã„
    canGoForward: function() {
        var self = this;
        if (self.currentPosition < self.carouselSize - (self.displayEntrySizeAtOnce - 1) ) { return true; }
        return false;
    },
    updateNavigationElementsClass: function() {
        var self = this;
        self.$goBackElem.toggleClass('active', self.canGoBack() );
        self.$goForwardElem.toggleClass('active', self.canGoForward() );

        self.$directNavigationListElem.find('a').removeClass('current');
        self.$directNavigationListElem.find('a[data-carousel-index="'+ self.currentPosition +'"]').addClass('current');

        self.$directNavigationListElem.find('a').addClass('active');
        self.$directNavigationListElem.find('a.current').removeClass('active');
    },
    // marginãŒè¨­å®šã•ã‚Œã¦ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã®ã§.width()ã¨ã‹ã§ã¯ãªãã€éš£ã®è¦ç´ ã¨ã®offseté•ã„ã‚’è¦‹ã‚‹
    getUnitWidth: function() {
        var self = this;
        var $bodyElem = self.getCarouselBodyElem();
        var $unitElem = $bodyElem.find('.urllist-item');
        if ( $unitElem.length === 0 ) { Hatena.Diary.BUG("Can't get unit width"); return 200; }
        else if ( $unitElem.length === 1 ) { return $unitElem.width(); }
        return $($unitElem[1]).offset().left - $($unitElem[0]).offset().left;
    },
    getCarouselBodyElem: function() {
        var self = this;
        return $(self.$containerElem).find('.urllist-with-thumbnails');
    },
    goToIndex: function(index) {
        var self = this;
        if ( index < 0 || index >= self.carouselSize ) { return; }
        if ( self.moveInProgress ) { return; }
        self.moveInProgress = true;

        var $bodyElem = self.getCarouselBodyElem();
        var originalOffset = $bodyElem.offset();

        var moveSize = self.getUnitWidth() * (index - self.currentPosition);
        var relativeOffset = '-='+moveSize+'px';
        $bodyElem.animate( {
            left: relativeOffset
        }, 300, function() {
            self.currentPosition = index;
            self.updateNavigationElementsClass();
            self.moveInProgress = false;
        });
    },
    goBack: function() { this.goToIndex( this.currentPosition - 1 ) },
    goForward: function() { this.goToIndex( this.currentPosition + 1 ) },
    goForwardWithLoop: function() {
        if ( this.canGoForward() ) {
            this.goForward();
        } else {
            this.goToIndex( 0 );
        }
    }
};

})(jQuery);

(function($){

    Hatena.Diary.Editor = {
        id : 'hatena-diary-edit-in-place',

        showEditInPlace : function (entry, opts) {
            var editinplace = document.getElementById(Hatena.Diary.Editor.id);
            if (editinplace) {
                editinplace.parentNode.removeChild(editinplace);
            }

            var $container = $(
                '<div class="hatena-iframe-container">' +
                    '<div class="loading"><img src="' + Hatena.Diary.URLGenerator.static_url('/images/loading.gif') + '" alt=""/>' + Hatena.Locale.text('loading') + '</div>' +
                    '</div>').
                attr({
                    id: Hatena.Diary.Editor.id
                }).
                hide().
                appendTo(document.body);

            var iframe = $('<iframe frameborder="0"></iframe>').appendTo($container);

            var loading = $container.find('.loading').hide().click(function () {
                return false;
            });

            setTimeout(function () {
                loading.show();
            }, 250);

            var CONTAINER_MARGIN_LEFT = 10;
            var CONTAINER_MARGIN_TOP  = 37;

            var resizeContainer = function() {
                $container.
                    css({
                        width : $(window).width() - (CONTAINER_MARGIN_LEFT * 2),
                        height: $(window).height() - (CONTAINER_MARGIN_TOP * 2)
                    }).
                    css({
                        left: ($(window).width() - $container.width()) / 2
                    });
            };

            resizeContainer();
            $(window).resize(_.throttle(function() {
                resizeContainer();
            }, 100));

            editinplace = iframe[0];

            var uri = Hatena.Diary.data('admin-domain') +
                '/' + Hatena.Diary.data('author') + '/' + Hatena.Diary.data('blog') + '/edit?' +
                'editinplace=1';

            if (entry) uri += '&entry=' + encodeURIComponent(entry.attr('data-uuid'));
            if (opts.title) uri += '&title=' + encodeURIComponent(opts.title);
            if (opts.body)  uri += '&body='  + encodeURIComponent(opts.body);

            var updated;
            var messenger = Messenger.createForFrame(editinplace, uri);

            var closeContainerWindow = function () {
                Hatena.Diary.Window.hide($container);
            };

            var onClose = function () {
                if (updated && !confirm(Hatena.Locale.text('form.confirm.changed'))) {
                    return false; // ç·¨é›†ç”»é¢ã‚’é–‰ã˜ã‚‹ã‚¤ãƒ™ãƒ³ãƒˆã‚’ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã™ã‚‹
                } else {
                    closeContainerWindow();
                    messenger.send('close-preview-window'); // æ–°çª“ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’é–‰ã˜ã‚‹
                }
            };
            messenger.addEventListener('close', onClose);

            messenger.addEventListener('ready', function () {
                loading.remove();
            });
            messenger.addEventListener('update', function (data) {
                messenger.removeEventListener('close', onClose);
                messenger.addEventListener('close', closeContainerWindow); // submitã•ã‚ŒãŸã‚‰confirmã‚’å‡ºã™å¿…è¦ã¯ãªã„
                opts.update(data);
            });

            messenger.addEventListener('change', function (_updated) {
                updated = !!_updated;
            });

            Hatena.Diary.Window.show($container, {
                closeExplicitly: true,
                destroy : function () {
                    iframe.remove();
                    messenger.destroy();
                },
                fixScroll: true
            });

        }
    };

    Hatena.Diary.Pages.Admin['*'] = function () {
        Hatena.Locale.setupTimestampUpdater();
        Hatena.Diary.Backup.setup();

        Hatena.Diary.Pages.Blogs['*'].prepareForGlobalHeader();

        Hatena.Epic.Component.setupTouchViewSuggest();

        $('.js-admin-menu-myblog-btn').click(function() {
            var $blog_list = $('.js-admin-menu-myblog-list');

            if ($blog_list.size() === 0) {
                return true;
            }

            if ($blog_list.is(":visible") === false) {
                $blog_list.show();
            } else {
                $blog_list.hide();
            }
            return false;
        });

        $(document).click(function(e) {
            var $blog_list = $(".js-admin-menu-myblog-list");
            if (!$.contains($blog_list, e.target)) {
                $blog_list.hide();
            }
        });
        Hatena.Diary.Pages.Admin['*'].setupSubscribeBadge();
    };

    Hatena.Diary.Pages.Admin['*'].saveBlogConfig = function(key, value) {
        $.ajax({
            url : "config/param",
            type : "post",
            cache: false,
            dataType : 'json',
            data : {
                key : key,
                val : value,
                rkm : Hatena.Diary.data('rkm'),
                rkc : Hatena.Diary.data('rkc')
            },
            success : function (res) {
                Hatena.Diary.LOG(['config/param', res]);
            }
        });
    };

    Hatena.Diary.Pages.Admin['*'].setupSubscribeBadge = function () {
        if (window != window.parent) return null;  // globalheaderã‹ã‚‰ã¯ãƒ­ãƒ¼ãƒ‰ã—ãªã„

        var unread_url = Hatena.Diary.data('admin-domain').replace(/https?\:/, '') + '/api/recent_subscribing';
        $.ajax({
            url      : unread_url,
            type     : 'get',
            cache    : false,
            dataType : 'json'
        }).done(function (res) {
            if (res && res.count) {
                var count = +res.count;
                if (count === 0) { return; }

                var badge = $('.badge-subscribe').addClass('visible');

                if (count > 20) {
                    badge.text('20+');    // æœªèª­ä»¶æ•°ãŒ21ä»¶ä»¥ä¸Šã®æ™‚ã¯çœç•¥è¡¨ç¤º
                }
                else {
                    badge.text(res.count);
                }
            }
        });
    };

    EditDesign.sections = [
        'theme',
        'background'
    ];

})(jQuery);

(function($){

    Hatena.Diary.Pages.Admin['curation-amazon'] = function () {
        new Hatena.Diary.Pages.Admin['user-blog-edit'].AmazonSearch({
            container: $('#editor-amazon-search')
        });
    };

})(jQuery);

(function($){

    Hatena.Diary.Pages.Admin['curation-itunes'] = function () {
        new Hatena.Diary.Pages.Admin['user-blog-edit'].Itunes({
            container: $('#editor-itunes')
        });
    };

})(jQuery);

(function($){

    Hatena.Diary.Pages.Admin['antenna'] = function () {

        var setupEntryBox = function ($recentEntryBox) {
            var $recentEntries = $recentEntryBox.find('li[class!="more"]');
            var $moreButton = $recentEntryBox.find('li[class="more"]');
            if ($recentEntries.length <= 3) {
                $moreButton.hide();
            }
            else {
                $recentEntryBox.find('li[class!="more"]:gt(2)').hide();
            }
        };

        var $recentEntryBoxes = $('.entry-unit-older-post');
        $recentEntryBoxes.each(function () {
            setupEntryBox($(this));
        });

        $('.entry-unit').on('click', '.more', function (e) {
            var $button = $(this);
            var $recentEntries = $button.siblings('li[class!="more"]:gt(2)');
            $recentEntries.slideToggle('fast');
            $button.hide();
        });

        var $closedBlogs = $('.closed-blog');
        $closedBlogs.each(function () {
            var $closedBlog = $(this);
            var antennaUrl = $closedBlog.data("antennaUrl");
            $.ajax({
                type: 'GET',
                url: antennaUrl,
                data: { device: 'pc' },
                dataType: 'html',
                crossDomain: true,
                xhrFields: {
                    withCredentials: true
                }
            }).done(function (res) {
                $closedBlog.empty();
                $closedBlog.append(res);
                setupEntryBox($closedBlog);
                var $blogContents = $closedBlog.find('.js-blog-content');
                Hatena.Locale.updateTimestamps($blogContents[0]);
            });
        });
    };

})(jQuery);

(function($) {

    Hatena.Diary.Pages.Admin['circle'] = function() {
        $('.membership-category').each(function(i, container) {
            var $container = $(container);
            var $select = $container.find('.membership-category-select');
            var current = $select.find('option:selected').val();
            var $indicator = $container.find('.indicator');

            $select.change(function(e) {
                Hatena.Diary.Circle.updateMembershipCategory($select).done(function(data) {
                    $indicator.find('.success').show();
                    $indicator.find('.fail').hide();
                }).error(function(data) {
                    $select.val( current );
                    $indicator.find('.success').hide();
                    $indicator.find('.fail').show();
                });
            });
        });
    };

})(jQuery);

(function($){

    Hatena.Diary.Pages.Admin['circle-create'] = function () {
        var $form   = $('form#create-circle-form');

        $form.submit(function () {
            Hatena.Diary.Util.preventDuplicateSubmit($form);
        });
    };

})(jQuery);

(function($){

    Hatena.Diary.Pages.Admin['circle-membership-done'] = function () {
        Hatena.Diary.Pages.createForParent();

        Hatena.Diary.Pages.send('resize', {
            // iframeã®é«˜ã•ãŒã†ã¾ãã¨ã‚Œãšã€ã‚„ã‚€ãªã+50ã—ã¦ã„ã‚‹..
            // *1ã¯Operaå¯¾ç­– see also Hatena.Diary.Util.sendresizerequest
            height: ($(document.body).height() + 50) * 1
        });

        Hatena.Diary.Pages.send('done');

        $('.close').on('click', function (e) {
            Hatena.Diary.Pages.send('close', { name : window.name });
            return false;
        });

        var $container = $('.options');
        var $select = $container.find('.membership-category-select');
        var current = $select.find('option:selected').val();
        var $indicator = $container.find('.indicator');

        $select.change(function(e) {
            Hatena.Diary.Circle.updateMembershipCategory($select).done(function(data) {
                $indicator.find('.success').show();
                $indicator.find('.fail').hide();
            }).error(function(data) {
                $select.val( current );
                $indicator.find('.success').hide();
                $indicator.find('.fail').show();
            });
        });
    };

})(jQuery);

(function($){

    Hatena.Diary.Pages.Admin['circle-membership'] = function () {
        Hatena.Diary.Pages.createForParent();

        $('.close').on('click', function (e) {
            Hatena.Diary.Pages.send('close', { name : window.name });
            return false;
        });

        $('form').submit(function (e) {
            var $form = $(this);
            if (!confirm($form.attr('data-confirm-message'))) {
                return false;
            }
        });

        Hatena.Diary.Util.sendResizeRequest();
    };

})(jQuery);

(function($){

    Hatena.Diary.Pages.Admin['curation-gourmet'] = function () {
        if ($('#editor-gourmet.enabled').get(0)) {
            new Hatena.Diary.Pages.Admin['user-blog-edit'].Gourmet({
                container: $('#editor-gourmet')
            });
        }
    };


})(jQuery);

(function($){

    Hatena.Diary.Pages.Admin['curation-instagram'] = function () {
        if ($('#editor-instagram.enabled').get(0)) {
            new Hatena.Diary.Pages.Admin['user-blog-edit'].Instagram({
                container: $('#editor-instagram')
            });
        }
    };

})(jQuery);

(function($){

    Hatena.Diary.Pages.Admin['curation-promotion'] = function () {
        var PromotionEntriesManager = {
            entries: null,
            index: 0,
            init: function ($container) {
                this.entries = _.map($container.find('.promotion-entry'), function(entry) {
                    return new PromotionEntry({ $element: $(entry) });
                });
                $container.on('click', '.pager .prev', $.proxy(this, 'onPrevPagerClick'));
                $container.on('click', '.pager .next', $.proxy(this, 'onNextPagerClick'));
                this.update();
            },
            update: function () {
                var index = this.index;
                _.each(this.entries, function (entry, i) {
                    if (i === index) {
                        entry.show();
                    }
                    else {
                        entry.hide();
                    }
                });
            },
            onPrevPagerClick: function () {
                this.index--;
                this.update();
            },
            onNextPagerClick: function () {
                this.index++;
                this.update();
            }
        };

        var PromotionEntry = function () { this.init.apply(this, arguments); };
        PromotionEntry.prototype = {
            init: function (args) {
                var self = this;
                self.$element = args.$element;
                self.bindEvents();
            },
            bindEvents: function () {
                var self = this;
                self.$element.on('click', '[data-keyword]', function (button) {
                    var $entry = $(this);

                    // trackEventãŒçµ‚ã‚ã‚‹ã®ã‚’ç¢ºèªã—ã¦ã€ã‚¨ãƒ‡ã‚£ã‚¿ã¸ã®insertLinesã‚’ã™ã‚‹
                    Hatena.Diary.trackEventNow('Promotion.Entry.Insert.' + self.entryID()).always(function () {
                        var keyword = $entry.attr('data-keyword');
                        var lines = [ keyword ];
                        Hatena.Diary.EditorConnector.insertLines({
                            html:     lines,
                            hatena:   lines,
                            markdown: lines
                        });
                    });
                });
            },
            show: function () {
                var self = this;
                self.$element.show();
                Hatena.Diary.trackEvent('Promotion.Entry.Show.' + self.entryID());
            },
            hide: function () {
                var self = this;
                self.$element.hide();
            },
            entryID: function () {
                var self = this;
                return self.$element.attr('data-promotion-entry-id');
            }
        };

        PromotionEntriesManager.init($('.promotion-entries'));
    };

})(jQuery);

(function($){

    Hatena.Diary.Pages.Admin['curation-twitter'] = function () {
        if ($('#editor-twitter.enabled').get(0)) {
            new Hatena.Diary.Pages.Admin['user-blog-edit'].Twitter({
                container: $('#editor-twitter')
            });
        }
    };

})(jQuery);

(function($){

    Hatena.Diary.Pages.Admin['curation-flickr'] = function () {
        if ($('#editor-flickr.enabled').get(0)) {
            new Hatena.Diary.Pages.Admin['user-blog-edit'].Flickr({
                container: $('#editor-flickr')
            });
        }
    };


})(jQuery);

(function($){

    Hatena.Diary.Pages.Admin['feedback-iframe'] = function () {
        Hatena.Diary.Pages.createForParent();

        $('.close').on('click', function (e) {
            Hatena.Diary.Pages.send('close', { name : window.name });
            return false;
        });

        $('#button-feedback').on('click', function (e) {
            $('.js-show-on-send-feedback').show();
            $('#body').focus();
            $('.js-hide-on-send-feedback').hide();
            Hatena.Diary.Util.sendResizeRequest();
        });

        if(!!Hatena.Diary.Location.param('thankyou')){
            setTimeout(function () {
                $('#button-close').click();
            }, 3000);
        }

    };

})(jQuery);

(function($){

    Hatena.Diary.Pages.Admin['globalheader'] = function () {
        Hatena.Diary.Pages.createForParent();

        var BASE     = location.hostname.match(/\.hatena\.[^:]+/)[0];

        var header         = $(document.getElementById('header'));
        var headerServices = $(document.getElementById('header-services'));
        var headerNotify   = $(document.getElementById('header-notify'));
        var headerUnread   = $(document.getElementById('header-unread'));
        var headerLocale   = $(document.getElementById('header-locale'));

        var blogUri = decodeURIComponent(location.hash.substring(1));
        var loc = Hatena.Diary.data('admin-domain') + '/go?blog=' + encodeURIComponent(blogUri);

        var publicUserInfo = $.ajax({
            type: 'get',
            dataType: 'jsonp',
            url: "https://www" + BASE + "/notify/notices.count.json",
            data: {
                services: 1
            }
        });

        if (!Hatena.Diary.Browser.isIE) {
            // IEä»¥å¤–ã®ã¨ãã¯canvasã§ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ç”»åƒã‚’åˆæˆã—ãŸã‚Šã™ã‚‹
            var dropdownColor = document.body.getAttribute('data-color');
            Hatena.Diary.Pages.Admin['globalheader'].renderDropdown(dropdownColor);
        }

        header.delegate('.header-dropdown', {
            keypress: function (event) {
                if (event.which !== 13) return;
                $(event.currentTarget).click();
                event.preventDefault();
                event.stopPropagation();
            },
            mouseup: function (event) {
                event.currentTarget.blur();
            }
        });

        header.find('a.new-entry').click(function () {
            Hatena.Diary.Pages.send('new-entry', {});
            return false;
        });

        header.find('a.feedback').click(function () {
            Hatena.Diary.Pages.send('feedback', {
                left : $(this).offset().left,
                uri : Hatena.Diary.data('feedback')
            });
            return false;
        });

        header.find('.units').find('a').click(function () {
            Hatena.Diary.Pages.send('units', {
                left: $(this).offset().left,
                uri: '/-/units'
            });
            return false;
        });

        headerLocale.find('.header-dropdown').click(function () {
            var self = this;
            Hatena.Diary.Pages.send('locale', { });
            return false;
        });

        headerServices.find('.header-dropdown').click(function () {
            var self = this;
            publicUserInfo.done(function (info) {
                Hatena.Diary.Pages.send('servicesmenu', {
                    BASE : BASE,
                    right : $(self).offset().left + $(self).width(),
                    info : info,
                    location : loc
                });
            });
            return false;
        });

        headerNotify.find('.header-dropdown').click(function () {
            Hatena.Diary.Pages.send('notify', {
                BASE : BASE,
                left : $(this).offset().left
            });
            headerNotify.find(".notify-count").text('').hide();
            return false;
        });

        headerUnread.find('.header-button').click(function () {
            Hatena.Diary.Pages.send('unread');
            return false;
        });

        $('.locale .header-dropdown').click(function () {
            Hatena.Diary.Pages.send('locale', {
                height: +$(this).attr('data-height-hint'),
                right : $(this).offset().left + $(this).width()
            });
            return false;
        });

        publicUserInfo.done(function (data) {
            if (data.count > 0) {
                headerNotify.find(".notify-count").text(data.count).show();
            } else {
                headerNotify.find(".notify-count").text('').hide();
            }
        });

        publicUserInfo.done(Hatena.Diary.Util.needComrule2013);

        // æœªèª­ã‚«ã‚¦ãƒ³ãƒˆ
        var unread_url = Hatena.Diary.data('admin-domain').replace(/https?\:/, '') + '/api/recent_subscribing';
        if (Hatena.Diary.data('rkm') && Hatena.Diary.data('rkc')) {
            $.ajax({
                url      : unread_url,
                type     : 'get',
                cache    : false,
                dataType : 'json'
            }).done(function (res) {
                if (res && res.count) {
                    var count = +res.count;
                    if (count === 0) { return; }

                    var badge = headerUnread.find('.unread-count');
                    badge.show();

                    if (count > 20) {
                        badge.text('20');    // æœªèª­20ä»¶ä»¥ä¸Šã¯ã‚«ã‚¦ãƒ³ãƒˆã—ãªã„
                    }
                    else {
                        badge.text(res.count);
                    }
                }
            });
        }

        var params = Hatena.Diary.Location.params();

        Hatena.Diary.Pages.loadInfo().done(function (info, privateInfo) {

            // è³¼èª­ãƒœã‚¿ãƒ³å‘¨ã‚Šã®å‡¦ç†
            // adminç‰ˆã¨blogsç‰ˆãƒœã‚¿ãƒ³ã®åŒæœŸã®ãŸã‚ã€å¸¸ã«å®Ÿè¡Œã™ã‚‹
            Hatena.Diary.Pages.Admin['globalheader'].initSubscribe(info);

            // éå…¬é–‹ãƒ–ãƒ­ã‚°ãªã‚‰éµã‚’è¡¨ç¤º
            // ãƒ–ãƒ­ã‚°ã‚¿ã‚¤ãƒˆãƒ«ã¯ãã®ã‚ã¨ã«appendã™ã‚‹
            if (!info.is_public) {
                $('.js-blog-private-badge').show();
            }

            $('#current-blog .current-blog-title').append(document.createTextNode(info.blog_name));

            Hatena.Diary.Pages.Admin['globalheader'].initBlogDropdown(BASE);
            Hatena.Diary.Pages.Admin['globalheader'].initAdminDropdown(BASE);
        });

        $('.login').attr('href', 'https://www.hatena.ne.jp/login?location=' + encodeURIComponent(loc));

        // globalheaderã¯ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã•ã‚Œã¦ã„ã‚‹ã®ã§ã€jsã§viaã®å¼•ãç¶™ãã‚’ã™ã‚‹
        Hatena.Diary.Pages.message('inheritVia', function (via) {
            Hatena.Diary.LOG(['inheritVia', via]);
            Hatena.Diary.inheritVia(via);
        });

        Hatena.Diary.Pages.message('newEntryGeometry', function() {
            var $newEntry = $('a.new-entry');
            var offset = $newEntry.offset();
            Hatena.Diary.Pages.send('newEntryGeometry', {
                top    : offset.top,
                left   : offset.left,
                height : $newEntry.height(),
                width  : $newEntry.width()
            });
        });
    };

    Hatena.Diary.Pages.Admin['globalheader'].coloringSvgHeader = function (img, callback_with_jquery_obj) {
        img.onload = null; // ã“ã“ã¾ã§ã«è¤‡æ•°ã®eventãŒfireã—ã¦ã‚‹ã“ã¨ãŒã‚ã‚‹?
        try {
            var color = document.body.getAttribute('data-color');
            $(img).find('path').attr('fill', color);
        } catch (e) { Hatena.Diary.BUG(e, 'render logo') }
        callback_with_jquery_obj($(img));
    };

    Hatena.Diary.Pages.Admin['globalheader'].renderDropdown = function (color) {
        var img = new Image();
        img.src = '/images/header/dropdown@2x.png';
        img.onload = function () { try {
            img.onload = null;
            var canvas = document.createElement('canvas');
            canvas.setAttribute('width', 24);
            canvas.setAttribute('height', 24);
            if (!canvas.getContext) return;
            var ctx = canvas.getContext('2d');
            ctx.drawImage(img, 0, 0);
            ctx.globalCompositeOperation = 'source-in';
            ctx.fillStyle = color;
            ctx.fillRect(0, 0, 24, 24);
            if (!canvas.toDataURL) return;
            var data = canvas.toDataURL();

            var style = document.createElement('style');
            style.setAttribute('type', 'text/css');
            style.appendChild(document.createTextNode('#header span.header-dropdown, #header span.header-dropdown-custom { background: url(' + data + ') center right no-repeat; background-size: 12px 12px; }'));
            document.body.appendChild(style);
        } catch (e) {
            Hatena.Diary.BUG(e, 'render logo dropdown');
            img.src = '/images/header/dropdown.gif';
        } };
    };

    Hatena.Diary.Pages.Admin['globalheader'].initAdminDropdown = function (BASE) {
        var $mymenu = $('#header-my');
        $mymenu.click(function () {
            Hatena.Diary.Pages.send('mymenu', {
                BASE: BASE,
                right: $mymenu.offset().left + $mymenu.width()
            });
            return false;
        });
    };

    Hatena.Diary.Pages.Admin['globalheader'].initBlogDropdown = function (BASE) {
        $('#current-blog, #my-blogs').click(function () {
            Hatena.Diary.Pages.send('blogmenu', {
                BASE: BASE,
                left: $(this).offset().left
            });
            return false;
        });
    };

    Hatena.Diary.Pages.Admin['globalheader'].initSubscribe = function (info) {
        // ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ˜ãƒƒãƒ€ã«ã‚ã‚‹è³¼èª­ãƒœã‚¿ãƒ³ã®å‡¦ç†
        // è³¼èª­æ¸ˆãªã‚‰å‡ºã•ãªã„
        // è‡ªåˆ†ã®ãƒ–ãƒ­ã‚°è³¼èª­ã—ã¦ã‚‚ä»•æ–¹ãªã„ã®ã§ï¼Œã“ã®ãƒ–ãƒ­ã‚°ã«ãªã‚“ã‹æ›¸ã‘ã‚‹äººã«ã‚‚å‡ºã•ãªã„
        if (!info.subscribe && !info.can_open_editor) {
            var $subscribe = $('.js-globalheader-subscribe');
            var $done = $('.js-globalheader-subscribed-message');

            $subscribe.show();

            $subscribe.click(function () {
                Hatena.Diary.Pages.send('subscribe', {
                    left: $subscribe.offset().left
                });
                return false;
            });

            // è³¼èª­å®Œäº†ã—ãŸã‚‰ã€Œè³¼èª­ä¸­ã§ã™ã€å‡ºã™
            Hatena.Diary.Pages.message('subscribed-current-blog', function (data) {
                $subscribe.hide();
                $done.show().delay(3000).fadeOut('slow');
            });
        }

        // è³¼èª­ãƒœã‚¿ãƒ³ã®adminç‰ˆã¨blogsç‰ˆã¨ã®åŒæœŸã‚’è¡Œã†
        // admin -> blogs
        window.addEventListener("storage", function (event) {
            if (event.key !== 'subscription') { return; }
            Hatena.Diary.Pages.send('subscription', JSON.parse(event.newValue));
        });
        // blogs -> admin
        Hatena.Diary.Pages.message('subscription', function (data) {
            for (var key in data) {
                Hatena.Diary.SubscribeButtonAdmin.setSubscription(key, data[key]);
            }
        });
    };

})(jQuery);

(function($){

    Hatena.Diary.Pages.Admin['index'] = function () {
        $('.access-graph[itemscope]').each(function () {
            var $this = $(this);
            var i = 0; var data  = $this.find('meta').map(function () {
                return [ [i++, +this.getAttribute('content')] ];
            });

            $.plot($this, [
                {
                    data : data,
                    bars: { show: true, lineWidth: 0.7 },
                    points : { show: false },
                    legend : { show: false },
                    shadowSize : 0
                }
            ], {
                xaxis : {
                    min: 0,
                    ticks: []
                },
                yaxis : {
                    min: 1,
                    autoscaleMargin: 0.1,
                    ticks: []
                },
                grid : {
                    show: false
                }
            });
        });
        $(document.body).click(function () {
            $('.config-dropdown-window').removeClass('open');
        });
        $('.dropdown-toggle').click(function () {
            var dropdown = $(this).closest('.myblog-box').find('.config-dropdown-window');
            if (dropdown.hasClass('open')) {
                dropdown.removeClass('open');
            } else {
                $('.config-dropdown-window').removeClass('open');
                dropdown.addClass('open');
            }
            return false;
        });

        // cookieã‚‚ã£ã¦ãŸã‚‰éå…¬é–‹ãƒ–ãƒ­ã‚°ã®æƒ…å ±ã‚‚è¡¨ç¤ºã™ã‚‹ã‚¢ãƒ³ãƒ†ãƒŠ
        var $closedBlogs = $('.closed-blog');
        $closedBlogs.each(function(){
            var $closedBlog = $(this);
            var antennaUrl = $closedBlog.data("antennaUrl");
            $.ajax({
                type: 'GET',
                url: antennaUrl,
                data: { lite: 1, device: 'pc' },
                dataType: 'html',
                crossDomain: true,
                xhrFields: {
                    withCredentials: true
                }
            }).done(function(res){
                var $res = $($.parseHTML(res));
                $closedBlog = $closedBlog.replaceWith($res);
                var $blogContents = $res.find('.js-blog-content');
                Hatena.Locale.updateTimestamps($blogContents[0]);
            });
        });

        Hatena.Diary.Pages.Admin['index'].getDashboardData();
    };

    Hatena.Diary.Pages.Admin['index'].getDashboardData = function () {
        $.ajax({
            type: 'GET',
            url: '/-/dashboard_data'
        }).done(function(data) {
            if ($('section.js-hot-entries-section').length) {
              $('section.js-hot-entries-section').append(data.hot_entries);
            }

            if ($('section.js-hot-blogs-section').length) {
              $('section.js-hot-blogs-section').append(data.hot_blogs);
            }

            if ($('section.js-recent-blogs-section').length) {
              $('section.js-recent-blogs-section').append(data.recent_blogs);
            }

            if ($('section.js-subscribing-blogs-section').length) {
              $('section.js-subscribing-blogs-section').append(data.subscribing_blogs);
            }

            Hatena.Locale.updateTimestamps();
        });
    };

})(jQuery);

(function($){

    Hatena.Diary.Pages.Admin['invite-new'] = function () {
        Hatena.Locale.setupTimestampUpdater();
    };

})(jQuery);
(function($){

    Hatena.Diary.Pages.Admin['locale'] = function () {
        Hatena.Diary.Pages.createForParent();

        $('#locale-window a').on('click', function () {
            var $this = $(this);
            var lang = $this.attr('data-lang');
            Hatena.Locale.setAcceptLang(lang);
            Hatena.Diary.Pages.send('reload');
            return false;
        });

        Hatena.Diary.Util.sendResizeRequest();
    };

})(jQuery);
(function($){

    Hatena.Diary.Pages.Admin['menu-blogmenu'] = function () {
        Hatena.Diary.Pages.createForParent();
        Hatena.Diary.Util.sendResizeRequest();

        Hatena.Diary.Pages.send('init');
        Hatena.Diary.Pages.message('init', function(init) {
            $('.subscribe').click(function () {
                Hatena.Diary.Pages.send('subscribe', {
                    left: init.left ? init.left : 0
                });
                return false;
            });
        });
        $('.edit-this-entry').click(function () {
            Hatena.Diary.Pages.send('edit-this-entry');
            return false;
        });
        $('.new-entry').click(function () {
            Hatena.Diary.Pages.send('new-entry');
            return false;
        });

    };

})(jQuery);

(function($){
    Hatena.Diary.Pages.Admin['menu-myblogmenu'] = function () {
        Hatena.Diary.Pages.createForParent();

        // myblogmenuã¯åˆã‚éè¡¨ç¤ºã®çŠ¶æ…‹ã§ã‚ã‚Šã€
        // éè¡¨ç¤ºè¦ç´ ã®ã‚µã‚¤ã‚ºã‚’ã¨ã‚‹ã¨Firefoxç­‰ã§ãŠã‹ã—ããªã‚‹ï¼
        // å®Ÿéš›ã«è¡¨ç¤ºã•ã‚Œã‚‹ã®ã‚’å¾…ã£ã¦ã‹ã‚‰resizeã™ã‚‹

        Hatena.Diary.Util.waitForResource(function() {
            return $(document.body).is(':visible');
        }, function() {
            Hatena.Diary.Util.sendResizeRequest();
        }, 100);

        $(document.body).mouseenter(function () {
            Hatena.Diary.Pages.send('mouseenter');
        });
    };
})(jQuery);

(function($){

    Hatena.Diary.Pages.Admin['menu-mymenu'] = function () {
        Hatena.Diary.Pages.createForParent();
        Hatena.Diary.Util.sendResizeRequest();

        $('.new-entry').click(function () {
            Hatena.Diary.Pages.send('new-entry');
            return false;
        });

        var $help = $('#help');
        $help.click(function () {
            Hatena.Diary.Pages.send('feedback', {
                uri: $help.attr('data-feedback-url')
            });
            return false;
        });

        // iPadãªã©ã®ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆãƒ‡ãƒã‚¤ã‚¹ã®ã¨ãã¯ã€
        if (Hatena.Diary.Browser.isTablet) {
            var last_submenu_blog_uri;

            $('a.myblog').on('touchstart touchmove', function () {
                return false;
            });

            $('a.myblog').on('touchend', function () {
                var blog_uri = $(this).attr('href');

                if (last_submenu_blog_uri) {
                    Hatena.Diary.Pages.send('myblogmenu.close', { blogUri: last_submenu_blog_uri });
                }

                Hatena.Diary.Pages.send('myblogmenu.open', { blogUri: blog_uri });

                last_submenu_blog_uri = blog_uri;
                return false;
            });
        } else {
            $('.dropdown-mymenu').menuAim({
                activate: function (li) {
                    var has_submenu = $(li).hasClass('dropdown-mymenu-submenu');
                    if(!has_submenu) return;

                    var blog_uri = $(li).find('a').attr('href');

                    Hatena.Diary.Pages.send('myblogmenu.open', { blogUri: blog_uri });
                },
                deactivate: function (li) {
                    var has_submenu = $(li).hasClass('dropdown-mymenu-submenu');
                    if(!has_submenu) return;

                    var blog_uri = $(li).find('a').attr('href');

                    Hatena.Diary.Pages.send('myblogmenu.close', { blogUri: blog_uri });
                },
                submenuDirection: 'left'
            });
        }

        $('a.myblog').each(function () {
            var top = $(this).position().top;
            var blog_uri = $(this).attr('href');
            Hatena.Diary.Pages.send('myblogmenu.init', { top: top, blogUri: blog_uri });
        });
    };
})(jQuery);

(function($){

    Hatena.Diary.Pages.Admin['menu-services'] = function () {
        Hatena.Diary.Pages.createForParent();
        Hatena.Diary.Pages.message('init', function (data) {

            // data ã¯å±é™ºãªå†…å®¹ã§ã‚ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹
            var BASE = data.BASE;
            var servicesInUse = data.info.services;

            var usernameWindow = $('#username-window');

            $('<dt class="label"><span>Services in Use</span></dt>').
                find('span').text(Hatena.Locale.text('services_in_use')).end().
                appendTo(usernameWindow);

            // global headerã«å‡ºã™ãƒªã‚¹ãƒˆã‚’ä½œã‚‹
            var subdomainsForShow = [];
            for (var s in servicesInUse) {
                if (servicesInUse[s].is_beta) continue;
                if (!servicesInUse[s].portal_top_priority) continue;
                subdomainsForShow.push(s);
            }
            subdomainsForShow.sort(function (a, b) {
                return servicesInUse[b].portal_top_priority -
                    servicesInUse[a].portal_top_priority;
            });

            for (var i = 0, length = subdomainsForShow.length; i < length; i++) {
                var subdomain = subdomainsForShow[i];
                var service = servicesInUse[subdomain];
                if (!service) continue;
                var url = 'http://www' + BASE + '/me/' + service.name + '/';
                var favicon = '//www.hatena.com/images/favicon/' + service.name + '.png';
                $('<dd><a href="" rel="noreferrer" target="_blank"><img alt="" width="16" height="16"/></a></dd>').
                    find('a').
                    find('img').attr('src', favicon).end().
                    attr('href', url).append(document.createTextNode(service.text)).
                    end().
                    appendTo(usernameWindow);
            }

            $('<dt class="label"><span>Lang</span></td>').
                find('span').text(Hatena.Locale.text('lang')).end().
                appendTo(usernameWindow);

            var langs = Hatena.Locale.getAvailLangs();
            for (var i = 0; i < langs.length; i++) {
                var lang = langs[i];
                if (langs[i] == Hatena.Locale.getTextLang()) {
                    $('<dd><span class="selected">lang</span></dd>').
                        find('span').
                        text(Hatena.Locale.text('lang.' + lang + '.native')).
                        end().
                        appendTo(usernameWindow);
                } else {
                    $('<dd><a href="#">lang</a></dd>').
                        find('a').
                        attr('data-lang', lang).
                        text(Hatena.Locale.text('lang.' + lang + '.native')).
                        end().
                        appendTo(usernameWindow);
                }
            }
            usernameWindow.find('a[data-lang]').click(function () {
                var lang = $(this).attr('data-lang');
                Hatena.Locale.setAcceptLang(lang);
                Hatena.Diary.Pages.send('reload');
                return false;
            });

            $('<dt class="label"><span>My Hatena</span></dt>').
                find('span').text(Hatena.Locale.text('my_hatena')).end().
                appendTo(usernameWindow);

            $('<dd><a href="" rel="noreferrer" target="_blank"><img src="/images/favicon/my.png" width="16" height="16" alt=""></a></dd>').
                find('a').attr('href', 'http://www' + BASE + '/my/').append(Hatena.Locale.text('profile')).end().
                appendTo(usernameWindow);

            $('<dd><a href="" rel="noreferrer" class="logout" target="_parent"><img width="16" height="16" src="/images/favicon/logout.gif"></a></dd>').
                find('a').
                attr('href', 'http://www' + BASE + '/logout?location=' + encodeURIComponent(data.location)).append(Hatena.Locale.text('logout')).
                click(function () {
                    return confirm(Hatena.Locale.text('really_want_to_logout'));
                }).
                end().
                appendTo(usernameWindow);

            Hatena.Diary.Util.sendResizeRequest();
        });

        Hatena.Diary.Pages.send('init');
    };

})(jQuery);

(function($){

    Hatena.Diary.Pages.Admin['plus-quit'] = function () {
        $('form').submit(function () {
            $(this).find('input:submit').attr('disabled', 'disabled');
        });
    };

})(jQuery);
(function ($) {
    Hatena.Diary.Pages.Admin['refusal'] = function () {
        var RefusedUser = function(name) {
            if (name.length < 2) throw "invalid name";
            this.name = name;
        };
        RefusedUser.prototype = {
            getName: function(){
               return this.name;
            },
            getProfileImage: function() {
                return 'http://cdn1.www.st-hatena.com/users/' + this.getName().substr(0, 2) + '/' + this.getName() + '/profile.gif';
            },
            getURL: function() {
                return 'http://profile.hatena.ne.jp/' + this.getName() + '/';
            },
            getHatenaID: function() {
                return 'id:' + this.getName();
            },
            equals: function(user) {
                return this.name === user.name;
            }
        };
        RefusedUser.loadUserNames = function(userNames) {
            return _.map(userNames, function(name) {
                return new RefusedUser(name);
            });
        };

        var RefusalManager = function() { this.init.apply(this, arguments); };
        RefusalManager.prototype = {
            init: function() {
                this.refusals = [];
            },
            load: function(refusals) {
                this.refusals = refusals;
                $(this).trigger('refusalsChanged');
            },
            add: function(refusal){
                var self = this;
                if (self.isRefused(refusal)) return;

                var refusals = self.refusals.concat(refusal);
                this._save(refusals).done(function() {
                    $(self).trigger('refusalAdded');
                }).fail(function() {
                    $(self).trigger('refusalSaveFailed');
                });
            },
            remove: function(refusal){
                var self = this;
                if (!self.isRefused(refusal)) return;

                var refusals = _.reject(self.refusals, function(target) { return self.isEqual(refusal, target); });
                this._save(refusals).done(function() {
                    $(self).trigger('refusalRemoved');
                }).fail(function() {
                    $(self).trigger('refusalSaveFailed');
                });
            },
            isEqual: function(refusal, other) {
                return refusal === other;
            },
            isRefused: function(refusal){
                var self = this;
                return _.find(this.refusals, function (target) { return self.isEqual(refusal, target); });
            },
            getRefusals: function() {
                return this.refusals;
            },
            _save_url: 'specify this',
            _getSaveParams: function(refusals) {
                throw new Error('implement this');
            },
            _save: function(refusals) {
                var self = this;
                var saved = $.Deferred();
                $.ajax({
                    url: self._save_url,
                    type: 'POST',
                    data: _.extend(self._getSaveParams(refusals), {
                        rkm: Hatena.Diary.data('rkm'),
                        rkc: Hatena.Diary.data('rkc')
                    }),
                    traditional: true,
                    dataType: 'json'
                }).done(function() {
                    self.refusals = refusals;
                    $(self).trigger('refusalsChanged');
                    saved.resolve();
                }).fail(function() {
                    saved.reject();
                });
                return saved;
            }
        };

        var UserRefusalManager = function () { this.init.apply(this, arguments) };
        UserRefusalManager.prototype = {
            getUserNames: function() {
                return _.map(this.refusals, function(user) { return user.getName() });
            },
            isEqual: function(user, other) {
                return user.equals(other);
            },
            _save_url: '/-/refusal/save',
            _getSaveParams: function(users) {
                return {
                    user_names: _.map(users, function(user) { return user.getName() })
                };
            }
        };
        Hatena.Diary.Util.extend(UserRefusalManager.prototype, RefusalManager.prototype);
        

        var IpRefusalManager = function () { this.init.apply(this, arguments); };
        IpRefusalManager.prototype = {
            _save_url: '/-/refusal/save_refused_ips',
            _getSaveParams: function(ips) {
                return { ips: ips };
            }
        };
        Hatena.Diary.Util.extend(IpRefusalManager.prototype, RefusalManager.prototype);
        
        RefusalManagerView = function($container) {
            this.$refusalsContainer = $container.find('.js-refusals-container');
            this.refusalsTemplate = _.template($container.find('.js-refusals-template').html());
            this.$alertAdded = $container.find('.js-alert-added');
            this.$alertRemoved = $container.find('.js-alert-removed');
            this.$alertNotFound = $container.find('.js-alert-not-found');
        };
        RefusalManagerView.prototype = {
            onChanged: function(manager){
                this.$refusalsContainer.html(this.refusalsTemplate({ refusals: manager.getRefusals() }));
            },
            onAdded: function(manager) {
                this.showAlert(this.$alertAdded);
            },
            onRemoved: function(manager) {
                this.showAlert(this.$alertRemoved);
            },
            onNotFound: function(manager) {
                this.showAlert(this.$alertNotFound);
            },
            showAlert: function($alert) {
                _.each([this.$alertAdded, this.$alertRemoved, this.$alertNotFound], function($elem) {
                    $elem.hide();
                });
                $alert.show();
                setTimeout(function() {
                    $alert.fadeOut('slow');
                }, 3000);
            }
        };

        var user_manager = new UserRefusalManager();
        var ip_manager = new IpRefusalManager();
        var user_manager_view = new RefusalManagerView($('.js-refuse-users'));
        var ip_manager_view = new RefusalManagerView($('.js-refuse-ips'));

        $(user_manager).on('refusalsChanged', function() {
            user_manager_view.onChanged(this);
        }).on('refusalAdded', function() {
            user_manager_view.onAdded(this);
        }).on('refusalRemoved', function() {
            user_manager_view.onRemoved(this);
        }).on('refusalSaveFailed', function() {
            user_manager_view.onNotFound(this);
        });

        $(ip_manager).on('refusalsChanged', function() {
            ip_manager_view.onChanged(this);
        }).on('refusalAdded', function() {
            ip_manager_view.onAdded(this);
        }).on('refusalRemoved', function() {
            ip_manager_view.onRemoved(this);
        }).on('refusalSaveFailed', function() {
            ip_manager_view.onNotFound(this);
        });

        // èª­ã¿è¾¼ã¿
        var userNames = $('.js-refused-users-container').data('user-names');
        if (userNames.length > 0) {
            var users = RefusedUser.loadUserNames(userNames.split(','));
            user_manager.load(users);
        }

        var ips = $('.js-refused-ips-container').data('ips');
        if (ips.length > 0) {
            ip_manager.load(ips.split(','));
        }

        var isLikeIpAddress = function (target) {
            // ipv6ã£ã½ã„ã®ã«ã‚‚ä¸€å¿œãƒãƒƒãƒã™ã‚‹ãŒã€å³å¯†ã§ã¯ãªã„
            return (/^(\d{1,3}(\.\d{1,3}){3})|([0-9a-fA-F]{1,4}(:[0-9a-fA-F]{1,4})+)$/).test(target);
        };

        // è¿½åŠ 
        $('.js-refuse-users').on('submit', function (event) {
            event.preventDefault();
            var $input = $('input[name="refusal_input"]');
            var name = $input.val();

            // IPã‚¢ãƒ‰ãƒ¬ã‚¹ã«ã¯å¿…ãš':' '.'ãªã©ã®åŒºåˆ‡ã‚Šè¨˜å·ãŒå«ã¾ã‚Œã‚‹ã®ã§, ã¯ã¦ãªIDã¨ã¯ã¶ã¤ã‹ã‚‰ãªã„
            if (isLikeIpAddress(name)) {
                ip_manager.add(name);
            } else {
                var user;
                try {
                    user = new RefusedUser(name);
                } catch(ignore) {}
                if (user) user_manager.add(user);
            }
            $input.val('').focus();
            return false;
        });

        // å‰Šé™¤
        $('.js-refuse-users').on('click', '.js-delete-refused-user', function () {
            var name = $(this).closest('.refused-user').data('user-name');
            user_manager.remove(new RefusedUser(name));
        });

        $('.js-refuse-ips').on('click', '.js-delete-refusal', function () {
            var ip = $(this).closest('.refused-ip').data('ip');
            ip_manager.remove(ip);
        });
    };

})(jQuery);

(function($){

    Hatena.Diary.Pages.Admin['register'] = function () {
        if (!Hatena.Diary.data('name')) return; // guest

        var dispatcher = Hatena.Diary.Pages.Admin['register'];
        dispatcher.submitButton = $('input[type=submit]');

        var $domain = $(':input[name="domain"]');
        var $blogIdInput = $('input[name="id"]');
        var requestThreshold = 1000;
        dispatcher.STATES = {
            progress: {
                className: 'progress',
                message: $('.domain-check-message.progress')
            },
            available: {
                className: 'check',
                message: $('.domain-check-message.check')
            },
            unavailable: {
                className: 'error',
                message: $('.domain-check-message.error')
            },
            invalid: {
                className: 'invalid',
                message: $('.domain-check-message.invalid')
            },
            invalidLength: {
                className: 'invalid-length',
                message: $('.domain-check-message.invalid-length')
            }
        };

        // ã“ã®Stateã‚’è¦‹ã¦submitButtonã®æœ‰åŠ¹åŒ–ç„¡åŠ¹åŒ–ã‚’è¡Œã†
        dispatcher.inputValidStates = {
            "id" : true,
            "import" : true
        };

        var fetchBlogIdAvailability = function () {
            var blogID = $blogIdInput.val();
            var topdomain = $domain.val();

            if ( ! blogID ) {
                return;
            } else if (blogID.length < 2 || blogID.length > 32) {
                Hatena.Diary.Pages.Admin['register'].changeAvailabilityState({
                    nextState: 'invalidLength'
                });
                return;
            } else if (! /^[a-zA-Z0-9][a-zA-Z0-9\-]+$/.test(blogID)) {
                Hatena.Diary.Pages.Admin['register'].changeAvailabilityState({
                    nextState: 'invalid'
                });
                return;
            }

            var brand_name = $('[data-brand-name]').attr('data-brand-name');
            $.ajax({
                url: '/api/blog/domain_registry',
                dataType: 'json',
                data: {
                    blog_ids: JSON.stringify([blogID]),
                    brand_name: brand_name
                }
            }).done(function (data) {
                var domain_statuses = data[blogID];

                if (domain_statuses !== undefined) {
                    dispatcher.checkBlogIdAvailability({
                        blogID: blogID,
                        topdomain: topdomain,
                        statuses: domain_statuses
                    });
                }
            });
        };

        fetchBlogIdAvailability();

        $domain.change(fetchBlogIdAvailability);
        $blogIdInput.
            keyup(_.debounce(fetchBlogIdAvailability, requestThreshold)).
            keyup(function () {
                dispatcher.changeAvailabilityState({
                    nextState: 'progress'
                });
            });

        var fillinDefault = function() {
            var user_name = Hatena.Diary.data('name').toLowerCase().replace(/_/, '-');
            var brand_name = $('[data-brand-name]').attr('data-brand-name');
            $.ajax({
                url: '/api/blog/domain_registry',
                dataType: 'json',
                data: {
                    blog_ids: JSON.stringify([user_name]),
                    brand_name: brand_name
                }
            }).done(function (data) {
                var domain_statuses = data[user_name];

                if (typeof domain_statuses === 'undefined' || typeof domain_statuses === null) {
                    domain_statuses = {};
                }

                var available_domains = Hatena.Diary.Pages.Admin['register'].availableDomains(domain_statuses);

                if (_.any(available_domains)) {
                    var $domain = $(':input[name="domain"]');
                    var current_domain = $domain.val();
                    if (! _.include(available_domains, current_domain)) {
                        $domain.val(available_domains[0]);
                    }

                    var idInput = $('input[name=id]');
                    if (idInput.val() === '') {
                        // idãŒç©ºã®ã¨ãuseråã‹ã‚‰ãƒ•ã‚£ãƒ«ã‚¤ãƒ³
                        idInput.val(user_name);
                        Hatena.Diary.Pages.Admin['register'].changeAvailabilityState({
                            nextState: 'available'
                        });
                    }
                }
            });
        };

        fillinDefault();

        if ($('input[name=import]').length) {
            $('input[name=permission],input[name=import]').change(function () {
                dispatcher.changeImportAvailabilityState();
            });
            $('.import-error').hide();
            dispatcher.changeImportAvailabilityState();
        }
    };

    Hatena.Diary.Pages.Admin['register'].changeAvailabilityState = function (args) {
        var dispatcher = Hatena.Diary.Pages.Admin['register'];
        var nextState = args.nextState;

        if (nextState == 'unavailable' || nextState == 'invalid' || nextState == 'invalidLength') {
            dispatcher.inputValidStates['id'] = false;
        }
        else {
            dispatcher.inputValidStates['id'] = true;
        }
        dispatcher.changeSubmitButtonState();

        _.each(Hatena.Diary.Pages.Admin['register'].STATES, function (value, key) {
            if (key === nextState) {
                value.message.show();
            } else {
                value.message.hide();
            }
        });
    };

    Hatena.Diary.Pages.Admin['register'].checkBlogIdAvailability = function (args) {
        var topdomain = args.topdomain;
        var blogID    = args.blogID;
        var statuses  = args.statuses;

        var inputState = statuses[topdomain];
        var availableDomains = Hatena.Diary.Pages.Admin['register'].availableDomains(statuses);

        if (inputState === 'unavailable' && _.any(availableDomains)) {
            Hatena.Diary.Pages.Admin['register'].suggestAlternativeDomainNames({
                blogID: blogID,
                availableDomains: availableDomains
            });
        }

        Hatena.Diary.Pages.Admin['register'].changeAvailabilityState({
            nextState: inputState
        });
    };

    Hatena.Diary.Pages.Admin['register'].suggestAlternativeDomainNames = function (args) {
        var blogID = args.blogID;
        var availableDomains = args.availableDomains;
        var $message = $('.domain-recommend');
        var $domain = $(':input[name="domain"]');

        $('.requested-blog-id').text(blogID);

        $message.find('ul').detach();
        var $alternatives = $('<ul/>');
        _.each(availableDomains, function (domain) {
            $('<li/>').
                text(blogID + '.' + domain).
                click(function () { $domain.val(domain).change() }).
                appendTo($alternatives);
        });
        $message.append($alternatives).show();
    };

    // domain_statuses = {
    //   $domain: 'available' || 'unavailable' || 'invalid'
    //   ...
    // }
    Hatena.Diary.Pages.Admin['register'].availableDomains = function (domain_statuses) {
        var domains = _.keys(domain_statuses);
        var availableDomains = _.select(domains, function (domain) { return domain_statuses[domain] === 'available'; });

        return availableDomains;
    };

    Hatena.Diary.Pages.Admin['register'].changeImportAvailabilityState = function (args) {
        var dispatcher = Hatena.Diary.Pages.Admin['register'];

        var $checkedPermission = $('input[name=permission]:checked');
        var $selectedImport    = $('input[name=import]:checked');

        var blogPermission  = $checkedPermission.val();
        var diaryPermission = $selectedImport.attr('data-permission');

        var $errorMessage = $('.import-error');
        if (diaryPermission == 'private' && blogPermission == 'public') {
            $errorMessage.show();
            dispatcher.inputValidStates['import'] = false;
            dispatcher.changeSubmitButtonState();
        }
        else {
            $errorMessage.hide();
            dispatcher.inputValidStates['import'] = true;
            dispatcher.changeSubmitButtonState();
        }
    };

    Hatena.Diary.Pages.Admin['register'].changeSubmitButtonState = function (args) {
        var dispatcher = Hatena.Diary.Pages.Admin['register'];
        var submitButton = dispatcher.submitButton;

        var shouldEnabled = _.every(dispatcher.inputValidStates, function (valid) {
            return valid;
        });

        if (shouldEnabled) {
            submitButton.attr('disabled', false);
            submitButton.removeClass('disabled');
            submitButton.addClass('btn-blue');
        }
        else {
            submitButton.attr('disabled', true);
            submitButton.removeClass('btn-blue');
            submitButton.addClass('disabled');
        }
    };

})(jQuery);

(function($){

    Hatena.Diary.Pages.Admin['register-iframe'] = function () {
        if (!Hatena.Diary.data('name')) return; // guest

        var fillinDefault = function() {
            var user_name = Hatena.Diary.data('name').toLowerCase().replace(/_/, '-');
            var idInput = $('input[name=id]');
            if (idInput.val() === '') {
                // idãŒç©ºã®ã¨ãuseråã‹ã‚‰ãƒ•ã‚£ãƒ«ã‚¤ãƒ³
                idInput.val(user_name);
            }
        };

        fillinDefault();
    };

})(jQuery);
(function($){

    Hatena.Diary.Pages.Admin['store-theme-new'] = function () {
        var $availableLicenses = $('.available-licenses');
        var $showAvailableLicenses = $('.show-more').find('a');
        var expandAvailableLicenses = function () {
            $availableLicenses.show();
            $availableLicenses.attr('data-collapsed', 0);
            $showAvailableLicenses.text($showAvailableLicenses.attr('data-collapse-message'));
        };
        var collapseAvailableLicenses = function () {
            $availableLicenses.hide();
            $availableLicenses.attr('data-collapsed', 1);
            $showAvailableLicenses.text($showAvailableLicenses.attr('data-expand-message'));
        };

        $availableLicenses.hide();

        $showAvailableLicenses.on('click', function (e) {
            if ($availableLicenses.attr('data-collapsed') === '1') {
                expandAvailableLicenses();
            } else {
                collapseAvailableLicenses();
            }
            e.preventDefault();
        });

        $('.deed').hide();
        $('.show-deed').on('click', function (e) {
            $($(this).attr('data-target-selector')).toggle();
            return false;
        });

        // é¸æŠã—ã¦ã‚‹ã‚„ã¤ãŒéš ã‚Œã¦ãŸã‚‰è¦‹ã›ã‚‹
        if ($('input[name=license]:checked').is(':visible') === false) {
            $showAvailableLicenses.click();
        }
    };

})(jQuery);
(function($){

    Hatena.Diary.Pages.Admin['store-theme-theme_id'] = function () {
        if (Hatena.Star) {
            Hatena.Star.SiteConfig = {
                entryNodes: {
                    '#container' : {
                        uri: 'a.permalink',
                        title: 'h1.theme-name',
                        container: '.star-container'
                    }
                }
            };
        }

        var self = Hatena.Diary.Pages.Admin['store-theme-theme_id'];
        self.$themeContainer = $('#store-container');
        self.$installDialog = $('.blog-title-dropdown-window');
        self.$installButton = $('#sidebar').find('.install-theme-btn');

        self.$installDialog.hide();
        self.$installButton.click(function () {
            self.$installDialog.slideToggle();
        });

        $('#theme-detail-tabs').tabs({ active : 0});
    };

})(jQuery);
(function($){

    Hatena.Diary.Pages.Admin['topic-show'] = function () {
        $('#topic-entries-tabs').tabs({ active : 0 });
    };

})(jQuery);
(function($){

    Hatena.Diary.Pages.Admin['user-blog-about_config'] = function () {
        var table = $('#about-config');
        var form  = $('#form-edit');
        var key   = $('#key');
        var value = $('#value');
        var del   = $('#delete-button');

        function update (key, value) {
            var tr = table.find('tr[data-key="' + key + '"]');
            if (!tr.length) {
                tr = $('<tr><th></th><td></td></tr>');
            }

            tr.attr({
                'data-key' : key,
                'data-value' : value
            });
            tr.find('th').text(key);
            tr.find('td').text(value);

            if (!tr.parent().length) table.find('tbody').append(tr);
        }

        form.submit(function (e) {
            e.preventDefault();

            $.ajax({
                url : form.attr('action'),
                type : 'post',
                dataType : 'json',
                data: form.serialize(),
                success : function (data) {
                    update(data.key, data.value);
                    form.hide();
                }
            });
        });

        del.click(function (e) {
            $.ajax({
                url : form.attr('action'),
                type : 'post',
                dataType : 'json',
                data: form.serialize() + '&delete=1',
                success : function (data) {
                    update(data.key, data.value);
                    form.hide();
                }
            });
        });

        $('#button-new-value').click(function () {
            key.val('');
            value.val('');
            del.hide();
            form.show();
            key.focus();
        });

        table.find('td').on('click', function () {
            var tr = $(this).parent();

            key.val(tr.attr('data-key'));
            value.val(tr.attr('data-value'));
            del.show();
            form.show();
            value.focus();
        });
    };

})(jQuery);

(function($){

    Hatena.Diary.Pages.Admin['user-blog-accesslog'] = function () {
        var table = $('#access-counts').remove();
        var counts = {};
        table.find('tr').each(function () {
            var $this = $(this);
            var time  = +$this.find('td[data-time]').attr('data-time');
            var count = +$this.find('td[data-count]').attr('data-count');
            counts[time] = count;
        });

        AccessLog.showGraph(counts, {
            parent : $('#access-counts-daily'),
            timeformat : '%m/%d',
            minTickSize : [1, 'day'],
            unit   : 24 * 60 * 60 * 1000,
            number : 31
        });

        AccessLog.showGraph(counts, {
            parent : $('#access-counts-hourly'),
            timeformat : '%d %H:%M',
            minTickSize : [1, 'hour'],
            unit   : 60 * 60 * 1000,
            number : 48
        });

        $('#access-counts-tabs').tabs({ active : 0 });

        $('#summary-detail-tabs').tabs({ active : 0 });

        $('.summary-box .hosts').delegate('.host', 'click', function() {
            $('.summary-box .hosts .selected').removeClass('selected');
            $(this).addClass('selected');

            var host = $(this).attr('data-site-host');
            $('.summary-box .site.selected').removeClass('selected');
            $('.summary-box .sites').find('*[data-site-host="' + host + '"]').addClass('selected');
            return false;
        });
    };
})(jQuery);

(function($){

    Hatena.Diary.Pages.Admin['user-blog-categories'] = function () {
        var openRenameModalWindow = function(category_name) {
            var $modal = $('.js-rename-modal-window[data-category-name="' + category_name + '"]');
            if ($modal.is(':visible')) return;
            Hatena.Diary.Window.show($modal, {});
            $modal.find(':text').val(category_name).focus()[0].select();
        };
        $(document).on('click', '.js-show-rename-modal-window', function(event) {
            var category_name = $(event.target).attr('data-category-name');
            openRenameModalWindow(category_name);
        });

        // Hatena.Diary.Windowã¯ï¼Œdocumentã‚’clickã™ã‚‹ã¨ï¼ŒhideAllã™ã‚‹ï¼
        // .js-rename-modal-windowã‹ã‚‰å¤–ã«clickã‚¤ãƒ™ãƒ³ãƒˆã‚’ä¼æ’­ã•ã›ãªã„ãŸã‚ï¼Œã“ã“ã§æ­¢ã‚ã‚‹ï¼
        // ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦å†…ã®clickã‚¤ãƒ™ãƒ³ãƒˆã‚’document.on ã¨ã‹ã§å¾…ã£ã¦ã„ã¦ã‚‚ï¼Œã“ã“ã§æ­¢ã‚ã¦ã„ã‚‹ã®ã§ï¼Œ
        // éåŠ¹ç‡ã§ã¯ã‚ã‚‹ãŒï¼Œcloseãƒœã‚¿ãƒ³ãªã©å€‹åˆ¥ã«ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ã‚’è¨­å®šã—ã¦ã„ã‚‹ï¼
        // ãƒœã‚¿ãƒ³ã®æ•°ã¯ã‚ã¨ã‹ã‚‰å¢—ãˆãªã„ã®ã§ï¼Œã“ã‚Œã§å•é¡Œãªã„ï¼
        $('.js-rename-modal-window .js-icon-close').on('click', function() {
            Hatena.Diary.Window.hideAll();
        });
        $('.js-rename-modal-window').on('click', function(event) {
            event.stopPropagation();
        });
    };

})(jQuery);

(function($){

    Hatena.Diary.Pages.Admin['user-blog-comment-delete-deleted'] = function () {
        Hatena.Diary.Pages.createForParent();
        Hatena.Diary.Pages.send('delete');
    };

})(jQuery);

(function($){

    Hatena.Diary.Pages.Admin['user-blog-comment-delete'] = function () {
        Hatena.Diary.Pages.createForParent();
    };

})(jQuery);
(function($){

Hatena.Diary.Pages.Admin['user-blog-comment-done'] = function () {
    Hatena.Diary.Pages.createForParent();

    var comment = document.getElementById('posted').value;

    Hatena.Diary.Pages.send('update', { comment : comment });

    Hatena.Diary.Pages.send('close');
};

})(jQuery);

(function($){

    Hatena.Diary.Pages.Admin['user-blog-comment'] = function () {
        Hatena.Diary.Pages.createForParent();
        Hatena.Diary.Pages.Admin['user-blog-comment'].focusTextArea();
        Hatena.Diary.Util.sendResizeRequest();

        var formState = new Hatena.Diary.FormState();
        var form = $('#comment-form');
        formState.observeForm(form);
        form.bind('change', function () {
            formState.checkFormState();
        });
    };

    Hatena.Diary.Pages.Admin['user-blog-comment'].focusTextArea = function () {
        // IE9ã§focusã§ããªã„ã“ã¨ãŒã‚ã‚‹ã®ã§æ™‚é–“ã‚’ç½®ã„ã¦ä½•åº¦ã‚‚è©¦ã™
        try {
            $('#body').focus();
        } catch (e) {
            setTimeout(Hatena.Diary.Pages.Admin['user-blog-comment'].focusTextArea, 100);
        }
    };

})(jQuery);

(function($){
    Hatena.Diary.Pages.Admin['user-blog-comments'] = function () {
        $('button[name="mode"][value="delete"]').click(function () {
            return confirm(Hatena.Locale.text('admin.comments.delete.confirm'));
        });

        Hatena.Diary.Util.updateDynamicPieces($('.js-comments-table'));
    };

})(jQuery);
(function($){
    Hatena.Diary.Pages.Admin['user-blog-config'] = function () {
        Hatena.Diary.Util.loadNicknames($('.profile'));
    };
})(jQuery);

(function($){

    // ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ç½®ãå ´(å…¨ä½“ã®ã‚µã‚¤ãƒ‰ãƒãƒ¼ã€ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã®ãƒ¡ã‚¤ãƒ³ã‚«ãƒ©ãƒ ãªã©)ã«ä»˜ãã²ã¨ã¤ã§ãã‚‹
    // $elementã¯div[data-modules-type="sidebar"].sidebar-boxãªã©
    // editorã¯ ModuleEditorã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹
    var Modules = function($element, editor) {
        var self = this;
        self.$element = $element;
        self.editor = editor;
        self.init();
    };

    Modules.prototype = {
        init: function() {
            var self = this;

            // "sidebar"ãªã©ï¼Œã“ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ç½®ãå ´ã®ä½ç½®
            self.position = self.$element.attr('data-modules-type');

            self.modules = [];

            // è¿½åŠ ãƒœã‚¿ãƒ³æŠ¼ã—ãŸã‚‰ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«è¿½åŠ 
            self.$element.on('click', '.js-add-module', function() {
                self.addNewModule();
                return false;
            });

            self.$element.find('.module').each(function() {
                self.addModuleFromElement($(this));
            });

            // ä¸¦ã¹æ›¿ãˆå¯èƒ½ã«ã™ã‚‹ï¼çµ‚ã‚ã£ãŸã‚‰update
            self.$element.find('.modules').sortable({
                containment: 'parent',
                stop: function() {
                    self.onSorted();
                }
            });
        },
        // æ—¢å­˜ã®DOMè¦ç´ ã‹ã‚‰ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½œã‚Šç›£è¦–ã‚’å§‹ã‚ã‚‹
        addModuleFromElement: function($element) {
            var self = this;
            var module = new Module($element);
            self.awareModule(module);
            module.render();
        },
        // ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ã‚¤ãƒ™ãƒ³ãƒˆã‚’ç›£è¦–ã™ã‚‹
        awareModule: function(module) {
            var self = this;
            self.modules.push(module);
            $(module).on('removed', function() {
                self.onModuleRemoved(module);
            }).on('updated', function() {
                self.onUpdated();
            }).on('edit', function() {
                self.editModule(module);
            });
        },
        // ä¸¦ã³é †ãŒå¤‰ã‚ã£ãŸã‚‰self.modulesã‚‚è¿½å¾“ã™ã‚‹ï¼DOMã‹ã‚‰.modulesã‚’å–ã£ã¦ãã¦ï¼ŒgetElementã—ã¦è¦ç´ ãŒä¸€è‡´ã—ãŸã‚‚ã®ã‚’é¸ã¶ï¼
        onSorted: function() {
            var self = this;

            var sortedModules = self.$element.find('.module').map(function() {
                var element = this;

                var matchedModule = _.find(self.modules, function(module) {
                    return module.getElement()[0] === element;
                });

                return matchedModule;
            }).toArray();

            self.modules = sortedModules;

            self.onUpdated();
        },
        // ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒæ¶ˆãˆãŸã‚‰ï¼Œmodulesã‹ã‚‰æ¶ˆã—ã¦ï¼Œupdatedãƒ¡ã‚½ãƒƒãƒ‰ã‚’ç™ºè¡Œ
        onModuleRemoved: function(module) {
            var self = this;
            self.modules = _.difference(self.modules, [module]);
            self.onUpdated();
        },
        // æ—¢å­˜ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ç·¨é›†ï¼editorã®å‘¼ã³å‡ºã—ï¼Œå®Œäº†æ™‚ã«æ›´æ–°ï¼Œå¤±æ•—ã—ãŸã‚‰ä½•ã‚‚ã—ãªã„
        editModule: function(module) {
            var self = this;
            var session = self.editor.editModule(module);
            module.setAsSelected();
            session.done(function(data) {
                // data ã®æ›´æ–°
                module.update(data.type, data.title, data.value);
            }).always(function() {
                module.unsetAsSelected();
            });
        },
        // æ–°ã—ã„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’è¿½åŠ ã™ã‚‹ï¼DOMã®è¿½åŠ ï¼Œeditorã®å‘¼ã³å‡ºã—ï¼Œå®Œäº†æ™‚ã«æ›´æ–°ï¼Œå¤±æ•—ã—ãŸã‚‰æ¶ˆã™
        addNewModule: function() {
            var self = this;
            var module = Module.initializeWithModulesPosition(self.position);
            module.setAsNewModule();
            module.setAsSelected();
            self.$element.find('.modules').append(module.getElement());
            var session = self.editor.editNewModule(module);
            session.done(function(data) {
                self.awareModule(module);
                module.update(data.type, data.title, data.value);
                module.unsetAsNewModule();
                module.unsetAsSelected();
            }).fail(function() {
                module.remove();
            });
        },
        // updatedã‚¤ãƒ™ãƒ³ãƒˆã‚’ç™ºè¡Œã™ã‚‹ï¼å¤–ã§å¾…ã¡æ§‹ãˆã¦ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®æ›´æ–°ãªã©ã‚’è¡Œã†
        onUpdated: function() {
            var self = this;
            $(self).triggerHandler('updated');
        }
    };

    // ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«1ã¤ã‚’è¡¨ã™ï¼$elementã¯.module
    var Module = function($element) {
        var self = this;
        self.$element = $element;
        self.init();
    };

    Module.prototype = {
        init: function() {
            var self = this;

            // ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯ï¼Œtype, title, valueã®çµ„ã§è¡¨ã•ã‚Œã‚‹ï¼
            // typeã¯ï¼Œ"profile"ã¨ã‹ï¼
            // titleã¯ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ã‚¿ã‚¤ãƒˆãƒ«
            // valueã¯Object

            self.type = self.$element.find('input.js-module-type').val();
            self.title = self.$element.find('input.js-module-title').val();
            self.value = {};
            try {
                self.value = JSON.parse(self.$element.find('input.js-module-value').val());
            } catch(ignore) {}

            self.$element.on('click', '.js-edit-module', function() {
                self.edit();
                return false;
            }).on('click', '.js-remove-module', function() {
                if ( confirm(Hatena.Locale.text('blog.confirm.delete')) ) {
                    self.remove();
                }
                return false;
            });
        },
        // editã‚¤ãƒ™ãƒ³ãƒˆã‚’ç™ºè¡Œã™ã‚‹
        // modulesãŒã“ã®ã‚¤ãƒ™ãƒ³ãƒˆã‚’è¦‹ã¦ç·¨é›†UIã‚’å‡ºã™
        edit: function() {
            var self = this;
            $(self).trigger('edit');
        },
        // elementã‚’æ¶ˆã—ï¼Œremovedã‚¤ãƒ™ãƒ³ãƒˆã‚’ç™ºè¡Œã™ã‚‹
        // modulesãŒã“ã®ã‚¤ãƒ™ãƒ³ãƒˆã‚’è¦‹ã¦ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æ›´æ–°ã—ã¦ãã‚Œã‚‹
        remove: function() {
            var self = this;
            self.$element.remove();
            $(self).triggerHandler('removed');
        },
        // æŒ‡å®šã•ã‚ŒãŸå€¤ã«æ›´æ–°ã—æç”»
        update: function(type, title, value) {
            var self = this;
            self.type = type;
            self.title = title;
            self.value = value;
            self.render();
            $(self).trigger('updated');
        },
        // æ–°ãŸã«è¿½åŠ ä¸­ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼Ÿ
        isNewModule: function() {
            return this.isNew;
        },
        // æ–°ãŸã«è¿½åŠ ä¸­ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«çŠ¶æ…‹ã«ã™ã‚‹
        setAsNewModule: function() {
            this.isNew = true;
            this.$element.addClass('created');
        },
        // æ–°ãŸã«è¿½åŠ ä¸­ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«çŠ¶æ…‹ã‚’è§£é™¤ã™ã‚‹
        unsetAsNewModule: function() {
            this.isNew = false;
            this.$element.removeClass('created');
        },
        // ç·¨é›†ä¸­(é¸æŠä¸­)ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«çŠ¶æ…‹ã«ã™ã‚‹
        setAsSelected: function() {
            this.$element.addClass('selected');
        },
        // ç·¨é›†ä¸­(é¸æŠä¸­)ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«çŠ¶æ…‹ã‚’è§£é™¤ã™ã‚‹
        unsetAsSelected: function() {
            this.$element.removeClass('selected');
        },
        // æç”»ï¼æ—¢å­˜ã®elementã‚’æ›¸ãæ›ãˆã‚‹ï¼
        // inputã®è¨­å®šï¼Œã‚¯ãƒ©ã‚¹ã®è¿½åŠ ï¼Œè¡¨ç¤ºç”¨ã®ãƒ©ãƒ™ãƒ«ã®è¨­å®š
        render: function() {
            var self = this;
            self.$element.find('input.js-module-type').val(self.getType());
            self.$element.find('input.js-module-title').val(self.getTitle());
            self.$element.find('input.js-module-value').val(self.getValueAsJSON());
            self.$element.addClass(self.getType()); // ã“ã®ã‚¯ãƒ©ã‚¹ã¯ä½•ã®ãŸã‚ã«ä½¿ã£ã¦ã„ã‚‹ï¼Ÿ
            self.$element.find('.title, .clipped-content').text(self.getTitleForPreview());
        },
        getType: function() {
            return this.type;
        },
        getTitle: function() {
            return this.title;
        },
        getValue: function() {
            return this.value;
        },
        getElement: function() {
            return this.$element;
        },
        // è¡¨ç¤ºç”¨ã®ã‚¿ã‚¤ãƒˆãƒ«ï¼ã‚¿ã‚¤ãƒˆãƒ«ã‹ï¼ŒHTMLãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ã¨ãã¯æœ¬æ–‡ã®å…ˆé ­ã‹ï¼ŒHTMLãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ã¨ãã¯"HTML"
        getTitleForPreview: function() {
            var self = this;
            var title = self.getTitle();
            if (!title && self.getType() === 'html') {
                title = self.removeTag(self.value['module-value'] || '') || Hatena.Locale.text('blog.module.html');
            }
            return title;
        },
        // valueã¯ï¼Œinputã«ã¯JSONåŒ–ã—ã¦æ ¼ç´ã™ã‚‹
        getValueAsJSON: function() {
            var self = this;
            return JSON.stringify(self.value);
        },
        // HTMLãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ã‚¿ã‚¤ãƒˆãƒ«ãŒãªã„ã¨ãæœ¬æ–‡ã‚’è¡¨ç¤ºã™ã‚‹
        removeTag: function(html) {
            return html.replace(/<.*?>/g, '');
        }
    };

    // DOMã«å±ã•ãªã„æ–°ãŸãªãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½œã£ã¦è¿”ã™
    // modulesType: "sidebar"ãªã©ï¼Œãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®é…ç½®ã•ã‚Œã‚‹å ´æ‰€
    Module.initializeWithModulesPosition = function(position) {
        var template = $('.new-module-template').html();
        var module_html = _.template(template, {position: position});
        var $element = $($.parseHTML(module_html));
        var self = new Module($element);
        return self;
    };

    // moduleã®ç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦
    // ç·¨é›†ã¨è¿½åŠ ã§DOMã¯å…±é€šã§ï¼Œhide-radiosã¨ã„ã†ã‚¯ãƒ©ã‚¹ã‚’ä»˜ä¸ã™ã‚‹ã¨ï¼Œãƒ‘ãƒãƒ«é¸æŠUIãŒæ¶ˆãˆã‚‹
    var ModuleEditor = function($modalWindow) {
        var self = this;
        self.$modalWindow = $modalWindow;

        // $modalWindowã¯position: relativeå†…ã«å…¥ã£ã¦ã‚‹ï¼overlayã¯ç”»é¢å…¨ä½“ã‚’è¦†ã£ã¦ã»ã—ã„ã®ã§ï¼Œbodyã®æœ«å°¾ã«appendã—ç›´ã™
        self.$modalWindow.appendTo(document.body);

        self.$dialogBox     = self.$modalWindow.find('.dialog-box'); // ãƒ¢ãƒ¼ãƒ€ãƒ«ã§å‡ºã¦ãã‚‹boxã®æœ¬ä½“
        self.$dialogOverray = self.$modalWindow.find('.dialog-overray');
        self.$applyButton   = self.$modalWindow.find('.submit button.apply');
        self.$cancelButton  = self.$modalWindow.find('.submit button.cancel');
        self.$radios        = self.$modalWindow.find('.radios');

        // sessionã¯ãƒ¢ãƒ¼ãƒ€ãƒ«è¡¨ç¤ºä¸­ã«æœ‰åŠ¹ï¼ä¿å­˜ã§resolveï¼Œã‚­ãƒ£ãƒ³ã‚»ãƒ«ã§reject
        // åˆå›ã ã‘sessionãªã„ã¨é›£ã—ã„ã®ã§ï¼Œãƒ€ãƒŸãƒ¼ã®å€¤ã‚’å…¥ã‚Œã¦ãŠã
        self.session = $.Deferred();
        self.session.reject();

        self.init();
    };

    ModuleEditor.prototype = {
        init: function() {
            var self = this;

            // æ–°è¦ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«è¿½åŠ æ™‚ã¯ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ã‚¿ã‚¤ãƒ—ã‚’é¸ã¹ã‚‹ã®ã§ï¼Œchangeã‚¤ãƒ™ãƒ³ãƒˆã‚’è¦‹ã‚‹
            self.$radios.find('input:radio').change(function() {
                var $checked = self.$radios.find('input:radio:checked');
                var type    = $checked.val();
                self.selectPanelByType(type);
            });

            // IEã§ã¯changeã‚¤ãƒ™ãƒ³ãƒˆãŒç™ºè¡Œã•ã‚Œãªã„ã®ã§ï¼Œclickã‚¤ãƒ™ãƒ³ãƒˆã‚’è¦‹ã‚‹
            self.$modalWindow.find('.radio').click(function() {
                var type = $(this).find('input:radio').val();
                self.selectPanelByType(type);
            });

            // ãƒªãƒ³ã‚¯ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼Œãƒªãƒ³ã‚¯ã‚’1è¡Œè¿½åŠ 
            self.$modalWindow.find('#module-value-component-link').each(function() {
                var $linkModule = $(this);
                $linkModule.find('#add-link-input-button').click(function() {
                    var $linkInput = $linkModule.find('.link-input').eq(0).clone();
                    $linkInput.find(':input').val('');
                    $linkInput.insertAfter($linkModule.find('.link-input').eq(-1));

                    var $scrolled = self.$modalWindow.find('.module-value-box-inner');
                    $scrolled.scrollTop($scrolled[0].scrollHeight);
                });
            });

            // ãƒªãƒ³ã‚¯ã‚’å‰Šé™¤
            self.$modalWindow.delegate('.delete-link-input-button', 'click', function() {
                // è¿½åŠ ã™ã‚‹ã¨ãï¼Œ1ä»¶ç›®ã‚’cloneã™ã‚‹ã®ã§ï¼Œæœ€å¾Œã®1ä»¶ã ã‘ã¯æ¶ˆã›ãªã„ã‚ˆã†ã«ãªã£ã¦ã‚‹ï¼
                if (self.$modalWindow.find('.link-input').length > 1) {
                    $(this).closest('.link-input').remove();
                }
                return false;
            });

            // ã‚»ãƒƒã‚·ãƒ§ãƒ³çµ‚äº†ã‚¤ãƒ™ãƒ³ãƒˆã®ç›£è¦–
            self.$applyButton.click(function() { self.applyEdit() });
            self.$dialogOverray.click(function() { self.cancelEdit() });
            self.$cancelButton.click(function() { self.cancelEdit() });
            $(window).keyup(function (e) {
                if (keyString(e) == 'S-ESC') { self.cancelEdit() }
            });

            // ã‚«ãƒ†ã‚´ãƒªãƒ¼ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
            self.$modalWindow.find('.js-categories-order-type').change(function () {
                $(self).triggerHandler('change-category-order-type');
            });
        },
        // æ–°è¦ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«è¿½åŠ 
        editNewModule: function(module) {
            var self = this;
            self.session.reject();
            self.session = $.Deferred();
            self.editingModule = module;

            self.setupValues();

            // è¿½åŠ ã®ã¨ãã¯createdã‚¯ãƒ©ã‚¹ã‚’è¶³ã—ï¼Œhide-radiosã‚¯ãƒ©ã‚¹ã‚’æ¶ˆã—ï¼Œã‚­ãƒ£ãƒ³ã‚»ãƒ«ãƒœã‚¿ãƒ³ã‚’éš ã™
            self.$modalWindow.addClass('created').removeClass('hide-radios');
            self.$cancelButton.show();

            self.show();

            return self.session.promise();
        },
        // æ—¢å­˜ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ç·¨é›†
        editModule: function(module) {
            var self = this;
            self.session.reject();
            self.session = $.Deferred();
            self.editingModule = module;

            self.setupValues();

            // ç·¨é›†ã®ã¨ãã¯createdã‚¯ãƒ©ã‚¹ã‚’æ¶ˆã—ï¼Œhide-radiosã‚¯ãƒ©ã‚¹ã‚’è¶³ã—ï¼Œã‚­ãƒ£ãƒ³ã‚»ãƒ«ãƒœã‚¿ãƒ³ã‚’éš ã™
            self.$modalWindow.removeClass('created').addClass('hide-radios');
            self.$cancelButton.hide();

            self.selectPanelByType(module.getType());

            self.show();

            self.fillValuesFromModule(module);

            // ã‚«ãƒ†ã‚´ãƒªãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯æ—¢å®šã®order_typeã§ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’ã‚»ãƒƒãƒˆ
            // module.value['order_type']
            $(self).triggerHandler('edit-new-module');

            return self.session.promise();
        },
        // æŒ‡å®šã•ã‚ŒãŸtypeã®ãƒ‘ãƒãƒ«ã‚’é¸æŠã—ï¼Œè¡¨ç¤ºã™ã‚‹
        // type: "profile", "html"ãªã©
        selectPanelByType: function(type) {
            var self = this;

            self.$radios.find('.radio').removeClass('selected');
            var $selected_label = self.$radios.find('.radio.module-' + type).closest('.radio');
            $selected_label.addClass('selected');
            // propã§ã¯changeã‚¤ãƒ™ãƒ³ãƒˆãŒç™ºç«ã—ãªã„ã“ã¨ã«ã‚ˆã£ã¦ç„¡é™ãƒ«ãƒ¼ãƒ—ã›ãšã«æ¸ˆã‚“ã§ã‚‹
            $selected_label.find('input:radio').prop('checked', true);

            self.$modalWindow.find('.module-value-component').hide();
            self.$modalWindow.find('#module-value-component-' + type).show();
        },
        // ç¾åœ¨é¸æŠä¸­ã®ãƒ‘ãƒãƒ«ã®typeã‚’è¿”ã™ï¼æœªé¸æŠãªã‚‰null
        getSelectedPanelType: function() {
            var self = this;
            var $selected = self.$radios.find('input:enabled:checked');
            if ($selected.length) {
                return $selected.val();
            } else {
                return null;
            }
        },
        // ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦å†…ã®inputã‚’åˆæœŸçŠ¶æ…‹ã«æˆ»ã™ï¼
        // ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã¯1ã¤ã ã‘å­˜åœ¨ã—ï¼Œä½¿ã„å›ã•ã‚Œã‚‹ã®ã§ï¼ŒåˆæœŸåŒ–ã—ãªã„ã¨ï¼Œå‰å›ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ç·¨é›†å†…å®¹ãŒå‡ºã¦ãã‚‹ã“ã¨ã«ãªã‚‹ï¼
        setupValues: function() {
            var self = this;

            // textã‚’ç©ºã«ã™ã‚‹
            self.$modalWindow.find('textarea, input[type=text], input[type=number]').val('');
            // ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã®ãƒã‚§ãƒƒã‚¯ã‚’å¤–ã™
            self.$modalWindow.find('input[type=checkbox]').prop('checked', false);

            // ã‚»ãƒ¬ã‚¯ãƒˆãƒœãƒƒã‚¯ã‚¹ã®å€¤ã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã«åˆæœŸåŒ–ã™ã‚‹
            // ã‚‚ã—ã‚‚ã€Œdata-default-optionã€å±æ€§ã§ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®å€¤ãŒæŒ‡å®šã•ã‚Œã¦ã„ã‚‹å ´åˆã¯ãã‚Œã«å¾“ã†
            self.$modalWindow.find('select').each(function () {
                if( $(this).attr('data-default-option') ) {
                    // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ãŒè¨­å®šã•ã‚Œã¦ã„ãŸå ´åˆ
                    $(this).val( $(this).attr('data-default-option') );
                } else {
                    // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã®è¨­å®šãŒãªã„å ´åˆã¯ï¼Œä¸€ç•ªåˆã‚ã®è¦ç´ ã‚’é¸æŠçŠ¶æ…‹ã«ã™ã‚‹
                    $(this).find('option:first').prop('selected', true);
                }
            });

            // ãªã«ã‚‚é¸æŠã•ã‚Œã¦ã„ãªã‹ã£ãŸã‚‰ï¼Œæœ€åˆã®ãƒšã‚¤ãƒ³ã‚’é¸æŠ
            if (!self.getSelectedPanelType()) {
                self.selectPanelByType('profile');
            }
        },
        // ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’è¡¨ç¤ºã™ã‚‹
        show: function() {
            var self = this;

            // ã‚µã‚¤ãƒ‰ãƒãƒ¼å†…ã‚’ä¸‹ã¾ã§ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã—ã¦è¿½åŠ ã—ãŸè¦ç´ ã‚’è¦‹ã›ã‚‹
            var $scrolled = $('#tab-customize');
            $scrolled.scrollTop($scrolled[0].scrollHeight);

            self.$modalWindow.show();
            self.setPosition();
            self.$dialogBox.find('input[type=text]:visible:first').focus();
        },
        // ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’ä¸­å¤®æƒãˆã«ã™ã‚‹
        setPosition: function() {
            var self = this;
            var winHeight  = $(document).height();
            var winWidth   = $(window).width();
            var dialogTop  = winHeight / 2 - self.$dialogBox.height() / 2;
            var dialogLeft = (winWidth / 2) - (self.$dialogBox.width() / 2);
            self.$dialogBox.css({ top: dialogTop, left: dialogLeft });
            self.$dialogOverray.css({ height: winHeight, width:  winWidth });
        },
        // å¤‰æ›´ã‚’é©å¿œã™ã‚‹ï¼inputã‹ã‚‰ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’è¡¨ã™è¡¨ç¾ã‚’ä½œã‚Šï¼Œsessionã‚’resolveã™ã‚‹ï¼
        applyEdit: function() {
            var self = this;
            var data = self.extractInputToModuleValues();
            self.session.resolve(data);
            self.hide();
        },
        // ç·¨é›†ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’çµ‚äº†ã—ã¦ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’éš ã™
        cancelEdit: function() {
            var self = this;
            self.session.reject();
            self.hide();
        },
        // ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’éš ã™
        hide: function() {
            var self = this;
            self.$modalWindow.hide();
        },
        // ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ç·¨é›†ã®ã¨ãï¼Œãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®å€¤ã‚’ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã«ã‚³ãƒ”ãƒ¼
        // :visibleã‚’è¦‹ã¦ã‚‹ã®ã§show()ã—ãŸã‚ã¨ã«å‘¼ã¶å¿…è¦ãŒã‚ã‚‹
        fillValuesFromModule: function(module) {
            var self = this;
            var val = module.getValue();
            var moduleType = module.getType();
            for(var name in val) {

                if ( moduleType === 'link' &&
                     (name === 'link_title' || name === 'link_url')) {
                    self.setLinkInput(self.$dialogBox, val, name);
                } else {
                    var $inputs = self.$dialogBox.find(':input:visible').filter(function() {
                        return $(this).attr('name') == name;
                    });
                    $inputs.eq(0).val(val[name]);
                    if ( $inputs.eq(0).attr('type') == 'checkbox' && val[name]) {
                        $inputs.eq(0).prop('checked', true);
                    }
                }
            }
            // module-valueã«module-titleãŒå…¥ã£ã¦ã„ã‚‹ã“ã¨ã‚‚ã‚ã‚‹ã®ã§ã‚¿ã‚¤ãƒˆãƒ«ã¯å¾Œã‹ã‚‰è¨­å®š
            self.$dialogBox.find('input[name=module-title]:visible').val(module.getTitle());
        },
        extractInputToModuleValues: function() {
            // ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦å†…ã®inputã®å€¤ã‚’ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ç”¨ã®è¡¨ç¾ã«å¤‰æ›ã—ã¦è¿”ã™
            var self = this;

            var moduleTitle = self.$dialogBox.find('input[name=module-title]:visible').val();

            // ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚¿ã‚¤ãƒ—ã¯ï¼Œæ–°ã—ã„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«è¿½åŠ ã™ã‚‹ã¨ãã¯DOMã‹ã‚‰æ‹¾ã†
            // ç·¨é›†æ™‚ã¯ï¼Œç·¨é›†ä¸­ã®moduleã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®typeã‚’å¼•ãç¶™ã
            var moduleType;
            if (self.editingModule.isNewModule()) {
                moduleType = self.getSelectedPanelType();
            } else {
                moduleType = self.editingModule.getType();
            }
            var moduleValue = {};

            // ã‚¿ã‚¤ãƒˆãƒ«ãŒæœªè¨˜å…¥ã®å ´åˆã€åˆæœŸå€¤ã‚’åŸ‹ã‚ã‚‹(HTMLãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯åŸ‹ã‚ãªã„)
            if ( ! moduleTitle && moduleType !== 'html' ) {
                var defaultTitle = self.$radios.find('input:checked').attr('data-default-module-title');
                moduleTitle = defaultTitle;
            }

            self.$dialogBox.find(':input:visible').each(function() {
                var $input = $(this);
                var name  = $input.attr('name');
                var val   = $input.val();

                // module-titleã®inputã‚‚dialogBoxå†…ã«å­˜åœ¨ã™ã‚‹ãŒï¼Œ
                // ã‚¿ã‚¤ãƒˆãƒ«ã¯åˆ¥ã®inputã«ä¿å­˜ã™ã‚‹ãŸã‚ï¼Œã“ã“ã§ã¯ã‚¹ã‚­ãƒƒãƒ—ã™ã‚‹
                if (name === 'module-title') {
                    return;
                }

                if ($input.attr('type') == 'checkbox') {
                    if ( $input.prop('checked') ) {
                        val = 1;
                    } else {
                        val = 0;
                    }
                }

                if (!name) {
                    return;
                }
                // åŒã˜åå‰ã®å€¤ãŒè¤‡æ•°æ¥ãŸã‚‰arrayã«ã™ã‚‹
                if (typeof moduleValue[name] === 'undefined') {
                    moduleValue[name] = val;
                } else if (moduleValue[name] instanceof Array) {
                    moduleValue[name].push(val);
                } else {
                    moduleValue[name] = [moduleValue[name], val];
                }
            });

            return {
                type:  moduleType,
                title: moduleTitle,
                value: moduleValue
            };
        },
        // ãƒªãƒ³ã‚¯ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ãƒ•ã‚£ãƒ«ã‚¤ãƒ³
        // ãƒªãƒ³ã‚¯ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ä¸€ã¤ã§ã‚¿ã‚¤ãƒˆãƒ«å…¨éƒ¨ / URLå…¨éƒ¨ã‚’è¡¨ã™ï¼link-titleã¨link-valueï¼
        setLinkInput: function ($dialogBox, val, name) {
            var $inputs = $dialogBox.find(':input:visible').filter(function() {
                return $(this).attr('name') == name;
            });
            var $linkInput;
            if (val[name] instanceof Array) {
                var addInput = val[name].length > $inputs.length ? true : false;
                var diff = addInput ? val[name].length - $inputs.length : $inputs.length - val[name].length;

                for (var i = 0; i < diff; i++) {
                    if ( addInput ) {
                        $linkInput = $dialogBox.find('.link-input:visible').eq(0).clone();
                        $linkInput.find(':input').val('');
                        $linkInput.insertAfter($dialogBox.find('.link-input').eq(-1));
                    } else {
                        $linkInput = $dialogBox.find('.link-input:visible').eq(-1);
                        $linkInput.remove();
                    }
                }
                $inputs = $dialogBox.find(':input:visible').filter(function() {
                    return $(this).attr('name') == name;
                });
                $inputs.each(function() { $(this).val(val[name].shift()) });
            } else {
                // 1ã¤ã—ã‹è¦ç´ ãŒãªã„å ´åˆã€inputã‚’ï¼‘ã¤ã«ã™ã‚‹
                while ( $inputs.length > 1 ) {
                    $linkInput = $dialogBox.find('.link-input:visible').eq(-1);
                    $linkInput.remove();
                    $inputs = $dialogBox.find(':input:visible').filter(function() {
                        return $(this).attr('name') == name;
                    });
                }
                $inputs.eq(0).val(val[name]);
            }
        }
    };

    // ã‚«ãƒ†ã‚´ãƒªãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®æ›´æ–°, sortableè¦ç´ ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
    var CategoryEditor = function() {
        var self = this;
        self.categoryTemplate =  _.template($('.js-categories-template').html());
        self.$categoryContainer = $('.js-categories-container');
    };
    CategoryEditor.prototype = {
        updateCategoryPreview: function () {
            var self = this;
            var $categoryContainer = self.$categoryContainer;
            var url = $categoryContainer.data('getUrl');
            var order_type = $('.js-categories-order-type option:selected').val();

            // ä¸¦ã³é †ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
            $.ajax({
                url: url,
                data: {
                    order_type: order_type
                }
            }).done(function(data) {
                var categories = data.categories; // { count: entry_count, name: category_name }
                sortable_container_class = order_type == 'user' ? 'module-category-sortable-container' : '';
                sortable_item_class = order_type == 'user' ? 'module-category-sortable-item' : '';

                $categoryContainer.html(self.categoryTemplate({ categories:                 categories,
                                                                sortable_container_class:   sortable_container_class,
                                                                sortable_item_class:        sortable_item_class }));
                if ( order_type == 'user' ) self.setupSortable();
            });
        },
        setupSortable: function () {
            var self = this;
            var $categoryContainer = self.$categoryContainer;

            var $sortableContainer = $categoryContainer.find('.js-categories-sortable');
            var $sortableItem = $categoryContainer.find('.js-categories-sortable-item');

            $sortableContainer.sortable({
                stop: function () {
                    var $sortedItems = $categoryContainer.find('.js-categories-sortable-item');
                    var sortedCategoryNames = $sortedItems.map(function(idx, element){
                        var categoryName = $(element).data("categoryName");
                        return categoryName;
                    }).get();

                    var url = $sortableContainer.data('sortUrl');
                    $.ajax({
                        type: 'POST',
                        url: url,
                        data: {
                            category_names  : sortedCategoryNames,
                            rkm             : Hatena.Diary.data('rkm'),
                            rkc             : Hatena.Diary.data('rkc')
                        },
                        traditional: true
                    });
                }
            });
        }
    };

    var PreviewUpdater = function(args) {
        var self = this;
        self.$form = args.$form;
        self.$loading = args.$loading;
        self.$preview = args.$preview;
        self.formState = args.formState;
        self.$deviceInput = self.$form.find(':input[name=device]');
        self.device = self.$deviceInput.val();
        self.pageType = 'index';
        self.failedCount = 0;
    };

    PreviewUpdater.prototype = {
        // ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã‚’ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã™ã‚‹çŠ¶æ…‹ã«ã™ã‚‹
        setAsIndexPreview: function() {
            var self = this;
            self.pageType = 'index';
        },
        // ã‚¨ãƒ³ãƒˆãƒªãƒšãƒ¼ã‚¸ã‚’ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã™ã‚‹çŠ¶æ…‹ã«ã™ã‚‹
        setAsPermalinkPreview: function() {
            var self = this;
            self.pageType = 'permalink';
        },
        getPageType: function() {
            var self = this;
            return self.pageType;
        },
        // PCç‰ˆãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼çŠ¶æ…‹ã«ã™ã‚‹
        setDeviceAsPC: function() {
            var self = this;
            self._setDevice('pc');
        },
        // touchç‰ˆãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼çŠ¶æ…‹ã«ã™ã‚‹
        setDeviceAsTouch: function() {
            var self = this;
            self._setDevice('touch');
        },
        // å†…éƒ¨çš„ãªãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼çŠ¶æ…‹åˆ‡ã‚Šæ›¿ãˆ
        // inputã®å€¤è¨­å®šï¼Œãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æ›´æ–°ã‚’ä¾é ¼
        _setDevice: function(device) {
            var self = this;
            self.device = device;
            self.$deviceInput.val(self.device);
            self.requestPreview();

            // touchã®ã¨ãï¼Œiframeã«.device=touchã‚¯ãƒ©ã‚¹è¿½åŠ 
            self.$preview.toggleClass('device-touch', device === 'touch');
        },
        // previewã®æ›´æ–°ã‚’ä¾é ¼ã™ã‚‹ï¼formã®çŠ¶æ…‹ãŒå¤‰ã‚ã£ã¦ã„ãªã‘ã‚Œã°ä½•ã‚‚ã—ãªã„
        requestPreview: function() {
            var self = this;

            var serialized = self.$form.serialize();
            if (serialized === self.serialized) return;
            self.serialized = serialized;

            self.preview();
        },
        // previewã‚’æ›´æ–°ã™ã‚‹ï¼å¤±æ•—ã—ãŸã‚‰ã‚„ã‚Šç›´ã—ï¼ã‚ã¾ã‚Šã«å¤±æ•—ã—ãŸã‚‰ã‚‚ã†ãªã«ã‚‚ã—ãªã„ï¼
        preview: function() {
            var self = this;

            if (self.failedCount > 10) return;

            self.showEffect();

            if (!self.serialized) {
                self.serialized = self.$form.serialize();
            }
            var serialized = self.serialized;

            var getSignature = self.getSignature(serialized);
            getSignature.done(function(signature) {
                self.onGotSignature(signature);
                self.failedCount = 0;
            }).fail(function() {
                self.failedCount++;
                self.requestPreview();
            });
        },
        // signatureã‚²ãƒƒãƒˆã—ãŸã‚‰resolveã™ã‚‹Deferredã‚’è¿”ã™
        getSignature: function(serialized) {
            var self = this;

            var got = $.Deferred();

            $.ajax({
                url : '../../preview/design',
                type : "post",
                dataType : 'json',
                data : serialized
            }).done(function(data) {
                // é€šä¿¡ã—ã¦ã‚‹é–“ã«çŠ¶æ…‹ãŒå¤‰ã‚ã£ã¦ã„ãªã‘ã‚Œã°æˆåŠŸï¼Œå¤‰ã‚ã£ã¦ãŸã‚‰å¤±æ•—
                if (serialized === self.$form.serialize()) {
                    got.resolve(data.signature);
                } else {
                    got.reject();
                }
            }).fail(function() {
                got.reject();
            });

            return got.promise();
        },
        // signatureæƒã£ãŸã®ã§å®Ÿéš›ã«ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
        // formã®actionã¨targetã‚’æ›¸ãæ›ãˆã¦ï¼Œsignatureã‚’è¿½åŠ ã—ã¦submitã—ï¼Œå³åº§ã«å…ƒã®çŠ¶æ…‹ã«æˆ»ã—ã¦ã„ã‚‹ï¼
        onGotSignature: function(signature) {
            var self = this;

            var $form = self.$form;

            var actionBefore = $form.attr('action');
            var targetBefore = $form.attr('target');
            var confirmEnabledBefore = self.formState.isConfirmEnabled();

            $form.attr('action', self.getAction());
            $form.attr('target', self.$preview.attr('name'));
            var $signature = $('<textarea/>').attr('name', 'signature').val(signature);
            $signature.appendTo($form);

            self.formState.disableConfirm();
            $form.submit();

            $signature.remove();
            $form.attr('action', actionBefore);
            $form.attr('target', targetBefore);

            if (confirmEnabledBefore) {
                self.formState.enableConfirm();
            } else {
                self.formState.disableConfirm();
            }
        },
        // èª­ã¿è¾¼ã¿ä¸­å‡ºã—ã¦ã—ã°ã‚‰ãçŸ¥ãŸã‚‰æ¶ˆã™(é›‘)
        showEffect: function() {
            var self = this;
            self.$loading.fadeIn('fast');
            setTimeout(function () { self.$loading.fadeOut('fast') }, 1000);
        },
        // ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆï¼indexã¨permalinkã®ã©ã¡ã‚‰ã‹ï¼
        getAction: function() {
            var self = this;
            var base = Hatena.Diary.data('blogs-uri-base');
            return base + '/preview/' + self.pageType + '_design';
        }
    };


    Hatena.Diary.Pages.Admin['user-blog-config-design-detail'] = function () {
        var css       = $('#css');
        var form      = $('#form-design');
        var preview   = $('#preview');
        var loading   = $('#preview-loading');
        var $tabs      = $('#tabs');
        var $foldButton = $('#form-design-fold-button');

        var formState = new Hatena.Diary.FormState();
        formState.observeForm(form);
        formState.observeFormChange();

        var previewUpdater = new PreviewUpdater({
            $form: form,
            $preview: $('#preview-iframe'),
            $loading: loading,
            formState: formState
        });
        previewUpdater.requestPreview();

        form.on('change', function() {
            previewUpdater.requestPreview();
        });

        Hatena.Diary.Pages.Admin['user-blog-config-design']();
        Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].setupTabs({
            $tabs: $tabs,
            previewUpdater: previewUpdater
        });
        Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].setupFoldButton({
            $form: form,
            $preview: preview,
            $foldButton: $foldButton
        });
        Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].setupPreviewTypeButton(previewUpdater);

        _.each([
            'header-html',
            'entry-header-html',
            'entry-footer-html',
            'footer-html',

            'header-touch-html',
            'entry-touch-header-html',
            'entry-touch-footer-html',
            'footer-touch-html',
            'touch-under-pager-html'
        ], function(name) {
            var selector = ':input[name="' + name + '"]';
            var $target = $(selector);
            if (!$target.length) return;
            if ($target.prop('disabled')) return;
            Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].setupEditor({
                form:     form,
                syntax:   'html',
                textarea: $target
            });
        });

        Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].setupEditor({
            form:     form,
            syntax:   'css',
            textarea: css
        });
        Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].setupBackgroundComponent({
            css: css,
            form: form,
            loading : loading,
            preview: preview
        });
        var trimmingWindow = new TrimmingWindow($('.js-header-modal-window'));
        Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].setupHeaderImageComponent({
            $container: $('.js-design-header .js-header-image-container'),
            previewUpdater: previewUpdater,
            trimmingWindow: trimmingWindow
        });
        Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].setupTouchHeaderImageComponent({
            $container: $('.js-design-header-touch .js-header-image-container'),
            previewUpdater: previewUpdater
        });
        Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].setupEntryComponent({
            css: css,
            form: form,
            loading : loading,
            preview: preview
        });

        var moduleEditor = new ModuleEditor($('.js-module-edit-modal-window'));
        var categoryEditor = new CategoryEditor();
        // æ–°è¦ç·¨é›†æ™‚ã¨order_typeé¸æŠæ¯ã«æ›´æ–°
        $(moduleEditor).on('edit-new-module change-category-order-type', function () {
            categoryEditor.updateCategoryPreview();
        });

        _.each(['sidebar', 'top-page-main-column', 'top-page-header', 'top-page-sidebar'], function (type) {
            var $element = $('div[data-modules-type="' + type + '"].sidebar-box');
            if (!$element.length) return;
            var modules = new Modules($element, moduleEditor);
            $(modules).on('updated', function() {
                // FormState(ãƒšãƒ¼ã‚¸é–‰ã˜ã‚‹å‰ã«confirmå‡ºã™ã‚„ã¤)ãŒformã®changeã‚¤ãƒ™ãƒ³ãƒˆã‚’è¦‹ã¦ã„ã‚‹
                form.trigger('change');
            });
        });
        Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].setupAccordion('.accordion-title');

        // ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã¨ã‚µãƒ¼ã‚¯ãƒ«ã¯é€šä¿¡ã—ã¦formã‚’æ›¸ãæ›ãˆã‚‹ï¼Œæ›¸ãæ›ãˆçµ‚ã‚ã£ãŸçŠ¶æ…‹ã®ãƒ•ã‚©ãƒ¼ãƒ ã®å€¤ã‚’åˆæœŸçŠ¶æ…‹ã¨ã—ã¦ã‚»ãƒƒãƒˆã™ã‚‹
        var profileUpdated = Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].updateProfileModule();
        var circlesUpdated = Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].updateCirclesModule();
        // ã‚«ãƒ†ã‚´ãƒªãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« order_typeãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼åˆæœŸçŠ¶æ…‹
        categoryEditor.updateCategoryPreview();

        $.when(profileUpdated, circlesUpdated).always(function() {
            formState.setFormInitialState();
        });

        Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].setupThemesListSwitcher();

        // ã‚¹ãƒãƒ•ã‚©ç”¨ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒªã‚¢ï¼Œä¸è¦ãªã¨ãã«ã¯éš ã—ã¦ãŠã
        Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].setupTextareaHider();

        // èƒŒæ™¯ç”»åƒã‚‚ã£ã¨è¦‹ã‚‹
        Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].setupSeeMoreBackgrounds();

        // ã‚¹ãƒãƒ•ã‚©ç”¨ã‚¢ã‚¯ã‚»ãƒ³ãƒˆã‚«ãƒ©ãƒ¼
        Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].setupTouchAccentColor({
            $form: form
        });
    };

    Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].setupAccordion = function (selector) {
        var accordionTitle = $(selector);
        accordionTitle.next().hide();
        accordionTitle.click(function () {
            var $title   = $(this);
            var $content = $title.next();
            if ($content.is(':visible')) {
                $content.hide();
                $title.removeClass('open');
            } else {
                $content.show();
                $title.addClass('open');
            }
        });
    };

    Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].setupTabs = function (args) {
        var $tabs      = args.$tabs;
        var previewUpdater = args.previewUpdater;
        var $forcePcView = $('#force-pc-view');

        if (!$tabs[0]) return;

        // ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆãŸã‚‰ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã™ã‚‹ãƒ‡ãƒã‚¤ã‚¹åˆ‡ã‚Šæ›¿ãˆã‚‹
        // ãŸã ã—ï¼Œã‚¹ãƒãƒ•ã‚©ã«PCã®ãƒ‡ã‚¶ã‚¤ãƒ³ã‚’ä»•æ§˜ã™ã‚‹ã¨ãã¯è¡¨ç¤ºãŒå´©ã‚Œã‚‹ã®ã§ï¼ŒPCç‰ˆã‚’ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
        var updateDevice = function (event, ui) {
            var panelID = (ui.newPanel || ui.panel).attr('id');
            if (panelID === 'tab-customize-touch' && ! $forcePcView.is(':checked')) {
                previewUpdater.setDeviceAsTouch();
            } else {
                previewUpdater.setDeviceAsPC();
            }
        };

        $tabs.on('tabsactivate', updateDevice)
             .on('tabscreate', updateDevice);

        // PCã®ãƒ‡ã‚¶ã‚¤ãƒ³è¡¨ç¤ºã™ã‚‹ã‹ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã‚‚ç›£è¦–ã™ã‚‹
        $forcePcView.on('change', function() {
            if ($forcePcView.is(':checked')) {
                previewUpdater.setDeviceAsPC();
            } else {
                previewUpdater.setDeviceAsTouch();
            }
        }).triggerHandler('change');

        $tabs.tabs();
    };

    // ã‚µã‚¤ãƒ‰ãƒãƒ¼ã‚’ç•³ã‚€æ©Ÿèƒ½
    Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].setupFoldButton = function (args) {
        var $form      = args.$form;
        var $preview   = args.$preview;
        var $foldButton = args.$foldButton;

        if (!$foldButton[0]) return;

        $foldButton.click( function () {
            if ($foldButton.hasClass('open')) {
                $foldButton.removeClass('open').addClass('close');
                $form.hide();
                $preview.addClass('fold-form');
            } else {
                $foldButton.removeClass('close').addClass('open');
                $form.show();
                $preview.removeClass('fold-form');
            }
        });
    };

    Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].fadeInLoading = function ($loading) {
        $loading.fadeIn('fast');
    };

    Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].fadeOutLoading = function ($loading) {
        setTimeout(function () { $loading.fadeOut('fast') }, 1000);
    };

    Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].setupPreviewTypeButton = function (previewUpdater) {
        var switchButton = $('.switch-button');

        switchButton.click ( function () {
            if (previewUpdater.getPageType() === 'index') {
                switchButton.addClass('permalink').removeClass('index');
                switchButton.text(Hatena.Locale.text('admin.design.quit_preview_entry_page'));
                previewUpdater.setAsPermalinkPreview();
                previewUpdater.preview();
            } else {
                switchButton.addClass('index').removeClass('permalink');
                switchButton.text(Hatena.Locale.text('admin.design.preview_entry_page'));
                previewUpdater.setAsIndexPreview();
                previewUpdater.preview();
            }

        });
    };

    Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].setupBackgroundComponent = function (args) {
        var css = args.css;
        var form = args.form;
        var preview = args.preview;

        var fileinput = $('input[type="file"].background-image');
        var bgImage = $('#background-image');
        var imageThumbnail = $('#background-image-thumbnail');
        var deleteBgImage = $('a.delete-background-image');
        var imageSrc = $('input[name="bg-image-src"]');
        var imageId = $('input[name="bg-image-id"]');
        var imageSelected = $('input[name="bg-image-selected"]');
        var styletemplate = _.template("body{ background-image: url('<%= image %>'); background-repeat: <%= repeat %>; background-color:<%= backgroundColor %>; background-attachment: <%= attachment %>; background-position: <%= position %> top;}");

        var bgPosition = $('select[name="background-position"]');
        var bgRepeat = $('select[name="background-repeat"]');
        var bgAttachment = $('select[name="background-attachment"]');

        var showBackgroundImage = function () {
            bgImage.show();
        };
        var hideBackgroundImage = function () {
            bgImage.hide();
        };

        deleteBgImage.click ( function () {
            if ( confirm(Hatena.Locale.text('admin.design.stop_header_image_confirm')) ) {
                imageId.val('');
                imageSrc.val('');
                imageSelected.val(0);
                setDesignCSS();

                hideBackgroundImage();
            }
            return false;
        });

        imageThumbnail.click ( function () {
            setDesignCSS();
            if ( ! imageThumbnail.hasClass('ui-selected') ) {
                // èƒŒæ™¯ç”»åƒã®é¸æŠã‚’ã¯ãšã™
                var backgroundListItems = $('#backgrounds li');
                backgroundListItems.removeClass('ui-selected');
                imageThumbnail.addClass('ui-selected');
                imageSelected.val(1);
            }
        });

        bgPosition.change ( function () {
            setDesignCSS();
        });

        bgAttachment.change ( function () {
            setDesignCSS();
        });

        bgRepeat.change ( function () {
            setDesignCSS();
        });

        // èƒŒæ™¯ç”»åƒã®ã‚»ãƒƒãƒˆ
        var setBackgroundImage = function (fid) {
            imageId.val(fid);
            var match = fid.match(/f:id:([^:]+):(\d+)([jpg]):image/);
            if (!match) return;

            var name  = match[1];
            var id    = match[2];
            var type  = match[3];
            var extension = { j : '.jpg', p : '.png', g : '.gif' };
            var path  = [ name.substring(0, 1), name, id.substring(0, 8), id ].join('/');
            var image = 'http://cdn-ak.f.st-hatena.com/images/fotolife/' + path + extension[type];
            var thumbnail_src = 'http://cdn-ak.f.st-hatena.com/images/fotolife/' + path + '_120.jpg';
            imageSrc.val(image);
            imageThumbnail.attr('src', thumbnail_src);
            showBackgroundImage();
            fileinput.prop('disabled', false);
            imageThumbnail.trigger('click');

            // fileinput.changeå¥‘æ©Ÿã§ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦ã„ã‚‹å ´åˆã€fileinput.valueã‚’ç©ºã«ã—ã¦ãŠã‹ãªã„ã¨åŒã˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠã—ãŸæ™‚ã«changeã‚¤ãƒ™ãƒ³ãƒˆãŒç™ºç«ã—ãªã„ãŸã‚ã€ãŒã‚“ã°ã£ã¦ç©ºã«ã™ã‚‹
            var isSupportedFile = (typeof FormData != 'undefined');
            if (isSupportedFile) {
                var new_fileinput = fileinput.clone(true);
                fileinput.replaceWith(new_fileinput);
                fileinput = new_fileinput;
            }
        };

        var setDesignCSS = function () {
            var image = imageSrc.val();
            var design = new EditDesign(css.val());

            var id;
            var style;
            if ( image ) {
                var backgroundColorItem = $('#background-colors li.ui-selected');
                var backgroundColor = 'transparent';
                // èƒŒæ™¯è‰²ãŒé¸æŠã•ã‚Œã¦ã„ãªã„å ´åˆã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚’é¸æŠ
                if ( backgroundColorItem.length === 0 ) {
                    $('#background-colors li[data-css=""]').addClass('ui-selected');
                } else if ( backgroundColorItem.attr('data-id') !== undefined ) {
                    backgroundColor = '#' + backgroundColorItem.attr('data-id');
                }
                id = 'custom';
                var repeat = bgRepeat.find('option:selected').val();
                var position = bgPosition.find('option:selected').val();
                var attachment = bgAttachment.find('option:selected').val();
                style = styletemplate({
                    image : image,
                    backgroundColor : backgroundColor,
                    repeat : repeat,
                    position : position,
                    attachment : attachment
                });
            } else { // ç”»åƒå¤–ã—ãŸã¨ãã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã«æˆ»ã™
                id = 'default';
                style = $('li[data-id="default"]').attr('data-css');
            }

            design.setData('background', id, style);
            css.val(design.getCSS());
            css.trigger('change');
        };

        var isSupportedFile = (typeof FormData != 'undefined');
        if ( isSupportedFile ) {
            fileinput.change ( function () {
                if ( ! this.files.length ) return;
                hideBackgroundImage();
                Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].uploadImage({
                    file     : this,
                    folder   : "Hatena Blog",
                    fotosize : 3000,
                    input    : fileinput,
                    callback : setBackgroundImage
                });
            });
        } else {
            Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].setIframeUploader({
                fileinput : fileinput,
                fotosize  : 3000,
                callback  : setBackgroundImage
            });
        }
    };

    // ãƒ˜ãƒƒãƒ€ç”»åƒãƒˆãƒªãƒŸãƒ³ã‚°ã™ã‚‹ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦
    var TrimmingWindow = function($container) {
        this.$container = $container;
        this.init();
    };
    TrimmingWindow.prototype = {
        init: function() {
            var self = this;
            // ãƒšãƒ¼ã‚¸ã®æœ«å°¾ã«ç§»å‹•ã™ã‚‹
            self.$container.appendTo(document.body);

            // sessionã¯ãƒˆãƒªãƒŸãƒ³ã‚°ä¸­æœ‰åŠ¹ãªDeferredï¼Œdoneã§ãƒˆãƒªãƒŸãƒ³ã‚°æˆåŠŸï¼Œrejectã§å¤±æ•—
            self.session = $.Deferred();
            self.session.reject();

            self.jcrop = $.Jcrop(self.$container.find('.js-header-image-resizer'), {
                bgOpacity   :   '0.4',
                addClass    : 'jcrop-dark',
                allowSelect : false,
                keySupport  : false,
                allowResize : false
            });

            self.$container.on('click', '.js-header-image-apply-button', function() {
                self.save();
                return false;
            }).on('click', '.js-header-image-cancel-button', function() {
                self.cancel();
                return false;
            });
        },
        // æŒ‡å®šã—ãŸURLã®ç”»åƒã‚’ãƒˆãƒªãƒŸãƒ³ã‚°ã™ã‚‹
        // returns: ãƒˆãƒªãƒŸãƒ³ã‚°æˆåŠŸã—ãŸã‚‰done, ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã•ã‚ŒãŸã‚‰rejectã•ã‚Œã‚‹Deferred
        trim: function(url, area) {
            var self = this;
            self.cancel();
            self.session = $.Deferred();
            self.session.always(function() {
                self._hide();
            });

            self.jcrop.setImage(url, function() {
                self.jcrop.setSelect(area);
                self._show();
            });

            return self.session.promise();
        },
        // ä»¥ä¸‹ã¯ç›´æ¥å‘¼ã¶ã“ã¨ã¯ãªã„ã§ã‚ã‚ã†
        save: function() {
            var self = this;
            self.session.resolve(self.jcrop.tellSelect());
        },
        cancel: function() {
            var self = this;
            self.session.reject(self.jcrop.tellSelect());
        },
        _show: function() {
            var self = this;
            Hatena.Diary.Window.show(self.$container, {
                center: true,
                showBackground: true,
                closeExplicitly: true
            });
        },
        _hide: function() {
            var self = this;
            Hatena.Diary.Window.hide(self.$container);
        }
    };

    var HeaderImagePreview = function($container) {
        this.$container = $container;
        this.jcrop = $.Jcrop(this.$container.find('.js-header-image-thumbnail'), {
            bgOpacity   :   '0.4',
            addClass    : 'jcrop-dark',
            allowSelect : false,
            allowResize : false,
            allowMove   : false
        });
    };

    HeaderImagePreview.prototype = {
        // url: ã‚ªãƒªã‚¸ãƒŠãƒ«ç”»åƒã®URL
        // thumbnailUrl: ã‚µãƒ ãƒã‚¤ãƒ«ã®URL
        // (area): ãƒˆãƒªãƒŸãƒ³ã‚°ä½ç½® {x, y, x2, y2}
        render: function(url, thumbnailUrl, area) {
            var self = this;
            if (url) {
                self.jcrop.setImage(thumbnailUrl, function () {
                    if (area) {
                        self.setArea(url, thumbnailUrl, area);
                    }
                });
            } else if (area) {
                self.setArea(url, thumbnailUrl,  area);
            }
            self.$container.show();
        },
        clear: function() {
            var self = this;
            self.$container.hide();
        },
        // å…ƒç”»åƒã¨ã‚µãƒ ãƒã‚¤ãƒ«ã®ã‚µã‚¤ã‚ºã‹ã‚‰ã‚µãƒ ãƒã‚¤ãƒ«ã®è¡¨ç¤ºä½ç½®ã‚’æ±ºã‚ã‚‹
        setArea: function(url, thumbnailUrl, area) {
            var self = this;

            Hatena.Diary.Util.loadImages([url, thumbnailUrl]).done(function(imgs) {
                var image = imgs[0];
                var thumbnail = imgs[1];

                var rateY = thumbnail.height / image.height;

                var thumbnailArea = [0, area.y * rateY, area.w, area.y2* rateY];
                self.jcrop.setSelect(thumbnailArea);
            });
        }
    };

    // ãƒ˜ãƒƒãƒ€ã®inputã®æ“ä½œï¼Œæ›´æ–°ã™ã‚‹ã¨updatedã‚¤ãƒ™ãƒ³ãƒˆç™ºè¡Œ
    // display_areaã¯PCç‰ˆã®ã¿ã«å­˜åœ¨ã—ï¼Œtouchç‰ˆã«ã¯ãªã„ï¼
    // imageSize: {width, height}
    var HeaderImage = function($container, imageSize) {
        var self = this;
        self.imageSize = imageSize;
        self.$container = $container;
        self.$image_src = $container.find('.js-image-src');
        self.$image_id = $container.find('.js-image-id');
        self.$display_area = $container.find('.js-display-area');
        _.defer(function() {
            // åˆå›ï¼Œobserveã¾ã ã‹ã‚‚ã—ã‚Œãªã„ã®ã§ï¼Œã¡ã‚‡ã£ã¨å¾…ã¤
            self.updated();
        });
    };
    HeaderImage.prototype = {
        setImage: function(src, id) {
            this.$image_src.val(src);
            this.$image_id.val(id);
            this.$display_area.val('');
            if (this.$display_area.length) {
                // ãƒˆãƒªãƒŸãƒ³ã‚°ä½ç½®ã‚ã‚‹ã¨ãã¯ï¼ŒdisplayAreaãŒæƒã†ã¾ã§ã¯ä¸å®Œå…¨ãªçŠ¶æ…‹ãªã®ã§updateã—ãªã„
            } else {
                // ãƒˆãƒªãƒŸãƒ³ã‚°ä½ç½®ãªã„ã¨ãã¯ã“ã®æ™‚ç‚¹ã§å®Œæˆãªã®ã§update
                this.updated();
            }
        },
        // displayArea: { x, y, x2, y2 }
        setDisplayArea: function(area) {
            this.$display_area.val(JSON.stringify(area));
            this.updated();
        },
        // ç”»åƒã‚’å¤–ã™
        clear: function() {
            this.$image_src.val('');
            this.$image_id.val('');
            this.$display_area.val('');
            this.updated();
        },
        getImageSrc: function() {
            return this.$image_src.val();
        },
        getThumbnailSrc: function() {
            return this.getImageSrc().replace(/\.(jpg|png|gif)$/, '_120.jpg');
        },
        getImageId: function() {
            return this.$image_id.val();
        },
        // displayArea: { x, y, x2, y2 }
        getDisplayArea: function() {
            var value;
            try {
                value = JSON.parse(this.$display_area.val());
            } catch(ignore) { }
            return value;
        },
        // trimmingArea: [ x, y, x2, y2 ] TrimmingWindowã«æ¸¡ã™å½¢å¼
        // æŒ‡å®šã•ã‚Œã¦ã„ãªã„ã¨ãã¯å·¦ä¸Šã‹ã‚‰ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã§æŒ‡å®šã•ã‚ŒãŸã‚µã‚¤ã‚º
        getTrimmingArea: function() {
            var area = this.getDisplayArea();
            if (area) {
                return [ area.x, area.y, area.x2, area.y2 ];
            } else {
                return [0, 0, this.imageSize.width, this.imageSize.height];
            }
        },
        updated: function() {
            var self = this;
            $(self).triggerHandler('updated');
        }
    };

    // args: { $container, previewUpdater, trimmingWindow, imageSize: {width, height} }
    Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].setupHeaderImageComponent = function(args) {
        var $container = args.$container;
        var previewUpdater = args.previewUpdater;
        var trimmingWindow = args.trimmingWindow;
        var imageSize = {
            width:  + $container.attr('data-max-width'),
            height: + $container.attr('data-max-height')
        };

        var image = new HeaderImage($container, imageSize);
        var thumbnail = new HeaderImagePreview($container.find('.js-header-image-item'));

        $(image).on('updated', function() {
            if (image.getImageSrc()) {
                thumbnail.render(image.getImageSrc(), image.getThumbnailSrc(), image.getDisplayArea());
            } else if (!image.getImageSrc()) {
                thumbnail.clear();
            }
            previewUpdater.requestPreview();
        });

        var uploaded = Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].setupFotoUpload({
            $input: $container.find('.js-header-image-input'),
            size: imageSize.width
        });

        // ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã•ã‚ŒãŸã‚‰å€¤è¨­å®šï¼ŒãƒˆãƒªãƒŸãƒ³ã‚°ã¯ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã•ã‚Œã¦ã‚‚åˆå›ã¯å¿…ãšã‚¨ãƒªã‚¢è¨­å®šã™ã‚‹
        uploaded.progress(function(foto) {
            image.setImage(foto.url, foto.fid);
            trimmingWindow.trim(image.getImageSrc(), image.getTrimmingArea()).always(function(area) {
                image.setDisplayArea(area);
            });
        });

        $container.on('click', '.js-header-image-thumbnail, .jcrop-holder, .js-resizer', function() {
            // ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ¸ˆã®ç”»åƒã®ãƒˆãƒªãƒŸãƒ³ã‚°ä½ç½®å¤‰æ›´
            trimmingWindow.trim(image.getImageSrc(), image.getTrimmingArea()).done(function(area) {
                image.setDisplayArea(area);
            });
            return false;
        }).on('click', '.js-delete-header-image', function() {
            // ç”»åƒå¤–ã™
            if (!confirm(Hatena.Locale.text('admin.design.stop_header_image_confirm'))) return false;
            image.clear();
            return false;
        });
    };

    // ã‚¹ãƒãƒ•ã‚©ç‰ˆã®ãƒ˜ãƒƒãƒ€ç”»åƒï¼ŒãƒˆãƒªãƒŸãƒ³ã‚°æ©Ÿæ§‹ãŒãªã„ã®ã§å˜ç´”
    Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].setupTouchHeaderImageComponent = function(args) {
        var $container = args.$container;
        var previewUpdater = args.previewUpdater;
        var imageSize = {
            width:  + $container.attr('data-max-width'),
            height: + $container.attr('data-max-height')
        };

        var image = new HeaderImage($container, imageSize);

        var $imageItem = $container.find('.js-header-image-item');
        var $thumbnail = $container.find('.js-header-image-thumbnail');

        $(image).on('updated', function() {
            if (image.getImageSrc()) {
                $thumbnail.attr('src', image.getThumbnailSrc())
                          .show();
                $imageItem.show();
            } else {
                $thumbnail.hide();
                $imageItem.hide();
            }
            previewUpdater.requestPreview();
        });

        var uploaded = Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].setupFotoUpload({
            $input: $container.find('.js-header-image-input'),
            size: imageSize.width
        });

        // ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã•ã‚ŒãŸã‚‰å€¤è¨­å®š
        uploaded.progress(function(foto) {
            image.setImage(foto.url, foto.fid);
        });

        $container.on('click', '.js-delete-header-image', function() {
            // ç”»åƒå¤–ã™
            if (!confirm(Hatena.Locale.text('admin.design.stop_header_image_confirm'))) return false;
            image.clear();
            return false;
        });
    };

    Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].setupEntryComponent = function (args) {
        var css = args.css;
        var form = args.form;
        var preview = args.preview;

        // å¤‰æ•°ã®ãƒ˜ãƒ«ãƒ—
        $('.js-variable-toggle').click(function(){
            $(this).siblings('.js-variable-help').slideToggle();
            return false;
        });
    };

    // ãƒ•ã‚©ãƒˆãƒ©ã‚¤ãƒ•ã¸ç”»åƒã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã®æº–å‚™ï¼Œã‚³ãƒ”ãƒšã•ã‚Œã¾ãã£ã¦ãŸã®ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹æ•´ç†ã—ãŸã‚„ã¤
    // args:
    //   $input: input type=fileã®input
    //   size: ç”»åƒã®é•·è¾º
    // returns: ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãŒå®Œäº†ã™ã‚‹ã¨ { syntax, url, thumbnail_url } ãŒnotifyã•ã‚Œã‚‹Deferred
    Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].setupFotoUpload = function(args) {
        var $input = args.$input;
        var size = args.size;

        var uploaded = $.Deferred();
        var isSupportedFile = (typeof FormData != 'undefined');

        var callback = function(fid) {
            var match = fid.match(/f:id:([^:]+):(\d+)([jpg]):image/);
            if (!match) return;
            var name  = match[1];
            var id    = match[2];
            var type  = match[3];
            var extension = { j : '.jpg', p : '.png', g : '.gif' };
            var path  = [ name.substring(0, 1), name, id.substring(0, 8), id ].join('/');
            var url = 'http://cdn-ak.f.st-hatena.com/images/fotolife/' + path + extension[type];
            var thumbnail_url = 'http://cdn-ak.f.st-hatena.com/images/fotolife/' + path + '_120.jpg';
            uploaded.notify({
                fid: fid,
                url: url,
                thumbnail_url: thumbnail_url
            });
        };

        if ( isSupportedFile ) {
            $input.on('change', function() {
                var input = this;
                if ( ! this.files.length ) return;
                Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].uploadImage({
                    file     : $input[0],
                    input    : $input,
                    folder   : "Hatena Blog",
                    fotosize : size,
                    callback : callback
                });
                return false;
            });
        } else {
            Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].setIframeUploader({
                fileinput : $input,
                fotosize  : size,
                callback  : callback
            });
        }

        return uploaded.promise();
     };

    // ãƒ•ã‚©ãƒˆãƒ©ã‚¤ãƒ•ã¸ç”»åƒã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
    Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].uploadImage = function (args) {
        var file = args.file;
        var folder = args.folder;
        var fotosize = args.fotosize;
        var input = args.input;
        var callback = args.callback;

        input.prop('disabled', true);

        var data = new FormData();
        data.append('rkm', Hatena.Diary.data('rkm'));
        data.append('append', 1);
        data.append('fototitle', "");
        data.append('folder', folder);
        data.append('fotosize', fotosize);
        data.append('image', file.files[0]);

        var grandparent = $(file).parent().parent();
        var progress = grandparent.find('.progress');
        progress.show();
        var bar = progress.find('div.bar');
        bar.width('0%');
        var percent = progress.find('div.percent');
        var updateProgress = function (progress) {
            if (progress > 100) progress = 100;
            bar.width(progress + '%');
            percent.text(Hatena.Locale.text('uploading'));
        };

        var xhr = new XMLHttpRequest();

        xhr.upload.addEventListener("progress", function (e) {
            var percent = e.lengthComputable ? (e.loaded / e.total * 100) : NaN;
            updateProgress( percent );
        }, false);

        xhr.addEventListener("load", function (e) {
            input.prop('disabled', false);
            input.val('');
            updateProgress( 100 );
            callback(xhr.responseText);
            progress.hide();
            _.defer(function() {
                updateProgress(0);
            });
        }, false);

        xhr.addEventListener("error", function (e) {
            progress.addClass('error');
            input.val('');
            percent.text('error');
            input.prop('disabled', false);
        }, false);

        xhr.open("POST", "/f/" + Hatena.Diary.data('name') + "/upbysmart");
        xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');
        xhr.send(data);
    };

    // IEç”¨ã«iframeã‚’è¨­ç½®
    Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].setIframeUploader = function (args) {
        var fileinput = args.fileinput;
        var fotosize = args.fotosize;
        var callback = args.callback;

        var iframe = $('<iframe/>');
        fileinput.replaceWith(iframe);
        var src = "/api/upload/fotolife_smart";
        iframe.attr('src', src);
        iframe.addClass('uploader');
        iframe.load(function () {
            var document;
            if (iframe[0].contentDocument) {
                document = iframe[0].contentDocument;
            } else if (iframe[0].contentWindow) {
                document = iframe[0].contentWindow.document;
            } else {
                return;
            }
            if (document.body.innerHTML.match(/^\s*(f:id:\S+)/)) {
                iframe[0].contentWindow.location.replace(src);
            }
            callback(document.body.innerHTML);

            $(document).find('input[name="fotosize"]').val(fotosize);
            var images = $(document).find('input[type="file"]');
            $(images[0]).change ( function () {
                $(document).find('#fotolife-upload-form').submit();
                $(images[0]).replaceWith($('<h5>').text(Hatena.Locale.text('uploading')));
            });
        });
    };

    // Facebookã‚„Twitterã¨ã®é€£æºã‚’ã—ã¦ã„ã‚‹ã‹ã‚’ç¢ºèªã—ã€ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’æ›´æ–°
    // æ›´æ–°ãŒçµ‚ã‚ã‚‹ã¨resolveã•ã‚Œã‚‹Deferredã‚’è¿”ã™
    Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].updateProfileModule = function () {
        var updated = $.Deferred();

        $.ajax({
            type: 'GET',
            url: '/api/applications_data',
            dataType: 'json'
        }).done(function (res) {
            var data = res;
            var $profile_modules = $('.js-module-value-component-profile');

            $profile_modules.each(function() {
                var $profile_module = $(this);

                if ( data.twitter ) {
                    $profile_module.find('.cannot-twitter-button').remove();
                } else {
                    $profile_module.find('.can-twitter-button').remove();
                    $profile_module.find('.cannot-twitter-button').removeClass('cannot-twitter-button').addClass('cannot-twitter-button-display');
                }

                if ( data.facebook ) {
                    $profile_module.find('.cannot-facebook-follow').remove();
                    $profile_module.find('.cannot-facebook-subscribe').remove();
                } else {
                    $profile_module.find('.can-facebook-follow').remove();
                    $profile_module.find('.can-facebook-subscribe').remove();
                    $profile_module.find('.note').remove();
                    $profile_module.find('.cannot-facebook-follow').removeClass('.cannot-facebook-follow').addClass('.cannot-facebook-follow-display');
                    $profile_module.find('.cannot-facebook-subscribe').removeClass('cannot-facebook-subscribe').addClass('cannot-facebook-subscribe-display');
                }
            });

            updated.resolve();
        }).fail(function() {
            updated.reject();
        });

        return updated.promise();
    };

    // ã‚µãƒ¼ã‚¯ãƒ«ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’æ›´æ–°
    // æ›´æ–°ãŒçµ‚ã‚ã‚‹ã¨resolveã•ã‚Œã‚‹Deferredã‚’è¿”ã™
    Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].updateCirclesModule = function () {
        var updated = $.Deferred();
        if ($('#module-value-component-circles').length === 0) {
            updated.resolve();
            return updated.promise();
        }

        $.ajax({
            type: 'GET',
            url: '/api/circles',
            data: { blog: Hatena.Diary.data('blogs-uri-base')  },
            dataType: 'json'
        }).done(function (res) {
            var mkSelectCircle = _.template($('.js-module-circles-select-circles-template').html().replace(/^\s+|\s+$/g, ''));
            _.each(res.circles, function (circle) {
                $('.js-select-circles-container').each(function() {
                    $(this).append($(mkSelectCircle({ circle: circle })));
                });
            });
            updated.resolve();
        }).fail(function() {
            updated.reject();
        });

        return updated.promise();
    };

    Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].setupEditor = function (args) {
        var form     = args.form;
        var syntax   = args.syntax;
        var textarea = args.textarea;

        if (!textarea[0]) return;

        var container = document.createElement('div');
        $(container)
            .css({
                position: 'absolute',
                top: 'auto',
                left: 0,
                bottom: 50,
                padding: 0,
                margin: 0,
                borderTop: '1px solid #ccc',
                borderBottom: '1px solid #ccc',
                width: '500px',
                height: '400px',
                zIndex: 9999,
                background: '#fff'
            }).
            appendTo(document.body).
            hide();

        textarea.css({
            'font-size': '11px',
            'white-space': 'nowrap',
            'overflow': 'hidden'
        });

        var editor = ace.edit(container);
        editor.commands.removeCommand('gotoline'); // fucking default keybinding of ace
        editor.commands.removeCommand('indent');
        editor.commands.removeCommand('outdent');

        // editor.renderer.setShowGutter(false);
        editor.renderer.setHScrollBarAlwaysVisible(false);
        editor.renderer.setPadding(5);
        editor.renderer.setShowPrintMargin(false);

        editor.setFontSize("10px");
        editor.setHighlightActiveLine(false);

        var Mode = require('ace/mode/' + syntax).Mode;
        var mode = new Mode();

        var session = editor.getSession();
        session.setMode(mode);
        session.setUseWrapMode(true);

        var editorState = new Hatena.Diary.FormState();

        textarea.focus(function () {
            $(container).show();
            editor.resize();
            editor.focus();
            editorState.enableConfirm();
        });

        editor.on('blur', function () {
            textarea.val(session.getValue());
            textarea.trigger('change');
            $(container).hide();
            editorState.disableConfirm();
        });

        $(container).mousedown(function () { return false });

        session.setValue(textarea.val());

        textarea.change(function () {
            session.setValue(textarea.val());
        });

        $('#tabs').on('tabsactivate', function () {
            setTimeout(function () { editor.resize() }, 0);
        });

        $(window).resize(function () { editor.resize() });
    };

    Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].setupThemesListSwitcher = function () {
        $('.switch-theme-list-types').on('blog:dropdown:selected', '[data-theme-list-type]', function () {
            var listType = $(this).attr('data-theme-list-type');
            $('#themes .themes-container').each(function () {
                $(this).toggle($(this).attr('data-theme-list-type') === listType);
            });
        });

        // ä»¥ä¸‹ã¯åŒã˜ã‚ˆã†ãªæ§‹é€ ã ã£ãŸã‚‰ä½¿ãˆã‚‹ã®ã§
        // ãã®ã¾ã¾ ['*'] ã«ç½®ã„ã¦ã‚‚ã„ã„ã§ã™ã€‚
        var $dropdown     = $('.dropdown-container'),
            $dropdownList = $dropdown.find('.dropdown-list').hide();
        $dropdown
            .on('click', '.dropdown-button, .dropdown-selected', function () {
                var isShown = Hatena.Diary.Window.toggle($dropdownList);
                $dropdownList.toggleClass('opened', isShown);
                return false;
            })
            .on('click', '.dropdown-list-item', function () {
                $dropdown.find('.dropdown-selected').text($(this).text());
                $(this).trigger('blog:dropdown:selected');
            })
            .find('.dropdown-list-item').eq(0).click();
    };

    // ã‚¹ãƒãƒ•ã‚©ç”¨HTMLç·¨é›†æ¬„ã®åˆ¶å¾¡ï¼Œè¨­å®šã«ã‚ˆã£ã¦ã¯æ›¸ã‘ã‚‹ï¼ŒPCç‰ˆã¨åŒã˜å†…å®¹ã‚’è¡¨ç¤ºã™ã‚‹ãƒ¢ãƒ¼ãƒ‰ã®ã¨ãã¯ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒªã‚¢å‡ºã•ãªã„
    Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].setupTextareaHider = function () {
        _.each([
            ['header-touch-show-html-for-pc' , '.js-hide-on-header-touch-show-html-for-pc'],
            ['display-touch'                 , '.js-hide-on-display-touch'],
            ['footer-touch-show-html-for-pc' , '.js-hide-on-footer-touch-show-html-for-pc'],
            ['header-touch-show-image-for-pc' , '.js-hide-on-header-touch-show-image-for-pc']
        ], function(rule) {
            var input_selector = rule[0];
            var target_selector = rule[1];

            var $input = $(':input[name=' + input_selector + ']');
            if (!$input.length) return;

            var $target = $(target_selector);
            if (!$target.length) return;

            var updateVisibility = function() {
                var $checked_input = $(':checked[name=' + input_selector + ']');
                if (!$checked_input.length) return;
                if (+$checked_input.val()) {
                    $target.hide();
                } else {
                    $target.show();
                }
            };

            // å¤‰æ›´ã‚’ç›£è¦–
            // IEã§ã¯changeã‚¤ãƒ™ãƒ³ãƒˆã®ç›´å¾Œã«è¦‹ã‚‹ã¨å¤ã„å€¤ãŒå–ã‚Œã‚‹ã“ã¨ãŒã‚ã‚‹ã®ã§ã¡ã‚‡ã£ã¨å¾…ã£ã¦ã‚‹
            $input.on('change', function() {
                _.defer(updateVisibility);
            });

            // åˆæœŸçŠ¶æ…‹ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
            updateVisibility();
        });
    };

    // æ˜”ã®èƒŒæ™¯ç”»åƒï¼Œæœ€åˆã¯éš ã—ã¦ãŠã„ã¦ï¼Œã‚‚ã£ã¨èª­ã‚€æŠ¼ã—ãŸã‚‰è¦‹ã›ã‚‹
    Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].setupSeeMoreBackgrounds = function() {
        var $button = $('.js-show-more-background-images');
        $button.one('click', function() {
            $button.remove();
            $('#backgrounds li:hidden').show();
        });
    };

    // ã‚¢ã‚¯ã‚»ãƒ³ãƒˆã‚«ãƒ©ãƒ¼è¨­å®šUI
    Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].setupTouchAccentColor = function(args) {
        var $form = args.$form;
        var $accent_color_input = $form.find(':input[name="touch-accent-color"]');

        var $colors = $('#touch-accent-colors');

        var select = function($color) {
            $colors.find('.selected').removeClass('selected');
            $color.addClass('selected');
            var color = $color.attr('data-color');
            $accent_color_input.val(color);
            $form.trigger('change');
        };

        $colors.on('click', '[data-color]', function() {
            select($(this));
        });

        var first_value = $accent_color_input.val();
        select($colors.find('[data-color="' + first_value + '"]'));
    };

})(jQuery);

(function($){

    Hatena.Diary.Pages.Admin['user-blog-config-design'] = function () {
        var css     = $('#css');
        var form    = $('#form-design');

        // themes
        var themeListItems = $('#themes li');
        themeListItems.addClass('ui-selectee').click(function (e) {
            var link = $(this).attr('data-css').replace(/\s+/g, ' ');
            var id   = $(this).attr('data-id');

            var design = new EditDesign(css.val());
            design.setData('theme', id, '@import "' + link + '";');
            css.val(design.getCSS());
            css.trigger('change');

            themeListItems.removeClass('ui-selected');
            $(this).addClass('ui-selected');
        });

        var bgImageThumbnail = $('#background-image-thumbnail');
        // background-image
        var backgroundListItems = $('#backgrounds li');
        // background-color
        var backgroundColorListItems = $('#background-colors li');

        backgroundListItems.addClass('ui-selectee').click(function (e) {
            var style = $(this).attr('data-css').replace(/\s+/g, ' ');
            var id    = $(this).attr('data-id');

            var design = new EditDesign(css.val());
            design.setData('background', id, style);
            css.val(design.getCSS());
            css.trigger('change');

            backgroundListItems.removeClass('ui-selected');
            backgroundColorListItems.removeClass('ui-selected');
            $(this).addClass('ui-selected');
            // ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ãŸèƒŒæ™¯ç”»åƒã‹ã‚‰ã‚‚ã‚¯ãƒ©ã‚¹ã‚’å¤–ã™
            bgImageThumbnail.removeClass('ui-selected');
            $('input[name="bg-image-selected"]').val(0);
        });

        backgroundColorListItems.addClass('ui-selectee').click(function (e) {
            var style = $(this).attr('data-css').replace(/\s+/g, ' ');
            var id    = $(this).attr('data-id');
            var design = new EditDesign(css.val());

            // ã‚«ã‚¹ã‚¿ãƒ èƒŒæ™¯ç”»åƒãŒé¸æŠã•ã‚Œã¦ã„ã¦ï¼Œã‹ã¤ï¼ŒCSSã«ï¼ŒèƒŒæ™¯ç”»åƒã®è¨­å®šãŒæ›¸ã‹ã‚Œã¦ã„ã‚‹å ´åˆã¯ã€background-colorã ã‘å¤‰ãˆã‚‹
            // CSSã«æ—¢å­˜ã®èƒŒæ™¯ç”»åƒã®è¨­å®šãŒæ›¸ã‹ã‚Œã¦ã„ãªã„ã¨ãã¯å˜ã«èƒŒæ™¯è‰²ã‚’è¨­å®šã™ã‚‹
            var backgroundContent = design.getData('background').content;
            if ( bgImageThumbnail.hasClass('ui-selected') && backgroundContent ) {
                style = backgroundContent.replace(/background-color:(.*?);/, 'background-color:#' + id + ';');

                id = "custom";
            }
            backgroundListItems.removeClass('ui-selected');

            design.setData('background', id, style);
            css.val(design.getCSS());
            css.trigger('change');

            backgroundColorListItems.removeClass('ui-selected');
            $(this).addClass('ui-selected');
        });

        var design = new EditDesign(css.val());

        // for backward compatibility :: delete later
        new function () {
            if (/<system/.test(design.css)) return;

            var changed = false;

            design.css = design.css.replace(/@import "\/css\/theme\/([^\/]+)\/\1.css";/, function (_, id) {
                changed = true;
                return '/* <system section="theme" selected="' + id + '"> */\n' + _ + '\n/* </system> */\n';
            });

            design.css = design.css.replace(RegExp('\n?/\\*system:background\\*/(.*)'), function (_, style) {
                changed = true;
                design.setData('background', 'unknown', style);
                return '';
            });

            if (changed) {
                design.setCSS(design.css);
                css.val(design.getCSS());
                css.trigger('change');
            }
        } ();

        var currentTheme = design.getData('theme').selected;
        if (currentTheme) {
            themeListItems.filter('[data-id="' + currentTheme + '"]').addClass('ui-selected');
        } else {
            themeListItems.removeClass('ui-selected');
        }

        var currentBackground = design.getData('background').selected;
        if (currentBackground) {
            $('#backgrounds, #background-colors').find('[data-id="'+currentBackground+'"]').addClass('ui-selected');
        } else {
            backgroundListItems.removeClass('ui-selected');
        }

    };

})(jQuery);

(function($){

    Hatena.Diary.Pages.Admin['user-blog-config-detail'] = function () {
        $('.main-tab').find('.user-blog-config-detail').addClass('current-tab');

        $('#blog-config-custom-domain .check-validity').click(function (e) {
            var $this = $(this);
            $this.attr('disabled', 'disabled').addClass('disabled');
            $('#blog-config-custom-domain .validity-status').text('-');
            $.ajax({
                type: 'POST',
                url: '/api/custom_domain.check',
                data: $this.closest('form').serialize(),
                dataType: 'json',
                success: function (data) {
                    $('#blog-config-custom-domain .validity-status').text(data.message);
                    $('#blog-config-custom-domain .validity-status.detail').text(data.detail || '');
                },
                complete: function () {
                    $this.removeAttr('disabled').removeClass('disabled');
                }
            });
            return false;
        });
    };

})(jQuery);

(function($){

    Hatena.Diary.Pages.Admin['user-blog-config-external'] = function () {
        var withParentWindow = Hatena.Diary.Location.param('with_parent_window');
        var callback = Hatena.Diary.Location.param('callback');

        // è¦ªwindowãŒã‚ã£ã¦ã€OAuthèªè¨¼ã‹ã‚‰æˆ»ã£ã¦ããŸæ™‚ã¯windowã‚’é–‰ã˜ã‚‹
        if (withParentWindow && callback) {
            window.close();
        }
    };

})(jQuery);

(function($){

    Hatena.Diary.Pages.Admin['user-blog-config-permission'] = function () {
        var $authconfigs = $('.permission-authconfigs');
        var $permission_custom = $('#permission-custom');
        $('#new-authconfig').click(function () { $('#create-authconfig').submit(); });

        if ($('#viewable-id-select').length > 0) {
            // æ—¢å­˜ã®èªè¨¼ã‚»ãƒƒãƒˆã‚ã‚‹ã¨ãé¸æŠã«ã‚ã‚ã›ã¦å¯¾å¿œã™ã‚‹ç·¨é›†ãƒªãƒ³ã‚¯ãªã©ã‚’å‡ºã—ãŸã‚Šæ¶ˆã—ãŸã‚Šã™ã‚‹
            $('#viewable-id-select').change(function () {
                var selected = $(this).find('option:selected');
                var detail_id = selected.attr('data-ac');
                $authconfigs.find('.authconfig-detail').addClass('hide');
                $authconfigs.find('.' + detail_id).removeClass('hide');
            }).change();
        } else {
            // æ—¢å­˜ã®èªè¨¼ã‚»ãƒƒãƒˆãªã„ã¨ãã¯æ–°ã—ã„å…¬é–‹ç¯„å›²ã‚’ä½œæˆãƒœã‚¿ãƒ³ã ã‘è¡¨ç¤º
            $('.authconfig-detail-new').show();
        }

        $('[name="permission"]').change(function () {
            if ($('#permission-public').prop('checked')) {
                $('.config-private-overlay').show();
            } else {
                $('.config-private-overlay').hide();
            }

            // å…¬é–‹ç¯„å›²è¨­å®šã‚’éš ã™ã®ã¯ï¼Œã‚«ã‚¹ã‚¿ãƒ ãŒé¸æŠå¯èƒ½ã§ï¼Œã‹ã¤ï¼Œãƒã‚§ãƒƒã‚¯ã•ã‚Œã¦ã„ãªã„ã¨ã
            if (!$permission_custom.attr('disabled') && !$permission_custom.prop('checked')) {
                $('#permission-custom-viewable-id').hide();
            } else {
                $('#permission-custom-viewable-id').show();
            }
        }).change();
    };

})(jQuery);

(function($){

    Hatena.Diary.Pages.Admin['user-blog-config-theme-theme_id-preview'] = function () {
        var $previewForm = $('#theme-preview-form');
        var $saveForm     = $('#theme-install-form');
        var noticeMessage = $saveForm.find('.notice').text();

        $saveForm.on('submit', function () {
            return confirm(noticeMessage);
        });

        $previewForm.submit();
    };

})(jQuery);

// æŠ•ç¨¿æ™‚ã®å…±æœ‰ã™ã‚‹ãƒœã‚¿ãƒ³ã«é–¢é€£ã—ãŸå‡¦ç†ã‚’æ‰±ã†
(function($) {
    Hatena.Diary.SocializeBox = {
        setup: function(entry_id) {
            var self = this;

            self.entry_id = entry_id;

            // ç¾åœ¨ã®èªè¨¼æƒ…å ±ã‚’ä¿å­˜ã—ã¦ãŠã
            self.saveExternalAuthorizeConfig();

            // å¤–éƒ¨é€£æºè¨­å®šç”¨
            self.setupExternalAuthLink();
        },
        setupExternalAuthLink: function() {
            var self = this;

            // Bãƒ‘ã‚¿ãƒ¼ãƒ³ã®ã¿ã€é€£æºãƒªãƒ³ã‚¯ã‚„ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯ã§æ–°ã—ã„windowãŒé–‹ãã‚ˆã†ã«
            var external_auth_href = $('html').attr('data-admin-domain') + "/-/config/external?with_parent_window=1";
            $(document).on('click', '[data-open-external-auth-link=1]', function (e) {
                e.preventDefault();

                var options = { width:900, height:600, scrollbars: 'yes' };
                options.left = Math.floor((screen.width - options.width) / 2);
                options.top  = Math.floor((screen.height - options.height) / 2);
                var external_auth_window = window.open(
                    external_auth_href,
                    'external_auth',
                    Hatena.Diary.Util.positionToPositionString(options)
                );

                // é€£æºå®Œäº†ã—ãŸã‚‰windowãŒé–‰ã˜ã‚‰ã‚Œã‚‹ã®ã§ç›£è¦–
                // ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ãƒœã‚¿ãƒ³ã®çŠ¶æ…‹æ›´æ–°ã‚’ã™ã‚‹
                Hatena.Diary.Util.waitForResource(function () {
                    return external_auth_window.closed;
                }, function () {
                    var $modal = $('.js-socialize-modal');
                    // modalãŒã‚ã£ãŸã‚‰é–‰ã˜ã‚‹
                    if ($modal.length > 0) {
                        $modal.hide();
                        $('.modal-window-background').fadeOut('fast');
                    }

                    // é€£æºæƒ…å ±ã‚’å†å–å¾—ã—ã€æ›´æ–°
                    self.getExternalAuthStatus().done(function (html) {
                        // å†åº¦é€£æºè¨­å®šã™ã‚‹äººãŒã„ã‚‹ã‹ã‚‚ã—ã‚Œãªã„ã®ã§æœ€æ–°ã®æƒ…å ±ã‚’ä¿å­˜ã—ã¦ãŠã
                        self.saveExternalAuthorizeConfig();

                        self.refreshSocializeBox(html);

                        var isAuthorized = self.isExternalAuthorizeFinished();
                        if (isAuthorized) {
                            // é€£æºå®Œäº†ã—ãŸã‚‰é©åˆ‡ãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º
                            var $external_auth_message = $('.js-socialize-box .js-external-auth-message');
                            var $external_auth_finish_message = $('.js-socialize-box .js-external-auth-finish-message');
                            $external_auth_message.hide();
                            $external_auth_finish_message.show();
                        }

                    });
                });

                return false;
            });
        },
        refreshSocializeBox: function(html) {
          $('.js-refresh-socialize-box').empty().html(html);
        },
        saveExternalAuthorizeConfig: function() {
            // èªè¨¼æƒ…å ±ã‚’ä¿å­˜ã—ã¦ãŠã
            // å¾Œã§é€£æºå®Œäº†ã—ãŸã‹ç¢ºèªã™ã‚‹æ™‚ã«ä½¿ã†
            this.externalAuthorizeConfig = {
                twitter:  $('.js-authenticated-twitter').size() == 1,
                facebook: $('.js-authenticated-facebook').size() == 1,
                mixi:     $('.js-authenticated-mixi').size() == 1
            };
        },
        // ä¿å­˜ã—ã¦ãŠã„ã¦èªè¨¼æƒ…å ±ã¨æ¯”è¼ƒã—ã¦å¤‰ã‚ã£ã¦ã„ãŸå ´åˆã¯trueã‚’è¿”ã™
        isExternalAuthorizeFinished: function () {
            var config = this.externalAuthorizeConfig;

            return (
                config.twitter  === false && $('.js-authenticated-twitter').size() == 1 ||
                config.facebook === false && $('.js-authenticated-facebook').size() == 1 ||
                config.mixi     === false && $('.js-authenticated-mixi').size() == 1
            );
        },
        // å¤–éƒ¨é€£æºæƒ…å ±ã‚’å–å¾—ã™ã‚‹
        getExternalAuthStatus: function () {
            var dfd = $.Deferred();
            $.ajax({
                url: 'socialize_box',
                type: 'GET',
                dataType: 'html',
                data: { entry_id: this.entry_id }
            }).done(function (data) {
                dfd.resolve(data);
            }).fail(function () {
                dfd.reject();
            });

            return dfd.promise();
        }
    };
})(jQuery);

(function($){
    Hatena.Diary.Pages.Admin['user-blog-edit-done'] = function () {
        Hatena.Diary.Pages.createForParent();

        var entry = document.getElementById('posted').value;
        Hatena.Diary.Pages.send('update', { entry : entry });

        $('.js-button-focus-this').focus();

        Hatena.Diary.SocializeBox.setup($('.js-socialize-box').data('entry-id'));

        // deactivate click-jacking-escape in 1000msec
        setTimeout(function () {
            $('form').each(function () {
                var $this    = $(this);
                var $buttons = $this.find('input[type=submit]');
                $this.removeClass('unedited');
                $buttons.removeAttr('disabled');
            });
        }, 1000);
        // proã«ãªã‚Šã¾ã›ã‚“ã‹ãƒ¢ãƒ¼ãƒ€ãƒ«
        Hatena.Diary.setupProModal();

        var modal = new ExternalAuthModalHandler($('.js-socialize-modal'));

        var shareModal;
        $(document).on('click', '.js-share-button', function() {
            var service_name = $(this).data('share-service');

            var $modal = $('.js-' + service_name + '-modal');
            var $share_success_message = $('.js-share-success-message');
            var entry_id = $('.js-socialize-box').data('entry-id');

            shareModal = new ShareModal($modal, $share_success_message, entry_id, service_name);

            var message = $('.js-share-message');
            // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒã‚ã‚‹
            // ã‚µãƒ¼ãƒ“ã‚¹ãŒtwitter
            // å…ˆé ­ãŒã¯ã¦ãªãƒ–ãƒ­ã‚°ã«ã«æŠ•ç¨¿ã—ã¾ã—ãŸã®æ™‚(ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆæ–‡è¨€ã„ã˜ã£ãŸå ´åˆã¯é¸æŠã—ãªã„)
            var posted = Hatena.Locale.text('blog.posted');
            var is_default_posted_text = message.val().substr(0, posted.length) === posted;
            if (message.get(0) && service_name == 'twitter' && is_default_posted_text) {
                new SelectText(message[0], 0, posted.length).select();
            }

            return false;
        });
        $(document).on('click', '.js-official-share-button', function() {
            var url = $(this).attr('href');
            new OfficialShareWindow(url, 550, 450, screen.width, screen.height);
            return false;
        });
    };

    var OfficialShareWindow = function (url, width, height, screen_width, screen_height) {
        this.init(url, width, height, screen_width, screen_height);
    };
    OfficialShareWindow.prototype = {
        init: function (url, width, height, screen_width, screen_height) {
            this.url           = url;
            this.width         = width;
            this.height        = height;
            this.screen_width  = screen_width;
            this.screen_height = screen_height;

            this.setLeft();
            this.setTop();
            this.openWindow();
        },
        setLeft: function() {
            this.left = Math.floor((this.screen_width - this.width) / 2);
        },
        setTop: function() {
            this.top  = Math.floor((this.screen_height - this.height) / 2);
        },
        openWindow: function () {
            window.open(
                this.url,
                'share_window',
                Hatena.Diary.Util.positionToPositionString({
                    width: this.width,
                    height: this.height,
                    screen_width: this.screen_width,
                    screen_height: this.screen_height,
                    left: this.left,
                    top: this.top,
                    scrollbars: 'yes'
                })
            );
        }
    };

    var ShareModal = function ($modal, $share_success_message, entry_id, service_name) {
        this.init($modal, $share_success_message, entry_id, service_name);
    };
    ShareModal.prototype = {
      init: function ($modal, $share_success_message, entry_id, service_name) {
          this.$modal =  $modal;
          this.$textarea = this.$modal.find('.js-share-message');
          this.$share_success_message = $share_success_message;

          // ã‚·ã‚§ã‚¢ã«æˆåŠŸã—ãŸæ™‚ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’æ¶ˆã™
          this.hideShareSuccessMessage();

          this.service_name = service_name;
          this.entry_id = entry_id;

          this.bindEvents();
          this.showModal();
      },
      bindEvents: function() {
          self = this;
          $(document).on('click', '.js-icon-close', function () {
              self.hideModal();
          });

          self.$textarea.keyup(function() {
              if (self.validateMessage(self.$textarea.val()) === false) {
                   self.$modal.find('.js-validation-error').show();
                   self.isShareButtonDisabled = true;
              }
              else {
                   self.$modal.find('.js-validation-error').hide();
                   self.isShareButtonDisabled = false;
              }
          });
          $(document).on('click', '.js-share-execute-button', function () {
              // é€šä¿¡ä¸­ã¾ãŸã¯ãƒœã‚¿ãƒ³ãŒdisabledã®æ™‚ã¯å³return
              if (self.isAjaxRunning === true || self.isShareButtonDisabled === true) return false;

              var message = self.$textarea.val();
              if (self.validateMessage(message) === true ) self.post(message);

              return false;
          });
      },
      showModal: function () {
          Hatena.Diary.Window.show(this.$modal);
      },
      hideModal: function () {
          self.$modal.find('.js-validation-error').hide();
          Hatena.Diary.Window.hideAll();
      },
      validateMessage: function (message) {
          if (this.service_name === 'twitter') {
              return Hatena.Diary.validationTweetLength(message);
          }

          return true;
      },
      isAjaxRunning: false,
      isShareButtonDisabled: false,
      showShareSuccessMessage: function () {
        this.$share_success_message.find('p').text(
            Hatena.Locale.text('blog.social.share.success', Hatena.Locale.text('blog.social.service.name.' + this.service_name))
        );
        this.$share_success_message.show();
      },
      hideShareSuccessMessage: function () {
        this.$share_success_message.hide();
      },
      post: function (message) {
          var self = this;
          // é€£æ‰“ã—ã¦è¤‡æ•°å›ãƒã‚¹ãƒˆã•ã‚Œãªã„ã‚ˆã†ã«disableã«ã—ã¦ãŠã
          self.isAjaxRunning = true;
          $.ajax({
              url: 'post_to_social_service',
              type: 'POST',
              data: {
                  rkm: Hatena.Diary.data('rkm'),
                  rkc: Hatena.Diary.data('rkc'),
                  service_name: self.service_name,
                  entry_id: self.entry_id,
                  message: message
              }
          }).done(function (data) {
              self.hideModal();
              self.showShareSuccessMessage();
          }).fail(function () {
              // å®Œäº†æ™‚ã¯modalãŒé–‰ã˜ã‚‰ã‚Œã‚‹ã®ã§failã®æ™‚ã ã‘falseã‚’å…¥ã‚Œã¦ã¾ãŸé€šä¿¡ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹
              self.isAjaxRunning = false;
          });
      }
    };


    var ExternalAuthModal = function() {};
    ExternalAuthModal.prototype = {
        setModalDisabled: function () {
            try {
              localStorage['Hatena.Diary.Admin.User.Blog.Edit.Done.ExternalAuthModal.disabled'] = true;
            } catch(ignore) {}
        },

        isModalDisabled: function () {
            try {
                var is_disabled = localStorage['Hatena.Diary.Admin.User.Blog.Edit.Done.ExternalAuthModal.disabled'];
                return is_disabled === 'true' ? true : false;
            } catch(ignore) {}
        }
    };

    var ExternalAuthModalHandler = function($el) {
        this.init($el);
    };
    ExternalAuthModalHandler.prototype = {
        init: function ($el) {
            var self = this;

            self.$el   = $el;
            self.modal = new ExternalAuthModal();

            // modalãŒã‚ã‚‹ã‹ã¤éè¡¨ç¤ºã«ã—ã¦ã„ãªã‹ã£ãŸã‚‰è¡¨ç¤ºã™ã‚‹
            if (self.$el.length && !self.modal.isModalDisabled()) {
                self.showModal();
            }

            // modalå†…ã‚’clickã™ã‚‹ã¨é–‰ã˜ã¦ã—ã¾ã†ãŸã‚æ­¢ã‚ã¦ã„ã‚‹
            // checkboxã¨ã‹æŠ¼ã—ãŸç¬é–“é–‰ã˜ã‚‰ã‚Œã‚‹ã¨å›°ã‚‹
            self.$el.on('click', function(event) {
               event.stopPropagation();
            });

            // ã‚¹ã‚­ãƒƒãƒ—ãƒœã‚¿ãƒ³æŠ¼ã•ã‚ŒãŸã‚‰é–‰ã˜ã‚‹
            self.$el.on('click', '.js-skip-button', function () {
                // æ¬¡å›ã‹ã‚‰è¡¨ç¤ºã—ãªã„ã«ãƒã‚§ãƒƒã‚¯ãŒå…¥ã£ã¦ã„ãŸã‚‰
                // ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«å€¤ã‚’ã‚»ãƒƒãƒˆã™ã‚‹
                if (self.$el.find('.js-non-display-checkbox').prop('checked')) {
                    self.modal.setModalDisabled();
                }
                self.hideModal();
                return false;
            });
        },

        showModal: function () {
            Hatena.Diary.Window.show(this.$el, { center: 1, showBackground: true });
        },

        hideModal: function () {
            Hatena.Diary.Window.hide(this.$el);
        }

    };

    var SelectText = function($el, start, end) {
        this.init($el, start, end);
    };
    SelectText.prototype = {
        init: function ($el, start, end) {
            this.$el   = $el;
            this.start = start;
            this.end   = end;
        },
        select: function () {
            this.$el.focus();

            if (this.$el.createTextRange) {
                var range = this.$el.createTextRange();
                range.collapse(true);
                range.moveStart('character', this.start);
                range.moveEnd('character', this.end);
                range.select();
            }
            else {
               this.$el.selectionStart = this.start;
               this.$el.selectionEnd   = this.end;
            }
        }
    };
})(jQuery);

(function($){

    Hatena.Diary.Pages.Admin['user-blog-edit'] = function () {
        if (window.parent != window) {
            Hatena.Diary.Pages.createForParent();
            Hatena.Diary.Pages.send('ready');
        }

        var title            = $('#title');
        var count            = $('#character-count');
        var container        = $('#editor');
        var form             = $('#edit-form');
        var main             = $('#editor-main');
        var supportContainer = $('#editor-support-container');
        var supportItems     = $('#items');
        var curations        = $('#editor .curation-tab-content');

        var formState = new Hatena.Diary.FormState();
        formState.observeForm(form);

        var editor = new Hatena.Diary.Editor(form);
        editor.bind('initialize', function () {
            formState.setFormInitialState();
        });
        editor.trigger('initialize');

        editor.bind('change', function () {
            formState.checkFormState();
            var c = editor.getCharacterCount();
            count.text(Hatena.Locale.textN('edit_form.character_count_unit', c, c));

            if (window.parent != window) Hatena.Diary.Pages.send('change', formState.isConfirmEnabled());
        });
        setTimeout(function () { editor.focus() }, 100);

        title.on('keydown', function(event) {
            if(keyString(event) === 'RET') {
                editor.focus();
                return false;
            }
        });

        editor.form.submit(function() {
            var submitButton = editor.form.find(':submit');
            var disable = function() {
                editor.form.addClass('unedited');
                submitButton.attr('disable', 'disable');
            };
            var enable = function() {
                editor.form.removeClass('unedited');
                submitButton.removeAttr('disable');
            };

            var maxLength = 655360; // 2^16 * 10 ã¾ã§ã¨ã™ã‚‹
            if (editor.getByteCount() > maxLength) {
                disable();
                editor.bind('change', enable);
                alert(Hatena.Locale.text('edit_form.body_length_exceeded_error'));
                return false;
            } else { // æ–‡å­—æ•°åˆ¶é™ã«ã²ã£ã‹ã‹ã‚‰ãšã€æŠ•ç¨¿ã«æˆåŠŸã™ã‚‹å ´åˆ
                Hatena.Diary.Util.preventDuplicateSubmit($(editor.form));

                if (window.parent != window) Hatena.Diary.Pages.send('change', false);
            }
        });

        Hatena.Diary.Editor.Support.currentEditor = editor;
        Hatena.Diary.currentCategoryEditor =
            new Hatena.Diary.Pages.Admin['user-blog-edit'].CategoryEditor(form, '#entry-categories');

        new Hatena.Diary.Pages.Admin['user-blog-edit'].OgImageEditor(form, '#og-image');

        var datetimeEditor = new Hatena.Diary.Pages.Admin['user-blog-edit'].DateTimeEditor(form, '#datetime-input');
        Hatena.Diary.Pages.Admin['user-blog-edit'].observeForScheduledEntry(datetimeEditor);

        // setupGooglePicker()ã§ã¯ï¼ŒEditorSidebar.setup()ã§å‘¼ã°ã‚Œã‚‹triggerã‚¤ãƒ™ãƒ³ãƒˆã‚’DOMã«è¨­å®šã—ã¦ã„ã‚‹ã®ã§ï¼Œ
        // EditorSidebar.setup()ã‚ˆã‚Šã‚‚å‰ã«å‘¼ã°ã‚Œã‚‹å¿…è¦ãŒã‚ã‚‹ï¼
        Hatena.Diary.Pages.Admin['user-blog-edit'].setupGooglePicker();

        Hatena.Diary.Pages.Admin['user-blog-edit'].EditorSidebar.setup();

        Hatena.Diary.Pages.Admin['user-blog-edit'].setupResizeEditor({
            main: main,
            editor: editor,
            curations: curations,
            supportItems: supportItems
        });

        new Hatena.Diary.Pages.Admin['user-blog-edit'].AmazonSearch({
            container: $('#editor-amazon-search')
        });

        // åˆå¿ƒè€…ã‚¿ãƒ–ãŒã‚ã‚‹ãªã‚‰ã€è‡ªå‹•çš„ã«åˆå¿ƒè€…ã‚¿ãƒ–ã‚’è¡¨ç¤ºã™ã‚‹
        var $beginnerTab = $('.curation-bar-itemlist .beginner');
        if ( $beginnerTab.length > 0 ) {
            if ( ! $beginnerTab.hasClass('active') ) {
                $beginnerTab.trigger('click');
            }
            $('.twitter-open-button').click ( function () {
                $('.curation-bar-itemlist .twitter').trigger('click');
                return false;
            });
        }

        if ($('#editor-twitter').hasClass('enabled')) {
            new Hatena.Diary.Pages.Admin['user-blog-edit'].Twitter({
                container: $('#editor-twitter')
            });
        }

        new Hatena.Diary.Pages.Admin['user-blog-edit'].HatenaBookmark({
            container: $('#editor-hatena-bookmark')
        });

        Hatena.Diary.Pages.Admin['user-blog-edit'].Fotolife.init();
        Hatena.Diary.Pages.Admin['user-blog-edit'].Paint.init();

        if ($('#editor-itunes.enabled').get(0)) {
            new Hatena.Diary.Pages.Admin['user-blog-edit'].Itunes({
                container: $('#editor-itunes')
            });
        }

        if ($('#editor-archive.enabled').get(0)) {
            new Hatena.Diary.Pages.Admin['user-blog-edit'].Archive({
                container: $('#editor-archive')
            });
        }

        if ($('#editor-instagram.enabled').get(0)) {
            new Hatena.Diary.Pages.Admin['user-blog-edit'].Instagram({
                container: $('#editor-instagram')
            });
        }

        if ($('#editor-evernote.enabled').get(0)) {
            new Hatena.Diary.Pages.Admin['user-blog-edit'].Evernote({
                container: $('#editor-evernote')
            });
        }

        if ($('#editor-pixiv.enabled').get(0)) {
            new Hatena.Diary.Pages.Admin['user-blog-edit'].Pixiv({
                container: $('#editor-pixiv')
            });
        }

        new Hatena.Diary.Pages.Admin['user-blog-edit'].Miil({
            container: $('#editor-miil')
        });

        new Hatena.Diary.Pages.Admin['user-blog-edit'].Gourmet({
            container: $('#editor-gourmet')
        });

        new Hatena.Diary.Pages.Admin['user-blog-edit'].Nicovideo({
            container: $('#editor-nicovideo')
        });

        new Hatena.Diary.Pages.Admin['user-blog-edit'].Gist({
            container: $('#editor-gist')
        });

        new Hatena.Diary.Pages.Admin['user-blog-edit'].Flickr({
            container: $('#editor-flickr')
        });

        if ($('.promotion-entry').get(0)) {
            new Hatena.Diary.Pages.Admin['user-blog-edit'].Promotion({
                $element: $('.promotion-entry-container'),
                $buttons: $('.promotion-button'),
                $cancelButtons: $('.promotion-cancel-button'),
                $pager: $('.promotion-pager-markers')
            });
        }

        Hatena.Diary.Pages.Admin['user-blog-edit'].setupEditorSidebarHome();

        Hatena.Diary.Pages.Admin['user-blog-edit'].setupOgDescriptionInput(editor);

        var embedBox = new Hatena.Diary.Pages.Admin['user-blog-edit'].EmbedBox({
            $container: $('.js-editor-embed-box')
        });

        // URLãŒpasteã•ã‚Œã‚‹ã¨ã‚¤ãƒ™ãƒ³ãƒˆç™ºç”Ÿã™ã‚‹
        // ã‚¤ãƒ™ãƒ³ãƒˆæ‹¾ã£ã¦URLè²¼ã‚Šä»˜ã‘ãƒœãƒƒã‚¯ã‚¹ã‚’é–‹ã
        // ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã•ã‚ŒãŸã‚‰URLã‚’ã‚¨ãƒ‡ã‚£ã‚¿ã«æŒ¿å…¥
        // ã‚ªãƒ—ãƒˆã‚¢ã‚¦ãƒˆã•ã‚Œã¦ã‚‹ã¨ãã‚‚ï¼Œãã®ã¾ã¾URLã‚’ã‚¨ãƒ‡ã‚£ã‚¿ã«æŒ¿å…¥
        $(editor).on('paste-url', function(event, url) {
            if (embedBox.isEnabledOnPasteURL()) {
                embedBox.setURL(url);
                var session = embedBox.show();
                embedBox.requestPreview();
                session.fail(function() {
                    editor.insert(url);
                });
                Hatena.Diary.trackEvent('EmbedBox.showFromPaste');
            } else {
                editor.insert(url);
            }
        });

        Hatena.Diary.SocializeBox.setup();
    };

    Hatena.Diary.Pages.Admin['user-blog-edit'].setupEditorSidebarHome = function() {

        Hatena.Diary.Pages.Admin['user-blog-edit'].setupEditorSidebarHome.setupEditMode();

        Hatena.Diary.Pages.Admin['user-blog-edit'].setupEditorSidebarHome.setupButtons();

        Hatena.Diary.Pages.Admin['user-blog-edit'].setupEditorSidebarHome.setupButtonActive();
    };

    Hatena.Diary.Pages.Admin['user-blog-edit'].setupEditorSidebarHome.setupEditMode = function() {
        var $home = $('#editor-home');

        $home.on('click', 'button.toggle-edit-mode', function(event) {
            var $button = $(this);

            if ($button.text().match(Hatena.Locale.text('edit_tab'))) {
                $button.text(Hatena.Locale.text('done'));
            } else {
                $button.text(Hatena.Locale.text('edit_tab'));
            }

            $home.find('.config').slideToggle(300);
        });
    };

    // ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆãƒœã‚¿ãƒ³ã‚’é…ç½®ã™ã‚‹ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ãŒå¤‰åŒ–ã—ãŸã‚‰è¨˜éŒ²
    Hatena.Diary.Pages.Admin['user-blog-edit'].setupEditorSidebarHome.setupButtons = function () {

        var $home = $('#editor-home');
        $home.on('change', 'input', function(event) {
            var $input = $(this);
            var $service = $input.closest('.service');
            var service_id = $service.attr('data-service-id');

            var show = $input.prop('checked') ? 1 : 0;

            $.ajax({
                url: 'edit_sidebar_button',
                type: 'POST',
                data: {
                    service_id: service_id,
                    show: show,
                    rkm: Hatena.Diary.data('rkm'),
                    rkc: Hatena.Diary.data('rkc')
                }
            }).done(function(res) {
                $('.curation-bar-itemlist').replaceWith(res);
            });
        });
    };

    // ã‚µãƒ¼ãƒ“ã‚¹åã«ãƒ›ãƒãƒ¼ã—ãŸã¨ãã‚¢ã‚¤ã‚³ãƒ³ã«ã‚‚è‰²ã¤ã‘ã‚‹
    Hatena.Diary.Pages.Admin['user-blog-edit'].setupEditorSidebarHome.setupButtonActive = function () {
        var $home = $('#editor-home');
        $home.on('mouseenter', '.about', function() {
            var $about = $(this);
            $about.find('.curation-itemlist').addClass('active');
        }).on('mouseleave', '.about', function() {
            var $about = $(this);
            $about.find('.curation-itemlist').removeClass('active');
        });
    };

    Hatena.Diary.Pages.Admin['user-blog-edit'].setupResizeEditor = function (args) {
        var main         = args.main;
        var editor       = args.editor;
        var supportItems = args.supportItems;
        var curations    = args.curations;
        if (!main) { return }

        $(window).resize(_.throttle(function () {
            var mainHeight = $(window).height() - main.offset().top;
            var buttonsHeight = 100;
            editor.setHeight(mainHeight - buttonsHeight);

            curations.height(mainHeight);
        })).resize();
    };

    // ç·¨é›†ã‚µã‚¤ãƒ‰ãƒãƒ¼ã®é–‹é–‰ï¼Œã‚µãƒ¼ãƒ“ã‚¹ã®åˆ‡ã‚Šæ›¿ãˆï¼Œconfigã«ä¿å­˜
    // publicãªãƒ¡ã‚½ãƒƒãƒ‰ã¯å¤–ã‹ã‚‰å‘¼ã‚“ã§ã‚‚ã‚ˆã„
    Hatena.Diary.Pages.Admin['user-blog-edit'].EditorSidebar = {
        setup: function() {         // public
            this.$editor = $('#editor');
            this.$container = $('#editor-support-container');
            this.$services = this.$container.find('.services');
            this.$header = this.$container.find('.header');
            this.$footer = this.$container.find('.footer');

            this.bindEvents();
            this.restoreLastStatus();
        },
        bindEvents: function() {
            var self = this;

            self.$container.on('click', '.curation-bar-toggle', function(event) {
                self.toggle();
                return false;
            });

            self.$container.on('click', '[data-support-type]', function(event) {
                var clickedType = $(this).attr('data-support-type');
                self.openByType(clickedType);
                return false;
            });

            $(window).resize(_.throttle(function () {
                var mainHeight = $(window).height() - $('#editor-main').offset().top;
                self.$services.height(
                    mainHeight -
                        self.$header.outerHeight(true) -
                        (self.$services.outerHeight(true) - self.$services.height()) * 2
                );
            })).resize();

        },
        restoreLastStatus: function() {
            var lastStatus = this.$editor.attr('data-support-type');

            this.openByType(lastStatus);
        },
        isOpening: function() {
            return $(document.body).hasClass('support-shown');
        },
        toggle: function() {        // public
            if (this.isOpening()) {
                this.close();
            } else {
                this.openByType('editor-home');
            }
        },
        openByType: function(type) { // public
            if (!type) {
                this.close();
                return;
            }
            var $content = this.$container.find('#' + type);
            if (!$content.get(0)) return this.close();

            // è¡¨ç¤ºä¸­ã®è¦ç´ æ¶ˆã™
            var $previous_button = this.$container.find('.curation-itemlist.active');
            $previous_button.removeClass('active');
            $previous_button.removeClass($previous_button.attr('data-icon-class-when-active'));
            $previous_button.addClass($previous_button.attr('data-icon-class'));

            this.$container.find('.curation-tab-content').hide();

            // è¡¨ç¤º
            $(document.body).addClass('support-shown');

            var $button = this.$container.find('.curation-itemlist[data-support-type=' + type + ']');
            $button.addClass('active');
            $button.removeClass($button.attr('data-icon-class'));
            $button.addClass($button.attr('data-icon-class-when-active'));

            $content.show();
            $content.triggerHandler('show');

            this.save(type);
        },
        close: function() {         // public
            $(document.body).removeClass('support-shown');

            var $previous_button = this.$container.find('.curation-itemlist.active');
            $previous_button.removeClass('active');
            $previous_button.removeClass($previous_button.attr('data-icon-class-when-active'));
            $previous_button.addClass($previous_button.attr('data-icon-class'));

            this.save('0');
        },
        save: function(value) {
            $(window).trigger('resize');

            Hatena.Diary.Pages.Admin['*'].saveBlogConfig('support', value);
        }
    };

    Hatena.Diary.Pages.Admin['user-blog-edit'].setupGooglePicker = function() {
        var developerKey    = 'AIzaSyBT5jC9eFqTXg7df8nRpVEd-oRuOm5nfHA';
        var clientId        = '900568370540-qrvm1v1gtndg5krpn3mgjvfm28rontj0.apps.googleusercontent.com';
        var scope           = ['https://www.googleapis.com/auth/photos'];
        var pickerApiLoaded = false;
        var oauthToken;

        // googlePickerApiã‚’ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ï¼googlePickerã‚’åˆ©ç”¨ã™ã‚‹ã«ã¯ï¼Œã¾ãšã“ã‚Œã§Apiã‚’ãƒ­ãƒ¼ãƒ‰ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ï¼
        // oauthèªè¨¼ãŒå¿…è¦ãªã„pickerã§ã‚ã‚Œã°ï¼Œã“ã‚Œã‚’å‘¼ã¶ã ã‘ã§åˆ©ç”¨ã§ãã‚‹ï¼
        var googlePickerApiLoad = function () {
            var d = new $.Deferred();

            // æ—¢ã«ãƒ­ãƒ¼ãƒ‰æ¸ˆã¿ã®å ´åˆã¯å†ã³ãƒ­ãƒ¼ãƒ‰ã—ãªã„
            if (pickerApiLoaded) {
                d.resolve();
            } else {
                gapi.load( 'picker', {'callback': function() {
                    pickerApiLoaded = true;
                    d.resolve();
                }});
            }

            return d.promise();
        };
        // googlePickerã®oAuthèªè¨¼ãŒå¿…è¦ãªå ´åˆã¯ã“ã‚Œã‚’å‘¼ã¶ï¼
        var googlePickerApiAuth = function () {
            var d = new $.Deferred();

            // æ—¢ã«ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã‚’å¾—ã¦ã„ã‚‹å ´åˆã¯å†ã³èªè¨¼ã—ãªã„ï¼
            if (oauthToken) {
                d.resolve();
            } else {
                gapi.load( 'auth', {'callback': d.resolve} );
            }

            return d.promise();
        };
        // ãƒ¦ãƒ¼ã‚¶èªè¨¼ç”»é¢ã‚’å‡ºã™å ´åˆã«ã“ã‚Œã‚’å‘¼ã¶ï¼
        var googlePickerUserAuth = function () {
            var d = new $.Deferred();

            // æ—¢ã«ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã‚’å¾—ã¦ã„ã‚‹å ´åˆã¯å†ã³èªè¨¼ã—ãªã„ï¼
            if (oauthToken) {
                d.resolve(oauthToken, developerKey);
            } else {
                window.gapi.auth.authorize(
                    {
                        'client_id' : clientId,
                        'scope'     : scope,
                        'immediate' : false
                    },
                    function (authResult) {
                        if (authResult && !authResult.error) {
                            oauthToken = authResult.access_token;
                            d.resolve(oauthToken, developerKey);
                        }
                });
            }

            return d.promise();
        };

        // pickeré–‹ããƒœã‚¿ãƒ³æŠ¼ã•ã‚Œã‚‹ã¨ã“ã‚ŒãŒå‘¼ã°ã‚Œã¾ã™
        // $self: ã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸãƒœã‚¿ãƒ³
        // createBuilder: builderã‚’ä½œã£ã¦è¿”ã™ ãƒœã‚¿ãƒ³ã”ã¨ã«æœ‰åŠ¹ã«ã™ã‚‹ã‚µãƒ¼ãƒ“ã‚¹åˆ‡ã‚Šæ›¿ãˆã‚‹ãŸã‚ã«ã“ã“ã‚’ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã¿ãŸã„ã«ã—ã¦ã‚‹
        var clicked = function($self, createBuilder) {
            $self.prop('disabled', true);

            var googlePickerCallback = function (res) {
                $self.prop('disabled', false);
                Hatena.Diary.LOG([ 'googlePickerCallback', res ]);
                if (res.action !== google.picker.Action.PICKED) return;

                var editor = Hatena.Diary.Editor.Support.currentEditor;

                var lines = [];
                for (var i = 0, len = res.docs.length; i < len; i++) {
                    var doc = res.docs[i];

                    var html;
                    var div;
                    if (doc.type === 'video') {
                        // youtubeå‹•ç”»ã®URLã‚’ "/embed/***" å½¢å¼ã«å¤‰æ›
                        // "/v/***" å½¢å¼ã ã¨cwsãƒ•ã‚¡ã‚¤ãƒ«(åœ§ç¸®flashãƒ•ã‚¡ã‚¤ãƒ«)ãŒè¿”ã£ã¦ãã‚‹ãŒ
                        // flashã«å¯¾å¿œã—ã¦ã„ãªã„ãƒ–ãƒ©ã‚¦ã‚¶ã ã¨è¬ãƒ•ã‚¡ã‚¤ãƒ«ãŒãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã‚‹äº‹ã«ãªã‚‹
                        doc.embedUrl = Hatena.Diary.Util.migrateOldStyleYoutubeURL(doc.embedUrl);

                        html = $('<div/>').append(
                            $('<iframe width="420" height="315" frameborder="0" allowfullscreen></iframe>').
                                attr('src', doc.embedUrl),
                            $('<br/>'),
                            $('<a/>').attr('href', doc.url).text(doc.name)
                        ).html();
                    } else if (doc.type === 'photo') {
                        div = $('<div/>');

                        var url = doc.thumbnails[doc.thumbnails.length - 1].url;
                        // if (url.match(/\/s\d+\/[^\/+]$/)) {
                        //     // URLå†…ã«s+æ•°å­—
                        //     // /s400/ â†’ /s1280/
                        //     url = url.replace(/\/s\d+\//, '/s1280/');
                        // } else {
                        //     // /s1280/aaa.jpg
                        //     var fragments = url.split(/\//);
                        //     fragments.splice(fragments.length - 1, 0, 's1280');
                        //     url = fragments.join('/');
                        // }

                        var img = $('<img/>').addClass('magnifiable').attr({src: url, itemprop: 'image'});
                        var span = $('<span/>').attr({itemtype: 'http://schema.org/Photograph', itemscope: 'itemscope'});
                        div.append(span.append(img));

                        html = div.html();
                    } else if (doc.embedUrl) {
                        html = $('<div/>').append(
                            $('<iframe width="425" height="350" frameborder="0" scrolling="no" marginheight="0" marginwidth="0"></iframe>').
                                attr('src', doc.embedUrl),
                            $('<br/>'),
                            $('<a/>').attr('href', doc.url).text(doc.name)
                        ).html();
                    } else {
                        div = $('<div/>');
                        var thumbnail, icon, link;
                        var thumbnailUrl = doc.thumbnails && doc.thumbnails[doc.thumbnails.length - 1].url;
                        if (thumbnailUrl) {
                            thumbnail = $('<img/>').attr({ src: thumbnailUrl, alt: doc.name || '' });
                            if (doc.url) {
                                thumbnail = $('<a/>').attr('href', doc.url).append(thumbnail);
                            }
                        } else if (doc.iconUrl) {
                            icon = $('<img/>').attr({ src: doc.iconUrl, alt: '' });
                        }
                        if (doc.name && doc.url) {
                            link = $('<a/>').attr('href', doc.url).text(doc.name);
                        }

                        if (thumbnail) div.append(thumbnail);
                        if (thumbnail && link) div.append($('<br/>'));
                        if (icon) div.append(icon);
                        if (link) div.append(link);

                        html = div.html();
                    }

                    lines.push(html);
                }
                // IE9ã§Google Pickerã‹ã‚‰æŒ¿å…¥ã—ã‚ˆã†ã¨ã™ã‚‹ã¨
                // ã€Œinternet exploreã¯ã‚¯ãƒ­ã‚¹ã‚µã‚¤ãƒˆã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’é˜²æ­¢ã™ã‚‹ãŸã‚ã«ã€ã“ã®ãƒšãƒ¼ã‚¸ã‚’å¤‰æ›´ã—ã¾ã—ãŸã€
                // ã¨è¡¨ç¤ºã•ã‚Œã¦æŒ¿å…¥ã§ããªã„ã®ã§ (tinymce.focus()ã§ããªãã¦ã€doc.selection.createRange()ã§è½ã¡ã‚‹)
                // ä¸€æ—¦bodyã«focusã‚’å½“ã¦ã¦ã‹ã‚‰æŒ¿å…¥ã™ã‚‹
                if (navigator.userAgent.indexOf('MSIE') >= 0 && $('#syntax').val() === 'html') {
                    $('body').trigger('focus');
                }
                editor.insertLines(lines);
            };

            var launchGooglePicker = function () {
                var builder = createBuilder();
                    builder.setCallback(googlePickerCallback);
                    builder.setOrigin( (Hatena.Diary.Location.param('editinplace')) ?
                            Hatena.Diary.data('blogs-uri-base') : Hatena.Diary.data('admin-domain') );

                var picker = builder.build();
                picker.setVisible(true);
            };

            if (typeof google === 'undefined') {
                $('<script src="http://www.google.com/jsapi"></script>').appendTo(document.getElementsByTagName('head')[0]);
                var googleTimer = setInterval(function () {
                    if (typeof google === 'undefined') return;
                    clearTimeout(googleTimer);

                    launchGooglePicker();
                }, 20);
            } else {
                launchGooglePicker();
            }
        };

        // ã‚¿ãƒ–ã‚’è¡¨ç¤ºã—ãŸæ™‚ã«ï¼Œgoogle picker apiã®ãƒ­ãƒ¼ãƒ‰ã‚’è¡Œã†ï¼
        $('#editor-google-picker').on('show', function() {
            googlePickerApiLoad()
                .done( googlePickerApiAuth ); // ãƒ¦ãƒ¼ã‚¶ã®æƒ…å ±ã‚’åˆ©ç”¨ã™ã‚‹ã®ã§authå¿…è¦
        });

        // ãƒ”ãƒƒã‚«ãƒ¼è¡¨ç¤ºãƒœã‚¿ãƒ³ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸæ™‚ã«ï¼Œãƒ¦ãƒ¼ã‚¶ã®èªè¨¼ã‚’è¡Œã†ï¼
        $('#launch-google-picker button').click(function () {
            googlePickerUserAuth()
                .done( function(oauthToken, developerKey) {
                    clicked($(this), function() {
                        var builder;
                        builder = new google.picker.PickerBuilder().
                            enableFeature(google.picker.Feature.MULTISELECT_ENABLED).
                            addView(google.picker.ViewId.PHOTOS).
                            addView(new google.picker.PhotosView().setType('camerasync')).
                            addView(google.picker.ViewId.PHOTO_UPLOAD).
                            addView(google.picker.ViewId.YOUTUBE).
                            addView(google.picker.ViewId.WEBCAM).
                            addView(google.picker.ViewId.VIDEO_SEARCH).
                            addView(google.picker.ViewId.RECENTLY_PICKED).
                            setLocale('ja').
                            setOAuthToken(oauthToken).
                            setDeveloperKey(developerKey);
                        return builder;
                    });
                });
        });

        $('#launch-youtube button').click(function () {
            googlePickerApiLoad()
                .done( function () {
                    clicked($(this), function() {
                        var builder = new google.picker.PickerBuilder().
                            enableFeature(google.picker.Feature.MULTISELECT_ENABLED).
                            setLocale('ja').
                            addView(google.picker.ViewId.VIDEO_SEARCH);
                        return builder;
                    });
                });
        });
    };

    Hatena.Diary.Pages.Admin['user-blog-edit'].Fotolife = {

        defaultFolder: 'Hatena Blog',

        _setupElements : function() {
            this.items                   = this.$container.find('#items');
            this.pasteButton             = this.$container.find('.paste-button');
            this.footerButtons           = this.$container.find('#footer-buttons');
            this.upload                  = this.$container.find('#upload');
            this.editorSupportOperations = this.$container.find('#editor-support-operations');
        },

        _setupUploader : function(upload, uploaderHandler, afterinit) {
            Hatena.Diary.Editor.Uploader.setup(upload, uploaderHandler, afterinit);
        },

        init : function () {
            var self = this;
            if (self.initialized) return;
            self.initialized = true;

            self.$container = $('#editor-fotolife');

            var editor = Hatena.Diary.Editor.Support.currentEditor;

            self._setupElements();
            self.editor = editor;
            self.syntax = $('#syntax').val();

            self.items.delegate('.item', 'click', function (e) {
                $(this).toggleClass('selected');

                if (self.items.find('.selected').length) {
                    self.pasteButton.removeClass('disable').addClass('enable');
                } else {
                    self.pasteButton.removeClass('enable').addClass('disable');
                }
            });

            self.items.delegate('.item', 'dblclick', function (e) {
                $(this).removeClass('selected');

                var attr = (self.syntax == 'html') ? 'data-html' : 'data-syntax';
                var syntax = $(this).attr(attr);

                Hatena.Diary.trackEvent(self.pasteButton.attr('data-track-name'));

                self.editor.insert(syntax);
            });

            self.pasteButton.addClass('disable').click(function () {
                var syntax = self.items.find('.item.selected').map(function () {
                    if (self.syntax == 'html') {
                        return $(this).removeClass('selected').attr('data-html');
                    } else {
                        return $(this).removeClass('selected').attr('data-syntax');
                    }
                }).get().reverse().join("");

                self.editor.insert(syntax);
            });

            var uploaderHandler = function (uploader) {
                Hatena.Diary.Pages.Admin['user-blog-edit'].Fotolife._uploaderHandler.call(self, uploader);
            };

            function afterinit() {
                self.loadInfo();
            }

            self._setupUploader(self.upload, uploaderHandler, afterinit);

            $(window).resize(_.throttle(function () {
                var mainHeight = $(window).height() - $('#editor-main').offset().top;
                self.items.height(
                    mainHeight -
                        self.editorSupportOperations.outerHeight(true) -
                        self.footerButtons.outerHeight(true) -
                        (self.items.outerHeight(true) - self.items.height()) * 2
                );
            })).resize();

            self.load();
        },

        _uploaderHandler : function (uploader) {
            var self = this;
            var item = self.createItem({
                syntax : '',
                html   : '',
                image  : '/images/loading.gif'
            });

            var progress = $('<div class="progress"></div>').appendTo(item);
            var percent = $('<div class="percent">0%</div>').appendTo(progress);
            var bar = $('<div class="bar"></div>').appendTo(progress);

            var lastProgressTimer, lastProgress = 0, updateProgress = function (progress) {
                if (progress > 100) progress = 100;
                bar.width(progress + '%');
                percent.text(Hatena.Locale.text('uploading'));
            };

            uploader.on('error', function (e) {
                clearInterval(lastProgressTimer);
                console.log('upload error');
                item.remove();
                self.showUploadErrorAlert(e);
            });

            uploader.on('disk_full', function (e) {
                self.showDiskFullAlert();
            });

            uploader.on('progress', function (e) {
                // success ãŒç™ºç”Ÿã™ã‚‹ã¾ã§ 100% ã«ã—ãªã„
                var progress = e.percent * 0.9;
                if (e.percent == 100) {
                    clearInterval(lastProgressTimer);
                    lastProgressTimer = setInterval(function () {
                        lastProgress += 0.1;
                        updateProgress(progress + lastProgress);
                    }, 100);
                } else {
                    updateProgress(progress);
                }
            });

            uploader.on('success', function (data) {
                clearInterval(lastProgressTimer);
                item.replaceWith(self.createItem(data));
                self.editor.insert(
                    self.syntax == 'html' ? data.html : data.syntax
                );
                self.loadInfo();
            });

            self.items.prepend(item);
        },

        listenToUploader: function (uploader) {
            this._uploaderHandler(uploader);
        },

        loadInfo : function () {
            var self = this;

            $.ajax({
                url : "/f/" + Hatena.Diary.data('name') + "/api/info?mode=detail",
                type : "get",
                cache: false,
                dataType : 'json',
                success : function (res) {
                    if (res.error) return Hatena.Diary.BUG(res.error);

                    res.folder_list.push({ status : 'private', folder : 'Hatena Blog' });
                    res.folder_list.push({ status : res.is_private ? 'private' : 'public', folder : ''  });

                    var folderMap = {};
                    var folderList = [];
                    for (var i = 0, it; (it = res.folder_list[i]); i++) {
                        folderMap[it.folder] = it;
                        folderList.push(it.folder);
                    }

                    folderList.sort();

                    var select = $('.js-folder-selector', Hatena.Diary.Editor.Uploader.document).empty();

                    for (var i = 0, len = folderList.length; i < len; i++) {
                        if (folderList[i] === folderList[i-1]) continue;
                        var it = folderMap[ folderList[i] ];

                        var is_private = res.is_private || it.status == 'private';
                        var option = $('<option/>').
                                attr('value', it.folder).
                                text( (it.folder || Hatena.Locale.text('fotolife.folder.top')) + (is_private ? ' (private)' : '')).
                                appendTo(select);

                        if (it.folder == 'Hatena Blog') {
                            option.prop('selected', true);
                        }
                    }

                    select.change(function () {
                        self.load({
                            folder : $(this).val()
                        });
                    });

                    select.parent().show();

                    self.renderDiskSizeGraph(+res.disksize, +res.maxdisksize);
                    $(window).resize();
                },

                error : Hatena.Diary.REPORT_BUG('/api/support/fotolife')
            });
        },
        renderDiskSizeGraph: function(size, maxsize) {
            var self = this;
            var $container = self.$container.find('.js-disksize-container');
            var $box = $container.find('.js-box');
            var $bar = $container.find('.js-bar');
            var $rate = $container.find('.js-rate');

            var rate = size / maxsize;
            var rate_string = Math.floor(rate * 100) + '%';

            $rate.text(rate_string);

            $bar.css('width', rate_string);

            var label = $box.attr('data-label') + rate_string;
            $box.attr('original-title', label);

            $container.show();
        },
        showDiskFullAlert: function(){
            var self = this;
            var $container = self.$container.find('.js-disksize-container');
            var $alert = $container.find('.js-disk-full-alert');
            $alert.show();
            $(window).resize();
            Hatena.Diary.trackEvent('fotolife.full_alert.show');
        },

        showUploadErrorAlert: function(e){
            var self = this;
            var $container = self.$container.find('.js-disksize-container');
            var $alert;
            if (e.name === 'TypeError')  {
                $alert = $container.find('.js-upload-type-alert');
            }
            else {
                $alert = $container.find('.js-upload-fail-alert');
            }
            $alert.show();
            $(window).resize();
            Hatena.Diary.trackEvent('fotolife.upload_error.show');
        },

        createItem : function (it) {
            return $('<div class="item"/>').attr({
                'data-syntax' : it.syntax.replace(/:image/, ':plain'),
                'data-html'   : it.html,
                'style'       : 'background-image: url("' + it.image + '")'
            });
        },

        load : function (opts) {
            var self = this;
            if (!opts) opts = {};
            if (!opts.page) opts.page = 1;
            if (typeof opts.folder != 'string') opts.folder = self.defaultFolder;

            Hatena.Diary.LOG(['load', opts.folder, opts.page]);

            var container = self.items;

            if (opts.page == 1) {
                container.empty();
            }

            $.ajax({
                url : '/api/support/fotolife',
                type : "get",
                cache: false,
                dataType : 'json',
                data : {
                    folder : opts.folder,
                    page   : opts.page
                },
                success : function (res) {
                    Hatena.Diary.LOG(res);
                    if (res.error) return Hatena.Diary.BUG(res.error);

                    var items = res.items;

                    for (var i = 0, it; (it = items[i]); i++) {
                        self.createItem(it).appendTo(container);
                    }

                    if (!res.last) {
                        $('<div class="item pager-next"/>').
                            click(function () {
                                $(this).remove();
                                self.load({
                                    folder : opts.folder,
                                    page : opts.page + 1
                                });
                                return false;
                            }).
                            appendTo(container);
                    }
                },

                error : Hatena.Diary.REPORT_BUG('/api/support/fotolife')
            });
        }
    };

    Hatena.Diary.Pages.Admin['user-blog-edit'].Paint = {
        defaultFolder: 'Hatena Blog Illust',
        _setupElements: function() {
            this.items                   = $('#paint-items');
            this.pasteButton             = $('#paint-button-paste');
            this.footerButtons           = $('#paint-footer-buttons');
            this.upload                  = $('#paint-upload');
            this.editorSupportOperations = $('#paint-editor-support-operations');
        },
        _setupUploader : function(upload, uploaderHandler, afterinit) {
            Hatena.Diary.Editor.Uploader.setupForPaint(upload, uploaderHandler, afterinit);
        },
        isSupportedCanvas: function() {
            return !!document.createElement('canvas').getContext;
        },
        init: function() {
            var self = this;
            if (!self.isSupportedCanvas()) {
                $('#editor-paint').children().toggle();
                return;
            }
            Hatena.Diary.Pages.Admin['user-blog-edit'].Fotolife.init.call(self);
        },
        load: Hatena.Diary.Pages.Admin['user-blog-edit'].Fotolife.load,
        loadInfo: function() { /* Do nothing. */ },
        createItem: Hatena.Diary.Pages.Admin['user-blog-edit'].Fotolife.createItem
    };

    Hatena.Diary.Pages.Admin['user-blog-edit'].CategoryEditor = function () { this.init.apply(this, arguments) };
    Hatena.Diary.Pages.Admin['user-blog-edit'].CategoryEditor.prototype = {
        init: function (form, element) {
            this.form = $(form);
            this.element = $(element);
            this.input = this.element.find('input[type="text"]');
            this.bind();
        },
        bind: function () {
            var categoryEditor = this;

            this.form.bind('backup-restore-params', function (e, params) {
                if (params['category']) {
                    $.each(params['category'], function () {
                        categoryEditor.append('' + this);
                    });
                }
            });

            this.element.delegate('.remove-category', 'click', function () {
                $(this).closest('[data-category-name]').remove();
                categoryEditor.updateExistingCategories();
            });

            this.element.click(function (e) {
                if ($(e.target).is(categoryEditor.element)) {
                    categoryEditor.input.focus();
                }
            });

            $('#existing-categories').delegate('[data-category-name]', 'click', function() {
                var func = $(this).hasClass('selected') ? 'remove' : 'append';
                categoryEditor[func]($(this).attr('data-category-name'));
            });

            $('#new-category').click(function() {
                var category = prompt(categoryEditor.element.attr('data-new-category-prompt'));
                categoryEditor.append(category);
            });

            this.input.autocomplete({
                source: function (request, response) {
                    var term = request.term;

                    var categories = $('#existing-categories [data-category-name]')
                            .map(function () { return $(this).attr('data-category-name') })
                            .filter(function () { return this.indexOf(term) === 0 });

                    var newCategory = {
                        value: null,
                        label: categoryEditor.element.attr('data-new-category-label')
                    };

                    response(
                        categories.toArray().concat(term.length > 0 ? [] : [ newCategory ])
                    );
                },
                select: function (e, ui) {
                    var category;

                    if (ui.item.value) {
                        category = ui.item.value;
                    } else if (ui.item.value === null) {
                        category = prompt(categoryEditor.element.attr('data-new-category-prompt'));
                    }

                    if (category) {
                        categoryEditor.append(category);
                        $(e.target).val('');
                        e.stopPropagation();
                        e.preventDefault();
                    }
                },
                minLength: 1,
                appendTo: this.element.parent()
            });

            this.input.keydown(function (e) {
                var input = $(this);
                if (keyString(e) == 'RET') {
                    if (input.val().length) {
                        categoryEditor.input.autocomplete('close');
                        categoryEditor.append(input.val());
                        input.val('');
                    }
                    return false;
                } else if (keyString(e) == 'BS' && input.val().length === 0) {
                    categoryEditor.remove();
                }
            });

            this.form.submit(function (e) {
                if (categoryEditor.input.val()) {
                    categoryEditor.append(categoryEditor.input.val());
                    categoryEditor.input.val('');
                }
            });

            $(window).resize(_.throttle(function () {
                categoryEditor.resize();
            }, 100));
            categoryEditor.resize();
        },
        resize: function () {
            $("#existing-categories").height(
                $("#editor-category").outerHeight(true) - $('.entry-categories-top').outerHeight(true) - 16
            );
        },
        append: function (name) {
            if (!name) return;

            var existing = this.element.find('[data-category-name]').filter(
                function () { return $(this).attr('data-category-name') == name }
            );
            if (existing.length) {
                existing.insertBefore('#select-category');
            } else {
                var html = this.element.attr('data-category-html');
                var elem = $(html).attr('data-category-name', name);
                elem.find('.name').text(name);
                elem.append($('<input type="hidden" name="category" data-with-backup>').val(name));
                elem.insertBefore('#select-category');
            }
            this.appendToExistingCategories(name);
            this.updateExistingCategories();

        },
        appendToExistingCategories: function (name) {
            var isDuplicated = $('#existing-categories [data-category-name]').filter(
                function() { return $(this).attr('data-category-name') == name }
            ).length;
            if (!isDuplicated) {
                $('<li/>')
                    .attr('data-category-name', name)
                    .text(name)
                    .appendTo('#existing-categories');
            }
        },
        updateExistingCategories: function() {
            var categoryMap = {};
            this.element.find('[data-category-name]').each(function() {
                categoryMap[$(this).attr('data-category-name')] = 1;
            });
            $('#existing-categories [data-category-name]').each(function() {
                $(this).toggleClass(
                    'selected',
                    !!categoryMap[$(this).attr('data-category-name')]
                );
            });
        },
        remove: function (dataCategoryName) {
            var targetToDelete = (typeof dataCategoryName === 'undefined') ?
                    this.element.find('[data-category-name]:last') :
                    this.element.find('[data-category-name]')
                    .filter(function() {
                        return $(this).attr('data-category-name') == dataCategoryName;
                    });
            targetToDelete.remove();
            this.updateExistingCategories();
        }
    };

    Hatena.Diary.Pages.Admin['user-blog-edit'].DateTimeEditor = function () { this.init.apply(this, arguments) };
    Hatena.Diary.Pages.Admin['user-blog-edit'].DateTimeEditor.prototype = {
        init: function (form, element) {
            this.form = $(form);
            this.element = $(element);
            this.element.hide();
            this.datetimepicker = $('<div class="datetime-input">' +
                                    '<input type="text" id="datetime-input-date" > ' +
                                    '<input type="text" id="datetime-input-time" ></div>');
            this.datepicker = this.datetimepicker.find('#datetime-input-date').attr('placeholder', this.todayString());
            this.timepicker = this.datetimepicker.find('#datetime-input-time').attr('placeholder', '00:00');

            this.element.after(this.datetimepicker);

            this.bind();
            this.load();
        },
        bind: function () {
            var self = this;

            this.form.bind('backup-restore-params', function (e, params) {
                self.load();
            });

            var lang = document.documentElement.getAttribute('lang');
            $.datepicker.setDefaults($.datepicker.regional[lang == 'en' ? '' : lang]);
            this.datepicker.datepicker({
                dateFormat: $.datepicker.W3C,
                onSelect: function () {
                    self.datepicker.change();
                    if (self.timepicker.val() === '') {
                        self.timepicker.val('00:00').focus().change();
                    }
                }
            });

            var timeOptions = [];
            for (var i = 0; i < 24; ++i) {
                timeOptions.push(('0' + i.toString()).slice(-2) + ':00');
                timeOptions.push(('0' + i.toString()).slice(-2) + ':30');
            }
            this.timepicker.autocomplete({
                source: function (request, response) {
                    if (!request.term.match(/^\d{1,2}:\d{1,2}:(\d{1,2})?$/)) {
                        response(timeOptions);
                    }
                },
                select: function (e, ui) {
                    if (ui.item.value) {
                        self.timepicker.val(ui.item.value).change();
                        if (self.datepicker.val() === '') {
                            self.datepicker.val(self.todayString());
                        }
                    }
                },
                minLength: 0,
                appendTo: this.element.parent()
            });
            this.timepicker.focus(function () {
                $(this).autocomplete('search', '');
            });

            this.datepicker.change(function () {
                self.date = $(this).val();
                self.updateValue();
            });

            this.timepicker.change(function () {
                var time = $(this).val();

                if (self.checkTime(time)) {
                    var m = time.match(/^(\d{1,2}):(\d{1,2})(?::(\d{1,2}))?$/);
                    self.time = $([1, 2, 3]).map(function () {
                        return ('0' + (m[this] || '00')).slice(-2);
                    }).toArray().join(':');
                } else {
                    self.time = null;
                }

                self.updateValue();
            });

            this.form.submit(function (e) {
                self.updateValue();
            });
        },
        load: function () {
            var self = this;
            var m = this.element.val().match(/^(\d{4}-\d{2}-\d{2})T(\d{2}:\d{2}:\d{2})\+(\d{2}:\d{2})$/);
            if (m) {
                this.datepicker.val(this.date = m[1]);
                this.time = m[2];
                var time = this.time.replace(/:00$/, '');
                this.timepicker.val(time);
                this.timezone = m[3];
            }
        },
        todayString: function () {
            var now = new Date();
            var date = [];
            date.push((1900 + now.getYear()).toString());
            date.push(('0' + (1 + now.getMonth()).toString()).slice(-2));
            date.push(('0' + now.getDate().toString()).slice(-2));
            return date.join('-');
        },
        checkTime: function (time) {
            var match = time.match(/^(\d{1,2}):(\d{1,2})(?::(\d{1,2}))?$/);
            if (match) {
                var h = parseInt(match[1], 10);
                var m = parseInt(match[2], 10);
                var s = parseInt(match[3] || '0', 10);
                return 0 <= h && h < 24 && 0 <= m && m < 60 && 0 <= s && s < 60;
            }
            return false;
        },
        updateValue: function () {
            if (this.date) {
                // æ™‚åˆ»ãŒè¨­å®šã•ã‚Œã¦ã„ãªã„ã¨ã 00:00 ã«ã™ã‚‹
                if (!this.time) this.time = '00:00';

                // timezone ãŒã‚ã£ãŸã‚‰è¨­å®šã™ã‚‹
                var timezone = '';
                if (this.timezone) timezone = '+' + this.timezone;

                this.element.val(this.date + 'T' + this.time + timezone);
            } else {
                this.element.val('');
            }

            $(this).triggerHandler('updated');
        }
    };

    Hatena.Diary.Pages.Admin['user-blog-edit'].observeForScheduledEntry = function(datetimeEditor) {
        var $input = $('#datetime-input');
        var $checkbox = $('.js-scheduled-entry-checkbox');
        var $defaultButtons = $('.buttons .js-default-button');
        var $scheduledButtons = $('.buttons .js-scheduled-button');
        var $socializeBox = $('.js-socialize-box');

        // æ—¥ä»˜ã‚ã‚‹ã¨ãï¼Œãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹å‡ºã™
        // ãƒã‚§ãƒƒã‚¯ã¤ã„ã¦ã‚‹ã¨ãï¼Œäºˆç´„æŠ•ç¨¿ãƒœã‚¿ãƒ³ã¨ã‚·ã‚§ã‚¢è¨­å®šå‡ºã™
        var watch = function() {
            if ($input.val()) {
                $checkbox.prop('disabled', false);
            } else {
                $checkbox.prop('disabled', true);
            }

            if ($input.val() && $checkbox.prop('checked')) {
                $defaultButtons.hide();
                $scheduledButtons.show();
                $socializeBox.show();
            } else {
                $defaultButtons.show();
                $scheduledButtons.hide();
                $socializeBox.hide();
            }
        };

        $(datetimeEditor).on('updated', watch);
        $checkbox.on('change', watch);
        watch();

        // ãƒ„ã‚¤ãƒƒã‚¿ãƒ¼æ–‡è¨€ã‚’å…¥ã‚Œã‚‹ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒªã‚¢ã‚’ç›£è¦–ã™ã‚‹
        // æ–‡å­—æ•°ã‚ªãƒ¼ãƒãƒ¼ã—ã¦ã„ãŸå ´åˆã¯
        // - ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®è¡¨ç¤º
        // - ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã®disabledã‚’è¡Œã†
        new Hatena.Diary.Pages.Admin['user-blog-edit'].TwitterMessage($('.js-edit-socialize-box-li.twitter'));
    };

    Hatena.Diary.Pages.Admin['user-blog-edit'].TwitterMessage = function () { this.init.apply(this, arguments) };
    Hatena.Diary.Pages.Admin['user-blog-edit'].TwitterMessage.prototype = {
        init: function ($el) {
            this.$el = $el;
            this.$textarea = $el.find('textarea');
            this.$errorMessage = $el.find('.js-twitter-length-error');
            this.$checkBox =  $el.find('input[name="post_to_twitter"]');
            this.bindEvents();
        },
        bindEvents: function () {
            var self = this;
            self.$textarea.keyup(function() {
                if (Hatena.Diary.validationTweetLength(self.$textarea.val()) === false) {
                    self.showErrorMessage();
                    self.disabledCheckBox();
                }
                else {
                    self.hideErrorMessage();
                    self.enabledCheckBox();
                }
            });
        },
        hideErrorMessage: function() {
            this.$errorMessage.hide();
        },
        showErrorMessage: function() {
            this.$errorMessage.show();
        },
        disabledCheckBox: function() {
            this.$checkBox.attr('disabled', true);
        },
        enabledCheckBox: function() {
            this.$checkBox.attr('disabled', false);
        }
    };

    Hatena.Diary.Pages.Admin['user-blog-edit'].OgImageEditor = function () { this.init.apply(this, arguments) };
    Hatena.Diary.Pages.Admin['user-blog-edit'].OgImageEditor.prototype = {
        init: function (form, element) {
            this.$form    = $(form);
            this.$element = $(element);
            this.$input   = this.$element.find('#ogimage-input');
            this.$imgContainer = this.$element.find('#ogimage-img-container');
            this.$current = this.$element.find('.current-og-image');
            this.$remove  = this.$element.find('.remove-og-image');
            this.$items   = this.$form.find('.image-items');
            this.itemTemplate = _.template(this.$form.find('.ogimage-item-template').html());
            this.$indicator = this.$element.find('.indicator');
            this.$reload = this.$element.find('.reload');
            this.$errorMessage = this.$element.find('.error');
            this.isLoading = false;
            this.defaultOgImageURL = this.$element.data('default-ogimage-url');

            this.bindEvents();
            this.getImageSrcs();
        },
        bindEvents: function () {
            var self = this;

            $(window).resize(_.throttle(function () {
                self.reloadItems();
            }, 100));

            self.$element.change( function () {
                self.setOgImage();
            });

            self.$element.on('click', '.image-item', function () {
                self.setOgImageInput(this);
                self.setOgImage();
            });

            self.$input.keydown(function (e) {
                if (keyString(e) === 'RET') {
                    self.setOgImage();
                    return false;
                }
            });

            self.$reload.click( function () {
                self.reloadItems();
            });

            self.$remove.click( function () {
                self.removeCurrentImage();
            });
        },
        setOgImage: function (src) {
            var self = this;
            self.$current.attr('src', self.$input.val());
        },
        removeCurrentImage: function () {
            var self = this;

            // chromeã ã¨src=""ã«ã—ã¦ã‚‚ç”»åƒãŒæ®‹ã£ã¦ã—ã¾ã†ã®ã§imgã‚¿ã‚°ä½œã‚ŠãªãŠã™
            var $image = $('<img>').addClass('current-og-image');
            self.$input.val("");
            self.$current.remove();
            self.$current = $image;
            self.$imgContainer.append($image);
            self.$items.find('.selected').removeClass('selected');
        },
        setOgImageInput: function (item) {
            var self = this;
            var $item = $(item);

            self.$items.find('.selected').removeClass('selected');
            $item.addClass('selected');

            var src = $item.attr('data-image-src');
            self.$input.val(src);
        },
        showItems : function (items) {
            var self = this;
            var source = "";
            _.each(items, function (item) {
                source += self.itemTemplate({
                    item: { image_src: item }
                });
            });
            self.$indicator.before(source);
        },
        reloadItems: function () {
            var self = this;
            if (! self.$element.is(':visible')) return;
            self.removeImageItems();
            self.getImageSrcs();
        },
        getImageSrcs: function () {
            var self   = this;
            var editor = Hatena.Diary.Editor.Support.currentEditor;
            var body   = editor.body.val();

            // æœ¬æ–‡ç©ºã§ã‚‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆç”»åƒã¯å€™è£œã¨ã—ã¦å‡ºã™
            if (!body) {
                self.showItems([self.defaultOgImageURL]);
                return;
            }

            if (self.isLoading) return;

            self.isLoading = true;
            self.$indicator.show();

            $.ajax({
                url: '/api/entry/images',
                type: 'POST',
                dataType: 'json',
                data: {
                    body: body,
                    syntax: $('#syntax').val(),
                    rkm: Hatena.Diary.data('rkm'),
                    rkc: Hatena.Diary.data('rkc')
                }
            }).done(function (items) {
                // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆç”»åƒæœ«å°¾ã«å‡ºã™
                items.push(self.defaultOgImageURL);

                self.showItems(items);
                self.$errorMessage.hide();

                self.setSelectedImage();
            }).fail(function (res) {
                self.failed = true;
                self.$errorMessage.show();
            }).always(function () {
                self.isLoading = false;
                self.$indicator.hide();
            });

        },
        removeImageItems: function () {
            var self = this;
            self.$items.find('.image-item').remove();
        },
        // ã‚¢ã‚¤ã‚­ãƒ£ãƒƒãƒç”»åƒãŒè¨­å®šã•ã‚Œã¦ã„ãŸã‚‰ã€selectedã‚¯ãƒ©ã‚¹ã‚’å½“ã¦ã‚‹
        setSelectedImage: function () {
            var self = this;
            var inputSrc = self.$input.val();
            if ( ! inputSrc ) return;
            if ( self.$items.find('.selected').length > 0 ) return;

            self.$items.find('.image-item').each( function () {
                var $item = $(this);
                var $img = $item.find('.image-container img');
                if ( $img.attr('src') === inputSrc ) {
                    $item.addClass('selected');
                    return false;
                }
            });
        }
    };

    Hatena.Diary.Pages.Admin['user-blog-edit'].AmazonSearch = function () { this.init.apply(this, arguments) };
    Hatena.Diary.Pages.Admin['user-blog-edit'].AmazonSearch.prototype = {
        // args: { container }
        init: function (args) {
            var self = this;

            self.$container = args.container;
            if (!self.$container.get(0)) return;
            self.$categorySelect = self.$container.find('.amazon-search-category');
            self.$keywordInput = self.$container.find('.amazon-search-keyword');
            self.$keywordSubmit = self.$container.find('.amazon-search-keyword-submit');
            self.$itemsContainer = self.$container.find('.amazon-search-items');
            self.itemTemplate = _.template($('.amazon-search-item-template').html());
            self.$indicator = self.$container.find('.indicator');
            self.$pasteButton = self.$container.find('.amazon-search-paste-button');
            self.$layoutType = self.$container.find('.amazon-search-layout-type');
            self.$layoutTypeContainer = self.$container.find('.amazon-search-layout-type-container');
            self.$resultIsEmpty = self.$container.find('.amazon-search-result-is-empty');
            self.$formats = self.$container.find('.amazon-search-formats input[name="amazon-search-format"]');
            self.$formatsContainer = self.$container.find('.amazon-search-formats');
            self.$welcomeMessage = self.$container.find('.amazon-search-welcome');

            self.$header = self.$container.find('.amazon-search-header');
            self.$footer = self.$container.find('.amazon-search-footer');

            self.bindEvents();
            self.resize();

            // æ¤œç´¢ã‚¯ã‚¨ãƒªæŒ‡å®šã•ã‚Œã¦ã„ãŸã‚‰æ¤œç´¢ã™ã‚‹
            if ( self.$keywordInput.val() ) {
                self.$keywordSubmit.click();
            }
        },
        bindEvents: function () {
            var self = this;

            self.$keywordSubmit.click(function (event) {
                self.searchByInput();
                return false;
            });

            self.$categorySelect.change(function (event) {
                self.searchByInput();
                return false;
            });

            self.$keywordInput.keydown(function (event) {
                if (keyString(event) == 'RET') {
                    self.searchByInput();
                    return false;
                }
            });

            self.$keywordInput.focus(function() {
                // ä¸‹ã®è²¼ã‚Šä»˜ã‘ãƒœã‚¿ãƒ³è¡¨ç¤ºã•ã‚Œãªã„ã“ã¨ãŒã‚ã‚‹
                // åŸå› ã‚ã‹ã‚‰ãªã„ã‘ã©ãƒªã‚µã‚¤ã‚ºã—ãŸã‚‰ãƒœã‚¿ãƒ³å‡ºã¦ãã‚‹
                // æ¤œç´¢ãƒœãƒƒã‚¯ã‚¹ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã—ãŸã¨ãã«ãƒ€ãƒ¡æŠ¼ã—ã§ã‚‚ã†1å›ãƒªã‚µã‚¤ã‚º
                setTimeout(function() {
                    self.resize();
                }, 0);
            });

            self.$itemsContainer.delegate('.amazon-search-item', 'click', function (event) {
                if ($(event.target).is('a')) return;
                $(this).toggleClass('selected');

                self.selectedItemsChanged();
            });

            self.$container.delegate('.amazon-search-item', 'dblclick', function (event) {
                if ($(event.target).is('a')) return;
                self.insertAsins([$(this).attr('data-asin')]);
                $(this).removeClass('selected');
                self.selectedItemsChanged();
                Hatena.Diary.trackEvent(self.$pasteButton.attr('data-track-name'));
                return false;
            });

            self.$pasteButton.click(function (event) {
                var asins = [];
                self.$itemsContainer.find('.selected').each(function () {
                    asins.push($(this).attr('data-asin'));
                    $(this).removeClass('selected');
                });
                self.insertAsins(asins);
                self.selectedItemsChanged();
            });

            Hatena.Diary.Util.backupTab({
                $container: self.$formatsContainer,
                key: 'amazon-formats',
                onchange: function($input) {
                    self.$formatsContainer.find('label.selected').removeClass('selected');
                    $input.closest('label').addClass('selected');
                }
            });

            Hatena.Diary.Util.backupTab({
                $container: self.$layoutTypeContainer,
                key: 'amazon-layout',
                onchange: function($input) {
                    self.$itemsContainer.removeClass('layout-thumbnail');
                    self.$itemsContainer.removeClass('layout-list');

                    var layout = $input.val();
                    self.$itemsContainer.addClass('layout-' + layout);

                    // label class
                    self.$layoutTypeContainer.find('label.selected').removeClass('selected');
                    $input.closest('label').addClass('selected');

                    // ãƒªã‚¹ãƒˆè¡¨ç¤ºã®ã¨ãã ã‘tipsyæœ‰åŠ¹ï¼Œã‚µãƒ ãƒã‚¤ãƒ«è¡¨ç¤ºã®ã¨ãã¯å‡ºã•ãªã„
                    self.setTipsyEnabled(layout == 'thumbnail');
                }
            });

            $(window).resize(_.throttle(function () {
                self.resize();
            }, 100));
        },
        setTipsyEnabled: function (enable) {
            var self = this;

            // tipsy-southwestã‚¯ãƒ©ã‚¹ã‚’ä»˜ã‘ãŸã‚Šå¤–ã—ãŸã‚Šã—ã¾ã™

            var $items = self.$itemsContainer.find('.amazon-search-item');
            var className = 'tipsy-southeast';

            if (enable) {
                $items.addClass(className);
            } else {
                $items.removeClass(className);
            }
        },
        resize: function () {
            var self = this;

            var mainHeight = $(window).height();

            var padding = 0;
            padding += parseInt(self.$itemsContainer.css('padding-top'), 10) || 0;
            padding += parseInt(self.$itemsContainer.css('padding-bottom'), 10) || 0;
            self.$itemsContainer.height(
                mainHeight -
                    self.$container.offset().top   -
                    self.$header.outerHeight(true) -
                    self.$footer.outerHeight(true) -
                    padding
            );
        },
        selectedItemsChanged: function() {
            var self = this;

            if (self.$itemsContainer.find('.selected').length > 0) {
                self.$pasteButton.removeClass('disabled').addClass('enabled').prop('disabled', false);
            } else {
                self.$pasteButton.removeClass('enabled').addClass('disabled').prop('disabled', true);
            }
        },
        searchByInput: function() {
            var self = this;

            self.search(self.$keywordInput.val(), self.$categorySelect.find('option:selected').val());
        },
        search: function (keyword, category) {
            var self = this;

            if (typeof keyword != 'string') return false;

            keyword = keyword.replace(/^\s*/, '');
            keyword = keyword.replace(/\s*$/, '');

            if (keyword.length === 0) return false;

            if (self._searchingKeyword == keyword && self._searchingCategory == category) return false;

            // ã“ã“ã¾ã§æ¥ãŸã‚‰æ¤œç´¢é–‹å§‹

            self.$welcomeMessage.addClass('disable');

            if (self._searchDeferred) {
                self._searchDeferred.reject();
            }

            self.ajaxStarted();

            self._searchingKeyword = keyword;
            self._searchingCategory = category;

            var currentAjax;
            var dfd = $.Deferred().done(function() {
            }).fail(function() {
                if (currentAjax) {
                    // ã‚»ãƒƒã‚·ãƒ§ãƒ³çµ‚äº†æ™‚ã«å‰ã®ajaxã‚’ã‚­ãƒ£ãƒ³ã‚»ãƒ«
                    currentAjax.abort();
                }
            }).always(function() {
                self.ajaxFinished();
            });

            self.$itemsContainer.find('.amazon-search-item').remove();

            var searchPage = function(page) {
                self.ajaxStarted();

                currentAjax = $.ajax({
                    url: '/api/amazon',
                    data: {
                        keyword: keyword,
                        category: category,
                        page: page
                    }
                }).done(function (res) {
                    self.showItems(res.items);

                    if (res.page === 1 && res.items.length === 0) {
                        self.$resultIsEmpty.show();
                    } else {
                        self.$resultIsEmpty.hide();
                    }

                    if (!res.has_next) {
                        dfd.resolve();
                        return;
                    }

                    if (res.page >= 5) {
                        dfd.resolve();
                        return;
                    } else {
                        searchPage(res.page + 1);
                    }
                }).fail(function (res) {
                    dfd.reject(res);
                });
            };
            searchPage(1);

            self._searchDeferred = dfd;
        },
        showItems: function (items) {
            var self = this;

            var source = '';
            _.each(items, function (item) {
                source += self.itemTemplate({
                    item: item
                });
            });
            self.$indicator.before(source);

            self.setTipsyEnabled(self.$itemsContainer.hasClass('layout-thumbnail'));
        },
        insertAsins: function (asins) {
            var self = this;

            var suffix = self.$container.find('[name="amazon-search-format"]:checked').val();

            var hatena_syntaxes = _.map(asins, function(asin) {
                return '[asin:' + asin + (suffix.length > 0 ? ':' + suffix : '') + ']';
            });

            var lines = {
                html: hatena_syntaxes,
                hatena: hatena_syntaxes,
                markdown: hatena_syntaxes
            };

            Hatena.Diary.extractSyntax(hatena_syntaxes).done(function(data) {
                if (suffix === 'detail') {
                    lines.html = ['', '<div class="freezed">' + data.html + '</div>', ''];
                } else {
                    lines.html = [data.html];
                }
                Hatena.Diary.EditorConnector.insertLines(lines);
            }).fail(function(error) {
                Hatena.Diary.BUG(error);
                Hatena.Diary.EditorConnector.insertLines(lines);
            });
        },
        ajaxStarted: function () {
            var self = this;

            self.isAjaxing = true;

            self.$keywordSubmit.prop('disabled', true);
            self.$indicator.show();
            self.$resultIsEmpty.hide();
        },
        ajaxFinished: function () {
            var self = this;

            self.isAjaxing = false;

            self.$keywordSubmit.prop('disabled', false);
            self.$indicator.hide();
        }
    };

    Hatena.Diary.Pages.Admin['user-blog-edit'].Twitter = function () { this.init.apply(this, arguments) };
    Hatena.Diary.Pages.Admin['user-blog-edit'].Twitter.prototype = {
        pasteReverseOrder: true,
        // args: { container }
        init: function (args) {
            var self = this;

            self.$container = args.container;
            if (!self.$container.get(0)) return;
            self.$itemsContainer = self.$container.find('.twitter-items');
            self.$indicator = self.$container.find('.indicator');
            self.itemTemplate = _.template($('.twitter-item-template').html());
            self.$pasteButton = self.$container.find('.twitter-paste-button');
            self.$listTypeContainer = self.$container.find('.twitter-list-type-container');
            self.$formatsContainer = self.$container.find('.twitter-formats');
            self.$reloadButton = self.$container.find('.reload');
            self.$errorMessage = self.$container.find('.error');
            self.$detailOnlyMessage = self.$container.find('.twitter-formats-detail-only');
            self.$header = self.$container.find('.twitter-header');
            self.$footer = self.$container.find('.twitter-footer');

            self.bindEvents();
            self.resize();

            self.loadTweets();
        },
        bindEvents: function () {
            var self = this;

            $(window).resize(_.throttle(function () {
                self.resize();
                self.loadTweets();
            }, 100));

            self.$itemsContainer.delegate('.twitter-item', 'click', function (event) {
                if ($(event.target).is('a')) return;
                if ($(this).is('.private')) return;
                $(this).toggleClass('selected');

                self.selectedItemsChanged();
            });

            self.$container.delegate('.twitter-item', 'dblclick', function (event) {
                if ($(event.target).is('a')) return;
                if ($(this).is('.private')) return;
                self.insertSyntaxes([{
                    id_str: $(this).attr('data-id-str'),
                    screen_name: $(this).attr('data-screen-name'),
                    text: $(this).attr('data-text')
                }]);
                $(this).removeClass('selected');
                self.selectedItemsChanged();
                Hatena.Diary.trackEvent(self.$pasteButton.attr('data-track-name'));
                return false;
            });

            self.$pasteButton.click(function (event) {
                var id_strs = [];
                self.$itemsContainer.find('.selected').each(function () {
                    id_strs.push({
                        id_str: $(this).attr('data-id-str'),
                        screen_name: $(this).attr('data-screen-name'),
                        text: $(this).attr('data-text')
                    });
                    $(this).removeClass('selected');
                });
                self.insertSyntaxes(id_strs);
                self.selectedItemsChanged();
            });

            // list type
            self.$listTypeContainer.delegate('input', 'change', function () {
                if (self.getListType == $(this).val()) return;
                self.setListType($(this).val());
                self.$listTypeContainer.find('label.selected').removeClass('selected');
                $(this).closest('label').addClass('selected');
                self.loadTweets();
            });

            Hatena.Diary.Util.backupTab({
                $container: self.$formatsContainer,
                key: 'twitter-format',
                onchange: function($input) {
                    self.$formatsContainer.find('label.selected').removeClass('selected');
                    $input.closest('label').addClass('selected');
                }
            });

            Hatena.Diary.Util.backupTab({
                $container: self.$listTypeContainer,
                key: 'twitter-list-type',
                onchange: function($input) {
                    self.setListType($input.val());
                    self.$listTypeContainer.find('label.selected').removeClass('selected');
                    $input.closest('label').addClass('selected');
                    self.loadTweets();

                    // è‡ªåˆ†ã®ãƒ„ã‚¤ãƒ¼ãƒˆã®ã¨ãã ã‘è²¼ã‚Šä»˜ã‘ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆé¸ã¹ã‚‹
                    if ($input.val() == 'tweets') {
                        self.$formatsContainer.css('visibility', 'visible');
                        self.$detailOnlyMessage.hide();
                    } else {
                        self.$formatsContainer.css('visibility', 'hidden');
                        self.$detailOnlyMessage.show();
                    }
                }
            });

            self.$reloadButton.click(function (event) {
                self.loadTweets(null, true);
            });

            // ã‚ªãƒ¼ãƒˆãƒšãƒ¼ã‚¸ãƒ£
            self.$itemsContainer.scroll(_.throttle(function() {
                var rate = ( self.$itemsContainer.scrollTop() + self.$itemsContainer.height() ) / self.$itemsContainer[0].scrollHeight;
                if (rate > 0.7) { // ä¸‹ã®ã»ã†ã«è¡Œã£ãŸã‚‰ã‚‚ã£ã¨èª­ã‚€
                    self.loadMore();
                }
            }, 100));

        },
        resize: function() {
            var self = this;

            var mainHeight = $(window).height();

            var padding = 0;
            padding += parseInt(self.$itemsContainer.css('padding-top'), 10) || 0;
            padding += parseInt(self.$itemsContainer.css('padding-bottom'), 10) || 0;
            self.$itemsContainer.height(
                mainHeight -
                    self.$container.offset().top   -
                    self.$header.outerHeight(true) -
                    self.$footer.outerHeight(true) -
                    padding
            );
        },
        setListType: function(type) {
            if (! type.match(/^(tweets|favorites|timeline)$/)) return;
            this.listType = type;
        },
        getListType: function() {
            // ã•ã£ãè¨­å®šã•ã‚ŒãŸï¼Ÿ
            if (this.listType) {
                return this.listType;
            }
            // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤
            return 'tweets';
        },
        selectedItemsChanged: function() {
            var self = this;

            if (self.$itemsContainer.find('.selected').length > 0) {
                self.$pasteButton.removeClass('disabled').addClass('enabled').prop('disabled', false);
            } else {
                self.$pasteButton.removeClass('enabled').addClass('disabled').prop('disabled', true);
            }
        },
        loadTweets: function (max_id, force) {
            var self = this;

            if (self.isLoading) return;
            if (! self.$container.is(':visible')) return;

            self.isLoading = true;
            self.$indicator.show();

            if (!max_id) {
                self.$itemsContainer.find('.twitter-item').remove();
            }

            var data = {};

            if (max_id) {
                data.max_id = max_id;
            }

            var list_type = self.getListType();

            var url = '/api/twitter/' + list_type + (max_id ? '?max_id=' + max_id : '');

            self.ajaxGetOrCache(url, force).done(function (items) {
                // é€šä¿¡ä¸­ã«ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆã‚‰ã‚Œã¦ãŸã‚‰çµæœã‚’æ¨ã¦ã¦å†åº¦é€šä¿¡ã™ã‚‹
                // _.deferã—ã¦ã‚‹ã®ã¯alwaysãŒçµ‚äº†ã—ã¦ã‹ã‚‰å®Ÿè¡Œã™ã‚‹ãŸã‚
                if (self.getListType() != list_type) {
                    _.defer(function() {
                        self.loadTweets();
                    });
                    return;
                }
                if (max_id) {
                    // 1ä»¶ç›®ã¯é‡è¤‡
                    items.shift();
                }
                self.showItems(items);

                self.$errorMessage.hide();
            }).fail(function (res) {
                self.$errorMessage.show();
            }).always(function () {
                self.$indicator.hide();
                self.isLoading = false;
            });

        },
        showItems: function (items) {
            var self = this;

            var source = '';
            _.each(items, function (item) {
                source += self.itemTemplate({
                    item: item
                });
            });
            self.$indicator.before(source);
        },
        loadMore: function() {
            var self = this;

            var $lastItem =  self.$itemsContainer.find('.twitter-item:last');
            if (!$lastItem.length) return;

            var maxId = $lastItem.attr('data-id-str');

            self.loadTweets(maxId);
        },
        // tweet: { screen_name, id_str, text }
        insertSyntaxes: function (tweets) {
            var self = this;

            var format = self.getFormat();

            // markdownãƒ¢ãƒ¼ãƒ‰æ™‚ã¯screen_nameã‚’escapeã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã®ã§åˆ¥ã«ä½œã£ã¦ã„ã‚‹
            var syntaxes = [];
            var syntaxes_for_markdown = [];
            _.each(tweets.reverse(), function(tweet) {
                syntaxes.push(self.createSyntax(tweet, format, false));
                syntaxes_for_markdown.push(self.createSyntax(tweet, format, true));
            });

            Hatena.Diary.EditorConnector.insertLines({
                html:     syntaxes,
                hatena:   syntaxes,
                markdown: syntaxes_for_markdown
            });
        },
        createSyntax: function(tweet, format, is_markdown) {
            if (format == "detail") {
                var screen_name = tweet.screen_name;

                // __hoge__ã¿ãŸã„ãªåå‰ã ã¨markdownã®å¼·èª¿è¡¨ç¤ºã«å¼•ã£ã‹ã‹ã£ã¦å´©ã‚Œã‚‹ã®ã§
                // markdownãƒ¢ãƒ¼ãƒ‰ã®æ™‚ã¯ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ã™ã‚‹ã‚ˆã†ã«ã—ã¦ã‚‹
                if (is_markdown) screen_name = screen_name.replace(/_(.*?)_/g, '\\_$1\\_');

                var text = tweet.text;
                text = text.replace(/[\[\]\n]/g, '').replace(/([\*`_])/g, "\\$1");

                return "[https://twitter.com/" + screen_name + "/status/" + tweet.id_str + ":embed#" + text + "]";
            } else if (format == "text") {
                return tweet.text;
            }
        },
        getFormat: function () {
            if (this.getListType() == "tweets") {
                return this.$container.find('[name="twitter-format"]:checked').val();
            }
            return "detail";
        },
        ajaxGetOrCache : function(url, force_disable_cache) {
            // ajax getã¾ãŸã¯ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‹ã‚‰è¿”ã™
            // ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆã¦æˆ»ã™ã ã‘ã§é€šä¿¡ã—ãªã„ã‚ˆã†ã«ã™ã‚‹ãŸã‚ã®ã‚„ã¤
            // jqXHRã§ã¯ãªãDeferredã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒè¿”ã‚‹ã“ã¨ãŒã‚ã‚‹ã®ã§ä½¿ã†å´ã§æ³¨æ„ã™ã‚‹ã“ã¨
            var self = this;

            // forceã˜ã‚ƒãªãã¦ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚ã£ãŸã‚‰è¿”ã™
            if (!force_disable_cache && self.ajaxGetOrCacheCache[url]) {
                var dfd = $.Deferred();
                dfd.resolve(self.ajaxGetOrCacheCache[url]);
                return dfd.promise();
            }

            // thenã‚’è¿½åŠ ã—ã¦ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã«ä¿å­˜ã™ã‚‹ã¨ã„ã†ã®ã‚’ã‚„ã£ã¦ã„ã¾ã™
            return $.ajax({
                url: url
            }).done(function(res) {
                self.ajaxGetOrCacheCache[url] = res;
            });
        },
        ajaxGetOrCacheCache: {}
    };

    Hatena.Diary.Pages.Admin['user-blog-edit'].HatenaBookmark = function () { this.init.apply(this, arguments) };
    Hatena.Diary.Pages.Admin['user-blog-edit'].HatenaBookmark.prototype = {
        // args: { container }
        init: function (args) {
            var self = this;

            self.$container = args.container;
            if (!self.$container.get(0)) return;
            self.$header = self.$container.find('.header');
            self.$itemsContainer  = self.$container.find('.items');
            self.$indicator  = self.$container.find('.indicator');
            self.template = _.template(self.$container.find('.template').html());
            self.$errorMessage  = self.$container.find('.error-message');
            self.$disabledMessage  = self.$container.find('.disabled-message');
            self.$footer = self.$container.find('.footer');
            self.$pasteButton  = self.$container.find('.paste-button');

            self.loadedPage = 0;

            self.bindEvents();
            self.resize();

            self.loadItems(1);
        },
        bindEvents: function () {
            var self = this;

            $(window).resize(_.throttle(function () {
                self.resize();
                self.loadItems(1);
            }, 100));

            self.$itemsContainer.on('click', '.item', function (event) {
                if ($(event.target).is('a')) return;
                if ($(event.target).parents('a').length > 0) return;
                $(this).toggleClass('selected');

                self.selectedItemsChanged();
                return false;
            });

            self.$container.on('dblclick', '.item', function (event) {
                if ($(event.target).is('a')) return;
                if ($(event.target).parents('a').length > 0) return;
                self.insertItems([$(this)]);
                $(this).removeClass('selected');
                self.selectedItemsChanged();
                Hatena.Diary.trackEvent(self.$pasteButton.attr('data-track-name'));
                return false;
            });

            self.$pasteButton.click(function (event) {
                var items = [];
                self.selectedItems().each(function () {
                    items.push($(this));
                    $(this).removeClass('selected');
                });
                self.insertItems(items.reverse());
                self.selectedItemsChanged();
            });

            // ã‚ªãƒ¼ãƒˆãƒšãƒ¼ã‚¸ãƒ£
            // twitterã‹ã‚‰ã‚³ãƒ”ãƒš
            self.$itemsContainer.scroll(_.throttle(function() {
                var rate = ( self.$itemsContainer.scrollTop() + self.$itemsContainer.height() ) / self.$itemsContainer[0].scrollHeight;
                if (rate > 0.7) { // ä¸‹ã®ã»ã†ã«è¡Œã£ãŸã‚‰ã‚‚ã£ã¨èª­ã‚€
                    self.loadItems(self.loadedPage + 1);
                }
            }, 100));
        },

        resize: function() {
            var self = this;

            var mainHeight = $(window).height() - $('#editor-main').offset().top;
            self.$itemsContainer.height(
                mainHeight -
                    self.$header.outerHeight(true) -
                    self.$footer.outerHeight(true)
            );
        },

        selectedItemsChanged: function() {
            var self = this;

            if (self.selectedItems().length > 0) {
                self.$pasteButton.removeClass('disabled').addClass('enabled').prop('disabled', false);
            } else {
                self.$pasteButton.removeClass('enabled').addClass('disabled').prop('disabled', true);
            }
        },

        selectedItems: function() {
            var self = this;

            return self.$itemsContainer.find('.selected');
        },

        loadItems: function(page) {
            var self = this;

            if (self.isLoading) return;
            if (! self.$container.is(':visible')) return;

            if (page > 10) return;  // ã•ã‹ã®ã¼ã‚Šã™ããªã„
            if (self.failed) return; // ä¸€åº¦å¤±æ•—ã—ãŸã‚‰ã‚ãã‚‰ã‚ã‚‹

            if (self.loadedPage > page) return;

            self.isLoading = true;
            self.$indicator.show();
            self.$errorMessage.hide();

            $.ajax({
                url: '/api/hatena_bookmark/bookmarks?page=' + page,
                type: 'GET',
                dataType: 'json'
            }).done(function (items) {
                self.$errorMessage.hide();
                if (page === 1 && items.length === 0) {
                    self.showDisabledMessage();
                    return;
                }

                self.showItems(items);
            }).fail(function (res) {
                self.$errorMessage.show();
                self.failed = true;
            }).always(function () {
                self.$indicator.hide();
                self.isLoading = false;
            });

            self.loadedPage = page;
        },

        showDisabledMessage: function() {
            // ãƒ–ã‚¯ãƒã‚’ä½¿ã„ã¾ã›ã‚“ã‹ã¿ãŸã„ãªã‚„ã¤
            var self = this;
            self.$disabledMessage.show();
            self.$itemsContainer.hide();
            self.$footer.hide();
            self.failed = true;
        },

        showItems: function(items) {
            var self = this;

            var source = '';
            _.each(items, function (item) {
                source += self.template({
                    item: item
                });
            });
            self.$indicator.before(source);
            Hatena.Locale.updateTimestamps(self.$container[0]);
        },

        insertItems: function(items) {
            var self = this;
            var editor = Hatena.Diary.Editor.Support.currentEditor;
            var syntax = $('#syntax').val();
            var lines = [];
            _.each(items, function($item) {
                var url = $item.attr('data-comment-url');
                var permalink = $item.attr('data-permalink');
                var description = $item.attr('data-description');

                // ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ã‚³ãƒ¡ãƒ³ãƒˆã¯blockquoteã¨scriptã®çµ„ãªã®ã§ï¼Œãƒ•ã‚£ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ€ãƒ¼ã§ã‚‚èª­ã‚ã‚‹ï¼
                // ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ã®APIã®ä»•æ§˜ã§ï¼Œã‚³ãƒ¡ãƒ³ãƒˆãŒãªã„ã¨ãã¯ï¼Œè²¼ã‚Šä»˜ã‘ã‚³ãƒ¼ãƒ‰ã‚’ã‚‚ã‚‰ãˆãªã„ï¼
                // ãƒ–ãƒ­ã‚°ã‚«ãƒ¼ãƒ‰ã«ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã™ã‚‹ã®ã§ï¼Œãã®ã¨ãã¯ãƒ•ã‚£ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ€ãƒ¼ã§ã‚‚èª­ã‚ã‚‹ã‚ˆã†ã«:embed:citeã®å½¢ã§å‡ºã™ï¼
                if (description && description.length > 0) {
                    lines.push('[' + url + ':embed]');
                } else {
                    lines.push('[' + permalink + ':embed:cite]');
                }
            });

            var syntaxes = {
                html: lines,
                hatena: lines,
                markdown: lines
            };

            // ã¿ãŸã¾ã¾ç·¨é›†ã®ã¨ãã¯å…ˆã«è¨˜æ³•å±•é–‹ã—ã¦ã‹ã‚‰ï¼Œãã†ã§ãªã‹ã£ãŸã‚‰ã™ãã«æŒ¿å…¥
            if ($('#syntax').val() === 'html') {
                Hatena.Diary.extractSyntax(lines.join("\n")).done(function(data) {
                    // ç·¨é›†ã§ãã‚‹ã‚ˆã†ã«ä¸Šä¸‹ã«ç©ºè¡Œè¶³ã™
                    syntaxes.html = ['', data.html, ''];
                }).always(function() {
                    Hatena.Diary.EditorConnector.insertLines(syntaxes);
                });
            } else {
                Hatena.Diary.EditorConnector.insertLines(syntaxes);
            }
        }
    };

    // ãƒã‚¤ã‚­ãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³è¦ªã‚¯ãƒ©ã‚¹
    // extendã—ã¦ä½¿ã†
    Hatena.Diary.Pages.Admin['user-blog-edit'].MyCuration = function () { this.init.apply(this, arguments) };
    Hatena.Diary.Pages.Admin['user-blog-edit'].MyCuration.prototype = {
        // args: { container }
        init: function (args) {
            var self = this;

            self.$container = args.container;
            if (!self.$container.get(0)) return;
            self.$header = self.$container.find('.header');
            self.$itemsContainer  = self.$container.find('.items');
            self.$tabsContainer = self.$container.find('.tab-container');
            self.$indicator  = self.$container.find('.indicator');
            self.$errorMessage  = self.$container.find('.error-message');
            self.$disabledMessage  = self.$container.find('.disabled-message');
            self.$footer = self.$container.find('.footer');
            self.$pasteButton  = self.$container.find('.paste-button');

            var $templateNode = self.$container.find('.template');
            if ($templateNode.get(0)) {
                self.template = _.template($templateNode.html());
            }

            var $editorTemplateNode = self.$container.find('.editor-template');
            if ($editorTemplateNode.get(0)) {
                self.editorTemplate = _.template($editorTemplateNode.html());
            }

            self.loadedPage = 0;

            self.bindEvents();
            self.resize();

            self.requestLoadItems();
        },
        // AutoPagerä½¿ã„ãŸã„ã¨ãtrue
        // AutoPageræœ‰åŠ¹ã«ã™ã‚‹ã¨ä¸‹ã¾ã§ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã—ãŸã¨ãloadItems(true)ãŒå‘¼ã°ã‚Œã‚‹
        enableAutoPager: false,
        // AutoPageræœ€å¾Œã¾ã§å—ä¿¡ã—ãŸã‚‰trueã«ã—ã¦ãã ã•ã„
        itemsReachedEnd: false,
        // è¤‡æ•°é¸æŠè²¼ã‚Šä»˜ã‘æ™‚ã«é€†é †ã§è²¼ã‚Šä»˜ã‘ã‚‹ã‹ã©ã†ã‹
        pasteReverseOrder: false,
        bindEvents: function () {
            var self = this;

            $(window).resize(_.throttle(function () {
                self.resize();
                self.requestLoadItems();
            }, 100));

            self.$itemsContainer.on('click', '.item', function (event) {
                if ($(event.target).is('a')) return;
                if ($(event.target).parents('a').length > 0) return;
                $(this).toggleClass('selected');

                self.selectedItemsChanged();
                return false;
            });

            self.$container.on('dblclick', '.item', function (event) {
                if ($(event.target).is('a')) return;
                if ($(event.target).parents('a').length > 0) return;
                self.insertItems([$(this)]);
                $(this).removeClass('selected');
                self.selectedItemsChanged();
                Hatena.Diary.trackEvent(self.$pasteButton.attr('data-track-name'));
                return false;
            });

            self.$pasteButton.click(function (event) {
                var items = [];
                self.selectedItems().each(function () {
                    items.push($(this));
                    $(this).removeClass('selected');
                });
                self.insertItems(self.pasteReverseOrder ? items.reverse() : items);
                self.selectedItemsChanged();
            });

            self.tabs = new Hatena.Diary.Pages.Admin['user-blog-edit'].MyCuration.Tab({
                container: self.$tabsContainer,
                backupKey: self.serviceName
            });
            $(self.tabs).on('change', function() {
                self.removeItems();
                self.requestLoadItems();
            });

            if (self.enableAutoPager) {
                self.$itemsContainer.scroll(_.throttle(function() {
                    var rate = ( self.$itemsContainer.scrollTop() + self.$itemsContainer.height() ) / self.$itemsContainer[0].scrollHeight;
                    // ä¸‹ã®ã»ã†ã«è¡Œã£ãŸã‚‰ã‚‚ã£ã¨èª­ã‚€
                    if (rate > 0.7 && !self.itemsReachedEnd) {
                        self.requestLoadItems(true);
                    }
                }, 100));
            }
        },
        resize: function() {
            var self = this;

            var mainHeight = $(window).height();

            var padding = 0;
            padding += parseInt(self.$itemsContainer.css('padding-top'), 10) || 0;
            padding += parseInt(self.$itemsContainer.css('padding-bottom'), 10) || 0;
            self.$itemsContainer.height(
                mainHeight -
                    self.$container.offset().top   -
                    self.$header.outerHeight(true) -
                    self.$footer.outerHeight(true) -
                    padding
            );
        },
        selectedItemsChanged: function() {
            var self = this;

            if (self.selectedItems().length > 0) {
                self.$pasteButton.removeClass('disabled').addClass('enabled').prop('disabled', false);
            } else {
                self.$pasteButton.removeClass('enabled').addClass('disabled').prop('disabled', true);
            }
        },
        selectedItems: function() {
            var self = this;

            return self.$itemsContainer.find('.selected');
        },
        requestLoadItems: function(is_more) {
            var self = this;

            if (self.isLoading) return;
            if (! self.$container.is(':visible')) return;

            // æœ€åˆã‹ã‚‰requestã•ã‚ŒãŸã‘ã©ãƒšãƒ¼ã‚¸å†…ã«è¦ç´ ãŒã‚ã‚‹å ´åˆã¯ä½•ã‚‚ã—ãªã„
            if (! is_more && self.getItemsOnPage().length > 0) return;

            self._requestLoadItems(is_more);
        },
        willRequestLoadItems: function (is_more) {
            var self = this;
            // å¿…è¦ã«å¿œã˜ã¦ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰ã—ã¦ãã ã•ã„
            // false ã‚’è¿”ã™ã¨ãƒªã‚¯ã‚¨ã‚¹ãƒˆã™ã‚‹ã®ã‚’ã‚„ã‚ã‚‹ã“ã¨ãŒã§ãã¾ã™
            return true;
        },
        _requestLoadItems: function (is_more) {
            var self = this;

            if (!self.willRequestLoadItems(is_more)) return;

            self.isLoading = true;
            self.$indicator.show();
            self.$errorMessage.hide();

            self.loadItems(is_more).done(function(feed) {
                self.showItems(feed.entries);
            }).fail(function(res) {
                self.$errorMessage.show();
            }).always(function() {
                self.$indicator.hide();
                self.isLoading = false;
                self.loadItemsFinishedHandler();
            });
        },
        loadItemsFinishedHandler: function () {
            // å¿…è¦ãªã‚‰ä¸Šæ›¸ãã—ã¦ä½¿ã£ã¦ãã ã•ã„
        },
        requestReload: function (is_more) {
            var self = this;

            if (self.isLoading) return;

            self.removeItems();
            self._requestLoadItems();
        },
        getItemsOnPage: function() {
            var self = this;
            return self.$itemsContainer.find('.item');
        },
        removeItems: function() {
            var self = this;
            self.getItemsOnPage().remove();
        },
        loadItems: function() {
            throw "not implemented";
            // ä¸Šæ›¸ãã—ã¦ä½¿ã£ã¦ãã ã•ã„
        },
        showItems: function(items) {
            var self = this;

            var source = '';
            _.each(items, function (entry) {
                source += self.renderItem(entry);
            });
            self.$indicator.before(source);
            Hatena.Locale.updateTimestamps(self.$container[0]);
            $(self).triggerHandler('items-appended');
        },
        renderItem: function(item) {
            var self = this;
            return self.template({
                item: item
            });
        },
        insertItems: function(items) {
            // å¿…è¦ãªã‚‰ä¸Šæ›¸ãã—ã¦ä½¿ã£ã¦ãã ã•ã„
            var self = this;
            var lines = [];
            _.each(items, function($item) {
                var permalink = $item.attr('data-permalink');
                lines.push('[' + permalink + ':embed]');
            });
            Hatena.Diary.Editor.Support.currentEditor.insertLines(lines);
        }
    };


    // ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆã‚¤ãƒ™ãƒ³ãƒˆã®ç®¡ç†
    // å¤‰æ›´ã‚¤ãƒ™ãƒ³ãƒˆã®ãƒ‡ã‚£ã‚¹ãƒ‘ãƒƒãƒ
    // localStorageã«ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
    // å¤‰æ›´ã•ã‚ŒãŸã‚‰changeã‚¤ãƒ™ãƒ³ãƒˆã‚’ç™ºè¡Œã™ã‚‹
    // get()ã§å€¤ã‚’å–å¾—
    // set(value)ã§å€¤ã‚’è¨­å®š
    // args:
    //   container: inputã‚’å«ã‚€è¦ç´ 
    //   backupKey: ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ç”¨ã®ã‚­ãƒ¼ localStorageã®ã‚­ãƒ¼ã®ä¸€éƒ¨ã«ãªã‚‹
    Hatena.Diary.Pages.Admin['user-blog-edit'].MyCuration.Tab = function () { this.init.apply(this, arguments) };
    Hatena.Diary.Pages.Admin['user-blog-edit'].MyCuration.Tab.prototype = {
        // args: { container backupKey }
        init: function (args) {
            var self = this;

            self.$container = args.container;
            self.backupKey = args.backupKey;
            self.localStorageKey = 'MyCuration.Tab.' + self.backupKey;
            self.values = self.$container.find('input').map(function() { return $(this).val(); }).toArray();

            self.$container.delegate('input', 'change', function () {
                self.$container.find('label.selected').removeClass('selected');
                $(this).closest('label').addClass('selected');

                var value = $(this).val();
                self.value = value;
                try {
                    localStorage[self.localStorageKey] = value;
                } catch(ignore) {}

                $(self).triggerHandler('change');
            });

            try {
                if (localStorage[self.localStorageKey]) {
                    self.set(localStorage[self.localStorageKey]);
                }
            } catch(ignore) {}
        },
        get: function() {
            return this.value || this.values[0];
        },
        set: function(value) {
            var self = this;
            if (! _.include(self.values, value)) return;
            var $input = self.$container.find('input[value="' + value + '"]');
            $input.click();
        }
    };

    Hatena.Diary.Pages.Admin['user-blog-edit'].Archive = function () { this.init.apply(this, arguments) };
    Hatena.Diary.Pages.Admin['user-blog-edit'].Archive.prototype = {
        parent: Hatena.Diary.Pages.Admin['user-blog-edit'].MyCuration,
        init: function (args) {
            var self = this;

            self.$indicator = args.container.find('.indicator');

            self.parent.prototype.init.call(self, args);

            self._templatesByType = {
                'default': _.template(self.$container.find('.archive-item-template').html())
            };
        },
        bindEvents: function () {
            var self = this;

            self.parent.prototype.bindEvents.call(self);

            self.$submit = self.$container.find('.archive-keyword-submit');
            self.$keyword = self.$container.find('.archive-keyword');

            self.$submit.click(function (event) {
                self.initLoadCondition();
                self.requestReload();
                return false;
            });

            self.$keyword.keydown(function (event) {
                if (keyString(event) == 'RET') {
                    self.initLoadCondition();
                    self.requestReload();
                    return false;
                }
            });
        },
        initLoadCondition: function() {
            this.itemsReachedEnd = false;
            this.untilEpoch = null;
        },
        serviceName: 'Archive',
        enableAutoPager: true,
        pasteReverseOrder: true,
        willRequestLoadItems: function (more) {
            return true;
        },
        loadItems: function(more) {
            var self = this;

            var term = self.$keyword.val();

            var data = {
                permission: 'public',
                q: term
            };

            if (self.untilEpoch) {
                data.until = self.untilEpoch;
            }

            return $.ajax({
                url: 'entries.json',
                data: data,
                type: 'GET',
                dataType: 'json'
            }).then(function(json){
                if (json.entries.length > 0) {
                    self.untilEpoch = Date.parse(json.entries[json.entries.length - 1].created) / 1000;
                    self.itemsReachedEnd = !json.has_more;
                    return $.Deferred().resolve(json);
                } else {
                    // ãƒ’ãƒƒãƒˆä»¶æ•°0ãªã®ã§ã‚¨ãƒ©ãƒ¼ã¨ã™ã‚‹
                    return $.Deferred().reject();
                }
            });
        },
        renderItem: function(item) {
            var self = this;

            item.datetimeEpoch = Date.parse(item.datetime);

            var template = self._templateByType('default');

            return template({
                entry: item,
                trim: function(text, chars) {
                        if (text.length <= chars) return text;
                        return text.substr(0, chars - 1) + ' ...';
                      }
            });
        },
        _templateByType: function(type) {
            var self = this;
            return self._templatesByType[type] || self._templatesByType['default'];
        },
        insertItems: function(items) {
            var self = this;

            var lines = {
                hatena:   [],
                markdown: []
            };
            _.each(items, function($item) {
                var item = {
                    permalink: $item.attr('data-permalink')
                };

                lines.hatena.push('[' + item.permalink + ':embed:cite]');
                lines.markdown.push('[' + item.permalink + ':embed:cite]');
            });

            Hatena.Diary.extractSyntax(lines.hatena).done(function(data) {
                lines.html = ['', data.html, ''];
            }).fail(function(error) {
                lines.html = lines.hatena;
                Hatena.Diary.BUG(error);
            }).always(function() {
                if (Hatena.Diary.EditorConnector.isiOS() || Hatena.Diary.EditorConnector.isAndroid()) {
                    // ã‚¹ãƒãƒ•ã‚©ã‚¢ãƒ—ãƒªã®ã¨ãã†ã¾ãè¡¨ç¤ºã§ããªã„ã®ã§è¨˜æ³•ãã®ã¾ã¾ã«ã—ã¦ãŠã
                    lines.html = lines.hatena;
                }
                Hatena.Diary.EditorConnector.insertLines(lines);
            });
        }
    };

    Hatena.Diary.Util.extend(Hatena.Diary.Pages.Admin['user-blog-edit'].Archive.prototype, Hatena.Diary.Pages.Admin['user-blog-edit'].MyCuration.prototype);

    Hatena.Diary.Pages.Admin['user-blog-edit'].Instagram = function () { this.init.apply(this, arguments) };
    Hatena.Diary.Pages.Admin['user-blog-edit'].Instagram.prototype = {
        parent: Hatena.Diary.Pages.Admin['user-blog-edit'].MyCuration,
        init: function (args) {
            var self = this;

            self.parent.prototype.init.call(self, args);

            $(self).on('items-appended', function() {
                self.setPaddingLeft();
            });
        },
        serviceName: 'Instagram',
        enableAutoPager: true,
        pasteReverseOrder: true,
        loadItems: function(more) {
            var self = this;

            var data = {};

            if (more) {
                var $lastItem =  self.$itemsContainer.find('.item:last');
                data.max_id = $lastItem.attr('data-next-max-id');
            }

            return $.ajax({
                url: '/api/instagram/recent',
                data: data,
                type: 'GET',
                dataType: 'json'
            }).fail(function() {
                self.pleaseReAuthorize();
            }).done(function(res) {
                if (res && res.data) {
                    res.entries = res.data;
                    // ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã«data-max-idå…¥ã‚Œã‚‹ã®ã§å„ã‚¨ãƒ³ãƒˆãƒªã«å…¥ã‚Œã‚‹
                    _.each(res.entries, function(entry) {
                        entry.next_max_id = res.next_max_id;
                    });
                }

                // next_max_idãªã‹ã£ãŸã‚‰ã“ã‚Œã§çµ‚ã‚ã‚Š(autopagerãŒç„¡åŠ¹ã«ãªã‚‹)
                if (!res.next_max_id) {
                    self.itemsReachedEnd = true;
                }

                return res;
            });
        },
        pleaseReAuthorize: function() {
            var self = this;
            self.$container.find('.disabled-box').show();
        },
        insertItems: function(items) {
            var self = this;

            var lines = {
                hatena:   [],
                markdown: []
            };
            _.each(items, function($item) {
                var item = {
                    permalink: $item.attr('data-permalink'),
                    caption: $item.attr('data-caption'),
                    type: $item.attr('data-type')
                };

                var media_url = item.permalink + 'media/?size=l';

                // å‹•ç”»ã¯iframe(:embedã§å±•é–‹ã—ãŸã‚‰iframeã«ãªã‚‹)ï¼Œå†™çœŸã¯a>img
                if (item.type === 'video') {
                    lines.hatena.push('[' + item.permalink + ':embed]');
                    lines.markdown.push('[' + item.permalink + ':embed]');
                } else {
                    lines.hatena.push('[' + item.permalink + ':image=' + media_url + ']');
                    lines.markdown.push('[![](' + media_url + ')](' + item.permalink + ')');
                }

                // captionã‚ã£ãŸã‚‰captionã§ãƒªãƒ³ã‚¯ï¼Œãªã‹ã£ãŸã‚‰å˜ãªã‚‹ãƒªãƒ³ã‚¯
                // captionãªã„ã¨ãmarkdownã§ã¯ã‚¿ã‚¤ãƒˆãƒ«å–ã‚Œãªã„ã®ã§ã¯ã¦ãªè¨˜æ³•
                if (item.caption) {
                    var caption = item.caption.replace(/\r?\n/g, '');
                    lines.hatena.push('[' + item.permalink + ':title=' + caption + ']');
                    lines.markdown.push('[' + caption + '](' + item.permalink + ')');
                } else {
                    lines.hatena.push('[' + item.permalink + ':title]');
                    lines.markdown.push('[' + item.permalink + ':title]');
                }
            });


            Hatena.Diary.extractSyntax(lines.hatena).done(function(data) {
                lines.html = [data.html];
            }).fail(function(error) {
                lines.html = lines.hatena;
                Hatena.Diary.BUG(error);
            }).always(function() {
                Hatena.Diary.EditorConnector.insertLines(lines);
            });
        },
        setPaddingLeft: function() {
            var self = this;

            // itemsãŒä¸­å¤®ã«æƒã†ã‚ˆã†å¹…ã‚’èª¿æ•´
            // ä¸€åˆ—ã«è¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹itemsã®å¹…ã®åˆè¨ˆã‹ã‚‰ï¼ŒpaddingLeftã‚’æ±ºã‚ã‚‹
            //
            // |----|               |----|  padding
            // |-------------------------|  .itemsContainer
            //      |---| |---| |---|       .item
            //      ^itemsLeft
            //                      ^itemsRight
            //
            // padding = itemsContainerã®å¹… - (itemsRight - itemsLeft) / 2

            var $itemsContainer = $('.items');
            var $items = $('.item');
            var $firstItem = $($items[0]);
            var firstItemTop = $firstItem.position().top;
            var itemsLeft = $firstItem.position().left;
            var itemsRight = itemsLeft + $firstItem.outerWidth();
            $items.each(function() {
                var $this = $(this);
                if ($this.position().top !== firstItemTop) return false;
                itemsRight = $this.position().left + $this.outerWidth();
            });

            var itemsWidthTotal = itemsRight - itemsLeft;
            var padding = ($itemsContainer.width() - itemsWidthTotal) / 2;

            $itemsContainer.css({
                'padding-left': padding + 'px'
            });
        }
    };

    Hatena.Diary.Util.extend(Hatena.Diary.Pages.Admin['user-blog-edit'].Instagram.prototype, Hatena.Diary.Pages.Admin['user-blog-edit'].MyCuration.prototype);

    Hatena.Diary.Pages.Admin['user-blog-edit'].Evernote = function () { this.init.apply(this, arguments); };
    Hatena.Diary.Pages.Admin['user-blog-edit'].Evernote.prototype = {
        parent: Hatena.Diary.Pages.Admin['user-blog-edit'].MyCuration,
        init: function (args) {
            var self = this;

            self.$keywordInput = args.container.find('.evernote-search-keyword');
            self.$keywordSubmit = args.container.find('.evernote-search-keyword-submit');

            // $.extend ã—ã¦ã„ã‚‹ã®ã§ this.constructor ã¨ã‹ãŒæ­£ã—ãè¿½åŠ ã•ã‚Œã¦ã„ãªã„
            self.parent.prototype.init.call(self, args);
        },
        bindEvents: function () {
            var self = this;

            // $.extend ã—ã¦ã„ã‚‹ã®ã§ this.constructor ã¨ã‹ãŒæ­£ã—ãè¿½åŠ ã•ã‚Œã¦ã„ãªã„
            self.parent.prototype.bindEvents.call(self);

            // AmazonSearch ã‹ã‚‰ã ã„ãŸã„ã‚³ãƒ”ãƒšã—ã¦ããŸ

            self.$keywordSubmit.click(function (event) {
                self.searchByInput();
                return false;
            });

            self.$keywordInput.keydown(function (event) {
                if (keyString(event) === 'RET') {
                    self.searchByInput();
                    return false;
                }
            });

            self.$keywordInput.focus(function() {
                // ä¸‹ã®è²¼ã‚Šä»˜ã‘ãƒœã‚¿ãƒ³è¡¨ç¤ºã•ã‚Œãªã„ã“ã¨ãŒã‚ã‚‹
                // åŸå› ã‚ã‹ã‚‰ãªã„ã‘ã©ãƒªã‚µã‚¤ã‚ºã—ãŸã‚‰ãƒœã‚¿ãƒ³å‡ºã¦ãã‚‹
                // æ¤œç´¢ãƒœãƒƒã‚¯ã‚¹ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã—ãŸã¨ãã«ãƒ€ãƒ¡æŠ¼ã—ã§ã‚‚ã†1å›ãƒªã‚µã‚¤ã‚º
                setTimeout(function() {
                    self.resize();
                }, 0);
            });

            self.$itemsContainer.on('show_items', function (event, args) {
                _.each(args.notes, function (note) {
                    var $item = self.$itemsContainer.find('.item[data-item-guid=' + note.guid + ']');

                    $.ajax({
                        url: '/api/evernote/note',
                        data: {
                            content: 1,
                            guid: $item.attr('data-item-guid')
                        },
                        type: 'GET',
                        dataType: 'json'
                    }).done(function (response) {
                        if (response && response.content) {
                            var content_type = $('#syntax').val() === 'html' ? 'html' : 'plain';

                            // APIã®è¿”ã‚Šå€¤ã§ã¯<ãªã©ãŒã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ã•ã‚Œã¦ã„ã‚‹ã®ã§æˆ»ã™
                            $item.find('.evernote-search-item-body').text(_.unescape(response.content.extended[content_type]));
                            $item.find('.evernote-search-item-body-preview').text(_.unescape(response.content.extended.excerpt));

                            $item.attr('data-loaded-body', true);

                            if (response.extended.has_resource) {
                                self.appendResources({ item: $item, resources: response.resources });
                                self.previewResources({ item : $item, resources : response.resources });
                            }
                        }
                    });
                });
            });

            self.$container.on('insert_items', function (event, args) {
                var notes = args.items;
                var resources = _.chain(notes).
                        map(function (note) { return $(note).find('.evernote-item-resource').get(); }).
                        flatten().
                        value();

                self.requestInsertResources(resources);

                var note_title = _.chain(notes).
                        map(function ($item) { return $item.find('.evernote-search-item-title').text(); }).
                        find(function (note_title) { return note_title; }).
                        value();
                var entry_title = Hatena.Diary.Editor.Support.currentEditor.title.val();

                if (note_title && !entry_title) {
                    Hatena.Diary.Editor.Support.currentEditor.title.val(note_title);
                }
            });
        },
        serviceName: 'Evernote',
        syntax: function () {
            return $('#syntax').val();
        },
        loadItems: function () {
            var self = this;
            var data = {
                filter_order: 'created'
            };

            return $.ajax({
                url: '/api/evernote/notes_metadata',
                data: data,
                type: 'GET',
                dataType: 'json'
            }).pipe(function(response) {
                if (!response) return response;

                if (!response.is_error) {
                    response.entries = response.notes;
                } else if (response.is_error && response.error_details.type === 'auth_expired') {
                    self.$container
                        .html(self.$container.find('.auth-expired-template').html())
                        .removeClass('enabled').addClass('disabled');
                    return response;
                }

                self.itemsReachedEnd = !response.extended.has_next;

                return response;
            }).fail(function(response) {
                if (!response) return response;

                // APIåˆ©ç”¨åˆ¶é™ã«é”ã—ãŸ
                var responseText = null;
                try {
                    responseText = $.parseJSON(response.responseText);
                } catch(e) {
                }
                if (responseText && responseText.is_rate_limit_reached) {
                    self.$container
                        .html(self.$container.find('.rate-limit-reached-template').html())
                        .removeClass('enabled').addClass('disabled');
                    return response;
                }
            });
        },
        previewResources: function (args) {
            var self = this;
            var $note_item = args.item;
            var resources = args.resources;

            if (resources.length <= 0) return;

            var resource = resources[0];

            var $img = $('<img/>');
            $img.attr('src', '/api/evernote/thumbnail?guid=' + resource.guid);
            $img.addClass('resource-image');

            Hatena.Diary.Util.waitForResource(function () {
                return $note_item.attr('data-loaded-body');
            }, function () {
                $note_item.find('.evernote-image-preview').append($img);
            });
        },
        appendResources: function (args) {
            var self = this;

            var $item = args.item;
            var resources = args.resources;

            $item.attr('data-has-resource', true);
            $item.addClass('has-resource');
            var $resources = _.map(resources, function (resource) {
                var $resource_node = $('<li/>');
                var attrs = {
                    'data-guid': resource.guid
                };
                $resource_node.attr(attrs);
                $resource_node.addClass('evernote-item-resource');

                return $resource_node.get(0);
            });
            $item.find('.evernote-item-resources').append($resources);
        },
        requestInsertResources: function (resources) {
            var self = this;
            var resource = resources.shift();

            if (!resource) return;

            var $resource = $(resource);
            if ($resource.attr('data-uploaded')) {
                self.insertFotolifeImage({
                    annotation    : $resource.attr('data-fotolife-annotation'),
                    html          : $resource.attr('data-fotolife-html'),
                    hex_body_hash : $resource.attr('data-hex-body-hash')
                });
                self.requestInsertResources(resources);
            } else {
                var dfd = self.requestUploadResource($resource);
                dfd.done(function () {
                    self.requestInsertResources(resources);
                });
            }
        },
        requestUploadResource: function (resource) {
            var self = this;

            return $.ajax({
                url: '/api/upload/evernote/resource',
                data: {
                    rkm: Hatena.Diary.data('rkm'),
                    rkc: Hatena.Diary.data('rkc'),
                    guid: resource.attr('data-guid')
                },
                dataType: 'json',
                type: 'POST'
            }).done(_.bind(self.onCompleteUploadingResource, self, resource));
        },
        onCompleteUploadingResource: function ($resource, response) {
            var self = this;

            $resource.attr({
                'data-uploaded' : 1,
                'data-fotolife-annotation' : response.annotation,
                'data-fotolife-html' : response.html,
                'data-hex-body-hash' : response.hex_body_hash
            });

            self.insertFotolifeImageByResource($resource);
        },
        insertFotolifeImageByResource: function ($resource) {
            var self = this;

            if (! $resource.attr('data-uploaded')) return;

            self.insertFotolifeImage({
                annotation    : $resource.attr('data-fotolife-annotation'),
                html          : $resource.attr('data-fotolife-html'),
                hex_body_hash : $resource.attr('data-hex-body-hash')
            });
        },
        insertFotolifeImage: function (args) {
            var self = this;

            var annotation = args.annotation;
            var hex_body_hash = args.hex_body_hash;
            var html = args.html;

            var uploadingMessage = Hatena.Locale.text('uploading');
            var editor = Hatena.Diary.Editor.Support.currentEditor;
            var current_body = editor.body.val();
            var placeholder = '[evernote:' + hex_body_hash + ' ' + uploadingMessage + ']';
            var image_source = self.syntax() === 'html' ? html : '[' + annotation + ']';
            var replaced = current_body.replace(placeholder, image_source);

            editor.setValue(replaced);
        },
        resourcesAreUploaded: function ($item) {
            return _.all($item.find('.evernote-resource').get(), function ($resource) {
                return $resource.attr('data-uploaded');
            });
        },
        readyToInserted: function ($items) {
            var self = this;
            return _.all($items, function ($item) {
                var loaded_body = $item.attr('data-loaded-body');
                var has_resource = $item.attr('data-has-resource');
                var upload_completed = has_resource ? self.resourcesAreUploaded($item) : true;
                return loaded_body && upload_completed;
            });
        },
        insertItems: function(items) {
            var self = this;

            Hatena.Diary.Util.waitForResource(function () {
                return self.readyToInserted(items);
            }, function () {
                var uploadingMessage = Hatena.Locale.text('uploading');
                var lines = _.map(items, function ($item) {
                    return $item.find('.evernote-search-item-body').text().replace(/\[evernote:([^\]]*)\]/gm, '[evernote:$1 ' + uploadingMessage + ']');
                });

                Hatena.Diary.Editor.Support.currentEditor.insertLines(lines);

                self.$container.trigger('insert_items', { items: items, lines: lines });
            });
        },
        showItems: function (items) {
            var self = this;
            self.parent.prototype.showItems.call(self, items);

            self.$itemsContainer.trigger('show_items', {notes: items});
        },
        searchByInput: function () {
            var self = this;

            self.search(self.$keywordInput.val());
        },
        search: function (keyword) {
            var self = this;

            if (typeof keyword != 'string') return false;

            keyword = keyword.replace(/^\s*/, '');
            keyword = keyword.replace(/\s*$/, '');

            // ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãŒç©ºã ã£ãŸã‚‰ãƒªãƒ­ãƒ¼ãƒ‰
            if (keyword.length === 0) {
                self.requestReload();
                return false;
            }

            // AmazonSearch ã‹ã‚‰ã ã„ãŸã„ã‚³ãƒ”ãƒš

            // if (self._searchingKeyword == keyword && self._searchingCategory == category) return false;

            if (self._searchDeferred) {
                self._searchDeferred.reject();
            }

            self.ajaxStarted();

            self._searchingKeyword = keyword;

            var currentAjax;
            var dfd = $.Deferred().done(function() {
            }).fail(function() {
                if (currentAjax) {
                    // ã‚»ãƒƒã‚·ãƒ§ãƒ³çµ‚äº†æ™‚ã«å‰ã®ajaxã‚’ã‚­ãƒ£ãƒ³ã‚»ãƒ«
                    currentAjax.abort();
                }
            }).always(function() {
                self.ajaxFinished();
            });

            self.$itemsContainer.find('.evernote-search-item').remove();

            var searchWithOffset = function(offset) {
                self.ajaxStarted();

                currentAjax = $.ajax({
                    url: '/api/evernote/notes_metadata',
                    data: {
                        offset: offset,
                        filter_order: 'created',
                        filter_words: keyword
                    }
                }).done(function (response) {
                    self.showItems(response.notes);

                    if (response.extended.has_next && response.extended.next_offset) {
                        searchWithOffset(response.extended.next_offset);
                    } else {
                        dfd.resolve();
                        return;
                    }
                }).fail(function (response) {
                    dfd.reject(response);
                });
            };
            searchWithOffset(0);

            self._searchDeferred = dfd;
        },
        ajaxStarted: function () {
            var self = this;

            self.isAjaxing = true;

            self.$keywordSubmit.prop('disabled', true);
            self.$indicator.show();
            self.$errorMessage.hide();
        },
        ajaxFinished: function () {
            var self = this;

            self.isAjaxing = false;

            self.$keywordSubmit.prop('disabled', false);
            self.$errorMessage.hide();
            self.$indicator.hide();
        }
    };
    Hatena.Diary.Util.extend(Hatena.Diary.Pages.Admin['user-blog-edit'].Evernote.prototype, Hatena.Diary.Pages.Admin['user-blog-edit'].MyCuration.prototype);

    Hatena.Diary.Pages.Admin['user-blog-edit'].Miil = function () { this.init.apply(this, arguments); };
    Hatena.Diary.Pages.Admin['user-blog-edit'].Miil.prototype = {
        parent: Hatena.Diary.Pages.Admin['user-blog-edit'].MyCuration,
        serviceName: 'Miil',
        enableAutoPager: true,
        pasteReverseOrder: true,
        init: function (args) {
            var self = this;

            self.parent.prototype.init.call(self, args);

            self.userManager = new Hatena.Diary.Pages.Admin['user-blog-edit'].Miil.UserManager({
                container: self.$container
            });

            $(self.userManager).on('registered', function() {
                self.resetUser();
                self.requestLoadItems();
            });

            $(self.userManager).on('unregistered', function() {
                self.resetUser();
            });
        },
        loadItems: function(is_more) {
            var self = this;

            var dfd = $.Deferred();

            if (!(self.userManager && self.userManager.getUser())) {
                dfd.reject();
                return dfd;
            }

            var user = self.userManager.getUser();

            if (is_more) {
                user.forward();
            }
            user.load().done(function(data) {
                var photos = data.photos;
                _.each(photos, function(photo) {
                    photo.thumbnail_url = photo.url + '=s72';
                });

                dfd.resolve({
                    entries: photos
                });
            }).fail(function() {
                dfd.reject();
                self.itemsReachedEnd = true;
            });

            return dfd;
        },
        insertItems: function(items) {
            var self = this;

            var lines = [];

            _.each(items, function($item) {
                if ($('#syntax').val() === 'html') {
                    lines.push(self.editorTemplate({
                        item: {
                            permalink_url: $item.attr('data-permalink'),
                            image_url: $item.attr('data-image-url'),
                            title: $item.attr('data-title')
                        }
                    }));
                } else {
                    lines.push('[' + $item.attr('data-permalink') + ':image=' + $item.attr('data-image-url') + ']');
                    if ($item.attr('data-title')) {
                        lines.push($item.attr('data-title'));
                    }
                }
            });
            Hatena.Diary.Editor.Support.currentEditor.insertLines(lines);
        },
        resetUser: function() {
            var self = this;

            self.itemsReachedEnd = false;
            self.removeItems();

            if (self.userManager && self.userManager.getUser()) {
                self.userManager.getUser().rewind();
            }
        }
    };

    Hatena.Diary.Util.extend(Hatena.Diary.Pages.Admin['user-blog-edit'].Miil.prototype, Hatena.Diary.Pages.Admin['user-blog-edit'].MyCuration.prototype);

    // ãƒ¦ãƒ¼ã‚¶ãƒ¼é€£æºæ©Ÿèƒ½ï¼ŒUserLoaderã‹ã‚‰Userã‚’å—ã‘å–ã£ã¦ä¿æŒã™ã‚‹ï¼Œé€£æºUIã®ç®¡ç†
    Hatena.Diary.Pages.Admin['user-blog-edit'].Miil.UserManager = function () { this.init.apply(this, arguments); };
    Hatena.Diary.Pages.Admin['user-blog-edit'].Miil.UserManager.prototype = {
        init: function (args) {
            var self = this;

            self.$container = args.container;

            self.$input = self.$container.find('.miil-user-name');
            self.$registerButton = self.$container.find('.register-button');
            self.$unregisterButton = self.$container.find('.unregister-button');

            self.$userImage = self.$container.find('.user-image');
            self.$name = self.$container.find('.user-name');
            self.$nameLink = self.$container.find('.user-name-link');
            self.$userNotFound = self.$container.find('.user-not-found-error');

            self.userLoader = new Hatena.Diary.Pages.Admin['user-blog-edit'].Miil.UserLoader();

            self.bindEvents();

            self.tryRegisterFromInput();
        },
        bindEvents: function() {
            var self = this;

            self.$registerButton.on('click', function() {
                self.tryRegisterFromInput();
                return false;
            });

            self.$input.on('keydown', function(event) {
                if(keyString(event) === 'RET') {
                    self.tryRegisterFromInput();
                    return false;
                }
            });

            self.$unregisterButton.on('click', function() {
                self.unregister();
                return false;
            });
        },
        // inputã«å…¥åŠ›ã•ã‚ŒãŸå€¤ã‹ã‚‰èªè¨¼ã‚’è©¦ã¿ã‚‹
        tryRegisterFromInput: function() {
            var self = this;

            var user_name = self.$input.val();
            if (!user_name) return;
            self.tryRegister(user_name);
        },
        // validãªãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨é€£æºã—ã¦ã„ã‚‹ã¨ãUserã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’è¿”ã™
        getUser: function() {
            var self = this;

            return self.currentUser;
        },
        // æŒ‡å®šã•ã‚ŒãŸåå‰ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ã®é€£æºã‚’è©¦ã¿ã‚‹
        tryRegister: function(user_name) {
            var self = this;

            self.userLoader.loadUser(user_name).done(function(user) {
                if (user.exists()) {
                    self.onUserFound(user);
                } else {
                    self.unregister();
                    self.$userNotFound.show();
                }
            });
        },
        // registerã™ã‚‹ã¨ãã®ã„ã‚ã„ã‚ï¼ŒçŠ¶æ…‹æ›¸ãæ›ãˆï¼Œviewæ›´æ–°
        onUserFound: function(user) {
            var self = this;

            self.currentUser = user;
            self.setUserImage(user.getImage() || self.DEFAULT_UESR_IMAGE);
            self.$name.text(user.getName());
            self.$nameLink.attr('href', 'http://miil.me/u/' + user.getName());
            self.$userNotFound.hide();
            self.$container.addClass('registered');
            Hatena.Diary.Pages.Admin['*'].saveBlogConfig('miil_user_name', user.getName());
            $(self).trigger('registered');
            $(window).resize();     // headerã®é«˜ã•å¤‰ã‚ã‚‹ãŸã‚
        },
        // é€£æºè§£é™¤ã™ã‚‹
        // viewæ›´æ–°
        unregister: function() {
            var self = this;

            $(self).trigger('unregistered');

            self.currentUser = null;
            self.$input.focus();

            self.setUserImage(self.DEFAULT_UESR_IMAGE);
            self.$userNotFound.hide();
            Hatena.Diary.Pages.Admin['*'].saveBlogConfig('miil_user_name', '');
            self.$container.removeClass('registered');
            $(window).resize();     // headerã®é«˜ã•å¤‰ã‚ã‚‹ãŸã‚
        },
        setUserImage: function(url) {
            var self = this;

            self.$userImage.attr('src', url);
        },
        DEFAULT_UESR_IMAGE: 'http://assets.miil.me/images/pc/user.jpg'
    };

    // Userã‚¯ãƒ©ã‚¹ã®ç”Ÿæˆï¼Œã‚­ãƒ£ãƒƒã‚·ãƒ¥
    Hatena.Diary.Pages.Admin['user-blog-edit'].Miil.UserLoader = function () { this.init.apply(this, arguments); };
    Hatena.Diary.Pages.Admin['user-blog-edit'].Miil.UserLoader.prototype = {
        init: function (args) {
            var self = this;

            self.users = {};
        },
        loadUser: function(name) {
            var self = this;

            var dfd = $.Deferred();

            if (!self.users[name]) {
                self.users[name] = new Hatena.Diary.Pages.Admin['user-blog-edit'].Miil.User(name);
            }

            self.users[name].load().always(function() {
                dfd.resolve(self.users[name]);
            });

            return dfd;
        }
    };

    // miilã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€äººã«å¯¾å¿œã™ã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
    // photosã®èª­ã¿è¾¼ã¿ï¼Œãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æƒ…å ±ã‚’è¿”ã™ï¼Œãƒšãƒ¼ã‚¸ãƒ³ã‚°
    // ã‚ªãƒ¼ãƒˆãƒšãƒ¼ã‚¸ãƒ£å¯¾å¿œã®ãŸã‚Hatena.Diary.LazyListã‚’ä½¿ã£ã¦ã„ã¾ã™
    // load() â†’ forward() â†’ load() ã¿ãŸã„ã«é †ç•ªã«èª­ã‚€ã¨ãƒšãƒ¼ã‚¸ãƒ³ã‚°ã§ãã‚‹
    // rewind() â†’ forward() ã™ã‚‹ã¨ãƒšãƒ¼ã‚¸ãƒ³ã‚°ãŒæœ€åˆã«æˆ»ã‚‹
    // æœ€åˆã«æˆ»ã™ã«ã¯ï¼ŒrewindPhotosCursor()ã—ã¦ãã ã•ã„
    Hatena.Diary.Pages.Admin['user-blog-edit'].Miil.User = function () { this.init.apply(this, arguments); };
    Hatena.Diary.Pages.Admin['user-blog-edit'].Miil.User.prototype = {
        init: function (name) {
            var self = this;

            self.name = name;

            // photos_loaderã®æœ€åˆã®ãƒšãƒ¼ã‚¸
            self.photos_loader_root = new Hatena.Diary.LazyList(_.bind(self._photosLoaderBody, self));

            // ãƒšãƒ¼ã‚¸ãƒ³ã‚°ç”¨ã®ã‚«ãƒ¼ã‚½ãƒ«ã¿ãŸã„ãªã‚„ã¤
            self.photos_loader = self.photos_loader_root;
        },
        getName: function() {
            var self = this;

            return self.name;
        },
        // ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”»åƒã®URL
        getImage: function() {
            var self = this;

            return self.basicData.photos[0].user.user_icon_url;

        },

        // ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿é–¢é€£
        load: function() {
            var self = this;

            return self.photos_loader.promise();
        },
        // loaderã‚’é€²ã‚ã‚‹ æ¬¡ã«loadã—ãŸã‚‰é€šä¿¡ãŒç™ºç”Ÿã™ã‚‹ã‹ã‚‚ã—ã‚Œãªã„
        forward: function() {
            var self = this;
            self.photos_loader = self.photos_loader.next();
        },
        // loaderã‚’æœ€åˆã«å·»ãæˆ»ã™
        rewind: function() {
            var self = this;
            self.photos_loader = self.photos_loader_root;
        },
        // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒmiilã«å­˜åœ¨ã™ã‚‹ã‹
        exists: function() {
            var self = this;

            return self.photos_loader_root.promise().state() === "resolved";
        },
        _photosURL: function(data) {
            var self = this;

            return 'http://api.miil.me/api/users/' + self.name + '/photos/public.json?' + $.param(data);
        },
        _getNextPageFromReceivedData: function(data) {
            if (!data) return;
            if (!data.next_url) return;

            var match = data.next_url.match(/page=(\d+)/);
            if (!match) return;
            return match[1];
        },
        // APIèª­ã¿è¾¼ã¿ã®æœ¬ä½“ï¼Œå‰ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‹ã‚‰æ¬¡ã®URLã‚’æ±ºã‚ã‚‹
        _photosLoaderBody: function(prev) {
            var self = this;

            // ãƒ‡ãƒ¼ã‚¿æƒã£ãŸã‚‰resolve
            var photos_loaded = $.Deferred();

            // GETã™ã‚‹ãƒšãƒ¼ã‚¸ã®URLãŒæ±ºã¾ã£ãŸã‚‰resolve
            var page_determined = $.Deferred();

            // å‰ã®é€šä¿¡çµæœã‹ã‚‰æ¬¡ã®ãƒšãƒ¼ã‚¸æ±ºã‚ã‚‹
            if (prev) {
                prev.promise().done(function(data) {
                    var next_page = self._getNextPageFromReceivedData(data);
                    if (!next_page) {
                        page_determined.reject();
                    }
                    page_determined.resolve(next_page);
                }).fail(function() {
                    page_determined.reject();
                });
            } else {
                // åˆå›ã¯next_pageãªã—ã§é€šä¿¡
                page_determined.resolve();
            }

            page_determined.done(function(next_page) {
                var data = {};

                if (next_page) {
                    data.page = next_page;
                }

                $.ajax({
                    url: '/api/external/json',
                    data: {
                        url: self._photosURL(data)
                    },
                    type: 'GET',
                    dataType: 'json'
                }).done(function(data) {
                    if (data && data.photos && data.photos.length > 0) {
                        if(!self.basicData) {
                            // ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”»åƒãªã©ã¯åŒæœŸçš„ã«è¿”ã›ã‚‹ã‚ˆã†ã«å…¥ã‚Œã¦ãŠã
                            self.basicData = data;
                        }
                        photos_loaded.resolve(data);
                    } else {
                        // é€šä¿¡ã«æˆåŠŸã—ã¦ã‚‚ãƒªã‚¹ãƒˆãŒç©ºãªã‚‰å¤±æ•—ã¨è¦‹ãªã™
                        photos_loaded.reject();
                    }
                }).fail(function(res) {
                    photos_loaded.reject();
                });
            }).fail(function() {
                photos_loaded.reject();
            });

            return photos_loaded;
        }
    };

    Hatena.Diary.Pages.Admin['user-blog-edit'].Pixiv = function () { this.init.apply(this, arguments) };
    Hatena.Diary.Pages.Admin['user-blog-edit'].Pixiv.prototype = {
        parent: Hatena.Diary.Pages.Admin['user-blog-edit'].MyCuration,
        serviceName: 'Pixiv',
        enableAutoPager: true,
        page: 1,
        init: function (args) {
            var self = this;

            self.$container    = args.container;

            self.parent.prototype.init.call(self, args);
        },
        loadItems: function(is_more) {
            var self = this;

            return $.ajax({
                url: '/api/pixiv/my_works',
                data: {
                    page: self.page++
                }
            }).success(function(res) {
                self.itemsReachedEnd = !(res.entries && res.entries.length > 0);
            }).fail(function(res) {
                self.pleaseReAuthorize();
                self.itemsReachedEnd = true;
            });
        },
        pleaseReAuthorize: function() {
            var self = this;
            self.$container.find('.disabled-box').show();
        },
        insertItems: function(items) {
            var self = this;
            var hatena_syntaxes = [];
            _.each(items, function($item) {
                var permalink = $item.attr('data-permalink');
                hatena_syntaxes.push(self.editorTemplate({
                    item: {
                        id: $item.attr('data-id'),
                        image_url: $item.attr('data-image-url')
                    }
                }));
                hatena_syntaxes.push('[' + permalink + ':title]');
            });

            var lines = {
                hatena: hatena_syntaxes,
                markdown: hatena_syntaxes,
                html: hatena_syntaxes
            };

            Hatena.Diary.extractSyntax(hatena_syntaxes).done(function(data) {
                lines.html = [data.html];
            }).fail(function(error) {
                lines.html = lines.hatena;
                Hatena.Diary.BUG(error);
            }).always(function() {
                Hatena.Diary.EditorConnector.insertLines(lines);
            });
        }
    };
    Hatena.Diary.Util.extend(Hatena.Diary.Pages.Admin['user-blog-edit'].Pixiv.prototype, Hatena.Diary.Pages.Admin['user-blog-edit'].MyCuration.prototype);

    // ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³æ¤œç´¢ã‚µã‚¤ãƒ‰ãƒãƒ¼
    Hatena.Diary.Pages.Admin['user-blog-edit'].Gourmet = function () { this.init.apply(this, arguments) };
    Hatena.Diary.Pages.Admin['user-blog-edit'].Gourmet.prototype = {
        parent: Hatena.Diary.Pages.Admin['user-blog-edit'].MyCuration,
        serviceName: 'Gourmet',
        enableAutoPager: true,
        init: function (args) {
            var self = this;

            self.$container    = args.container;

            var $searchInput  = args.container.find('.gourmet-keyword');
            var $searchPref   = args.container.find('.gourmet-pref');
            var $searchSubmit = args.container.find('.gourmet-keyword-submit');

            // localStorageã«éƒ½é“åºœçœŒæŒ‡å®šãŒä¿å­˜ã•ã‚Œã¦ãŸã‚‰restoreã™ã‚‹
            self.prefLocalStorageKey = 'MyCuration.Gourmet.Pref';
            try {
                if (localStorage[self.prefLocalStorageKey]) {
                    var selector = 'option[value='+localStorage[self.prefLocalStorageKey]+']';
                    $searchPref.find(selector).first().prop('selected', true);
                }
            } catch(ignore) {}

            // éƒ½é“åºœçœŒæŒ‡å®šãŒå¤‰ã‚ã£ãŸã¨ãã«localStorageã«ä¿å­˜ã™ã‚‹
            $searchPref.on('change', function (e) {
                try {
                    localStorage[self.prefLocalStorageKey] = $searchPref.val();
                } catch(ignore) {}
            });

            self.gourmetSearcher = new Hatena.Diary.Pages.Admin['user-blog-edit'].Gourmet.Searcher({
                searchInput : $searchInput,
                searchPref  : $searchPref,
                type : 'gnavi' // ç›´ä¸‹ã§åˆæœŸçŠ¶æ…‹ã«ã‚ã‚ã›ã¦æ›´æ–°ã•ã‚Œã‚‹
            });
            self.updateProvidorStatus();

            $searchSubmit.on('click', function() {
                self.requestReload();
            });
            $searchInput.on('keydown', function (e) {
                if (keyString(e) === 'RET') {
                    self.requestReload();
                    return false;
                }
                return true;
            });

            $searchInput.focus(function() {
                self.$container.find('.gourmet-description').hide();
            });

            self.setupFormatSwitcher(); // è²¼ã‚Šä»˜ã‘å½¢å¼åˆ‡æ›¿
            self.setupProvidorSwitcher(); // ãã‚‹ãƒŠãƒ“/é£Ÿã¹ãƒ­ã‚°åˆ‡ã‚Šæ›¿ãˆ

            self.parent.prototype.init.call(self, args);
        },
        loadItems: function(is_more) {
            var self = this;

            var dfd = $.Deferred();

            if (is_more) {
                self.gourmetSearcher.forward();
            }
            else {
                self.gourmetSearcher.reset();
                self.itemsReachedEnd = false;
            }

            self.gourmetSearcher.load().done(function(data) {
                dfd.resolve(data);
            }).fail(function() {
                dfd.reject();
            }).always(function() {
                self.itemsReachedEnd = ! self.gourmetSearcher.has_next;
            });

            return dfd;
        },
        insertItems: function(items) {
            var self = this;

            var lines = [];
            var suffix = self.$container.find('[name="gourmet-format"]:checked').val();
            _.each(items, function($item) {
                var syntax = $item.attr('data-syntax');
                syntax = syntax.replace(/\]$/, ":" + suffix + "]");
                // tabelogæ¤œç´¢ã§gnaviã®åº—èˆ—æƒ…å ±ãŒè¿”ã£ã¦ãã‚‹ã“ã¨ãŒã‚ã‚‹ã®ã§ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ™‚ã®providorã§æ›¸ãæ›ãˆã‚‹
                var providor = self.$container.find('[name="gourmet-providor"]:checked').val();
                syntax = syntax.replace(/^\[.+?:/,"[" + providor + ":");
                lines.push(syntax);
            });

            Hatena.Diary.EditorConnector.insertLines({
                hatena: lines,
                markdown: lines,
                html: lines
            });
        },
        setupFormatSwitcher: function() {
            var self = this;
            var $formatsContainer = self.$container.find('.gourmet-formats');
            $formatsContainer.on('change', function(e) {
                var $input = $(e.target);
                $formatsContainer.find('label.selected').removeClass('selected');
                $input.closest('label').addClass('selected');
            });
        },
        setupProvidorSwitcher: function() {
            var self = this;
            var $providorsContainer = self.$container.find('.gourmet-providors');
            $providorsContainer.on('change', function(e) {
                var $input = $(e.target);
                $providorsContainer.find('label.selected').removeClass('selected');
                $input.closest('label').addClass('selected');

                // providorãŒå¤‰ã‚ã£ãŸã‚‰reloadã™ã‚‹
                self.updateProvidorStatus();
            });
        },
        updateProvidorStatus: function() {
            var self = this;
            var providor = self.$container.find('[name="gourmet-providor"]:checked').val();

            if ( providor !== self.gourmetSearcher.type ) {
                self.gourmetSearcher.type = providor;
                self.requestReload();
            }
        },
        loadItemsFinishedHandler: function() {
            var self = this;
            // åˆå›ãƒ­ãƒ¼ãƒ‰ã§ã‚‚èª­ã¿è¾¼ã¾ã‚Œã‚‹ã®ã§ã€æ¤œç´¢èªãŒå…¥ã£ã¦ã‚‹ã‹ã©ã†ã‹è¦‹ã‚‹
            if (self.gourmetSearcher.$searchInput.val() && self.getItemsOnPage().length === 0) {
                self.$container.find('.no-result').show();
            }
        },
        requestReload: function() {
            var self = this;
            self.$container.find('.no-result').hide();
            self.parent.prototype.requestReload.call(self);
        }
    };
    Hatena.Diary.Util.extend(Hatena.Diary.Pages.Admin['user-blog-edit'].Gourmet.prototype, Hatena.Diary.Pages.Admin['user-blog-edit'].MyCuration.prototype);

    // Gourmetã®æ¤œç´¢ã‚’ç®¡ç†ã™ã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
    // load() â†’ forward() â†’ load() ã¿ãŸã„ã«é †ç•ªã«èª­ã‚€ã¨ãƒšãƒ¼ã‚¸ãƒ³ã‚°ã§ãã‚‹
    // resetã™ã‚‹ã¨ã€ãƒšãƒ¼ã‚¸ãƒ³ã‚°ã‚„æ¤œç´¢wordãŒè¨­å®šã—ç›´ã•ã‚Œã‚‹
    Hatena.Diary.Pages.Admin['user-blog-edit'].Gourmet.Searcher = function () { this.init.apply(this, arguments); };
    Hatena.Diary.Pages.Admin['user-blog-edit'].Gourmet.Searcher.prototype = {
        init: function (args) {
            var self = this;
            self.$searchInput = args.searchInput;
            self.$searchPref = args.searchPref;
            self.type = args.type || 'gnavi';
            self.reset();
        },

        load: function() {
            var self = this;
            var dfd = $.Deferred();

            var searchKeyword = self.searchKeyword;

            if (!searchKeyword) {
                dfd.reject();
                return dfd;
            }

            // ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³æ¤œç´¢APIã‹ã‚‰æƒ…å ±ã‚’å–ã£ã¦ãã‚‹
            $.ajax({
                url : "/api/gourmet/search",
                type : "GET",
                data : {
                    word : searchKeyword,
                    pref : self.searchPref,
                    page : self.page,
                    type : self.type
                },
                dataType: "json"
            }).done(function(data) {
                if (data.entries.length === 0) {
                    // ãƒ‡ãƒ¼ã‚¿ãŒç„¡ããªã£ãŸã‚‰æ¬¡ãƒšãƒ¼ã‚¸ãªã—
                    self.has_next = false;
                }
                dfd.resolve(data);
            }).fail(function() {
                // ãƒ‡ãƒ¼ã‚¿ãŒå–å¾—ã§ããªã‹ã£ãŸã‚‰æ¬¡ãƒšãƒ¼ã‚¸ãªã—
                self.has_next = false;
                dfd.reject();
            });

            return dfd;
        },
        forward: function() {
            var self = this;
            self.page++;
        },
        reset: function() {
            var self = this;
            self.page = 1;
            self.has_next = true; // æ¬¡ãŒãªããªã£ãŸã‚‰falseã«
            self.resetSearchParameters();
        },
        resetSearchParameters: function() {
            var self = this;
            self.searchKeyword = self.$searchInput.val();
            self.searchPref    = self.$searchPref.val();
        }
    };

    Hatena.Diary.Pages.Admin['user-blog-edit'].Nicovideo = function () { this.init.apply(this, arguments); };

    Hatena.Diary.Pages.Admin['user-blog-edit'].Nicovideo.prototype = {
        init: function (args) {
            var self = this;

            self.$container = args.container;
            self.$itemsContainer = self.$container.find('.items');
            self.$input = self.$container.find('.nicovideo-keyword');
            self.$inputReset = self.$container.find('.input-text-reset');
            self.$pasteButton = self.$container.find('.paste-button');
            self.$formatPlayer = self.$container.find('.nicovideo-formats label.player');
            self.$formatThumbnail = self.$container.find('.nicovideo-formats label.thumbnail');

            self.setupFormatSwitcher('.nicovideo-formats');

            self.bindEvents();
        },

        bindEvents: function () {
            var self = this;

            self.$input.keyup(_.debounce(function () {
                if(self.$input.val().length === 0) return;

                self.updateThumb();
            }, 500));

            self.$input.keydown(function (e) {
                if (keyString(e) === 'RET') {
                    if (self.findItem().length > 0) {
                        self.insertItem();
                        Hatena.Diary.trackEvent(self.$pasteButton.attr('data-track-name'));
                    }
                    return false;
                }
            });

            self.$pasteButton.click(function () {
                self.insertItem();
            });

            self.setupInputReset();
        },

        setupInputReset : function () {
            var self = this;

            self.$inputReset.click(function () {
                self.$input.val('');
                self.$input.focus();
                self.$inputReset.hide();

                return false;
            });

            self.$input.keyup(function (e) {
                if (self.$input.val().length > 0) {
                    self.$inputReset.show();
                } else {
                    self.$inputReset.hide();
                }
            });
        },

        findItem: function () {
            return this.$container.find('.items > .item');
        },

        itemChanged: function () {
            var self = this;

            var $item = self.findItem();

            if ($item.length === 0) {
                self.setPasteButtonStatus(false);
                return;
            }

            self.setPasteButtonStatus(true);

            var $format_player = self.$formatPlayer;
            var $format_thumbnail = self.$formatThumbnail;

            // videoã®ã¨ã, è²¼ã‚Šä»˜ã‘å½¢å¼ã¯'å‹•ç”»' 'ã‚µãƒ ãƒã‚¤ãƒ«' 'ãƒªãƒ³ã‚¯'
            // ãã‚Œä»¥å¤–ã®ã¨ã, è²¼ã‚Šä»˜ã‘å½¢å¼ã¯'ã‚µãƒ ãƒã‚¤ãƒ«' 'ãƒªãƒ³ã‚¯'
            if ($item.data('type') === 'video') {
                // å·¦ç«¯ã¯'å‹•ç”»'ãªã®ã§ãã‚Œã«ã‚¹ã‚¿ã‚¤ãƒ«ã‚’å½“ã¦ã‚‹
                $format_player.addClass('format-left');
                $format_thumbnail.removeClass('format-left');

                $format_player.show();
            } else {
                // å·¦ç«¯ã¯'ã‚µãƒ ãƒã‚¤ãƒ«'ãªã®ã§ãã‚Œã«ã‚¹ã‚¿ã‚¤ãƒ«ã‚’å½“ã¦ã‚‹
                $format_player.removeClass('format-left');
                $format_thumbnail.addClass('format-left');

                if($format_player.is('.selected')) {
                    $format_player.removeClass('selected');
                    $format_player.find('input').prop('checked', false);

                    $format_thumbnail.addClass('selected');
                    $format_thumbnail.find('input').prop('checked', true);
                }

                $format_player.hide();
            }
        },

        setPasteButtonStatus : function (status) {
            var self = this;

            if (status) {
                self.$pasteButton.removeClass('disabled').addClass('enabled').prop('disabled', false);
            } else {
                self.$pasteButton.addClass('disabled').removeClass('enabled').prop('disabled', true);
            }
        },

        updateThumb: function () {
            var self = this;

            var input = self.$input.val();

            var canonical_input = self.removeParamsFromURL(input);

            var info = self.detectInfo(canonical_input);

            if (!info) {
                return;
            }

            var source = self.renderPreviewTemplate(info.type, {
                id: info.id
            });

            var $item = $($.trim(source));
            $item.data('type', info.type);
            $item.data('id', info.id);

            self.$itemsContainer.html($item);

            self.itemChanged();
        },

        removeParamsFromURL: function (url) {
            return url.replace(/\?.*$/, '');
        },

        // return: { id: 'sm2168098', type: 'video' }
        // èª­ã¿å–ã‚Œãªã„å ´åˆã¯falseã‚’è¿”ã™
        detectInfo: function (input) {
            var self = this;

            if (self.isNicovideoID(input)) {
                return self.detectInfoFromID(input);
            } else {
                return self.detectInfoFromURL(input);
            }
        },

        detectInfoFromID: function (id) {
            var self = this;

            return {
                id: id,
                type: self.detectIDType(id)
            };
        },

        detectInfoFromURL: function (input) {
            // ã‚³ãƒ”ãƒšãƒŸã‚¹ç­‰ã‚’è€ƒæ…®ã—ã¦ã‚ã‚‹ç¨‹åº¦URLã£ã½ã‹ã£ãŸã‚‰è‰¯ã„ã“ã¨ã«ã™ã‚‹
            // æ­£ã—ã„URLã¯ã“ã‚“ãªã®: http://www.nicovideo.jp/watch/sm2168098
            var regexps = {
                video: new RegExp("nicovideo.jp/watch/(\\w{0,2}\\d+)$"),
                community: new RegExp("com.nicovideo.jp/community/(co\\d+)$"),
                mylist: new RegExp("nicovideo.jp/mylist/(\\d+)$")
            };

            var info = false;
            _.find(regexps, function (regexp, type) {
                var result = regexp.exec(input);
                if (result) {
                    info = { id: result[1], type: type };
                    return true;
                } else {
                    return false;
                }
            });

            return info;
        },

        isNicovideoID: function (str) {
            // sm2168098, nm20097844ãªã©
            // å…¬å¼ãƒãƒ£ãƒ³ãƒãƒ«ã®å‹•ç”»ã ã¨æ•°å­—ã®ã¿ã®å ´åˆã‚‚ã‚ã‚‹(ex: http://www.nicovideo.jp/watch/1365403220)
            return (/^(\w{2})?\d+$/).test(str);
        },

        // ãƒã‚¤ãƒªã‚¹ãƒˆã¯prefixãŒãªãã¦åˆ¤åˆ¥ä¸å¯èƒ½ãªã®ã§è«¦ã‚ã‚‹
        detectIDType: function (id) {
            var prefix = id.slice(0, 2);
            if (prefix === 'co') {
                return 'community';
            } else {
                return 'video';
            }
        },

        renderPreviewTemplate: function (type, data) {
            return _.template(this.$container.find('.template-nicovideo-preview-' + type).html(), data);
        },

        renderTemplate: function (type, format, data) {
            var self = this;

            var $template = self.$container.find('.template-nicovideo-' + type + '-' + format);

            var source = _.template($.trim($template.html()), data);

            return source;
        },

        insertItem: function () {
            var self = this;

            var lines = [];

            var format = self.$container.find('[name="nicovideo-format"]:checked').val();

            var $item  = self.findItem();
            var source = self.renderTemplate($item.data('type'), format, { id: $item.data('id') });

            lines.push(source);

            var lines_data = {
                html: lines,
                hatena: lines,
                markdown: lines
            };

            var editor = Hatena.Diary.Editor.Support.currentEditor;
            // è¦‹ãŸã¾ã¾ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ã§ã‹ã¤è²¼ã‚Šä»˜ã‘å½¢å¼ãŒãƒªãƒ³ã‚¯ã®ã¨ã, è¨˜æ³•å±•é–‹ã™ã‚‹
            if (editor.mode === 'html' && format === 'link') {
                Hatena.Diary.extractSyntax(lines).done(function(data) {
                    lines_data.html = [data.html];
                    Hatena.Diary.EditorConnector.insertLines(lines_data);
                }).fail(function (error) {
                    Hatena.Diary.BUG(error);
                    Hatena.Diary.EditorConnector.insertLines(lines_data);
                });
            } else {
                Hatena.Diary.EditorConnector.insertLines(lines_data);
            }
        },

        setupFormatSwitcher: function (format_container_selector) {
            var self = this;
            var $format_container = self.$container.find(format_container_selector);

            $format_container.on('change', function (e) {
                var $input = $(e.target);

                $format_container.find('label.selected').removeClass('selected');
                $input.closest('label').addClass('selected');
            });
        }
    };

    // Gistã‚µã‚¤ãƒ‰ãƒãƒ¼
    Hatena.Diary.Pages.Admin['user-blog-edit'].Gist = function () { this.init.apply(this, arguments); };
    Hatena.Diary.Pages.Admin['user-blog-edit'].Gist.prototype = {
        parent: Hatena.Diary.Pages.Admin['user-blog-edit'].MyCuration,
        serviceName: 'Gist',
        enableAutoPager: true,
        pasteReverseOrder: true,
        init: function (args) {
            var self = this;

            self.parent.prototype.init.call(self, args);

            self.userManager = new Hatena.Diary.Pages.Admin['user-blog-edit'].Gist.UserManager({
                container: self.$container
            });

            $(self.userManager).on('registered', function() {
                self.resetUser();
                self.requestLoadItems();
            });

            $(self.userManager).on('unregistered', function() {
                self.resetUser();
            });
        },
        loadItems: function(more) {
            var self = this;

            var dfd = $.Deferred();

            if (!(self.userManager && self.userManager.getUser())) {
                dfd.reject();
                return dfd;
            }

            var user = self.userManager.getUser();

            if (more) {
                user.forward();
            }

            user.load().done(function(gists) {
                dfd.resolve({
                    entries: gists
                });
            }).fail(function(msg) {
                dfd.reject(msg);
                self.itemsReachedEnd = true;
            });

            return dfd;
        },
        showItems: function(items) {
            var self = this;
            var source = '';

            _.each(items, function (item) {

                var description_short;
                if (item.description) {
                    description_short = (item.description.length > 50) ?
                        item.description.substr(0, 50) + " ..." : item.description;
                }
                else {
                    description_short = '';
                }

                var language = _.values(item.files)[0].language;

                source += self.template({
                    item: item,
                    description: ((description_short) ? description_short : "gist" + item.id),
                    language: (language) ? language : "Unknown"
                });
            });
            self.$indicator.before(source);
            Hatena.Locale.updateTimestamps(self.$container[0]);
            $(self).triggerHandler('items-appended');
        },
        insertItems: function(items) {
            var self = this;
            var lines = [];
            var mode = Hatena.Diary.Editor.Support.currentEditor.mode;

            _.each(items, function($item) {
                var description = $item.data('description');
                // embedè¨˜æ³•å†…ã«Markdownã®è¨˜å·ãŒã‚ã‚‹ã¨, embedã¨ã—ã¦å±•é–‹ã•ã‚Œãªã„ã®ã§ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ã™ã‚‹
                // [http://gist/:embed#foo `bar`] -> [http://gist/:embed#foo \`bar\`]
                if (mode === 'markdown') {
                    description = self.escape_markdown_chars(description);
                }

                var escaped_description = self.escape_text_for_description(description);
                var html_url = $item.data('html-url');

                lines.push('[' + html_url + ':embed#' + escaped_description + ']');

                if (mode === 'html') {
                    lines.push('<a href="' + html_url + '">' + escaped_description + '</a>');
                }
                else if (mode == 'hatena') {
                    lines.push('[' + html_url + ':title=' + escaped_description + ']');
                }
                else {
                    lines.push('[' + escaped_description + '](' + html_url + ')');
                }
            });

            Hatena.Diary.Editor.Support.currentEditor.insertLines(lines);
        },
        escape_text_for_description: function(text){
            text = text.replace(/[\n\[\]]/g, "");
            return _.escape(text);
        },
        escape_markdown_chars: function(text) {
            return text.replace(/[\\_\*`]/g, "\\$&");
        },
        resetUser: function() {
            var self = this;

            self.itemsReachedEnd = false;
            self.removeItems();

            if (self.userManager && self.userManager.getUser()) {
                self.userManager.getUser().rewind();
            }
        }
    };

    Hatena.Diary.Util.extend(Hatena.Diary.Pages.Admin['user-blog-edit'].Gist.prototype, Hatena.Diary.Pages.Admin['user-blog-edit'].MyCuration.prototype);

    // ãƒ¦ãƒ¼ã‚¶ãƒ¼é€£æºæ©Ÿèƒ½ï¼ŒUserLoaderã‹ã‚‰Userã‚’å—ã‘å–ã£ã¦ä¿æŒã™ã‚‹ï¼Œé€£æºUIã®ç®¡ç†
    Hatena.Diary.Pages.Admin['user-blog-edit'].Gist.UserManager = function () { this.init.apply(this, arguments); };
    Hatena.Diary.Pages.Admin['user-blog-edit'].Gist.UserManager.prototype = {
        init: function (args) {
            var self = this;

            self.$container = args.container;

            self.$input = self.$container.find('.gist-user-name');
            self.$registerButton = self.$container.find('.register-button');
            self.$unregisterButton = self.$container.find('.unregister-button');

            self.$userImage = self.$container.find('.user-image');
            self.$name = self.$container.find('.user-name');
            self.$nameLink = self.$container.find('.user-name-link');
            self.$userNotFound = self.$container.find('.user-not-found-error');
            self.$apiLimit = self.$container.find('.api-limit-error');
            self.$ajaxError = self.$container.find('.ajax-error');

            self.userLoader = new Hatena.Diary.Pages.Admin['user-blog-edit'].Gist.UserLoader();

            self.bindEvents();

            self.tryRegisterFromInput();
        },
        bindEvents: function() {
            var self = this;

            self.$registerButton.on('click', function() {
                self.tryRegisterFromInput();
                return false;
            });

            self.$input.on('keydown', function(event) {
                if(keyString(event) === 'RET') {
                    self.tryRegisterFromInput();
                    return false;
                }
            });

            self.$unregisterButton.on('click', function() {
                self.unregister();
                return false;
            });
        },
        // inputã«å…¥åŠ›ã•ã‚ŒãŸå€¤ã‹ã‚‰èªè¨¼ã‚’è©¦ã¿ã‚‹
        tryRegisterFromInput: function() {
            var self = this;

            var user_name = self.$input.val();
            if (!user_name) return;
            self.tryRegister(user_name);
        },
        // validãªãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨é€£æºã—ã¦ã„ã‚‹ã¨ãUserã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’è¿”ã™
        getUser: function() {
            var self = this;

            return self.currentUser;
        },
        // æŒ‡å®šã•ã‚ŒãŸåå‰ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ã®é€£æºã‚’è©¦ã¿ã‚‹
        tryRegister: function(user_name) {
            var self = this;

            // loadUserå¾Œãªã®ã§user.existsãŒä½¿ãˆã‚‹
            self.userLoader.loadUser(user_name).done(function(user) {
                self.onUserFound(user);
            }).fail(function(msg) {
                self.unregister();
                if (msg === 'api') {
                    self.$apiLimit.show();
                }
                else if (msg === 'ajax') {
                    self.$ajaxError.show();
                }
                else {
                    self.$userNotFound.show();
                }
            });
        },
        // registerã™ã‚‹ã¨ãã®ã„ã‚ã„ã‚ï¼ŒçŠ¶æ…‹æ›¸ãæ›ãˆï¼Œviewæ›´æ–°
        onUserFound: function(user) {
            var self = this;

            self.currentUser = user;
            self.setUserImage(user.getImage());
            self.$name.text(user.getName());
            self.$nameLink.attr('href', 'http://gist.github.com/' + user.getName());
            self.$userNotFound.hide();
            self.$apiLimit.hide();
            self.$ajaxError.hide();
            self.$container.addClass('registered');
            Hatena.Diary.Pages.Admin['*'].saveBlogConfig('gist_user_name', user.getName());
            $(self).trigger('registered');
            $(window).resize();     // headerã®é«˜ã•å¤‰ã‚ã‚‹ãŸã‚
        },
        // é€£æºè§£é™¤ã™ã‚‹
        // viewæ›´æ–°
        unregister: function() {
            var self = this;

            $(self).trigger('unregistered');

            self.currentUser = null;
            self.$input.focus();

            self.setUserImage(self.DEFAULT_UESR_IMAGE);
            self.$userNotFound.hide();
            self.$apiLimit.hide();
            self.$ajaxError.hide();
            Hatena.Diary.Pages.Admin['*'].saveBlogConfig('gist_user_name', '');
            self.$container.removeClass('registered');
            $(window).resize();     // headerã®é«˜ã•å¤‰ã‚ã‚‹ãŸã‚
        },
        setUserImage: function(url) {
            var self = this;

            self.$userImage.attr('src', url);
        }
    };

    // Userã‚¯ãƒ©ã‚¹ã®ç”Ÿæˆï¼Œã‚­ãƒ£ãƒƒã‚·ãƒ¥
    Hatena.Diary.Pages.Admin['user-blog-edit'].Gist.UserLoader = function () { this.init.apply(this, arguments); };
    Hatena.Diary.Pages.Admin['user-blog-edit'].Gist.UserLoader.prototype = {
        init: function (args) {
            var self = this;

            self.users = {};
        },
        loadUser: function(name) {
            var self = this;

            var dfd = $.Deferred();

            if (!self.users[name]) {
                self.users[name] = new Hatena.Diary.Pages.Admin['user-blog-edit'].Gist.User(name);
            }

            self.users[name].load().done(function() {
                    dfd.resolve(self.users[name]);
            }).fail(function(msg) {
                dfd.reject(msg);
            });

            return dfd;
        }
    };

    // gistã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€äººã«å¯¾å¿œã™ã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
    Hatena.Diary.Pages.Admin['user-blog-edit'].Gist.User = function () { this.init.apply(this, arguments); };
    Hatena.Diary.Pages.Admin['user-blog-edit'].Gist.User.prototype = {
        init: function (name) {
            this.name = name;
            this.page = 1;
            this._exists = false;
        },
        getName: function() {
            return this.name;
        },
        getImage: function() {
            return this.info.avatar_url;
        },
        load: function() {

            var self = this;
            var dfd = $.Deferred();

            var data = {
                page: self.page,
                per_page: 20
            };

            $.ajax({
                url: 'https://api.github.com/users/' + self.name + '/gists',
                data: data,
                type: 'GET',
                dataType: 'jsonp',
                jsonp: 'callback'
            }).done(function(res) {
                // APIåˆ¶é™ã«é”ã—ãŸã¨ã
                if (res && res.data.message && res.data.message !== 'Not Found') {
                    dfd.reject('api');
                } else  if (res && res.data.length > 0) {
                    // ãƒ¦ãƒ¼ã‚¶æƒ…å ±(ã‚¢ã‚¤ã‚³ãƒ³ãªã©)ã¯åŒæœŸçš„ã«è¿”ã›ã‚‹ã‚ˆã†ã«å…¥ã‚Œã¦ãŠã
                    self.info = res.data[0].owner;
                    self._exists = true;
                    dfd.resolve(res.data);
                } else {
                    // é€šä¿¡ã«æˆåŠŸã—ã¦ã‚‚ãƒªã‚¹ãƒˆãŒç©ºãªã‚‰å¤±æ•—ã¨è¦‹ãªã™
                    // (Gist.loadItems()ã®åˆ†å²ã®ãŸã‚)
                    dfd.reject('not found');
                }
            }).fail(function(res) {
                dfd.reject('ajax');
            });

            return dfd;
        },
        forward: function() {
            this.page++;
        },
        rewind: function() {
            this.page = 1;
        },
        exists: function() {
            return this._exists;
        }
    };
    // Gist end.

    // flickræ¤œç´¢ã‚µã‚¤ãƒ‰ãƒãƒ¼
    Hatena.Diary.Pages.Admin['user-blog-edit'].Flickr = function () { this.init.apply(this, arguments) };
    Hatena.Diary.Pages.Admin['user-blog-edit'].Flickr.prototype = {
        parent: Hatena.Diary.Pages.Admin['user-blog-edit'].MyCuration,
        serviceName: 'Flickr',
        enableAutoPager: true,
        init: function (args) {
            var self = this;

            self.$container    = args.container;

            self.$searchInput  = args.container.find('.flickr-keyword');
            var $searchSubmit = args.container.find('.flickr-keyword-submit');

            self.flickrSearcher = new Hatena.Diary.Pages.Admin['user-blog-edit'].Flickr.Searcher({
                searchInput : self.$searchInput
            });

            $searchSubmit.on('click', function() {
                if (self.$searchInput.val() !== '') {
                    self.requestReload();
                }
            });
            self.$searchInput.on('keydown', function (e) {
                if (keyString(e) === 'RET') {
                    if (self.$searchInput.val() !== '') {
                        self.requestReload();
                    }
                    return false;
                }
                return true;
            });

            self.$searchInput.focus(function() {
                self.$container.find('.flickr-description').hide();
            });

            self.parent.prototype.init.call(self, args);
        },
        loadItems: function(is_more) {
            var self = this;

            var dfd = $.Deferred();

            if (is_more) {
                self.flickrSearcher.forward();
            }
            else {
                self.flickrSearcher.reset();
                self.itemsReachedEnd = false;
            }

            self.flickrSearcher.load().done(function(data) {
                dfd.resolve(data);
            }).fail(function() {
                dfd.reject();
            }).always(function() {
                self.itemsReachedEnd = ! self.flickrSearcher.has_next;
            });

            return dfd;
        },
        getUserById: function(id) {
            var self = this;
            var dfd = $.Deferred();

            // ãƒ¦ãƒ¼ã‚¶æƒ…å ±å–å¾—
            $.ajax({
                url : "/api/flickr/user",
                type : "GET",
                data : {
                    user_id : id,
                    page : self.page
                },
                dataType: "json"
            }).done(function(json) {
                var data = json.data;
                dfd.resolve(data);
            }).fail(function() {
                dfd.reject();
            });

            return dfd;
        },
        insertItems: function(items) {
            var self = this;

            var lines = {
                hatena:   [],
                markdown: []
            };

            var deferreds = [];

            // å„itemã®æ’®å½±è€…ã‚’ajaxã§å–å¾—ã—ã€dfdã‚’deferredsã«ç™»éŒ²
            // å…¨éƒ¨å–å¾—ã§ããŸã‚‰æœ¬æ–‡ã«æŒ¿å…¥
            _.each(items, function($item) {

                var item = {
                    permalink: $item.attr('data-permalink'),
                    title: $item.attr('data-title'),
                    src: $item.attr('data-src'),
                    user_id: $item.attr('data-user-id')
                };

                var dfd = $.Deferred();

                self.getUserById(item.user_id).done(function (user) {
                    item.username = user.username._content;

                    lines.hatena.push('[' + item.permalink + ':image=' + item.src + ']');
                    lines.markdown.push('[![](' + item.src + ')](' + item.permalink + ')');

                    lines.hatena.push('[' + item.permalink + ':title=photo by ' + item.username + ']');
                    lines.markdown.push('[photo by ' + item.username + '](' + item.permalink + ')');
                    dfd.resolve();
                });

                deferreds.push(dfd);
            });

            $.when.apply($, deferreds).done(function () {
                Hatena.Diary.extractSyntax(lines.hatena).done(function(data) {
                    lines.html = [data.html];
                }).fail(function(error) {
                    lines.html = lines.hatena;
                    Hatena.Diary.BUG(error);
                }).always(function() {
                    Hatena.Diary.EditorConnector.insertLines(lines);
                });
            });

        },
        _requestLoadItems: function (is_more) {
            var self = this;

            if (self.$searchInput.val() === '') return;

            self.isLoading = true;
            self.$indicator.show();
            self.$errorMessage.hide();

            self.loadItems(is_more).done(function(feed) {
                if (feed.length === 0 && self.$itemsContainer.find('.item').length === 0) {
                     self.$errorMessage.show();
                }
                else {
                    self.showItems(feed);
                }
            }).fail(function(res) {
                self.$errorMessage.show();
            }).always(function() {
                self.$indicator.hide();
                self.isLoading = false;
            });
        },
        showItems: function(items) {
            var self = this;

            var source = '';
            _.each(items, function (entry) {
                source += self.template({
                    item: entry
                });
            });
            self.$indicator.before(source);
            Hatena.Locale.updateTimestamps(self.$container[0]);
            $(self).triggerHandler('items-appended');
        },
        setupFormatSwitcher: function() {
            var self = this;
            var $formatsContainer = self.$container.find('.flickr-formats');
            $formatsContainer.on('change', function(e) {
                var $input = $(e.target);
                $formatsContainer.find('label.selected').removeClass('selected');
                $input.closest('label').addClass('selected');
            });
        }
    };
    Hatena.Diary.Util.extend(Hatena.Diary.Pages.Admin['user-blog-edit'].Flickr.prototype, Hatena.Diary.Pages.Admin['user-blog-edit'].MyCuration.prototype);


    // Flickrã®æ¤œç´¢ã‚’ç®¡ç†ã™ã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
    // load() â†’ forward() â†’ load() ã¿ãŸã„ã«é †ç•ªã«èª­ã‚€ã¨ãƒšãƒ¼ã‚¸ãƒ³ã‚°ã§ãã‚‹
    // resetã™ã‚‹ã¨ã€ãƒšãƒ¼ã‚¸ãƒ³ã‚°ã‚„æ¤œç´¢wordãŒè¨­å®šã—ç›´ã•ã‚Œã‚‹
    Hatena.Diary.Pages.Admin['user-blog-edit'].Flickr.Searcher = function () { this.init.apply(this, arguments); };
    Hatena.Diary.Pages.Admin['user-blog-edit'].Flickr.Searcher.prototype = {
        init: function (args) {
            var self = this;
            self.$searchInput = args.searchInput;
            self.reset();
        },

        load: function() {
            var self = this;
            var dfd = $.Deferred();

            var searchKeyword = self.searchKeyword;

            if (!searchKeyword) {
                dfd.reject();
                return dfd;
            }

            // ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã§ç”»åƒæ¤œç´¢
            $.ajax({
                url : "/api/flickr/search",
                type : "GET",
                data : {
                    word : searchKeyword,
                    page : self.page
                },
                dataType: "json"
            }).done(function(json) {
                var data = json.data;
                if (data.length === 0) {
                    // ãƒ‡ãƒ¼ã‚¿ãŒç„¡ããªã£ãŸã‚‰æ¬¡ãƒšãƒ¼ã‚¸ãªã—
                    self.has_next = false;
                }
                dfd.resolve(data);
            }).fail(function() {
                // ãƒ‡ãƒ¼ã‚¿ãŒå–å¾—ã§ããªã‹ã£ãŸã‚‰æ¬¡ãƒšãƒ¼ã‚¸ãªã—
                self.has_next = false;
                dfd.reject();
            });

            return dfd;
        },
        forward: function() {
            var self = this;
            self.page++;
        },
        reset: function() {
            var self = this;
            self.page = 1;
            self.has_next = true; // æ¬¡ãŒãªããªã£ãŸã‚‰falseã«
            self.resetSearchKeyword();
        },
        resetSearchKeyword: function() {
            var self = this;
            self.searchKeyword = self.$searchInput.val();
        }
    };

    Hatena.Diary.Pages.Admin['user-blog-edit'].Itunes = function () { this.init.apply(this, arguments) };
    Hatena.Diary.Pages.Admin['user-blog-edit'].Itunes.prototype = {
        parent: Hatena.Diary.Pages.Admin['user-blog-edit'].MyCuration,
        init: function (args) {
            var self = this;

            self.parent.prototype.init.call(self, args);

            self._templatesByType = {
                'default':    _.template(self.$container.find('.template').html()),
                'artist':     _.template(self.$container.find('.template-artist').html()),
                'collection': _.template(self.$container.find('.template-collection').html()),
                'audiobook':  _.template(self.$container.find('.template-collection').html())
            };
        },
        bindEvents: function () {
            var self = this;

            self.parent.prototype.bindEvents.call(self);

            self.$submit = self.$container.find('.itunes-keyword-submit');
            self.$media = self.$container.find('.itunes-media');
            self.$keyword = self.$container.find('.itunes-keyword');
            self.$welcomeMessage = self.$container.find('.items-welcome');

            self.$submit.click(function (event) {
                self.requestReload();
                return false;
            });

            self.$media.change(function (event) {
                self.requestReload();
                return false;
            });

            self.$keyword.keydown(function (event) {
                if (keyString(event) == 'RET') {
                    self.requestReload();
                    return false;
                }
            });
        },
        serviceName: 'Itunes',
        enableAutoPager: false,
        pasteReverseOrder: false,
        willRequestLoadItems: function (more) {
            var self = this;
            return self.$keyword.val() !== '';
        },
        loadItems: function(more) {
            var self = this;

            self.$welcomeMessage.addClass('disable');

            var term = self.$keyword.val();
            var queries = self.$media.val().split(':');
            var media = queries[0];
            var entity = queries[1];

            var data = {
                term: term,
                media: media,
                entity: entity
            };

            return $.ajax({
                url: '/api/itunes/search',
                data: data,
                type: 'GET',
                dataType: 'json'
            });
        },
        renderItem: function(item) {
            var self = this;

            var type = item.wrapperType || 'default';
            var template = self._templateByType(type);

            // ä¾¡æ ¼ã®è¡¨ç¤ºã‚’ã„ã„æ„Ÿã˜ã«ã™ã‚‹
            item._formattedPrice = '';
            if (item.formattedPrice !== undefined) {
                item._formattedPrice = item.formattedPrice;
            }
            else if (item.trackPrice !== undefined || item.collectionPrice !== undefined) {
                var amount = item.trackPrice || item.collectionPrice;
                var currency = item.currency;
                if (amount < 0) {
                    // è²©å£²ã•ã‚Œã¦ã„ãªã„ã‚¢ã‚¤ãƒ†ãƒ ã®ã¨ãä¾¡æ ¼ãŒ -1 ã«ãªã£ã¦ã„ã‚‹ã®ã§ç„¡è¦–
                }
                else if (currency === 'JPY') {
                    item._formattedPrice = 'Â¥' + amount;
                }
                else {
                    item._formattedPrice = currency + ' ' + amount;
                }
            }

            // ã‚¸ãƒ£ãƒ³ãƒ«ã‚’ã„ã‚ã„ã‚è€ƒæ…®ã—ã¦å‡ºã™
            item._genre = '';
            if (item.genres !== undefined && _.isArray(item.genres) && item.genres.length > 0) {
                item._genre = item.genres[0];
            }
            else if (item.primaryGenreName !== undefined) {
                item._genre = item.primaryGenreName;
            }

            return template({
                item: item
            });
        },
        _templateByType: function(type) {
            var self = this;
            return self._templatesByType[type] || self._templatesByType['default'];
        },
        insertItems: function(items) {
            var self = this;

            var lines = {
                hatena:   [],
                markdown: []
            };
            _.each(items, function($item) {
                var item = {
                    permalink: $item.attr('data-permalink')
                };

                lines.hatena.push('[' + item.permalink + ':embed]');
                lines.markdown.push('[' + item.permalink + ':embed]');
            });

            Hatena.Diary.extractSyntax(lines.hatena).done(function(data) {
                lines.html = ['', data.html, ''];
            }).fail(function(error) {
                lines.html = lines.hatena;
                Hatena.Diary.BUG(error);
            }).always(function() {
                if (Hatena.Diary.EditorConnector.isiOS() || Hatena.Diary.EditorConnector.isAndroid()) {
                    // ã‚¹ãƒãƒ•ã‚©ã‚¢ãƒ—ãƒªã®ã¨ãã†ã¾ãè¡¨ç¤ºã§ããªã„ã®ã§è¨˜æ³•ãã®ã¾ã¾ã«ã—ã¦ãŠã
                    lines.html = lines.hatena;
                }
                Hatena.Diary.EditorConnector.insertLines(lines);
            });
        }
    };

    Hatena.Diary.Util.extend(Hatena.Diary.Pages.Admin['user-blog-edit'].Itunes.prototype, Hatena.Diary.Pages.Admin['user-blog-edit'].MyCuration.prototype);

    // PRè¨˜äº‹è¡¨ç¤ºãƒœã‚¿ãƒ³ï¼Œè¨˜äº‹ã®ãƒªã‚¹ãƒˆã‚’ç®¡ç†
    Hatena.Diary.Pages.Admin['user-blog-edit'].Promotion = function () { this.init.apply(this, arguments); };
    Hatena.Diary.Pages.Admin['user-blog-edit'].Promotion.prototype = {
        init: function (args) {
            var self = this;

            self.$element = args.$element;
            self.$buttons  = args.$buttons;
            self.$cancelButtons = args.$cancelButtons;

            self.entries = _.map(self.$element.find('.promotion-entry'), function(entry) {
                return new Hatena.Diary.Pages.Admin['user-blog-edit'].Promotion.Entry({
                    manager: self,
                    $element: $(entry)
                });
            });

            // è¡¨ç¤ºã™ã‚‹ã‚¨ãƒ³ãƒˆãƒªã‚’ 2ä»¶ ç”¨æ„ã™ã‚‹ ã¾ã èª­ã¾ã‚Œã¦ã„ãªã„ã‚¨ãƒ³ãƒˆãƒªå„ªå…ˆ
            var unreadEntries = self.getUnreadEntries();
            var readEntries = self.getReadEntries();
            self.activeEntries = _.first( unreadEntries.concat( _.shuffle( readEntries ) ), 2 );

            self.updateButtonStatus();
            self.bindEvents();
        },
        updateButtonStatus: function() {
            var self = this;

            _.each( self.activeEntries, function(entry, i) {
                var $button = $( self.$buttons.get(i) );
                $button.find('.promotion-entry-title').text(entry.getTitle());
                $button.css('display', 'inline-block');

                if (entry.isRead()) {
                    $button.removeClass('active');
                }
                else {
                    $button.addClass('active');
                }
            });
        },
        bindEvents: function() {
            var self = this;

            _.each(self.$buttons, function(button,i) {
                $(button).click( function(event) {
                    self.showEntry( self.activeEntries[i] );
                } );
            });

            _.each(self.$cancelButtons, function(cancelButton,i) {
                var $cancelButton = $(cancelButton);
                $cancelButton.click( function() {
                    var entry =  self.activeEntries[i];
                    // 1åº¦æ¶ˆã™ã¨å¾©æ´»ã—ãªã„
                    entry.setAsClosed();

                    self.$buttons[i].remove();
                    $cancelButton.remove();
                    return false;
                } );
            } );

            // close
            self.$element.on('click', '.promotion-close', function() {
                self.hide();
            });

            // pager
            self.$element
                .on('click', '[data-target-promotion-index]', function () {
                    var index = $(this).attr('data-target-promotion-index');
                    self.showEntryAt(index);
                })
                .on('click', '[data-rel]', function () {
                    var rel = $(this).attr('data-rel');
                    var index = self.getCurrentEntry().$element.attr('data-' + rel);
                    self.showEntryAt(index);
                });
        },
        show: function () {
            var self = this;

            self.setPosition();
            self.setupBackground();
            self.$element.show();
        },
        hide: function () {
            var self = this;

            self.$element.hide();
            self.removeBackground();
        },
        showEntryAt: function (index) {
            var self = this;

            var entry = self.entries[index];
            if (entry) {
                self.showEntry(entry);
            }
        },
        showEntry: function (entry) {
            var self = this;

            self.index = entry.getIndex();

            self.show();

            _.each(self.entries, function(entry) {
                entry.hide();
            });

            entry.show();

            self.updatePagerMarker();
            self.updateButtonStatus();
        },
        getCurrentEntry: function () {
            var self = this;
            return self.entries[self.index];
        },
        setPosition: function() {
            var self = this;

            // ä¸­å¤®æƒãˆï¼Œã¡ã‚‡ã£ã¨ä¸Šã®ã»ã†ã«é…ç½®ã—ã¾ã™ï¼admin-headerã¯relativeã«ãªã£ã¦ã‚‹ã®ã§ãã®åˆ†ã¯å¼•ã
            self.$element.css({
                left: ($(document).width() - self.$element.width()) * 0.5 - self.$element.parent().offset().left,
                top: ($(document).height() - self.$element.height()) * 0.25 - $('#admin-header').height()
            });
        },
        setupBackground: function() {
            var self = this;

            var $background = $('.promotion-entry-background');
            if (!$background.get(0)) {
                $background = $('<div>').addClass('promotion-entry-background').appendTo(document.body);
            }
            $background.stop().show().animate({
                opacity: 0.3
            });
            $background.one('click', function() {
                self.hide();
            });
        },
        removeBackground: function() {
            var self = this;

            $('.promotion-entry-background').stop(true).animate({
                opacity: 0.0
            }, null, null, function() {
                $(this).hide();
            });
        },
        updatePagerMarker: function () {
            var self = this;

            self.$element.find('.promotion-pager-markers .pager-marker').each(function (i) {
                $(this).removeClass('selected');
                if (i === self.index) {
                    $(this).addClass('selected');
                }
            });
        },
        getReadEntries: function() {
            var self = this;

            return _.filter(self.entries, function(entry) {
                return entry.isRead() && ! entry.isClosed();
            });
        },
        getUnreadEntries: function() {
            var self = this;

            return _.filter(self.entries, function(entry) {
                return ! entry.isRead() && ! entry.isClosed();
            });
        }
    };

    // è²¼ã‚Šä»˜ã‘ãƒœãƒƒã‚¯ã‚¹ã‚’è¡¨ç¾ã™ã‚‹ã‚¯ãƒ©ã‚¹
    Hatena.Diary.Pages.Admin['user-blog-edit'].EmbedBox = function () { this.init.apply(this, arguments) };
    Hatena.Diary.Pages.Admin['user-blog-edit'].EmbedBox.prototype = {
        init: function(args) {
            var self = this;
            self.$container = args.$container;
            self.$urlInput = self.$container.find('.js-embed-url');
            self.$previewButton = self.$container.find('.js-preview-button');
            self.$embedTypes = self.$container.find('.js-embed-types');
            self.$pasteButton = self.$container.find('.js-paste-button');
            self.$showEmbedCheckbox = self.$container.find('.js-show-embed-box-on-paste-url');
            self.candidates = [];

            // showã—ãŸã‚‰è¿”ã™ï¼è²¼ã‚Šä»˜ã‘æˆåŠŸã—ãŸã‚‰resolve, å¤±æ•—ã—ãŸã‚‰reject
            self.session = $.Deferred();
            self.session.reject();

            self.$container.on('click', '.js-close', function() {
                self.hide();
            });

            self.$previewButton.on('click', function() {
                self.requestPreview();
            });

            self.$urlInput.on('keydown', function(event) {
                if(keyString(event) === 'RET') {
                    self.requestPreview();
                    return false;
                }
            });

            self.$pasteButton.on('click', function() {
                self.requestPaste();
            });

            self.$container.on('keydown', ':input', function(event) {
                // ESCæŠ¼ã—ãŸã‚‰é–‰ã˜ã‚‹
                // Compositionã‚¤ãƒ™ãƒ³ãƒˆè¦‹ã¦ãªã„ã®ã§æ—¥æœ¬èªå…¥åŠ›ä¸­ã‚‚åå¿œã™ã‚‹ã‘ã©ï¼ŒURLå…¥åŠ›ã™ã‚‹æ¬„ã—ã‹ãªã„ã®ã§è€ƒæ…®ã—ãªã„
                if(keyString(event) === 'ESC') {
                    self.hide();
                    return false;
                }
            });

            if (Hatena.Diary.Browser.isIE) {
                var editor = Hatena.Diary.Editor.Support.currentEditor;
                // IEã§ã¯ï¼Œãƒ¢ãƒ¼ãƒ€ãƒ«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦é–‹ããƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯ã—ãŸç¬é–“ã«ï¼Œã‚¨ãƒ‡ã‚£ã‚¿ã®é¸æŠç¯„å›²å–ã‚Œãªã„ã®ã§ï¼Œã‚¿ã‚¤ãƒãƒ¼ã§ç›£è¦–ã™ã‚‹â€¦â€¦â€¦
                setInterval(function() {
                    try {
                        self.selectionRangeInTimer = editor.getSelectionRange();
                        self.selectionContentInTimer = editor.isCollapsed() ? null : editor.getSelectionText();
                    } catch(ignore) {
                        // ã„ã‚ã‚“ãªã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹ã‘ã©äº›ç´°ãªå•é¡Œãªã®ã§ç„¡è¦–ã™ã‚‹
                    }
                }, 1000);

            }

            // URLè²¼ã‚Šä»˜ã‘ãŸã¨ãã«è²¼ã‚Šä»˜ã‘ãƒœãƒƒã‚¯ã‚¹å‡ºã™ã‹ã®åˆ¶å¾¡
            // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚ªãƒ³ï¼Œã‚ªãƒ—ãƒˆã‚¢ã‚¦ãƒˆå¯èƒ½
            // ãƒšãƒ¼ã‚¸ãƒ­ãƒ¼ãƒ‰æ™‚ã«localStorageâ†’inputã«æ›¸ãå‡ºã—ï¼Œä»¥é™ã¯inputã‚’è¦‹ã‚‹
            var key = 'EmbedBox.show-embed-box-on-paste-url';
            var pasteEnabled = true;
            try {
                pasteEnabled = localStorage.getItem(key) !== 'false';
            } catch(ignore) { }
            if (pasteEnabled) {
                self.$showEmbedCheckbox.prop('checked', true);
            }

            self.$showEmbedCheckbox.on('change', function() {
                var enabled = self.isEnabledOnPasteURL();
                localStorage.setItem(key, enabled);
                Hatena.Diary.trackEvent('EmbedBox.showFromPaste.setEnable.' + enabled);
            });

            $(document).on('show-embed-box', function() {
                self.show();
            });

            self.$embedTypes.on('change', ':input', function() {
                var $input = $(this);
                self.$embedTypes.find('.js-embed-type.selected').removeClass('selected');
                $input.parents('.js-embed-type').toggleClass('selected');
            });

            self.$embedTypes.on('dblclick', '.js-embed-type', function() {
                self.requestPaste();
            });
        },
        // è²¼ã‚Šä»˜ã‘æ™‚ã«è²¼ã‚Šä»˜ã‘ãƒœãƒƒã‚¯ã‚¹é–‹ãã®æœ‰åŠ¹ã‹ã‚’è¿”ã™
        isEnabledOnPasteURL: function() {
            return this.$showEmbedCheckbox.prop('checked');
        },
        // ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦é–‹ã
        show: function() {
            var self = this;
            if (self.isShown()) return;

            self.$container.css('left', ($(window).width()-self.$container.width())/2);

            self.$embedTypes.find('.js-embed-type.selected').removeClass('selected');

            Hatena.Diary.Window.show(self.$container, {
                showBackground: true,
                destroy : function () {
                    self.onHide();
                }
            });

            _.defer(function() {
                self.$urlInput.focus()[0].select();
            });

            self.checkSelection();

            Hatena.Diary.trackEvent('EmbedBox.show');

            self.session = $.Deferred();
            return self.session.promise();
        },
        setURL: function(url) {
            this.$urlInput.val(url);
        },
        isShown: function() {
            return this.$container.is(':visible');
        },
        // ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦é–‰ã˜ã‚‹
        hide: function() {
            var self = this;
            Hatena.Diary.Window.hide(self.$container);
        },
        // ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦é–‰ã˜ã‚‹ã¨ãã«å‘¼ã°ã‚Œã‚‹callback
        onHide: function() {
            var self = this;
            self.session.reject();
            self.reset();
        },
        // ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦é–‹ã„ãŸã¨ãã®ã‚¨ãƒ‡ã‚£ã‚¿ã®é¸æŠç¯„å›²ã‚’ä¿å­˜ã—ã¦ãŠã
        checkSelection: function() {
            var self = this;
            if (!Hatena.Diary.Browser.isIE) {
                var editor = Hatena.Diary.Editor.Support.currentEditor;
                self.selectionRange = editor.getSelectionRange();
                self.selectionContent = editor.isCollapsed() ? null : editor.getSelectionText();
            } else {
                // IEã§ã¯ï¼Œç›´å‰ã®å€¤ã‚’ä½¿ã†
                self.selectionRange = self.selectionRangeInTimer;
                self.selectionContent = self.selectionContentInTimer;
            }
        },
        // å…¥åŠ›ã•ã‚ŒãŸURLã‚’ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã™ã‚‹
        requestPreview: function() {
            var self = this;

            var url = self.$urlInput.val();
            if (!url) return;

            // ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒ¼ã‹ã‚‰ã‚³ãƒ”ãƒ¼ã™ã‚‹ã¨ãƒ—ãƒ­ãƒˆã‚³ãƒ«æŠœã‘ã‚‹ã®ã¸ã®ãŠã‚‚ã¦ãªã—
            if (!url.match(/^https?:\/\//)) {
                url = 'http://' + url;
            }

            self.reset();

            // showã—ãŸã¨ãã¡ã‚‡ã£ã¨ç½®ã„ã¦focusã—ã¦ã‚‹ã®ã§ï¼Œã“ã£ã¡ã‚‚
            _.defer(function() {
                self.$pasteButton.attr('disabled', false).removeClass('disabled').focus();
            });

            if (self.selectionRange && self.selectionContent) {
                self.candidates.push(self.createQuoteCandidate(url, self.selectionContent));
            }
            self.candidates.push(self.createImageCandidate(url));
            self.candidates.push(self.createEmbedCandidate(url));
            self.candidates.push(self.createTitleCandidate(url));
            self.candidates.push(self.createURLCandidate(url));
        },
        // å€™è£œã‚’å…¨éƒ¨éš ã—ã¦ï¼Œè²¼ã‚Šä»˜ã‘ãƒœã‚¿ãƒ³ã‚’disabledã«ã™ã‚‹ï¼æ–°ã—ã„URLã‚’ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã™ã‚‹ã¨ãã¨ï¼Œãƒ¢ãƒ¼ãƒ€ãƒ«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’é–‰ã˜ã‚‹ã¨ãã«å‘¼ã°ã‚Œã‚‹ï¼
        reset: function() {
            var self = this;
            _.each(self.candidates, function(candidate) {
                candidate.kill();
            });
            self.candidates = [];
            self.$pasteButton.attr('disabled', true).addClass('disabled');
        },
        // è²¼ã‚Šä»˜ã‘
        requestPaste: function() {
            var self = this;

            if (self.$pasteButton.is(':disabled')) return;

            // è²¼ã‚Šä»˜ã‘ã‚‹ã®ã¯ï¼Œãƒã‚§ãƒƒã‚¯ã•ã‚Œã¦ã‚‹ã‚„ã¤ã‹ï¼Œä¸€ç•ªä¸Šã®ã‚„ã¤
            var candidate = _.find(self.candidates, function(candidate) { return candidate.isChecked() }) || _.find(self.candidates, function(candidate) { return candidate.isEnabled() });

            Hatena.Diary.trackEvent('EmbedBox.paste');
            Hatena.Diary.trackEvent('EmbedBox.paste.' + candidate.type);

            self.session.resolve(candidate);

            candidate.paste();
            self.hide();
        },
        createEmbedCandidate: function(url) {
            var self = this;

            var $iframe = $('<iframe width="100%" scrolling="no">');
            var src = Hatena.Diary.URLGenerator.user_blog_url('/preview_url_embed') + '?' + $.param({ url: url});

            var embedSucceed = $.Deferred();

            // iframeãŒDOMã«åŸ‹ã‚è¾¼ã¾ã‚Œã¦ãªã„ã¨Messengerä½¿ãˆãªã„(postMessage.jsã®ä»•æ§˜)ã®ã§ï¼Œã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’ãšã‚‰ã™ï¼
            _.defer(function() {
                var messenger = Messenger.createForFrame($iframe[0], src);
                messenger.addEventListener('resize', function (height) {
                    $iframe.css('height', height);
                    embedSucceed.resolve();
                });
                messenger.addEventListener('close', function () {
                    $iframe.remove();
                    embedSucceed.reject();
                });
            });

            // youtubeã¨ã‹ï¼Œå¤§åŠã¯ï¼Œiframeã‚„ï¼Œscriptã‚’å‡ºã™ã®ã§ï¼Œãƒ•ã‚£ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ€ã§æ¶ˆã•ã‚Œã¦ã—ã¾ã†ï¼
            // ãã®ãŸã‚ï¼Œ:embed + :citeã‚’æŒ¿å…¥ã™ã‚‹ï¼
            // twitterã®statusã¨iTunesã¯divã¨scriptã‚’å‡ºã™ã®ã§ï¼Œ:embed1ã¤ã§äº‹è¶³ã‚Šã‚‹ï¼:citeå‡ºã•ãªã„
            var syntax;
            var anchor = document.createElement('a');
            anchor.href = url;
            if (
                (anchor.host === 'itunes.apple.com') ||
                (anchor.host == 'twitter.com' && anchor.pathname.match(/\/status\//))
            ) {
                syntax = "["+url+":embed]";

                // æ–‡ã®æœ«å°¾ã«iTuneså…¥ã‚Œã‚‹ã¨ä»¥é™ç·¨é›†ã§ããªããªã‚‹ã®ã§(tinyMCEãŒæ‚ªã„)ï¼Œã†ã—ã‚ã«æ”¹è¡Œã¤ã‘ãŸã„ï¼
                // æœ¬æ¥ã¯tinymceå´ã§ãªã‚“ã¨ã‹ã—ã¦ã»ã—ã„
                if ($('#syntax').val() === 'html') {
                    syntax += "\n\n ";
                }
            } else {
                syntax = "["+url+":embed:cite]";
            }

            return new Hatena.Diary.Pages.Admin['user-blog-edit'].EmbedBox.Candidate({
                $root_container: self.$container,
                type: 'embed',
                syntax: syntax,
                loader: embedSucceed.promise(),
                $preview: $iframe
            });
        },

        createImageCandidate: function(url) {
            var self = this;

            var imageLoaded =  $.Deferred();
            var $img = $('<img>').on('load', function() {
                imageLoaded.resolve();
            }).on('error', function() {
                imageLoaded.reject();
            }).attr('src', url);

            return new Hatena.Diary.Pages.Admin['user-blog-edit'].EmbedBox.Candidate({
                $root_container: self.$container,
                type: 'image',
                selectionRange: self.selectionRange,
                // :imageã ã‘ã§ã¯ï¼Œãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã™ã‚‹å ´åˆãªã©ã«ï¼Œã†ã¾ãæ‰±ãˆãªã„ï¼ç”»åƒã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèªæ¸ˆãªã®ã§ï¼Œ:image=ã§imgã®srcã«ã‚‚æŒ‡å®šã™ã‚‹ï¼
                syntax: '[' + url + ':image=' + url + ']',
                loader: imageLoaded.promise(),
                $preview: $img
            });
        },
        createTitleCandidate: function(url) {
            var self = this;

            var $preview = $('<div>');

            var loadInfo = $.Deferred();

            $.ajax({
                type: 'POST',
                dataType: 'json',
                url: '/api/extract_title',
                data: {
                    url: url,
                    rkm: Hatena.Diary.data('rkm'),
                    rkc: Hatena.Diary.data('rkc')
                }
            }).done(function(info) {
                if (info.title) {
                    $preview.text(info.title);
                    loadInfo.resolve();
                } else {
                    loadInfo.reject();
                }
            }).fail(function() {
                loadInfo.reject();
            });

            return new Hatena.Diary.Pages.Admin['user-blog-edit'].EmbedBox.Candidate({
                $root_container: self.$container,
                type: 'title',
                selectionRange: self.selectionRange,
                syntax: '['+url+':title]',
                loader: loadInfo.promise(),
                $preview: $preview
            });
        },
        createURLCandidate: function(url) {
            var self = this;

            var $preview = $('<div>').text(url);

            return new Hatena.Diary.Pages.Admin['user-blog-edit'].EmbedBox.Candidate({
                $root_container: self.$container,
                type: 'url',
                selectionRange: self.selectionRange,
                syntax: '['+url+']',
                loader: $.Deferred().resolve().promise(),
                $preview: $preview
            });
        },
        createQuoteCandidate: function(url, quote) {
            var self = this;
            var $preview = $('<pre>').text(quote);

            return new Hatena.Diary.Pages.Admin['user-blog-edit'].EmbedBox.Candidate({
                $root_container: self.$container,
                type: 'quote',
                selectionRange: self.selectionRange,
                syntax: '['+url+':title=' + quote + ']',
                loader: $.Deferred().resolve().promise(),
                $preview: $preview,
                paste: function() {
                    var editor = Hatena.Diary.Editor.Support.currentEditor;
                    editor.setSelectionRange(self.selectionRange);
                    editor.createLink(url);
                }
            });
        }
    };

    // ã‚ã‚‹URLã®è²¼ã‚Šä»˜ã‘å½¢å¼ã‚’è¡¨ç¾ã™ã‚‹ã‚¯ãƒ©ã‚¹ï¼viewã®æ›´æ–°ï¼Œsyntaxã®ç®¡ç†ãªã©
    Hatena.Diary.Pages.Admin['user-blog-edit'].EmbedBox.Candidate = function () { this.init.apply(this, arguments) };
    Hatena.Diary.Pages.Admin['user-blog-edit'].EmbedBox.Candidate.prototype = {
        // args: { $root_container, type, syntax|paste, load, $preview }
        init: function(args) {
            var self = this;
            self.type = args.type;
            self.selectionRange = args.selectionRange;

            // syntaxæŒ‡å®šã•ã‚ŒãŸã‚‰ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®æŒ™å‹•(1è¡ŒãŒãƒªãƒ³ã‚¯ã«ãªã‚‹)
            if (args.syntax) {
                self.syntax = args.syntax;
            }

            // pasteé–¢æ•°æŒ‡å®šã™ã‚Œã°pasteã®æŒ™å‹•ã‚’ä¸Šæ›¸ãã§ãã‚‹
            if (args.paste) {
                self.paste = args.paste;
            }

            self.$container = args.$root_container.find('[data-embed-type="' + self.type + '"]');
            self.$container.hide();
            self.$radio = self.$container.find('.js-type-select');
            self.$radio.attr('checked', false);


            // previewContainreã«ã¯å¼•æ•°ã§æ¸¡ã•ã‚ŒãŸãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®ãŸã‚ã®è¦ç´ ã‚’appendã™ã‚‹ï¼æœ‰åŠ¹ãªã“ã¨ãŒåˆ†ã‹ã£ãŸã‚‰previewContainerã¯è¡¨ç¤ºã•ã‚Œã‚‹ï¼
            self.$previewContainer = self.$container.find('.js-preview-container');
            self.$previewContainer.hide();
            self.$previewContainer.append(args.$preview);

            // æœ‰åŠ¹ãªã“ã¨ãŒåˆ†ã‹ã£ãŸã‚‰resolveã•ã‚Œã‚‹ã‚„ã¤
            self.loader = args.loader;

            self.loader.done(function() {
                self.enable();
            }).fail(function() {
                self.disable();
            });

        },
        // æœ‰åŠ¹ã§ã‚ã‚‹ã‹(ãŸã¨ãˆã°ï¼Œ:imageå½¢å¼ã§è²¼ã‚ŠãŸãã¦ï¼Œã‹ã¤ï¼Œç”»åƒã§ã‚ã‚‹ã“ã¨ãŒåˆ†ã‹ã£ã¦ã„ã‚‹ã‹)
        isEnabled: function() {
            var self = this;
            return self.loader.state() === "resolved";
        },
        // æœ‰åŠ¹ãªã“ã¨ãŒã‚ã‹ã£ãŸã¨ã
        enable: function() {
            var self = this;
            self.$container.show();
            self.$previewContainer.show();
        },
        // ç„¡åŠ¹ãªã“ã¨ãŒã‚ã‹ã£ãŸã¨ã
        disable: function() {
            var self = this;
            self.$container.hide();
            self.$previewContainer.empty();
        },
        // ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’çµ‚äº†ã™ã‚‹
        kill: function() {
            var self = this;
            self.disable();
        },
        // radioãƒœã‚¿ãƒ³ãŒé¸æŠã•ã‚Œã¦ã„ã‚‹ã‹
        isChecked: function() {
            var self = this;

            return self.$radio.prop('checked');
        },
        // ãƒªãƒ³ã‚¯ã‚’æŒ¿å…¥
        paste: function() {
            var self = this;
            self.getSyntaxLines().done(function(lines) {
                if (self.selectionRange) {
                    Hatena.Diary.Editor.Support.currentEditor.setSelectionRange(self.selectionRange);
                }

                Hatena.Diary.EditorConnector.insertLines(lines);
            });
        },
        // è²¼ã‚Šä»˜ã‘ç”¨ã¯ã¦ãªè¨˜æ³•ã‚’resolveã™ã‚‹Deferredã‚’è¿”ã™
        getSyntaxLines: function() {
            var self = this;
            var gotSyntax = $.Deferred();

            var lines_data = self.syntax.split('\n');
            var lines = {
                html:     lines_data,
                hatena:   lines_data,
                markdown: lines_data
            };

            Hatena.Diary.extractSyntax(self.syntax).done(function(data) {
                lines.html = [data.html];
            }).always(function() {
                gotSyntax.resolve(lines);
            });

            return gotSyntax.promise();
        }
    };

    // PRè¨˜äº‹1è¨˜äº‹ã«å¯¾å¿œã™ã‚‹ã‚¯ãƒ©ã‚¹
    Hatena.Diary.Pages.Admin['user-blog-edit'].Promotion.Entry = function () { this.init.apply(this, arguments); };
    Hatena.Diary.Pages.Admin['user-blog-edit'].Promotion.Entry.prototype = {
        init: function (args) {
            var self = this;
            self.$element = args.$element;
            self.manager  = args.manager;
            self.bindEvents();
        },
        bindEvents: function() {
            var self = this;
            self.$element.on('click', '[data-keyword]', function(button) {
                self.manager.hide();
                Hatena.Diary.Editor.Support.currentEditor.insert($(this).attr('data-keyword'));
                Hatena.Diary.trackEvent('Promotion.Entry.Insert.' + self.entryID());
            });
        },
        isRead: function() {
            var self = this;
            try {
                return localStorage[self.localStorageKey()];
            } catch(ignore) {}
        },
        setAsRead: function() {
            var self = this;
            try {
                localStorage[self.localStorageKey()] = true;
            } catch(ignore) {}
        },
        localStorageKey: function() {
            var self = this;
            return 'Hatena.Diary.Promotion.Entry.read.' + self.entryID();
        },
        entryID: function() {
            var self = this;
            return self.$element.attr('data-promotion-entry-id');
        },
        isClosed: function() {
            var self = this;
            try {
                return localStorage['Hatena.Diary.Promotion.Entry.closed.' + self.entryID()];
            } catch(ignore) {}
        },
        setAsClosed: function() {
            var self = this;
            try {
                localStorage['Hatena.Diary.Promotion.Entry.closed.' + self.entryID()] = true;
            } catch(ignore) {}
        },
        show: function() {
            var self = this;
            self.$element.stop().fadeIn();

            Hatena.Diary.trackEvent('Promotion.Entry.Show.' + self.entryID());

            self.setAsRead();
        },
        hide: function() {
            var self = this;
            self.$element.fadeOut();
        },
        getTitle: function () {
            var self = this;
            return self.$element.attr('data-promotion-title');
        },
        getIndex: function () {
            var self = this;
            return +self.$element.attr('data-promotion-index');
        }
    };

    Hatena.Diary.Pages.Admin['user-blog-edit'].updateOgDescriptionInput = function () {
        var $input = $('#og-description-input');

        $.ajax({
            url: './preview_og_description',
            method: 'POST',
            data: {
                body: $('#body').val(),
                syntax: $('#syntax').val(),
                rkm: Hatena.Diary.data('rkm'),
                rkc: Hatena.Diary.data('rkc')
            },
            dataType: 'json'
        }).done(function (data) {
            $('#og-description-input').attr('placeholder', _.escape(data.text));
        });
    };

    Hatena.Diary.Pages.Admin['user-blog-edit'].setupOgDescriptionInput = function (editor) {
        // å¸¸ã«ä½¿ã†ã‚‚ã®ã§ã¯ãªã„ã®ã§, ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ç¯€ç´„ã™ã‚‹
        // è¦‹ãˆã¦ãªã„ã¨ãã¯æ›´æ–°ã—ãªã„
        editor.bind('change', _.debounce(function () {
            if ($('#og-description').is(':hidden')) return;

            Hatena.Diary.Pages.Admin['user-blog-edit'].updateOgDescriptionInput();
        }, 1000));

        // ç·¨é›†ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’è¡¨ç¤ºã™ã‚‹ã¨ãã«æ›´æ–°ã™ã‚‹
        $('.curation-bar-itemlist [data-support-type="editor-option"]').on('click', function () {
            Hatena.Diary.Pages.Admin['user-blog-edit'].updateOgDescriptionInput();
        });
    };
})(jQuery);

(function($){
    // ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³(Entries, Categories)ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã¯ãƒšãƒ¼ã‚¸å†…ã«é«˜ã€…1ã¤ã—ã‹å­˜åœ¨ã›ãšï¼ŒCollectionsã‹ã‚‰å‚ç…§ã§ãã‚‹ï¼
    // å€‹ã€…ã®Modelã‹ã‚‰å‚ç…§ã—ãŸã„ã¨ãã¯ã“ã“ã‹ã‚‰å‘¼ã¹ã‚‹ï¼
    // ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã¨æ˜ã‚‰ã‹ã«ä¸€å¯¾ä¸€ã§å¯¾å¿œã™ã‚‹ã‚‚ã®ã¯ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã§æ¸¡ã™ã¹ã(ãŸã¨ãˆã°EntriesViewã®ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã«ã¯entriesã‚’æ¸¡ã™)
    var Collections = {
        entries: null,
        categories: null
    };
    // ã‚¨ãƒ³ãƒˆãƒª1ã¤ã‚’è¡¨ã™ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
    var Entry = function(data){
        this.data = data;
    };
    Entry.prototype = {
        // è¡¨ç¤ºç”¨ã®ãƒ‡ãƒ¼ã‚¿
        getUUID: function() {
            return this.data.uuid;
        },
        getURL: function() {
            return this.data.url;
        },
        getEditURL: function() {
            return this.data.edit_url;
        },
        getTitle: function() {
            return this.data.title;
        },
        getSummary: function() {
            return this.data.summary;
        },
        getCreated: function() {
            return this.data.created;
        },
        getCreatedTime: function() {
            // epoch * 1000
            return this.getCreatedDate().getTime();
        },
        getCreatedDate: function() {
            return Hatena.Diary.Util.parseW3CDTF(this.data.created);
        },

        // datetimeã¯nullã®å ´åˆãŒã‚ã‚‹ã®ã§æ³¨æ„
        getDatetime: function() {
            return this.data.datetime;
        },
        getDatetimeTime: function() {
            // epoch * 1000
            var date = this.getDatetimeDate();

            if (date) {
                return date.getTime();
            } else {
                return null;
            }
        },
        getDatetimeDate: function() {
            return Hatena.Diary.Util.parseW3CDTF(this.data.datetime);
        },

        getAuthorName: function() {
            return this.data.author_name;
        },
        getCommentCount: function() {
            return this.data.comment_count;
        },
        getCategories: function() {
            return this.data.categories;
        },
        isPublic: function() {
            return this.data.is_public;
        },
        isScheduledEntry: function() {
            return this.data.is_scheduled_entry;
        },

        // æ“ä½œç³»
        select: function() {
            this.data.isSelected = true;
            $(this).triggerHandler('change');
        },
        unselect: function() {
            this.data.isSelected = false;
            $(this).triggerHandler('change');
        },
        isSelected: function() {
            return this.data.isSelected;
        },
        // ã“ã®ã‚¨ãƒ³ãƒˆãƒªã‚’ç”»é¢ã‹ã‚‰æ¶ˆã™
        // DBã‹ã‚‰æ¶ˆã•ã‚Œã‚‹ã‚ã‘ã§ã¯ãªã„
        remove: function() {
            $(this).triggerHandler('remove');
        },
        // ã‚«ãƒ†ã‚´ãƒªã‚’è¿½åŠ ã™ã‚‹
        addCategory: function(category_name) {
            if (_.contains(this.data.categories, category_name)) return;
            if (!this.data.categories) {
                this.data.categories = [];
            }
            this.data.categories.push(category_name);
            $(this).triggerHandler('change');
        },
        // è¨˜äº‹ã‚’ç·¨é›†ã§ãã‚‹ã‹ã©ã†ã‹
        canBeManageEntry: function() {
          return this.data.can_be_manage_entry;
        },
        // ä¸‹æ›¸ããƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼tokenä½œã‚Œã‚‹ã‹ã©ã†ã‹
        canCreateDraftPreviewToken : function () {
          return this.data.can_create_draft_preview_token;
        }
    };

    var EntryView = function(entry) {
        var self = this;
        self.entry = entry;

        self.rootTemplate = _.template($('.js-entry-root-template').html().replace(/^\s*/, '').replace(/\s*$/, ''));
        self.elementTemplate = _.template($('.js-entry-inner-template').html());

        self.render();
        $(self.entry).on('change', function() {
            self.render();
        }).on('remove', function() {
            self.remove();
        });
        self.$element.on('change', 'input', function() {
            var $input = $(this);
            if ($input.is(':checked')) {
                self.entry.select();
            } else {
                self.entry.unselect();
            }
            $(self.entry).triggerHandler('select');
        });
    };
    EntryView.prototype = {
        render: function() {
            // $elementã¯ä¸€åº¦ã ã‘ä½œã‚Šï¼Œä»¥å¾Œã¯æœ€åˆã«ä½œã£ãŸ$elementã®å†…å®¹ã‚’æ›´æ–°ã™ã‚‹ï¼
            if (!this.$element) {
                this.$element = $($.parseHTML(this.rootTemplate({entry: this.entry})));
            }

            this.$element.html(this.elementTemplate({entry: this.entry}));
            // æ¤œç´¢ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æŒ‡å®šã•ã‚Œã¦ã„ãŸã‚‰ãƒã‚¤ãƒ©ã‚¤ãƒˆã™ã‚‹
            if (Collections.entries && Collections.entries.getKeyword()) {
                var escapedKeyword = _.escape(Collections.entries.getKeyword());

                this.$element.find('.js-search-entry-title').html(function (i, html) {
                    return html.split(escapedKeyword).join('<span class="entry-search-keyword">' + escapedKeyword+ '</span>');
                });

                this.$element.find('.js-search-entry-body').html(function (i, html) {
                    return html.split(escapedKeyword).join('<span class="entry-search-keyword">' + escapedKeyword + '</span>');
                });
            }

            Hatena.Locale.updateTimestamps(this.$element[0]);
        },
        remove: function() {
            this.$element.remove();
        },
        getElement: function() {
            return this.$element;
        }
    };

    // ã‚¨ãƒ³ãƒˆãƒªã®ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ï¼Œèª­ã¿è¾¼ã¿ï¼Œã‚¯ã‚¨ãƒªã®ç®¡ç†
    var Entries = function() {
    };
    Entries.prototype = {
        // æŒ‡å®šã—ãŸã‚¯ã‚¨ãƒªã§èª­ã¿è¾¼ã‚€
        load: function() {
            var self = this;

            var data = {};
            if (self.keyword) {
                data.q = self.keyword;
            }
            if (self.category) {
                data.category = self.category;
            }

            if (self.getPermission() !== 'all') {
                data.permission = self.getPermission();
            }

            var lastEntry = _.last(self.entries);
            if (lastEntry) {
                data.until = lastEntry.getCreatedDate().getTime()/1000;
            }

            $.ajax({
                url: 'entries.json',
                data: data
            }).done(function(entries) {
                self.onLoaded(entries);
            });
        },
        onLoaded: function(data) {
            // data: { entries: [$entry], has_more: bool }
            var self = this;
            var $self = $(self);
            self.receivedEntries = [];
            self.receivedEntries = _.map(data.entries, function(entry_data) {
                return new Entry(entry_data);
            });
            $(self.receivedEntries).on('select', function() {
                $self.triggerHandler('select');
            }).on('remove', function() {
                $self.triggerHandler('remove');
            });
            if (!self.entries) self.entries = [];
            self.entries = self.entries.concat(self.receivedEntries);
            self.hasMore = data.has_more;
            $(self).triggerHandler('loaded');
        },
        // æœ€åˆã‹ã‚‰èª­ã¿ç›´ã™
        reset: function() {
            var self = this;
            _.each(self.entries, function(entry) {
                entry.remove();
            });
            self.entries = [];
            self.receivedEntries = [];
            self.hasMore = undefined;
            $(self).triggerHandler('reset');
            self.load();
        },
        // ã‚¨ãƒ³ãƒˆãƒªã‚’å…¨ã¦è¿”ã™
        getEntries: function() {
            return this.entries;
        },
        // æœ€å¾Œã«å—ä¿¡ã—ãŸEntryã®é…åˆ—ã‚’è¿”ã™
        getReceivedEntries: function() {
            return this.receivedEntries;
        },
        // ç¶šãã‚ã‚‹ã‹ã©ã†ã‹ã‚’è¿”ã™
        hasMoreEntries: function() {
            return this.hasMore;
        },
        // æ¤œç´¢ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’è¨­å®š
        setKeyword: function(keyword) {
            this.keyword = keyword;
        },
        // æ¤œç´¢ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’è¿”ã™
        getKeyword: function(keyword) {
            return this.keyword;
        },
        // è¡¨ç¤ºã™ã‚‹ã‚«ãƒ†ã‚´ãƒªã‚’è¨­å®š
        setCategory: function(category) {
            this.category = category;
        },
        // permission: all|public|draft
        setPermission: function(permission) {
            this.permission = permission;
        },
        getPermission: function() {
            return this.permission;
        },
        getSelectedEntries: function() {
            return _.filter(this.entries, function(entry) { return entry.isSelected() });
        },
        // ãƒã‚§ãƒƒã‚¯ã‚’ã¤ã‘ãŸã‚¨ãƒ³ãƒˆãƒªã‚’å‰Šé™¤
        // æ“ä½œãŒå®Œäº†ã—ãŸã‚‰resolveã™ã‚‹deferredã‚’è¿”ã™
        deleteSelectedEntries: function() {
            var self = this;
            var entries_to_delete = self.getSelectedEntries();
            if (!entries_to_delete.length) return;

            var deleted = $.ajax({
                type: 'post',
                url: 'entries.delete.json',
                data: {
                    entry: _.map(entries_to_delete, function(entry) { return entry.getUUID() }),
                    rkm: Hatena.Diary.data('rkm'),
                    rkc: Hatena.Diary.data('rkc')
                },
                traditional: true
            });
            deleted.done(function() {
                self.entries = _.difference(self.entries, entries_to_delete);
                _.each(entries_to_delete, function(entry) {
                    entry.remove();
                });
            });
            return deleted;
        },
        // ãƒã‚§ãƒƒã‚¯ã‚’ã¤ã‘ãŸã‚¨ãƒ³ãƒˆãƒªã«ã‚«ãƒ†ã‚´ãƒªã‚’è¿½åŠ 
        // æ“ä½œãŒå®Œäº†ã—ãŸã‚‰resolveã™ã‚‹deferredã‚’è¿”ã™
        addCategoryToSelectedEntries: function(category_name) {
            var self = this;
            var entries_to_add_category = self.getSelectedEntries();
            if (!entries_to_add_category.length) return;

            _.each(entries_to_add_category, function(entry) {
                entry.addCategory(category_name);
            });

            var categoryAdded = $.ajax({
                type: 'post',
                url: 'entries.add_category.json',
                data: {
                    entry: _.map(entries_to_add_category, function(entry) { return entry.getUUID() }),
                    category: category_name,
                    rkm: Hatena.Diary.data('rkm'),
                    rkc: Hatena.Diary.data('rkc')
                },
                traditional: true
            });
            return categoryAdded;
        }
    };

    var EntriesView = function(entries) {
        var self = this;
        self.entries = entries;
        var $entries = $(entries);

        self.$entriesContainer = $('.js-entries-container');

        self.$loadNextPage = $('.js-load-next-page');

        $entries.on('loaded', function() {
            self.render();
        });
        $entries.on('select remove', function() {
            self.renderButtons();
        });
        var $form = $('.js-entry-search-form');
        $('.js-categories-selector').on('change', function(event) {
            entries.setKeyword($form.find(':input[name="q"]').val());
            entries.setCategory($form.find(':input[name="category"]').val());
            entries.reset();
        });
        self.$loadNextPage.on('click', function(event) {
            self.entries.load();
        });
        $('.js-delete-entries-button').on('click', function() {
            if (!confirm(Hatena.Locale.text('epic.entry.delete.confirm'))) return;
            var deleted = self.entries.deleteSelectedEntries();
            deleted.always(function() {
                Collections.categories.reload();
            });
        });

        $('.js-entry-search-form').on('submit', function(event) {
            event.preventDefault();
            entries.setKeyword($form.find(':input[name="q"]').val());
            entries.setCategory($form.find(':input[name="category"]').val());
            entries.reset();
        });

        $('.js-entry-search-box-input').on('search', function() {
            var keyword = $form.find(':input[name="q"]').val();
            if (keyword !== '') return;
            entries.setKeyword('');
            entries.reset();
        });

        $('.js-select-all-entries').on('change', function() {
            if ($(this).is(':checked')) {
                _.each(entries.getEntries(), function(entry) {
                    entry.select();
                });
            } else {
                _.each(entries.getEntries(), function(entry) {
                    entry.unselect();
                });
            }
            self.renderButtons();
        });

    };
    EntriesView.prototype = {
        render: function() {
            var self = this;
            _.each(self.entries.getReceivedEntries(), function(entry) {
                var view = new EntryView(entry);
                self.$entriesContainer.append(view.getElement());
            });

            if (self.entries.hasMoreEntries()) {
                self.$loadNextPage.show();
            } else {
                self.$loadNextPage.hide();
            }
            self.renderButtons();
            $(self).triggerHandler('rendered');
        },
        // ã‚«ãƒ†ã‚´ãƒªè¿½åŠ ã¨ã‚¨ãƒ³ãƒˆãƒªå‰Šé™¤ã®enable / disabled, ã‚¯ãƒ©ã‚¹è¿½åŠ 
        // ã‚¨ãƒ³ãƒˆãƒªã‚’ãƒã‚§ãƒƒã‚¯ã—ãŸã¨ãã¨ï¼Œã‚¨ãƒ³ãƒˆãƒªãŒæ¶ˆãˆãŸã¨ãã«å‘¼ã°ã‚Œã‚‹
        renderButtons: function() {
            var self = this;
            var $deleteButton = $('.js-delete-entries-button');
            var $categoryButton = $('.js-category-dropdown-toggle');

            var selectedEntriesCount = self.entries.getSelectedEntries().length;
            if (selectedEntriesCount > 0) {
                $deleteButton.prop('disabled', false).removeClass('disabled').addClass('btn-danger');
                $categoryButton.prop('disabled', false).removeClass('disabled');
            } else {
                $deleteButton.prop('disabled', true).addClass('disabled').removeClass('btn-danger');
                $categoryButton.prop('disabled', true).addClass('disabled');
            }
        }
    };

    var Category = function(data) {
        this.data = data;
    };
    Category.prototype = {
        getName: function() {
            return this.data.name;
        },
        getEntriesCount: function() {
            return this.data.count;
        },
        setEntriesCount: function(count) {
            this.data.count = count;
            $(this).triggerHandler('change');
        }
    };

    // ã‚¨ãƒ³ãƒˆãƒªã«ã‚«ãƒ†ã‚´ãƒªè¿½åŠ ã™ã‚‹ã¨ãã®view
    var CategoryAppenderView = function(category, entries) {
        var self = this;
        self.category = category;
        self.entries = entries;
        self.render();

        self.$element.on('click', function() {
            var categoryAdded = self.entries.addCategoryToSelectedEntries(self.category.getName());
            categoryAdded.always(function() {
                Collections.categories.reload();
            });
        });

        $(self.category).on('change', function() {
            self.render();
        });
    };
    CategoryAppenderView.prototype = {
        render: function() {
            if (!this.$element) {
                this.$element = $('<li>');
            }
            this.$element.text(this.category.getName() + ' (' + this.category.getEntriesCount() + ')');
        },
        getElement: function() {
            return this.$element;
        }
    };

    // ã—ã¼ã‚Šã“ã¿ã®view
    var CategorySelectorView = function(category) {
        var self = this;
        self.category = category;
        self.render();

        $(self.category).on('change', function() {
            self.render();
        });
    };
    CategorySelectorView.prototype = {
        render: function() {
            if (!this.$element) {
                this.$element = $('<option>').val(this.category.getName());
            }
            this.$element.text(this.category.getName() + ' (' + this.category.getEntriesCount() + ')');
        },
        getElement: function() {
            return this.$element;
        }
    };

    var Categories = function() {
        var self = this;
        self.load();
    };
    Categories.prototype = {
        load: function() {
            var self = this;
            $.ajax({
                url: 'categories.json'
            }).done(function(data) {
                self.onLoaded(data);
            });
        },
        // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚«ãƒ†ã‚´ãƒªè¿½åŠ ã—ãŸå¾Œãªã©ã¯èª­ã¿è¾¼ã¿ç›´ã™ã“ã¨ãŒã§ãã‚‹ï¼å®Ÿè£…ã¨ã—ã¦ã¯loadã¨åŒã˜ï¼
        reload: function() {
            this.load();
        },
        onLoaded: function(data) {
            // data = { categories: [ { name, count } ] }
            var self = this;

            if (!self.categories) {
                // ã¯ã˜ã‚ã¦å—ä¿¡ã—ãŸ
                self.categories = _.map(data.categories, function(category_data) {
                    return new Category(category_data);
                });
                self.newCategories = self.categories;
            } else {
                self.newCategories = [];
                // è¨˜äº‹æ•°å¢—ãˆãŸã‚Šæ–°ã—ã„ã‚«ãƒ†ã‚´ãƒªã§ããŸã‚Šã™ã‚‹
                _.each(data.categories, function(category_data) {
                    var category = self.getCategory(category_data.name);
                    if (category) {
                        category.setEntriesCount(category_data.count);
                    } else {
                        category = new Category(category_data);
                        self.categories.push(category);
                        self.newCategories.push(category);
                    }
                });
            }
            $(self).triggerHandler('loaded');
        },
        getNewCategories: function() {
            return this.newCategories;
        },
        getCategory: function(categoryName) {
            return _.find(this.categories, function(category) {
                return category.getName() === categoryName;
            });
        }
    };

    // ã‚«ãƒ†ã‚´ãƒªã®ãƒªã‚¹ãƒˆã«é–¢ã™ã‚‹View
    // ã‚«ãƒ†ã‚´ãƒªã®Viewã¯2ã¤ã‚ã‚‹ã®ã§ã‚¸ãƒ£ã‚°ãƒªãƒ³ã‚°ã¿ãŸã„ãªæ„Ÿã˜
    var CategoriesView = function(categories, entries) {
        var self = this;
        self.categories = categories;
        self.entries = entries;
        var $categories = $(categories);
        self.$categoriesSelector = $('.js-categories-selector');
        self.$createNewCategory  = $('.js-create-new-category');

        $categories.on('loaded', function() {
            self.render();
        });

        $('.js-create-new-category').on('click', function() {
            var categoryName = window.prompt(Hatena.Locale.text('create_category'));
            if (!categoryName) return;

            var categoryAdded = self.entries.addCategoryToSelectedEntries(categoryName);
            categoryAdded.always(function() {
                self.categories.reload();
            });
        });
    };

    CategoriesView.prototype = {
        render: function() {
            var self = this;
            _.each(self.categories.getNewCategories(), function(category) {
                var selector_view = new CategorySelectorView(category);
                self.$categoriesSelector.append(selector_view.getElement());

                var appender_view = new CategoryAppenderView(category, self.entries);
                self.$createNewCategory.before(appender_view.getElement());
            });
        }
    };

    // ãªã‚“ã‹æ±ç”¨çš„ãªãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ã«è¦‹ãˆãªãã‚‚ãªã„
    var CategoriesDropdownView = function() {
        var self = this;
        self.$dropdown = $('.js-category-dropdown-list');
        self.$dropdownToggle = $('.js-category-dropdown-toggle');

        self.$dropdownToggle.on('click', function() {
            self.toggleDropdown();
            return false;
        });
        $(document).on('click', function(event) {
            self.hideDropdown();
        });
    };
    CategoriesDropdownView.prototype = {
        toggleDropdown: function() {
            this.$dropdown.toggle();
        },
        hideDropdown: function() {
            this.$dropdown.hide();
        }
    };

    var EntryTypeTabsView = function(entries) {
        var self = this;
        self.entries = entries;
        self.$tabs = $('.js-entry-type-select-tabs');
        self.$tabs.on('click', 'a', function (event) {
            self.clicked(event);
        });

        // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®permissionã‚’ã“ã“ã§è¨­å®š
        self.entries.setPermission(self.$tabs.find('.ui-tabs-active').find('a').attr('data-permission'));
    };
    EntryTypeTabsView.prototype = {
        clicked: function(event) {
            var self = this;
            event.preventDefault();
            self.$tabs.find('.ui-tabs-active').removeClass('ui-tabs-active');
            $(event.target).parents('li').addClass('ui-tabs-active');
            var permission = $(event.target).attr('data-permission');
            if (self.entries.getPermission() === permission) return;
            self.entries.setPermission(permission);
            self.entries.reset();
        }
    };

    var ShareDraftBox = function (entriesView) {
        var self = this;

        // è¦ªè¦ç´ 
        self.section = $('section')[0];

        self.$shareBoxWrapper = $('.js-share-draft-box-wrapper');
        self.$shareBox        = $('.js-share-draft-box');
        self.$tokenInput      = self.$shareBox.find('input');
        self.$closeButton     = self.$shareBox.find('.btn-close');
        self.$mask            = self.$shareBoxWrapper.find('.mask');

        // URLãƒœãƒƒã‚¯ã‚¹ã®åˆæœŸä½ç½®
        self.pos = {
            top  : -9999,
            left : -9999
        };

        $(entriesView).on('rendered', function () {
            self.initEvent();
        });
    };
    ShareDraftBox.prototype = {
        initEvent: function () {
            var self = this;
            self.$shareButton = $('.js-icon-share-draft');

            self.$shareButton.on('click', function(e){
                // è¦ç´ ã®å³ä¸‹ã®åº§æ¨™ã‚’å–å¾—
                var sectionRect = self.section.getBoundingClientRect();
                var rect = this.getBoundingClientRect();

                self.setWindowPosition({
                    top  : rect.bottom - sectionRect.top,
                    left : rect.right - sectionRect.left
                });

                var entryId = $(this).data('entryId');
                self.openShareDraftWindow(e, entryId);
                return false;
            });

            self.$closeButton.on('click', function () {
                self.closeShareDraftWindow();
                return false;
            });

            self.$mask.on('click', function () {
                self.closeShareDraftWindow();
                return false;
            });
        },

        setWindowPosition: function (pos) {
            this.pos = pos;
        },

        openShareDraftWindow : function (e, entryId) {
            var self = this;
            var data = {
                rkm      : Hatena.Diary.data('rkm'),
                rkc      : Hatena.Diary.data('rkc'),
                entry_id : entryId
            };

            // ä¸‹æ›¸ãä¿å­˜
            $.ajax({
                url      : './share_existing_draft',
                type     : 'POST',
                dataType : 'json',
                data     : data
            }).done(function (res) {
                self.$shareBoxWrapper.addClass('visible');

                // ä¸‹ã®æ–¹ã®è¦ç´ ã‚¯ãƒªãƒƒã‚¯ã—ãŸæ™‚ã«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ãŒã¯ã¿å‡ºã‚‹ã®é˜²æ­¢
                var offset = +self.$shareBox.css('margin').slice(0, -2);
                var over = (self.pos.top + self.$shareBox[0].getBoundingClientRect().height + offset * 2) - self.section.offsetHeight;

                if (over > 0) {
                    self.pos.top -= over + 10;
                }

                self.$shareBox.css(self.pos);

                var previewURL = Hatena.Diary.data('blogs-uri-base') + '/draft/' + res.token;
                self.$tokenInput.val(previewURL).focus().select();

            }).fail(function () {
                console.log('ajax error!!');
            });
        },

        closeShareDraftWindow: function () {
            this.$shareBoxWrapper.removeClass('visible');
        }
    };


    var onEntriesPage = function(){
        var entries = new Entries();
        Collections.entries = entries;
        var entriesView = new EntriesView(entries);
        var categories = new Categories();
        Collections.categories = categories;
        var categoriesView = new CategoriesView(categories, entries);
        var categoriesDropdownView = new CategoriesDropdownView();
        var entryTypeTabs = new EntryTypeTabsView(entries);

        var shareDraftBox = new ShareDraftBox(entriesView);

        entries.reset();
    };

    Hatena.Diary.Pages.Admin['user-blog-entries'] = function () {
        onEntriesPage();
    };

    Hatena.Diary.Pages.Admin['user-blog-drafts'] = function (){
        onEntriesPage();
    };

})(jQuery);

(function($){

    Hatena.Diary.Pages.Admin['user-blog-friend'] = function () {
        Hatena.Diary.Pages.createForParent();
    };

})(jQuery);
(function ($) {

    function showCategories (superCategory) {
        if (superCategory) {
            var $categories = $('.categories-container').filter(function () {
                return $(this).attr('data-super-category') === superCategory;
            }).show();

            if ($categories.length > 0) {
                $('#super-categories-container').hide();
                $('.submit-form-controls').show();
                location.hash = '#' + superCategory;
            }
            $('.back-button').show();
        } else {
            $('#super-categories-container').show();
            $('.categories-container').hide();
            $('.submit-form-controls').hide();
            $('.back-button').hide();
            location.hash = '#';
        }
    }

    Hatena.Diary.Pages.Admin['user-blog-group-official-dialog'] = function () {
        $(window).hashchange(function () {
            var m = /^#((?:\w|-)+)$/.exec(location.hash);
            if (m) {
                showCategories(m[1]);
            } else {
                showCategories(false);
            }
        }).hashchange();

        $('#super-categories-container .select-super-category').click(function () {
            var superCategory = $(this).closest('[data-super-category]').attr('data-super-category');
            showCategories(superCategory);
            return false;
        });

        $('.back-button').click(function () {
            showCategories(false);
            return false;
        });

        Hatena.Diary.Pages.createForParent();
        Hatena.Diary.Pages.send('resize', {
            height: 620,
            width: 620
        });

        $('.skip-button').click(function () {
            Hatena.Diary.Pages.send('close');
            return false;
        });

        $('form').submit(function () {
            var $form = $(this);

            $.ajax($form.attr('action'), {
                method: $form.attr('method'),
                data: $form.serialize()
            }).always(function () {
                Hatena.Diary.Pages.send('close');
            });

            Hatena.Diary.Pages.send('hide');

            return false;
        });
    };

})(jQuery);

(function($){

    Hatena.Diary.Pages.Admin['user-blog-import-diary-diary_name'] = function () {
        Hatena.Diary.Pages.Admin['user-blog-import'].setupDiaryProgress();

        // ä¸Šç´šè¨­å®šãƒªãƒ³ã‚¯ï¼Œã‚¯ãƒªãƒƒã‚¯ã§ãƒˆã‚°ãƒ«ã™ã‚‹ã‚„ã¤
        $('.toggle-hidden-section').click(function() {
            $(document.body).find($(this).attr('data-hidden-section-selector')).toggle();
        });
    };

})(jQuery);
(function($){

    Hatena.Diary.Pages.Admin['user-blog-import-movable_type'] = function () {
        Hatena.Diary.Pages.Admin['user-blog-import-movable_type'].setupMovableTypeProgress();

        $('.js-revert-movable-type-import').on('submit', function() {
            return confirm(Hatena.Locale.text('admin.import.undo.confirm'));
        });
    };
    Hatena.Diary.Pages.Admin['user-blog-import-movable_type'].setupMovableTypeProgress = function() {
        var $progress = $('.js-movable-type-import-progress');
        if (!$progress[0]) return;

        var $bar = $progress.find('.js-movable-type-import-bar');

        var api_url = $progress.attr('data-api-url');
        var on_complete_url = $progress.attr('data-on-complete-url');

        Hatena.Diary.Pages.Admin['user-blog-import'].setupProgress($bar, api_url, on_complete_url);
    };

})(jQuery);
(function($){

    Hatena.Diary.Pages.Admin['user-blog-import'] = function () {
        Hatena.Diary.Pages.Admin['user-blog-import'].setupDiaryProgress();
    };

    Hatena.Diary.Pages.Admin['user-blog-import'].setupDiaryProgress = function () {
        var $progress = $('#import-progress');
        if (!$progress[0]) return;

        var $bar = $progress.find('.bar');
        if (!$bar[0]) return;

        var api_url = $progress.attr('data-progress-api');
        var on_success_url = $progress.attr('data-diary-page');

        Hatena.Diary.Pages.Admin['user-blog-import'].setupProgress($bar, api_url, on_success_url);
    };

    // å®šæœŸçš„ã«APIå–å¾—ã—ã¦ãƒãƒ¼ã‚’ä¼¸ã°ã—ã¦å®Œäº†ã—ãŸã‚‰ãƒšãƒ¼ã‚¸é·ç§»
    // $bar: ã®ã³ã‚‹element width: 30% ã¨ã‹ã«ãªã‚‹
    // api_url: å®šæœŸçš„ã«ã‚¢ã‚¯ã‚»ã‚¹ã•ã‚Œã‚‹URL
    // on_success_url: å®Œäº†ã—ãŸã¨ãã«é£›ã¶URL
    // APIã‹ã‚‰è¿”ã‚‹æ§‹é€ 
    // {
    //  status: staarted|new|complete|failed
    //  progress: 0~100
    // }
    Hatena.Diary.Pages.Admin['user-blog-import'].setupProgress = function ($bar, api_url, on_success_url) {
        var progressCheck = function () {
            setTimeout(function () {
                $.ajax({
                    url : api_url,
                    type : 'GET',
                    cache: false,
                    dataType : 'json',
                    success : function (res) {
                        if (res.progress) {
                            $bar.css('width', res.progress + '%');
                        }

                        if (res.status == 'started' || res.status == 'new') {
                            progressCheck();
                        } else if (res.status == 'complete' || res.status == 'failed') {
                            setTimeout(function() {
                                location.href = on_success_url;
                            }, 1500);
                        }
                    },
                    error : function () {
                    }
                });
            }, 1000);
        };
        progressCheck();
    };

})(jQuery);
(function($){
    var Export = function(downloadURL, reserveURL) {
        this.downloadURL = downloadURL;
        this.reserveURL = reserveURL;
    };

    Export.prototype = {
        // ç¾åœ¨ã®ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆçŠ¶æ…‹ã‚’åŒæœŸçš„ã«è¿”ã™
        // çŠ¶æ…‹ã¯ï¼Œnot-created, running, completed ã®3ã¤ã§ã‚ã‚‹
        getStatus: function() {
            return this.status;
        },
        // æ—¥ä»˜ã®æ–‡å­—åˆ—ã‚’è¿”ã™
        // HTTPãƒ˜ãƒƒãƒ€ã®å€¤ã‹ã‚‰YYYY/MM/DDå½¢å¼ã®æ–‡å­—åˆ—ã‚’ä½œã‚ã†ã¨ã™ã‚‹ãŒï¼Œå¤±æ•—ã—ãŸã‚‰ï¼ŒHTTPãƒ˜ãƒƒãƒ€ã®å€¤ãã®ã‚‚ã®ã‚’è¿”ã™
        getDate: function() {
            var date = this.date;

            if (!date) return null;

            var parsedDate;
            try {
                parsedDate = new Date(Date.parse(date));
                return [parsedDate.getFullYear(), parsedDate.getMonth()+1, parsedDate.getDate()].join("/");
            } catch(ignore) {
            }
            return date;
        },
        // çŠ¶æ…‹ã‚’ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰å–å¾—ã—ã¦æ›´æ–°ã™ã‚‹
        // /downloadã¯ï¼Œä»¥ä¸‹ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’è¿”ã™ã®ã§ï¼Œãã‚Œã‚’è¦‹ã¦åˆ¤æ–­ã™ã‚‹
        // - 200: ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆå®Œäº†ã—ã¦ã„ã‚‹ã¨ã
        // - 404: ä¸€åº¦ã‚‚ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ã¦ã„ãªã„ã‹ï¼Œã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆå¤±æ•—ã—ãŸã¨ã
        // - 503: ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆä¸­ã®ã¨ã
        fetchStatus: function() {
            var self = this;
            $.ajax({
                url: self.downloadURL,
                method: 'HEAD',
                cache: false
            }).done(function(_ignore, __ignore, res) {
                self.date = res.getResponseHeader('Date');
                self.status = 'completed';
                self._updated();
            }).fail(function(res) {
                self.date = null;
                if (res.status === 503) {
                    self.status = 'running';
                    setTimeout(function() {
                        self.fetchStatus();
                    }, 1000);
                } else {
                    self.status = 'not-created';
                }
                self._updated();
            });
        },
        // ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã‚’äºˆç´„ã™ã‚‹
        reserveExport: function() {
            var self = this;
            $.ajax({
                url: self.reserveURL,
                method: 'POST',
                data: {
                    rkm: Hatena.Diary.data('rkm'),
                    rkc: Hatena.Diary.data('rkc')
                }
            }).always(function() {
                self.fetchStatus();
            });
            self.status = 'running';
            self._updated();
        },
        _updated: function(data) {
            $(this).triggerHandler('updated');
        }
    };

    Hatena.Diary.Pages.Admin['user-blog-export-movable_type'] = function () {
        var $container = $('.js-export-wrapper');
        var $panels = $container.find('.js-export-control-panel');
        var $reserveCompletedAt = $container.find('.js-reserve-completed-at');
        var $reserveButton = $container.find('.js-reserve-export-button');
        var $successMessage = $('.js-export-success-message');

        var statusToSelector = {
            'not-created': '.js-reserve-export-wrapper',
            'running': '.js-exporting-wrapper',
            'completed': '.js-export-completed-wrapper'
        };

        var exportModel = new Export(
            $container.attr('data-download-url'),
            $container.attr('data-reserve-url')
        );

        $reserveButton.on('click', function() {
            exportModel.reserveExport();
        });

        $(exportModel).on('updated', function() {
            var status = exportModel.getStatus();
            $panels.hide();
            $container.find(statusToSelector[status]).show();
            $reserveCompletedAt.text(exportModel.getDate());
            if (status === 'completed') {
                $successMessage.show();
            } else {
                $successMessage.hide();
            }
        });

        exportModel.fetchStatus();
    };
})(jQuery);

(function($){

    Hatena.Diary.Pages.Admin['user-blog-subscribe-done'] = function () {
        Hatena.Diary.Pages.createForParent();
        Hatena.Diary.Util.sendResizeRequest();
        Hatena.Diary.Pages.send('done');
    };

})(jQuery);

(function($){

    Hatena.Diary.Pages.Admin['user-blog-subscribe'] = function () {
        $('#subscribe-form').submit(function () {
            Hatena.Diary.Util.preventDuplicateSubmit($(this));
        });
        Hatena.Diary.Pages.createForParent();
        Hatena.Diary.Util.sendResizeRequest();

        $('section input[type=checkbox]').focus();
    };

})(jQuery);

(function($, Hatena){
    'use strict';

    /**
     * iframeç‰ˆè³¼èª­ãƒœã‚¿ãƒ³
     * iframeã®ä¸­èº«ã¯SubscribeButtonAdminãŒã‚ã‚‹ã ã‘
     */
    Hatena.Diary.Pages.Admin['user-blog-subscribe-iframe'] = function () {
        var $el = $('.js-hatena-follow-button-box');

        var userData = {
            isSubscribing : $el.data('is-subscribing'),
            isGuest       : Hatena.Diary.data('rkm') && Hatena.Diary.data('rkc') ? false : true
        };
        var blogData = {
            subscribersCount: parseInt($el.data('subscribers-count'), 10)
        };

        var view = new Hatena.Diary.SubscribeButtonAdmin($el, userData, blogData);
    };

})(jQuery, Hatena);

(function($){
    Hatena.Diary.Pages.Admin['user-blog-members'] = function () {
        $('.js-manage-members-table').on('click', '.js-edit-role', function() {
            var $row = $(this).parents('.js-member-row');
            $row.find('.js-form-member-update').show();
            $row.find('.js-member-role').hide();
        }).on('click', '.js-edit-cancel', function() {
            var $row = $(this).parents('.js-member-row');
            $row.find('.js-member-role').show();
            $row.find('.js-form-member-update').hide();
        });
    };
})(jQuery);

(function($){

    Hatena.Diary.Pages.Blogs['*'] = function () {
        // iframeã‹ã‚‰ã¯ã‚¢ã‚¯ã‚»ã‚¹ãƒ­ã‚°ã®apiã‚’å©ã‹ãªã„
        if (window.parent === window) {
            Hatena.Diary.AccessLog.ping();
        }

        Hatena.Diary.Pages.infoLoaded.done(function(info) {
            Hatena.Diary.Pages.Blogs['*'].init(info);
        });

        Hatena.Diary.Util.updateDynamicPieces([document]);

        $(document).on('click', 'img.hatena-fotolife, img.magnifiable, img.http-image', function () {
            var img = this;
            var $img = $(img);

            if ($img.data('colorbox')) {
                // colorbox is already set up
                return;
            }

            // aè¦ç´ ã«å«ã¾ã‚Œï¼Œãƒªãƒ³ã‚¯å…ˆãŒç”»åƒã®srcã¨ç•°ãªã‚‹ã¨ãã¯æ‹¡å¤§ã—ãªã„
            var closest_a = $img.closest('a').get(0);
            if (closest_a && closest_a.href !== img.src) {
                return;
            }

            $img.colorbox({
                maxWidth    : '95%',
                maxHeight   : '95%',
                transition : 'none',
                photo: true,
                href : $img.attr('src'),
                title : ' ',
                open : true
            });

            $('#cboxContent').click(function () {
                $.colorbox.close();
            });

            return false;
        });

        Hatena.Diary.Pages.Blogs['*'].setupRecentCommentsModule();

        Hatena.Diary.Pages.Blogs['*'].setupArchiveModule();

        Hatena.Diary.Pages.Blogs['*'].setupEntriesAccessRankingModule();

        Hatena.Diary.Pages.Blogs['*'].setupCirclesModule();

        Hatena.Diary.Pages.Blogs['*'].prepareForGlobalHeader();

        Hatena.Diary.Pages.Blogs['*'].setupOndemandCommentDeleteButton();

        Hatena.Diary.Pages.Blogs['*'].highlightKeyword();


        // archiveã¨ã¯ã¦ãªãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ã‚³ãƒ¡ãƒ³ãƒˆã§ã¯ã‚¹ã‚¿ãƒ¼ã¯å°ã•ã„ã‚„ã¤ã‚’ä½¿ã†
        if (! _.contains(['archive', 'hatena-bookmark-comment'], Hatena.Diary.data('page'))) {
            Hatena.Diary.Star.initBigStar();
            Hatena.Diary.Star.initSelectStar();
            Hatena.Diary.Star.initStarNavigation();
            Hatena.Diary.Star.initDeleteStar();
        }

        Hatena.Epic.Component.setupTouchViewSuggest();

        Hatena.Diary.Pages.Blogs['*'].setupTumblrShareButtons();

        Hatena.Diary.Pages.Blogs['*'].setupFastClick();
    };

    Hatena.Diary.Pages.Blogs['*'].setupRecentCommentsModule = function () {
        var $recentComments = $('.hatena-module-recent-comments');
        if ( $recentComments.length === 0 ) return;
        var template = _.template($('.recent-comments-template').html());

        var max_count = 0;
        // ã‚³ãƒ¡ãƒ³ãƒˆãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒè¤‡æ•°ã‚ã‚‹å ´åˆãŒã‚ã‚‹ã®ã§ã€æœ€å¤§ã®æ•°ã®ã‚³ãƒ¡ãƒ³ãƒˆã‚’å–å¾—ã™ã‚‹
        $recentComments.each ( function () {
            var $moduleBody = $(this).find('.hatena-module-body');
            var count = $moduleBody.attr('data-count');
            max_count = _.max([max_count, count]);
        });
        if ( max_count === 0 ) return;

        $.ajax({
            url: Hatena.Diary.URLGenerator.user_blog_url('/api/recent_comments'),
            dataType: 'json',
            data : {
                count: max_count
            }
        }).done( function (comments) {
            $recentComments.each( function () {
                var $container = $(this);
                var $moduleBody = $container.find('.hatena-module-body');
                var count = $moduleBody.attr('data-count');
                var comment_source = '';
                for ( var i = 0; i < count; i++ ) {
                    if ( ! comments[i] ) break;
                    comment_source += template({
                        comment: comments[i]
                    });
                }
                $container.find('.recent-comments').html(comment_source);
                Hatena.Diary.Util.updateDynamicPieces($container);
            });

            Hatena.Diary.SpeedTrack.record("Pages.Blogs['*'].setupRecentCommentsModule");
        });
    };

    Hatena.Diary.Pages.Blogs['*'].setupArchiveModule = function () {
        var $archives = $('.hatena-module-archive');
        if ( $archives.length === 0 ) return;

        var detectDate = function () {
            // archiveã®ã¨ã, ä¸€ç•ªä¸Šã®æ—¥ä»˜ã‹ã‚‰å¹´ã‚’èª­ã‚€
            if (Hatena.Diary.data('page') === 'archive') {
                var $entry = $('section.archive-entry:first');
                if ($entry.length > 0) {
                    var year_month_day = $entry.find('div.date > a > time').attr('datetime');
                    var year_str = year_month_day.split('-')[0];
                    var month_str = year_month_day.split('-')[1];

                    return { year: year_str, month: month_str };
                }

                return null;
            }

            // ãƒšãƒ¼ã‚¸ã«ã‚¨ãƒ³ãƒˆãƒªãŒã‚ã‚‹ã¨ã, ä¸€ç•ªä¸Šã®ã‚¨ãƒ³ãƒˆãƒªã®æ—¥ä»˜ã‹ã‚‰å¹´ã‚’èª­ã‚€
            var $article = $('article.entry:first');
            if ($article.length > 0) {
                var date_year_str = $article.find('header time > span.date-year').text();
                var date_month_str = $article.find('header time > span.date-month').text();
                return { year: date_year_str, month: date_month_str };
            }

            return null;
        };

        // default
        var setupDefault = function ($archive) {
            var $open_year;
            var date = detectDate();
            if (date) {
                var year = date['year'];
                if (year) {
                    var $year = $archive.find('li.archive-module-year[data-year="' + year + '"]');

                    $open_year = $year.length > 0 ? $year : null;
                }
            }

            $open_year = $open_year || $('li.archive-module-year:first');
            $open_year.removeClass('archive-module-year-hidden');

            $archive.find('.archive-module-button').click(function (e) {
                e.preventDefault();

                var $year = $(this).parent('.archive-module-year');
                $year.toggleClass('archive-module-year-hidden');
            });
        };

        // calendarãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
        var setupCalendar = function ($archive) {
            var $selector = $archive.find('.js-archive-module-calendar-selector');

            var updateCalendar = function () {
                var $date = $selector.find('option:selected');
                var year = $date.data('year');
                var month = $date.data('month');
                $.ajax({
                    type: 'get',
                    url: Hatena.Diary.URLGenerator.user_blog_url('/archive_module_calendar'),
                    data: { month : month, year: year }
                }).done(function(res) { // days object
                    $archive.find('.js-archive-module-calendar-container').html(res);
                });
            };

            $selector.change(function () {
                updateCalendar();
            });

            // è¡¨ç¤ºãƒšãƒ¼ã‚¸ã«åˆã‚ã›ã¦ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚’åˆæœŸåŒ–
            var date = detectDate();
            if (date) {
                $selector.val(date['year'] + ' ' + date['month']);
            }
            updateCalendar();
        };

        // Archiveã®type( default, calendar )ã«ã‚ˆã£ã¦å‡ºã—åˆ†ã‘
        _.each($archives, function (archive) {
            var $archive = $(archive);
            var archiveType = $archive.data('archiveType');
            $.ajax({
                type: 'get',
                url: Hatena.Diary.URLGenerator.user_blog_url('/archive_module'),
                data: { archive_type: archiveType },
                dataType: 'html'
            }).done(function(res) {
                $archive.find('.hatena-module-body').append(res);

                Hatena.Diary.SpeedTrack.record("Pages.Blogs['*'].setupArchiveModule");

                if (archiveType == 'calendar') {
                    setupCalendar($archive);
                } else {
                    setupDefault($archive);
                }
            });
        });

    };

    // è¨˜äº‹æ¤œç´¢ã§æ¤œç´¢çµæœã®ã‚¿ã‚¤ãƒˆãƒ«ãƒ»æœ¬æ–‡ã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’ãƒã‚¤ãƒ©ã‚¤ãƒˆã™ã‚‹
    Hatena.Diary.Pages.Blogs['*'].highlightKeyword = function () {

        if (!!Hatena.Diary.Location.params() && Hatena.Diary.Location.params()['q']){
            var keywords= $('.search-result').data("searchQueries");
            if (!keywords) return;

            $(".entry-title").highlight(keywords, { caseSensitive:false });
            $(".entry-description").highlight(keywords, { caseSensitive:false });
        }

    };

    Hatena.Diary.Pages.Blogs['*'].setupEntriesAccessRankingModule = function () {
        var $entriesAccessRanking = $('.hatena-module-entries-access-ranking');
        if ($entriesAccessRanking.length === 0) return;

        $entriesAccessRanking.each(function () {
            var $self = $(this);
            var queryParams = {};
            // `data-`ã®prefixãŒã¤ã„ãŸå±æ€§ã‚’ã™ã¹ã¦å–å¾—ã—ï¼Œã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã«ã™ã‚‹
            _.each( ($self)[0].attributes, function (attr) {
                if ( ! attr.name.match(/^data-/) ) return;
                // `data-`ã®prefixã¯ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®keyã«ã¯ä¸è¦ãªã®ã§å–ã‚Šé™¤ã
                queryParams[ attr.name.replace(/^data\-/, '') ] = attr.value;
            } );

            $.ajax({
                type: 'GET',
                url: Hatena.Diary.URLGenerator.user_blog_url('/entries_access_ranking_module'),
                data: queryParams,
                dataType: 'html'
            }).done(function(res) {
                $self.find('.hatena-module-body').append(res);
            });
        });
    };

    Hatena.Diary.Pages.Blogs['*'].setupCirclesModule = function () {
        var $circles = $('.hatena-module-circles');
        if ($circles.length === 0) return;

        // æ›´æ–°ãŒã‚ã£ãŸã‚°ãƒ«ãƒ¼ãƒ—ã¯JSã§è¡¨ç¤ºã‚’å¤‰æ›´ã™ã‚‹
        var mtime = 0, circleIds = [], elems = {};
        $circles.find('[data-circle-id][data-circle-mtime]').each(function () {
            var $elem = $(this);
            var circleId = $elem.attr('data-circle-id');
            circleIds.push(circleId);
            elems[circleId] = $elem;
            var m = Number($elem.attr('data-circle-mtime'));
            if (m > mtime) mtime = m;
        });

        $.ajax({
            type: 'GET',
            url: Hatena.Diary.URLGenerator.user_blog_url('/api/module/circles'),
            data: { mtime: mtime, circle_id: circleIds },
            traditional: true,
            dataType: 'json'
        }).done(function (data) {
            for (var circleId in data.circles) {
                elems[circleId].replaceWith($.parseHTML(data.circles[circleId].html || ' '));
            }



            Hatena.Diary.SpeedTrack.record("Pages.Blogs['*'].setupCirclesModule");
        });
    };

    function navigateToEditNewEntry () {
        Hatena.Diary.Pages.infoLoaded.done(function (info) {
            if (info.can_open_editor) {
                Hatena.Diary.Pages.Blogs['*'].newEntry();
            } else {
                location.href = Hatena.Diary.data('admin-domain') + '/my/?fragment=edit';
            }
        });
    }

    Hatena.Diary.Pages.Blogs['*'].toggleMyMenuDropdown = function(data) {
        Hatena.Diary.Dropdown.toggle(
            '/-/menu/mymenu?location=' + encodeURIComponent(location.href),
            data, 'mymenu', {
                callback: function (dropdown, messenger) {
                    var blog_to_$dropdown_container = {};

                    messenger.addEventListener('feedback', function (data) {
                        Hatena.Diary.Feedback.toggle(data.uri);
                    });

                    messenger.addEventListener('myblogmenu.init', function (data) {
                        var init = {
                            top: $(dropdown).offset().top + data.top,
                            right: $(dropdown).offset().left - 2,
                            height: 266
                        };
                        Hatena.Diary.Dropdown.toggle(
                            '/-/menu/myblogmenu?blog=' + encodeURIComponent(data.blogUri),
                            init,
                            null, {
                                callback: function (dropdown, messenger) {
                                    blog_to_$dropdown_container[data.blogUri] = $(dropdown).parent();

                                    // XXX: callbackãŒå‘¼ã°ã‚Œã‚‹ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã¯showã•ã‚Œã‚‹å‰ãªã®ã§ãã‚Œã‚’å¾…ã£ã¦ã‹ã‚‰éš ã™
                                    _.delay(function () {
                                        $(dropdown).parent().hide();
                                    });
                                },
                                key: data.blogUri,
                                parent: 'mymenu',
                                className: 'hatena-diary-dropdown-myblogs'
                            }
                        );
                    });

                    messenger.addEventListener('myblogmenu.open', function (data) {
                        var $dropdown_container = blog_to_$dropdown_container[data.blogUri];
                        $dropdown_container.show();

                        var self = Hatena.Diary.Pages.Blogs['*'].toggleMyMenuDropdown;
                        self.$active_dropdown_container = $dropdown_container;
                    });

                    messenger.addEventListener('myblogmenu.close', function (data) {
                        var $dropdown_container = blog_to_$dropdown_container[data.blogUri];
                        $dropdown_container.hide();

                        var self = Hatena.Diary.Pages.Blogs['*'].toggleMyMenuDropdown;
                        self.$active_dropdown_container = null;
                    });

                    messenger.addEventListener('new-entry', function (data) {
                        navigateToEditNewEntry();
                    });
                }
            }
        );

        var $active_dropdown_container = Hatena.Diary.Pages.Blogs['*'].toggleMyMenuDropdown.$active_dropdown_container;

        // ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’å†åº¦é–‹ãã¨ã, ã‚µãƒ–ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é–‹ã„ã¦ã„ã‚‹çŠ¶æ…‹ã‚’å¾©å…ƒã™ã‚‹
        if ($active_dropdown_container && $active_dropdown_container.is(':hidden')) {
            $active_dropdown_container.fadeIn('fast');
        }
    };

    Hatena.Diary.Pages.Blogs['*'].prepareForGlobalHeader = function() {
        if (window != window.parent) return null;
        if (!Hatena.Diary.Pages.messenger) return null;

        var self = this;

        Hatena.Diary.Pages.message('new-entry', function (data) {
            navigateToEditNewEntry();
        });

        Hatena.Diary.Pages.message('units', function (data) {
            Hatena.Diary.Dropdown.toggle(data.uri, data);
        });

        Hatena.Diary.Pages.message('feedback', function (data) {
            Hatena.Diary.Feedback.toggle(data.uri);
        });

        Hatena.Diary.Pages.message('mymenu', function (data) {
           Hatena.Diary.Pages.Blogs['*'].toggleMyMenuDropdown(data);
        });

        Hatena.Diary.Pages.message('servicesmenu', function (data) {
            Hatena.Diary.Dropdown.toggle('/-/menu/services', data);
        });

        Hatena.Diary.Pages.message('unread', function (data) {
            location.href = Hatena.Diary.data('admin-domain') + '/-/antenna';
        });

        var notifyWindow;
        Hatena.Diary.Pages.message('notify', function (data) {
            var BASE = data.BASE;

            if (notifyWindow) {
                if (notifyWindow.is(':visible')) {
                    Hatena.Diary.Window.hide(notifyWindow, function () {
                        notifyWindow.remove();
                        notifyWindow = null;
                    });
                    return;
                } else {
                    notifyWindow.remove();
                    notifyWindow = null;
                }
            }

            notifyWindow = $('<div id="notify-window" class="hatena-globalheader-window"></div>').
                css({
                    left : data.left - 250 + 32
                });

            notifyWindow.html("<img src='https://b.st-hatena.com/images/loading32.gif' class='loading' style='position:absolute;'/>");

            var iframe = $('<iframe style="border:none" frameBorder="0" class="notify" width="250" height="300"></iframe>').appendTo(notifyWindow);

            iframe.attr('src', 'https://www' + BASE + '/notify/notices.iframe?' + new Date().getTime());

            iframe.ready(function () {
                notifyWindow.find('img').remove();
            });

            notifyWindow.
                //            css({
                //                top: $(document.body).scrollTop() + 37
                //            }).
                hide().
                fadeIn('fast').
                appendTo(document.body);

            Hatena.Diary.Window.show(notifyWindow, {
                fixScroll: true
            });
        });

        Hatena.Diary.Pages.message('blogmenu', function (data) {
            var params = {};
            if (Hatena.Diary.data('blog')) {
                params['blog'] = location.href;
                if (
                    Hatena.Diary.data('page') === 'entry' &&
                    // å‰Šé™¤ã•ã‚Œã¦ã‚¨ãƒ³ãƒˆãƒªãŒãªã„ or Not Found çŠ¶æ…‹ ã§ã‚ã‚Œã°å¯¾è±¡ã®ã‚¨ãƒ³ãƒˆãƒªãŒãªããªã‚‹ã®ã§
                    // ãƒ‘ãƒ¼ãƒãƒªãƒ³ã‚¯ãƒ•ãƒ©ã‚°ã‚’ãŸã¦ãªã„
                    $('article.entry:not([class~="no-entry"])').length > 0
                ) {
                    params['blog_permalink'] = 1;
                }
            }
            var uri = '/-/menu/blogmenu?' + $.param(params);
            Hatena.Diary.Dropdown.toggle(uri, data, 'blogmenu', {
                callback: function (dropdown, messenger) {
                    messenger.addEventListener('edit-this-entry', function (data) {
                        var $entry = $('article.entry').first();
                        Hatena.Diary.Pages.Blogs['*'].editEntry( $entry );
                    });
                    messenger.addEventListener('new-entry', function (data) {
                        navigateToEditNewEntry();
                    });
                    // ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®è¬›èª­ãƒœã‚¿ãƒ³ãŒæŠ¼ã•ã‚ŒãŸã‚‰blogså´ã§çª“ã‚’é–‹ã
                    messenger.addEventListener('subscribe', function (data) {
                        var offset = { left: data.left + 5 };
                        self.subscribeButtonForMessage.openSubscribeWindow(offset, true);
                    });
                }
            });
        });

        Hatena.Diary.Pages.message('locale', function (data) {
            var uri = Hatena.Diary.data('admin-domain') + '/-/locale';

            Hatena.Diary.Dropdown.toggle(uri, data, 'locale');
        });
    };

    Hatena.Diary.Pages.Blogs['*'].init = function (info) {
        if (arguments.callee.called) return; arguments.callee.called = true;

        // globalhaederãŒã‚­ãƒ£ãƒƒã‚·ãƒ¥ã•ã‚Œã¦ã„ã‚‹ã®ã§ã“ã¡ã‚‰ã‹ã‚‰viaã‚’é€ã£ã¦ã‚„ã‚‹
        var via = Hatena.Diary.Location.param('via');
        if (via) {
            Hatena.Diary.Pages.send('inheritVia', via);
        }

        if (info.message) {
            Hatena.Diary.Util.showFlashMessage(info.message);
        }

        if (info.show_modal) {
            var $modalContainer = $('<div class="hatena-iframe-container"></div>').appendTo(document.body);
            var $iframe = $('<iframe frameborder="0"></iframe>').appendTo($modalContainer);

            var messenger = Messenger.createForFrame($iframe[0], info.show_modal.url);

            messenger.addEventListener('resize', function (data) {
                if (data) {
                    $modalContainer.css(data);
                    $(window).trigger('resize'); // reset position
                }
            });

            var destroyed = $.Deferred();

            // hide æ™‚ã¯ãŸã éš ã™ã ã‘ã€close ãŒå‘¼ã°ã‚Œã¦ã¯ã˜ã‚ã¦
            // iframe ã‚’æ¶ˆã™
            messenger.addEventListener('hide', function () {
                Hatena.Diary.Window.hide($modalContainer);
            });

            messenger.addEventListener('close', function () {
                destroyed.done(function () {
                    $iframe.remove();
                    messenger.destroy();
                });
                Hatena.Diary.Window.hide($modalContainer);
            });

            Hatena.Diary.Window.show($modalContainer, {
                destroy: function () {
                    destroyed.resolve();
                },
                fixScroll: true,
                center: true,
                showBackground: true
            });
        }

        var self = this;

        Hatena.Diary.Browser.thirdPartyCookiesBlocked.resolve(!info.cookie_received);

        $('article.entry').each(function () {
            var $this = $(this);
            self.initEntry($this);
        });

        if (info.editable) {
            var $entry,
                timer,
                $menu = $('<div>').addClass('entry-header-menu'),
                create_edit_button = function ($entry) {
                    // ã‚¨ãƒ³ãƒˆãƒªã«ã‚«ãƒ¼ã‚½ãƒ«åˆã‚ã›ã‚‹ã¨å‡ºã¦ãã‚‹ã€Œç·¨é›†ã€ãƒœã‚¿ãƒ³ã‚’ä½œã‚‹
                    return $('<a>')
                             .attr( 'href', 'javascript:void' )
                             .text( Hatena.Locale.text('edit') )
                             .on('click', function (e) {
                                 e.preventDefault();
                                 Hatena.Diary.Pages.Blogs['*'].editEntry( $entry );
                             });
                };

            $(document).on('mouseenter', 'article.entry', function () {
                var $hovered = $(this);
                if ( $hovered.is($entry) ) {
                    clearTimeout(timer);
                    return;
                }

                $entry = $hovered;
                if ( !$entry.attr('data-uuid') ) return;

                $menu
                  .empty()
                  .append( create_edit_button($entry) )
                  .appendTo( $entry.find('.entry-header') )
                  .show();
            });

            $(document).on('mouseleave', 'article.entry', function () {
                clearTimeout(timer);
                timer = setTimeout(function () {
                    $entry = null;
                    $menu.fadeOut('fast');
                }, 2000);
            });

            // æ–°è¦é–‹è¨­æ™‚
            if ( info.has_just_registered ) {
                _gaq.push(['_trackPageview', '/register.done']);
            }

            // ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãƒšãƒ¼ã‚¸ã§ï¼Œãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã§ã¯ãªãã¦ï¼Œã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ˜ãƒƒãƒ€è¡¨ç¤ºä¸­ã®ã¨ã
            if (Hatena.Diary.data('page') === 'index' && ! Hatena.Diary.Location.param('preview') && $('#globalheader').is(':visible')) {
                Hatena.Diary.Pages.Blogs['*'].setupFirstEntry();
            }

            Hatena.Diary.setupProModal();

        }

        Hatena.Diary.Pages.Blogs['*'].renderGooglePlusOneButtons();
        // ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ã‚³ãƒ¡ãƒ³ãƒˆã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆ
        Hatena.Diary.Pages.Blogs['*'].setupHatenaBookmarkComment($('#container'));

        // ã‚¨ãƒ³ãƒˆãƒªãƒ¼ä¸€è¦§ã®ã‚«ãƒ«ãƒ¼ã‚»ãƒ«
        Hatena.Diary.Pages.Blogs['*'].setupEntryModuleCarousel();

        // è³¼èª­ãƒœã‚¿ãƒ³ã¨è³¼èª­è€…æ•°
        if (window === window.parent) {
            this.initSubscribe(info.subscribe, info.subscribes);
        }

        Hatena.Diary.Browser.thirdPartyCookiesBlocked.done(function(blocked) {
            if (blocked) {
                Hatena.Diary.Star.initStarForThirdPartyCookiesDisabled(info);
            }
        });

        Hatena.Diary.SpeedTrack.record("Pages.Blogs['*'].init");
    };

    Hatena.Diary.Pages.Blogs['*'].setupFirstEntry = function() {
        $('.entry-content').show();

        // 1è¨˜äº‹ã‚‚ãªã„ã¨ãï¼Œè¨˜äº‹ã‚’æ›¸ã“ã†ã¿ãŸã„ãªãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—ãªã©ã‚’è¡¨ç¤ºã™ã‚‹

        var $tooltip = $('.welcome-tooltip-newentry');
        $tooltip.click(function() {
            Hatena.Diary.Pages.Blogs['*'].newEntry();
        });
        Hatena.Diary.Pages.send('newEntryGeometry');
        Hatena.Diary.Pages.message('newEntryGeometry', function(geometry) {
            $tooltip.offset({
                left : (geometry.left + (geometry.width / 2)) - ($tooltip.outerWidth() / 2)
            });
            $tooltip.show();
        });
    };

    Hatena.Diary.Pages.Blogs['*'].newEntry = function (opts) {
        if (!opts) opts = {};

        Hatena.Diary.Editor.showEditInPlace(null, {
            update : function (data) {
                // data.entryã¯å‰å¾Œã«ç©ºç™½ã‚’å«ã‚€ã®ã§æ¶ˆã™
                var $newEntry = $(data.entry.replace(/^\s+/, '').replace(/\s+$/, ''));

                // ä¸‹æ›¸ãæŠ•ç¨¿ã®ã¨ãã¯ä½•ã‚‚ã—ãªã„
                if (!$newEntry.length) return;

                $newEntry.insertBefore('#main article.entry:first');
                Hatena.Diary.Pages.Blogs['*'].initEntry($newEntry);
                Hatena.Diary.Util.updateDynamicPieces($newEntry.parent());
                $('[data-remove-on-new-entry=1]').remove();
            }
        });
    };

    Hatena.Diary.Pages.Blogs['*'].editEntry = function ($entry) {
        if (!$entry) return;

        Hatena.Diary.Editor.showEditInPlace($entry, {
            update : function (data) {
                // data.entryã¯å‰å¾Œã«ç©ºç™½ã‚’å«ã‚€ã®ã§æ¶ˆã™
                var $newEntry = $(data.entry.replace(/^\s+/, '').replace(/\s+$/, ''));

                // è¨˜äº‹ã‚’å‰Šé™¤ã—ãŸå ´åˆã¯, å‰Šé™¤ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã‚’æ¶ˆã™
                if (!$newEntry.length) {
                    $entry.remove();
                    return;
                }
                $entry.replaceWith($newEntry);
                Hatena.Diary.Pages.Blogs['*'].initEntry($newEntry);
                Hatena.Diary.Util.updateDynamicPieces($newEntry.parent());
            }
        });
    };

    Hatena.Diary.Pages.Blogs['*'].initEntry = function (entry) {
        var self = this;
        var uuid = entry.attr('data-uuid');

        Hatena.Diary.Util.replaceYoutubeURL(entry);

        var container = entry.find('.comment-box .comment');
        $(container).delegate('.comment-delete-button', 'click', function (e) {
            var $button = $(this);

            Hatena.Diary.Pages.Blogs['*'].deleteCommentHandler(entry, $button);

            return false;
        });

        var showEntryInfo = function (entry, container, maxCommentsCount) {
            return self.loadEntryInfo(entry).done(function (info) {

                if (info.comments) {

                    var $readMoreLine = entry.find('.read-more-comments');
                    var $readMoreButton = $readMoreLine.find('a');
                    // readMoreButtonãŒç„¡ã„ã‹ã€maxCommentsCountãŒ0ã¾ãŸã¯ã‚³ãƒ¡ãƒ³ãƒˆã®ç·æ•°ãŒmaxCommentsCountã‚ˆã‚Šå°‘ãªã„ã¨ãã€å…¨ä»¶è¡¨ç¤º
                    var commentsCount = info.comments.entries.length;
                    var expandedInThisSession = false;
                    try {
                        var entriesExpandedComments = JSON.parse(sessionStorage.getItem('entriesExpandedComments')) || {};
                        expandedInThisSession = entriesExpandedComments[entry.attr('data-uuid')];
                    } catch (_ignored) {
                    }
                    if ($readMoreLine.length === 0 || maxCommentsCount === 0 || commentsCount <= maxCommentsCount || expandedInThisSession) {
                        maxCommentsCount = commentsCount;

                        // ã™ã¹ã¦ã®ã‚³ãƒ¡ãƒ³ãƒˆãŒè¡¨ç¤ºã•ã‚Œã‚‹
                        // ã™ã§ã«è¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã‚³ãƒ¡ãƒ³ãƒˆãŒã‚ã£ãŸã‚‰æ¶ˆã™
                        // ã“ã®ã¨ãã€Œã‚‚ã£ã¨èª­ã‚€ã€ã‚‚æ¶ˆãˆã‚‹
                        container.children().remove();
                        entry.attr('data-comments-expanded', true);
                    } else {
                        // ã¾ã è¡¨ç¤ºã•ã‚Œã¦ã„ãªã„ã‚³ãƒ¡ãƒ³ãƒˆãŒã‚ã‚‹ã‹ã‚‰ã€Œã‚‚ã£ã¨èª­ã‚€ã€ã‚’è¡¨ç¤ºã™ã‚‹
                        $readMoreLine.show();
                    }

                    // ã‚³ãƒ¡ãƒ³ãƒˆã®HTMLã‚’é€£çµã—ã¦ä¸€æ‹¬ã§DOMã«ã™ã‚‹
                    var commentHTML = '';
                    for (var i = 0, len = maxCommentsCount; i < len; i++) {
                        commentHTML += info.comments.entries[i];
                    }
                    var $comments = $(commentHTML);

                    container.prepend($comments);

                    // æœªè¡¨ç¤ºã®ã‚³ãƒ¡ãƒ³ãƒˆã®æ•°ã‚’è¡¨ç¤ºã™ã‚‹
                    $readMoreButton.text(
                        Hatena.Locale.text('read_more_comments') + ' (' + (info.comments.entries.length - maxCommentsCount) + ')'
                    );

                    if (Hatena.Star) {
                        Hatena.Diary.Util.waitForResource(function() {
                            return Hatena.Star && Hatena.Star.WindowObserver.loaded;
                        }, function() {
                            Hatena.Star.EntryLoader.intoCommentScope(function () {
                                Hatena.Diary.Util.updateDynamicPieces(container);
                            });
                        });
                    } else {
                        Hatena.Diary.Util.updateDynamicPieces(container);
                    }
                }

                Hatena.Diary.SpeedTrack.record("Pages.Blogs['*'].init.showEntryInfo");
            }).
                fail( Hatena.Diary.REPORT_BUG('loadEntryInfo') );
        };

        var $readMoreLine = entry.find('.read-more-comments');
        var $readMoreButton = $readMoreLine.find('a');

        // ã‚³ãƒ¡ãƒ³ãƒˆæœ€åˆã¯3ä»¶ã¾ã§è¡¨ç¤º
        showEntryInfo(entry, container, 3);

        $readMoreButton.click(function (e) {
            // ã€Œã‚‚ã£ã¨èª­ã‚€ã€ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸã‚‰ã‚³ãƒ¡ãƒ³ãƒˆå…¨ä»¶è¡¨ç¤º
            showEntryInfo(entry, container, 0).done(function () {
                try {
                    // ã‚‚ã£ã¨èª­ã‚€ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸå ´åˆ sessionStorage ã«çŠ¶æ…‹ã‚’ä¿å­˜ã—ã¦ãŠã
                    var map = {};
                    $('article[data-comments-expanded][data-uuid]').each(function () {
                        map[$(this).attr('data-uuid')] = true;
                    });
                    sessionStorage.setItem('entriesExpandedComments', JSON.stringify(map));
                } catch (_ignored) {
                }
            });
            return false;
        });

        Hatena.Diary.Pages.infoLoaded.done(function (info) {
            entry.find('.leave-comment-title').toggle(
                info.cookie_received ? info.commentable : true
            ).on('click', function () {
                var $button = $(this);
                Hatena.Diary.Pages.Blogs['*'].leaveCommentHandler(entry, $button);

                return false;
            });
        });

    };

    Hatena.Diary.Pages.Blogs['*'].deleteCommentHandler = function ($entry, $button) {
        var commentId = $button.closest('li.entry-comment').attr('id');

        var uri = Hatena.Diary.data('admin-domain') +
            '/' + Hatena.Diary.data('author') + '/' + Hatena.Diary.data('blog') +
            '/comment/delete?comment=' + encodeURIComponent(commentId.slice(8));

        Hatena.Diary.Browser.thirdPartyCookiesBlocked.done(function(blocked) {
            if (blocked) {
                Hatena.Diary.Pages.Blogs['*'].deleteCommentHandlerWindow($entry, $button, commentId, uri);
            } else {
                Hatena.Diary.Pages.Blogs['*'].deleteCommentHandlerIframe($entry, $button, commentId, uri);
            }
        });
    };

    Hatena.Diary.Pages.Blogs['*'].deleteCommentHandlerIframe = function ($entry, $button, commentId, uri) {
        var iframeContainer = $(
            '<div class="hatena-iframe-container"><div class="loading">' +
                '<img src="' + Hatena.Diary.URLGenerator.static_url('/images/loading.gif') + '" alt="loading"/>' +
                Hatena.Locale.text('loading') +
                '</div></div>').appendTo($entry);
        var iframe = $('<iframe frameborder="0"></iframe>').appendTo(iframeContainer);
        iframeContainer.
            css({
                width: 440,
                height: 120,
                position: 'absolute'
            }).
            offset( $button.offset() );

        var loading = iframeContainer.find('.loading').hide();
        setTimeout( function () { loading.show() }, 250);
        iframe.load(function () { loading.remove() });

        var messenger = Messenger.createForFrame(iframe[0], uri);
        messenger.addEventListener('delete', function (data) {
            $("#" + commentId).fadeOut();
        });
        messenger.addEventListener('close', function () {
            Hatena.Diary.Window.hide(iframeContainer);
        });

        Hatena.Diary.Window.show(iframeContainer, {
            destroy : function () {
                iframe.remove();
                messenger.destroy();
            }
        });
    };

    Hatena.Diary.Pages.Blogs['*'].deleteCommentHandlerWindow = function ($entry, $button, commentId, uri) {
        var position = {
            width:  300,
            height: 150
        };
        position.left = Math.floor((screen.width - position.width) / 2);
        position.top = Math.floor((screen.height - position.height) / 2);

        var position_string = Hatena.Diary.Util.positionToPositionString(position);

        var delete_comment_window = window.open('', 'delete_comment', position_string);

        var messenger = Messenger.createForWindow(delete_comment_window, uri);

        var close = function() {
            messenger.destroy();
            delete_comment_window.close();
        };

        messenger.addEventListener('delete', function (data) {
            $("#" + commentId).fadeOut();
        });

        messenger.addEventListener('close', close);

        $(document.body).one('focus', close);

    };


    Hatena.Diary.Pages.Blogs['*'].leaveCommentHandler = function ($entry, $button) {
        // viewableçŠ¶æ…‹ã§ã‚³ãƒ¡ãƒ³ãƒˆå‡ºæ¥ã‚‹ã‹ã©ã†ã‹æ±ºã‚ã‚‹ãŸã‚
        // bkã‚’tokenã¨ã—ã¦æ¸¡ã™
        var uri = Hatena.Diary.data('admin-domain') +
            '/' + Hatena.Diary.data('author') + '/' + Hatena.Diary.data('blog') + '/comment?' +
            $.param({
                entry : $entry.attr('data-uuid'),
                token : $.cookie('bk')
            });

        Hatena.Diary.Browser.thirdPartyCookiesBlocked.done(function(blocked) {
            if (blocked) {
                Hatena.Diary.Pages.Blogs['*'].leaveCommentHandlerWindow($entry, $button, uri);
            } else {
                Hatena.Diary.Pages.Blogs['*'].leaveCommentHandlerIframe($entry, $button, uri);
            }
        });
    };

    Hatena.Diary.Pages.Blogs['*'].leaveCommentHandlerWindow = function($entry, $button, uri) {
        var position = {
            width:  400,
            height: 240
        };
        position.left = Math.floor((screen.width - position.width) / 2);
        position.top = Math.floor((screen.height - position.height) / 2);

        var position_string = Hatena.Diary.Util.positionToPositionString(position);

        var comment_window = window.open('', 'comment', position_string);

        var messenger = Messenger.createForWindow(comment_window, uri);

        messenger.addEventListener('close', function() {
            messenger.destroy();
            comment_window.close();
        });

        messenger.addEventListener('update', function (data) {
            Hatena.Diary.Pages.Blogs['*'].appendPostedComment($entry, data.comment);
        });
    };

    Hatena.Diary.Pages.Blogs['*'].leaveCommentHandlerIframe = function($entry, $button, uri) {
        var container = $(
            '<div class="hatena-iframe-container">' +
                '<div class="loading">' +
                '<img src="' + Hatena.Diary.URLGenerator.static_url('/images/loading.gif') + '" alt="loading"/>' +
                Hatena.Locale.text('loading') +
                '</div>' +
                '</div>').
            hide().
            appendTo(document.body);

        var iframe = $('<iframe frameborder="0"></iframe>').appendTo(container);

        var loading = container.find('.loading').hide();

        setTimeout(function () {
            loading.show();
        }, 250);

        iframe.load(function () {
            loading.remove();
        });

        var offset   = $button.offset();
        var maxWidth = $(window).width();
        var winWidth = 440;
        var padding  = 10;

        // ã‚³ãƒ¡ãƒ³ãƒˆframeå¹…ãŒmaxWindowã‚ˆã‚Šå¤§ãã„å ´åˆã¯, ç¸®ã‚ã¦ä¸­å¤®ã«è¡¨ç¤º
        if ( (winWidth + 2*padding) > maxWidth ) {
            winWidth = maxWidth - 2*padding;
            offset.left = padding;
        }

        var height = 235;

        // ä¸ŠãŒæ–°ã—ã„ã¨ãã‚³ãƒ¡ãƒ³ãƒˆæ›¸ããƒœã‚¿ãƒ³ã®ä¸Šã«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦å‡ºã™
        var top_is_new = Hatena.Diary.data('blog-comments-top-is-new');
        if (top_is_new) {
            offset.top -= height;
            offset.top += $button.height();
        }

        container.
            css({
                width: winWidth,
                height: height,
                position: 'absolute'
            }).
            offset(offset);

        editinplace = iframe[0];

        var messenger = Messenger.createForFrame(editinplace, uri);

        messenger.addEventListener('update', function (data) {
            Hatena.Diary.Pages.Blogs['*'].appendPostedComment($entry, data.comment);
        });

        messenger.addEventListener('close', function () {
            Hatena.Diary.Window.hide(container);
        });

        messenger.addEventListener('resize', function (data) {
            if (data) {
                if (top_is_new && data.height  != height) {
                    data.top = container.css('top') + height - data.height;
                }
                container.css(data);
            }
        });

        Hatena.Diary.Window.show(container, {
            closeExplicitly : true,
            destroy : function () {
                iframe.remove();
                messenger.destroy();
            }
        });
    };

    Hatena.Diary.Pages.Blogs['*'].appendPostedComment = function($entry, comment_html) {
        var $container = $entry.find('.comment-box .comment');
        var top_is_new = Hatena.Diary.data('blog-comments-top-is-new');
        if (top_is_new) {
            $container.prepend(comment_html);
        } else {
            $container.append(comment_html);
        }

        if (Hatena.Star) {
            Hatena.Star.EntryLoader.intoCommentScope(function() {
                Hatena.Diary.Util.updateDynamicPieces($container);
            });
        } else {
            Hatena.Diary.Util.updateDynamicPieces($container);
        }
    };

    Hatena.Diary.Pages.Blogs['*'].loadEntryInfo = function me (entry) {
        if (!me.data) me.data = {
            timer : setTimeout(function () {
                var data = me.data;
                me.data = null;
                $.ajax({
                    url : Hatena.Diary.URLGenerator.user_blog_url('/api/entry/info'),
                    type : "get",
                    dataType : 'json',
                    cache : false,
                    data : {
                        e : data.entries
                    },
                    success : function (res) {
                        var entries = res.entries;
                        for (var key in entries) if (entries.hasOwnProperty(key)) {
                            var val = entries[key];
                            data.deferred[key].resolve(val);
                        }

                        Hatena.Diary.SpeedTrack.record("Pages.Blogs['*'].loadEntryInfo.ajax.success");
                    }
                });
            }, 0),
            entries : [],
            deferred : {}
        };

        var ret  = $.Deferred();
        var uuid = entry.attr('data-uuid');

        me.data.entries.push(uuid);
        me.data.deferred[uuid] = ret;

        return ret;
    };

    // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã§è¦ç´ ãŒè¡¨ç¤ºã•ã‚ŒãŸã¨ãã«ä½•ã‹ã™ã‚‹
    Hatena.Diary.Pages.Blogs['*'].elementDidAppear = function (element) {
        var deferred = $.Deferred();
        var _window = $(window);

        if (_window.scrollTop() > ($(element).offset().top - _window.height())) {
            deferred.resolve();
        } else {
            _window.scroll(_.throttle(function () {
                if (_window.scrollTop() > ($(element).offset().top - _window.height())) {
                    deferred.resolve();
                }
            }, 200));
        }
        return deferred.promise();
    };

    // Google+ãƒœã‚¿ãƒ³ã‚’æç”» plusone.jsã®ãƒ­ãƒ¼ãƒ‰ã«å¤±æ•—ã—ã¦ã‚‹ã‚ˆã†ãªã‚‰ä½•ã‚‚ã—ãªã„(ãªãœã‹èª­ã‚ã¦ãªã„ã“ã¨ãŒã‚ã‚‹)
    // YouTubeã®subscribeãƒœã‚¿ãƒ³ã‚‚plusone.jsã«å…¥ã£ã¦ã‚‹ã®ã§æç”»
    // https://developers.google.com/+/web/+1button/?hl=ja
    Hatena.Diary.Pages.Blogs['*'].renderGooglePlusOneButtons = function() {
        if (!window.gapi) return;

        try {
            window.gapi.plusone.go('container');
            window.gapi.ytsubscribe.go('container');
        } catch(ignore) {
            // Google+ãƒœã‚¿ãƒ³ã¯IE8ä»¥ä¸Šã®ã¿å¯¾å¿œã§ï¼ŒIE7ã§ã¯ä¾‹å¤–å‡ºã‚‹ã‘ã©ï¼Œç„¡è¦–ã™ã‚‹ï¼
        }
    };

    // è³¼èª­ã™ã‚‹/ã—ãªã„ ãƒœã‚¿ãƒ³
    // - è‡ªåˆ†ã®ãƒ–ãƒ­ã‚° : éè¡¨ç¤º
    // - è³¼èª­æ¸ˆãƒ–ãƒ­ã‚° : "èª­è€…ã‚’ã‚„ã‚ã‚‹"
    // - æœªè³¼èª­ãƒ–ãƒ­ã‚° : "èª­è€…ã«ãªã‚‹"
    // args:
    //   isSubscribing : é–²è¦§è€…ãŒãƒ–ãƒ­ã‚°ã‚’è³¼èª­ä¸­ã‹ã©ã†ã‹
    //   subscribers   : ãƒ–ãƒ­ã‚°ã®è³¼èª­è€…æ•°
    Hatena.Diary.Pages.Blogs['*'].initSubscribe = function (isSubscribing, subscribers) {
        // å…¨ã¦åŒã˜ãƒ–ãƒ­ã‚°ã€åŒã˜ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è¬›èª­ãƒœã‚¿ãƒ³
        var userData = {
            isSubscribing : isSubscribing,
            isGuest       : Hatena.Diary.data('rkm') && Hatena.Diary.data('rkc') ? false : true
        };
        var blogData = {
            subscribersCount: subscribers
        };

        // ãƒœã‚¿ãƒ³ã¨ã®é€šä¿¡ã«ç”¨ã„ã‚‹Messenger
        var messenger = Messenger.createForWindow(window);

        // ãƒœã‚¿ãƒ³ã‚’ç”Ÿæˆ
        var buttons = $('.hatena-follow-button-box').map(function () {
            return new Hatena.Diary.SubscribeButtonBlogs($(this), userData, blogData, messenger);
        }).toArray();

        // è¬›èª­é–‹å§‹/ä¸­æ­¢ã®å‡¦ç†ãŒå®Œäº†ã—ãŸã¨ã„ã†ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å—ã‘å–ã£ãŸæ™‚ã®å‡¦ç†
        // iframeç‰ˆã¨ã®é€šä¿¡ã¯globalHeaderã‚’é€šã˜ã¦è¡Œã†
        // admin -> blogs
        Hatena.Diary.Pages.message('subscription', function (data) {
            messenger.send('subscription', data);
        });
        // blogs -> admin
        messenger.addEventListener('subscription', function (data) {
            Hatena.Diary.Pages.send('subscription', data);
        });

        // globalHeaderã‹ã‚‰ã®subscribeãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å—ã‘å–ã‚‹ãŸã‚ã®ãƒœã‚¿ãƒ³
        var $hiddenButton = $('#hidden-subscribe-button > .hatena-follow-button-box');
        this.subscribeButtonForMessage =
            new Hatena.Diary.SubscribeButtonBlogs($hiddenButton, userData, blogData, messenger);

        var self = this;
        Hatena.Diary.Pages.message('subscribe', function (data) {
            var offset = { left: data.left + 5 };
            self.subscribeButtonForMessage.openSubscribeWindow(offset, true);
        });

        // è¡¨ç¤ºä¸­ã®ãƒ–ãƒ­ã‚°ãŒè¬›èª­ã•ã‚ŒãŸã‚‰ã€globalheaderã«ã€Œè³¼èª­ä¸­ã§ã™ã€ãƒ©ãƒ™ãƒ«ã‚’å‡ºã™
        var blogHost = Hatena.Diary.data('blog');
        messenger.addEventListener('subscription', function (data) {
            if (data[blogUrl] === true) {
                Hatena.Diary.Pages.send('subscribed-current-blog');
            }
        });
    };

    Hatena.Diary.Pages.Blogs['*'].setupHatenaBookmarkComment = function ($superNode) {
        // ä¸Šä½ã®ãƒãƒ¼ãƒ‰ã‚’æŒ‡å®šã™ã‚‹ã“ã¨
        // ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ã‚³ãƒ¡ãƒ³ãƒˆã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã®ã‚µã‚¤ã‚ºèª¿æ•´
        var $bookmark_comment = $superNode.find('.hatena-bookmark-comment-iframe');

        if ($bookmark_comment.size() === 0) return;

        _.each($bookmark_comment, function (item) {
            var $item = $(item);
            var messenger = Messenger.createForFrame($item[0], $item.attr('data-src'));
            messenger.addEventListener('resize', function (height) {
                $item.css('height', height);
            });
        });
    };

    Hatena.Diary.Pages.Blogs['*'].setupOndemandCommentDeleteButton = function() {
        $(document).on('mouseenter', '.entry-comment', function(e) {
            var $comment = $(this);
            if ($comment.find('.comment-delete-button img').size() > 0)
                return;
            var comment_uuid = $comment.attr('data-comment-uuid');
            var blog_uuid = $comment.attr('data-blog-uuid');
            var url = Hatena.Diary.data('admin-domain') + '/api/comment.delete.image?comment=' + comment_uuid + '&blog=' + blog_uuid;
            var $img = $('<img>');
            $img.attr('src', url);
            var handler = function() {
                $img.attr('alt', 'delete');
            };
            $img.load(handler);
            $img.error(handler);
            $comment.find('.comment-delete-button').append($img);
        });
    };

    // Tumblr æä¾›ã®ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆ http://www.tumblr.com/apps#bookmarklet_window ã‚’
    // URL ãŠã‚ˆã³ã‚¿ã‚¤ãƒˆãƒ«ã‚’æ˜ã«æŒ‡å®šã§ãã‚‹ã‚ˆã†ã«æ”¹é€ ã—ãŸã‚‚ã®
    Hatena.Diary.Pages.Blogs['*'].setupTumblrShareButtons = function (elem) {
        $(elem || document.body).find('a[data-hatenablog-tumblr-share-button]').on('click', function () {
            var selection = window.getSelection   ? window.getSelection()
                : document.getSelection ? document.getSelection()
                : document.selection    ? document.selection.createRange().text : 0;
            var url = 'http://www.tumblr.com/share?' + $.param({
                v: 3,
                u: $(this).attr('data-share-url') || location.href,
                t: $(this).attr('data-share-title') || document.title,
                s: selection + ''
            });
            var go = function () {
                if (!window.open(url, 't', 'toolbar=0,resizable=0,status=1,width=450,height=430')) {
                    location.href = url;
                }
            };
            if (/Firefox/.test(navigator.userAvent)) {
                setTimeout(go, 0);
            } else {
                go();
            }
            return false;
        });
    };

    Hatena.Diary.Pages.Blogs['*'].setupEntryModuleCarousel = function() {
        var $carouselScripts = $(document).find('script[type="text/x-hatenablog-carousel"]');

        _.each($carouselScripts, function (item) {
            var $item = $(item);
            var displayEntrySize = $item.attr('data-carousel-display-entry-size-at-once');
            var opts = {
                isAutoScroll: $item.attr('data-carousel-autoscroll') === 'true',
                displayEntrySizeAtOnce: displayEntrySize !== undefined ? Number(displayEntrySize) : undefined
            };
            if (opts.isAutoScroll) {
                var interval = $item.attr('data-carousel-autoscroll-interval');
                opts.autoScrollInterval = interval !== undefined ? Number(interval) : undefined;
            }
            new Hatena.Diary.EntryModuleCarousel($(document).find($item.html()), opts);
        });

    };

    // ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³ã®å ´åˆã€Touchç”¨ã®å‡¦ç†ã‚’BlogsTouchã§ã¯ãªãBlogsã«æ›¸ãå¿…è¦ãŒã‚ã‚‹
    // tap delayå¯¾ç­–
    Hatena.Diary.Pages.Blogs['*'].setupFastClick = function () {
        FastClick.attach(document.body);
    };

})(jQuery);

(function($){

    Hatena.Diary.Pages.Blogs['blog-count-limit-exceeded'] = function () {
        Hatena.Diary.Pages.infoLoaded.done(function (info) {
            var selector = info.editable ? '.js-message-author' : '.js-message-guest';
            $('#container').append($(selector).html());
        });
    };

})(jQuery);

(function($){

    Hatena.Diary.Pages.Blogs['circle'] = function () {
        Hatena.Diary.Pages.Blogs['circle'].setupControls();
        Hatena.Diary.Pages.Blogs['circle'].setupSidebar();
        Hatena.Diary.Pages.Blogs['circle'].setupSpace();

        Hatena.Diary.Pages.infoLoaded.done(function (info) {
            if (info.flash && info.flash.has_just_created_circle) {
                var closeFlash = function () { $('#flash-created-circle').fadeOut('fast') };
                $('#flash-created-circle')
                    .find('.close').click(function () { closeFlash() }).end()
                    .show();
                $(document.body).on('click', function (e) {
                    if ($(e.target).closest('#flash-created-circle').length === 0) {
                        closeFlash();
                        $(document.body).off('click', arguments.callee);
                        return false;
                    }
                });
            }
        });

        Hatena.Diary.Util.initScrollFollowedElement($('.js-followed-ad-container'), false);
    };

    Hatena.Diary.Pages.Blogs['circle'].setupControls = function () {
        Hatena.Diary.Pages.infoLoaded.done(function (info) {
            if (info.is_admin) {
                $('.admin-control').addClass('admin-control-available');
            } else {
                $('.admin-control').addClass('admin-control-unavailable');
            }

            if (info.is_member) {
                $('.circle-member-control').addClass('circle-member-control-available');
            } else {
                $('.circle-member-control').addClass('circle-member-control-unavailable');
            }

            if (info.has_blogs) {
                $('.blog-user-control').addClass('blog-user-control-available');
            } else {
                $('.blog-user-control').addClass('blog-user-control-unavailable');
            }

            if (info.cookie_received === false) {
                // ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ãƒ¼ã‚¯ãƒƒã‚­ãƒ¼ç„¡åŠ¹ã®ã¨ãã«å‡ºã™æŒ‡å®šãŒã‚ã‚‹ã‚‚ã®ã¯å‡ºã‚‹ã‚ˆã†ã«ã‚¯ãƒ©ã‚¹ã‚’ãµã‚Šç›´ã™
                $('[data-user-unknown-overrides]')
                    .removeClass('admin-control-unavailable circle-member-control-unavailable blog-user-control-unavailable')
                    .addClass('admin-control-available circle-member-control-available blog-user-control-available');
            }
        });
    };

    // å¯èƒ½ãªã‚‰æ±ç”¨åŒ–ã—ãŸã„
    function createMessenger (url, name, $container) {
        return Hatena.Diary.Browser.thirdPartyCookiesBlocked.pipe(function (blocked) {
            var messenger;

            if (blocked) {
                var size = { width: 300, height: 400 };
                size.left = Math.floor((screen.width - size.width) / 2);
                size.top  = Math.floor((screen.height - size.height) / 2);

                var subwindow = window.open('', name, Hatena.Diary.Util.positionToPositionString(size));
                messenger = Messenger.createForWindow(subwindow, url);

                messenger.addEventListener('close', function () {
                    messenger.destroy();
                    subwindow.close();
                });
            } else {
                var $iframe = $('<iframe frameborder=0>').appendTo($container);
                messenger = Messenger.createForFrame(
                    $iframe[0], url
                );

                messenger.addEventListener('close', function () {
                    Hatena.Diary.Window.hide($container);
                });

                messenger.addEventListener('resize', function (css) {
                    if (css) $iframe.css(css);
                });

                Hatena.Diary.Window.show($container, {
                    destroy: function () {
                        $iframe.remove();
                        messenger.destroy();
                    }
                });
            }

            return messenger;
        });
    }

    Hatena.Diary.Pages.Blogs['circle'].setupSidebar = function () {
        $('.manage-membership-button').click(function () {
            createMessenger(
                $('html').attr('data-admin-domain') + '/-/group/' + $('html').attr('data-circle-id') + '/membership',
                'manage-membership',
                $(this).siblings('.manage-membership-popup')
            );

            return false;
        });
    };

    Hatena.Diary.Pages.Blogs['circle'].setupSpace = function () {
        if (!$('.hatena-module.circle-space')[0]) return;
        $.getScript('http://space.hatena.ne.jp/js/interest.widget.js');
    };

    Hatena.Diary.Pages.Blogs['circle-blogs'] = function () {
        Hatena.Diary.Pages.Blogs['circle'].setupSidebar();
    };

    Hatena.Diary.Pages.Blogs['group-category'] = function () {
        Hatena.Diary.Util.initScrollFollowedElement($('.js-followed-ad-container'), true);
    };

    Hatena.Diary.Pages.Blogs['recent-groups'] = function () {
        Hatena.Diary.Util.initScrollFollowedElement($('.js-followed-ad-container'), true);
    };

})(jQuery);

(function($){

    Hatena.Diary.Pages.Blogs['famous-blogs-top'] = function () {
        $(document).on('click', '.js-read-old-entries', function() {
            var $button = $(this);
            $button.closest('.js-category-container').find('.js-old-entry').show();
            $button.remove();
        });
    };

})(jQuery);

(function($){

    Hatena.Diary.Pages.Blogs['global-top'] = function() {
        $('img[data-alternate-src]').one('error', function() {
            var $img = $(this);
            $img.attr('src', $img.attr('data-alternate-src'));
        });

        $('.js-category-wrapper').tabs({
            selected : 0
        });

        // æ¨™æº–ã®ã‚¿ãƒ–ã®UIã§ã¯ãªãï¼Œnav-barã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚’å½“ã¦ãŸã„ã®ã§ï¼Œã‚¯ãƒ©ã‚¹æ¶ˆã™
        $('.js-category-wrapper .ui-tabs-nav').removeClass('ui-tabs-nav');

        // globalãƒˆãƒƒãƒ—ã¯ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã•ã‚Œã¦ã‚‹ã®ã§ã€jsã§viaã®å¼•ãç¶™ãã‚’ã™ã‚‹
        var via = Hatena.Diary.Location.param('via');
        if (via) {
            Hatena.Diary.inheritVia(via);
        }
    };

})(jQuery);
(function($){

    Hatena.Diary.Pages.Blogs['guide-pro-modal-ad'] = function () {
        Hatena.Diary.Pages.createForParent();

        $('.close-window').on('click', function (e) {
            Hatena.Diary.Pages.send('close', { name : window.name });
            return false;
        });
    };

})(jQuery);

(function($){

    Hatena.Diary.Pages.Blogs['hatena-bookmark-comment'] = function () {
        var messenger = Messenger.createForParent(),
        OFFSET = 30,        // iframeã®bodyã¨ã®ä½™ç™½åˆ†, ååˆ†å¤§ãã„é©å½“ãªå€¤
        current_height = 0;

        var sendResize = function () {
            var next_height = $('body').height() + OFFSET;
            if (next_height !== current_height) {
                messenger.send('resize', next_height);
                current_height = next_height;
            }
        };

        // ãƒœã‚¿ãƒ³ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸã¨ãã‚µã‚¤ã‚ºãŒå¤‰ã‚ã‚‹
        $(document).on('click', '.hatena-bookmark-span-button', function () {
            sendResize();
        });

        setInterval(function(){
            sendResize();
        }, 1000);
    };

})(jQuery);
(function($){

    Hatena.Diary.Pages.Blogs['index'] = function () {
        Hatena.Diary.Location.setup();

        $(window).hashchange(function () {
            if (location.hash == '#edit') {

                Hatena.Diary.Pages.infoLoaded.done(function (info) {
                    if (info.editable) {
                        Hatena.Diary.Pages.Blogs['*'].newEntry();
                    }
                }).
                    fail(function (e) {
                        Hatena.Diary.BUG(e);
                    });
            }
        }).hashchange();
    };

})(jQuery);

(function($){

    Hatena.Diary.Pages.Blogs['preview'] = function() {
        try {
            if (!window.sessionStorage)
                return;
            var editor_id = $('#content').attr('data-editor-id');
            if (!editor_id)
                return;
            var $document = $(document);

            var pos = sessionStorage.previewed_scroll_position ? JSON.parse(sessionStorage.previewed_scroll_position) : null;
            if (pos && pos.editor_id == editor_id) {
                $document.scrollTop(pos.top);
                $document.scrollLeft(pos.left);
            }

            $document.scroll(_.throttle(function() {
                sessionStorage.previewed_scroll_position = JSON.stringify({
                    editor_id : editor_id,
                    top: $document.scrollTop(),
                    left: $document.scrollLeft()
                });
            }, 100));
        } catch (_ignored) {
        }
    };

})(jQuery);

(function($){
    Hatena.Diary.Pages.Blogs['preview_url_embed'] = function () {
        var messenger = Messenger.createForParent();

        // æœ€åˆã®1å›ã¯å¿…ãšsendã™ã‚‹ãŸã‚ã«ï¼Œnullã«ã—ã¦ãŠãï¼
        // IEã§ã¯ï¼Œéè¡¨ç¤ºãªè¦ç´ ã®é«˜ã•å–ã‚Œãªã„ãŸã‚ï¼Œæœ€åˆé«˜ã•å–ã‚‹ã¨0ã«ãªã‚‹ï¼
        // 0ã§é€ã‚‹ã¨ï¼Œè¦ªã§iframeãŒè¡¨ç¤ºã•ã‚Œã¦ï¼Œãã®å¾Œé«˜ã•ã‚’å–å¾—ã™ã‚‹ã¨ï¼Œæ­£ã—ã„é«˜ã•ã«ãªã‚Šï¼Œè¡¨ç¤ºã•ã‚Œã‚‹ï¼
        var current_height = null;

        var sendResize = function () {
            var next_height = $('html').height();
            if (next_height !== current_height) {
                messenger.send('resize', next_height);
                current_height = next_height;
            }
        };

        // å±•é–‹æˆåŠŸã—ã¦ã„ãŸã‚‰ã“ã®è¦ç´ ãŒã‚ã‚‹ï¼é«˜ã•ã‚’è¦ªã«ä¼ãˆã‚‹ï¼å¤±æ•—ã—ã¦ãŸã‚‰iframeæ¶ˆã—ã¦ã‚‚ã‚‰ã†ï¼
        var embed_success = !! $('.js-embed-preview')[0];

        if (embed_success) {
            sendResize();
            setInterval(function(){
                sendResize();
            }, 1000);
        } else {
            // å±•é–‹å¤±æ•—
            messenger.send('close');
        }
    };

})(jQuery);

(function($){

    Hatena.Diary.Pages.Blogs['realtime_preview'] = function() {
        try{
            if (!window.sessionStorage)
                return;

            var editor_id = $('#realtime-preview-content').attr('data-editor-id');

            if (!editor_id)
                return;
            var $wrapper = $('#realtime-preview-wrapper');

            var pos = sessionStorage.realtime_previewed_scroll_position ? JSON.parse(sessionStorage.realtime_previewed_scroll_position) : null;
            if (pos && pos.editor_id == editor_id) {
                $wrapper.scrollTop(pos.top);
                $wrapper.scrollLeft(pos.left);
            }

            $wrapper.scroll(_.throttle(function() {
                sessionStorage.realtime_previewed_scroll_position = JSON.stringify({
                    editor_id : editor_id,
                    top: $wrapper.scrollTop(),
                    left: $wrapper.scrollLeft()
                });
            }, 100));
        } catch (_ignored) {
        }
    };

})(jQuery);

(function($){

    Hatena.Diary.Pages.Blogs['preview-draft'] = function() {
        $(function () {
            // è¨˜äº‹æƒ…å ±ã®ãƒœãƒƒã‚¯ã‚¹ã‚’å‡ºã™
            var $box         = $('.js-preview-draft-modal');
            var $closeButton = $box.find('.js-preview-draft-modal-btn');

            $closeButton
                .focus()
                .on('click', function () {
                    $box.addClass('is-hidden');
                });
        });
    };

})(jQuery);

// touchç‰ˆã®ç·¨é›†ç”»é¢, æŠ•ç¨¿å®Œäº†ç”»é¢ã§twitterã®æ–‡å­—æ•°ã‚’ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¡Œã„ã¾ã™
(function($) {
    Hatena.Diary.Touch  = Hatena.Diary.Touch || {};
    Hatena.Diary.Touch.TwitterValidator = function () { this.init.apply(this, arguments) };
    Hatena.Diary.Touch.TwitterValidator.prototype = {
        init: function ($el) {
            this.$el = $el;
            this.$textarea = $el.find('textarea');
            this.$errorMessage = $el.find('.js-twitter-length-error');
            this.$checkBox =  $el.find('input[name="post_to_twitter"]');
            this.$shareButton =  $el.find('.js-touch-share-button');
            this.bindEvents();
        },
        bindEvents: function () {
            var self = this;
            self.$textarea.keyup(function() {
                if (Hatena.Diary.validationTweetLength(self.$textarea.val()) === false) {
                    self.showErrorMessage();
                    self.disabledCheckBox();
                    self.disabledShareButton();
                }
                else {
                    self.hideErrorMessage();
                    self.enabledCheckBox();
                    self.enabledShareButton();
                }
            });
        },
        hideErrorMessage: function() {
            this.$errorMessage.hide();
        },
        showErrorMessage: function() {
            this.$errorMessage.show();
        },
        disabledCheckBox: function() {
            this.$checkBox.attr('disabled', true);
        },
        enabledCheckBox: function() {
            this.$checkBox.attr('disabled', false);
        },
        disabledShareButton: function() {
            this.$shareButton.attr('disabled', true);
        },
        enabledShareButton: function() {
            this.$shareButton.attr('disabled', false);
        }
    };
})(jQuery);

(function($){

Hatena.Diary.Pages.AdminTouch['globalheader'] = function () {
    Hatena.Diary.Pages.createForParent();

    Hatena.Diary.Pages.loadInfo().done(function (info, privateInfo) {
        Hatena.Diary.Pages.AdminTouch['globalheader'].initSubscribe(info);
    });
};

// ã‚¹ãƒãƒ•ã‚©ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ˜ãƒƒãƒ€ã®è³¼èª­ãƒœã‚¿ãƒ³
Hatena.Diary.Pages.AdminTouch['globalheader'].initSubscribe = function (info) {
    // ãƒ–ãƒ­ã‚°ãŒãªã„ã¨ãã¯ä½•ã‚‚ã—ãªã„
    // è‡ªåˆ†ã®ãƒ–ãƒ­ã‚°ã«ã¯èª­è€…ã«ãªã‚‹å‡ºã•ãªã„
    // è³¼èª­ä¸­ã‚‚å‡ºã•ãªã„
    if (!info.blog) return;
    if (info.can_open_editor) return;
    if (info.subscribe) return;

    var $container = $('.js-subscribe-container');
    var $link = $container.find('.js-subscribe-link');

    // ãƒªãƒ³ã‚¯å…ˆè¨­å®š
    $link.attr('href', info.subscribe_url);

    // è³¼èª­ãƒœã‚¿ãƒ³è¡¨ç¤º
    $container.show();
};

Hatena.Diary.Pages.AdminTouch['*'] = function () {
    Hatena.Locale.setupTimestampUpdater();
    $('label').click(function () {}); // Mobile safari ã¯ onclick ã¤ã‘ãªã„ã¨ label ãŒåŠ¹ã‹ãªã„ã‚‰ã—ã„

    Hatena.Diary.Pages.AdminTouch['*'].androidAppBanner.init();
};

Hatena.Diary.Pages.AdminTouch['*'].androidAppBanner = {
    init : function () {
        // Androidã‚¢ãƒ—ãƒªç”¨ã®ãƒãƒŠãƒ¼

        var self = this;

        var $banner = $('#android-app-banner');

        if ($banner.length === 0) {
            return;
        }
        var $closeButton = $('#android-app-banner-close');

        $closeButton.click(function (e) {
            $banner.slideToggle(400);
            self.setDismiss(true);
        });

        if (!self.isDismissed()) {
            setTimeout(function () {
                $banner.slideToggle(400);
            }, 0);
        }
    },

    _localStorageKey : 'Hatena.Diary.Pages.AdminTouch.dismissAndroidAppBanner',

    _localStorageEnabled : function () {
        try {
            if (window.localStorage) {
                return true;
            }
        } catch (ignore) {}
        return false;
    },

    isDismissed : function () {
        // éè¡¨ç¤ºã«è¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ã©ã†ã‹
        var self = this;
        if (self._localStorageEnabled()) {
            return localStorage.getItem(self._localStorageKey) === 'true';
        }
        return false;
    },

    setDismiss : function (dismissed) {
        // éè¡¨ç¤ºã«è¨­å®šã™ã‚‹
        var self = this;
        if (self._localStorageEnabled()) {
            localStorage.setItem(self._localStorageKey, dismissed ? 'true' : 'false');
        }
    }
};

Hatena.Diary.Pages.AdminTouch['index'] = function () {
    var tabs   = $('#admin-top-tab');
    var navs   = $('#admin-top-tab .nav-cell');
    var panels = $('#config-container > .section');

    var loaded = false;
    $(window).load(function () { loaded = true });

    navs.click(function () {
        var $this = $(this);
        navs.removeClass('selected');
        navs.find('a img').each(function () {
            if (/-selected/.test(this.src)) {
                this.src = this.src.replace(/-selected/, '');
            }
        });
        panels.hide();

        var a = $this.find('a');
        $this.addClass('selected');
        a.find('img').each(function () {
            this.src = this.src.replace(/\.([^.\/]+)$/, '-selected.$1');
        });

        var panel = panels.filter(a.attr('href'));
        panel.show();

        tabs.trigger('tabsactivate', { panel : { id : panel.attr('id') } });

        if ('replaceState' in history && loaded) {
            var hash = (a.attr('href').match(/(#.+)/))[0];
            if (hash) {
                history.replaceState(null, document.title, hash);
            }
        }

        // antenna
        var $closedBlogs = $('.closed-blog');
        $closedBlogs.each(function(){
            var $closedBlog = $(this);
            var antennaUrl = $closedBlog.data("antennaUrl");
            $.ajax({
                type: 'GET',
                url: antennaUrl,
                data: { device: 'touch' },
                dataType: 'html',
                crossDomain: true,
                xhrFields: {
                        withCredentials: true
                }
            }).done(function(res){
                $closedBlog.empty();
                $closedBlog.append(res);
                var $blogContents = $closedBlog.find('.js-blog-content');
                Hatena.Locale.updateTimestamps($blogContents[0]);
            });
        });
        return false;
    });

    var BASE     = location.hostname.match(/\.hatena\.[^:]+/)[0];
    var notifyCount = $('#admin-top-tab .notify-count').hide();
    $.getJSON("https://www" + BASE + "/notify/notices.count.json?callback=?", function (res) {
        if (res.count) {
            notifyCount.text(res.count).show();
        }
        Hatena.Diary.Util.needComrule2013(res);
    });

    tabs.on('tabsactivate', function (e, ui) {
        if (ui.panel.id == 'notify') {
            notifyCount.hide();
            var notifyContainer = $('#notify').empty();
            var uri = 'https://www' + BASE + '/notify/notices.iframe?' + new Date().getTime();
            $('<iframe style="width: 100%; height: 340px; margin: 5px 0; padding: 0" frameborder="0"/>').attr('src', uri).appendTo(notifyContainer);
        }
    });

    var selected = navs.filter(function () {
        return $(this).find('a').filter(function () { return $(this).attr('href') == location.hash }).length !== 0;
    });
    (selected.length ? selected : navs.eq(0)).click();

    Hatena.Diary.Pages.AdminTouch['user-blog-entries'].setupEntryListLinks();

    Hatena.Diary.Pages.AdminTouch['index'].getDashboardData();
};

Hatena.Diary.Pages.AdminTouch['user-blog-comment-done'] = function () {
    Hatena.Diary.Pages.createForParent();

    var comment = document.getElementById('posted').value;

    Hatena.Diary.Pages.send('update', { comment : comment });

    Hatena.Diary.Pages.send('close');
};

Hatena.Diary.Pages.AdminTouch['index'].getDashboardData = function () {
    $.ajax({
        type: 'GET',
        url: '/-/dashboard_data',
        data: { device: 'touch' }
    }).done(function(data) {
        $('section#subscribe').append(data.subscribing_blogs);
        $('section.js-hotentry-container').append(data.hot_entries);
    });
};

Hatena.Diary.Pages.AdminTouch['locale'] = function () {
    $('a.js-set-language').on('click', function () {
        var $this = $(this);
        var lang = $this.attr('data-lang');
        Hatena.Locale.setAcceptLang(lang);
        location.href = Hatena.Diary.Location.param('location') || '/';
        return false;
    });
};

Hatena.Diary.Pages.AdminTouch['user-blog-edit'] = function () {
    Hatena.Diary.Backup.UI = 'touch';
    Hatena.Diary.Backup.setup();

    var editEntry = $('#edit-entry');

    if (Hatena.Diary.Pages.AdminTouch['user-blog-edit'].contentEditableEnabledAndEditorModeIsHTML()) {

        var textarea = editEntry.find('textarea#entry-body');
        var iframe = $('<iframe src="about:blank" frameborder="0">')
                     .attr('id', 'entry-html-body')
                     .prependTo('div.edit-body');

        var wysiwygDocument = iframe.prop('contentDocument');
        var body = textarea.val();
        // åˆæŠ•ç¨¿ã®å ´åˆã¯ <p> ã‚’å…¥ã‚Œã¦ãŠã
        if (!body && !$('form#edit-form input[name="entry"]').val()) {
            body = '<p><br/></p>';
        }
        var link = wysiwygDocument.createElement('link');
        link.setAttribute('type', 'text/css');
        link.setAttribute('rel',  'stylesheet');
        link.setAttribute('href', Hatena.Diary.data('admin-domain') + '/css/touch/blog-edit.css');

        wysiwygDocument.getElementsByTagName('head')[0].appendChild(link);
        wysiwygDocument.body.innerHTML = body;
        wysiwygDocument.body.contentEditable = true;
        wysiwygDocument.body.addEventListener('keyup', function () {
            textarea.val(wysiwygDocument.body.innerHTML);
        }, true);

        $('form#edit-form').append($('<input type="hidden" name="wysiwyg" value="1">')).submit(function () {
            $('textarea#entry-body').val(wysiwygDocument.body.innerHTML);
        }).bind('backup-restore', function () {
            wysiwygDocument.body.innerHTML = textarea.val();
        });

        // ã“ã‚Œã—ãªã„ã¨ Safari ã§å…¥åŠ›ã§ããªããªã‚‹
        $('input#entry-title').blur(function () {
            iframe.focus();
        });

        // ç·¨é›†ä¸­ã«ãƒªãƒ³ã‚¯ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨åˆ¥ã®ç”»é¢ã«é·ç§»ã—ã¦ã„ã‚‹ãŸã‚clickã‚¤ãƒ™ãƒ³ãƒˆã‚’ç„¡åŠ¹åŒ–ã—ã¦ã‚‹
        $(wysiwygDocument).on('click', "a", function() {
            return false;
        });

        textarea.hide();
    }

    Hatena.Diary.Pages.AdminTouch['user-blog-edit'].setupUpload();

    Hatena.Diary.Pages.AdminTouch['user-blog-edit'].setupMyCuration();

    Hatena.Diary.Pages.AdminTouch['user-blog-edit'].setupScheduledEntry();

    if (Hatena.Diary.Pages.AdminTouch['user-blog-edit'].dateTimeEditorEnabled()) {
        Hatena.Diary.Pages.AdminTouch['user-blog-edit'].setupDateTimeEditor();
    }

    Hatena.Diary.Pages.AdminTouch['user-blog-edit'].setupOptionsToggle();
    new Hatena.Diary.Touch.TwitterValidator($('.js-touch-edit-socialize-box-li.twitter'));
};

Hatena.Diary.Pages.AdminTouch['user-blog-edit-done'] = function () {
    Hatena.Diary.Pages.AdminTouch['user-blog-edit-done'].postToSocialService();
    new Hatena.Diary.Touch.TwitterValidator($('.js-touch-edit-socialize-box-li.twitter'));
};

Hatena.Diary.Pages.AdminTouch['user-blog-edit'].setupOptionsToggle = function () {
    var $options = $('.post-options');
    $('.js-toggle-options').on('click', function() {
        $options.toggle();
        $(document).scrollTop($options.position().top);
        return false;
    });
};

Hatena.Diary.Pages.AdminTouch['user-blog-edit'].execCommand = function (command, value) {
    var editor = tinymce.get('entry-body');
    editor.execCommand(command, false, value);
    editor.save();
};

Hatena.Diary.Pages.AdminTouch['user-blog-edit'].contentEditableEnabledAndEditorModeIsHTML = function() {
    // Android ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ–ãƒ©ã‚¦ã‚¶ã¯é¿ã‘ã‚‹
    // (Opera Mobile ã¯ãã‚‚ãã‚‚ contentEditable éå¯¾å¿œ)
    var editEntry = $('#edit-entry');
    var ua = navigator.userAgent;
    var isMobileSafari = /\b(?:iPhone|iPad)\b/.exec(ua) && /\bVersion\/(\d+\.\d+)/.exec(ua) && Number(RegExp.$1) >= 5.1;
    var isAndroidChrome = /\bAndroid\b/.exec(ua) && /\bChrome\b/.exec(ua);
    return editEntry.attr('data-entry-syntax') == 'html' && 'contentEditable' in document.body &&
        (isMobileSafari || isAndroidChrome);
};

Hatena.Diary.Pages.AdminTouch['user-blog-edit'].pickColor = function (callback) {
    var button = $('#edit-entry .toolbar button[data-action="color"]');
    Hatena.Diary.Pages.AdminTouch['user-blog-edit'].ColorPicker.show(button.offset(), function (e, color) {
        callback(color);
    });
};

Hatena.Diary.Pages.AdminTouch['user-blog-edit'].fontSize = function (delta) {
    var selection = tinymce.get('entry-body').selection;

    var span = selection.getNode();
    if (span.nodeName.toLowerCase() != 'span')  {
        span = document.createElement('span');
        span.setAttribute('style', 'font-size: ' + (100 + delta) + '%');

        var range = selection.getRng();
        range.surroundContents(span);
        selection.setRng(range);
    } else {
        var remove = false;
        span.setAttribute('style', span.getAttribute('style').replace(/font-size:\s*(\d+)%|$/, function (_, size) {
            if (typeof(size) == 'undefined') size = 100;
            size = +size + delta;
            if (size == 100) remove = true;
            return 'font-size:' + size + '%';
        }));

        if (remove) {
            var frag = document.createDocumentFragment();
            while (span.firstChild) frag.appendChild(span.firstChild);
            span.parentNode.insertBefore(frag, span);
            span.parentNode.removeChild(span);
        }
    }
};

Hatena.Diary.Pages.AdminTouch['user-blog-edit'].insertText = function(text) {
    if ($('iframe#entry-html-body').length > 0) {
        this.insertText.contentEditable(text);
    } else if (navigator.userAgent.match(/3DS/)) {
        this.insertText.textarea3DS(text);
    } else {
        this.insertText.textarea(text);
    }
};

Hatena.Diary.Pages.AdminTouch['user-blog-edit'].insertText.textarea = function(text) {
    var $textarea = $('textarea#entry-body');
    var textarea = $textarea[0];
    var val = $textarea.val();

    var range = {
        start: textarea.selectionStart,
        end: textarea.selectionEnd
    };

    $textarea.val(val.substring(0, range.start) + text + val.substring(range.end));
};

Hatena.Diary.Pages.AdminTouch['user-blog-edit'].insertText.textarea3DS = function(text) {
    // 3DSã§ã¯selectionStartã¨ã‹å–ã‚Œãªã„ã®ã§ï¼Œå¿…ãšãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒªã‚¢ã®æœ€å¾Œã«æŒ¿å…¥ã™ã‚‹

    var $textarea = $('textarea#entry-body');
    var val = $textarea.val();

    var lastChar = val[val.length - 1];
    var middle = '';
    if (lastChar === "\n" || lastChar === undefined) {
        // do nothing
    } else {
        middle = "\n";
    }

    $textarea.val(val + middle + text + "\n");
};

Hatena.Diary.Pages.AdminTouch['user-blog-edit'].insertText.contentEditable = function(text) {
    // é›‘è«‡: focusã—ã¦ã‹ã‚‰ã˜ã‚ƒãªã„ã¨execCommandã§ããªã„
    var contentDocument = $('#entry-html-body').prop('contentDocument');
    contentDocument.body.focus();
    contentDocument.execCommand('insertHTML', false, text);
};

Hatena.Diary.Pages.AdminTouch['user-blog-edit'].EDITOR_ACTIONS = {
    bold : function () {
        // http://www.tinymce.com/wiki.php/Command_identifiers
        this.execCommand('Bold');
    },

    italic : function () {
        this.execCommand('Italic');
    },

    strike : function () {
        this.execCommand('StrikeThrough');
    },

    underline : function () {
        this.execCommand('Underline');
    },

    removeFormat : function () {
        this.execCommand("removeFormat");
        this.execCommand("unlink");
    },

    fontSizeIncl : function () {
        this.fontSize(+10);
    },

    fontSizeDecl : function () {
        this.fontSize(-10);
    },

    unorderedList : function () {
        this.execCommand("InsertUnorderedList");
    },

    orderedList : function () {
        this.execCommand("InsertOrderedList");
    },

    color : function () {
        var self = this;
        self.pickColor(function (color) {
            if (color) {
                self.execCommand("ForeColor", color);
            } else {
                self.execCommand("RemoveFormat");
            }
        });
    },

    link : function () {
        var url = prompt('URL');
        if (url) {
            url = url.toLowerCase();
        }
        this.execCommand("CreateLink", url);
    }
};

// from editor/editor.js
Hatena.Diary.Pages.AdminTouch['user-blog-edit'].ColorPicker = {
    show : function (position, callback) {
        var container = Hatena.Diary.Pages.AdminTouch['user-blog-edit'].ColorPicker.container;
        if (!container) {
            container = $('<div class="hatena-diary-color-picker" tabindex="0"><a href="#" class="color-chip default" data-color="">' + Hatena.Locale.text('default') + '</a></div>').appendTo(document.body).hide();
            container.delegate('.color-chip', 'click', function () {
                var color = $(this).attr('data-color');
                container.trigger('colorpick', color);
                container.hide();
                return false;
            });

            var padding = 8;
            var size    = 30;

            var colors = [
                ['#ffffff', '#cccccc', '#999999', '#666666', '#333333', '#000000'],
                ['#cc0000', '#cc00cc', '#0000cc', '#00cccc', '#00cc00', '#cccc00'],
                ['#990000', '#990099', '#000099', '#009999', '#008800', '#aaaa00'],
                ['#660000', '#660066', '#000066', '#006666', '#006600', '#666600'],
                ['#330000', '#330033', '#000033', '#003333', '#003300', '#333300']
            ];

            container.css({
                width: colors[0].length * (size + padding) + padding,
                height: (colors.length + 1) * (size + padding) + padding
            });

            var defcol = container.find("a").css({
                top: padding,
                left: padding,
                height: size,
                width: container.width() - padding * 2
            });

            var chip = $('<a href="#" class="color-chip"></a>');
            for (var i = 0, it; (it = colors[i]); i++) {
                for (var j = 0, col; (col = it[j]); j++) {
                    chip.clone().attr('data-color', col).css({
                        top: (i + 1) * (size + padding) + padding,
                        left: j * (size + padding) + padding,
                        background: col,
                        width : size,
                        height : size
                    }).appendTo(container);
                }
            }

            Hatena.Diary.Pages.AdminTouch['user-blog-edit'].ColorPicker.container = container;
        }

        container.unbind('colorpick');
        container.bind('colorpick', callback);

        container.css(position);
        container.fadeIn('fast');

        container.focus();
        $(container).one('blur', function () { container.hide() });
    }
};

Hatena.Diary.Pages.AdminTouch['user-blog-edit'].setupUpload = function() {
    var can_upload_file = function() {
        // http://stackoverflow.com/questions/8077955/detect-if-input-type-file-is-supported
        var elem = document.createElement('input');
        elem.type = 'file';
        return !elem.disabled;
    };
    if (!can_upload_file()) return;

    var $container = $('.toolbar-container');
    $container.show();

    var can_use_form_data = (typeof FormData != 'undefined');

    if (can_use_form_data) {
        Hatena.Diary.Pages.AdminTouch['user-blog-edit'].setupAjaxUpload();
    } else {
        Hatena.Diary.Pages.AdminTouch['user-blog-edit'].setupIframeUpload();
    }
};

Hatena.Diary.Pages.AdminTouch['user-blog-edit'].setupAjaxUpload = function() {
    var $container = $('.toolbar-container');
    var $file_input = $container.find('input[type=file]');

    $file_input.change(function () {
        if ( ! this.files.length > 0 ) return;
        Hatena.Diary.Pages.AdminTouch['user-blog-edit'].uploadImage({
            $input   : $file_input,
            $progress: $container.find('.progress')
        }).done(Hatena.Diary.Pages.AdminTouch['user-blog-edit'].uploadDone)
        .fail(function(res) {
            alert(Hatena.Locale.text('admin.blog.config.image_upload_failure'));
        });
        Hatena.Diary.trackEvent('upload-photo-smartphone');
    });
};

Hatena.Diary.Pages.AdminTouch['user-blog-edit'].setupIframeUpload = function() {
    var $container = $('.toolbar-container');
    var $file_input = $container.find('input[type=file]');

    $container.addClass('iframe-uploader');

    Hatena.Diary.Pages.AdminTouch['user-blog-edit'].setIframeUploader({
        fileinput : $container.find('.file-container'),
        fotosize  : 800,
        callback  : Hatena.Diary.Pages.AdminTouch['user-blog-edit'].uploadDone
    });
};

// admin.jsã‹ã‚‰ã‚³ãƒ”ãƒšâ†’æ›¸ãæ›ãˆ
Hatena.Diary.Pages.AdminTouch['user-blog-edit'].uploadImage = function (args) {
    var folder = args.folder || "Hatena Blog";
    var fotosize = args.fotosize || 1000;
    var $input = args.$input;
    var image = $input.prop('files')[0];
    var $progress = args.$progress;
    var dfd = $.Deferred();

    $input.prop('disabled', true);

    var data = new FormData();
    data.append('rkm', Hatena.Diary.data('rkm'));
    data.append('append', 1);
    data.append('fototitle', "");
    data.append('folder', folder);
    data.append('fotosize', fotosize);
    data.append('image', image);

    $progress.show();
    var $bar = $progress.find('.bar');
    $bar.width('0%');
    var $percent = $progress.find('.percent');
    var updateProgress = function (percent) {
        if (percent > 100) percent = 100;
        $bar.width(percent + '%');
        $percent.text(Hatena.Locale.text('uploading'));
    };

    var xhr = new XMLHttpRequest();

    xhr.upload.addEventListener("progress", function (e) {
        var percent = e.lengthComputable ? (e.loaded / e.total * 100) : NaN;
        updateProgress( percent );
    }, false);

    xhr.addEventListener("load", function (e) {
        updateProgress( 100 );
        $progress.hide();
        $input.prop('disabled', false);

        if (xhr.status !== 200) {
            dfd.reject(xhr.responseText);
            return;
        }

        var fotolife_syntax = xhr.responseText;
        dfd.resolve(fotolife_syntax);

    }, false);

    xhr.addEventListener("error", function (e) {
        $progress.hide();
        $input.prop('disabled', false);
        dfd.reject(e);
    }, false);

    xhr.open("POST", "/f/" + Hatena.Diary.data('name') + "/upbysmart?dummy=" + (new Date()).getTime());
    xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');
    xhr.send(data);

    return dfd;
};

// admin.jsã‹ã‚‰ã‚³ãƒ”ãƒšâ†’ã¡ã‚‡ã£ã¨æ›¸ãæ›ãˆ(callbackå‘¼ã¶ã‹ã©ã†ã‹ã®ã¨ã“ã‚)
Hatena.Diary.Pages.AdminTouch['user-blog-edit'].setIframeUploader = function (args) {
    var fileinput = args.fileinput;
    var fotosize = args.fotosize;
    var callback = args.callback;

    var iframe = $('<iframe/>');
    fileinput.replaceWith(iframe);
    var src = "/api/upload/fotolife_smart";
    iframe.attr('src', src);
    iframe.addClass('uploader');
    iframe.load(function () {
        var document;
        if (iframe[0].contentDocument) {
            document = iframe[0].contentDocument;
        } else if (iframe[0].contentWindow) {
            document = iframe[0].contentWindow.document;
        } else {
            return;
        }
        if (document.body.innerHTML.match(/^\s*(f:id:\S+)/)) {
            iframe[0].contentWindow.location.replace(src);
        }
        if (document.body.innerHTML.match(/f:id:([^:]+):(\d+)([jpg]):image/)) {
            callback(document.body.innerHTML);
        }

        $(document).find('input[name="fotosize"]').val(fotosize);
        var images = $(document).find('input[type="file"]');
        $(images[0]).change ( function () {
            $(document).find('#fotolife-upload-form').submit();
            $(images[0]).replaceWith($('<h5>').text(Hatena.Locale.text('uploading')));
        });
    });
};

Hatena.Diary.Pages.AdminTouch['user-blog-edit'].uploadDone = function(fotolife_syntax) {
    Hatena.Diary.Pages.AdminTouch['user-blog-edit'].trackPhotoUpload();

    if (Hatena.Diary.Pages.AdminTouch['user-blog-edit'].contentEditableEnabledAndEditorModeIsHTML()) {
        // contentEditableæœ‰åŠ¹ãªã¨ãè¨˜æ³•ã‚’HTMLã«å±•é–‹
        Hatena.Diary.extractFotolifeSyntax(fotolife_syntax).done(function(res) {
            Hatena.Diary.Pages.AdminTouch['user-blog-edit'].insertText(res.html);
        });
    } else {
        Hatena.Diary.Pages.AdminTouch['user-blog-edit'].insertText('[' + fotolife_syntax.replace(/:image/, ':plain') + ']');
    }
};

Hatena.Diary.Pages.AdminTouch['user-blog-edit'].trackPhotoUpload = function() {
    // ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã•ã‚ŒãŸã¨ãã«fluentdã«è¨˜éŒ²
    // XHRã§ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã‹formã§ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã‹ã§ã‚­ãƒ¼ã‚’å¤‰ãˆã¦ã„ã¾ã™
    var track_name = (typeof FormData != 'undefined') ? 'photo-xhr-upload-touch' : 'photo-form-upload-touch';
    Hatena.Diary.trackEvent(track_name);
};

Hatena.Diary.Pages.AdminTouch['user-blog-edit'].setupMyCuration = function() {
    $('[data-curation-action]').click(function() {
        var action = $(this).attr('data-curation-action');
        Hatena.Diary.EditorConnector.loadServiceOnChildWindow("/-/curation/" + action);
        Hatena.Diary.trackEvent('open-curation-' + action);
    });
};

// <input> type="date/time" ãŒæœ‰åŠ¹ã‹
Hatena.Diary.Pages.AdminTouch['user-blog-edit'].dateTimeEditorEnabled = function() {
    var enable_list = _.map(['date', 'time'], function (type) {
        // å‚ç…§: http://stackoverflow.com/questions/10193294/how-can-i-tell-if-a-browser-supports-input-type-date
        var input = document.createElement('input');
        input.setAttribute('type', type);
        input.setAttribute('value', 'not-a-date');
        return input.type !== 'text' && input.value !== 'not-a-date';
    });

    return _.all(enable_list);
};

Hatena.Diary.Pages.AdminTouch['user-blog-edit'].setupScheduledEntry = function() {
    // æ—¥ä»˜ã‚ã‚‹ã¨ãï¼Œãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹å‡ºã™
    // ãƒã‚§ãƒƒã‚¯ã¤ã„ã¦ã‚‹ã¨ãï¼Œå…¬é–‹ãƒœã‚¿ãƒ³ï¼Œä¸‹æ›¸ããƒœã‚¿ãƒ³ï¼Œã‚·ã‚§ã‚¢UIã‚’æ¶ˆã—ã¦ï¼Œäºˆç´„æŠ•ç¨¿ãƒœã‚¿ãƒ³å‡ºã™

    var $datetime = $('input[name=datetime]');
    var $checkbox = $('.js-scheduled-entry-checkbox');
    var $normalParts = $('.js-show-on-normal-post');
    var $scheduledParts = $('.js-show-on-scheduled-post');
    var $socializeBox = $('.js-touch-scheduled-socialize-box');

    // datetimeã‹checkboxãŒæ›´æ–°ã•ã‚ŒãŸã‚‰å‘¼ã°ã‚Œã‚‹
    var updateParts = function() {
        if ($datetime.val()) {
            $checkbox.prop('disabled', false);
        } else {
            $checkbox.prop('disabled', true);
        }

        if ($datetime.val() && $checkbox.prop('checked')) {
            $normalParts.hide();
            $scheduledParts.show();
            $socializeBox.show();
        } else {
            $normalParts.show();
            $scheduledParts.hide();
            $socializeBox.hide();
        }
    };

    $datetime.on('change', updateParts);
    $checkbox.on('change', updateParts);

    updateParts();
};

Hatena.Diary.Pages.AdminTouch['user-blog-edit'].setupDateTimeEditor = function() {
    $('.post-options .js-datetime').show();

    var $date = $('.js-datetime-input-date');
    var $time = $('.js-datetime-input-time');
    var $datetime = $('input[name=datetime]');

    // å€¤ã‚’è¨­å®šã™ã‚‹ã ã‘ã§ãªã,changeã‚¤ãƒ™ãƒ³ãƒˆã‚‚ç™ºè¡Œã™ã‚‹ï¼äºˆç´„æŠ•ç¨¿JSãŒdatetimeã®changeã‚¤ãƒ™ãƒ³ãƒˆè¦‹ã¦ã‚‹ãŸã‚
    var setDatetime = function(value) {
        $datetime.val(value).trigger('change');
    };

    // admin-user-blog-edit.jsã‹ã‚‰ã®ã‚³ãƒ”ãƒš
    var todayString = function () {
        var now = new Date();
        var date = [];
        date.push((1900 + now.getYear()).toString());
        date.push(('0' + (1 + now.getMonth()).toString()).slice(-2));
        date.push(('0' + now.getDate().toString()).slice(-2));
        return date.join('-');
    };

    // æŠ•ç¨¿æ—¥æ™‚ãŒã‚ã‚‹ã¨ã(æ—¢ã«æŠ•ç¨¿ã•ã‚ŒãŸã‚¨ãƒ³ãƒˆãƒªã‚’ç·¨é›†ã™ã‚‹ã¨ã), ãƒ•ã‚£ãƒ«ã‚¤ãƒ³ã™ã‚‹
    var entry_datetime = $datetime.val();
    if (entry_datetime) {
        var match_data = entry_datetime.match(/^(\d{4}-\d{2}-\d{2})T(\d{2}:\d{2}:\d{2})\+(\d{2}:\d{2})$/);
        var date = match_data[1];
        var time = match_data[2];

        $date.val(date);
        $time.val(time);
    }

    $date.change(function() {
        var date = $date.val();
        var time = $time.val();

        // æ¶ˆå»ã•ã‚ŒãŸã¨ã, åˆæœŸå€¤ã«æˆ»ã™
        if (!date) {
            setDatetime(entry_datetime);
            return;
        }

        if (!time) {
            $time.val('00:00');
            time = '00:00';
        }

        setDatetime(date + 'T' + time);
    });

    $time.change(function() {
        var date = $date.val();
        var time = $time.val();

        // æ¶ˆå»ã•ã‚ŒãŸã¨ã, åˆæœŸå€¤ã«æˆ»ã™
        if (!time) {
            setDatetime(entry_datetime);
            return;
        }

        if (!date) {
            var today = todayString();
            $date.val(today);
            date = today;
        }

        setDatetime(date + 'T' + time);
    });
};

Hatena.Diary.Pages.AdminTouch['user-blog-action'] = function () {
    Hatena.Diary.Pages.createForParent();
    Hatena.Diary.Pages.send('resize', {
        height: $(document.body).height()
    });
};

Hatena.Diary.Pages.AdminTouch['user-blog-comment'] = function () {
    Hatena.Diary.Pages.createForParent();

    var formState = new Hatena.Diary.FormState();
    var form = $('#comment-form');
    formState.observeForm(form);
    form.bind('change', function () {
        formState.checkFormState();
    });

    var resize = function(){
        Hatena.Diary.Pages.send('resize', {
            height: $('html').height()
        });
    };

    // CAPTCHAãªã©ç”»åƒã‚ã‚‹ã¨ãèª­ã¿è¾¼ã‚€ã¨é«˜ã•å¤‰ã‚ã‚‹
    var $img = $('img');
    if ($img.length > 0) {
        $('img').on('load', resize);
    }

    resize();
};

Hatena.Diary.Pages.AdminTouch['user-blog-entries'] = function () {
    Hatena.Diary.Pages.AdminTouch['user-blog-entries'].setupEntryListLinks();
};

Hatena.Diary.Pages.AdminTouch['user-blog-entries'].setupEntryListLinks = function () {
    $('ul#entries li').click(function (e) {
        if ($(e.target).parents('a').length === 0) {
            location.href = $(this).find('a:first').attr('href');
        }
    });
};

Hatena.Diary.Pages.AdminTouch['user-blog-accesslog'] = function () {
    var table = $('#access-counts').remove();
    var counts = {};
    table.find('tr').each(function () {
        var $this = $(this);
        var time  = +$this.find('td[data-time]').attr('data-time');
        var count = +$this.find('td[data-count]').attr('data-count');
        counts[time] = count;
    });

    AccessLog.showGraph(counts, {
        parent : $('#access-counts-daily'),
        timeformat : '%m/%d',
        minTickSize : [1, 'day'],
        unit   : 24 * 60 * 60 * 1000,
        number : 14,
        graphAreaMarginRight : 20,
        barWidth : 15
    });

    AccessLog.showGraph(counts, {
        parent : $('#access-counts-hourly'),
        timeformat : '%d %H:%M',
        minTickSize : [1, 'hour'],
        unit   : 60 * 60 * 1000,
        number : 24,
        graphAreaMarginRight : 20,
        barWidth : 10
    });

    $('#access-counts-tabs').tabs({ active : 0 });

    $('#summary-detail-tabs').tabs({ active : 0 });

    $('.summary-box .hosts').delegate('.host', 'click', function() {
        $('.summary-box .hosts .selected').removeClass('selected');
        $(this).addClass('selected');

        var host = $(this).attr('data-site-host');
        $('.summary-box .site.selected').removeClass('selected');
        $('.summary-box .sites').find('*[data-site-host="' + host + '"]').addClass('selected');
        return false;
    });
};

Hatena.Diary.Pages.AdminTouch['antenna'] = function () {

    var $closedBlogs = $('.closed-blog');
    $closedBlogs.each(function(){
        var $closedBlog = $(this);
        var antennaUrl = $closedBlog.data("antennaUrl");
        $.ajax({
            type: 'GET',
            url: antennaUrl,
            data: { device: 'touch' },
            dataType: 'html',
            crossDomain: true,
            xhrFields: {
                withCredentials: true
            }
        }).done(function(res){
            $closedBlog.empty();
            $closedBlog.append(res);
            var $blogContents = $closedBlog.find('.js-blog-content');
            Hatena.Locale.updateTimestamps($blogContents[0]);
        });
    });

};

Hatena.Diary.Pages.AdminTouch['topic-show'] = function () {
    var $description = $('.description');
    var $topic_entries_tabs = $('#topic-entries-tabs');

    // ã€Œç¶šãã‚’èª­ã‚€ã€ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨èª¬æ˜æ–‡ã‚’ã™ã¹ã¦è¡¨ç¤ºã™ã‚‹
    $description.find('.read-more').on('click', function (e) {
        e.preventDefault();
        var $read_more_text = $description.find('.read-more-text');
        $description.html( $read_more_text.html() );
    });

    // ã€Œæ³¨ç›®ã€ã¨ã€Œæ–°ç€ã€ã‚¿ãƒ–ã®åˆ‡æ›¿
    $topic_entries_tabs.tabs({ active : 0 });
};

Hatena.Diary.Pages.AdminTouch['user-blog-edit-done'].postToSocialService = function () {
    var entry_id = $('.js-touch-socialize-box').data('entry-id');

    var PostToSocialService = function (entry_id) {
        this.init(entry_id);
    };
    PostToSocialService.prototype = {
        init: function (entry_id) {
            this.entry_id = entry_id;
        },
        setServiceName: function (service_name) {
            this.service_name = service_name;
        },
        setMessage: function (message) {
            this.message = message;
        },
        validateMessage: function () {
            var self = this;
            // twitterã®å ´åˆæ–‡å­—æ•°åˆ¶é™ãŒã‚ã‚‹ã®ã§ãƒã‚§ãƒƒã‚¯ã™ã‚‹
            // åˆ¤å®šã«ã¯å…¬å¼ãƒ©ã‚¤ãƒ–ãƒ©ãƒªä½¿ã£ã¦ã‚‹
            if (self.service_name === 'twitter') {
                if (Hatena.Diary.validationTweetLength(self.message) === false) return false;
            }

            return true;
        },
        isAjaxRunning: false,
        post: function() {
            var self = this;

            var dfd = $.Deferred();

            // é€£æ‰“ã•ã‚Œã‚‹ã¨ãƒãƒ«ãƒãƒã‚¹ãƒˆã«ãªã‚‹ã®ã§
            // é€šä¿¡ä¸­ã‹ã©ã†ã‹è¦‹ã¦rejectã—ã¦ã‚‹
            if (self.isAjaxRunning === true) return dfd.reject();

            self.isAjaxRunning = true;

            $.ajax({
                url: 'post_to_social_service',
                type: 'POST',
                data: {
                    rkm: Hatena.Diary.data('rkm'),
                    rkc: Hatena.Diary.data('rkc'),
                    service_name: self.service_name,
                    entry_id: self.entry_id,
                    message: self.message
                }
            }).done(function () {
                dfd.resolve();
            }).fail(function() {
                dfd.reject();
            }).always(function () {
                self.isAjaxRunning = false;
            });

            return dfd.promise();
        }
    };

    var post_to_social_service = new PostToSocialService(entry_id);
    $('.js-touch-share-button').on('click', function (event) {

        var $el = $(event.target);

        if ($el.attr('disabled')) return false;

        var $li = $el.closest('li');

        var confirm_message = Hatena.Locale.text('blog.social.share.confirm', Hatena.Locale.text('blog.social.service.name.' + $el.data('service-name')));
        if (! confirm(confirm_message)) return false;

        var $validation_error_message = $li.find('.js-validation-error');
        var $share_success_message = $li.find('.js-share-success-message');

        // è¤‡æ•°å›æŠ•ç¨¿ã—ãŸæ™‚ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ®‹ã£ã¦ã‚‹ã®ã§æœ€åˆã«æ¶ˆã—ã¦ãŠã
        $validation_error_message.hide();
        $share_success_message.hide();

        post_to_social_service.setServiceName($el.data('service-name'));
        post_to_social_service.setMessage($li.find('.js-share-message').val());

        // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®validationã«å¼•ã£ã‹ã‹ã‚‰ãªã‹ã£ãŸã‚‰æŠ•ç¨¿ã™ã‚‹
        if (post_to_social_service.validateMessage()) {
            post_to_social_service.post().done(function () {
                $share_success_message.show();
            });
        }
        else {
            // validationã«å¼•ã£ã‹ã‹ã£ãŸã‚‰ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å‡ºã—ã¦ã‚ã’ã‚‹
            $validation_error_message.show();
        }

        return false;
    });
};

})(jQuery);

(function($){

Hatena.Diary.Pages.BlogsTouch['*'] = function () {
    // iframeã‹ã‚‰ã¯ã‚¢ã‚¯ã‚»ã‚¹ãƒ­ã‚°ã®apiã‚’å©ã‹ãªã„
    if (window.parent === window ) {
        Hatena.Diary.AccessLog.ping();
    }

    Hatena.Diary.Pages.infoLoaded.done(function(info) {
        Hatena.Diary.Pages.BlogsTouch['*'].init(info);
    });

    Hatena.Diary.Util.updateDynamicPieces([document]);

    Hatena.Diary.Pages.BlogsTouch['*'].initEntries();
    Hatena.Diary.Pages.BlogsTouch['*'].initFooterAction();
    Hatena.Diary.Pages.BlogsTouch['*'].setupOndemandCommentDeleteButton();
    Hatena.Diary.Star.initBigStar();
    Hatena.Diary.Pages.BlogsTouch['*'].setupEntriesAccessRankingModule();
};

Hatena.Diary.Pages.BlogsTouch['*'].init = function (info) {
    // ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ˜ãƒƒãƒ€ã‹ã‚‰æƒ…å ±ã‚‚ã‚‰ãˆã‚‹ã®ã§ï¼Œä½¿ã„ãŸã‹ã£ãŸã‚‰ã“ã“ã§ä½¿ã†

    // globalhaederãŒã‚­ãƒ£ãƒƒã‚·ãƒ¥ã•ã‚Œã¦ã„ã‚‹ã®ã§ã“ã¡ã‚‰ã‹ã‚‰viaã‚’é€ã£ã¦ã‚„ã‚‹
    var via = Hatena.Diary.Location.param('via');
    if (via) {
        Hatena.Diary.Pages.send('inheritVia', via);
    }
};

Hatena.Diary.Pages.BlogsTouch['*'].initEntries = function () {
    var self = this;
    $('.js-entry-article').each(function () {
        var $this = $(this);
        self.initEntry($this);
    });
};

Hatena.Diary.Pages.BlogsTouch['*'].initEntry = function (entry) {
    var self = this;
    var uuid = entry.attr('data-uuid');
    Hatena.Diary.Util.replaceYoutubeURL(entry);

    Hatena.Diary.Pages.BlogsTouch['*'].initEntryComment(entry);
    Hatena.Diary.Pages.BlogsTouch['*'].initEditButton(entry);
};

Hatena.Diary.Pages.BlogsTouch['*'].initEntryComment = function (entry) {
    var self = this;
    var container = entry.find('.js-comment-box .js-comment');
    $(container).delegate('.js-comment-delete-button', 'click', function (e) {
        var $this = $(this);
        var commentId = $this.closest('.js-entry-comment').attr('id');

        var iframeContainer = $(
            '<div class="hatena-iframe-container"><div class="loading js-loading">' +
            '<img src="' + Hatena.Diary.URLGenerator.static_url('/images/loading.gif') + '" alt="loading"/>' +
            Hatena.Locale.text('loading') +
            '</div></div>').appendTo(this);
        var iframe = $('<iframe frameborder="0"></iframe>').appendTo(iframeContainer);
        iframeContainer.
        css({
            width: 440,
            height: 120,
            position: 'absolute',
            zIndex: 999
        }).
        offset( $this.offset() );

        var loading = iframeContainer.find('.js-loading').hide();
        setTimeout( function () { loading.show() }, 250);
        iframe.load(function () { loading.remove() });

        var uri = Hatena.Diary.data('admin-domain') +
            '/' + Hatena.Diary.data('author') + '/' + Hatena.Diary.data('blog') +
            '/comment/delete?comment=' + encodeURIComponent(commentId.slice(8));

        var messenger = Messenger.createForFrame(iframe[0], uri);
        messenger.addEventListener('delete', function (data) {
            $("#" + commentId).fadeOut();
        });
        messenger.addEventListener('close', function () {
            Hatena.Diary.Window.hide(iframeContainer);
        });

        Hatena.Diary.Window.show(iframeContainer, {
            destroy : function () {
                iframe.remove();
                messenger.destroy();
            }
        });
        return false;
    });

    self.loadEntryInfo(entry).done(function (info) {
        if (Hatena.Diary.data('page') == 'entry') {
            if (info.comments) {
                var container = entry.find('.js-comment-box .js-comment');
                for (var i = 0, len = info.comments.entries.length; i < len; i++) {
                    container.append(info.comments.entries[i]);
                }
                Hatena.Diary.Util.updateDynamicPieces(container);
            }
        } else {
            entry.find('.js-leave-comment-title').text('(' + (info.comments ? info.comments.entries.length : 0) + ')');
        }
    }).
    fail( Hatena.Diary.REPORT_BUG('loadEntryInfo') );

    if (Hatena.Diary.data('page') == 'entry') entry.find('.js-leave-comment-title').on('click', function (e) {
        var $this = $(this);

        var container = $(
            '<div class="hatena-iframe-container">' +
                '<div class="loading js-loading"><img src="' + Hatena.Diary.URLGenerator.static_url('/images/loading.gif') + '" alt="loading"/>' +
                    Hatena.Locale.text('loading') +
                '</div>' +
            '</div>'
        ).insertAfter($this);

        if ($this.data('comment-container')) {
            $this.data('comment-container').remove();
        }
        $this.data('comment-container', container);

        var iframe = $('<iframe frameborder="0"></iframe>').appendTo(container);

        var loading = container.find('.js-loading').hide();

        setTimeout(function () {
            loading.show();
        }, 250);

        iframe.load(function () {
            loading.remove();
        });

        container.
            css({
                width: '100%'/*,
                height: 235
                */
            });

        editinplace = iframe[0];

        var uri = Hatena.Diary.data('admin-domain') +
            '/touch/' + Hatena.Diary.data('author') + '/' + Hatena.Diary.data('blog') + '/comment?' +
            $.param({
                entry : entry.attr('data-uuid'),
                token : $.cookie('bk')
            });

        var messenger = Messenger.createForFrame(editinplace, uri);
        messenger.addEventListener('update', function (data) {
            var container = entry.find('.js-comment-box .js-comment');
            var top_is_new = Hatena.Diary.data('blog-comments-top-is-new');
            if (top_is_new) {
                container.prepend(data.comment);
            } else {
                container.append(data.comment);
            }
            Hatena.Diary.Util.updateDynamicPieces(container);
        });

        messenger.addEventListener('close', function () {
            container.remove();
            messenger.destroy();
        });

        messenger.addEventListener('resize', function (css) {
            if (css) container.css(css);
        });

        return false;
    });
};

Hatena.Diary.Pages.BlogsTouch['*'].initEditButton = function ($entry) {
    var $button_container = $entry.find('.js-entry-edit-button-container');
    var $button = $button_container.find('.js-entry-edit-button');


    Hatena.Diary.Pages.infoLoaded.done(function (info) {
        if (!info.editable) return;

        $button_container.show();
        var editor_url = Hatena.Diary.data('admin-domain') + '/' +
            Hatena.Diary.data('author')       + '/' +
            Hatena.Diary.data('blog')         + '/edit?entry=' + $entry.attr('data-uuid');
        $button.attr('href', editor_url);
    });
};

Hatena.Diary.Pages.BlogsTouch['*'].loadEntryInfo = function me (entry) {
    if (!me.data) me.data = {
        timer : setTimeout(function () {
            var data = me.data;
            me.data = null;
            $.ajax({
                url : Hatena.Diary.URLGenerator.user_blog_url('/api/entry/info'),
                type : "get",
                dataType : 'json',
                cache : false,
                data : {
                    e : data.entries
                },
                success : function (res) {
                    var entries = res.entries;
                    for (var key in entries) if (entries.hasOwnProperty(key)) {
                        var val = entries[key];
                        data.deferred[key].resolve(val);
                    }
                }
            });
        }, 0),
        entries : [],
        deferred : {}
    };

    var ret  = $.Deferred();
    var uuid = entry.attr('data-uuid');

    me.data.entries.push(uuid);
    me.data.deferred[uuid] = ret;

    return ret;
};

Hatena.Diary.Pages.BlogsTouch['*'].setupOndemandCommentDeleteButton = function() {
    $(document).on('mouseenter', '.js-entry-comment', function() {
        var $comment = $(this);
        if ($comment.find('.js-comment-delete-button .js-comment-delete-image').size() > 0)
            return;
        var comment_uuid = $comment.attr('data-comment-uuid');
        var blog_uuid = $comment.attr('data-blog-uuid');
        var url = Hatena.Diary.data('admin-domain') + '/api/comment.delete.image?comment=' + comment_uuid + '&blog=' + blog_uuid;
        var $img = $('<img>');
        $img.addClass('js-comment-delete-image');
        $img.attr('src', url);
        var handler = function() {
            $img.attr('alt', 'delete');
        };
        $img.load(handler);
        $img.error(handler);
        $comment.find('.js-comment-delete-button').append($img);
    });
};

Hatena.Diary.Pages.BlogsTouch['*'].initFooterAction = function () {
    var footerAction = $('iframe.js-footer-action');
    if (footerAction.length) {
        try {
            var messenger = Messenger.createForFrame(footerAction.get(0), footerAction.attr('data-src'));
            messenger.addEventListener('resize', function (css) {
                if (css) footerAction.css(css);
            });
        } catch(ignore) {
            // Androidã§ã¯Messengerä½œã‚‹ã®ã«å¤±æ•—ã—ã¦SecurityErrorãŒç™ºç”Ÿã™ã‚‹å ´åˆãŒã‚ã‚‹
            // é€šä¿¡ã§ããªã‹ã£ãŸã‚‰ä»•æ–¹ãªã„ã®ã§ã‚ãã‚‰ã‚ã‚‹
        }
    }
};

Hatena.Diary.Pages.BlogsTouch['*'].setupEntriesAccessRankingModule = function () {
    var $entriesAccessRanking = $('.hatena-module-entries-access-ranking');
    if ($entriesAccessRanking.length === 0) return;

    $entriesAccessRanking.each(function () {
        var $self = $(this);
        var queryParams = {};
        // `data-`ã®prefixãŒã¤ã„ãŸå±æ€§ã‚’ã™ã¹ã¦å–å¾—ã—ï¼Œã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã«ã™ã‚‹
        _.each( ($self)[0].attributes, function (attr) {
            if ( ! attr.name.match(/^data-/) ) return;
            // `data-`ã®prefixã¯ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®keyã«ã¯ä¸è¦ãªã®ã§å–ã‚Šé™¤ã
            queryParams[ attr.name.replace(/^data\-/, '') ] = attr.value;
        } );

        $.ajax({
            type: 'GET',
            url: Hatena.Diary.URLGenerator.user_blog_url('/entries_access_ranking_module'),
            data: queryParams,
            dataType: 'html'
        }).done(function(res) {
            $self.find('.hatena-module-body').append(res);
        });
    });
};

Hatena.Diary.Pages.BlogsTouch['global-top'] = function () {
    // viaã‚’å¼•ãç¶™ã„ã§iframeã‚’èª­ã¿è¾¼ã‚€
    var via = Hatena.Diary.Location.param('via');
    var $dashboardLinks = $('iframe.js-dashboard-link');
    $dashboardLinks.each(function(index, element) {
        var $iframe = $(element);
        var src = $iframe.data('src').split(/\?/);
        var query = src[1] || '';

        var params = Hatena.Diary.Util.decodeParam(query);
        params['via'] = via;

        element.contentWindow.location.replace(src[0] + '?' + $.param(params, true));
    });

    $('img[data-alternate-src]').one('error', function() {
        var $img = $(this);
        $img.attr('src', $img.attr('data-alternate-src'));
    });

    $('.js-category-wrapper').tabs({
        selected : 0
    });

    // æ¨™æº–ã®ã‚¿ãƒ–ã®UIã§ã¯ãªãï¼Œnav-barã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚’å½“ã¦ãŸã„ã®ã§ï¼Œã‚¯ãƒ©ã‚¹æ¶ˆã™
    $('.js-category-wrapper .ui-tabs-nav').removeClass('ui-tabs-nav');
};

})(jQuery);

if (!Hatena.Locale) {
  document.createElement('time'); // IE

Hatena.Locale = {
    /* --- Languages --- */

    getAvailLangs: function () {
        if (this._availLangs) return this._availLangs;
        var de = document.documentElement;
        var langs = de ? de.getAttribute('data-avail-langs') : '';
        if (langs) {
            langs = langs.split(/\s+/);
        } else {
            langs = [];
        }
        this._availLangs = langs;
        return langs;
    },

    setAcceptLang: function (newLang) {
        var cookie = new this.Cookie();
        cookie.set('Accept-Language', newLang, {domain: this.cookieDomain, expires: '+1y', path: '/'});
        cookie.set('_hatena_set_lang', 1, {domain: this.cookieDomain, expires: '+1d', path: '/'});
    },

    getTextLang: function () {
        var docEl = document.documentElement;
        if (!docEl) return 'ja';
        var lang = docEl.getAttribute('lang');
        return lang || 'ja';
    },

    loadTextData: function () {
        var key = 'textDataLoaded' + this.textDataDirName + this.textDataFileNameStemSuffix;
        if (this[key]) return;
        this[key] = true;

        var self = this;
        var host = this.dataHost;
        var lang = this.getTextLang();
        var date = new Date();
        var url = 'http://' + host + '/js/' + this.textDataDirName + 'texts-' + lang + this.textDataFileNameStemSuffix + '.js?' + date.getFullYear() + date.getMonth() + date.getDate();

        if (typeof Ten != "undefined" && Ten.AsyncLoader) {
            Ten.AsyncLoader.loadScripts([url], function () {
                var key = 'Hatena.Locale,' + self.project + ',Text';
                Ten.AsyncLoader.registerObject(key, self);
            });
        } else {
            var script = document.createElement('script');
            script.src = url;
            document.getElementsByTagName('head')[0].appendChild(script);
        }
    },

    text: function (msgid) {
        var allArgs = arguments;
        var lang = this.getTextLang();
        var entry;
        try {
            entry = Hatena[this.project].Locale.Data.Text[lang][msgid];
        } catch (e) {}
        if (entry) {
            var v = entry.value;
            var args = entry.args;
            if (args) {
                var i = 0;
                return v.replace(/%s/, function () {
                    return allArgs[parseInt(args[i++], 10)];
                });
            } else {
                return v;
            }
        } else {
            return msgid;
        }
    },

    textN: function (msgid, n) {
        var allArgs = arguments;
        var lang = this.getTextLang();
        n = n || 0;
        var entry;
        try {
            entry = Hatena[this.project].Locale.Data.Text[lang][msgid];
        } catch (e) { }
        if (entry) {
            var qt = entry.quanttype || 'o';
            var v = entry.value;
            var args = entry.args;
            if (qt == '1_o') {
                if (n == 1) {
                    v = entry.value_1;
                    args = entry.args_1;
                }
            } else if (qt == '01_o') {
                if (n === 0 || n === 1) {
                    v = entry.value_1;
                    args = entry.args_1;
                }
            }

            if (args) {
                var i = 0;
                return v.replace(/%s/, function () {
                    return allArgs[1 + parseInt(args[i++], 10)];
                });
            } else {
                return v;
            }
        } else {
            return msgid;
        }
    },

    textFwN: function (msgid, n) {
        var lang = this.getTextLang();
        if (/^ja(?:-|$)$/.test(lang)) {
            //
        } else {
            n *= 2;
        }

        var args = [msgid, n, this.number(n)];
        for (var i = 2; i < arguments.length; i++) {
            args.push(arguments[i]);
        }

        return this.textN.apply(this, args);
    },

    // IE
    _period00: new RegExp('\\' + Number(0).toLocaleString().replace(/0/g, '') + '0+$'),

    number: function (n) {
        return (n + 0).toLocaleString().replace(this._period00, '');
    },

    /* --- Regions --- */

    getAvailRegions: function () {
        if (this._availRegions) return this._availRegions;
        var de = document.documentElement;
        var regions = de ? de.getAttribute('data-avail-regions') : '';
        if (regions) {
            regions = regions.split(/\s+/);
        } else {
            regions = [];
        }
        this._availRegions = regions;
        return regions;
    },

    getRegionCode: function () {
        var docEl = document.documentElement;
        if (!docEl) return 0;
        var region = docEl.getAttribute('data-region');
        return parseInt(region || 0, 10);
    },

    setRegionCode: function (newRegionCode) {
        var cookie = new this.Cookie();
        cookie.set('_hatena_region', newRegionCode, {domain: this.cookieDomain, expires: '+1y', path: '/'});
    },

    /* --- Date and Time --- */

    datetimeHTML: function (dt) {
        var y = '000' + dt.getUTCFullYear(); y = y.substring(y.length - 4);
        var M = '0' + (dt.getUTCMonth() + 1); M = M.substring(M.length - 2);
        var d = '0' + dt.getUTCDate(); d = d.substring(d.length - 2);
        var h = '0' + dt.getUTCHours(); h = h.substring(h.length - 2);
        var m = '0' + dt.getUTCMinutes(); m = m.substring(m.length - 2);
        var s = '0' + dt.getUTCSeconds(); s = s.substring(s.length - 2);
        var ms = '00' + dt.getUTCMilliseconds(); ms = ms.substring(ms.length - 3);
        return '<time datetime="'+y+'-'+M+'-'+d+'T'+h+':'+m+':'+s+'.'+ms+'Z">' + dt.toLocaleString() + '</time>';
    },

    /* You have to add service name tags to msgids such as "minutes_n"
       in Hatena::Translator such that messages are included in
       data-??.js. */
    deltaDatetime: function (dt) {
        function datetime_to_delta (date) {
            var diff   = (new Date().getTime() - date.getTime()) / 1000;
            var future = diff < 0;
            if (future) diff = -diff;
            diff = Math.floor(diff / 60);
            if (diff < 60) {
                return { num : diff, unit : 'minutes_n', future : future };
            }
            diff = Math.floor(diff / 60);
            if (diff < 24) {
                return { num : diff, unit : 'hours_n', future : future };
            }
            diff = Math.floor(diff / 24);
            if (diff < 365) {
                return { num : diff, unit : 'days_n', future : future };
            }
            diff = Math.floor(diff / 365);
            return { num : diff, unit : 'years_n', future : future };
        }

        var delta = datetime_to_delta(dt);

        if (typeof delta.num != "undefined") {
            var text = Hatena.Locale.textN(delta.unit, delta.num, delta.num);
            if (delta.future) {
                return Hatena.Locale.text('datetime.later', text);
            } else {
                return Hatena.Locale.text('datetime.ago', text);
            }
        } else {
            return dt.toLocaleString();
        }
    },

    updateTimestamps: function (root) {
        var datetimePattern = /(\d+-\d+-\d+)T(\d+:\d+:\d+)(?:\.(\d+))?Z/;

        root = root || document;
        var targets = root.getElementsByTagName('time'); // XXX class=""
        for (var i = 0, len = targets.length; i < len; i++) {
            var time = targets[i];
            if (time._date) { continue; }

            // Check date type
            var isRelative = (time.getAttribute('data-relative') !== null);
            var isLocal    = (time.getAttribute('data-local') !== null);
            if (!isRelative && !isLocal) { continue; }

            // Time attr -> Date object
            var datetime = time.getAttribute('datetime');
            var epoch    = time.getAttribute('data-epoch');
            if (!datetime && !epoch) { continue; }

            var date;
            if (datetime && datetime.match(datetimePattern)) {
                date = new Date(datetime);
            }
            else if (epoch && epoch.match(/^\d+$/)) {
                date = new Date(+epoch);
            }
            if (! date) { continue; }

            // Set innerHTML
            if (isRelative) {
                try {
                    time.innerHTML = Hatena.Locale.deltaDatetime(date);
                } catch (e) {}
            }
            if (isLocal) {
                time.innerHTML = date.toLocaleString();
            }
        }
    },

    setupTimestampUpdater : function () {
        if (Hatena.Locale._timestampUpdaterEnabled) return;
        Hatena.Locale._timestampUpdaterEnabled = true;

        Hatena.Locale.updateTimestamps();
        setInterval(function () {
            Hatena.Locale.updateTimestamps();
        }, 60 * 1000);
    },

    /* --- URLs and Navigation --- */

    reload: function (args) {
        var query = location.search;
        if (query) {
            args = args || {};
            var preserve = args.preserve || {};

            query = query.replace(/^\?/, '').split(/[&;]/);
            var changed = false;
            var newQuery = [];
            for (var i = 0; i < query.length; i++) {
                var qp = query[i];
                var m;
                if ((m = qp.match(/^(locale.[^=]+)/))) {
                    if (preserve[m[1]]) {
                        newQuery.push(qp);
                    } else {
                        changed = true;
                    }
                } else {
                    newQuery.push(qp);
                }
            }

            if (changed) {
                location.search = '?' + newQuery.join('&');
                return;
            }
        }

        location.reload(true);
    },

    reloadIfWrongLocale: function () {
        var cookie = new this.Cookie();

        if (/\blocale\.(?:lang|region|country)\b/.test(location.search)) {
            return;
        }

        if (cookie.get('_hatena_locale_reload')) {
            cookie.set('_hatena_locale_reload', '', {domain: this.cookieDomain, expires: '-1y', path: '/'});
            return;
        } else {
            var cookieLang = (cookie.get('Accept-Language') || '').split(/,/)[0].split(/;/)[0].replace(/[^A-Za-z0-9\-]/g, '').toLowerCase();
            var cookieRegion = cookie.get('_hatena_region');
            if (!cookieLang || cookieRegion === null || cookieRegion === '') return;
            cookieRegion = parseInt(cookieRegion, 10);

            var currentLang = Hatena.Locale.getTextLang();
            var currentRegion = Hatena.Locale.getRegionCode();
            if (currentLang == cookieLang && currentRegion == cookieRegion) return;

            var availLangs = Hatena.Locale.getAvailLangs();
            var availRegions = Hatena.Locale.getAvailRegions();
            if (availLangs.join(",").indexOf(cookieLang) == -1) return;
            if (availRegions.join(",").indexOf(cookieRegion) == -1) return;

            cookie.set('_hatena_locale_reload', 1, {domain: this.cookieDomain, path: '/'});
            location.reload(true);
            return;
        }
    },

    urlWithLangAndRegion: function (url) {
        var q = [];
        if (/\?/.test(url)) {
            var u = url.split(/\?/, 2);
            var qp = u[1].split(/[&;]/);
            for (var i = 0; i < qp.length; i++) {
                if (!/^locale\.(lang|region)=/.test(qp[i])) {
                    q.push(qp[i]);
                }
            }
            url = u[0];
        }
        q.push('locale.lang=' + encodeURIComponent(this.getTextLang()));
        q.push('locale.region=' + encodeURIComponent(this.getRegionCode()));
        return url + '?' + q.join('&');
    },

    /* --- Cookie and remote data configuration --- */

    project: 'Default',
    textDataFileNameStemSuffix: '',
    textDataDirName: '',
    dataHost: location.host,
    cookieDomain: '.hatena.ne.jp'
};
Hatena.Locale.Cookie = function () { this.init.apply(this, arguments) };
Hatena.Locale.Cookie.prototype = {
    init : function (string) {
        this.cookies = this.parse(string);
    },

    parse: function(string) {
        var cookies = { };

        var segments = (string || document.cookie).split(/;\s*/);
        while (segments.length) {
            try {
                var segment = segments.shift().replace(/^\s*|\s*$/g, '');
                if (!segment.match(/^([^=]*)=(.*)$/))
                    continue;
                var key = RegExp.$1, value = RegExp.$2;
                if (value.indexOf('&') != -1) {
                    value = value.split(/&/);
                    for (var i = 0; i < value.length; i++)
                        value[i] = decodeURIComponent(value[i]);
                } else {
                    value = decodeURIComponent(value);
                }
                key = decodeURIComponent(key);

                cookies[key] = value;
            } catch (e) {
            }
        }

        return cookies;
    },

    set: function(key, value, option) {
        this.cookies[key] = value;

        if (value instanceof Array) {
            for (var i = 0; i < value.length; i++)
                value[i] = encodeURIComponent(value[i]);
            value = value.join('&');
        } else {
            value = encodeURIComponent(value);
        }
        var cookie = encodeURIComponent(key) + '=' + value;

        option = option || { };
        if (typeof option == 'string' || option instanceof Date) {
            // deprecated
            option = {
                expires: option
            };
        }

        if (!option.expires) {
            option.expires = this.defaultExpires;
        }
        if (/^\+?(\d+)([ymdh])$/.exec(option.expires)) {
            var count = parseInt(RegExp.$1, 10);
            var field = ({ y: 'FullYear', m: 'Month', d: 'Date', h: 'Hours' })[RegExp.$2];

            var date = new Date();
            date['set' + field](date['get' + field]() + count);
            option.expires = date;
        }

        if (option.expires) {
            if (option.expires.toUTCString)
                option.expires = option.expires.toUTCString();
            cookie += '; expires=' + option.expires;
        }
        if (option.domain) {
            cookie += '; domain=' + option.domain;
        }
        if (option.path) {
            cookie += '; path=' + option.path;
        } else {
            cookie += '; path=/';
        }

        return (document.cookie = cookie);
    },
    get: function(key) {
        return this.cookies[key];
    },
    has: function(key) {
        return (key in this.cookies) && !(key in Object.prototype);
    },
    clear: function(key) {
        this.set(key, '', new Date(0));
        delete this.cookies[key];
    }
};

if (/\.hatena\.com$/i.test(location.hostname)) {
    Hatena.Locale.cookieDomain = '.hatena.com';
}

} // if (!Hatena.Locale)
_text/javascriptÔ	FGHI_Phttp://blog.hatena.ne.jp/js/texts-ja.js?version=f95a219773244f14c2c322979e39f67bOŸbplist00ÔklX$versionX$objectsY$archiverT$top † ¯!#)*0123MNOPQRSTUVWXYZ[\]^_`adefU$nullİ	
 !"R$6S$10R$2R$7R$3S$11R$8V$classR$4R$9R$0R$5R$1€	€€€€ €€€Ó$%&'(WNS.base[NS.relative€ €€_Phttp://blog.hatena.ne.jp/js/texts-ja.js?version=f95a219773244f14c2c322979e39f67bÒ+,-.Z$classnameX$classesUNSURL¢-/XNSObject#AºôÒ:ŒÛ ÈÓ456ALWNS.keysZNS.objectsª789:;<=>?@€	€
€€€€€€€€ªBCDEFGHIJK€€€€€€€€€€€ZConnection\Content-TypeVServer]Last-Modified]Cache-ControlTVaryTDate_Content-EncodingWExpires_Transfer-EncodingZkeep-alive_application/x-javascriptUnginx_Thu, 01 Jan 1970 00:00:00 GMT_max-age=315360000_Accept-Encoding_Sat, 02 May 2015 09:36:58 GMTTgzip_Thu, 31 Dec 2037 23:55:55 GMTXIdentityÒ+,bc\NSDictionary¢b/ÿÿÿÿÿÿÿÿ_application/x-javascriptÒ+,gh_NSHTTPURLResponse£ij/_NSHTTPURLResponse]NSURLResponse_NSKeyedArchiverÑmn_WebResourceResponse€    # - 2 7 [ a |  ƒ † ‰ Œ  “ š    £ ¦ © « ­ ¯ ± ³ ´ ¶ ¸ º ¼ ¾ À Â É Ñ İ ß á ã6;FOUXajlnu}ˆ“•—™›Ÿ¡£¥§²´¶¸º¼¾ÀÂÄÆÈÓàçõ (<Gbhˆœ®ÎÓóü5:NRft†‰Ÿ             o              ¡OD¼if (!window.Hatena) window.Hatena = {};
if (!Hatena.Epic) Hatena.Epic = {};
if (!Hatena.Epic.Locale) Hatena.Epic.Locale = {};
if (!Hatena.Epic.Locale.Data) Hatena.Epic.Locale.Data = {};
if (!Hatena.Epic.Locale.Data.Text) Hatena.Epic.Locale.Data.Text = {};
Hatena.Locale.project = 'Epic';
Hatena.Locale.reloadIfWrongLocale();
Hatena.Epic.Locale.Data.Text['ja'] = {"a.hatena.ne.jp":{"value":"\u306f\u3066\u306a\u30a2\u30f3\u30c6\u30ca"},"admin.blog.config.comment.add_refused_ips.note":{"value":"\u30b2\u30b9\u30c8\u306e\u30b3\u30e1\u30f3\u30c8\u3092\u62d2\u5426\u3057\u305f\u3044\u5834\u5408\u306fIP\u30a2\u30c9\u30ec\u30b9\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002IP\u30a2\u30c9\u30ec\u30b9\u306f\u30b3\u30e1\u30f3\u30c8\u7ba1\u7406\u753b\u9762\u3067\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002"},"admin.blog.config.comment.add_refused_ips.note.comment_permission":{"value":"\u30b2\u30b9\u30c8\u306e\u30b3\u30e1\u30f3\u30c8\u3092\u3059\u3079\u3066\u62d2\u5426\u3059\u308b\u306b\u306f\u3001\u30b3\u30e1\u30f3\u30c8\u8a2d\u5b9a\u3067\u30b3\u30e1\u30f3\u30c8\u8a31\u53ef\u3092\u300c\u30e6\u30fc\u30b6\u30fc\u300d\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002"},"admin.blog.config.comment.refused_ip.added":{"value":"\u30b3\u30e1\u30f3\u30c8\u62d2\u5426IP\u30a2\u30c9\u30ec\u30b9\u3092\u8ffd\u52a0\u3057\u307e\u3057\u305f\u3002"},"admin.blog.config.comment.refused_ip.not_found":{"value":"\u30b3\u30e1\u30f3\u30c8\u62d2\u5426IP\u3092\u8ffd\u52a0\u3057\u307e\u3057\u305f\u3002"},"admin.blog.config.comment.refused_ip.removed":{"value":"\u30b3\u30e1\u30f3\u30c8\u62d2\u5426IP\u30a2\u30c9\u30ec\u30b9\u3092\u524a\u9664\u3057\u307e\u3057\u305f\u3002"},"admin.blog.config.entry_ogimage.description":{"value":"\u6ce8\u76ee\u30a8\u30f3\u30c8\u30ea\u30fc\u3084SNS\u30b7\u30a7\u30a2\u306a\u3069\u3067\u5229\u7528\u3055\u308c\u308b\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30a2\u30a4\u30ad\u30e3\u30c3\u30c1\u753b\u50cf\u3092\u6307\u5b9a\u3067\u304d\u307e\u3059\u3002\n\u8a73\u7d30\u306f\u30d8\u30eb\u30d7\u300c\u30a2\u30a4\u30ad\u30e3\u30c3\u30c1\u753b\u50cf\u300d\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002"},"admin.blog.config.image_upload_failure":{"value":"\u753b\u50cf\u306e\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002\u304a\u624b\u6570\u3067\u3059\u304c\u518d\u5ea6\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3057\u3066\u304f\u3060\u3055\u3044"},"admin.blog.config.refused_ips":{"value":"\u30b3\u30e1\u30f3\u30c8\u62d2\u5426IP\u30a2\u30c9\u30ec\u30b9"},"admin.blog.config.refused_ips.empty":{"value":"IP\u62d2\u5426\u30e6\u30fc\u30b6\u30fc\u306f\u3044\u307e\u305b\u3093\u3002"},"admin.blog.config.refused_users":{"value":"\u30b3\u30e1\u30f3\u30c8\u62d2\u5426\u30e6\u30fc\u30b6\u30fc"},"admin.blog.config.refused_users.empty":{"value":"\u30b3\u30e1\u30f3\u30c8\u62d2\u5426\u30e6\u30fc\u30b6\u30fc\u306f\u3044\u307e\u305b\u3093\u3002"},"admin.blog.welcome_message":{"value":"\u306f\u3066\u306a\u30d6\u30ed\u30b0\u3078\u3088\u3046\u3053\u305d\uff01"},"admin.comments.delete.confirm":{"value":"\u30c1\u30a7\u30c3\u30af\u3057\u305f\u30b3\u30e1\u30f3\u30c8\u3092\u524a\u9664\u3057\u307e\u3059\u3002\u3088\u308d\u3057\u3044\u3067\u3059\u304b\uff1f"},"admin.design.module_setting_badvalue":{"value":"\u6b63\u3057\u3044\u5024\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044"},"admin.design.preview_entry_page":{"value":"\u8a18\u4e8b\u30da\u30fc\u30b8\u3092\u30d7\u30ec\u30d3\u30e5\u30fc"},"admin.design.quit_preview_entry_page":{"value":"\u8a18\u4e8b\u30da\u30fc\u30b8\u306e\u30d7\u30ec\u30d3\u30e5\u30fc\u3092\u3084\u3081\u308b"},"admin.design.stop_header_image_confirm":{"value":"\u753b\u50cf\u3092\u5916\u3057\u307e\u3059\u3002\u3088\u308d\u3057\u3044\u3067\u3059\u304b\uff1f"},"admin.image-upload-notice":{"value":"\u30d5\u30a9\u30c8\u30e9\u30a4\u30d5\u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3055\u308c\u307e\u3059\u3002"},"admin.import.undo.confirm":{"value":"\u30a4\u30f3\u30dd\u30fc\u30c8\u3092\u53d6\u308a\u6d88\u3057\u307e\u3059\u3002\u672c\u5f53\u306b\u3088\u308d\u3057\u3044\u3067\u3059\u304b\uff1f"},"admin.paint":{"value":"\u7d75\u3092\u63cf\u304f"},"admin.profile_edit":{"value":"\u5909\u66f4\u3059\u308b"},"admin.upload_image":{"value":"\u5199\u771f\u3092\u6295\u7a3f"},"album.hatena":{"value":"\u306f\u3066\u306a\u30a2\u30eb\u30d0\u30e0"},"b.hatena.ne.jp":{"value":"\u306f\u3066\u306a\u30d6\u30c3\u30af\u30de\u30fc\u30af"},"backup.clear_restore":{"value":"\u30af\u30ea\u30a2"},"backup.notice":{"args":[1],"value":"%s\u306e\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u304c\u3042\u308a\u307e\u3059"},"backup.notice %1":{"args":[1],"value":"%s\u306e\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u304c\u3042\u308a\u307e\u3059"},"backup.notice [_1]":{"args":[1],"value":"%s\u306e\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u304c\u3042\u308a\u307e\u3059"},"backup.notice.ask_restore":{"args":[1],"value":"%s\u306e\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u304c\u3042\u308a\u307e\u3059\u3002\u5fa9\u5143\u3057\u307e\u3059\u304b\uff1f"},"backup.notice.ask_restore %1":{"args":[1],"value":"%s\u306e\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u304c\u3042\u308a\u307e\u3059\u3002\u5fa9\u5143\u3057\u307e\u3059\u304b\uff1f"},"backup.notice.ask_restore [_1]":{"args":[1],"value":"%s\u306e\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u304c\u3042\u308a\u307e\u3059\u3002\u5fa9\u5143\u3057\u307e\u3059\u304b\uff1f"},"backup.notice.auto_restored":{"args":[1],"value":"%s\u306b\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3055\u308c\u305f\u7de8\u96c6\u5185\u5bb9\u3092\u633f\u5165\u3057\u307e\u3057\u305f"},"backup.notice.auto_restored %1":{"args":[1],"value":"%s\u306b\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3055\u308c\u305f\u7de8\u96c6\u5185\u5bb9\u3092\u633f\u5165\u3057\u307e\u3057\u305f"},"backup.notice.auto_restored [_1]":{"args":[1],"value":"%s\u306b\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3055\u308c\u305f\u7de8\u96c6\u5185\u5bb9\u3092\u633f\u5165\u3057\u307e\u3057\u305f"},"backup.restore":{"value":"\u5fa9\u5143"},"blog.admin.edit-sidebar-module":{"value":"\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u7de8\u96c6"},"blog.confirm.delete":{"value":"\u672c\u5f53\u306b\u524a\u9664\u3057\u307e\u3059\u304b\uff1f"},"blog.editform.label.socialize_on_post":{"value":"\u516c\u958b\u3068\u540c\u6642\u306b\u30b7\u30a7\u30a2\u3059\u308b"},"blog.errors.body.long":{"value":"\u672c\u6587\u304c\u9577\u3059\u304e\u307e\u3059"},"blog.hatena.ne.jp":{"value":"\u306f\u3066\u306a\u30d6\u30ed\u30b0"},"blog.module.antenna":{"value":"\u30a2\u30f3\u30c6\u30ca"},"blog.module.archive":{"value":"\u6708\u5225\u30a2\u30fc\u30ab\u30a4\u30d6"},"blog.module.category":{"value":"\u30ab\u30c6\u30b4\u30ea\u30fc"},"blog.module.circles":{"value":"\u53c2\u52a0\u30b0\u30eb\u30fc\u30d7"},"blog.module.html":{"value":"HTML"},"blog.module.link":{"value":"\u30ea\u30f3\u30af"},"blog.module.profile":{"value":"\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb"},"blog.module.recent_comments":{"value":"\u6700\u8fd1\u306e\u30b3\u30e1\u30f3\u30c8"},"blog.module.recent_entries":{"value":"\u6700\u65b0\u8a18\u4e8b"},"blog.module.search":{"value":"\u691c\u7d22"},"blog.posted":{"value":"\u306f\u3066\u306a\u30d6\u30ed\u30b0\u306b\u6295\u7a3f\u3057\u307e\u3057\u305f"},"blog.social.service.name.haiku":{"value":"\u306f\u3066\u306a\u30cf\u30a4\u30af"},"blog.social.service.name.mixi":{"value":"mixi"},"blog.social.service.name.twitter":{"value":"Twitter"},"blog.social.share.confirm":{"args":[1],"value":"%s\u306b\u30b7\u30a7\u30a2\u3057\u307e\u3059\u304b\uff1f"},"blog.social.share.confirm %1":{"args":[1],"value":"%s\u306b\u30b7\u30a7\u30a2\u3057\u307e\u3059\u304b\uff1f"},"blog.social.share.confirm [_1]":{"args":[1],"value":"%s\u306b\u30b7\u30a7\u30a2\u3057\u307e\u3059\u304b\uff1f"},"blog.social.share.success":{"args":[1],"value":"%s\u3078\u306e\u30b7\u30a7\u30a2\u304c\u5b8c\u4e86\u3057\u307e\u3057\u305f\u3002"},"blog.social.share.success %1":{"args":[1],"value":"%s\u3078\u306e\u30b7\u30a7\u30a2\u304c\u5b8c\u4e86\u3057\u307e\u3057\u305f\u3002"},"blog.social.share.success [_1]":{"args":[1],"value":"%s\u3078\u306e\u30b7\u30a7\u30a2\u304c\u5b8c\u4e86\u3057\u307e\u3057\u305f\u3002"},"blog.title":{"value":"\u30bf\u30a4\u30c8\u30eb"},"c.hatena.ne.jp":{"value":"\u306f\u3066\u306a\u30b3\u30b3"},"category.none":{"value":"\u306a\u3057"},"close":{"value":"\u9589\u3058\u308b"},"comment.delete.messages.confirm":{"value":"\u524a\u9664\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\u3088\u308d\u3057\u3044\u3067\u3059\u304b\uff1f"},"counter.hatena.ne.jp":{"value":"\u306f\u3066\u306a\u30ab\u30a6\u30f3\u30bf\u30fc"},"create_category":{"value":"\u65b0\u3057\u3044\u30ab\u30c6\u30b4\u30ea\u30fc\u3092\u4f5c\u6210"},"d.hatena.ne.jp":{"value":"\u306f\u3066\u306a\u30c0\u30a4\u30a2\u30ea\u30fc"},"datetime.ago":{"args":[1],"value":"%s\u524d"},"datetime.ago %1":{"args":[1],"value":"%s\u524d"},"datetime.ago [_1]":{"args":[1],"value":"%s\u524d"},"datetime.later":{"args":[1],"value":"%s\u5f8c"},"datetime.later %1":{"args":[1],"value":"%s\u5f8c"},"datetime.later [_1]":{"args":[1],"value":"%s\u5f8c"},"datetime.update_preview":{"value":"\u30d7\u30ec\u30d3\u30e5\u30fc\u3092\u66f4\u65b0"},"days_n":{"args":[1],"value":"%s\u65e5"},"days_n %1":{"args":[1],"value":"%s\u65e5"},"days_n [_1]":{"args":[1],"value":"%s\u65e5"},"done":{"value":"\u5b8c\u4e86"},"e.hatena.ne.jp":{"value":"\u306f\u3066\u306a\u30d6\u30ed\u30b0"},"edit":{"value":"\u7de8\u96c6"},"edit_form.body_length_exceeded_error":{"value":"\u672c\u6587\u304c\u9577\u3059\u304e\u308b\u305f\u3081\u6295\u7a3f\u3067\u304d\u307e\u305b\u3093"},"edit_form.character_count_exceeded_error":{"args":[1],"value":"\u672c\u6587\u304c%s\u6587\u5b57\u3092\u8d85\u3048\u3066\u3044\u308b\u305f\u3081\u6295\u7a3f\u3067\u304d\u307e\u305b\u3093"},"edit_form.character_count_exceeded_error %1":{"args":[1],"value":"\u672c\u6587\u304c%s\u6587\u5b57\u3092\u8d85\u3048\u3066\u3044\u308b\u305f\u3081\u6295\u7a3f\u3067\u304d\u307e\u305b\u3093"},"edit_form.character_count_exceeded_error [_1]":{"args":[1],"value":"\u672c\u6587\u304c%s\u6587\u5b57\u3092\u8d85\u3048\u3066\u3044\u308b\u305f\u3081\u6295\u7a3f\u3067\u304d\u307e\u305b\u3093"},"edit_form.character_count_unit":{"args":[1],"value":"%s\u6587\u5b57"},"edit_form.character_count_unit %1":{"args":[1],"value":"%s\u6587\u5b57"},"edit_form.character_count_unit [_1]":{"args":[1],"value":"%s\u6587\u5b57"},"edit_form.colorpicker.cancel":{"value":"\u30ea\u30bb\u30c3\u30c8"},"edit_form.footnote_message":{"value":"\u3053\u3053\u306b\u811a\u6ce8\u3092\u66f8\u304d\u307e\u3059"},"edit_form.og_description":{"value":"\u3053\u306e\u8a18\u4e8b\u306e\u6982\u8981\u3092\u8a18\u8ff0\u3067\u304d\u307e\u3059\u3002\u691c\u7d22\u7d50\u679c\u3084SNS\u30b7\u30a7\u30a2\u3001\u6ce8\u76ee\u30a8\u30f3\u30c8\u30ea\u30fc\u306a\u3069\u3067\u5229\u7528\u3055\u308c\u307e\u3059\u3002"},"edit_form.og_description.label":{"value":"\u8a18\u4e8b\u306e\u6982\u8981"},"edit_form.og_description.placeholder":{"value":"\u6982\u8981"},"edit_form.toolbar.button_hide":{"value":"\u30c4\u30fc\u30eb\u30d0\u30fc\u3092\u958b\u9589\u3059\u308b"},"edit_form.toolbar.button_more":{"value":"\u30c4\u30fc\u30eb\u30d0\u30fc\u3092\u958b\u9589\u3059\u308b"},"edit_tab":{"value":"\u30bf\u30d6\u3092\u6574\u7406\u3059\u308b"},"epic.confirm_subscribe":{"args":[],"value":"\u3053\u306e\u30d6\u30ed\u30b0\u306e\u8aad\u8005\u306b\u306a\u308a\u307e\u3059\u304b\uff1f"},"epic.confirm_subscribe %1":{"args":[],"value":"\u3053\u306e\u30d6\u30ed\u30b0\u306e\u8aad\u8005\u306b\u306a\u308a\u307e\u3059\u304b\uff1f"},"epic.confirm_subscribe [_1]":{"args":[],"value":"\u3053\u306e\u30d6\u30ed\u30b0\u306e\u8aad\u8005\u306b\u306a\u308a\u307e\u3059\u304b\uff1f"},"epic.confirm_unsubscribe":{"args":[],"value":"\u3053\u306e\u30d6\u30ed\u30b0\u306e\u8b1b\u8aad\u3092\u3084\u3081\u307e\u3059\u304b\uff1f"},"epic.confirm_unsubscribe %1":{"args":[],"value":"\u3053\u306e\u30d6\u30ed\u30b0\u306e\u8b1b\u8aad\u3092\u3084\u3081\u307e\u3059\u304b\uff1f"},"epic.confirm_unsubscribe [_1]":{"args":[],"value":"\u3053\u306e\u30d6\u30ed\u30b0\u306e\u8b1b\u8aad\u3092\u3084\u3081\u307e\u3059\u304b\uff1f"},"epic.delete.confirm":{"value":"\u524a\u9664\u3055\u308c\u307e\u3059\u3002\u3053\u306e\u64cd\u4f5c\u306f\u53d6\u6d88\u3067\u304d\u307e\u305b\u3093\u304c\u3001\u7d9a\u3051\u307e\u3059\u304b\uff1f"},"epic.delete.confirm.category":{"value":"\u30ab\u30c6\u30b4\u30ea\u30fc\u3092\u524a\u9664\u3057\u307e\u3059\u3002\u3053\u306e\u64cd\u4f5c\u306f\u53d6\u308a\u6d88\u305b\u307e\u305b\u3093\u3002\u7d9a\u3051\u307e\u3059\u304b\uff1f"},"epic.editarea.hover":{"value":"\u3053\u3053\u306b\u753b\u50cf\u3092\u30c9\u30ed\u30c3\u30d7"},"epic.entry.delete.confirm":{"value":"\u30c1\u30a7\u30c3\u30af\u3057\u305f\u8a18\u4e8b\u3092\u524a\u9664\u3057\u307e\u3059\u3002\u3044\u3063\u305f\u3093\u524a\u9664\u3057\u305f\u8a18\u4e8b\u306f\u5143\u306b\u623b\u305b\u307e\u305b\u3093\u3002\u672c\u5f53\u306b\u524a\u9664\u3057\u307e\u3059\u304b\uff1f"},"epic.more":{"value":"\u3082\u3063\u3068\u8aad\u3080"},"epic.subscribe":{"value":"\u8aad\u8005\u306b\u306a\u308b"},"epic.subscriber_count":{"args":[1],"value":"%s"},"epic.subscriber_count %1":{"args":[1],"value":"%s"},"epic.subscriber_count [_1]":{"args":[1],"value":"%s"},"epic.subscribing":{"value":"\u8cfc\u8aad\u4e2d\u3067\u3059"},"epic.syntax_switch":{"value":"\u7de8\u96c6\u30e2\u30fc\u30c9\u3092\u5207\u308a\u66ff\u3048\u307e\u3059\u304b\uff1f\n\n\u7de8\u96c6\u753b\u9762\u3092\u30ea\u30bb\u30c3\u30c8\u3059\u308b\u305f\u3081\u3001\u4f5c\u6210\u4e2d\u306e\u672c\u6587\u306f\u6d88\u53bb\u3055\u308c\u307e\u3059\u3002\u3053\u306e\u64cd\u4f5c\u306f\u5143\u306b\u623b\u305b\u307e\u305b\u3093\u3002"},"f.hatena.ne.jp":{"value":"\u306f\u3066\u306a\u30d5\u30a9\u30c8\u30e9\u30a4\u30d5"},"form.confirm.changed":{"value":"\u5909\u66f4\u3092\u4fdd\u5b58\u305b\u305a\u306b\u79fb\u52d5\u3057\u307e\u3059\u304b"},"fotolife.folder.top":{"value":"\u30c8\u30c3\u30d7\u30d5\u30a9\u30eb\u30c0"},"g.hatena.ne.jp":{"value":"\u306f\u3066\u306a\u30b0\u30eb\u30fc\u30d7"},"global.confirm":{"value":"\u3088\u308d\u3057\u3044\u3067\u3059\u304b?"},"global.done":{"value":"\u5b8c\u4e86\u3057\u307e\u3057\u305f"},"global.message.deleted":{"value":"\u524a\u9664\u3057\u307e\u3057\u305f"},"h.hatena.ne.jp":{"value":"\u306f\u3066\u306a\u30cf\u30a4\u30af"},"help":{"value":"\u30d8\u30eb\u30d7"},"hours_n":{"args":[1],"value":"%s\u6642\u9593"},"hours_n %1":{"args":[1],"value":"%s\u6642\u9593"},"hours_n [_1]":{"args":[1],"value":"%s\u6642\u9593"},"i.hatena.ne.jp":{"value":"\u306f\u3066\u306a\u30a2\u30a4\u30c7\u30a2"},"k.hatena.ne.jp":{"value":"\u306f\u3066\u306a\u30ad\u30fc\u30ef\u30fc\u30c9"},"l.hatena.ne.jp":{"value":"\u306f\u3066\u306a\u30e9\u30f3\u30c9"},"lang":{"value":"\u8a00\u8a9e"},"lang.en.native":{"value":"English"},"lang.ja.native":{"value":"\u65e5\u672c\u8a9e"},"list.more":{"value":"\u3082\u3063\u3068\u898b\u308b"},"loading":{"value":"\u8aad\u307f\u8fbc\u307f\u4e2d..."},"logout":{"value":"\u30ed\u30b0\u30a2\u30a6\u30c8"},"m.hatena.ne.jp":{"value":"\u306f\u3066\u306a\u30e1\u30c3\u30bb\u30fc\u30b8"},"minutes_n":{"args":[1],"value":"%s\u5206"},"minutes_n %1":{"args":[1],"value":"%s\u5206"},"minutes_n [_1]":{"args":[1],"value":"%s\u5206"},"mono.hatena.ne.jp":{"value":"\u306f\u3066\u306a\u30e2\u30ce\u30ea\u30b9"},"my_hatena":{"value":"My\u306f\u3066\u306a"},"n.hatena.ne.jp":{"value":"\u306f\u3066\u306a"},"notices":{"value":"\u304a\u77e5\u3089\u305b"},"pager.page_num":{"args":[1],"value":"%s\u30da\u30fc\u30b8\u76ee"},"pager.page_num %1":{"args":[1],"value":"%s\u30da\u30fc\u30b8\u76ee"},"pager.page_num [_1]":{"args":[1],"value":"%s\u30da\u30fc\u30b8\u76ee"},"placeholder.ip_address":{"value":"IP\u30a2\u30c9\u30ec\u30b9"},"plural_entries":{"value":"\u8a18\u4e8b"},"plural_entry":{"value":"\u8a18\u4e8b"},"preview":{"value":"\u30d7\u30ec\u30d3\u30e5\u30fc"},"profile":{"value":"\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb"},"profile.change":{"value":"\u5909\u66f4\u3059\u308b"},"profile.image.change":{"value":"\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u753b\u50cf\u3092\u5909\u66f4\u3059\u308b"},"q.hatena.ne.jp":{"value":"\u4eba\u529b\u691c\u7d22\u306f\u3066\u306a"},"r.hatena.ne.jp":{"value":"\u306f\u3066\u306aRSS"},"read_more_comments":{"value":"\u3082\u3063\u3068\u8aad\u3080"},"really_want_to_logout":{"value":"\u672c\u5f53\u306b\u30ed\u30b0\u30a2\u30a6\u30c8\u3057\u307e\u3059\u304b\uff1f"},"s.hatena.ne.jp":{"value":"\u306f\u3066\u306a\u30b9\u30bf\u30fc"},"see_more":{"value":"\u7d9a\u304d\u3092\u8aad\u3080"},"services_in_use":{"value":"\u5229\u7528\u4e2d\u306e\u30b5\u30fc\u30d3\u30b9"},"settings":{"value":"\u8a2d\u5b9a"},"space.hatena.ne.jp":{"value":"\u306f\u3066\u306a\u30b9\u30da\u30fc\u30b9"},"star-navigation-message":{"value":"\u3053\u306e\u8a18\u4e8b\u304c\u304a\u3082\u3057\u308d\u304b\u3063\u305f\u3089\u3001\u30b9\u30bf\u30fc\u3092\u62bc\u3057\u3066\u300c\u3044\u3044\u306a\u300d\u3092\u4f1d\u3048\u3066\u307f\u307e\u3057\u3087\u3046\uff01"},"there_are_no_service_in_use":{"value":"\u73fe\u5728\u5229\u7528\u4e2d\u306e\u30b5\u30fc\u30d3\u30b9\u306f\u3042\u308a\u307e\u305b\u3093"},"ugomemo.hatena.ne.jp":{"value":"\u3046\u3054\u30e1\u30e2\u306f\u3066\u306a"},"uploading":{"value":"\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u4e2d"},"user.config.profile.errors.check_type":{"value":"\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3067\u304d\u308b\u753b\u50cf\u306e\u7a2e\u985e\u306f jpg, png, gif, bmp \u3067\u3059\u3002"},"users_entry":{"args":[1,2],"value":"%s\u3055\u3093\u306e%s"},"users_entry %1%2":{"args":[1,2],"value":"%s\u3055\u3093\u306e%s"},"users_entry [_1][_2]":{"args":[1,2],"value":"%s\u3055\u3093\u306e%s"},"years_n":{"args":[1],"value":"%s\u5e74"},"years_n %1":{"args":[1],"value":"%s\u5e74"},"years_n [_1]":{"args":[1],"value":"%s\u5e74"},"youth.hatena":{"value":"\u306f\u3066\u306a"}};
_application/x-javascriptÒKOÕ	
LMN_86ttz5|http://www.welluneednt.com/entry/2015/03/24/113000_’http://cdn.api.b.hatena.ne.jp/entry/button/?url=http%3A%2F%2Fwww.welluneednt.com%2Fentry%2F2015%2F03%2F24%2F113000&layout=vertical-balloon&lang=jaOl<!DOCTYPE html><html lang="ja"><head><meta charset="utf-8">
  <link rel="canonical" href="http://b.hatena.ne.jp/entry/www.welluneednt.com/entry/2015/03/24/113000">
  <title>ã¯ã¦ãªãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ãƒœã‚¿ãƒ³</title>
  <link rel="stylesheet" href="http://cdn-ak.b.st-hatena.com/css/reset.css?79ad2285399bf3e11d4fb03a5709474001ba5fa0" type="text/css" media="all">
  <link rel="stylesheet" href="http://cdn-ak.b.st-hatena.com/css/entry-button.css?27f0bec3bfa0736c1f3315f1d829a2ae45c8dd90" type="text/css" media="all">
  <script>
    function postMessageToParentWin(type, dataStr, useFallback) {
        var match = window.name.match(/^(\w+)\|((https?:\/\/[^\/?#]+)[^#]*)/);
        if (!match) return;
        if (window.postMessage) {
            window.parent.postMessage('HBMessage@{"type": "' + type + '", "data": ' + dataStr + '}', match[3]);
            return;
        }
        if (useFallback) {
            var url = match[2] + "#HBMessage-" + match[1] + "-" + type + "/" + dataStr;
            try {
                window.parent.location.replace(url);
            } catch (ex) {
                window.parent.location.href = url;
            }
        }
    }
    function clickHandler() {
        postMessageToParentWin("click", "null", true);
    }
  </script>
  </head><body onkeypress="if (event.keyCode === 13) { clickHandler(); return false; }">
    <div class="b-area-standard vertical ja">
      <a href="http://b.hatena.ne.jp/entry/www.welluneednt.com/entry/2015/03/24/113000" class="b-btn" target="_top" title="ã“ã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã‚’ã¯ã¦ãªãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ã«è¿½åŠ  (44 users)" onclick="if ((event.which || event.button) &lt;= 1) { clickHandler(); return false; }">
        <span>ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯</span>
      </a>
      <a href="http://b.hatena.ne.jp/entry/www.welluneednt.com/entry/2015/03/24/113000" class="b-count" target="_blank">44</a>
    </div>
  

</body></html>¢PTÔ	QRS _Thttp://cdn-ak.b.st-hatena.com/css/reset.css?79ad2285399bf3e11d4fb03a5709474001ba5fa0O]bplist00ÔjkX$versionX$objectsY$archiverT$top † ¯ #)*0123MNOPQRSTUVWXYZ[\]^_`adeU$nullİ	
 !"R$6S$10R$2R$7R$3S$11R$8V$classR$4R$9R$0R$5R$1€	€€€€€€€Ó$%&'(WNS.base[NS.relative€ €€_Thttp://cdn-ak.b.st-hatena.com/css/reset.css?79ad2285399bf3e11d4fb03a5709474001ba5fa0Ò+,-.Z$classnameX$classesUNSURL¢-/XNSObject#AºôÒ;B& ÈÓ456ALWNS.keysZNS.objectsª789:;<=>?@€	€
€€€€€€€€ªBDEFGHIJK€€€€€€€€€€€VServer\Content-Type]Cache-Control]Last-ModifiedTVaryTDate_Content-Encoding^Content-LengthWExpiresZConnectionUnginxXtext/css]max-age=30990_Fri, 01 May 2015 08:31:09 GMT_Accept-Encoding_Sat, 02 May 2015 09:36:59 GMTTgzipS994_Sat, 02 May 2015 18:13:29 GMTZkeep-aliveÒ+,bc\NSDictionary¢b/Ò+,fg_NSHTTPURLResponse£hi/_NSHTTPURLResponse]NSURLResponse_NSKeyedArchiverÑlm_WebResourceResponse€    # - 2 7 Z ` { ~ ‚ … ˆ ‹  ’ ™ œ Ÿ ¢ ¥ ¨ ª ¬ ® ° ² ³ µ · ¹ » ½ ¿ Á È Ğ Ü Ş à â9>IRX[dmoqx€‹–˜šœ ¢¤¦¨ªµ·¹»½¿ÁÃÅÇÉËÒßíû '/:@IWw‰©®²Òİâïòõú&4FI_             n              aO/* YUI {{{ */
/*
Copyright (c) 2010, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.com/yui/license.html
version: 2.8.1
*/
/**
 * YUI Reset
 * @module reset
 * @namespace
 * @requires 
 */
html {
  color: #000;
  background: #FFF;
}

html, body, div, dl, dt, dd, ul, ol, li, h1, h2, h3, h4, h5, h6, pre, code, form, fieldset, legend, input, button, textarea, p, blockquote, th, td {
  margin: 0;
  padding: 0;
}

table {
  border-collapse: collapse;
  border-spacing: 0;
}

fieldset, img {
  border: 0;
}

address, caption, cite, code, dfn, em, strong, th, var, optgroup {
  font-style: inherit;
  font-weight: inherit;
}

del, ins {
  text-decoration: none;
}

li {
  list-style: none;
}

caption, th {
  text-align: left;
}

h1, h2, h3, h4, h5, h6 {
  font-size: 100%;
  font-weight: normal;
}

q:before, q:after {
  content: '';
}

abbr, acronym {
  border: 0;
  font-variant: normal;
}

sup {
  vertical-align: baseline;
}

sub {
  vertical-align: baseline;
}

/*because legend doesn't inherit in IE */
legend {
  color: #000;
}

input, button, textarea, select, optgroup, option {
  font-family: inherit;
  font-size: inherit;
  font-style: inherit;
  font-weight: inherit;
}

/*@purpose To enable resizing for IE */
/*@branch For IE6-Win, IE7-Win */
input, button, textarea, select {
  *font-size: 100%;
}

/**
 * Percents could work for IE, but for backCompat purposes, we are using keywords.
 * x-small is for IE6/7 quirks mode.
 */
body {
  font:13px/1.231 arial,helvetica,clean,sans-serif;
  /* for IE6/7 */ 
  *font-size:small; 
  /* for IE Quirks Mode */
  *font:x-small; 
}

/**
 * Nudge down to get to 13px equivalent for these form elements
 */ 
select, input, button, textarea, button {
  font:99% arial,helvetica,clean,sans-serif;
}

/**
 * To help tables remember to inherit
 */
table {
  font-size:inherit;
  font:100%;
}

/**
 * Bump up IE to get to 13px equivalent for these fixed-width elements
 */
pre, code, kbd, samp, tt {
  font-family:monospace;
  *font-size:108%;
  line-height:100%;
}

/* }}} */
Ô	UVW _[http://cdn-ak.b.st-hatena.com/css/entry-button.css?27f0bec3bfa0736c1f3315f1d829a2ae45c8dd90Oebplist00ÔjkX$versionX$objectsY$archiverT$top † ¯ #)*0123MNOPQRSTUVWXYZ[\]^_`adeU$nullİ	
 !"R$6S$10R$2R$7R$3S$11R$8V$classR$4R$9R$0R$5R$1€	€€€€€€€Ó$%&'(WNS.base[NS.relative€ €€_[http://cdn-ak.b.st-hatena.com/css/entry-button.css?27f0bec3bfa0736c1f3315f1d829a2ae45c8dd90Ò+,-.Z$classnameX$classesUNSURL¢-/XNSObject#AºôÒ;B8¨ ÈÓ456ALWNS.keysZNS.objectsª789:;<=>?@€	€
€€€€€€€€ªBDEFGHIJK€€€€€€€€€€€VServer\Content-Type]Cache-Control]Last-ModifiedTVaryTDate_Content-Encoding^Content-LengthWExpiresZConnectionUnginxXtext/css]max-age=10976_Fri, 01 May 2015 08:31:09 GMT_Accept-Encoding_Sat, 02 May 2015 09:36:59 GMTTgzipT1666_Sat, 02 May 2015 12:39:55 GMTZkeep-aliveÒ+,bc\NSDictionary¢b/ÕÒ+,fg_NSHTTPURLResponse£hi/_NSHTTPURLResponse]NSURLResponse_NSKeyedArchiverÑlm_WebResourceResponse€    # - 2 7 Z ` { ~ ‚ … ˆ ‹  ’ ™ œ Ÿ ¢ ¥ ¨ ª ¬ ® ° ² ³ µ · ¹ » ½ ¿ Á È Ğ Ü Ş à â@EPY_bktvx‡’Ÿ¡£¥§©«­¯±¼¾ÀÂÄÆÈÊÌÎĞÒÙæô.6AGP^~°µºÚåê÷úı.<NQg             n              iOÕ@charset "UTF-8";

html, body {
  background: transparent;
}
body {
  overflow: hidden;
}

/*-- Style v2 --*/

.button-container {
  text-decoration: none;
  display: block;
  width: 49px;
  padding-left: 1px;
  overflow: hidden;
  zoom: 1;
}

.button-image {
  float: left;
  margin-left: -1px;
}

.counter {
  background: url(/images/entry-button/button-bg-right.gif) no-repeat right top;
  text-align: center;
  font-weight: bold;
  line-height: 21px;
  color: #2c6ebd;
  font-size: 93%;
  display: block;
}


.vbutton-container  {
  text-decoration: none;
  display: block;
  width: 48px;
  height: 48px;
  background: #2c6ebd;
  margin:0px 1px;
  padding:1px 0px;
  position: relative;
}

.vbutton-inner {
  background: #2c6ebd url(/images/entry-button/vbutton-bg.png) center top;
  _filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=crop,src='/images/entry-button/vbutton-bg.png');
  _background-image: none;
  _zoom: 1;
  margin:0 -1px;
  display: block;
  height: 48px;
  position: relative;
  cursor: pointer; /* For IE 6/7 */
}

.vbutton-container .counter {
  background: transparent;
  line-height: 0.8;
  padding-top: 8px;
  color: #2c6ebd;
}

.vbutton-container .counter .count {
  display: block;
}

.vbutton-container .counter .users {
  display: block;
  font-size: 80%;
}


.button-counter {
  padding-right: 1px;
  width: 48px;
}

.counter-container {
  padding: 1px 0;
  background: #abc5e5;
  display: block;
}

.counter-container .counter {
  background: #eee;
  background: #f7f9fc;
  margin-right: -1px;
  line-height: 18px;
  color: #2c6ebd;
  border-right: 1px solid #abc5e5;
}


/*-- Style v3 --*/

.b-area-simple,
.b-area-standard {
  display: inline; zoom: 1; /* for IE 6, 7 */
  display: inline-block;
  height: 20px;
}
.b-area-simple {
  position: relative;
  padding-left: 28px;
}
.b-area-standard {
  position: relative;
  padding-left: 88px;
}
.b-area-standard.vertical {
  width: 80px;
  height: 60px;
  padding-left: 0;
}
a.b-btn,
a.b-count {
  font-family: Arial;
  font-size: 11px;
  line-height: 18px;
  color: #2D4C86;
  text-decoration: none;
}
.b-area-standard.ja a.b-btn {
  font-family: 'ãƒ’ãƒ©ã‚®ãƒè§’ã‚´ Pro W3', Hiragino Kaku Gothic Pro, 'ãƒ¡ã‚¤ãƒªã‚ª', Meiryo, Helvetica, Arial, sans-serif;
  font-size: 10px;
  letter-spacing: -1px;
  font-weight: bold;
  line-height: 1;
}
.b-area-simple .b-btn,
.b-area-standard .b-btn {
  position: absolute;
  top: 0;
  left: 0;
}
.b-area-simple .b-btn,
.b-area-simple .b-count,
.b-area-standard .b-btn,
.b-area-standard .b-count {
  display: inline; zoom: 1; /* for IE 6, 7 */
  display: inline-block;
}
.b-area-standard.vertical .b-btn {
  position: absolute;
  top: 40px;
  display: block;
}
.b-area-simple .b-btn {
  width: 20px;
  height: 20px;
  background: url("/images/entry-button/bbtn-s_v3.png") left 0px no-repeat;
  background-size: 20px 40px;
}
.b-area-simple .b-btn:hover {
  color: #193A68;
  background: url("/images/entry-button/bbtn-s_v3.png") left -20px no-repeat;
  background-size: 20px 40px;
}

@media only screen and (-webkit-min-device-pixel-ratio:2),(min-resolution: 2dppx){
  .b-area-simple .b-btn, .b-area-simple .b-btn:hover {
    background-image: url("/images/entry-button/bbtn-s_v3@2x.png");
  }
}

.b-area-simple .b-btn span {
  display: none;
}
.b-area-simple .b-count,
.b-area-standard .b-count {
  width: auto;
  height: 18px;
  background-color: #FFF;
  position: relative;
  border: 1px solid #B0C1D8;
  -webkit-border-radius: 3px;
  border-radius: 3px;
  padding: 0 5px;
}
.b-area-simple .b-count:after,
.b-area-simple .b-count:before,
.b-area-standard .b-count:after,
.b-area-standard .b-count:before {
  border: solid transparent;
  content: ' ';
  height: 0;
  right: 100%;
  position: absolute;
  width: 0;
}
.b-area-simple .b-count:after,
.b-area-standard .b-count:after {
  border-width: 3px;
  border-right-color: #FFF;
  top: 6px;
}
.b-area-simple .b-count:before,
.b-area-standard .b-count:before {
  border-width: 5px;
  border-right-color: #B0C1D8;
  top: 4px;
}
.b-area-standard .b-btn {
  width: 56px;
  height: 19px;
  padding: 1px 0 0 24px;
  background: url("/images/entry-button/bbtn-l_v3.png") left 0px no-repeat;
  background-size: 80px 40px;
  text-decoration: none;
  -webkit-text-shadow: 0 1px 0 #FFF;
  text-shadow: 0 1px 0 #FFF;
}
.b-area-standard.ja .b-btn {
  width: 63px;
  height: 14px;
  padding: 6px 0 0 21px;
}
.b-area-standard .b-btn:hover {
  color: #193A68;
  background: url("/images/entry-button/bbtn-l_v3.png") left -20px no-repeat;
  background-size: 80px 40px;
}

@media only screen and (-webkit-min-device-pixel-ratio:2),(min-resolution: 2dppx){
  .b-area-standard .b-btn, .b-area-standard .b-btn:hover {
    background-image: url("/images/entry-button/bbtn-l_v3@2x.png");
  }
}
.b-area-standard.vertical .b-count {
  top: 0px;
  width: 70px;
  height: 31px;
  background-color: #FFF;
  position: relative;
  border: 1px solid #B0C1D8;
  -webkit-border-radius: 3px;
  border-radius: 3px;
  padding: 0 4px;
  font-family: Arial;
  font-size: 16px;
  line-height: 31px;
  text-align: center;
  color: #2D4C86;
  display: block;
}
.b-area-standard.vertical .b-count:after,
.b-area-standard.vertical .b-count:before {
  border: solid transparent;
  content: ' ';
  height: 0;
  right: 100%;
  position: absolute;
  width: 0;
}
.b-area-standard.vertical .b-count:after {
  border-width: 4px;
  border-top-color: #FFF;
  top: 31px;
  left: 35px;
}
.b-area-standard.vertical .b-count:before {
  border-width: 5px;
  border-top-color: #B0C1D8;
  top: 32px;
  left: 34px;
}
.b-count:hover {
  color: #193A68;
}
ÒY]Õ	
Z[\Zf3804e0c7c_¼https://www.facebook.com/v2.0/plugins/share_button.php?app_id=719729204785177&channel=http%3A%2F%2Fstatic.ak.facebook.com%2Fconnect%2Fxd_arbiter%2F6p3So0GhyQP.js%3Fversion%3D41%23cb%3Df2dfdb92c8%26domain%3Dwww.welluneednt.com%26origin%3Dhttp%253A%252F%252Fwww.welluneednt.com%252Ff861ec9c%26relation%3Dparent.parent&container_width=0&href=http%3A%2F%2Fwww.welluneednt.com%2Fentry%2F2015%2F03%2F24%2F113000&layout=box_count&locale=ja_JP&sdk=joeyONR<!DOCTYPE html><html lang="ja" id="facebook" class=""><head><meta charset="utf-8"><meta name="referrer" content="default" id="meta_referrer"><script></script><title>Facebook</title><style>body.plugin{background:transparent;overflow:hidden;-webkit-text-size-adjust:none}body{background:#fff;color:#141823;line-height:1.28;margin:0;padding:0;text-align:left;direction:ltr;unicode-bidi:embed}body,button,input,label,select,td,textarea{font-family:'lucida grande',tahoma,verdana,arial,"hiragino kaku gothic pro",meiryo,"ms pgothic",sans-serif;font-size:11px}h1,h2,h3,h4,h5,h6{font-size:13px;color:#141823;margin:0;padding:0}h1{font-size:14px}h4,h5,h6{font-size:11px}p{margin:1em 0}a{color:#3b5998;cursor:pointer;text-decoration:none}button{margin:0}a:hover{text-decoration:underline}img{border:0}td,td.label{text-align:left}dd{color:#000}dt{color:#777}ul{list-style-type:none;margin:0;padding:0}abbr{border-bottom:none}hr{background:#d9d9d9;border-width:0;color:#d9d9d9;height:1px}.clearfix:after{clear:both;content:".";display:block;font-size:0;height:0;line-height:0;visibility:hidden}.clearfix{zoom:1}.datawrap{word-wrap:break-word}.word_break{display:inline-block}.ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.aero{opacity:.5}.column{float:left}.center{margin-left:auto;margin-right:auto}#facebook .hidden_elem{display:none !important}#facebook .invisible_elem{visibility:hidden}#facebook .accessible_elem{clip:rect(1px 1px 1px 1px);clip:rect(1px, 1px, 1px, 1px);height:1px;overflow:hidden;position:absolute;width:1px}.direction_ltr{direction:ltr}.direction_rtl{direction:rtl}.text_align_ltr{text-align:left}.text_align_rtl{text-align:right}.pluginFontArial,.pluginFontArial button,.pluginFontArial input,.pluginFontArial label,.pluginFontArial select,.pluginFontArial td,.pluginFontArial textarea{font-family:Arial, "hiragino kaku gothic pro",meiryo,"ms pgothic",sans-serif}.pluginFontLucida,.pluginFontLucida button,.pluginFontLucida input,.pluginFontLucida label,.pluginFontLucida select,.pluginFontLucida td,.pluginFontLucida textarea{font-family:Lucida Grande, "hiragino kaku gothic pro",meiryo,"ms pgothic",sans-serif}.pluginFontSegoe,.pluginFontSegoe button,.pluginFontSegoe input,.pluginFontSegoe label,.pluginFontSegoe select,.pluginFontSegoe td,.pluginFontSegoe textarea{font-family:Segoe UI, "hiragino kaku gothic pro",meiryo,"ms pgothic",sans-serif}.pluginFontTahoma,.pluginFontTahoma button,.pluginFontTahoma input,.pluginFontTahoma label,.pluginFontTahoma select,.pluginFontTahoma td,.pluginFontTahoma textarea{font-family:Tahoma, "hiragino kaku gothic pro",meiryo,"ms pgothic",sans-serif}.pluginFontTrebuchet,.pluginFontTrebuchet button,.pluginFontTrebuchet input,.pluginFontTrebuchet label,.pluginFontTrebuchet select,.pluginFontTrebuchet td,.pluginFontTrebuchet textarea{font-family:Trebuchet MS, "hiragino kaku gothic pro",meiryo,"ms pgothic",sans-serif}.pluginFontVerdana,.pluginFontVerdana button,.pluginFontVerdana input,.pluginFontVerdana label,.pluginFontVerdana select,.pluginFontVerdana td,.pluginFontVerdana textarea{font-family:Verdana, "hiragino kaku gothic pro",meiryo,"ms pgothic",sans-serif}.pluginFontHelvetica,.pluginFontHelvetica button,.pluginFontHelvetica input,.pluginFontHelvetica label,.pluginFontHelvetica select,.pluginFontHelvetica td,.pluginFontHelvetica textarea{font-family:'helvetica neue', helvetica, arial, 'lucida grande', "hiragino kaku gothic pro",meiryo,"ms pgothic",sans-serif}._51mz{border:0;border-collapse:collapse;border-spacing:0}._5f0n{table-layout:fixed;width:100%}.uiGrid .vTop{vertical-align:top}.uiGrid .vMid{vertical-align:middle}.uiGrid .vBot{vertical-align:bottom}.uiGrid .hLeft{text-align:left}.uiGrid .hCent{text-align:center}.uiGrid .hRght{text-align:right}._51mx:first-child>._51m-{padding-top:0}._51mx:last-child>._51m-{padding-bottom:0}._51mz ._51mw{padding-right:0}._51mz ._51m-:first-child{padding-left:0}.pluginCountBox{background:#fff;border:1px solid #9197a3;-webkit-border-radius:2px;color:#4e5665;font-size:13px;height:24px;margin:0;min-width:35px;padding:6px 1px 2px 3px;text-align:center;white-space:nowrap}.pluginCountBoxIcon{left:-3px;position:relative;top:2px}.pluginCountBoxTextOnly{padding:2px}.pluginCountBoxNub{bottom:1px;height:7px;left:7px;position:relative;width:0;z-index:2}.pluginCountBoxNub s,.pluginCountBoxNub i{border-color:#9197a3 transparent transparent;border-right:5px solid transparent;border-style:solid;border-width:5px;display:block;position:relative}.pluginCountBoxNub i{border-top-color:#fff;left:0;top:-12px}.pluginCountTextConnected,.pluginCountConnected .pluginCountTextDisconnected{display:none}.pluginCountConnected .pluginCountTextConnected{display:inline}.pluginButtonSpacer{padding-left:4px}.pluginButton{background:#4c69ba;background:-webkit-gradient(linear, center top, center bottom, from(#4c69ba), to(#3b55a0));background:-webkit-linear-gradient(#4c69ba, #3b55a0);border:none;-webkit-border-radius:2px;color:#fff;cursor:pointer;font-weight:bold;height:20px;line-height:20px;padding:0;text-shadow:0 -1px 0 #354c8c;white-space:nowrap}.pluginButtonLight{background:-webkit-gradient(linear, center top, center bottom, from(#0084ff), to(#006fff));background:-webkit-linear-gradient(#0084ff, #006fff);text-shadow:0 -1px 0 #005ecf}.pluginButtonInline{display:inline-block}.pluginButtonX{cursor:default}.pluginButton button{background:transparent;border:0;color:inherit;cursor:pointer;font:inherit;font-weight:bold;margin:-1px;outline:none;padding:0;text-shadow:0 -1px 0 #354c8c}.pluginButtonIcon{height:14px;left:0;margin:0 4px 0 4px;position:relative;top:3px;vertical-align:top;width:14px}.pluginButtonImage{display:inline-block}.pluginButtonContainer{-webkit-font-smoothing:antialiased}.pluginButtonIconPlaceholder{display:block;height:14px;width:7px}.pluginButton .pluginButtonLabel{padding:0 5px 0 0;position:relative;vertical-align:top}.android .pluginButton .pluginButtonLabel{top:1px}.pluginButton:hover{background:#5b7bd5;background:-webkit-gradient(linear, center top, center bottom, from(#5b7bd5), to(#4864b1));background:-webkit-linear-gradient(#5b7bd5, #4864b1);border-color:#5874c3 #4961a8 #41599f;-webkit-box-shadow:inset 0 0 1px #607fd6}.pluginButtonLight:hover{background:-webkit-gradient(linear, center top, center bottom, from(#009bff), to(#0084ff));background:-webkit-linear-gradient(#009bff, #0084ff);-webkit-box-shadow:inset 0 0 1px #006fff}.pluginButtonPressed,.pluginButtonPressed:hover{background:#355089;background:-webkit-gradient(linear, center top, center bottom, from(#415ca9), to(#4c69ba));background:-webkit-linear-gradient(#415ca9, #4c69ba);border-color:#385490 #ddd #374f92;-webkit-box-shadow:inset 0 0 1px #3e58a3;opacity:.7}.pluginButtonPressedLight,.pluginButtonPressedLight:hover{background:-webkit-gradient(linear, center top, center bottom, from(#006fff), to(#0084ff));background:-webkit-linear-gradient(#006fff, #0084ff)}.pluginButtonErrorLink{color:#a00;font-weight:bold}.pluginButtonX .pluginButtonXOff,.pluginButtonX button:hover .pluginButtonXOn,.pluginButtonX button:focus .pluginButtonXOn{display:inline-block}.pluginButtonX .pluginButtonXOn,.pluginButtonX button:hover .pluginButtonXOff,.pluginButtonX button:focus .pluginButtonXOff{display:none}.pluginButton .pluginButtonThrobber,form.async_saving .pluginButtonIconWithThrobber{display:none}form.async_saving .pluginButtonThrobber{display:inline-block;margin-top:2px;margin-bottom:1px;max-width:14px}.sp_plugin-button{background-image:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/y1/r/LVx-xkvaJ0b.png);background-size:auto;background-repeat:no-repeat;display:inline-block;height:14px;width:14px}.sp_plugin-button.sx_plugin-button_favblue{background-position:0 -42px}.sp_plugin-button.sx_plugin-button_chblue{background-position:0 -27px}.sp_plugin-button.sx_plugin-button_xblue{background-position:-15px -27px}.sp_plugin-button.sx_plugin-button_thumb{width:13px;height:13px;background-position:-15px -57px}.sp_plugin-button.sx_plugin-button_bigthumb{width:29px;height:26px;background-position:0 0}.sp_plugin-button.sx_plugin-button_fav{background-position:-15px -42px}.sp_plugin-button.sx_plugin-button_favgrey{background-position:0 -57px}i.img{-ms-high-contrast-adjust:none;_overflow:hidden}i.img u{left:-999999px;position:absolute}._5f0v{outline:none}._3oxt{outline:1px dotted #3b5998;outline-color:invert}.webkit ._3oxt{outline:5px auto #5b9dd9}.win.webkit ._3oxt{outline-color:#e59700}._3sod{background-color:#e9eaed;border:1px solid #9daccb;-webkit-border-radius:3px;font-size:11px;margin-top:3px;opacity:0;position:relative;top:-30px;-webkit-transition:top .2s ease-in-out, opacity .3s ease-in-out}._5p3y ._3sod{font-size:12px}._5vb_ ._3sod,._6nw ._3sod{background-color:#fff;border:1px solid #ccc;-webkit-border-radius:4px;-webkit-box-shadow:0 0 4px rgba(0, 0, 0, .2);font-size:12px;margin-top:4px;-webkit-transition:top .2s ease-in-out, opacity .3s ease-in-out, -webkit-box-shadow .2s ease-in-out}._3soe{opacity:1;top:0}._3sof{display:none}._3sod:hover{background-color:#c4cde0}._5vb_ ._3sod:hover,._6nw ._3sod:hover{background-color:#fff;border:1px solid #bbb;-webkit-box-shadow:0 0 6px rgba(0, 0, 0, .4)}._3sod ._3sok{display:block;height:28px;margin-right:8px;width:28px}._3sod ._3soi,._3sod ._3soi:hover{color:#333;text-decoration:none}._3sod ._3soj{padding:10px}._3sod ._3sol{word-wrap:break-word}._3sod ._3soc{float:right;margin:8px 8px 7px 7px}._3sod ._1x8t{height:16px;width:16px}._3sod ._3som{color:#777;margin-top:5px}.uiLayer{outline:none}._1f8a{display:inline;float:left}._1f8b{float:left}._42ft{cursor:pointer;display:inline-block;text-decoration:none;white-space:nowrap}._42ft:hover{text-decoration:none}._42ft+._42ft{margin-left:4px}._42fr,._42fs{cursor:default}.textMetrics{border:none;height:1px;overflow:hidden;padding:0;position:absolute;top:-9999999px}.textMetricsInline{white-space:pre}._32qa button{opacity:.4}._59ov{height:100%;height:910px;position:relative;top:-10px;width:100%}._5ti_{background-size:cover;-webkit-filter:blur(10px);height:100%;width:100%}._5tj2{height:900px}._2mm3 ._5a8u .uiBoxGray{background:#fff;margin:0;padding:12px}</style><script>window.ServerJSQueue=(function(){var a=[],b,c;return {add:function(d){if(!b){a.push(d);}else typeof d==='function'?d():b.handle(d);},run:function(){if(!window.require)return;var d;c=window.require('ServerJSDefine');for(d=0;d<a.length;d++)if(a[d].define&&typeof a[d]!=='function'){c.handleDefines(a[d].define);delete a[d].define;}b=new (window.require('ServerJS'))();for(d=0;d<a.length;d++)typeof a[d]==='function'?a[d]():b.handle(a[d]);}};}());document.write=function(){};window.onloadRegister_DEPRECATED=function(){};window.onafterloadRegister_DEPRECATED=function(){};window.ServerJSAsyncLoader=(function(){var a=false,b=false,c={loaded:1,complete:1},d=function(){},e=document,f=false,g=false;function h(){if(e.readyState in c){e.detachEvent('onreadystatechange',h);d('t_domcontent');}}function i(){if(!g&&window._cavalry&&a&&b){d('t_layout');d('t_onload');d('t_paint');_cavalry.send();g=true;}}function j(){if(!f&&b){f=true;ServerJSQueue.run();}}function k(o,p){if('onreadystatechange' in o){o.onreadystatechange=function(){if(o.readyState in c){o.onreadystatechange=null;p();}};}else if(o.addEventListener){var q=function(){p();o.removeEventListener('load',q,false);};o.addEventListener('load',q,false);}}function l(o){var p=e.createElement("script");if(p.readyState&&p.readyState==="uninitialized"){k(p,function(){b=true;i();});p.src=o;return true;}else if(typeof XMLHttpRequest!=='undefined'){var q=new XMLHttpRequest();if("withCredentials" in q){q.onloadend=function(){b=true;i();};q.open("GET",o,true);q.send(null);return true;}}}function m(){e.onkeydown=e.onmouseover=e.onclick=onfocus=null;ServerJSAsyncLoader.execute();}function n(){if(e.body.offsetWidth===0||e.body.offsetHeight===0)m();}if(window._cavalry){d=function(o){_cavalry.log(o);};if(window.addEventListener){window.addEventListener('DOMContentLoaded',function(){d('t_domcontent');},false);}else if(e.attachEvent)e.attachEvent('onreadystatechange',h);}window.onload=function(){a=true;j();i();};return {ondemandjs:null,run:function(o){this.file=o;this.execute();},load:function(o){this.file=o;if(!l(o)){this.run(o);return;}window.onload=function(){a=true;i();n();};e.onkeydown=e.onmouseover=e.onclick=onfocus=m;},execute:function(o){var p=e.createElement('script');p.src=ServerJSAsyncLoader.file;p.async=true;k(p,function(){b=true;j();o&&o();i();});e.getElementsByTagName('head')[0].appendChild(p);},wakeUp:function(o,p,q){function r(){window.require("Arbiter").inform(o,p,q);}if(f){r();}else this.execute(r);}};})();ServerJSAsyncLoader.run("https:\/\/fbstatic-a.akamaihd.net\/rsrc.php\/v2\/yU\/r\/3fAa5rCAHDs.js");</script><script src="https://fbstatic-a.akamaihd.net/rsrc.php/v2/yU/r/3fAa5rCAHDs.js" async=""></script><script>ServerJSQueue.add({"require":[["markJSEnabled"],["lowerDomain"]]});</script></head><body dir="ltr" class="plugin webkit safari mac x1 Locale_ja_JP"><div class="_li"><div class="pluginSkinLight pluginFontHelvetica"><div><table class="uiGrid _51mz pluginShareButton" cellspacing="0" cellpadding="0" id="u_0_0"><tbody><tr class="_51mx"><td class="_51m- _51mw"><div><div class="pluginCountBox"><div class="pluginCountBoxTextOnly"><span><span class="pluginCountTextConnected">59</span><span class="pluginCountTextDisconnected">58</span></span></div></div><div class="pluginCountBoxNub"><s></s><i></i></div></div></td></tr><tr class="_51mx"><td class="_51m- _51mw"><a class="pluginShareButtonLink" href="/sharer/sharer.php?app_id=719729204785177&amp;sdk=joey&amp;u=http%3A%2F%2Fwww.welluneednt.com%2Fentry%2F2015%2F03%2F24%2F113000&amp;display=popup&amp;ref=plugin&amp;src=share_button" target="_blank" id="u_0_1"><div class="pluginButton"><div><div class="pluginButtonContainer"><div class="pluginButtonImage"><button type="submit" title="ã‚·ã‚§ã‚¢"><i class="pluginButtonIcon img sp_plugin-button sx_plugin-button_favblue"></i></button></div><span class="pluginButtonLabel">ã‚·ã‚§ã‚¢</span></div></div></div></a></td></tr></tbody></table><script>(function(width, height, id, callback, origin, domain) { if(id){var e=document.getElementById(id);if(width!==-1){e.style.width=width+'px';}else{width=e.offsetWidth;if(window.getComputedStyle){var computed=getComputedStyle(e);if(computed)width=Math.ceil(parseFloat(computed.width))||e.offsetWidth;}}if(height===-1)height=e.offsetHeight;}var message='type=resize&cb='+callback+'&width='+width+'&height='+height;; document.domain='facebook.com';(function(){var a=window.opener||window.parent,b='fb_xdm_frame_'+location.protocol.replace(':','');function c(){try{a.frames[b].proxyMessage(message,origin);}catch(e){setTimeout(c,100);}}function d(){__fbNative.postMessage(message,origin);}if(window==top&&/FBAN\/\w+;/i.test(navigator.userAgent)){if(window.__fbNative&&__fbNative.postMessage){d();}else window.addEventListener('fbNativeReady',d);}else c();})();; })(-1, -1, "u_0_0", "f2dfdb92c8", "http:\/\/www.welluneednt.com", "www.welluneednt.com");</script></div></div></div><script>function envFlush(a){function b(c){for(var d in a)c[d]=a[d];}if(window.requireLazy){window.requireLazy(['Env'],b);}else{window.Env=window.Env||{};b(window.Env);}}envFlush({"ajaxpipe_token":"AXi1ip22RshYyB_-","lhsh":"sAQES4QFw"});</script><script>ServerJSQueue.add(function(){requireLazy(["Bootloader"], function(Bootloader) {Bootloader.enableBootload({"React":{"resources":[],"module":true},"ExceptionDialog":{"resources":[],"module":true},"AsyncDOM":{"resources":[],"module":true},"QuickSandSolver":{"resources":[],"module":true},"ConfirmationDialog":{"resources":[],"module":true},"Dialog":{"resources":[],"module":true},"ErrorSignal":{"resources":[],"module":true}});});});</script><script>ServerJSQueue.add({"elements":[["m_0_0","u_0_1",2]],"define":[["CSSLoaderConfig",[],{"timeout":5000},619],["TrackingConfig",[],{"domain":"https:\/\/pixel.facebook.com"},325],["CurrentCommunityInitialData",[],{},490],["CurrentUserInitialData",[],{"USER_ID":"1751523762","ACCOUNT_ID":"1751523762"},270],["DTSGInitialData",[],{"token":"AQEM7ckC8QW-"},258],["ISB",[],{},330],["LSD",[],{},323],["SiteData",[],{"revision":1717240,"tier":"","push_phase":"V3","pkg_cohort":"EXP1:DEFAULT","vip":"2a03:2880:f00f:1:face:b00c:0:1"},317],["UserAgentData",[],{"browserArchitecture":"32","browserFullVersion":"8.0.5","browserMinorVersion":0,"browserName":"Safari","browserVersion":8,"deviceName":"Unknown","engineName":"WebKit","engineVersion":"600.5.17","platformArchitecture":"32","platformName":"Mac OS X","platformVersion":"10.10","platformFullVersion":"10.10.3"},527],["BanzaiConfig",[],{"EXPIRY":86400000,"MAX_SIZE":10000,"MAX_WAIT":150000,"RESTORE_WAIT":150000,"blacklist":["time_spent"],"gks":{"boosted_pagelikes":true,"boosted_posts":true,"boosted_website":true,"jslogger":true,"mercury_send_error_logging":true,"miny_compression":true,"pages_client_logging":true,"time_spent_bit_array":true,"useraction":true,"videos":true,"visibility_tracking":true,"vitals":true,"allow_userid_mismatch":true}},7],["ModulePerformanceGating",[],{"bootload_share_dialog":true,"bootload_page_voice_dropdown":true,"js_module_defer_banzai_restoration":true,"js_module_defer_blob_creation":false,"js_module_kill_legacy_tooltip":false,"js_module_defer_channel_manager_start":true,"js_module_defer_left_nav_section_bookmarks":false},793],["AsyncRequestConfig",[],{"retryOnNetworkError":"1"},328],["CoreWarningGK",[],{"forceWarning":false},725],["FbtNumber",["IntlNoVariationsNumberType"],{"impl":{"__m":"IntlNoVariationsNumberType"}},605],["IntlViewerContext",[],{"GENDER":33554432},772],["FbtLogger",[],{"logger":null},288],["FbtQTOverrides",[],{"overrides":{"1_38c17176325b7268c0db283c2400746f":"{name}\u3055\u3093\u304b\u3089\u306e\u53cb\u9054\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u78ba\u8a8d\u304f\u3060\u3055\u3044","1_48523d9a807f5fdd6625abc49fcf4a98":"Facebook\u3067\u3059\u3002\u3042\u306a\u305f\u306e\u53cb\u9054\u304c\u305f\u304f\u3055\u3093\u5f85\u3063\u3066\u307e\u3059\uff01","1_539bf175108659676097349f8b511a1d":"Donate to International Medical Corps now and Facebook will match your donation.","1_d1c1f6116da4d8f993a151fda3072cb5":"Donate to International Medical Corps today and join us in supporting relief efforts","1_6f7acce98bbf4cfdac77ebf5b9bad304":"100\u0025 of your donation will go to {=International Medical Corps} and their work in response to the Nepal earthquake. Facebook will also donate $2 million to local relief efforts.","1_8b130114c0a07a35b47bebd218149f60":"Support earthquake relief efforts","1_65c3391ebe4a1af8364ca4fbb8cb54d1":"\u30e1\u30fc\u30eb\u307e\u305f\u306f\u643a\u5e2f\u756a\u53f7:","1_8d7e2c77c3375ec57db92d101f139964":"Donate to International Medical Corps now and support earthquake relief efforts.","1_7f4544e8b470254c2ad2dccdb6d9462b":"{name}\u3055\u3093\u304c\u3042\u306a\u305f\u306b\u65b0\u3057\u3044\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u9001\u308a\u307e\u3057\u305f","1_86aa4c837d71679b06564177c9191e52":"\u3053\u3093\u306b\u3061\u306fFacebook\u3067\u3059\u3002{name1}\u3055\u3093\u3001{name2}\u3055\u3093\u3001{name3}\u3055\u3093\u3068\u77e5\u308a\u5408\u3044\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u304b\uff1f","1_8a5c5506929c23be8a2fca6105af0846":"{user}\u3055\u3093\u304c\u4f55\u3057\u3066\u3044\u308b\u304b\u30c1\u30a7\u30c3\u30af\u3057\u3088\u3046\uff01","1_9ade545a65a33e437649876ff37264de":"{name}\u3055\u3093\u304c\u65b0\u3057\u3044{photo}\u3092\u30a2\u30eb\u30d0\u30e0\u300c{photo-album}\u300d\u306b\u8ffd\u52a0\u3057\u307e\u3057\u305f"}},551],["ErrorSignalConfig",[],{"uri":"https:\/\/error.facebook.com\/common\/scribe_endpoint.php"},319]],"require":[["UnverifiedXD","setChannelUrl",[],["http:\/\/static.ak.facebook.com\/connect\/xd_arbiter\/6p3So0GhyQP.js?version=41#cb=f2dfdb92c8&domain=www.welluneednt.com&origin=http\u00253A\u00252F\u00252Fwww.welluneednt.com\u00252Ff861ec9c&relation=parent.parent"]],["PluginXDReady"],["PluginReturn","syncPlugins",[],[]],["PopupLink","listen",["m_0_0"],[{"__m":"m_0_0"},670,340]],["AsyncSignal"],["Artillery"]]});</script></body></html>¡^Õ	'_`ab_?https://fbstatic-a.akamaihd.net/rsrc.php/v2/yU/r/3fAa5rCAHDs.jsO°bplist00Ôz{X$versionX$objectsY$archiverT$top † ¯(#)*0123UVWXYZ[\]^_`abcdefghijklmnopstuU$nullİ	
 !"R$6S$10R$2R$7R$3S$11R$8V$classR$4R$9R$0R$5R$1€	€€€%€'€€&€Ó$%&'(WNS.base[NS.relative€ €€_?https://fbstatic-a.akamaihd.net/rsrc.php/v2/yU/r/3fAa5rCAHDs.jsÒ+,-.Z$classnameX$classesUNSURL¢-/XNSObject#AºôÒ<)™g ÈÓ456ETWNS.keysZNS.objects®789:;<=>?@ABCD€	€
€€€€€€€€€€€€®FGHIJKFMNOPQRS€€€€€€€€€€€ €!€"€#€$_Access-Control-Allow-Origin\Content-TypeZx-fb-debug_Content-Encoding[content-md5WExpires_timing-allow-origin]Cache-ControlTDate^Content-LengthZConnection_x-content-type-optionsTVary]Last-ModifiedQ*_'application/x-javascript; charset=utf-8_XCWEMxvFNQPY+oMVcj6voeWiDXGcgX+oqyoUPLhO5wIQwAfhtri11v9flOMCZTp442V0eZkd8WcYrrNG3L42LJQ==Tgzip_2mdoCbSr9AyLeFZ2FDKDAw==_Wed, 27 Apr 2016 14:26:24 GMT_public, max-age=31207764_Sat, 02 May 2015 09:37:00 GMTU76534Zkeep-aliveWnosniff_Accept-Encoding_Mon, 01 Jan 2001 08:00:00 GMTÒ+,qr\NSDictionary¢q/ÿÿÿÿÿÿÿÿ_application/x-javascriptÒ+,vw_NSHTTPURLResponse£xy/_NSHTTPURLResponse]NSURLResponse_NSKeyedArchiverÑ|}_WebResourceResponse€    # - 2 7 b h ƒ † Š   “ — š ¡ ¤ § ª ­ ° ² ´ ¶ ¸ º » ½ ¿ Á Ã Å Ç É Ğ Ø ä æ è ê,1<EKNW`bdks~‘“•—™›Ÿ¡£¥§©¸º¼¾ÀÂÄÆÈÊÌÎĞÒÔÖô+3IW\kv”¢¤Î).Ii„¤ªµ½Ïïô(-AEYgy|’             ~              ”O q/*!CK:1177457129!*//*1430231162,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["Z3urS"]); }

if(!Array.from)Array.from=function(a){if(a==null)throw new TypeError('Object is null or undefined');var b=arguments[1],c=arguments[2],d=this,e=Object(a),f=typeof Symbol==='function'?Symbol.iterator:'@@iterator',g=typeof b==='function',h=typeof e[f]==='function',i=0,j,k;if(h){j=typeof d==='function'?new d():[];var l=e[f](),m;while(!(m=l.next()).done){k=m.value;if(g)k=b.call(c,k,i);j[i]=k;i+=1;}j.length=i;return j;}var n=e.length;if(isNaN(n)||n<0)n=0;j=typeof d==='function'?new d(n):new Array(n);while(i<n){k=e[i];if(g)k=b.call(c,k,i);j[i]=k;i+=1;}j.length=i;return j;};

self.__DEV__=self.__DEV__||0;
(function(a){function b(c,d){if(this==null)throw new TypeError('Array.prototype.findIndex called on null or undefined');if(typeof c!=='function')throw new TypeError('predicate must be a function');var e=Object(this),f=e.length>>>0;for(var g=0;g<f;g++)if(c.call(d,e[g],g,e))return g;return -1;}if(!Array.prototype.findIndex)Array.prototype.findIndex=b;if(!Array.prototype.find)Array.prototype.find=function(c,d){if(this==null)throw new TypeError('Array.prototype.find called on null or undefined');var e=b.call(this,c,d);return e===-1?a:this[e];};})();





(function(){var a=function(e,f){if(!e&&!f)return null;var g={};if(typeof e!=='undefined')g.type=e;if(typeof f!=='undefined')g.signature=f;return g;},b=function(e,f){return a(e&&/^[A-Z]/.test(e)?e:(void 0),f&&((f.params&&f.params.length)||f.returns)?'function('+(f.params?f.params.map(function(g){return (/\?/).test(g)?'?'+g.replace('?',''):g;}).join(','):'')+')'+(f.returns?':'+f.returns:''):(void 0));},c=function(e,f,g){if(typeof __transform_includes==='undefined')return e;if('sourcemeta' in __transform_includes)e.__SMmeta=f;if('typechecks' in __transform_includes){var h=b(f?f.name:(void 0),g);if(h)__w(e,h);}return e;},d=function(e,f,g,h){if(typeof __transform_includes==='undefined')return g.apply(e,f);var i='typechecks' in __transform_includes;if(i&&h&&h.params)__t.apply(e,h.params);var j=g.apply(e,f);if(i&&h&&h.returns)__t([j,h.returns]);return j;};__annotator=c;__bodyWrapper=d;})();

if(JSON.stringify(["\u2028\u2029"])==='["\u2028\u2029"]')JSON.stringify=function(a){var b=/\u2028/g,c=/\u2029/g;return function(d,e,f){var g=a.call(this,d,e,f);if(g){if(-1<g.indexOf('\u2028'))g=g.replace(b,'\\u2028');if(-1<g.indexOf('\u2029'))g=g.replace(c,'\\u2029');}return g;};}(JSON.stringify);
if(typeof Math.log2!=='function')Math.log2=function(a){return Math.log(a)/Math.LN2;};if(typeof Math.log10!=='function')Math.log10=function(a){return Math.log(a)/Math.LN10;};
if(typeof Number.isFinite!=='function')Number.isFinite=function(a){return (typeof a==='number')&&isFinite(a);};if(typeof Number.isNaN!=='function')Number.isNaN=function(a){return (typeof a==='number')&&isNaN(a);};if(typeof Number.EPSILON!=='number')Number.EPSILON=Math.pow(2,-52);if(typeof Number.MAX_SAFE_INTEGER!=='number')Number.MAX_SAFE_INTEGER=Math.pow(2,53)-1;if(typeof Number.MIN_SAFE_INTEGER!=='number')Number.MIN_SAFE_INTEGER=-1*Number.MAX_SAFE_INTEGER;if(typeof Number.isSafeInteger!=='function')Number.isSafeInteger=function(a){return Number.isFinite(a)&&a>=Number.MIN_SAFE_INTEGER&&a<=Number.MAX_SAFE_INTEGER&&Math.floor(a)===a;};



(function(){if(Object.assign)return;var a=Object.prototype.hasOwnProperty,b;if(Object.keys&&Object.keys.name!=='object_keys_polyfill'){b=function(c,d){var e=Object.keys(d);for(var f=0;f<e.length;f++)c[e[f]]=d[e[f]];};}else b=function(c,d){for(var e in d)if(a.call(d,e))c[e]=d[e];};Object.assign=function(c,d){if(c==null)throw new TypeError('Object.assign target cannot be null or undefined');var e=Object(c);for(var f=1;f<arguments.length;f++){var g=arguments[f];if(g!=null)b(e,Object(g));}return e;};}());

(function(a){a.__m=function(b,c){b.__SMmeta=c;return b;};})(this);
if(!String.prototype.startsWith)String.prototype.startsWith=function(a){"use strict";if(this==null)throw TypeError();var b=String(this),c=arguments.length>1?(Number(arguments[1])||0):0,d=Math.min(Math.max(c,0),b.length);return b.indexOf(String(a),c)==d;};if(!String.prototype.endsWith)String.prototype.endsWith=function(a){"use strict";if(this==null)throw TypeError();var b=String(this),c=b.length,d=String(a),e=arguments.length>1?(Number(arguments[1])||0):c,f=Math.min(Math.max(e,0),c),g=f-d.length;if(g<0)return false;return b.lastIndexOf(d,g)==g;};if(!String.prototype.contains)String.prototype.contains=function(a){"use strict";if(this==null)throw TypeError();var b=String(this),c=arguments.length>1?(Number(arguments[1])||0):0;return b.indexOf(String(a),c)!=-1;};if(!String.prototype.repeat)String.prototype.repeat=function(a){"use strict";if(this==null)throw TypeError();var b=String(this);a=Number(a)||0;if(a<0||a===Infinity)throw RangeError();if(a===1)return b;var c='';while(a){if(a&1)c+=b;if((a>>=1))b+=b;}return c;};


__t=function(a){return a[0];};__w=function(a){return a;};

(function(a){if(a.require)return;var b={},c={},d={},e={},f=0,g=1,h=2,i=4,j=Object.prototype.hasOwnProperty,k=Object.prototype.toString;function l(ga){var ha=Array.prototype.slice.call(ga),ia={},ja,ka,la,ma;while(ha.length){ka=ha.shift();if(ia[ka])continue;ia[ka]=true;la=b[ka];if(!la||!la.waiting)continue;for(ja=0;ja<la.dependencies.length;ja++){ma=la.dependencies[ja];if(!b[ma]||b[ma].waiting)ha.push(ma);}}for(ka in ia)if(j.call(ia,ka))ha.push(ka);var na=[];for(ja=0;ja<ha.length;ja++){ka=ha[ja];var oa=ka;la=b[ka];if(!la){oa+=' is not defined';}else if(!la.waiting){oa+=' is ready';}else{var pa=[];for(var qa=0;qa<la.dependencies.length;qa++){ma=la.dependencies[qa];if(!b[ma]||b[ma].waiting)pa.push(ma);}oa+=' is waiting for '+pa.join(', ');}na.push(oa);}return na.join('\n');}function m(ga){this.name='ModuleError';this.message=ga;this.stack=Error(ga).stack;this.framesToPop=2;}m.prototype=Object.create(Error.prototype);m.prototype.constructor=m;var n,o;n=o=Date.now.bind(Date);var p=a.performance||a.msPerformance||a.webkitPerformance||{};if(p.now){n=p.now.bind(p);var q=p.timing&&p.timing.navigationStart;if(q)o=function(){return n()+q;};}var r=[0],s=[],t=0,u=0;function v(ga){u++;var ha=b[ga];if(ha&&ha.exports!=null){if(ha.refcount--===1)delete b[ga];return ha.exports;}return w(ga);}function w(ga){if(a.ErrorUtils&&!a.ErrorUtils.inGuard())return ErrorUtils.applyWithGuard(w,null,[ga]);var ha=b[ga];if(!ha){var ia='Requiring unknown module "'+ga+'"';throw new m(ia);}if(ha.hasError)throw new m('Requiring module "'+ga+'" which threw an exception');if(ha.waiting)throw new m('Requiring module "'+ga+'" with unresolved dependencies: '+l([ga]));var ja=ha.exports={},ka=ha.factory;if(k.call(ka)==='[object Function]'){var la=ha.dependencies,ma=la.length,na;if(ha.special&h)ma=Math.min(ma,ka.length);try{ea(ha,[]);var pa=[];for(var qa=0;pa.length<ma;qa++){var ra=la[qa];if(!ha.inlineRequires[ra])pa.push(ra==='module'?ha:(ra==='exports'?ja:v.call(null,ra)));}++t;r.push(0);s.push(NaN);var sa=o();try{na=ka.apply(ha.context||a,pa);}catch(oa){if(b.ex&&b.erx){var ta=v.call(null,'ex'),ua=v.call(null,'erx'),va=ua(oa.message);if(va[0].indexOf(' from module "%s"')<0){va[0]+=' from module "%s"';va[va.length]=ga;}oa.message=ta.apply(null,va);}throw oa;}finally{var wa=o(),xa=wa-sa,ya=xa-r.pop(),za=s.pop();r[r.length-1]+=xa;var ab=c[ha.id];ab.factoryTime=ya;ab.factoryEnd=wa;if(!isNaN(za)){ab.compileTime=za-sa;ab.factoryTime-=ab.compileTime;ab.compileEnd=za;}if(ka.__SMmeta)for(var bb in ka.__SMmeta)if(ka.__SMmeta.hasOwnProperty(bb))ab[bb]=ka.__SMmeta[bb];}}catch(oa){ha.hasError=true;ha.exports=null;throw oa;}if(na)ha.exports=na;}else ha.exports=ka;if(ha.refcount--===1)delete b[ga];return ha.exports;}v.__markCompiled=function(){s[s.length-1]=o();};v.__getFactoryTime=function(){var ga=0;for(var ha in c)if(c.hasOwnProperty(ha))ga+=c[ha].factoryTime;return ga;};v.__getCompileTime=function(){var ga=0;for(var ha in c)if(c.hasOwnProperty(ha))ga+=c[ha].compileTime;return ga;};v.__getTotalFactories=function(){return t;};v.__getTotalRequireCalls=function(){return u;};v.__getModuleTimeDetails=function(){var ga={};for(var ha in c)if(c.hasOwnProperty(ha))ga[ha]=c[ha];return ga;};function x(ga,ha,ia,ja,ka,la,ma){if(a.TimeSlice&&!a.TimeSlice.inGuard())return a.TimeSlice.guard(function(){x(ga,ha,ia,ja,ka,la,ma);},'define '+ga)();if(ha===(void 0)){ha=[];ia=ga;ga=ba();}else if(ia===(void 0)){ia=ha;if(k.call(ga)==='[object Array]'){ha=ga;ga=ba();}else ha=[];}var na={cancel:z.bind(this,ga)},oa=b[ga];if(oa){if(la)oa.refcount+=la;return na;}else if(!ha&&!ia&&la){e[ga]=(e[ga]||0)+la;return na;}var pa=(e[ga]||0)+(la||0);delete e[ga];oa=new y(ga,pa,null,ia,ha,ka,ja,ma||{});b[ga]=oa;c[ga]={id:ga,compileTime:null,factoryTime:null,compileEnd:null,factoryEnd:null};da(ga);return na;}function y(ga,ha,ia,ja,ka,la,ma,na){this.id=ga;this.refcount=ha;this.exports=ia||null;this.factory=ja;this.dependencies=ka;this.context=la;this.special=ma||0;this.inlineRequires=na;this.waitingMap={};this.waiting=0;this.hasError=false;this.ranRecursiveSideEffects=false;}function z(ga){if(!b[ga])return;var ha=b[ga];delete b[ga];for(var ia in ha.waitingMap)if(ha.waitingMap[ia])delete d[ia][ga];for(var ja=0;ja<ha.dependencies.length;ja++){ia=ha.dependencies[ja];if(b[ia]){if(b[ia].refcount--===1)z(ia);}else if(e[ia])e[ia]--;}}function aa(ga,ha,ia){return x(ga,ha,(void 0),g,ia,1);}function ba(){return '__mod__'+f++;}function ca(ga,ha){if(!ga.waitingMap[ha]&&ga.id!==ha){ga.waiting++;ga.waitingMap[ha]=1;d[ha]||(d[ha]={});d[ha][ga.id]=1;}}function da(ga){var ha=[],ia=b[ga],ja,ka,la;for(ka=0;ka<ia.dependencies.length;ka++){ja=ia.dependencies[ka];if(!b[ja]){ca(ia,ja);}else if(b[ja].waiting)for(la in b[ja].waitingMap)if(b[ja].waitingMap[la])ca(ia,la);}if(ia.waiting===0&&ia.special&g)ha.push(ga);if(d[ga]){var ma=d[ga],na;d[ga]=(void 0);for(ja in ma){na=b[ja];for(la in ia.waitingMap)if(ia.waitingMap[la])ca(na,la);if(na.waitingMap[ga]){na.waitingMap[ga]=0;na.waiting--;}if(na.waiting===0&&na.special&g)ha.push(ja);}}for(ka=0;ka<ha.length;ka++)v.call(null,ha[ka]);}function ea(ga,ha){if(ga.ranRecursiveSideEffects)return;ha.push(ga.id);var ia=ga.dependencies;if(ia)for(var ja=0;ja<ia.length;ja++){var ka=ia[ja];if(ha.indexOf(ka)!==-1)continue;var la=b[ka];if(la.ranRecursiveSideEffects)continue;ea(la,ha);if(la.special&i)v.call(null,ka);}ga.ranRecursiveSideEffects=true;ha.pop();}function fa(ga,ha){b[ga]=new y(ga,0,ha);c[ga]={id:ga,compileTime:null,factoryTime:null,compileEnd:null,factoryEnd:null};}fa('module',0);fa('exports',0);fa('define',x);fa('global',a);fa('require',v);fa('requireDynamic',v);fa('requireLazy',aa);x.amd={};a.define=x;a.require=v;a.requireDynamic=v;a.requireLazy=aa;v.__debug={modules:b,deps:d,printDependencyInfo:function(){if(!a.console)return;var ga=Object.keys(v.__debug.deps);a.console.log(l(ga));}};a.__d=function(ga,ha,ia,ja,ka){var la=['global','require','requireDynamic','requireLazy','module','exports'];x(ga,la.concat(ha),ia,ja||h,null,null,ka);};})(this);
__d("CookieCore",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g=/^.*(\.(facebook|messenger)\..*)$/i,h={set:function(i,j,k,l,m){document.cookie=i+"="+encodeURIComponent(j)+"; "+(k?"expires="+(new Date(Date.now()+k)).toGMTString()+"; ":"")+"path="+(l||'/')+"; domain="+window.location.hostname.replace(g,'$1')+(m?"; secure":"");},clear:function(i,j){j=j||'/';document.cookie=i+"=; expires=Thu, 01-Jan-1970 00:00:01 GMT; "+"path="+j+"; domain="+window.location.hostname.replace(g,'$1');},get:function(i){var j=document.cookie.match('(?:^|;\\s*)'+i+'=(.*?)(?:;|$)');return (j?decodeURIComponent(j[1]):j);}};e.exports=h;},null);
__d("copyProperties",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h,i,j,k,l,m,n){h=h||{};var o=[i,j,k,l,m],p=0,q;while(o[p]){q=o[p++];for(var r in q)h[r]=q[r];if(q.hasOwnProperty&&q.hasOwnProperty('toString')&&(typeof q.toString!='undefined')&&(h.toString!==q.toString))h.toString=q.toString;}return h;}e.exports=g;},null);
__d("Env",["copyProperties"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={start:Date.now()};if(a.Env){g(h,a.Env);a.Env=(void 0);}e.exports=h;},null);
__d("Cookie",["CookieCore","Env","copyProperties"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();function j(l,m,n,o,p){if(h.no_cookies&&l!='tpa')return;g.set(l,m,n,o,p);}var k=i({},g);k.set=j;e.exports=k;},null);
__d("eprintf",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g=function(h){var i=Array.prototype.slice.call(arguments).map(function(l){return String(l);}),j=h.split('%s').length-1;if(j!==i.length-1)return g('eprintf args number mismatch: %s',JSON.stringify(i));var k=1;return h.replace(/%s/g,function(l){return String(i[k++]);});};e.exports=g;},null);
__d("ex",["eprintf"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=function(){for(var i=[],j=0,k=arguments.length;j<k;j++)i.push(arguments[j]);i=i.map(function(l){return String(l);});if(i[0].split('%s').length!==i.length)return h('ex args number mismatch: %s',JSON.stringify(i));return h._prefix+JSON.stringify(i)+h._suffix;};h._prefix='<![EX[';h._suffix=']]>';e.exports=h;},null);
__d("erx",["ex"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=function(i){if(typeof i!=='string')return i;var j=i.indexOf(g._prefix),k=i.lastIndexOf(g._suffix);if(j<0||k<0)return [i];var l=j+g._prefix.length,m=k+g._suffix.length;if(l>=k)return ['erx slice failure: %s',i];var n=i.substring(0,j),o=i.substring(m);i=i.substring(l,k);var p;try{p=JSON.parse(i);p[0]=n+p[0]+o;}catch(q){return ['erx parse failure: %s',i];}return p;};e.exports=h;},null);
__d("ErrorUtils",["Env","eprintf","erx"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j={},k='<anonymous guard>',l='<generated guard>',m='<window.onerror>',n=/^https?:\/\//i,o=/^Type Mismatch for/,p=['Unknown script code','Function code','eval code'],q=new RegExp('(.*?)(\\s)(?:'+p.join('|')+')$'),r=[],s,t=[],u=50,v=[],w=false,x=false,y=j.nocatch||(/nocatch/).test(location.search);function z(la){if(!la)return [];var ma=la.split(/\n\n/)[0].replace(/[\(\)]|\[.*?\]|^\w+:\s.*?\n/g,'').split('\n').map(function(na){var oa,pa,qa;na=na.trim();if(/(:(\d+)(:(\d+))?)$/.test(na)){pa=RegExp.$2;qa=RegExp.$4;na=na.slice(0,-RegExp.$1.length);}if(q.test(na)||/(.*)(@|\s)[^\s]+$/.test(na)){na=na.substring(RegExp.$1.length+1);oa=/(at)?\s*(.*)([^\s]+|$)/.test(RegExp.$1)?RegExp.$2:'';}var ra={identifier:oa,script:na,line:pa,column:qa};if(s)s(ra);ra.text='    at'+(ra.identifier?' '+ra.identifier+' (':' ')+ra.script+(ra.line?':'+ra.line:'')+(ra.column?':'+ra.column:'')+(ra.identifier?')':'');return ra;});return ma;}function aa(la){if(!la){return {};}else if(la._originalError)return la;var ma=z(la.stackTrace||la.stack),na=false;if(la.framesToPop){var oa=la.framesToPop,pa;while(oa>0&&ma.length>0){pa=ma.shift();oa--;na=true;}if(o.test(la.message)&&la.framesToPop===2&&pa)if(n.test(pa.script))la.message+=' at '+pa.script+(pa.line?':'+pa.line:'')+(pa.column?':'+pa.column:'');delete la.framesToPop;}var qa={line:la.lineNumber||la.line,column:la.columnNumber||la.column,name:la.name,message:la.message,messageWithParams:la.messageWithParams,type:la.type,script:la.fileName||la.sourceURL||la.script,stack:ma.map(function(sa){return sa.text;}).join('\n'),stackFrames:ma,guard:la.guard,guardList:la.guardList,extra:la.extra,snapshot:la.snapshot};if(typeof qa.message==='string'&&!qa.messageWithParams){qa.messageWithParams=i(qa.message);qa.message=h.apply(a,qa.messageWithParams);}else{qa.messageObject=qa.message;qa.message=String(qa.message);}if(s)s(qa);if(na){delete qa.script;delete qa.line;delete qa.column;}if(ma[0]){qa.script=qa.script||ma[0].script;qa.line=qa.line||ma[0].line;qa.column=qa.column||ma[0].column;}qa._originalError=la;for(var ra in qa)(qa[ra]==null&&delete qa[ra]);return qa;}function ba(la,ma){if(x)return false;if(v.length>0){la.guard=la.guard||v[0];la.guardList=v.slice();}la=aa(la);!ma;if(t.length>u)t.splice(u/2,1);t.push(la);x=true;for(var na=0;na<r.length;na++)try{r[na](la);}catch(oa){}x=false;return true;}function ca(){return w;}function da(la){v.unshift(la);w=true;}function ea(){v.shift();w=(v.length!==0);}function fa(la,ma,na,oa,pa){da(pa||k);var qa;if(g.nocatch)y=true;if(y){try{qa=la.apply(ma,na||[]);}finally{ea();}return qa;}try{qa=la.apply(ma,na||[]);return qa;}catch(ra){var sa=aa(ra);if(oa)oa(sa);if(la)sa.callee=la.toString().substring(0,100);if(na)sa.args=Array.prototype.slice.call(na).toString().substring(0,100);sa.guard=v[0];sa.guardList=v.slice();ba(sa);}finally{ea();}}function ga(la,ma,na){ma=ma||la.name||l;function oa(){return fa(la,na||this,arguments,null,ma);}if(la.__SMmeta)oa.__SMmeta=la.__SMmeta;return oa;}function ha(la,ma,na,oa,pa){pa=pa||{};pa.message=pa.message||la;pa.script=pa.script||ma;pa.line=pa.line||na;pa.column=pa.column||oa;pa.guard=m;pa.guardList=[m];ba(pa,true);}window.onerror=ha;function ia(la,ma){r.push(la);if(!ma)t.forEach(la);}function ja(la){s=la;}var ka={ANONYMOUS_GUARD_TAG:k,GENERATED_GUARD_TAG:l,GLOBAL_ERROR_HANDLER_TAG:m,addListener:ia,setSourceResolver:ja,applyWithGuard:fa,guard:ga,history:t,inGuard:ca,normalizeError:aa,onerror:ha,reportError:ba};e.exports=a.ErrorUtils=ka;if(typeof __t==='function'&&__t.setHandler)__t.setHandler(ba);},6);
__d("CallbackDependencyManager",["ErrorUtils"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(){"use strict";this.$CallbackDependencyManager0={};this.$CallbackDependencyManager1={};this.$CallbackDependencyManager2=1;this.$CallbackDependencyManager3={};}h.prototype.$CallbackDependencyManager4=function(i,j){"use strict";var k=0,l={};for(var m=0,n=j.length;m<n;m++)l[j[m]]=1;for(var o in l){if(this.$CallbackDependencyManager3[o])continue;k++;if(this.$CallbackDependencyManager0[o]===(void 0))this.$CallbackDependencyManager0[o]={};this.$CallbackDependencyManager0[o][i]=(this.$CallbackDependencyManager0[o][i]||0)+1;}return k;};h.prototype.$CallbackDependencyManager5=function(i){"use strict";if(!this.$CallbackDependencyManager0[i])return;for(var j in this.$CallbackDependencyManager0[i]){this.$CallbackDependencyManager0[i][j]--;if(this.$CallbackDependencyManager0[i][j]<=0)delete this.$CallbackDependencyManager0[i][j];this.$CallbackDependencyManager1[j].$CallbackDependencyManager6--;if(this.$CallbackDependencyManager1[j].$CallbackDependencyManager6<=0){var k=this.$CallbackDependencyManager1[j].$CallbackDependencyManager7;delete this.$CallbackDependencyManager1[j];g.applyWithGuard(k);}}};h.prototype.addDependenciesToExistingCallback=function(i,j){"use strict";if(!this.$CallbackDependencyManager1[i])return null;var k=this.$CallbackDependencyManager4(i,j);this.$CallbackDependencyManager1[i].$CallbackDependencyManager6+=k;return i;};h.prototype.isPersistentDependencySatisfied=function(i){"use strict";return !!this.$CallbackDependencyManager3[i];};h.prototype.satisfyPersistentDependency=function(i){"use strict";this.$CallbackDependencyManager3[i]=1;this.$CallbackDependencyManager5(i);};h.prototype.satisfyNonPersistentDependency=function(i){"use strict";var j=this.$CallbackDependencyManager3[i]===1;if(!j)this.$CallbackDependencyManager3[i]=1;this.$CallbackDependencyManager5(i);if(!j)delete this.$CallbackDependencyManager3[i];};h.prototype.registerCallback=function(i,j){"use strict";var k=this.$CallbackDependencyManager2;this.$CallbackDependencyManager2++;var l=this.$CallbackDependencyManager4(k,j);if(l===0){g.applyWithGuard(i);return null;}this.$CallbackDependencyManager1[k]={$CallbackDependencyManager7:i,$CallbackDependencyManager6:l};return k;};h.prototype.unsatisfyPersistentDependency=function(i){"use strict";delete this.$CallbackDependencyManager3[i];};e.exports=h;},null);
__d("EventSubscription",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();'use strict';function g(h){this.subscriber=h;}g.prototype.remove=function(){this.subscriber.removeSubscription(this);};e.exports=g;},null);
__d("EmitterSubscription",["EventSubscription"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';for(var h in g)if(g.hasOwnProperty(h))j[h]=g[h];var i=g===null?null:g.prototype;j.prototype=Object.create(i);j.prototype.constructor=j;j.__superConstructor__=g;function j(k,l,m){g.call(this,k);this.listener=l;this.context=m;}e.exports=j;},null);
__d("sprintf",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h){for(var i=[],j=1,k=arguments.length;j<k;j++)i.push(arguments[j]);var l=0;return h.replace(/%s/g,function(m){return i[l++];});}e.exports=g;},null);
__d("invariant",["ex","sprintf"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';var i=g,j=function(k,l){if(!k){var m;if(l===(void 0)){m=new Error('Minified exception occurred; use the non-minified dev environment '+'for the full error message and additional helpful warnings.');}else{var n=['Invariant Violation: '+l];for(var o=2,p=arguments.length;o<p;o++)n.push(arguments[o]);m=new Error(i.apply(null,n));m.messageWithParams=n;}m.framesToPop=1;throw m;}};e.exports=j;},null);
__d("EventSubscriptionVendor",["invariant"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';function h(){this.$EventSubscriptionVendor0={};this.$EventSubscriptionVendor1=null;}h.prototype.addSubscription=function(i,j){g(j.subscriber===this);if(!this.$EventSubscriptionVendor0[i])this.$EventSubscriptionVendor0[i]=[];var k=this.$EventSubscriptionVendor0[i].length;this.$EventSubscriptionVendor0[i].push(j);j.eventType=i;j.key=k;return j;};h.prototype.removeAllSubscriptions=function(i){if(i===(void 0)){this.$EventSubscriptionVendor0={};}else delete this.$EventSubscriptionVendor0[i];};h.prototype.removeSubscription=function(i){var j=i.eventType,k=i.key,l=this.$EventSubscriptionVendor0[j];if(l)delete l[k];};h.prototype.getSubscriptionsForType=function(i){return this.$EventSubscriptionVendor0[i];};e.exports=h;},null);
__d("emptyFunction",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(i){return function(){return i;};}function h(){}h.thatReturns=g;h.thatReturnsFalse=g(false);h.thatReturnsTrue=g(true);h.thatReturnsNull=g(null);h.thatReturnsThis=function(){return this;};h.thatReturnsArgument=function(i){return i;};e.exports=h;},null);
__d("ExecutionEnvironment",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();'use strict';var g=!!(typeof window!=='undefined'&&window.document&&window.document.createElement),h={canUseDOM:g,canUseWorkers:typeof Worker!=='undefined',canUseEventListeners:g&&!!(window.addEventListener||window.attachEvent),canUseViewport:g&&!!window.screen,isInWorker:!g};e.exports=h;},null);
__d("performance",["ExecutionEnvironment"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';var h;if(g.canUseDOM)h=window.performance||window.msPerformance||window.webkitPerformance;e.exports=h||{};},null);
__d("performanceNow",["performance"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=g;if(!h||!h.now)h=Date;var i=h.now.bind(h);e.exports=i;},null);
__d("Stopwatch",["performanceNow"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(){"use strict";this.reset();}h.prototype.reset=function(){"use strict";this.$Stopwatch0=g();};h.prototype.read=function(){"use strict";return g()-this.$Stopwatch0;};e.exports=h;},null);
__d("StopwatchPool",["Stopwatch"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=0,i=[],j={},k={acquire:function(){var l;if(i.length>0){l=i.pop();}else{h++;l=new g();l.__index=h;}j[l.__index]=l;return l;},release:function(l){if(l.__index&&j[l.__index]===l){delete j[l.__index];i.push(l);}}};e.exports=k;},null);
__d("CircularBuffer",["invariant"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(i){"use strict";g(i>0);this.$CircularBuffer0=i;this.$CircularBuffer1=0;this.$CircularBuffer2=[];}h.prototype.write=function(i){"use strict";if(this.$CircularBuffer2.length<this.$CircularBuffer0){this.$CircularBuffer2.push(i);}else{this.$CircularBuffer2[this.$CircularBuffer1]=i;this.$CircularBuffer1++;this.$CircularBuffer1%=this.$CircularBuffer0;}return this;};h.prototype.read=function(){"use strict";return this.$CircularBuffer2.slice(this.$CircularBuffer1).concat(this.$CircularBuffer2.slice(0,this.$CircularBuffer1));};h.prototype.clear=function(){"use strict";this.$CircularBuffer1=0;this.$CircularBuffer2=[];return this;};e.exports=h;},null);
__d("LogBuffer",["CircularBuffer"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=a.setTimeout.nativeBackup||a.setTimeout,i=5000,j={},k={},l={write:function(m,n){var o=j[m]=j[m]||new g(i);o.write(n);if(k[m])k[m].forEach(function(p){try{p(n);}catch(q){}});},read:function(m){if(!j[m]){return [];}else return j[m].read();},tail:function(m,n){if(typeof n!=='function')return;k[m]=k[m]||[];k[m].push(n);if(j[m]){var o=j[m];o.read().forEach(function(p){try{n(p);}catch(q){}});}},clear:function(m){if(j[m])h(function(){j[m].clear();},0);}};e.exports=l;},null);
__d("EventEmitter",["EmitterSubscription","ErrorUtils","EventSubscriptionVendor","emptyFunction","invariant","StopwatchPool","LogBuffer"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();function n(){"use strict";this.$EventEmitter0=new i();this.$EventEmitter1=null;}n.prototype.addListener=function(o,p,q){"use strict";return this.$EventEmitter0.addSubscription(o,new g(this.$EventEmitter0,p,q));};n.prototype.once=function(o,p,q){"use strict";var r=this;return this.addListener(o,function(){r.removeCurrentListener();p.apply(q,arguments);});};n.prototype.removeAllListeners=function(o){"use strict";this.$EventEmitter0.removeAllSubscriptions(o);};n.prototype.removeCurrentListener=function(){"use strict";k(!!this.$EventEmitter1);this.$EventEmitter0.removeSubscription(this.$EventEmitter1);};n.prototype.listeners=function(o){"use strict";var p=this.$EventEmitter0.getSubscriptionsForType(o);return p?p.filter(j.thatReturnsTrue).map(function(q){return q.listener;}):[];};n.prototype.emit=function(o){"use strict";var p=this.$EventEmitter0.getSubscriptionsForType(o);if(p){var q=Object.keys(p),r=l.acquire();for(var s=0;s<q.length;s++){var t=q[s],u=p[t];if(u){this.$EventEmitter1=u;var v=u.listener.__SMmeta||{name:u.listener.name||'<anonymous function>'};r.reset();h.applyWithGuard(u.listener,u.context,Array.prototype.slice.call(arguments,1),null,'EventEmitter:'+o);var w=r.read();m.write('event_handler_performance',{functionMeta:v,time:w,context:o});}}this.$EventEmitter1=null;}};e.exports=n;},null);
__d("EventEmitterWithHolding",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();'use strict';function g(h,i){this.$EventEmitterWithHolding0=h;this.$EventEmitterWithHolding1=i;this.$EventEmitterWithHolding2=null;this.$EventEmitterWithHolding3=[];this.$EventEmitterWithHolding4=0;}g.prototype.addListener=function(h,i,j){return this.$EventEmitterWithHolding0.addListener(h,i,j);};g.prototype.once=function(h,i,j){return this.$EventEmitterWithHolding0.once(h,i,j);};g.prototype.addRetroactiveListener=function(h,i,j){var k=this.$EventEmitterWithHolding0.addListener(h,i,j),l=this.$EventEmitterWithHolding3;l.push(false);this.$EventEmitterWithHolding4++;this.$EventEmitterWithHolding1.emitToListener(h,i,j);this.$EventEmitterWithHolding4--;if(l[l.length-1])k.remove();l.pop();return k;};g.prototype.removeAllListeners=function(h){this.$EventEmitterWithHolding0.removeAllListeners(h);};g.prototype.removeCurrentListener=function(){if(this.$EventEmitterWithHolding4){var h=this.$EventEmitterWithHolding3;h[h.length-1]=true;}else this.$EventEmitterWithHolding0.removeCurrentListener();};g.prototype.listeners=function(h){return this.$EventEmitterWithHolding0.listeners(h);};g.prototype.emit=function(h,i,j,k,l,m,n){this.$EventEmitterWithHolding0.emit(h,i,j,k,l,m,n);};g.prototype.emitAndHold=function(h,i,j,k,l,m,n){this.$EventEmitterWithHolding2=this.$EventEmitterWithHolding1.holdEvent(h,i,j,k,l,m,n);this.$EventEmitterWithHolding0.emit(h,i,j,k,l,m,n);this.$EventEmitterWithHolding2=null;};g.prototype.releaseCurrentEvent=function(){if(this.$EventEmitterWithHolding2!==null){this.$EventEmitterWithHolding1.releaseEvent(this.$EventEmitterWithHolding2);}else if(!!this.$EventEmitterWithHolding4)this.$EventEmitterWithHolding1.releaseCurrentEvent();};g.prototype.releaseHeldEventType=function(h){this.$EventEmitterWithHolding1.releaseEventType(h);};e.exports=g;},null);
__d("EventHolder",["invariant"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';function h(){this.$EventHolder0={};this.$EventHolder1=[];}h.prototype.holdEvent=function(i,j,k,l,m,n,o){this.$EventHolder0[i]=this.$EventHolder0[i]||[];var p=this.$EventHolder0[i],q={eventType:i,index:p.length};p.push([j,k,l,m,n,o]);return q;};h.prototype.emitToListener=function(i,j,k){var l=this.$EventHolder0[i];if(!l)return;l.forEach(function(m,n){if(!m)return;this.$EventHolder1.push({eventType:i,index:n});j.apply(k,m);this.$EventHolder1.pop();}.bind(this));};h.prototype.releaseCurrentEvent=function(){g(this.$EventHolder1.length);this.releaseEvent(this.$EventHolder1[this.$EventHolder1.length-1]);};h.prototype.releaseEvent=function(i){delete this.$EventHolder0[i.eventType][i.index];};h.prototype.releaseEventType=function(i){this.$EventHolder0[i]=[];};e.exports=h;},null);
__d("toArray",["invariant"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(i){var j=i.length;g(!Array.isArray(i)&&(typeof i==='object'||typeof i==='function'));g(typeof j==='number');g(j===0||(j-1) in i);if(i.hasOwnProperty)try{return Array.prototype.slice.call(i);}catch(k){}var l=Array(j);for(var m=0;m<j;m++)l[m]=i[m];return l;}e.exports=h;},null);
__d("createArrayFromMixed",["toArray"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(j){return (!!j&&(typeof j=='object'||typeof j=='function')&&('length' in j)&&!('setInterval' in j)&&(typeof j.nodeType!='number')&&(Array.isArray(j)||('callee' in j)||('item' in j)));}function i(j){if(!h(j)){return [j];}else if(Array.isArray(j)){return j.slice();}else return g(j);}e.exports=i;},null);
__d("Arbiter",["CallbackDependencyManager","ErrorUtils","EventEmitter","EventEmitterWithHolding","EventHolder","copyProperties","createArrayFromMixed","invariant"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();'use strict';function o(){var t=new i();this.$Arbiter0=new r();this.$Arbiter1=new j(t,this.$Arbiter0);this.$Arbiter2=new g();this.$Arbiter3=[];}o.prototype.subscribe=function(t,u,v){t=m(t);t.forEach(function(x){n(x&&typeof x==='string');});n(typeof u==='function');v=v||o.SUBSCRIBE_ALL;n(v===o.SUBSCRIBE_NEW||v===o.SUBSCRIBE_ALL);var w=t.map(function(x){var y=this.$Arbiter4.bind(this,u,x);y.__SMmeta=u.__SMmeta;if(v===o.SUBSCRIBE_NEW)return this.$Arbiter1.addListener(x,y);this.$Arbiter3.push({});var z=this.$Arbiter1.addRetroactiveListener(x,y);this.$Arbiter3.pop();return z;},this);return new s(this,w);};o.prototype.$Arbiter4=function(t,u,v){var w=this.$Arbiter3[this.$Arbiter3.length-1];if(w[u]===false)return;var x=h.applyWithGuard(t,null,[u,v]);if(x===false)this.$Arbiter1.releaseCurrentEvent();w[u]=x;};o.prototype.unsubscribeCurrentSubscription=function(){this.$Arbiter1.removeCurrentListener();};o.prototype.releaseCurrentPersistentEvent=function(){this.$Arbiter1.releaseCurrentEvent();};o.prototype.subscribeOnce=function(t,u,v){var w=this.subscribe(t,function(x,y){this.unsubscribeCurrentSubscription();return u(x,y);}.bind(this),v);return w;};o.prototype.unsubscribe=function(t){n(t.isForArbiterInstance(this));t.unsubscribe();};o.prototype.inform=function(t,u,v){var w=Array.isArray(t);t=m(t);v=v||o.BEHAVIOR_EVENT;var x=(v===o.BEHAVIOR_STATE)||(v===o.BEHAVIOR_PERSISTENT);this.$Arbiter3.push({});for(var y=0;y<t.length;y++){var z=t[y];n(z);this.$Arbiter0.setHoldingBehavior(z,v);this.$Arbiter1.emitAndHold(z,u);this.$Arbiter5(z,u,x);}var aa=this.$Arbiter3.pop();return w?aa:aa[t[0]];};o.prototype.query=function(t){var u=this.$Arbiter0.getHoldingBehavior(t);n(!u||u===o.BEHAVIOR_STATE);var v=null;this.$Arbiter0.emitToListener(t,function(w){v=w;});return v;};o.prototype.registerCallback=function(t,u){if(typeof t==='function'){return this.$Arbiter2.registerCallback(t,u);}else return this.$Arbiter2.addDependenciesToExistingCallback(t,u);};o.prototype.$Arbiter5=function(t,u,v){if(u===null)return;if(v){this.$Arbiter2.satisfyPersistentDependency(t);}else this.$Arbiter2.satisfyNonPersistentDependency(t);};for(var p in k)if(k.hasOwnProperty(p))r[p]=k[p];var q=k===null?null:k.prototype;r.prototype=Object.create(q);r.prototype.constructor=r;r.__superConstructor__=k;function r(){k.call(this);this.$ArbiterEventHolder0={};}r.prototype.setHoldingBehavior=function(t,u){this.$ArbiterEventHolder0[t]=u;};r.prototype.getHoldingBehavior=function(t){return this.$ArbiterEventHolder0[t];};r.prototype.holdEvent=function(t,u,v,w,x){var y=this.$ArbiterEventHolder0[t];if(y!==o.BEHAVIOR_PERSISTENT)this.$ArbiterEventHolder2(t);if(y!==o.BEHAVIOR_EVENT)return q.holdEvent.call(this,t,u,v,w,x);};r.prototype.$ArbiterEventHolder2=function(t){this.emitToListener(t,this.releaseCurrentEvent,this);};r.prototype.releaseEvent=function(t){if(t)q.releaseEvent.call(this,t);};l(o,{SUBSCRIBE_NEW:'new',SUBSCRIBE_ALL:'all',BEHAVIOR_EVENT:'event',BEHAVIOR_STATE:'state',BEHAVIOR_PERSISTENT:'persistent'});function s(t,u){this.$ArbiterToken0=t;this.$ArbiterToken1=u;}s.prototype.unsubscribe=function(){for(var t=0;t<this.$ArbiterToken1.length;t++)this.$ArbiterToken1[t].remove();this.$ArbiterToken1.length=0;};s.prototype.isForArbiterInstance=function(t){n(this.$ArbiterToken0);return this.$ArbiterToken0===t;};Object.keys(o.prototype).forEach(function(t){o[t]=function(){var u=(this instanceof o)?this:o;return o.prototype[t].apply(u,arguments);};});o.call(o);e.exports=o;},null);
__d("AsyncFormRequestUtils",["Arbiter"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={subscribe:function(i,j,k){g.subscribe('AsyncRequest/'+j,function(l,m){var n=m.request.relativeTo;if(n&&n===i)k(m);});}};e.exports=h;},null);
__d("randomInt",["invariant"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(i,j){var k=arguments.length;g(k>0&&k<=2);if(k===1){j=i;i=0;}g(j>i);var l=this.random||Math.random;return Math.floor(i+l()*(j-i));}e.exports=h;},null);
__d("ClientIDs",["randomInt"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={},i={getNewClientID:function(){var j=Date.now(),k=j+':'+(g(0,4294967295)+1);h[k]=true;return k;},isExistingClientID:function(j){return !!h[j];}};e.exports=i;},null);
__d("$",["ex"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(j){var k=typeof j==='string'?document.getElementById(j):j;if(!k)throw new Error(g('Tried to get element with id of "%s" but it is not present on the page.',j));return k;}function i(j){return h(j);}i.unsafe=h;e.exports=i;},null);
__d("CSSCore",["invariant"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={addClass:function(i,j){g(!/\s/.test(j));if(j)if(i.classList){i.classList.add(j);}else if(!h.hasClass(i,j))i.className=i.className+' '+j;return i;},removeClass:function(i,j){g(!/\s/.test(j));if(j)if(i.classList){i.classList.remove(j);}else if(h.hasClass(i,j))i.className=i.className.replace(new RegExp('(^|\\s)'+j+'(?:\\s|$)','g'),'$1').replace(/\s+/g,' ').replace(/^\s*|\s*$/g,'');return i;},conditionClass:function(i,j,k){return (k?h.addClass:h.removeClass)(i,j);},hasClass:function(i,j){g(!/\s/.test(j));if(i.classList)return !!j&&i.classList.contains(j);return (' '+i.className+' ').indexOf(' '+j+' ')>-1;}};e.exports=h;},null);
__d("CSS",["CSSCore","$"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=b('$').unsafe,i='hidden_elem',j={setClass:function(k,l){h(k).className=l||'';return k;},hasClass:function(k,l){return g.hasClass(h(k),l);},addClass:function(k,l){return g.addClass(h(k),l);},removeClass:function(k,l){return g.removeClass(h(k),l);},conditionClass:function(k,l,m){return g.conditionClass(h(k),l,m);},toggleClass:function(k,l){return j.conditionClass(k,l,!j.hasClass(k,l));},shown:function(k){return !j.hasClass(k,i);},hide:function(k){return j.addClass(k,i);},show:function(k){return j.removeClass(k,i);},toggle:function(k){return j.toggleClass(k,i);},conditionShow:function(k,l){return j.conditionClass(k,i,!l);}};e.exports=j;},null);
__d("isNode",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h){return !!(h&&(typeof Node==='function'?h instanceof Node:typeof h==='object'&&typeof h.nodeType==='number'&&typeof h.nodeName==='string'));}e.exports=g;},null);
__d("isTextNode",["isNode"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(i){return g(i)&&i.nodeType==3;}e.exports=h;},null);
__d("containsNode",["isTextNode"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(i,j){if(!i||!j){return false;}else if(i===j){return true;}else if(g(i)){return false;}else if(g(j)){return h(i,j.parentNode);}else if(i.contains){return i.contains(j);}else if(i.compareDocumentPosition){return !!(i.compareDocumentPosition(j)&16);}else return false;}e.exports=h;},null);
__d("createObjectFrom",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h,i){var j={},k=Array.isArray(i);if(typeof i=='undefined')i=true;for(var l=h.length;l--;)j[h[l]]=k?i[l]:i;return j;}e.exports=g;},null);
__d("ge",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(j,k,l){return typeof j!='string'?j:!k?document.getElementById(j):h(j,k,l);}function h(j,k,l){var m,n,o;if(i(k)==j){return k;}else if(k.getElementsByTagName){n=k.getElementsByTagName(l||'*');for(o=0;o<n.length;o++)if(i(n[o])==j)return n[o];}else{n=k.childNodes;for(o=0;o<n.length;o++){m=h(j,n[o]);if(m)return m;}}return null;}function i(j){return j.getAttribute?j.getAttribute('id'):null;}e.exports=g;},null);
__d("getDocumentScrollElement",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();'use strict';var g=typeof navigator!=='undefined'&&navigator.userAgent.indexOf('AppleWebKit')>-1;function h(i){i=i||document;return !g&&i.compatMode==='CSS1Compat'?i.documentElement:i.body;}e.exports=h;},null);
__d("isElementNode",["isNode"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(i){return g(i)&&i.nodeType==1;}e.exports=h;},null);
__d("DOMQuery",["CSS","containsNode","createArrayFromMixed","createObjectFrom","ge","getDocumentScrollElement","isElementNode","isNode","isTextNode"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();function p(r,s){return r.hasAttribute?r.hasAttribute(s):r.getAttribute(s)!==null;}var q={find:function(r,s){var t=q.scry(r,s);return t[0];},findPushSafe:function(r,s,t){var u=q.scry(r,s),v=q.scry(r,t),w;if(u.length===1&&v.length===1&&u[0]===v[0]){w=u;}else w=u.concat(v);return w[0];},scry:function(r,s){if(!r||!r.getElementsByTagName)return [];var t=s.split(' '),u=[r];for(var v=0;v<t.length;v++){if(u.length===0)break;if(t[v]==='')continue;var w=t[v],x=t[v],y=[],z=false;if(w.charAt(0)=='^')if(v===0){z=true;w=w.slice(1);}else return [];w=w.replace(/\[(?:[^=\]]*=(?:"[^"]*"|'[^']*'))?|[.#]/g,' $&');var aa=w.split(' '),ba=aa[0]||'*',ca=ba=='*',da=aa[1]&&aa[1].charAt(0)=='#';if(da){var ea=k(aa[1].slice(1),r,ba);if(ea&&(ca||ea.tagName.toLowerCase()==ba))for(var fa=0;fa<u.length;fa++)if(z&&q.contains(ea,u[fa])){y=[ea];break;}else if(document==u[fa]||(q.contains(u[fa],ea)&&u[fa]!==ea)){y=[ea];break;}}else{var ga=[],ha=u.length,ia,ja=!z&&x.indexOf('[')<0&&document.querySelectorAll;for(var ka=0;ka<ha;ka++){if(z){ia=[];var la=u[ka].parentNode;while(m(la)){if(ca||la.tagName.toLowerCase()==ba)ia.push(la);la=la.parentNode;}}else if(ja){ia=u[ka].querySelectorAll(x);}else ia=u[ka].getElementsByTagName(ba);var ma=ia.length;for(var na=0;na<ma;na++)ga.push(ia[na]);}if(!ja)for(var oa=1;oa<aa.length;oa++){var pa=aa[oa],qa=pa.charAt(0)=='.',ra=pa.substring(1);for(ka=0;ka<ga.length;ka++){var sa=ga[ka];if(!sa||sa.nodeType!==1)continue;if(qa){if(!g.hasClass(sa,ra))delete ga[ka];continue;}else{var ta=pa.slice(1,pa.length-1),ua=ta.indexOf('=');if(ua<0){if(!p(sa,ta)){delete ga[ka];continue;}}else{var va=ta.substr(0,ua),wa=ta.substr(ua+1);wa=wa.slice(1,wa.length-1);if(sa.getAttribute(va)!=wa){delete ga[ka];continue;}}}}}for(ka=0;ka<ga.length;ka++)if(ga[ka]){y.push(ga[ka]);if(z)break;}}u=y;}return u;},getSelection:function(){var r=window.getSelection,s=document.selection;if(r){return r()+'';}else if(s)return s.createRange().text;return null;},contains:function(r,s){r=k(r);s=k(s);typeof r==='string'||typeof s==='string';return h(r,s);},getRootElement:function(){var r=null;if(window.Quickling&&Quickling.isActive())r=k('content');return r||document.body;},isNode:function(r){return n(r);},isNodeOfType:function(r,s){var t=i(s).join('|').toUpperCase().split('|'),u=j(t);return n(r)&&r.nodeName in u;},isElementNode:function(r){return m(r);},isTextNode:function(r){return o(r);},isInputNode:function(r){return q.isNodeOfType(r,['input','textarea'])||r.contentEditable==='true';},getDocumentScrollElement:l};e.exports=q;},null);
__d("event-form-bubbling",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();a.Event=a.Event||function(){};a.Event.__inlineSubmit=function(g,event){var h=(a.Event.__getHandler&&a.Event.__getHandler(g,'submit'));return h?null:a.Event.__bubbleSubmit(g,event);};a.Event.__bubbleSubmit=function(g,event){if(document.documentElement.attachEvent){var h;while(h!==false&&(g=g.parentNode))h=g.onsubmit?g.onsubmit(event):a.Event.__fire&&a.Event.__fire(g,'submit',event);return h;}};},3);
__d("isEmpty",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h){if(Array.isArray(h)){return h.length===0;}else if(typeof h==='object'){for(var i in h)return false;return true;}else return !h;}e.exports=g;},null);
__d("DataStore",["isEmpty"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={},i=1;function j(m){if(typeof m=='string'){return 'str_'+m;}else return 'elem_'+(m.__FB_TOKEN||(m.__FB_TOKEN=[i++]))[0];}function k(m){var n=j(m);return h[n]||(h[n]={});}var l={set:function(m,n,o){if(!m)throw new TypeError('DataStore.set: namespace is required, got '+(typeof m));var p=k(m);p[n]=o;return m;},get:function(m,n,o){if(!m)throw new TypeError('DataStore.get: namespace is required, got '+(typeof m));var p=k(m),q=p[n];if(typeof q==='undefined'&&m.getAttribute)if(m.hasAttribute&&!m.hasAttribute('data-'+n)){q=(void 0);}else{var r=m.getAttribute('data-'+n);q=(null===r)?(void 0):r;}if((o!==(void 0))&&(q===(void 0)))q=p[n]=o;return q;},remove:function(m,n){if(!m)throw new TypeError('DataStore.remove: namespace is required, got '+(typeof m));var o=k(m),p=o[n];delete o[n];if(g(o))l.purge(m);return p;},purge:function(m){delete h[j(m)];},_storage:h};e.exports=l;},null);
__d("DOMEvent",["invariant"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(i){"use strict";this.event=i||window.event;g(typeof(this.event.srcElement)!='unknown');this.target=this.event.target||this.event.srcElement;}h.prototype.preventDefault=function(){"use strict";var i=this.event;if(i.preventDefault){i.preventDefault();if(!('defaultPrevented' in i))i.defaultPrevented=true;}else i.returnValue=false;return this;};h.prototype.isDefaultPrevented=function(){"use strict";var i=this.event;return ('defaultPrevented' in i)?i.defaultPrevented:i.returnValue===false;};h.prototype.stopPropagation=function(){"use strict";var i=this.event;i.stopPropagation?i.stopPropagation():i.cancelBubble=true;return this;};h.prototype.kill=function(){"use strict";this.stopPropagation().preventDefault();return this;};h.killThenCall=function(i){"use strict";return function(j){new h(j).kill();return i();};};e.exports=h;},null);
__d("Parent",["CSSCore"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={byTag:function(i,j){j=j.toUpperCase();while(i&&i.nodeName!==j)i=i.parentNode;return i;},byClass:function(i,j){while(i&&!g.hasClass(i,j))i=i.parentNode;return i;},byAttribute:function(i,j){while(i&&(!i.getAttribute||!i.getAttribute(j)))i=i.parentNode;return i;}};e.exports=h;},null);
__d("Scroll",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(i){var j=i.ownerDocument;return !!j&&(i===j.documentElement||i===j.body);}var h={getTop:function(i){var j=i.ownerDocument;return g(i)?(j.body.scrollTop||j.documentElement.scrollTop):i.scrollTop;},setTop:function(i,j){if(g(i)){var k=i.ownerDocument;k.body.scrollTop=k.documentElement.scrollTop=j;}else i.scrollTop=j;},getLeft:function(i){var j=i.ownerDocument;return g(i)?(j.body.scrollLeft||j.documentElement.scrollLeft):i.scrollLeft;},setLeft:function(i,j){if(g(i)){var k=i.ownerDocument;k.body.scrollLeft=k.documentElement.scrollLeft=j;}else i.scrollLeft=j;}};e.exports=h;},null);
__d("UserAgent_DEPRECATED",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g=false,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v;function w(){if(g)return;g=true;var y=navigator.userAgent,z=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(y),aa=/(Mac OS X)|(Windows)|(Linux)/.exec(y);s=/\b(iPhone|iP[ao]d)/.exec(y);t=/\b(iP[ao]d)/.exec(y);q=/Android/i.exec(y);u=/FBAN\/\w+;/i.exec(y);v=/Mobile/i.exec(y);r=!!(/Win64/.exec(y));if(z){h=z[1]?parseFloat(z[1]):(z[5]?parseFloat(z[5]):NaN);if(h&&document&&document.documentMode)h=document.documentMode;var ba=/(?:Trident\/(\d+.\d+))/.exec(y);m=ba?parseFloat(ba[1])+4:h;i=z[2]?parseFloat(z[2]):NaN;j=z[3]?parseFloat(z[3]):NaN;k=z[4]?parseFloat(z[4]):NaN;if(k){z=/(?:Chrome\/(\d+\.\d+))/.exec(y);l=z&&z[1]?parseFloat(z[1]):NaN;}else l=NaN;}else h=i=j=l=k=NaN;if(aa){if(aa[1]){var ca=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(y);n=ca?parseFloat(ca[1].replace('_','.')):true;}else n=false;o=!!aa[2];p=!!aa[3];}else n=o=p=false;}var x={ie:function(){return w()||h;},ieCompatibilityMode:function(){return w()||(m>h);},ie64:function(){return x.ie()&&r;},firefox:function(){return w()||i;},opera:function(){return w()||j;},webkit:function(){return w()||k;},safari:function(){return x.webkit();},chrome:function(){return w()||l;},windows:function(){return w()||o;},osx:function(){return w()||n;},linux:function(){return w()||p;},iphone:function(){return w()||s;},mobile:function(){return w()||(s||t||q||v);},nativeApp:function(){return w()||u;},android:function(){return w()||q;},ipad:function(){return w()||t;}};e.exports=x;},null);
__d("wrapFunction",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={};function h(i,j,k){j=j||'default';return function(){var l=j in g?g[j](i,k):i;return l.apply(this,arguments);};}h.setWrapper=function(i,j){j=j||'default';g[j]=i;};e.exports=h;},null);
__d("DOMEventListener",["wrapFunction"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h,i;if(window.addEventListener){h=function(k,l,m){m.wrapper=g(m,'entry','DOMEventListener.add '+l);k.addEventListener(l,m.wrapper,false);};i=function(k,l,m){k.removeEventListener(l,m.wrapper,false);};}else if(window.attachEvent){h=function(k,l,m){m.wrapper=g(m,'entry','DOMEventListener.add '+l);k.attachEvent('on'+l,m.wrapper);};i=function(k,l,m){k.detachEvent('on'+l,m.wrapper);};}else i=h=function(){};var j={add:function(k,l,m){h(k,l,m);return {remove:function(){i(k,l,m);k=null;}};},remove:i};e.exports=j;},null);
__d("getObjectValues",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h){var i=[];for(var j in h)i.push(h[j]);return i;}e.exports=g;},null);
__d("Event",["Arbiter","DataStore","DOMQuery","DOMEvent","ErrorUtils","ExecutionEnvironment","Parent","Scroll","UserAgent_DEPRECATED","DOMEventListener","$","copyProperties","invariant","getObjectValues","event-form-bubbling"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){b.__markCompiled&&b.__markCompiled();b('event-form-bubbling');var u=a.Event,v='Event.listeners';if(!u.prototype)u.prototype={};function w(ga){if(ga.type==='click'||ga.type==='mouseover'||ga.type==='keydown')g.inform('Event/stop',{event:ga});}function x(ga,ha,ia){this.target=ga;this.type=ha;this.data=ia;}r(x.prototype,{getData:function(){this.data=this.data||{};return this.data;},stop:function(){return u.stop(this);},prevent:function(){return u.prevent(this);},isDefaultPrevented:function(){return u.isDefaultPrevented(this);},kill:function(){return u.kill(this);},getTarget:function(){return new j(this).target||null;}});function y(ga){if(ga instanceof x)return ga;if(!ga)if(!window.addEventListener&&document.createEventObject){ga=window.event?document.createEventObject(window.event):{};}else ga={};if(!ga._inherits_from_prototype)for(var ha in u.prototype)try{ga[ha]=u.prototype[ha];}catch(ia){}return ga;}r(u.prototype,{_inherits_from_prototype:true,getRelatedTarget:function(){var ga=this.relatedTarget||(this.fromElement===this.srcElement?this.toElement:this.fromElement);return ga&&ga.nodeType?ga:null;},getModifiers:function(){var ga={control:!!this.ctrlKey,shift:!!this.shiftKey,alt:!!this.altKey,meta:!!this.metaKey};ga.access=o.osx()?ga.control:ga.alt;ga.any=ga.control||ga.shift||ga.alt||ga.meta;return ga;},isRightClick:function(){if(this.which)return this.which===3;return this.button&&this.button===2;},isMiddleClick:function(){if(this.which)return this.which===2;return this.button&&this.button===4;},isDefaultRequested:function(){return this.getModifiers().any||this.isMiddleClick()||this.isRightClick();}});r(u.prototype,x.prototype);r(u,{listen:function(ga,ha,ia,ja){if(!l.canUseDOM)return new fa(ia,oa,ha,ja,ra);if(typeof ga=='string')ga=q(ga);if(typeof ja=='undefined')ja=u.Priority.NORMAL;if(typeof ha=='object'){var ka={};for(var la in ha)ka[la]=u.listen(ga,la,ha[la],ja);return ka;}if(ha.match(/^on/i))throw new TypeError("Bad event name `"+ha+"': use `click', not `onclick'.");if(ga.nodeName=='LABEL'&&ha=='click'){var ma=ga.getElementsByTagName('input');ga=ma.length==1?ma[0]:ga;}else if(ga===window&&ha==='scroll'){var na=i.getDocumentScrollElement();if(na!==document.documentElement&&na!==document.body)ga=na;}var oa=h.get(ga,v,{}),pa=ba[ha];if(pa){ha=pa.base;if(pa.wrap)ia=pa.wrap(ia);}da(ga,oa,ha);var qa=oa[ha];if(!(ja in qa))qa[ja]=[];var ra=qa[ja].length,sa=new fa(ia,oa,ha,ja,ra);qa[ja][ra]=sa;qa.numHandlers++;return sa;},stop:function(ga){var ha=new j(ga).stopPropagation();w(ha.event);return ga;},prevent:function(ga){new j(ga).preventDefault();return ga;},isDefaultPrevented:function(ga){return new j(ga).isDefaultPrevented(ga);},kill:function(ga){var ha=new j(ga).kill();w(ha.event);return false;},getKeyCode:function(event){event=new j(event).event;if(!event)return false;switch(event.keyCode){case 63232:return 38;case 63233:return 40;case 63234:return 37;case 63235:return 39;case 63272:case 63273:case 63275:return null;case 63276:return 33;case 63277:return 34;}if(event.shiftKey)switch(event.keyCode){case 33:case 34:case 37:case 38:case 39:case 40:return null;}return event.keyCode;},getPriorities:function(){if(!z){var ga=t(u.Priority);ga.sort(function(ha,ia){return ha-ia;});z=ga;}return z;},fire:function(ga,ha,ia){var ja=new x(ga,ha,ia),ka;do{var la=u.__getHandler(ga,ha);if(la)ka=la(ja);ga=ga.parentNode;}while(ga&&ka!==false&&!ja.cancelBubble);return ka!==false;},__fire:function(ga,ha,event){var ia=u.__getHandler(ga,ha);if(ia)return ia(y(event));},__getHandler:function(ga,ha){var ia=h.get(ga,v);if(ia&&ia[ha])return ia[ha].domHandler;},getPosition:function(ga){ga=new j(ga).event;var ha=i.getDocumentScrollElement(),ia=ga.clientX+n.getLeft(ha),ja=ga.clientY+n.getTop(ha);return {x:ia,y:ja};}});var z=null,aa=function(ga){return function(ha){if(!i.contains(this,ha.getRelatedTarget()))return ga.call(this,ha);};},ba;if(!window.navigator.msPointerEnabled){ba={mouseenter:{base:'mouseover',wrap:aa},mouseleave:{base:'mouseout',wrap:aa}};}else ba={mousedown:{base:'MSPointerDown'},mousemove:{base:'MSPointerMove'},mouseup:{base:'MSPointerUp'},mouseover:{base:'MSPointerOver'},mouseout:{base:'MSPointerOut'},mouseenter:{base:'MSPointerOver',wrap:aa},mouseleave:{base:'MSPointerOut',wrap:aa}};if(o.firefox()){var ca=function(ga,event){event=y(event);var ha=event.getTarget();while(ha){u.__fire(ha,ga,event);ha=ha.parentNode;}};document.documentElement.addEventListener('focus',ca.bind(null,'focusin'),true);document.documentElement.addEventListener('blur',ca.bind(null,'focusout'),true);}var da=function(ga,ha,ia){if(ia in ha)return;var ja=ea.bind(ga,ia);ha[ia]={numHandlers:0,domHandlerRemover:p.add(ga,ia,ja),domHandler:ja};var ka='on'+ia;if(ga[ka]){var la=ga===document.documentElement?u.Priority._BUBBLE:u.Priority.TRADITIONAL,ma=ga[ka];ga[ka]=null;u.listen(ga,ia,ma,la);}if(ga.nodeName==='FORM'&&ia==='submit')u.listen(ga,ia,u.__bubbleSubmit.bind(null,ga),u.Priority._BUBBLE);},ea=function(ga,event){event=y(event);if(!h.get(this,v))throw new Error("Bad listenHandler context.");var ha=h.get(this,v)[ga];if(!ha)throw new Error("No registered handlers for `"+ga+"'.");if(ga=='click'){var ia=m.byTag(event.getTarget(),'a');if(window.clickRefAction)window.clickRefAction('click',ia,event);}var ja=u.getPriorities();for(var ka=0;ka<ja.length;ka++){var la=ja[ka];if(la in ha){var ma=ha[la];for(var na=0;na<ma.length;na++){if(!ma[na])continue;var oa=ma[na].fire(this,event);if(oa===false){return event.kill();}else if(event.cancelBubble)event.stop();}}}return event.returnValue;};u.Priority={URGENT:-20,TRADITIONAL:-10,NORMAL:0,_BUBBLE:1000};function fa(ga,ha,ia,ja,ka){this._handler=ga;this._handlers=ha;this._type=ia;this._priority=ja;this._id=ka;}r(fa.prototype,{remove:function(){if(l.canUseDOM){s(this._handlers);var ga=this._handlers[this._type];if(ga.numHandlers<=1){ga.domHandlerRemover.remove();delete this._handlers[this._type];}else{delete ga[this._priority][this._id];ga.numHandlers--;}this._handlers=null;}},fire:function(ga,event){if(l.canUseDOM)return k.applyWithGuard(this._handler,ga,[event],function(ha){ha.event_type=event.type;ha.dom_element=ga.name||ga.id;ha.category='eventhandler';});return true;}});a.$E=u.$E=y;e.exports=u;},null);
__d("performanceAbsoluteNow",["performance"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h;if(g.now&&g.timing&&g.timing.navigationStart){var i=g.timing.navigationStart;h=function(){return g.now.apply(g,arguments)+i;};}else h=Date.now.bind(Date);e.exports=h;},null);
__d("TimeSlice",["ErrorUtils","LogBuffer","invariant","performanceAbsoluteNow","wrapFunction"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=false,m,n=[],o,p={guard:function(q,r){var s='TimeSlice'+(r?': '+r:''),t='TimeSlice Task'+(r?': '+r:'');return function(){var u=j(),v,w;if(l)return q.apply(this,arguments);l=true;m=r;n.length=0;o=0;w=g.applyWithGuard(q,this,arguments,null,s);while(n.length>0){var x=n.shift();o=x.depth;g.applyWithGuard(x.fn,a,null,null,t);}l=false;v=j();h.write('time_slice',Object.assign({begin:u,end:v,guard:r},q.__SMmeta));return w;};},enqueue:function(q){i(l);i(o<1000);n.push({fn:q,depth:o+1});},inGuard:function(){return l;}};k.setWrapper(p.guard,'entry');a.TimeSlice=p;e.exports=p;},null);
__d("setIntervalAcrossTransitions",["TimeSlice"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=a.setInterval;e.exports=function(){for(var i=[],j=0,k=arguments.length;j<k;j++)i.push(arguments[j]);i[0]=g.guard(i[0],'setInterval');return Function.prototype.apply.call(h,a,i);};},null);
__d("CSSLoader",["CSSLoaderConfig","TimeSlice","isEmpty","setIntervalAcrossTransitions"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=20,l=g.timeout,m,n,o={},p=[],q,r={};function s(w){if(n)return;n=true;var x=document.createElement('link');x.onload=function(){m=true;x.parentNode.removeChild(x);};x.rel='stylesheet';x.href='data:text/css;base64,';w.appendChild(x);}function t(){var w,x=[],y=[];if(Date.now()>=q){for(w in r){y.push(r[w].signal);x.push(r[w].error);}r={};}else for(w in r){var z=r[w].signal,aa=window.getComputedStyle?getComputedStyle(z,null):z.currentStyle;if(aa&&parseInt(aa.height,10)>1){x.push(r[w].load);y.push(z);delete r[w];}}for(var ba=0;ba<y.length;ba++)y[ba].parentNode.removeChild(y[ba]);if(!i(x)){for(ba=0;ba<x.length;ba++)x[ba]();q=Date.now()+l;}return i(r);}function u(w,x,y,z){var aa=document.createElement('meta');aa.id='bootloader_'+w.replace(/[^a-z0-9]/ig,'_');x.appendChild(aa);var ba=!i(r);q=Date.now()+l;r[w]={signal:aa,load:y,error:z};if(!ba)var ca=j(function da(){if(t())clearInterval(ca);},k);}var v={loadStyleSheet:function(w,x,y,z,aa){if(o[w])throw new Error('CSS component '+w+' has already been requested.');if(document.createStyleSheet){var ba;for(var ca=0;ca<p.length;ca++)if(p[ca].imports.length<31){ba=ca;break;}if(ba===(void 0)){try{p.push(document.createStyleSheet());}catch(da){aa();return;}ba=p.length-1;}p[ba].addImport(x);o[w]={styleSheet:p[ba],uri:x};u(w,y,z,aa);return;}var ea=document.createElement('link');ea.rel='stylesheet';ea.type='text/css';ea.href=x;o[w]={link:ea};if(m){ea.onload=h.guard(function(){ea.onload=ea.onerror=null;z();},'CSSLoader link.onload');ea.onerror=h.guard(function(){ea.onload=ea.onerror=null;aa();},'CSSLoader link.onerror');}else{u(w,y,z,aa);if(m===(void 0))s(y);}y.appendChild(ea);},registerLoadedStyleSheet:function(w,x){if(o[w])throw new Error('CSS component '+w+' has been requested and should not be '+'loaded more than once.');o[w]={link:x};},unloadStyleSheet:function(w){if(!w in o)return;var x=o[w],y=x.link;if(y){y.onload=y.onerror=null;y.parentNode.removeChild(y);}else{var z=x.styleSheet;for(var aa=0;aa<z.imports.length;aa++)if(z.imports[aa].href==x.uri){z.removeImport(aa);break;}}delete r[w];delete o[w];}};e.exports=v;},null);
__d("Bootloader",["CSSLoader","CallbackDependencyManager","TimeSlice","ErrorUtils","ex"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l={},m={},n={},o={},p=null,q={},r={},s={},t={},u={},v={},w=false,x=false,y=[],z=new h(),aa=Date.now();j.addListener(function(ma){ma.loadingUrls=Object.keys(r);},true);function ba(ma){var na=new Error(ma);na.guard='Bootloader';j.reportError(na);}function ca(){return document.documentMode||+(/MSIE.(\d+)/.exec(navigator.userAgent)||[])[1];}function da(ma){return Array.isArray(ma)?ma:[ma];}function ea(){if(!p){var ma=document.getElementsByTagName('head');p=ma.length&&ma[0]||document.body;}return p;}function fa(ma,na,oa,pa){var qa=document.createElement('script');qa.src=ma;qa.async=true;var ra=q[na];if(ra&&ra.crossOrigin)qa.crossOrigin='anonymous';qa.onload=i.guard(oa,'Bootloader script.onload');qa.onerror=i.guard(function(){t[ma]=true;oa();},'Bootloader script.onerror');qa.onreadystatechange=i.guard(function(){if(this.readyState in {loaded:1,complete:1})oa();},'Bootloader script.onreadystatechange');pa.appendChild(qa);return qa;}function ga(ma,na,oa,pa){var qa=la.done.bind(null,[oa],na);r[na]=Date.now();if(ma=='js'){fa(na,oa,qa,pa);}else if(ma=='css')g.loadStyleSheet(oa,na,pa,qa,function(){ba(k('CSS timeout [%s] at %s',oa,na));t[na]=true;qa();});}function ha(ma){if(!q[ma]){ba(k('Missing unloading resource %s',ma));return;}if(q[ma].type=='css'){g.unloadStyleSheet(ma);delete l[ma];z.unsatisfyPersistentDependency(ma);}}function ia(ma,na){if(!x){y.push([ma,na]);return;}ma=da(ma);var oa=[];for(var pa=0;pa<ma.length;++pa){if(!ma[pa]){ba(k('Empty component!'));continue;}var qa=n[ma[pa]];if(qa){var ra=qa.resources;for(var sa=0;sa<ra.length;++sa)oa.push(ra[sa]);}}la.loadResources(oa,na);}function ja(ma){if(!ma)return [];var na=[];for(var oa=0;oa<ma.length;++oa)if(typeof ma[oa]=='string'){if(ma[oa] in q){na.push(q[ma[oa]]);}else ba(k('Unable to resolve resource %s.',ma[oa]));}else na.push(ma[oa]);return na;}function ka(){if(w)return;w=true;var ma,na,oa,pa=document.getElementsByTagName('link');for(oa=0;oa<pa.length;oa++){ma=pa[oa];if((na=ma.getAttribute('data-bootloader-hash'))){q[na]={name:na,src:ma.href,type:'css'};if(ma.getAttribute('data-permanent'))q[na].permanent=m[na]=true;g.registerLoadedStyleSheet(na,ma);la.done([na]);v[na]=true;}}var qa=document.getElementsByTagName('script');for(oa=0;oa<qa.length;oa++){ma=qa[oa];if((na=ma.getAttribute('data-bootloader-hash'))){q[na]={name:na,src:ma.src,type:'js'};if(ma.getAttribute('async')){if(window._btldr&&window._btldr[na]){la.done([na]);}else{ma.setAttribute('onload',ma.getAttribute('onload')+";require"+"('Bootloader').done(['"+na+"']);");ma.setAttribute('onerror',ma.getAttribute('onerror')+";require"+"('Bootloader').done(['"+na+"']);");l[na]=true;}}else la.done([na]);v[na]=true;}}}var la={loadComponents:function(ma,na){ma=da(ma);var oa=[];for(var pa=0;pa<ma.length;pa++){var qa=n[ma[pa]],ra='legacy:'+ma[pa];if(n[ra]){if(qa)ba(k('%s has a conflicting legacy component. '+'That cannot happen and legacy won btw.',ma[pa]));ma[pa]=ra;oa.push(ra);continue;}if(!qa){ba(k('loadComponents: %s is not in the component map.',ma[pa]));}else if(qa.module){oa.push(ma[pa]);ba(k('loadComponents: Loading module %s!',ma[pa]));}}ia(ma,oa.length?d.bind(null,oa,na):na);},loadModules:function(ma,na){var oa=[];for(var pa=0;pa<ma.length;pa++){var qa=n[ma[pa]];if(!qa){ba(k('loadModules: %s is not in the component map.',ma[pa]));oa.push(ma[pa]);}else if(qa.module){oa.push(ma[pa]);}else{var ra=qa.resources,sa=true;for(var ta=0;ta<ra.length;ta++){var ua=q[ra[ta]];if(!ua||ua.type!='css')sa=false;}if(!sa)ba(k('loadModules: %s is not a module!',ma[pa]));}}ia(ma,d.bind(null,oa,na));},loadResources:function(ma,na,oa,pa){var qa;ka();ma=ja(da(ma));if(oa){var ra={};for(qa=0;qa<ma.length;++qa)ra[ma[qa].name]=true;for(var sa in l)if(!(sa in m||sa in ra||sa in v))ha(sa);v={};}var ta=[],ua=[];for(qa=0;qa<ma.length;++qa){var va=ma[qa];if(va.permanent)m[va.name]=true;if(z.isPersistentDependencySatisfied(va.name))continue;if(!va.nonblocking)ua.push(va.name);if(!l[va.name]){l[va.name]=true;ta.push(va);window.CavalryLogger&&window.CavalryLogger.getInstance().measureResources(va,pa);}}var wa;if(na)if(typeof na==='function'){wa=z.registerCallback(na,ua);}else wa=z.addDependenciesToExistingCallback(na,ua);var xa=ea(),ya=ca()?xa:document.createDocumentFragment();for(qa=0;qa<ta.length;++qa)ga(ta[qa].type,ta[qa].src,ta[qa].name,ya);if(xa!==ya)xa.appendChild(ya);return wa;},requestJSResource:function(ma){var na=ea();ga('js',ma,null,na);},done:function(ma,na){if(na){s[na]=Date.now()-r[na];delete r[na];if(o[na]){clearTimeout(o[na]);delete o[na];}}if(window.CavalryLogger)window.CavalryLogger.done_js(ma);for(var oa=0;oa<ma.length;++oa){var pa=ma[oa];if(pa){l[pa]=true;z.satisfyPersistentDependency(pa);}}},enableBootload:function(ma){for(var na in ma)if(!n[na])n[na]=ma[na];if(!x){x=true;for(var oa=0;oa<y.length;oa++)ia.apply(null,y[oa]);y=[];}},setResourceMap:function(ma){for(var na in ma)if(!q[na]){ma[na].name=na;q[na]=ma[na];}},getResourceURLs:function(){var ma={};for(var na in q){var oa=q[na].src;ma[oa]=(na in l)&&!(oa in t)&&!(oa in r);}return ma;},loadEarlyResources:function(ma){la.setResourceMap(ma);var na=[];for(var oa in ma){var pa=q[oa];na.push(pa);if(!pa.permanent)v[pa.name]=true;}la.loadResources(na);},getLoadingUrls:function(){var ma={},na=Date.now();for(var oa in r)ma[oa]=na-r[oa];return ma;},getLoadedUrlTimes:function(){return s;},getErrorUrls:function(){return Object.keys(t);},getStartTime:function(){return aa;},__debug:{callbackManager:z,componentMap:n,requested:l,resources:q,retries:u,earlyResources:v}};e.exports=la;},null);
__d("getMarkupWrap",["ExecutionEnvironment","invariant"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i=g.canUseDOM?document.createElement('div'):null,j={circle:true,defs:true,ellipse:true,g:true,line:true,linearGradient:true,path:true,polygon:true,polyline:true,radialGradient:true,rect:true,stop:true,text:true},k=[1,'<select multiple="true">','</select>'],l=[1,'<table>','</table>'],m=[3,'<table><tbody><tr>','</tr></tbody></table>'],n=[1,'<svg>','</svg>'],o={'*':[1,'?<div>','</div>'],area:[1,'<map>','</map>'],col:[2,'<table><tbody></tbody><colgroup>','</colgroup></table>'],legend:[1,'<fieldset>','</fieldset>'],param:[1,'<object>','</object>'],tr:[2,'<table><tbody>','</tbody></table>'],optgroup:k,option:k,caption:l,colgroup:l,tbody:l,tfoot:l,thead:l,td:m,th:m,circle:n,defs:n,ellipse:n,g:n,line:n,linearGradient:n,path:n,polygon:n,polyline:n,radialGradient:n,rect:n,stop:n,text:n};function p(q){h(!!i);if(!o.hasOwnProperty(q))q='*';if(!j.hasOwnProperty(q)){if(q==='*'){i.innerHTML='<link />';}else i.innerHTML='<'+q+'></'+q+'>';j[q]=!i.firstChild;}return j[q]?o[q]:null;}e.exports=p;},null);
__d("createNodesFromMarkup",["ExecutionEnvironment","createArrayFromMixed","getMarkupWrap","invariant"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=g.canUseDOM?document.createElement('div'):null,l=/^\s*<(\w+)/;function m(o){var p=o.match(l);return p&&p[1].toLowerCase();}function n(o,p){var q=k;j(!!k);var r=m(o),s=r&&i(r);if(s){q.innerHTML=s[1]+o+s[2];var t=s[0];while(t--)q=q.lastChild;}else q.innerHTML=o;var u=q.getElementsByTagName('script');if(u.length){j(p);h(u).forEach(p);}var v=h(q.childNodes);while(q.lastChild)q.removeChild(q.lastChild);return v;}e.exports=n;},null);
__d("evalGlobal",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h){if(typeof h!='string')throw new TypeError('JS sent to evalGlobal is not a string. Only strings are permitted.');if(!h)return;var i=document.createElement('script');try{i.appendChild(document.createTextNode(h));}catch(j){i.text=h;}var k=document.getElementsByTagName('head')[0]||document.documentElement;k.appendChild(i);k.removeChild(i);}e.exports=g;},null);
__d("HTML",["Bootloader","createNodesFromMarkup","emptyFunction","evalGlobal","invariant"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=/(<(\w+)[^>]*?)\/>/g,m={abbr:true,area:true,br:true,col:true,embed:true,hr:true,img:true,input:true,link:true,meta:true,param:true};function n(o){"use strict";if(o&&typeof o.__html==='string')o=o.__html;if(!(this instanceof n)){if(o instanceof n)return o;return new n(o);}if(o){var p=typeof o;k(p==='string');}this._markup=o||'';this._defer=false;this._extraAction='';this._nodes=null;this._inlineJS=i;this._rootNode=null;}n.prototype.toString=function(){"use strict";var o=this._markup;if(this._extraAction)o+='<script type="text/javascript">'+this._extraAction+'</scr'+'ipt>';return o;};n.prototype.getContent=function(){"use strict";return this._markup;};n.prototype.getNodes=function(){"use strict";this._fillCache();return this._nodes;};n.prototype.getRootNode=function(){"use strict";k(!this._rootNode);var o=this.getNodes();if(o.length===1){this._rootNode=o[0];}else{var p=document.createDocumentFragment();for(var q=0;q<o.length;q++)p.appendChild(o[q]);this._rootNode=p;}return this._rootNode;};n.prototype.getAction=function(){"use strict";this._fillCache();var o=function(){this._inlineJS();j(this._extraAction);}.bind(this);return this._defer?function(){setTimeout(o,0);}:o;};n.prototype._fillCache=function(){"use strict";if(this._nodes!==null)return;if(!this._markup){this._nodes=[];return;}var o=this._markup.replace(l,function(r,s,t){return m[t.toLowerCase()]?r:s+'></'+t+'>';}),p=null,q=h(o,function(r){p=p||[];p.push(r.src?g.requestJSResource.bind(g,r.src):j.bind(null,r.innerHTML));r.parentNode.removeChild(r);});if(p)this._inlineJS=function(){for(var r=0;r<p.length;r++)p[r]();};this._nodes=q;};n.prototype.setAction=function(o){"use strict";this._extraAction=o;return this;};n.prototype.setDeferred=function(o){"use strict";this._defer=!!o;return this;};n.isHTML=function(o){"use strict";return !!o&&(o instanceof n||o.__html!==(void 0));};n.replaceJSONWrapper=function(o){"use strict";return o&&o.__html!==(void 0)?new n(o.__html):o;};e.exports=n;},null);
__d("uniqueID",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g='js_',h=36,i=0;function j(){return g+(i++).toString(h);}e.exports=j;},null);
__d("getOrCreateDOMID",["uniqueID"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(i){if(!i.id)i.id=g();return i.id;}e.exports=h;},null);
__d("isScalar",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h){return (/string|number|boolean/).test(typeof h);}e.exports=g;},null);
__d("DOM",["DOMQuery","Event","HTML","UserAgent_DEPRECATED","$","copyProperties","createArrayFromMixed","getOrCreateDOMID","isScalar"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p={create:function(s,t,u){var v=document.createElement(s);if(t)p.setAttributes(v,t);if(u!=null)p.setContent(v,u);return v;},setAttributes:function(s,t){if(t.type)s.type=t.type;for(var u in t){var v=t[u],w=(/^on/i).test(u);if(u=='type'){continue;}else if(u=='style'){if(typeof v=='string'){s.style.cssText=v;}else l(s.style,v);}else if(w){h.listen(s,u.substr(2),v);}else if(u in s){s[u]=v;}else if(s.setAttribute)s.setAttribute(u,v);}},prependContent:function(s,t){return r(t,s,function(u){s.firstChild?s.insertBefore(u,s.firstChild):s.appendChild(u);});},insertAfter:function(s,t){var u=s.parentNode;return r(t,u,function(v){s.nextSibling?u.insertBefore(v,s.nextSibling):u.appendChild(v);});},insertBefore:function(s,t){var u=s.parentNode;return r(t,u,function(v){u.insertBefore(v,s);});},setContent:function(s,t){while(s.firstChild)q(s.firstChild);return p.appendContent(s,t);},appendContent:function(s,t){return r(t,s,function(u){s.appendChild(u);});},replace:function(s,t){var u=s.parentNode;return r(t,u,function(v){u.replaceChild(v,s);});},remove:function(s){q(k(s));},empty:function(s){s=k(s);while(s.firstChild)q(s.firstChild);},getID:n};l(p,g);function q(s){if(s.parentNode)s.parentNode.removeChild(s);}function r(s,t,u){s=i.replaceJSONWrapper(s);if(s instanceof i&&''===t.innerHTML&&-1===s.toString().indexOf('<scr'+'ipt')){var v=j.ie();if(!v||(v>7&&!g.isNodeOfType(t,['table','tbody','thead','tfoot','tr','select','fieldset']))){var w=v?'<em style="display:none;">&nbsp;</em>':'';t.innerHTML=w+s;v&&t.removeChild(t.firstChild);return m(t.childNodes);}}else if(g.isTextNode(t)){t.data=s;return [s];}var x=document.createDocumentFragment(),y,z=[],aa=[];s=m(s);for(var ba=0;ba<s.length;ba++){y=i.replaceJSONWrapper(s[ba]);if(y instanceof i){aa.push(y.getAction());var ca=y.getNodes();for(var da=0;da<ca.length;da++){z.push(ca[da]);x.appendChild(ca[da]);}}else if(o(y)){var ea=document.createTextNode(y);z.push(ea);x.appendChild(ea);}else if(g.isNode(y)){z.push(y);x.appendChild(y);}}u(x);aa.forEach(function(fa){fa();});return z;}e.exports=p;},null);
__d("DTSG",["DTSGInitialData"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=g.token||null,i={setToken:function(j){h=j;},getToken:function(){return h;}};e.exports=i;},null);
__d("errorCode",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();'use strict';function g(h){throw new Error('errorCode'+'("'+h+'"): This should not happen. Oh noes!');}e.exports=g;},null);
__d("AsyncResponse",["Bootloader","DTSG","SiteData","copyProperties","errorCode"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();function l(m,n){"use strict";j(this,{error:0,errorSummary:null,errorDescription:null,onload:null,replay:false,payload:n||null,request:m||null,silentError:false,transientError:false,blockedAction:false,is_last:true});return this;}l.prototype.getRequest=function(){"use strict";return this.request;};l.prototype.getPayload=function(){"use strict";return this.payload;};l.prototype.getError=function(){"use strict";return this.error;};l.prototype.getErrorSummary=function(){"use strict";return this.errorSummary;};l.prototype.setErrorSummary=function(m){"use strict";m=(m===(void 0)?null:m);this.errorSummary=m;return this;};l.prototype.getErrorDescription=function(){"use strict";return this.errorDescription;};l.prototype.getErrorIsWarning=function(){"use strict";return !!this.errorIsWarning;};l.prototype.isTransient=function(){"use strict";return !!this.transientError;};l.prototype.isBlockedAction=function(){"use strict";return !!this.blockedAction;};l.prototype.logError=function(m,n){"use strict";var o=a.ErrorSignal;if(o){var p={err_code:this.error,vip:(i.vip||'-')};if(n){p.duration=n.duration;p.xfb_ip=n.xfb_ip;}var q=this.request.getURI();p.path=q||'-';p.aid=this.request.userActionID;if(q&&q.indexOf('scribe_endpoint.php')!=-1)m='async_error_double';o.sendErrorSignal(m,JSON.stringify(p));}};l.prototype.logErrorByGroup=function(m,n){"use strict";if(Math.floor(Math.random()*n)===0)if(this.error==1357010||this.error<15000){this.logError('async_error_oops_'+m);}else this.logError('async_error_logic_'+m);};l.defaultErrorHandler=function(m){"use strict";try{if(!m.silentError){l.verboseErrorHandler(m);}else m.logErrorByGroup('silent',10);}catch(n){alert(m);}};l.verboseErrorHandler=function(m){"use strict";g.loadModules(["ExceptionDialog"],function(n){return n.showAsyncError(m);});};l.renewDTSG=function(m){"use strict";h.setToken(m);};e.exports=l;},null);
__d("HTTPErrors",["emptyFunction"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={get:g,getAll:g};e.exports=h;},null);
__d("JSCC",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={};function h(j){var k,l=false;return function(){if(!l){k=j();l=true;}return k;};}var i={get:function(j){if(!g[j])throw new Error('JSCC entry is missing');return g[j]();},init:function(j){for(var k in j)g[k]=h(j[k]);return function l(){for(var m in j)delete g[m];};}};e.exports=i;},null);
__d("PHPQuerySerializer",["invariant"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(o){return i(o,null);}function i(o,p){p=p||'';var q=[];if(o===null||o===(void 0)){q.push(j(p));}else if(typeof(o)=='object'){g(!(('nodeName' in o)||('nodeType' in o)));for(var r in o)if(o.hasOwnProperty(r)&&o[r]!==(void 0))q.push(i(o[r],p?(p+'['+r+']'):r));}else q.push(j(p)+'='+j(o));return q.join('&');}function j(o){return encodeURIComponent(o).replace(/%5D/g,"]").replace(/%5B/g,"[");}var k=/^([-_\w]+)((?:\[[-_\w]*\])+)=?(.*)/;function l(o){if(!o)return {};var p={};o=o.replace(/%5B/ig,'[').replace(/%5D/ig,']');o=o.split('&');var q=Object.prototype.hasOwnProperty;for(var r=0,s=o.length;r<s;r++){var t=o[r].match(k);if(!t){var u=o[r].split('=');p[m(u[0])]=u[1]===(void 0)?null:m(u[1]);}else{var v=t[2].split(/\]\[|\[|\]/).slice(0,-1),w=t[1],x=m(t[3]||'');v[0]=w;var y=p;for(var z=0;z<v.length-1;z++)if(v[z]){if(!q.call(y,v[z])){var aa=v[z+1]&&!v[z+1].match(/^\d{1,3}$/)?{}:[];y[v[z]]=aa;if(y[v[z]]!==aa)return p;}y=y[v[z]];}else{if(v[z+1]&&!v[z+1].match(/^\d{1,3}$/)){y.push({});}else y.push([]);y=y[y.length-1];}if(y instanceof Array&&v[v.length-1]===''){y.push(x);}else y[v[v.length-1]]=x;}}return p;}function m(o){return decodeURIComponent(o.replace(/\+/g,' '));}var n={serialize:h,encodeComponent:j,deserialize:l,decodeComponent:m};e.exports=n;},null);
__d("PageEvents",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={NATIVE_ONLOAD:'onload/onload',BIGPIPE_ONLOAD:'onload/onload_callback',AJAXPIPE_ONLOAD:'ajaxpipe/onload_callback',NATIVE_DOMREADY:'onload/dom_content_ready',BIGPIPE_DOMREADY:'onload/domcontent_callback',AJAXPIPE_DOMREADY:'ajaxpipe/domcontent_callback',NATIVE_ONBEFOREUNLOAD:'onload/beforeunload',NATIVE_ONUNLOAD:'onload/unload',AJAXPIPE_ONUNLOAD:'onload/exit',AJAXPIPE_SEND:'ajaxpipe/send'};e.exports=g;},null);
__d("Run",["Arbiter","ExecutionEnvironment","PageEvents","performanceAbsoluteNow"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k='onunloadhooks',l='onafterunloadhooks',m=g.BEHAVIOR_STATE;function n(da){var ea=a.CavalryLogger;ea&&ea.getInstance().setTimeStamp(da);}function o(){return !window.loading_page_chrome;}function p(da){var ea=a.PageHooks;if(window.domready&&ea){ea.runHook(da,'domreadyhooks:late');}else w('domreadyhooks',da);}function q(da){var ea=a.PageHooks;if(window.loaded&&ea){setTimeout(function(){ea.runHook(da,'onloadhooks:late');},0);}else w('onloadhooks',da);}function r(da,ea){if(ea===(void 0))ea=o();ea?w('onbeforeleavehooks',da):w('onbeforeunloadhooks',da);}function s(da,ea){if(!window.onunload)window.onunload=function(){g.inform(i.NATIVE_ONUNLOAD,true,m);};w(da,ea);}function t(da){s(k,da);}function u(da){s(l,da);}function v(da){w('onleavehooks',da);}function w(da,ea){window[da]=(window[da]||[]).concat(ea);}function x(da){window[da]=[];}function y(){g.inform(i.NATIVE_DOMREADY,true,m);}a._domcontentready=y;function z(){var da=document,ea=window;if(da.addEventListener){var fa=/AppleWebKit.(\d+)/.exec(navigator.userAgent);if(fa&&fa[1]<525){var ga=setInterval(function(){if(/loaded|complete/.test(da.readyState)){y();clearInterval(ga);}},10);}else da.addEventListener("DOMContentLoaded",y,true);}else{var ha='javascript:void(0)';if(ea.location.protocol=='https:')ha='//:';da.write('<script onreadystatechange="if (this.readyState==\'complete\') {'+'this.parentNode.removeChild(this);_domcontentready();}" '+'defer="defer" src="'+ha+'"><\/script\>');}var ia=ea.onload;ea.onload=function(){n('t_layout');ia&&ia();g.inform(i.NATIVE_ONLOAD,true,m);};ea.onbeforeunload=function(){var ja={};g.inform(i.NATIVE_ONBEFOREUNLOAD,ja,m);if(!ja.warn)g.inform(i.AJAXPIPE_ONUNLOAD,true);return ja.warn;};}var aa=g.registerCallback(function(){n('t_onload');g.inform(i.BIGPIPE_ONLOAD,{ts:j()},m);},[i.NATIVE_ONLOAD]),ba=g.registerCallback(function(){n('t_domcontent');var da={timeTriggered:Date.now()};g.inform(i.BIGPIPE_DOMREADY,da,m);},[i.NATIVE_DOMREADY]);if(h.canUseDOM)z();var ca={onLoad:p,onAfterLoad:q,onLeave:v,onBeforeUnload:r,onUnload:t,onAfterUnload:u,__domContentCallback:ba,__onloadCallback:aa,__removeHook:x};e.exports=ca;},null);
__d("BitMap",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g='0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-_';function h(){"use strict";this.$BitMap0=[];}h.prototype.set=function(k){"use strict";this.$BitMap0[k]=1;return this;};h.prototype.toString=function(){"use strict";var k=[];for(var l=0;l<this.$BitMap0.length;l++)k.push(this.$BitMap0[l]?1:0);return k.length?j(k.join('')):'';};h.prototype.toCompressedString=function(){"use strict";if(this.$BitMap0.length===0)return '';var k=[],l=1,m=this.$BitMap0[0]||0,n=m.toString(2);for(var o=1;o<this.$BitMap0.length;o++){var p=this.$BitMap0[o]||0;if(p===m){l++;}else{k.push(i(l));m=p;l=1;}}if(l)k.push(i(l));return j(n+k.join(''));};function i(k){var l=k.toString(2),m='0'.repeat(l.length-1);return m+l;}function j(k){var l=(k+'00000').match(/[01]{6}/g),m='';for(var n=0;n<l.length;n++)m+=g[parseInt(l[n],2)];return m;}e.exports=h;},null);
__d("replaceTransportMarkers",["ge"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(i,j,k){var l=(typeof k!=='undefined')?j[k]:j,m;if(Array.isArray(l)){for(m=0;m<l.length;m++)h(i,l,m);}else if(l&&typeof l=='object')if(l.__m){j[k]=b.call(null,l.__m);}else if(l.__e){j[k]=g(l.__e);}else if(l.__rel){j[k]=i;}else for(var n in l)h(i,l,n);}e.exports=h;},null);
__d("ServerJSDefine",["BitMap","replaceTransportMarkers"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i=new g(),j={getLoadedModuleHash:function(){return i.toCompressedString();},handleDefine:function(k,l,m,n,o){i.set(n);define(k,l,function(){h(o,m);return m;});},handleDefines:function(k,l){k.map(function(m){if(l)m.push(l);j.handleDefine.apply(null,m);});}};e.exports=j;},null);
__d("ServerJS",["ErrorUtils","EventEmitter","ServerJSDefine","ex","ge","replaceTransportMarkers"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=0,n=new h(),o=0;function p(){"use strict";this.$ServerJS0={};this.$ServerJS1=null;this.$ServerJS2={};}p.prototype.handle=function(t){"use strict";if(t.__guard)throw new Error('ServerJS.handle called on data that has already been handled');t.__guard=true;q(t.define||[],this.$ServerJS3,this);q(t.markup||[],this.$ServerJS4,this);q(t.elements||[],this.$ServerJS5,this);q(t.instances||[],this.$ServerJS6,this);var u=q(t.require||[],this.$ServerJS7,this);return {cancel:function(){for(var v=0;v<u.length;v++)if(u[v])u[v].cancel();}};};p.prototype.handlePartial=function(t){"use strict";(t.instances||[]).forEach(r.bind(null,this.$ServerJS0,3));(t.markup||[]).forEach(r.bind(null,this.$ServerJS0,2));(t.elements||[]).forEach(r.bind(null,this.$ServerJS0,2));return this.handle(t);};p.prototype.setRelativeTo=function(t){"use strict";this.$ServerJS1=t;return this;};p.prototype.cleanup=function(){"use strict";var t=Object.keys(this.$ServerJS0);d.call(null,t,s);this.$ServerJS0={};function u(w){var x=this.$ServerJS2[w],y=x[0],z=x[1];delete this.$ServerJS2[w];var aa=z?'JS::call("'+y+'", "'+z+'", ...)':'JS::requireModule("'+y+'")',ba=aa+' did not fire because it has missing dependencies.';throw new Error(ba);}for(var v in this.$ServerJS2)g.applyWithGuard(u,this,[v],null,'ServerJS:cleanup'+' id: '+v);};p.prototype.$ServerJS3=function(t,u,v,w){"use strict";return g.applyWithGuard(i.handleDefine,i,[t,u,v,w,this.$ServerJS1],null,'JS::define');};p.prototype.$ServerJS7=function(t,u,v,w){"use strict";return g.applyWithGuard(this.$ServerJS8,this,[t,u,v,w],null,u?'JS::call':'JS::requireModule');};p.prototype.$ServerJS8=function(t,u,v,w){"use strict";var x=[t].concat(v||[]),y=(u?'__call__':'__requireModule__')+m++;this.$ServerJS2[y]=[t,u];var z=g.guard(function(aa){delete this.$ServerJS2[y];w&&l(this.$ServerJS1,w);if(u){if(!aa[u])throw new TypeError(j('Module %s has no method "%s"',t,u));var ba={moduleName:t,method:u,sourceMeta:aa[u].__SMmeta};n.emit(p.PRE_JS_CALL,o,ba);aa[u].apply(aa,w||[]);n.emit(p.POST_JS_CALL,o,ba);o++;z.__SMmeta=aa[u].__SMmeta||{};z.__SMmeta.module=z.__SMmeta.module||t;z.__SMmeta.name=z.__SMmeta.name||u;}}.bind(this),u?"JS::call('"+t+"', '"+u+"', ...)":"JS::requireModule('"+t+"')");return define(y,x,z,1,this,1);};p.prototype.$ServerJS6=function(t,u,v,w){"use strict";return g.applyWithGuard(this.$ServerJS9,this,[t,u,v,w],null,'JS::instance');};p.prototype.$ServerJS9=function(t,u,v,w){"use strict";var x=null;if(u)x=function(y){l(this.$ServerJS1,v);var z=Object.create(y.prototype);y.apply(z,v);return z;}.bind(this);define(t,u,x,0,null,w);};p.prototype.$ServerJS4=function(t,u,v){"use strict";return g.applyWithGuard(this.$ServerJSa,this,[t,u,v],null,'JS::markup');};p.prototype.$ServerJSa=function(t,u,v){"use strict";define(t,['HTML'],function(w){return w.replaceJSONWrapper(u).getRootNode();},0,null,v);};p.prototype.$ServerJS5=function(t,u,v,w){"use strict";return g.applyWithGuard(this.$ServerJSb,this,[t,u,v,w],null,'JS::element');};p.prototype.$ServerJSb=function(t,u,v,w){"use strict";if(u===null&&v){define(t,null,null,0,null,v);return;}var x=[],y=0;if(w){x.push(w);y=1;v++;}define(t,x,function(z){var aa=k(u,z);if(!aa){var ba='Could not find element "%s"';throw new Error(j(ba,u));}return aa;},y,null,v);};p.PRE_JS_CALL='pre-js-call';p.POST_JS_CALL='post-js-call';p.addListener=n.addListener.bind(n);function q(t,u,v){return t.map(function(w){u.apply(v,w);});}function r(t,u,v){var w=v[0];if(!(w in t))v[u]=(v[u]||0)+1;t[w]=true;}function s(){return {};}e.exports=p;},null);
__d("URIRFC3986",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g=new RegExp('^'+'([^:/?#]+:)?'+'(//'+'([^\\\\/?#@]*@)?'+'('+'\\[[A-Fa-f0-9:.]+\\]|'+'[^\\/?#:]*'+')'+'(:[0-9]*)?'+')?'+'([^?#]*)'+'(\\?[^#]*)?'+'(#.*)?'),h={parse:function(i){if(i.trim()==='')return null;var j=i.match(g),k={};k.uri=j[0]?j[0]:null;k.scheme=j[1]?j[1].substr(0,j[1].length-1):null;k.authority=j[2]?j[2].substr(2):null;k.userinfo=j[3]?j[3].substr(0,j[3].length-1):null;k.host=j[2]?j[4]:null;k.port=j[5]?(j[5].substr(1)?parseInt(j[5].substr(1),10):null):null;k.path=j[6]?j[6]:null;k.query=j[7]?j[7].substr(1):null;k.fragment=j[8]?j[8].substr(1):null;k.isGenericURI=k.authority===null&&!!k.scheme;return k;}};e.exports=h;},null);
__d("URISchemes",["createObjectFrom"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=g(['fb','fb-ama','fb-messenger','fbcf','fbconnect','fbrpc','file','ftp','http','https','mailto','ms-app','itms','itms-apps','itms-services','market','svn+ssh','fbstaging','tel','sms','pebblejs','sftp']),i={isAllowed:function(j){if(!j)return true;return h.hasOwnProperty(j.toLowerCase());}};e.exports=i;},null);
__d("URIBase",["URIRFC3986","URISchemes","copyProperties","ex","invariant"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=new RegExp('[\\x00-\\x2c\\x2f\\x3b-\\x40\\x5c\\x5e\\x60\\x7b-\\x7f'+'\\uFDD0-\\uFDEF\\uFFF0-\\uFFFF'+'\\u2047\\u2048\\uFE56\\uFE5F\\uFF03\\uFF0F\\uFF1F]'),m=new RegExp('^(?:[^/]*:|'+'[\\x00-\\x1f]*/[\\x00-\\x1f]*/)');function n(q,r,s,t){if(!r)return true;if(r instanceof p){q.setProtocol(r.getProtocol());q.setDomain(r.getDomain());q.setPort(r.getPort());q.setPath(r.getPath());q.setQueryData(t.deserialize(t.serialize(r.getQueryData())));q.setFragment(r.getFragment());q.setForceFragmentSeparator(r.getForceFragmentSeparator());return true;}r=r.toString().trim();var u=g.parse(r)||{};if(!s&&!h.isAllowed(u.scheme))return false;q.setProtocol(u.scheme||'');if(!s&&l.test(u.host))return false;q.setDomain(u.host||'');q.setPort(u.port||'');q.setPath(u.path||'');if(s){q.setQueryData(t.deserialize(u.query)||{});}else try{q.setQueryData(t.deserialize(u.query)||{});}catch(v){return false;}q.setFragment(u.fragment||'');if(u.fragment==='')q.setForceFragmentSeparator(true);if(u.userinfo!==null)if(s){throw new Error(j('URI.parse: invalid URI (userinfo is not allowed in a URI): %s',q.toString()));}else return false;if(!q.getDomain()&&q.getPath().indexOf('\\')!==-1)if(s){throw new Error(j('URI.parse: invalid URI (no domain but multiple back-slashes): %s',q.toString()));}else return false;if(!q.getProtocol()&&m.test(r))if(s){throw new Error(j('URI.parse: invalid URI (unsafe protocol-relative URLs): %s',q.toString()));}else return false;return true;}var o=[];function p(q,r){"use strict";k(r);this.$URIBase0=r;this.$URIBase1='';this.$URIBase2='';this.$URIBase3='';this.$URIBase4='';this.$URIBase5='';this.$URIBase6={};this.$URIBase7=false;n(this,q,true,r);}p.prototype.setProtocol=function(q){"use strict";k(h.isAllowed(q));this.$URIBase1=q;return this;};p.prototype.getProtocol=function(q){"use strict";return this.$URIBase1;};p.prototype.setSecure=function(q){"use strict";return this.setProtocol(q?'https':'http');};p.prototype.isSecure=function(){"use strict";return this.getProtocol()==='https';};p.prototype.setDomain=function(q){"use strict";if(l.test(q))throw new Error(j('URI.setDomain: unsafe domain specified: %s for url %s',q,this.toString()));this.$URIBase2=q;return this;};p.prototype.getDomain=function(){"use strict";return this.$URIBase2;};p.prototype.setPort=function(q){"use strict";this.$URIBase3=q;return this;};p.prototype.getPort=function(){"use strict";return this.$URIBase3;};p.prototype.setPath=function(q){"use strict";this.$URIBase4=q;return this;};p.prototype.getPath=function(){"use strict";return this.$URIBase4;};p.prototype.addQueryData=function(q,r){"use strict";if(Object.prototype.toString.call(q)==='[object Object]'){i(this.$URIBase6,q);}else this.$URIBase6[q]=r;return this;};p.prototype.setQueryData=function(q){"use strict";this.$URIBase6=q;return this;};p.prototype.getQueryData=function(){"use strict";return this.$URIBase6;};p.prototype.removeQueryData=function(q){"use strict";if(!Array.isArray(q))q=[q];for(var r=0,s=q.length;r<s;++r)delete this.$URIBase6[q[r]];return this;};p.prototype.setFragment=function(q){"use strict";this.$URIBase5=q;this.setForceFragmentSeparator(false);return this;};p.prototype.getFragment=function(){"use strict";return this.$URIBase5;};p.prototype.setForceFragmentSeparator=function(q){"use strict";this.$URIBase7=q;return this;};p.prototype.getForceFragmentSeparator=function(){"use strict";return this.$URIBase7;};p.prototype.isEmpty=function(){"use strict";return !(this.getPath()||this.getProtocol()||this.getDomain()||this.getPort()||Object.keys(this.getQueryData()).length>0||this.getFragment());};p.prototype.toString=function(){"use strict";var q=this;for(var r=0;r<o.length;r++)q=o[r](q);return q.$URIBase8();};p.prototype.$URIBase8=function(){"use strict";var q='',r=this.getProtocol();if(r)q+=r+'://';var s=this.getDomain();if(s)q+=s;var t=this.getPort();if(t)q+=':'+t;var u=this.getPath();if(u){q+=u;}else if(q)q+='/';var v=this.$URIBase0.serialize(this.getQueryData());if(v)q+='?'+v;var w=this.getFragment();if(w){q+='#'+w;}else if(this.getForceFragmentSeparator())q+='#';return q;};p.registerFilter=function(q){"use strict";o.push(q);};p.prototype.getOrigin=function(){"use strict";var q=this.getPort();return this.getProtocol()+'://'+this.getDomain()+(q?':'+q:'');};p.isValidURI=function(q,r){return n(new p(null,r),q,false,r);};e.exports=p;},null);
__d("isFacebookURI",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g=null,h=['http','https'];function i(j){if(!g)g=new RegExp('(^|\\.)facebook\\.com$','i');if(j.isEmpty()&&j.toString()!=='#')return false;if(!j.getDomain()&&!j.getProtocol())return true;return (h.indexOf(j.getProtocol())!==-1&&g.test(j.getDomain()));}i.setRegex=function(j){g=j;};e.exports=i;},null);
__d("unqualifyURI",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h){h.setProtocol(null).setDomain(null).setPort(null);}e.exports=g;},null);
__d("areSameOrigin",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h,i){if(h.isEmpty()||i.isEmpty())return false;if(h.getProtocol()&&h.getProtocol()!=i.getProtocol())return false;if(h.getDomain()&&h.getDomain()!=i.getDomain())return false;if(h.getPort()&&h.getPort()!=i.getPort())return false;return true;}e.exports=g;},null);
__d("goURI",["URISchemes"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(i,j,k){i=i.toString();if(/^([^.:/?#]+):/.test(i)&&!g.isAllowed(RegExp.$1))throw new Error('goURI: URI scheme rejected, URI: '+i);if(!j&&a.PageTransitions&&a.PageTransitions.isInitialized()){a.PageTransitions.go(i,k);}else if(window.location.href==i){window.location.reload();}else window.location.href=i;}e.exports=h;},null);
__d("URI",["PHPQuerySerializer","URIBase","isFacebookURI","unqualifyURI","areSameOrigin","copyProperties","goURI"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();for(var n in h)if(h.hasOwnProperty(n))p[n]=h[n];var o=h===null?null:h.prototype;p.prototype=Object.create(o);p.prototype.constructor=p;p.__superConstructor__=h;function p(q){"use strict";if(!(this instanceof p))return new p(q||window.location.href);h.call(this,q||'',g);}p.prototype.setPath=function(q){"use strict";this.path=q;return o.setPath.call(this,q);};p.prototype.getPath=function(){"use strict";var q=o.getPath.call(this);if(q)return q.replace(/^\/+/,'/');return q;};p.prototype.setProtocol=function(q){"use strict";this.protocol=q;return o.setProtocol.call(this,q);};p.prototype.setDomain=function(q){"use strict";this.domain=q;return o.setDomain.call(this,q);};p.prototype.setPort=function(q){"use strict";this.port=q;return o.setPort.call(this,q);};p.prototype.setFragment=function(q){"use strict";this.fragment=q;return o.setFragment.call(this,q);};p.prototype.valueOf=function(){"use strict";return this.toString();};p.prototype.isFacebookURI=function(){"use strict";return i(this);};p.prototype.isLinkshimURI=function(){"use strict";if(i(this)&&(this.getPath()==='/l.php'||this.getPath().indexOf('/si/ajax/l/')===0||this.getPath().indexOf('/l/')===0||this.getPath().indexOf('l/')===0))return true;return false;};p.prototype.getRegisteredDomain=function(){"use strict";if(!this.getDomain())return '';if(!i(this))return null;var q=this.getDomain().split('.'),r=q.indexOf('facebook');return q.slice(r).join('.');};p.prototype.getUnqualifiedURI=function(){"use strict";var q=new p(this);j(q);return q;};p.prototype.getQualifiedURI=function(){"use strict";return new p(this).$URI0();};p.prototype.$URI0=function(){"use strict";if(!this.getDomain()){var q=p();this.setProtocol(q.getProtocol()).setDomain(q.getDomain()).setPort(q.getPort());}return this;};p.prototype.isSameOrigin=function(q){"use strict";var r=q||window.location.href;if(!(r instanceof p))r=new p(r.toString());return k(this,r);};p.prototype.go=function(q){"use strict";m(this,q);};p.prototype.setSubdomain=function(q){"use strict";var r=this.$URI0().getDomain().split('.');if(r.length<=2){r.unshift(q);}else r[0]=q;return this.setDomain(r.join('.'));};p.prototype.getSubdomain=function(){"use strict";if(!this.getDomain())return '';var q=this.getDomain().split('.');if(q.length<=2){return '';}else return q[0];};p.isValidURI=function(q){"use strict";return h.isValidURI(q,g);};l(p,{getRequestURI:function(q,r){q=q===(void 0)||q;var s=a.PageTransitions;if(q&&s&&s.isInitialized()){return s.getCurrentURI(!!r).getQualifiedURI();}else return new p(window.location.href);},getMostRecentURI:function(){var q=a.PageTransitions;if(q&&q.isInitialized()){return q.getMostRecentURI().getQualifiedURI();}else return new p(window.location.href);},getNextURI:function(){var q=a.PageTransitions;if(q&&q.isInitialized()){return q._next_uri.getQualifiedURI();}else return new p(window.location.href);},expression:/(((\w+):\/\/)([^\/:]*)(:(\d+))?)?([^#?]*)(\?([^#]*))?(#(.*))?/,arrayQueryExpression:/^(\w+)((?:\[\w*\])+)=?(.*)/,encodeComponent:function(q){return encodeURIComponent(q).replace(/%5D/g,"]").replace(/%5B/g,"[");},decodeComponent:function(q){return decodeURIComponent(q.replace(/\+/g,' '));}});e.exports=p;},null);
__d("isMessengerDotComURI",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g=new RegExp('(^|\\.)messenger\\.com$','i'),h=['https'];function i(j){if(j.isEmpty()&&j.toString()!=='#')return false;if(!j.getDomain()&&!j.getProtocol())return false;return (h.indexOf(j.getProtocol())!==-1&&g.test(j.getDomain()));}e.exports=i;},null);
__d("bind",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h,i){var j=Array.prototype.slice.call(arguments,2);if(typeof i!='string')return Function.prototype.bind.apply(i,[h].concat(j));function k(){var l=j.concat(Array.prototype.slice.call(arguments));if(h[i])return h[i].apply(h,l);}k.toString=function(){return 'bound lazily: '+h[i];};return k;}e.exports=g;},null);
__d("executeAfter",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h,i,j){return function(){h.apply(j||this,arguments);i.apply(j||this,arguments);};}e.exports=g;},null);
__d("CurrentCommunity",["CurrentCommunityInitialData"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={getID:function(){return g.COMMUNITY_ID||'0';}};e.exports=h;},null);
__d("CurrentUser",["Cookie","CurrentUserInitialData"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i={getID:function(){return h.USER_ID;},getAccountID:function(){return h.ACCOUNT_ID;},isLoggedIn:function(){return h.USER_ID&&h.USER_ID!=='0';},isLoggedInNow:function(){if(!i.isLoggedIn())return false;if(h.IS_INTERN_SITE)return true;if(h.ORIGINAL_USER_ID)return h.ORIGINAL_USER_ID===g.get('c_user');return h.USER_ID===g.get('c_user');},isEmployee:function(){return !!h.IS_EMPLOYEE;},hasWorkUser:function(){return !!h.HAS_WORK_USER;},isGray:function(){return !!h.IS_GRAY;}};e.exports=i;},null);
__d("getAsyncParams",["CurrentCommunity","CurrentUser","DTSG","ISB","LSD","ServerJSDefine","SiteData","URIBase","PHPQuerySerializer"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p=1;function q(r){var s={__user:h.getID(),__a:1,__dyn:l.getLoadedModuleHash(),__req:(p++).toString(36)},t=new n(window.location.href,o).getQueryData();for(var u in t)if(t.hasOwnProperty(u))if((u==='locale')||(u.substr(0,3)==='mh_'))s[u]=t[u];if(r=='POST'){if(i.getToken()){s.fb_dtsg=i.getToken();var v='';for(var w=0;w<s.fb_dtsg.length;w++)v+=s.fb_dtsg.charCodeAt(w);s.ttstamp='2'+v;}if(k.token)s.lsd=k.token;}if(j.token)s.fb_isb=j.token;if(m.revision)s.__rev=m.revision;if(g.getID()!=='0')s.__cid=g.getID();return s;}e.exports=q;},null);
__d("getSameOriginTransport",["ex"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(){try{return a.XMLHttpRequest?new a.XMLHttpRequest():new ActiveXObject("MSXML2.XMLHTTP.3.0");}catch(i){throw new Error(g('getSameOriginTransport: %s',i.message));}}e.exports=h;},null);
__d("ix",["invariant"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={};function i(j){var k=h[j];g(!!k);return k;}i.add=function(j){var k=false;for(var l in j)if(!(l in h))h[l]=j[l];};e.exports=i;},null);
__d("setTimeoutAcrossTransitions",["TimeSlice"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=a.setTimeout;e.exports=function(){for(var i=[],j=0,k=arguments.length;j<k;j++)i.push(arguments[j]);i[0]=g.guard(i[0],'setTimeout');return Function.prototype.apply.call(h,a,i);};},null);
__d("IntlVariations",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={BITMASK_NUMBER:805306368,NUMBER_SINGULAR:268435456,NUMBER_DUAL:536870912,NUMBER_PLURAL:805306368,BITMASK_GENDER:50331648,GENDER_MALE:16777216,GENDER_FEMALE:33554432,GENDER_UNKNOWN:50331648};},null);
__d("Intl",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g;function h(j){if(typeof j!='string')return false;return j.match(new RegExp(h.punct_char_class+'['+')"'+"'"+'\u00BB'+'\u0F3B'+'\u0F3D'+'\u2019'+'\u201D'+'\u203A'+'\u3009'+'\u300B'+'\u300D'+'\u300F'+'\u3011'+'\u3015'+'\u3017'+'\u3019'+'\u301B'+'\u301E'+'\u301F'+'\uFD3F'+'\uFF07'+'\uFF09'+'\uFF3D'+'\\s'+']*$'));}h.punct_char_class='['+'.!?'+'\u3002'+'\uFF01'+'\uFF1F'+'\u0964'+'\u2026'+'\u0EAF'+'\u1801'+'\u0E2F'+'\uFF0E'+']';function i(j){if(g){var k=[],l=[];for(var m in g.patterns){var n=g.patterns[m];for(var o in g.meta){var p=new RegExp(o.slice(1,-1),'g'),q=g.meta[o];m=m.replace(p,q);n=n.replace(p,q);}k.push(m);l.push(n);}for(var r=0;r<k.length;r++){var s=new RegExp(k[r].slice(1,-1),'g');if(l[r]=='javascript'){j.replace(s,function(t){return t.slice(1).toLowerCase();});}else j=j.replace(s,l[r]);}}return j.replace(/\x01/g,'');}e.exports={endsInPunct:h,applyPhonologicalRules:i,setPhonologicalRules:function(j){g=j;}};},null);
__d("substituteTokens",["invariant","Intl"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();function i(k){return k;}function j(k,l){if(!l)return k;g(typeof l==='object');var m='\\{([^}]+)\\}('+h.endsInPunct.punct_char_class+'*)',n=new RegExp(m,'g'),o=[],p=[],q=k.replace(n,function(t,u,v){var w=l[u];if(w&&typeof w==='object'){o.push(w);p.push(u);return '\x17'+v;}else if(w===null)return '';return w+(h.endsInPunct(w)?'':v);}).split('\x17').map(h.applyPhonologicalRules);if(q.length===1)return q[0];var r=[q[0]];for(var s=0;s<o.length;s++)r.push(i(o[s]),q[s+1]);return r;}e.exports=j;},null);
__d("fbt",["IntlVariations","IntlViewerContext","copyProperties","invariant","substituteTokens","FbtNumber","FbtLogger","FbtQTOverrides"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=b('FbtNumber').impl,m=b('FbtLogger').logger,n=b('FbtQTOverrides').overrides,o={INDEX:0,SUBSTITUTION:1},p={NUMBER:0,GENDER:1},q=function(){};q._=function(r,s){var t={},u=r;if(r.__vcg){s=s||[];s.unshift([h.GENDER,null]);}if(s!==(void 0))for(var v=0;v<s.length;v++){var w=s[v][o.INDEX];if(w!==null){if(!(w in u||'*' in u))if(r.__vcg&&s[0][0]!=='*'){s[0][0]='*';t={};v=-1;u=r;continue;}else j(false);u=u[w]||u['*'];}i(t,s[v][o.SUBSTITUTION]);}if(typeof u==='string'){return k(u,t);}else if(Array.isArray(u)){var x=u[0],y=u[1];x=n['1_'+y]||x;q.logImpression(y);return k(x,t);}else j(false);};q['enum']=function(r,s){return [r,null];};q.param=function(r,s,t){var u=null;if(t)if(t[0]===p.NUMBER){var v=t.length>1?t[1]:s;j(typeof v==='number');u=l.getNumberVariationType(v);}else if(t[0]===p.GENDER){j(t.length>1&&(t[1]&g.GENDER_BITMASK));u=t[1];}else j(false);var w={};w[r]=s;return [u,w];};q.logImpression=function(r){if(m)m.logImpression(r);return r;};e.exports=q;},null);
__d("guid",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(){return 'f'+(Math.random()*(1<<30)).toString(16).replace('.','');}e.exports=g;},null);
__d("ArbiterMixin",["Arbiter","guid"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i="arbiter$"+h(),j=Object.prototype.hasOwnProperty,k={_getArbiterInstance:function(){return j.call(this,i)?this[i]:this[i]=new g();},inform:function(l,m,n){return this._getArbiterInstance().inform(l,m,n);},subscribe:function(l,m,n){return this._getArbiterInstance().subscribe(l,m,n);},subscribeOnce:function(l,m,n){return this._getArbiterInstance().subscribeOnce(l,m,n);},unsubscribe:function(l){this._getArbiterInstance().unsubscribe(l);},unsubscribeCurrentSubscription:function(){this._getArbiterInstance().unsubscribeCurrentSubscription();},releaseCurrentPersistentEvent:function(){this._getArbiterInstance().releaseCurrentPersistentEvent();},registerCallback:function(l,m){return this._getArbiterInstance().registerCallback(l,m);},query:function(l){return this._getArbiterInstance().query(l);}};e.exports=k;},null);
__d("mixin",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h,i,j,k,l,m,n,o,p,q,r){var s=function(){},t=[h,i,j,k,l,m,n,o,p,q],u=0,v;while(t[u]){v=t[u];for(var w in v)if(v.hasOwnProperty(w))s.prototype[w]=v[w];u+=1;}return s;}e.exports=g;},null);
__d("JSONPTransport",["ArbiterMixin","DOM","HTML","URI","mixin"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l={},m=2,n='jsonp',o='iframe';function p(u){delete l[u];}var q=k(g);for(var r in q)if(q.hasOwnProperty(r))t[r]=q[r];var s=q===null?null:q.prototype;t.prototype=Object.create(s);t.prototype.constructor=t;t.__superConstructor__=q;function t(u,v){"use strict";this._type=u;this._uri=v;l[this.getID()]=this;}t.prototype.getID=function(){"use strict";return this._id||(this._id=m++);};t.prototype.hasFinished=function(){"use strict";return !(this.getID() in l);};t.prototype.getRequestURI=function(){"use strict";return j(this._uri).addQueryData({__a:1,__adt:this.getID(),__req:'jsonp_'+this.getID()});};t.prototype.getTransportFrame=function(){"use strict";if(this._iframe)return this._iframe;var u='transport_frame_'+this.getID(),v=i('<iframe class="hidden_elem" name="'+u+'" src="javascript:void(0)" />');return this._iframe=h.appendContent(document.body,v)[0];};t.prototype.send=function(){"use strict";if(this._type===n){setTimeout((function(){h.appendContent(document.body,h.create('script',{src:this.getRequestURI().toString(),type:'text/javascript'}));}).bind(this),0);}else this.getTransportFrame().src=this.getRequestURI().toString();};t.prototype.handleResponse=function(u){"use strict";this.inform('response',u);if(this.hasFinished())setTimeout(this._cleanup.bind(this),0);};t.prototype.abort=function(){"use strict";if(this._aborted)return;this._aborted=true;this._cleanup();p(this.getID());this.inform('abort');};t.prototype._cleanup=function(){"use strict";if(this._iframe){h.remove(this._iframe);this._iframe=null;}};t.respond=function(u,v,w){"use strict";var x=l[u];if(x){if(!w)p(u);if(x._type==o)if(typeof v==='string'){v=JSON.parse(v);}else v=JSON.parse(JSON.stringify(v));x.handleResponse(v);}else{var y=a.ErrorSignal;if(y&&!w)y.logJSError('ajax',{error:'UnexpectedJsonResponse',extra:{id:u,uri:(v.payload&&v.payload.uri)||''}});}};e.exports=t;},null);
__d("AsyncRequest",["Arbiter","AsyncRequestConfig","AsyncResponse","Bootloader","CSS","DTSG","Env","ErrorUtils","Event","HTTPErrors","JSCC","Parent","PHPQuerySerializer","Run","ServerJS","TimeSlice","URI","UserAgent_DEPRECATED","isFacebookURI","isMessengerDotComURI","bind","copyProperties","emptyFunction","errorCode","evalGlobal","executeAfter","ge","getAsyncParams","getSameOriginTransport","goURI","invariant","isEmpty","ix","setTimeoutAcrossTransitions","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa){b.__markCompiled&&b.__markCompiled();function pa(){try{return !window.domready;}catch(ab){return true;}}function qa(ab){return ('upload' in ab)&&('onprogress' in ab.upload);}function ra(ab){return 'withCredentials' in ab;}function sa(ab){return ab.status in {0:1,12029:1,12030:1,12031:1,12152:1};}function ta(ab){var bb=!ab||typeof(ab)==='function';return bb;}var ua=2,va=ua;g.subscribe('page_transition',function(ab,bb){va=bb.id;});function wa(ab){"use strict";ba(this,{transport:null,method:'POST',uri:'',timeout:null,timer:null,initialHandler:ca,handler:null,uploadProgressHandler:null,errorHandler:null,transportErrorHandler:null,timeoutHandler:null,interceptHandler:ca,finallyHandler:ca,abortHandler:ca,serverDialogCancelHandler:null,relativeTo:null,statusElement:null,statusClass:'',data:{},headers:{},file:null,context:{},readOnly:false,writeRequiredParams:[],remainingRetries:0,userActionID:'-'});this.option={asynchronous:true,suppressErrorHandlerWarning:false,suppressEvaluation:false,suppressErrorAlerts:false,retries:0,jsonp:false,bundle:false,useIframeTransport:false,handleErrorAfterUnload:false};this.errorHandler=i.defaultErrorHandler;this.transportErrorHandler=aa(this,'errorHandler');if(ab!==(void 0))this.setURI(ab);}wa.prototype._dispatchResponse=function(ab){"use strict";this.clearStatusIndicator();if(!this._isRelevant()){this._invokeErrorHandler(1010);return;}if(this.initialHandler(ab)===false)return;clearTimeout(this.timer);if(ab.jscc_map){var bb=(eval)(ab.jscc_map);q.init(bb);}var cb;if(this.handler)try{cb=this._shouldSuppressJS(this.handler(ab));}catch(db){ab.is_last&&this.finallyHandler(ab);throw db;}if(!cb)this._handleJSResponse(ab);ab.is_last&&this.finallyHandler(ab);};wa.prototype._shouldSuppressJS=function(ab){"use strict";return ab===wa.suppressOnloadToken;};wa.prototype._handleJSResponse=function(ab){"use strict";var bb=this.getRelativeTo(),cb=ab.domops,db=ab.dtsgToken,eb=ab.jsmods,fb=new u().setRelativeTo(bb),gb;if(eb&&eb.require){gb=eb.require;delete eb.require;}if(eb)fb.handle(eb);if(db)l.setToken(db);var hb=function(ib){if(cb&&ib)ib.invoke(cb,bb);if(gb)fb.handle({require:gb});this._handleJSRegisters(ab,'onload');if(this.lid)g.inform('tti_ajax',{s:this.lid,d:[this._sendTimeStamp||0,(this._sendTimeStamp&&this._responseTime)?(this._responseTime-this._sendTimeStamp):0]},g.BEHAVIOR_EVENT);this._handleJSRegisters(ab,'onafterload');fb.cleanup();}.bind(this);if(cb){j.loadModules(["AsyncDOM"],hb);}else hb(null);};wa.prototype._handleJSRegisters=function(ab,bb){"use strict";var cb=ab[bb];if(cb)for(var db=0;db<cb.length;db++)n.applyWithGuard(new Function(cb[db]),this);};wa.prototype.invokeResponseHandler=function(ab){"use strict";if(typeof(ab.redirect)!=='undefined'){setTimeout((function(){this.setURI(ab.redirect).send();}).bind(this),0);return;}if(!this.handler&&!this.errorHandler&&!this.transportErrorHandler)return;var bb=ab.asyncResponse;if(typeof(bb)!=='undefined'){if(!this._isRelevant()){this._invokeErrorHandler(1010);return;}if(bb.inlinejs)ea(bb.inlinejs);if(bb.lid){this._responseTime=Date.now();if(a.CavalryLogger)this.cavalry=a.CavalryLogger.getInstance(bb.lid);this.lid=bb.lid;}if(bb.resource_map)j.setResourceMap(bb.resource_map);if(bb.bootloadable)j.enableBootload(bb.bootloadable);ma.add(bb.ixData);var cb,db;if(bb.getError()&&!bb.getErrorIsWarning()){var eb=this.errorHandler.bind(this);cb=n.guard(this._dispatchErrorResponse,'AsyncRequest#_dispatchErrorResponse for '+this.getURI());cb=cb.bind(this,bb,eb);db='error';}else{cb=n.guard(this._dispatchResponse,'AsyncRequest#_dispatchResponse for '+this.getURI());cb=cb.bind(this,bb);db='response';}cb=fa(cb,function(){g.inform('AsyncRequest/'+db,{request:this,response:bb});}.bind(this));var fb=false;if(this.preBootloadHandler)fb=this.preBootloadHandler(bb);bb.css=bb.css||[];bb.js=bb.js||[];j.loadResources(bb.css.concat(bb.js),function(){setTimeout(cb,0);},fb,this.getURI());}else if(typeof(ab.transportError)!=='undefined'){if(this._xFbServer){this._invokeErrorHandler(1008);}else this._invokeErrorHandler(1012);}else this._invokeErrorHandler(1007);};wa.prototype._invokeErrorHandler=function(ab){"use strict";var bb;if(this.responseText===''){bb=1002;}else if(this._requestAborted){bb=1011;}else{try{bb=ab||this.transport.status||1004;}catch(cb){bb=1005;}if(false===navigator.onLine)bb=1006;}var db,eb,fb=true;if(bb===1006){eb=oa._("\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u63a5\u7d9a\u304c\u3042\u308a\u307e\u305b\u3093");db=oa._("\u30d6\u30e9\u30a6\u30b6\u304c\u30aa\u30d5\u30e9\u30a4\u30f3\u306b\u306a\u3063\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u63a5\u7d9a\u3092\u3054\u78ba\u8a8d\u306e\u4e0a\u3001\u3082\u3046\u4e00\u5ea6\u304a\u8a66\u3057\u304f\u3060\u3055\u3044\u3002");}else if(bb>=300&&bb<=399){eb=oa._("\u30ea\u30c0\u30a4\u30ec\u30af\u30c8");db=oa._("Facebook\u3078\u306e\u30a2\u30af\u30bb\u30b9\u304c\u7b2c\u4e09\u8005\u306b\u3088\u308a\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u307e\u305f\u306f\u30d6\u30ed\u30c3\u30af\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u30d6\u30e9\u30a6\u30b6\u306e\u66f4\u65b0\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u304b\u3001\u304a\u4f7f\u3044\u306e\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u30d7\u30ed\u30d0\u30a4\u30c0\u306b\u304a\u554f\u3044\u5408\u308f\u305b\u304f\u3060\u3055\u3044\u3002");var gb=this.transport.getResponseHeader("Location");if(gb)ja(gb,true);fb=true;}else{eb=oa._("\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002");db=oa._("\u554f\u984c\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\u3059\u307f\u3084\u304b\u306b\u89e3\u6c7a\u3067\u304d\u308b\u3088\u3046\u4f5c\u696d\u3057\u3066\u304a\u308a\u307e\u3059\u306e\u3067\u3001\u3057\u3070\u3089\u304f\u3057\u3066\u304b\u3089\u3082\u3046\u4e00\u5ea6\u304a\u8a66\u3057\u304f\u3060\u3055\u3044\u3002");}var hb=new i(this);ba(hb,{error:bb,errorSummary:eb,errorDescription:db,silentError:fb});setTimeout((function(){g.inform('AsyncRequest/error',{request:this,response:hb});}).bind(this),0);if(pa()&&!this.getOption('handleErrorAfterUnload'))return;if(!this.transportErrorHandler)return;var ib=this.transportErrorHandler.bind(this);!this.getOption('suppressErrorAlerts');n.applyWithGuard(this._dispatchErrorResponse,this,[hb,ib]);};wa.prototype._dispatchErrorResponse=function(ab,bb){"use strict";var cb=ab.getError();this.clearStatusIndicator();var db=this._sendTimeStamp&&{duration:Date.now()-this._sendTimeStamp,xfb_ip:this._xFbServer||'-'};ab.logError('async_error',db);if(!this._isRelevant()||cb===1010){this.abort();return;}if(cb==1357008||cb==1357007||cb==1357041||cb==1442002||cb==1357001){var eb=cb==1357008||cb==1357007;this.interceptHandler(ab);if(cb==1357041){this._solveQuicksandChallenge(ab);}else this._displayServerDialog(ab,eb);}else if(this.initialHandler(ab)!==false){clearTimeout(this.timer);try{bb(ab);}catch(fb){this.finallyHandler(ab);throw fb;}this.finallyHandler(ab);}};wa.prototype._solveQuicksandChallenge=function(ab){"use strict";var bb=ab.getPayload();j.loadModules(["QuickSandSolver"],function(cb){cb.solveAndSendRequestBack(this,bb);}.bind(this));};wa.prototype._displayServerDialog=function(ab,bb){"use strict";var cb=ab.getPayload();if(cb.__dialog!==(void 0)){this._displayServerLegacyDialog(ab,bb);return;}var db=cb.__dialogx;new u().handle(db);j.loadModules(["ConfirmationDialog"],function(eb){eb.setupConfirmation(ab,this);}.bind(this));};wa.prototype._displayServerLegacyDialog=function(ab,bb){"use strict";var cb=ab.getPayload().__dialog;j.loadModules(["Dialog"],function(db){var eb=new db(cb);if(bb)eb.setHandler(this._displayConfirmationHandler.bind(this,eb));eb.setCancelHandler(function(){var fb=this.getServerDialogCancelHandler();try{fb&&fb(ab);}catch(gb){throw gb;}finally{this.finallyHandler(ab);}}.bind(this)).setCausalElement(this.relativeTo).show();}.bind(this));};wa.prototype._displayConfirmationHandler=function(ab){"use strict";this.data.confirmed=1;ba(this.data,ab.getFormData());this.send();};wa.prototype.setJSONPTransport=function(ab){"use strict";ab.subscribe('response',this._handleJSONPResponse.bind(this));ab.subscribe('abort',this._handleJSONPAbort.bind(this));this.transport=ab;};wa.prototype._handleJSONPResponse=function(ab,bb){"use strict";this.is_first=(this.is_first===(void 0));var cb=this._interpretResponse(bb);cb.asyncResponse.is_first=this.is_first;cb.asyncResponse.is_last=this.transport.hasFinished();this.invokeResponseHandler(cb);if(this.transport.hasFinished())delete this.transport;};wa.prototype._handleJSONPAbort=function(){"use strict";this._invokeErrorHandler();delete this.transport;};wa.prototype._handleXHRResponse=function(ab){"use strict";var bb;if(this.getOption('suppressEvaluation')){bb={asyncResponse:new i(this,ab)};}else{var cb=ab.responseText,db=null;try{var fb=this._unshieldResponseText(cb);try{var gb=(eval)('('+fb+')');bb=this._interpretResponse(gb);}catch(eb){db='excep';bb={transportError:'eval() failed on async to '+this.getURI()};}}catch(eb){db='empty';bb={transportError:eb.message};}if(db){var hb=a.ErrorSignal;hb&&hb.sendErrorSignal('async_xport_resp',[(this._xFbServer?'1008_':'1012_')+db,this._xFbServer||'-',this.getURI(),cb.length,cb.substr(0,1600)].join(':'));}}this.invokeResponseHandler(bb);};wa.prototype._unshieldResponseText=function(ab){"use strict";var bb="for (;;);",cb=bb.length;if(ab.length<=cb)throw new Error('Response too short on async to '+this.getURI());var db=0;while(ab.charAt(db)==" "||ab.charAt(db)=="\n")db++;db&&ab.substring(db,db+cb)==bb;return ab.substring(db+cb);};wa.prototype._interpretResponse=function(ab){"use strict";if(ab.redirect)return {redirect:ab.redirect};var bb=new i(this);if(ab.__ar!=1){bb.payload=ab;}else ba(bb,ab);return {asyncResponse:bb};};wa.prototype._onStateChange=function(){"use strict";try{if(this.transport.readyState==4){wa._inflightCount--;wa._inflightPurge();try{if(typeof(this.transport.getResponseHeader)!=='undefined'&&this.transport.getResponseHeader('X-FB-Debug'))this._xFbServer=this.transport.getResponseHeader('X-FB-Debug');}catch(bb){}if(this.transport.status>=200&&this.transport.status<300){wa.lastSuccessTime=Date.now();this._handleXHRResponse(this.transport);}else if(x.webkit()&&(typeof(this.transport.status)=='undefined')){this._invokeErrorHandler(1002);}else if(h.retryOnNetworkError&&sa(this.transport)&&this.remainingRetries>0&&!this._requestTimeout){this.remainingRetries--;delete this.transport;this.send(true);return;}else this._invokeErrorHandler();if(this.getOption('asynchronous')!==false)delete this.transport;}}catch(ab){if(pa())return;delete this.transport;if(this.remainingRetries>0){this.remainingRetries--;this.send(true);}else{!this.getOption('suppressErrorAlerts');var cb=a.ErrorSignal;cb&&cb.sendErrorSignal('async_xport_resp',[1007,this._xFbServer||'-',this.getURI(),ab.message].join(':'));this._invokeErrorHandler(1007);}}};wa.prototype._isMultiplexable=function(){"use strict";if(this.getOption('jsonp')||this.getOption('useIframeTransport'))return false;if(!y(this.uri))return false;if(!this.getOption('asynchronous'))return false;return true;};wa.prototype.handleResponse=function(ab){"use strict";var bb=this._interpretResponse(ab);this.invokeResponseHandler(bb);};wa.prototype.setMethod=function(ab){"use strict";this.method=ab.toString().toUpperCase();return this;};wa.prototype.getMethod=function(){"use strict";return this.method;};wa.prototype.setData=function(ab){"use strict";this.data=ab;return this;};wa.prototype.setRequestHeader=function(ab,bb){"use strict";this.headers[ab]=bb;return this;};wa.prototype.setRawData=function(ab){"use strict";this.rawData=ab;return this;};wa.prototype.getData=function(){"use strict";return this.data;};wa.prototype.setContextData=function(ab,bb,cb){"use strict";cb=cb===(void 0)?true:cb;if(cb)this.context['_log_'+ab]=bb;return this;};wa.prototype._setUserActionID=function(){"use strict";var ab=a.SessionName;this.userActionID=(ab&&ab.getName()||'-')+'/-';};wa.prototype.setURI=function(ab){"use strict";var bb=w(ab);if(this.getOption('useIframeTransport')&&!y(bb))return this;if(!this._allowCrossOrigin&&!this.getOption('jsonp')&&!this.getOption('useIframeTransport')&&!bb.isSameOrigin())return this;this._setUserActionID();if(!ab||bb.isEmpty()){var cb=a.ErrorSignal,db=a.getErrorStack;if(cb&&db){var eb={err_code:1013,vip:'-',duration:0,xfb_ip:'-',path:window.location.href,aid:this.userActionID};cb.sendErrorSignal('async_error',JSON.stringify(eb));cb.sendErrorSignal('async_xport_stack',[1013,window.location.href,null,db()].join(':'));}return this;}this.uri=bb;return this;};wa.prototype.getURI=function(){"use strict";return this.uri.toString();};wa.prototype.setInitialHandler=function(ab){"use strict";this.initialHandler=ab;return this;};wa.prototype.setHandler=function(ab){"use strict";if(ta(ab))this.handler=ab;return this;};wa.prototype.getHandler=function(){"use strict";return this.handler||ca;};wa.prototype.setUploadProgressHandler=function(ab){"use strict";if(ta(ab))this.uploadProgressHandler=ab;return this;};wa.prototype.setErrorHandler=function(ab){"use strict";if(ta(ab))this.errorHandler=ab;return this;};wa.prototype.setTransportErrorHandler=function(ab){"use strict";this.transportErrorHandler=ab;return this;};wa.prototype.getErrorHandler=function(){"use strict";return this.errorHandler;};wa.prototype.getTransportErrorHandler=function(){"use strict";return this.transportErrorHandler;};wa.prototype.setTimeoutHandler=function(ab,bb){"use strict";if(ta(bb)){this.timeout=ab;this.timeoutHandler=bb;}return this;};wa.prototype.resetTimeout=function(ab){"use strict";if(!(this.timeoutHandler===null))if(ab===null){this.timeout=null;clearTimeout(this.timer);this.timer=null;}else{var bb=!this._allowCrossPageTransition;this.timeout=ab;clearTimeout(this.timer);if(bb){this.timer=setTimeout(this._handleTimeout.bind(this),this.timeout);}else this.timer=na(this._handleTimeout.bind(this),this.timeout);}return this;};wa.prototype._handleTimeout=function(){"use strict";this._requestTimeout=true;this.abandon();this.timeoutHandler(this);};wa.prototype.setNewSerial=function(){"use strict";this.id=++ua;return this;};wa.prototype.setInterceptHandler=function(ab){"use strict";this.interceptHandler=ab;return this;};wa.prototype.setFinallyHandler=function(ab){"use strict";this.finallyHandler=ab;return this;};wa.prototype.setAbortHandler=function(ab){"use strict";this.abortHandler=ab;return this;};wa.prototype.getServerDialogCancelHandler=function(){"use strict";return this.serverDialogCancelHandler;};wa.prototype.setServerDialogCancelHandler=function(ab){"use strict";this.serverDialogCancelHandler=ab;return this;};wa.prototype.setPreBootloadHandler=function(ab){"use strict";this.preBootloadHandler=ab;return this;};wa.prototype.setReadOnly=function(ab){"use strict";if(!(typeof(ab)!='boolean'))this.readOnly=ab;return this;};wa.prototype.setFBMLForm=function(){"use strict";this.writeRequiredParams=["fb_sig"];return this;};wa.prototype.getReadOnly=function(){"use strict";return this.readOnly;};wa.prototype.setRelativeTo=function(ab){"use strict";this.relativeTo=ab;return this;};wa.prototype.getRelativeTo=function(){"use strict";return this.relativeTo;};wa.prototype.setStatusClass=function(ab){"use strict";this.statusClass=ab;return this;};wa.prototype.setStatusElement=function(ab){"use strict";this.statusElement=ab;return this;};wa.prototype.getStatusElement=function(){"use strict";return ga(this.statusElement);};wa.prototype._isRelevant=function(){"use strict";if(this._allowCrossPageTransition)return true;if(!this.id)return true;return this.id>va;};wa.prototype.clearStatusIndicator=function(){"use strict";var ab=this.getStatusElement();if(ab){k.removeClass(ab,'async_saving');k.removeClass(ab,this.statusClass);}};wa.prototype.addStatusIndicator=function(){"use strict";var ab=this.getStatusElement();if(ab){k.addClass(ab,'async_saving');k.addClass(ab,this.statusClass);}};wa.prototype.specifiesWriteRequiredParams=function(){"use strict";return this.writeRequiredParams.every(function(ab){this.data[ab]=this.data[ab]||m[ab]||(ga(ab)||{}).value;if(this.data[ab]!==(void 0))return true;return false;},this);};wa.prototype.setOption=function(ab,bb){"use strict";if(typeof(this.option[ab])!='undefined')this.option[ab]=bb;return this;};wa.prototype.getOption=function(ab){"use strict";typeof(this.option[ab])=='undefined';return this.option[ab];};wa.prototype.abort=function(){"use strict";if(this.transport){var ab=this.getTransportErrorHandler();this.setOption('suppressErrorAlerts',true);this.setTransportErrorHandler(ca);this._requestAborted=true;this.transport.abort();this.setTransportErrorHandler(ab);}this.abortHandler();za.unschedule(this);};wa.prototype.abandon=function(){"use strict";clearTimeout(this.timer);this.setOption('suppressErrorAlerts',true).setHandler(ca).setErrorHandler(ca).setTransportErrorHandler(ca);if(this.transport){this._requestAborted=true;this.transport.abort();}this.abortHandler();za.unschedule(this);};wa.prototype.setNectarData=function(ab){"use strict";if(ab){if(this.data.nctr===(void 0))this.data.nctr={};ba(this.data.nctr,ab);}return this;};wa.prototype.setNectarModuleDataSafe=function(ab){"use strict";if(this.setNectarModuleData)this.setNectarModuleData(ab);return this;};wa.prototype.setNectarImpressionIdSafe=function(){"use strict";if(this.setNectarImpressionId)this.setNectarImpressionId();return this;};wa.prototype.setAllowCrossPageTransition=function(ab){"use strict";this._allowCrossPageTransition=!!ab;if(this.timer)this.resetTimeout(this.timeout);return this;};wa.prototype.setAllowIrrelevantRequests=function(ab){"use strict";this._allowIrrelevantRequests=ab;return this;};wa.prototype.setAllowCrossOrigin=function(ab){"use strict";this._allowCrossOrigin=ab;return this;};wa.prototype.setAllowCredentials=function(ab){"use strict";this._allowCredentials=ab;return this;};wa.prototype.setIsBackgroundRequest=function(ab){"use strict";this._isBackgroundRequest=ab;return this;};wa.prototype.send=function(ab){"use strict";ab=ab||false;if(!this.uri)return false;!this.errorHandler&&!this.getOption('suppressErrorHandlerWarning');if(this.getOption('jsonp')&&this.method!='GET')this.setMethod('GET');if(this.getOption('useIframeTransport')&&this.method!='GET')this.setMethod('GET');this.timeoutHandler!==null&&(this.getOption('jsonp')||this.getOption('useIframeTransport'));if(!this.getReadOnly()){this.specifiesWriteRequiredParams();if(this.method!='POST')return false;}ba(this.data,ha(this.method));if(!la(this.context)){ba(this.data,this.context);this.data.ajax_log=1;}if(m.force_param)ba(this.data,m.force_param);this._setUserActionID();if(this.getOption('bundle')&&this._isMultiplexable()){za.schedule(this);return true;}this.setNewSerial();if(!this.getOption('asynchronous'))this.uri.addQueryData({__s:1});g.inform('AsyncRequest/send',{request:this});var bb,cb;if(this.method=='GET'||this.rawData){bb=this.uri.addQueryData(this.data).toString();cb=this.rawData||'';}else{if(this._allowCrossOrigin)this.uri.addQueryData({__a:1});bb=this.uri.toString();cb=s.serialize(this.data);}if(this.transport)return false;if(this.getOption('jsonp')||this.getOption('useIframeTransport')){d(['JSONPTransport'],function(gb){var hb=new gb(this.getOption('jsonp')?'jsonp':'iframe',this.uri);this.setJSONPTransport(hb);hb.send();}.bind(this));return true;}var db=ia();if(!db)return false;db.onreadystatechange=v.guard(this._onStateChange.bind(this),'XHR.onreadystatechange');if(this.uploadProgressHandler&&qa(db))db.upload.onprogress=this.uploadProgressHandler.bind(this);if(!ab)this.remainingRetries=this.getOption('retries');if(a.ErrorSignal)this._sendTimeStamp=this._sendTimeStamp||Date.now();this.transport=db;try{this.transport.open(this.method,bb,this.getOption('asynchronous'));}catch(eb){return false;}if(!this.uri.isSameOrigin()&&!this.getOption('jsonp')&&!this.getOption('useIframeTransport')){if(!ra(this.transport))return false;if((y(this.uri)||z(this.uri))&&this._allowCredentials!==false)this.transport.withCredentials=true;}if(this.method=='POST'&&!this.rawData)this.transport.setRequestHeader('Content-Type','application/x-www-form-urlencoded');if(this._isBackgroundRequest)this.transport.setRequestHeader('X_FB_BACKGROUND_STATE','1');g.inform('AsyncRequest/will_send',{request:this});for(var fb in this.headers)if(this.headers.hasOwnProperty(fb))this.transport.setRequestHeader(fb,this.headers[fb]);this.addStatusIndicator();this.transport.send(cb);if(this.timeout!==null)this.resetTimeout(this.timeout);wa._inflightCount++;wa._inflightAdd(this);return true;};wa._inflightAdd=function(ab){"use strict";this._inflight.push(ab);};wa._inflightPurge=function(){"use strict";wa._inflight=wa._inflight.filter(function(ab){return ab.transport&&ab.transport.readyState<4;});};wa.bootstrap=function(ab,bb,cb){"use strict";var db='GET',eb=true,fb={};if(cb||bb&&(bb.rel=='async-post')){db='POST';eb=false;if(ab){ab=w(ab);fb=ab.getQueryData();ab.setQueryData({});}}var gb=r.byClass(bb,'stat_elem')||bb;if(gb&&k.hasClass(gb,'async_saving'))return false;var hb=new wa(ab).setReadOnly(eb).setMethod(db).setData(fb).setNectarModuleDataSafe(bb).setRelativeTo(bb);if(bb){hb.setHandler(function(jb){o.fire(bb,'success',{response:jb});});hb.setErrorHandler(function(jb){if(o.fire(bb,'error',{response:jb})!==false)i.defaultErrorHandler(jb);});}if(gb){hb.setStatusElement(gb);var ib=gb.getAttribute('data-status-class');ib&&hb.setStatusClass(ib);}hb.send();return false;};wa.post=function(ab,bb){"use strict";new wa(ab).setReadOnly(false).setMethod('POST').setData(bb).send();return false;};wa.getLastID=function(){"use strict";return ua;};wa.getInflightCount=function(){"use strict";return this._inflightCount;};wa._inflightEnable=function(){"use strict";if(x.ie())t.onUnload(function(){wa._inflight.forEach(function(ab){if(ab.transport&&ab.transport.readyState<4){ab.transport.abort();delete ab.transport;}});});};ba(wa,{suppressOnloadToken:{},_inflight:[],_inflightCount:0,_inflightAdd:ca,_inflightPurge:ca});var xa,ya=[];function za(){"use strict";this._requests=[];}za.prototype.add=function(ab){"use strict";this._requests.push(ab);};za.prototype.remove=function(ab){"use strict";var bb=this._requests,cb=this._requestsSent;for(var db=0,eb=bb.length;db<eb;db++)if(bb[db]===ab)if(cb){bb[db]=null;}else bb.splice(db,1);};za.prototype.send=function(){"use strict";ka(!this._requestsSent);this._requestsSent=true;this._wrapperRequest=null;var ab=this._requests;if(!ab.length)return;var bb;if(ab.length===1){bb=ab[0];}else{var cb=ab.map(function(db){return [db.uri.getPath(),s.serialize(db.data)];});bb=this._wrapperRequest=new wa('/ajax/proxy.php').setAllowCrossPageTransition(true).setData({data:cb}).setHandler(this._handler.bind(this)).setTransportErrorHandler(this._transportErrorHandler.bind(this));}bb.setOption('bundle',false).send();};za.prototype._handler=function(ab){"use strict";var bb=ab.getPayload().responses;if(bb.length!==this._requests.length)return;for(var cb=0;cb<this._requests.length;cb++){var db=this._requests[cb];if(db===null)continue;var eb=db.uri.getPath();if(this._wrapperRequest)db.id=this._wrapperRequest.id;if(bb[cb][0]!==eb){db.invokeResponseHandler({transportError:'Wrong response order in bundled request to '+eb});continue;}db.handleResponse(bb[cb][1]);}ya.splice(ya.indexOf(this,1));};za.prototype._transportErrorHandler=function(ab){"use strict";var bb={transportError:ab.errorDescription},cb=this._requests.map(function(db){if(this._wrapperRequest)db.id=this._wrapperRequest.id;db.invokeResponseHandler(bb);return db.uri.getPath();},this);};za.schedule=function(ab){"use strict";if(!xa){xa=new za();ya.push(xa);setTimeout(function(){xa.send();xa=null;},0);}xa.add(ab);return xa;};za.unschedule=function(ab){"use strict";ya.forEach(function(bb){bb.remove(ab);});};a.AsyncRequest=wa;e.exports=wa;},null);
__d("DOMControl",["DataStore","$"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();function i(j){"use strict";this.root=h(j);this.updating=false;g.set(j,'DOMControl',this);}i.prototype.getRoot=function(){"use strict";return this.root;};i.prototype.beginUpdate=function(){"use strict";if(this.updating)return false;this.updating=true;return true;};i.prototype.endUpdate=function(){"use strict";this.updating=false;};i.prototype.update=function(j){"use strict";if(!this.beginUpdate())return this;this.onupdate(j);this.endUpdate();};i.prototype.onupdate=function(j){"use strict";};i.getInstance=function(j){"use strict";return g.get(j,'DOMControl');};e.exports=i;},null);
__d("cx",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h){throw new Error('cx: Unexpected class transformation.');}e.exports=g;},null);
__d("Focus",["CSS","DOM","Event","Run","cx","ge"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m={},n,o={set:function(s){try{s.tabIndex=s.tabIndex;s.focus();}catch(t){}},setWithoutOutline:function(s){g.addClass(s,"_5f0v");var t=i.listen(s,'blur',function(){g.removeClass(s,"_5f0v");t.remove();});o.set(s);},relocate:function(s,t){function u(v){g.conditionClass(t,"_3oxt",v);}o.listen(s,u);g.addClass(s,"_5f0v");},listen:function(s,t){p();var u=h.getID(s);m[u]=t;j.onLeave(r.bind(null,u));}};function p(){if(n)return;i.listen(document.documentElement,'focusout',q);i.listen(document.documentElement,'focusin',q);n=true;}function q(event){var s=event.getTarget();if(typeof m[s.id]==='function'){var t=event.type==='focusin'||event.type==='focus';m[s.id](t);}}function r(s){if(m[s]&&!l(s))delete m[s];}e.exports=o;},null);
__d("InputSelection",["DOM","Focus"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i={get:function(j){try{if(typeof j.selectionStart==='number')return {start:j.selectionStart,end:j.selectionEnd};}catch(k){return {start:0,end:0};}if(!document.selection)return {start:0,end:0};var l=document.selection.createRange();if(l.parentElement()!==j)return {start:0,end:0};var m=j.value.length;if(g.isNodeOfType(j,'input')){return {start:-l.moveStart('character',-m),end:-l.moveEnd('character',-m)};}else{var n=l.duplicate();n.moveToElementText(j);n.setEndPoint('StartToEnd',l);var o=m-n.text.length;n.setEndPoint('StartToStart',l);return {start:m-n.text.length,end:o};}},set:function(j,k,l){if(typeof l=='undefined')l=k;if(document.selection){if(j.tagName=='TEXTAREA'){var m=(j.value.slice(0,k).match(/\r/g)||[]).length,n=(j.value.slice(k,l).match(/\r/g)||[]).length;k-=m;l-=m+n;}var o=j.createTextRange();o.collapse(true);o.moveStart('character',k);o.moveEnd('character',l-k);o.select();}else{j.selectionStart=k;j.selectionEnd=Math.min(l,j.value.length);h.set(j);}}};e.exports=i;},null);
__d("enforceMaxLength",["DOM","Event","Input","InputSelection"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=function(n,o){var p=i.getValue(n),q=p.length,r=q-o;if(r>0){var s,t;try{s=j.get(n);t=s.end;}catch(u){s=null;t=0;}if(t>=r)q=t;var v=q-r;if(v&&(p.charCodeAt(v-1)&64512)===55296)v--;t=Math.min(t,v);i.setValue(n,p.slice(0,v)+p.slice(q));if(s)j.set(n,Math.min(s.start,t),t);}},l=function(event){var n=event.getTarget(),o=n.getAttribute&&parseInt(n.getAttribute('maxlength'),10);if(o>0&&g.isNodeOfType(n,['input','textarea']))setTimeout(k.bind(null,n,o),0);},m='maxLength' in g.create('input')&&'maxLength' in g.create('textarea');if(!m)h.listen(document.documentElement,{keydown:l,paste:l});e.exports=k;},null);
__d("Input",["CSS","DOMQuery","DOMControl"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=function(l){var m=l.getAttribute('maxlength');if(m&&m>0)d(['enforceMaxLength'],function(n){n(l,m);});},k={isWhiteSpaceOnly:function(l){return !(/\S/).test(l||'');},isEmpty:function(l){return k.isWhiteSpaceOnly(l.value);},getValue:function(l){return k.isEmpty(l)?'':l.value;},getValueRaw:function(l){return l.value;},setValue:function(l,m){l.value=m||'';j(l);var n=i.getInstance(l);n&&n.resetHeight&&n.resetHeight();},setPlaceholder:function(l,m){l.setAttribute('aria-label',m);l.setAttribute('placeholder',m);},reset:function(l){l.value='';l.style.height='';},setSubmitOnEnter:function(l,m){g.conditionClass(l,'enter_submit',m);},getSubmitOnEnter:function(l){return g.hasClass(l,'enter_submit');},setMaxLength:function(l,m){if(m>0){l.setAttribute('maxlength',m);j(l);}else l.removeAttribute('maxlength');}};e.exports=k;},null);
__d("getElementRect",["containsNode"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(i){var j=document.documentElement;if(!('getBoundingClientRect' in i)||!g(j,i))return {left:0,right:0,top:0,bottom:0};var k=i.getBoundingClientRect();return {left:Math.round(k.left)-j.clientLeft,right:Math.round(k.right)-j.clientLeft,top:Math.round(k.top)-j.clientTop,bottom:Math.round(k.bottom)-j.clientTop};}e.exports=h;},null);
__d("getElementPosition",["getElementRect"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(i){var j=g(i);return {x:j.left,y:j.top,width:j.right-j.left,height:j.bottom-j.top};}e.exports=h;},null);
__d("trackReferrer",["Parent"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(i,j){i=g.byAttribute(i,'data-referrer');if(i){var k=/^(?:(?:[^:\/?#]+):)?(?:\/\/(?:[^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/.exec(j)[1]||'';if(!k)return;var l=k+'|'+i.getAttribute('data-referrer'),m=new Date();m.setTime(Date.now()+1000);document.cookie="x-src="+encodeURIComponent(l)+"; "+"expires="+m.toGMTString()+";path=/; domain="+window.location.hostname.replace(/^.*(\.facebook\..*)$/i,'$1');}return i;}e.exports=h;},null);
__d("Form",["AsyncRequest","AsyncResponse","CSS","DataStore","DOM","DOMQuery","DTSG","Event","Input","LSD","Parent","PHPQuerySerializer","URI","createArrayFromMixed","getElementPosition","trackReferrer"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){b.__markCompiled&&b.__markCompiled();var w='FileList' in window,x='FormData' in window;function y(aa){var ba={};r.serialize(aa).split('&').forEach(function(ca){if(ca){var da=/^([^=]*)(?:=(.*))?$/.exec(ca),ea=s.decodeComponent(da[1]),fa=da[2]!==(void 0),ga=fa?s.decodeComponent(da[2]):null;ba[ea]=ga;}});return ba;}var z={getInputs:function(aa){aa=aa||document;return [].concat(t(l.scry(aa,'input')),t(l.scry(aa,'select')),t(l.scry(aa,'textarea')),t(l.scry(aa,'button')));},getInputsByName:function(aa){var ba={};z.getInputs(aa).forEach(function(ca){var da=ba[ca.name];ba[ca.name]=typeof da==='undefined'?ca:[ca].concat(da);});return ba;},getSelectValue:function(aa){return aa.options[aa.selectedIndex].value;},setSelectValue:function(aa,ba){for(var ca=0;ca<aa.options.length;++ca)if(aa.options[ca].value==ba){aa.selectedIndex=ca;break;}},getRadioValue:function(aa){for(var ba=0;ba<aa.length;ba++)if(aa[ba].checked)return aa[ba].value;return null;},getElements:function(aa){return t(aa.tagName=='FORM'&&aa.elements!=aa?aa.elements:z.getInputs(aa));},getAttribute:function(aa,ba){return (aa.getAttributeNode(ba)||{}).value||null;},setDisabled:function(aa,ba){z.getElements(aa).forEach(function(ca){if(ca.disabled!==(void 0)){var da=j.get(ca,'origDisabledState');if(ba){if(da===(void 0))j.set(ca,'origDisabledState',ca.disabled);ca.disabled=ba;}else if(da===false)ca.disabled=false;}});},bootstrap:function(aa,ba){var ca=(z.getAttribute(aa,'method')||'GET').toUpperCase();ba=q.byTag(ba,'button')||ba;var da=q.byClass(ba,'stat_elem')||aa;if(i.hasClass(da,'async_saving'))return;if(ba&&(ba.form!==aa||(ba.nodeName!='INPUT'&&ba.nodeName!='BUTTON')||ba.type!='submit')){var ea=l.scry(aa,'.enter_submit_target')[0];ea&&(ba=ea);}var fa=z.serialize(aa,ba);z.setDisabled(aa,true);var ga=z.getAttribute(aa,'ajaxify')||z.getAttribute(aa,'action');v(aa,ga);var ha=new g(ga);ha.setData(fa).setNectarModuleDataSafe(aa).setReadOnly(ca=='GET').setMethod(ca).setRelativeTo(aa).setStatusElement(da).setInitialHandler(z.setDisabled.bind(null,aa,false)).setHandler(function(ia){n.fire(aa,'success',{response:ia});}).setErrorHandler(function(ia){if(n.fire(aa,'error',{response:ia})!==false)h.defaultErrorHandler(ia);}).setFinallyHandler(z.setDisabled.bind(null,aa,false)).send();},forEachValue:function(aa,ba,ca){z.getElements(aa).forEach(function(da){if(!da.name||da.disabled)return;if(da.type==='submit')return;if(da.type==='reset'||da.type==='button'||da.type==='image')return;if((da.type==='radio'||da.type==='checkbox')&&!da.checked)return;if(da.nodeName==='SELECT'){for(var ea=0,fa=da.options.length;ea<fa;ea++){var ga=da.options[ea];if(ga.selected)ca('select',da.name,ga.value);}return;}if(da.type==='file'){if(w){var ha=da.files;for(var ia=0;ia<ha.length;ia++)ca('file',da.name,ha.item(ia));}return;}ca(da.type,da.name,o.getValue(da));});if(ba&&ba.name&&ba.type==='submit'&&l.contains(aa,ba)&&l.isNodeOfType(ba,['input','button']))ca('submit',ba.name,ba.value);},createFormData:function(aa,ba){if(!x)return null;var ca=new FormData();if(aa)if(l.isNode(aa)){z.forEachValue(aa,ba,function(fa,ga,ha){ca.append(ga,ha);});}else{var da=y(aa);for(var ea in da)if(da[ea]==null){ca.append(ea,'');}else ca.append(ea,da[ea]);}return ca;},serialize:function(aa,ba){var ca={};z.forEachValue(aa,ba,function(da,ea,fa){if(da==='file')return;z._serializeHelper(ca,ea,fa);});return z._serializeFix(ca);},_serializeHelper:function(aa,ba,ca){var da=Object.prototype.hasOwnProperty,ea=/([^\]]+)\[([^\]]*)\](.*)/.exec(ba);if(ea){if(!aa[ea[1]]||!da.call(aa,ea[1])){var fa;aa[ea[1]]=fa={};if(aa[ea[1]]!==fa)return;}var ga=0;if(ea[2]===''){while(aa[ea[1]][ga]!==(void 0))ga++;}else ga=ea[2];if(ea[3]===''){aa[ea[1]][ga]=ca;}else z._serializeHelper(aa[ea[1]],ga.concat(ea[3]),ca);}else aa[ba]=ca;},_serializeFix:function(aa){for(var ba in aa)if(aa[ba] instanceof Object)aa[ba]=z._serializeFix(aa[ba]);var ca=Object.keys(aa);if(ca.length===0||ca.some(isNaN))return aa;ca.sort(function(fa,ga){return fa-ga;});var da=0,ea=ca.every(function(fa){return +fa===da++;});if(ea)return ca.map(function(fa){return aa[fa];});return aa;},post:function(aa,ba,ca){var da=document.createElement('form');da.action=aa.toString();da.method='POST';da.style.display='none';if(ca)da.target=ca;ba.fb_dtsg=m.getToken();if(p.token)ba.lsd=p.token;z.createHiddenInputs(ba,da);l.getRootElement().appendChild(da);da.submit();return false;},createHiddenInputs:function(aa,ba,ca,da){ca=ca||{};var ea=y(aa);for(var fa in ea){if(ea[fa]===null)continue;if(ca[fa]&&da){ca[fa].value=ea[fa];}else{var ga=k.create('input',{type:'hidden',name:fa,value:ea[fa]});ca[fa]=ga;ba.appendChild(ga);}}return ca;},getFirstElement:function(aa,ba){ba=ba||['input[type="text"]','textarea','input[type="password"]','input[type="button"]','input[type="submit"]'];var ca=[];for(var da=0;da<ba.length;da++){ca=l.scry(aa,ba[da]);for(var ea=0;ea<ca.length;ea++){var fa=ca[ea];try{var ha=u(fa);if(ha.y>0&&ha.x>0)return fa;}catch(ga){}}}return null;},focusFirst:function(aa){var ba=z.getFirstElement(aa);if(ba){ba.focus();return true;}return false;}};e.exports=z;},null);
__d("EmbedLikeButton",["AsyncFormRequestUtils","ClientIDs","CSS","DOM","DOMQuery","Event","Form"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();window.resetConfirmStoryLike=function(o){i.show(k.find(document,'#likeStory_'+o));j.remove(k.find(document,'#confirmStory_'+o));};var n={addClientId:function(o){o.setAttribute('value',h.getNewClientID());},init:function(o,p,q,r){var s=function(t){return m.bootstrap(r);};l.listen(o,'click',s);l.listen(p,'click',s);g.subscribe(r,'send',function(t){var u=q.getAttribute('value')==='1';if(u){i.hide(o);i.show(p);}else{i.hide(p);i.show(o);}q.setAttribute('value',u?'':'1');});}};e.exports=n;},null);
__d("camelize",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g=/-(.)/g;function h(i){return i.replace(g,function(j,k){return k.toUpperCase();});}e.exports=h;},null);
__d("getOpacityStyleName",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g=false,h=null;function i(){if(!g){if('opacity' in document.body.style){h='opacity';}else{var j=document.createElement('div');j.style.filter='alpha(opacity=100)';if(j.style.filter)h='filter';j=null;}g=true;}return h;}e.exports=i;},null);
__d("hyphenate",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g=/([A-Z])/g;function h(i){return i.replace(g,'-$1').toLowerCase();}e.exports=h;},null);
__d("getStyleProperty",["camelize","hyphenate"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();function i(k){return k==null?k:String(k);}function j(k,l){var m;if(window.getComputedStyle){m=window.getComputedStyle(k,null);if(m)return i(m.getPropertyValue(h(l)));}if(document.defaultView&&document.defaultView.getComputedStyle){m=document.defaultView.getComputedStyle(k,null);if(m)return i(m.getPropertyValue(h(l)));if(l==='display')return 'none';}if(k.currentStyle){if(l==='float')return i(k.currentStyle.cssFloat||k.currentStyle.styleFloat);return i(k.currentStyle[g(l)]);}return i(k.style&&k.style[g(l)]);}e.exports=j;},null);
__d("Style-upstream",["camelize","containsNode","ex","getOpacityStyleName","getStyleProperty","hyphenate","invariant"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();function n(u,v){var w=t.get(u,v);return (w==='auto'||w==='scroll');}var o=new RegExp(('\\s*'+'([^\\s:]+)'+'\\s*:\\s*'+'([^;(\'"]*(?:(?:\\([^)]*\\)|"[^"]*"|\'[^\']*\')[^;(?:\'"]*)*)'+'(?:;|$)'),'g');function p(u){var v={};u.replace(o,function(w,x,y){v[x]=y;});return v;}function q(u){var v='';for(var w in u)if(u[w])v+=w+':'+u[w]+';';return v;}function r(u){return u!==''?'alpha(opacity='+u*100+')':'';}function s(u,v,w){switch(l(v)){case 'font-weight':case 'line-height':case 'opacity':case 'z-index':break;case 'width':case 'height':var x=parseInt(w,10)<0;m(!x);default:m(isNaN(w)||!w||w==='0');break;}}var t={set:function(u,v,w){s('Style.set',v,w);var x=u.style;switch(v){case 'opacity':if(j()==='filter'){x.filter=r(w);}else x.opacity=w;break;case 'float':x.cssFloat=x.styleFloat=w||'';break;default:try{x[g(v)]=w;}catch(y){throw new Error(i('Style.set: "%s" argument is invalid: %s',v,w));}}},apply:function(u,v){var w;for(w in v)s('Style.apply',w,v[w]);if('opacity' in v&&j()==='filter'){v.filter=r(v.opacity);delete v.opacity;}var x=p(u.style.cssText);for(w in v){var y=v[w];delete v[w];var z=l(w);for(var aa in x)if(aa===z||aa.indexOf(z+'-')===0)delete x[aa];v[z]=y;}Object.assign(x,v);u.style.cssText=q(x);},get:k,getFloat:function(u,v){return parseFloat(t.get(u,v),10);},getOpacity:function(u){if(j()==='filter'){var v=t.get(u,'filter');if(v){var w=/(\d+(?:\.\d+)?)/.exec(v);if(w)return parseFloat(w.pop())/100;}}return t.getFloat(u,'opacity')||1;},isFixed:function(u){while(h(document.body,u)){if(t.get(u,'position')==='fixed')return true;u=u.parentNode;}return false;},getScrollParent:function(u){if(!u)return null;while(u&&u!==document.body){if(n(u,'overflow')||n(u,'overflowY')||n(u,'overflowX'))return u;u=u.parentNode;}return window;}};e.exports=t;},null);
__d("merge",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();'use strict';var g=function(h,i){return Object.assign({},h,i);};e.exports=g;},null);
__d("Style",["Style-upstream","$","merge"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=i(g,{get:function(k,l){typeof k==='string';return g.get(h(k),l);},getFloat:function(k,l){typeof k==='string';return g.getFloat(h(k),l);}});e.exports=j;},null);
__d("FlipDirection",["DOM","Input","Style"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j={setDirection:function(k){var l=g.isNodeOfType(k,'input')&&(k.type=='text'),m=g.isNodeOfType(k,'textarea');if(!(l||m)||k.getAttribute('data-prevent-auto-flip'))return;var n=h.getValue(k),o=(k.style&&k.style.direction);if(!o){var p=0,q=true;for(var r=0;r<n.length;r++){var s=n.charCodeAt(r);if(s>=48){if(q){q=false;p++;}if(s>=1470&&s<=1920){i.set(k,'direction','rtl');k.setAttribute('dir','rtl');return;}if(p==5){i.set(k,'direction','ltr');k.setAttribute('dir','ltr');return;}}else q=true;}}else if(n.length===0){i.set(k,'direction','');k.removeAttribute('dir');}}};e.exports=j;},null);
__d("FlipDirectionOnKeypress",["Event","FlipDirection"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i=function(event){var j=event.getTarget();h.setDirection(j);};g.listen(document.documentElement,{keyup:i,input:i});},null);
__d("getActiveElement",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(){try{return document.activeElement||document.body;}catch(h){return document.body;}}e.exports=g;},null);
__d("FocusListener",["Arbiter","CSS","Event","Parent","getActiveElement"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l={expandInput:function(q){h.addClass(q,'child_is_active');h.addClass(q,'child_is_focused');h.addClass(q,'child_was_focused');g.inform('reflow');}};function m(q,r){if(r.getAttribute('data-silentfocuslistener'))return;var s=j.byClass(r,'focus_target');if(s)if('focus'==q||'focusin'==q){l.expandInput(s);}else{if(r.value==='')h.removeClass(s,'child_is_active');h.removeClass(s,'child_is_focused');}}var n=k();if(n)m('focus',n);function o(event){event=event||window.event;m(event.type,event.target||event.srcElement);}var p=document.documentElement;if(p.addEventListener){p.addEventListener('focus',o,true);p.addEventListener('blur',o,true);}else{p.attachEvent('onfocusin',o);p.attachEvent('onfocusout',o);}i.listen(document.documentElement,'submit',function(){});e.exports=l;},null);
__d("PluginMessage",["DOMEventListener"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={listen:function(){g.add(window,'message',function(event){if((/\.facebook\.com$/).test(event.origin)&&/^FB_POPUP:/.test(event.data)){var i=JSON.parse(event.data.substring(9));if('reload' in i&&/^https?:/.test(i.reload))document.location.replace(i.reload);}});}};e.exports=h;},null);
__d("getViewportDimensions",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(){var j;if(document.documentElement)j=document.documentElement.clientWidth;if(!j&&document.body)j=document.body.clientWidth;return j||0;}function h(){var j;if(document.documentElement)j=document.documentElement.clientHeight;if(!j&&document.body)j=document.body.clientHeight;return j||0;}function i(){return {width:window.innerWidth||g(),height:window.innerHeight||h()};}i.withoutScrollbars=function(){return {width:g(),height:h()};};e.exports=i;},null);
__d("DOMDimensions",["Style","getDocumentScrollElement","getViewportDimensions"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j={getElementDimensions:function(k){return {width:k.offsetWidth||0,height:k.offsetHeight||0};},getViewportDimensions:i,getViewportWithoutScrollbarDimensions:i.withoutScrollbars,getDocumentDimensions:function(k){var l=h(k),m=l.scrollWidth||0,n=l.scrollHeight||0;return {width:m,height:n};},measureElementBox:function(k,l,m,n,o){var p;switch(l){case 'left':case 'right':case 'top':case 'bottom':p=[l];break;case 'width':p=['left','right'];break;case 'height':p=['top','bottom'];break;default:throw Error('Invalid plane: '+l);}var q=function(r,s){var t=0;for(var u=0;u<p.length;u++)t+=parseInt(g.get(k,r+'-'+p[u]+s),10)||0;return t;};return (m?q('padding',''):0)+(n?q('border','-width'):0)+(o?q('margin',''):0);}};e.exports=j;},null);
__d("KeyStatus",["Event","ExecutionEnvironment"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i=null,j=null;function k(){if(!j)j=g.listen(window,'blur',function(){i=null;l();});}function l(){if(j){j.remove();j=null;}}function m(event){i=g.getKeyCode(event);k();}function n(){i=null;l();}if(h.canUseDOM){var o=document.documentElement;if(o.addEventListener){o.addEventListener('keydown',m,true);o.addEventListener('keyup',n,true);}else{o.attachEvent('onkeydown',m);o.attachEvent('onkeyup',n);}}var p={isKeyDown:function(){return !!i;},getKeyDownCode:function(){return i;}};e.exports=p;},null);
__d("BehaviorsMixin",["copyProperties"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(l){this._behavior=l;this._enabled=false;}g(h.prototype,{enable:function(){if(!this._enabled){this._enabled=true;this._behavior.enable();}},disable:function(){if(this._enabled){this._enabled=false;this._behavior.disable();}}});var i=1;function j(l){if(!l.__BEHAVIOR_ID)l.__BEHAVIOR_ID=i++;return l.__BEHAVIOR_ID;}var k={enableBehavior:function(l){if(!this._behaviors)this._behaviors={};var m=j(l);if(!this._behaviors[m])this._behaviors[m]=new h(new l(this));this._behaviors[m].enable();return this;},disableBehavior:function(l){if(this._behaviors){var m=j(l);if(this._behaviors[m])this._behaviors[m].disable();}return this;},enableBehaviors:function(l){l.forEach(this.enableBehavior,this);return this;},destroyBehaviors:function(){if(this._behaviors){for(var l in this._behaviors)this._behaviors[l].disable();this._behaviors={};}},hasBehavior:function(l){return this._behaviors&&(j(l) in this._behaviors);}};e.exports=k;},null);
__d("BootloadedReact",["Bootloader"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=function(j){g.loadModules(["React"],j);},i={isValidElement:function(j){return !!(j&&j._isReactElement);},createClass:function(j,k){h(function(l){var m=l.createClass(j);k&&k(m);});},render:function(j,k,l){h(function(m){var n=m.render(j,k);l&&l(n);});},unmountComponentAtNode:function(j,k){h(function(l){l.unmountComponentAtNode(j);k&&k();});}};e.exports=i;},null);
__d("ContextualThing",["CSS","DOM","ge"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j={register:function(k,l){k.setAttribute('data-ownerid',h.getID(l));},containsIncludingLayers:function(k,l){while(l){if(h.contains(k,l))return true;l=j.getContext(l);}return false;},getContext:function(k){var l;while(k){if(k.getAttribute&&(l=k.getAttribute('data-ownerid')))return i(l);k=k.parentNode;}return null;},parentByClass:function(k,l){var m;while(k&&!g.hasClass(k,l))if(k.getAttribute&&(m=k.getAttribute('data-ownerid'))){k=i(m);}else k=k.parentNode;return k;}};e.exports=j;},null);
__d("getElementText",["isElementNode","isTextNode"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i=null;function j(k){if(h(k)){return k.data;}else if(g(k)){if(i===null){var l=document.createElement('div');i=l.textContent!=null?'textContent':'innerText';}return k[i];}else return '';}e.exports=j;},null);
__d("KeyEventController",["DOMQuery","Event","Run","getElementText","isEmpty"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=null,m=['input','select','textarea','object','embed'],n={button:1,checkbox:1,radio:1,submit:1},o={BACKSPACE:[8],TAB:[9],RETURN:[13],ESCAPE:[27],LEFT:[37,63234],UP:[38,63232],RIGHT:[39,63235],DOWN:[40,63233],DELETE:[46],COMMA:[188],PERIOD:[190],SLASH:[191],'`':[192],'[':[219],']':[221],PAGE_UP:[33],PAGE_DOWN:[34],SPACE:[32],KP_DOT:[46,110]},p={8:1,9:1,13:1,27:1,32:1,37:1,63234:1,38:1,63232:1,39:1,63235:1,40:1,63233:1,46:1};function q(){"use strict";this.handlers={};document.onkeyup=this.onkeyevent.bind(this,'onkeyup');document.onkeydown=this.onkeyevent.bind(this,'onkeydown');document.onkeypress=this.onkeyevent.bind(this,'onkeypress');}q.prototype.mapKey=function(r){"use strict";if(r>=0&&r<=9){if(typeof(r)!='number')r=r.charCodeAt(0)-48;return [48+r,96+r];}var s=o[r.toUpperCase()];if(s)return s;return [r.toUpperCase().charCodeAt(0)];};q.prototype.onkeyevent=function(r,s){"use strict";s=h.$E(s);var t=this.handlers[s.keyCode]||this.handlers[s.which],u,v,w;if(t)for(var x=0;x<t.length;x++){u=t[x].callback;v=t[x].filter;try{if(!v||v(s,r)){w=u(s,r);if(w===false)return h.kill(s);}}catch(y){}}return true;};q.prototype.resetHandlers=function(){"use strict";this.handlers={};};q.getInstance=function(){"use strict";return l||(l=new q());};q.defaultFilter=function(event,r){"use strict";event=h.$E(event);return q.filterEventTypes(event,r)&&q.filterEventTargets(event,r)&&q.filterEventModifiers(event,r);};q.filterEventTypes=function(event,r){"use strict";if(r==='onkeydown')return true;return false;};q.filterEventTargets=function(event,r){"use strict";var s=event.getTarget(),t=(s.contentEditable==='true'||s.contentEditable==='plaintext-only');return (!(t||g.isNodeOfType(s,m))||s.type in n||(event.keyCode in p&&((g.isNodeOfType(s,['input','textarea'])&&s.value.length===0)||(t&&j(s).length===0))));};q.filterEventModifiers=function(event,r){"use strict";if(event.ctrlKey||event.altKey||event.metaKey||event.repeat)return false;return true;};q.registerKey=function(r,s,t,u){"use strict";if(t===(void 0))t=q.defaultFilter;var v=q.getInstance(),w=v.mapKey(r);if(k(v.handlers))i.onLeave(v.resetHandlers.bind(v));var x={};for(var y=0;y<w.length;y++){r=w[y];if(!v.handlers[r]||u)v.handlers[r]=[];var z={callback:s,filter:t};x[r]=z;v.handlers[r].push(z);}return {remove:function(){for(var aa in x){if(v.handlers[aa]&&v.handlers[aa].length){var ba=v.handlers[aa].indexOf(x[aa]);ba>=0&&v.handlers[aa].splice(ba,1);}delete x[aa];}}};};e.exports=q;},null);
__d("removeFromArray",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h,i){var j=h.indexOf(i);if(j!==-1)h.splice(j,1);}e.exports=g;},null);
__d("forEachObject",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();'use strict';var g=Object.prototype.hasOwnProperty;function h(i,j,k){for(var l in i)if(g.call(i,l))j.call(k,i[l],l,i);}e.exports=h;},null);
__d("TimerStorage",["forEachObject"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={TIMEOUT:'TIMEOUT',INTERVAL:'INTERVAL',IMMEDIATE:'IMMEDIATE',ANIMATION_FRAME:'ANIMATION_FRAME'},i={};g(h,function(k,l){return i[l]=[];});var j={push:function(k,l){i[k].push(l);},popAll:function(k,l){i[k].forEach(l);i[k].length=0;}};Object.assign(j,h);e.exports=j;},null);
/**
 * @generated SignedSource<<38c660df4077b7dc57a24ea3cec01c11>>
 *
 * !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
 * !! This file is a check-in of a static_upstream project!      !!
 * !!                                                            !!
 * !! You should not modify this file directly. Instead:         !!
 * !! 1) Use `fjs use-upstream` to temporarily replace this with !!
 * !!    the latest version from upstream.                       !!
 * !! 2) Make your changes, test them, etc.                      !!
 * !! 3) Use `fjs push-upstream` to copy your changes back to    !!
 * !!    static_upstream.                                        !!
 * !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
 *
 * Copyright (c) 2012 Barnesandnoble.com, llc, Donavon West, and Domenic
 * Denicola
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 *
 * @preserve-header
 * @providesModule ImmediateImplementation
 */__d("ImmediateImplementation",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();(function(g,h){"use strict";var i=1,j={},k={},l=k,m=false,n=g.document,o;function p(x){var y=x[0];x=Array.prototype.slice.call(x,1);j[i]=function(){y.apply(h,x);};l=(l.next={handle:i++});return l.handle;}function q(){var x,y;while(!m&&(x=k.next)){k=x;if((y=j[x.handle])){m=true;try{y();m=false;}finally{r(x.handle);if(m){m=false;if(k.next)o(q);}}}}}function r(x){delete j[x];}function s(){if(g.postMessage&&!g.importScripts){var x=true,y=function(){x=false;if(g.removeEventListener){g.removeEventListener("message",y,false);}else g.detachEvent("onmessage",y);};if(g.addEventListener){g.addEventListener("message",y,false);}else if(g.attachEvent){g.attachEvent("onmessage",y);}else return false;g.postMessage("","*");return x;}}function t(){var x="setImmediate$"+Math.random()+"$",y=function(event){if(event.source===g&&typeof event.data==="string"&&event.data.indexOf(x)===0)q();};if(g.addEventListener){g.addEventListener("message",y,false);}else g.attachEvent("onmessage",y);o=function(){var z=p(arguments);g.postMessage(x+z,"*");return z;};}function u(){var x=new MessageChannel();x.port1.onmessage=q;o=function(){var y=p(arguments);x.port2.postMessage(y);return y;};}function v(){var x=n.documentElement;o=function(){var y=p(arguments),z=n.createElement("script");z.onreadystatechange=function(){z.onreadystatechange=null;x.removeChild(z);z=null;q();};x.appendChild(z);return y;};}function w(){o=function(){setTimeout(q,0);return p(arguments);};}if(s()){t();}else if(g.MessageChannel){u();}else if(n&&n.createElement&&"onreadystatechange" in n.createElement("script")){v();}else w();f.setImmediate=o;f.clearImmediate=r;}(Function("return this")()));},null);
__d("setImmediatePolyfill",["invariant","ImmediateImplementation"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=a.setImmediate;if(!h){var i=b('ImmediateImplementation');h=i.setImmediate;}function j(){for(var k=[],l=0,m=arguments.length;l<m;l++)k.push(arguments[l]);g(typeof k[0]==='function');return h.apply(null,k);}e.exports=j;},null);
__d("setImmediateAcrossTransitions",["TimeSlice","setImmediatePolyfill"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();e.exports=function(){for(var i=[],j=0,k=arguments.length;j<k;j++)i.push(arguments[j]);i[0]=g.guard(i[0],'setImmediate');return h.apply(a,i);};},null);
__d("setImmediate",["TimerStorage","setImmediateAcrossTransitions"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();e.exports=function(){for(var i=[],j=0,k=arguments.length;j<k;j++)i.push(arguments[j]);var l=h.apply(a,i);g.push(g.IMMEDIATE,l);return l;};},null);
__d("Layer",["ArbiterMixin","BehaviorsMixin","BootloadedReact","ContextualThing","CSS","DataStore","DOM","Event","HTML","KeyEventController","Parent","Style","copyProperties","cx","ge","mixin","removeFromArray","setImmediate","KeyStatus"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){b.__markCompiled&&b.__markCompiled();b('KeyStatus');var y=[],z=v(g,h);for(var aa in z)if(z.hasOwnProperty(aa))ca[aa]=z[aa];var ba=z===null?null:z.prototype;ca.prototype=Object.create(ba);ca.prototype.constructor=ca;ca.__superConstructor__=z;function ca(fa,ga){"use strict";this._config=fa||{};if(ga){this._configure(this._config,ga);var ha=this._config.addedBehaviors||[];this.enableBehaviors(this._getDefaultBehaviors().concat(ha));}}ca.prototype.init=function(fa){"use strict";this._configure(this._config,fa);var ga=this._config.addedBehaviors||[];this.enableBehaviors(this._getDefaultBehaviors().concat(ga));this._initialized=true;return this;};ca.prototype._configure=function(fa,ga){"use strict";if(ga){var ha=m.isNode(ga),ia=typeof ga==='string'||o.isHTML(ga);this.containsReactComponent=i.isValidElement(ga);if(ia){ga=o(ga).getRootNode();}else if(this.containsReactComponent){var ja=document.createElement('div');i.render(ga,ja);ga=this._reactContainer=ja;}}this._root=this._buildWrapper(fa,ga);if(fa.attributes)m.setAttributes(this._root,fa.attributes);if(fa.classNames)fa.classNames.forEach(k.addClass.bind(null,this._root));k.addClass(this._root,'uiLayer');if(fa.causalElement)this._causalElement=u(fa.causalElement);if(fa.permanent)this._permanent=fa.permanent;l.set(this._root,'layer',this);};ca.prototype._getDefaultBehaviors=function(){"use strict";return [];};ca.prototype.getCausalElement=function(){"use strict";return this._causalElement;};ca.prototype.setCausalElement=function(fa){"use strict";this._causalElement=fa;return this;};ca.prototype.getInsertParent=function(){"use strict";return this._insertParent||document.body;};ca.prototype.getRoot=function(){"use strict";return this._root;};ca.prototype.getContentRoot=function(){"use strict";return this._root;};ca.prototype._buildWrapper=function(fa,ga){"use strict";return ga;};ca.prototype.setInsertParent=function(fa){"use strict";if(fa){if(this._shown&&fa!==this.getInsertParent()){m.appendContent(fa,this.getRoot());this.updatePosition();}this._insertParent=fa;}return this;};ca.prototype.showAfterDelay=function(fa){"use strict";setTimeout(this.show.bind(this),fa);};ca.prototype.show=function(){"use strict";if(this._shown)return this;var fa=this.getRoot();this.inform('beforeshow');r.set(fa,'visibility','hidden');r.set(fa,'overflow','hidden');k.show(fa);m.appendContent(this.getInsertParent(),fa);if(this.updatePosition()!==false){this._shown=true;this.inform('show');ca.inform('show',this);if(!this._permanent)setTimeout(function(){if(this._shown)y.push(this);}.bind(this),0);}else k.hide(fa);r.set(fa,'visibility','');r.set(fa,'overflow','');this.inform('aftershow');return this;};ca.prototype.hide=function(){"use strict";if(this._hiding||!this._shown||this.inform('beforehide')===false)return this;this._hiding=true;if(this.inform('starthide')!==false)this.finishHide();return this;};ca.prototype.conditionShow=function(fa){"use strict";return fa?this.show():this.hide();};ca.prototype.finishHide=function(){"use strict";if(this._shown){if(!this._permanent)w(y,this);this._hiding=false;this._shown=false;k.hide(this.getRoot());this.inform('hide');ca.inform('hide',this);}};ca.prototype.isShown=function(){"use strict";return this._shown;};ca.prototype.updatePosition=function(){"use strict";return true;};ca.prototype.destroy=function(){"use strict";if(this.containsReactComponent)i.unmountComponentAtNode(this._reactContainer);this.finishHide();var fa=this.getRoot();m.remove(fa);this.destroyBehaviors();this.inform('destroy');ca.inform('destroy',this);l.remove(fa,'layer');this._root=this._causalElement=null;};ca.init=function(fa,ga){"use strict";fa.init(ga);};ca.initAndShow=function(fa,ga){"use strict";fa.init(ga).show();};ca.show=function(fa){"use strict";fa.show();};ca.showAfterDelay=function(fa,ga){"use strict";fa.showAfterDelay(ga);};ca.getTopmostLayer=function(){"use strict";return y[y.length-1];};s(ca,g);s(ca.prototype,{_initialized:false,_root:null,_shown:false,_hiding:false,_causalElement:null,_reactContainer:null});n.listen(document.documentElement,'keydown',function(event){if(p.filterEventTargets(event,'keydown'))for(var fa=y.length-1;fa>=0;fa--)if(y[fa].inform('key',event)===false)return false;},n.Priority.URGENT);var da;n.listen(document.documentElement,'mousedown',function(event){da=event.getTarget();});var ea;n.listen(document.documentElement,'mouseup',function(event){ea=event.getTarget();x(function(){da=null;ea=null;});});n.listen(document.documentElement,'click',function(event){var fa=da,ga=ea;da=null;ea=null;var ha=y.length;if(!ha)return;var ia=event.getTarget();if(ia!==ga||ia!==fa)return;if(!m.contains(document.documentElement,ia))return;if(!ia.offsetWidth)return;if(q.byClass(ia,'generic_dialog')||q.byClass(ia,"_3sod"))return;while(ha--){var ja=y[ha],ka=ja.getContentRoot();if(j.containsIncludingLayers(ka,ia))return;if(ja.inform('blur')===false||ja.isShown())return;}});e.exports=ca;},null);
__d("Popup",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={open:function(h,i,j){var k=document.body,l='screenX' in window?window.screenX:window.screenLeft,m='screenY' in window?window.screenY:window.screenTop,n='outerWidth' in window?window.outerWidth:k.clientWidth,o='outerHeight' in window?window.outerHeight:k.clientHeight-22,p=Math.floor(l+(n-i)/2),q=Math.floor(m+(o-j)/2.5),r=['width='+i,'height='+j,'left='+p,'top='+q];return window.open(h,'_blank',r.join(','));}};e.exports=g;},null);
__d("PopupWindow",["DOMDimensions","DOMQuery","Layer","Popup","copyProperties"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l={_opts:{allowShrink:true,strategy:'vector',timeout:100,widthElement:null},init:function(m){k(l._opts,m);setInterval(l._resizeCheck,l._opts.timeout);},_resizeCheck:function(){var m=g.getViewportDimensions(),n=l._getDocumentSize(),o=i.getTopmostLayer();if(o){var p=o.getRoot().firstChild,q=g.getElementDimensions(p);q.height+=g.measureElementBox(p,'height',true,true,true);q.width+=g.measureElementBox(p,'width',true,true,true);n.height=Math.max(n.height,q.height);n.width=Math.max(n.width,q.width);}var r=n.height-m.height,s=n.width-m.width;if(s<0&&!l._opts.widthElement)s=0;s=s>1?s:0;if(!l._opts.allowShrink&&r<0)r=0;if(r||s)try{window.console&&window.console.firebug;window.resizeBy(s,r);if(s)window.moveBy(s/-2,0);}catch(t){}},_getDocumentSize:function(){var m=g.getDocumentDimensions();if(l._opts.strategy==='offsetHeight')m.height=document.body.offsetHeight;if(l._opts.widthElement){var n=h.scry(document.body,l._opts.widthElement)[0];if(n)m.width=g.getElementDimensions(n).width;}var o=a.Dialog;if(o&&o.max_bottom&&o.max_bottom>m.height)m.height=o.max_bottom;return m;},open:function(m,n,o){return j.open(m,o,n);}};e.exports=l;},null);
__d("PlatformVersions",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={LATEST:"v2.4",versions:{UNVERSIONED:"unversioned",V1_0:"v1.0",V2_0:"v2.0",V2_1:"v2.1",V2_2:"v2.2",V2_3:"v2.3",V2_4:"v2.4"}};},null);
__d("StrSet",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h){"use strict";this.$StrSet0={};this.$StrSet1=0;if(h)this.addAll(h);}g.prototype.add=function(h){"use strict";if(!this.$StrSet0.hasOwnProperty(h)){this.$StrSet0[h]=true;this.$StrSet1++;}return this;};g.prototype.addAll=function(h){"use strict";h.forEach(this.add,this);return this;};g.prototype.remove=function(h){"use strict";if(this.$StrSet0.hasOwnProperty(h)){delete this.$StrSet0[h];this.$StrSet1--;}return this;};g.prototype.removeAll=function(h){"use strict";h.forEach(this.remove,this);return this;};g.prototype.toArray=function(){"use strict";return Object.keys(this.$StrSet0);};g.prototype.toMap=function(h){"use strict";var i={};Object.keys(this.$StrSet0).forEach(function(j){i[j]=typeof h=='function'?h(j):h||true;});return i;};g.prototype.contains=function(h){"use strict";return this.$StrSet0.hasOwnProperty(h);};g.prototype.count=function(){"use strict";return this.$StrSet1;};g.prototype.clear=function(){"use strict";this.$StrSet0={};this.$StrSet1=0;return this;};g.prototype.clone=function(){"use strict";return new g(this);};g.prototype.forEach=function(h,i){"use strict";Object.keys(this.$StrSet0).forEach(h,i);};g.prototype.map=function(h,i){"use strict";return Object.keys(this.$StrSet0).map(h,i);};g.prototype.some=function(h,i){"use strict";return Object.keys(this.$StrSet0).some(h,i);};g.prototype.every=function(h,i){"use strict";return Object.keys(this.$StrSet0).every(h,i);};g.prototype.filter=function(h,i){"use strict";return new g(Object.keys(this.$StrSet0).filter(h,i));};g.prototype.union=function(h){"use strict";return this.clone().addAll(h);};g.prototype.intersect=function(h){"use strict";return this.filter(function(i){return h.contains(i);});};g.prototype.difference=function(h){"use strict";return h.filter(function(i){return !this.contains(i);}.bind(this));};g.prototype.equals=function(h){"use strict";var i=function(m,n){return m===n?0:m<n?-1:1;},j=this.toArray(),k=h.toArray();if(j.length!==k.length)return false;var l=j.length;j=j.sort(i);k=k.sort(i);while(l--)if(j[l]!==k[l])return false;return true;};e.exports=g;},null);
__d("PlatformBaseVersioning",["PlatformVersions","getObjectValues","StrSet","invariant"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=new i(h(g.versions)),l=location.pathname,m=l.substring(1,l.indexOf('/',1)),n=k.contains(m)?m:g.versions.UNVERSIONED;function o(r,s){if(s==g.versions.UNVERSIONED)return r;j(k.contains(s));if(r.indexOf('/')!==0)r='/'+r;return '/'+s+r;}function p(r){if(k.contains(r.substring(1,r.indexOf('/',1))))return r.substring(r.indexOf('/',1));return r;}var q={addVersionToPath:o,getLatestVersion:function(){return g.LATEST;},versionAwareURI:function(r){return r.setPath(o(r.getPath(),n));},versionAwarePath:function(r){return o(r,n);},getUnversionedPath:p};e.exports=q;},null);
__d("PluginConfirm",["DOMEvent","DOMEventListener","PluginMessage","PopupWindow","URI","copyProperties","PlatformBaseVersioning"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();function n(o){l(this,{plugin:o,confirm_params:{},return_params:k.getRequestURI().getQueryData()});this.addReturnParams({ret:'sentry'});delete this.return_params.hash;}l(n.prototype,{addConfirmParams:function(o){l(this.confirm_params,o);},addReturnParams:function(o){l(this.return_params,o);return this;},start:function(){var o=m.versionAwareURI(new k('/plugins/error/confirm/'+this.plugin)).addQueryData(this.confirm_params).addQueryData({secure:k.getRequestURI().isSecure(),plugin:this.plugin,return_params:JSON.stringify(this.return_params)});this.popup=j.open(o.toString(),320,486);i.listen();return this;}});n.starter=function(o,p,q){var r=new n(o);r.addConfirmParams(p||{});r.addReturnParams(q||{});return r.start.bind(r);};n.listen=function(o,p,q,r){h.add(o,'click',function(s){new g(s).kill();n.starter(p,q,r)();});};e.exports=n;},null);
__d("PlatformWidgetEndpoint",["PlatformBaseVersioning"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(m,n){return g.versionAwarePath('/dialog'+'/'+m+(n?'/'+n:''));}function i(m,n){return g.versionAwarePath('/plugins'+'/'+m+(n?'/'+n:''));}function j(m){return (/^\/plugins\//).test(g.getUnversionedPath(m));}function k(m){return (/^\/dialog\//).test(g.getUnversionedPath(m));}var l={dialog:h,plugins:i,isPluginEndpoint:j,isDialogEndpoint:k};e.exports=l;},null);
__d("ArbiterFrame",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={inform:function(h,i,j){var k=parent.frames,l=k.length,m;i.crossFrame=true;for(var n=0;n<l;n++){m=k[n];try{if(!m||m==window)continue;if(m.require){m.require('Arbiter').inform(h,i,j);}else if(m.ServerJSAsyncLoader)m.ServerJSAsyncLoader.wakeUp(h,i,j);}catch(o){}}}};e.exports=g;},null);
__d("Plugin",["Arbiter","ArbiterFrame"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i={CONNECT:'platform/plugins/connect',DISCONNECT:'platform/plugins/disconnect',ERROR:'platform/plugins/error',RELOAD:'platform/plugins/reload',DIALOG:'platform/plugins/dialog',connect:function(j,k){var l={identifier:j,href:j,story_fbid:k};g.inform(i.CONNECT,l);h.inform(i.CONNECT,l);},disconnect:function(j,k){var l={identifier:j,href:j,story_fbid:k};g.inform(i.DISCONNECT,l);h.inform(i.DISCONNECT,l);},error:function(j,k){g.inform(i.ERROR,{action:j,content:k});},reload:function(j){g.inform(i.RELOAD,{reloadUrl:j||''});h.inform(i.RELOAD,{reloadUrl:j||''});},reloadOtherPlugins:function(){h.inform(i.RELOAD,{reloadUrl:''});}};e.exports=i;},null);
__d("PluginConnectButtonType",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={BLUE_BASE:1,WHITE_BASE:2};},null);
__d("PluginOptin",["DOMEvent","DOMEventListener","PluginMessage","PopupWindow","URI","UserAgent_DEPRECATED","copyProperties","PlatformWidgetEndpoint"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();function o(p,q){m(this,{return_params:k.getRequestURI().getQueryData(),login_params:{},optin_params:{},plugin:p,api_key:q});this.addReturnParams({ret:'optin'});this.login_params.nux=false;delete this.return_params.hash;}m(o.prototype,{addReturnParams:function(p){m(this.return_params,p);return this;},addLoginParams:function(p){m(this.login_params,p);return this;},addOptinParams:function(p){m(this.optin_params,p);return this;},start:function(){var p=new k(n.dialog('plugin.optin')).addQueryData(this.optin_params).addQueryData({app_id:this.api_key||127760087237610,secure:k.getRequestURI().isSecure(),social_plugin:this.plugin,return_params:JSON.stringify(this.return_params),login_params:JSON.stringify(this.login_params)});if(l.mobile()){p.setSubdomain('m');}else p.addQueryData({display:'popup'});this.popup=j.open(p.toString(),420,450);i.listen();return this;}});o.starter=function(p,q,r,s){var t=new o(p);t.addReturnParams(q||{});t.addLoginParams(r||{});t.addOptinParams(s||{});return t.start.bind(t);};o.listen=function(p,q,r,s,t){h.add(p,'click',function(u){new g(u).kill();o.starter(q,r,s,t)();});};e.exports=o;},null);
__d("csx",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h){throw new Error('csx: Unexpected class selector transformation.');}e.exports=g;},null);
__d("PluginConnectButton",["Arbiter","CSS","DOM","DOMDimensions","DOMEvent","DOMEventListener","Form","PlatformWidgetEndpoint","Plugin","PluginConnectButtonType","PluginOptin","Style","URI","copyProperties","csx","cx","getElementPosition"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){b.__markCompiled&&b.__markCompiled();var x=g.SUBSCRIBE_NEW,y=g.subscribe,z=function(ba,ca){return l.add(ba,'click',ca);};function aa(ba){this.config=ba;this.busy=false;var ca=i.find(ba.form,'.pluginConnectButton');this.buttons=ca;this.node_connected=i.find(ca,'.pluginConnectButtonConnected');this.node_disconnected=i.find(ca,'.pluginConnectButtonDisconnected');var da=function(fa){new k(fa).kill();if(!this.busy){this.submit();this.busy=this.canpersonalize;}}.bind(this);z(this.node_disconnected,da);if(ba.buttontype===p.BLUE_BASE){z(i.find(ca,'.pluginButtonX button'),da);}else if(ba.buttontype===p.WHITE_BASE)z(this.node_connected,da);z(this.node_connected,function(fa){return g.inform(o.DIALOG,fa);});var ea=this.update.bind(this);y(o.CONNECT,ea,x);y(o.DISCONNECT,ea,x);y(o.ERROR,this.error.bind(this),x);y('Connect.Unsafe.xd/reposition',this.flip.bind(this));if(ba.autosubmit)setTimeout(this.submit.bind(this),0);}t(aa.prototype,{update:function(ba,event){this.busy=false;var ca=this.config;if(event.identifier!==ca.identifier)return;var da=ba===o.CONNECT?true:false,ea=n.plugins(ca.plugin);ea+='/'+(!da?"connect":"disconnect");h[da?'show':'hide'](this.node_connected);h[da?'hide':'show'](this.node_disconnected);try{if(document.activeElement.nodeName.toLowerCase()==='button'){var ga=da?this.node_connected:this.node_disconnected,ha=i.find(ga,'button');ha.disabled=false;ha.focus();}}catch(fa){}ca.connected=da;ca.form.setAttribute('action',ea);ca.form.setAttribute('ajaxify',ea);},error:function(event,ba){this.busy=false;if(ba.action in {connect:1,disconnect:1}){i.setContent(this.buttons,ba.content);var ca=i.scry(this.buttons,'.confirmButton');if(ca.length===1)ca[0].focus();}},submit:function(){if(!this.config.canpersonalize)return this.login();m.bootstrap(this.config.form);this.fireStateToggle();},fireStateToggle:function(){var ba=this.config;if(ba.connected){o.disconnect(ba.identifier);}else o.connect(ba.identifier);},login:function(){var ba=this.config.plugin;new q(ba,s.getRequestURI().getQueryData().api_key).addReturnParams({act:'connect'}).addLoginParams({social_plugin_action:this.config.pluginaction}).start();},flip:function(ba,ca){var da=i.scry(document.body,"._4xn8");if(da.length===0){return;}else da=da[0];var ea=i.scry(this.config.form,'.pluginConnectButtonConnected .pluginButtonIcon'),fa=r.get(ea[0],'display')!=='none'?ea[0]:ea[1],ga=i.find(document.body,'.pluginConnectButtonLayoutRoot'),ha;if(ca.type==='reposition'){h.addClass(ga,"_1f8a");r.set(ga,'padding-left',450-ga.offsetWidth+'px');h.removeClass(ga,"_1f8b");ha=w(fa).x+j.getElementDimensions(fa).width/2-6;}else{h.addClass(ga,"_1f8b");r.set(ga,'padding-left','0px');h.removeClass(ga,"_1f8a");ha=6;}r.set(da,'left',ha+'px');}});e.exports=aa;},null);
__d("keyMirror",["invariant"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';var h=function(i){var j={},k;g(i instanceof Object&&!Array.isArray(i));for(k in i){if(!i.hasOwnProperty(k))continue;j[k]=k;}return j;};e.exports=h;},null);
__d("UnicodeBidiDirection",["keyMirror"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';var h=g({NEUTRAL:true,LTR:true,RTL:true});h.isStrong=function(i){return i===h.LTR||i===h.RTL;};e.exports=h;},null);
__d("Locale",["Style","ExecutionEnvironment","UnicodeBidiDirection"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j;function k(){if(!h.canUseDOM){j=false;}else if(j===(void 0))j=('rtl'===g.get(document.body,'direction'));return j;}function l(){return k()?i.RTL:i.LTR;}var m={isRTL:k,getDirection:l};e.exports=m;},null);
__d("Log",["sprintf"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={DEBUG:3,INFO:2,WARNING:1,ERROR:0};function i(k,l){var m=Array.prototype.slice.call(arguments,2),n=g.apply(null,m),o=window.console;if(o&&j.level>=l)o[k in o?k:'log'](n);}var j={level:-1,Level:h,debug:i.bind(null,'debug',h.DEBUG),info:i.bind(null,'info',h.INFO),warn:i.bind(null,'warn',h.WARNING),error:i.bind(null,'error',h.ERROR)};e.exports=j;},null);
__d("Queue",["copyProperties"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={};function i(j){"use strict";this._opts=g({interval:0,processor:null},j);this._queue=[];this._stopped=true;}i.prototype._dispatch=function(j){"use strict";if(this._stopped||this._queue.length===0)return;if(!this._opts.processor){this._stopped=true;throw new Error('No processor available');}if(this._opts.interval){this._opts.processor.call(this,this._queue.shift());this._timeout=setTimeout(this._dispatch.bind(this),this._opts.interval);}else while(this._queue.length)this._opts.processor.call(this,this._queue.shift());};i.prototype.enqueue=function(j){"use strict";if(this._opts.processor&&!this._stopped){this._opts.processor.call(this,j);}else this._queue.push(j);return this;};i.prototype.start=function(j){"use strict";if(j)this._opts.processor=j;this._stopped=false;this._dispatch();return this;};i.prototype.isStarted=function(){"use strict";return !this._stopped;};i.prototype.dispatch=function(){"use strict";this._dispatch(true);};i.prototype.stop=function(j){"use strict";this._stopped=true;if(j)clearTimeout(this._timeout);return this;};i.prototype.merge=function(j,k){"use strict";this._queue[k?'unshift':'push'].apply(this._queue,j._queue);j._queue=[];this._dispatch();return this;};i.prototype.getLength=function(){"use strict";return this._queue.length;};i.get=function(j,k){"use strict";var l;if(j in h){l=h[j];}else l=h[j]=new i(k);return l;};i.exists=function(j){"use strict";return j in h;};i.remove=function(j){"use strict";return delete h[j];};e.exports=i;},null);
__d("isInIframe",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g=window!=window.top;function h(){return g;}e.exports=h;},null);
__d("resolveWindow",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h){var i=window,j=h.split('.');try{for(var l=0;l<j.length;l++){var m=j[l],n=/^frames\[['"]?([a-zA-Z0-9\-_]+)['"]?\]$/.exec(m);if(n){i=i.frames[n[1]];}else if(m==='opener'||m==='parent'||m==='top'){i=i[m];}else return null;}}catch(k){return null;}return i;}e.exports=g;},null);
__d("XD",["Arbiter","DOM","DOMDimensions","Log","PHPQuerySerializer","URI","Queue","isFacebookURI","copyProperties","isInIframe","resolveWindow"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){b.__markCompiled&&b.__markCompiled();var r='fb_xdm_frame_'+location.protocol.replace(':',''),s={_callbacks:[],_opts:{autoResize:false,allowShrink:true,channelUrl:null,hideOverflow:false,resizeTimeout:1000,resizeWidth:false,expectResizeAck:false,resizeAckTimeout:6000},_lastResizeAckId:0,_resizeCount:0,_resizeTimestamp:0,_shrinker:null,init:function(u){this._opts=o(o({},this._opts),u);if(this._opts.autoResize)this._startResizeMonitor();g.subscribe('Connect.Unsafe.resize.ack',function(v,w){if(!w.id)w.id=this._resizeCount;if(w.id>this._lastResizeAckId)this._lastResizeAckId=w.id;}.bind(this));},getQueue:function(){if(!this._queue)this._queue=new m();return this._queue;},setChannelUrl:function(u){this.getQueue().start(function(v){return this.send(v,u);}.bind(this));},send:function(u,v){v=v||this._opts.channelUrl;if(!v){this.getQueue().enqueue(u);return;}var w={},x=new l(v);o(w,u);o(w,k.deserialize(x.getFragment()));var y=l(w.origin).getOrigin(),z=q(w.relation.replace(/^parent\./,'')),aa=50,ba=function(){var ca=z.frames[r];try{ca.proxyMessage(k.serialize(w),y);}catch(da){if(--aa){setTimeout(ba,100);}else j.warn('No such frame "'+r+'" to proxyMessage to');}};ba();},_computeSize:function(){var u=i.getDocumentDimensions(),v=0;if(this._opts.resizeWidth){var w=document.body;if(w.clientWidth<w.scrollWidth){v=u.width;}else{var x=w.childNodes;for(var y=0;y<x.length;y++){var z=x[y],aa=z.offsetLeft+z.offsetWidth;if(aa>v)v=aa;}}v=Math.max(v,s.forced_min_width);}u.width=v;if(this._opts.allowShrink){if(!this._shrinker)this._shrinker=h.create('div');h.appendContent(document.body,this._shrinker);u.height=Math.max(this._shrinker.offsetTop,0);}return u;},_startResizeMonitor:function(){var u,v=document.documentElement;if(this._opts.hideOverflow){v.style.overflow='hidden';document.body.style.overflow='hidden';}var w=(function(){var x=this._computeSize(),y=Date.now(),z=this._lastResizeAckId<this._resizeCount&&(y-this._resizeTimestamp)>this._opts.resizeAckTimeout;if(!u||(this._opts.expectResizeAck&&z)||(this._opts.allowShrink&&u.width!=x.width)||(!this._opts.allowShrink&&u.width<x.width)||(this._opts.allowShrink&&u.height!=x.height)||(!this._opts.allowShrink&&u.height<x.height)){u=x;this._resizeCount++;this._resizeTimestamp=y;var aa={type:'resize',height:x.height,ackData:{id:this._resizeCount}};if(x.width&&x.width!=0)aa.width=x.width;try{if(n(l(document.referrer))&&p()&&window.name&&window.parent.location&&window.parent.location.toString&&n(l(window.parent.location))){var ca=window.parent.document.getElementsByTagName('iframe');for(var da=0;da<ca.length;da=da+1)if(ca[da].name==window.name){if(this._opts.resizeWidth)ca[da].style.width=aa.width+'px';ca[da].style.height=aa.height+'px';}}this.send(aa);}catch(ba){this.send(aa);}}}).bind(this);w();setInterval(w,this._opts.resizeTimeout);}},t=o({},s);e.exports.UnverifiedXD=t;e.exports.XD=s;a.UnverifiedXD=t;a.XD=s;},null);
__d("UnverifiedXD",["XD"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g=b('XD').UnverifiedXD;e.exports=g;},null);
__d("getOffsetParent",["Style"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(i){var j=i.parentNode;if(!j||j===document.documentElement)return document.documentElement;if(g.get(j,'position')!=='static')return j;return j===document.body?document.documentElement:h(j);}e.exports=h;},null);
__d("PluginResize",["Locale","Log","UnverifiedXD","copyProperties","getOffsetParent","getStyleProperty"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();function m(q){q=q||document.body;var r=0,s=k(q);if(g.isRTL()&&s){r=s.offsetWidth-q.offsetLeft-q.offsetWidth;}else if(!g.isRTL())r=q.offsetLeft;return n(q)+r;}function n(q){return Math.ceil(parseFloat(l(q,'width')))||q.offsetWidth;}function o(q){q=q||document.body;return q.offsetHeight+q.offsetTop;}function p(q,r,event,s){this.calcWidth=q||m;this.calcHeight=r||o;this.width=(void 0);this.height=(void 0);this.reposition=!!s;this.event=event||'resize';}j(p.prototype,{resize:function(){var q=this.calcWidth(),r=this.calcHeight();if(q!==this.width||r!==this.height){h.debug('Resizing Plugin: (%s, %s, %s, %s)',q,r,this.event,this.reposition);this.width=q;this.height=r;i.send({type:this.event,width:q,height:r,reposition:this.reposition});}return this;},auto:function(q){setInterval(this.resize.bind(this),q||250);return this;}});p.auto=function(q,event,r){return new p(m.bind(null,q),o.bind(null,q),event).resize().auto(r);};p.autoHeight=function(q,r,event,s){return new p(function(){return q;},o.bind(null,r),event).resize().auto(s);};p.getElementWidth=n;e.exports=p;},null);
__d("PluginConnectButtonResize",["DOMDimensions","DOMQuery","PluginResize","Style","getElementPosition"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();function l(m,n,o){if(o)j.set(m,'width',o+'px');i.auto(m,'resize.flow');function p(){var q=h.scry(document.body,'.uiTypeaheadView')[0];if(!q)return {x:0,y:0};var r=k(q),s=g.getElementDimensions(q);return {x:r.x+s.width,y:r.y+s.height};}new i(function(){return Math.max(i.getElementWidth(m),n&&n.offsetWidth,p().x);},function(){return Math.max(m.offsetHeight,n?n.offsetHeight+n.offsetTop:0,p().y);},'resize.iframe',true).resize().auto();}e.exports=l;},null);
__d("PluginConnection",["Arbiter","CSS","Plugin","copyProperties"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=function(){};j(k.prototype,{init:function(l,m,n,event){event=event||i.CONNECT;this.identifier=l;this.element=m;this.css=n;g.subscribe([i.CONNECT,i.DISCONNECT],function(o,p){if(l===p.href)h[o===event?'addClass':'removeClass'](m,n);return true;});return this;},connected:function(){return h.hasClass(this.element,this.css);},connect:function(){return g.inform(i.CONNECT,{href:this.identifier},g.BEHAVIOR_STATE);},disconnect:function(){return g.inform(i.DISCONNECT,{href:this.identifier},g.BEHAVIOR_STATE);},toggle:function(){return this.connected()?this.disconnect():this.connect();}});k.init=function(l){for(var m,n=0;n<l.length;n++){m=new k();m.init.apply(m,l[n]);}};e.exports=k;},null);
__d("Button",["CSS","DataStore","DOM","Event","Parent","cx","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n='uiButtonDisabled',o='uiButtonDepressed',p="_42fr",q="_42fs",r='button:blocker',s='href',t='ajaxify';function u(aa,ba){var ca=h.get(aa,r);if(ba){if(ca){ca.remove();h.remove(aa,r);}}else if(!ca)h.set(aa,r,j.listen(aa,'click',m.thatReturnsFalse,j.Priority.URGENT));}function v(aa){var ba=k.byClass(aa,'uiButton')||k.byClass(aa,"_42ft");if(!ba)throw new Error('invalid use case');return ba;}function w(aa){return i.isNodeOfType(aa,'a');}function x(aa){return i.isNodeOfType(aa,'button');}function y(aa){return g.hasClass(aa,"_42ft");}var z={getInputElement:function(aa){aa=v(aa);if(w(aa))throw new Error('invalid use case');return x(aa)?aa:i.find(aa,'input');},isEnabled:function(aa){return !(g.hasClass(v(aa),n)||g.hasClass(v(aa),p));},setEnabled:function(aa,ba){aa=v(aa);var ca=y(aa)?p:n;g.conditionClass(aa,ca,!ba);if(w(aa)){var da=aa.getAttribute('href'),ea=aa.getAttribute('ajaxify'),fa=h.get(aa,s,'#'),ga=h.get(aa,t);if(ba){if(!da)aa.setAttribute('href',fa);if(!ea&&ga)aa.setAttribute('ajaxify',ga);aa.removeAttribute('tabIndex');}else{if(da&&da!==fa)h.set(aa,s,da);if(ea&&ea!==ga)h.set(aa,t,ea);aa.removeAttribute('href');aa.removeAttribute('ajaxify');aa.setAttribute('tabIndex','-1');}u(aa,ba);}else{var ha=z.getInputElement(aa);ha.disabled=!ba;u(ha,ba);}},setDepressed:function(aa,ba){aa=v(aa);var ca=y(aa)?q:o;g.conditionClass(aa,ca,ba);},isDepressed:function(aa){aa=v(aa);var ba=y(aa)?q:o;return g.hasClass(aa,ba);},setLabel:function(aa,ba){aa=v(aa);if(y(aa)){var ca=[];if(ba)ca.push(ba);var da=i.scry(aa,'.img')[0];if(da)if(aa.firstChild==da){ca.unshift(da);}else ca.push(da);i.setContent(aa,ca);}else if(w(aa)){var ea=i.find(aa,'span.uiButtonText');i.setContent(ea,ba);}else z.getInputElement(aa).value=ba;var fa=y(aa)?"_42fv":'uiButtonNoText';g.conditionClass(aa,fa,!ba);},setIcon:function(aa,ba){if(ba&&!i.isNode(ba))return;aa=v(aa);var ca=i.scry(aa,'.img')[0];if(!ba){ca&&i.remove(ca);return;}g.addClass(ba,'customimg');if(ca!=ba)if(ca){i.replace(ca,ba);}else i.prependContent(aa,ba);}};e.exports=z;},null);
__d("debounceCore",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h,i,j,k,l){k=k||setTimeout;l=l||clearTimeout;var m;function n(){for(var o=[],p=0,q=arguments.length;p<q;p++)o.push(arguments[p]);n.reset();m=k(function(){h.apply(j,o);},i);}n.reset=function(){l(m);};return n;}e.exports=g;},null);
__d("debounce",["debounceCore"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(i,j,k,l){if(j==null)j=100;var m=function(n,o,p){return setTimeout(n,o,p,!l);};return g(i,j,k,m);}e.exports=h;},null);
__d("TextInputControl",["DOMControl","Event","Input","debounce"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();for(var k in g)if(g.hasOwnProperty(k))m[k]=g[k];var l=g===null?null:g.prototype;m.prototype=Object.create(l);m.prototype.constructor=m;m.__superConstructor__=g;function m(n){"use strict";g.call(this,n);var o=this.getRoot(),p=j(this.update.bind(this),0);h.listen(o,{input:p,keydown:p,paste:p});}m.prototype.setMaxLength=function(n){"use strict";i.setMaxLength(this.getRoot(),n);return this;};m.prototype.getValue=function(){"use strict";return i.getValue(this.getRoot());};m.prototype.isEmpty=function(){"use strict";return i.isEmpty(this.getRoot());};m.prototype.setValue=function(n){"use strict";i.setValue(this.getRoot(),n);this.update();return this;};m.prototype.clear=function(){"use strict";return this.setValue('');};m.prototype.setPlaceholderText=function(n){"use strict";i.setPlaceholder(this.getRoot(),n);return this;};e.exports=m;},null);
__d("transferTextStyles",["Style"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={fontFamily:null,fontSize:null,fontStyle:null,fontWeight:null,lineHeight:null,wordWrap:null};function i(j,k){for(var l in h)if(h.hasOwnProperty(l))h[l]=g.get(j,l);g.apply(k,h);}e.exports=i;},null);
__d("TextMetrics",["DOM","Style","UserAgent_DEPRECATED","transferTextStyles"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();function k(m){var n=m.clientWidth,o=(h.get(m,'-moz-box-sizing')=='border-box');if(o&&i.firefox()<29)return n;var p=h.getFloat(m,'paddingLeft')+h.getFloat(m,'paddingRight');return n-p;}function l(m,n){this._node=m;this._flexible=!!n;var o='textarea',p='textMetrics';if(this._flexible){o='div';p+=' textMetricsInline';}this._shadow=g.create(o,{className:p});j(m,this._shadow);document.body.appendChild(this._shadow);}l.prototype.measure=function(m){var n=this._node,o=this._shadow;m=(m||n.value)+'...';if(!this._flexible){var p=k(n);h.set(o,'width',Math.max(p,0)+'px');}if(n.nodeName==='TEXTAREA'){o.value=m;}else g.setContent(o,m);return {width:o.scrollWidth,height:o.scrollHeight};};l.prototype.destroy=function(){g.remove(this._shadow);};e.exports=l;},null);
__d("classWithMixins",["copyProperties"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(i,j){var k=function(){i.apply(this,arguments);};k.prototype=g(Object.create(i.prototype),j.prototype);return k;}e.exports=h;},null);
__d("TextAreaControl",["Arbiter","ArbiterMixin","CSS","DOMControl","Event","Style","TextInputControl","TextMetrics","classWithMixins","mixin"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();function q(v,w){return l.getFloat(v,w)||0;}var r=o(m,p(h));for(var s in r)if(r.hasOwnProperty(s))u[s]=r[s];var t=r===null?null:r.prototype;u.prototype=Object.create(t);u.prototype.constructor=u;u.__superConstructor__=r;function u(v){"use strict";this.autogrow=i.hasClass(v,'uiTextareaAutogrow');r.call(this,v);this.width=null;k.listen(v,'focus',this._handleFocus.bind(this));}u.prototype.setAutogrow=function(v){"use strict";this.autogrow=v;return this;};u.prototype.onupdate=function(){"use strict";t.onupdate.call(this);this.updateHeight();};u.prototype.updateHeight=function(){"use strict";if(this.autogrow){var v=this.getRoot();if(!this.metrics)this.metrics=new n(v);if(typeof this.initialHeight==='undefined'){this.isBorderBox=l.get(v,'box-sizing')==='border-box'||l.get(v,'-moz-box-sizing')==='border-box'||l.get(v,'-webkit-box-sizing')==='border-box';this.borderBoxOffset=q(v,'padding-top')+q(v,'padding-bottom')+q(v,'border-top-width')+q(v,'border-bottom-width');this.initialHeight=v.offsetHeight-this.borderBoxOffset;}var w=this.metrics.measure(),x=Math.max(this.initialHeight,w.height);if(this.isBorderBox)x+=this.borderBoxOffset;if(x!==this.height){this.height=x;l.set(v,'height',x+'px');g.inform('reflow');this.inform('resize');}}else if(this.metrics){this.metrics.destroy();this.metrics=null;}};u.prototype.resetHeight=function(){"use strict";this.height=-1;this.update();};u.prototype._handleFocus=function(){"use strict";this.width=null;};u.getInstance=function(v){"use strict";return j.getInstance(v)||new u(v);};e.exports=u;},null);
__d("PluginFlyout",["Arbiter","Button","CSS","DOM","DOMEvent","DOMEventListener","Form","Plugin","TextAreaControl","copyProperties","csx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){b.__markCompiled&&b.__markCompiled();var r=g.SUBSCRIBE_NEW,s=g.subscribe,t=g.inform,u=function(w,x){return l.add(w,'click',x);};function v(w,x,y){var z=this,aa=s(n.CONNECT,function(event,ba){g.unsubscribe(aa);z.init(w,x,y);z.connect(event,ba);},r);s(n.DIALOG,function(){z.init(w,x,y);z.toggle();},r);}p(v.prototype,{init:function(w,x,y){if(this.initialized)return;this.initialized=true;j.appendContent(w,JSON.parse(y));var z=j.find(w,'form'),aa=j.find(z,"._56zw"),ba=j.find(z,"._56zx"),ca=j.find(z,"._42x4"),da=o.getInstance(ca);l.add(ca,'keyup',function(ha){h.setEnabled(aa,!!da.getValue());});l.add(z,'submit',function(ha){new k(ha).kill();m.bootstrap(z);});var ea=(x==='tiny')?j.find(document.body,'.pluginPostFlyoutPrompt'):null;this.flyout=w;this.form=z;this.post_button=aa;this.prompt=ea;var fa=this.hide.bind(this),ga=this.show.bind(this);u(ba,function(ha){new k(ha).kill();fa();});if(ea)u(ea,function(ha){new k(ha).kill();ga();});s(n.CONNECT,this.connect.bind(this),r);s(n.DISCONNECT,function(){fa();},r);s(v.SUCCESS,function(){fa();if(ea)i.hide(ea);},r);s(n.ERROR,function(event,ha){if(ha.action!=='comment')return;j.setContent(j.find(z,"._56zy"),ha.content);i.hide(aa);},r);},connect:function(event,w){if(w.crossFrame)return;if(this.prompt)return i.show(this.prompt);if(!w.story_fbid)this.show();},show:function(){this.shown=true;i.show(this.flyout);i.show(this.post_button);this.form.comment.focus();t(v.SHOW);},hide:function(){this.shown=false;i.hide(this.flyout);t(v.HIDE);},toggle:function(){if(this.shown){this.hide();}else this.show();}});p(v,{SUCCESS:'platform/plugins/flyout/success',SHOW:'platform/plugins/flyout/show',HIDE:'platform/plugins/flyout/hide',success:function(){t(v.SUCCESS);}});e.exports=v;},null);
__d("PluginFlyoutDialog",["Arbiter","DOMEvent","DOMEventListener","PluginFlyout","copyProperties"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();function l(m,n,o){this.parent=new j(m,n,o);this.flyout=m;g.subscribe(j.SHOW,this.show.bind(this),g.SUBSCRIBE_NEW);}k(l.prototype,{show:function(){if(this.subscribed)return;this.subscribed=1;var m=window.ServerJSAsyncLoader;m&&m.ondemandjs&&m.run(m.ondemandjs);i.add(this.flyout.parentNode,'click',(function(n){n=new h(n);if(n.target===this.flyout.parentNode){n.kill();this.parent.hide();}}).bind(this));}});e.exports=l;},null);
__d("AsyncDOM",["CSS","DOM"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i={invoke:function(j,k){for(var l=0;l<j.length;++l){var m=j[l],n=m[0],o=m[1],p=m[2],q=m[3],r=(p&&k)||null;if(o)r=h.scry(r||document.documentElement,o)[0];switch(n){case 'eval':(new Function(q)).apply(r);break;case 'hide':g.hide(r);break;case 'show':g.show(r);break;case 'setContent':h.setContent(r,q);break;case 'appendContent':h.appendContent(r,q);break;case 'prependContent':h.prependContent(r,q);break;case 'insertAfter':h.insertAfter(r,q);break;case 'insertBefore':h.insertBefore(r,q);break;case 'remove':h.remove(r);break;case 'replace':h.replace(r,q);break;default:}}}};e.exports=i;},null);
__d("BasicVector",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h,i){"use strict";this.x=h;this.y=i;}g.prototype.derive=function(h,i){"use strict";return new g(h,i);};g.prototype.toString=function(){"use strict";return '('+this.x+', '+this.y+')';};g.prototype.add=function(h,i){"use strict";if(h instanceof g){i=h.y;h=h.x;}var j=parseFloat(h),k=parseFloat(i);return this.derive(this.x+j,this.y+k);};g.prototype.mul=function(h,i){"use strict";if(i===(void 0))i=h;return this.derive(this.x*h,this.y*i);};g.prototype.div=function(h,i){"use strict";if(i===(void 0))i=h;return this.derive(this.x*1/h,this.y*1/i);};g.prototype.sub=function(h,i){"use strict";if(arguments.length===1){return this.add(h.mul(-1));}else return this.add(-h,-i);};g.prototype.distanceTo=function(h){"use strict";return this.sub(h).magnitude();};g.prototype.magnitude=function(){"use strict";return Math.sqrt((this.x*this.x)+(this.y*this.y));};g.prototype.rotate=function(h){"use strict";return this.derive(this.x*Math.cos(h)-this.y*Math.sin(h),this.x*Math.sin(h)+this.y*Math.cos(h));};e.exports=g;},null);
__d("getUnboundedScrollPosition",["Scroll"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';function h(i){if(i===window)return {x:window.pageXOffset||g.getLeft(document.documentElement),y:window.pageYOffset||g.getTop(document.documentElement)};return {x:g.getLeft(i),y:g.getTop(i)};}e.exports=h;},null);
__d("DOMVector",["BasicVector","getDocumentScrollElement","getElementPosition","getUnboundedScrollPosition","getViewportDimensions"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();for(var l in g)if(g.hasOwnProperty(l))n[l]=g[l];var m=g===null?null:g.prototype;n.prototype=Object.create(m);n.prototype.constructor=n;n.__superConstructor__=g;function n(o,p,q){"use strict";g.call(this,o,p);this.domain=q||'pure';}n.prototype.derive=function(o,p,q){"use strict";return new n(o,p,q||this.domain);};n.prototype.add=function(o,p){"use strict";if(o instanceof n&&o.getDomain()!=='pure')o=o.convertTo(this.domain);return m.add.call(this,o,p);};n.prototype.convertTo=function(o){"use strict";if(o!='pure'&&o!='viewport'&&o!='document')return this.derive(0,0);if(o==this.domain)return this.derive(this.x,this.y,this.domain);if(o=='pure')return this.derive(this.x,this.y);if(this.domain=='pure')return this.derive(0,0);var p=n.getScrollPosition('document'),q=this.x,r=this.y;if(this.domain=='document'){q-=p.x;r-=p.y;}else{q+=p.x;r+=p.y;}return this.derive(q,r,o);};n.prototype.getDomain=function(){"use strict";return this.domain;};n.from=function(o,p,q){"use strict";return new n(o,p,q);};n.getScrollPosition=function(o){"use strict";o=o||'document';var p=j(window);return this.from(p.x,p.y,'document').convertTo(o);};n.getElementPosition=function(o,p){"use strict";p=p||'document';var q=i(o);return this.from(q.x,q.y,'viewport').convertTo(p);};n.getElementDimensions=function(o){"use strict";return this.from(o.offsetWidth||0,o.offsetHeight||0);};n.getViewportDimensions=function(){"use strict";var o=k();return this.from(o.width,o.height,'viewport');};n.getViewportWithoutScrollbarDimensions=function(){"use strict";var o=k.withoutScrollbars();return this.from(o.width,o.height,'viewport');};n.getDocumentDimensions=function(o){"use strict";var p=h(o);return this.from(p.scrollWidth,p.scrollHeight,'document');};e.exports=n;},null);
__d("Vector",["DOMVector","Event","Scroll"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();for(var j in g)if(g.hasOwnProperty(j))l[j]=g[j];var k=g===null?null:g.prototype;l.prototype=Object.create(k);l.prototype.constructor=l;l.__superConstructor__=g;function l(m,n,o){"use strict";g.call(this,parseFloat(m),parseFloat(n),o);}l.prototype.derive=function(m,n,o){"use strict";return new l(m,n,o||this.domain);};l.prototype.setElementPosition=function(m){"use strict";var n=this.convertTo('document');m.style.left=parseInt(n.x,10)+'px';m.style.top=parseInt(n.y,10)+'px';return this;};l.prototype.setElementDimensions=function(m){"use strict";return this.setElementWidth(m).setElementHeight(m);};l.prototype.setElementWidth=function(m){"use strict";m.style.width=parseInt(this.x,10)+'px';return this;};l.prototype.setElementHeight=function(m){"use strict";m.style.height=parseInt(this.y,10)+'px';return this;};l.prototype.scrollElementBy=function(m){"use strict";if(m==document.body){window.scrollBy(this.x,this.y);}else{i.setLeft(m,i.getLeft(m)+this.x);i.setTop(m,i.getTop(m)+this.y);}return this;};l.from=function(m,n,o){"use strict";return new l(m,n,o);};l.getEventPosition=function(m,n){"use strict";n=n||'document';var o=h.getPosition(m),p=this.from(o.x,o.y,'document');return p.convertTo(n);};l.deserialize=function(m){"use strict";var n=m.split(',');return this.from(n[0],n[1]);};e.exports=l;},null);
__d("throttle",["copyProperties"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(j,k,l){return i(j,k,l,false,false);}g(h,{acrossTransitions:function(j,k,l){return i(j,k,l,true,false);},withBlocking:function(j,k,l){return i(j,k,l,false,true);},acrossTransitionsWithBlocking:function(j,k,l){return i(j,k,l,true,true);}});function i(j,k,l,m,n){if(k==null)k=100;var o,p,q=null,r=function(){p=Date.now();if(o){j.apply(l,o);o=null;q=setTimeout(r,k,!m);}else q=null;};return function s(){o=arguments;if(q===null||(Date.now()-p>k))if(n){r();}else q=setTimeout(r,0,!m);};}e.exports=h;},null);
__d("MorePagerFetchOnScroll",["AsyncRequest","DOMQuery","Event","Style","Vector","throttle"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m={};function n(o,p){"use strict";this._pager=o;this._offset=p||0;this._scrollParent=j.getScrollParent(o);this.setPagerInViewHandler(this._defaultPagerInViewHandler.bind(this));this._hasEventHandlers=false;if(!this.check()){this._scrollListener=i.listen(this._scrollParent,'scroll',l(function(){this.check();}.bind(this),50));this._clickListener=i.listen(this._scrollParent,'click',l(function(){this.check();}.bind(this),50));this._hasEventHandlers=true;}m[o.id]=this;}n.prototype.check=function(){"use strict";if(!h.contains(document.body,this._pager)){this.removeEventListeners();return true;}var o=k.getElementPosition(this._pager).y,p=this._scrollParent===window?k.getViewportDimensions().y:k.getElementDimensions(this._scrollParent).y,q=this._scrollParent===window?k.getScrollPosition().y+p:k.getElementPosition(this._scrollParent).y+p;if(o-this._offset<q){this._inViewHandler();this.removeEventListeners();return true;}return false;};n.prototype.removeEventListeners=function(){"use strict";if(this._hasEventHandlers){this._scrollListener&&this._scrollListener.remove();this._clickListener&&this._clickListener.remove();this._hasEventHandlers=false;}};n.prototype.setPagerInViewHandler=function(o){"use strict";this._inViewHandler=o;return this;};n.prototype._defaultPagerInViewHandler=function(){"use strict";var o=h.scry(this._pager,'a')[0];if(o)g.bootstrap(o.getAttribute('ajaxify')||o.href,o);};n.getInstance=function(o){"use strict";return m[o];};e.exports=n;},null);
__d("PluginLikebox",["AsyncDOM","AsyncRequest","CSS","DOMEvent","DOMEventListener","DOMQuery","EmbedLikeButton","Event","MorePagerFetchOnScroll","PlatformWidgetEndpoint","Popup","copyProperties"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();var s=3;function t(u,v,w){this.stream_id=u;this.force_wall=v;this.width=w;this.retries=0;this.load();k.add(l.find(document.body,'.pluginLikeboxStream'),'click',function(x){var y=new j(x),z=y.target.parentNode;if(i.hasClass(z,'text_exposed_link')){y.kill();i.addClass(l.find(z,'^.text_exposed_root'),'text_exposed');}var aa=y.target.href?y.target:y.target.parentNode.href?y.target.parentNode:null;if(aa&&aa.pathname==='/sharer/sharer.php'){y.kill();q.open(aa.href,670,340);}});}r(t.prototype,{load:function(u){new h().setMethod('GET').setURI(p.plugins('likebox','stream')).setData({id:this.stream_id,dom:u?'pluginLikeboxMoreStories':'pluginLikeboxStream',force_wall:this.force_wall,nobootload:1,inlinecss:1,max_timestamp:u,width:this.width}).setReadOnly(true).setErrorHandler(function(){}).setHandler(this.handleResponse.bind(this)).setRequestHeader('X-ALT-REFERER',document.referrer).send();},handleResponse:function(u){if(u.inlinecss){var v=document.createElement('style');v.setAttribute("type","text/css");document.getElementsByTagName('head')[0].appendChild(v);if(v.styleSheet){v.styleSheet.cssText=u.inlinecss;}else v.appendChild(document.createTextNode(u.inlinecss));}g.invoke(u.domops);(function(){var z=l.scry(document.body,'.embeddedForm'),aa='embeddedProcessed';z.map(function(ba){if(!i.hasClass(ba,aa)){var ca=l.find(ba,'.embeddedLikeButton'),da=l.find(ba,'.embeddedUnlikeButton');l.scry(ca,'a').concat(l.scry(da,'a')).forEach(function(ea){n.listen(ea,'click',function(fa){fa.preventDefault();});});m.addClientId(l.find(ba,'input[name="client_id"]'));m.init(ca,da,l.find(ba,'input[name="like_action"]'),ba);i.addClass(ba,aa);}});})();var w=l.scry(document.body,"#pluginLikeboxMoreStories a");if(!w.length)return;w=w[0];var x=function(){this.load(parseInt(w.getAttribute('data-timestamp'),10));var z=l.find(w.parentNode,'.uiMorePagerLoader');i.addClass(z,'uiMorePagerPrimary');i.removeClass(z,'uiMorePagerLoader');i.hide(w);}.bind(this);k.add(w,'click',function(z){new j(z).kill();x();});new o(w,0).setPagerInViewHandler(x);var y=parseInt(w.getAttribute('data-storycount'),10);if(y===0){if(this.retries<=s){this.retries++;x();}else i.hide(w);}else this.retries=0;return h.suppressOnloadToken;}});e.exports=t;},null);
__d("keyOf",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g=function(h){var i;for(i in h){if(!h.hasOwnProperty(i))continue;return i;}return null;};e.exports=g;},null);
__d("ImmutableValue",["invariant","isNode","keyOf"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=i({_DONT_EVER_TYPE_THIS_SECRET_KEY:null});function k(l){g(l===k[j]);}k.mergeAllPropertiesInto=function(l,m){var n=m.length;for(var o=0;o<n;o++)Object.assign(l,m[o]);};k.deepFreezeRootNode=function(l){if(h(l))return;Object.freeze(l);for(var m in l)if(l.hasOwnProperty(m))k.recurseDeepFreeze(l[m]);Object.seal(l);};k.recurseDeepFreeze=function(l){if(h(l)||!k.shouldRecurseFreeze(l))return;Object.freeze(l);for(var m in l)if(l.hasOwnProperty(m))k.recurseDeepFreeze(l[m]);Object.seal(l);};k.shouldRecurseFreeze=function(l){return (typeof l==='object'&&!(l instanceof k)&&l!==null);};k._DONT_EVER_TYPE_THIS_SECRET_KEY=Math.random();e.exports=k;},null);
__d("mergeHelpers",["invariant","keyMirror"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';var i=36,j=function(l){return typeof l!=='object'||l instanceof Date||l===null;},k={MAX_MERGE_DEPTH:i,isTerminal:j,normalizeMergeArg:function(l){return l===(void 0)||l===null?{}:l;},checkMergeArrayArgs:function(l,m){g(Array.isArray(l)&&Array.isArray(m));},checkMergeObjectArgs:function(l,m){k.checkMergeObjectArg(l);k.checkMergeObjectArg(m);},checkMergeObjectArg:function(l){g(!j(l)&&!Array.isArray(l));},checkMergeIntoObjectArg:function(l){g((!j(l)||typeof l==='function')&&!Array.isArray(l));},checkMergeLevel:function(l){g(l<i);},checkArrayStrategy:function(l){g(l===(void 0)||l in k.ArrayStrategies);},ArrayStrategies:h({Clobber:true,IndexByIndex:true})};e.exports=k;},null);
__d("ImmutableObject",["ImmutableValue","invariant","keyOf","mergeHelpers"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=j.checkMergeObjectArgs,l=j.isTerminal,m=i({_DONT_EVER_TYPE_THIS_SECRET_KEY:null});function n(s){h(s instanceof g);}for(var o in g)if(g.hasOwnProperty(o))q[o]=g[o];var p=g===null?null:g.prototype;q.prototype=Object.create(p);q.prototype.constructor=q;q.__superConstructor__=g;function q(){g.call(this,g[m]);g.mergeAllPropertiesInto(this,arguments);}q.create=function(){var s=Object.create(q.prototype);q.apply(s,arguments);return s;};q.set=function(s,t){n(s);h(typeof t==='object'&&t!==(void 0)&&!Array.isArray(t));return new q(s,t);};q.setProperty=function(s,t,u){var v={};v[t]=u;return q.set(s,v);};q.deleteProperty=function(s,t){var u={};for(var v in s)if(v!==t&&s.hasOwnProperty(v))u[v]=s[v];return new q(u);};q.setDeep=function(s,t){n(s);return r(s,t);};q.values=function(s){return Object.keys(s).map(function(t){return s[t];});};function r(s,t){k(s,t);var u={},v=Object.keys(s);for(var w=0;w<v.length;w++){var x=v[w];if(!t.hasOwnProperty(x)){u[x]=s[x];}else if(l(s[x])||l(t[x])){u[x]=t[x];}else u[x]=r(s[x],t[x]);}var y=Object.keys(t);for(w=0;w<y.length;w++){var z=y[w];if(s.hasOwnProperty(z))continue;u[z]=t[z];}return (s instanceof g?new q(u):t instanceof g?new q(u):u);}e.exports=q;},null);
__d("ArtillerySegment",["ImmutableObject","invariant","performanceAbsoluteNow"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=0;function k(l){"use strict";h(l);h(('category' in l)&&('description' in l));this.$ArtillerySegment0=false;this.$ArtillerySegment1=Object.assign({},l,{id:(j++).toString(36)});this.$ArtillerySegment2=[];}k.prototype.getID=function(){"use strict";return this.$ArtillerySegment1.id;};k.prototype.begin=function(){"use strict";this.$ArtillerySegment1.begin=i();return this;};k.prototype.end=function(){"use strict";this.$ArtillerySegment1.end=i();return this;};k.prototype.appendChild=function(){"use strict";for(var l=[],m=0,n=arguments.length;m<n;m++)l.push(arguments[m]);h(!this.$ArtillerySegment0);l.forEach(function(o){this.$ArtillerySegment2.push(o.getID());}.bind(this));return this;};k.prototype.setPosted=function(){"use strict";this.$ArtillerySegment0=true;return this;};k.prototype.getPostData=function(){"use strict";return new g(this.$ArtillerySegment1,{children:this.$ArtillerySegment2.slice()});};e.exports=k;},null);
__d("ArtillerySequence",["ImmutableObject","invariant"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i=0;function j(k){"use strict";h(k);h('description' in k);this.$ArtillerySequence0=false;this.$ArtillerySequence1=Object.assign({},k,{id:(i++).toString(36)});this.$ArtillerySequence2=[];}j.prototype.getID=function(){"use strict";return this.$ArtillerySequence1.id;};j.prototype.addSegment=function(){"use strict";for(var k=[],l=0,m=arguments.length;l<m;l++)k.push(arguments[l]);h(!this.$ArtillerySequence0);k.forEach(function(n){this.$ArtillerySequence2.push(n.getID());}.bind(this));return this;};j.prototype.setPosted=function(){"use strict";this.$ArtillerySequence0=true;return this;};j.prototype.getPostData=function(){"use strict";return new g(this.$ArtillerySequence1,{segments:this.$ArtillerySequence2.slice()});};e.exports=j;},null);
__d("EventEmitterWithValidation",["EventEmitter"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';for(var h in g)if(g.hasOwnProperty(h))j[h]=g[h];var i=g===null?null:g.prototype;j.prototype=Object.create(i);j.prototype.constructor=j;j.__superConstructor__=g;function j(m){g.call(this);this.$EventEmitterWithValidation0=Object.keys(m);}j.prototype.emit=function(m){k(m,this.$EventEmitterWithValidation0);return i.emit.apply(this,arguments);};function k(m,n){if(n.indexOf(m)===-1)throw new TypeError(l(m,n));}function l(m,n){var o='Unknown event type "'+m+'". ';o+='Known event types: '+n.join(', ')+'.';return o;}e.exports=j;},null);
__d("mixInEventEmitter",["EventEmitterWithHolding","EventEmitterWithValidation","EventHolder","invariant"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';function k(m,n){j(n);var o=m.prototype||m;j(!o.__eventEmitter);var p=m.constructor;if(p)j(p===Object||p===Function);o.__types=Object.assign({},o.__types,n);Object.assign(o,l);}var l={emit:function(m,n,o,p,q,r,s){return this.__getEventEmitter().emit(m,n,o,p,q,r,s);},emitAndHold:function(m,n,o,p,q,r,s){return this.__getEventEmitter().emitAndHold(m,n,o,p,q,r,s);},addListener:function(m,n,o){return this.__getEventEmitter().addListener(m,n,o);},once:function(m,n,o){return this.__getEventEmitter().once(m,n,o);},addRetroactiveListener:function(m,n,o){return this.__getEventEmitter().addRetroactiveListener(m,n,o);},addListenerMap:function(m,n){return this.__getEventEmitter().addListenerMap(m,n);},addRetroactiveListenerMap:function(m,n){return this.__getEventEmitter().addListenerMap(m,n);},listeners:function(m){return this.__getEventEmitter().listeners(m);},removeAllListeners:function(){this.__getEventEmitter().removeAllListeners();},removeCurrentListener:function(){this.__getEventEmitter().removeCurrentListener();},releaseHeldEventType:function(m){this.__getEventEmitter().releaseHeldEventType(m);},__getEventEmitter:function(){if(!this.__eventEmitter){var m=new h(this.__types),n=new i();this.__eventEmitter=new g(m,n);}return this.__eventEmitter;}};e.exports=k;},null);
__d("ArtilleryTrace",["ArtillerySegment","ArtillerySequence","ImmutableObject","invariant","mixInEventEmitter"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();function l(){"use strict";this.$ArtilleryTrace0=false;this.$ArtilleryTrace1=(void 0);this.$ArtilleryTrace2={};this.$ArtilleryTrace3=[];this.$ArtilleryTrace4=[];this.$ArtilleryTrace5={};this.$ArtilleryTrace6=[];}l.prototype.createSequence=function(m){"use strict";j(!this.$ArtilleryTrace0);var n=new h(m);this.$ArtilleryTrace3.push(n);return n;};l.prototype.createSegment=function(m){"use strict";j(!this.$ArtilleryTrace0);var n=new g(m);this.$ArtilleryTrace4.push(n);return n;};l.prototype.markSegment=function(m,n){"use strict";j(!this.$ArtilleryTrace0);this.$ArtilleryTrace5[n]=m.getID();return this;};l.prototype.connectTrace=function(m,n){"use strict";j(!this.$ArtilleryTrace0);n=n||this.$ArtilleryTrace1;j(n);this.$ArtilleryTrace6.push({segment:m.getID(),trace:n});return this;};l.prototype.setID=function(m){"use strict";j(!this.$ArtilleryTrace1);this.$ArtilleryTrace1=m;return this;};l.prototype.getID=function(){"use strict";return this.$ArtilleryTrace1;};l.prototype.addProperty=function(m,n){"use strict";this.$ArtilleryTrace2[m]=n;};l.prototype.post=function(){"use strict";j(!this.$ArtilleryTrace0);this.$ArtilleryTrace0=true;var m=new i({id:this.$ArtilleryTrace1,properties:this.$ArtilleryTrace2,sequences:this.$ArtilleryTrace3.map(function(n){return n.setPosted().getPostData();}),segments:this.$ArtilleryTrace4.map(function(n){return n.setPosted().getPostData();}),marks:Object.assign({},this.$ArtilleryTrace5),connections:this.$ArtilleryTrace6.slice()});this.emitAndHold('post',m);};l.prototype.isPosted=function(){"use strict";return this.$ArtilleryTrace0;};k(l,{post:true});e.exports=l;},null);
__d("Miny",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g='Miny1',h={encode:[],decode:{}},i='wxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-_'.split('');function j(n){for(var o=h.encode.length;o<n;o++){var p=o.toString(32).split('');p[p.length-1]=i[parseInt(p[p.length-1],32)];p=p.join('');h.encode[o]=p;h.decode[p]=o;}return h;}function k(n){if(/^$|[~\\]|__proto__/.test(n))return n;var o=n.match(/\w+|\W+/g),p={};for(var q=0;q<o.length;q++)p[o[q]]=(p[o[q]]||0)+1;var r=Object.keys(p);r.sort(function(u,v){return p[u]<p[v]?1:(p[v]<p[u]?-1:0);});var s=j(r.length).encode;for(q=0;q<r.length;q++)p[r[q]]=s[q];var t=[];for(q=0;q<o.length;q++)t[q]=p[o[q]];return [g,r.length].concat(r).concat(t.join('')).join('~');}function l(n){var o=n.split('~');if(o.shift()!=g)return n;var p=parseInt(o.shift(),10),q=o.pop();q=q.match(/[0-9a-v]*[\-w-zA-Z_]/g);var r=o,s=j(p).decode,t=[];for(var u=0;u<q.length;u++)t[u]=r[s[q[u]]];return t.join('');}var m={encode:k,decode:l};e.exports=m;},null);
__d("QueryString",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(k){var l=[];Object.keys(k).sort().forEach(function(m){var n=k[m];if(typeof n==='undefined')return;if(n===null){l.push(m);return;}l.push(encodeURIComponent(m)+'='+encodeURIComponent(n));});return l.join('&');}function h(k,l){var m={};if(k==='')return m;var n=k.split('&');for(var o=0;o<n.length;o++){var p=n[o].split('=',2),q=decodeURIComponent(p[0]);if(l&&m.hasOwnProperty(q))throw new URIError('Duplicate key: '+q);m[q]=p.length===2?decodeURIComponent(p[1]):null;}return m;}function i(k,l){return k+(~k.indexOf('?')?'&':'?')+(typeof l==='string'?l:j.encode(l));}var j={encode:g,decode:h,appendToUrl:i};e.exports=j;},null);
__d("VersionRange",["invariant"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';var h=/\./,i=/\|\|/,j=/\s+\-\s+/,k=/^(<=|<|=|>=|~>|~|>|)?\s*(.+)/,l=/^(\d*)(.*)/;function m(ea,fa){var ga=ea.split(i);if(ga.length>1){return ga.some(function(ha){return da.contains(ha,fa);});}else{ea=ga[0].trim();return n(ea,fa);}}function n(ea,fa){var ga=ea.split(j);g(ga.length>0&&ga.length<=2);if(ga.length===1){return o(ga[0],fa);}else{var ha=ga,ia=ha[0],ja=ha[1];g(x(ia)&&x(ja));return (o('>='+ia,fa)&&o('<='+ja,fa));}}function o(ea,fa){ea=ea.trim();if(ea==='')return true;var ga=fa.split(h),ha=v(ea),ia=ha.modifier,ja=ha.rangeComponents;switch(ia){case '<':return p(ga,ja);case '<=':return q(ga,ja);case '>=':return s(ga,ja);case '>':return t(ga,ja);case '~':case '~>':return u(ga,ja);default:return r(ga,ja);}}function p(ea,fa){return ca(ea,fa)===-1;}function q(ea,fa){var ga=ca(ea,fa);return ga===-1||ga===0;}function r(ea,fa){return ca(ea,fa)===0;}function s(ea,fa){var ga=ca(ea,fa);return ga===1||ga===0;}function t(ea,fa){return ca(ea,fa)===1;}function u(ea,fa){var ga=fa.slice(),ha=fa.slice();if(ha.length>1)ha.pop();var ia=ha.length-1,ja=parseInt(ha[ia],10);if(w(ja))ha[ia]=ja+1+'';return (s(ea,ga)&&p(ea,ha));}function v(ea){var fa=ea.split(h),ga=fa[0].match(k);g(ga);return {modifier:ga[1],rangeComponents:[ga[2]].concat(fa.slice(1))};}function w(ea){return !isNaN(ea)&&isFinite(ea);}function x(ea){return !v(ea).modifier;}function y(ea,fa){for(var ga=ea.length;ga<fa;ga++)ea[ga]='0';}function z(ea,fa){ea=ea.slice();fa=fa.slice();y(ea,fa.length);for(var ga=0;ga<fa.length;ga++){var ha=fa[ga].match(/^[x*]$/i);if(ha){fa[ga]=ea[ga]='0';if(ha[0]==='*'&&ga===fa.length-1)for(var ia=ga;ia<ea.length;ia++)ea[ia]='0';}}y(fa,ea.length);return [ea,fa];}function aa(ea,fa){var ga=ea.match(l)[1],ha=fa.match(l)[1],ia=parseInt(ga,10),ja=parseInt(ha,10);if(w(ia)&&w(ja)&&ia!==ja){return ba(ia,ja);}else return ba(ea,fa);}function ba(ea,fa){g(typeof ea===typeof fa);if(ea>fa){return 1;}else if(ea<fa){return -1;}else return 0;}function ca(ea,fa){var ga=z(ea,fa),ha=ga[0],ia=ga[1];for(var ja=0;ja<ia.length;ja++){var ka=aa(ha[ja],ia[ja]);if(ka)return ka;}return 0;}var da={contains:function(ea,fa){return m(ea.trim(),fa.trim());}};e.exports=da;},null);
__d("mapObject",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();'use strict';var g=Object.prototype.hasOwnProperty;function h(i,j,k){if(!i)return null;var l={};for(var m in i)if(g.call(i,m))l[m]=j.call(k,i[m],m,i);return l;}e.exports=h;},null);
__d("memoizeStringOnly",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();'use strict';function g(h){var i={};return function(j){if(!i.hasOwnProperty(j))i[j]=h.call(this,j);return i[j];};}e.exports=g;},null);
__d("UserAgent",["UserAgentData","VersionRange","mapObject","memoizeStringOnly"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';function k(n,o,p,q){if(n===p)return true;if(!p.startsWith(n))return false;var r=p.slice(n.length);if(o){r=q?q(r):r;return h.contains(r,o);}return false;}function l(n){if(g.platformName==='Windows')return n.replace(/^\s*NT/,'');return n;}var m={isBrowser:function(n){return k(g.browserName,g.browserFullVersion,n);},isBrowserArchitecture:function(n){return k(g.browserArchitecture,null,n);},isDevice:function(n){return k(g.deviceName,null,n);},isEngine:function(n){return k(g.engineName,g.engineVersion,n);},isPlatform:function(n){return k(g.platformName,g.platformFullVersion,n,l);},isPlatformArchitecture:function(n){return k(g.platformArchitecture,null,n);}};e.exports=i(m,j);},null);
__d("BanzaiAdapter",["Arbiter","CurrentUser","Miny","QueryString","Run","SiteData","UserAgent","getAsyncParams","getSameOriginTransport","setTimeoutAcrossTransitions","BanzaiConfig"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){b.__markCompiled&&b.__markCompiled();var r=[],s=new g(),t='/ajax/bz',u={},v=u.adapter={config:q,getUserID:function(){return h.getID();},inform:function(w){s.inform(w);},subscribe:function(w,x){s.subscribe(w,x);},cleanup:function(){var w=r;r=[];w.forEach(function(x){if(x.readyState<4)x.abort();});},readyToSend:function(){return m.isBrowser('IE <= 8')||navigator.onLine;},send:function(w,x,y,z){var aa='POST',ba=o();ba.open(aa,t,true);ba.setRequestHeader('Content-Type','application/x-www-form-urlencoded');ba.onreadystatechange=function(){if(ba.readyState>=4){var fa;try{fa=ba.status;}catch(ga){fa=0;}if(fa==200){if(x)x();if(!z)v.inform(u.OK);}else{if(y)y(fa);if(!z)v.inform(u.ERROR);}}};p(function(){if(ba.readyState<4)ba.abort();},u.SEND_TIMEOUT);r.push(ba);var ca=n(aa);ca.q=JSON.stringify(w);ca.ts=Date.now();ca.ph=l.push_phase;if(u.FBTRACE)ca.fbtrace=u.FBTRACE;if(u.isEnabled('miny_compression')){var da=Date.now(),ea=i.encode(ca.q);if(ea.length<ca.q.length){ca.q=ea;ca.miny_encode_ms=Date.now()-da;}}ba.send(j.encode(ca));},setHooks:function(){k.onAfterUnload(u._unload);},onUnload:function(w){k.onAfterUnload(w);}};e.exports=u;},null);
__d("FBJSON",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={parse:JSON.parse,stringify:JSON.stringify};},null);
__d("PageletSet",["Arbiter"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={},i={hasPagelet:function(l){return h.hasOwnProperty(l);},getPagelet:function(l){return h[l];},getOrCreatePagelet:function(l){if(!i.hasPagelet(l)){var m=new k(l);h[l]=m;}return i.getPagelet(l);},getPageletIDs:function(){return Object.keys(h);},removePagelet:function(l){if(i.hasPagelet(l)){h[l].destroy();delete h[l];}}};function j(l,m){return l.contains?l.contains(m):l.compareDocumentPosition(m)&16;}function k(l){"use strict";this.id=l;this._root=null;this._destructors=[];this.addDestructor(function m(){g.inform('pagelet/destroy',{id:this.id,root:this._root});}.bind(this));}k.prototype.setRoot=function(l){"use strict";this._root=l;};k.prototype._getDescendantPagelets=function(){"use strict";var l=[];if(!this._root)return l;var m=i.getPageletIDs();for(var n=0;n<m.length;n++){var o=m[n];if(o===this.id)continue;var p=h[o];if(p._root&&j(this._root,p._root))l.push(p);}return l;};k.prototype.addDestructor=function(l){"use strict";this._destructors.push(l);};k.prototype.destroy=function(){"use strict";var l=this._getDescendantPagelets();for(var m=0;m<l.length;m++){var n=l[m];if(i.hasPagelet(n.id))i.removePagelet(n.id);}for(m=0;m<this._destructors.length;m++)this._destructors[m]();if(this._root)while(this._root.firstChild)this._root.removeChild(this._root.firstChild);};e.exports=i;},null);
__d("invokeCallbacks",["ErrorUtils"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(i,j){if(i)for(var k=0;k<i.length;k++)g.applyWithGuard(new Function(i[k]),j);}e.exports=h;},null);
__d("BigPipe",["Arbiter","Bootloader","Env","ErrorUtils","JSCC","PageEvents","PageletSet","Run","ServerJS","$","copyProperties","ge","invokeCallbacks","ix","performanceAbsoluteNow"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){b.__markCompiled&&b.__markCompiled();var v=document.documentMode||+(/MSIE.(\d+)/.exec(navigator.userAgent)||[])[1],w=g.BEHAVIOR_STATE,x=g.BEHAVIOR_PERSISTENT,y=[];function z(da){"use strict";q(this,{arbiter:g,rootNodeID:'content',lid:0,isAjax:false,domContentCallback:n.__domContentCallback,onloadCallback:n.__onloadCallback,domContentEvt:l.BIGPIPE_DOMREADY,onloadEvt:l.BIGPIPE_ONLOAD,forceFinish:false,_phaseDoneCallbacks:[],_currentPhase:0,_lastPhase:-1,_livePagelets:{}});q(this,da);if(this.automatic){this._relevant_instance=z._current_instance;}else z._current_instance=this;this._serverJS=new o();g.inform(z.Events.init,{lid:this.lid,arbiter:this.arbiter},x);this.arbiter.registerCallback(this.domContentCallback,['pagelet_displayed_all']);this._informEventExternal('phase_begin',{phase:0});this.arbiter.inform('phase_begin_0',true,w);this.onloadCallback=this.arbiter.registerCallback(this.onloadCallback,['pagelet_displayed_all']);this.arbiter.registerCallback(this._serverJS.cleanup.bind(this._serverJS),[this.onloadEvt]);this._secondFlushPendingJS=[];this._secondFlushRan=false;}z.prototype._beginPhase=function(da){"use strict";this._informEventExternal('phase_begin',{phase:da});this.arbiter.inform('phase_begin_'+da,true,w);};z.prototype._endPhase=function(da){"use strict";this.arbiter.inform('phase_arrived_'+da,true,w);if(!this.isAjax)y.push(Date.now());};z.prototype._displayPageletHandler=function(da){"use strict";if(this.displayCallback){this.displayCallback(this._displayPagelet.bind(this,da));}else this._displayPagelet(da);};z.prototype._displayPagelet=function(da){"use strict";this._informPageletEvent('display_start',da);var ea=this._getPagelet(da);for(var fa in da.content){var ga=da.content[fa];if(da.append)fa=this._getPageletRootID(da);var ha=r(fa);if(!ha)continue;if(fa===ea.id)ea.setRoot(ha);ga=aa(ga);if(ga)if(da.append||v<8){if(!da.append)while(ha.firstChild)ha.removeChild(ha.firstChild);ca(ha,ga);}else ha.innerHTML=ga;var ia=ha.getAttribute('data-referrer');if(!ia)ha.setAttribute('data-referrer',fa);if(da.cache_hit&&i.pc_debug)ha.style.border='1px red solid';}if(da.jsmods){var ja=JSON.parse(JSON.stringify(da.jsmods)),ka=this._serverJS.handlePartial(ja);ea.addDestructor(ka.cancel.bind(ka));}this._informPageletEvent('display',da);this.arbiter.inform(da.id+'_displayed',true,w);};z.prototype._onPhaseDone=function(){"use strict";this.arbiter.inform('phase_displayed_'+this._currentPhase);if(this._currentPhase===this._ttiPhase){var da=h.__debug.earlyResources,ea=h.__debug.requested,fa=0;for(var ga in ea)fa+=!(ga in da);var ha={pre_tti_non_ef_resources:fa};if(!this.isAjax){ha.cjs_factory_count_tti=b.__getTotalFactories();ha.cjs_compile_time_tti=b.__getCompileTime();ha.cjs_factory_time_tti=b.__getFactoryTime();}this._informEventExternal(z.Events.tti,{phase:this._ttiPhase,rid:this.rid,ajax:this.isAjax,metrics:ha});if(this._secondFlushResources){this.loadSecondFlushResources(this._secondFlushResources);delete this._secondFlushResources;}}if(this._currentPhase===this._lastPhase&&this._isRelevant())this.arbiter.inform('pagelet_displayed_all',true,w);this._currentPhase++;if(v<=8){setTimeout(this._beginPhase.bind(this,this._currentPhase),20);}else this._beginPhase(this._currentPhase);};z.prototype._downloadJsForPagelet=function(da){"use strict";this._informPageletEvent('jsstart',da);h.loadResources(da.js||[],function(){this._informPageletEvent('jsdone',da);da.requires=da.requires||[];if(!this.isAjax||da.phase>=1)da.requires.push('uipage_onload');var ea=function(){this._informPageletEvent('preonload',da);if(this._isRelevantPagelet(da))s(da.onload);this._informPageletEvent('onload',da);this.arbiter.inform('pagelet_onload',true,g.BEHAVIOR_EVENT);da.provides&&this.arbiter.inform(da.provides,true,w);}.bind(this),fa=function(){this._isRelevantPagelet(da)&&s(da.onafterload);}.bind(this);this.arbiter.registerCallback(ea,da.requires);this.arbiter.registerCallback(fa,[this.onloadEvt]);}.bind(this),false,da.id);};z.prototype._getPagelet=function(da){"use strict";var ea=this._getPageletRootID(da);return m.getPagelet(ea);};z.prototype._getPageletRootID=function(da){"use strict";var ea=da.append;if(ea)return (ea==='bigpipe_root')?this.rootNodeID:ea;return Object.keys(da.content)[0]||null;};z.prototype._isRelevant=function(){"use strict";return this==z._current_instance||(this.automatic&&this._relevant_instance==z._current_instance)||this.jsNonBlock||this.forceFinish||(z._current_instance&&z._current_instance.allowIrrelevantRequests);};z.prototype._isRelevantPagelet=function(da){"use strict";if(!this._isRelevant())return false;var ea=this._getPageletRootID(da);return !!this._livePagelets[ea];};z.prototype._informEventExternal=function(da,ea){"use strict";ea=ea||{};ea.ts=u();ea.lid=this.lid;console.timeStamp&&console.timeStamp(da+" "+JSON.stringify(ea));this.arbiter.inform(da,ea,x);};z.prototype._informPageletEvent=function(da,ea){"use strict";var fa={event:da,id:ea.id};if(ea.phase)fa.phase=ea.phase;if(ea.categories)fa.categories=ea.categories;this._informEventExternal('pagelet_event',fa);};z.getCurrentInstance=function(){"use strict";return z._current_instance;};z.prototype.getPhaseFromTime=function(da){"use strict";for(var ea=0;ea<y.length;ea++)if(da<y[ea])return ea;return 100;};z.prototype.loadSecondFlushResources=function(da){"use strict";h.loadEarlyResources(da);if(this._secondFlushPendingJS.length){h.loadResources(this._secondFlushPendingJS);this._secondFlushPendingJS=[];}this._secondFlushRan=true;};q(z.prototype,{beforePageletArrive:function(da){this._informPageletEvent('prearrive',{id:da});},setSecondFlushResources:function(da){if(this._ttiPhase!=(void 0)&&this._currentPhase>this._ttiPhase){this.loadSecondFlushResources(da);}else this._secondFlushResources=da;},onPageletArrive:j.guard(function(da){this._informPageletEvent('arrive',da);da.content=da.content||{};var ea=da.phase;if(!this._phaseDoneCallbacks[ea])this._phaseDoneCallbacks[ea]=this.arbiter.registerCallback(this._onPhaseDone.bind(this),['phase_arrived_'+ea]);this.arbiter.registerCallback(this._phaseDoneCallbacks[ea],[da.id+'_displayed']);var fa=this._getPageletRootID(da),ga=m.getOrCreatePagelet(fa);if(da.the_end)this._lastPhase=ea;if(da.tti_phase!==(void 0))this._ttiPhase=da.tti_phase;if(da.is_second_to_last_phase)this._secondToLastPhase=ea;this._livePagelets[ga.id]=true;ga.addDestructor(function(){delete this._livePagelets[ga.id];}.bind(this));if(da.jscc_map){var ha=(eval)(da.jscc_map),ia=k.init(ha);ga.addDestructor(ia);}if(da.resource_map)h.setResourceMap(da.resource_map);if(da.bootloadable)h.enableBootload(da.bootloadable);t.add(da.ixData);this._informPageletEvent('setup',da);var ja=new g();ja.registerCallback(this._displayPageletHandler.bind(this,da),['preceding_pagelets_displayed','display_resources_downloaded']);var ka=da.display_dependency||[],la=ka.map(function(na){return na+'_displayed';});this.arbiter.registerCallback(function(){ja.inform('preceding_pagelets_displayed');},la);this.arbiter.registerCallback(function(){this._informPageletEvent('css',da);var na=(da.css||[]).concat(da.displayJS||[]);h.loadResources(na,function(){this._informPageletEvent('css_load',da);ja.inform('display_resources_downloaded');}.bind(this),false,da.id);}.bind(this),['phase_begin_'+ea]);this.arbiter.registerCallback(this.onloadCallback,['pagelet_onload']);var ma=[da.id+'_displayed'];if(!this.jsNonBlock)ma.push(this.domContentEvt);if(this._secondFlushRan){h.loadResources(da.js||[]);}else Array.prototype.push.apply(this._secondFlushPendingJS,da.js||[]);this.arbiter.registerCallback(this._downloadJsForPagelet.bind(this,da),ma);if(da.is_last)this._endPhase(ea);},'BigPipe#onPageletArrive')});function aa(da){if(!da||typeof da==='string')return da;if(da.container_id){var ea=p(da.container_id);da=ba(ea)||'';ea.parentNode.removeChild(ea);return da;}return null;}z.Events={init:'BigPipe/init',tti:'tti_bigpipe'};function ba(da){if(!da.firstChild){h.loadModules(["ErrorSignal"],function(fa){fa.sendErrorSignal('bigpipe','Pagelet markup container is empty.');});return null;}if(da.firstChild.nodeType!==8)return null;var ea=da.firstChild.nodeValue;ea=ea.substring(1,ea.length-1);return ea.replace(/\\([\s\S]|$)/g,'$1');}function ca(da,ea){var fa=document.createElement('div'),ga=v<7;if(ga)da.appendChild(fa);fa.innerHTML=ea;var ha=document.createDocumentFragment();while(fa.firstChild)ha.appendChild(fa.firstChild);da.appendChild(ha);if(ga)da.removeChild(fa);}e.exports=z;},null);
__d("pageID",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=Math.floor(2147483648*Math.random()).toString(36);},null);
__d("NavigationMetrics-upstream",["mixInEventEmitter","pageID","performance"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=false,k=0,l,m={NAVIGATION_DONE:'NAVIGATION_DONE'},n=i.timing&&i.timing.navigationStart||0,o=0,p=0,q,r,s;function t(){l=h+':'+k;}var u={setTTI:function(w){o=w;return this;},setE2E:function(w){p=w;return this;},doneNavigation:function(){k++;t();v.emitAndHold(m.NAVIGATION_DONE,l,{page:q,pageType:r,pageURI:s,start:n,tti:o,e2e:p});n=0;o=0;p=0;},setStart:function(w){n=w;return this;}},v={Events:m,init:function(w){throw new Error('NavigationMetrics.init should be overridden by shim');},setPage:function(w){if(!j){j=true;v.init(u);}q=w.page;r=w.page_type;s=w.page_uri;}};g(v,m);e.exports=v;},null);
__d("NavigationMetrics",["Arbiter","BigPipe","NavigationMetrics-upstream","PageEvents"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k={};i.init=function(l){g.subscribe(h.Events.init,function(m,n){var o=n.arbiter;o.subscribe(h.Events.tti,function(p,q){if(q.ajax){var r=k[q.rid];if(r)r.tti=q.ts;}else l.setTTI(q.ts);});o.subscribe(j.AJAXPIPE_SEND,function(p,q){if(q.quickling)k[q.rid]={start:q.ts};});o.subscribe(j.AJAXPIPE_ONLOAD,function(p,q){var r=k[q.rid];if(r){l.setStart(r.start);l.setTTI(r.tti);l.setE2E(q.ts);l.doneNavigation();}});});g.subscribe(j.BIGPIPE_ONLOAD,function(m,n){l.setE2E(n.ts);l.doneNavigation();});};e.exports=i;},null);
__d("WebStorage",["ErrorUtils","ex"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i={};function j(q){if(!i.hasOwnProperty(q))i[q]=k(q);return i[q];}function k(q){try{var s=window[q];if(s){var t='__test__'+Date.now();s.setItem(t,'');s.removeItem(t);}return s;}catch(r){}}function l(){return j('localStorage');}function m(){return j('sessionStorage');}function n(q){var r=[];for(var s=0;s<q.length;s++)r.push(q.key(s));return r;}function o(q,r,s){var t=null;try{q.setItem(r,s);}catch(u){var v=n(q).map(function(w){var x=q.getItem(w).length;return w+'('+x+')';});t=new Error(h('Storage quota exceeded while setting %s(%s). Items(length) follows: %s',r,s.length,v.join()));g.reportError(t);}return t;}var p={getLocalStorage:l,getSessionStorage:m,setItemGuarded:o};e.exports=p;},null);
__d("WebStorageMutex",["WebStorage","setTimeoutAcrossTransitions","pageID"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=g.getLocalStorage(),k=i;function l(m){"use strict";this.name=m;}l.testSetPageID=function(m){"use strict";k=m;};l.prototype.$WebStorageMutex0=function(){"use strict";if(!j)return k;var m=j.getItem('mutex_'+this.name);m=m?m.split(':'):null;return m&&m[1]>=Date.now()?m[0]:null;};l.prototype.$WebStorageMutex1=function(m){"use strict";if(!j)return;var n=Date.now()+(m||10000);g.setItemGuarded(j,'mutex_'+this.name,k+':'+n);};l.prototype.hasLock=function(){"use strict";return this.$WebStorageMutex0()==k;};l.prototype.lock=function(m,n,o){"use strict";if(this.$WebStorageMutex2)clearTimeout(this.$WebStorageMutex2);if(k==(this.$WebStorageMutex0()||k))this.$WebStorageMutex1(o);this.$WebStorageMutex2=h(function(){this.$WebStorageMutex2=null;var p=this.hasLock()?m:n;if(p)p(this);}.bind(this),0);};l.prototype.unlock=function(){"use strict";if(this.$WebStorageMutex2)clearTimeout(this.$WebStorageMutex2);if(j&&this.hasLock())j.removeItem('mutex_'+this.name);};e.exports=l;},null);
__d("Banzai",["BanzaiAdapter","CurrentUser","ErrorUtils","ExecutionEnvironment","FBJSON","ModulePerformanceGating","NavigationMetrics","WebStorage","emptyFunction","isInIframe","pageID","setTimeoutAcrossTransitions","WebStorageMutex"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();var s=g.adapter,t=p(),u='bz:',v=0,w=1,x=2,y,z,aa=[],ba=null;function ca(ja){return ja[2]>=Date.now()-(s.config.EXPIRY||g.EXPIRY);}function da(ja,ka){ja.__meta.status=v;ja[3]=(ja[3]||0)+1;if(!ja.__meta.retry&&ka>=400&&ka<600)aa.push(ja);}function ea(ja){var ka=Date.now()+ja;if(!z||ka<z){z=ka;clearTimeout(y);y=r(fa,ja);return true;}}function fa(){ga(null,null);}function ga(ja,ka){z=null;ea(g.BASIC.delay);if(!s.readyToSend()){if(ka)ka();return;}s.inform(g.SEND);var la=[],ma=[],na={};aa=aa.filter(function(oa){var pa=oa.__meta;if(pa.status>=x||!ca(oa))return false;if(pa.status>=w)return true;var qa=pa.pageID+pa.userID,ra=na[qa];if(!ra){ra={user:pa.userID,page_id:pa.pageID,posts:[]};na[qa]=ra;la.push(ra);}pa.status=w;ra.posts.push(oa);ma.push(oa);return pa.retry;});if(la.length<=0){s.inform(g.OK);if(ja)ja();return;}la[0].trigger=ba;ba=null;s.send(la,function(){ma.forEach(function(oa){oa.__meta.status=x;});if(ja)ja();},function(oa){ma.forEach(function(pa){da(pa,oa);});if(ka)ka();});}var ha;function ia(){if(!ha){var ja=n.getLocalStorage();if(ja&&!t){ha={store:function ka(){if(aa.length<=0)return;var la=aa.map(function(ma){return [ma[0],ma[1],ma[2],ma[3]||0,ma.__meta];});aa=[];ja.setItem(u+q+'.'+Date.now(),k.stringify(la));},restore:function ka(){var la=b('WebStorageMutex');(new la('banzai')).lock(function(ma){var na=[];for(var oa=0;oa<ja.length;oa++){var pa=ja.key(oa);if(pa.indexOf(u)===0&&pa.indexOf('bz:__')!==0)na.push(pa);}na.forEach(function(qa){var ra=ja.getItem(qa);ja.removeItem(qa);if(!ra)return;var sa=k.parse(ra,e.id);sa.forEach(function(ta){if(!ta)return;var ua=ta.__meta=ta.pop(),va=ca(ta);if(!va)return;var wa=h.getID(),xa=ua.userID===wa,ya=g.isEnabled('allow_userid_mismatch')&&wa==='0';if(xa||ya){ua.status=v;aa.push(ta);}});});ma.unlock();});}};}else ha={store:o,restore:o};}}g.SEND='Banzai:SEND';g.OK='Banzai:OK';g.ERROR='Banzai:ERROR';g.SHUTDOWN='Banzai:SHUTDOWN';g.SEND_TIMEOUT=15000;g.VITAL_WAIT=1000;g.BASIC_WAIT=60000;g.EXPIRY=30*60000;g.VITAL={delay:s.config.MIN_WAIT||g.VITAL_WAIT};g.BASIC={delay:s.config.MAX_WAIT||g.BASIC_WAIT};g.FBTRACE=s.config.fbtrace,g.isEnabled=function(ja){return s.config.gks&&s.config.gks[ja];};g.post=function(ja,ka,la){if(!ja)i.reportError(new Error('Banzai.post called without specifying a route'));la=la||{};var ma=la.retry;if(s.config.disabled)return;if(!j.canUseDOM)return;var na=s.config.blacklist;if(na)if(na.indexOf)if(typeof na.indexOf=='function')if(na.indexOf(ja)!=-1)return;if(t&&document.domain=='facebook.com'){var oa;try{oa=a.top.require('Banzai');}catch(pa){oa=null;}if(oa){oa.post.apply(oa,arguments);return;}}var qa=[ja,ka,Date.now(),0];qa.__meta={retry:ma===true,pageID:q,userID:h.getID(),status:v};if(la.signal){qa.__meta.status=w;var ra=[{user:h.getID(),page_id:q,posts:[qa],trigger:ja}];s.send(ra,function(){qa.__meta.status=x;},function(ta){da(qa,ta);},true);if(!ma)return;}aa.push(qa);var sa=la.delay;if(sa==null)sa=g.BASIC_WAIT;if(ea(sa)||!ba)ba=ja;};g.flush=function(ja,ka){clearTimeout(y);y=0;ga(ja,ka);};g.subscribe=s.subscribe;g._schedule=ea;g._store=function(ja){ia();i.applyWithGuard(ha.store,ha);};g._restore=function(ja){ia();i.applyWithGuard(ha.restore,ha);ea(s.config.RESTORE_WAIT||g.VITAL_WAIT);};g._unload=function(){s.cleanup();s.inform(g.SHUTDOWN);ia();i.applyWithGuard(ha.store,ha);};g._testState=function(){return {postBuffer:aa,triggerRoute:ba};};if(j.canUseDOM){s.setHooks();if(l.js_module_defer_banzai_restoration){m.addListener(m.Events.NAVIGATION_DONE,function(){g._restore();m.removeCurrentListener();});}else g._restore();}e.exports=g;},null);
__d("Artillery",["ArtilleryTrace","Banzai","forEachObject","invariant","mixInEventEmitter"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=false,m=false,n=[],o,p,q;function r(){if(l)return;l=true;h.subscribe(h.SHUTDOWN,function(){s.postAll();});}var s={isEnabled:function(){return m;},createTrace:function(){r();var t=new g();n.push(t);t.addListener('post',s.emitAndHold.bind(s,'posttrace'));return t;},getPageTrace:function(){j(o);if(p)return p;p=s.createTrace().setID(o);i(q,function(t,u,v){p.addProperty(u,t);});return p;},postAll:function(){n.forEach(function(t){return !t.isPosted()&&t.post();});},enable:function(){m=true;},setPageTraceID:function(t){j(!o);o=t;},setPageProperties:function(t){q=t;},getPageProperty:function(t){return q[t];}};k(s,{posttrace:true});e.exports=s;},null);
__d("ArtilleryCategory",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={UNKNOWN:0,SERVER:1,SERVER_WAIT:2,NETWORK:3,CLIENT:4,CLIENT_WAIT:6,RESOURCE_WAIT:7,NETWORK_WAIT:8};},null);
__d("ArtillerySequenceType",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={SEQUENCE_UNKNOWN:0,SEQUENCE_SERVER:1,SEQUENCE_CLIENT:2};},null);
__d("isAtlassolutionsDotComURI",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g=new RegExp('(^|\\.)atlassolutions\\.com$','i'),h=['https'];function i(j){if(j.isEmpty()&&j.toString()!=='#')return false;if(!j.getDomain()&&!j.getProtocol())return true;return (h.indexOf(j.getProtocol())!==-1&&g.test(j.getDomain()));}e.exports=i;},null);
__d("memoize",["invariant"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(i){var j;return function(){for(var k=[],l=0,m=arguments.length;l<m;l++)k.push(arguments[l]);g(!k.length);if(i){j=i();i=null;}return j;};}e.exports=h;},null);
__d("AsyncSignal",["ErrorUtils","QueryString","TrackingConfig","URI","isAtlassolutionsDotComURI","isFacebookURI","isMessengerDotComURI","copyProperties","getAsyncParams","memoize"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();function q(r,s){this.data=s||{};this.uri=r.toString();if(i.domain&&this.uri.charAt(0)=='/')this.uri=i.domain+this.uri;}q.prototype.setHandler=function(r){this.handler=r;return this;};q.prototype.setTimeout=function(r){this.timeout=r;return this;};q.prototype.send=function(){var r=this.handler,s=this.data,t=new Image();if(r){var u=p(function(){g.applyWithGuard(r,null,[t.height==1]);});t.onload=t.onerror=function(){u();};if(this.timeout)setTimeout(u,this.timeout);}s.asyncSignal=(Math.random()*10000|0)+1;var v=new j(this.uri),w=l(v)||m(v)||k(v);if(w){n(s,o('POST'));}else throw new Error("'"+this.uri+"' "+"is an external URL, you should not send async signals to offsite links.");t.src=h.appendToUrl(this.uri,s);return this;};e.exports=q;},null);
__d("ScriptPath",["ErrorUtils"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=null,i=null,j={},k=0,l=null,m={PAGE_LOAD:'load',PAGE_UNLOAD:'unload',OPEN_OVERLAY_VIEW:'open_overlay_view',CLOSE_OVERLAY_VIEW:'close_overlay_view',TRANSITION:'transition'},n=[];function o(t){var u=++k;j[u]=t;return u;}function p(t){if(j[t])delete j[t];}function q(t){Object.keys(j).forEach(function(u){g.applyWithGuard(j[u],null,[{source:h,dest:i,cause:t}]);});}function r(){return i?i.scriptPath:(void 0);}var s={set:function(t,u,v){h=i;i={scriptPath:t,categoryToken:u,extraInfoFromServer:(!v||typeof v!=='object')?{}:v};n=[];window._script_path=t;q();},openOverlayView:function(t){if(!t)return;var u=n.length;if(u===0||n[u-1]!==t){h=Object.assign({},i);i.topViewEndpoint=t;n.push(t);q(m.OPEN_OVERLAY_VIEW);}},closeOverlayView:function(t){var u=n.lastIndexOf(t);if(u===-1)return;h=Object.assign({},i);if(u>0){i.topViewEndpoint=n[u-1];}else i.topViewEndpoint=null;n=n.slice(0,u);q(m.CLOSE_OVERLAY_VIEW);},setClickPointInfo:function(t){l=t;},getClickPointInfo:function(){return l;},getScriptPath:r,getCategoryToken:function(){return i?i.categoryToken:(void 0);},getTopViewEndpoint:function(){var t=n.length;return t>0?n[t-1]:r();},getPageInfo:function(){return i;},getSourcePageInfo:function(){return h;},subscribe:function(t){return o(t);},unsubscribe:function(t){p(t);}};s.CAUSE=m;e.exports=s;},null);
__d("ErrorSignal",["AsyncRequest","AsyncSignal","ErrorSignalConfig","ScriptPath","SiteData","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();function m(p,q){if(p&&p=='async_error'){var r=JSON.parse(q),s=r.err_code,t=r.path;if(s in {'1004':1,'12029':1,'12031':1,'12152':1}&&t.indexOf('scribe_endpoint.php')==-1){new g().setURI('/ajax/chat/scribe_endpoint.php').setData({c:'async_error',m:q}).setMethod('GET').setReadOnly(true).setOption('suppressEvaluation',true).setOption('suppressErrorAlerts',true).setHandler(l).setErrorHandler(l).send(true);return;}}new h(i.uri,{c:p,m:q}).send();}function n(p,q){var r=a.SessionName;q=q||{};q.svn_rev=k.revision;q.script_path=j.getScriptPath();var s=(r&&r.getName()||'-')+'/-';m('javascript_error',JSON.stringify({c:p,a:s,m:q}));}var o={sendErrorSignal:m,logJSError:n};e.exports=o;a.ErrorSignal=o;},null);
__d("ErrorLogging",["ErrorSignal","ErrorUtils","JSErrorExtra","JSErrorPlatformColumns"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();function k(m){var n=m.extra||{},o={};Object.keys(i).forEach(function(p){if(i[p])o[p]=true;});Object.keys(n).forEach(function(p){if(n[p]){o[p]=true;}else if(o[p])delete o[p];});m.extra=Object.keys(o);}function l(m){m.app_id=j.app_id;}h.addListener(function(m){k(m);l(m);g.logJSError(m.category||'onerror',{error:m.name||m.message,extra:m});});},null);
__d("BanzaiLogger",["Banzai"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h='logger';function i(k){return {log:function(l,m){g.post(h+':'+l,m,k);}};}var j=i();j.create=i;e.exports=j;},null);
__d("FbtLoggerImpl",["BanzaiLogger"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={logImpression:function(i){g.log('FbtImpressionsLoggerConfig',{hash:i,sample_rate:100});}};e.exports=h;},null);
__d("ImageFailLoggerOnload",["Banzai"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h="image_fail_load",i=false;function j(m){k({image_uri:m.src});}function k(m){g.post(h,m);}var l={init:function(){if(!a.ImageFailLogger)return;if(i)return;i=true;for(var m=0;m<a.ImageFailLogger.entries.length;m++)k(a.ImageFailLogger.entries[m]);a.ImageFailLogger.entries=null;a.ImageFailLogger.logImageFail=j;}};e.exports=l;},null);
__d("IntlCzechSlovakNumberType",["IntlVariations"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={getNumberVariationType:function(i){return i===1?g.NUMBER_SINGULAR:i>=2&&i<=4?g.NUMBER_DUAL:g.NUMBER_PLURAL;}};e.exports=h;},null);
__d("IntlSlavicNumberType",["IntlVariations"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={getNumberVariationType:function(i){var j=i%100,k=j%10;return k===1&&j!==11?g.NUMBER_SINGULAR:k>=2&&k<=4&&!(j>=12&&j<=14)?g.NUMBER_DUAL:g.NUMBER_PLURAL;}};e.exports=h;},null);
__d("IntlEastSlavicNumberType",["IntlSlavicNumberType"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=g;e.exports=h;},null);
__d("IntlEnglishNumberType",["IntlVariations"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={getNumberVariationType:function(i){return i===1?g.NUMBER_SINGULAR:g.NUMBER_PLURAL;}};e.exports=h;},null);
__d("IntlIcelandicNumberType",["IntlVariations"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={getNumberVariationType:function(i){var j=i%100;return j%10===1&&j!==11?g.NUMBER_SINGULAR:g.NUMBER_PLURAL;}};e.exports=h;},null);
__d("IntlLatvianNumberType",["IntlVariations"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={getNumberVariationType:function(i){var j=i%100;return i===0?g.NUMBER_DUAL:j%10===1&&j!==11?g.NUMBER_SINGULAR:g.NUMBER_PLURAL;}};e.exports=h;},null);
__d("IntlLithuanianNumberType",["IntlVariations"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={getNumberVariationType:function(i){var j=i%100,k=j%10;return k===0||(j>10&&j<20)?g.NUMBER_DUAL:k===1?g.NUMBER_SINGULAR:g.NUMBER_PLURAL;}};e.exports=h;},null);
__d("IntlMacedonianNumberType",["IntlVariations"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={getNumberVariationType:function(i){var j=i%10;return j===1?g.NUMBER_SINGULAR:j===2?g.NUMBER_DUAL:g.NUMBER_PLURAL;}};e.exports=h;},null);
__d("IntlNoVariationsNumberType",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={getNumberVariationType:function(h){return '*';}};e.exports=g;},null);
__d("IntlPolishNumberType",["IntlVariations"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={getNumberVariationType:function(i){var j=i%100,k=j%10;return i===1?g.NUMBER_SINGULAR:k>=2&&k<=4&&!(j>=12&&j<=14)?g.NUMBER_DUAL:g.NUMBER_PLURAL;}};e.exports=h;},null);
__d("IntlRomanianNumberType",["IntlVariations"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={getNumberVariationType:function(i){var j=i%100;return i===1?g.NUMBER_SINGULAR:i===0||(j>=1&&j<=19)?g.NUMBER_PLURAL:g.NUMBER_DUAL;}};e.exports=h;},null);
__d("IntlRomanicNumberType",["IntlVariations"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={getNumberVariationType:function(i){if(i===0||i===1){return g.NUMBER_SINGULAR;}else return g.NUMBER_PLURAL;}};e.exports=h;},null);
__d("IntlSanskritNumberType",["IntlVariations"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={getNumberVariationType:function(i){return i===1?g.NUMBER_SINGULAR:i===2?g.NUMBER_DUAL:g.NUMBER_PLURAL;}};e.exports=h;},null);
__d("IntlSemiticSimplifiedNumberType",["IntlVariations"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={getNumberVariationType:function(i){var j=i%100;return i===2?g.NUMBER_DUAL:j>=3&&j<=10?g.NUMBER_PLURAL:g.NUMBER_SINGULAR;}};e.exports=h;},null);
__d("IntlSouthSlavicNumberType",["IntlSlavicNumberType"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=g;e.exports=h;},null);
__d("BanzaiScuba",["Banzai","copyProperties"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i="scuba_sample";function j(m,n,o){this.fields={};this.post=function(p){if(!m)return;var q={};h(q,this.fields);q._ds=m;if(n)q._lid=n;q._options=o;g.post(i,q,p);this.post=function(){};this.posted=true;};this.lid=n;return this;}function k(m,n,o){if(!this.fields[m])this.fields[m]={};this.fields[m][n]=o;return this;}function l(m){return function(n,o){if(this.posted)return this;return k.call(this,m,n,o);};}h(j.prototype,{post:function(){},addNormal:l('normal'),addInteger:l('int'),addDenorm:l('denorm'),addTagset:l('tags'),addNormVector:l('normvector')});e.exports=j;},null);
__d("NavigationTimingRecorder",["Banzai","BanzaiScuba","URI","performance"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k='navigation_timing';if(j.timing){var l=j.timing,m=false,n=new h(k,null,{addBrowserFields:true,addGeoFields:true,addPredictedGeographyFields:true,addMobileDeviceFields:true}),o=function(){var r={};return function(s,t){if(!(s in l||s in r)){r[s]=t;n.addInteger(s,t);}};},p=function(){if(m)return;var r=Object.keys(l);if(r.length===0)if(typeof l.toJSON==='function'){r=Object.keys(l.toJSON());}else r=Object.keys(Object.getPrototypeOf(l));r.forEach(function(w){if(l[w])n.addInteger(w,l[w]);});var s=o();if(a.MCustomTimingRecorder){var t=a.MCustomTimingRecorder.getMarks();t.forEach(function(w){s(w.name,w.date);});}if(j.getEntriesByType){var u=j.getEntriesByType("mark");u.forEach(function(w){s(w.name,Math.round(w.startTime)+j.timing.navigationStart);});}var v=new i(a.location.href);n.addNormal('protocol',v.getProtocol());n.addNormal('domain',v.getDomain());n.addNormal('port',v.getPort());n.addNormal('path',v.getPath());n.post();m=true;},q=function(){g.subscribe(g.SEND,p);};if(a.document.readyState==='complete'){q();}else a.addEventListener('load',q);}},null);
__d("PlatformDialog",["DOMEventListener","DOMEvent","CSS","cx"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();function k(l,m,n){"use strict";this.$PlatformDialog0=l;this.$PlatformDialog1=m;if(n){var o=false;g.add(this.$PlatformDialog0,'submit',function(p){if(o){new h(p).kill();return;}o=true;i.addClass(l,"_32qa");});}}k.prototype.getForm=function(){"use strict";return this.$PlatformDialog0;};k.prototype.getDisplay=function(){"use strict";return this.$PlatformDialog1;};k.RESPONSE='platform/dialog/response';e.exports=k;},null);
__d("PluginReturn",["Arbiter","Log","PlatformDialog","Plugin","URI","invariant","PlatformWidgetEndpoint"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();g.subscribe(i.RESPONSE,function(event,o){if(o.error_code){h.debug('Plugin Return Error (%s): %s',o.error_code,o.error_message||o.error_description);return;}j.reload(o.plugin_reload);});var n={auto:function(){g.subscribe(j.RELOAD,function(event,o){var p=typeof o=='object'?o.reloadUrl:o;n.reload(p);});},syncPlugins:function(){g.subscribe(j.RELOAD,function(event,o){if(o.crossFrame)n.reload(o.reloadUrl);});},reload:function(o){var p=k.getRequestURI().removeQueryData('ret').removeQueryData('act').removeQueryData('hash');if(o){var q=new k(o);l(m.isPluginEndpoint(q.getPath()));p.setPath(q.getPath()).addQueryData(q.getQueryData());}window.location.replace(p.toString());}};e.exports=n;},null);
__d("PluginXDReady",["Arbiter","UnverifiedXD"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i={handleMessage:function(j){if(!j.method)return;try{g.inform('Connect.Unsafe.'+j.method,JSON.parse(j.params),g.BEHAVIOR_PERSISTENT);}catch(k){}}};a.XdArbiter=i;h.send({xd_action:'plugin_ready',name:window.name});e.exports=null;},null);
__d("ResourceTimingRecorder",["Banzai","BanzaiScuba","pageID","performance","URI"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=1000,m='resource_timing',n=!!j.getEntriesByType&&!window.externalHost,o=0,p=[],q,r,s,t,u;if(n){j.setResourceTimingBufferSize&&j.setResourceTimingBufferSize(l);j.webkitSetResourceTimingBufferSize&&j.webkitSetResourceTimingBufferSize(l);if(j.timing)q=j.timing.navigationStart;var v=new k(a.location.href);r=v.getProtocol();s=v.getDomain();t=v.getPort();u=v.getPath();}var w=function(){var x=j.getEntriesByType('resource');for(;o<x.length;o++){var y=x[o];if(y.duration<0||!k.isValidURI(y.name))continue;var z=new k(y.name),aa=new h(m,null,{addBrowserFields:true,addGeoFields:true,addPredictedGeographyFields:true,addMobileDeviceFields:true}),ba=Object.keys(y);if(ba.length===0)ba=Object.keys(Object.getPrototypeOf(y));ba.forEach(function(ca){if(ca in y)switch(typeof y[ca]){case 'number':aa.addInteger(ca,Math.round(y[ca]*1000));break;case 'string':if(ca!=='entryType')aa.addNormal(ca,y[ca]);break;}});aa.addNormal('resource_protocol',z.getProtocol());aa.addNormal('resource_domain',z.getDomain());aa.addNormal('resource_port',z.getPort());aa.addNormal('resource_path',z.getPath());aa.addNormal('page_protocol',r);aa.addNormal('page_domain',s);aa.addNormal('page_port',t);aa.addNormal('page_path',u);aa.addNormal('page_id',i);q&&aa.addInteger('page_navigation_start',q);aa.post();}};if(n){g.subscribe(g.SEND,w);g.subscribe(g.SHUTDOWN,w);}},null);
__d("legacy:bootloader",["Bootloader"],function(a,b,c,d){b.__markCompiled&&b.__markCompiled();a.Bootloader=b('Bootloader');},3);
__d("LinkshimAsyncLink",["$","AsyncSignal","DOM","UserAgent_DEPRECATED"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k={swap:function(l,m){var n=j.ie()<=8;if(n){var o=i.create('wbr',{},null);i.appendContent(l,o);}l.href=m;if(n)i.remove(o);},referrer_log:function(l,m,n){var o=g('meta_referrer');o.content="origin";k.swap(l,m);setTimeout(function(){o.content="default";new h(n,{}).send();},100);}};e.exports=k;},null);
__d("legacy:dom-asynclinkshim",["LinkshimAsyncLink"],function(a,b,c,d){b.__markCompiled&&b.__markCompiled();a.LinkshimAsyncLink=b('LinkshimAsyncLink');},3);
__d("getErrorStack",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(){var h='';try{throw new Error('');}catch(i){h=i.stack||i.stacktrace||'';h=h.replace(/@.*?\/js\//g,'@/js/').replace(/js\?.*?:/g,'js:');}return h;}e.exports=g;a.getErrorStack=g;},null);
__d("lowerDomain",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();if(document.domain.toLowerCase().match(/(^|\.)facebook\..*/))document.domain="facebook.com";},null);
__d("markJSEnabled",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g=document.documentElement;g.className=g.className.replace('no_js','');},null);
__d("wait_for_load",["Bootloader","Run"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();function i(l,m){return window.domready&&m.call(l);}function j(l,m,n){g.loadComponents.call(g,m,n.bind(l));return false;}function k(l,m,n){n=n.bind(l,m);if(window.domready)return n();switch((m||event).type){case 'load':case 'focus':h.onAfterLoad(n);return;case 'click':var o=l.style,p=document.body.style;o.cursor=p.cursor='progress';h.onAfterLoad(function(){o.cursor=p.cursor='';if(l.tagName.toLowerCase()=='a'){if(false!==n()&&l.href)window.location.href=l.href;}else if(l.click)l.click();});break;}return false;}a.run_if_loaded=i;a.run_with=j;a.wait_for_load=k;},3);

__d("PluginSend",["Arbiter","CSS","DOM","DOMEvent","DOMEventListener","Focus","Plugin","PluginOptin","PluginResize","copyProperties"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();var q=function(r,s,t,u,v,w){if(v)new o(function(){return r.offsetWidth;},function(){return r.offsetHeight;}).resize().auto();if(!u){var x=new n('send').addReturnParams({act:'send'});k.add(s,'click',x.start.bind(x));return;}var y=false,z=false;function aa(){z=!z;h.toggle(s);h.toggle(t);h.toggle(u);if(z){setTimeout(function(){var da=i.find(u,'.textInput');l.set(da);},500);}else{var ba=i.find(s,'button');l.set(ba);}if(!y){var ca=window.ServerJSAsyncLoader;ca&&ca.ondemandjs&&ca.run(ca.ondemandjs);y=true;}new o(function(){return Math.max(r.offsetWidth,u.offsetWidth);},function(){return Math.max(r.offsetHeight,u.offsetHeight+u.offsetTop);},'resize.iframe',true).resize().auto();}k.add(s,'click',aa);k.add(t,'click',aa);k.add(r.parentNode,'click',function(ba){ba=new j(ba);if(ba.target===r.parentNode){ba.kill();aa();}});g.subscribe(q.CLOSE,aa);g.subscribe(m.ERROR,function(event,ba){i.setContent(r,ba.content);aa();});if(w)aa();};p(q,{SUCCESS:'platform/plugins/send/success',CLOSE:'platform/plugins/send/close',success:function(){g.inform(this.SUCCESS);}});e.exports=q;},null);
__d("PopupLink",["DOMEvent","DOMEventListener","Popup"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j={listen:function(k,l,m){h.add(k,'click',function(n){new g(n).kill();i.open(k.href,l,m);});}};e.exports=j;},null);
__d("clickRefAction",["Arbiter"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(l,m,n,o,p){var q=l+'/'+m;this.ue=q;this._ue_ts=l;this._ue_count=m;this._context=n;this._ns=null;this._node=o;this._type=p;}h.prototype.set_namespace=function(l){this._ns=l;return this;};h.prototype.coalesce_namespace=function(l){if(this._ns===null)this._ns=l;return this;};h.prototype.add_event=function(){return this;};var i=0,j=[];function k(l,m,event,n,o){var p=Date.now(),q=event&&event.type;o=o||{};if(!m&&event)m=event.getTarget();var r=50;if(m&&n!="FORCE")for(var s=j.length-1;s>=0&&((p-j[s]._ue_ts)<r);--s)if(j[s]._node==m&&j[s]._type==q)return j[s];var t=new h(p,i,l,m,q);j.push(t);while(j.length>10)j.shift();g.inform("ClickRefAction/new",{cfa:t,node:m,mode:n,event:event,extra_data:o},g.BEHAVIOR_PERSISTENT);i++;return t;}e.exports=a.clickRefAction=k;},null);
__d("Primer",["Bootloader","CSS","ErrorUtils","Parent","clickRefAction","trackReferrer"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=null,n=/async(?:-post)?|dialog(?:-post)?|theater|toggle/,o=document.documentElement;function p(t,u){t=j.byAttribute(t,u);if(!t)return;do{var v=t.getAttribute(u);JSON.parse(v).forEach(function(w){var x=t;g.loadModules.call(g,[w[0]],function(y){y[w[1]](x);});});}while(t=j.byAttribute(t.parentNode,u));return false;}o.onclick=i.guard(function(t){t=t||window.event;m=t.target||t.srcElement;var u=j.byTag(m,'A');if(!u)return p(m,'data-onclick');var v=u.getAttribute('ajaxify'),w=u.href,x=v||w;if(x)k('a',u,t).coalesce_namespace('primer');if(v&&w&&!(/#$/).test(w)){var y=t.which&&t.which===2,z=t.altKey||t.ctrlKey||t.metaKey||t.shiftKey;if(y||z)return;}var aa=p(m,'data-onclick');l(u,x);var ba=u.rel&&u.rel.match(n);ba=ba&&ba[0];switch(ba){case 'dialog':case 'dialog-post':g.loadModules(["AsyncDialog"],function(ca){ca.bootstrap(x,u,ba);});break;case 'async':case 'async-post':g.loadModules(["AsyncRequest"],function(ca){ca.bootstrap(x,u);});break;case 'theater':g.loadModules(["PhotoSnowlift"],function(ca){ca.bootstrap(x,u);});break;case 'toggle':h.toggleClass(u.parentNode,'openToggler');g.loadModules(["Toggler"],function(ca){ca.bootstrap(u);});break;default:return aa;}return false;},'Primer click');o.onsubmit=i.guard(function(t){t=t||window.event;var u=t.target||t.srcElement;if(u&&u.nodeName=='FORM'&&u.getAttribute('rel')=='async'){k('f',u,t).coalesce_namespace('primer');var v=m;g.loadModules(["Form"],function(w){w.bootstrap(u,v);});return false;}},'Primer submit');var q=null,r=function(t,u){u=u||window.event;q=u.target||u.srcElement;p(q,'data-on'+t);var v=j.byAttribute(q,'data-hover');if(!v)return;switch(v.getAttribute('data-hover')){case 'tooltip':g.loadModules(["Tooltip"],function(w){w.process(v,q);});break;}};o.onmouseover=i.guard(r.bind(null,'mouseover'),'Primer mouseover');var s=i.guard(r.bind(null,'focus'),'Primer focus');if(o.addEventListener){o.addEventListener('focus',s,true);}else o.attachEvent('onfocusin',s);},null);
__d("ControlledReferer",["Event","URI","UserAgent_DEPRECATED"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j={useFacebookReferer:function(k,l,m){var n=false;function o(){if(n)return;var q=k.contentWindow.location.pathname;if(q!=='/intern/common/referer_frame.php'&&q!=='/common/referer_frame.php')return;n=true;k.contentWindow.document.body.style.margin=0;l();}var p;if(document.domain!=='facebook.com'){p='/intern/common/referer_frame.php';}else if(i.opera()){p='/common/referer_frame.php';}else if(h().isSecure()){p='https://s-static.ak.facebook.com/common/referer_frame.php';}else p='http://static.ak.facebook.com/common/referer_frame.php';if(m)p+='?fb_source='+m;g.listen(k,'load',o);k.src=p;},useFacebookRefererHtml:function(k,l,m){j.useFacebookReferer(k,function(){k.contentWindow.document.body.innerHTML=l;},m);}};e.exports=j;},null);
__d("TrackingPixel",["Arbiter","ControlledReferer"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i={_iframe:(void 0),loadWithNoReferrer:function(j){if(!i._iframe){var k=document.createElement('iframe');k.frameborder=0;k.width=k.height=1;k.style.position='absolute';k.style.top='-10px';h.useFacebookReferer(k,function(){g.inform('TrackingPixel/iframeIsLoaded',null,g.BEHAVIOR_PERSISTENT);},null);document.body.appendChild(k);i._iframe=k;}g.subscribe('TrackingPixel/iframeIsLoaded',function(){var l=i._iframe.contentWindow.document,m=l.createElement('img');m.src=j;});}};e.exports=i;},null);
__d("areJSONRepresentationsEqual",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h,i){return JSON.stringify(h)==JSON.stringify(i);}e.exports=g;},null);
__d("UIForm",["ArbiterMixin","BehaviorsMixin","DOM","Event","Form","Run","areJSONRepresentationsEqual","mixin"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();var o=n(g,h);for(var p in o)if(o.hasOwnProperty(p))r[p]=o[p];var q=o===null?null:o.prototype;r.prototype=Object.create(q);r.prototype.constructor=r;r.__superConstructor__=o;function r(s,t,u,v,w){"use strict";this._root=s;this.controller=s;this._message=t;if(v){this._confirm_dialog=v;v.subscribe('confirm',this._handleDialogConfirm.bind(this));i.prependContent(this._root,i.create('input',{type:'hidden',name:'confirmed',value:'true'}));}l.onAfterLoad(function(){this._originalState=k.serialize(this._root);}.bind(this));this._forceDirty=u;this._confirmed=false;this._submitted=false;j.listen(this._root,'submit',this._handleSubmit.bind(this));if(w&&w.length)this.enableBehaviors(w);var x=true;l.onBeforeUnload(this.checkUnsaved.bind(this),x);}r.prototype.getRoot=function(){"use strict";return this._root;};r.prototype._handleSubmit=function(){"use strict";if(this._confirm_dialog&&!this._confirmed){this._confirm_dialog.show();return false;}if(this.inform('submit')===false)return false;this._submitted=true;return true;};r.prototype._handleDialogConfirm=function(){"use strict";this._confirmed=true;this._confirm_dialog.hide();if(this._root.getAttribute('ajaxify')){j.fire(this._root,'submit');}else if(this._handleSubmit())this._root.submit();};r.prototype.reset=function(){"use strict";this.inform('reset');this._submitted=false;this._confirmed=false;};r.prototype.isDirty=function(){"use strict";if(this._submitted||!i.contains(document.body,this._root))return false;if(this._forceDirty)return true;if(!this._originalState)return false;var s=k.serialize(this._root);return !m(s,this._originalState);};r.prototype.checkUnsaved=function(){"use strict";if(this.isDirty())return this._message;return null;};e.exports=a.UIForm||r;},null);_application/x-javascriptÒdhÕ	
efg_twitter-widget-0_7http://platform.twitter.com/widgets/tweet_button.341448ccd3e070268cd097e6a7ee603f.ja.html#_=1430559419074&count=horizontal&dnt=false&hashtags=%E6%9D%91%E4%B8%8A%E3%81%95%E3%82%93%E3%81%AE%E3%81%A8%E3%81%93%E3%82%8D&id=twitter-widget-0&lang=ja&original_referer=http%3A%2F%2Fwww.welluneednt.com%2F&size=m&text=%E6%9D%91%E4%B8%8A%E3%81%95%E3%82%93%E3%81%AE%E3%81%A8%E3%81%93%E3%82%8D%EF%BC%8F%E6%9D%91%E4%B8%8A%E6%98%A5%E6%A8%B9%20%E6%9C%9F%E9%96%93%E9%99%90%E5%AE%9A%E5%85%AC%E5%BC%8F%E3%82%B5%E3%82%A4%E3%83%88&url=http%3A%2F%2Fwww.welluneednt.com%2F&via=murakamisannoO®R<!DOCTYPE html><html data-scribe="page:button" lang="ja"><head><meta charset="utf-8"><link rel="dns-prefetch" href="//twitter.com"><title>Tweet Button</title><base target="_blank"><style type="text/css">html{margin:0;padding:0;font:normal normal normal 11px/18px 'Helvetica Neue',Arial,sans-serif;color:#333;-webkit-user-select:none;-ms-user-select:none;-moz-user-select:none;user-select:none;}body{margin:0;padding:0;background:transparent;}a{outline:none;text-decoration:none;}body.rtl{direction:rtl;}#widget{display:inline-block;white-space:nowrap;overflow:hidden;text-align:left;}.btn-o,.count-o,.btn,.btn .label,#count{display:inline-block;vertical-align:top;zoom:1;}.btn-o{max-width:100%;}.btn{position:relative;background-color:#eee;background-image:-webkit-linear-gradient(#fff,#dedede);background-image:linear-gradient(#fff,#dedede);border:#ccc solid 1px;border-radius:3px;color:#333;font-weight:bold;text-shadow:0 1px 0 rgba(255,255,255,.5);cursor:pointer;height:18px;}.btn:focus,.btn:hover,.btn:active{border-color:#bbb;background-color:#d9d9d9;background-image:-webkit-linear-gradient(#f8f8f8,#d9d9d9);background-image:linear-gradient(#f8f8f8,#d9d9d9);box-shadow:none;}.btn:active{background-color:#efefef;box-shadow:inset 0 3px 5px rgba(0,0,0,0.1);}.xl .btn:active{box-shadow:inset 0 3px 7px rgba(0,0,0,0.1);}.btn i{position:absolute;top:50%;left:2px;margin-top:-5px;width:16px;height:13px;background:transparent url(/widgets/images/btn.27237bab4db188ca749164efd38861b0.png) 0 0 no-repeat;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAAoCAYAAABq13MpAAAGcklEQVRYw+2YXUyTVxjHz4vJLiZGd7MtXi2LkZtdELM7lyzOG7Nk2RJvl8iujBiNV2JcMA0fwqCFEGCAfJRC+SyltqWFgnwUlIKAWB3yOVrAttQWC1ZCOi6ePc8LL74tVD6ly2KTf87J6Tnv+3uf8zzP+WAAwEhMIj8h1MViEs0Jlqi+we5oJFjGCX3D9X+fmKTmq/f/rzkRlX5fzkmNPhLVqW2DQ1Ify9eFAZ8kafUsURMX+qCo1BYry3oILKcfmLQb2N3Wzqhk48xn6YbLuwJO1cQeydAvURkWONtk5UoGgKsaXRPWo3LarVHSJvkRmXHm+6pHV3h4YdDp0gE7D5XUJPo6QyzLfwKscgZY1UtgChuwkjH4tOhpQPp4Nn430GeU/TcJ4sif5iV2V/NL6P/H81oTOIUVuPsO4AyeNVG9ehw4xTP4oubZ268VFiP2jd4Y9Hufw8TKJoAgufT2RZZikJ8s7JMzxTQw1QKwhtdrZY0Likd9Azjm1G6gpcOz8VzdFHC1E8AV9gKXYdCI3eWc9q96Tj0DnHEBuObXa6J60yvgtC740Tw3jf0Sgtzj89JhK6tyAKt2Ag9f+AxY8SgPyQMLUs5hd/hut/5MH3mp3z3H6eeBa7ADV/4UuNxO4DINw1GyZklMw/MhTut8BywCj2mb9wvAQdBN0z5ldJ1zlbemygusdn5NVBeA8b/Tart/D8CMyVrjjteNeo81v1rljF7gdC7gVNPAKUeAdwuaAb17MzS6yTdGmzPoWWJLXLG8Go9We1aDLCtWnRskA27zXqCfuP0Xj9ZNBHgwwQWE6acP4Nu9m6FxZn7tmbWEg2Zpg670U1rXUpB1xVbWOsjKF/YCTQHU5X5rjmn3+IP8djthMJaNe+6EhUbFmub8jefaPZ5NbtHk8TuX/1HsEZiXetJz5rc+11BMxw7Bsc+3bS99oUH/bgGRYCL/o93Hp7gKO7B6zzqwF342L7jWgaP3A03jzxrGTJzm5dausIVrlP/tU22KD+FhFJ1djjfma4/mbdf6vbZrgz6bbOTN6IvFgGU9cvcLLOjqi6WA5bp10RbTuRDe4vhR1594bTT74aA3ghEVJxL575cHBLuhC3rr+bPN06ajOkdgS4tj26UB79w6A9sO+oMpKk0j5zKbOrksk48reLiW6mjFE0Oj1U+2elbK7P7nNCNh0+dhQZOLSa0u3U8dttmTOvsKv5DQUo2gx0wLqz88eu2RTbwZxX412y1ehwnN1mES1sE6RdKjkneaTg8b+kD0Efoj9P8WWiKRbHnmo/bExMQbWEqwjBPawvU/VOjk5GQ9gmxagdLS0qzZ2dmQm5sLWVlZkJ6e3pmamjqD5eWIQ8vlcjtBpaSkyAUrIlxsQUEBKJVKqK6uhsrKSigrK4Pi4uLA48eP4yMO3dfXZyovLweCzMjIWCT4e/fuySsqKkCtVkNjYyNf1tXVwdjY2K7PiB8EurS01FpTUwO1tbVA8AgM2MZDErAgsvgez4gHD22325UqlWqVrEmqr6/nJVhZsDSW/v288NatW++9sFkPcjm6po9EdcFdqbx9+3Zs0LbUYrGMazSaVbFlxcKPgqGhIfNegfGlsRjwS1SGA6bAz8/P52eZRHV0Vyu5KyUA9IIrQYMGBwfT9Xr9kti6YivrdLr9nBEZBvHNvLw8ykIEvunCRiaTJRQVFQG5aUNDAy+qU/CTuyLwWyyNm86IDoejsaOjwxPqFkaj0b+8vLyvMyIaJV6hUPAxk5OTA2g5DcJvuAvOZD1lqtB30wxTbLW1tfEXNhvTkpSUJM/MzPQJKY6+UhjU3d3tWgfe75HrVE9PzxzFCr2jsLAQpFIppdlh/ABJVVXVECWCrWYZPcAfesPEnxHRyube3l4b5mAbWsU2ir/FxcUDOyOiv8ahpb0UN0L6pJRaUlIC5BY0A2TVUGgyII5xRuSM6Ha7LyJkgMDEuV+YfnG7WDQzDx48sERqwxTtdDrNFB9bwYUTBSNO+p2I7fImJyfPoF8PNTc37wic+hgMhqALm0isaNEIY6KVdSfQ5BoTExOq/8J++ioFOAV7S0tLWItTOyWF0AubiO0fMOjO42JlwgAMhFvMMJNteWFzqKC0j8Cc3Il7cR/t0SnVUZCFLiaYk1empqbCXtgctoUTcO+iQ5eYRUuv0EJCOZhAtVrtaldXl2dkZGTbC5tIuMa+L2z+BexZXK+OBaruAAAAAElFTkSuQmCC);}.btn .label{padding:0 3px 0 19px;white-space:nowrap;}.btn .label b{font-weight:bold;white-space:nowrap;}.rtl .btn .label{padding:0 19px 0 3px;}.rtl .btn i{left:auto;right:2px;}.rtl .btn .label b{display:inline-block;direction:ltr;}.xl{font-size:13px;line-height:26px;}.xl .btn{border-radius:4px;height:26px;}.xl .btn i{background-position:-24px 0;width:21px;height:16px;left:4px;margin-top:-6px;}.xl .btn .label{padding:0 7px 0 29px;}.xl.rtl .btn .label{padding:0 29px 0 7px;}.xl.rtl .btn i{left:auto;right:6px;}@media(-webkit-min-device-pixel-ratio:1.5),(min-resolution:144dpi){.btn i{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFoAAABQCAYAAACZM2JkAAANzElEQVR42u1cW0wbVxo+6q72ZVkp2pVWbV/KQ5SX7gPavKyq1Za8pauVWlV5W6nK63YViUqVyjU4QEgaIA4kIdeNIVzM3RBIQiHgBCeljekaEgEFmpiEgBNMcDChTuJoz/7fmZnWNraZMbZxwUi/8GVmPOc73/n+y5lzGOecRctYpjGVZdbtJdNJZkyP5vU3ypjOsI1l1WeQmcjMwjKNBvr/UTgs/N77XSy7Li3iG8EPZzdyltfK2X4T/W/jLKeZs6wGl+8N4TXLpBuN8Lc03Rd+i+5tXdfIJuLkNLrYfmrPgQ7OCjol07VTG1s4y26wKW35uUOM9kCS+VzQqCNQbFpvTFw8p4nOo5s43MfZ0VuclX/L2bFvOCu9wVnRVQl0XBugoyPyTea4MBEAZTcYIgeZMMkn0hzqoTYNcnbKxtmZO5KdHOKsbIDadwWAu0T7chq5OL7gEtr3ZlCgf13QMcAKujjLbbFpYRvLbjKx4q84O0E/bJjirOYhZ3WzZI84uzjN2dkxzvRfc3FMcQ//3fGvJ7vuLdS+U95XETi8ojvcTemsuJuzQmoT7lErgXKN6QQYEYbu/T/fU3tmOGtwcNb0RDK8rpmWQAeh0L4v+/jvzwzZHSve1r8brZ/R76atZnSZhbPjVomVuS2ucPrjp8kEHjt9RwK3eYGzlkV/a5ynG3pANzsh2YVJ6pTviAndGTFlc9GVDFb5X4l5B2lUYdRpIRCxklXQyLxoJ2CpDa2Lq63lKbXvMWfV96ld1LaqH/iOtgfL7CS172C3LSij/1A1uiTYeHaUsyNmSWezGkzhWEc3kyFAq58jkJ+uBlkxfIdOaHIKxr9dNYrhvDdweEXT/lwzVCIAABNPDUvDXwzx+gwVo2GbYGn1Pbr/heAg+wG+IBk6hDrmjcqhka/nlnbTtbavAnrX5RmnAKLhscQ6DHdICRwaHF2QCOKPFZZSZvghOJNDAF72/fNxOhcatieWjN4/OJMvQAYARiLCOSJQ6XXJiWU32OHkQgJd2JnOTo9IbF0LZF9rdvJ3Lz+Zm/e8ttB1zgVldOM9d58AWhnu0NfKYYndBy7JEYTwpgbhWXOb09+9OGxmtTPqQIbR9WWQ/x0HZ7gnpfGR12+Iw4dADqDdiCIAeFa9PlBS3qm8+YE4FudpAZo6VW4fQE4JCvRD98uSDwcWHT+zD0wgwa+i4VNJ3rZ0ALrDRXSBKAIhDjQdsqEWaHKQ9Lc7TvFv2r7bT+2BjBMsPzcmOTk4MDA896cw1EyRg/7tU7c6hKPTAjKMHCT96QNB9gP6V2UW94f9jx0ppqde/+EuAw6Gn/9eAh2hG0I4vIfUqAWaOi1uScahq6lPPK+7d3QvLq9yYNDS2odSNHHCKkkKWA7yFF2WQjl8rxHolPoH3pD3o7x4o+T6SFjg4NAgLQAdoRskA6/V6jPZjtYHy/HL5ky631RaV3b1OZ1BJQCfgeHQb7AXUcOZu1KsjA5A+KYR6J2XHrrWBPpf16cnhEwI8J6qZ6lao2t+eG3WES+g/2K4+bFgJiIHAKomclDiY+i5mmgj4Px/9Dx6uCbQcyuvqt9qf+LRwlBNRg62/O7TnjjWKPb+1jD+SkhAqDg4mkad9OmtuetrAo0bs8y/tKaYFr2xADql+TH064s4Ap2279sFuwBZKzsjMRoJFsfzw2qAhqc0zr94bfnE+nwmpd0VVcD33V600/X/GufKW+fOay5XzEEm29H5eDlcbhD4wfa/dU47RDqtxNTRYHPbghcRwAaUOJGUmEGcmAJNjrVs9Nl4uEx31Qd/qrG9J4L1xidRc4p5w+4pudEbUU/Wl40vj5dNesZTOlzeWACd0jbvhY8LGwUF+bCwbHRpPFqM3tnrQsjTGSyIj5el1o5OstoHMXOKecNLU2slYsE+RCHEbHG+su7sW3KtB+S3Op955Lx/z0bOkJQOzX4q4mSEblrT6rW0mRIiNUQK9cVuOWcnwL3WHd1Ly5p1maIXRDFySrrR01F6aZRGl9Ep7Wijx6qGSCG/yBuwv//Paw8HU+oeeEW2qEGv0TFjS95BRDEbKRmBo7R99qVtx1dLy9ECumzix/HAKl1IoKX5PmUyleyLer2YlkE9+ss+SklHpHRbZSLzye3nMwgR5eG0PYEmWf1G6XojERlk1W1U6gJpmMcT812ozmEe7Ei/VJ1DBKKC0dBzMManTPhmAs5ooxx6Ls+2OJXS8tgbaSIjg2zWUolUEhWEXnu/mn72+fttE/3v1E8uiLoHSqBhoo+3up55wAwwRGGLXGtOSTSQMXHB8pr17GC3i5V/IxEItQ0tmkzh4YVpz12tIPtq9HbZaSlgmTH822df2fJGf5zaZ1uxK4Z4FJ/Pv/ifxfd4+fy0hAAVjwgoz19k1btYllGqOaP2fLhXmkdExU5NsUm2XQNupyyJ5khq6oEfvCkz8lwAiKHMKB+/PeEYrDOlsqIug5iYxXwhHg0AwJggrn+kGmQA7COJnZGWEX7xTxGFcXwYYXqk/kiPd/U+cQpdVgEw/A1G8pj79aAPqQrXI4mbFWhldH4ROAoBXvvcK9uF6Zd39w2THA7LckifWRb8fI0vwOuWxM0MtG9VcrcMWKdKSdTLSUjUIqetAHRi+IwkCEmgk0AnLQl0Eugk0EkQkkAngU5aEugk0Emgo3exzMzM1Ozs7L1kOhi9T0+CHAC0TqfbRuBEVKWSzzXk5uby/fv3c3rP8/PzeV5eHqfPXVlZWT8tPMJrMnOkv/WLB5pA0uXk5NgAmlaQ6VxbQUEBP3LkCD927Bg/fvw4r6io4GVlZby4uFiAjmuTueSOMG9ZRhcWFg4UFRWBkTYtbCPWmg4dOsRPnjzJq6qqeF1dHTcajby+vp7X1tby8+fP8/Lyco5jDh8+jOMm79+/X0udUQGp2XJA6/V6ARZYSWD7DfcwbE4FeGfPnhXgtra28ra2Nj9rbm4WgBsMBmHojMrKSjA9Y0sy+uLFi0tgIxhYWloqdJaYbQrHOpKLDIDW0NAQFGTF8B2spaVFMJ6Aj/k6w4QF+urVq04A0dTUJFiH4Q4pkR2aIVgEceLEidLq6uqwIAcCPjExEZd1hgkLtN1u7wPQvsP99OnTgt1wdDLgdgLcQLKSQYxPp2PM0GI1IMNw/TiuM0xMoN1ud8nNmzcdvuxrbGzkJCn81KlT/OjRoyKCAOiIIsh5Ck2HbKgFGp0Sx3WGCesM3Waz2dHR0eENHO4AHAy/cOGCAB2hG0I4vIfUqAUanbblExZi7Eg44BRnBtDBTBheq9VnmMlkWv4lgoRcAXJJZkKyBZMl9KNwWXJQoG/cuDEBxmkFT63hmn19fY54AgQgtCZggYaSAiVkLsglZBOSCTtw4IDIgpGIKXmH0iHwZXRO8B1oVlZWqkk2PLEAWXGwo6Oj8VxniGzXRUAY1nG+DmEucgVEYZBN5Aww+Cf4rYMHD4q8g8C1oQSB46lDQu9Ag7h2fn7eGqjRUWR0XNcZIiqC80aISgCYtDIbjASDATAkVZFKEAam+C2AjlIDMl8ke/TeTqRtpe8/882wV60zfPHihWVoaGjm0qVLUQWcrhnXdYbIPMFAMA+Aox6jpbQAVsLh19TUCGBDySF8GiQXWS9yCvghOfO1hV1n2NXV5UA6rcTU0bD29navx+OJ6zpDAqgEAICJyAcw/DHESUoy1Dg/sBTnq5FSJfNFh6BjCOiRubm54DvQ+Nzge8gMcVK09PrOnTtxX2c4ODiYD5DRBsT6KC0APDgxAtsOJxfqXHJ26WfOnNEUuioJ2eXLl+eIVKF3oPFdZ0hOazxajKZIY6PWGe4hoLy+QxwEghz4lG7tFCXoAyWFGPkBjtVKNBy/5g40gSuYnE6ntb+/37UekKl3PdD8DaprpMEvBDIOLPct3YLhPhMUZnqtJzZ3wNFpbS8c5Jo70IRawbSwsGDt6elZ1vqjiF7QWRu1zpBATIVfoL/lQNZBFlFFRDQBZ6lMUCA+RpSCTsD3WttMvm3tHWgCbWBg4P1r164N4mQMOy3DCB2ztLS0oesMiak6koAVki5nsHtXMl3ot1IvR6iGSAUdAHZqBbqzszP0DjTyfJ9OMWiWPKXFS0pKOJyC4lTU/JjVap2R5WJD1xkScB+DmYgc1PgbhekAWCuxlPN7e3vD70BDoKZhHk/OakS2A5CV6Sk1Pww9p5AmkdYZ7qV7fwUJCBUHRzvzvXXr1nVV6wynp6c/J23tJ7lYABMwrMKx4cqVKx4kN9DxBFxnmHb79m17NMPUtRyhw+FYcweaVesMMfzB0LGxsamRkRG7YlNTU+P4XJaHhFxn6LsDDcLLWIMs67OmHWg2zTpD3x1o4DdiCTJGDHIPTTvQbELTj9Pf5OTkeLTrNz51di+qn1v+2TsK3yYRwsXKKcolht1bHmhy2J8iTo7FpAYSovXsQLPp5AMaGm1GI/tFDX9dO9BsMhP1m9nZWVsk5YRQJj+jom4Hmi00E+1Xv0H8HwWQte1As4VM7EAzPDw8ham1SPUaEUwkO9BsCcMcYH5+vr64uNiF51KUyQ0tACM8pOx5XTvQbCrD7Iny/AUZZqhFzRm1Z/nRYVGx0zK5YbFYnD7Z8Lp3oNk0hkeKi4qKDKgzA1w8GgCAlRlttSADYJ9iWXIHmlA70KD4j9Cut7cXdWmvGoBRiUSNx+12J3egiXQHGoAHhkJrAwtlAVXI5A40yR1okhbS/g/H5BFic8lpAQAAAABJRU5ErkJggg==);background-size:45px 40px;margin-top:-6px;}.xl .btn i{margin-top:-7px;left:4px;}.xl.rtl .btn i{left:auto;right:3px;}.xl .btn .label{top:-1.5px;}}.aria{position:absolute;left:-999em;}.rtl .aria{left:auto;right:-999em;}.following .btn{color:#888;background:#eee;border:#ccc solid 1px;}.following .btn:active,.following .btn:hover{border:#bbb solid 1px;}.following .btn i{background-position:0 -20px;}.xl .following .btn i{background-position:-25px -25px;}.btn:focus,.following .btn:focus{border-color:#0089CB;}.count-o{position:relative;background:#fff;border:#bbb solid 1px;border-radius:3px;visibility:hidden;min-height:18px;min-width:15px;text-align:center;}#count{white-space:nowrap;color:#333;}#count:hover,#count:focus{color:#333;text-decoration:underline;}.ncount .count-o{display:none;}.count-ready .count-o{visibility:visible;}.count-o i,.count-o u{position:absolute;zoom:1;line-height:0;width:0;height:0;left:0;top:50%;margin:-4px 0 0 -4px;border:4px transparent solid;border-right-color:#aaa;border-left:0;}.count-o u{margin-left:-3px;border-right-color:#fff;}.rtl .count-o i,.rtl .count-o u{left:auto;right:0;margin:-4px -4px 0 0;border:4px transparent solid;border-left-color:#aaa;border-right:0;}.rtl .count-o u{margin-right:-3px;border-left-color:#fff;}.following .count-o i{border-right-color:#bbb;}.following.rtl .count-o i{border-left-color:#bbb;}.following .count-o{background:#f9f9f9;border-color:#ccc;}.following #count{color:#666;}.hcount .count-o{margin:0 0 0 5px;}.hcount.rtl .count-o{margin:0 5px 0 0;}.hcount #count{padding:0 3px;}.xl .count-o{border-radius:4px;}.xl.hcount .count-o{margin:0 0 0 6px;}.xl.rtl.hcount .count-o{margin:0 6px 0 0;}.xl.hcount .count-o i,.xl.hcount .count-o u{margin:-5px 0 0 -5px;border-width:5px 5px 5px 0;}.xl.hcount .count-o u{margin-left:-4px;}.xl.rtl.hcount .count-o i,.xl.rtl.hcount .count-o u{margin:-5px -5px 0 0;border-width:5px 0 5px 5px;}.xl.rtl.hcount .count-o u{margin-right:-4px;}.xl #count{padding:0 5px;}.vcount .btn-o{display:block;margin:0 auto;}.vcount .count-o,.xl.vcount .count-o{display:block;padding:0 5px;margin-bottom:5px;}.vcount .count-o i,.rtl.vcount .count-o i,.vcount .count-o u,.rtl.vcount .count-o u{line-height:0;top:auto;left:50%;bottom:0;right:auto;margin:0 0 -4px -4px;border:4px transparent solid;border-top-color:#aaa;border-bottom:0;}.rtl.vcount .count-o u,.vcount .count-o u{margin-bottom:-3px;border-top-color:#fff;}.vcount #count{font-size:16px;line-height:34px;}.xl.vcount #count{font-size:22px;line-height:44px;}</style><!--[if IE 9]><style type="text/css">.btn{-ms-filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffff',endColorstr='#dedede')";}.btn:hover,.btn:focus,.btn:active{-ms-filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr='#f8f8f8',endColorstr='#d9d9d9')";}.btn,.xl.btn{border-radius:0;}</style><![endif]--></head><body data-scribe="section:share" class=" regular vcount å·¦æ¨ªæ›¸ã ready count-ready"><div id="widget"><div class="count-o enabled" id="c" data-scribe="component:count"><i></i><u></u><a href="http://twitter.com/search?q=http%3A%2F%2Fwww.welluneednt.com%2Fentry%2F2015%2F03%2F24%2F113000" id="count" title="ã“ã®ãƒšãƒ¼ã‚¸ã¯82å›å…±æœ‰ã•ã‚Œã¾ã—ãŸã€‚ã“ã‚Œã‚‰ã®ãƒ„ã‚¤ãƒ¼ãƒˆã‚’è¦‹ã‚‹ã€‚ " aria-describedby="count-desc">82</a></div><div class="btn-o" data-scribe="component:button" style="width: 68px;"><a href="https://twitter.com/intent/tweet?original_referer=http%3A%2F%2Fwww.welluneednt.com%2Fentry%2F2015%2F03%2F24%2F113000&amp;text=%E3%81%B5%E3%81%A3%E3%81%A8%E3%81%93%E3%81%93%E3%82%8D%E3%81%8C%E8%BB%BD%E3%81%8F%E3%81%AA%E3%82%8B%E4%B8%80%E8%A8%80%20-%20%E6%9D%91%E4%B8%8A%E3%81%95%E3%82%93%E3%81%AE%E3%81%A8%E3%81%93%E3%82%8D%EF%BC%8F%E6%9D%91%E4%B8%8A%E6%98%A5%E6%A8%B9%20%E6%9C%9F%E9%96%93%E9%99%90%E5%AE%9A%E5%85%AC%E5%BC%8F%E3%82%B5%E3%82%A4%E3%83%88&amp;tw_p=tweetbutton&amp;url=http%3A%2F%2Fwww.welluneednt.com%2Fentry%2F2015%2F03%2F24%2F113000" class="btn" id="b"><i></i><span class="label" id="l">ãƒ„ã‚¤ãƒ¼ãƒˆ</span></a></div></div><script type="text/javascript">window.__twttr=window.__twttr||{};var i18n = {"ja":{"%{followers_count} followers":"%{followers_count}äººã®ãƒ•ã‚©ãƒ­ãƒ¯ãƒ¼","%{name} on Twitter":"%{name}ã•ã‚“ã¯Twitterã‚’ä½¿ã£ã¦ã„ã¾ã™","100K+":"100Kä»¥ä¸Š","10M+":"1000ä¸‡ä»¥ä¸Š","10k unit":"ä¸‡","Follow":"ãƒ•ã‚©ãƒ­ãƒ¼ã™ã‚‹","Follow %{name} on Twitter":"Twitterã§%{name}ã•ã‚“ã‚’ãƒ•ã‚©ãƒ­ãƒ¼ã—ã¾ã—ã‚‡ã†","Follow %{screen_name}":"%{screen_name}ã•ã‚“ã‚’ãƒ•ã‚©ãƒ­ãƒ¼","This page has been shared %{tweets} times. View these Tweets.":"ã“ã®ãƒšãƒ¼ã‚¸ã¯%{tweets}å›å…±æœ‰ã•ã‚Œã¾ã—ãŸã€‚ã“ã‚Œã‚‰ã®ãƒ„ã‚¤ãƒ¼ãƒˆã‚’è¦‹ã‚‹ã€‚ ","Tweet":"ãƒ„ã‚¤ãƒ¼ãƒˆ","Tweet %{hashtag}":"%{hashtag} ã‚’ãƒ„ã‚¤ãƒ¼ãƒˆã™ã‚‹","Tweet to %{name}":"%{name}ã•ã‚“ã¸ãƒ„ã‚¤ãƒ¼ãƒˆã™ã‚‹","You are following %{name} on Twitter":"Twitterã§%{name}ã•ã‚“ã‚’ãƒ•ã‚©ãƒ­ãƒ¼ã—ã¦ã„ã¾ã™","ltr":"å·¦æ¨ªæ›¸ã"}};window._=function(s,reps){s=__twttr.lang&&i18n[__twttr.lang]&&i18n[__twttr.lang][s]||s;if(!reps)return s;return s.replace(/\%\{([a-z0-9_]+)\}/gi,function(m,k){return reps[k]||m})};</script><script>!function(){Function&&Function.prototype&&Function.prototype.bind&&(/MSIE [678]/.test(navigator.userAgent)||!function t(e,n,r){function i(s,a){if(!n[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var f=n[s]={exports:{}};e[s][0].call(f.exports,function(t){var n=e[s][1][t];return i(n?n:t)},f,f.exports,t,e,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(t,e,n){(function(){"use strict";function t(t){return"function"==typeof t||"object"==typeof t&&null!==t}function n(t){return"function"==typeof t}function r(t){return"object"==typeof t&&null!==t}function i(){}function o(){return function(){process.nextTick(c)}}function s(){var t=0,e=new U(c),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}function a(){var t=new MessageChannel;return t.port1.onmessage=c,function(){t.port2.postMessage(0)}}function u(){return function(){setTimeout(c,1)}}function c(){for(var t=0;A>t;t+=2){var e=B[t],n=B[t+1];e(n),B[t]=void 0,B[t+1]=void 0}A=0}function f(){}function l(){return new TypeError("You cannot resolve a promise with itself")}function p(){return new TypeError("A promises callback cannot return that same promise.")}function h(t){try{return t.then}catch(e){return q.error=e,q}}function d(t,e,n,r){try{t.call(e,n,r)}catch(i){return i}}function v(t,e,n){D(function(t){var r=!1,i=d(n,e,function(n){r||(r=!0,e!==n?y(t,n):_(t,n))},function(e){r||(r=!0,b(t,e))},"Settle: "+(t._label||" unknown promise"));!r&&i&&(r=!0,b(t,i))},t)}function g(t,e){e._state===H?_(t,e._result):t._state===$?b(t,e._result):E(e,void 0,function(e){y(t,e)},function(e){b(t,e)})}function m(t,e){if(e.constructor===t.constructor)g(t,e);else{var r=h(e);r===q?b(t,q.error):void 0===r?_(t,e):n(r)?v(t,e,r):_(t,e)}}function y(e,n){e===n?b(e,l()):t(n)?m(e,n):_(e,n)}function w(t){t._onerror&&t._onerror(t._result),T(t)}function _(t,e){t._state===z&&(t._result=e,t._state=H,0===t._subscribers.length||D(T,t))}function b(t,e){t._state===z&&(t._state=$,t._result=e,D(w,t))}function E(t,e,n,r){var i=t._subscribers,o=i.length;t._onerror=null,i[o]=e,i[o+H]=n,i[o+$]=r,0===o&&t._state&&D(T,t)}function T(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r,i,o=t._result,s=0;s<e.length;s+=3)r=e[s],i=e[s+n],r?P(n,r,i,o):i(o);t._subscribers.length=0}}function x(){this.error=null}function N(t,e){try{return t(e)}catch(n){return J.error=n,J}}function P(t,e,r,i){var o,s,a,u,c=n(r);if(c){if(o=N(r,i),o===J?(u=!0,s=o.error,o=null):a=!0,e===o)return void b(e,p())}else o=i,a=!0;e._state!==z||(c&&a?y(e,o):u?b(e,s):t===H?_(e,o):t===$&&b(e,o))}function O(t,e){try{e(function(e){y(t,e)},function(e){b(t,e)})}catch(n){b(t,n)}}function j(t,e,n,r){this._instanceConstructor=t,this.promise=new t(f,r),this._abortOnReject=n,this._validateInput(e)?(this._input=e,this.length=e.length,this._remaining=e.length,this._init(),0===this.length?_(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&_(this.promise,this._result))):b(this.promise,this._validationError())}function R(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function S(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function C(t){this._id=Q++,this._state=void 0,this._result=void 0,this._subscribers=[],f!==t&&(n(t)||R(),this instanceof C||S(),O(this,t))}var I;I=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var L,M=I,A=(Date.now||function(){return(new Date).getTime()},Object.create||function(t){if(arguments.length>1)throw new Error("Second argument not supported");if("object"!=typeof t)throw new TypeError("Argument must be an object");return i.prototype=t,new i},0),D=function(t,e){B[A]=t,B[A+1]=e,A+=2,2===A&&L()},k="undefined"!=typeof window?window:{},U=k.MutationObserver||k.WebKitMutationObserver,F="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,B=new Array(1e3);L="undefined"!=typeof process&&"[object process]"==={}.toString.call(process)?o():U?s():F?a():u();var z=void 0,H=1,$=2,q=new x,J=new x;j.prototype._validateInput=function(t){return M(t)},j.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},j.prototype._init=function(){this._result=new Array(this.length)};var V=j;j.prototype._enumerate=function(){for(var t=this.length,e=this.promise,n=this._input,r=0;e._state===z&&t>r;r++)this._eachEntry(n[r],r)},j.prototype._eachEntry=function(t,e){var n=this._instanceConstructor;r(t)?t.constructor===n&&t._state!==z?(t._onerror=null,this._settledAt(t._state,e,t._result)):this._willSettleAt(n.resolve(t),e):(this._remaining--,this._result[e]=this._makeResult(H,e,t))},j.prototype._settledAt=function(t,e,n){var r=this.promise;r._state===z&&(this._remaining--,this._abortOnReject&&t===$?b(r,n):this._result[e]=this._makeResult(t,e,n)),0===this._remaining&&_(r,this._result)},j.prototype._makeResult=function(t,e,n){return n},j.prototype._willSettleAt=function(t,e){var n=this;E(t,void 0,function(t){n._settledAt(H,e,t)},function(t){n._settledAt($,e,t)})};var W=function(t,e){return new V(this,t,!0,e).promise},K=function(t,e){function n(t){y(o,t)}function r(t){b(o,t)}var i=this,o=new i(f,e);if(!M(t))return b(o,new TypeError("You must pass an array to race.")),o;for(var s=t.length,a=0;o._state===z&&s>a;a++)E(i.resolve(t[a]),void 0,n,r);return o},Y=function(t,e){var n=this;if(t&&"object"==typeof t&&t.constructor===n)return t;var r=new n(f,e);return y(r,t),r},G=function(t,e){var n=this,r=new n(f,e);return b(r,t),r},Q=0,X=C;C.all=W,C.race=K,C.resolve=Y,C.reject=G,C.prototype={constructor:C,then:function(t,e){var n=this,r=n._state;if(r===H&&!t||r===$&&!e)return this;var i=new this.constructor(f),o=n._result;if(r){var s=arguments[r-1];D(function(){P(r,i,s,o)})}else E(n,i,t,e);return i},"catch":function(t){return this.then(null,t)}};var Z=function(){var t;t="undefined"!=typeof global?global:"undefined"!=typeof window&&window.document?window:self;var e="Promise"in t&&"resolve"in t.Promise&&"reject"in t.Promise&&"all"in t.Promise&&"race"in t.Promise&&function(){var e;return new t.Promise(function(t){e=t}),n(e)}();e||(t.Promise=X)},tt={Promise:X,polyfill:Z};"function"==typeof define&&define.amd?define(function(){return tt}):"undefined"!=typeof e&&e.exports?e.exports=tt:"undefined"!=typeof this&&(this.ES6Promise=tt)}).call(this)},{}],2:[function(t,e,n){e.exports=document},{}],3:[function(t,e,n){e.exports=location},{}],4:[function(t,e,n){e.exports=navigator},{}],5:[function(t,e,n){e.exports=window},{}],6:[function(t,e,n){function r(t){return a.isType("string",t)?t.split("."):a.isType("array",t)?t:[]}function i(t,e){var n=r(e),i=n.slice(0,-1);return i.reduce(function(t,e,n){if(t[e]=t[e]||{},!a.isObject(t[e]))throw new Error(i.slice(0,n+1).join(".")+" is already defined with a value.");return t[e]},t)}function o(t,e){e=e||s,e[t]=e[t]||{},Object.defineProperty(this,"base",{value:e[t]}),Object.defineProperty(this,"name",{value:t})}var s=t(5),a=t(32);a.aug(o.prototype,{get:function(t){var e=r(t);return e.reduce(function(t,e){return a.isObject(t)?t[e]:void 0},this.base)},set:function(t,e,n){var o=r(t),s=i(this.base,t),a=o.slice(-1);return n&&a in s?s[a]:s[a]=e},init:function(t,e){return this.set(t,e,!0)},unset:function(t){var e=r(t),n=this.get(e.slice(0,-1));n&&delete n[e.slice(-1)]},aug:function(t){var e=this.get(t),n=a.toRealArray(arguments).slice(1);if(e="undefined"!=typeof e?e:{},n.unshift(e),!n.every(a.isObject))throw new Error("Cannot augment non-object.");return this.set(t,a.aug.apply(null,n))},call:function(t){var e=this.get(t),n=a.toRealArray(arguments).slice(1);if(!a.isType("function",e))throw new Error("Function "+t+"does not exist.");return e.apply(null,n)},fullPath:function(t){var e=r(t);return e.unshift(this.name),e.join(".")}}),e.exports=o},{32:32,5:5}],7:[function(t,e,n){function r(t){var e,n,r,i=0;for(o={},t=t||s,e=t.getElementsByTagName("meta");n=e[i];i++)/^twitter:/.test(n.name)&&(r=n.name.replace(/^twitter:/,""),o[r]=n.content)}function i(t){return o[t]}var o,s=t(2);r(),e.exports={init:r,val:i}},{2:2}],8:[function(t,e,n){var r=t(6);e.exports=new r("__twttr")},{6:6}],9:[function(t,e,n){e.exports=["hi","zh-cn","fr","zh-tw","msa","fil","fi","sv","pl","ja","ko","de","it","pt","es","ru","id","tr","da","no","nl","hu","fa","ar","ur","he","th","cs","uk","vi","ro","bn"]},{}],10:[function(t,e,n){function r(t){return t=t||m.event,t&&t.preventDefault?t.preventDefault():t.returnValue=!1,t&&t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,!1}function i(t){return t.replace(/(<)|(>)/g,function(t){var e;return e="<"===t[0]?"&lt;":"&gt;"})}function o(t){for(var e=0,n=t.length;n>e;e++)t[e]=i(t[e]);return t}function s(t,e){t.className+=" "+e}function a(){var t=z.parentNode,e=H.parentNode;$.insertBefore(t,e)}function u(){var t=H.parentNode;t.style.width=H.offsetWidth+"px"}function c(){var t=B.getElementById("l");B.title=_("Tweet Button"),t.innerHTML=p(),u(),S($)}function f(t){F=t,z.innerHTML=C.number(F,_,q.lang),S($)}function l(){y(function(){if(q.url&&"none"!==q.count){var t=B.createElement("script");t.type="text/javascript",t.src=R.get("config.countURL")+"?url="+w.encodePart(L)+"&callback="+R.fullPath("receiveCount"),B.body.appendChild(t)}})}function p(){switch(q.type){case"hashtag":return _("Tweet %{hashtag}",{hashtag:"<b>#"+q.button_hashtag+"</b>"});case"mention":return _("Tweet to %{name}",{name:"<b>@"+q.screen_name+"</b>"});default:return _("Tweet")}}function h(t,e){var n=t.id+"-desc",r=v.createElement("p");r.id=n,r.className="aria",r.innerHTML=e,B.body.appendChild(r),t.setAttribute("aria-describedby",n)}function d(t){var e="scrollbars=yes,resizable=yes,toolbar=no,location=yes",n=550,r=420,i=m.screen.height,o=m.screen.width,s=Math.round(o/2-n/2),a=0;return i>r&&(a=Math.round(i/2-r/2)),m.open(t,null,e+",width="+n+",height="+r+",left="+s+",top="+a)}var v=t(2),g=t(3),m=t(5),y=t(19),w=t(27),b=t(24),E=t(13),T=t(33),x=t(29),N=t(30),P=t(9),O=t(17),j=t(32),R=t(8),S=t(16),C=t(22);R.aug("config",{countURL:"//cdn.syndication.twitter.com/widgets/tweetbutton/count.json",intentURL:"https://twitter.com/intent/tweet"});var I,L,M,A,D,k,U,F=0,B=v,z=B.getElementById("count"),H=B.getElementById("b"),$=B.getElementById("widget"),q=o(b.combined(g)),J={vertical:"vcount",horizontal:"hcount",none:"ncount"},V={l:"xl",m:"regular"},W=["share","mention","hashtag"],K=[];N.asBoolean(q.dnt)&&O.setOn(),q.lang=q.lang&&q.lang.toLowerCase(),B.body.parentNode.lang=q.lang=j.contains(P,q.lang)?q.lang:"en",R.set("lang",q.lang),U=_("ltr"),R.set("receiveCount",function(t){"number"==typeof t.count&&(f(t.count),s(B.body,"count-ready"),t.count>0&&(z.title=_("This page has been shared %{tweets} times. View these Tweets.",{tweets:t.count}),h(z,z.title)))}),q.type=j.contains(W,q.type)?q.type:"share",q.size=V[q.size]?q.size:"m",s(B.body,V[q.size]||""),("mention"==q.type||q.screen_name)&&((k=x.screenName(q.screen_name))?q.screen_name=k:(delete q.screen_name,"mention"==q.type&&(q.type="share",q.count="none"))),"hashtag"==q.type||q.button_hashtag?((D=x.hashTag(q.button_hashtag,!1))?(q.button_hashtag=D,q.hashtags=q.button_hashtag+","+(q.hashtags||"")):(delete q.button_hashtag,q.type="share"),q.count="none"):"share"==q.type?(q.url=q.url||B.referrer,L=q.counturl||q.url,M=L&&"http://twitter.com/search?q="+w.encodePart(L),"vertical"==q.count&&a(),K.push(J[q.count]||"hcount"),l()):q.count="none",K.push(U),s(B.body,K.join(" ")),B.body.setAttribute("data-scribe","section:"+q.type),c(),s(B.body,"ready"),I={text:q.text,screen_name:q.screen_name,hashtags:q.hashtags,url:q.url,via:q.via,related:q.related,share_with_retweet:q.share_with_retweet,placeid:q.placeid,original_referer:B.referrer,partner:q.partner,tw_p:"tweetbutton"},A=R.get("config.intentURL")+"?"+w.encode(I),E.clientEvent({page:"button",section:q.type,action:"impression"},{language:q.lang,message:[,q.size,"none"!=q.count?"withcount":"nocount"].join(":")+":",widget_origin:B.referrer},!1),z.href=M,H.href=A,H.onclick=function(t){return t=t||m.event,E.interaction(t,{},!1),T.withHub({nohub:function(){d(A,q.id)},timeout:function(){d(A,q.id)},success:function(t){t.openIntent(A,q.id),t.trigger("click",{region:"tweet"},q.id)}}),r(t)},"disabled"!=q.searchlink?(s(z.parentNode,"enabled"),z.onclick=function(t){return t=t||m.event,E.interaction(t,{},!1),T.withHub(function(t){t.trigger("click",{region:"tweetcount"},q.id)}),t.altKey||t.shiftKey||t.metaKey?void 0:(m.open(M),r(t))}):z.onclick=function(t){r(t)}},{13:13,16:16,17:17,19:19,2:2,22:22,24:24,27:27,29:29,3:3,30:30,32:32,33:33,5:5,8:8,9:9}],11:[function(t,e,n){function r(t){if(!t)throw new Error("JsonRpcClient requires a dispatcher");this.idIterator=0,this.dispatcher=t,this.idPrefix=String(+new Date)+a++}function i(t){var e={jsonrpc:s,method:t};return arguments.length>1&&(e.params=[].slice.call(arguments,1)),e}var o=t(26),s="2.0",a=0;r.prototype._generateId=function(){return this.idPrefix+this.idIterator++},r.prototype.notify=function(){this.dispatcher.send(i.apply(null,arguments))},r.prototype.request=function(){var t=i.apply(null,arguments);return t.id=this._generateId(),this.dispatcher.send(t).then(function(t){return"result"in t?t.result:o.reject(t.error)})},e.exports=r},{26:26}],12:[function(t,e,n){function r(t,e,n){var r;t&&t.postMessage&&(v?r=(n||"")+JSON.stringify(e):n?(r={},r[n]=e):r=e,t.postMessage(r,"*"))}function i(t){return h.isType("string",t)?t:"JSONRPC"}function o(t,e){return e?h.isType("string",t)&&0===t.indexOf(e)?t.substring(e.length):t[e]?t[e]:void 0:t}function s(t,e){var n=t.document;this.filter=i(e),this.server=null,this.isTwitterFrame=d.isTwitterURL(n.location.href),t.addEventListener("message",this._onMessage.bind(this),!1)}function a(t,e){this.pending={},this.target=t,this.isTwitterHost=d.isTwitterURL(c.href),this.filter=i(e),f.addEventListener("message",this._onMessage.bind(this),!1)}function u(t){return arguments.length>0&&(v=!!t),v}var c=t(3),f=t(5),l=t(25),p=t(21),h=t(32),d=t(29),v=p.ie9();h.aug(s.prototype,{_onMessage:function(t){var e,n=this;this.server&&(!this.isTwitterFrame||d.isTwitterURL(t.origin))&&(e=o(t.data,this.filter),e&&this.server.receive(e,t.source).then(function(e){e&&r(t.source,e,n.filter)}))},attachTo:function(t){this.server=t},detach:function(){this.server=null}}),h.aug(a.prototype,{_processResponse:function(t){var e=this.pending[t.id];e&&(e.resolve(t),delete this.pending[t.id])},_onMessage:function(t){var e;if((!this.isTwitterHost||d.isTwitterURL(t.origin))&&(e=o(t.data,this.filter))){if(h.isType("string",e))try{e=JSON.parse(e)}catch(n){return}e=h.isType("array",e)?e:[e],e.forEach(this._processResponse.bind(this))}},send:function(t){var e=new l;return t.id?this.pending[t.id]=e:e.resolve(),r(this.target,t,this.filter),e.promise}}),e.exports={Receiver:s,Dispatcher:a,_stringifyPayload:u}},{21:21,25:25,29:29,3:3,32:32,5:5}],13:[function(t,e,n){function r(t,e,n){return i(t,e,n,2)}function i(t,e,n,r){var i=!d.isObject(t),o=e?!d.isObject(e):!1;i||o||s(h.formatClientEventNamespace(t),h.formatClientEventData(e,n,r),h.CLIENT_EVENT_ENDPOINT)}function o(t,e,n,r){var o=h.extractTermsFromDOM(t.target||t.srcElement);o.action=r||"click",i(o,e,n)}function s(t,e,n){var r,i;n&&d.isObject(t)&&d.isObject(e)&&(r=h.flattenClientEventPayload(t,e),i={l:h.stringify(r)},r.dnt&&(i.dnt=1),f(p.url(n,i)))}function a(t,e,n,r){var i,o=!d.isObject(t),s=e?!d.isObject(e):!1;if(!o&&!s)return i=h.flattenClientEventPayload(h.formatClientEventNamespace(t),h.formatClientEventData(e,n,r)),u(i)}function u(t){return g.push(t),g}function c(){var t,e,n=p.url(h.CLIENT_EVENT_ENDPOINT,{dnt:0,l:""}),r=encodeURIComponent(n).length;return g.length>1&&a({page:"widgets_js",component:"scribe_pixel",action:"batch_log"},{}),t=g,g=[],e=t.reduce(function(e,n,i){var o,s,a=e.length,u=a&&e[a-1],c=i+1==t.length;return c&&n.event_namespace&&"batch_log"==n.event_namespace.action&&(n.message=["entries:"+i,"requests:"+a].join("/")),o=h.stringify(n),s=encodeURIComponent(o).length+3,r+s>v?e:((!u||u.urlLength+s>v)&&(u={urlLength:r,items:[]},e.push(u)),u.urlLength+=s,u.items.push(o),e)},[]),e.map(function(t){var e={l:t.items};return l.enabled()&&(e.dnt=1),f(p.url(h.CLIENT_EVENT_ENDPOINT,e))})}function f(t){var e=new Image;return e.src=t}var l=t(20),p=t(27),h=t(14),d=t(32),v=2083,g=[];e.exports={_enqueueRawObject:u,scribe:s,clientEvent:i,clientEvent2:r,enqueueClientEvent:a,flushClientEvents:c,interaction:o}},{14:14,20:20,27:27,32:32}],14:[function(t,e,n){function r(t,e){var n;return e=e||{},t&&t.nodeType===Node.ELEMENT_NODE?((n=t.getAttribute("data-scribe"))&&n.split(" ").forEach(function(t){var n=t.trim().split(":"),r=n[0],i=n[1];r&&i&&!e[r]&&(e[r]=i)}),r(t.parentNode,e)):e}function i(t){return l.aug({client:"tfw"},t||{})}function o(t,e,n){var r=t&&t.widget_origin||c.referrer;return t=s("tfw_client_event",t,r),t.client_version=d,t.format_version=void 0!==n?n:1,e||(t.widget_origin=r),t}function s(t,e,n){return e=e||{},l.aug(e,{_category_:t,triggered_on:e.triggered_on||+new Date,dnt:f.enabled(n)})}function a(t,e){return l.aug({},e,{event_namespace:t})}function u(t){var e,n=Array.prototype.toJSON;return delete Array.prototype.toJSON,e=JSON.stringify(t),n&&(Array.prototype.toJSON=n),e}var c=t(2),f=t(20),l=t(32),p=t(34),h=t(8),d=p.version,v=h.get("endpoints.rufous")||"https://syndication.twitter.com/i/jot",g=h.get("endpoints.rufousAudience")||"https://syndication.twitter.com/i/jot/syndication",m=h.get("endpoints.rufousRedirect")||"https://platform.twitter.com/jot.html";e.exports={extractTermsFromDOM:r,flattenClientEventPayload:a,formatGenericEventData:s,formatClientEventData:o,formatClientEventNamespace:i,stringify:u,AUDIENCE_ENDPOINT:g,CLIENT_EVENT_ENDPOINT:v,RUFOUS_REDIRECT:m}},{2:2,20:20,32:32,34:34,8:8}],15:[function(t,e,n){function r(){var t=36e5,e=s.combined(o)._;return void 0!==i?i:(i=!1,e&&/^\d+$/.test(e)&&(i=+new Date-parseInt(e)<t),i)}var i,o=t(3),s=t(24);e.exports={isDynamicWidget:r}},{24:24,3:3}],16:[function(t,e,n){function r(t){var e=t.offsetWidth,n=t.offsetHeight;a.notify("twttr.private.resizeButton",{width:e,height:n})}var i=t(5),o=t(11),s=t(12),a=new o(new s.Dispatcher(i.parent,"twttr.resize"));e.exports=r},{11:11,12:12,5:5}],17:[function(t,e,n){function r(){p=!0}function i(t,e){return p?!0:f.asBoolean(l.val("dnt"))?!0:!a||1!=a.doNotTrack&&1!=a.msDoNotTrack?c.isUrlSensitive(e||s.host)?!0:u.isFramed()&&c.isUrlSensitive(u.rootDocumentLocation())?!0:(t=h.test(t||o.referrer)&&RegExp.$1,t&&c.isUrlSensitive(t)?!0:!1):!0}var o=t(2),s=t(3),a=t(4),u=t(18),c=t(28),f=t(30),l=t(7),p=!1,h=/https?:\/\/([^\/]+).*/i;e.exports={setOn:r,enabled:i}},{18:18,2:2,28:28,3:3,30:30,4:4,7:7}],18:[function(t,e,n){function r(t){return t&&u.isType("string",t)&&(c=t),c}function i(){return f}function o(){return c!==f}var s=t(3),a=t(31),u=t(32),c=a.getCanonicalURL()||s.href,f=c;e.exports={isFramed:o,rootDocumentLocation:r,currentDocumentLocation:i}},{3:3,31:31,32:32}],19:[function(t,e,n){function r(){c=1;for(var t=0,e=f.length;e>t;t++)f[t]()}var i,o,s,a=t(2),u=t(5),c=0,f=[],l=!1,p=a.createElement("a");/^loade|c/.test(a.readyState)&&(c=1),a.addEventListener&&a.addEventListener("DOMContentLoaded",o=function(){a.removeEventListener("DOMContentLoaded",o,l),r()},l),p.doScroll&&a.attachEvent("onreadystatechange",i=function(){/^c/.test(a.readyState)&&(a.detachEvent("onreadystatechange",i),r())}),s=p.doScroll?function(t){u.self!=u.top?c?t():f.push(t):!function(){try{p.doScroll("left")}catch(e){return setTimeout(function(){s(t)},50)}t()}()}:function(t){c?t():f.push(t)},e.exports=s},{2:2,5:5}],20:[function(t,e,n){e.exports=t(17)},{17:17,18:18,2:2,28:28,3:3,30:30,4:4,7:7}],21:[function(t,e,n){function r(t){return t=t||g,t.devicePixelRatio?t.devicePixelRatio>=1.5:t.matchMedia?t.matchMedia("only screen and (min-resolution: 144dpi)").matches:!1}function i(t){return t=t||T,/(Trident|MSIE \d)/.test(t)}function o(t){return t=t||T,/MSIE 9/.test(t)}function s(t){return t=t||T,/(iPad|iPhone|iPod)/.test(t)}function a(t){return t=t||T,/^Mozilla\/5\.0 \(Linux; (U; )?Android/.test(t)}function u(){return x}function c(t,e){return t=t||g,e=e||T,t.postMessage&&!(i(e)&&t.opener)}function f(t){t=t||v;try{return!!t.plugins["Shockwave Flash"]||!!new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(e){return!1}}function l(t,e,n){return t=t||g,e=e||v,n=n||T,"ontouchstart"in t||/Opera Mini/.test(n)||e.msMaxTouchPoints>0}function p(){var t=d.body.style;return void 0!==t.transition||void 0!==t.webkitTransition||void 0!==t.mozTransition||void 0!==t.oTransition||void 0!==t.msTransition}function h(){return!!(g.Promise&&g.Promise.resolve&&g.Promise.reject&&g.Promise.all&&g.Promise.race&&function(){var t;return new g.Promise(function(e){t=e}),_.isType("function",t)}())}var d=t(2),v=t(4),g=t(5),m=t(19),y=t(23),w=t(30),_=t(32),b=t(7),E=t(8),T=v.userAgent,x=!1,N=!1,P="twitter-csp-test";E.set("verifyCSP",function(t){var e=d.getElementById(P);N=!0,x=!!t,e&&e.parentNode.removeChild(e)}),m(function(){var t;return w.asBoolean(b.val("widgets:csp"))?x=!0:(t=d.createElement("script"),t.id=P,t.text=E.fullPath("verifyCSP")+"(false);",d.body.appendChild(t),void g.setTimeout(function(){N||(y.warn('TWITTER: Content Security Policy restrictions may be applied to your site. Add <meta name="twitter:widgets:csp" content="on"> to supress this warning.'),y.warn("TWITTER: Please note: Not all embedded timeline and embedded Tweet functionality is supported when CSP is applied."))},5e3))}),e.exports={retina:r,anyIE:i,ie9:o,ios:s,android:a,cspEnabled:u,flashEnabled:f,canPostMessage:c,touch:l,cssTransitions:p,hasPromiseSupport:h}},{19:19,2:2,23:23,30:30,32:32,4:4,5:5,7:7,8:8}],22:[function(t,e,n){function r(t,e){var n,r,i=parseInt(t,10),s=new RegExp("^\\"+e(","));return isNaN(i)?"":0>i?"0":1e4>i?i.toString().split("").reverse().join("").replace(/(\d{3})/g,"$1"+e(",")).split("").reverse().join("").replace(s,""):1e5>i?(n=(Math.floor(i/100)/10).toString(),n.replace(/\./,e("."))+e("K")):1e6>i?(n=Math.floor(i/1e3).toString(),n+e("K")):1e7>i?(r=(Math.floor(i/1e5)/10).toString(),o.contains(r,".")?r.replace(/\./,e("."))+e("M"):r+e(".")+"0"+e("M")):e("10M+")}function i(t,e){var n,r=t,i=new RegExp("^"+e(","));return r=parseInt(r,10),isNaN(r)?"":1e4>r?r.toString().split("").reverse().join("").replace(/(\d{3})/g,"$1"+e(",")).split("").reverse().join("").replace(i,""):1e6>r?(n=(Math.floor(r/1e3)/10).toString(),n.replace(/\./,e("."))+e("10k unit")):1e7>r?(n=Math.floor(r/1e4).toString(),n+e("10k unit")):e("10M+")}var o=t(32),s={en:r,ja:i,ko:i};e.exports={number:function(t,e,n){return e||(e=function(t){return t}),n&&s[n]?s[n](t,e):s.en(t,e)}}},{32:32}],23:[function(t,e,n){function r(){c("info",p.toRealArray(arguments))}function i(){c("warn",p.toRealArray(arguments))}function o(){c("error",p.toRealArray(arguments))}function s(t){v&&(d[t]=u())}function a(t){var e;v&&(d[t]?(e=u(),r("_twitter",t,e-d[t])):o("timeEnd() called before time() for id: ",t))}function u(){return l.performance&&+l.performance.now()||+new Date}function c(t,e){if(l[h]&&l[h][t])switch(e.length){case 1:l[h][t](e[0]);break;case 2:l[h][t](e[0],e[1]);break;case 3:l[h][t](e[0],e[1],e[2]);break;case 4:l[h][t](e[0],e[1],e[2],e[3]);break;case 5:l[h][t](e[0],e[1],e[2],e[3],e[4]);break;default:0!==e.length&&l[h].warn&&l[h].warn("too many params passed to logger."+t)}}var f=t(3),l=t(5),p=t(32),h=["con","sole"].join(""),d={},v=p.contains(f.href,"tw_debug=true");e.exports={info:r,warn:i,error:o,time:s,timeEnd:a}},{3:3,32:32,5:5}],24:[function(t,e,n){var r,i,o,s=t(27);r=function(t){var e=t.search.substr(1);return s.decode(e)},i=function(t){var e=t.href,n=e.indexOf("#"),r=0>n?"":e.substring(n+1);return s.decode(r)},o=function(t){var e,n={},o=r(t),s=i(t);for(e in o)o.hasOwnProperty(e)&&(n[e]=o[e]);for(e in s)s.hasOwnProperty(e)&&(n[e]=s[e]);return n},e.exports={combined:o,fromQuery:r,fromFragment:i}},{27:27}],25:[function(t,e,n){function r(){var t=this;this.promise=new i(function(e,n){t.resolve=e,t.reject=n})}var i=t(26);e.exports=r},{26:26}],26:[function(t,e,n){var r=t(1).Promise,i=t(5),o=t(21);e.exports=o.hasPromiseSupport()?i.Promise:r},{1:1,21:21,5:5}],27:[function(t,e,n){function r(t){return encodeURIComponent(t).replace(/\+/g,"%2B").replace(/'/g,"%27")}function i(t){return decodeURIComponent(t)}function o(t){var e=[];return f.forIn(t,function(t,n){var i=r(t);f.isType("array",n)||(n=[n]),n.forEach(function(t){c.hasValue(t)&&e.push(i+"="+r(t))})}),e.sort().join("&")}function s(t){var e,n={};return t?(e=t.split("&"),e.forEach(function(t){var e=t.split("="),r=i(e[0]),o=i(e[1]);return 2==e.length?f.isType("array",n[r])?void n[r].push(o):r in n?(n[r]=[n[r]],void n[r].push(o)):void(n[r]=o):void 0}),n):{}}function a(t,e){var n=o(e);return n.length>0?f.contains(t,"?")?t+"&"+o(e):t+"?"+o(e):t}function u(t){var e=t&&t.split("?");return 2==e.length?s(e[1]):{}}var c=t(30),f=t(32);e.exports={url:a,decodeURL:u,decode:s,encode:o,encodePart:r,decodePart:i}},{30:30,32:32}],28:[function(t,e,n){function r(t){return t in a?a[t]:a[t]=s.test(t)}function i(){return r(o.host)}var o=t(3),s=/^[^#?]*\.(gov|mil)(:\d+)?([#?].*)?$/i,a={};e.exports={isUrlSensitive:r,isHostPageSensitive:i}},{3:3}],29:[function(t,e,n){function r(t){return"string"==typeof t&&v.test(t)&&RegExp.$1.length<=20}function i(t){return r(t)?RegExp.$1:void 0}function o(t,e){var n=d.decodeURL(t);return e=e||!1,n.screen_name=i(t),n.screen_name?d.url("https://twitter.com/intent/"+(e?"follow":"user"),n):void 0}function s(t){return o(t,!0)}function a(t){return"string"==typeof t&&w.test(t)}function u(t,e){return e=void 0===e?!0:e,a(t)?(e?"#":"")+RegExp.$1:void 0}function c(t){return"string"==typeof t&&g.test(t)}function f(t){return c(t)&&RegExp.$1}function l(t){return m.test(t)}function p(t){return y.test(t)}function h(t){return _.test(t)}var d=t(27),v=/(?:^|(?:https?\:)?\/\/(?:www\.)?twitter\.com(?:\:\d+)?(?:\/intent\/(?:follow|user)\/?\?screen_name=|(?:\/#!)?\/))@?([\w]+)(?:\?|&|$)/i,g=/(?:^|(?:https?\:)?\/\/(?:www\.)?twitter\.com(?:\:\d+)?\/(?:#!\/)?[\w_]+\/status(?:es)?\/)(\d+)/i,m=/^http(s?):\/\/(\w+\.)*twitter\.com([\:\/]|$)/i,y=/^http(s?):\/\/pbs\.twimg\.com\//,w=/^#?([^.,<>!\s\/#\-\(\)\'\"]+)$/,_=/twitter\.com(\:\d{2,4})?\/intent\/(\w+)/;e.exports={isHashTag:a,hashTag:u,isScreenName:r,screenName:i,isStatus:c,status:f,intentForProfileURL:o,intentForFollowURL:s,isTwitterURL:l,isTwimgURL:p,isIntentURL:h,regexen:{profile:v}}},{27:27}],30:[function(t,e,n){function r(t){return void 0!==t&&null!==t&&""!==t}function i(t){return s(t)&&t%1===0}function o(t){return s(t)&&!i(t)}function s(t){return r(t)&&!isNaN(t)}function a(t){return r(t)&&"array"==p.toType(t)}function u(t){if(!r(t))return!1;switch(t){case"1":case"on":case"ON":case"true":case"TRUE":case"yes":case"YES":return!0;case"0":case"off":case"OFF":case"false":case"FALSE":case"no":case"NO":return!1;default:return!!t}}function c(t){return s(t)?t:void 0}function f(t){return o(t)?t:void 0}function l(t){return i(t)?t:void 0}var p=t(32);e.exports={hasValue:r,isInt:i,isFloat:o,isNumber:s,isArray:a,asInt:l,asFloat:f,asNumber:c,asBoolean:u}},{32:32}],31:[function(t,e,n){function r(t,e){var n,r;return e=e||a,/^https?:\/\//.test(t)?t:/^\/\//.test(t)?e.protocol+t:(n=e.host+(e.port.length?":"+e.port:""),0!==t.indexOf("/")&&(r=e.pathname.split("/"),r.pop(),r.push(t),t="/"+r.join("/")),[e.protocol,"//",n,t].join(""))}function i(){for(var t,e=s.getElementsByTagName("link"),n=0;t=e[n];n++)if("canonical"==t.rel)return r(t.href)}function o(){for(var t,e,n,r=s.getElementsByTagName("a"),i=s.getElementsByTagName("link"),o=[r,i],a=0,c=0,f=/\bme\b/;t=o[a];a++)for(c=0;e=t[c];c++)if(f.test(e.rel)&&(n=u.screenName(e.href)))return n}var s=t(2),a=t(3),u=t(29);e.exports={absolutize:r,getCanonicalURL:i,getScreenNameFromPage:o}},{2:2,29:29,3:3}],32:[function(t,e,n){function r(t){return l(arguments).slice(1).forEach(function(e){o(e,function(e,n){t[e]=n})}),t}function i(t){return o(t,function(e,n){u(n)&&(i(n),c(n)&&delete t[e]),(void 0===n||null===n||""===n)&&delete t[e]}),t}function o(t,e){for(var n in t)(!t.hasOwnProperty||t.hasOwnProperty(n))&&e(n,t[n]);return t}function s(t){return{}.toString.call(t).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function a(t,e){return t==s(e)}function u(t){return t===Object(t)}function c(t){if(!u(t))return!1;if(Object.keys)return!Object.keys(t).length;for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}function f(t,e){h.setTimeout(function(){t.call(e||null)},0)}function l(t){return Array.prototype.slice.call(t)}function p(t,e){return t&&t.indexOf?t.indexOf(e)>-1:!1}var h=t(5);e.exports={aug:r,async:f,compact:i,contains:p,forIn:o,isObject:u,isEmptyObject:c,toType:s,isType:a,toRealArray:l}},{5:5}],33:[function(t,e,n){function r(){if(o)return o;if(c.isDynamicWidget()){var t,e=0,n=u.parent.frames.length;try{if(o=u.parent.frames[p])return o}catch(r){}if(f.anyIE())for(;n>e;e++)try{if(t=u.parent.frames[e],t&&"function"==typeof t.openIntent)return o=t}catch(r){}}}function i(){var t,e,n,o,a,f,l={};if("function"===(typeof arguments[0]).toLowerCase()?l.success=arguments[0]:l=arguments[0],t=l.success||function(){},e=l.timeout||function(){},n=l.nohub||function(){},o=l.complete||function(){},a=void 0!==l.attempt?l.attempt:v,!c.isDynamicWidget()||s)return n(),o(),!1;f=r(),a--;try{if(f&&f.trigger)return t(f),void o()}catch(p){}return 0>=a?(s=!0,e(),void o()):+new Date-h>d*v?(s=!0,void n()):void u.setTimeout(function(){i({success:t,timeout:e,nohub:n,attempt:a,complete:o})},d)}var o,s,a=t(3),u=t(5),c=t(15),f=t(21),l="twttrHubFrameSecure",p="http:"==a.protocol?"twttrHubFrame":l,h=+new Date,d=100,v=20;e.exports={withHub:i,contextualHubId:p,secureHubId:l}},{15:15,21:21,3:3,5:5}],34:[function(t,e,n){e.exports={version:"f5045446417440a57140409dd3a851300aa9ddbd:1430170814284"}},{}]},{},[10]))}();;</script><script type="text/javascript" src="//cdn.syndication.twitter.com/widgets/tweetbutton/count.json?url=http%3A%2F%2Fwww.welluneednt.com%2Fentry%2F2015%2F03%2F24%2F113000&amp;callback=__twttr.receiveCount"></script><p id="count-desc" class="aria">ã“ã®ãƒšãƒ¼ã‚¸ã¯82å›å…±æœ‰ã•ã‚Œã¾ã—ãŸã€‚ã“ã‚Œã‚‰ã®ãƒ„ã‚¤ãƒ¼ãƒˆã‚’è¦‹ã‚‹ã€‚ </p></body></html>¡iÕ	'jklm_¦http://cdn.syndication.twitter.com/widgets/tweetbutton/count.json?url=http%3A%2F%2Fwww.welluneednt.com%2Fentry%2F2015%2F03%2F24%2F113000&callback=__twttr.receiveCountOxbplist00ÔX$versionX$objectsY$archiverT$top † ¯3#)*0123_`abcdefghijklmnopqrstuvwxyz{|}~€‚ƒ„…ˆ‰ŠU$nullİ	
 !"R$6S$10R$2R$7R$3S$11R$8V$classR$4R$9R$0R$5R$1€	€€€0€2€€1€Ó$%&'(WNS.base[NS.relative€ €€_¦http://cdn.syndication.twitter.com/widgets/tweetbutton/count.json?url=http%3A%2F%2Fwww.welluneednt.com%2Fentry%2F2015%2F03%2F24%2F113000&callback=__twttr.receiveCountÒ+,-.Z$classnameX$classesUNSURL¢-/XNSObject#AºôÒˆãŒ¹ ÈÓ456J^WNS.keysZNS.objects¯789:;<=>?@ABCDEFGHI€	€
€€€€€€€€€€€€€€€€€¯KLMNOPQRSTUVWXYZ[\]€€€€€ €!€"€#€$€%€&€'€(€)€*€+€,€-€.€/\Content-TypeWX-Cache\X-Cache-Hits_x-response-time]Last-Modified_Content-EncodingVServerSAgeWExpires_x-connection-hashSVia]Cache-ControlTDate_Strict-Transport-Security^Content-LengthZConnection]Accept-Ranges[X-Served-ByTVary_$application/javascript;charset=utf-8SHITQ1Q6_Sat, 02 May 2015 09:37:12 GMTTgzipUtsa_aR65_Sat, 02 May 2015 09:52:12 GMT_ f8f22837a05b1b267935fa07f83c76b1[1.1 varnish_must-revalidate, max-age=900_Sat, 02 May 2015 09:38:16 GMT_max-age=631138519S124Zkeep-aliveUbytes_cache-tw-tyo1-cr1-14-TWTYO1_Accept-EncodingÒ+,†‡\NSDictionary¢†/k_application/javascriptÒ+,‹Œ_NSHTTPURLResponse£/_NSHTTPURLResponse]NSURLResponse_NSKeyedArchiverÑ‘’_WebResourceResponse€    # - 2 7 m s  ‘ • ˜ ›  ¢ ¥ ¬ ¯ ² µ ¸ » ½ ¿ Á Ã Å Æ È Ê Ì Î Ğ Ò Ô Û ã ï ñ ó õ£®·½ÀÉÒÔÖİåğ
 "$&(*,BDFHJLNPRTVXZ\^`bdfhjwŒ¬¿ÆÊÒæêøı(3AMRy}¡¦¬¯Ïòş=QU`f„–›¨«­ÆËßã÷0             “              2Ok/**/__twttr.receiveCount({"count":82,"url":"http:\/\/www.welluneednt.com\/entry\/2015\/03\/24\/113000\/"});_application/javascriptÒosÕ	
pqr_I0_1430559496934_,https://apis.google.com/u/0/se/0/_/+1/fastbutton?usegapi=1&size=tall&origin=http%3A%2F%2Fwww.welluneednt.com&url=http%3A%2F%2Fwww.welluneednt.com%2Fentry%2F2015%2F03%2F24%2F113000&gsrc=3p&ic=1&jsh=m%3B%2F_%2Fscs%2Fapps-static%2F_%2Fjs%2Fk%3Doz.gapi.ja.GaAqtE9vSt8.O%2Fm%3D__features__%2Fam%3DIQ%2Frt%3Dj%2Fd%3D1%2Ft%3Dzcms%2Frs%3DAGLTcCObdvcYYb_30dT3f0o1AM2Q88jrEw#_methods=onPlusOne%2C_ready%2C_close%2C_open%2C_resizeMe%2C_renderstart%2Concircled%2Cdrefresh%2Cerefresh&id=I0_1430559496934&parent=http%3A%2F%2Fwww.welluneednt.com&pfname=&rpctoken=21360234O’Ó<!DOCTYPE html><html lang="ja" dir="ltr"><head><base href="https://apis.google.com/u/0/se/0/wm/1/"><style>body {-webkit-font-smoothing: antialiased;}@font-face {
  font-family: 'Roboto';
  font-style: normal;
  font-weight: 400;
  src: url(//fonts.gstatic.com/s/roboto/v15/pJeswbKZO4XwVR0035gpgvesZW2xOQ-xsNqO47m55DA.ttf) format('truetype');
}
</style><style type="text/css">.d-k-l{position:relative;display:-moz-inline-box;display:inline-block}* html .d-k-l,*:first-child+html .d-k-l{display:inline}.FP{border:1px solid #d5d5d5;border:1px solid rgba(0,0,0,.17);-webkit-border-radius:2px;border-radius:2px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.05);box-shadow:0 1px 0 rgba(0,0,0,.05);-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-transition:background-color .218s,border-color .218s,box-shadow .218s;transition:background-color .218s,border-color .218s,box-shadow .218s;-webkit-user-select:none;-webkit-appearance:none;background-color:#fff;background-image:none;color:#262626;cursor:pointer;outline:none;overflow:hidden;position:relative;text-align:center;vertical-align:middle;white-space:nowrap;width:auto}.FP:hover{border:1px solid #aaa;border:1px solid rgba(0,0,0,.25);-webkit-box-shadow:0 1px 0 rgba(0,0,0,0.1);box-shadow:0 1px 0 rgba(0,0,0,0.1)}.FP:active{background-color:#e5e5e5;border:1px solid #aaa;border:1px solid rgba(0,0,0,.25);-webkit-box-shadow:inset 0 1px 0 #ddd;box-shadow:inset 0 1px 0 #ddd;color:#262626}.t7{background-color:#f5f5f5;color:#262626}.t7:active{background-color:#e5e5e5;color:#262626}.ud,.jd,.nd,.rd{border:none;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.1);box-shadow:0 1px 0 rgba(0,0,0,.1);color:#fff}.ud:hover,.jd:hover,.nd:hover,.rd:hover{border:none;-webkit-box-shadow:inset 0 -2px 0 rgba(0,0,0,.2);box-shadow:inset 0 -2px 0 rgba(0,0,0,.2);color:#fff}.ud:active,.jd:active,.nd:active,.rd:active{border:none;-webkit-box-shadow:inset 0 2px 0 rgba(0,0,0,.2);box-shadow:inset 0 2px 0 rgba(0,0,0,.2);color:#fff}.ud{background-color:#53a93f}.ud:hover{background-color:#65b045}.ud:active{background-color:#3e802f}.jd{background-color:#dd4b39}.jd:hover{background-color:#e74b37}.jd:active{background-color:#be3e2e}.nd{background-color:#427fed}.nd:hover{background-color:#4285f4}.nd:active{background-color:#2c56b1}.rd{background-color:#737373}.rd:hover{background-color:#808080}.rd:active{background-color:#404040}.Wd,.Wd:hover,.Wd:active{background-color:#e5e5e5;border:none;-webkit-box-shadow:none;box-shadow:none;color:#aaaaaa}.s7{float:left}.u7{display:block}.Nr{fill:#dd4b38}.ud .Nr,.jd .Nr,.nd .Nr,.rd .Nr,.Wd .Nr{fill:#fff}.hma{font-family:Roboto,arial,sans-serif;font-size:12px;font-weight:700;margin-left:6px;margin-right:6px;vertical-align:top}.Ul{height:100%;width:100%}.ud .Ul,.jd .Ul,.nd .Ul,.rd .Ul,.Wd .Ul{border:1px solid transparent}.q7,.GP{display:none;height:100%;width:100%}.hva,.iva{margin-left:auto;margin-right:auto}.uk,.Nl{border:1px solid #d5d5d5;border:1px solid rgba(0,0,0,.17);-webkit-box-shadow:0 1px 0 rgba(0,0,0,.05);box-shadow:0 1px 0 rgba(0,0,0,.05);color:#262626}.uk:hover,.Nl:hover{border:1px solid #aaa;border:1px solid rgba(0,0,0,.25);-webkit-box-shadow:0 1px 0 rgba(0,0,0,0.1);box-shadow:0 1px 0 rgba(0,0,0,0.1)}.uk:active,.Nl:active{border:1px solid #aaa;border:1px solid rgba(0,0,0,.25);-webkit-box-shadow:inset 0 1px 0 #ddd;box-shadow:inset 0 1px 0 #ddd;color:#262626}.Nl,.Nl:hover{background-color:#f5f5f5}.Nl:active{background-color:#e5e5e5}.uk,.uk:hover{background-color:#fff}.uk:active{background-color:#e5e5e5}.Nl .GP,.uk .q7{display:block}.uk .Ul,.Nl .Ul,.uk .GP{display:none}@-webkit-keyframes ozWidgetRioButtonWorkingIconPathSpinKeyframes{0%{-webkit-transform:rotate(0deg)}to{-webkit-transform:rotate(360deg)}}@keyframes ozWidgetRioButtonWorkingIconPathSpinKeyframes{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.zVaWQ{-webkit-animation:ozWidgetRioButtonWorkingIconPathSpinKeyframes 2s infinite linear;animation:ozWidgetRioButtonWorkingIconPathSpinKeyframes 2s infinite linear;-webkit-transform-origin:7px 7px;transform-origin:7px 7px}.ima{background-position:top left;background-repeat:no-repeat}.HP,.HP:hover,.HP:active{color:#dd4b39}.uzlpSb{fill:#dd4b38}.ud .uzlpSb,.jd .uzlpSb,.nd .uzlpSb,.rd .uzlpSb,.Wd .uzlpSb{fill:#fff}.dIa{float:left;white-space:nowrap}.Ina{cursor:pointer;display:block;outline:0;position:relative;text-decoration:none}.B8{vertical-align:top;color:#666;font-family:Roboto,arial,sans-serif}.b1{text-align:center;margin-bottom:8px;overflow:visible;width:48px;height:30px;position:relative;background:#fff;border:1px solid #ccc;-webkit-border-radius:2px;border-radius:2px}.b1:after,.b1:before{top:100%;left:50%;border:solid transparent;content:" ";height:0;width:0;position:absolute;pointer-events:none}.b1:after{border-color:rgba(255,255,255,0);border-top-color:#fff;border-width:4px;margin-left:-4px}.b1:before{border-color:rgba(192,192,192,0);border-top-color:#ccc;border-width:5px;margin-left:-5px}.b1 .IY{padding-top:6px}.b1{font-size:15px}.Jp,.bp,.ap{float:left;position:relative;background:#fff;border:1px solid #ccc;-webkit-border-radius:2px;border-radius:2px}.HI{float:left;position:relative}.Oy{color:#666;font-family:Roboto,arial,sans-serif;overflow:hidden;white-space:nowrap}.Jp .HI{max-width:43px;min-width:5px}.Jp .Oy{font-size:10px;margin:1px 5px;height:11px;line-height:12px}.bp .HI{max-width:53px;min-width:10px}.bp .Oy{font-size:11px;margin:1px 6px;height:16px;line-height:17px}.ap .HI{max-width:63px;min-width:12px}.ap .Oy{font-size:12px;margin:1px 6px;height:20px;line-height:21px}.ap:after,.ap:before,.bp:after,.bp:before,.Jp:after,.Jp:before{right:100%;top:50%;border:solid transparent;content:" ";height:0;width:0;position:absolute;pointer-events:none}.ap,.bp{margin-left:5px}.ap:after,.bp:after{border-color:rgba(255,255,255,0);border-right-color:#fff;border-width:4px;margin-top:-4px}.ap:before,.bp:before{border-color:rgba(192,192,192,0);border-right-color:#ccc;border-width:5px;margin-top:-5px}.Jp{margin-left:4px}.Jp:after{border-color:rgba(255,255,255,0);border-right-color:#fff;border-width:3px;margin-top:-3px}.Jp:before{border-color:rgba(192,192,192,0);border-right-color:#ccc;border-width:4px;margin-top:-4px}.A8{color:#666;font:11px Roboto,arial,sans-serif;line-height:1;white-space:normal;display:inline-block}.zra{border:1px solid #666}.Ara{vertical-align:top;display:inline-block}.Bra{padding-left:1px}.Jda{color:#427fed;text-decoration:none}.wfa{vertical-align:top;padding-right:5px;white-space:nowrap}.b6{border-collapse:collapse;display:table}.D8{display:table-row}.gP{border-spacing:0;display:table-cell;font-size:11px;padding:0;text-align:left}.A8.fja{display:inline;overflow:hidden;padding-bottom:.1em;text-overflow:ellipsis;white-space:nowrap}.eja{line-height:10px!important}.OIa{-webkit-border-radius:2px;border-radius:2px;background-color:#fff;border:1px solid #ccc;height:19px;padding:5px 0;position:relative}.OIa:after,.OIa:before{top:100%;left:50%;border:solid transparent;content:" ";height:0;width:0;position:absolute;pointer-events:none}.OIa:after{border-color:rgba(255,255,255,0);border-top-color:#fff;border-width:4px;margin-left:-4px}.OIa:before{border-color:rgba(192,192,192,0);border-top-color:#ccc;border-width:5px;margin-left:-5px}.PIa{font-size:15px;height:35px;margin-bottom:5px;overflow:hidden;text-align:center}.kv8eNc{background-color:transparent;margin:0;padding:0}.D5jmcc{background-color:#f5f5f5;margin:0;padding:5px}sentinel{}
/*# sourceURL=/_/scs/apps-static/_/ss/k=oz.plusone.-1bpmac5f4z1ws.L.W.O/d=0/rs=AGLTcCPhgetYPoykh_YUPmNeXbBJMKHKEw */</style><script>function __sp() {try {var params = {};params['height'] =  60.0 ;params['width'] =  50.0 ;params['title'] = '+1';} catch (e) {return null}return params;}var _F_jsUrl = "\/_\/scs\/apps-static\/_\/js\/k\x3doz.plusone.ja.u8AxOGOTWAA.O\/m\x3dp1b,p1p\/rt\x3dj\/d\x3d1\/t\x3dzcms\/rs\x3dAGLTcCOUWRPea1mYhTdfnAwGz8Ejz24j-A";var gapi=window.gapi=window.gapi||{};(function() { var f=function(a,c){var d=a.match(new RegExp(".*(\\?|#|&)"+c+"=([^&#]+)"))||[];return decodeURIComponent(d[d.length-1]||"")},r=function(a,c){g(l(),a,c)},t=function(a,c){g(!0,a,c)},g=function(a,c,d){function u(b){if(!b.match(/^https?\:\/\//))return"";var a=m.createElement("a");a.href=b;a.pathname=a.search=a.hash="";return a.href.replace(/\/\??\#?$/,"")}function n(){a?(e.s=p+"/"+h+":"+p+":"+e.s,e.g=!1,d&&(e.a=d.slice(1)),b.parent.postMessage("!_"+b.JSON.stringify(e),q||"*")):b.parent.postMessage(b.JSON.stringify(e),
q||"*")}var b=window,m=b.document;if(b.postMessage&&b.JSON&&b.JSON.stringify&&b!=b.parent){var h=b.name,k=b.location.href,q=u(f(k,"parent")),p=f(k,"pfname"),e={s:c,f:h,r:h,t:f(k,"rpctoken"),a:d||[""],g:"ping"};m.all?b.setTimeout(n,0):n()}},v=function(a,c){g(!1,"widget-csi-tick-"+window.name,[a,null,c])},l=function(a){var c=window;return"1"===f(a||c.location.href,"usegapi")};window.gapi.inline=window.gapi.inline||{ping:r,tick:v,shouldUseGapi:l,pingGapi:t}; })();
var sentRenderStart = false; function gapi_sendRenderStart() {if (sentRenderStart) {return}sentRenderStart = true; var sz = __sp(); if (sz) {gapi.inline.ping('_renderstart', ['', sz]);}}document.createElement('content');</script><script>var AF_initDataKeys = []
; var AF_dataServiceRequests = {}; var AF_initDataChunkQueue = []; var AF_initDataCallback; var AF_initDataInitializeCallback; if (AF_initDataInitializeCallback) {AF_initDataInitializeCallback(AF_initDataKeys, AF_initDataChunkQueue, AF_dataServiceRequests);}if (!AF_initDataCallback) {AF_initDataCallback = function(chunk) {AF_initDataChunkQueue.push(chunk);};}</script></head><body class="kv8eNc " marginwidth="0" marginheight="0"><div id="root"><script>var AF_initDataKeys = []
; var AF_dataServiceRequests = {}; var AF_initDataChunkQueue = []; var AF_initDataCallback; var AF_initDataInitializeCallback; if (AF_initDataInitializeCallback) {AF_initDataInitializeCallback(AF_initDataKeys, AF_initDataChunkQueue, AF_dataServiceRequests);}if (!AF_initDataCallback) {AF_initDataCallback = function(chunk) {AF_initDataChunkQueue.push(chunk);};}</script><script type="text/javascript">window.__SSR = {c: 7.0 ,si:1,su:1,e:'sakumaru@gmail.com',dn:'yoko maruyama',a:'bubble',at:'AEIZW7Sip9kjVL1wkW\/2Kub3C7hG\/UUfDIQ9JOWTtV7hpXWLQkaXZV0dBKgo1g\/KH0PwMdRzzIf+AwHuCaPJ36n9ZNuB5wue6L65Zv60JciRl6QCEAkp3H0Hw3U3Ew2qgT5YH3IjbgRZ',ld:[,[3,7,[]
,1,50]
]
,r:'http:\/\/www.welluneednt.com\/entry\/2015\/03\/24\/113000',s:'widget',annd: 2.0 ,bp: {}, id:'http:\/\/www.welluneednt.com\/entry\/2015\/03\/24\/113000'}; document.addEventListener && document.addEventListener('DOMContentLoaded', function () {gapi.inline.tick('wdc', new Date().getTime());}, false);</script><div id="plusone" dir="ltr" class="Jg"><span id="widget_bounds"><div class="b1"><div class="iQa IY"><span id="aggregateCount" class="B8">7</span></div></div><div class="dIa"><div style="height:20px;width:50px;" class="FP HP Gib Ina " id="button" title="+1" role="button" tabindex="0"><div class="Ul"><div style="margin:0px 0px 0 0px;" class="s7"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid meet" width="48px" height="18px" viewBox="-14 -3 48 18" class="u7 uzlpSb"><path d="m13,3-1,0 0,2-2,0 0,1 2,0 0,2 1,0 0-2 2,0 0-1-2,0zm3-1 0,1 1.525,0 0,7 1.475,0 0-9z"></path><path d="m5.286,4.594c.6738-.7371 .4033-1.8668 .0644-2.6978-.3285-.8508-1.2405-1.6446-2.1986-1.2906-1.0081,.2923-1.1732,1.5074-.9326,2.3834 .2018,1.0002 .9514,2.1602 2.1087,2.0389 .3526-.0415 .6989-.1886 .9582-.4338zm-1.07,2.994c-.9808,.1331-2.2146,.2197-2.7558,1.1827-.4634,.903 .1368,2.0029 1.0462,2.3257 1.0948,.423 2.4643,.5029 3.4766-.1714 .7996-.5457 .782-1.7676 .0953-2.3999-.4467-.4296-.9761-.9594-1.6354-.928l-.1604-.0062-.0665-.0029zm2.08-6.813c.9768,.8909 1.1759,2.5831 .202,3.5514-.4793,.4835-1.6627,1.1022-.9829,1.9012 .8682,.745 2.0921,1.3705 2.1724,2.6504 .1322,1.4396-1.152,2.5382-2.4389,2.8743-1.3767,.3557-2.9341,.3999-4.2257-.2652-.9283-.463-1.2487-1.6423-.8776-2.5713 .4529-1.2574 1.8947-1.6648 3.0933-1.8019 .455-.0565 1.0058,.0692 .574-.4763-.3008-.5051 .4956-1.4305-.4106-1.1547-1.3817,.0793-2.7503-1.0582-2.719-2.482-.0055-1.4944 1.3204-2.6506 2.7222-2.8791 1.2321-.1995 2.4871-.0819 3.7303-.1139 .2139,.0229 .6535-.0445 .736,.031-.2764,.2346-.5192,.5532-.8164,.736-.253,0-.506,0-.7591,0z"></path><path d="m5.286,4.594c.6738-.7371 .4033-1.8668 .0644-2.6978-.3285-.8508-1.2405-1.6446-2.1986-1.2906-1.0081,.2923-1.1732,1.5074-.9326,2.3834 .2018,1.0002 .9514,2.1602 2.1087,2.0389 .3526-.0415 .6989-.1886 .9582-.4338zm-1.07,2.994c-.9808,.1331-2.2146,.2197-2.7558,1.1827-.4634,.903 .1368,2.0029 1.0462,2.3257 1.0948,.423 2.4643,.5029 3.4766-.1714 .7996-.5457 .782-1.7676 .0953-2.3999-.4467-.4296-.9761-.9594-1.6354-.928l-.1604-.0062-.0665-.0029zm2.08-6.813c.9768,.8909 1.1759,2.5831 .202,3.5514-.4793,.4835-1.6627,1.1022-.9829,1.9012 .8682,.745 2.0921,1.3705 2.1724,2.6504 .1322,1.4396-1.152,2.5382-2.4389,2.8743-1.3767,.3557-2.9341,.3999-4.2257-.2652-.9283-.463-1.2487-1.6423-.8776-2.5713 .4529-1.2574 1.8947-1.6648 3.0933-1.8019 .455-.0565 1.0058,.0692 .574-.4763-.3008-.5051 .4956-1.4305-.4106-1.1547-1.3817,.0793-2.7503-1.0582-2.719-2.482-.0055-1.4944 1.3204-2.6506 2.7222-2.8791 1.2321-.1995 2.4871-.0819 3.7303-.1139 .2139,.0229 .6535-.0445 .736,.031-.2764,.2346-.5192,.5532-.8164,.736-.253,0-.506,0-.7591,0z"></path></svg><div class="xuwmvb xuwmvb-yaNpec"></div></div></div><div class="GP"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid meet" width="18px" height="18px" viewBox="-2 -2 18 18" class="u7 u7 iva"><g id="Q0N8Vc" fill="#aaaaaa" transform="rotate(0,7,7)"><path class="zVaWQ" d="M5.5,1.5h3v4h4v3h-4v4h-3v-4h-4v-3h4z"></path></g></svg><div class="C9sAve C9sAve-yaNpec"></div></div><div class="q7"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid meet" width="16px" height="18px" viewBox="0 -2.571428571428571 20 23.142857142857142" class="u7 u7 hva"><path fill="#DD4B39" d="m19.8059,16.041-8.74-15.404c-.223-.394-.635-.637-1.078-.637-.443,0-.855,.243-1.078,.637l-8.739,15.404c-.227,.396-.227,.9-.005,1.299 .223,.398 .637,.66 1.283,.66h17.279c.445,0 .859-.262 1.082-.66 .22-.399 .22-.902-.004-1.299zm-9.798-1.041c-.552,0-1-.463-1-1.02 0-.555 .448-1.002 1-1.002 .552,0 1,.447 1,1.002-.001,.557-.448,1.02-1,1.02zm.999-9-.375,5h-1.25l-.374-5h.004l-.004-.02c0-.551 .448-.996 1-.996 .552,0 1,.449 1,1-.001,.007-.004,.016-.004,.016h.003z"></path></svg><div class="tapvDe tapvDe-yaNpec"></div></div></div></div></span></div><script type="text/javascript">window['__P1_XP'] = {"UC":true,"UCP":true,"UH":true};</script></div><script>window.__GOOGLEAPIS = {googleapis: {versions: {pos: 'v1'}}};window['__P1_BASEURL'] = 'https:\/\/apis.google.com\/u\/0\/se\/0\/'; window['__P1_LOCALE'] = 'ja'; var OZ_domReady = 1;
      var _DumpException = function(e) {
        e['errsource'] = e['errsource'] || 'api_widget';
        throw e;
      }
    window['___jsl'] = window['___jsl'] || {}; window['___jsl']['ci'] = [{"client":{"headers":{"response":["Cache-Control","Content-Disposition","Content-Encoding","Content-Language","Content-Length","Content-MD5","Content-Range","Content-Type","Date","ETag","Expires","Last-Modified","Location","Pragma","Range","Server","Transfer-Encoding","WWW-Authenticate","Vary","X-Goog-Safety-Content-Type","X-Goog-Safety-Encoding","X-Goog-Upload-Chunk-Granularity","X-Goog-Upload-Control-URL","X-Goog-Upload-Size-Received","X-Goog-Upload-Status","X-Goog-Upload-URL","X-Goog-Diff-Download-Range","X-Goog-Hash","X-Goog-Updated-Authorization","X-Server-Object-Version","X-Guploader-Customer","X-Guploader-Upload-Result","X-Guploader-Uploadid"],"request":["Accept","Accept-Language","Authorization","Cache-Control","Content-Disposition","Content-Encoding","Content-Language","Content-Length","Content-MD5","Content-Range","Content-Type","Date","GData-Version","Host","If-Match","If-Modified-Since","If-None-Match","If-Unmodified-Since","Origin","OriginToken","Pragma","Range","Slug","Transfer-Encoding","X-ClientDetails","X-GData-Client","X-GData-Key","X-Goog-AuthUser","X-Goog-PageId","X-Goog-Encode-Response-If-Executable","X-Goog-Correlation-Id","X-Goog-Request-Info","X-Goog-Experiments","x-goog-iam-role","x-goog-iam-authorization-token","X-Goog-Spatula","X-Goog-Upload-Command","X-Goog-Upload-Content-Disposition","X-Goog-Upload-Content-Length","X-Goog-Upload-Content-Type","X-Goog-Upload-File-Name","X-Goog-Upload-Offset","X-Goog-Upload-Protocol","X-Goog-Visitor-Id","X-HTTP-Method-Override","X-JavaScript-User-Agent","X-Pan-Versionid","X-Origin","X-Referer","X-Upload-Content-Length","X-Upload-Content-Type","X-Use-HTTP-Status-Code-Override","X-YouTube-VVT","X-YouTube-Page-CL","X-YouTube-Page-Timestamp"]},"rms":"migrated","cors":false},"llang":"ja","plus_layer":"{\"isEnabled\":false}","enableMultilogin":true,"disableRealtimeCallback":false,"drive_share":{"useStandaloneSharingService":true},"isLoggedIn":true,"isPlusUser":true,"iframes":{"additnow":{"methods":["launchurl"],"url":"https://apis.google.com/additnow/additnow.html?usegapi\u003d1"},"person":{"url":":socialhost:/:session_prefix:_/widget/render/person?usegapi\u003d1"},"visibility":{"params":{"url":""},"url":":socialhost:/:session_prefix:_/widget/render/visibility?usegapi\u003d1"},"photocomments":{"url":":socialhost:/:session_prefix:_/widget/render/photocomments?usegapi\u003d1"},"plus_followers":{"params":{"url":""},"url":":socialhost:/_/im/_/widget/render/plus/followers?usegapi\u003d1"},"playreview":{"url":"https://play.google.com/store/ereview?usegapi\u003d1"},"share":{"url":":socialhost:/:session_prefix::im_prefix:_/widget/render/share?usegapi\u003d1"},"signin":{"methods":["onauth"],"params":{"url":""},"url":":socialhost:/:session_prefix:_/widget/render/signin?usegapi\u003d1"},"commentcount":{"url":":socialhost:/:session_prefix:_/widget/render/commentcount?usegapi\u003d1"},"page":{"url":":socialhost:/:session_prefix:_/widget/render/page?usegapi\u003d1"},"plus_circle":{"params":{"url":""},"url":":socialhost:/:session_prefix::se:_/widget/plus/circle?usegapi\u003d1"},"hangout":{"url":"https://talkgadget.google.com/:session_prefix:talkgadget/_/widget"},"youtube":{"methods":["scroll","openwindow"],"params":{"location":["search","hash"]},"url":":socialhost:/:session_prefix:_/widget/render/youtube?usegapi\u003d1"},"evwidget":{"params":{"url":""},"url":":socialhost:/:session_prefix:_/events/widget?usegapi\u003d1"},"card":{"url":":socialhost:/:session_prefix:_/hovercard/card"},"zoomableimage":{"url":"https://ssl.gstatic.com/microscope/embed/"},"reportabuse":{"params":{"url":""},"url":":socialhost:/:session_prefix:_/widget/render/reportabuse?usegapi\u003d1"},"follow":{"url":":socialhost:/:session_prefix:_/widget/render/follow?usegapi\u003d1"},"shortlists":{"url":""},"plus":{"url":":socialhost:/:session_prefix:_/widget/render/badge?usegapi\u003d1"},"post":{"params":{"url":""},"url":":socialhost:/:session_prefix::im_prefix:_/widget/render/post?usegapi\u003d1"},":socialhost:":"https://apis.google.com","configurator":{"url":":socialhost:/:session_prefix:_/plusbuttonconfigurator?usegapi\u003d1"},"community":{"url":":ctx_socialhost:/:session_prefix::im_prefix:_/widget/render/community?usegapi\u003d1"},"rbr_s":{"params":{"url":""},"url":":socialhost:/:session_prefix::se:_/widget/render/recobarsimplescroller"},":gplus_url:":"https://plus.google.com","autocomplete":{"params":{"url":""},"url":":socialhost:/:session_prefix:_/widget/render/autocomplete"},"plus_share":{"params":{"url":""},"url":":socialhost:/:session_prefix::se:_/+1/sharebutton?plusShare\u003dtrue\u0026usegapi\u003d1"},":source:":"3p","blogger":{"methods":["scroll","openwindow"],"params":{"location":["search","hash"]},"url":":socialhost:/:session_prefix:_/widget/render/blogger?usegapi\u003d1"},"rbr_i":{"params":{"url":""},"url":":socialhost:/:session_prefix::se:_/widget/render/recobarinvitation"},"savetowallet":{"url":"https://clients5.google.com/s2w/o/savetowallet"},"appcirclepicker":{"url":":socialhost:/:session_prefix:_/widget/render/appcirclepicker"},"udc_webconsentflow":{"params":{"url":""},"url":"https://www.google.com/settings/webconsent?usegapi\u003d1"},":im_socialhost:":"https://plus.googleapis.com","savetodrive":{"methods":["save"],"url":"https://drive.google.com/savetodrivebutton?usegapi\u003d1"},":signuphost:":"https://plus.google.com","ytshare":{"params":{"url":""},"url":":socialhost:/:session_prefix:_/widget/render/ytshare?usegapi\u003d1"},"plusone":{"params":{"count":"","url":"","size":""},"url":":socialhost:/:session_prefix::se:_/+1/fastbutton?usegapi\u003d1"},"comments":{"methods":["scroll","openwindow"],"params":{"location":["search","hash"]},"url":":socialhost:/:session_prefix:_/widget/render/comments?usegapi\u003d1"},"ytsubscribe":{"url":"https://www.youtube.com/subscribe_embed?usegapi\u003d1"}},"debug":{"host":"https://apis.google.com","forceIm":false,"reportExceptionRate":0.05,"rethrowException":false},"deviceType":"desktop","lexps":[100,81,97,127,79,123,122,61,30,45],"inline":{"css":1},"report":{"apiRate":{"gapi\\.signin\\..*":0.05},"rate":0.001,"host":"https://apis.google.com","apis":["iframes\\..*","gadgets\\..*","gapi\\.appcirclepicker\\..*","gapi\\.auth\\..*","gapi\\.client\\..*"]},"oauth-flow":{"disableOpt":true,"usegapi":false,"authUrl":"https://accounts.google.com/o/oauth2/auth","proxyUrl":"https://accounts.google.com/o/oauth2/postmessageRelay","idpIframeUrl":"https://accounts.google.com/o/oauth2/iframe"},"include_granted_scopes":true,"csi":{"rate":0.01},"googleapis.config":{"auth":{"useFirstPartyAuthV2":true}}}];</script><script>(function(){var gapi=window.gapi=window.gapi||{};gapi._bs=new Date().getTime();(function(){var g=encodeURIComponent,h=window,l=decodeURIComponent,n="shift",p="replace",q="split",t="push",u="test",w="length",x="join";var B=h,F=document,aa=B.location,ba=function(){},ca=/\[native code\]/,G=function(a,b,c){return a[b]=a[b]||c},da=function(a){for(var b=0;b<this[w];b++)if(this[b]===a)return b;return-1},fa=function(a){a=a.sort();for(var b=[],c=void 0,d=0;d<a[w];d++){var e=a[d];e!=c&&b[t](e);c=e}return b},H=function(){var a;if((a=Object.create)&&ca[u](a))a=a(null);else{a={};for(var b in a)a[b]=void 0}return a},I=G(B,"gapi",{});var J;J=G(B,"___jsl",H());G(J,"I",0);G(J,"hel",10);var K=function(){var a=aa.href,b;if(J.dpo)b=J.h;else{b=J.h;var c=RegExp("([#].*&|[#])jsh=([^&#]*)","g"),d=RegExp("([?#].*&|[?#])jsh=([^&#]*)","g");if(a=a&&(c.exec(a)||d.exec(a)))try{b=l(a[2])}catch(e){}}return b},ga=function(a){var b=G(J,"PQ",[]);J.PQ=[];var c=b[w];if(0===c)a();else for(var d=0,e=function(){++d===c&&a()},f=0;f<c;f++)b[f](e)},L=function(a){return G(G(J,"H",H()),a,H())};var M=G(J,"perf",H()),N=G(M,"g",H()),ha=G(M,"i",H());G(M,"r",[]);H();H();var P=function(a,b,c){var d=M.r;"function"===typeof d?d(a,b,c):d[t]([a,b,c])},R=function(a,b,c){b&&0<b[w]&&(b=Q(b),c&&0<c[w]&&(b+="___"+Q(c)),28<b[w]&&(b=b.substr(0,28)+(b[w]-28)),c=b,b=G(ha,"_p",H()),G(b,c,H())[a]=(new Date).getTime(),P(a,"_p",c))},Q=function(a){return a[x]("__")[p](/\./g,"_")[p](/\-/g,"_")[p](/\,/g,"_")};var S=H(),T=[],U=function(a){throw Error("Bad hint"+(a?": "+a:""));};T[t](["jsl",function(a){for(var b in a)if(Object.prototype.hasOwnProperty.call(a,b)){var c=a[b];"object"==typeof c?J[b]=G(J,b,[]).concat(c):G(J,b,c)}if(b=a.u)a=G(J,"us",[]),a[t](b),(b=/^https:(.*)$/.exec(b))&&a[t]("http:"+b[1])}]);var ia=/^(\/[a-zA-Z0-9_\-]+)+$/,ja=/^[a-zA-Z0-9\-_\.,!]+$/,ka=/^gapi\.loaded_[0-9]+$/,la=/^[a-zA-Z0-9,._-]+$/,pa=function(a,b,c,d){var e=a[q](";"),f=e[n](),m=S[f],k=null;m?k=m(e,b,c,d):U("no hint processor for: "+f);k||U("failed to generate load url");b=k;c=b.match(ma);(d=b.match(na))&&1===d[w]&&oa[u](b)&&c&&1===c[w]||U("failed sanity: "+a);return k},ra=function(a,b,c,d){a=qa(a);ka[u](c)||U("invalid_callback");b=V(b);d=d&&d[w]?V(d):null;var e=function(a){return g(a)[p](/%2C/g,",")};return[g(a.g)[p](/%2C/g,
",")[p](/%2F/g,"/"),"/k=",e(a.version),"/m=",e(b),d?"/exm="+e(d):"","/rt=j/sv=1/d=1/ed=1",a.a?"/am="+e(a.a):"",a.c?"/rs="+e(a.c):"",a.f?"/t="+e(a.f):"","/cb=",e(c)][x]("")},qa=function(a){"/"!==a.charAt(0)&&U("relative path");for(var b=a.substring(1)[q]("/"),c=[];b[w];){a=b[n]();if(!a[w]||0==a.indexOf("."))U("empty/relative directory");else if(0<a.indexOf("=")){b.unshift(a);break}c[t](a)}a={};for(var d=0,e=b[w];d<e;++d){var f=b[d][q]("="),m=l(f[0]),k=l(f[1]);2==f[w]&&m&&k&&(a[m]=a[m]||k)}b="/"+c[x]("/");
ia[u](b)||U("invalid_prefix");c=W(a,"k",!0);d=W(a,"am");e=W(a,"rs");a=W(a,"t");return{g:b,version:c,a:d,c:e,f:a}},V=function(a){for(var b=[],c=0,d=a[w];c<d;++c){var e=a[c][p](/\./g,"_")[p](/-/g,"_");la[u](e)&&b[t](e)}return b[x](",")},W=function(a,b,c){a=a[b];!a&&c&&U("missing: "+b);if(a){if(ja[u](a))return a;U("invalid: "+b)}return null},oa=/^https?:\/\/[a-z0-9_.-]+\.google\.com(:\d+)?\/[a-zA-Z0-9_.,!=\-\/]+$/,na=/\/cb=/g,ma=/\/\//g,sa=/^\/[a-z_]+\//,ta=function(){var a=K();if(!a)throw Error("Bad hint");
return a};S.m=function(a,b,c,d){(a=a[0])||U("missing_hint");return"https://apis.google.com"+ra(a,b,c,d)};var X=decodeURI("%73cript"),Y=function(a,b){for(var c=[],d=0;d<a[w];++d){var e=a[d];e&&0>da.call(b,e)&&c[t](e)}return c},ua=function(a){"loading"!=F.readyState?Z(a):F.write("<"+X+' src="'+encodeURI(a)+'"></'+X+">")},Z=function(a){va(a)},va=function(a){var b=F.createElement(X);b.setAttribute("src",a);b.async="true";(a=F.getElementsByTagName(X)[0])?a.parentNode.insertBefore(b,a):(F.head||F.body||F.documentElement).appendChild(b)},wa=function(a,b){var c=b&&b._c;if(c)for(var d=0;d<T[w];d++){var e=T[d][0],
f=T[d][1];f&&Object.prototype.hasOwnProperty.call(c,e)&&f(c[e],a,b)}},ya=function(a,b,c){xa(function(){var c;c=b===K()?G(I,"_",H()):H();c=G(L(b),"_",c);a(c)},c)},Aa=function(a,b){var c=b||{};"function"==typeof b&&(c={},c.callback=b);wa(a,c);var d=a?a[q](":"):[],e=c.h||ta(),f=G(J,"ah",H());if(f["::"]&&d[w]){for(var m=[],k=null;k=d[n]();){var r=k[q]("."),r=f[k]||f[r[1]&&"ns:"+r[0]||""]||e,C=m[w]&&m[m[w]-1]||null,D=C;C&&C.hint==r||(D={hint:r,b:[]},m[t](D));D.b[t](k)}var E=m[w];if(1<E){var A=c.callback;
A&&(c.callback=function(){0==--E&&A()})}for(;d=m[n]();)za(d.b,c,d.hint)}else za(d||[],c,e)},za=function(a,b,c){a=fa(a)||[];var d=b.callback,e=b.config,f=b.timeout,m=b.ontimeout,k=b.onerror,r=void 0;"function"==typeof k&&(r=k);var C=null,D=!1;if(f&&!m||!f&&m)throw"Timeout requires both the timeout parameter and ontimeout parameter to be set";var k=G(L(c),"r",[]).sort(),E=G(L(c),"L",[]).sort(),A=[].concat(k),ea=function(a,b){if(D)return 0;B.clearTimeout(C);E[t].apply(E,v);var d=((I||{}).config||{}).update;
d?d(e):e&&G(J,"cu",[])[t](e);if(b){R("me0",a,A);try{ya(b,c,r)}finally{R("me1",a,A)}}return 1};0<f&&(C=B.setTimeout(function(){D=!0;m()},f));var v=Y(a,E);if(v[w]){var v=Y(a,k),y=G(J,"CP",[]),z=y[w];y[z]=function(a){if(!a)return 0;R("ml1",v,A);var b=function(b){y[z]=null;ea(v,a)&&ga(function(){d&&d();b()})},c=function(){var a=y[z+1];a&&a()};0<z&&y[z-1]?y[z]=function(){b(c)}:b(c)};if(v[w]){var O="loaded_"+J.I++;I[O]=function(a){y[z](a);I[O]=null};a=pa(c,v,"gapi."+O,k);k[t].apply(k,v);R("ml0",v,A);b.sync||
B.___gapisync?ua(a):Z(a,b,O)}else y[z](ba)}else ea(v)&&d&&d()};var xa=function(a,b){if(J.hee&&0<J.hel)try{return a()}catch(c){b&&b(c),J.hel--,Aa("debug_error",function(){try{h.___jsl.hefn(c)}catch(a){throw c;}})}else try{return a()}catch(d){throw b&&b(d),d;}};I.load=function(a,b){return xa(function(){return Aa(a,b)})};var Ba=/^(\/\* JS \*\/ ){0,1}gapi.loaded_\d+\(/,Ca=function(a,b,c,d){(d=d.before_eval_cb)&&d();B.execScript?B.execScript(b,"JavaScript"):c?a.eval(b):(a=a.document,c=a.createElement("script"),c.defer=!1,c.appendChild(a.createTextNode(b)),a.body.appendChild(c),a.body.removeChild(c))},Da=function(a,b,c,d){var e=B.XMLHttpRequest;a=a[p](/^https?:\/\/[^\/]+\//,"/");if(!sa[u](a))throw"Bad URL "+a;var f=new e;f.open("GET",a,!0);f.onreadystatechange=function(){if(4===f.readyState)if(200===f.status){var e=
f.responseText,k=b.src_cb;k&&k();var r=!1;h.GAPI_EVAL&&(e+="\n//@ sourceURL="+encodeURI(a),r=!0);k=function(){if(Ba[u](e))Ca(B,e,r,b);else I[c](function(){Ca(this,e,r,b)})};d?d(k):k()}else throw"Error requesting "+a+": "+f.statusText+"\nCurrent location: "+location.href;};f.send(null)};var Ea="mousemove mouseover mousedown click touchstart keydown focus resize".split(" "),Fa=["onmouseover","onmousedown","onkeydown","onfocusin"],Ga=function(){if(G(J,"LI",!1))return!0;J.LI=!0;return!1},Ha=0,Ia=function(){J.LE=!0;for(var a=J.LQ,b=0;a&&b<a[w];b++)(0,a[b])();J.LQ=null},Ja=function(){function a(a){for(var d=0;d<Ea[w];d++)B[a+"EventListener"](Ea[d],b,!0)}if(!Ga()){var b=function(b){"resize"==b.type&&2>++Ha||(a("remove"),Ia())};a("add")}},Ka=function(){function a(a){for(var d=0;d<Fa[w];d++)F[a+
"Event"](Fa[d],b)}if(!Ga()){var b=function(b){if(!("resize"==b.type&&2>++Ha)){a("detach");var d=F.createEventObject(b);Ia();d.srcElement.fireEvent("on"+d.type,d);b.cancelBubble=!0;b.stopPropagation&&b.stopPropagation()}};a("attach")}},Z=function(a,b,c){var d=!0;B.XMLHttpRequest&&!/\/widget\//[u](a)&&B.JSON?B.addEventListener?Ja():F.attachEvent&&F.createEventObject?Ka():d=!1:d=!1;d?Da(a,b,c,function(a){J.LE?a():G(J,"LQ",[])[t](a)}):va(a)};N.bs0=h.gapi._bs||(new Date).getTime();P("bs0");N.bs1=(new Date).getTime();P("bs1");delete h.gapi._bs;})();
gapi.load("",{callback:window["gapi_onload"],_c:{"jsl":{"ci":{"llang":"ja","client":{"headers":{"response":["Cache-Control","Content-Disposition","Content-Encoding","Content-Language","Content-Length","Content-MD5","Content-Range","Content-Type","Date","ETag","Expires","Last-Modified","Location","Pragma","Range","Server","Transfer-Encoding","WWW-Authenticate","Vary","X-Goog-Safety-Content-Type","X-Goog-Safety-Encoding","X-Goog-Upload-Chunk-Granularity","X-Goog-Upload-Control-URL","X-Goog-Upload-Size-Received","X-Goog-Upload-Status","X-Goog-Upload-URL","X-Goog-Diff-Download-Range","X-Goog-Hash","X-Goog-Updated-Authorization","X-Server-Object-Version","X-Guploader-Customer","X-Guploader-Upload-Result","X-Guploader-Uploadid"],"request":["Accept","Accept-Language","Authorization","Cache-Control","Content-Disposition","Content-Encoding","Content-Language","Content-Length","Content-MD5","Content-Range","Content-Type","Date","GData-Version","Host","If-Match","If-Modified-Since","If-None-Match","If-Unmodified-Since","Origin","OriginToken","Pragma","Range","Slug","Transfer-Encoding","X-ClientDetails","X-GData-Client","X-GData-Key","X-Goog-AuthUser","X-Goog-PageId","X-Goog-Encode-Response-If-Executable","X-Goog-Correlation-Id","X-Goog-Request-Info","X-Goog-Experiments","x-goog-iam-role","x-goog-iam-authorization-token","X-Goog-Spatula","X-Goog-Upload-Command","X-Goog-Upload-Content-Disposition","X-Goog-Upload-Content-Length","X-Goog-Upload-Content-Type","X-Goog-Upload-File-Name","X-Goog-Upload-Offset","X-Goog-Upload-Protocol","X-Goog-Visitor-Id","X-HTTP-Method-Override","X-JavaScript-User-Agent","X-Pan-Versionid","X-Origin","X-Referer","X-Upload-Content-Length","X-Upload-Content-Type","X-Use-HTTP-Status-Code-Override","X-YouTube-VVT","X-YouTube-Page-CL","X-YouTube-Page-Timestamp"]},"rms":"migrated","cors":false},"plus_layer":{"isEnabled":false},"enableMultilogin":true,"drive_share":{"useStandaloneSharingService":true},"disableRealtimeCallback":false,"isLoggedIn":true,"iframes":{"additnow":{"methods":["launchurl"],"url":"https://apis.google.com/additnow/additnow.html?usegapi\u003d1"},"person":{"url":":socialhost:/:session_prefix:_/widget/render/person?usegapi\u003d1"},"visibility":{"params":{"url":""},"url":":socialhost:/:session_prefix:_/widget/render/visibility?usegapi\u003d1"},"photocomments":{"url":":socialhost:/:session_prefix:_/widget/render/photocomments?usegapi\u003d1"},"plus_followers":{"params":{"url":""},"url":":socialhost:/_/im/_/widget/render/plus/followers?usegapi\u003d1"},"playreview":{"url":"https://play.google.com/store/ereview?usegapi\u003d1"},"signin":{"methods":["onauth"],"params":{"url":""},"url":":socialhost:/:session_prefix:_/widget/render/signin?usegapi\u003d1"},"share":{"url":":socialhost:/:session_prefix::im_prefix:_/widget/render/share?usegapi\u003d1"},"commentcount":{"url":":socialhost:/:session_prefix:_/widget/render/commentcount?usegapi\u003d1"},"page":{"url":":socialhost:/:session_prefix:_/widget/render/page?usegapi\u003d1"},"hangout":{"url":"https://talkgadget.google.com/:session_prefix:talkgadget/_/widget"},"plus_circle":{"params":{"url":""},"url":":socialhost:/:session_prefix::se:_/widget/plus/circle?usegapi\u003d1"},"youtube":{"methods":["scroll","openwindow"],"params":{"location":["search","hash"]},"url":":socialhost:/:session_prefix:_/widget/render/youtube?usegapi\u003d1"},"zoomableimage":{"url":"https://ssl.gstatic.com/microscope/embed/"},"card":{"url":":socialhost:/:session_prefix:_/hovercard/card"},"evwidget":{"params":{"url":""},"url":":socialhost:/:session_prefix:_/events/widget?usegapi\u003d1"},"reportabuse":{"params":{"url":""},"url":":socialhost:/:session_prefix:_/widget/render/reportabuse?usegapi\u003d1"},"follow":{"url":":socialhost:/:session_prefix:_/widget/render/follow?usegapi\u003d1"},"shortlists":{"url":""},"plus":{"url":":socialhost:/:session_prefix:_/widget/render/badge?usegapi\u003d1"},"configurator":{"url":":socialhost:/:session_prefix:_/plusbuttonconfigurator?usegapi\u003d1"},":socialhost:":"https://apis.google.com","post":{"params":{"url":""},"url":":socialhost:/:session_prefix::im_prefix:_/widget/render/post?usegapi\u003d1"},"community":{"url":":ctx_socialhost:/:session_prefix::im_prefix:_/widget/render/community?usegapi\u003d1"},":gplus_url:":"https://plus.google.com","rbr_s":{"params":{"url":""},"url":":socialhost:/:session_prefix::se:_/widget/render/recobarsimplescroller"},"autocomplete":{"params":{"url":""},"url":":socialhost:/:session_prefix:_/widget/render/autocomplete"},"plus_share":{"params":{"url":""},"url":":socialhost:/:session_prefix::se:_/+1/sharebutton?plusShare\u003dtrue\u0026usegapi\u003d1"},":source:":"3p","blogger":{"methods":["scroll","openwindow"],"params":{"location":["search","hash"]},"url":":socialhost:/:session_prefix:_/widget/render/blogger?usegapi\u003d1"},"savetowallet":{"url":"https://clients5.google.com/s2w/o/savetowallet"},"rbr_i":{"params":{"url":""},"url":":socialhost:/:session_prefix::se:_/widget/render/recobarinvitation"},"appcirclepicker":{"url":":socialhost:/:session_prefix:_/widget/render/appcirclepicker"},"udc_webconsentflow":{"params":{"url":""},"url":"https://www.google.com/settings/webconsent?usegapi\u003d1"},"savetodrive":{"methods":["save"],"url":"https://drive.google.com/savetodrivebutton?usegapi\u003d1"},":im_socialhost:":"https://plus.googleapis.com","ytshare":{"params":{"url":""},"url":":socialhost:/:session_prefix:_/widget/render/ytshare?usegapi\u003d1"},":signuphost:":"https://plus.google.com","plusone":{"params":{"count":"","size":"","url":""},"url":":socialhost:/:session_prefix::se:_/+1/fastbutton?usegapi\u003d1"},"comments":{"methods":["scroll","openwindow"],"params":{"location":["search","hash"]},"url":":socialhost:/:session_prefix:_/widget/render/comments?usegapi\u003d1"},"ytsubscribe":{"url":"https://www.youtube.com/subscribe_embed?usegapi\u003d1"}},"isPlusUser":true,"debug":{"host":"https://apis.google.com","forceIm":false,"reportExceptionRate":0.05,"rethrowException":false},"deviceType":"desktop","inline":{"css":1},"lexps":[100,81,97,127,79,123,122,61,30,45],"include_granted_scopes":true,"oauth-flow":{"usegapi":false,"disableOpt":true,"authUrl":"https://accounts.google.com/o/oauth2/auth","proxyUrl":"https://accounts.google.com/o/oauth2/postmessageRelay","idpIframeUrl":"https://accounts.google.com/o/oauth2/iframe"},"report":{"apiRate":{"gapi\\.signin\\..*":0.05},"host":"https://apis.google.com","rate":0.001,"apis":["iframes\\..*","gadgets\\..*","gapi\\.appcirclepicker\\..*","gapi\\.auth\\..*","gapi\\.client\\..*"]},"csi":{"rate":0.01},"googleapis.config":{"auth":{"useFirstPartyAuthV2":true}}},"h":"m;/_/scs/apps-static/_/js/k\u003doz.gapi.ja.GaAqtE9vSt8.O/m\u003d__features__/am\u003dIQ/rt\u003dj/d\u003d1/t\u003dzcms/rs\u003dAGLTcCObdvcYYb_30dT3f0o1AM2Q88jrEw","u":"https://apis.google.com/u/0/se/0/_/+1/fastbutton?usegapi\u003d1\u0026size\u003dtall\u0026origin\u003dhttp://www.welluneednt.com\u0026url\u003dhttp://www.welluneednt.com/entry/2015/03/24/113000\u0026gsrc\u003d3p\u0026ic\u003d1\u0026jsh\u003dm;/_/scs/apps-static/_/js/k%3Doz.gapi.ja.GaAqtE9vSt8.O/m%3D__features__/am%3DIQ/rt%3Dj/d%3D1/t%3Dzcms/rs%3DAGLTcCObdvcYYb_30dT3f0o1AM2Q88jrEw","hee":true,"fp":"c55510e6c6d81365278400d0ed0943a52fcf4b02","dpo":false},"fp":"c55510e6c6d81365278400d0ed0943a52fcf4b02","annotation":["interactivepost","recobar","autocomplete","profile","signin2"],"bimodal":["signin","share"]}});var s = 'GAPI_INTERACTIVE'; window[s] = 'loading'; var c = 0; function cb() {if (++c == 2) {window[s] = 'interactive'; gapi.inline.ping('widget-interactive-' + window.name);}}gapi.load('googleapis.client,iframes-styles-bubble-internal,gapi.iframes.style.common,gapi.iframes.iframer', {'callback': function() {cb();var sw = window['__sw']; if (sw) {sw();}var sz = __sp(); if (sz) {iframes.ready(sz, {'canAutoClose': function() {var f = window['__CAN_AUTOCLOSE_BUBBLE']; return f ? f() : true;}, 'showSharebox': function() {var f = window['__SHOW_SHAREBOX']; return f ? f() : false;}});}}, 'src_cb': cb, 'before_eval_cb': function() {gapi.inline.tick('wje0', new Date().getTime());}});gapi.load('p1b,p1p', {'h': 'm;\/_\/scs\/apps-static\/_\/js\/k\x3doz.plusone.ja.u8AxOGOTWAA.O\/m\x3dp1b,p1p\/rt\x3dj\/d\x3d1\/t\x3dzcms\/rs\x3dAGLTcCOUWRPea1mYhTdfnAwGz8Ejz24j-A','callback': function() {cb();gapi.inline.tick('wje1', new Date().getTime());}, 'src_cb': cb});})(); gapi_sendRenderStart();</script></body></html>¡tÔ	uvwx_Vhttps://fonts.gstatic.com/s/roboto/v15/pJeswbKZO4XwVR0035gpgvesZW2xOQ-xsNqO47m55DA.ttfONbplist00Ô}~X$versionX$objectsY$archiverT$top † ¯)#)*0123WXYZ[\]^_`abcdefghijklmnopqrstwxU$nullİ	
 !"R$6S$10R$2R$7R$3S$11R$8V$classR$4R$9R$0R$5R$1€	€€€'€(€€€Ó$%&'(WNS.base[NS.relative€ €€_Vhttps://fonts.gstatic.com/s/roboto/v15/pJeswbKZO4XwVR0035gpgvesZW2xOQ-xsNqO47m55DA.ttfÒ+,-.Z$classnameX$classesUNSURL¢-/XNSObject#Aºó âhª2 ÈÓ456FVWNS.keysZNS.objects¯789:;<=>?@ABCDE€	€
€€€€€€€€€€€€€¯HIJKLMNHPQRSTU€€€€€€€€€€ €!€"€#€$€%€&\Content-Type_Access-Control-Allow-Origin_alternate-protocol_Content-EncodingVServer_x-xss-protectionWExpiresSAge_timing-allow-origin]Cache-ControlTDate^Content-Length_x-content-type-optionsTVary]Last-ModifiedXfont/ttfQ*\443:quic,p=1TgzipTsffe]1; mode=block_Thu, 28 Apr 2016 21:11:23 GMTU98407_public, max-age=31536000_Wed, 29 Apr 2015 21:11:23 GMTU64177Wnosniff_Accept-Encoding_Wed, 14 Jan 2015 22:47:35 GMTÒ+,uv\NSDictionary¢u/ ˜èÒ+,yz_NSHTTPURLResponse£{|/_NSHTTPURLResponse]NSURLResponse_NSKeyedArchiverÑ€_WebResourceResponse€    # - 2 7 c i „ ‡ ‹  ‘ ” ˜ › ¢ ¥ ¨ « ® ± ³ µ · ¹ » ¼ ¾ À Â Ä Æ È Ê Ñ Ù å ç é ëDIT]cfoxz|ƒ‹–¨ª¬®°²´¶¸º¼¾ÀÂÄÆØÚÜŞàâäæèêìîğòôöø#8KRemq‡•š©ÂÇÕŞàíò÷%+Fflt†¦«¸»ÀÅÙİñÿ*                           ,O ˜è     €  pGDEF       ü  DGPOS      @  R$GSUB      Ud  èOS/2      mL   `cmap      m¬  Ègasp      €t   glyf      €€  òøhdmx     sx  ìhead     xd   6hhea     xœ   $hmtx     xÀ  ˆloca     ŒH  	Æmaxp     –    name     –0  ˜post     ˜È                ^ % >  E ^  y y     ƒ ƒ  † †  ‰ ‰  ‹ •  — œ  £ £  § ¬  ° °  ¹ º  ¾ ¾  À À  Â Â  Æ Æ  Ê Ê  Ì Í  Ï Ğ  Ò Ò  Ù İ  à à  ä ä  æ è  ê ú  ü ü  ş      ! #$ 89 >@ EE MM OO SS UW YY ¢¢ £© ºÓ ââ ää êê óó õõ üş     	    >C G¯ ²X [j qq sw z „ †Š Œ§ «« ­´ ¶¸ ½¿ ÁÍ ÏÙ Üì ïH KK MM OP [[ bd ff jj lm oo w† ‡‡ ˆ° ²Ê ÌĞ ÒÕ ×Ù ÛÜ Şá     
 \ š DFLT cyrl (grek 6latn D     ÿÿ         ÿÿ        ÿÿ        ÿÿ    cpsp 2cpsp 2cpsp 2cpsp 2kern 8kern 8kern 8kern 8           Ø       
  $ H  Ş  % & ' ( ) * + , - . / 0 1 2 3 4 5 6 7 8 9 : ; < = > e g ’ ° ± ² ³ ´ µ ¶ · ¸ ¹ Ñ Ò Ó Ô Õ Ö × Ø Ù Ú Û Ü İ Ş ß à á â ã ä å æ ç è,028:<>?EF…ŠGHJLMNOPQRSTUVWXYZ[\]^_`abcdefƒ…‡‰‹‘“•—™›Ÿ¡£¥§©«­¯²´¶¸º¼¾ÀÂÅÇÉËÍÏÑÓÕÙÛİßáãåçéëíïñòôöSTUVWXY[\]^_`abdefghijz{|}~€‚ƒ„…†‡ˆ‰Š‹Œ»½¿ÔÚàIKOWY^j     Îò5b T   ¥
Ò
Ò‚p
€
şš ˆîîF 
"îîš
Š’fF
Ø
¬R
^â˜¶¶¶ 
PL°L¦æpšp¬²¼ÂÈLÎØ¶ş*0FLR„ŠÀÀ¾îàR0îî&îîFÀÀx‚Œ¦H¸°Òè	2	L	h	h	b	h	h	hp 
ØLæH  H
Ò
Ò
Ò
Ò
Ò	Š	°	º	Ä	â	ô


şššššfppppppp
ş    îîîîîšššššFFFFâââââââ¶     LLpâpâpâ
ş
ş
ş
şš     î¶îîîîîF 
"
"
"
"î¶î¶î¶¶š š š 
P
P
PfffFFFFFF
¬L
^
^
^p îîšp
€ 
^îî îîš
ŠfRî¶ L  æîîF  &p
€æ îîš
Š
şfRâ L°HL
¬
¬
¬L
Ò
Ò
Òî¶pâ 
ØL
şLîR°îpâpâ R°š  &L&L&LR°pâpâpâpâpâpâpâpâpâpâpâpâ        îîš š š š š š š  FFLLL îfR°æHR°¶Àæ îîš  ‡           % *  , 5 	 8 >  E F  I J  L L  Q T  V V # Z Z $ \ ] % Š Š ' œ œ ( ° ´ ) ¶ ¸ . º º 1 ¼ ½ 2 ¿ À 4 Â Ä 6 Æ Ë 9 Ñ Ñ ? Ó İ @ ß ß K á ã L å ç O é í R ğ ğ W õ ÷ X ú û [ ı ÿ ] `		 b c d+- g00 j22 kII llm moq oºº r½½ sÄÅ tÈÈ vÊË wÍÍ y(( z*+ {GH }JJ Lm €or ¢w| ¦‰ ¬‹‹ µ ¶ ·‘‘ ¸“œ ¹¥§ Ã©© Æ«« Ç­­ È¯¯ É²² Ê´´ Ë¶¶ Ì¸¸ Íºº Î¼¼ Ï¾Ê ĞÌÌ İÎÎ ŞĞĞ ßÛÛ àİİ áßß âáá ããã äåå åçç æéé çëë èíí éïò êôô îöö ïSX ğ[j ömmqqssww	z{
}†ˆŠŒ‘“”–™!Ÿ %¢¢'¤¤(¦©)¬±-³³3·¸4½½6¿È7ËÌAÎÑCØÙGİİIßåJêëQïS|(}00‹33Œ55AFII”KK•MM–OP—UX™[[]^`` dd¡ff¢jj£ªª¤  ÿ   VÿæºÿÀ º     A  a   õÿõ  Ã   ·ÿÂ Ã   Ãÿâ  Æÿò  Ã   Éÿí õÿÀ 	 ¾ÿæ Áÿë Âÿé Äÿğ Åÿç Éÿã ËÿÎ ÌÿÔ ÍÿÛ  Áÿì Ã  Åÿê ÉÿÄ Ëÿç  Jÿé Áÿî Ã  Åÿì Éÿ   Ã   Éÿê ìÿî õÿ«3ÿìXÿì  õÿÕ  É   J  Å  É ºÿ¿¼ÿîÀÿìÈÿíÊÿìÌÿõÍ Ï Ò   õÿØ  õÿª  åÿÔ õÿÉÿåÿã3ÿÄ<ÿáMÿÔNÿõOÿçWÿÒXÿÉ  åÿÉ õÿßÿíÿë3ÿß?ÿéNÿõXÿà  åÿæ õÿĞ3ÿÎ<ÿèMÿçOÿíWÿæXÿĞ  Ø  åÿà ì <ÿá=ÿà@ÿáEÿéMÿßOÿŞWÿßYÿò  ÿò åÿñMÿòOÿòWÿò  Ø  åÿæ æÿô ì  õÿç3ÿç<ÿå=ÿèMÿæOÿæWÿæXÿç  ØÿâWÿä  Øÿá ìÿä  ìÿî õÿîÿôÿñ3ÿïXÿï  õÿôÿõ3ÿõXÿõ  ì  õÿí ûÿâ3ÿí=ÿíXÿí ÿë¼ÿëÀÿéÈÿëÊÿë  J  Æÿ« ÇÿÀ ËÿÕ ìÿªÿâ N P ºÿ¿¼ÿîÀÿìÈÿíÊÿìÌÿõÍ Ï Ò   ì  õÿğ  3ÿğ=ÿæXÿğ  ì : õÿã3ÿâ=ÿãXÿã  ìÿï  õÿºÿÏÿÛ3ÿP=ÿNÿğPÿòXÿL 	¼ÿòÀÿòÈÿòÊÿòÍÿÀÎÿìÏÿÇĞÿØÒÿ¿ ÏÿîĞÿõ ÈÿëÊÿë ÈÿïÊÿğÍÿ»ÎÿìÏÿ·ĞÿÕÒÿ´ ÍÿîÏÿñÑÿìÒÿê ÍÿéÏÿëĞÿñÒÿå ÍÿòÏÿñĞÿõÒÿî Ï Ò   [ÿ¤º ¼ÿóÀÿñÈÿòÊÿñÍÿ;ÎÿÚÏÿTĞÿ‘Òÿ?  J  X 2 [   [ÿå ·ÿË Ìÿäº ¼ÿíÀÿëÈÿìÊÿì  Wÿæ  X  ÿŸ ÃÿŞ Æÿå Øÿ¨ ìÿÊJÿãºÿÆ 	   A  Vÿë a ºÿË¼ÿéÀÿçÈÿçÊÿç  [  	   A  Vÿâ a ºÿ´¼ÿÙÀÿÙÈÿÙÊÿÙ  ÿæ Aÿô aÿï@ÿí  Éÿê ìÿî õÿ°3ÿìXÿì  Øÿ® å  êÿà ìÿ­ îÿÖ üÿß ÿÒÿàÿÎ+ÿİ-ÿâ1ÿà7ÿà=ÿé@ÿÚJÿ½TÿßW   #ÿÃ Xÿï [ÿß ™ÿî ·ÿå ¸ÿÑ Ã  ÉÿÈ Ø  åÿÅ õÿÊ3ÿŸ<ÿQ=ÿ{?ÿÊ@ÿİEÿòMÿuOÿÊWÿOXÿŒÀÿõÈÿõÍÿÇÎÿñÏÿÍĞÿİÒÿÄ  õÿğÿñÿó3ÿñNÿóPÿéXÿÓ  Jÿî [ÿêÏÿğĞÿíÒÿğ  õÿõmÿ° 	 Éÿê ìÿ¸ õÿêÿğÿñ3ÿëNÿõXÿìmÿ° ºÿë  J  Å  Æÿê É  ìÿÈÿñ 8 ÿØ Vÿµ [ÿÇ mş¸ |ÿ( ÿM †ÿ ‰ÿ¡ ·ÿ® ¾ÿ~ Âÿg Åÿ‡ Æÿe Éÿ Ëÿj Ìÿs Íÿ^ Øÿ¥ å  éÿä êÿ  ìÿt îÿ€ õÿ² üÿ} şÿ€ ÿyÿ}ÿÿ˜ÿÚ+ÿ-ÿ˜1ÿ}3ÿ³7ÿ =ÿ|?ÿš@ÿlEÿæJÿkNÿ’Pÿ­Tÿ{W Xÿ‘Yÿòºÿ¯¼ÿ¹Àÿ¹Èÿ¹Êÿ¹Ìÿ¼ÍÿñĞÿñÑÿí  ìÿÉÿî  ·ÿÔ Áÿí Ã  Éÿà Ëÿç Ìÿå Íÿî Ø  éÿé õÿ×3ÿ×=ÿÓ?ÿÖ@ÿÅEÿçM O XÿÖYÿò¼ÿéÀÿçÈÿçÊÿé ÿñ  õÿÀmÿ° 	 åÿÃ õÿÏ3ÿÎ<ÿç?ÿßMÿÑOÿìWÿ XÿÑ . Vÿm [ÿŒ mı¿ |ş} ş¼ †ÿ+ ‰ÿK ·ÿa ¾ÿ Âşè Åÿ Æşå ÉÿF Ëşí Ìşı ÍşÙ ØÿR å  éÿ½ êÿI ìşş îÿ õÿh üÿ şÿ ÿÿÿÿ<ÿ¬+ÿ-ÿ<1ÿ3ÿj7ÿI=ÿ?ÿ?@şñEÿÀJşïNÿ1Pÿ_Tÿ
W Xÿ0YÿÕ  [ÿÁ ·ÿÅ Éÿ´ éÿ× õÿ¹ÿ²ÿÒÿÈ3ÿ =ÿÅEÿäNÿÌPÿÌXÿËYÿï¼ÿèÀÿæÈÿçÊÿç  Ø  ì <ÿä=ÿå?ÿäMÿãOÿâWÿä " 
ÿâ   ÿÏ A  Jÿê VÿØ Xÿê a  mÿ® |ÿÍ ÿ  †ÿÁ ‰ÿÀ ·ÿĞ »ÿê ¾ÿÆ ¿  Áÿé ÂÿÖ Åÿè Æÿº Éÿé ËÿË ÌÿÚ ÍÿÇuÿÓºÿ«¼ÿÍÀÿËÈÿËÊÿËÍÿóĞÿóÑÿï 	 ÿß ´ÿó ¶ÿğ Ãÿê Øÿß åÿàWÿàºÿíÑÿõ       * T ªÜZÄ     * 5 6 ? J 
 8ÿØ ÑÿØ ÕÿØ2ÿØ:ÿØÛÿØİÿØßÿØÿØMÿØ  :  ;  =  f í ï ñ X g j   ¢ ¤ ¦ · ¿ A C E j  Ì ÿ ÿ %ÿV .şø 8  EÿŞ Gÿë Hÿë Iÿë Kÿë Sÿë Uÿë Yÿê Zÿè ]ÿè “ÿë ˜ÿë šÿê ±ÿV ³ÿV ºÿë ¼ÿè Çÿë Èÿë Êÿê Ñ  Õ  öÿëÿëÿVÿëÿèÿë!ÿë2 9ÿë: KÿëLÿëVÿënÿrÿvÿwÿLÿVMÿVNÿVOÿVPÿVQÿVRÿVgÿŞhÿŞiÿŞjÿŞkÿŞlÿŞmÿŞnÿëoÿëpÿëqÿërÿëxÿëyÿëzÿë{ÿë|ÿë}ÿê~ÿêÿê€ÿêÿè‚ÿèƒÿV„ÿŞ…ÿV†ÿŞ‡ÿVˆÿŞŠÿëŒÿëÿëÿë’ÿë”ÿë–ÿë˜ÿëšÿëœÿëÿë ÿë¢ÿë¤ÿë²şøÆÿëÈÿëÊÿëÛ İ ß âÿêäÿêæÿêèÿêêÿêìÿêğÿèSÿV[ÿVkÿëoÿêqÿësÿèvÿêwÿëxÿêşøƒÿV ÿŞ‘ÿë“ÿë•ÿë–ÿè˜ÿëŸÿè§ÿè¯ÿV°ÿŞ³ÿë¸ÿè¹ÿë¾ÿëÀÿèÅÿVÆÿŞÇÿVÈÿŞÌÿëÎÿëÏÿëÙÿëÛÿëİÿëáÿèãÿèåÿèìÿëïÿVğÿŞñÿVòÿŞóÿVôÿŞõÿVöÿŞ÷ÿVøÿŞùÿVúÿŞûÿVüÿŞıÿVşÿŞÿÿV ÿŞÿVÿŞÿVÿŞÿVÿŞÿë
ÿëÿëÿëÿëÿëÿëÿëÿëÿë ÿë"ÿë$ÿë&ÿë(ÿë*ÿë,ÿë.ÿë0ÿë2ÿë4ÿê6ÿê8ÿê:ÿê<ÿê>ÿê@ÿêBÿèDÿèFÿèM   8ÿÕ :ÿä ;ÿì =ÿİ ÑÿÕ ÕÿÕÿä2ÿÕ:ÿÕfÿİÛÿÕİÿÕßÿÕíÿìïÿİñÿİXÿİgÿİjÿİÿÕ ÿì¢ÿì¤ÿì¦ÿİ·ÿä¿ÿİAÿİCÿİEÿİMÿÕjÿİ  8ÿ° :ÿí =ÿĞ Ñÿ° Õÿ°ÿí2ÿ°:ÿ°fÿĞÛÿ°İÿ°ßÿ°ïÿĞñÿĞXÿĞgÿĞjÿĞÿ°¦ÿĞ·ÿí¿ÿĞAÿĞCÿĞEÿĞMÿ°jÿĞ  .ÿî 9ÿîbÿîcÿîdÿîeÿî²ÿîáÿîãÿîåÿîçÿîéÿîëÿîÿî3ÿî5ÿî G     Gÿè Hÿè Iÿè Kÿè Uÿè “ÿè ˜ÿè ºÿè Çÿè Èÿè öÿèÿèÿè!ÿè9ÿèKÿèLÿèVÿèl m o p q nÿèoÿèpÿèqÿèrÿèŠÿèŒÿèÿèÿè’ÿè”ÿè–ÿè˜ÿèšÿèœÿèÿè ÿè¢ÿè¤ÿèkÿè‘ÿè•ÿè˜ÿè¨ © ¬ ³ÿè¹ÿè¾ÿèÌÿèÎÿèÏÿèÛÿèìÿèÿè
ÿèÿèÿèÿèÿèÿèÿè*ÿè,ÿè.ÿè2ÿè  V    & ¦œúVÌÂ¸’,Æ
Œ^TL~üâX*Lh"¨È>ÀP¢à–Àê  & O X [ _ œ ´ ¶ · ¸ ¿ Â Ã Ä É Ë Ì Í Ñ Õ × Ø Ú â æ ç è é ê ì î ğ õ ÷ ú ÿ!m = Gÿì Hÿì Iÿì Kÿì Uÿì “ÿì ˜ÿì ºÿì Çÿì Èÿì öÿìÿìÿì!ÿì9ÿìKÿìLÿìVÿìnÿìoÿìpÿìqÿìrÿìŠÿìŒÿìÿìÿì’ÿì”ÿì–ÿì˜ÿìšÿìœÿìÿì ÿì¢ÿì¤ÿìkÿì‘ÿì•ÿì˜ÿì³ÿì¹ÿì¾ÿìÌÿìÎÿìÏÿìÛÿììÿìÿì
ÿìÿìÿìÿìÿìÿìÿì*ÿì,ÿì.ÿì2ÿì  Sÿìÿìxÿìyÿìzÿì{ÿì|ÿìÆÿìÈÿìÊÿìqÿìwÿì“ÿìÙÿìİÿìÿìÿì ÿì"ÿì$ÿì&ÿì(ÿì0ÿì  ÿ„ ÿ„nÿ„rÿ„vÿ„wÿ„  .ÿì 9ÿìbÿìcÿìdÿìeÿì²ÿìáÿìãÿìåÿìçÿìéÿìëÿìÿì3ÿì5ÿì  ÿò ÿò Zÿó ]ÿó ¼ÿóÿólÿòmÿòoÿòpÿòqÿòÿó‚ÿóğÿósÿó–ÿóŸÿó§ÿó¨ÿò©ÿò¬ÿò¸ÿóÀÿóáÿóãÿóåÿóBÿóDÿóFÿó = 'ÿó +ÿó 3ÿó 5ÿó ƒÿó ’ÿó —ÿó ²ÿó Òÿóÿóÿóÿóÿóÿó ÿó8ÿóUÿó(ÿó)ÿó+ÿó,ÿóSÿó]ÿó^ÿó_ÿó`ÿóaÿó‰ÿó‹ÿóÿóÿóÿóŸÿó¡ÿó£ÿóÅÿóÇÿóÉÿóúÿóWÿódÿóŠÿóÿóºÿó½ÿóØÿóÚÿóÜÿóÿóÿóÿó!ÿó#ÿó%ÿó'ÿó)ÿó+ÿó-ÿó/ÿó1ÿóªÿó = 'ÿæ +ÿæ 3ÿæ 5ÿæ ƒÿæ ’ÿæ —ÿæ ²ÿæ Òÿæÿæÿæÿæÿæÿæ ÿæ8ÿæUÿæ(ÿæ)ÿæ+ÿæ,ÿæSÿæ]ÿæ^ÿæ_ÿæ`ÿæaÿæ‰ÿæ‹ÿæÿæÿæÿæŸÿæ¡ÿæ£ÿæÅÿæÇÿæÉÿæúÿæWÿædÿæŠÿæÿæºÿæ½ÿæØÿæÚÿæÜÿæÿæÿæÿæ!ÿæ#ÿæ%ÿæ'ÿæ)ÿæ+ÿæ-ÿæ/ÿæ1ÿæªÿæ 6 %ÿä <ÿÒ =ÿÓ ±ÿä ³ÿä ÙÿÒÿäLÿäMÿäNÿäOÿäPÿäQÿäRÿäfÿÓƒÿä…ÿä‡ÿäïÿÓñÿÓSÿäXÿÓ[ÿägÿÓhÿÒjÿÓƒÿäÿÒ¦ÿÓ¯ÿä¿ÿÓÂÿÒÅÿäÇÿäĞÿÒêÿÒïÿäñÿäóÿäõÿä÷ÿäùÿäûÿäıÿäÿÿäÿäÿäÿäAÿÓCÿÓEÿÓOÿÒWÿÒjÿÓ & ÿ ÿ %ÿÍ ±ÿÍ ³ÿÍÿÍnÿrÿvÿwÿLÿÍMÿÍNÿÍOÿÍPÿÍQÿÍRÿÍƒÿÍ…ÿÍ‡ÿÍSÿÍ[ÿÍƒÿÍ¯ÿÍÅÿÍÇÿÍïÿÍñÿÍóÿÍõÿÍ÷ÿÍùÿÍûÿÍıÿÍÿÿÍÿÍÿÍÿÍ ¦ GÿÜ HÿÜ IÿÜ KÿÜ Qÿó Rÿó SÿÖ Tÿó UÿÜ Yÿİ Zÿá ]ÿá “ÿÜ ˜ÿÜ šÿİ ºÿÜ ¼ÿá Àÿó ÇÿÜ ÈÿÜ Êÿİ ëÿó ïÿó ğÿó òÿó óÿó ôÿó öÿÜ ÷ÿó ùÿó úÿó ıÿó ÿÿóÿÜÿóÿÖÿáÿÜ!ÿÜ5ÿó9ÿÜDÿóIÿóKÿÜLÿÜVÿÜnÿÜoÿÜpÿÜqÿÜrÿÜwÿóxÿÖyÿÖzÿÖ{ÿÖ|ÿÖ}ÿİ~ÿİÿİ€ÿİÿá‚ÿáŠÿÜŒÿÜÿÜÿÜ’ÿÜ”ÿÜ–ÿÜ˜ÿÜšÿÜœÿÜÿÜ ÿÜ¢ÿÜ¤ÿÜ¿ÿóÁÿóÃÿóÄÿóÆÿÖÈÿÖÊÿÖâÿİäÿİæÿİèÿİêÿİìÿİğÿákÿÜmÿóoÿİqÿÖsÿávÿİwÿÖxÿİ‘ÿÜ’ÿó“ÿÖ”ÿó•ÿÜ–ÿá˜ÿÜ™ÿóÿóŸÿá§ÿá®ÿó³ÿÜ´ÿó¸ÿá¹ÿÜ¾ÿÜÀÿáÌÿÜÎÿÜÏÿÜÕÿó×ÿóÙÿÖÛÿÜİÿÖáÿáãÿáåÿáéÿóìÿÜÿÜ
ÿÜÿÜÿÜÿÜÿÜÿÜÿÜÿÖÿÖ ÿÖ"ÿÖ$ÿÖ&ÿÖ(ÿÖ*ÿÜ,ÿÜ.ÿÜ0ÿÖ2ÿÜ4ÿİ6ÿİ8ÿİ:ÿİ<ÿİ>ÿİ@ÿİBÿáDÿáFÿáJÿóLÿóVÿócÿóeÿógÿó q ÿÚ ÿÚ Gÿğ Hÿğ Iÿğ Kÿğ Uÿğ Yÿï ZÿÜ ]ÿÜ “ÿğ ˜ÿğ šÿï ºÿğ ¼ÿÜ Çÿğ Èÿğ Êÿï öÿğÿğÿÜÿğ!ÿğ9ÿğKÿğLÿğVÿğlÿÚmÿÚoÿÚpÿÚqÿÚnÿğoÿğpÿğqÿğrÿğ}ÿï~ÿïÿï€ÿïÿÜ‚ÿÜŠÿğŒÿğÿğÿğ’ÿğ”ÿğ–ÿğ˜ÿğšÿğœÿğÿğ ÿğ¢ÿğ¤ÿğâÿïäÿïæÿïèÿïêÿïìÿïğÿÜkÿğoÿïsÿÜvÿïxÿï‘ÿğ•ÿğ–ÿÜ˜ÿğŸÿÜ§ÿÜ¨ÿÚ©ÿÚ¬ÿÚ³ÿğ¸ÿÜ¹ÿğ¾ÿğÀÿÜÌÿğÎÿğÏÿğÛÿğáÿÜãÿÜåÿÜìÿğÿğ
ÿğÿğÿğÿğÿğÿğÿğ*ÿğ,ÿğ.ÿğ2ÿğ4ÿï6ÿï8ÿï:ÿï<ÿï>ÿï@ÿïBÿÜDÿÜFÿÜ 4 ÿ  ÿ  Yÿñ ZÿÅ ]ÿÅ šÿñ ¼ÿÅ ÊÿñÿÅlÿ mÿ oÿ pÿ qÿ }ÿñ~ÿñÿñ€ÿñÿÅ‚ÿÅâÿñäÿñæÿñèÿñêÿñìÿñğÿÅoÿñsÿÅvÿñxÿñ–ÿÅŸÿÅ§ÿÅ¨ÿ ©ÿ ¬ÿ ¸ÿÅÀÿÅáÿÅãÿÅåÿÅ4ÿñ6ÿñ8ÿñ:ÿñ<ÿñ>ÿñ@ÿñBÿÅDÿÅFÿÅ = Gÿç Hÿç Iÿç Kÿç Uÿç “ÿç ˜ÿç ºÿç Çÿç Èÿç öÿçÿçÿç!ÿç9ÿçKÿçLÿçVÿçnÿçoÿçpÿçqÿçrÿçŠÿçŒÿçÿçÿç’ÿç”ÿç–ÿç˜ÿçšÿçœÿçÿç ÿç¢ÿç¤ÿçkÿç‘ÿç•ÿç˜ÿç³ÿç¹ÿç¾ÿçÌÿçÎÿçÏÿçÛÿçìÿçÿç
ÿçÿçÿçÿçÿçÿçÿç*ÿç,ÿç.ÿç2ÿç q     Gÿè Hÿè Iÿè Kÿè Sÿê Uÿè Z  ]  “ÿè ˜ÿè ºÿè ¼  Çÿè Èÿè öÿèÿèÿê ÿè!ÿè9ÿèKÿèLÿèVÿèl m o p q nÿèoÿèpÿèqÿèrÿèxÿêyÿêzÿê{ÿê|ÿê ‚ ŠÿèŒÿèÿèÿè’ÿè”ÿè–ÿè˜ÿèšÿèœÿèÿè ÿè¢ÿè¤ÿèÆÿêÈÿêÊÿêğ kÿèqÿês wÿê‘ÿè“ÿê•ÿè– ˜ÿèŸ § ¨ © ¬ ³ÿè¸ ¹ÿè¾ÿèÀ ÌÿèÎÿèÏÿèÙÿêÛÿèİÿêá ã å ìÿèÿè
ÿèÿèÿèÿèÿèÿèÿèÿêÿê ÿê"ÿê$ÿê&ÿê(ÿê*ÿè,ÿè.ÿè0ÿê2ÿèB D F   \ÿí ^ÿí íÿíóÿíõÿí÷ÿí—ÿíÃÿíÑÿíëÿíPÿíXÿí  \ÿò ^ÿò íÿòóÿòõÿò÷ÿò—ÿòÃÿòÑÿòëÿòPÿòXÿò  Zÿô \ÿò ]ÿô ^ÿó ¼ÿô íÿòÿôÿô‚ÿôğÿôóÿóõÿó÷ÿósÿô–ÿô—ÿòŸÿô§ÿô¸ÿôÀÿôÃÿòÑÿòáÿôãÿôåÿôëÿòBÿôDÿôFÿôPÿòXÿò y ÿÊ ÿÊ 8ÿÒ :ÿÔ <ÿô =ÿÓ QÿÑ RÿÑ TÿÑ Zÿæ \ÿï ]ÿæ ¼ÿæ ÀÿÑ ÑÿÒ ÕÿÒ Ùÿô İÿí àÿá ëÿÑ íÿï ïÿÑ ğÿÑ òÿÑ óÿÑ ôÿÑ ÷ÿÑ ùÿÑ úÿÑ ıÿÑ ÿÿÑÿÑÿÔÿæ2ÿÒ5ÿÑ:ÿÒDÿÑIÿÑlÿÊmÿÊoÿÊpÿÊqÿÊfÿÓwÿÑÿæ‚ÿæ¿ÿÑÁÿÑÃÿÑÄÿÑÛÿÒİÿÒßÿÒïÿÓğÿæñÿÓXÿÓgÿÓhÿôjÿÓmÿÑsÿæ‚ÿíÿÒÿô’ÿÑ”ÿÑ–ÿæ—ÿï™ÿÑÿÑŸÿæ¦ÿÓ§ÿæ¨ÿÊ©ÿÊ¬ÿÊ®ÿÑ´ÿÑ·ÿÔ¸ÿæ¿ÿÓÀÿæÂÿôÃÿïĞÿôÑÿïÕÿÑ×ÿÑàÿíáÿæâÿíãÿæäÿíåÿææÿáéÿÑêÿôëÿïAÿÓBÿæCÿÓDÿæEÿÓFÿæJÿÑLÿÑMÿÒOÿôPÿïQÿáSÿáVÿÑWÿôXÿïcÿÑeÿÑgÿÑjÿÓ  8ÿ¾ Zÿï ]ÿï ¼ÿï Ñÿ¾ Õÿ¾ÿï2ÿ¾:ÿ¾ÿï‚ÿïÛÿ¾İÿ¾ßÿ¾ğÿïsÿïÿ¾–ÿïŸÿï§ÿï¸ÿïÀÿïáÿïãÿïåÿïBÿïDÿïFÿïMÿ¾ 4 8ÿæ :ÿç <ÿò =ÿç \ÿñ Ñÿæ Õÿæ Ùÿò İÿî àÿè íÿñÿç2ÿæ:ÿæfÿçÛÿæİÿæßÿæïÿçñÿçXÿçgÿçhÿòjÿç‚ÿîÿæÿò—ÿñ¦ÿç·ÿç¿ÿçÂÿòÃÿñĞÿòÑÿñàÿîâÿîäÿîæÿèêÿòëÿñAÿçCÿçEÿçMÿæOÿòPÿñQÿèSÿèWÿòXÿñjÿç ˆ %  'ÿè +ÿè 3ÿè 5ÿè 8ÿà :ÿà =ÿß ƒÿè ’ÿè —ÿè ±  ²ÿè ³  Ñÿà Òÿè Ó  Õÿà Ü  àÿá ñ  øÿà ÿè ÿèÿàÿèÿèÿè ÿè2ÿà8ÿè:ÿàQ Uÿè(ÿè)ÿè+ÿè,ÿèL M N O P Q R Sÿè]ÿè^ÿè_ÿè`ÿèaÿèfÿßƒ … ‡ ‰ÿè‹ÿèÿèÿèÿèŸÿè¡ÿè£ÿèÅÿèÇÿèÉÿèÛÿàİÿàßÿàïÿßñÿßúÿèS WÿèXÿß[ dÿègÿßjÿßƒ Šÿèÿèÿà¦ÿß¯ ·ÿàºÿè½ÿè¿ÿßÅ Ç ØÿèÚÿèÜÿèæÿáçÿàí î ï ñ ó õ ÷ ù û ı ÿ    ÿèÿèÿè!ÿè#ÿè%ÿè'ÿè)ÿè+ÿè-ÿè/ÿè1ÿèAÿßCÿßEÿßMÿàQÿáRÿàSÿáTÿàh i jÿßªÿè - 8ÿñ :ÿô <ÿô =ÿğ Ñÿñ Óÿõ Õÿñ Ùÿô Üÿõ İÿóÿô2ÿñ:ÿñQÿõfÿğÛÿñİÿñßÿñïÿğñÿğXÿğgÿğhÿôjÿğ‚ÿóÿñÿô¦ÿğ·ÿô¿ÿğÂÿôĞÿôàÿóâÿóäÿóêÿôíÿõAÿğCÿğEÿğMÿñOÿôWÿôhÿõjÿğ Y %  8ÿæ :ÿæ <  =ÿæ ±  ³  Ñÿæ Ó  Õÿæ Ù  Ü  İ  àÿå ñ  øÿè  ÿæ2ÿæ:ÿæQ L M N O P Q R fÿæƒ … ‡ ÛÿæİÿæßÿæïÿæñÿæS Xÿæ[ gÿæh jÿæ‚ ƒ ÿæ ¦ÿæ¯ ·ÿæ¿ÿæÂ Å Ç Ğ à â ä æÿåçÿèê í î ï ñ ó õ ÷ ù û ı ÿ    AÿæCÿæEÿæMÿæO QÿåRÿèSÿåTÿèW h i jÿæ . 8ÿã <ÿå =ÿä Ñÿã Óÿå Õÿã Ùÿå Üÿå İÿé ñÿêÿê2ÿã:ÿãQÿåfÿäÛÿãİÿãßÿãïÿäñÿäXÿägÿähÿåjÿä‚ÿéÿãÿå¦ÿä¿ÿäÂÿåĞÿåàÿéâÿéäÿéêÿåíÿåîÿêAÿäCÿäEÿäMÿãOÿåWÿåhÿåiÿêjÿä ! 8ÿâ <ÿä Ñÿâ Óÿä Õÿâ Ùÿä Üÿä İÿé ñÿëÿë2ÿâ:ÿâQÿäÛÿâİÿâßÿâhÿä‚ÿéÿâÿäÂÿäĞÿäàÿéâÿéäÿéêÿäíÿäîÿëMÿâOÿäWÿähÿäiÿë  8ÿë =ÿó Ñÿë Õÿë2ÿë:ÿëfÿóÛÿëİÿëßÿëïÿóñÿóXÿógÿójÿóÿë¦ÿó¿ÿóAÿóCÿóEÿóMÿëjÿó 0 Qÿï Rÿï Tÿï \ÿğ Àÿï ëÿï íÿğ ïÿï ğÿï òÿï óÿï ôÿï ÷ÿï ùÿï úÿï ıÿï ÿÿïÿï5ÿïDÿïIÿïwÿï¿ÿïÁÿïÃÿïÄÿïmÿï’ÿï”ÿï—ÿğ™ÿïÿï®ÿï´ÿïÃÿğÑÿğÕÿï×ÿïéÿïëÿğJÿïLÿïPÿğVÿïXÿğcÿïeÿïgÿï  ÿò ÿò Zÿõ ]ÿõ ¼ÿõÿõlÿòmÿòoÿòpÿòqÿòÿõ‚ÿõğÿõsÿõ–ÿõŸÿõ§ÿõ¨ÿò©ÿò¬ÿò¸ÿõÀÿõáÿõãÿõåÿõBÿõDÿõFÿõ  øÿíçÿíRÿíTÿí T Gÿğ Hÿğ Iÿğ Kÿğ Sÿë Uÿğ “ÿğ ˜ÿğ ºÿğ Çÿğ Èÿğ öÿğÿğÿëÿğ!ÿğ9ÿğKÿğLÿğVÿğnÿğoÿğpÿğqÿğrÿğxÿëyÿëzÿë{ÿë|ÿëŠÿğŒÿğÿğÿğ’ÿğ”ÿğ–ÿğ˜ÿğšÿğœÿğÿğ ÿğ¢ÿğ¤ÿğÆÿëÈÿëÊÿëkÿğqÿëwÿë‘ÿğ“ÿë•ÿğ˜ÿğ³ÿğ¹ÿğ¾ÿğÌÿğÎÿğÏÿğÙÿëÛÿğİÿëìÿğÿğ
ÿğÿğÿğÿğÿğÿğÿğÿëÿë ÿë"ÿë$ÿë&ÿë(ÿë*ÿğ,ÿğ.ÿğ0ÿë2ÿğ      Eÿğ Gÿ° Hÿ° Iÿ° Kÿ° SÿÖ Uÿ° Z  ]  “ÿ° ˜ÿ° ºÿ° ¼  Èÿ° ñÿ¯ öÿ°ÿ°ÿ¯ÿÖ ÿ°!ÿ°9ÿ°Kÿ°Lÿ°Vÿ°l m o p q gÿğhÿğiÿğjÿğkÿğlÿğmÿğnÿ°oÿ°pÿ°qÿ°rÿ°xÿÖyÿÖzÿÖ{ÿÖ|ÿÖ ‚ „ÿğ†ÿğˆÿğŠÿ°Œÿ°ÿ°ÿ°’ÿ°”ÿ°–ÿ°˜ÿ°šÿ°œÿ°ÿ° ÿ°¢ÿ°¤ÿ°ÆÿÖÈÿÖÊÿÖğ kÿ°qÿÖs wÿÖÿğ‘ÿ°“ÿÖ•ÿ°– ˜ÿ°Ÿ § ¨ © ¬ °ÿğ³ÿ°¸ ¹ÿ°¾ÿ°À ÆÿğÈÿğÌÿ°Îÿ°Ïÿ°ÙÿÖÛÿ°İÿÖá ã å ìÿ°îÿ¯ğÿğòÿğôÿğöÿğøÿğúÿğüÿğşÿğ ÿğÿğÿğÿğÿ°
ÿ°ÿ°ÿ°ÿ°ÿ°ÿ°ÿ°ÿÖÿÖ ÿÖ"ÿÖ$ÿÖ&ÿÖ(ÿÖ*ÿ°,ÿ°.ÿ°0ÿÖ2ÿ°B D F iÿ¯  ñ  øÿğ çÿğî RÿğTÿği  E G  H  I  K  U  “  ˜  º  Ç  È  ñ  ö  øÿ÷   ! 9 K L V n o p q r Š Œ   ’ ” – ˜ š œ    ¢ ¤ k ‘ • ˜ ³ ¹ ¾ Ì Î Ï Û çÿ÷ì î  
       * , . 2 Rÿ÷Tÿ÷i   Zÿô \ÿğ ]ÿô ¼ÿô íÿğ ñÿóÿóÿôÿô‚ÿôğÿôsÿô–ÿô—ÿğŸÿô§ÿô¸ÿôÀÿôÃÿğÑÿğáÿôãÿôåÿôëÿğîÿóBÿôDÿôFÿôPÿğXÿğiÿó 
 ÿÖ ÿÖlÿÖmÿÖoÿÖpÿÖqÿÖ¨ÿÖ©ÿÖ¬ÿÖ 
 ÿõ ÿõlÿõmÿõoÿõpÿõqÿõ¨ÿõ©ÿõ¬ÿõ ! L   O   P   Sÿ€ Wÿÿ€xÿ€yÿ€zÿ€{ÿ€|ÿ€Æÿ€Èÿ€Êÿ€ÒÿÔÿÖÿØÿÚÿqÿ€wÿ€“ÿ€šÿÙÿ€İÿ€ÿ€ÿ€ ÿ€"ÿ€$ÿ€&ÿ€(ÿ€0ÿ€ Š   
^¾ !    ÿÎÿ ÿõÿïÿˆÿôÿ»ÿÿõ ÿ©ÿ¢ÿÉ                                              ÿå    ÿèÿÉ  ÿó                             ÿå           ÿã      ÿäÿä                          ÿá                ÿå    ÿêÿÕ    ÿëÿêÿšÿé                                    ÿã                                        ÿæ          ÿí   ÿï                  ÿí                ÿËÿ¸ÿ|ÿ~ÿä    ÿ  ÿ¡ÿÄ      ÿ±  ÿ&  ÿÿ³ÿÿ“ÿğÿÿŒÿ  ÿ’ÿrÿÿÿ½    ÿD  ÿKÿ†      ÿ>  şz  ÿDÿjşbÿ3ÿÑÿ,ÿ'          ÿØ      ÿì                        ÿì                  ÿØÿ£  ÿá    ÿå    ÿé                  ÿæ  ÿÀÿé            ÿ{    ÿ¿ÿÊş°  ÿqşíÿÔ  ÿQÿ                             ÿÉ   ÿÙ      ÿó                ÿvÿáş¼ÿæÿó        ÿõ  ÿ8                                  ÿê                          ÿõ    ÿó    ÿÒ    ÿä          ÿµ  ÿ  ÿÔ  ÿÛ    ÿÒ       ÿáÿÑ ÿç    ÿë    ÿë                 ÿæ  ÿÒ              ÿì    ÿãÿ   ÿ¿  ÿÙÿâ      ÿ¢ ÿ-  ÿ¿ÿéÿÌÿØÿğÿ·ÿÆÿ                 ÿá   ÿí          ÿÕ  ÿ…  ÿá  ÿÄ    ÿß        ÿå    ÿæ    ÿë    ÿí                 ÿë                ÿÊ  ÿéÿ»ÿé    ÿ½              ÿ¥  şm  ÿ½  ÿ‰ÿš  ÿ‘ÿÒ      ÿñ        ÿ½                                                        ÿõ                                              ÿõ  ÿò    ÿã        ÿñ                  ÿñ                ÿó        ÿò                                                        ÿ˜                                              ÿñ  ÿğ    ÿx        ÿğ                  ÿë                    ÿ×     ÿñ                    ÿ•  ÿó        ÿñ                  ÿì                    ÿ…  ÿí        ÿØ                    ÿì                        ÿì                              ÿğ                        ÿğ                            ÿ•ÿÃ                ÿˆ      ÿÅ    ÿì  ÿÎÿ°                ÿV                                            ÿõ          ÿÀ    şõ    ÿÈÿ­ÿçÿë  ÿğ      ÿÉ                ÿİÿÙ      ÿy                            ÿõ              x              % )  , 4 	 8 >  E G  I I  L L  Q T  V V " Z Z # \ ^ $ Š Š ' ° ³ ( ¼ ¼ , À À - Æ Æ . Ó Ô / Ö Ö 1 Ù Ù 2 Û İ 3 ß ß 6 á á 7 ã ã 8 å å 9 ë ë : í í ; ö ö < û û = ı ş > @		 B C D+- G00 J22 KII Llr Mvw T(( V*+ WGH YJJ [Lr \w| ƒ‘ ‰“œ š¥§ ¤©© §«« ¨­­ ©¯¯ ª²² «´´ ¬¶¶ ­¸¸ ®ºº ¯¼¼ °¾Ê ±ÌÌ ¾ÎÎ ¿ĞĞ ÀÛÛ Áİİ Âßß Ãáá Äãã Ååå Æçç Çéé Èëë Éíí Êï÷ ËSX Ô[j Úmm êqq ëss ìww íz{ î}† ğˆŠ úŒ‘ ı“™Ÿ 
¢¢¤¤¦©¬±³³·¸½ÈËÌ'ÎÑ)ØÙ-İİ/ßå0êë7ï9b(c00q33r55sAFtIIzKK{MM|OP}UX[[ƒ]^„``†dd‡ffˆjj‰ªªŠ :             & &  ' '  ( (  ) )  , -  . .  / / 	 0 0 
 1 2  3 3  4 4  8 8  9 9  : :  ; ;  < <  = =  > >  E E  F F  G G  I I  L L  Q R  S S  T T  V V  Z Z  \ \  ] ]  ^ ^  Š Š  ° °  ² ²  ¼ ¼  À À  Æ Æ  Ó Ô  Ö Ö  Ù Ù  Û Ü  İ İ  ß ß  á á  ã ã  å å  ë ë  í í  ö ö  û û   ı ı   ş ş   		     ++ ,, -- 00 	22 	II lm nn oq rr vw (( *+ GH JJ SS TW X\ ]a be ff gm nn or ww x| ‚ „„ †† ˆˆ ‰‰ ŠŠ ‹‹ ŒŒ     ‘‘ ““ ”” •• –– —— ˜˜ ™™ šš ›› œœ ¥¥ ¦¦ §§ ©© «« ­­ ¯¯ ²² ´´ 	¶¶ 
¸¸ 
ºº 
¼¼ 
¾¾ ¿¿ ÀÀ ÁÁ ÂÂ ÃÄ ÅÅ ÆÆ ÇÇ ÈÈ ÉÉ ÊÊ ÌÌ ÎÎ ĞĞ ÛÛ İİ ßß áá ãã åå çç éé ëë íí ïï ğğ ññ òò óó ôô õõ öö ÷÷ TT UV WW XX \\ ]] ^^ _` aa 	bc dd ee ff gg hh ii jj mm qq ss ww zz {{ }~  € 	‚‚ „„ …… †† ˆ‰ ŠŠ ŒŒ     ‘‘ ““ ”” •• –– —— ˜˜ ™™ ŸŸ    ¢¢ ¤¤ ¦¦ §§ ¨© ¬¬ ­­ ®® °° ±± ³³ ·· ¸¸ ½½ ¾¾ ¿¿ ÀÀ ÁÁ ÂÂ ÃÃ ÄÄ ÆÆ ÈÈ ËË ÌÌ ÎÏ ĞĞ ÑÑ ØØ ÙÙ İİ ßß àà áá ââ ãã ää åå êê ëë ğğ òò ôô öö øø úú üü şş         		 

                       !! "" ## $$ %% && '' (( 00 33 55 AA BB CC DD EE FF II 	KK MM OO PP UU VV WW XX [[ ]] ^^ `` 	dd ff jj ªª  m                % %  ' '  + +  . .  3 3  5 5  7 7  8 8 
 9 9  : :  ; ; 	 < <  = =  > >  E E  G I  K K  Q R  S S  T T  U U  W W  Y Y  Z Z  \ \  ] ]  ^ ^  ƒ ƒ  ’ ’  “ “  — —  ˜ ˜  š š  ± ±  ² ²  ³ ³  º º  ¼ ¼  À À  Ç È  Ê Ê  Ñ Ñ 
 Ò Ò  Ó Ó  Õ Õ 
 Ù Ù  Ü Ü  İ İ  à à  ë ë  í í  ï ğ  ñ ñ  ò ô  ö ö  ÷ ÷  ø ø  ù ú  ı ı  ÿ ÿ                 !! 22 
55 88 99 :: 
DD II KL QQ UU VV ij lm nn oq rr vw () +, FF LR SS ]a be ff gm nr ww x| }€ ‚ ƒƒ „„ …… †† ‡‡ ˆˆ ‰‰ ŠŠ ‹‹ ŒŒ     ’’ ”” –– ˜˜ šš œœ   ŸŸ    ¡¡ ¢¢ ££ ¤¤ ²² ¿¿ ÁÁ ÃÄ ÅÅ ÆÆ ÇÇ ÈÈ ÉÉ ÊÊ ÑÑ ÒÒ ÓÓ ÔÔ ÕÕ ÖÖ ×× ØØ ÙÙ ÚÚ ÛÛ 
İİ 
ßß 
áá ââ ãã ää åå ææ çç èè éé êê ëë ìì íí 	ïï ğğ ññ òò óó ôô õõ öö ÷÷ úú SS WW XX [[ ^^ dd gg hh jj kk mm oo qq ss vv ww xx  ‚‚ ƒƒ ŠŠ   
  ‘‘ ’’ ““ ”” •• –– —— ˜˜ ™™ šš  ŸŸ    	¢¢ 	¤¤ 	¦¦ §§ ¨© ¬¬ ®® ¯¯ °° ³³ ´´ ·· ¸¸ ¹¹ ºº ½½ ¾¾ ¿¿ ÀÀ ÂÂ ÃÃ ÅÅ ÆÆ ÇÇ ÈÈ ÌÌ ÎÏ ĞĞ ÑÑ ÕÕ ×× ØØ ÙÙ ÚÚ ÛÛ ÜÜ İİ àà áá ââ ãã ää åå ææ çç éé êê ëë ìì íí îî ïï ğğ ññ òò óó ôô õõ öö ÷÷ øø ùù úú ûû üü ıı şş ÿÿ           

               !! "" ## $$ %% && '' (( )) ** ++ ,, -- .. // 00 11 22 33 44 55 66 88 :: << >> @@ AA BB CC DD EE FF JJ LL MM 
OO PP QQ RR SS TT VV WW XX cc ee gg hh ii jj pp ªª     
ğ DFLT cyrl Hgrek vlatn ¤     ÿÿ    
   ( 4 A K U _ i s } ‡ ‘ › ¥ ¯     ÿÿ      ) 5 B L V ` j t ~ ˆ ’ œ ¦ °     ÿÿ       * 6 C M W a k u  ‰ “  § ± ( AZE  TCRT  ~MOL  ¨NAV  ÔROM  TUR ,  ÿÿ     ! + 2 7 D N X b l v € Š ”  ¨ ²  ÿÿ     " , 8 E O Y c m w  ‹ • Ÿ © ³  ÿÿ     # - 9 F P Z d n x ‚ Œ –   ª ´  ÿÿ     $ . : > G Q [ e o y ƒ  — ¡ « µ  ÿÿ     % / ; ? H R \ f p z „  ˜ ¢ ¬ ¶  ÿÿ     & 0 < @ I S ] g q { …  ™ £ ­ ·  ÿÿ  	   ' 1 3 = J T ^ h r | †  š ¤ ® ¸ ¹c2scXc2scXc2scXc2scXc2scXc2scXc2scXc2scXc2scXc2scXccmp^ccmp^ccmp^ccmp^ccmp^ccmp^ccmp^ccmp^ccmp^ccmp^dligfdligfdligfdligfdligfdligfdligfdligfdligfdligfdnomldnomldnomldnomldnomldnomldnomldnomldnomldnomlfracrfracrfracrfracrfracrfracrfracrfracrfracrfracrliga|liga„lnumŠlnumŠlnumŠlnumŠlnumŠlnumŠlnumŠlnumŠlnumŠlnumŠlocllocl–loclœnumr¢numr¢numr¢numr¢numr¢numr¢numr¢numr¢numr¢numr¢onum¨onum¨onum¨onum¨onum¨onum¨onum¨onum¨onum¨onum¨pnum®pnum®pnum®pnum®pnum®pnum®pnum®pnum®pnum®pnum®smcp´smcp´smcp´smcp´smcp´smcp´smcp´smcp´smcp´smcp´ss01ºss01ºss01ºss01ºss01ºss01ºss01ºss01ºss01ºss01ºss02Àss02Àss02Àss02Àss02Àss02Àss02Àss02Àss02Àss02Àss03Æss03Æss03Æss03Æss03Æss03Æss03Æss03Æss03Æss03Æss04Ìss04Ìss04Ìss04Ìss04Ìss04Ìss04Ìss04Ìss04Ìss04Ìss05Òss05Òss05Òss05Òss05Òss05Òss05Òss05Òss05Òss05Òss06Øss06Øss06Øss06Øss06Øss06Øss06Øss06Øss06Øss06Øss07Şss07Şss07Şss07Şss07Şss07Şss07Şss07Şss07Şss07Ştnumätnumätnumätnumätnumätnumätnumätnumätnumätnumä                             	    	                                    
                              8Æ´`ğğ(^„²ÆÚî \z˜Êü.Bzlz¦      Ä ßçº»¼½¾¿ÀÁÂÃÄÅÆÇÈÉÊËÌÍÎÏĞÑÒÓèéD;êëìíîïğñòóôõö÷øùúûüış İ	
/üışÿ 	
 !"#$%&'()*+,-./0123456789:;<=>?@ABCDFEGHIJKLMNOPQR«¬­®¯°±²³´µ¶·¸¹º»¼½¾¿ÀÁÂÃÄÅÆÿÇÈÉÊËÌÍÎÏĞÑÒÓÔÕÖØÙÛÜ×Ú  ß  % & ' ( ) * + , - . / 0 1 2 3 4 5 6 7 8 9 : ; < = > e g … ’ ° ± ² ³ ´ µ ¶ · ¸ ¹ Ñ Ò Ó Ô Õ Ö × Ø Ù Ú Û Ü İ Ş ß à á â ã ä å æ ç è,028:<>?EF…ŠGHJLMNOPQRSTUVWXYZ[\]^_`abcdefƒ…‡‰‹‘“•—™›Ÿ¡£¥§©«­¯²´¶¸º¼¾ÀÂÅÇÉËÍÏÑÓÕÙÛİßáãåçéëíïñòôöSTUVWXY[\]^_`abdefghijz{|}~€‚ƒ„…†‡ˆ‰Š‹Œ»½¿ÔÚàIKOWY^j      t ·º»¼½¾¿ÀÁÂÃÄÅÆÇÈÉÊËÌÍÎÏĞÑÒÓı0;úÊËûüışÿ ÎÏÑÔİ	
ôõö÷øù/şÿ 	
O !"#$%&'()*+,-./123456789:;<=>?@ABCDFEGHIJKLMNPQRÉÌÍĞÒÓÕÁÂÃÄÅÆÇÈÖØÙÛÜü×Ú  · E F G H I J K L M N O P Q R S T U V W X Y Z [ \ ] ^ ‡ Œ “ é ê ë ì í î ï ğ ñ ò ó ô õ ö ÷ ø ù ú û ü ı ş ÿ -139;=@GKghijklmnopqrstuvwxyz{|}~€‚„†ˆŠŒ’”–˜šœ ¢¤¦¨ª¬®³µ·¹»½¿ÁÃÆÈÊÌÎĞÒÔÖÚÜŞàâäæèêìîğóõ÷‘’“”•–—˜™š›œŸ¼¾ÀÎÕÛáGJLPXZ[_k      * B Z r Š              M       x       N       `      ®       H      ›       0                      § «         6 r ¤ ® ¸ Ê üJd~ºìö2Dvˆ¢ÌŞ$6hr|† ºÌö(2Tn€²ÄŞ$.8Bl–Àê       & ,L  §M  ¨O  ©ñ  ª{  «ï  ¬  ˆ  ¬  ‰  ¨   Š  ¬Œ ¢       & ,T  §U  ¨  ©	  ª}  «  ¬   w  ¨£ ¢    ¬       & ,X  §Y  ¨§  ©  ª  «  ¬      ¨’  ¬´ ¢    ¶  ¨”  ¬¸ ¢   ­  ¨–  ¬      $y  §¾  ¨\  ©˜  ¬À ¢       & ,]  §^  ¨`  ©  ª  «  ¬  š  ¨  
   Ë  ¨ƒ  «œ  ¬Í ¢    Ñ  ¨  ¬× ¢      ¬Û ¢       & ,b  §c  ¨á  ©5  ª…  «3  ¬   ¢  ©¤  ¬       §¢  ¨¦  ¬      $¦  §f  ¨E  ©C  ªA  ¬   ò  ¨¨  ¬       & ,g  §h  ¨j  ©ò  ª|  «ğ  ¬  ‰  ¬  Š  ¨   ‹  ¬ ¢       & ,o  §p  ¨  ©
  ª~  «  ¬  x  ¨    ¬    ¬    ‘  ¨“  ¬µ ¢    ·  ¨•  ¬¹ ¢   ®  ¨—  ¬      $z  §¿  ¨w  ©™  ¬Á ¢       & ,x  §y  ¨{  ©  ª‚  «  ¬  ›  ¨  
   Ì  ¨„  «  ¬Î ¢    Ò  ¨Ÿ  ¬Ø ¢   ¡  ¬Ü ¢       & ,}  §~  ¨â  ©6  ª†  «4  ¬   £  ©¥  ¬    ¡  §£  ¨§  ¬      $§  §  ¨F  ©D  ªB  ¬   ó  ¨©  ¬  ø  ¨  ú  ¨  ù  ¨  û  ¨      $s  §t  ¨¨  ©  ª€  «      $+  §)  ¨/  ©-  ª1  ¬      $,  §*  ¨0  ©.  ª2  ¬      $9  §7  ¨=  ©;  ª?  ¬      $:  §8  ¨>  ©<  ª@  ¬  ‡  ¨   % )   + -  / 4  6 ;  = >  E I  K M  O T  V [ $ ] ^ *   , ƒ ƒ - † † . ‰ ‰ / Œ Œ 0 — š 1 Ï Ï 5          ÕÖ        Şßàá  ‡ˆ™š       &  
    £  J¨  X  ©  X   J W       D  
   ¤  M  ¦  M         
   ¥  P  §  P   J£       •   K       '   º       ¬   6        ãä       
 åæ   / O        (*)+, !"®$%   ' ( + 3 5 F G H K S T U        &''   I K"       f =-.019:<                  ­#qrstuv        v#qrst­u                            -.019:<=       i             R        ||  Ôİ        (À        
2 z s t345678             & ÔÕÖ×ØÙÚÛÜİ@>AB?C             M N®› …   š3  š3  Ñ f            à 
ÿP !   !    GOOG @  ÿı ş  fš   Ÿ    :°                     
  ˆ l   ê €  j     ~   ¬ ­ ¿ Æ Ï æ ï ş%'0S_g~’¡°ğÿ7Y¼ÇÉİó	#ŠŒ’¡°¹ÉÎÒÖ%/EOboy†Î×áõ?…ñóùM     " ' 0 3 : < D t  ¤ ª ¬ ± º ½!!!!"!&!.!^"""""""+"H"`"e%ÊîöÃûşÿÿıÿÿ           ¡ ­ ® À Ç Ğ ç ğ ÿ&(1T`h’ ¯ğú7Y¼ÆÉØó 	#„Œ“£±ºÊÑÖ &0FPcpzˆÏØâö >€ òôM        % 0 2 9 < D t  £ ¦ « ± ¹ ¼!!!!"!&!.!["""""""+"H"`"d%ÊîöÃûşÿÿüÿÿ   ÿöÿä¥ÿÂ™ÿÁ  Œ  ‡  ƒ      w  yÿÿÿş÷şê»    şdşC ğı×ıÖıÈı³ı§ı¦ı¡ıœı‰  ÿËÿÊ    ı	  ÿ«üıüú  ü¹  ü±  ü¦  ü   şõ  şò  üI  å¯åoå åOä´åMå]á[áW  áTáSáQáIãváAãná8á	àÿ  àÚ  àÕàÎàÍà†àyàwàlß“àaà5ß’Ş«ß†ß…ß~ß{ßoßSß<ß9ÛÕŸ
ß£«¯                  Ú   ä    (  (  (  j              jt                        b    j†        ¶  ş  &  H  X  â  ò                    ø                    è  è                                                      LMNOPQ H\]^_`a ‚ ƒbcdef „ …ghijkl † ‡wxyz{| ˆ ‰}~€ ŠGG ‹I Œ°±²³´µ ¶·¸¹º»¼½  ¾¿ÀÁÂÃÄ  ‘ÅÆÇÈÉÊ ’ “ÙÚİŞßàJKRmøùúû×ØÛÜ ­ ®S ¯TUV ° ±]^_ ²`a ³bc ´d µe ¶fg ·h ¸ ¹ijklmnop Ãrs Äq Å Æ Ç È É Ê Ët Ì Í±z Ñ{ Ò|}~ Ó Ô Õ²‚ Öƒ ×„… Ø† Ù Ú Û‡€ Üˆ‰Š‹Œ İ Ş é ê ë ì‘ í î ï’ ğ ñ ò ó“ ô”• õ– ö—³˜™š›œ´Ÿ]µ¶·¸º¹'(bc\)*+,-^_./WX»¼IJ01`a23KL456789½¾MN¿ÀjkOP:;QR<=>[?@YZÁÂÃABhiCDdeSTfgEÎÍÏĞÑÒÓFGUVèéHIêëlmJìníîijpoH…     @                                          ~             E   ¡   ¬   c   ­   ­  F   ®   ¿   o   À   Å  L   Æ   Æ      Ç   Ï  S   Ğ   Ğ  H   Ñ   Ö  \   ×   Ø   ‚   Ù   İ  b   Ş   ß   „   à   å  g   æ   æ   †   ç   ï  n   ğ   ğ   ‡   ñ   ö  w   ÷   ø   ˆ   ù   ı  }   ş   ş   Š   ÿ    ‚      G      G    %  “  &  &   ‹  '  '  I  (  0  §  1  1   Œ  2  7  °  8  8     9  @  ¶  A  B     C  I  ¾  J  K     L  Q  Å  R  S   ’  T  _  Ë  `  a  Ù  b  e  İ  f  g  J  h  ~  á       ”       •  ’  ’   –     ¡   —  ¯  °   ™  ğ  ğ  «  ú  ú  R  û  û  m  ü  ÿ  ø      ×      Û  7  7   ›  Y  Y   œ  ¼  ¼  ¬  Æ  Ç     É  É   Ÿ  Ø  İ      ó  ó   ¦        §       ©  	  	   ª       «  #  #   ¬  „  …   ­  †  †  S  ‡  ‡   ¯  ˆ  Š  T  Œ  Œ  W    ’  X  “  ”   °  •  —  ]  ˜  ˜   ²  ™  š  `  ›  ›   ³  œ    b       ´  Ÿ  Ÿ  d         µ  ¡  ¡  e  £  £   ¶  ¤  ¥  f  ¦  ¦   ·  §  §  h  ¨  ©   ¸  ª  °  i  ±  ¹   º  º  º  p  »  »   Ã  ¼  ½  r  ¾  ¾   Ä  ¿  ¿  q  À  Æ   Å  Ç  Ç  t  È  É   Ì  Ê  Î  u  Ñ  Ò   Î  Ö  Ö   Ğ        ±      z       Ñ      {       Ò      |  	     Ó            ²      ‚       Ö      ƒ       ×      „       Ø      †       Ù      ‡      €       Ü    "  ˆ  #  $   İ  %  %    &  /   ß  0  0    1  4   é  5  5  ‘  6  8   í  9  9  ’  :  =   ğ  >  >  “  ?  ?   ô  @  A  ”  B  B   õ  C  C  –  D  D   ö  E  E  —  F  O   ÷  P  P  ³  Q  Q  ˜  R  R    S  S  ™  T  T    U  X  š  Y  [    \  \    ]  ]  ´  ^  ^  Ÿ  _  a    b  b  ]  c  o  	  p  q  µ  r  u    v  w  ·  x  x  º  y  y  ¹  z  †    ˆ  ‰  '  Š  ‹  b  Œ  Œ  \    ‘  )  ’  “  ^  ”  •  .  –  —  W  ˜  ™  »  š  ›  I  œ    0    Ÿ  `     ¡  2  ¢  £  K  ¤  ©  4  ª  «  ½  ¬  ­  M  ®  ¯  ¿  °  ±  j  ²  ³  O  ´  µ  :  ¶  ·  Q  ¸  º  <  »  »  [  ¼  ½  ?  ¾  ¿  Y  À  Â  Á  Ã  Ä  A  Å  Æ  h  Ç  È  C  É  Ê  d  Ë  Ì  S  Í  Î  f  Ï  ×  Ä  Ø  Ø  E  Ù  Ù  Î  Ú  Ú  Í  Û  ß  Ï  à  á  F  â  õ  Ô  ö  ÷  U  ø  ù  è  ú  û  H  ü  ı  ê  ş  ÿ  l        J      ì      K      n      í       ¯  >  ?  ­  €  …        ñ  ï  ò  ó  ¦  ô  ù  A  M  M  ª         [        g        i        p        k       "  s   %   '  v   0   0  y   2   3  ¨   9   :  z   <   <  ª   D   D  |   t   t  }        ~   £   £  o   ¤   ¤     ¦   ª  €   «   «  H   ¬   ¬  …   ±   ±  †   ¹   º  ‡   ¼   ½  ‰  !  !  ‹  !  !  Œ  !  !    !"  !"    !&  !&   ¹  !.  !.    ![  !^    "  "  ”  "  "   ±  "  "  •  "  "  –  "  "  ˜  "  "  ™  "+  "+  š  "H  "H  ›  "`  "`  œ  "d  "e    %Ê  %Ê  Ÿ  î  î     öÃ  öÃ  ¢  û  û  ¤  şÿ  şÿ  ª  ÿü  ÿı  «    ÿÿ   d  (°   	    !!!!5!(ı<Ä6şîşºäşşıı°ú¤ı}wûxı^^ˆ^      ÿõ{°    #3462"&[§ÂÉ7l88l7›ú­-==Z;;     ˆ#   	  #3#3oŒoŒxşšîˆşšî     w  Ó°    !##5!!5!3!33#3##!!ışøPPï	EşşRRRRÌçEáûPEşøšşfš‰b‹ ş` ş`‹ş‰şf#b  nÿ0œ +  4&'&&546753#4&#"#5&&53326X™ÕÃ¿§•¨»¸†rw~…1«QË·”ºÓ¹’†ƒ–w\~3AÑ¡¤ÒÛÜìÍ¦{nfycwj©Î¿¿çÆ‹–~    iÿëƒÅ   & 4 8  4632#"&5326554&"46  &5326554&#"'i§ƒ…¥§‚ªŠXJGWV”V;§¨§şüªŠXJHVWIGYşiÇi˜ƒª«ˆG„§§‹NebUINffRüÑƒ©¨‹Gƒ©§‹OecUJOdcTóBrB  eÿìóÄ  ' 3  467&&54632653#'#"$2776654&#"eu¥aBÄ¨–ÄYokDD§{ĞŞaJÇgÕşş×“zş!§™"vvD2dLR`‡i°uvG¦¼¯…X•ROş}‚Ÿÿ¨ùsBEâKp©{‚vå`S0W>CYo     g! ı    #3ı•‘şß    …ş*•k   47&'…yğ&’»	Uu&…yìOâ TFzpş4şãUş~şäª`qJ®T    &ş*7k   '654'77uñ„'š»Xb'„ïwEßşgş¦Iqvñ/ ÒiPqIşªşd   aU°   %73%'JşÒ..	™
).şÍÆ|º´}×Z—pXş£n˜[şñ^ şç[     N ’4¶   !!#!5!3–şjºşj–º¯ş4Ì¯©  şŞ4 Û   '6753†i^µcşŞHƒ‹§‘eÊ    %¶   !5!şè—   ÿõv Ñ 	  7462"&9r;;r9a0@@0.>>   ÿƒ°   #3±Ÿ`}-    sÿì
Ä    #"532'4&#"3267
ŞìéàŞíëŞ¹„‚‰‹‰…mş»şÄ53÷A8şÓşÆë×ÖŞşØìáÔä     ª  Ù·   !#5%3Ùºş‹Ñ‰¨Ç    ]  3Ä   !!56654&#"#4$32!3üFøpUŠsŠ™¹ÙËìşîşzÛ…0ŸUr’ŒÉøÕ±×ş×şY     ^ÿìùÄ &  3665#"#4632 $5332654&'#†‹ƒ–ÿx¹ıÃÎê{jxƒÿ şfşÿº–~†œ“‹2†r ‰q­åÚÂ_²,&°ÄæŞ¶sŠŒƒˆ    5  P° 
   3##!53!†ÊÊºıiŒÅıÅé—ş®Rmñü9Ê(     šÿì-°   !!632#"&'332654&#"ÎJêı³,kˆÇêóÚÁô¯v“Ÿ„yE1ÚÖ«şs?şùàáşıÖ½}°›’±5(   „ÿì±  !  #632#" 55 %"32654&O"Øÿ sÇ¾ãõÎÑşüWSÒ_ ¢y}‘±øá„şôÔáşòAıG’©ıprVD´Ü¸•–¹  M  %°   #!5!%ı¥ÂYüìØHú¸˜   pÿìÄ  ! +  #"&5467&&546324&"326"264&ìsbr…ÿĞÒırapìÁÀí—›ú—“ƒ‚”şêm‡…Ş…Š4mª01¼w½àá¼v¾10ªl¸ØØü¡zš˜ø‡to‰‰ŞŒ    dÿÿøÄ  $  #"&&546632 #5366%26754&#">:¡`~»foÌˆØùş°ş­$'åöşî]$yz”€ET|áˆ’ê|ş½şé6şWşyœçúrTJ¶ä»™•Á   ÿÿ †ÿõmD & ö   ÿ÷sÿÿ )şŞUD ' ÿßs     H ÃzJ   5rüÎ2„ıÄ{’zÄ   ˜ÚÏ    !5!!5!Úü¾Bü¾B.¡ıÀ   † ÄÜK   55ıkVüªŠ¾ş†’ş…À  KÿõvÄ  !  6677654&#"#6632462"&e2MƒTnif|¹ã¶½Ó¢mIÁ7l88l7šwŠT‡_miwl[¢ÇË±¯ªlQ˜şÃ-==Z;;    jş;Ö— 5 B  #"'#"&766323267 !"3267#"$$3232677&#"ÊØµ»56‹J’y¿iQ€P4“qŒş¹ş²ÉşÈ´'ÑZµ<%>Íiúş˜³Ş|ïùd®ûòQX<o$.8@u™öòşè¨USèÍ¥”+?ıÖçà´…˜Çşˆöøş“Á,#s'2á§·ïàşZş˜f_	÷î       °  
  !#3#!Íı‰Æ,¨-ÅıMïø|ş„°úP©  ©  ˆ°     3!2#!265!%!2654&#!©Üíïtdv‰şèşÇ=†›şâşÀ"~—Œşä°ÄÀf+!¹€Äà©ıô‹zš~lxm  wÿìØÄ   #  54$32 #&&#"3267ØşáîşşşÉ‘
¯èÁ§–¸ÑÆ² «Îçûr6ŒË4¥şıå®œşğûíşè‘´   ©  Æ°    3!232554'©›¾$ŸŸşÙÄÓÊŞ÷éÖ°¨şÊÉ]ÎşÊ¦û‹ÿUø  ©  F°   !!!!!!àı‰İüc“ı-w¡ıü°ş,    ©  /° 	  !#!!!ÌıÀ†ı:cƒı}°ş  zÿìÜÄ   %#"$'5 !2#!"3267!5!ÜJş÷°²şì—3äÀ6şŞÁÇà¿l¢5ş¯¿ji§4ËIjéÖ!şñşÿwõşß09Gœ    ©  °   !#!#3!3Áı"ÀÀŞÁ¡ı_°ır    ·  w°   !#3wÀÀ°  5ÿìÌ°   3#"&533267ÁûÑÙòÀ‰‚w“°ûùÑìŞÈ}Œ–‡   ©  °   #33#²ÀÀ‡èıÃjæ¥¹ş°ı0Ğı}üÓ    ©  °   %!!3j²üÁ°   ©  R°   	3###¡ÜÜùÀş"“ş#À°û\¤úP7dûe˜ıŸıÉ°    ©  ° 	  !##33Áı#ÁÁß¿bû°û™g  vÿì	Ä    #"$'54$32'#"327	şø°¬şö“’¬¯¿Ğ»¶ÑÓ¹ºÌ©ÖşÁ¨©9ÎiÒB«©ş¿Õşëökûşáı  ©  À° 
   #!2#%!2654&'!iÀïş÷÷ş©Yš¤¤şœ:ıÆ°ôÉÔå‘‰‚œ     mÿ
Ä  "  %#"$'54$32'#" 7†yƒşÍHP¬şö“’¬°ÀÍ¾µÑÑtÌ©ÓşÏVÌyô©9ÎiÒB«ªşÁÕşëökúşàı  ¨  É°    !#!2#!2654&'!¿şªÁâö	“ƒVÎın'©¡˜şÚMı³°àÖˆÊ2ı–ê”|‡    PÿìrÄ &  &&54$32#4&#"#"$&533264&V÷áÜ–ëÁ¨™Ÿ—kÍcşìç–şüÁÃ£˜¢–‰GÏ˜¬átÌy„—}oY{f{¤o±ÕsÈ„™|Öu  1  —°   !#!5!—ş,¿ş-fúî    Œÿìª°    " '33265ªşÿÜ3ïşä¾®¡£­°ü"Îşúâàü&¯®Û     ı°   %3#3‹ ÒıäªıåÑÿ±úP°   =  í°   7373#'#3ã) ¢(âÁşŸ¯şÔşÉ¯ş ÀËÀ­øü°ÄäúP%ooûÛ°     9  Î°   3##3„]âş4×äşšş˜ãØş3á‚.ı.ı"8ıÈŞÒ      »°   3#3e|Úş
Àş
ÜÕÛüoıá‘    V  z° 	  %!!5!5!9AûÜüï÷‚   ’şÈ€   #3!!¿¿ş‡yèùx˜¸     (ÿƒ8°   3#(°`°°ùÓ   	şÈƒ€   !!53#	zş†ÁÁ€øH˜ˆ  @Ù°   #3#ª¾¬+*«»ş×ı)   ÿi˜     !5!˜ül”——    9ØÚş   #3ÚŸşşßØ&  mÿìêN  (  !&'#"&54$3354&#"#46632%2675# (
³ Íé´tqc†ºsÅv»Ô&şWœ#‘ş¬t R†µ‹©»UasdGQ—X»¤ş•XZHŞÇWb   Œÿì      #"'#36 '4&#"326 äÀÍp	ª¹pŠá¹’‰·PU´…”øşÓ‘} ıÃ‹şÖşı½Îªş,ªÎ  \ÿììN   %2673#" 546632#&&#">c”¯vÅnİşûtÙ”¶ñ¯i›šƒxZ]¨d' öˆÚ®i‡ËÀ#»Ê  _ÿìğ     4323#'#"5327&#"_ì¿¾o¹ª	oÆ¼í¹˜†°QS¬ˆ˜&ù/‚4ú tˆ4ø¸Ğñ™Ò   ]ÿìóN    " 5546632!3267"!5&&MÜşì{İÓêı#³Šbˆ3qˆşÙp˜ˆ!ò"¡ışêşıM ÅPBXÑÊ£“›     <  Ê   3#5354632&#"3#ç««ºª@?
/5Zbçç«o®¾–	ibrüU     `şVòN  $  43273#"&'732655#"7327&#"`êÁÆo	©ùÒuà;`w¬‡—oÀ¾ëº–‡¯RUª‡˜&ı+ŒxûàÒòdWo“˜Š]€2ó·ÑŸî›Ò  Œ  ß    63 #&&#"#3E{ÅW¹ioZˆ&¹¹·—ş}ı5Ìup`Nüı        hÄ    !#3462"&U¹¹È7l88l7:->>Z<<   ÿ¿şKYÄ    !"'532654632"&Kşå=4 4>A75688l6:ûIşÈ”CS»,?>Z<<          #373#ºt¹¹cQáş[ÖÙõyş„ ü_wdş<ıŠ     œ  U    !#3U¹¹   ‹  xN   632663 #4&#"#4#"#:wÊãR6­vd¹j}gˆºç¶C¹:xŒ®N`ş‡ı+Êts{hı2Åì›üê:   Œ  ßN   63 #&&#"#;|ÈW¹ioZˆ&¹:ˆœş}ı5Ìup`Nüı:    [ÿì4N    46632 #" 532654&#"[}ßİyá’Üşïº§Œ¦©Œ‰¨'ŸşŠşÎşûŒ2ü	´ÚİÇ²İÚ     Œş`N    #"'#3632'4&#"326âÁÅq¹©	qÉÃã¹œˆ¨TS«…÷şÒ}ı÷ÚxŒşÚşú·Ô•ıû”Ó     _ş`ïN    43273##"5327&#"_êÅÀoª¹pºÄé¹…¥WX¢†&ÿ)mú&x1üºÔ’Õ   Œ  —N   &#"#3632—*1¶A¹´[§6”›ı :}‘  _ÿì»N &  4&$&&54632#4&#"#"&&53326qşç¥Oá¯¸åºberj¬Sè¹‚Èq¹‹riKS<TtP…¸¾”LnXGCD>VyW‘¯\¥`]mU   	ÿìV@   3#327#"&5#53‡ÊÊ6A 8IE|~ÅÅ@şúıaAA––ŠŸ     ˆÿìÜ:   %#"&'33273#(lÑ­µ¹ÈÔF¹°kÉÅÀıEöûÆ    !  º:   %3#3ñ½ş|şx½û?ûÆ:   +  Ó:   %3##33JĞ¹şÅ–şùÿ –şÆ¸Õü•ÿ;ûÆ4üÌ:üÖ*  )  Ê:   3##3÷ğØşmÖúú×mşÖ¯‹ıéıİ•şk#   şK°:   3#''526773îüÆşMeÜ#E2^i")ş~Ê+ûşò–Len.     X  ³: 	  %!!5!5!:yü¥Uı´4——ˆ™ƒ   @ş’=   &&554#5255667x±³ÔÔ¯³&Ñ§§Îş’2å¼Çó‘òĞ·á3sCşæÊãYZåÎşíB  ¯şòD°   #3D••şò¾    ş’r=   6547&55'73"ËµµÑ&±²ÔÔµ¯ûA
ÜçTRéËCs2á¹Òï‘óÊ¼â2    ƒ’ï"   #".#"4632265ï»‰H€©J*NT¡¸‹LŒ°@L_	Ù5”$k^ Î@¡
t_  ‹ş˜fM    3#"&462ª¨ÂÉ7l88l7¬ûìL->>Z<<  iÿù& !  %2673#5&554753#&&#"Jd”¯Æ¹³ÈÊ±¹–À¯i››ƒyY~Ééê"Ü#Ô!âßÔ–i‡ËÀ#»Ê    [  hÄ !  !!536675'#534632#4&#"!Á>İûøM(2¥ 	õÈ¾Ş¿oi‚	?nÜš[	ƒ`İÇîÔ±k|š}şü   iÿå[ñ  *  %#"''7&547'7632726654&&#"OŸÑÏŸ†‚‹hp“‚“ÃÄŸ•„—nf„ü`sÄâÄqqÅpqÄsp„‚ˆ‡œÊÎ£—ˆ–xy˜‰š£ËÄŸˆ{{Ôz{Ó{zÓyxÔ      ­°   3!!!!#!5!5!5!3flÛş^8ş€€ş€Áş†zş†9ş^Ü¢ı0}¥|ş¾B|¥}Ğ    “şòM°    3#3“ºººşòüéÈö    ZşyÄ 4 D  #"&'&5732654&'.547&&54$32#4&#"%&'6654&yºEHşüäpÉF‹º´œˆ¦Ñ¶À]¶BGŞè¹¨‹¡8‡©q:ıáZKPK6…,NT‹¯½U1ˆd¨Ç89qÍ‚—u`Yi>0o›oºX1ˆd¦ÈâÍ}›sbEPAPHa«eEFPBReEXm     fğïÅ    462"&%462"&f7l88l7®7l88l7[-==Z<<+->>Z<<  [ÿëæÄ  * 9  #"&554632#4&#"3265% $54$#"4$ #"$_­½¿› ¬’_[^ll^\]ı @ şí¡ şìŸs»K€J»´şµÆÅşµ¶U™¡Ó¶n°Ó¤•cUŠ{qxŠTe„¬şÛ¦¦%¬ª"§¥şÜªÊZÇÇş¦ÊÅş¨ÑÏX    “³Ä  %  &'#"&5463354#"'4632%2675#jL€w‚§¬l|EO¡¬‰…šş¤+XpSYÁ"&V|gox4‡63g‚†şÄaQ{(?3^ÿÿ f —d³ &zúş zDÿş  w¾    #!5!¾ºı{?w¡  ZÿëåÄ   4 =  4$ #"$732$54$#"#!2#&4'&''36654&##Z»K€J»´şµÆÅşµ¶s  ¡şì¡ şìŸÀ™©€z‘s°œHXNdŠÙÊZÇÇş¦ÊÅş¨ÑÏXÇ¬şÛ¦©"¬«!§¥şÜõş®Qƒ}{A2š=V&$¹`€B6I=    x!B°   !5!Bı6Ê!   ‚À|Ä    4632#"&2654&#"‚•jh““hi–ÿ6JJ67KKÀhœ›ij––G9:KOlJ     a  õó    !!#!5!3!5!‰lş”§ş§Aü½CV—şb—û˜   B›«»   !5654&#"#46 !«ı©,m@<KG§škT°›lfE1=L9r”nhkO‘  >šº &  32654&#"#4632#"&5332654'#	TJH?F9K£|‰œFB•ªˆ„¦OCFIœXe=0-:3)b{yh7[)j}~k-<<3q  {Øş   3#<àşô•şşÚ  šş`î:   3273#'#"'#SgtÇ>º§	]ª“Q¹:ı‡£œ˜ ûÆs‡Iş+Ú    C  @° 
  !#"$54$3!†Tæş÷
æşÖÕÿúP  “kyI 	  462"&“9r;;r9Ù0@@0/??  tşMª     !#'2654&'7™ OW@b 4’aqk4/,*	†     z¢ï·   #5%3ïØc¢Y9€u   z²'Ä    4632 &5326554&#"z¼š›¼»şÌ¾£aTS_aSQ`cÃÁ¦JŸÂÂ¥drseNcrna ÿÿ f ˜xµ &{  {j  ÿÿ U  ‘­ 'ÕÿÛ˜ '|  ØÖ    ÿÿ P  É­ '| ì  'ÕÿÖ˜ Ö    ÿÿ o  í» '|—  'Ø2   × 1›    DşxM  "  32653#"&547765"&5462L)`¸tmd}¹á·ÄÖ mBÁ7l88l7¨jvÁc%msq[¡ÌÉ³­¯qN’=->>-,<<  ÿò  W°    !!!#!!!!!!WüıÌÍâp·ıMNı¸Áú¯ÈaşŸ°˜ş)—ıíxİ   Y Îİc   7YJş¸wIIwş¸JwşµşµIPO{ş±O{ş±ş°{Qş¯   vÿ£ì    )  #"'#7&54$3273&#"4'327	şø°«ƒa¾’¬Ö”gŸ‰ü,b4f¦¶Ñ8ıÛ[yºÌ©ÖşÁ¨R›çÀhSÒB«}¥ÿ»şÚcôˆoşëö¶ƒü@ı  ¦  ]°    !2#!#!2654&'`“Üwşøãşîºº  ˆ°şÛiÂ~ÂçşÇ°şCıŞ—x{—     ‹ÿìj *  !#4632#"&'732654.54654&#"D¹Ïº´Å€K¼VË¶Qµ&+1‡5kqJ½W‹hXÚWĞë³Ÿ}ËE3_ˆLŸ²,› ,^R4`“ŠQYÏT^kşÛ   Nÿì|N * 5 =   '#"&5463354&#"'46326632!3277%2675#"!54&îşûˆAâ§¼ãİßnhiŒ¸ò»s°2?®iÒèı(®•”y/@ü	H2äuŒjPs•†´V^­—®Uk{nQµSSOWşÿés°¿Lˆy–J6ínSM]4«‹„“     ~ÿì-,  +  #"&&546632&''7&'77'&&#"32654ùuØ†‡ÜypÏ£y0ÚIÀ„·9ï¯½Ih!‹\‘¢§€}™şøşg]ıà†“é‚rÃ”cƒ[1Ÿ6‹düó8=I¿§ŒÄâ¸     G ¬-º     !5!462"&462"&-üæı 9r;;r99r;;r9X¸:0@@0/>>üş0@@0.??   [ÿz4¸   &  4663273#"'#7&&#"4'3265[{án^I|fÃ|àhVJ|dÍ¹aW>HŠ¨fWş¬7B‹§'Ÿı‹*”ÍšşÀş‰#•Ë•7Âo¶ Úµ¶oıPÛ¹   •ş`'     #"'#3632'4&#"326'âÁÅq¹¹qÂÃã¹œˆ¨TS«…÷şÒ}ı÷ ıÊ„şÚşú·Ô•ıû”Ó       ˆ°    3##!##533!3!5!††Áı#Á††ÁİÁübİı#ü ¡ı_ "şŞ"ıÂ     ›  U:   !#3Uºº:  š  ?:   ##333#¿kºº[ßş<èéÍş3:ş6ÊıóıÓ   "  °   %!!573işù²ü††ÁKT}TıÏ‘*}*¢  "  
    7#573lººe={=ı£7{7â  ¢şKñ°   #"'73255#3ñ«œ=6%=ˆı3ÀÀÍ°ùı¨ºšĞGjû–°û˜h   ‘şKğN   632#"'73254&#"#7tË³¸§›=6#B‰o}¯Qº:š®ĞËüô¤¸Â÷‹€…üÔ:     hÿë	Ä  #  !!#"&'4632!!!!!27&#"	ü°²r¢şŒ‹ş¢|ªFı-wı‰İûŒqfml­ÂÃ–«5¬—ş,ıüåÏşÇÓë  aÿì N   , 4  466326632!327#"&'#" 532654&#"%"!54&ayÛ‰É=AÄpÏêı2¤†¼xJ‰õ‡Í?>Ç†Üşø¹ ‹‰ ¡Š‡¢-c–‰' ş‰udfsşëtªÅl~„pdcq0ş	·Ø×Î¶ÙÖÖ£Š}–        ‚   36632&#" °¢;T(3·®©¾İû`   ]ÿìÄ      5!5#"'763  '27!¹şãşÁôôİ¥‹=/è.dœşê§©ŞüÏÓYEu:Xş‡ş±TÅş¿¶Û"Úä  ÿäşK¼   ##"'73265#5356632&#"3`Ë¨š=2CAG««¯¡;T&<«Ë«ûş§·“h\x§¼“
Ãz  eÿì7  %  #"$'54$326653#"32øşø°«şö•’¬ğ›`]§şùa¾Ï½¶ÑÓ¹¿Ë©ÖşÁ¨¨>ÏdÒA¬›ƒ„ş³=¬öşëökûşá  [ÿìº°  #  466326653#" 5326554&#"[{áÏˆG@–ÏI|àŞşñ¹§‹§©‹Š¨'Ÿı‹Šd€şİ3Š©ş‰3û	´ÚÛ¹µÚÚ  Œÿì   6653" '33265ªsaŸ±ÂôÓIïşä¾®¡£­°Õ‰“ÒÑı~Çşüâàü&¯®Û    ˆÿì   #'#"&'33273>5“ °lÑ­µ¹ÈÔF¹DD´“ü»kÉÅÀıEöƒ#Hl   ÿ´şKe:   #"'73265eª˜;4CAH:ûmª²“h\“  bÿìéO    2 '"&55!&&#"'6267!ÿÜ|ØzĞéÍ¡ˆº{IŒb—ıó‰OşÔù$•øşét¨Èl}†ü5¤‰}–     ©ä    #'#53™–•™öpî
ªª   Œãöÿ   73#53À– şqûUª
şî
ÿÿ x!B°  p    ËØ×    &533265Ø¥şô¦—LIFO×y“”xFONG  îhÂ   462"&7l88l7W->>Z<<    y´'P 	   #"&4623264&#"'|[\{{¸{şµC10DC12B€Wuv¬zzV/DBbEF   2şO’ 8   !327#"&5467~:qN04FZYg†{-[VHy,hVYš8     {Ù>è   #".#"'46323265>{\)<a+):|y]#8`3+9Ül†>?1kŒ:D-    ^Ğ,ÿ    3#3#]Ïşó©mÅÚ–ÿşÑ/şÑ    ~şkÕÿµ    4632#"&72654&#"~dJGb`ILbW4F00#%2òFa`GF]^E#00#$24 ü§ØşHş   #3şHŸşşàØ& ıoØÿş   3#ş0àşô•şşÚÿÿü‹ÙÿNè  ¤ü     ı^Ùş”t   '664&#72ıtKF[K•šNMÙ™N'jgU=PG ü'äÿî    #3#3ş©şÎáÿ–öÎä
şö
  ı8ş¢şÿv   462"&ı87l88l7õ->>Z<<    ·î›?   3#í®tp?ş¯    qğƒˆ     3#462"&%462"&á¼e‡şÀ7l88l777l88l7ˆşø%-==Z<<+->>Z<< ÿÿ “kyI  x    ±  0°   !#!0ıBÁúî°       s°    3!%!†ªCú¬Lşg°úP(   gÿìúÄ   #  !5!#"$'54$32#"327Àıû:şø±¬şö“’¬¯‘¿Ğ»¶ÑÑ»ºÌ“˜‚ÕşÂª©9ÎiÒB«¨şÅÏşëökúşàı   2  °   #3#šşfÎ¬Ï‰ûw°úP  x  !°     7!!!!!!x©üWWòıS”ül?     ²  °   !#!#!Áı2ÀOúî°  E  D°   !!55!!òşCüáşÎı$»ÎıÏJGıÔ   M  t°   #  2##5"$&66353#"32654&B ’ÿ  Â¢şş‘ÿ£ÂÂ¬ÃÂt¬ÃÃ÷Œü›ı‹¯¯ú8ıŒ¹û
Òş˜Ğ
üöÑµ³Ñ     Z  !°   6653#& '33œ®ÁíŸÁçşïÀ¥•Á×ªığŸõ“ş–j*íıï£×¤   q  ËÄ $  %6754& !53&5546323!áŠšÂş®À‘şİjxş¡ ıxjÜş¢ê†çöúåqğşØ¢f3¢oº$Ÿœşä´‚ şÍf   dÿëwN  !  327#"'#"55327327&#"îN0J“&kÑÀäâÄËkıÌ’‡­RU¨†•:üãŒ‰"¥¥ô=¡ıº¯Ãº¾¼ã      ş€MÄ  *  2#"'#4664&#"32654&'#5326]ÁëbX{ƒùÍµxºzÏgˆkl–,^†šŒm–Ux~ÄÛ®[˜.-Ã‚Íï_ş5±l¼kş{f‡küÃ4? v¥˜w     .ş`ß:   3#3
½ş…ºş„½&ûÿş'àú    `ÿì'  *  4632&#"#" 5547'&&32654&'"İË¯‹†—|Ve»ÏvÛ‘Şşù¼ck>¡‰ˆ ©}ˆ¤õˆŸ7 ;H>l™şóÄ'™ó…'ò¥#'Œıc°ËÊÆˆÛÍ  cÿììM %  32653#"&547&&54632#4&#"33#“vq›¹ÿÆÌøÍXbçÊºù¹kp‡ôÄàê0MbnQ›¹±“ºB$zI”¦³Fe[J ”     mşÃ°   '6654$'&&547!5Ãş¢ŠfCR÷QGlCb/3şÌ6g[’ıƒ°xşU¡å…ZaHXNE¬6T5U-DN-™‚@–C˜     ‘şağN   632#4&#"#8xÈ¾®¹l€\‚"º:ˆœÅÌû¤Qˆ|WNüï:    zÿìÄ     #"532!54&#"! 67ìßÛîìßŞëı!%‹ˆ†Œ%ıÛ’€ş¿ş­L4Í=Nş¼şÍ,7ãññãÏ'åúğã     ÃÿôK:   327#"|7@0'FIù:ü×?@—&     %ÿï;î   237#"&&'#'&&#'6bx!«-#&$*MN>æşâÎŠ`5-/*îP_û«3'˜%VPQüõë8.    eşw©Ä -  &#"!3#'7654.5467&&54$32r„a M…–¶Ç| OhHk91Læ©wA¤–vƒä‘p$gUÛ˜œ£pA%1i@§=T@<>'.3Bi™o‘Ë.*˜`Ÿ¹'    )ÿô¤:   #327#"!##5!qœ6A0'FIùşo¹©H¡ır@A—&‡ü_¡™    ‘ş`N    2#"'#46632654&#"PÏôà¿ÃrºqÍ„S«‡–‘…uNşæşBğşè|ıøäì€üÈ“ÃÃÍàØ©  eşŠáN "  2#4&#"'7654&'&55466=½ç¯†o„›@†bPcJb/1FVìøw×NÕ´nƒÛ³ şüc&`P?§>U6<F++4Ó*˜û‰     `ÿì{:    !#" 554667!32654&#"{şäÈzİŒÚşövÙŒ@üŸ Š‹Ÿ¡‹‰Ÿ¡”şïŒëˆ/ÿ˜òˆı×·×ÙË¬ÎÌ    QÿìÙ:   !327#"&'!5!Ùşi+1*Lj}uş¥ˆ¤ıi…‚4“’“–     ÿìö:   3265&3 #"&'IÉªvÃqşÿÚÂÈ:ıyşÏú¶ç!ñşéşùşÁà×—    Wş"L:  "  $ 5474632 #665&&#"lÿ şëe¡
µ¦Šq‚á‚şŞşû¹¹ªÄ¥‚B3û¨W…Œõ­åÌi}ø•óş×ş3fŞ¤©ØR     _ş(C:   665&3 #& 3«ÃzÂvşãşö¹ÿşûº¦¢:üNå²èìşéşışĞş9É6æşÂä±  zÿì: #  326533265&3#"'#"7ÄŠrjlq»qkjrŠÃ‡Ï¼ğU)¤w¼Ï‡:şåïËã­¦-şÎ¤ªâÌïôşêşíşÏîuy1ë   yÿìyÆ  (  #"&5732655& 5463267&#"y<SåÈË÷ºŒ|t‚Ùşó¸–Ÿ²?Hı”¢Š“”s	¦Óî÷×Gş°›’˜¦Ù »Å²ş¡R…½hÆÄ  ÿÚ  n¼   6632&#"#&#"'632$á+kWH4$'F$ş×¿şØ'C'$4GXk*ûcX—OıwıÆ<‡O–T]     Jÿì:  &  ##"'#"47#5!&'!32673326ˆ@¼«ñSSğª½@tÑşşJü»K`Xiq»qjV`¡¬ÅşïşÍïï0¿²™ıöªÇÈ©Ëã§¢şù¢§â  *ÿõ±°   !632#'265&&#"#!5!”ıö„ôşüí›˜£¢–ŠÁşajş90ñşNã–‘”–.ıZ  {ÿìÜÄ   #  54$32 #&&#"!!3267ÜşáîşşşÉ°èÀ§—¹Î:ıÆÆ² «Îçûr6‹É5§şıå¬şñêíşè‘´  1  ;°  !  !!!#57>7!2654&'îiŞşşŞıÓş Y¬?(]d4w_Œ¢Š°ıËğËÆóı¿şŞşÜ‰kêóÂı-ıÀ„€œ  ±  M°    !3!!!#3!2654&'rÎÀjâşÿßıÓı2ÁÁ_ ˜Š9wıâ½¿éœıd°ııõztŒ    >  Ô°   !632#&&#"#!5!¦ığ ¯úòÁ‰¤©¦ÀşhhşP(Úİş-Î˜†*ı>   °ş™ÿ°   3!3!#!°ÁÎÀş@Áş2°úíúPş™g  ¢  ±°    !!!!!2654&'!ıBjä şşßıÒıB_Ÿ™şLäÄÅê°ııİ˜€{   2şšÉ°    #!#367!3!!!Ç¿ûëÀw^o g¾û»Æşkş›eşšjeÕoúíuşTûş       5°   ####33333#¨œÀ¥şdğêş<ãƒ¥Àƒâş<êï˜ıh˜ıh °ıˆxıˆxıQüÿ    PÿìjÄ (  4&#"#46632#"&&533265%#5366”©™€­ÀäŠô|oşÜô‘í„À¶Œ»şÃ´³’–)t‰ht¸gÛÃe¦0VÿÄæg¾ƒs™’x ~  ±  ÿ° 	  3##3?ÀÀı3ÁÁ°úPbû°û  /  ö°   #!#57>7öÀıöY¬?(]d4°úPı¿şŞşÜ‰kêóÂ    MÿëË°   3#"'72?3Oßıı4Zy[O[i3&ş×cMûCta3	˜e4Y6     SÿÄãì  ! *  3##5#"$$3353"33332654&#x¥—˜şô¤#º§şï——§ºÖ¼ÛÚ¿º¿××Ã˜şõ¥¦şò—ÄÄ˜N˜Îş›çÍÎågü™ëÊÈê    ¯ş¡—°   3!33#!¯ÁÎÀ™­û×°úíúñş _  –  È°   ##"&'3327ÈÁi¬nùòÁ‰£¾Å°úP[ØßÓş2˜†6¶   °  ×°   !3!3!qõ¿òÀùÙ°úíúíúP°    °ş¡j°   !3!33#!qõ¿òÀ“¥ùı°úíúíúçş
_°       ¸°    !!2!!!2654&'[ZïşşâıÖşf[_Ÿ™Œ°ı®åÆÅëı¨ıİ˜€{     ²  0° 
    !!3!2654&'#3rjä şşßıÓÀ_Ÿ™WÀÀ^äÄÅê°ııİ˜€{ı@°  £  ±° 
   !!3!2654&'cjä şşßıÓÀ_Ÿ™^äÄÅê°ııİ˜€{    “ÿìôÄ   327!5!4#"#6 32#"$'T« ­ÉıÃ=Ïº–§Áè°şı¨îşáÎ´‘ğíœ®å§şËÉ‘ÉşÌ¥ûç   ·ÿìÚÄ  %  #"$'##336$32'#"327Úşø°¦şù•ÑÀÀĞ
¬¯¿Ğ»¶ÑÓ¹ºÌ©ÖşÁ¨ *Çıƒ°ıdÎ7«©ş¿Õşëökûşáı  Y  d°    !!#$4$3!!!"£ş°şÓÍRşæóÏüí¥“şïœ¥7ıÉloĞçúPù„ >”     aÿì(  (  2#" 55766536"32654&gÌõvİÚşöı÷Œb˜q|Š¥¥“¯ˆ ¡‰Š ¡üşïß™ñ…#õZU’,H?}Œ'¹šª˜·¢®ËÌÄ™¹      ):     3!2#!2654#%3 '#¦ØçZXbwÛÈşĞ2tsîşÕïöı:—’Ky †]•ÛşºVN¢”0   š  G:   !#!Gşº­¡ü_:     .şÂ“:    776!3#!#!!!ƒ@l¹‹¹ı¹/ñş³—OŒ°ü]ş+>şÂÕøşşş½       :   ####33333#ë‚¹‚şÑêƒş¢à¹~àş¡ƒêÖş*Öş*0
ş@Àş@ÀıõıÑ    Xÿí¬M &  4&#"#4632#"&5332654&##536ßtebƒ¸ì±¾ÔXQ½æÀ»ó¸ij‚ms¹É½LYfE´£—Iz$@¼•®·œOqbN[Oœ  œ  : 	  3##3H¹¹ş¹¹:ûÆüë:üê  œ  ?:   ##333#İ‡ººylàşTĞëÍş3:ş6ÊıøıÎ   ,  :   #!#57667ºş—¤J5ZN:ûÆ¡şkşéğ£
¼şÏ    R:   %3###3ûpç¹ş¢€ş›¹ğõEûÆüí$üÜ:   œ   :   !#!#3!3 ¹şººñ¹Îş2:ş+Õ    œ  :   !#!#!¹şºe¡ü_:  (  °:   !#!5!°ş•¹şœˆ¤ü\¤–    dş`i   % 0  323632#"'##"5%4&#"326%327&#"dÒ·U@¹F^¸ÒÑ·aE¹BU¶ÑLŒ{?/-C|‰üm‚z:/*=z„	6Ïş+#şÊşÜïşæ şU¨õÌáüñÀ²¶¼Ú    œş¿‚:   3!33#!œºò¹¦üÒ:ü]£ü]ş(A  g  ½;   !##"&'33273½ºz€ËÕ¹ä€zºˆ ĞÀCş·ò     œ  à:   !3!3!VŒ¹‹ºú¼:ü]£ü]£ûÆ:    ‘ş¿m:   !3!33#!KŒ¹‹º˜¦úÜ:ü]£ü]£ü]ş(A:       ¿:    !!#!!!2654&'ú¸ÖÜºş6ş¿úhrod:ş‹¼¡¢Ä¢şŒşik]Zs     : 
    !#!3#3!2654&'V¸ÖÜºş6¹)ººû×hrodÅ¼¡¢Ä:ûÆ:ıôşik]Zs     ı: 
   !#!3!2654&'V¸ÖÜºş6¹hrodÅ¼¡¢Ä:ıôşik]Zs   dÿìàN   "#46632 #"&533267!5!&&c‘°vÄjÓw×Š´ğ°fwšşj”–¶~V]ªeşÏö˜û‰à§f‹¸¡˜’±     ÿì0N    !6 32 #" '!#3 654&#"V	ÊÔ|àÑşöşı¹¹º§¥¨ŒŠ¨oØşâå:ş‰Úş):ı×´ÚŞÆ±ŞÚ    /  Ç:    #!#&&5467!!"ÇºşéÿÈhoŞºŞlY&şögz:ûÆ¥ş[Á&Ÿj”µş´Oage    ÿèşKß  "  !63 #"'72654&#"##5353!cşâ{ÅWª˜=6#‚HipZˆ&¹¤¤¹¹şş—ş}üÜª²“h\ xr`Nüı¹˜¯¯    gÿì÷N   %2673#" 546632#&&#"!!Hc”°xÄnŞşıuØ”¶ñ°h‚š
”şl
™ƒxZ^¨c( Ÿ÷†Ú®i‡±˜ ­  '  †:    !!!#57667!2654&'ß¶ÓÓ·ş)ş¯œ¥A6UM¼eurc:şdµ”“¼¡şZşëä£
§ÓıÌşiVQ`  œ  §:    !3!#!!#3!2654&'Vñ¹"´ÑÙ½ş6şººªeurc¡™şc±–—»
ıö:ıÌşiVQ`  ÿı  ß    !63 #&&#"##5353!yşÌ{ÅW¹ioZˆ&¹¹4¾şù—ş}ı5Ìup`Nüı¾—««  œşœ:   !3!#!Vò¹ş­¹ş§:ü]£ûÆşœd:    œÿìu°    #"&'#"&'3326533265uáÃm«14²q½×Árbr‚Ç|ijz°ûŞÆÜWYYWÛÃ&ûİ{Š‰|#ûİ}ˆ‰}"  ÿë­:   #"'#"&'3326533267­Ê®ÆY_Î§À¹[Sboºe\Ye:ı'°Æ””Ã°Üı#fuxgÙı'gxufİ ÿÜ  ü    !!!#533!!2654&'–ş¿»ÔÔ·ş*¿¿ºAş¿iqod:ş°Êş¶Ñ:—Eş»ışEwda}    ·ÿí Å &  36$32 #&&#"!!32673#  5##3xÇ“¬æÀ§—´ÏıâÆ²£©ÀşáîşşşÉÇÁÁ@Á&ÿ è¬şûâ—íşè“²çûr6ıW°     ™ÿì¡N $  3632#&&#"!!32673#"'##3S¿ÿÑ¶ñ°h„˜
µşK
™ƒc”°xÄnÑşÀººgßÚ®i‡±— ­xZ^¨cŞş0:     (  ä°    ####3#!‰ª¼˜Å«ÅıŸ“Ç¶şJ¶şJ°úPZI       %:    ####3#!'íu¹|w½ºŸ½¾ş/€)ş×)ş×:ûÆÁ;YY   É  õ°    !3#####!#3!Š‡5«Å–ª¼˜Åş³ÁÁE“ÇYWúP¶şJ¶şJ¸şH°üªI     ¼  ä:    !3#######3!'vŸ½¾zu¹|w½yÑººÉ/€ÁyûÆ)ş×)ş×(şØ:ı‡;YY    “  ?°  !  32#&&'##'#"#6633!3!AôìÁ|š…Áˆ‚Àìó*şx²ıŸı»*ÔØş‚x‚#ı—v{ş|~ØÔ†ızè   –  K:    35667!#5&&###'#"3!–ÊÒşá¿şàÎÅºsŒ5¹>Œu¢·ş‹¶ÍÒßş!ÓĞ­±’şO»	~•±\F   ¶  r° " &  !67!#3!!32#&&'##'#"3!ÅOşbÁÁYşy³şxôìÁ|š…À‡‚ı»x³iıl°ı|„ızÔØş‚x‚%ı™u{ş|*è   ›  ;: ! %  !567!#3!!#5&&###'#3!†Fş‡ººÑşá¿şàÎÅºsŒ5¹K…o¢·ş‹¯­hş<:ş"Şş!ÓĞ­±’şO»	€“¯\F     PşFª† ) 2  4&#!5!2##&&54673665%#53 73#53Ú‡şÎ+Şs‚‰ş÷à4‚Jz¥¢4†Ÿş¾™†?¼— şrú*n€˜Ø²g¤-)­‚ÄåmiB}5¨czƒ”y˜¥ª
şî
     LşFv0 ) 2  4&'!5!2##&&5467367654%#53 73#53§pşÉ'Êîf[×óÈ2‚K|Š¥¢6rC?şè™ˆÚ— şrú	CS™ª‹Iw$B¯”¯miB}7¨azƒ0.H¢˜ª
şî
   gÿìúÄ     #"$'54$32"!&27!úşø±¬şö“’¬¯‘ı¶¶ĞÎ¶¶ÊüìÓ©ÕşÂª©9ÎiÒB«¨şÅÏşíòøûp ôìşø    [ÿì4N     46632 #" 5! 6"!&&[{áÔ|àŞşñıŸ¤¡şÜ}¢^£'Ÿı‹şâå:ş‰3ûD›¸ºyµ“—±       İÃ   7663"#3C!#3†g.@@ş|ªşĞv‚?—x«<Tûy°    .  M   7632&#"#3ÛM¬G#<ş×şƒ½<ddò”0-ü´:     gÿsú4  '   #5& 5 753 '4'#55365úşşã¹åşñç¹â¿™¹“£¤’¹—©şİş‘#q#`$vvx%şşÙà	#adşîß]Şşìfd"â     [ÿ‰4µ  %  4753#5&56654&'#553[Ô¹¹ºÙİ¶¹´ÙFcvte¹brqc¹'Ò*"po şØİØşØkl'ÜşyÍ«‘Ğ ba!Ğ¥’Ë"f     œÿëoQ , @ I  2#"&'#"&'463"3265332654&##".#"#546326753Û»ÙÙ»p²44°p¹ØØ½cqrbr‚Á‚scpodh+P‚¸4q€n(H¿jş@B[;¯ğÖıÆÔğUXXUèÍJÔñ‰ıÄŒ›‰|¬şTz‹œŒ:ˆŸÂ"Pp$nlRşP<if2u   ~ÿëªñ + ? H  2#"'#"&'463"32655332654&##".#"#546326753B¨ÀÀ¨Ğ_/œb£ÁÀ¨R]\Sbo¹paQ]]Qª,O~À0r€o)J·mşAA[;DÛÂşßÁÚ•KJĞ»2ÁÛ˜ˆ|şŞ{‰xgëîguˆ}!|ˆÇ Ro$nlPş†N?hf2u   œÿìu   (  #"&'#"&'3326533265%5!!#5uáÃm«14²q½×Árbr‚Ç|ijzüB,şµ¨°ûŞÆÜWYYWÛÃ&ûİ{Š‰|#ûİ}ˆ‰}"èkk}}   ÿë­°  &  #"'#"&'33265332675!!#5­Ê®ÆY_Î§À¹[Sboºe\Yeü“,ş³©:ı'°Æ””Ã°Üı#fuxgÙı'gxufİkk€€  uş„¼Å   #& 554$32 #&&#"3¿Øşø  ÷ Áµ¡ ÍÅ|ş„lVÿô± Ÿşøà¬şüÔôÊşû     dş‚àN   #&5546632#4&#"3¢¹±Ôw×‹³ğ¯e„œ–‚mş‚p&Ù#™ùŠá¨eŒÚµ¨Û  t  >   %#%7%73%X!Dşİ¶¨áşßD%ÍşŞF#¼¥ç%Hşà¾¬{ªş¿«{«m«}«Kşh«zª  üg¦ÿ'ü   '7!'ı¦¥#}élØ   üqÿd   2#54#"#52>şvo€r*-o‰v<ljÁGln$p/:~S ıfşTW   53ıf³;MÜ{ŒtA  ı¤ş“W   '7'3ıñM;µAtŒ{ úşÄ¶¯   ' 5 B O \ j  462#4&#"4632#4&#"4632#4&"4632#4&#"462#4&#"462#4&#"4632#4&"4632#4&#"ıs¾tp30.3Şt]_uq5.,3Hu]_tp5\3şËt]_tp5.-3ıOs¾tp30.3ıMt¾tp30.3şŞu]_tp5\35u]_uq5.-3óThhT.750şëThgU1450ş	UghT147.ıùThhT147.şäThhT.77.ThhT.750ş	UghT147.ıùUggU1450 ú,şckÆ  	     " '  #'37%%57%'%'7ş/z`F:z`FMş¦ûuş³Zœ@DşÛüóşÀE&+”AÆ`”BÄ<ş­a¢Rş ş|bG;|bG®™DÈü™EÈäFEşÕüãş»G+ ÿÜ  üq    !!!#5353!!2654&'–ş¿»ÔÔ·ş*¿¿ºAş¿iqodıÒÊş¶Ñ˜ÁÁü¢şEwda}  ¨  ×°    #!2'#654&'!!27'7iÁìg~m‹v¨%¥‘ş XbEnn:ıÆ°òËºpŠg™7A[‚ıÅyf     Œş`#N  "  '#"'#3632'4&#"327'76jonnYsÅq¹©	qÉÃã¹œˆ¨TS«R<fnZ2î—}f{8}ı÷ÚxŒşÚşú·Ô•ıû”'sggb  ¢  #  	  #!#!3#ıBÀÈ¹úî°P    ‘  Bv   !#!3Bş	ºø¹¡ü_:<    ±şß|°   !3  #'265&&###!0ıB²<õä‘ÌÎµÁş/şÏşğşøşç“ÃËËÔıa°    ‘şå¾:   !32 '6654&###!>şlïbªu0€x²˜pº­¡şäşü×bÈ†’!™y‘¨ş:    £  ÿ°   	###5##3333Òşp½ñş¢P”hÁÁh”MC°ıNıôôır°ı ÿ    š  :   	###5##33533Zş®wëşë2”eººe”*:ışıÈÍÂÂş3:ş6ÕÕÊ     D  ‹°   ##!5!33#°Áş%œ–üïıÔVìır˜ı~‚ı?ı     >  }:   ##!5!33#ˆºşeUzkáşSÑëÍş3¡™ş6ÊıøıÎ     ¨  „°   !!!#!#3iŞ=ıƒÀı"ÁÁ>r˜úè¡ı_°    ‘  i:   !!!#!#3Kñ-şŒ¹şººeÕ™ü_Îş2:    °şßÍ°   3  #'265&&###!#!ÿv<õä‘ÌÎyÁı2ÀOAşÏşğşøşç“ÃËËÔıaúî°   ‘şå°:   32 '6654&###!#!ö ø"Ñ™0|{¼ ¤¹şºe…şü×&£á’ –}’§ş¡ü_:  qÿä¢Å ( 6  "'#"$55463"327&5546632366554&#"¢×³¬²şäŸuÒ„v”ì¿F8y„h½v¶æofhyı}xubhycazIB²BÄ¬±"£¥şÙ¦ìş×aªãšışÌıëşö_4˜íJHçù±ÎÒ²    mÿëœO $ /  "'#"&5543"327&5463236754&"œ²ŒvŒáÅ›I]©‰.,Á­Œ²€OaşŸfIxF9B•§:Í­’8Áğ¢^ÀëùÎbã©Ötsºu‚z   4ş¡“°   !5!53!!!33#!«ş‰wÁşÎÁ˜¬ûÖ——û…úñş _     ş¿:   !5!#!33#!1şîÄùòº€¥üÒ£——üô£ü]ş(A   –  È°   33673##5"&'W‰ •yxÁÁr•øï°ş2š„6şÒ!¶úP["îèÙÚ×  ƒ  Ù;   !##5&&'33673ÙºFS–°»¹¯–TEºˆ	‡…ÌµCşµÓşê
  Š  ¼°   33632#&&#"ŠÁ¹ÊùòÁ‰£»È°ı¥5Øßş-Î˜†7ıK     ?ÿê½Ã  %    5&&53463  !327!54&#"éşâş³™¦˜PWı–ü‚ŞÌ³¦/@Òıà¾³«ÂQ)[Å¢Z}´¢ş£ş¾l]Ü÷S-5Z!Ùåşı ÿŞÿìcN  !  " 5&&53>32!327"!5&&½Üşìxw“e„ÈpÓêı#³Š®oqˆşÙp˜ˆ!ú®†“0‚ÉnşêşıM Å’XÑÊ£“›   £şÖÌ°   !#333 #'265&&'!dÁÁ…âıøøùæÇÇşì°ıqıˆşÒúşøşä˜ÁÉÊÒ    šşş:   '654&'##333ÃÎd¬p0ø­¥²ºº[Šàdâ´]Å|’9æŠ’ş3:ş6Ê    ±şKş°   !3#"'73265!#rÌÀ«œ<6%=AHı4Á°ın’ùı¨ºšg\Õı°    ‘şKõ:   !3#"'7265!#Kñ¹«˜<4<BHşº:ş+Õûmª²“h\'ş2:    ]ÿìÄ      #  5!5#"'7627!€.dœşê§şãşÁôôİ¥‹=/!©ŞüÏÓÄş‡ş±TÅş¿¶YEu:XúÆÛ"Úä    hÿë,°   !5!#"&&5332654&##5ıvkşkÙéşóà†ÛvÀœ{‰£¦}şçÆÃèi¾‚rš’x—  işu(:   !5!#"&&533265%#5ıˆeşrÔèşôŞ„×zº}¤şÉ ¡™vşáÅÃçf¿ƒqŸ•y"—ÿÿ :şKt° & °D  &Ş«@ ¯ ğ    ÿÿ ;şK–: & ëO  &Ş¬ ¯ á      W  e° 
   3!"$5467!"£Âıßäş÷ÿàmş¡Œ¡ŸŠs=úPòËÇëı*8–€‚Ÿ    Y  g°    !"$54$7!376676'3#%!"Gåş÷ãjÁXor@º/åÃşïş ˜…ôÉÆí=úë’{¢§D—nÃè8—şŸ   dÿçn  +  32336676'7#'#"5&#"327'dâÄ·j¹_N‰—A³)yÙ‰òNlÛÀäÇR¡‡”‘ˆ§S	=ƒMûA_xĞ½ºØfÇf©ù„º¶ô1†ßŞ­¿“>    6ÿãÕ° '  536654!!5!36676'3#54&'ş›Ÿ“şËş kïüíÛSAt†Aº0öÇş½‡uy{ƒûÑÉèbEşüPO[Î¹»ØX»€ış×M@x     1ÿãè: '  %36676'3#&'54##'36654&#!'!ç_pvB´-ç¸‡‰ØÍÀzn}uşûÄÜ¼¶ÕX›‰™¦†€9ÍğpƒG–WJU]–§˜J4²    Rş×õ¯ !  53665!!5!3'67#&'54&#¯©¤›şÊşñ!èôåŞ©aMjQk<’wy—}…—ÒÉâdFşø©”aÈ@Hsn4«~  yşÇÙ:    '3654#!5!3'67#&'54#ÂÛéõşé'İlV¾½šbMiTg3Ú¸—¡²–gS„¡I5ÊL”aÊ>Ht}!…^´   Dÿëp° #  !#57>7!32676'7"&5'şY¬?(]d4_YO‚—?º)éÃ.³·ı¿şŞşÜ‰kêóÂû¬`tÍ¼ÀÒfÇfìşÚº´     ?ÿë:: !  !#57667!32676'3#"&'1ş»œ¥A6UM¯ZOl{A³0l¾x®³¡şZşëä£
§Óı!`y·«²ËP±|šæy¸±  ©ÿçq°   36676'7#&'!#3!é]J†”B»+{ØŠ«µıBÁÁ¾°û¬eoÍº·ÛbÊg¨ûƒ¸»'ı°ın’  ÿçM:   !#3!336676'3#&'Cş¹¹ú¹\Ml|A²0æ»§³Íş3:ş*Öı!duµ«¬ÑS±yêşñ·»     vÿë Å "  "$'4$32&#"36676'3¹¤şø•”
¥Ü‡;†¢¬×b°q–5º&{Ş›­¯XŠDşşÒşƒÕu™†šÏ³[[ˆÉm     eÿëÇN   %6674'3#" 5546632&#"Q`Z²Ä­ÜşğvÖ‹¹`,cŠƒ›¦‚PYzr–V™©2÷—ùŒB:Ü³«Û  #ÿçG°   !5!!366'7#&'şş%€ş\L†”Bº+yÙ‰ª·üH`rĞnÛbÊg©ù„·¼    Fÿç·:   !5!!36676'3#&'¬şš‹ş•^Mqw@²*è¹ª³¤––ıµct‰—®}Œ<Ğï¹¹     –ÿìÿÅ )  32653# $54%&&54$!2#4&#"3#XÏ°›ÌÁşşûşÄx†%“õŒÁÁ’§Â­£ÄÄ±µ’x’˜tƒ¾gåÅÿV0¦eÄÛeºugˆvu}~   opÉÖ    3#3&5‘tÄßYşŞ¨PI²”BşÃR[{U;_»  ÿÿ %¶    ÿÿ %¶    ÿÿ ¢‹" F—Ù LÍ@ ÿÿ ‹É" F—„ ff@ ÿÿ şl¡   ' C 	ÿ  C	   `1x   #546j]¸aH“ˆtfÈ   0G    '6753™i]·aH‚‚dÇ   $şå; µ   '6753i[¹cşåI’vdeÊ    Og    &&'5]jM_ “H@Âa‡   ÿÿ h1» &l  lC  ÿÿ <†  &m  m?    $şÓd ö    '6753'6753i[¹cİi[ºaşÓH‰™¹¤lÓ@H‰™¹¤kÑ   F  $°   !#!5!3!$şlºşpº”¡ü_¡™vşŠ     Wş`4°   !!#!5!!5!3!!!4şjºşsşsº–şj–ş` —
™vşŠ™üö     Š"Ë   4632#"&5Šo\[rn^]oWpm]%WnoXÿÿ ”ÿõ/ Ñ &    ¹  ÿÿ ”ÿõÎ Ñ &   ' ¹    X    & Ï·   #53Ï©©™  DÿëWÅ  # ' 5 C Q  4632632#"'#"&54632#"&5'326554&#"326554&#"326554&#"7§ƒ˜MO—ƒ¨§‚™OL—‚ªı§ƒ„§¥„‚ªihÇh³XJHVWIGYËXIHVWIHWûBXJGWVJHXeƒ©yy¨‹Gƒ©xx§‹{ƒªªˆHª§‹üBrBü7OecUJOdcTJOefRJOddSêNebUINfeS     l ™ µ   #53şÙ'&şs„…  Y ˜µ   #ç'şÙşşµş{ş{    ; nj"   7'£hÇhnBrBÿÿ 6»¥Ø      z‹øº   63 #&#"#úJ’ªn,ª«{ŠşÆşæ¹mıÎ     [  hÄ )  !!!536675'#53'#53'4632#4&#"!!!ş±>İûøM(2ª¦¢õÈ¾Ş¿oi‚\ş©SÖDš[	ƒ`E}ˆ}·ÇîÔ±k|š}·}ˆ      6°   # & )  3#3##!##535#533!3!'#35!%3'5#WßßßßÂşÁşbÀÙÙÙÙÀQ¿üa;aÚÌşÔşLwwàh¬˜”˜şèşè˜”˜ıüüĞ”””˜¶üçŸ  §ÿì°  (  #327#"&5###!233332654&'#şÊ6A#4IF|~çÇÉ¹yÊíºÊûbÀ‹‹‡„Ë«ıaAA––ŠŸ·½ıË°À¶şúş’—˜ÿÿ ¨ÿì° & 6    WU    9  )°  # ' + 0 5 :  !33#3!#!#!53'#533!3!'#37!37!#7%#73''‡SlÁs•º/éşòt¯ˆş„¯uşöå/¶‘sÀnVˆ¡ã$7´şz¥7şø?¥,şù¹Y)üéW(D]ÔÜş$˜Â˜şâşâ˜Â˜Üş$ÜüÊÂÂÂÂÂş¦*²ÆÀ­Qoo  Œ  :    2#4&'!#3!2673º¯¨¹eoş½¹‰¹>qg¹¥­:Á¿ş£Lxü_:ûÆİı»u~¯ıNÂÄ     _ÿìÄ #  !327#" #535#53 32&#"!!!Qş€´¥tfxxøşã²²²²
ój‡mn¤±ş€€ÃÒ" %|‰}¢#Ë¼}‰       ¼°   # (  ##535#535!23#3#!'!!!!2!&#!¥ÀÆÆÆÆ±ë6ìÃÂåkşŒDım•?ıªY¬ıûJTş¨:ıÆ0—^—ô„p—2,—ö·4^—YåV     *  ø°   #3###'3667!7!&'!7!Êì@É.˜öÛíãıîù}œı½.0öşç/Qu²´ıÄi}k\¾     ÿî°   #"'5755737765ş÷¯PlôôôôÀûûûû¾ÉdÒşÇ¦Zo²o™o²oYşÿs²s™s²sıŞ	X     ]  ë:    #5&'##5 753ÿç¹“¹Ÿ¹ß¹q!şşÚ·Èß ı4Ê!şõØÆÅm"É      °    !##535#53!2!!!2654&'!üş±¿ÏÏÏÏêşùòş£Oş±Z›¢¨ş şí‰ÙîËÕç‰&’Œ   zÿëƒÅ  ' 5 9  #"&554632#4&#"326546  &5326554&#"'¨˜{z¡{yœŠIBAMOA=L§¨§şüªŠXJHVWIGYşiÇin¨‰G‚«‘o:MfRINeL:ıGƒ©¨‹Gƒ©§‹OecUJOdcTóBrB  hÿëj  !  "&5#5276632366554&#"ÌÂÒbnq_…x—Î«kpÛYg0&gêë°#$²Æ­“%ÁşkbšcUõ{'RLÑ   ¢  ÆÀ    (  !5!46 #"&5326754&#"##33¤ı™gıuº8»¹œº£_VT]_UT_ş¼Ìı¯¹ËT·œ=›¾»£]º»¡bkj`eakkcû›nû’°ûq     g—8°    ##33####5!ŞŒ4ŒZppZş“[”‚!şv‰şwşqıçÈş8ÈQ    ˜ÿì“N    %#"&54632!327"!&·»‘ô‡ø„…ã„ı wšÄ¬ş—zs^r“Ÿ‹ó>ş¸nz*zşëq  ÿÿ Tÿõ³› 'ÕÿÚ† '| æ   Ü    ÿÿ dÿõS´ '× &” '|¥   Ü´    ÿÿ cÿõI¤ 'Ù  '|ƒ   Üª    ÿÿ Yÿõı¤ 'Û  '|    Ü^      jÿë2ì  *  2.#"'763  #" 554 "32655'&&<]¦:i¦`›1t—xŞÚşø äŒŸŸŠŸ şMDŒÙy;—0şNşn2¼şÖ¥#öÜ˜» ªÏùÛ=Zj    ©ÿ+å°   #!#!å¹ı6¹<Õíú…     Eşó«°   !!55!!kı»…ûšaıŸüÇFAıJ˜ÌÒ˜ıB   ¨‹ë"   !5!ëü½C‹—   ?  ˜°   3##5!0«½ıâõ¹;”úPtš  bÿëËN  , <  #"&'#"&5546326632 326775.#"%4&#"3265Ë~ß‰‘îPQì‰Ş€~ßˆ‘íQPï’ÎùP¦ˆr¹4r’P†¦÷¦…s¼5	uPˆ¥“ÿ ‘¸±³¶ —“ ’·³±¹şÁó±Ü¼£'*cÀaÜ¹®ß½¨*aÅ`Ş¸    ÿ°şK   #"'73254632&#"e¤9:.!›±¡<T%6¶k¢¨‘±ª¾Û     eô  +  6636327#"''&"6636327#"''&"f0ƒBRJ˜BN†fg…NB¡DOBƒ00‚BRJ•DP…fg…NB˜JRBƒ0…3:#N€¾mSD<å3;#M!€½mN#D<  ˜ ›ÚÕ   !'7#5!7!5!3!!Úıí_l®•ş`ş™_wÃşß”µô;¹ ÿ¡;Ë¡ÿÿÿ > > f   a@ 9š —ÿ–ıwÿÿ … ÜQ f " s@ 9š —ÿİıv  +  Ü°  	  3#	¼Œ”şpşlÖşé°ı'ı)×ıñıò   ÿÿ µ §›õ '  % ²   %$    ny3:    #3#3û8yÁş?Á   \ÿ_W ï   '6753ÅiH±O¡Hm\L[³   ÿÿ <  ö & J    J,      Í    3#5354632&#"3#!#3Ê««Ï½p«}qwiİİIºº«\µÊ=œ2kk^üU:     <  é   &#"3###5356632#0|LÈçç¹««À±e+¹cÒküU«v­¸=ú(   <  2 ' +  3#5354632&#"!54632&#"3##!!#3ç««ºª@?
/5ZbÏ½p«}rwiŞŞ¹şp’¹¹«o®¾–	ibr\µÊ=œ2jl^üU«üU:    <  2 (  3#5354632&#"!56632#&#"3##!ç««ºª@?
/5ZbÀ±e+¹|LÈçç¹şp«o®¾–	ibrv­¸=ú(cÒküU«üU    <ÿì› &  #327#"&5#53&''"##53546323–Ê6A#4IF|~ÅÅ=f·¹««³ ]ÛZÊ«ıaAA––ŠŸİû`«p­¾9,şŠ  _ÿìT L  #327#"&5#5354&#"#4&#"#"&&5332654&$&&54632&546323OÊw#4MBv„¼¼fbX\%ºberj¬Sè¹‚Èq¹‹riqşç¥Oá¯`V,Ê›¹ÉÊ«ı~Ÿ–¦—‚UruXF;ip|LLnXGCD>VyW‘¯\¥`]mUGKS<TtP…¸nR|¥ÇÃM  [şrî®   ( 7 = C I O V Z ^ b f j n v z ~ ‚ † Š   #"&'5463232#4&#"32653#"&53326533!5353!#%5!#53254'5!!5!!5!5!!5!!5!3254&###535#53#53%#535#53#539df€~he€C¼brT24ĞşJA@JJB@Iº\iRXm]h)6ùÄqÄ(Çoøm5Äì6oü\~gbËı[ı\
ı[ı\¼]v:<]üñqqqqqq"ooooooÔbyx^u_|x^ş³%IMT F-›HENNEpENNEOş†N]QS[6,üÉ;ÊqqÊşÅt©©tşã©ü¶©SRJttttttù8qqqqqqÄP)şÓü~úüù~ü~úüù  \ıÕ×s     $ (  	4676654&#"36632#33#3#¿üAüD$J\§• Ë:+98][/ÊÊÊKRü1ü1Ïñ::'‡J€—‹34@4_<A\L[ªıL
    ;  Ò°   #!5!Òı¾º@ı%—Hú¸˜   ZÿìDN    46632 #"&&'732654&#"Z€ãİ~å’ã¹¯®±‹¯'œÿŒşÌûüŒˆùš
°ŞàÄ¯àŞ  ÿ¶şKg ˜   %#"'73255gª—;4C‰˜õ¨°Âé   gş™! ™   #3!ººş™     ƒÙÒĞ  !  #"&533265#"&#"'46323265Ò¡†‡¡–JHGJ`F:w,"0S`E0,#0®_vv_6@@6
JiK3&KkK3&  àÊ    #"&533265''6654#72Ê¡ƒ„¡’JIELÉJB ”QD°^rs]5>=6|;RNB2;>    ßàŠ    #"&533265'3#à¨‡ˆ¨˜OIGO`™¤f°_rr_7=?5ÚÆ     iäFÔ    #'#%37#"&#"'46323265FªÅÅ©-ƒÃ`A6n(6M`@*|&4äôå>^G.?bF-     iäìÏ    #'#3'6654#72FªÅÅ©¼¾A;€†J<äºº|ƒ!C\XI;B<    ÿ^ÏF‚  
  #'#3#3FÅªªÄ"˜şŒÈÇÏU    náX•  
  3#'#3#’˜"Å©ªÆ"ÈÉèşùŸŸ´şı   ßàŠ    #"&533265%3#à¨‡ˆ¨˜OIGOş¦špe°_rr_7=?5ÚÆ    Ÿ–;   #546+k;¹T;Scoˆ‚M­     p  
  !#3#!Fıøn½ß¦Ø¼ıÆ‘Çşéûs®ı  Š  ï     3!2!2654#%32654'#Š–ÑŞ_XctÚÉş÷szëşøêl|åí£›Q~!•e®ş…bUÄUS¨   `ÿğ0   #" 546632#&&#"32670üÑàşñ{ç˜Ì÷¹~™§Ÿ—‡y»Î'^¤ùˆÓ»‚tË½j½Ïoƒ  Š   
   3!2 !326554&#Ši¢ûŒşÉşù¤ºÆ½·…öŸMüşÖôü£ĞÀ@ÀÍ  Š  ®   !!!!!!WıìküÜı›ş‰—™ş²    Š  › 	  !#!!!Kıø¹ı¨óş™ş˜  cÿğ5   %#" '5 32#&#"3275!5!5Bé—îşàòÈò¸&õŸ¦¹ ¶QşçÑ–SS*üZ'¼µÙÎÇT¾×Jî    Š  X   !#!#3!3X¹ı¤¹¹\¹òşıı    —  Q   !#3Qºº  +ÿğM   3#"&533265’»Ô±ÂÛºqr\nüÅÅ·¤^fm_    Š  W   #373#Ö“¹¹‚ãş!áş‡ıÕ›ıùız     Š  ‹   %!!3CHüÿ¹——   Š  w   	3###z‡…ñ¸şrˆşs¸üqûs‘üZ¢ıïşo    Š  X 	  !##33X¸ı£¹¹]¸lü”ü“m  `ÿğZ     #" 5 32 4&#"3265Zşìèåşçåé·¬›–¯°—œ©$şûşÑ2>4şĞÿÆÒÖÅBÃ×ÓÇ  Š   
   #!2#%!2654&'!C¹ÓÌòêÖşè|ˆˆwşá¶şJÇ¨ª¾˜jd`w   Yÿ6W  !  %#" 54632 '4&#"3265UpfØ|şù6Fäşåè–ê·¬œ”¬®˜œª$¦óF oÇ1>©ŠşÍşùÆÒÏ¹UÂØÓÇ   Š  %    !#!2#32654&##Zşé¹ªÕçë Æıäöu‰†~ğÁş?ºªäYş
Xm]dn   Cÿğİ %  4&$'&54632#4&#"#"$53326#yşÚVÃó¿Äù¹yq†{8°VóÇÏşïºšŒ~‚*PXJ+b³²ÈœbkYPAXPeˆ[“©Ë¢fr[  (  ı   !#!5!ışq¹şsÕôüô™    tÿğ
   #"&'33265
úÑÒö·…ƒüô¶ÛÓ¶üôy{      S   73#3@Æş7­ş7Ç$^\kûs    1  ñ   7373#'#3¯ø¥ôÆ¸şÖ®şüşô­ş×·&P@wü†;Peûs•ük   &  1   3##3(Üşu™ÜşÕşØÜ–şsÛÚ³ı¾ıµ»şEKB         3#38ĞşR¹şXĞJCı
şi¢ë    G  à 	  %!!5!5!/±üg˜ıqx——|x™y   Pÿõ     #"&'54632'4#"327˜‹œ›‹˜Š…‹„E¢®¬ £®¬À´³Âµ  z  ï   !#5%3ïØcY9€u     B  «    !!5654&#"#46 !«ı©,m@<KG§škT°lfE1=L9r”nhkO‘    >ÿõš  &  32654&#"#4632#"&5332654'#	TJH?F9K£|‰œFB•ªˆ„¦OCFIœXË=0-:3)b{yh7[)j}~k-<<3q  6  » 
   3##5!'33Pkkş‰y¡ş„ß+‚©©fş!   [ÿõ§   !!632#"&'332654&#"p2Şş£AJ€ †y§›
AHNJI;ƒ’„ª‰y|‘~ecKD>M+    Vÿõ«    #632#"&55467"3264&(şôHrv‡Ÿ„‹§ŞÍ~3MS?=NGƒÛM‘wtš¦—3Ğäşn, "TUO|L   :  ¥   #!5!¥ş£¦]ş;k»ıE“‚   OÿõŸ    (   &5467&546324&#"26"264&‹w‹ şğ J@w—}~—‰N>?KL~LŒ7??p?@Cv7;ƒjyyjBa7vgvvş:4::45::ğ50.88\7     Iÿù•     #"&54632526'2754&#"öEev£‰œşs7–„{^*O<;LJ@AŠ~y ¥”=şdbG<SPTCAN  ‹"   !5!ı„|‹—   @nr     3#4632#"&732654&#"±½Ür‚dHDcaFHdU3$#00#%2r¸×Fa^IG\^E#21$&24  şJN ) 7 D  ##"'3#"&5467&547&554632!32654&'#326554&"—:oÃxOI4z·ÈÎô—Ñÿ^T8s®ñ»PGoı<8<”ƒ’ÍhlïtŒigŠŠÒŠ§Tib¦^*@P•T¡`›zSŠ*/J|RjÅÊûø]7JYrLJA¥S{zXWxxZ    dÿëXN    %!"553 73#325&&#"‚lşòÀäâÄ	l"°jq°ıu’‡ÓH’k†•ñşúô=şÿíıâıäô¯Ã‡$¾Ëã     ±  ã¯    #!2#&'54&#%!265!!rÁğûíŞAÆ;Œş9¢şÏş¹tıŒ¯ÒÌåcEşúœ=6¬‹x|„      ²  °   ##333##±ÀÀ–ıïıÔUëır°ı~‚ı>ı   ’      ##333#Ì€ºº~;Ûş†®Ûõş ü¬şı³   ²  ú°   #333#rÀÀcñık½íµıK°ıy‡ı;ı     ’  ñ   ##333#PººŠğş+ÿäóşüu­şı¹   Cÿİs +  4&$'&546753#4&#"#5&&53326#yşÚVÃË¦•£Æ¹yq†{8°VÃ©•ºßºšŒ~‚*PXJ+b³‚¬ÙÛÂˆbkYPAXPeˆ[‚¦ááÂ”fr[   0  ï    !!!53677'#53'&632#4&#"!şp8”ü„
O	¤ Ëµ·Ê¹h`]h”ô"Ëo˜˜İF"y{ÉìÌ·pwŠ{     %   33!!!#5!5!5!5!38Ğş›ûşÁDş¼¹ş¼Dş¼ şœĞKBıŒy	BxİİxKyt    Š  …   !#!…ı¾¹ûôü       S    !!3'!SûÁÉ­=şøCşİ\^ı0   `ÿğZ     !5! #" 5 32 4&#"3265Uşáşìèåşçåé·¬›–¯°—œ©ù™nşûşÑ2>4şĞÿÆÒÖÅBÃ×ÓÇ      S   3#3#'ÛÇÉ­ÉÆşÀûsj\^   >  K     !!5!!5!!5!KüóCıw‰Cüó˜{˜I™     Š  D   !#!#!Dºı¹¹ºôü  ?  È   !!55!!oş¶£üwQş¯WıJ:ş_™·¶™ş_   `       #5&$54$7534&'66æşíã¹éşòç¹ş?š¥6¦˜˜¦úËÍünnûÌÍûvıµşØs	—˜™•	ı
–   `  ¶   $3#&'33è¹òÙºÙğºº»3k4ş½óşâşßòKşËş-Ô    u  ~ !  %66554&#"!53&54 32 3!»ˆ®œ¬ş>¯³çè²µş=ßÍ&³ÀÁ·!Ìß —:î#şÜõşËœ—    &ÿì,   !5!!632#52654&#"#Šşœ‰ş”—œÔâåà}€–¹ô™™ş×1ĞÄ¾¾—mxƒy2ıÎ  `ÿğ0   #" 546632#&&#"!!32670üÑàşñ{ç˜Ì÷¹~™¢¿şA¡‘‡y»Î'^¤ùˆÓ»‚tÃ¯˜²Âoƒ   '  û     !!#7766!!%!2654&#ûæÃş+ş^M—{;.`Q
$Áàı;r„ƒsn¥Çôşeíöu¥¾	şJÁ-şYuc_p    Š  	    !3!!!#3!2654&'CH¹$ÁàæÃş+ı¸¹¹s„}nŠşJÁ¤¥Çòşı²şYwa[q  (  .   !5!!632#4&#"#‹ş‰ş”“ ÔŞº}–ºô™™ş×1ÊÁşd‡y2ıÎ     Šş›C   !!#!3!3Cş¹ş¹G¹ş›eüõ   Š      !!2!!2654&'!•ı®ÎæäÅş+şÃs„}nşß÷şàÄ¥¤Èüwa[qşY  .ş¬ç    77667!3#!#!!!…)GG¹üºº.Bşd˜1VıØ™üşTş­ë\şÈş™     ë   ####33333#ÅcºdşÅê†şà,YºY,àşœˆêöş
öş
Q<şışııÍı¦    GÿğÔ (  4&#"#4632#"&'&5332654%#536Š}nºí¼ÓîngvqşÕ[©=y¹ƒyˆ’şÿœïPT]XOµ¨–V)$’[´,.YV``XÁ˜     Š  a 	  3##3¨¹¹ı›¹¹ûstüŒüŒ  ‹  ,   ##333#®j¹¹d…ßş5ëïöş
şııÅı®   '  6   #!#776676¹ş^¤°D)^Pûsôş‚şªşå¥â^    "ÿì   3"'72673õ-Õş^%Pª&P\1I şfÖ0xÕüEI‘“1;Ÿ  Šş¬ñ   %3#!3!3D­¥üP¹Gº˜şTüõ  =  ß   !##"&'33273ß¹£ÔŞ¹~–¹Â0ÊÁpş‡y21  Š  Æ   !!3!3!3ÆúÄ¹ˆºˆ¹üõüõ   Šş¬u   %3#!3!3!3Ç®¦úÍ¹ˆºˆº˜şTüõüõ     Ö    !!5!!22654&#!ÖäÄş*ş°
„ÂhşQr„ƒsşën¤Èô™şJX£ş¼uc_pşY  ÿÿ Š  g &   Â    Š   
   !3!22654&'!äÅş+¹ÎæşPs„}nşßn¤ÈşJÄş…wa[qşY    Kÿğ   3267!5!&&#"#6632 #"&'‡¢şA¾£˜~¹÷Ìäxâ•Ïşyƒo»¹˜¯Ãt‚»Óşßôu£ù‡Î»   Šÿğ  !   #" '##336 32 4&#"3265şìèİşëØ¹¹ØÚé·¬›–¯°—œ©$şûşÑòşş	ñşĞÿÆÒÖÅBÃ×ÓÇ   P  ü    3&&5467!#!!!"P"zqÜÈÑ¹şĞÿ.æşïğ&h¡²ûsßş!0´|       ç   ###53!!3‡â¹ááûı¾âışı—ù™ş    ş¬"   3######33333c&™§zşÄcºdşÅê†şà,YºY,àZş<şTöş
öş
Q<şışı  ‹ş¬N   3####333Ao¨işqj¹¹d…ßRşDşTöş
şı     ‹  ç   35333###5##3DP”<„àş4ëïşqA”P¹¹ääııÅı®öÎÎş
     #     ##!5!33#—iºş¯c…àş4ëïöş
õ˜şııÅı®     `ÿë[Ÿ # .  "'#  53"327&54323654&#"[Ù¦‰£şêşÆôÒ~ĞÇ62ãÏµ¸Í¶^vı’á¶bjÆ;<E*(ÃÈ!èå²E'ëşÿñ8şÚ²ışÌy8¬£şÃ  ÿÿ    &Ò   Ş DşŞ  &ş¬q   353###3(Üşu1¨¨tşÕşØÜ–şsÛÚ³ı¾şJşT»şEKB    &ş¬ò   %3#!!5!!!3D®¥üPş›‰ş•Fº˜şTô™™ü¤õ   =  ß   !##5&&'353673ß¹ci•¼É¹gh•ge¹Â!ÆÃ
Éºmş{xğí"1  Š  ,   3632#4&#"#Š¹š™ÔŞ¹~˜›¹ş>1ÊÁşd‡y3ıÏ     ÿğk  $  " 5&&53>32 !3267"!54&‘ÿşÎ¦¸™_f‡éøü®Á·L‡P9<¸–µ™®"óÆ¨^w“ìşëşı‚±À(’(/Â¤¡ª    ^ÿği    2 #" 5!54&#"'66267!G÷)„ì“øşğRÁ·“9AÀ‰‘³ıg­şàïˆ™ô‰‚±ÁH’)/ûíÆ¡ ¬   GÿíÔ   !5!#"&'&5332654&##5³ı¼8ş©±Ñü×Y«<z¹‰sˆ’Š†€ô™vş›Å‹§¾-.ZYdhj_j¥   `ÿğZ      #" 5 32 267!"!&&Zşìèåşçåéş“¨	ıv
­‘«Š	ª$şûşÑ2>4şĞÿş¼´°ÀwÃ¬³¼  0  ï '  !!!!!!5367#535'#53'&632#4&#"‡–şnşl
$”ü„
?Ÿ¥¢Ëµ·Ê¹h`]h¨y]yjG˜˜Ÿy]y@ÉìÌ·pwŠ     Bÿğ !  !!27#"&'#535#536632&# !!!/şh bhvoÓõ›——›õÏ`‡Yyÿ  ˜şdœ–şñ•ÚÌymyÌÜ•şğym     Š  ­    (  %!5!46 #"&5326554&#"##33nıÓ-ı’¼4½¾—™¿£^WT^aSRaşµ¸ı£¹¹]¸½•º¸›P˜¶·œYji\RZhg^üµlü”ü“m   (  f    %!#5#535#53!2!!%!2654&#!¤şşºÀÀÀÀÏÅêã¾şİşşrƒ„pşê´´´˜Y˜PÌ¨¥ËYñxbdz  Œÿì4     #"'#3632'4&#"3264oÉ€Ñp ¹pÅÉñ¹£Œ·PU´Š£Ÿü‹• ıÃ‹şÓşÿ´Öªş,«Ø   \ÿìïN   %2673#" 5546632#&&#"@c”°xÄnßşûvÛ“¶ñ°h›ƒxZ^¨c*ü ù†Ú®i‡Î¿!¼É   [ÿì      466323#'#"&&'7327&#"[qÎ€¾o¹¡oÊ|Ëu¹¨Š¯RS¬§&Ÿü‚4ú xŒŒû˜±ØŸñ™Ö  [şV N  &  43273#"&'732655#"5327&#"[øÆÌoôàVÈH7?ŸO•ŠoÁÂú¹¦‹¯SS­¥&ö2”€üïşı72Š*2°¨(8ô°Ù¡ë× ÿÿ W  †·  ­   Œş`2N    #"'#36324&#"3262nÈÅq¹ŸtÊÁî
¸©¨TS«Œªü‹}ı÷Ú}‘şéê'°Û•ıû”ß   [ş`ÿN    43273##"5327&#"[÷ÌÄo ¹pºÇú¹ªŒ¦VX¢ª%õ4†rú&x5ö®ß“ß   ]ÿìóN    " ''46632!327"!54&qåşİ|İ€Õèı$Â™ x9ƒşîs˜ ‰ãN›õŠşşğtÈZrÊ –ƒš    `şVòN  %  43273#"&'732655#"5327&#"`èÃÊpõáR¯A7z•‰oÀ¾ëº•ˆ¯RUª‰–%ú/“üêÿ-)ŠI§:€2úµÓ î›Ğ    ~ÿëÅ    #"$'54$32 #&&#"3267şÛî±şá¢²í/Á¿ÀênÈ}¡°Îßşü´GËDÓJ³şúã£¨şËşş7¡ÿ ©    ~ÿëÄ "  %#"$'54$32#&&#"3267!5!Cşã°»şÖ¨›µñ!"Àºœµì
xÓ…rµ*ş°¾ar´GÒ-ÛN¶åÚ•ŒşÜòF¬şöŒ:0F›   ²  °    3!232 54 #²±Á8±­şÂËéßêş÷è°¬şÄÈ>ĞşÁ±û‹*$ü(    ~ÿë_Å  "  #"$'54$324&#"325_¢şâ¯«şá¦¤!«­ £¿nÇ}xÆrqÉyÁïÂÎş°¹¹JÈ7ÍO¼¹ş´Ì¢ şœ5 şş’;ÿ   ~ÿ_Å  &  %#"$'54$32'4&#"325_©”úƒşÌ9<«şà¤¢"¬®!¢¿nÇ}xÇqqÉyÁïÂÔş¬ZÃyóºFÆ:ÌP¾»ş°Î£ÿœ3 şş’;ÿ       É   !#5%3É¹ş
¦‹¨Ê    ƒ       !!56774&#"#46632! ü‡ı}
}fz•¹xÒ~»áÅş†xƒÉsT5Tlup¿l¸˜±´ş¬    Š  …Ä   3!#!Ì¹ı¾¹BÄş0ü    ş£Ş   !5! #"'732654&##5äıtrş€²âşÌÿÊÒ4¥±´×¹À<ô™vşlö³ùşÚg‹XÊ¥«¥g    >ş¶  
   %3##!53!ÛÅÅºıÖÇı<
–—ş·Im!ü	ü5ÿÿ P¸Ô  ˜  ÿÿ 6˜»­Ø  ˜  ÿÿ [§­Ù  ˜  ÿÿ V«¶Ú  ˜  ÿÿ :˜¥­Û  ˜  ÿÿ OŸ¸Ü  ˜  ÿÿ I‘•¸İ  ˜    eş Œ   !!676 #"'732654&#"†fı~6o•Èñşàñà¯:‚Ó™¿¥‡ju"t«şt@şõáïşâr‹eÏ¤¶:S     Jş¶ò   #!5!òı ºWı¨#ú“?˜   `ÿğm    !!" 5 3!!!!!7'"mıcşåşçå[¯ı›ıìlûñêì–¯°2>4™ş²˜ş‰g	ÖÅBÃ×  ‚ş©?¡  %  267#"546632 #"'726754&#"ß±Üw·ÒÿuÒ„ë’şó¯Ÿv&zàiŸ"¡’˜£¿ôÙiâœì~şÜşöúÜşº®<2ü\R”ÅÅÃ«•É  xÿë‰¡       5   '4&#"3267‰şèş"şæŞº²›²¶›š±<şêşÅ<>şÄşëÊâàÅ4ÉåİÊ  ÿÿÿ´şKe:  ›  ÿÿÿ´şKe:  ›  ÿÿ ›  U:  Œ  ÿÿÿúşYZ: & Œ    £È
  ÿÿ ›  U:  Œ  ÿÿ †ş¬a: & Œ    ¬N 
  Šÿìù !  %32654&##5&#"#6632#"'ÃRXarˆ‡TíNcÓ¸ÅÉkÃeşî©¶×µwhµ3{cbU‰'>şõıõÒÖUbş¶£†¬Ì1   ÿÿ %¶     %  ä°    3#53!2!32754'#!Ç¢¢›¾$ŸŸşÙÄGşæÉŞ÷éÖàš—¨şÊÉ]ÎşÊ¦šşù]øş     %  ä°    3#53!2!32754'#!Ç¢¢›¾$ŸŸşÙÄGşæÉŞ÷éÖàš—¨şÊÉ]ÎşÊ¦šşù]øş        ı    !63 #&&#"##5353!|şç{ÅW¹ioZˆ&¹ªª¹Òşå—ş}ı5Ìup`NüıÒ———  1  —°   ###53!5!!3ªç¿ÖÖş-fş,ç7üÉ7—Dş¼ ÿôÿìp@   3#3#327#"&5#535#53‡ÊÊéé6A 8IE|~ÚÚÅÅ@şúº—ş²AA––ŠN—º   ÿÿ   4& %    D06ÿÿ   4& %    u¿6ÿÿ   6& %     É6ÿÿ   "& %    ¤ Å:ÿÿ   û& %    j ù6ÿÿ   ‘& %    ¢PAÿÿ   ”& %   ßZ"ÿÿ wşDØÄ& '    yÒÿ÷ÿÿ ©  F@& )    D ûBÿÿ ©  F@& )    uŠBÿÿ ©  FB& )     ”Bÿÿ ©  F& )    j ÄBÿÿÿà  @& -    Dÿ§Bÿÿ °  Q@& -    u 5Bÿÿÿé  FB& -    ÿ@BÿÿÿÖ  _& -    jÿpBÿÿ ©  "& 2    ¤ û:ÿÿ vÿì	6& 3    DR8ÿÿ vÿì	6& 3    uá8ÿÿ vÿì	8& 3     ë8ÿÿ vÿì	$& 3    ¤ ç<ÿÿ vÿì	ı& 3    j8ÿÿ Œÿìª4& 9    D+6ÿÿ Œÿìª4& 9    uº6ÿÿ Œÿìª6& 9     Ä6ÿÿ Œÿìªû& 9    j ô6ÿÿ   »4& =    uˆ6ÿÿ mÿìêş& E    D Õ  ÿÿ mÿìêş& E    ud  ÿÿ mÿìê & E    n   ÿÿ mÿìêì& E    ¤j  ÿÿ mÿìêÅ& E    j   ÿÿ mÿìê[& E    ¢ õ ÿÿ mÿìê_& E   ß ÿÿíÿÿ \şDìN& G    y?ÿ÷ÿÿ ]ÿìóş& I    D Å  ÿÿ ]ÿìóş& I    uT  ÿÿ ]ÿìó & I    ^   ÿÿ ]ÿìóÅ& I    j   ÿÿÿÆ  gı& Œ    Dÿ  ÿÿ –  7ı& Œ    uÿ  ÿÿÿÏ  ,ÿ& Œ    ÿ&ÿÿÿÿÿ¼  EÄ& Œ    jÿVÿÿÿÿ Œ  ßì& R    ¤a  ÿÿ [ÿì4ş& S    D Ï  ÿÿ [ÿì4ş& S    u^  ÿÿ [ÿì4 & S    h   ÿÿ [ÿì4ì& S    ¤d  ÿÿ [ÿì4Å& S    j ˜  ÿÿ ˆÿìÜş& Y    D Ç  ÿÿ ˆÿìÜş& Y    uV  ÿÿ ˆÿìÜ & Y    `   ÿÿ ˆÿìÜÅ& Y    j   ÿÿ şK°ş& ]    u  ÿÿ şK°Å& ]    jU   ÿÿ   î& %    p Ç>ÿÿ mÿìê¸& E    pl  ÿÿ   & %      ô7ÿÿ mÿìêØ& E      ™   şO°    #327#"&547!#!ğ-&:qN04FZYg©‡ı‰Æ,£ïø°úP-[VHy,hVlsş„°üj©    mşOêN - 7  %&'#"&54$3354&#"#46632#327#"&54'2675# $³ Íé´tqc†ºsÅv»Ô&!:qN04FZYgˆWœ#‘ş¬t&E†µ‹©»UasdGQ—X»¤ş•X-[VHy,hVğZHŞÇWb ÿÿ wÿìØU& '    uÆWÿÿ \ÿììş& G    u3  ÿÿ wÿìØW& '     ĞWÿÿ \ÿìì & G    =   ÿÿ wÿìØ& '    ¡®Wÿÿ \ÿììÂ& G    ¡  ÿÿ wÿìØW& '     æXÿÿ \ÿìì & G    S  ÿÿ ©  ÆB& (     ŸCÿÿ _ÿì+ & H   ¢Ôÿÿ ©  Fú& )    p ’Jÿÿ ]ÿìó¸& I    p\  ÿÿ ©  F& )      ¿Cÿÿ ]ÿìóØ& I      ‰ ÿÿ ©  F& )    ¡rBÿÿ ]ÿìóÂ& I    ¡<    ©şOF°   !!#327#"&547!!!!àı‰İI:qN04FZYg›ı]“ı-w¡ıü-[VHy,hVŠi°ş,     ]şhóN % -  %3327#"&547& 5546632!3267"!5&&åGs:qN04FZYgbÚşõ{İÓêı#³Šbˆ3şÂp˜ˆ½n6-[VHy,hVlZ!ï!¡ışêşıM ÅPB¡£“›   ÿÿ ©  FB& )     ªCÿÿ ]ÿìó & I    t  ÿÿ zÿìÜW& +     ÈWÿÿ `şVò & K    U   ÿÿ zÿìÜ/& +      óXÿÿ `şVòØ& K      € ÿÿ zÿìÜ& +    ¡¦Wÿÿ `şVòÂ& K    ¡3  ÿÿ zıÿÜÄ& +   ¢£ş ÿÿ `şVò“& K   ¹+ Xÿÿ ©  B& ,     ñBÿÿ Œ  ßA& L     Aÿÿÿ·  z.& -    ¤ÿ<Fÿÿÿ  `ê& Œ    ¤ÿ" ÿÿÿ¶  €ú& -    pÿ>Jÿÿÿœ  f¶& Œ    pÿ$ ÿÿÿì  C& -     ÿkCÿÿÿÒ  )×& Œ     ÿQ  ÿÿ şXx°& -    £æ	  ÿÿÿûşOhÄ& M    £É   ÿÿ ª  …& -    ¡ Bÿÿ ·ÿìù° & -    .-  ÿÿ şKJÄ & M    Nñ  ÿÿ 5ÿì‚5& .    |5ÿÿÿ´şK9Ø& ›    ÿ3ÿØÿÿ ©ıÿ°& /   ¢”ş ÿÿ ıÿ & O   ¢ş ÿÿ ¡  /& 0    u &1ÿÿ “  4”& P    u –ÿÿ ©ıÿ°& 0   ¢lş ÿÿ WıÿU & P   ¢ÿûş ÿÿ ©  ±& 0   ¢ÕÂÿÿ œ  ­ & P   ¢Vÿÿ ©  °& 0    ¡¼ıÅÿÿ œ     & P    ¡8ı¶ÿÿ ©  4& 2    uõ6ÿÿ Œ  ßş& R    u[  ÿÿ ©ıÿ°& 2   ¢Ğş ÿÿ ŒıÿßN& R   ¢3ş ÿÿ ©  6& 2    7ÿÿ Œ  ß & R    {  ÿÿÿ¼  ß& R   ¢ÿ`ÿÿ vÿì	ğ& 3    p é@ÿÿ [ÿì4¸& S    pf  ÿÿ vÿì	& 3     9ÿÿ [ÿì4Ø& S      “ ÿÿ vÿì	7& 3    ¥k8ÿÿ [ÿì4ÿ& S    ¥ è  ÿÿ ¨  É4& 6    u€6ÿÿ Œ  Òş& V    u ¶  ÿÿ ¨ıÿÉ°& 6   ¢cş ÿÿ Sıÿ—N& V   ¢ÿ÷ş ÿÿ ¨  É6& 6      7ÿÿ c  Í & V    ×  ÿÿ Pÿìr6& 7    u8ÿÿ _ÿì»ş& W    uQ  ÿÿ Pÿìr8& 7     —8ÿÿ _ÿì» & W    [   ÿÿ PşMrÄ& 7    yŸ  ÿÿ _şE»N& W    y]ÿøÿÿ PıÿrÄ& 7   ¢uş ÿÿ _ıÿ»N& W   ¢3ş ÿÿ Pÿìr8& 7     ­9ÿÿ _ÿì» & W    q  ÿÿ 1ıÿ—°& 8   ¢fş ÿÿ 	ıÿV@& X   ¢ Åş ÿÿ 1şM—°& 8    y  ÿÿ 	şM™@& X    y ï  ÿÿ 1  —6& 8     ¢7ÿÿ 	ÿììy & X   ¢•Šÿÿ Œÿìª"& 9    ¤ À:ÿÿ ˆÿìÜì& Y    ¤\  ÿÿ Œÿìªî& 9    p Â>ÿÿ ˆÿìÜ¸& Y    p^  ÿÿ Œÿìª& 9      ï7ÿÿ ˆÿìÜØ& Y      ‹ ÿÿ Œÿìª‘& 9    ¢KAÿÿ ˆÿìÜ[& Y    ¢ ç ÿÿ Œÿìª5& 9    ¥D6ÿÿ ˆÿìÿ& Y    ¥ à    Œş{ª°    327#"&547" '33265ªŠƒ›N04FZYgOïşä¾®¡£­°ü!”â;r`Hy,hVaSâàü&¯®Û   ˆşOæ:   !327#"&547'#"&'33273Ò:qN04FZYg¦lÑ­µ¹ÈÔF¹-[VHy,hVjeÉÅÀıEöûÆ ÿÿ =  í6& ;    Å6ÿÿ +  Ó & [    $  ÿÿ   »6& =     ’6ÿÿ şK° & ]    %   ÿÿ   »û& =    j Â6ÿÿ V  z4& >    u‡6ÿÿ X  ³ş& ^    u!  ÿÿ V  zø& >    ¡o6ÿÿ X  ³Â& ^    ¡	  ÿÿ V  z6& >     §7ÿÿ X  ³ & ^    A  ÿÿÿò  W@&     uÉBÿÿ Nÿì|ÿ& †    uz ÿÿ vÿ£~& ƒ    ué€ÿÿ [ÿz4ş& ‰    u7  ÿÿÿ¾  &½   Şÿ/ÿxÿÿÿ¾  &½   Şÿ/ÿxÿÿ (  ı&Í   ŞEà  ÿÿ   p&º    D Õ ÿÿ   p&º    ud ÿÿ   p&º    n  ÿÿ   p
&º    ¤j"  ÿÿ   pã&º    j  ÿÿ   py&º    ¢ õ )ÿÿ   p|&º   ß ÿ 
ÿÿ `şJ0&¼    ytÿıÿÿ Š  ®&¾    D ¨ ÿÿ Š  ®&¾    u7 ÿÿ Š  ®&¾    A  ÿÿ Š  ®ã&¾    jq  ÿÿÿ¾  _&Â    D…  ÿÿ   /&Â    u  ÿÿÿÇ  $&Â    ÿ ÿÿÿ´  =ã&Â    jÿN ÿÿ Š  X
&Ç    ¤ • "ÿÿ `ÿğZ&È    D î ÿÿ `ÿğZ&È    u} ÿÿ `ÿğZ&È     ‡ ÿÿ `ÿğZ
&È    ¤ ƒ "ÿÿ `ÿğZã&È    j · ÿÿ tÿğ
&Î    D Ï ÿÿ tÿğ
&Î    u^ ÿÿ tÿğ
&Î    h  ÿÿ tÿğ
ã&Î    j ˜ ÿÿ   &Ò    u3 ÿÿ   pÖ&º    pl&  ÿÿ   pö&º      ™   şOp    #327#"&547!#!˜Ø&:qN04FZYg°hıøn½ßx‘Çûs-[VHy,hV”l
şéı!ı  ÿÿ `ÿğ0&¼    ui ÿÿ `ÿğ0&¼    s  ÿÿ `ÿğ0à&¼    ¡Q ÿÿ `ÿğ0&¼     ‰ ÿÿ Š  &½    2  ÿÿ Š  ®Ö&¾    p?&  ÿÿ Š  ®ö&¾     l  ÿÿ Š  ®à&¾    ¡   ŠşO®   !!#327#"&547!!!!Wıìk=:qN04FZYg›ıÊı›ş‰—-[VHy,hVŠi™ş²   ÿÿ Š  ®&¾    W  ÿÿ cÿğ5&À    q  ÿÿ cÿğ5ö&À      œ ÿÿ cÿğ5à&À    ¡O ÿÿ cıü5&À   ¢Oşÿÿ Š  X&Á      ÿÿÿ•  X
&Â    ¤ÿ "ÿÿÿ”  ^Ö&Â    pÿ &ÿÿÿÊ  !ö&Â     ÿI ÿÿ şOf&Â    £Ô   ÿÿ ‰  dà&Â    ¡ü  ÿÿ +ÿğ&Ã     ÿÿ ŠıüW&Ä   ¢şÿÿ ‚  ‹&Å    u  ÿÿ Šıü‹&Å   ¢şÿÿ Š  ‹&Å   ¢~Ÿÿÿ Š  ‹&Å    ¡fı7ÿÿ Š  X&Ç    u ÿÿ ŠıüX&Ç   ¢lşÿÿ Š  X&Ç     ¯ ÿÿ `ÿğZÖ&È    p … &ÿÿ `ÿğZö&È      ² ÿÿ `ÿğZ&È    ¥ ÿÿ Š  %&Ë    u' ÿÿ Šıü%&Ë   ¢şÿÿ Š  %&Ë    G  ÿÿ Cÿğİ&Ì    u> ÿÿ Cÿğİ&Ì    H  ÿÿ CşMİ&Ì    yS  ÿÿ Cÿğİ&Ì    ^  ÿÿ (ıüı&Í   ¢şÿÿ (  ı&Í    Q  ÿÿ (şOı&Í    y> ÿÿ tÿğ

&Î    ¤d"  ÿÿ tÿğ
Ö&Î    pf&  ÿÿ tÿğ
ö&Î      “ ÿÿ tÿğ
y&Î    ¢ ï )ÿÿ tÿğ&Î    ¥ è   tşt
    327#"&547"&'33265
xo2lN04FZYgZÍù·…ƒüózº0([RHy,hVhVÎ¸üôy{ÿÿ 1  ñ&Ğ    ; ÿÿ   &Ò    =  ÿÿ   ã&Ò    jm  ÿÿ G  à&Ó    u3 ÿÿ G  àà&Ó    ¡ ÿÿ G  à&Ó    S  ÿÿ   ?& %    ­   ÿÿÿğ  ª? & )d   ­ÿ9  ÿÿÿş  lA & ,d   ­ÿG ÿÿ   Û@ & -d   ­ÿM ÿÿÿúÿì? & 3   ­ÿC  ÿÿÿx  ? & =d   ­şÁ  ÿÿÿı  ß? & ¹   ­ÿF  ÿÿÿ›ÿô­t& Â    ®ÿ*ÿìÿÿ   ° %  ÿÿ ©  ˆ° &  ÿÿ ©  F° )  ÿÿ V  z° >  ÿÿ ©  ° ,  ÿÿ ·  w° -  ÿÿ ©  ° /  ÿÿ ©  R° 1  ÿÿ ©  ° 2  ÿÿ vÿì	Ä 3  ÿÿ ©  À° 4  ÿÿ 1  —° 8  ÿÿ   »° =  ÿÿ 9  Î° <  ÿÿÿÖ  _& -    jÿpBÿÿ   »û& =    j Â6ÿÿ dÿëw:& º    ­uÿûÿÿ cÿìì9& ¾    ­+ÿúÿÿ ‘şağ:& À    ­Fÿûÿÿ ÃÿôK%& Â    ­*æ  ÿÿ ÿìöt& Ê    ®!ì  ÿÿ š  ?:   ÿÿ [ÿì4N S  ÿÿ šş`î: v  ÿÿ !  º: Z  ÿÿ )  Ê: \  ÿÿÿæÿôo±& Â    j€ì  ÿÿ ÿìö±& Ê    jwì  ÿÿ [ÿì4:& S    ­Cÿûÿÿ ÿìö%& Ê    ­"ÿæÿÿ zÿì"& Í    ­Sÿãÿÿ ©  F& )    j ÄBÿÿ ±  0@& °    uB  PÿìrÄ &  &&54$32#4&#"#"$&533264&V÷áÜ–ëÁ¨™Ÿ—kÍcşìç–şüÁÃ£˜¢–‰GÏ˜¬átÌy„—}oY{f{¤o±ÕsÈ„™|Öuÿÿ ·  w° -  ÿÿÿÖ  _& -    jÿpBÿÿ 5ÿìÌ° .  ÿÿ ²  °ã  ÿÿ ©  .& /    u{0ÿÿ MÿëË& İ      ÚCÿÿ   ° %  ÿÿ ©  ˆ° &  ÿÿ ±  0° °  ÿÿ ©  F° )  ÿÿ ±  ÿ& Û     1Cÿÿ ©  R° 1  ÿÿ ©  ° ,  ÿÿ vÿì	Ä 3  ÿÿ ²  ° µ  ÿÿ ©  À° 4  ÿÿ wÿìØÄ '  ÿÿ 1  —° 8  ÿÿ 9  Î° <  ÿÿ mÿìêN E  ÿÿ ]ÿìóN I  ÿÿ œ  Ä& ï      ¢ÿíÿÿ [ÿì4N S  ÿÿ Œş`N T    \ÿììN   %2673#" 546632#&&#">c”¯vÅnİşûtÙ”¶ñ¯i›šƒxZ]¨d' öˆÚ®i‡ËÀ#»Êÿÿ şK°: ]  ÿÿ )  Ê: \  ÿÿ ]ÿìóÅ& I    j   ÿÿ š  Gê& ë    u Íÿìÿÿ _ÿì»N W  ÿÿ   hÄ M  ÿÿÿ¼  EÄ& Œ    jÿVÿÿÿÿÿ¿şKYÄ N  ÿÿ œ  ?é& ğ    u;ÿëÿÿ şK°Ø& ]     P  ÿÿ =  í4& ;    D,6ÿÿ +  Óş& [    D‹  ÿÿ =  í4& ;    u»6ÿÿ +  Óş& [    u  ÿÿ =  íû& ;    jõ6ÿÿ +  ÓÅ& [    jT  ÿÿ   »4& =    D ù6ÿÿ şK°ş& ]    D Œ  ÿÿ g! ı    ÿÿ ˆ#    ÿÿ  ÿõŠ° &       ÿÿÿ´şK?Ø& ›    ÿIÿÙÿÿ 0G m  ÿÿ ©  R4& 1    u™6ÿÿ ‹  xş& Q    u­  ÿÿ şk°& %    ¦  ÿÿ mşkêN& E    ¦ Ç  ÿÿ ©  F@& )    D ûBÿÿ ±  ÿ@& Û    DmBÿÿ ]ÿìóş& I    D Å  ÿÿ œ  ê& ï    D Şÿìÿÿ Z  !° ¸  ÿÿ _ş(C: Ì  ÿÿ   İè&    «9 úÿÿÿû  Á&    «ÔÿÓÿÿ [şK@N & S    ]  ÿÿ vşK	0Ä & 3    ]€  ÿÿ PşQjÄ& Ú   °œÿ¸ÿÿ XşR¬M& î   °Cÿ¹ÿÿ wşQØÄ& '   °åÿ¸ÿÿ \şQìN& G   °Rÿ¸ÿÿ   »° =  ÿÿ .ş`ß: ¼  ÿÿ ·  w° -  ÿÿ   5& Ù     øCÿÿ   Ä& í     _ÿíÿÿ ·  w° -  ÿÿ   & %      ô7ÿÿ mÿìêØ& E      ™ ÿÿ   û& %    j ù6ÿÿ mÿìêÅ& E    j   ÿÿÿò  W°   ÿÿ Nÿì|N †  ÿÿ ©  F& )      ¿Cÿÿ ]ÿìóØ& I      ‰ ÿÿ ]ÿìÙ&E    j Óÿÿ bÿìéO œ  ÿÿ bÿìéÆ& œ    j ‡ ÿÿ   5& Ù    jıBÿÿ   ±& í    jdÿìÿÿ Pÿìj& Ú    j ·Wÿÿ Xÿí¬Å& î    j^   ÿÿ ±  ÿú& Û    pJÿÿ œ  ¤& ï    puô  ÿÿ ±  ÿ& Û    j6Bÿÿ œ  ±& ï    j §ÿìÿÿ vÿì	ı& 3    j8ÿÿ [ÿì4Å& S    j ˜  ÿÿ gÿìúÄ  ÿÿ [ÿì4N  ÿÿ gÿìú&    j=ÿÿ [ÿì4Ç&    j ˆ ÿÿ “ÿìô& æ    jXÿÿ dÿìàÅ& ş    j|   ÿÿ MÿëËú& İ    p ­Jÿÿ şK°¸& ]    p#  ÿÿ MÿëË& İ    j ßBÿÿ şK°Å& ]    jU   ÿÿ MÿëËA& İ    ¥/Bÿÿ şKÑÿ& ]    ¥ ¥  ÿÿ –  È& à    j	Bÿÿ g  ½±& ø    jdì  ÿÿ ²  0 & å  ' -¹    jÓBÿÿ   ± & ı   ' Œ*    jmÿìÿÿ 9şK°& <   ¯§  ÿÿ )şK:& \   ¯µ  ÿÿ _ÿìğ  H  ÿÿ /şK¬°& Ü   ¯E  ÿÿ ,şK»:& ñ   ¯T  ÿÿ ş¢°& %    ¬  ÿÿ mş¢êN& E    ¬J  ÿÿ   º& %    ªîFÿÿ mÿìê„& E    ª“ ÿÿ   Ã& %   · Ã.ÿÿ mÿìÀ& E   ·hù  ÿÿ   ¿& %   ¶ Ç=ÿÿÿÊÿìê‰& E   ¶l  ÿÿ   ê& %   µ Èÿÿ mÿìYµ& E   µmæ  ÿÿ   Ú& %   ´ Çÿÿ mÿìê¥& E   ´lÑ  ÿÿ ş¢6& %   '  É6  ¬  ÿÿ mş¢ê & E   & n   ¬J    ÿÿ   ·& %   ³ ê-ÿÿ mÿìê‚& E   ³ ÿøÿÿ   ·& %   ¸ ê-ÿÿ mÿìê‚& E   ¸ ÿøÿÿ   @& %   ² î=ÿÿ mÿìê
& E   ² “ ÿÿ   & %   ± îEÿÿ mÿìêß& E   ± “ ÿÿ ş¢& %   '   ô7  ¬  ÿÿ mş¢êØ& E   '   ™   ¬J  ÿÿ ©ş¢F°& )    ¬À  ÿÿ ]ş¢óN& I    ¬Œ  ÿÿ ©  FÆ& )    ª¹Rÿÿ ]ÿìó„& I    ªƒ ÿÿ ©  F.& )    ¤ Fÿÿ ]ÿìóì& I    ¤Z  ÿÿ ©  æÏ& )   · :ÿÿ ]ÿì°& I   ·Xù  ÿÿÿğ  FË& )   ¶ ’Iÿÿÿºÿìó‰& I   ¶\  ÿÿ ©  ö& )   µ “'ÿÿ ]ÿìIµ& I   µ]æ  ÿÿ ©  Fæ& )   ´ ’ÿÿ ]ÿìó¥& I   ´\Ñ  ÿÿ ©ş¢FB& )   '  ”B  ¬À  ÿÿ ]ş¢ó & I   & ^   ¬Œ    ÿÿ ·  øÆ& -    ªdRÿÿ ›  Ş‚& Œ    ªJ ÿÿ £ş¢~°& -    ¬k  ÿÿ …ş¢hÄ& M    ¬M  ÿÿ vş¢	Ä& 3    ¬  ÿÿ [ş¢4N& S    ¬  ÿÿ vÿì	¼& 3    ªHÿÿ [ÿì4„& S    ª ÿÿ vÿì=Å& 3   · å0ÿÿ [ÿìº& S   ·bù  ÿÿ Gÿì	Á& 3   ¶ é?ÿÿÿÄÿì4‰& S   ¶f  ÿÿ vÿì	ì& 3   µ êÿÿ [ÿìSµ& S   µgæ  ÿÿ vÿì	Ü& 3   ´ éÿÿ [ÿì4¥& S   ´fÑ  ÿÿ vş¢	8& 3   '  ë8  ¬  ÿÿ [ş¢4 & S   & h   ¬    ÿÿ eÿì/& —    uİ1ÿÿ [ÿìºş& ˜    ue  ÿÿ eÿì/& —    DN1ÿÿ [ÿìºş& ˜    D Ö  ÿÿ eÿìµ& —    ªAÿÿ [ÿìº„& ˜    ª” ÿÿ eÿì& —    ¤ ã5ÿÿ [ÿìºì& ˜    ¤k  ÿÿ eş¢7& —    ¬	  ÿÿ [ş¢º°& ˜    ¬›  ÿÿ Œş¢ª°& 9    ¬î  ÿÿ ˆş¢Ü:& Y    ¬Q  ÿÿ Œÿìªº& 9    ªéFÿÿ ˆÿìÜ„& Y    ª… ÿÿ Œÿì@& ™    uÔBÿÿ ˆÿìê& š    ucÿìÿÿ Œÿì@& ™    DEBÿÿ ˆÿìê& š    D Ôÿìÿÿ ŒÿìÆ& ™    ªRÿÿ ˆÿìp& š    ª’ÿüÿÿ Œÿì.& ™    ¤ ÚFÿÿ ˆÿìØ& š    ¤iğ  ÿÿ Œş¢& ™    ¬	  ÿÿ ˆş¢& š    ¬W  ÿÿ ş¢»°& =    ¬»  ÿÿ ş°:& ]    ¬ÿcÿÿ   »º& =    ª·Fÿÿ şK°„& ]    ªJ ÿÿ   »"& =    ¤ :ÿÿ şK°ì& ]    ¤!    _ÿì¬   "  ##'#"55432!5!533327&#"¬¼ª	oÆ¼íì¿¾oşù¹¼ül˜†°QS¬ˆ˜Òû.tˆ4øù/‚———ü¨¸Ğñ™Òÿÿ _şÍ¬  & H   'Ş¡G  C Ÿÿdÿÿ ²ş˜D°&ã   °#ÿÿÿÿ œş™:& ğ   °`  ÿÿ ©ş™©°& ,   °ˆ  ÿÿ œş™¢:& ó   °  ÿÿ 1ş™—°& 8   °?  ÿÿ (ş™°:& õ   °Æ  ÿÿ 9ş™ø°& <   °×  ÿÿ )ş™:& \   °å  ÿÿ –ş™f°& à   °E  ÿÿ gş™^;& ø   °=  ÿÿ –ş™È°& à   °ş  ÿÿ gş™½;& ø   °õ  ÿÿ ±ş™0°& °   ° ï  ÿÿ šş™G:& ë   ° Õ  ÿÿ ş™‚°& Ù   °a  ÿÿ ş™=:& í   °  ÿÿ ?şU½Ã&?   °ÿ¼ÿÿÿŞşYcN&@   °ÿÀÿÿ Œ  ß  L   ÿÔ  ±°    #!!#53533!2654&'Píjä şşßıÓÏÏÀíí_Ÿ™PòäÄÅêP—ÉÉıÙıİ˜€{  ÿÔ  ±°    #!!#53533!2654&'Píjä şşßıÓÏÏÀíí_Ÿ™PòäÄÅêP—ÉÉıÙıİ˜€{     0°   !##53!!!şóÁ®®ıB¬ıT¬—mş1    ÿü  G:   !##53!!!xşÜº­ş$ßş!ß—Ä™şÕ       1°   ###5353!!33#7±À»»Àşÿ–ıïıÔUëır7—ââ—ş÷‚ı>ı    ÿÓ  (    ###53533#33#à€ºÓÓºïï~;Ûş†®ÛõşÁ—¨¨—ıÍ¬şı³ ÿÿ ±ş›²& Û   '  1C  ~ÿ½ÿÿ œş›µÄ& ï   '   ¢ÿí  ÿ½ÿÿ ©ş›»°& ,    ‡ÿ½ÿÿ œş›´:& ó    €ÿ½ÿÿ ©ş›ø°& 1    Äÿ½ÿÿ ş›:& ò    Òÿ½ÿÿ /ş›¨°& Ü    tÿ½ÿÿ ,ş›·:& ñ    ƒÿ½    »°   ###53333¦áÀÛ”şQÜz|ÚşQš	ı÷	—ı%Ûüğ     .ş`ß:   ###53333JæºÜ¿ş¡½½ş£Èşk•—®üÚ&üR  9  Î°   ####53333Ä¤®äşšş˜ã¯ ‘şká_]âşk–ıb8ıÈ—{ıÒ.ı…     )  Ê:   ####53333<³AÖúú×AªşÖÖíğØşÖ§áş•şká—Âşu‹ş>   ÿÿ cÿììM ¾  ÿÿ   /°& *   Şÿƒşÿÿ ‹É" F—„ ff@ ÿÿ ]  3Ä   ÿÿ ^ÿìùÄ   ÿÿ 5  P°   ÿÿ šÿì-°   ÿÿ dÿÿøÄ    ÿÿ ‡ÿìÄ   ÿÿ zÿìÜU& +    u¾Wÿÿ `şVòş& K    uK  ÿÿ ©  4& 2    Df6ÿÿ Œ  ßş& R    D Ì  ÿÿ    & %    «m2ÿÿ 9ÿìêë& E    «ÿıÿÿ _  F,& )    «8>ÿÿ )ÿìóë& I    «ÿıÿÿÿ
  ê,& -    «ã>ÿÿşğ  Ğé& Œ    «Éÿûÿÿ vÿì	"& 3    «4ÿÿ 3ÿì4ë& S    «ÿıÿÿ U  É & 6    «.2ÿÿÿ‹  —ë& V    «dÿıÿÿ Œÿìª & 9    «h2ÿÿ +ÿìÜë& Y    «ÿıÿÿÿ:  Ò? & Ïd   ­şƒ  ÿÿ ©ş¢ˆ°& &    ¬º  ÿÿ Œş¢  & F    ¬«  ÿÿ ©ş¢Æ°& (    ¬¹  ÿÿ _ş¢ğ & H    ¬½  ÿÿ ©ıÿÆ°& (   ¢eş ÿÿ _ıÿğ & H   ¢iş ÿÿ ©ş¢°& ,    ¬  ÿÿ Œş¢ß & L    ¬¡  ÿÿ ©  .& /    u{0ÿÿ   ?& O    uDAÿÿ ©ş¢°& /    ¬è  ÿÿ ş¢ & O    ¬e  ÿÿ ©ş¢°& 0    ¬À  ÿÿ †ş¢a & P    ¬N  ÿÿ ©ş¢R°& 1    ¬Ò  ÿÿ ‹ş¢xN& Q    ¬Ö  ÿÿ ©ş¢°& 2    ¬$  ÿÿ Œş¢ßN& R    ¬‡  ÿÿ ©  À@& 4    u|Bÿÿ Œş`õ& T    u“ÿ÷ÿÿ ¨ş¢É°& 6    ¬·  ÿÿ ‚ş¢—N& V    ¬J  ÿÿ Pş¢rÄ& 7    ¬É  ÿÿ _ş¢»N& W    ¬‡  ÿÿ 1ş¢—°& 8    ¬º  ÿÿ 	ş¢V@& X    ¬  ÿÿ   ı.& :    ¤ ´Fÿÿ !  ºã& Z    ¤û  ÿÿ ş¢ı°& :    ¬ä  ÿÿ !ş¢º:& Z    ¬M  ÿÿ =ş¢í°& ;    ¬ï  ÿÿ +ş¢Ó:& [    ¬S  ÿÿ Vş¢z°& >    ¬º  ÿÿ Xş¢³:& ^    ¬b  ÿÿşxÿìOÖ & 3F  Zş	  ÿÿ   p&º    ­ÿÜşİÿÿÿŸ  ê &¾<   ­şèşàÿÿÿ¼  ” &Á<   ­ÿşİÿÿÿÀ   &Â<   ­ÿ	şßÿÿÿßÿğd &È
   ­ÿ(şİÿÿÿW  X &Ò<   ­ş şİÿÿÿø  ˆ &ó
   ­ÿAşÜÿÿ   pº  ÿÿ Š  ï»  ÿÿ Š  ®¾  ÿÿ G  àÓ  ÿÿ Š  XÁ  ÿÿ —  QÂ  ÿÿ Š  WÄ  ÿÿ Š  wÆ  ÿÿ `ÿğZÈ  ÿÿ Š  É  ÿÿ (  ıÍ  ÿÿ   Ò  ÿÿ &  1Ñ  ÿÿÿ´  =ã&Â    jÿN ÿÿ   ã&Ò    jm  ÿÿ Š  ®ã&¾    jq  ÿÿ Š  …&ê    u4 ÿÿ CÿğİÌ  ÿÿ —  QÂ  ÿÿÿ´  =ã&Â    jÿN ÿÿ +ÿğMÃ  ÿÿ Š  W&Ä    u% ÿÿ "ÿìö&     g  ÿÿ   pº  ÿÿ Š  ï»  ÿÿ Š  …ê  ÿÿ Š  ®¾  ÿÿ Š  aö&ş      É ÿÿ Š  wÆ  ÿÿ Š  XÁ  ÿÿ `ÿğZÈ  ÿÿ Š  Dï  ÿÿ Š  É  ÿÿ `ÿğ0¼  ÿÿ (  ıÍ  ÿÿ &  1Ñ    GşPÔ )  4&#"#4632#&&5332654%#536Š}nºí¼ÓîngvqË¯º£¶¹ƒyˆ’şÿœïPT]XOµ¨–V)$’[Œ¯ş[§­ˆV``XÁ˜     Šş™ú   ##!#3!33úº¡ı¤¹¹\¹¢ş™gòşııü    `şV0   #&5546632#&&#"32670Ë©º·×{ç˜Ì÷¹~™§Ÿ—‡y¨Çş`¢ãa¤ùˆÓ»‚tË½j½Ïoƒÿÿ   Ò  ÿÿ şQk&   °¼ÿ¸ÿÿ Š  aÖ&ş    p œ &ÿÿ "ÿìÖ&    p:&  ÿÿ `  ñ  ÿÿ şO°& %    £|  ÿÿ mşOêN& E    £ Ä  ÿÿ ©şYF°& )    £: 
ÿÿ ]şOóN& I    £       ä	
  	     

	
	      						 	
		 				
      „*Yè_<õ      Äğ.    ĞÛNšúıÕ	0s   	          lş  	IúşJ	0               âŒ d        û  û     ˆí w~ nÜ iù ee g¼ …È &r ‰ N’ 5 % L ~ s~ ª~ ]~ ^~ 5~ š~ „~ M~ p~ dğ †± ) Hd ˜. †Ç K/ j8 û ©5 w? ©Œ ©l ©s z´ ©- ·j 5 ©N ©ü ©´ ©€ v ©€ mí ¨¿ PÆ 10 Œ  = 9Î Ê V ’H ( 	X @œ y 9Z m} Œ0 \ƒ _= ]Ç <} `h Œñ éÿ¿ ñ œ ‹j Œ [} ŒŒ _µ Œ  _ 	i ˆà ! +÷ )É ÷ Xµ @ó ¯µ q ƒó ‹` i¦ [´ iØ ë “è ZX fI [“ “Á fn J Zª xı ‚F aï Bï >‚ {ˆ šé C “û tï z£ zÀ fÜ U5 P9 oÉ DzÿòD Y€ vº ¦Â ‹Á N° ~‘ Gˆ [œ •š ú ›s šO ") "‹ ¢ˆ ‘¡ hD aü  ‡ ]¹ÿä~ e’ [ Œó ˆÿ´7 bÄ © Œ« xj ñ ­ y* 2Æ {ü ^Z ~  ü§  ıo  ü‹  ı^  ü'ïı8 · q “s ±¤ q g> 2‘ xµ ²‘ E» M‰ ZR q… d½   .ˆ `P c% mˆ ‘ z— Ãn %ì eÄ )ˆ ‘M eˆ `, Q] £ Wš _— z¡ yBÿÚH Jÿ *d {‘ 1¤ ±‚ >´ ° ¢ 2C ¿ P´ ±© / M, SÙ ¯z –‡ °À ° ë ² £d “' · Yl a’ [ šÔ .   X œR œ  ,ï  œ œØ (Í d½ œY gx œ ‘÷ 6 X M d‡ d /hÿèM gÉ 'ä œ‰ÿı œ œ+ VÿÜ+ ·ø ™Ò (F  É ¼Ñ “á –	 ¶Ñ ›# PÛ Lq g‹ [
  .q gˆ [ œ$ ~ œ+ 2 uG dı t  üg  üq  ıf  ı¤  ú  ú,VÿÜ ¨‰ Œc ¢ ‘Û ± ‘	 £~ šŒ Dƒ >Ï ¨´ ‘1 °ô ‘î qÓ m, 4\ o –j ƒp Š/ ?½ÿŞ	 £Z š² ±ˆ ‘‡ ]¨ h¨ i· :I ;ö W” Yä dV 6+ 1I R yÁ Du ?û ©¡ ö v e­ #  Fd –  o  )    )  ¹  
  \    0  ¢   Ñ      4 %4 %@ ¢? ¦ ™ `™ 0— $™ OÔ hÛ <Á $i F W² ŠÄ ”Z ” ö &ª Df lf Y£ ;ï 6` z¦ [U  §v ¨c 9+ Œ~ _Ú " *t  H ]O ç zÎ h: ¢ g ˜& T× dÏ cj Y j ©¯ E’ ¨Å ?: bÿ°‚ ed ˜ >/ … +L µ n \ó <n ‹ <Ô <Ô <î <› _    3 [5 \  ; Züÿ¶‘ g¤ ƒ Ÿ ô i ióÿ^ï n¤ ı Ÿ… P Š| `€ Šæ ŠË Š¬ cã Šè —Ï +T Š´ Š Šã Š» `\ Š» YJ Š  C& (| tg  1T &+ # Gï Pï zï Bï >ï 6ï [ï Vï :ï Oï I– µ : Ã dL ±$ ² ’= ² ’  C3 0< ¯ Šg » `g ‰ >Î Šï ?g ` `ò ur &| `A 'O Št (Í ŠY Š$ . ? Gì ŠN ‹Á ' "( Šj =Q Š¬ Š ñ ŠN Š{ Kv Š‡ P G y ‹	 ‹7 #Â `_ ¨ &a &j =j ŠÃ Ê ^? G» `3 0ã B" Š« (} Œ2 \“ [Œ [y W Œœ [= ]} ` ~® ~“ ²à ~ã ~Õ  ‚ ƒ¯ ŠX Ï >ï Pï 6ï [ï Vï :ï Oï Ik e. J¤ `¹ ‚  xÿ´ÿ´û ›ûÿúû ›û †P Šû  5 %] %] %†  Æ 1ÿô8 8 8 8 8 8 8 5 wŒ ©Œ ©Œ ©Œ ©-ÿà- °-ÿé-ÿÖ´ ©€ v€ v€ v€ v€ v0 Œ0 Œ0 Œ0 ŒÎ Z mZ mZ mZ mZ mZ mZ m0 \= ]= ]= ]= ]úÿÆú –úÿÏúÿ¼j Œ [ [ [ [ [i ˆi ˆi ˆi ˆÉ É 8 Z m8 Z m8 Z m5 w0 \5 w0 \5 w0 \5 w0 \? © _Œ ©= ]Œ ©= ]Œ ©= ]Œ ©= ]Œ ©= ]s z} `s z} `s z} `s z} `´ ©h Œ-ÿ·úÿ-ÿ¶úÿœ-ÿìúÿÒ- ñÿû- ª— ·Ú j 5ÿ´ © N ¡ñ “N ©ñ WN ©‡ œN ©Í œ´ ©j Œ´ ©j Œ´ ©j Œjÿ¼€ v [€ v [€ v [í ¨µ Œí ¨µ Sí ¨µ c¿ P  _¿ P  _¿ P  _¿ P  _¿ P  _Æ 1 	Æ 1 	Æ 1Å 	0 Œi ˆ0 Œi ˆ0 Œi ˆ0 Œi ˆ0 Œi ˆ0 Œi ˆ = +Î É Î Ê V÷ XÊ V÷ XÊ V÷ XzÿòÁ N€ vˆ [€ÿ¾€ÿ¾& (… … … … … … … | `æ Šæ Šæ Šæ Šèÿ¾è èÿÇèÿ´ã Š» `» `» `» `» `| t| t| t| t+ … … … | `| `| `| `€ Šæ Šæ Šæ Šæ Šæ Š¬ c¬ c¬ c¬ cã Šèÿ•èÿ”èÿÊè è ‰Ï +T Š´ ‚´ Š´ Š´ Šã Šã Šã Š» `» `» `J ŠJ ŠJ Š  C  C  C  C& (& (& (| t| t| t| t| t| t 1+ + # G# G# G8 ğÿğÿş‘ ”ÿú2ÿxfÿı—ÿ›8 û ©Œ ©Ê V´ ©- · ©ü ©´ ©€ v ©Æ 1Î  9-ÿÖÎ … dP cˆ ‘— Ã] s š [ˆ šà !÷ )—ÿæ]  [] — zŒ ©s ±¿ P- ·-ÿÖj 5$ ² © M8 û ©s ±Œ ©´ ±ü ©´ ©€ vµ ² ©5 wÆ 1 9Z m= ] œ [} Œ0 \É ÷ )= ][ š  _ñ úÿ¼éÿ¿R œÉ  = + = + = +Î É e g ˆ  ÿ´™ 0ü © ‹8 Z mŒ ©´ ±= ] œ‰ Zš _
 ÿûY [	I v¿ P X5 w0 \Î  .- ·C   - ·8 Z m8 Z mzÿòÁ NŒ ©= ]‡ ]7 b7 bC   ¿ P X´ ± œ´ ± œ€ v [q g‹ [q g‹ [d “M d MÉ  MÉ  MÉ z –Y gë ²6  9÷ )ƒ _© /  ,8 Z m8 Z m8 Z m8 ZÿÊ8 Z m8 Z m8 Z m8 Z m8 Z m8 Z m8 Z m8 Z mŒ ©= ]Œ ©= ]Œ ©= ]Œ ©= ]Œÿğ=ÿºŒ ©= ]Œ ©= ]Œ ©= ]- ·ú ›- £ñ …€ v [€ v [€ v [€ GÿÄ€ v [€ v [€ v [~ e’ [~ e’ [~ e’ [~ e’ [~ e’ [0 Œi ˆ0 Œi ˆ Œó ˆ Œó ˆ Œó ˆ Œó ˆ Œó ˆÎ É Î É Î É ¡ _¡ _$ ²R œ´ © œÆ 1Ø ( 9÷ )z –Y gz –Y gs ±[ šC   / ?½ÿŞh ŒÿÔÿÔs [ÿü8 'ÿÓ´ ± œ´ © œü ©ï © /  ,Î  . 9÷ )P cl ? ~ ]~ ^~ 5~ š’ d¦ ‡s z} `´ ©j Œ8 Z 9Œ _= )-ÿ
úşğ€ v 3í Uµÿ‹0 Œi +¦ÿ:û ©} Œ? ©ƒ _? ©ƒ _´ ©h Œ ©  © N ©ñ †ü © ‹´ ©j Œ ©} Œí ¨µ ‚¿ P  _Æ 1 	 à ! à ! = +Ê V÷ XÆşx… "ÿŸÿ¼$ÿÀÅÿßgÿWüÿø… P Šæ Š# Gã Šè —T Š Š» `\ Š& (+ T &èÿ´+ æ Š¯ Š  Cè —èÿ´Ï +T Š "… P Š¯ Šæ Šì Š Šã Š» `Î Š\ Š| `& (T &? Gã Š| `+ Ã ì Š "g `8 Z mŒ ©= ]   * * * * * F ` ˜ Ø,~´Úş*8LZŒÈ"RŠâ*6J^r¨4hšÂÜò*BNj†–¸Î,j–ĞäFf~”¨¶ÈÜêø	4	`		º	î

H
j
„
¬
Ê
Ö(V„°Ê(FZx–¸Îö,Rl ÔBV¼Ü8p|Œğş$Dj ®Ğæú(R^p‚”Êò\†ÂdÎü&2Nj‚¦Ò\t¬ÚP~¨Âô$<Pt’¸Îò 4J^l”œ®Ä4Fd Ì>€˜ÚHj¢¼î2V„¼î2nØH†°æ"Tz’¼è  P f Š ® ò!
!,!F!f!!¼!â""X"„"Ä"ô##0#\#’#¨#Ä#ä$ $$*$>$Š$¢$À$Ú$ú%"%N%r%¤%Ü&&>&p&¨&Ø'''N'~'®'î(((J(n(œ(Ì))<)~)¾**X*–*Ì*î++V+’+ø,\,š,Ö--,-X-l-Œ-œ-¬.@.–.Ä.ö/./D/X/€/¨/Î/ô0040P0l0–0À11X1|1š1Â1è22F2~2¨2Ğ2ö33X3„3°3À3Ğ3ö4,4r4²4ğ5$5V5”5Ì5ş606j6š6Æ6ò707N7N7N7N7N7N7N7N7N7N7N7N7N7V7^7h7r7~7’7¦7º7Ğ7Ü7è88"8F8^8j8z8†8ü99&949>9\9š9Ş::(:Œ:¾:ø;:;j;;Ê;ş<R<†<Ê<ò=$=6=H=Z=l=°=Ä=â=ğ>>b>†>Ê>î>ü?
?(?6?J?^?j?’?¶?ô@.@f@Ì@ÌAœAàAôB"B:BHBzB¨BÈBôCC6CPCpC„C CÒD D$D>DTD„DœD¨DÄDâDòEE*EZE~E¶EŞFF*FJFbFŠFªFÂFØFşGG6GlGŠG¶GèGüH<HlHzH¦II<IpIŒI¨IÄIàJ JTJ~JJ¨JàJöKK$KBKzK¤KØL L2LlLœLÂLÚMM,MXM”MªMÆMèNN$NBNZNxN¢N®NÔOO>OfO€O°OÒOøPPbPnP”P²PØPøQ4QhQ–QÌRR>R€R°RŞSS:SvS~S¬SØT
TDTzT´TŞUU\UnU˜U¬UÖUôUşVVVV&V0V:VjV~V²VîW W(W0W8WDWLWXWWW–WÊWşX(XDXpX|XˆX”X X¬X¸XÄXĞXÜXèXôY YYY$Y0Y<YHYTY`YlYxY„YYœY¨Y´YÀYÌYØYäYğYüZZZ Z,Z8ZDZPZ\ZhZtZ€ZŒZ˜Z¤Z°Z¼ZÈZÔZàZìZø[[[[([4[d[²[¾[Ê[Ö[â[î[ú\\\\*\6\B\N\Z\f\r\ \è\ô] ]]]$]0]<]H]T]`]l]x]„]]œ]¨]´]À]Ì]Ø]ä]ğ]ü^^^ ^,^8^D^P^\^h^t^€^Œ^˜^¤^°^¼^È^Ô^à^ì^ø____(_4_@_L_X_d_p_|_ˆ_”_ _¬_¸_Ä_Ğ_Ü_è_ô` ```$`0`<`H`T```l`x`„``œ`¨`Üaaa$a0a<aHaTa`alaxa„aaœa¨a´aÀaÌaØaäağaübbb b,b8bDbPb\bhbtb€bŒb˜b¤b°b¼bÈbÔbàbìbøcccc(c4c@cpc|cˆc”c c¬c¸cÄcĞcşd
dd"d.d:dFdRd^djdvd‚ddšd¦d²d¾dÊdÖdâdîdúeeee*e6eBeNeZefere~eŠe–e¢e®eºeÆeøffff(f4f@fLfXfdfpf|fˆf”f f¨f°f¸fÀfÈfĞfØfàfèfğføg gggg(g4g@gLgXgdglgtg|g„gŒg˜g¤g°g¼gÈgÔgàhh"h.h6h>hJhVh^hfhnhvh‚hŠh’hšh¢hªh²hºhÂhÊhÒhŞhæhîii$i,i8iDiLiTi`ihiti€iŒi˜i¤i°i¼iÈiÔiàièiğiüjjjj(j4j@jLjXjdjpjxj€jŒj˜j¤j°j¼jÈjÔjàjèjğjøkkkk$k0k<kHkPkXkdkpk|k„kkœk¨k´kÀkÌkØkäkğküllll$l0l<lHlTl`lllxl„llœl¨l¸lÈlÔlàlèlôm mmm$m0m<mHmTm`mlmxm„mm m°m¼mÈmÔmàmìmønnn n0n<nHnTn`nlnxn„nnœn¨n´nÀnÌnØnènøoooo(o4o@oLoXodopo|oˆo”o o¬o¸oÈoØoäoğoüppp p,p8pDpPp\phptp€pŒp˜p¤p°p¼pÈpÔpàpìpøqqqq(q4q@qvq†q’qqªq¶qÂqÎqÚqæqòqşr
rr"r.r:rFrRr^rfr”rÂrŞrús sDsTsdsps|sˆs”s s¬sÌsêtt8t@tLtVt^tftntvt~t†t’ttªt¶tÂtÎtÚtætòtşu
uu"u.u:uFuRu^ujuvu‚uušu¦u²u¾uÊuÖuâuîuúvvvv*v6vBvNvZvfvrv~vŠv–v¢v®vºvÆvÒvŞvêvöwwww&w2w>wJwRwZwbwjwrwzw‚wŠw’wšw¢wªw²w¾wÊwÖwâwêwòwşxxxx&x.x6x>xJxRxZxbxjxrxzx‚xŠxÈxæyy y,y8yDyLyXydypy|     â   T                ¢  	   ^    	   ^  	   j  	   ^  	   ^  	  , x  	   ¤  	  @ À  	 	    	    	  &   	  \F  	  T¢ C o p y r i g h t   2 0 1 1   G o o g l e   I n c .   A l l   R i g h t s   R e s e r v e d . R o b o t o R e g u l a r V e r s i o n   2 . 0 0 1 1 0 1 ;   2 0 1 4 R o b o t o - R e g u l a r R o b o t o   i s   a   t r a d e m a r k   o f   G o o g l e . G o o g l e G o o g l e . c o m C h r i s t i a n   R o b e r t s o n L i c e n s e d   u n d e r   t h e   A p a c h e   L i c e n s e ,   V e r s i o n   2 . 0 h t t p : / / w w w . a p a c h e . o r g / l i c e n s e s / L I C E N S E - 2 . 0       ÿj d                    Xfont/ttfÑzÕ	
{|}_fb_xdm_frame_http_ƒhttp://static.ak.facebook.com/connect/xd_arbiter/6p3So0GhyQP.js?version=41#channel=f8c579a4&origin=http%3A%2F%2Fwww.welluneednt.comOu<!DOCTYPE html><html><head><title>Facebook Cross-Domain Messaging helper</title></head><body><script> document.domain = 'facebook.com'; if(!Array.from)Array.from=function(a){if(a==null)throw new TypeError('Object is null or undefined');var b=arguments[1],c=arguments[2],d=this,e=Object(a),f=typeof Symbol==='function'?Symbol.iterator:'@@iterator',g=typeof b==='function',h=typeof e[f]==='function',i=0,j,k;if(h){j=typeof d==='function'?new d():[];var l=e[f](),m;while(!(m=l.next()).done){k=m.value;if(g)k=b.call(c,k,i);j[i]=k;i+=1;}j.length=i;return j;}var n=e.length;if(isNaN(n)||n<0)n=0;j=typeof d==='function'?new d(n):new Array(n);while(i<n){k=e[i];if(g)k=b.call(c,k,i);j[i]=k;i+=1;}j.length=i;return j;};
if(!Array.isArray)Array.isArray=function(a){return Object.prototype.toString.call(a)=='[object Array]';};
self.__DEV__=self.__DEV__||0;
(function(a){function b(c,d){if(this==null)throw new TypeError('Array.prototype.findIndex called on null or undefined');if(typeof c!=='function')throw new TypeError('predicate must be a function');var e=Object(this),f=e.length>>>0;for(var g=0;g<f;g++)if(c.call(d,e[g],g,e))return g;return -1;}if(!Array.prototype.findIndex)Array.prototype.findIndex=b;if(!Array.prototype.find)Array.prototype.find=function(c,d){if(this==null)throw new TypeError('Array.prototype.find called on null or undefined');var e=b.call(this,c,d);return e===-1?a:this[e];};})();
(function(){var a=Object.prototype.toString,b=Object("a"),c=b[0]!="a";function d(e){e=+e;if(e!==e){e=0;}else if(e!==0&&e!==(1/0)&&e!==-(1/0))e=(e>0||-1)*Math.floor(Math.abs(e));return e;}if(!Array.prototype.map)Array.prototype.map=function(e,f){if(typeof e!='function')throw new TypeError();var g,h=this.length,i=new Array(h);for(g=0;g<h;++g)if(g in this)i[g]=e.call(f,this[g],g,this);return i;};if(!Array.prototype.forEach)Array.prototype.forEach=function(e,f){this.map(e,f);};if(!Array.prototype.filter)Array.prototype.filter=function(e,f){if(typeof e!='function')throw new TypeError();var g,h,i=this.length,j=[];for(g=0;g<i;++g)if(g in this){h=this[g];if(e.call(f,h,g,this))j.push(h);}return j;};if(!Array.prototype.every)Array.prototype.every=function(e,f){if(typeof e!='function')throw new TypeError();var g=new Object(this),h=g.length;for(var i=0;i<h;i++)if(i in g)if(!e.call(f,g[i],i,g))return false;return true;};if(!Array.prototype.some)Array.prototype.some=function(e,f){if(typeof e!='function')throw new TypeError();var g=new Object(this),h=g.length;for(var i=0;i<h;i++)if(i in g)if(e.call(f,g[i],i,g))return true;return false;};if(!Array.prototype.indexOf)Array.prototype.indexOf=function(e,f){var g=this.length;f|=0;if(f<0)f+=g;for(;f<g;f++)if(f in this&&this[f]===e)return f;return -1;};if(!Array.prototype.lastIndexOf||([0,1].lastIndexOf(0,-3)!=-1))Array.prototype.lastIndexOf=function(e){var f=c&&a.call(this)=="[object String]"?this.split(""):Object(this),g=f.length>>>0;if(!g)return -1;var h=g-1;if(arguments.length>1)h=Math.min(h,d(arguments[1]));h=h>=0?h:g-Math.abs(h);for(;h>=0;h--)if(h in f&&e===f[h])return h;return -1;};if(!Array.prototype.reduce)Array.prototype.reduce=function(e){if(typeof e!=='function')throw new TypeError(e+' is not a function');var f=this.length>>>0,g,h,i=arguments.length===2;if(i)g=arguments[1];for(h=0;h<f;++h)if(this.hasOwnProperty(h))if(i===false){g=this[h];i=true;}else g=e(g,this[h],h,this);if(i===false)throw new TypeError('Reduce of empty array with no initial value');return g;};if(!Array.prototype.reduceRight)Array.prototype.reduceRight=function(e){if(typeof e!=='function')throw new TypeError(e+' is not a function');var f=this.length>>>0,g,h,i=arguments.length===2;if(i)g=arguments[1];for(h=f-1;h>-1;--h)if(this.hasOwnProperty(h))if(i===false){g=this[h];i=true;}else g=e(g,this[h],h,this);if(i===false)throw new TypeError('Reduce of empty array with no initial value');return g;};})();
if(!Date.now)Date.now=function(){return new Date().getTime();};
(function(){if(!Date.prototype.toISOString){var a=function(b){if(b<10)return '0'+b;return b;};Date.prototype.toISOString=function(){if(!isFinite(this))throw new Error('Invalid time value');var b=this.getUTCFullYear();b=(b<0?'-':(b>9999?'+':''))+('00000'+Math.abs(b)).slice(0<=b&&b<=9999?-4:-6);return b+'-'+a(this.getUTCMonth()+1)+'-'+a(this.getUTCDate())+'T'+a(this.getUTCHours())+':'+a(this.getUTCMinutes())+':'+a(this.getUTCSeconds())+'.'+(this.getUTCMilliseconds()/1000).toFixed(3).slice(2,5)+'Z';};}})();
if(!Function.prototype.bind)Function.prototype.bind=function(a){if(typeof this!='function')throw new TypeError('Bind must be called on a function');var b=this,c=Array.prototype.slice,d=c.call(arguments,1);function e(){var f=b.prototype&&(this instanceof b);return b.apply(!f&&a||this,d.concat(c.call(arguments)));}e.prototype=b.prototype;e.displayName='bound:'+(b.displayName||b.name||'(?)');e.toString=function f(){return 'bound: '+b;};return e;};

(function(){var a=function(e,f){if(!e&&!f)return null;var g={};if(typeof e!=='undefined')g.type=e;if(typeof f!=='undefined')g.signature=f;return g;},b=function(e,f){return a(e&&/^[A-Z]/.test(e)?e:(void 0),f&&((f.params&&f.params.length)||f.returns)?'function('+(f.params?f.params.map(function(g){return (/\?/).test(g)?'?'+g.replace('?',''):g;}).join(','):'')+')'+(f.returns?':'+f.returns:''):(void 0));},c=function(e,f,g){if(typeof __transform_includes==='undefined')return e;if('sourcemeta' in __transform_includes)e.__SMmeta=f;if('typechecks' in __transform_includes){var h=b(f?f.name:(void 0),g);if(h)__w(e,h);}return e;},d=function(e,f,g,h){if(typeof __transform_includes==='undefined')return g.apply(e,f);var i='typechecks' in __transform_includes;if(i&&h&&h.params)__t.apply(e,h.params);var j=g.apply(e,f);if(i&&h&&h.returns)__t([j,h.returns]);return j;};__annotator=c;__bodyWrapper=d;})();
var JSON;if(!JSON)JSON={};(function(){'use strict';function a(j){return j<10?'0'+j:j;}if(typeof Date.prototype.toJSON!=='function'){Date.prototype.toJSON=function(j){return isFinite(this.valueOf())?this.getUTCFullYear()+'-'+a(this.getUTCMonth()+1)+'-'+a(this.getUTCDate())+'T'+a(this.getUTCHours())+':'+a(this.getUTCMinutes())+':'+a(this.getUTCSeconds())+'Z':null;};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(j){return this.valueOf();};}var b=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,c=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,d,e,f={'\b':'\\b','\t':'\\t','\n':'\\n','\f':'\\f','\r':'\\r','"':'\\"','\\':'\\\\'},g;function h(j){c.lastIndex=0;return c.test(j)?'"'+j.replace(c,function(k){var l=f[k];return typeof l==='string'?l:'\\u'+('0000'+k.charCodeAt(0).toString(16)).slice(-4);})+'"':'"'+j+'"';}function i(j,k){var l,m,n,o,p=d,q,r=k[j];if(r&&typeof r==='object'&&typeof r.toJSON==='function')r=r.toJSON(j);if(typeof g==='function')r=g.call(k,j,r);switch(typeof r){case 'string':return h(r);case 'number':return isFinite(r)?String(r):'null';case 'boolean':case 'null':return String(r);case 'object':if(!r)return 'null';d+=e;q=[];if(Object.prototype.toString.apply(r)==='[object Array]'){o=r.length;for(l=0;l<o;l+=1)q[l]=i(l,r)||'null';n=q.length===0?'[]':d?'[\n'+d+q.join(',\n'+d)+'\n'+p+']':'['+q.join(',')+']';d=p;return n;}if(g&&typeof g==='object'){o=g.length;for(l=0;l<o;l+=1)if(typeof g[l]==='string'){m=g[l];n=i(m,r);if(n)q.push(h(m)+(d?': ':':')+n);}}else for(m in r)if(Object.prototype.hasOwnProperty.call(r,m)){n=i(m,r);if(n)q.push(h(m)+(d?': ':':')+n);}n=q.length===0?'{}':d?'{\n'+d+q.join(',\n'+d)+'\n'+p+'}':'{'+q.join(',')+'}';d=p;return n;}}if(typeof JSON.stringify!=='function')JSON.stringify=function(j,k,l){var m;d='';e='';if(typeof l==='number'){for(m=0;m<l;m+=1)e+=' ';}else if(typeof l==='string')e=l;g=k;if(k&&typeof k!=='function'&&(typeof k!=='object'||typeof k.length!=='number'))throw new Error('JSON.stringify');return i('',{'':j});};if(typeof JSON.parse!=='function')JSON.parse=function(j,k){var l;function m(n,o){var p,q,r=n[o];if(r&&typeof r==='object')for(p in r)if(Object.prototype.hasOwnProperty.call(r,p)){q=m(r,p);if(q!==(void 0)){r[p]=q;}else delete r[p];}return k.call(n,o,r);}j=String(j);b.lastIndex=0;if(b.test(j))j=j.replace(b,function(n){return '\\u'+('0000'+n.charCodeAt(0).toString(16)).slice(-4);});if(/^[\],:{}\s]*$/.test(j.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,'@').replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,']').replace(/(?:^|:|,)(?:\s*\[)+/g,''))){l=(eval)('('+j+')');return typeof k==='function'?m({'':l},''):l;}throw new SyntaxError('JSON.parse');};}());
if(JSON.stringify(["\u2028\u2029"])==='["\u2028\u2029"]')JSON.stringify=function(a){var b=/\u2028/g,c=/\u2029/g;return function(d,e,f){var g=a.call(this,d,e,f);if(g){if(-1<g.indexOf('\u2028'))g=g.replace(b,'\\u2028');if(-1<g.indexOf('\u2029'))g=g.replace(c,'\\u2029');}return g;};}(JSON.stringify);
if(typeof Math.log2!=='function')Math.log2=function(a){return Math.log(a)/Math.LN2;};if(typeof Math.log10!=='function')Math.log10=function(a){return Math.log(a)/Math.LN10;};
if(typeof Number.isFinite!=='function')Number.isFinite=function(a){return (typeof a==='number')&&isFinite(a);};if(typeof Number.isNaN!=='function')Number.isNaN=function(a){return (typeof a==='number')&&isNaN(a);};if(typeof Number.EPSILON!=='number')Number.EPSILON=Math.pow(2,-52);if(typeof Number.MAX_SAFE_INTEGER!=='number')Number.MAX_SAFE_INTEGER=Math.pow(2,53)-1;if(typeof Number.MIN_SAFE_INTEGER!=='number')Number.MIN_SAFE_INTEGER=-1*Number.MAX_SAFE_INTEGER;if(typeof Number.isSafeInteger!=='function')Number.isSafeInteger=function(a){return Number.isFinite(a)&&a>=Number.MIN_SAFE_INTEGER&&a<=Number.MAX_SAFE_INTEGER&&Math.floor(a)===a;};
if(!Object.create)Object.create=function(a){var b=typeof a;if(b!='object'&&b!='function')throw new TypeError('Object prototype may only be a Object or null');var c=function(){if(a===null){this.__proto__=a;delete this.__proto__;}};c.prototype=a;return new c();};if(!Object.keys)Object.keys=function a(b){var c=typeof b;if((c!='object'&&c!='function')||b===null)throw new TypeError('Object.keys called on non-object');var d=Object.prototype.hasOwnProperty,e=[];for(var f in b)if(d.call(b,f))e.push(f);return e;};if(!Object.freeze)Object.freeze=function(a){return a;};if(!Object.seal)Object.seal=function(a){return a;};

(function(){var a=!({toString:true}).propertyIsEnumerable('toString');if(!a)return;var b=['toString','toLocaleString','valueOf','hasOwnProperty','isPrototypeOf','constructor'];Object.keys=function(c){var d=typeof c;if((d!='object'&&d!='function')||c===null)throw new TypeError('Object.keys called on non-object');var e=Object.prototype.hasOwnProperty,f=[];for(var g in c)if(e.call(c,g))f.push(g);for(var h=0;h<b.length;h++){var i=b[h];if(e.call(c,i))f.push(i);}return f;};Object.assign=function(c,d){if(c==null)throw new TypeError('Object.assign target cannot be null or undefined');var e=Object(c),f=Object.prototype.hasOwnProperty;for(var g=1;g<arguments.length;g++){var h=arguments[g];if(h==null)continue;var i=Object(h);for(var j in i)if(f.call(i,j))e[j]=i[j];for(var k=0;k<b.length;k++){var l=b[k];if(f.call(i,l))e[l]=i[l];}}return e;};})();
(function(){if(Object.assign)return;var a=Object.prototype.hasOwnProperty,b;if(Object.keys&&Object.keys.name!=='object_keys_polyfill'){b=function(c,d){var e=Object.keys(d);for(var f=0;f<e.length;f++)c[e[f]]=d[e[f]];};}else b=function(c,d){for(var e in d)if(a.call(d,e))c[e]=d[e];};Object.assign=function(c,d){if(c==null)throw new TypeError('Object.assign target cannot be null or undefined');var e=Object(c);for(var f=1;f<arguments.length;f++){var g=arguments[f];if(g!=null)b(e,Object(g));}return e;};}());
if({}.hasOwnProperty('__proto__'))Object.prototype.hasOwnProperty=function(a){return function b(c){return c!='__proto__'&&a.call(this,c);};}(Object.prototype.hasOwnProperty);
(function(a){a.__m=function(b,c){b.__SMmeta=c;return b;};})(this);
if(!String.prototype.startsWith)String.prototype.startsWith=function(a){"use strict";if(this==null)throw TypeError();var b=String(this),c=arguments.length>1?(Number(arguments[1])||0):0,d=Math.min(Math.max(c,0),b.length);return b.indexOf(String(a),c)==d;};if(!String.prototype.endsWith)String.prototype.endsWith=function(a){"use strict";if(this==null)throw TypeError();var b=String(this),c=b.length,d=String(a),e=arguments.length>1?(Number(arguments[1])||0):c,f=Math.min(Math.max(e,0),c),g=f-d.length;if(g<0)return false;return b.lastIndexOf(d,g)==g;};if(!String.prototype.contains)String.prototype.contains=function(a){"use strict";if(this==null)throw TypeError();var b=String(this),c=arguments.length>1?(Number(arguments[1])||0):0;return b.indexOf(String(a),c)!=-1;};if(!String.prototype.repeat)String.prototype.repeat=function(a){"use strict";if(this==null)throw TypeError();var b=String(this);a=Number(a)||0;if(a<0||a===Infinity)throw RangeError();if(a===1)return b;var c='';while(a){if(a&1)c+=b;if((a>>=1))b+=b;}return c;};
if(!String.prototype.trim)String.prototype.trim=function(){if(this==null)throw new TypeError('String.prototype.trim called on null or undefined');return String.prototype.replace.call(this,/^\s+|\s+$/g,'');};
(function(){var a,b=String.prototype.split,c=/()??/.exec("")[1]===a;String.prototype.split=function(d,e){var f=this;if(Object.prototype.toString.call(d)!=="[object RegExp]")return b.call(f,d,e);var g=[],h=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.extended?"x":"")+(d.sticky?"y":""),i=0,d=new RegExp(d.source,h+"g"),j,k,l,m;f+="";if(!c)j=new RegExp("^"+d.source+"$(?!\\s)",h);e=e===a?-1>>>0:e>>>0;while(k=d.exec(f)){l=k.index+k[0].length;if(l>i){g.push(f.slice(i,k.index));if(!c&&k.length>1)k[0].replace(j,function(){for(var n=1;n<arguments.length-2;n++)if(arguments[n]===a)k[n]=a;});if(k.length>1&&k.index<f.length)Array.prototype.push.apply(g,k.slice(1));m=k[0].length;i=l;if(g.length>=e)break;}if(d.lastIndex===k.index)d.lastIndex++;}if(i===f.length){if(m||!d.test(""))g.push("");}else g.push(f.slice(i));return g.length>e?g.slice(0,e):g;};})();
__t=function(a){return a[0];};__w=function(a){return a;};
if(typeof console=='undefined')(function(){function a(){}console={log:a,info:a,warn:a,debug:a,dir:a,error:a};})();
var require,__d;(function(a){var b={},c={},d=['global','require','requireDynamic','requireLazy','module','exports'];require=function(e,f){if(c.hasOwnProperty(e))return c[e];if(!b.hasOwnProperty(e)){if(f)return null;throw new Error('Module '+e+' has not been defined');}var g=b[e],h=g.deps,i=g.factory.length,j,k=[];for(var l=0;l<i;l++){switch(h[l]){case 'module':j=g;break;case 'exports':j=g.exports;break;case 'global':j=a;break;case 'require':j=require;break;case 'requireDynamic':j=require;break;case 'requireLazy':j=null;break;default:j=require.call(null,h[l]);}k.push(j);}g.factory.apply(a,k);c[e]=g.exports;return g.exports;};require.__markCompiled=function(){};__d=function(e,f,g,h){if(typeof g=='function'){b[e]={factory:g,deps:d.concat(f),exports:{}};if(h===3)require.call(null,e);}else c[e]=g;};})(this);
__d("QueryString",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(k){var l=[];Object.keys(k).sort().forEach(function(m){var n=k[m];if(typeof n==='undefined')return;if(n===null){l.push(m);return;}l.push(encodeURIComponent(m)+'='+encodeURIComponent(n));});return l.join('&');}function h(k,l){var m={};if(k==='')return m;var n=k.split('&');for(var o=0;o<n.length;o++){var p=n[o].split('=',2),q=decodeURIComponent(p[0]);if(l&&m.hasOwnProperty(q))throw new URIError('Duplicate key: '+q);m[q]=p.length===2?decodeURIComponent(p[1]):null;}return m;}function i(k,l){return k+(~k.indexOf('?')?'&':'?')+(typeof l==='string'?l:j.encode(l));}var j={encode:g,decode:h,appendToUrl:i};e.exports=j;},null);
__d("resolveWindow",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h){var i=window,j=h.split('.');try{for(var l=0;l<j.length;l++){var m=j[l],n=/^frames\[['"]?([a-zA-Z0-9\-_]+)['"]?\]$/.exec(m);if(n){i=i.frames[n[1]];}else if(m==='opener'||m==='parent'||m==='top'){i=i[m];}else return null;}}catch(k){return null;}return i;}e.exports=g;},null);
__d("sprintf",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h){for(var i=[],j=1,k=arguments.length;j<k;j++)i.push(arguments[j]);var l=0;return h.replace(/%s/g,function(m){return i[l++];});}e.exports=g;},null);
__d("Log",["sprintf"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={DEBUG:3,INFO:2,WARNING:1,ERROR:0};function i(k,l){var m=Array.prototype.slice.call(arguments,2),n=g.apply(null,m),o=window.console;if(o&&j.level>=l)o[k in o?k:'log'](n);}var j={level:-1,Level:h,debug:i.bind(null,'debug',h.DEBUG),info:i.bind(null,'info',h.INFO),warn:i.bind(null,'warn',h.WARNING),error:i.bind(null,'error',h.ERROR)};e.exports=j;},null);
__d("wrapFunction",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={};function h(i,j,k){j=j||'default';return function(){var l=j in g?g[j](i,k):i;return l.apply(this,arguments);};}h.setWrapper=function(i,j){j=j||'default';g[j]=i;};e.exports=h;},null);
__d("DOMEventListener",["wrapFunction"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h,i;if(window.addEventListener){h=function(k,l,m){m.wrapper=g(m,'entry','DOMEventListener.add '+l);k.addEventListener(l,m.wrapper,false);};i=function(k,l,m){k.removeEventListener(l,m.wrapper,false);};}else if(window.attachEvent){h=function(k,l,m){m.wrapper=g(m,'entry','DOMEventListener.add '+l);k.attachEvent('on'+l,m.wrapper);};i=function(k,l,m){k.detachEvent('on'+l,m.wrapper);};}else i=h=function(){};var j={add:function(k,l,m){h(k,l,m);return {remove:function(){i(k,l,m);k=null;}};},remove:i};e.exports=j;},null);
__d("DOMWrapper",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g,h,i={setRoot:function(j){g=j;},getRoot:function(){return g||document.body;},setWindow:function(j){h=j;},getWindow:function(){return h||self;}};e.exports=i;},null);
__d("emptyFunction",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(i){return function(){return i;};}function h(){}h.thatReturns=g;h.thatReturnsFalse=g(false);h.thatReturnsTrue=g(true);h.thatReturnsNull=g(null);h.thatReturnsThis=function(){return this;};h.thatReturnsArgument=function(i){return i;};e.exports=h;},null);
__d("UserAgent_DEPRECATED",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g=false,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v;function w(){if(g)return;g=true;var y=navigator.userAgent,z=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(y),aa=/(Mac OS X)|(Windows)|(Linux)/.exec(y);s=/\b(iPhone|iP[ao]d)/.exec(y);t=/\b(iP[ao]d)/.exec(y);q=/Android/i.exec(y);u=/FBAN\/\w+;/i.exec(y);v=/Mobile/i.exec(y);r=!!(/Win64/.exec(y));if(z){h=z[1]?parseFloat(z[1]):(z[5]?parseFloat(z[5]):NaN);if(h&&document&&document.documentMode)h=document.documentMode;var ba=/(?:Trident\/(\d+.\d+))/.exec(y);m=ba?parseFloat(ba[1])+4:h;i=z[2]?parseFloat(z[2]):NaN;j=z[3]?parseFloat(z[3]):NaN;k=z[4]?parseFloat(z[4]):NaN;if(k){z=/(?:Chrome\/(\d+\.\d+))/.exec(y);l=z&&z[1]?parseFloat(z[1]):NaN;}else l=NaN;}else h=i=j=l=k=NaN;if(aa){if(aa[1]){var ca=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(y);n=ca?parseFloat(ca[1].replace('_','.')):true;}else n=false;o=!!aa[2];p=!!aa[3];}else n=o=p=false;}var x={ie:function(){return w()||h;},ieCompatibilityMode:function(){return w()||(m>h);},ie64:function(){return x.ie()&&r;},firefox:function(){return w()||i;},opera:function(){return w()||j;},webkit:function(){return w()||k;},safari:function(){return x.webkit();},chrome:function(){return w()||l;},windows:function(){return w()||o;},osx:function(){return w()||n;},linux:function(){return w()||p;},iphone:function(){return w()||s;},mobile:function(){return w()||(s||t||q||v);},nativeApp:function(){return w()||u;},android:function(){return w()||q;},ipad:function(){return w()||t;}};e.exports=x;},null);
__d("copyProperties",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h,i,j,k,l,m,n){h=h||{};var o=[i,j,k,l,m],p=0,q;while(o[p]){q=o[p++];for(var r in q)h[r]=q[r];if(q.hasOwnProperty&&q.hasOwnProperty('toString')&&(typeof q.toString!='undefined')&&(h.toString!==q.toString))h.toString=q.toString;}return h;}e.exports=g;},null);
__d("guid",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(){return 'f'+(Math.random()*(1<<30)).toString(16).replace('.','');}e.exports=g;},null);
__d("htmlSpecialChars",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g=/&/g,h=/</g,i=/>/g,j=/"/g,k=/'/g;function l(m){if(typeof m=='undefined'||m===null||!m.toString)return '';if(m===false){return '0';}else if(m===true)return '1';return m.toString().replace(g,'&amp;').replace(j,'&quot;').replace(k,'&#039;').replace(h,'&lt;').replace(i,'&gt;');}e.exports=l;},null);
__d("Flash",["DOMEventListener","DOMWrapper","QueryString","UserAgent_DEPRECATED","copyProperties","guid","htmlSpecialChars"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n={},o,p=h.getWindow().document;function q(v){var w=p.getElementById(v);if(w)w.parentNode.removeChild(w);delete n[v];}function r(){for(var v in n)if(n.hasOwnProperty(v))q(v);}function s(v){return v.replace(/\d+/g,function(w){return '000'.substring(w.length)+w;});}function t(v){if(!o){if(j.ie()>=9)g.add(window,'unload',r);o=true;}n[v]=v;}var u={embed:function(v,w,x,y){var z=l();v=m(v).replace(/&amp;/g,'&');x=k({allowscriptaccess:'always',flashvars:y,movie:v},x||{});if(typeof x.flashvars=='object')x.flashvars=i.encode(x.flashvars);var aa=[];for(var ba in x)if(x.hasOwnProperty(ba)&&x[ba])aa.push('<param name="'+m(ba)+'" value="'+m(x[ba])+'">');var ca=w.appendChild(p.createElement('span')),da='<object '+(j.ie()?'classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" ':'type="application/x-shockwave-flash"')+'data="'+v+'" '+(x.height?'height="'+x.height+'" ':'')+(x.width?'width="'+x.width+'" ':'')+'id="'+z+'">'+aa.join('')+'</object>';ca.innerHTML=da;var ea=ca.firstChild;t(z);return ea;},remove:q,getVersion:function(){var v='Shockwave Flash',w='application/x-shockwave-flash',x='ShockwaveFlash.ShockwaveFlash',y;if(navigator.plugins&&typeof navigator.plugins[v]=='object'){var z=navigator.plugins[v].description;if(z&&navigator.mimeTypes&&navigator.mimeTypes[w]&&navigator.mimeTypes[w].enabledPlugin)y=z.match(/\d+/g);}if(!y)try{y=(new ActiveXObject(x)).GetVariable('$version').match(/(\d+),(\d+),(\d+),(\d+)/);y=Array.prototype.slice.call(y,1);}catch(aa){}return y;},checkMinVersion:function(v){var w=u.getVersion();if(!w)return false;return s(w.join('.'))>=s(v);},isAvailable:function(){return !!u.getVersion();}};e.exports=u;},null);
__d("dotAccess",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h,i,j){var k=i.split('.');do{var l=k.shift();h=h[l]||j&&(h[l]={});}while(k.length&&h);return h;}e.exports=g;},null);
__d("GlobalCallback",["DOMWrapper","dotAccess","guid","wrapFunction"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k,l,m={setPrefix:function(n){k=h(g.getWindow(),n,true);l=n;},create:function(n,o){if(!k)this.setPrefix('__globalCallbacks');var p=i();k[p]=j(n,'entry',o||'GlobalCallback');return l+'.'+p;},remove:function(n){var o=n.substring(l.length+1);delete k[o];}};e.exports=m;},null);
__d("XDM",["DOMEventListener","DOMWrapper","emptyFunction","Flash","GlobalCallback","guid","Log","UserAgent_DEPRECATED","wrapFunction"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p={},q={transports:[]},r=h.getWindow();function s(u){var v={},w=u.length,x=q.transports;while(w--)v[u[w]]=1;w=x.length;while(w--){var y=x[w],z=p[y];if(!v[y]&&z.isAvailable())return y;}}var t={register:function(u,v){m.debug('Registering %s as XDM provider',u);q.transports.push(u);p[u]=v;},create:function(u){if(!u.whenReady&&!u.onMessage){m.error('An instance without whenReady or onMessage makes no sense');throw new Error('An instance without whenReady or '+'onMessage makes no sense');}if(!u.channel){m.warn('Missing channel name, selecting at random');u.channel=l();}if(!u.whenReady)u.whenReady=i;if(!u.onMessage)u.onMessage=i;var v=u.transport||s(u.blacklist||[]),w=p[v];if(w&&w.isAvailable()){m.debug('%s is available',v);w.init(u);return v;}}};t.register('flash',(function(){var u=false,v,w=false,x=15000,y;return {isAvailable:function(){return j.checkMinVersion('8.0.24');},init:function(z){m.debug('init flash: '+z.channel);var aa={send:function(da,ea,fa,ga){m.debug('sending to: %s (%s)',ea,ga);v.postMessage(da,ea,ga);}};if(u){z.whenReady(aa);return;}var ba=z.root.appendChild(r.document.createElement('div')),ca=k.create(function(){k.remove(ca);clearTimeout(y);m.info('xdm.swf called the callback');var da=k.create(function(ea,fa){ea=decodeURIComponent(ea);fa=decodeURIComponent(fa);m.debug('received message %s from %s',ea,fa);z.onMessage(ea,fa);},'xdm.swf:onMessage');v.init(z.channel,da);z.whenReady(aa);},'xdm.swf:load');v=j.embed(z.flashUrl,ba,null,{protocol:location.protocol.replace(':',''),host:location.host,callback:ca,log:w});y=setTimeout(function(){m.warn('The Flash component did not load within %s ms - '+'verify that the container is not set to hidden or invisible '+'using CSS as this will cause some browsers to not load '+'the components',x);},x);u=true;}};})());t.register('postmessage',(function(){var u=false;return {isAvailable:function(){return !!r.postMessage;},init:function(v){m.debug('init postMessage: '+v.channel);var w='_FB_'+v.channel,x={send:function(y,z,aa,ba){if(r===aa){m.error('Invalid windowref, equal to window (self)');throw new Error();}m.debug('sending to: %s (%s)',z,ba);var ca=function(){aa.postMessage('_FB_'+ba+y,z);};if(n.ie()==8||n.ieCompatibilityMode()){setTimeout(ca,0);}else ca();}};if(u){v.whenReady(x);return;}g.add(r,'message',o(function(event){var y=event.data,z=event.origin||'native';if(!/^(https?:\/\/|native$)/.test(z)){m.debug('Received message from invalid origin type: %s',z);return;}if(typeof y!='string'){m.warn('Received message of type %s from %s, expected a string',typeof y,z);return;}m.debug('received message %s from %s',y,z);if(y.substring(0,w.length)==w)y=y.substring(w.length);v.onMessage(y,z);},'entry','onMessage'));v.whenReady(x);u=true;}};})());e.exports=t;},null);
__d("initXdArbiter",["QueryString","resolveWindow","Log","XDM","XDMConfig"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();(function(){var g=b('QueryString'),h=b('resolveWindow'),i=b('Log'),j=b('XDM'),k=b('XDMConfig');function l(z){return z?z.replace(/["'<>\(\)\\@]/g,''):z;}function m(){if(!window.chrome||!location.ancestorOrigins)return false;return !/\.facebook\.com$/.test(location.ancestorOrigins[1]);}function n(z,aa){if(m())return '';if(window!=parent&&window.parent!=window.parent.parent)try{return parent.parent.XdArbiter.register(window,z,aa);}catch(ba){i.error('Could not register with XdArbiter in parent.parent');}return '';}function o(z,aa,ba){if(!z&&m()){i.error('Can not use parent.parent to reach facebook.com');return;}var ca=z?h(z):parent.parent;try{ca.XdArbiter.handleMessage(aa,ba,window);}catch(da){i.error('Could not reach facebook.com using %s',z);}}function p(z,aa){var ba=50,ca=function(){if(!--ba)clearInterval(da);try{z();clearInterval(da);}catch(ea){}},da=setInterval(ca,50);ca();}function q(){var z=/^https?:\/\/[^\/]*/.exec(t.origin)[0];p(function(){var aa=h(t.relation).frames['fb_xdm_frame_'+u];if(typeof aa.location.search==='undefined')throw new Error('Proxy not ready');if(location.search===aa.location.search){aa.proxyMessage(s,z);}else i.error('Version mismatch: %s, %s',location.search,aa.location.search);},50);}function r(){var z=/^(.*)\/(.*)$/.exec(t.origin)[1];if(window.__fbNative&&window.__fbNative.postMessage){window.__fbNative.postMessage(s,z);}else{var aa=function(ba){window.removeEventListener('fbNativeReady',aa);window.__fbNative.postMessage(s,z);};window.addEventListener('fbNativeReady',aa);}}var s=/#(.*)|$/.exec(location.href)[1];if(window==top)location.hash='';if(!s){i.error('xd_arbiter.php loaded without a valid hash, referrer: %s',document.referrer);return;}var t=g.decode(s,true),u=location.protocol.replace(':','');if(t.relation){if(window==top&&/FBAN\/\w+;/i.test(navigator.userAgent)){i.info('Native proxy');r();}else{i.info('Legacy proxy to %s',t.relation);q();}return;}if(u!=/https?/.exec(window.name)[0]){i.info('Redirection to %s detected, aborting',u);return;}var v=l(t.transport),w=l(t.channel),x=l(t.origin),y=l(t.xd_name);if(!/^https?/.test(x)){i.error('Invalid origin presented, aborting.');return;}j.create({root:document.body,transport:v,channel:w+'_'+u,flashUrl:k.Flash.path,onMessage:function(z,aa){if(x!==aa){i.info('Received message from unknown origin %s, expected %s.',aa,x);return;}if(!/^FB_RPC:/.test(z))z=g.decode(z);o(z.relation,z,x);},whenReady:function(z){window.proxyMessage=function(da,ea){if(ea===x){z.send(da,x,parent,w);}else i.error('Failed proxying to %s, expected %s',ea,x);};var aa=null,ba={xd_action:'proxy_ready',data:aa},ca=n(y,x);if(ca)ba.registered=ca;z.send(g.encode(ba),x,parent,w);}});})();},null);__d("XDMConfig",[],{"Flash":{"path":"https:\/\/connect.facebook.net\/rsrc.php\/v1\/yW\/r\/yOZN1vHw3Z_.swf"}}); require('initXdArbiter'); </script><b id="warning" style="display: none; color:red"> SECURITY WARNING: Please treat the URL above as you would your password and do not share it with anyone. See the <a href="/l.php?u=http%3A%2F%2Fon.fb.me%2F1mXNHhm&amp;h=aAQFpI811&amp;s=1" target="_blank" rel="nofollow" onmouseover="LinkshimAsyncLink.swap(this, &quot;http:\/\/on.fb.me\/1mXNHhm&quot;);" onclick="LinkshimAsyncLink.swap(this, &quot;\/l.php?u=http\u00253A\u00252F\u00252Fon.fb.me\u00252F1mXNHhm&amp;h=aAQFpI811&amp;s=1&quot;);">Facebook Help Center</a> for more information. </b><script>if (window == top) {  setTimeout(function() {    document.getElementById("warning").style.display = 'block';  }, 2000);}</script></body></html>ÑÕ	
€‚_fb_xdm_frame_https_†https://s-static.ak.facebook.com/connect/xd_arbiter/6p3So0GhyQP.js?version=41#channel=f8c579a4&origin=http%3A%2F%2Fwww.welluneednt.comOuE<!DOCTYPE html><html><head><title>Facebook Cross-Domain Messaging helper</title></head><body><script> document.domain = 'facebook.com'; if(!Array.from)Array.from=function(a){if(a==null)throw new TypeError('Object is null or undefined');var b=arguments[1],c=arguments[2],d=this,e=Object(a),f=typeof Symbol==='function'?Symbol.iterator:'@@iterator',g=typeof b==='function',h=typeof e[f]==='function',i=0,j,k;if(h){j=typeof d==='function'?new d():[];var l=e[f](),m;while(!(m=l.next()).done){k=m.value;if(g)k=b.call(c,k,i);j[i]=k;i+=1;}j.length=i;return j;}var n=e.length;if(isNaN(n)||n<0)n=0;j=typeof d==='function'?new d(n):new Array(n);while(i<n){k=e[i];if(g)k=b.call(c,k,i);j[i]=k;i+=1;}j.length=i;return j;};
if(!Array.isArray)Array.isArray=function(a){return Object.prototype.toString.call(a)=='[object Array]';};
self.__DEV__=self.__DEV__||0;
(function(a){function b(c,d){if(this==null)throw new TypeError('Array.prototype.findIndex called on null or undefined');if(typeof c!=='function')throw new TypeError('predicate must be a function');var e=Object(this),f=e.length>>>0;for(var g=0;g<f;g++)if(c.call(d,e[g],g,e))return g;return -1;}if(!Array.prototype.findIndex)Array.prototype.findIndex=b;if(!Array.prototype.find)Array.prototype.find=function(c,d){if(this==null)throw new TypeError('Array.prototype.find called on null or undefined');var e=b.call(this,c,d);return e===-1?a:this[e];};})();
(function(){var a=Object.prototype.toString,b=Object("a"),c=b[0]!="a";function d(e){e=+e;if(e!==e){e=0;}else if(e!==0&&e!==(1/0)&&e!==-(1/0))e=(e>0||-1)*Math.floor(Math.abs(e));return e;}if(!Array.prototype.map)Array.prototype.map=function(e,f){if(typeof e!='function')throw new TypeError();var g,h=this.length,i=new Array(h);for(g=0;g<h;++g)if(g in this)i[g]=e.call(f,this[g],g,this);return i;};if(!Array.prototype.forEach)Array.prototype.forEach=function(e,f){this.map(e,f);};if(!Array.prototype.filter)Array.prototype.filter=function(e,f){if(typeof e!='function')throw new TypeError();var g,h,i=this.length,j=[];for(g=0;g<i;++g)if(g in this){h=this[g];if(e.call(f,h,g,this))j.push(h);}return j;};if(!Array.prototype.every)Array.prototype.every=function(e,f){if(typeof e!='function')throw new TypeError();var g=new Object(this),h=g.length;for(var i=0;i<h;i++)if(i in g)if(!e.call(f,g[i],i,g))return false;return true;};if(!Array.prototype.some)Array.prototype.some=function(e,f){if(typeof e!='function')throw new TypeError();var g=new Object(this),h=g.length;for(var i=0;i<h;i++)if(i in g)if(e.call(f,g[i],i,g))return true;return false;};if(!Array.prototype.indexOf)Array.prototype.indexOf=function(e,f){var g=this.length;f|=0;if(f<0)f+=g;for(;f<g;f++)if(f in this&&this[f]===e)return f;return -1;};if(!Array.prototype.lastIndexOf||([0,1].lastIndexOf(0,-3)!=-1))Array.prototype.lastIndexOf=function(e){var f=c&&a.call(this)=="[object String]"?this.split(""):Object(this),g=f.length>>>0;if(!g)return -1;var h=g-1;if(arguments.length>1)h=Math.min(h,d(arguments[1]));h=h>=0?h:g-Math.abs(h);for(;h>=0;h--)if(h in f&&e===f[h])return h;return -1;};if(!Array.prototype.reduce)Array.prototype.reduce=function(e){if(typeof e!=='function')throw new TypeError(e+' is not a function');var f=this.length>>>0,g,h,i=arguments.length===2;if(i)g=arguments[1];for(h=0;h<f;++h)if(this.hasOwnProperty(h))if(i===false){g=this[h];i=true;}else g=e(g,this[h],h,this);if(i===false)throw new TypeError('Reduce of empty array with no initial value');return g;};if(!Array.prototype.reduceRight)Array.prototype.reduceRight=function(e){if(typeof e!=='function')throw new TypeError(e+' is not a function');var f=this.length>>>0,g,h,i=arguments.length===2;if(i)g=arguments[1];for(h=f-1;h>-1;--h)if(this.hasOwnProperty(h))if(i===false){g=this[h];i=true;}else g=e(g,this[h],h,this);if(i===false)throw new TypeError('Reduce of empty array with no initial value');return g;};})();
if(!Date.now)Date.now=function(){return new Date().getTime();};
(function(){if(!Date.prototype.toISOString){var a=function(b){if(b<10)return '0'+b;return b;};Date.prototype.toISOString=function(){if(!isFinite(this))throw new Error('Invalid time value');var b=this.getUTCFullYear();b=(b<0?'-':(b>9999?'+':''))+('00000'+Math.abs(b)).slice(0<=b&&b<=9999?-4:-6);return b+'-'+a(this.getUTCMonth()+1)+'-'+a(this.getUTCDate())+'T'+a(this.getUTCHours())+':'+a(this.getUTCMinutes())+':'+a(this.getUTCSeconds())+'.'+(this.getUTCMilliseconds()/1000).toFixed(3).slice(2,5)+'Z';};}})();
if(!Function.prototype.bind)Function.prototype.bind=function(a){if(typeof this!='function')throw new TypeError('Bind must be called on a function');var b=this,c=Array.prototype.slice,d=c.call(arguments,1);function e(){var f=b.prototype&&(this instanceof b);return b.apply(!f&&a||this,d.concat(c.call(arguments)));}e.prototype=b.prototype;e.displayName='bound:'+(b.displayName||b.name||'(?)');e.toString=function f(){return 'bound: '+b;};return e;};

(function(){var a=function(e,f){if(!e&&!f)return null;var g={};if(typeof e!=='undefined')g.type=e;if(typeof f!=='undefined')g.signature=f;return g;},b=function(e,f){return a(e&&/^[A-Z]/.test(e)?e:(void 0),f&&((f.params&&f.params.length)||f.returns)?'function('+(f.params?f.params.map(function(g){return (/\?/).test(g)?'?'+g.replace('?',''):g;}).join(','):'')+')'+(f.returns?':'+f.returns:''):(void 0));},c=function(e,f,g){if(typeof __transform_includes==='undefined')return e;if('sourcemeta' in __transform_includes)e.__SMmeta=f;if('typechecks' in __transform_includes){var h=b(f?f.name:(void 0),g);if(h)__w(e,h);}return e;},d=function(e,f,g,h){if(typeof __transform_includes==='undefined')return g.apply(e,f);var i='typechecks' in __transform_includes;if(i&&h&&h.params)__t.apply(e,h.params);var j=g.apply(e,f);if(i&&h&&h.returns)__t([j,h.returns]);return j;};__annotator=c;__bodyWrapper=d;})();
var JSON;if(!JSON)JSON={};(function(){'use strict';function a(j){return j<10?'0'+j:j;}if(typeof Date.prototype.toJSON!=='function'){Date.prototype.toJSON=function(j){return isFinite(this.valueOf())?this.getUTCFullYear()+'-'+a(this.getUTCMonth()+1)+'-'+a(this.getUTCDate())+'T'+a(this.getUTCHours())+':'+a(this.getUTCMinutes())+':'+a(this.getUTCSeconds())+'Z':null;};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(j){return this.valueOf();};}var b=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,c=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,d,e,f={'\b':'\\b','\t':'\\t','\n':'\\n','\f':'\\f','\r':'\\r','"':'\\"','\\':'\\\\'},g;function h(j){c.lastIndex=0;return c.test(j)?'"'+j.replace(c,function(k){var l=f[k];return typeof l==='string'?l:'\\u'+('0000'+k.charCodeAt(0).toString(16)).slice(-4);})+'"':'"'+j+'"';}function i(j,k){var l,m,n,o,p=d,q,r=k[j];if(r&&typeof r==='object'&&typeof r.toJSON==='function')r=r.toJSON(j);if(typeof g==='function')r=g.call(k,j,r);switch(typeof r){case 'string':return h(r);case 'number':return isFinite(r)?String(r):'null';case 'boolean':case 'null':return String(r);case 'object':if(!r)return 'null';d+=e;q=[];if(Object.prototype.toString.apply(r)==='[object Array]'){o=r.length;for(l=0;l<o;l+=1)q[l]=i(l,r)||'null';n=q.length===0?'[]':d?'[\n'+d+q.join(',\n'+d)+'\n'+p+']':'['+q.join(',')+']';d=p;return n;}if(g&&typeof g==='object'){o=g.length;for(l=0;l<o;l+=1)if(typeof g[l]==='string'){m=g[l];n=i(m,r);if(n)q.push(h(m)+(d?': ':':')+n);}}else for(m in r)if(Object.prototype.hasOwnProperty.call(r,m)){n=i(m,r);if(n)q.push(h(m)+(d?': ':':')+n);}n=q.length===0?'{}':d?'{\n'+d+q.join(',\n'+d)+'\n'+p+'}':'{'+q.join(',')+'}';d=p;return n;}}if(typeof JSON.stringify!=='function')JSON.stringify=function(j,k,l){var m;d='';e='';if(typeof l==='number'){for(m=0;m<l;m+=1)e+=' ';}else if(typeof l==='string')e=l;g=k;if(k&&typeof k!=='function'&&(typeof k!=='object'||typeof k.length!=='number'))throw new Error('JSON.stringify');return i('',{'':j});};if(typeof JSON.parse!=='function')JSON.parse=function(j,k){var l;function m(n,o){var p,q,r=n[o];if(r&&typeof r==='object')for(p in r)if(Object.prototype.hasOwnProperty.call(r,p)){q=m(r,p);if(q!==(void 0)){r[p]=q;}else delete r[p];}return k.call(n,o,r);}j=String(j);b.lastIndex=0;if(b.test(j))j=j.replace(b,function(n){return '\\u'+('0000'+n.charCodeAt(0).toString(16)).slice(-4);});if(/^[\],:{}\s]*$/.test(j.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,'@').replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,']').replace(/(?:^|:|,)(?:\s*\[)+/g,''))){l=(eval)('('+j+')');return typeof k==='function'?m({'':l},''):l;}throw new SyntaxError('JSON.parse');};}());
if(JSON.stringify(["\u2028\u2029"])==='["\u2028\u2029"]')JSON.stringify=function(a){var b=/\u2028/g,c=/\u2029/g;return function(d,e,f){var g=a.call(this,d,e,f);if(g){if(-1<g.indexOf('\u2028'))g=g.replace(b,'\\u2028');if(-1<g.indexOf('\u2029'))g=g.replace(c,'\\u2029');}return g;};}(JSON.stringify);
if(typeof Math.log2!=='function')Math.log2=function(a){return Math.log(a)/Math.LN2;};if(typeof Math.log10!=='function')Math.log10=function(a){return Math.log(a)/Math.LN10;};
if(typeof Number.isFinite!=='function')Number.isFinite=function(a){return (typeof a==='number')&&isFinite(a);};if(typeof Number.isNaN!=='function')Number.isNaN=function(a){return (typeof a==='number')&&isNaN(a);};if(typeof Number.EPSILON!=='number')Number.EPSILON=Math.pow(2,-52);if(typeof Number.MAX_SAFE_INTEGER!=='number')Number.MAX_SAFE_INTEGER=Math.pow(2,53)-1;if(typeof Number.MIN_SAFE_INTEGER!=='number')Number.MIN_SAFE_INTEGER=-1*Number.MAX_SAFE_INTEGER;if(typeof Number.isSafeInteger!=='function')Number.isSafeInteger=function(a){return Number.isFinite(a)&&a>=Number.MIN_SAFE_INTEGER&&a<=Number.MAX_SAFE_INTEGER&&Math.floor(a)===a;};
if(!Object.create)Object.create=function(a){var b=typeof a;if(b!='object'&&b!='function')throw new TypeError('Object prototype may only be a Object or null');var c=function(){if(a===null){this.__proto__=a;delete this.__proto__;}};c.prototype=a;return new c();};if(!Object.keys)Object.keys=function a(b){var c=typeof b;if((c!='object'&&c!='function')||b===null)throw new TypeError('Object.keys called on non-object');var d=Object.prototype.hasOwnProperty,e=[];for(var f in b)if(d.call(b,f))e.push(f);return e;};if(!Object.freeze)Object.freeze=function(a){return a;};if(!Object.seal)Object.seal=function(a){return a;};

(function(){var a=!({toString:true}).propertyIsEnumerable('toString');if(!a)return;var b=['toString','toLocaleString','valueOf','hasOwnProperty','isPrototypeOf','constructor'];Object.keys=function(c){var d=typeof c;if((d!='object'&&d!='function')||c===null)throw new TypeError('Object.keys called on non-object');var e=Object.prototype.hasOwnProperty,f=[];for(var g in c)if(e.call(c,g))f.push(g);for(var h=0;h<b.length;h++){var i=b[h];if(e.call(c,i))f.push(i);}return f;};Object.assign=function(c,d){if(c==null)throw new TypeError('Object.assign target cannot be null or undefined');var e=Object(c),f=Object.prototype.hasOwnProperty;for(var g=1;g<arguments.length;g++){var h=arguments[g];if(h==null)continue;var i=Object(h);for(var j in i)if(f.call(i,j))e[j]=i[j];for(var k=0;k<b.length;k++){var l=b[k];if(f.call(i,l))e[l]=i[l];}}return e;};})();
(function(){if(Object.assign)return;var a=Object.prototype.hasOwnProperty,b;if(Object.keys&&Object.keys.name!=='object_keys_polyfill'){b=function(c,d){var e=Object.keys(d);for(var f=0;f<e.length;f++)c[e[f]]=d[e[f]];};}else b=function(c,d){for(var e in d)if(a.call(d,e))c[e]=d[e];};Object.assign=function(c,d){if(c==null)throw new TypeError('Object.assign target cannot be null or undefined');var e=Object(c);for(var f=1;f<arguments.length;f++){var g=arguments[f];if(g!=null)b(e,Object(g));}return e;};}());
if({}.hasOwnProperty('__proto__'))Object.prototype.hasOwnProperty=function(a){return function b(c){return c!='__proto__'&&a.call(this,c);};}(Object.prototype.hasOwnProperty);
(function(a){a.__m=function(b,c){b.__SMmeta=c;return b;};})(this);
if(!String.prototype.startsWith)String.prototype.startsWith=function(a){"use strict";if(this==null)throw TypeError();var b=String(this),c=arguments.length>1?(Number(arguments[1])||0):0,d=Math.min(Math.max(c,0),b.length);return b.indexOf(String(a),c)==d;};if(!String.prototype.endsWith)String.prototype.endsWith=function(a){"use strict";if(this==null)throw TypeError();var b=String(this),c=b.length,d=String(a),e=arguments.length>1?(Number(arguments[1])||0):c,f=Math.min(Math.max(e,0),c),g=f-d.length;if(g<0)return false;return b.lastIndexOf(d,g)==g;};if(!String.prototype.contains)String.prototype.contains=function(a){"use strict";if(this==null)throw TypeError();var b=String(this),c=arguments.length>1?(Number(arguments[1])||0):0;return b.indexOf(String(a),c)!=-1;};if(!String.prototype.repeat)String.prototype.repeat=function(a){"use strict";if(this==null)throw TypeError();var b=String(this);a=Number(a)||0;if(a<0||a===Infinity)throw RangeError();if(a===1)return b;var c='';while(a){if(a&1)c+=b;if((a>>=1))b+=b;}return c;};
if(!String.prototype.trim)String.prototype.trim=function(){if(this==null)throw new TypeError('String.prototype.trim called on null or undefined');return String.prototype.replace.call(this,/^\s+|\s+$/g,'');};
(function(){var a,b=String.prototype.split,c=/()??/.exec("")[1]===a;String.prototype.split=function(d,e){var f=this;if(Object.prototype.toString.call(d)!=="[object RegExp]")return b.call(f,d,e);var g=[],h=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.extended?"x":"")+(d.sticky?"y":""),i=0,d=new RegExp(d.source,h+"g"),j,k,l,m;f+="";if(!c)j=new RegExp("^"+d.source+"$(?!\\s)",h);e=e===a?-1>>>0:e>>>0;while(k=d.exec(f)){l=k.index+k[0].length;if(l>i){g.push(f.slice(i,k.index));if(!c&&k.length>1)k[0].replace(j,function(){for(var n=1;n<arguments.length-2;n++)if(arguments[n]===a)k[n]=a;});if(k.length>1&&k.index<f.length)Array.prototype.push.apply(g,k.slice(1));m=k[0].length;i=l;if(g.length>=e)break;}if(d.lastIndex===k.index)d.lastIndex++;}if(i===f.length){if(m||!d.test(""))g.push("");}else g.push(f.slice(i));return g.length>e?g.slice(0,e):g;};})();
__t=function(a){return a[0];};__w=function(a){return a;};
if(typeof console=='undefined')(function(){function a(){}console={log:a,info:a,warn:a,debug:a,dir:a,error:a};})();
var require,__d;(function(a){var b={},c={},d=['global','require','requireDynamic','requireLazy','module','exports'];require=function(e,f){if(c.hasOwnProperty(e))return c[e];if(!b.hasOwnProperty(e)){if(f)return null;throw new Error('Module '+e+' has not been defined');}var g=b[e],h=g.deps,i=g.factory.length,j,k=[];for(var l=0;l<i;l++){switch(h[l]){case 'module':j=g;break;case 'exports':j=g.exports;break;case 'global':j=a;break;case 'require':j=require;break;case 'requireDynamic':j=require;break;case 'requireLazy':j=null;break;default:j=require.call(null,h[l]);}k.push(j);}g.factory.apply(a,k);c[e]=g.exports;return g.exports;};require.__markCompiled=function(){};__d=function(e,f,g,h){if(typeof g=='function'){b[e]={factory:g,deps:d.concat(f),exports:{}};if(h===3)require.call(null,e);}else c[e]=g;};})(this);
__d("QueryString",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(k){var l=[];Object.keys(k).sort().forEach(function(m){var n=k[m];if(typeof n==='undefined')return;if(n===null){l.push(m);return;}l.push(encodeURIComponent(m)+'='+encodeURIComponent(n));});return l.join('&');}function h(k,l){var m={};if(k==='')return m;var n=k.split('&');for(var o=0;o<n.length;o++){var p=n[o].split('=',2),q=decodeURIComponent(p[0]);if(l&&m.hasOwnProperty(q))throw new URIError('Duplicate key: '+q);m[q]=p.length===2?decodeURIComponent(p[1]):null;}return m;}function i(k,l){return k+(~k.indexOf('?')?'&':'?')+(typeof l==='string'?l:j.encode(l));}var j={encode:g,decode:h,appendToUrl:i};e.exports=j;},null);
__d("resolveWindow",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h){var i=window,j=h.split('.');try{for(var l=0;l<j.length;l++){var m=j[l],n=/^frames\[['"]?([a-zA-Z0-9\-_]+)['"]?\]$/.exec(m);if(n){i=i.frames[n[1]];}else if(m==='opener'||m==='parent'||m==='top'){i=i[m];}else return null;}}catch(k){return null;}return i;}e.exports=g;},null);
__d("sprintf",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h){for(var i=[],j=1,k=arguments.length;j<k;j++)i.push(arguments[j]);var l=0;return h.replace(/%s/g,function(m){return i[l++];});}e.exports=g;},null);
__d("Log",["sprintf"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={DEBUG:3,INFO:2,WARNING:1,ERROR:0};function i(k,l){var m=Array.prototype.slice.call(arguments,2),n=g.apply(null,m),o=window.console;if(o&&j.level>=l)o[k in o?k:'log'](n);}var j={level:-1,Level:h,debug:i.bind(null,'debug',h.DEBUG),info:i.bind(null,'info',h.INFO),warn:i.bind(null,'warn',h.WARNING),error:i.bind(null,'error',h.ERROR)};e.exports=j;},null);
__d("wrapFunction",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={};function h(i,j,k){j=j||'default';return function(){var l=j in g?g[j](i,k):i;return l.apply(this,arguments);};}h.setWrapper=function(i,j){j=j||'default';g[j]=i;};e.exports=h;},null);
__d("DOMEventListener",["wrapFunction"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h,i;if(window.addEventListener){h=function(k,l,m){m.wrapper=g(m,'entry','DOMEventListener.add '+l);k.addEventListener(l,m.wrapper,false);};i=function(k,l,m){k.removeEventListener(l,m.wrapper,false);};}else if(window.attachEvent){h=function(k,l,m){m.wrapper=g(m,'entry','DOMEventListener.add '+l);k.attachEvent('on'+l,m.wrapper);};i=function(k,l,m){k.detachEvent('on'+l,m.wrapper);};}else i=h=function(){};var j={add:function(k,l,m){h(k,l,m);return {remove:function(){i(k,l,m);k=null;}};},remove:i};e.exports=j;},null);
__d("DOMWrapper",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g,h,i={setRoot:function(j){g=j;},getRoot:function(){return g||document.body;},setWindow:function(j){h=j;},getWindow:function(){return h||self;}};e.exports=i;},null);
__d("emptyFunction",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(i){return function(){return i;};}function h(){}h.thatReturns=g;h.thatReturnsFalse=g(false);h.thatReturnsTrue=g(true);h.thatReturnsNull=g(null);h.thatReturnsThis=function(){return this;};h.thatReturnsArgument=function(i){return i;};e.exports=h;},null);
__d("UserAgent_DEPRECATED",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g=false,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v;function w(){if(g)return;g=true;var y=navigator.userAgent,z=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(y),aa=/(Mac OS X)|(Windows)|(Linux)/.exec(y);s=/\b(iPhone|iP[ao]d)/.exec(y);t=/\b(iP[ao]d)/.exec(y);q=/Android/i.exec(y);u=/FBAN\/\w+;/i.exec(y);v=/Mobile/i.exec(y);r=!!(/Win64/.exec(y));if(z){h=z[1]?parseFloat(z[1]):(z[5]?parseFloat(z[5]):NaN);if(h&&document&&document.documentMode)h=document.documentMode;var ba=/(?:Trident\/(\d+.\d+))/.exec(y);m=ba?parseFloat(ba[1])+4:h;i=z[2]?parseFloat(z[2]):NaN;j=z[3]?parseFloat(z[3]):NaN;k=z[4]?parseFloat(z[4]):NaN;if(k){z=/(?:Chrome\/(\d+\.\d+))/.exec(y);l=z&&z[1]?parseFloat(z[1]):NaN;}else l=NaN;}else h=i=j=l=k=NaN;if(aa){if(aa[1]){var ca=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(y);n=ca?parseFloat(ca[1].replace('_','.')):true;}else n=false;o=!!aa[2];p=!!aa[3];}else n=o=p=false;}var x={ie:function(){return w()||h;},ieCompatibilityMode:function(){return w()||(m>h);},ie64:function(){return x.ie()&&r;},firefox:function(){return w()||i;},opera:function(){return w()||j;},webkit:function(){return w()||k;},safari:function(){return x.webkit();},chrome:function(){return w()||l;},windows:function(){return w()||o;},osx:function(){return w()||n;},linux:function(){return w()||p;},iphone:function(){return w()||s;},mobile:function(){return w()||(s||t||q||v);},nativeApp:function(){return w()||u;},android:function(){return w()||q;},ipad:function(){return w()||t;}};e.exports=x;},null);
__d("copyProperties",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h,i,j,k,l,m,n){h=h||{};var o=[i,j,k,l,m],p=0,q;while(o[p]){q=o[p++];for(var r in q)h[r]=q[r];if(q.hasOwnProperty&&q.hasOwnProperty('toString')&&(typeof q.toString!='undefined')&&(h.toString!==q.toString))h.toString=q.toString;}return h;}e.exports=g;},null);
__d("guid",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(){return 'f'+(Math.random()*(1<<30)).toString(16).replace('.','');}e.exports=g;},null);
__d("htmlSpecialChars",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g=/&/g,h=/</g,i=/>/g,j=/"/g,k=/'/g;function l(m){if(typeof m=='undefined'||m===null||!m.toString)return '';if(m===false){return '0';}else if(m===true)return '1';return m.toString().replace(g,'&amp;').replace(j,'&quot;').replace(k,'&#039;').replace(h,'&lt;').replace(i,'&gt;');}e.exports=l;},null);
__d("Flash",["DOMEventListener","DOMWrapper","QueryString","UserAgent_DEPRECATED","copyProperties","guid","htmlSpecialChars"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n={},o,p=h.getWindow().document;function q(v){var w=p.getElementById(v);if(w)w.parentNode.removeChild(w);delete n[v];}function r(){for(var v in n)if(n.hasOwnProperty(v))q(v);}function s(v){return v.replace(/\d+/g,function(w){return '000'.substring(w.length)+w;});}function t(v){if(!o){if(j.ie()>=9)g.add(window,'unload',r);o=true;}n[v]=v;}var u={embed:function(v,w,x,y){var z=l();v=m(v).replace(/&amp;/g,'&');x=k({allowscriptaccess:'always',flashvars:y,movie:v},x||{});if(typeof x.flashvars=='object')x.flashvars=i.encode(x.flashvars);var aa=[];for(var ba in x)if(x.hasOwnProperty(ba)&&x[ba])aa.push('<param name="'+m(ba)+'" value="'+m(x[ba])+'">');var ca=w.appendChild(p.createElement('span')),da='<object '+(j.ie()?'classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" ':'type="application/x-shockwave-flash"')+'data="'+v+'" '+(x.height?'height="'+x.height+'" ':'')+(x.width?'width="'+x.width+'" ':'')+'id="'+z+'">'+aa.join('')+'</object>';ca.innerHTML=da;var ea=ca.firstChild;t(z);return ea;},remove:q,getVersion:function(){var v='Shockwave Flash',w='application/x-shockwave-flash',x='ShockwaveFlash.ShockwaveFlash',y;if(navigator.plugins&&typeof navigator.plugins[v]=='object'){var z=navigator.plugins[v].description;if(z&&navigator.mimeTypes&&navigator.mimeTypes[w]&&navigator.mimeTypes[w].enabledPlugin)y=z.match(/\d+/g);}if(!y)try{y=(new ActiveXObject(x)).GetVariable('$version').match(/(\d+),(\d+),(\d+),(\d+)/);y=Array.prototype.slice.call(y,1);}catch(aa){}return y;},checkMinVersion:function(v){var w=u.getVersion();if(!w)return false;return s(w.join('.'))>=s(v);},isAvailable:function(){return !!u.getVersion();}};e.exports=u;},null);
__d("dotAccess",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h,i,j){var k=i.split('.');do{var l=k.shift();h=h[l]||j&&(h[l]={});}while(k.length&&h);return h;}e.exports=g;},null);
__d("GlobalCallback",["DOMWrapper","dotAccess","guid","wrapFunction"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k,l,m={setPrefix:function(n){k=h(g.getWindow(),n,true);l=n;},create:function(n,o){if(!k)this.setPrefix('__globalCallbacks');var p=i();k[p]=j(n,'entry',o||'GlobalCallback');return l+'.'+p;},remove:function(n){var o=n.substring(l.length+1);delete k[o];}};e.exports=m;},null);
__d("XDM",["DOMEventListener","DOMWrapper","emptyFunction","Flash","GlobalCallback","guid","Log","UserAgent_DEPRECATED","wrapFunction"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p={},q={transports:[]},r=h.getWindow();function s(u){var v={},w=u.length,x=q.transports;while(w--)v[u[w]]=1;w=x.length;while(w--){var y=x[w],z=p[y];if(!v[y]&&z.isAvailable())return y;}}var t={register:function(u,v){m.debug('Registering %s as XDM provider',u);q.transports.push(u);p[u]=v;},create:function(u){if(!u.whenReady&&!u.onMessage){m.error('An instance without whenReady or onMessage makes no sense');throw new Error('An instance without whenReady or '+'onMessage makes no sense');}if(!u.channel){m.warn('Missing channel name, selecting at random');u.channel=l();}if(!u.whenReady)u.whenReady=i;if(!u.onMessage)u.onMessage=i;var v=u.transport||s(u.blacklist||[]),w=p[v];if(w&&w.isAvailable()){m.debug('%s is available',v);w.init(u);return v;}}};t.register('flash',(function(){var u=false,v,w=false,x=15000,y;return {isAvailable:function(){return j.checkMinVersion('8.0.24');},init:function(z){m.debug('init flash: '+z.channel);var aa={send:function(da,ea,fa,ga){m.debug('sending to: %s (%s)',ea,ga);v.postMessage(da,ea,ga);}};if(u){z.whenReady(aa);return;}var ba=z.root.appendChild(r.document.createElement('div')),ca=k.create(function(){k.remove(ca);clearTimeout(y);m.info('xdm.swf called the callback');var da=k.create(function(ea,fa){ea=decodeURIComponent(ea);fa=decodeURIComponent(fa);m.debug('received message %s from %s',ea,fa);z.onMessage(ea,fa);},'xdm.swf:onMessage');v.init(z.channel,da);z.whenReady(aa);},'xdm.swf:load');v=j.embed(z.flashUrl,ba,null,{protocol:location.protocol.replace(':',''),host:location.host,callback:ca,log:w});y=setTimeout(function(){m.warn('The Flash component did not load within %s ms - '+'verify that the container is not set to hidden or invisible '+'using CSS as this will cause some browsers to not load '+'the components',x);},x);u=true;}};})());t.register('postmessage',(function(){var u=false;return {isAvailable:function(){return !!r.postMessage;},init:function(v){m.debug('init postMessage: '+v.channel);var w='_FB_'+v.channel,x={send:function(y,z,aa,ba){if(r===aa){m.error('Invalid windowref, equal to window (self)');throw new Error();}m.debug('sending to: %s (%s)',z,ba);var ca=function(){aa.postMessage('_FB_'+ba+y,z);};if(n.ie()==8||n.ieCompatibilityMode()){setTimeout(ca,0);}else ca();}};if(u){v.whenReady(x);return;}g.add(r,'message',o(function(event){var y=event.data,z=event.origin||'native';if(!/^(https?:\/\/|native$)/.test(z)){m.debug('Received message from invalid origin type: %s',z);return;}if(typeof y!='string'){m.warn('Received message of type %s from %s, expected a string',typeof y,z);return;}m.debug('received message %s from %s',y,z);if(y.substring(0,w.length)==w)y=y.substring(w.length);v.onMessage(y,z);},'entry','onMessage'));v.whenReady(x);u=true;}};})());e.exports=t;},null);
__d("initXdArbiter",["QueryString","resolveWindow","Log","XDM","XDMConfig"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();(function(){var g=b('QueryString'),h=b('resolveWindow'),i=b('Log'),j=b('XDM'),k=b('XDMConfig');function l(z){return z?z.replace(/["'<>\(\)\\@]/g,''):z;}function m(){if(!window.chrome||!location.ancestorOrigins)return false;return !/\.facebook\.com$/.test(location.ancestorOrigins[1]);}function n(z,aa){if(m())return '';if(window!=parent&&window.parent!=window.parent.parent)try{return parent.parent.XdArbiter.register(window,z,aa);}catch(ba){i.error('Could not register with XdArbiter in parent.parent');}return '';}function o(z,aa,ba){if(!z&&m()){i.error('Can not use parent.parent to reach facebook.com');return;}var ca=z?h(z):parent.parent;try{ca.XdArbiter.handleMessage(aa,ba,window);}catch(da){i.error('Could not reach facebook.com using %s',z);}}function p(z,aa){var ba=50,ca=function(){if(!--ba)clearInterval(da);try{z();clearInterval(da);}catch(ea){}},da=setInterval(ca,50);ca();}function q(){var z=/^https?:\/\/[^\/]*/.exec(t.origin)[0];p(function(){var aa=h(t.relation).frames['fb_xdm_frame_'+u];if(typeof aa.location.search==='undefined')throw new Error('Proxy not ready');if(location.search===aa.location.search){aa.proxyMessage(s,z);}else i.error('Version mismatch: %s, %s',location.search,aa.location.search);},50);}function r(){var z=/^(.*)\/(.*)$/.exec(t.origin)[1];if(window.__fbNative&&window.__fbNative.postMessage){window.__fbNative.postMessage(s,z);}else{var aa=function(ba){window.removeEventListener('fbNativeReady',aa);window.__fbNative.postMessage(s,z);};window.addEventListener('fbNativeReady',aa);}}var s=/#(.*)|$/.exec(location.href)[1];if(window==top)location.hash='';if(!s){i.error('xd_arbiter.php loaded without a valid hash, referrer: %s',document.referrer);return;}var t=g.decode(s,true),u=location.protocol.replace(':','');if(t.relation){if(window==top&&/FBAN\/\w+;/i.test(navigator.userAgent)){i.info('Native proxy');r();}else{i.info('Legacy proxy to %s',t.relation);q();}return;}if(u!=/https?/.exec(window.name)[0]){i.info('Redirection to %s detected, aborting',u);return;}var v=l(t.transport),w=l(t.channel),x=l(t.origin),y=l(t.xd_name);if(!/^https?/.test(x)){i.error('Invalid origin presented, aborting.');return;}j.create({root:document.body,transport:v,channel:w+'_'+u,flashUrl:k.Flash.path,onMessage:function(z,aa){if(x!==aa){i.info('Received message from unknown origin %s, expected %s.',aa,x);return;}if(!/^FB_RPC:/.test(z))z=g.decode(z);o(z.relation,z,x);},whenReady:function(z){window.proxyMessage=function(da,ea){if(ea===x){z.send(da,x,parent,w);}else i.error('Failed proxying to %s, expected %s',ea,x);};var aa=null,ba={xd_action:'proxy_ready',data:aa},ca=n(y,x);if(ca)ba.registered=ca;z.send(g.encode(ba),x,parent,w);}});})();},null);__d("XDMConfig",[],{"Flash":{"path":"https:\/\/connect.facebook.net\/rsrc.php\/v1\/yW\/r\/yOZN1vHw3Z_.swf"}}); require('initXdArbiter'); </script><b id="warning" style="display: none; color:red"> SECURITY WARNING: Please treat the URL above as you would your password and do not share it with anyone. See the <a href="http://l.ak.facebook.com/l.php?u=http%3A%2F%2Fon.fb.me%2F1mXNHhm&amp;h=ZAQGFue3Z&amp;s=1" target="_blank" rel="nofollow" onmouseover="LinkshimAsyncLink.swap(this, &quot;http:\/\/on.fb.me\/1mXNHhm&quot;);" onclick="LinkshimAsyncLink.swap(this, &quot;http:\/\/l.ak.facebook.com\/l.php?u=http\u00253A\u00252F\u00252Fon.fb.me\u00252F1mXNHhm&amp;h=ZAQGFue3Z&amp;s=1&quot;);">Facebook Help Center</a> for more information. </b><script>if (window == top) {  setTimeout(function() {    document.getElementById("warning").style.display = 'block';  }, 2000);}</script></body></html>¯„ˆ’–›Ÿ£§«°´¸¼ÀÄÈÍÒÖÛÔ	…†‡_Ghttps://www.gstatic.com/recaptcha/api2/r20150429132001/recaptcha__ja.jsO
bplist00ÔwxX$versionX$objectsY$archiverT$top † ¯'#)*0123STUVWXYZ[\]^_`abcdefghijklmpqrU$nullİ	
 !"R$6S$10R$2R$7R$3S$11R$8V$classR$4R$9R$0R$5R$1€	€€€$€&€€%€Ó$%&'(WNS.base[NS.relative€ €€_Ghttps://www.gstatic.com/recaptcha/api2/r20150429132001/recaptcha__ja.jsÒ+,-.Z$classnameX$classesUNSURL¢-/XNSObject#AºôÒ;që ÈÓ456DRWNS.keysZNS.objects­789:;<=>?@ABC€	€
€€€€€€€€€€€­EFGHIJKLMNOPQ€€€€€€€€€€€ €!€"€#\Content-Type_alternate-protocol_Content-EncodingVServer_x-xss-protectionWExpiresSAge]Cache-ControlTDate^Content-Length_x-content-type-optionsTVary]Last-Modified_text/javascript\443:quic,p=1TgzipTsffe]1; mode=block_Sat, 30 Apr 2016 17:13:35 GMTU59004_public, max-age=31536000_Fri, 01 May 2015 17:13:35 GMTU54826Wnosniff_Accept-Encoding_Wed, 29 Apr 2015 22:48:14 GMTÒ+,no\NSDictionary¢n/ÿÿÿÿÿÿÿÿ_text/javascriptÒ+,st_NSHTTPURLResponse£uv/_NSHTTPURLResponse]NSURLResponse_NSKeyedArchiverÑyz_WebResourceResponse€    # - 2 7 a g ‚ … ‰ Œ  ’ – ™   £ ¦ © ¬ ¯ ± ³ µ · ¹ º ¼ ¾ À Â Ä Æ È Ï × ã å ç é38CLRU^gikrz…“•—™›Ÿ¡£¥§©«­»½¿ÁÃÅÇÉËÍÏÑÓÕ×äù&.2@ETmr€’Ÿ¤©·×İø&8X]jmvˆ¡¥¹ÇÙÜò             {              ô_text/javascriptÔ	‰Š‹Œ_%http://www.google-analytics.com/ga.jsO®bplist00ÔstX$versionX$objectsY$archiverT$top † ¯%#)*0123QRSTUVWXYZ[\]^_`abcdefghilmnU$nullİ	
 !"R$6S$10R$2R$7R$3S$11R$8V$classR$4R$9R$0R$5R$1€	€€€"€$€€#€Ó$%&'(WNS.base[NS.relative€ €€_%http://www.google-analytics.com/ga.jsÒ+,-.Z$classnameX$classesUNSURL¢-/XNSObject#AºôÒ:÷¿” ÈÓ456CPWNS.keysZNS.objects¬789:;<=>?@AB€	€
€€€€€€€€€€¬DEFGHIJKLMNO€€€€€€€€€€€€ €!\Content-TypeSAge_Content-EncodingVServer_Alternate-ProtocolWExpires]Cache-ControlTDate^Content-Length_X-Content-Type-OptionsTVary]Last-Modified_text/javascriptT4505TgzipWGFE/2.0[80:quic,p=1_Sat, 02 May 2015 10:21:54 GMT_public, max-age=7200_Sat, 02 May 2015 08:21:54 GMTU16075Wnosniff_Accept-Encoding_Mon, 27 Apr 2015 18:49:35 GMTÒ+,jk\NSDictionary¢j/>Ë_text/javascriptÒ+,op_NSHTTPURLResponse£qr/_NSHTTPURLResponse]NSURLResponse_NSKeyedArchiverÑuv_WebResourceResponse€    # - 2 7 _ e € ƒ ‡ Š   ” —  ¡ ¤ § ª ­ ¯ ± ³ µ · ¸ º ¼ ¾ À Â Ä Æ Í Õ á ã å ç(.1:CEGNVanprtvxz|~€‚„†“•—™›Ÿ¡£¥§©«­º¾ÑØíõ05CUZ_gs“ªÊĞØê
"49MQes…ˆ             w               OŸô(function(){var aa=encodeURIComponent,ba=Infinity,ca=setTimeout,da=isNaN,m=Math,ea=decodeURIComponent;function Ie(a,b){return a.onload=b}function Je(a,b){return a.onerror=b}function ha(a,b){return a.name=b}
var p="replace",la="floor",ma="charAt",oa="match",pa="port",qa="createElement",g="getTime",u="host",v="toString",y="split",ta="stopPropagation",z="location",va="search",A="protocol",xa="href",ya="apply",n="push",ia="test",ja="slice",ka="load",na="value",q="indexOf",ra="path",r="name",w="length",x="prototype",sa="clientWidth",ua="scope",wa="clientHeight",B="substring",za="navigator",C="join",D="toLowerCase",E;function Aa(a,b){switch(b){case 0:return""+a;case 1:return 1*a;case 2:return!!a;case 3:return 1E3*a}return a}function Ba(a){return"function"==typeof a}function Ca(a){return void 0!=a&&-1<(a.constructor+"")[q]("String")}function F(a,b){return void 0==a||"-"==a&&!b||""==a}function Da(a){if(!a||""==a)return"";for(;a&&-1<" \n\r\t"[q](a[ma](0));)a=a[B](1);for(;a&&-1<" \n\r\t"[q](a[ma](a[w]-1));)a=a[B](0,a[w]-1);return a}function Ea(){return m.round(2147483647*m.random())}function Fa(){}
function G(a,b){if(aa instanceof Function)return b?encodeURI(a):aa(a);H(68);return escape(a)}function I(a){a=a[y]("+")[C](" ");if(ea instanceof Function)try{return ea(a)}catch(b){H(17)}else H(68);return unescape(a)}var Ga=function(a,b,c,d){a.addEventListener?a.addEventListener(b,c,!!d):a.attachEvent&&a.attachEvent("on"+b,c)};
function Ia(a,b){if(a){var c=J[qa]("script");c.type="text/javascript";c.async=!0;c.src=a;c.id=b;var d=J.getElementsByTagName("script")[0];d.parentNode.insertBefore(c,d);return c}}function K(a){return a&&0<a[w]?a[0]:""}function L(a){var b=a?a[w]:0;return 0<b?a[b-1]:""}var nf=function(){this.prefix="ga.";this.values={}};nf[x].set=function(a,b){this.values[this.prefix+a]=b};nf[x].get=function(a){return this.values[this.prefix+a]};nf[x].contains=function(a){return void 0!==this.get(a)};function Ka(a){0==a[q]("www.")&&(a=a[B](4));return a[D]()}function La(a,b){var c,d={url:a,protocol:"http",host:"",path:"",d:new nf,anchor:""};if(!a)return d;c=a[q]("://");0<=c&&(d.protocol=a[B](0,c),a=a[B](c+3));c=a[va]("/|\\?|#");if(0<=c)d.host=a[B](0,c)[D](),a=a[B](c);else return d.host=a[D](),d;c=a[q]("#");0<=c&&(d.anchor=a[B](c+1),a=a[B](0,c));c=a[q]("?");0<=c&&(Na(d.d,a[B](c+1)),a=a[B](0,c));d.anchor&&b&&Na(d.d,d.anchor);a&&"/"==a[ma](0)&&(a=a[B](1));d.path=a;return d}
function Oa(a,b){function c(a){var b=(a.hostname||"")[y](":")[0][D](),c=(a[A]||"")[D](),c=1*a[pa]||("http:"==c?80:"https:"==c?443:"");a=a.pathname||"";0==a[q]("/")||(a="/"+a);return[b,""+c,a]}var d=b||J[qa]("a");d.href=J[z][xa];var e=(d[A]||"")[D](),f=c(d),Be=d[va]||"",k=e+"//"+f[0]+(f[1]?":"+f[1]:"");0==a[q]("//")?a=e+a:0==a[q]("/")?a=k+a:a&&0!=a[q]("?")?0>a[y]("/")[0][q](":")&&(a=k+f[2][B](0,f[2].lastIndexOf("/"))+"/"+a):a=k+f[2]+(a||Be);d.href=a;e=c(d);return{protocol:(d[A]||"")[D](),host:e[0],
port:e[1],path:e[2],Oa:d[va]||"",url:a||""}}function Na(a,b){function c(b,c){a.contains(b)||a.set(b,[]);a.get(b)[n](c)}for(var d=Da(b)[y]("&"),e=0;e<d[w];e++)if(d[e]){var f=d[e][q]("=");0>f?c(d[e],"1"):c(d[e][B](0,f),d[e][B](f+1))}}function Pa(a,b){if(F(a)||"["==a[ma](0)&&"]"==a[ma](a[w]-1))return"-";var c=J.domain;return a[q](c+(b&&"/"!=b?b:""))==(0==a[q]("http://")?7:0==a[q]("https://")?8:0)?"0":a};var Qa=0;function Ra(a,b,c){1<=Qa||1<=100*m.random()||ld()||(a=["utmt=error","utmerr="+a,"utmwv=5.6.4","utmn="+Ea(),"utmsp=1"],b&&a[n]("api="+b),c&&a[n]("msg="+G(c[B](0,100))),M.w&&a[n]("aip=1"),Sa(a[C]("&")),Qa++)};var Ta=0,Ua={};function N(a){return Va("x"+Ta++,a)}function Va(a,b){Ua[a]=!!b;return a}
var Wa=N(),Xa=Va("anonymizeIp"),Ya=N(),$a=N(),ab=N(),bb=N(),O=N(),P=N(),cb=N(),db=N(),eb=N(),fb=N(),gb=N(),hb=N(),ib=N(),jb=N(),kb=N(),lb=N(),nb=N(),ob=N(),pb=N(),qb=N(),rb=N(),sb=N(),tb=N(),ub=N(),vb=N(),wb=N(),xb=N(),yb=N(),zb=N(),Ab=N(),Bb=N(),Cb=N(),Db=N(),Eb=N(),Fb=N(!0),Gb=Va("currencyCode"),Hb=Va("page"),Ib=Va("title"),Jb=N(),Kb=N(),Lb=N(),Mb=N(),Nb=N(),Ob=N(),Pb=N(),Qb=N(),Rb=N(),Q=N(!0),Sb=N(!0),Tb=N(!0),Ub=N(!0),Vb=N(!0),Wb=N(!0),Zb=N(!0),$b=N(!0),ac=N(!0),bc=N(!0),cc=N(!0),R=N(!0),dc=N(!0),
ec=N(!0),fc=N(!0),gc=N(!0),hc=N(!0),ic=N(!0),jc=N(!0),S=N(!0),kc=N(!0),lc=N(!0),mc=N(!0),nc=N(!0),oc=N(!0),pc=N(!0),qc=N(!0),rc=Va("campaignParams"),sc=N(),tc=Va("hitCallback"),uc=N();N();var vc=N(),wc=N(),xc=N(),yc=N(),zc=N(),Ac=N(),Bc=N(),Cc=N(),Dc=N(),Ec=N(),Fc=N(),Gc=N(),Hc=N(),Ic=N();N();var Mc=N(),Nc=N(),Yb=N(),Jc=N(),Kc=N(),Lc=Va("utmtCookieName"),Cd=Va("displayFeatures"),Oc=N(),of=Va("gtmid"),Oe=Va("uaName"),Pe=Va("uaDomain"),Qe=Va("uaPath"),pf=Va("linkid");var Re=function(){function a(a,c,d){T(qf[x],a,c,d)}a("_createTracker",qf[x].r,55);a("_getTracker",qf[x].oa,0);a("_getTrackerByName",qf[x].u,51);a("_getTrackers",qf[x].pa,130);a("_anonymizeIp",qf[x].aa,16);a("_forceSSL",qf[x].la,125);a("_getPlugin",Pc,120)},Se=function(){function a(a,c,d){T(U[x],a,c,d)}Qc("_getName",$a,58);Qc("_getAccount",Wa,64);Qc("_visitCode",Q,54);Qc("_getClientInfo",ib,53,1);Qc("_getDetectTitle",lb,56,1);Qc("_getDetectFlash",jb,65,1);Qc("_getLocalGifPath",wb,57);Qc("_getServiceMode",
xb,59);V("_setClientInfo",ib,66,2);V("_setAccount",Wa,3);V("_setNamespace",Ya,48);V("_setAllowLinker",fb,11,2);V("_setDetectFlash",jb,61,2);V("_setDetectTitle",lb,62,2);V("_setLocalGifPath",wb,46,0);V("_setLocalServerMode",xb,92,void 0,0);V("_setRemoteServerMode",xb,63,void 0,1);V("_setLocalRemoteServerMode",xb,47,void 0,2);V("_setSampleRate",vb,45,1);V("_setCampaignTrack",kb,36,2);V("_setAllowAnchor",gb,7,2);V("_setCampNameKey",ob,41);V("_setCampContentKey",tb,38);V("_setCampIdKey",nb,39);V("_setCampMediumKey",
rb,40);V("_setCampNOKey",ub,42);V("_setCampSourceKey",qb,43);V("_setCampTermKey",sb,44);V("_setCampCIdKey",pb,37);V("_setCookiePath",P,9,0);V("_setMaxCustomVariables",yb,0,1);V("_setVisitorCookieTimeout",cb,28,1);V("_setSessionCookieTimeout",db,26,1);V("_setCampaignCookieTimeout",eb,29,1);V("_setReferrerOverride",Jb,49);V("_setSiteSpeedSampleRate",Dc,132);a("_trackPageview",U[x].Fa,1);a("_trackEvent",U[x].F,4);a("_trackPageLoadTime",U[x].Ea,100);a("_trackSocial",U[x].Ga,104);a("_trackTrans",U[x].Ia,
18);a("_sendXEvent",U[x].t,78);a("_createEventTracker",U[x].ia,74);a("_getVersion",U[x].qa,60);a("_setDomainName",U[x].B,6);a("_setAllowHash",U[x].va,8);a("_getLinkerUrl",U[x].na,52);a("_link",U[x].link,101);a("_linkByPost",U[x].ua,102);a("_setTrans",U[x].za,20);a("_addTrans",U[x].$,21);a("_addItem",U[x].Y,19);a("_clearTrans",U[x].ea,105);a("_setTransactionDelim",U[x].Aa,82);a("_setCustomVar",U[x].wa,10);a("_deleteCustomVar",U[x].ka,35);a("_getVisitorCustomVar",U[x].ra,50);a("_setXKey",U[x].Ca,83);
a("_setXValue",U[x].Da,84);a("_getXKey",U[x].sa,76);a("_getXValue",U[x].ta,77);a("_clearXKey",U[x].fa,72);a("_clearXValue",U[x].ga,73);a("_createXObj",U[x].ja,75);a("_addIgnoredOrganic",U[x].W,15);a("_clearIgnoredOrganic",U[x].ba,97);a("_addIgnoredRef",U[x].X,31);a("_clearIgnoredRef",U[x].ca,32);a("_addOrganic",U[x].Z,14);a("_clearOrganic",U[x].da,70);a("_cookiePathCopy",U[x].ha,30);a("_get",U[x].ma,106);a("_set",U[x].xa,107);a("_addEventListener",U[x].addEventListener,108);a("_removeEventListener",
U[x].removeEventListener,109);a("_addDevId",U[x].V);a("_getPlugin",Pc,122);a("_setPageGroup",U[x].ya,126);a("_trackTiming",U[x].Ha,124);a("_initData",U[x].v,2);a("_setVar",U[x].Ba,22);V("_setSessionTimeout",db,27,3);V("_setCookieTimeout",eb,25,3);V("_setCookiePersistence",cb,24,1);a("_setAutoTrackOutbound",Fa,79);a("_setTrackOutboundSubdomains",Fa,81);a("_setHrefExamineLimit",Fa,80)};function Pc(a){var b=this.plugins_;if(b)return b.get(a)}
var T=function(a,b,c,d){a[b]=function(){try{return void 0!=d&&H(d),c[ya](this,arguments)}catch(a){throw Ra("exc",b,a&&a[r]),a;}}},Qc=function(a,b,c,d){U[x][a]=function(){try{return H(c),Aa(this.a.get(b),d)}catch(e){throw Ra("exc",a,e&&e[r]),e;}}},V=function(a,b,c,d,e){U[x][a]=function(f){try{H(c),void 0==e?this.a.set(b,Aa(f,d)):this.a.set(b,e)}catch(Be){throw Ra("exc",a,Be&&Be[r]),Be;}}},Te=function(a,b){return{type:b,target:a,stopPropagation:function(){throw"aborted";}}};var Rc=new RegExp(/(^|\.)doubleclick\.net$/i),Sc=function(a,b){return Rc[ia](J[z].hostname)?!0:"/"!==b?!1:0!=a[q]("www.google.")&&0!=a[q](".google.")&&0!=a[q]("google.")||-1<a[q]("google.org")?!1:!0},Tc=function(a){var b=a.get(bb),c=a.c(P,"/");Sc(b,c)&&a[ta]()};var Zc=function(){var a={},b={},c=new Uc;this.g=function(a,b){c.add(a,b)};var d=new Uc;this.e=function(a,b){d.add(a,b)};var e=!1,f=!1,Be=!0;this.T=function(){e=!0};this.j=function(a){this[ka]();this.set(sc,a,!0);a=new Vc(this);e=!1;d.cb(this);e=!0;b={};this.n();a.Ja()};this.load=function(){e&&(e=!1,this.Ka(),Wc(this),f||(f=!0,c.cb(this),Xc(this),Wc(this)),e=!0)};this.n=function(){if(e)if(f)e=!1,Xc(this),e=!0;else this[ka]()};this.get=function(c){Ua[c]&&this[ka]();return void 0!==b[c]?b[c]:a[c]};this.set=
function(c,d,e){Ua[c]&&this[ka]();e?b[c]=d:a[c]=d;Ua[c]&&this.n()};this.Za=function(b){a[b]=this.b(b,0)+1};this.b=function(a,b){var c=this.get(a);return void 0==c||""===c?b:1*c};this.c=function(a,b){var c=this.get(a);return void 0==c?b:c+""};this.Ka=function(){if(Be){var b=this.c(bb,""),c=this.c(P,"/");Sc(b,c)||(a[O]=a[hb]&&""!=b?Yc(b):1,Be=!1)}}};Zc[x].stopPropagation=function(){throw"aborted";};
var Vc=function(a){var b=this;this.q=0;var c=a.get(tc);this.Ua=function(){0<b.q&&c&&(b.q--,b.q||c())};this.Ja=function(){!b.q&&c&&ca(c,10)};a.set(uc,b,!0)};function $c(a,b){b=b||[];for(var c=0;c<b[w];c++){var d=b[c];if(""+a==d||0==d[q](a+"."))return d}return"-"}
var bd=function(a,b,c){c=c?"":a.c(O,"1");b=b[y](".");if(6!==b[w]||ad(b[0],c))return!1;c=1*b[1];var d=1*b[2],e=1*b[3],f=1*b[4];b=1*b[5];if(!(0<=c&&0<d&&0<e&&0<f&&0<=b))return!1;a.set(Q,c);a.set(Vb,d);a.set(Wb,e);a.set(Zb,f);a.set($b,b);return!0},cd=function(a){var b=a.get(Q),c=a.get(Vb),d=a.get(Wb),e=a.get(Zb),f=a.b($b,1);return[a.b(O,1),void 0!=b?b:"-",c||"-",d||"-",e||"-",f][C](".")},dd=function(a){return[a.b(O,1),a.b(cc,0),a.b(R,1),a.b(dc,0)][C](".")},ed=function(a,b,c){c=c?"":a.c(O,"1");var d=
b[y](".");if(4!==d[w]||ad(d[0],c))d=null;a.set(cc,d?1*d[1]:0);a.set(R,d?1*d[2]:10);a.set(dc,d?1*d[3]:a.get(ab));return null!=d||!ad(b,c)},fd=function(a,b){var c=G(a.c(Tb,"")),d=[],e=a.get(Fb);if(!b&&e){for(var f=0;f<e[w];f++){var Be=e[f];Be&&1==Be[ua]&&d[n](f+"="+G(Be[r])+"="+G(Be[na])+"=1")}0<d[w]&&(c+="|"+d[C]("^"))}return c?a.b(O,1)+"."+c:null},gd=function(a,b,c){c=c?"":a.c(O,"1");b=b[y](".");if(2>b[w]||ad(b[0],c))return!1;b=b[ja](1)[C](".")[y]("|");0<b[w]&&a.set(Tb,I(b[0]));if(1>=b[w])return!0;
b=b[1][y](-1==b[1][q](",")?"^":",");for(c=0;c<b[w];c++){var d=b[c][y]("=");if(4==d[w]){var e={};ha(e,I(d[1]));e.value=I(d[2]);e.scope=1;a.get(Fb)[d[0]]=e}}return!0},hd=function(a,b){var c=Ue(a,b);return c?[a.b(O,1),a.b(ec,0),a.b(fc,1),a.b(gc,1),c][C]("."):""},Ue=function(a){function b(b,e){if(!F(a.get(b))){var f=a.c(b,""),f=f[y](" ")[C]("%20"),f=f[y]("+")[C]("%20");c[n](e+"="+f)}}var c=[];b(ic,"utmcid");b(nc,"utmcsr");b(S,"utmgclid");b(kc,"utmgclsrc");b(lc,"utmdclid");b(mc,"utmdsid");b(jc,"utmccn");
b(oc,"utmcmd");b(pc,"utmctr");b(qc,"utmcct");return c[C]("|")},id=function(a,b,c){c=c?"":a.c(O,"1");b=b[y](".");if(5>b[w]||ad(b[0],c))return a.set(ec,void 0),a.set(fc,void 0),a.set(gc,void 0),a.set(ic,void 0),a.set(jc,void 0),a.set(nc,void 0),a.set(oc,void 0),a.set(pc,void 0),a.set(qc,void 0),a.set(S,void 0),a.set(kc,void 0),a.set(lc,void 0),a.set(mc,void 0),!1;a.set(ec,1*b[1]);a.set(fc,1*b[2]);a.set(gc,1*b[3]);Ve(a,b[ja](4)[C]("."));return!0},Ve=function(a,b){function c(a){return(a=b[oa](a+"=(.*?)(?:\\|utm|$)"))&&
2==a[w]?a[1]:void 0}function d(b,c){c?(c=e?I(c):c[y]("%20")[C](" "),a.set(b,c)):a.set(b,void 0)}-1==b[q]("=")&&(b=I(b));var e="2"==c("utmcvr");d(ic,c("utmcid"));d(jc,c("utmccn"));d(nc,c("utmcsr"));d(oc,c("utmcmd"));d(pc,c("utmctr"));d(qc,c("utmcct"));d(S,c("utmgclid"));d(kc,c("utmgclsrc"));d(lc,c("utmdclid"));d(mc,c("utmdsid"))},ad=function(a,b){return b?a!=b:!/^\d+$/[ia](a)};var Uc=function(){this.filters=[]};Uc[x].add=function(a,b){this.filters[n]({name:a,s:b})};Uc[x].cb=function(a){try{for(var b=0;b<this.filters[w];b++)this.filters[b].s.call(W,a)}catch(c){}};function jd(a){100!=a.get(vb)&&a.get(Q)%1E4>=100*a.get(vb)&&a[ta]()}function kd(a){ld(a.get(Wa))&&a[ta]()}function md(a){"file:"==J[z][A]&&a[ta]()}function Ge(a){He()&&a[ta]()}function nd(a){a.get(Ib)||a.set(Ib,J.title,!0);a.get(Hb)||a.set(Hb,J[z].pathname+J[z][va],!0)}
function lf(a){a.get(Wa)&&"UA-XXXXX-X"!=a.get(Wa)||a[ta]()};var od=new function(){var a=[];this.set=function(b){a[b]=!0};this.encode=function(){for(var b=[],c=0;c<a[w];c++)a[c]&&(b[m[la](c/6)]=b[m[la](c/6)]^1<<c%6);for(c=0;c<b[w];c++)b[c]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"[ma](b[c]||0);return b[C]("")+"~"}};function H(a){od.set(a)};var W=window,J=document,ld=function(a){var b=W._gaUserPrefs;if(b&&b.ioo&&b.ioo()||a&&!0===W["ga-disable-"+a])return!0;try{var c=W.external;if(c&&c._gaUserPrefs&&"oo"==c._gaUserPrefs)return!0}catch(d){}return!1},He=function(){return W[za]&&"preview"==W[za].loadPurpose},We=function(a,b){ca(a,b)},pd=function(a){var b=[],c=J.cookie[y](";");a=new RegExp("^\\s*"+a+"=\\s*(.*?)\\s*$");for(var d=0;d<c[w];d++){var e=c[d][oa](a);e&&b[n](e[1])}return b},X=function(a,b,c,d,e,f){e=ld(e)?!1:Sc(d,c)?!1:He()?!1:!0;
e&&((b=mf(b))&&2E3<b[w]&&(b=b[B](0,2E3),H(69)),a=a+"="+b+"; path="+c+"; ",f&&(a+="expires="+(new Date((new Date)[g]()+f)).toGMTString()+"; "),d&&(a+="domain="+d+";"),J.cookie=a)},mf=function(a){if(!a)return a;var b=a[q](";");-1!=b&&(a=a[B](0,b),H(141));if(!(0<=W[za].userAgent[q]("Firefox")))return a;a=a[p](/\n|\r/g," ");for(var b=0,c=a[w];b<c;++b){var d=a.charCodeAt(b)&255;if(10==d||13==d)a=a[B](0,b)+"?"+a[B](b+1)}return a};var qd,rd,sd=function(){if(!qd){var a={},b=W[za],c=W.screen;a.Q=c?c.width+"x"+c.height:"-";a.P=c?c.colorDepth+"-bit":"-";a.language=(b&&(b.language||b.browserLanguage)||"-")[D]();a.javaEnabled=b&&b.javaEnabled()?1:0;a.characterSet=J.characterSet||J.charset||"-";try{var d;var e=J.documentElement,f=J.body,Be=f&&f[sa]&&f[wa],b=[];e&&e[sa]&&e[wa]&&("CSS1Compat"===J.compatMode||!Be)?b=[e[sa],e[wa]]:Be&&(b=[f[sa],f[wa]]);d=0>=b[0]||0>=b[1]?"":b[C]("x");a.Wa=d}catch(k){H(135)}qd=a}},td=function(){sd();for(var a=
qd,b=W[za],a=b.appName+b.version+a.language+b.platform+b.userAgent+a.javaEnabled+a.Q+a.P+(J.cookie?J.cookie:"")+(J.referrer?J.referrer:""),b=a[w],c=W.history[w];0<c;)a+=c--^b++;return Yc(a)},ud=function(a){sd();var b=qd;a.set(Lb,b.Q);a.set(Mb,b.P);a.set(Pb,b.language);a.set(Qb,b.characterSet);a.set(Nb,b.javaEnabled);a.set(Rb,b.Wa);if(a.get(ib)&&a.get(jb)){if(!(b=rd)){var c,d,e;d="ShockwaveFlash";if((b=(b=W[za])?b.plugins:void 0)&&0<b[w])for(c=0;c<b[w]&&!e;c++)d=b[c],-1<d[r][q]("Shockwave Flash")&&
(e=d.description[y]("Shockwave Flash ")[1]);else{d=d+"."+d;try{c=new ActiveXObject(d+".7"),e=c.GetVariable("$version")}catch(f){}if(!e)try{c=new ActiveXObject(d+".6"),e="WIN 6,0,21,0",c.AllowScriptAccess="always",e=c.GetVariable("$version")}catch(Be){}if(!e)try{c=new ActiveXObject(d),e=c.GetVariable("$version")}catch(k){}e&&(e=e[y](" ")[1][y](","),e=e[0]+"."+e[1]+" r"+e[2])}b=e?e:"-"}rd=b;a.set(Ob,rd)}else a.set(Ob,"-")};var vd=function(a){if(Ba(a))this.s=a;else{var b=a[0],c=b.lastIndexOf(":"),d=b.lastIndexOf(".");this.h=this.i=this.l="";-1==c&&-1==d?this.h=b:-1==c&&-1!=d?(this.i=b[B](0,d),this.h=b[B](d+1)):-1!=c&&-1==d?(this.l=b[B](0,c),this.h=b[B](c+1)):c>d?(this.i=b[B](0,d),this.l=b[B](d+1,c),this.h=b[B](c+1)):(this.i=b[B](0,d),this.h=b[B](d+1));this.k=a[ja](1);this.Ma=!this.l&&"_require"==this.h;this.J=!this.i&&!this.l&&"_provide"==this.h}},Y=function(){T(Y[x],"push",Y[x][n],5);T(Y[x],"_getPlugin",Pc,121);T(Y[x],
"_createAsyncTracker",Y[x].Sa,33);T(Y[x],"_getAsyncTracker",Y[x].Ta,34);this.I=new nf;this.p=[]};E=Y[x];E.Na=function(a,b,c){var d=this.I.get(a);if(!Ba(d))return!1;b.plugins_=b.plugins_||new nf;b.plugins_.set(a,new d(b,c||{}));return!0};E.push=function(a){var b=Z.Va[ya](this,arguments),b=Z.p.concat(b);for(Z.p=[];0<b[w]&&!Z.O(b[0])&&!(b.shift(),0<Z.p[w]););Z.p=Z.p.concat(b);return 0};E.Va=function(a){for(var b=[],c=0;c<arguments[w];c++)try{var d=new vd(arguments[c]);d.J?this.O(d):b[n](d)}catch(e){}return b};
E.O=function(a){try{if(a.s)a.s[ya](W);else if(a.J)this.I.set(a.k[0],a.k[1]);else{var b="_gat"==a.i?M:"_gaq"==a.i?Z:M.u(a.i);if(a.Ma){if(!this.Na(a.k[0],b,a.k[2])){if(!a.Pa){var c=Oa(""+a.k[1]);var d=c[A],e=J[z][A];var f;if(f="https:"==d||d==e?!0:"http:"!=d?!1:"http:"==e)a:{var Be=Oa(J[z][xa]);if(!(c.Oa||0<=c.url[q]("?")||0<=c[ra][q]("://")||c[u]==Be[u]&&c[pa]==Be[pa]))for(var k="http:"==c[A]?80:443,Ja=M.S,b=0;b<Ja[w];b++)if(c[u]==Ja[b][0]&&(c[pa]||k)==(Ja[b][1]||k)&&0==c[ra][q](Ja[b][2])){f=!0;break a}f=
!1}f&&!ld()&&(a.Pa=Ia(c.url))}return!0}}else a.l&&(b=b.plugins_.get(a.l)),b[a.h][ya](b,a.k)}}catch(t){}};E.Sa=function(a,b){return M.r(a,b||"")};E.Ta=function(a){return M.u(a)};var yd=function(){function a(a,b,c,d){void 0==f[a]&&(f[a]={});void 0==f[a][b]&&(f[a][b]=[]);f[a][b][c]=d}function b(a,b,c){if(void 0!=f[a]&&void 0!=f[a][b])return f[a][b][c]}function c(a,b){if(void 0!=f[a]&&void 0!=f[a][b]){f[a][b]=void 0;var c=!0,d;for(d=0;d<Be[w];d++)if(void 0!=f[a][Be[d]]){c=!1;break}c&&(f[a]=void 0)}}function d(a){var b="",c=!1,d,e;for(d=0;d<Be[w];d++)if(e=a[Be[d]],void 0!=e){c&&(b+=Be[d]);for(var c=[],f=void 0,Bd=void 0,Bd=0;Bd<e[w];Bd++)if(void 0!=e[Bd]){f="";1!=Bd&&void 0==
e[Bd-1]&&(f+=Bd[v]()+"!");for(var fa=e[Bd],Ke="",Le=void 0,Me=void 0,ga=void 0,Le=0;Le<fa[w];Le++)Me=fa[ma](Le),ga=k[Me],Ke+=void 0!=ga?ga:Me;f+=Ke;c[n](f)}b+="("+c[C]("*")+")";c=!1}else c=!0;return b}var e=this,f=[],Be=["k","v"],k={"'":"'0",")":"'1","*":"'2","!":"'3"};e.Ra=function(a){return void 0!=f[a]};e.A=function(){for(var a="",b=0;b<f[w];b++)void 0!=f[b]&&(a+=b[v]()+d(f[b]));return a};e.Qa=function(a){if(void 0==a)return e.A();for(var b=a.A(),c=0;c<f[w];c++)void 0==f[c]||a.Ra(c)||(b+=c[v]()+
d(f[c]));return b};e.f=function(b,c,d){if(!wd(d))return!1;a(b,"k",c,d);return!0};e.o=function(b,c,d){if(!xd(d))return!1;a(b,"v",c,d[v]());return!0};e.getKey=function(a,c){return b(a,"k",c)};e.N=function(a,c){return b(a,"v",c)};e.L=function(a){c(a,"k")};e.M=function(a){c(a,"v")};T(e,"_setKey",e.f,89);T(e,"_setValue",e.o,90);T(e,"_getKey",e.getKey,87);T(e,"_getValue",e.N,88);T(e,"_clearKey",e.L,85);T(e,"_clearValue",e.M,86)};function wd(a){return"string"==typeof a}
function xd(a){return!("number"==typeof a||void 0!=Number&&a instanceof Number)||m.round(a)!=a||da(a)||a==ba?!1:!0};var zd=function(a){var b=W.gaGlobal;a&&!b&&(W.gaGlobal=b={});return b},Ad=function(){var a=zd(!0).hid;null==a&&(a=Ea(),zd(!0).hid=a);return a},Dd=function(a){a.set(Kb,Ad());var b=zd();if(b&&b.dh==a.get(O)){var c=b.sid;c&&(a.get(ac)?H(112):H(132),a.set(Zb,c),a.get(Sb)&&a.set(Wb,c));b=b.vid;a.get(Sb)&&b&&(b=b[y]("."),a.set(Q,1*b[0]),a.set(Vb,1*b[1]))}};var Ed,Fd=function(a,b,c,d){var e=a.c(bb,""),f=a.c(P,"/");d=void 0!=d?d:a.b(cb,0);a=a.c(Wa,"");X(b,c,f,e,a,d)},Xc=function(a){var b=a.c(bb,"");a.b(O,1);var c=a.c(P,"/"),d=a.c(Wa,"");X("__utma",cd(a),c,b,d,a.get(cb));X("__utmb",dd(a),c,b,d,a.get(db));X("__utmc",""+a.b(O,1),c,b,d);var e=hd(a,!0);e?X("__utmz",e,c,b,d,a.get(eb)):X("__utmz","",c,b,"",-1);(e=fd(a,!1))?X("__utmv",e,c,b,d,a.get(cb)):X("__utmv","",c,b,"",-1)},Wc=function(a){var b=a.b(O,1);if(!bd(a,$c(b,pd("__utma"))))return a.set(Ub,!0),!1;
var c=!ed(a,$c(b,pd("__utmb")));a.set(bc,c);id(a,$c(b,pd("__utmz")));gd(a,$c(b,pd("__utmv")));Ed=!c;return!0},Gd=function(a){Ed||0<pd("__utmb")[w]||(X("__utmd","1",a.c(P,"/"),a.c(bb,""),a.c(Wa,""),1E4),0==pd("__utmd")[w]&&a[ta]())};var h=0,Jd=function(a){void 0==a.get(Q)?Hd(a):a.get(Ub)&&!a.get(Mc)?Hd(a):a.get(bc)&&Id(a)},Kd=function(a){a.get(hc)&&!a.get(ac)&&(Id(a),a.set(fc,a.get($b)))},Hd=function(a){h++;1<h&&H(137);var b=a.get(ab);a.set(Sb,!0);a.set(Q,Ea()^td(a)&2147483647);a.set(Tb,"");a.set(Vb,b);a.set(Wb,b);a.set(Zb,b);a.set($b,1);a.set(ac,!0);a.set(cc,0);a.set(R,10);a.set(dc,b);a.set(Fb,[]);a.set(Ub,!1);a.set(bc,!1)},Id=function(a){h++;1<h&&H(137);a.set(Wb,a.get(Zb));a.set(Zb,a.get(ab));a.Za($b);a.set(ac,!0);a.set(cc,
0);a.set(R,10);a.set(dc,a.get(ab));a.set(bc,!1)};var Ld="daum:q eniro:search_word naver:query pchome:q images.google:q google:q yahoo:p yahoo:q msn:q bing:q aol:query aol:q lycos:q lycos:query ask:q cnn:query virgilio:qs baidu:wd baidu:word alice:qs yandex:text najdi:q seznam:q rakuten:qt biglobe:q goo.ne:MT search.smt.docomo:MT onet:qt onet:q kvasir:q terra:query rambler:query conduit:q babylon:q search-results:q avg:q comcast:q incredimail:q startsiden:q go.mail.ru:q centrum.cz:q 360.cn:q sogou:query tut.by:query globo:q ukr:q so.com:q haosou.com:q auone:q".split(" "),
Sd=function(a){if(a.get(kb)&&!a.get(Mc)){var b;b=!F(a.get(ic))||!F(a.get(nc))||!F(a.get(S))||!F(a.get(lc));for(var c={},d=0;d<Md[w];d++){var e=Md[d];c[e]=a.get(e)}(d=a.get(rc))?(H(149),e=new nf,Na(e,d),d=e):d=La(J[z][xa],a.get(gb)).d;if("1"!=L(d.get(a.get(ub)))||!b)if(d=Xe(a,d)||Qd(a),d||b||!a.get(ac)||(Pd(a,void 0,"(direct)",void 0,void 0,void 0,"(direct)","(none)",void 0,void 0),d=!0),d&&(a.set(hc,Rd(a,c)),b="(direct)"==a.get(nc)&&"(direct)"==a.get(jc)&&"(none)"==a.get(oc),a.get(hc)||a.get(ac)&&
!b))a.set(ec,a.get(ab)),a.set(fc,a.get($b)),a.Za(gc)}},Xe=function(a,b){function c(c,d){d=d||"-";var e=L(b.get(a.get(c)));return e&&"-"!=e?I(e):d}var d=L(b.get(a.get(nb)))||"-",e=L(b.get(a.get(qb)))||"-",f=L(b.get(a.get(pb)))||"-",Be=L(b.get("gclsrc"))||"-",k=L(b.get("dclid"))||"-",Ja=c(ob,"(not set)"),t=c(rb,"(not set)"),Za=c(sb),Ma=c(tb);if(F(d)&&F(f)&&F(k)&&F(e))return!1;var mb=!F(f)&&!F(Be),mb=F(e)&&(!F(k)||mb),Xb=F(Za);if(mb||Xb){var Bd=Nd(a),Bd=La(Bd,!0);(Bd=Od(a,Bd))&&!F(Bd[1]&&!Bd[2])&&(mb&&
(e=Bd[0]),Xb&&(Za=Bd[1]))}Pd(a,d,e,f,Be,k,Ja,t,Za,Ma);return!0},Qd=function(a){var b=Nd(a),c=La(b,!0);(b=!(void 0!=b&&null!=b&&""!=b&&"0"!=b&&"-"!=b&&0<=b[q]("://")))||(b=c&&-1<c[u][q]("google")&&c.d.contains("q")&&"cse"==c[ra]);if(b)return!1;if((b=Od(a,c))&&!b[2])return Pd(a,void 0,b[0],void 0,void 0,void 0,"(organic)","organic",b[1],void 0),!0;if(b||!a.get(ac))return!1;a:{for(var b=a.get(Bb),d=Ka(c[u]),e=0;e<b[w];++e)if(-1<d[q](b[e])){a=!1;break a}Pd(a,void 0,d,void 0,void 0,void 0,"(referral)",
"referral",void 0,"/"+c[ra]);a=!0}return a},Od=function(a,b){for(var c=a.get(zb),d=0;d<c[w];++d){var e=c[d][y](":");if(-1<b[u][q](e[0][D]())){var f=b.d.get(e[1]);if(f&&(f=K(f),!f&&-1<b[u][q]("google.")&&(f="(not provided)"),!e[3]||-1<b.url[q](e[3]))){f||H(151);a:{for(var c=f,d=a.get(Ab),c=I(c)[D](),Be=0;Be<d[w];++Be)if(c==d[Be]){c=!0;break a}c=!1}return[e[2]||e[0],f,c]}}}return null},Pd=function(a,b,c,d,e,f,Be,k,Ja,t){a.set(ic,b);a.set(nc,c);a.set(S,d);a.set(kc,e);a.set(lc,f);a.set(jc,Be);a.set(oc,
k);a.set(pc,Ja);a.set(qc,t)},Md=[jc,ic,S,lc,nc,oc,pc,qc],Rd=function(a,b){function c(a){a=(""+a)[y]("+")[C]("%20");return a=a[y](" ")[C]("%20")}function d(c){var d=""+(a.get(c)||"");c=""+(b[c]||"");return 0<d[w]&&d==c}if(d(S)||d(lc))return H(131),!1;for(var e=0;e<Md[w];e++){var f=Md[e],Be=b[f]||"-",f=a.get(f)||"-";if(c(Be)!=c(f))return!0}return!1},Td=new RegExp(/^https?:\/\/(www\.)?google(\.com?)?(\.[a-z]{2}t?)?\/?$/i),jf=/^https?:\/\/r\.search\.yahoo\.com\/[^?]*$/i,Nd=function(a){a=Pa(a.get(Jb),
a.get(P));try{if(Td[ia](a))return H(136),a+"?q=";if(jf[ia](a))return H(150),a+"?p=(not provided)"}catch(b){H(145)}return a};var Ud,Vd,Wd=function(a){Ud=a.c(S,"");Vd=a.c(kc,"")},Xd=function(a){var b=a.c(S,""),c=a.c(kc,"");b!=Ud&&(-1<c[q]("ds")?a.set(mc,void 0):!F(Ud)&&-1<Vd[q]("ds")&&a.set(mc,Ud))};var Zd=function(a){Yd(a,J[z][xa])?(a.set(Mc,!0),H(12)):a.set(Mc,!1)},Yd=function(a,b){if(!a.get(fb))return!1;var c=La(b,a.get(gb)),d=K(c.d.get("__utma")),e=K(c.d.get("__utmb")),f=K(c.d.get("__utmc")),Be=K(c.d.get("__utmx")),k=K(c.d.get("__utmz")),Ja=K(c.d.get("__utmv")),c=K(c.d.get("__utmk"));if(Yc(""+d+e+f+Be+k+Ja)!=c){d=I(d);e=I(e);f=I(f);Be=I(Be);f=$d(d+e+f+Be,k,Ja,c);if(!f)return!1;k=f[0];Ja=f[1]}if(!bd(a,d,!0))return!1;ed(a,e,!0);id(a,k,!0);gd(a,Ja,!0);ae(a,Be,!0);return!0},ce=function(a,b,c){var d;
d=cd(a)||"-";var e=dd(a)||"-",f=""+a.b(O,1)||"-",Be=be(a)||"-",k=hd(a,!1)||"-";a=fd(a,!1)||"-";var Ja=Yc(""+d+e+f+Be+k+a),t=[];t[n]("__utma="+d);t[n]("__utmb="+e);t[n]("__utmc="+f);t[n]("__utmx="+Be);t[n]("__utmz="+k);t[n]("__utmv="+a);t[n]("__utmk="+Ja);d=t[C]("&");if(!d)return b;e=b[q]("#");if(c)return 0>e?b+"#"+d:b+"&"+d;c="";f=b[q]("?");0<e&&(c=b[B](e),b=b[B](0,e));return 0>f?b+"?"+d+c:b+"&"+d+c},$d=function(a,b,c,d){for(var e=0;3>e;e++){for(var f=0;3>f;f++){if(d==Yc(a+b+c))return H(127),[b,c];
var Be=b[p](/ /g,"%20"),k=c[p](/ /g,"%20");if(d==Yc(a+Be+k))return H(128),[Be,k];Be=Be[p](/\+/g,"%20");k=k[p](/\+/g,"%20");if(d==Yc(a+Be+k))return H(129),[Be,k];try{var Ja=b[oa]("utmctr=(.*?)(?:\\|utm|$)");if(Ja&&2==Ja[w]&&(Be=b[p](Ja[1],G(I(Ja[1]))),d==Yc(a+Be+c)))return H(139),[Be,c]}catch(t){}b=I(b)}c=I(c)}};var de="|",fe=function(a,b,c,d,e,f,Be,k,Ja){var t=ee(a,b);t||(t={},a.get(Cb)[n](t));t.id_=b;t.affiliation_=c;t.total_=d;t.tax_=e;t.shipping_=f;t.city_=Be;t.state_=k;t.country_=Ja;t.items_=t.items_||[];return t},ge=function(a,b,c,d,e,f,Be){a=ee(a,b)||fe(a,b,"",0,0,0,"","","");var k;a:{if(a&&a.items_){k=a.items_;for(var Ja=0;Ja<k[w];Ja++)if(k[Ja].sku_==c){k=k[Ja];break a}}k=null}Ja=k||{};Ja.transId_=b;Ja.sku_=c;Ja.name_=d;Ja.category_=e;Ja.price_=f;Ja.quantity_=Be;k||a.items_[n](Ja);return Ja},ee=function(a,
b){for(var c=a.get(Cb),d=0;d<c[w];d++)if(c[d].id_==b)return c[d];return null};var he,ie=function(a){if(!he){var b;b=J[z].hash;var c=W[r],d=/^#?gaso=([^&]*)/;if(c=(b=(b=b&&b[oa](d)||c&&c[oa](d))?b[1]:K(pd("GASO")))&&b[oa](/^(?:!([-0-9a-z.]{1,40})!)?([-.\w]{10,1200})$/i))Fd(a,"GASO",""+b,0),M._gasoDomain=a.get(bb),M._gasoCPath=a.get(P),a=c[1],Ia("https://www.google.com/analytics/web/inpage/pub/inpage.js?"+(a?"prefix="+a+"&":"")+Ea(),"_gasojs");he=!0}};var ae=function(a,b,c){c&&(b=I(b));c=a.b(O,1);b=b[y](".");2>b[w]||!/^\d+$/[ia](b[0])||(b[0]=""+c,Fd(a,"__utmx",b[C]("."),void 0))},be=function(a,b){var c=$c(a.get(O),pd("__utmx"));"-"==c&&(c="");return b?G(c):c},Ye=function(a){try{var b=La(J[z][xa],!1),c=ea(L(b.d.get("utm_referrer")))||"";c&&a.set(Jb,c);var d=ea(K(b.d.get("utm_expid")))||"";d&&(d=d[y](".")[0],a.set(Oc,""+d))}catch(e){H(146)}},l=function(a){var b=W.gaData&&W.gaData.expId;b&&a.set(Oc,""+b)};var ke=function(a,b){var c=m.min(a.b(Dc,0),100);if(a.b(Q,0)%100>=c)return!1;c=Ze()||$e();if(void 0==c)return!1;var d=c[0];if(void 0==d||d==ba||da(d))return!1;0<d?af(c)?b(je(c)):b(je(c[ja](0,1))):Ga(W,"load",function(){ke(a,b)},!1);return!0},me=function(a,b,c,d){var e=new yd;e.f(14,90,b[B](0,500));e.f(14,91,a[B](0,150));e.f(14,92,""+le(c));void 0!=d&&e.f(14,93,d[B](0,500));e.o(14,90,c);return e},af=function(a){for(var b=1;b<a[w];b++)if(da(a[b])||a[b]==ba||0>a[b])return!1;return!0},le=function(a){return da(a)||
0>a?0:5E3>a?10*m[la](a/10):5E4>a?100*m[la](a/100):41E5>a?1E3*m[la](a/1E3):41E5},je=function(a){for(var b=new yd,c=0;c<a[w];c++)b.f(14,c+1,""+le(a[c])),b.o(14,c+1,a[c]);return b},Ze=function(){var a=W.performance||W.webkitPerformance;if(a=a&&a.timing){var b=a.navigationStart;if(0==b)H(133);else return[a.loadEventStart-b,a.domainLookupEnd-a.domainLookupStart,a.connectEnd-a.connectStart,a.responseStart-a.requestStart,a.responseEnd-a.responseStart,a.fetchStart-b,a.domInteractive-b,a.domContentLoadedEventStart-
b]}},$e=function(){if(W.top==W){var a=W.external,b=a&&a.onloadT;a&&!a.isValidLoadTime&&(b=void 0);2147483648<b&&(b=void 0);0<b&&a.setPageReadyTime();return void 0==b?void 0:[b]}};var cf=function(a){if(a.get(Sb))try{var b;a:{var c=pd(a.get(Oe)||"_ga");if(c&&!(1>c[w])){for(var d=[],e=0;e<c[w];e++){var f;var Be=c[e][y]("."),k=Be.shift();if(("GA1"==k||"1"==k)&&1<Be[w]){var Ja=Be.shift()[y]("-");1==Ja[w]&&(Ja[1]="1");Ja[0]*=1;Ja[1]*=1;f={Ya:Ja,$a:Be[C](".")}}else f=void 0;f&&d[n](f)}if(1==d[w]){b=d[0].$a;break a}if(0!=d[w]){var t=a.get(Pe)||a.get(bb),d=bf(d,(0==t[q](".")?t.substr(1):t)[y](".")[w],0);if(1==d[w]){b=d[0].$a;break a}var Za=a.get(Qe)||a.get(P);(c=Za)?(1<c[w]&&"/"==
c[ma](c[w]-1)&&(c=c.substr(0,c[w]-1)),0!=c[q]("/")&&(c="/"+c),Za=c):Za="/";d=bf(d,"/"==Za?1:Za[y]("/")[w],1);b=d[0].$a;break a}}b=void 0}if(b){var Ma=(""+b)[y](".");2==Ma[w]&&/[0-9.]/[ia](Ma)&&(H(114),a.set(Q,Ma[0]),a.set(Vb,Ma[1]),a.set(Sb,!1))}}catch(mb){H(115)}},bf=function(a,b,c){for(var d=[],e=[],f=128,Be=0;Be<a[w];Be++){var k=a[Be];if(k.Ya[c]==b)d[n](k);else if(k.Ya[c]==f)e[n](k);else k.Ya[c]<f&&(e=[k],f=k.Ya[c])}return 0<d[w]?d:e};var kf=/^gtm\d+$/,hf=function(a){var b;b=!!a.b(Cd,1);b&&(H(140),"page"!=a.get(sc)?a.set(Kc,"",!0):(b=a.c(Lc,""),b||(b=(b=a.c($a,""))&&"~0"!=b?kf[ia](b)?"__utmt_"+G(a.c(Wa,"")):"__utmt_"+G(b):"__utmt"),0<pd(b)[w]?a.set(Kc,"",!0):(X(b,"1",a.c(P,"/"),a.c(bb,""),a.c(Wa,""),6E5),0<pd(b)[w]&&(a.set(Kc,Ea(),!0),a.set(Yb,1,!0),a.set(Jc,Ne()+"/r/__utm.gif?",!0)))))};var U=function(a,b,c){function d(a){return function(b){if((b=b.get(Nc)[a])&&b[w])for(var c=Te(e,a),d=0;d<b[w];d++)b[d].call(e,c)}}var e=this;this.a=new Zc;this.get=function(a){return this.a.get(a)};this.set=function(a,b,c){this.a.set(a,b,c)};this.set(Wa,b||"UA-XXXXX-X");this.set($a,a||"");this.set(Ya,c||"");this.set(ab,m.round((new Date)[g]()/1E3));this.set(P,"/");this.set(cb,63072E6);this.set(eb,15768E6);this.set(db,18E5);this.set(fb,!1);this.set(yb,50);this.set(gb,!1);this.set(hb,!0);this.set(ib,
!0);this.set(jb,!0);this.set(kb,!0);this.set(lb,!0);this.set(ob,"utm_campaign");this.set(nb,"utm_id");this.set(pb,"gclid");this.set(qb,"utm_source");this.set(rb,"utm_medium");this.set(sb,"utm_term");this.set(tb,"utm_content");this.set(ub,"utm_nooverride");this.set(vb,100);this.set(Dc,1);this.set(Ec,!1);this.set(wb,"/__utm.gif");this.set(xb,1);this.set(Cb,[]);this.set(Fb,[]);this.set(zb,Ld[ja](0));this.set(Ab,[]);this.set(Bb,[]);this.B("auto");this.set(Jb,J.referrer);Ye(this.a);this.set(Nc,{hit:[],
load:[]});this.a.g("0",Zd);this.a.g("1",Wd);this.a.g("2",Jd);this.a.g("3",cf);this.a.g("4",Sd);this.a.g("5",Xd);this.a.g("6",Kd);this.a.g("7",d("load"));this.a.g("8",ie);this.a.e("A",kd);this.a.e("B",md);this.a.e("C",Ge);this.a.e("D",Jd);this.a.e("E",jd);this.a.e("F",Tc);this.a.e("G",ne);this.a.e("H",lf);this.a.e("I",Gd);this.a.e("J",nd);this.a.e("K",ud);this.a.e("L",Dd);this.a.e("M",l);this.a.e("N",hf);this.a.e("O",d("hit"));this.a.e("P",oe);this.a.e("Q",pe);0===this.get(ab)&&H(111);this.a.T();this.H=
void 0};E=U[x];E.m=function(){var a=this.get(Db);a||(a=new yd,this.set(Db,a));return a};E.La=function(a){for(var b in a){var c=a[b];a.hasOwnProperty(b)&&this.set(b,c,!0)}};E.K=function(a){if(this.get(Ec))return!1;var b=this,c=ke(this.a,function(c){b.set(Hb,a,!0);b.t(c)});this.set(Ec,c);return c};E.Fa=function(a){a&&Ca(a)?(H(13),this.set(Hb,a,!0)):"object"===typeof a&&null!==a&&this.La(a);this.H=a=this.get(Hb);this.a.j("page");this.K(a)};
E.F=function(a,b,c,d,e){if(""==a||!wd(a)||""==b||!wd(b)||void 0!=c&&!wd(c)||void 0!=d&&!xd(d))return!1;this.set(wc,a,!0);this.set(xc,b,!0);this.set(yc,c,!0);this.set(zc,d,!0);this.set(vc,!!e,!0);this.a.j("event");return!0};E.Ha=function(a,b,c,d,e){var f=this.a.b(Dc,0);1*e===e&&(f=e);if(this.a.b(Q,0)%100>=f)return!1;c=1*(""+c);if(""==a||!wd(a)||""==b||!wd(b)||!xd(c)||da(c)||0>c||0>f||100<f||void 0!=d&&(""==d||!wd(d)))return!1;this.t(me(a,b,c,d));return!0};
E.Ga=function(a,b,c,d){if(!a||!b)return!1;this.set(Ac,a,!0);this.set(Bc,b,!0);this.set(Cc,c||J[z][xa],!0);d&&this.set(Hb,d,!0);this.a.j("social");return!0};E.Ea=function(){this.set(Dc,10);this.K(this.H)};E.Ia=function(){this.a.j("trans")};E.t=function(a){this.set(Eb,a,!0);this.a.j("event")};E.ia=function(a){this.v();var b=this;return{_trackEvent:function(c,d,e){H(91);b.F(a,c,d,e)}}};E.ma=function(a){return this.get(a)};
E.xa=function(a,b){if(a)if(Ca(a))this.set(a,b);else if("object"==typeof a)for(var c in a)a.hasOwnProperty(c)&&this.set(c,a[c])};E.addEventListener=function(a,b){var c=this.get(Nc)[a];c&&c[n](b)};E.removeEventListener=function(a,b){for(var c=this.get(Nc)[a],d=0;c&&d<c[w];d++)if(c[d]==b){c.splice(d,1);break}};E.qa=function(){return"5.6.4"};E.B=function(a){this.get(hb);a="auto"==a?Ka(J.domain):a&&"-"!=a&&"none"!=a?a[D]():"";this.set(bb,a)};E.va=function(a){this.set(hb,!!a)};
E.na=function(a,b){return ce(this.a,a,b)};E.link=function(a,b){if(this.a.get(fb)&&a){var c=ce(this.a,a,b);J[z].href=c}};E.ua=function(a,b){this.a.get(fb)&&a&&a.action&&(a.action=ce(this.a,a.action,b))};
E.za=function(){this.v();var a=this.a,b=J.getElementById?J.getElementById("utmtrans"):J.utmform&&J.utmform.utmtrans?J.utmform.utmtrans:null;if(b&&b[na]){a.set(Cb,[]);for(var b=b[na][y]("UTM:"),c=0;c<b[w];c++){b[c]=Da(b[c]);for(var d=b[c][y](de),e=0;e<d[w];e++)d[e]=Da(d[e]);"T"==d[0]?fe(a,d[1],d[2],d[3],d[4],d[5],d[6],d[7],d[8]):"I"==d[0]&&ge(a,d[1],d[2],d[3],d[4],d[5],d[6])}}};E.$=function(a,b,c,d,e,f,Be,k){return fe(this.a,a,b,c,d,e,f,Be,k)};E.Y=function(a,b,c,d,e,f){return ge(this.a,a,b,c,d,e,f)};
E.Aa=function(a){de=a||"|"};E.ea=function(){this.set(Cb,[])};E.wa=function(a,b,c,d){var e=this.a;if(0>=a||a>e.get(yb))a=!1;else if(!b||!c||128<b[w]+c[w])a=!1;else{1!=d&&2!=d&&(d=3);var f={};ha(f,b);f.value=c;f.scope=d;e.get(Fb)[a]=f;a=!0}a&&this.a.n();return a};E.ka=function(a){this.a.get(Fb)[a]=void 0;this.a.n()};E.ra=function(a){return(a=this.a.get(Fb)[a])&&1==a[ua]?a[na]:void 0};E.Ca=function(a,b,c){12==a&&1==b?this.set(pf,c):this.m().f(a,b,c)};E.Da=function(a,b,c){this.m().o(a,b,c)};
E.sa=function(a,b){return this.m().getKey(a,b)};E.ta=function(a,b){return this.m().N(a,b)};E.fa=function(a){this.m().L(a)};E.ga=function(a){this.m().M(a)};E.ja=function(){return new yd};E.W=function(a){a&&this.get(Ab)[n](a[D]())};E.ba=function(){this.set(Ab,[])};E.X=function(a){a&&this.get(Bb)[n](a[D]())};E.ca=function(){this.set(Bb,[])};E.Z=function(a,b,c,d,e){if(a&&b){a=[a,b[D]()][C](":");if(d||e)a=[a,d,e][C](":");d=this.get(zb);d.splice(c?0:d[w],0,a)}};E.da=function(){this.set(zb,[])};
E.ha=function(a){this.a[ka]();var b=this.get(P),c=be(this.a);this.set(P,a);this.a.n();ae(this.a,c);this.set(P,b)};E.ya=function(a,b){if(0<a&&5>=a&&Ca(b)&&""!=b){var c=this.get(Fc)||[];c[a]=b;this.set(Fc,c)}};E.V=function(a){a=""+a;if(a[oa](/^[A-Za-z0-9]{1,5}$/)){var b=this.get(Ic)||[];b[n](a);this.set(Ic,b)}};E.v=function(){this.a[ka]()};E.Ba=function(a){a&&""!=a&&(this.set(Tb,a),this.a.j("var"))};var ne=function(a){"trans"!==a.get(sc)&&500<=a.b(cc,0)&&a[ta]();if("event"===a.get(sc)){var b=(new Date)[g](),c=a.b(dc,0),d=a.b(Zb,0),c=m[la]((b-(c!=d?c:1E3*c))/1E3*1);0<c&&(a.set(dc,b),a.set(R,m.min(10,a.b(R,0)+c)));0>=a.b(R,0)&&a[ta]()}},pe=function(a){"event"===a.get(sc)&&a.set(R,m.max(0,a.b(R,10)-1))};var qe=function(){var a=[];this.add=function(b,c,d){d&&(c=G(""+c));a[n](b+"="+c)};this.toString=function(){return a[C]("&")}},re=function(a,b){(b||2!=a.get(xb))&&a.Za(cc)},se=function(a,b){b.add("utmwv","5.6.4");b.add("utms",a.get(cc));b.add("utmn",Ea());var c=J[z].hostname;F(c)||b.add("utmhn",c,!0);c=a.get(vb);100!=c&&b.add("utmsp",c,!0)},te=function(a,b){b.add("utmht",(new Date)[g]());b.add("utmac",Da(a.get(Wa)));a.get(Oc)&&b.add("utmxkey",a.get(Oc),!0);a.get(vc)&&b.add("utmni",1);a.get(of)&&b.add("utmgtm",
a.get(of),!0);var c=a.get(Ic);c&&0<c[w]&&b.add("utmdid",c[C]("."));ff(a,b);!1!==a.get(Xa)&&(a.get(Xa)||M.w)&&b.add("aip",1);void 0!==a.get(Kc)&&b.add("utmjid",a.c(Kc,""),!0);a.b(Yb,0)&&b.add("utmredir",a.b(Yb,0),!0);M.bb||(M.bb=a.get(Wa));(1<M.ab()||M.bb!=a.get(Wa))&&b.add("utmmt",1);b.add("utmu",od.encode())},ue=function(a,b){for(var c=a.get(Fc)||[],d=[],e=1;e<c[w];e++)c[e]&&d[n](e+":"+G(c[e][p](/%/g,"%25")[p](/:/g,"%3A")[p](/,/g,"%2C")));d[w]&&b.add("utmpg",d[C](","))},ff=function(a,b){function c(a,
b){b&&d[n](a+"="+b+";")}var d=[];c("__utma",cd(a));c("__utmz",hd(a,!1));c("__utmv",fd(a,!0));c("__utmx",be(a));b.add("utmcc",d[C]("+"),!0)},ve=function(a,b){a.get(ib)&&(b.add("utmcs",a.get(Qb),!0),b.add("utmsr",a.get(Lb)),a.get(Rb)&&b.add("utmvp",a.get(Rb)),b.add("utmsc",a.get(Mb)),b.add("utmul",a.get(Pb)),b.add("utmje",a.get(Nb)),b.add("utmfl",a.get(Ob),!0))},we=function(a,b){a.get(lb)&&a.get(Ib)&&b.add("utmdt",a.get(Ib),!0);b.add("utmhid",a.get(Kb));b.add("utmr",Pa(a.get(Jb),a.get(P)),!0);b.add("utmp",
G(a.get(Hb),!0),!0)},xe=function(a,b){for(var c=a.get(Db),d=a.get(Eb),e=a.get(Fb)||[],f=0;f<e[w];f++){var Be=e[f];Be&&(c||(c=new yd),c.f(8,f,Be[r]),c.f(9,f,Be[na]),3!=Be[ua]&&c.f(11,f,""+Be[ua]))}F(a.get(wc))||F(a.get(xc),!0)||(c||(c=new yd),c.f(5,1,a.get(wc)),c.f(5,2,a.get(xc)),e=a.get(yc),void 0!=e&&c.f(5,3,e),e=a.get(zc),void 0!=e&&c.o(5,1,e));F(a.get(pf))||(c||(c=new yd),c.f(12,1,a.get(pf)));c?b.add("utme",c.Qa(d),!0):d&&b.add("utme",d.A(),!0)},ye=function(a,b,c){var d=new qe;re(a,c);se(a,d);
d.add("utmt","tran");d.add("utmtid",b.id_,!0);d.add("utmtst",b.affiliation_,!0);d.add("utmtto",b.total_,!0);d.add("utmttx",b.tax_,!0);d.add("utmtsp",b.shipping_,!0);d.add("utmtci",b.city_,!0);d.add("utmtrg",b.state_,!0);d.add("utmtco",b.country_,!0);xe(a,d);ve(a,d);we(a,d);(b=a.get(Gb))&&d.add("utmcu",b,!0);c||(ue(a,d),te(a,d));return d[v]()},ze=function(a,b,c){var d=new qe;re(a,c);se(a,d);d.add("utmt","item");d.add("utmtid",b.transId_,!0);d.add("utmipc",b.sku_,!0);d.add("utmipn",b.name_,!0);d.add("utmiva",
b.category_,!0);d.add("utmipr",b.price_,!0);d.add("utmiqt",b.quantity_,!0);xe(a,d);ve(a,d);we(a,d);(b=a.get(Gb))&&d.add("utmcu",b,!0);c||(ue(a,d),te(a,d));return d[v]()},Ae=function(a,b){var c=a.get(sc);if("page"==c)c=new qe,re(a,b),se(a,c),xe(a,c),ve(a,c),we(a,c),b||(ue(a,c),te(a,c)),c=[c[v]()];else if("event"==c)c=new qe,re(a,b),se(a,c),c.add("utmt","event"),xe(a,c),ve(a,c),we(a,c),b||(ue(a,c),te(a,c)),c=[c[v]()];else if("var"==c)c=new qe,re(a,b),se(a,c),c.add("utmt","var"),!b&&te(a,c),c=[c[v]()];
else if("trans"==c)for(var c=[],d=a.get(Cb),e=0;e<d[w];++e){c[n](ye(a,d[e],b));for(var f=d[e].items_,Be=0;Be<f[w];++Be)c[n](ze(a,f[Be],b))}else"social"==c?b?c=[]:(c=new qe,re(a,b),se(a,c),c.add("utmt","social"),c.add("utmsn",a.get(Ac),!0),c.add("utmsa",a.get(Bc),!0),c.add("utmsid",a.get(Cc),!0),xe(a,c),ve(a,c),we(a,c),ue(a,c),te(a,c),c=[c[v]()]):"feedback"==c?b?c=[]:(c=new qe,re(a,b),se(a,c),c.add("utmt","feedback"),c.add("utmfbid",a.get(Gc),!0),c.add("utmfbpr",a.get(Hc),!0),xe(a,c),ve(a,c),we(a,
c),ue(a,c),te(a,c),c=[c[v]()]):c=[];return c},oe=function(a){var b,c=a.get(xb),d=a.get(uc),e=d&&d.Ua,f=0;if(0==c||2==c){var Be=a.get(wb)+"?";b=Ae(a,!0);for(var k=0,Ja=b[w];k<Ja;k++)Sa(b[k],e,Be,!0),f++}if(1==c||2==c)for(b=Ae(a),a=a.c(Jc,""),k=0,Ja=b[w];k<Ja;k++)try{Sa(b[k],e,a),f++}catch(t){t&&Ra(t[r],void 0,t.message)}d&&(d.q=f)};var Ne=function(){return"https:"==J[z][A]||M.G?"https://ssl.google-analytics.com":"http://www.google-analytics.com"},Ce=function(a){ha(this,"len");this.message=a+"-8192"},De=function(a){ha(this,"ff2post");this.message=a+"-2036"},Sa=function(a,b,c,d){b=b||Fa;if(d||2036>=a[w])gf(a,b,c);else if(8192>=a[w]){if(0<=W[za].userAgent[q]("Firefox")&&![].reduce)throw new De(a[w]);df(a,b)||ef(a,b)||Ee(a,b)||b()}else throw new Ce(a[w]);},gf=function(a,b,c){c=c||Ne()+"/__utm.gif?";var d=new Image(1,1);d.src=c+
a;Ie(d,function(){Ie(d,null);Je(d,null);b()});Je(d,function(){Ie(d,null);Je(d,null);b()})},ef=function(a,b){if(0!=Ne()[q](J[z][A]))return!1;var c;c=W.XDomainRequest;if(!c)return!1;c=new c;c.open("POST",Ne()+"/p/__utm.gif");Je(c,function(){b()});Ie(c,b);c.send(a);return!0},df=function(a,b){var c=W.XMLHttpRequest;if(!c)return!1;var d=new c;if(!("withCredentials"in d))return!1;d.open("POST",Ne()+"/p/__utm.gif",!0);d.withCredentials=!0;d.setRequestHeader("Content-Type","text/plain");d.onreadystatechange=
function(){4==d.readyState&&(b(),d=null)};d.send(a);return!0},Ee=function(a,b){if(!J.body)return We(function(){Ee(a,b)},100),!0;a=aa(a);try{var c=J[qa]('<iframe name="'+a+'"></iframe>')}catch(d){c=J[qa]("iframe"),ha(c,a)}c.height="0";c.width="0";c.style.display="none";c.style.visibility="hidden";var e=Ne()+"/u/post_iframe.html";Ga(W,"beforeunload",function(){c.src="";c.parentNode&&c.parentNode.removeChild(c)});ca(b,1E3);J.body.appendChild(c);c.src=e;return!0};var qf=function(){this.G=this.w=!1;0==Ea()%1E4&&(H(142),this.G=!0);this.C={};this.D=[];this.U=0;this.S=[["www.google-analytics.com","","/plugins/"]];this._gasoCPath=this._gasoDomain=this.bb=void 0;Re();Se()};E=qf[x];E.oa=function(a,b){return this.r(a,void 0,b)};E.r=function(a,b,c){b&&H(23);c&&H(67);void 0==b&&(b="~"+M.U++);a=new U(b,a,c);M.C[b]=a;M.D[n](a);return a};E.u=function(a){a=a||"";return M.C[a]||M.r(void 0,a)};E.pa=function(){return M.D[ja](0)};E.ab=function(){return M.D[w]};
E.aa=function(){this.w=!0};E.la=function(){this.G=!0};var Fe=function(a){if("prerender"==J.visibilityState)return!1;a();return!0};var M=new qf;var Ha=W._gat;Ha&&Ba(Ha._getTracker)?M=Ha:W._gat=M;var Z=new Y;(function(a){if(!Fe(a)){H(123);var b=!1,c=function(){if(!b&&Fe(a)){b=!0;var d=J,e=c;d.removeEventListener?d.removeEventListener("visibilitychange",e,!1):d.detachEvent&&d.detachEvent("onvisibilitychange",e)}};Ga(J,"visibilitychange",c)}})(function(){var a=W._gaq,b=!1;if(a&&Ba(a[n])&&(b="[object Array]"==Object[x][v].call(Object(a)),!b)){Z=a;return}W._gaq=Z;b&&Z[n][ya](Z,a)});function Yc(a){var b=1,c=0,d;if(a)for(b=0,d=a[w]-1;0<=d;d--)c=a.charCodeAt(d),b=(b<<6&268435455)+c+(c<<14),c=b&266338304,b=0!=c?b^c>>21:b;return b};})();
_text/javascriptÕ	'‘_Shttp://connect.facebook.net/ja_JP/sdk.js#xfbml=1&appId=719729204785177&version=v2.0O`bplist00ÔstX$versionX$objectsY$archiverT$top † ¯%#)*0123QRSTUVWXYZ[\]^_`abcdefghilmnU$nullİ	
 !"R$6S$10R$2R$7R$3S$11R$8V$classR$4R$9R$0R$5R$1€	€€€"€$€€#€Ó$%&'(WNS.base[NS.relative€ €€_Shttp://connect.facebook.net/ja_JP/sdk.js#xfbml=1&appId=719729204785177&version=v2.0Ò+,-.Z$classnameX$classesUNSURL¢-/XNSObject#AºôÒ:şƒ ÈÓ456CPWNS.keysZNS.objects¬789:;<=>?@AB€	€
€€€€€€€€€€¬DEFGHIJKLMNO€€€€€€€€€€€€ €!\Content-TypeZX-FB-Debug_Content-Encoding[Content-MD5WExpires_Timing-Allow-Origin]Cache-ControlTDate^Content-LengthZConnectionTEtagTVary_'application/x-javascript; charset=utf-8_XvJv+mc+GVwtim1PRi0s+oBXLA4kaqXlc1qDOJbxeXpPsrqw9e7/5aMO1o1hIZiFLFJuxoXndDm1WI9mKyvCaqw==Tgzip_7nTdJK6a/+vuIQGm0AAsLQ==_Sat, 02 May 2015 09:56:59 GMTQ*_public, max-age=1200_Sat, 02 May 2015 09:36:59 GMTU53238Zkeep-alive_""e869abbf6fde4bad233301e040c896d4"_Accept-EncodingÒ+,jk\NSDictionary¢j/ÿÿÿÿÿÿÿÿ_application/x-javascriptÒ+,op_NSHTTPURLResponse£qr/_NSHTTPURLResponse]NSURLResponse_NSKeyedArchiverÑuv_WebResourceResponse€    # - 2 7 _ e € ƒ ‡ Š   ” —  ¡ ¤ § ª ­ ¯ ± ³ µ · ¸ º ¼ ¾ À Â Ä Æ Í Õ á ã å ç=BMV\_hqsu|„œ ¢¤¦¨ª¬®°²´ÁÃÅÇÉËÍÏÑÓÕ×ÙÛèó0>CR]bg‘ìñ,.Eekv›­²¿ÂËæëÿ%7:P             w              RO ŒX/*1430521434,,JIT Construction: v1717240,ja_JP*/

/**
 * Copyright Facebook Inc.
 *
 * Licensed under the Apache License, Version 2.0
 * http://www.apache.org/licenses/LICENSE-2.0
 */
try {window.FB || (function(window) {
var self = window, document = window.document;
var undefined = void 0;
var setTimeout = window.setTimeout, setInterval = window.setInterval,clearTimeout = window.clearTimeout,clearInterval = window.clearInterval;var __DEV__ = 0;
function emptyFunction() {};
var __transform_includes = {};
var __annotator, __bodyWrapper;
var __w, __t;
(function(){var a=function(e,f){if(!e&&!f)return null;var g={};if(typeof e!=='undefined')g.type=e;if(typeof f!=='undefined')g.signature=f;return g;},b=function(e,f){return a(e&&/^[A-Z]/.test(e)?e:(void 0),f&&((f.params&&f.params.length)||f.returns)?'function('+(f.params?f.params.map(function(g){return (/\?/).test(g)?'?'+g.replace('?',''):g;}).join(','):'')+')'+(f.returns?':'+f.returns:''):(void 0));},c=function(e,f,g){if(typeof __transform_includes==='undefined')return e;if('sourcemeta' in __transform_includes)e.__SMmeta=f;if('typechecks' in __transform_includes){var h=b(f?f.name:(void 0),g);if(h)__w(e,h);}return e;},d=function(e,f,g,h){if(typeof __transform_includes==='undefined')return g.apply(e,f);var i='typechecks' in __transform_includes;if(i&&h&&h.params)__t.apply(e,h.params);var j=g.apply(e,f);if(i&&h&&h.returns)__t([j,h.returns]);return j;};__annotator=c;__bodyWrapper=d;})();
__t=function(a){return a[0];};__w=function(a){return a;};
var require,__d;(function(a){var b={},c={},d=['global','require','requireDynamic','requireLazy','module','exports'];require=function(e,f){if(c.hasOwnProperty(e))return c[e];if(!b.hasOwnProperty(e)){if(f)return null;throw new Error('Module '+e+' has not been defined');}var g=b[e],h=g.deps,i=g.factory.length,j,k=[];for(var l=0;l<i;l++){switch(h[l]){case 'module':j=g;break;case 'exports':j=g.exports;break;case 'global':j=a;break;case 'require':j=require;break;case 'requireDynamic':j=require;break;case 'requireLazy':j=null;break;default:j=require.call(null,h[l]);}k.push(j);}g.factory.apply(a,k);c[e]=g.exports;return g.exports;};require.__markCompiled=function(){};__d=function(e,f,g,h){if(typeof g=='function'){b[e]={factory:g,deps:d.concat(f),exports:{}};if(h===3)require.call(null,e);}else c[e]=g;};})(this);
__d("ES5ArrayPrototype",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={};g.map=function(h,i){if(typeof h!='function')throw new TypeError();var j,k=this.length,l=new Array(k);for(j=0;j<k;++j)if(j in this)l[j]=h.call(i,this[j],j,this);return l;};g.forEach=function(h,i){g.map.call(this,h,i);};g.filter=function(h,i){if(typeof h!='function')throw new TypeError();var j,k,l=this.length,m=[];for(j=0;j<l;++j)if(j in this){k=this[j];if(h.call(i,k,j,this))m.push(k);}return m;};g.every=function(h,i){if(typeof h!='function')throw new TypeError();var j=new Object(this),k=j.length;for(var l=0;l<k;l++)if(l in j)if(!h.call(i,j[l],l,j))return false;return true;};g.some=function(h,i){if(typeof h!='function')throw new TypeError();var j=new Object(this),k=j.length;for(var l=0;l<k;l++)if(l in j)if(h.call(i,j[l],l,j))return true;return false;};g.indexOf=function(h,i){var j=this.length;i|=0;if(i<0)i+=j;for(;i<j;i++)if(i in this&&this[i]===h)return i;return -1;};e.exports=g;},null);
__d("ES5FunctionPrototype",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={};g.bind=function(h){if(typeof this!='function')throw new TypeError('Bind must be called on a function');var i=this,j=Array.prototype.slice.call(arguments,1);function k(){return i.apply(h,j.concat(Array.prototype.slice.call(arguments)));}k.displayName='bound:'+(i.displayName||i.name||'(?)');k.toString=function l(){return 'bound: '+i;};return k;};e.exports=g;},null);
__d("ES5StringPrototype",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={};g.trim=function(){if(this==null)throw new TypeError('String.prototype.trim called on null or undefined');return String.prototype.replace.call(this,/^\s+|\s+$/g,'');};g.startsWith=function(h){var i=String(this);if(this==null)throw new TypeError('String.prototype.startsWith called on null or undefined');var j=arguments.length>1?Number(arguments[1]):0;if(isNaN(j))j=0;var k=Math.min(Math.max(j,0),i.length);return i.indexOf(String(h),j)==k;};g.endsWith=function(h){var i=String(this);if(this==null)throw new TypeError('String.prototype.endsWith called on null or undefined');var j=i.length,k=String(h),l=arguments.length>1?Number(arguments[1]):j;if(isNaN(l))l=0;var m=Math.min(Math.max(l,0),j),n=m-k.length;if(n<0)return false;return i.lastIndexOf(k,n)==n;};g.contains=function(h){if(this==null)throw new TypeError('String.prototype.contains called on null or undefined');var i=String(this),j=arguments.length>1?Number(arguments[1]):0;if(isNaN(j))j=0;return i.indexOf(String(h),j)!=-1;};g.repeat=function(h){if(this==null)throw new TypeError('String.prototype.repeat called on null or undefined');var i=String(this),j=h?Number(h):0;if(isNaN(j))j=0;if(j<0||j===Infinity)throw RangeError();if(j===1)return i;if(j===0)return '';var k='';while(j){if(j&1)k+=i;if((j>>=1))i+=i;}return k;};e.exports=g;},null);
__d("ES5Array",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={};g.isArray=function(h){return Object.prototype.toString.call(h)=='[object Array]';};e.exports=g;},null);
__d("ie8DontEnum",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g=['toString','toLocaleString','valueOf','hasOwnProperty','isPrototypeOf','prototypeIsEnumerable','constructor'],h=({}).hasOwnProperty,i=function(){};if(({toString:true}).propertyIsEnumerable('toString'))i=function(j,k){for(var l=0;l<g.length;l++){var m=g[l];if(h.call(j,m))k(m);}};e.exports=i;},null);
__d("ES5Object",["ie8DontEnum"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=({}).hasOwnProperty,i={};function j(){}i.create=function(k){var l=typeof k;if(l!='object'&&l!='function')throw new TypeError('Object prototype may only be a Object or null');j.prototype=k;return new j();};i.keys=function(k){var l=typeof k;if(l!='object'&&l!='function'||k===null)throw new TypeError('Object.keys called on non-object');var m=[];for(var n in k)if(h.call(k,n))m.push(n);g(k,function(o){return m.push(o);});return m;};e.exports=i;},null);
__d("ES5Date",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={};g.now=function(){return new Date().getTime();};e.exports=g;},null);
/**
 * @providesModule JSON3
 * @preserve-header
 *
 *! JSON v3.2.3 | http://bestiejs.github.com/json3 | Copyright 2012, Kit Cambridge | http://kit.mit-license.org
 */__d("JSON3",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();(function(){var g={}.toString,h,i,j,k=e.exports={},l='{"A":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}',m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba=new Date(-3509827334573292),ca,da,ea;try{ba=ba.getUTCFullYear()==-109252&&ba.getUTCMonth()===0&&ba.getUTCDate()==1&&ba.getUTCHours()==10&&ba.getUTCMinutes()==37&&ba.getUTCSeconds()==6&&ba.getUTCMilliseconds()==708;}catch(fa){}if(!ba){ca=Math.floor;da=[0,31,59,90,120,151,181,212,243,273,304,334];ea=function(ga,ha){return da[ha]+365*(ga-1970)+ca((ga-1969+(ha=+(ha>1)))/4)-ca((ga-1901+ha)/100)+ca((ga-1601+ha)/400);};}if(typeof JSON=="object"&&JSON){k.stringify=JSON.stringify;k.parse=JSON.parse;}if((m=typeof k.stringify=="function"&&!ea)){(ba=function(){return 1;}).toJSON=ba;try{m=k.stringify(0)==="0"&&k.stringify(new Number())==="0"&&k.stringify(new String())=='""'&&k.stringify(g)===j&&k.stringify(j)===j&&k.stringify()===j&&k.stringify(ba)==="1"&&k.stringify([ba])=="[1]"&&k.stringify([j])=="[null]"&&k.stringify(null)=="null"&&k.stringify([j,g,null])=="[null,null,null]"&&k.stringify({result:[ba,true,false,null,"\0\b\n\f\r\t"]})==l&&k.stringify(null,ba)==="1"&&k.stringify([1,2],null,1)=="[\n 1,\n 2\n]"&&k.stringify(new Date(-8.64e+15))=='"-271821-04-20T00:00:00.000Z"'&&k.stringify(new Date(8.64e+15))=='"+275760-09-13T00:00:00.000Z"'&&k.stringify(new Date(-62198755200000))=='"-000001-01-01T00:00:00.000Z"'&&k.stringify(new Date(-1))=='"1969-12-31T23:59:59.999Z"';}catch(fa){m=false;}}if(typeof k.parse=="function")try{if(k.parse("0")===0&&!k.parse(false)){ba=k.parse(l);if((r=ba.A.length==5&&ba.A[0]==1)){try{r=!k.parse('"\t"');}catch(fa){}if(r)try{r=k.parse("01")!=1;}catch(fa){}}}}catch(fa){r=false;}ba=l=null;if(!m||!r){if(!(h={}.hasOwnProperty))h=function(ga){var ha={},ia;if((ha.__proto__=null,ha.__proto__={toString:1},ha).toString!=g){h=function(ja){var ka=this.__proto__,la=ja in (this.__proto__=null,this);this.__proto__=ka;return la;};}else{ia=ha.constructor;h=function(ja){var ka=(this.constructor||ia).prototype;return ja in this&&!(ja in ka&&this[ja]===ka[ja]);};}ha=null;return h.call(this,ga);};i=function(ga,ha){var ia=0,ja,ka,la,ma;(ja=function(){this.valueOf=0;}).prototype.valueOf=0;ka=new ja();for(la in ka)if(h.call(ka,la))ia++;ja=ka=null;if(!ia){ka=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"];ma=function(na,oa){var pa=g.call(na)=="[object Function]",qa,ra;for(qa in na)if(!(pa&&qa=="prototype")&&h.call(na,qa))oa(qa);for(ra=ka.length;qa=ka[--ra];h.call(na,qa)&&oa(qa));};}else if(ia==2){ma=function(na,oa){var pa={},qa=g.call(na)=="[object Function]",ra;for(ra in na)if(!(qa&&ra=="prototype")&&!h.call(pa,ra)&&(pa[ra]=1)&&h.call(na,ra))oa(ra);};}else ma=function(na,oa){var pa=g.call(na)=="[object Function]",qa,ra;for(qa in na)if(!(pa&&qa=="prototype")&&h.call(na,qa)&&!(ra=qa==="constructor"))oa(qa);if(ra||h.call(na,(qa="constructor")))oa(qa);};return ma(ga,ha);};if(!m){n={"\\":"\\\\",'"':'\\"',"\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"};o=function(ga,ha){return ("000000"+(ha||0)).slice(-ga);};p=function(ga){var ha='"',ia=0,ja;for(;ja=ga.charAt(ia);ia++)ha+='\\"\b\f\n\r\t'.indexOf(ja)>-1?n[ja]:ja<" "?"\\u00"+o(2,ja.charCodeAt(0).toString(16)):ja;return ha+'"';};q=function(ga,ha,ia,ja,ka,la,ma){var na=ha[ga],oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za,ab,bb,cb;if(typeof na=="object"&&na){oa=g.call(na);if(oa=="[object Date]"&&!h.call(na,"toJSON")){if(na>-1/0&&na<1/0){if(ea){ra=ca(na/86400000);for(pa=ca(ra/365.2425)+1970-1;ea(pa+1,0)<=ra;pa++);for(qa=ca((ra-ea(pa,0))/30.42);ea(pa,qa+1)<=ra;qa++);ra=1+ra-ea(pa,qa);sa=(na%86400000+86400000)%86400000;ta=ca(sa/3600000)%24;ua=ca(sa/60000)%60;va=ca(sa/1000)%60;wa=sa%1000;}else{pa=na.getUTCFullYear();qa=na.getUTCMonth();ra=na.getUTCDate();ta=na.getUTCHours();ua=na.getUTCMinutes();va=na.getUTCSeconds();wa=na.getUTCMilliseconds();}na=(pa<=0||pa>=10000?(pa<0?"-":"+")+o(6,pa<0?-pa:pa):o(4,pa))+"-"+o(2,qa+1)+"-"+o(2,ra)+"T"+o(2,ta)+":"+o(2,ua)+":"+o(2,va)+"."+o(3,wa)+"Z";}else na=null;}else if(typeof na.toJSON=="function"&&((oa!="[object Number]"&&oa!="[object String]"&&oa!="[object Array]")||h.call(na,"toJSON")))na=na.toJSON(ga);}if(ia)na=ia.call(ha,ga,na);if(na===null)return "null";oa=g.call(na);if(oa=="[object Boolean]"){return ""+na;}else if(oa=="[object Number]"){return na>-1/0&&na<1/0?""+na:"null";}else if(oa=="[object String]")return p(na);if(typeof na=="object"){for(ab=ma.length;ab--;)if(ma[ab]===na)throw TypeError();ma.push(na);xa=[];bb=la;la+=ka;if(oa=="[object Array]"){for(za=0,ab=na.length;za<ab;cb||(cb=true),za++){ya=q(za,na,ia,ja,ka,la,ma);xa.push(ya===j?"null":ya);}return cb?(ka?"[\n"+la+xa.join(",\n"+la)+"\n"+bb+"]":("["+xa.join(",")+"]")):"[]";}else{i(ja||na,function(db){var eb=q(db,na,ia,ja,ka,la,ma);if(eb!==j)xa.push(p(db)+":"+(ka?" ":"")+eb);cb||(cb=true);});return cb?(ka?"{\n"+la+xa.join(",\n"+la)+"\n"+bb+"}":("{"+xa.join(",")+"}")):"{}";}ma.pop();}};k.stringify=function(ga,ha,ia){var ja,ka,la,ma,na,oa;if(typeof ha=="function"||typeof ha=="object"&&ha)if(g.call(ha)=="[object Function]"){ka=ha;}else if(g.call(ha)=="[object Array]"){la={};for(ma=0,na=ha.length;ma<na;oa=ha[ma++],((g.call(oa)=="[object String]"||g.call(oa)=="[object Number]")&&(la[oa]=1)));}if(ia)if(g.call(ia)=="[object Number]"){if((ia-=ia%1)>0)for(ja="",ia>10&&(ia=10);ja.length<ia;ja+=" ");}else if(g.call(ia)=="[object String]")ja=ia.length<=10?ia:ia.slice(0,10);return q("",(oa={},oa[""]=ga,oa),ka,la,ja,"",[]);};}if(!r){s=String.fromCharCode;t={"\\":"\\",'"':'"',"/":"/",b:"\b",t:"\t",n:"\n",f:"\f",r:"\r"};u=function(){z=aa=null;throw SyntaxError();};v=function(){var ga=aa,ha=ga.length,ia,ja,ka,la,ma;while(z<ha){ia=ga.charAt(z);if("\t\r\n ".indexOf(ia)>-1){z++;}else if("{}[]:,".indexOf(ia)>-1){z++;return ia;}else if(ia=='"'){for(ja="@",z++;z<ha;){ia=ga.charAt(z);if(ia<" "){u();}else if(ia=="\\"){ia=ga.charAt(++z);if('\\"/btnfr'.indexOf(ia)>-1){ja+=t[ia];z++;}else if(ia=="u"){ka=++z;for(la=z+4;z<la;z++){ia=ga.charAt(z);if(!(ia>="0"&&ia<="9"||ia>="a"&&ia<="f"||ia>="A"&&ia<="F"))u();}ja+=s("0x"+ga.slice(ka,z));}else u();}else{if(ia=='"')break;ja+=ia;z++;}}if(ga.charAt(z)=='"'){z++;return ja;}u();}else{ka=z;if(ia=="-"){ma=true;ia=ga.charAt(++z);}if(ia>="0"&&ia<="9"){if(ia=="0"&&(ia=ga.charAt(z+1),ia>="0"&&ia<="9"))u();ma=false;for(;z<ha&&(ia=ga.charAt(z),ia>="0"&&ia<="9");z++);if(ga.charAt(z)=="."){la=++z;for(;la<ha&&(ia=ga.charAt(la),ia>="0"&&ia<="9");la++);if(la==z)u();z=la;}ia=ga.charAt(z);if(ia=="e"||ia=="E"){ia=ga.charAt(++z);if(ia=="+"||ia=="-")z++;for(la=z;la<ha&&(ia=ga.charAt(la),ia>="0"&&ia<="9");la++);if(la==z)u();z=la;}return +ga.slice(ka,z);}if(ma)u();if(ga.slice(z,z+4)=="true"){z+=4;return true;}else if(ga.slice(z,z+5)=="false"){z+=5;return false;}else if(ga.slice(z,z+4)=="null"){z+=4;return null;}u();}}return "$";};w=function(ga){var ha,ia,ja;if(ga=="$")u();if(typeof ga=="string"){if(ga.charAt(0)=="@")return ga.slice(1);if(ga=="["){ha=[];for(;;ia||(ia=true)){ga=v();if(ga=="]")break;if(ia)if(ga==","){ga=v();if(ga=="]")u();}else u();if(ga==",")u();ha.push(w(ga));}return ha;}else if(ga=="{"){ha={};for(;;ia||(ia=true)){ga=v();if(ga=="}")break;if(ia)if(ga==","){ga=v();if(ga=="}")u();}else u();if(ga==","||typeof ga!="string"||ga.charAt(0)!="@"||v()!=":")u();ha[ga.slice(1)]=w(v());}return ha;}u();}return ga;};y=function(ga,ha,ia){var ja=x(ga,ha,ia);if(ja===j){delete ga[ha];}else ga[ha]=ja;};x=function(ga,ha,ia){var ja=ga[ha],ka;if(typeof ja=="object"&&ja)if(g.call(ja)=="[object Array]"){for(ka=ja.length;ka--;)y(ja,ka,ia);}else i(ja,function(la){y(ja,la,ia);});return ia.call(ga,ha,ja);};k.parse=function(ga,ha){z=0;aa=ga;var ia=w(v());if(v()!="$")u();z=aa=null;return ha&&g.call(ha)=="[object Function]"?x((ba={},ba[""]=ia,ba),"",ha):ia;};}}}).call(this);},null);
__d("ES6Object",["ie8DontEnum"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=({}).hasOwnProperty,i={assign:function(j){for(var k=[],l=1,m=arguments.length;l<m;l++)k.push(arguments[l]);if(j==null)throw new TypeError('Object.assign target cannot be null or undefined');j=Object(j);for(var n=0;n<k.length;n++){var o=k[n];if(o==null)continue;o=Object(o);for(var p in o)if(h.call(o,p))j[p]=o[p];g(o,function(q){return j[q]=o[q];});}return j;}};e.exports=i;},null);
__d("ES6ArrayPrototype",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={find:function(h,i){if(this==null)throw new TypeError('Array.prototype.find called on null or undefined');if(typeof h!=='function')throw new TypeError('predicate must be a function');var j=g.findIndex.call(this,h,i);return j===-1?void 0:this[j];},findIndex:function(h,i){if(this==null)throw new TypeError('Array.prototype.findIndex called on null or undefined');if(typeof h!=='function')throw new TypeError('predicate must be a function');var j=Object(this),k=j.length>>>0;for(var l=0;l<k;l++)if(h.call(i,j[l],l,j))return l;return -1;}};e.exports=g;},null);
__d("ES6DatePrototype",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(i){return (i<10?'0':'')+i;}var h={toISOString:function(){if(!isFinite(this))throw new Error('Invalid time value');var i=this.getUTCFullYear();i=(i<0?'-':(i>9999?'+':''))+('00000'+Math.abs(i)).slice(0<=i&&i<=9999?-4:-6);return i+'-'+g(this.getUTCMonth()+1)+'-'+g(this.getUTCDate())+'T'+g(this.getUTCHours())+':'+g(this.getUTCMinutes())+':'+g(this.getUTCSeconds())+'.'+(this.getUTCMilliseconds()/1000).toFixed(3).slice(2,5)+'Z';}};e.exports=h;},null);
__d("ES6Number",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={isFinite:function(h){return (typeof h=='number')&&isFinite(h);},isNaN:function(h){return (typeof h=='number')&&isNaN(h);}};e.exports=g;},null);
__d("ES",["ES5ArrayPrototype","ES5FunctionPrototype","ES5StringPrototype","ES5Array","ES5Object","ES5Date","JSON3","ES6Object","ES6ArrayPrototype","ES6DatePrototype","ES6Number"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){b.__markCompiled&&b.__markCompiled();var r=({}).toString,s={'JSON.stringify':m.stringify,'JSON.parse':m.parse},t={'Array.prototype':g,'Function.prototype':h,'String.prototype':i,Object:k,Array:j,Date:l},u={Object:n,'Array.prototype':o,'Date.prototype':p,Number:q};function v(x){for(var y in x){if(!x.hasOwnProperty(y))continue;var z=x[y],aa=y.split('.'),ba=aa.length==2?window[aa[0]][aa[1]]:window[y];for(var ca in z){if(!z.hasOwnProperty(ca))continue;var da=ba[ca];s[y+'.'+ca]=da&&/\{\s+\[native code\]\s\}/.test(da)?da:z[ca];}}}v(t);v(u);function w(x,y,z){for(var aa=[],ba=3,ca=arguments.length;ba<ca;ba++)aa.push(arguments[ba]);var da=z?r.call(x).slice(8,-1)+'.prototype':x,ea=s[da+'.'+y]||x[y];if(typeof ea==='function')return ea.apply(x,aa);}e.exports=w;},null);
var ES = require('ES');
__d("JSSDKRuntimeConfig",[],{"locale":"ja_JP","rtl":false,"revision":"1717240"});__d("JSSDKConfig",[],{"bustCache":true,"tagCountLogRate":0.01,"errorHandling":{"rate":4},"usePluginPipe":true,"features":{"allow_non_canvas_app_events":false,"event_subscriptions_log":{"rate":0.01,"value":10000},"should_force_single_dialog_instance":true,"kill_fragment":true,"xfbml_profile_pic_server":true,"error_handling":{"rate":4},"e2e_ping_tracking":{"rate":1.0e-6},"xd_timeout":{"rate":4,"value":30000},"use_bundle":true,"launch_payment_dialog_via_pac":{"rate":100},"plugin_tags_blacklist":["recommendations_bar"],"should_log_response_error":true},"api":{"mode":"warn","whitelist":["AppEvents","AppEvents.EventNames","AppEvents.ParameterNames","AppEvents.activateApp","AppEvents.logEvent","AppEvents.logPurchase","Canvas","Canvas.Prefetcher","Canvas.Prefetcher.addStaticResource","Canvas.Prefetcher.setCollectionMode","Canvas.getPageInfo","Canvas.hideFlashElement","Canvas.scrollTo","Canvas.setAutoGrow","Canvas.setDoneLoading","Canvas.setSize","Canvas.setUrlHandler","Canvas.showFlashElement","Canvas.startTimer","Canvas.stopTimer","Event","Event.subscribe","Event.unsubscribe","Music.flashCallback","Music.init","Music.send","Payment","Payment.cancelFlow","Payment.continueFlow","Payment.init","Payment.lockForProcessing","Payment.parse","Payment.setSize","Payment.unlockForProcessing","ThirdPartyProvider","ThirdPartyProvider.init","ThirdPartyProvider.sendData","UA","UA.nativeApp","XFBML","XFBML.RecommendationsBar","XFBML.RecommendationsBar.markRead","XFBML.parse","addFriend","api","getAccessToken","getAuthResponse","getLoginStatus","getUserID","init","login","logout","publish","share","ui"]},"initSitevars":{"enableMobileComments":1,"iframePermissions":{"read_stream":false,"manage_mailbox":false,"manage_friendlists":false,"read_mailbox":false,"publish_checkins":true,"status_update":true,"photo_upload":true,"video_upload":true,"sms":false,"create_event":true,"rsvp_event":true,"offline_access":true,"email":true,"xmpp_login":false,"create_note":true,"share_item":true,"export_stream":false,"publish_stream":true,"publish_likes":true,"ads_management":false,"contact_email":true,"access_private_data":false,"read_insights":false,"read_requests":false,"read_friendlists":true,"manage_pages":false,"physical_login":false,"manage_groups":false,"read_deals":false}}});__d("UrlMapConfig",[],{"www":"www.facebook.com","m":"m.facebook.com","connect":"connect.facebook.net","business":"business.facebook.com","api_https":"api.facebook.com","api_read_https":"api-read.facebook.com","graph_https":"graph.facebook.com","fbcdn_http":"static.ak.fbcdn.net","fbcdn_https":"fbstatic-a.akamaihd.net","cdn_http":"static.ak.facebook.com","cdn_https":"s-static.ak.facebook.com"});__d("JSSDKXDConfig",[],{"XdUrl":"\/connect\/xd_arbiter.php?version=41","XdBundleUrl":"\/connect\/xd_arbiter\/6p3So0GhyQP.js?version=41","Flash":{"path":"https:\/\/connect.facebook.net\/rsrc.php\/v1\/yW\/r\/yOZN1vHw3Z_.swf"},"useCdn":true});__d("JSSDKCssConfig",[],{"rules":".fb_hidden{position:absolute;top:-10000px;z-index:10001}.fb_invisible{display:none}.fb_reset{background:none;border:0;border-spacing:0;color:#000;cursor:auto;direction:ltr;font-family:\"lucida grande\", tahoma, verdana, arial, \"hiragino kaku gothic pro\",meiryo,\"ms pgothic\",sans-serif;font-size:11px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:1;margin:0;overflow:visible;padding:0;text-align:left;text-decoration:none;text-indent:0;text-shadow:none;text-transform:none;visibility:visible;white-space:normal;word-spacing:normal}.fb_reset>div{overflow:hidden}.fb_link img{border:none}\n.fb_dialog{background:rgba(82, 82, 82, .7);position:absolute;top:-10000px;z-index:10001}.fb_reset .fb_dialog_legacy{overflow:visible}.fb_dialog_advanced{padding:10px;-moz-border-radius:8px;-webkit-border-radius:8px;border-radius:8px}.fb_dialog_content{background:#fff;color:#333}.fb_dialog_close_icon{background:url(http:\/\/static.ak.fbcdn.net\/rsrc.php\/v2\/yq\/r\/IE9JII6Z1Ys.png) no-repeat scroll 0 0 transparent;_background-image:url(http:\/\/static.ak.fbcdn.net\/rsrc.php\/v2\/yL\/r\/s816eWC-2sl.gif);cursor:pointer;display:block;height:15px;position:absolute;right:18px;top:17px;width:15px}.fb_dialog_mobile .fb_dialog_close_icon{top:5px;left:5px;right:auto}.fb_dialog_padding{background-color:transparent;position:absolute;width:1px;z-index:-1}.fb_dialog_close_icon:hover{background:url(http:\/\/static.ak.fbcdn.net\/rsrc.php\/v2\/yq\/r\/IE9JII6Z1Ys.png) no-repeat scroll 0 -15px transparent;_background-image:url(http:\/\/static.ak.fbcdn.net\/rsrc.php\/v2\/yL\/r\/s816eWC-2sl.gif)}.fb_dialog_close_icon:active{background:url(http:\/\/static.ak.fbcdn.net\/rsrc.php\/v2\/yq\/r\/IE9JII6Z1Ys.png) no-repeat scroll 0 -30px transparent;_background-image:url(http:\/\/static.ak.fbcdn.net\/rsrc.php\/v2\/yL\/r\/s816eWC-2sl.gif)}.fb_dialog_loader{background-color:#f6f7f8;border:1px solid #606060;font-size:24px;padding:20px}.fb_dialog_top_left,.fb_dialog_top_right,.fb_dialog_bottom_left,.fb_dialog_bottom_right{height:10px;width:10px;overflow:hidden;position:absolute}.fb_dialog_top_left{background:url(http:\/\/static.ak.fbcdn.net\/rsrc.php\/v2\/ye\/r\/8YeTNIlTZjm.png) no-repeat 0 0;left:-10px;top:-10px}.fb_dialog_top_right{background:url(http:\/\/static.ak.fbcdn.net\/rsrc.php\/v2\/ye\/r\/8YeTNIlTZjm.png) no-repeat 0 -10px;right:-10px;top:-10px}.fb_dialog_bottom_left{background:url(http:\/\/static.ak.fbcdn.net\/rsrc.php\/v2\/ye\/r\/8YeTNIlTZjm.png) no-repeat 0 -20px;bottom:-10px;left:-10px}.fb_dialog_bottom_right{background:url(http:\/\/static.ak.fbcdn.net\/rsrc.php\/v2\/ye\/r\/8YeTNIlTZjm.png) no-repeat 0 -30px;right:-10px;bottom:-10px}.fb_dialog_vert_left,.fb_dialog_vert_right,.fb_dialog_horiz_top,.fb_dialog_horiz_bottom{position:absolute;background:#525252;filter:alpha(opacity=70);opacity:.7}.fb_dialog_vert_left,.fb_dialog_vert_right{width:10px;height:100\u0025}.fb_dialog_vert_left{margin-left:-10px}.fb_dialog_vert_right{right:0;margin-right:-10px}.fb_dialog_horiz_top,.fb_dialog_horiz_bottom{width:100\u0025;height:10px}.fb_dialog_horiz_top{margin-top:-10px}.fb_dialog_horiz_bottom{bottom:0;margin-bottom:-10px}.fb_dialog_iframe{line-height:0}.fb_dialog_content .dialog_title{background:#6d84b4;border:1px solid #3a5795;color:#fff;font-size:14px;font-weight:bold;margin:0}.fb_dialog_content .dialog_title>span{background:url(http:\/\/static.ak.fbcdn.net\/rsrc.php\/v2\/yd\/r\/Cou7n-nqK52.gif) no-repeat 5px 50\u0025;float:left;padding:5px 0 7px 26px}body.fb_hidden{-webkit-transform:none;height:100\u0025;margin:0;overflow:visible;position:absolute;top:-10000px;left:0;width:100\u0025}.fb_dialog.fb_dialog_mobile.loading{background:url(http:\/\/static.ak.fbcdn.net\/rsrc.php\/v2\/ya\/r\/3rhSv5V8j3o.gif) white no-repeat 50\u0025 50\u0025;min-height:100\u0025;min-width:100\u0025;overflow:hidden;position:absolute;top:0;z-index:10001}.fb_dialog.fb_dialog_mobile.loading.centered{max-height:590px;min-height:590px;max-width:500px;min-width:500px}#fb-root #fb_dialog_ipad_overlay{background:rgba(0, 0, 0, .45);position:absolute;left:0;top:0;width:100\u0025;min-height:100\u0025;z-index:10000}#fb-root #fb_dialog_ipad_overlay.hidden{display:none}.fb_dialog.fb_dialog_mobile.loading iframe{visibility:hidden}.fb_dialog_content .dialog_header{-webkit-box-shadow:white 0 1px 1px -1px inset;background:-webkit-gradient(linear, 0\u0025 0\u0025, 0\u0025 100\u0025, from(#738ABA), to(#2C4987));border-bottom:1px solid;border-color:#1d4088;color:#fff;font:14px Helvetica, sans-serif;font-weight:bold;text-overflow:ellipsis;text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0;vertical-align:middle;white-space:nowrap}.fb_dialog_content .dialog_header table{-webkit-font-smoothing:subpixel-antialiased;height:43px;width:100\u0025}.fb_dialog_content .dialog_header td.header_left{font-size:12px;padding-left:5px;vertical-align:middle;width:60px}.fb_dialog_content .dialog_header td.header_right{font-size:12px;padding-right:5px;vertical-align:middle;width:60px}.fb_dialog_content .touchable_button{background:-webkit-gradient(linear, 0\u0025 0\u0025, 0\u0025 100\u0025, from(#4966A6), color-stop(.5, #355492), to(#2A4887));border:1px solid #2f477a;-webkit-background-clip:padding-box;-webkit-border-radius:3px;-webkit-box-shadow:rgba(0, 0, 0, .117188) 0 1px 1px inset, rgba(255, 255, 255, .167969) 0 1px 0;display:inline-block;margin-top:3px;max-width:85px;line-height:18px;padding:4px 12px;position:relative}.fb_dialog_content .dialog_header .touchable_button input{border:none;background:none;color:#fff;font:12px Helvetica, sans-serif;font-weight:bold;margin:2px -12px;padding:2px 6px 3px 6px;text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0}.fb_dialog_content .dialog_header .header_center{color:#fff;font-size:16px;font-weight:bold;line-height:18px;text-align:center;vertical-align:middle}.fb_dialog_content .dialog_content{background:url(http:\/\/static.ak.fbcdn.net\/rsrc.php\/v2\/y9\/r\/jKEcVPZFk-2.gif) no-repeat 50\u0025 50\u0025;border:1px solid #555;border-bottom:0;border-top:0;height:150px}.fb_dialog_content .dialog_footer{background:#f6f7f8;border:1px solid #555;border-top-color:#ccc;height:40px}#fb_dialog_loader_close{float:left}.fb_dialog.fb_dialog_mobile .fb_dialog_close_button{text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0}.fb_dialog.fb_dialog_mobile .fb_dialog_close_icon{visibility:hidden}\n.fb_iframe_widget{display:inline-block;position:relative}.fb_iframe_widget span{display:inline-block;position:relative;text-align:justify}.fb_iframe_widget iframe{position:absolute}.fb_iframe_widget_fluid_desktop,.fb_iframe_widget_fluid_desktop span,.fb_iframe_widget_fluid_desktop iframe{max-width:100\u0025}.fb_iframe_widget_fluid_desktop iframe{min-width:220px;position:relative}.fb_iframe_widget_lift{z-index:1}.fb_hide_iframes iframe{position:relative;left:-10000px}.fb_iframe_widget_loader{position:relative;display:inline-block}.fb_iframe_widget_fluid{display:inline}.fb_iframe_widget_fluid span{width:100\u0025}.fb_iframe_widget_loader iframe{min-height:32px;z-index:2;zoom:1}.fb_iframe_widget_loader .FB_Loader{background:url(http:\/\/static.ak.fbcdn.net\/rsrc.php\/v2\/y9\/r\/jKEcVPZFk-2.gif) no-repeat;height:32px;width:32px;margin-left:-16px;position:absolute;left:50\u0025;z-index:4}","components":["css:fb.css.base","css:fb.css.dialog","css:fb.css.iframewidget"]});__d("ApiClientConfig",[],{"FlashRequest":{"swfUrl":"https:\/\/connect.facebook.net\/rsrc.php\/v1\/yd\/r\/mxzow1Sdmxr.swf"}});__d("JSSDKCanvasPrefetcherConfig",[],{"blacklist":[144959615576466],"sampleRate":500});__d("JSSDKPluginPipeConfig",[],{"threshold":0,"enabledApps":{"209753825810663":1,"187288694643718":1}});
__d("QueryString",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(k){var l=[];ES(ES('Object','keys',false,k).sort(),'forEach',true,function(m){var n=k[m];if(typeof n==='undefined')return;if(n===null){l.push(m);return;}l.push(encodeURIComponent(m)+'='+encodeURIComponent(n));});return l.join('&');}function h(k,l){var m={};if(k==='')return m;var n=k.split('&');for(var o=0;o<n.length;o++){var p=n[o].split('=',2),q=decodeURIComponent(p[0]);if(l&&m.hasOwnProperty(q))throw new URIError('Duplicate key: '+q);m[q]=p.length===2?decodeURIComponent(p[1]):null;}return m;}function i(k,l){return k+(~ES(k,'indexOf',true,'?')?'&':'?')+(typeof l==='string'?l:j.encode(l));}var j={encode:g,decode:h,appendToUrl:i};e.exports=j;},null);
__d("ManagedError",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h,i){Error.prototype.constructor.call(this,h);this.message=h;this.innerError=i;}g.prototype=new Error();g.prototype.constructor=g;e.exports=g;},null);
__d("AssertionError",["ManagedError"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(i){g.prototype.constructor.apply(this,arguments);}h.prototype=new g();h.prototype.constructor=h;e.exports=h;},null);
__d("sprintf",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h){for(var i=[],j=1,k=arguments.length;j<k;j++)i.push(arguments[j]);var l=0;return h.replace(/%s/g,function(m){return i[l++];});}e.exports=g;},null);
__d("Assert",["AssertionError","sprintf"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();function i(n,o){if(typeof n!=='boolean'||!n)throw new g(o);return n;}function j(n,o,p){var q;if(o===(void 0)){q='undefined';}else if(o===null){q='null';}else{var r=Object.prototype.toString.call(o);q=/\s(\w*)/.exec(r)[1].toLowerCase();}i(ES(n,'indexOf',true,q)!==-1,p||h('Expression is of type %s, not %s',q,n));return o;}function k(n,o,p){i(o instanceof n,p||'Expression not instance of type');return o;}function l(n,o){m['is'+n]=o;m['maybe'+n]=function(p,q){if(p!=null)o(p,q);};}var m={isInstanceOf:k,isTrue:i,isTruthy:function(n,o){return i(!!n,o);},type:j,define:function(n,o){n=n.substring(0,1).toUpperCase()+n.substring(1).toLowerCase();l(n,function(p,q){i(o(p),q);});}};ES(['Array','Boolean','Date','Function','Null','Number','Object','Regexp','String','Undefined'],'forEach',true,function(n){l(n,ES(j,'bind',true,null,n.toLowerCase()));});e.exports=m;},null);
__d("Type",["Assert"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(){var l=this.__mixins;if(l)for(var m=0;m<l.length;m++)l[m].apply(this,arguments);}function i(l,m){if(m instanceof l)return true;if(m instanceof h)for(var n=0;n<m.__mixins.length;n++)if(m.__mixins[n]==l)return true;return false;}function j(l,m){var n=l.prototype;if(!ES('Array','isArray',false,m))m=[m];for(var o=0;o<m.length;o++){var p=m[o];if(typeof p=='function'){n.__mixins.push(p);p=p.prototype;}ES(ES('Object','keys',false,p),'forEach',true,function(q){n[q]=p[q];});}}function k(l,m,n){var o=m&&m.hasOwnProperty('constructor')?m.constructor:function(){this.parent.apply(this,arguments);};g.isFunction(o);if(l&&l.prototype instanceof h===false)throw new Error('parent type does not inherit from Type');l=l||h;function p(){}p.prototype=l.prototype;o.prototype=new p();if(m)ES('Object','assign',false,o.prototype,m);o.prototype.constructor=o;o.parent=l;o.prototype.__mixins=l.prototype.__mixins?Array.prototype.slice.call(l.prototype.__mixins):[];if(n)j(o,n);o.prototype.parent=function(){this.parent=l.prototype.parent;l.apply(this,arguments);};o.prototype.parentCall=function(q){return l.prototype[q].apply(this,Array.prototype.slice.call(arguments,1));};o.extend=function(q,r){return k(this,q,r);};return o;}ES('Object','assign',false,h.prototype,{instanceOf:function(l){return i(l,this);}});ES('Object','assign',false,h,{extend:function(l,m){return typeof l==='function'?k.apply(null,arguments):k(null,l,m);},instanceOf:i});e.exports=h;},null);
__d("ObservableMixin",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(){this.__observableEvents={};}g.prototype={inform:function(h){var i=Array.prototype.slice.call(arguments,1),j=Array.prototype.slice.call(this.getSubscribers(h));for(var k=0;k<j.length;k++){if(j[k]===null)continue;try{j[k].apply(this,i);}catch(l){setTimeout(function(){throw l;},0);}}return this;},getSubscribers:function(h){return this.__observableEvents[h]||(this.__observableEvents[h]=[]);},clearSubscribers:function(h){if(h)this.__observableEvents[h]=[];return this;},clearAllSubscribers:function(){this.__observableEvents={};return this;},subscribe:function(h,i){var j=this.getSubscribers(h);j.push(i);return this;},unsubscribe:function(h,i){var j=this.getSubscribers(h);for(var k=0;k<j.length;k++)if(j[k]===i){j.splice(k,1);break;}return this;},monitor:function(h,i){if(!i()){var j=ES(function(k){if(i.apply(i,arguments))this.unsubscribe(h,j);},'bind',true,this);this.subscribe(h,j);}return this;}};e.exports=g;},null);
__d("sdk.Model",["Type","ObservableMixin"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i=g.extend({constructor:function(j){this.parent();var k={},l=this;ES(ES('Object','keys',false,j),'forEach',true,function(m){k[m]=j[m];l['set'+m]=function(n){if(n===k[m])return this;k[m]=n;l.inform(m+'.change',n);return l;};l['get'+m]=function(){return k[m];};});}},h);e.exports=i;},null);
__d("sdk.Runtime",["sdk.Model","JSSDKRuntimeConfig"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i={UNKNOWN:0,PAGETAB:1,CANVAS:2,PLATFORM:4},j=new g({AccessToken:'',ClientID:'',CookieUserID:'',Environment:i.UNKNOWN,Initialized:false,IsVersioned:false,KidDirectedSite:(void 0),Locale:h.locale,LoginStatus:(void 0),Revision:h.revision,Rtl:h.rtl,Scope:(void 0),Secure:(void 0),UseCookie:false,UserID:'',Version:(void 0)});ES('Object','assign',false,j,{ENVIRONMENTS:i,isEnvironment:function(k){var l=this.getEnvironment();return (k|l)===l;},isCanvasEnvironment:function(){return this.isEnvironment(i.CANVAS)||this.isEnvironment(i.PAGETAB);}});(function(){var k=/app_runner/.test(window.name)?i.PAGETAB:/iframe_canvas/.test(window.name)?i.CANVAS:i.UNKNOWN;if((k|i.PAGETAB)===k)k=k|i.CANVAS;j.setEnvironment(k);})();e.exports=j;},null);
__d("sdk.Cookie",["QueryString","sdk.Runtime"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i=null;function j(m,n,o){m=m+h.getClientID();var p=i&&i!=='.';if(p){document.cookie=m+'=; expires=Wed, 04 Feb 2004 08:00:00 GMT;';document.cookie=m+'=; expires=Wed, 04 Feb 2004 08:00:00 GMT;'+'domain='+location.hostname+';';}var q=new Date(o).toGMTString();document.cookie=m+'='+n+(n&&o===0?'':'; expires='+q)+'; path=/'+(p?'; domain='+i:'');}function k(m){m=m+h.getClientID();var n=new RegExp('\\b'+m+'=([^;]*)\\b');return n.test(document.cookie)?RegExp.$1:null;}var l={setDomain:function(m){i=m;var n=g.encode({base_domain:i&&i!=='.'?i:''}),o=new Date();o.setFullYear(o.getFullYear()+1);j('fbm_',n,o.getTime());},getDomain:function(){return i;},loadMeta:function(){var m=k('fbm_');if(m){var n=g.decode(m);if(!i)i=n.base_domain;return n;}},loadSignedRequest:function(){return k('fbsr_');},setSignedRequestCookie:function(m,n){if(!m)throw new Error('Value passed to Cookie.setSignedRequestCookie '+'was empty.');j('fbsr_',m,n);},clearSignedRequestCookie:function(){j('fbsr_','',0);},setRaw:j};e.exports=l;},null);
__d("wrapFunction",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={};function h(i,j,k){j=j||'default';return function(){var l=j in g?g[j](i,k):i;return l.apply(this,arguments);};}h.setWrapper=function(i,j){j=j||'default';g[j]=i;};e.exports=h;},null);
__d("DOMEventListener",["wrapFunction"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h,i;if(window.addEventListener){h=function(k,l,m){m.wrapper=g(m,'entry','DOMEventListener.add '+l);k.addEventListener(l,m.wrapper,false);};i=function(k,l,m){k.removeEventListener(l,m.wrapper,false);};}else if(window.attachEvent){h=function(k,l,m){m.wrapper=g(m,'entry','DOMEventListener.add '+l);k.attachEvent('on'+l,m.wrapper);};i=function(k,l,m){k.detachEvent('on'+l,m.wrapper);};}else i=h=function(){};var j={add:function(k,l,m){h(k,l,m);return {remove:function(){i(k,l,m);k=null;}};},remove:i};e.exports=j;},null);
__d("sdk.UA",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g=navigator.userAgent,h={iphone:/\b(iPhone|iP[ao]d)/.test(g),ipad:/\b(iP[ao]d)/.test(g),android:/Android/i.test(g),nativeApp:/FBAN\/\w+;/i.test(g)},i=/Mobile/i.test(g),j={ie:'',firefox:'',chrome:'',webkit:'',osx:''},k=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(g);if(k){j.ie=k[1]?parseFloat(k[1]):k[4]?parseFloat(k[4]):'';j.firefox=k[2]||'';j.webkit=k[3]||'';if(k[3]){var l=/(?:Chrome\/(\d+\.\d+))/.exec(g);j.chrome=l?l[1]:'';}}var m=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(g);if(m)j.osx=m[1];function n(p){return ES(p.split('.'),'map',true,function(q){return parseFloat(q);});}var o={};ES(ES('Object','keys',false,j),'map',true,function(p){o[p]=function(){return parseFloat(j[p]);};o[p].getVersionParts=function(){return n(j[p]);};});ES(ES('Object','keys',false,h),'map',true,function(p){o[p]=function(){return h[p];};});o.mobile=function(){return h.iphone||h.ipad||h.android||i;};e.exports=o;},null);
__d("getBlankIframeSrc",["sdk.UA"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(){return g.ie()<10?'javascript:false':'about:blank';}e.exports=h;},null);
__d("guid",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(){return 'f'+(Math.random()*(1<<30)).toString(16).replace('.','');}e.exports=g;},null);
__d("UserAgent_DEPRECATED",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g=false,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v;function w(){if(g)return;g=true;var y=navigator.userAgent,z=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(y),aa=/(Mac OS X)|(Windows)|(Linux)/.exec(y);s=/\b(iPhone|iP[ao]d)/.exec(y);t=/\b(iP[ao]d)/.exec(y);q=/Android/i.exec(y);u=/FBAN\/\w+;/i.exec(y);v=/Mobile/i.exec(y);r=!!(/Win64/.exec(y));if(z){h=z[1]?parseFloat(z[1]):(z[5]?parseFloat(z[5]):NaN);if(h&&document&&document.documentMode)h=document.documentMode;var ba=/(?:Trident\/(\d+.\d+))/.exec(y);m=ba?parseFloat(ba[1])+4:h;i=z[2]?parseFloat(z[2]):NaN;j=z[3]?parseFloat(z[3]):NaN;k=z[4]?parseFloat(z[4]):NaN;if(k){z=/(?:Chrome\/(\d+\.\d+))/.exec(y);l=z&&z[1]?parseFloat(z[1]):NaN;}else l=NaN;}else h=i=j=l=k=NaN;if(aa){if(aa[1]){var ca=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(y);n=ca?parseFloat(ca[1].replace('_','.')):true;}else n=false;o=!!aa[2];p=!!aa[3];}else n=o=p=false;}var x={ie:function(){return w()||h;},ieCompatibilityMode:function(){return w()||(m>h);},ie64:function(){return x.ie()&&r;},firefox:function(){return w()||i;},opera:function(){return w()||j;},webkit:function(){return w()||k;},safari:function(){return x.webkit();},chrome:function(){return w()||l;},windows:function(){return w()||o;},osx:function(){return w()||n;},linux:function(){return w()||p;},iphone:function(){return w()||s;},mobile:function(){return w()||(s||t||q||v);},nativeApp:function(){return w()||u;},android:function(){return w()||q;},ipad:function(){return w()||t;}};e.exports=x;},null);
__d("hasNamePropertyBug",["guid","UserAgent_DEPRECATED"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i=h.ie()?(void 0):false;function j(){var l=document.createElement("form"),m=l.appendChild(document.createElement("input"));m.name=g();i=m!==l.elements[m.name];l=m=null;return i;}function k(){return typeof i==='undefined'?j():i;}e.exports=k;},null);
__d("sdk.createIframe",["DOMEventListener","getBlankIframeSrc","guid","hasNamePropertyBug"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();function k(l){l=ES('Object','assign',false,{},l);var m,n=l.name||i(),o=l.root,p=l.style||{border:'none'},q=l.url,r=l.onload,s=l.onerror;if(j()){m=document.createElement('<iframe name="'+n+'"/>');}else{m=document.createElement("iframe");m.name=n;}delete l.style;delete l.name;delete l.url;delete l.root;delete l.onload;delete l.onerror;var t=ES('Object','assign',false,{frameBorder:0,allowTransparency:true,allowFullscreen:true,scrolling:'no'},l);if(t.width)m.width=t.width+'px';if(t.height)m.height=t.height+'px';delete t.height;delete t.width;for(var u in t)if(t.hasOwnProperty(u))m.setAttribute(u,t[u]);ES('Object','assign',false,m.style,p);m.src=h();o.appendChild(m);if(r)var v=g.add(m,'load',function(){v.remove();r();});if(s)var w=g.add(m,'error',function(){w.remove();s();});m.src=q;return m;}e.exports=k;},null);
__d("DOMWrapper",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g,h,i={setRoot:function(j){g=j;},getRoot:function(){return g||document.body;},setWindow:function(j){h=j;},getWindow:function(){return h||self;}};e.exports=i;},null);
__d("eprintf",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g=function(h){var i=ES(Array.prototype.slice.call(arguments),'map',true,function(l){return String(l);}),j=h.split('%s').length-1;if(j!==i.length-1)return g('eprintf args number mismatch: %s',ES('JSON','stringify',false,i));var k=1;return h.replace(/%s/g,function(l){return String(i[k++]);});};e.exports=g;},null);
__d("ex",["eprintf"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=function(){for(var i=[],j=0,k=arguments.length;j<k;j++)i.push(arguments[j]);i=ES(i,'map',true,function(l){return String(l);});if(i[0].split('%s').length!==i.length)return h('ex args number mismatch: %s',ES('JSON','stringify',false,i));return h._prefix+ES('JSON','stringify',false,i)+h._suffix;};h._prefix='<![EX[';h._suffix=']]>';e.exports=h;},null);
__d("invariant",["ex","sprintf"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';var i=g,j=function(k,l){if(!k){var m;if(l===(void 0)){m=new Error('Minified exception occurred; use the non-minified dev environment '+'for the full error message and additional helpful warnings.');}else{var n=['Invariant Violation: '+l];for(var o=2,p=arguments.length;o<p;o++)n.push(arguments[o]);m=new Error(i.apply(null,n));m.messageWithParams=n;}m.framesToPop=1;throw m;}};e.exports=j;},null);
__d("sdk.feature",["JSSDKConfig","invariant"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();function i(j,k){h(arguments.length>=2);if(g.features&&j in g.features){var l=g.features[j];if(typeof l==='object'&&typeof l.rate==='number'){if(l.rate&&Math.random()*100<=l.rate){return l.value||true;}else return l.value?null:false;}else return l;}return k;}e.exports=i;},null);
__d("sdk.getContextType",["sdk.Runtime","sdk.UA"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();function i(){if(h.nativeApp())return 3;if(h.mobile())return 2;if(g.isEnvironment(g.ENVIRONMENTS.CANVAS))return 5;return 1;}e.exports=i;},null);
__d("Log",["sprintf"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={DEBUG:3,INFO:2,WARNING:1,ERROR:0};function i(k,l){var m=Array.prototype.slice.call(arguments,2),n=g.apply(null,m),o=window.console;if(o&&j.level>=l)o[k in o?k:'log'](n);}var j={level:-1,Level:h,debug:ES(i,'bind',true,null,'debug',h.DEBUG),info:ES(i,'bind',true,null,'info',h.INFO),warn:ES(i,'bind',true,null,'warn',h.WARNING),error:ES(i,'bind',true,null,'error',h.ERROR)};e.exports=j;},null);
__d("sdk.domReady",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g,h="readyState" in document?/loaded|complete/.test(document.readyState):!!document.body;function i(){if(!g)return;var l;while(l=g.shift())l();g=null;}function j(l){if(g){g.push(l);return;}else l();}if(!h){g=[];if(document.addEventListener){document.addEventListener('DOMContentLoaded',i,false);window.addEventListener('load',i,false);}else if(document.attachEvent){document.attachEvent('onreadystatechange',i);window.attachEvent('onload',i);}if(document.documentElement.doScroll&&window==window.top){var k=function(){try{document.documentElement.doScroll('left');}catch(l){setTimeout(k,0);return;}i();};k();}}e.exports=j;},3);
__d("sdk.Content",["Log","sdk.UA","sdk.domReady"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j,k,l={append:function(m,n){if(!n)if(!j){j=n=document.getElementById('fb-root');if(!n){g.warn('The "fb-root" div has not been created, auto-creating');j=n=document.createElement('div');n.id='fb-root';if(h.ie()||!document.body){i(function(){document.body.appendChild(n);});}else document.body.appendChild(n);}n.className+=' fb_reset';}else n=j;if(typeof m=='string'){var o=document.createElement('div');n.appendChild(o).innerHTML=m;return o;}else return n.appendChild(m);},appendHidden:function(m){if(!n){var n=document.createElement('div'),o=n.style;o.position='absolute';o.top='-10000px';o.width=o.height=0;n=l.append(n);}return l.append(m,n);},submitToTarget:function(m,n){var o=document.createElement('form');o.action=m.url;o.target=m.target;o.method=(n)?'GET':'POST';l.appendHidden(o);for(var p in m.params)if(m.params.hasOwnProperty(p)){var q=m.params[p];if(q!==null&&q!==(void 0)){var r=document.createElement('input');r.name=p;r.value=q;o.appendChild(r);}}o.submit();o.parentNode.removeChild(o);}};e.exports=l;},null);
__d("Miny",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g='Miny1',h={encode:[],decode:{}},i='wxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-_'.split('');function j(n){for(var o=h.encode.length;o<n;o++){var p=o.toString(32).split('');p[p.length-1]=i[parseInt(p[p.length-1],32)];p=p.join('');h.encode[o]=p;h.decode[p]=o;}return h;}function k(n){if(/^$|[~\\]|__proto__/.test(n))return n;var o=n.match(/\w+|\W+/g),p={};for(var q=0;q<o.length;q++)p[o[q]]=(p[o[q]]||0)+1;var r=ES('Object','keys',false,p);r.sort(function(u,v){return p[u]<p[v]?1:(p[v]<p[u]?-1:0);});var s=j(r.length).encode;for(q=0;q<r.length;q++)p[r[q]]=s[q];var t=[];for(q=0;q<o.length;q++)t[q]=p[o[q]];return [g,r.length].concat(r).concat(t.join('')).join('~');}function l(n){var o=n.split('~');if(o.shift()!=g)return n;var p=parseInt(o.shift(),10),q=o.pop();q=q.match(/[0-9a-v]*[\-w-zA-Z_]/g);var r=o,s=j(p).decode,t=[];for(var u=0;u<q.length;u++)t[u]=r[s[q[u]]];return t.join('');}var m={encode:k,decode:l};e.exports=m;},null);
__d("UrlMap",["UrlMapConfig"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={resolve:function(i,j){var k=typeof j=='undefined'?location.protocol.replace(':',''):j?'https':'http';if(i in g)return k+'://'+g[i];if(typeof j=='undefined'&&i+'_'+k in g)return k+'://'+g[i+'_'+k];if(j!==true&&i+'_http' in g)return 'http://'+g[i+'_http'];if(j!==false&&i+'_https' in g)return 'https://'+g[i+'_https'];}};e.exports=h;},null);
__d("dotAccess",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h,i,j){var k=i.split('.');do{var l=k.shift();h=h[l]||j&&(h[l]={});}while(k.length&&h);return h;}e.exports=g;},null);
__d("GlobalCallback",["DOMWrapper","dotAccess","guid","wrapFunction"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k,l,m={setPrefix:function(n){k=h(g.getWindow(),n,true);l=n;},create:function(n,o){if(!k)this.setPrefix('__globalCallbacks');var p=i();k[p]=j(n,'entry',o||'GlobalCallback');return l+'.'+p;},remove:function(n){var o=n.substring(l.length+1);delete k[o];}};e.exports=m;},null);
__d("insertIframe",["GlobalCallback","getBlankIframeSrc","guid"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();function j(k){k.id=k.id||i();k.name=k.name||i();var l=false,m=false,n=function(){if(l&&!m){m=true;k.onload&&k.onload(k.root.firstChild);}},o=g.create(n);if(document.attachEvent){var p=('<iframe'+' id="'+k.id+'"'+' name="'+k.name+'"'+(k.title?' title="'+k.title+'"':'')+(k.className?' class="'+k.className+'"':'')+' style="border:none;'+(k.width?'width:'+k.width+'px;':'')+(k.height?'height:'+k.height+'px;':'')+'"'+' src="'+h()+'"'+' frameborder="0"'+' scrolling="no"'+' allowtransparency="true"'+' onload="'+o+'()"'+'></iframe>');k.root.innerHTML=('<iframe src="'+h()+'"'+' frameborder="0"'+' scrolling="no"'+' style="height:1px"></iframe>');l=true;setTimeout(function(){k.root.innerHTML=p;k.root.firstChild.src=k.url;k.onInsert&&k.onInsert(k.root.firstChild);},0);}else{var q=document.createElement('iframe');q.id=k.id;q.name=k.name;q.onload=n;q.scrolling='no';q.style.border='none';q.style.overflow='hidden';if(k.title)q.title=k.title;if(k.className)q.className=k.className;if(k.height!==(void 0))q.style.height=k.height+'px';if(k.width!==(void 0))if(k.width=='100%'){q.style.width=k.width;}else q.style.width=k.width+'px';k.root.appendChild(q);l=true;q.src=k.url;k.onInsert&&k.onInsert(q);}}e.exports=j;},null);
__d("sdk.Impressions",["sdk.Content","Miny","QueryString","sdk.Runtime","UrlMap","getBlankIframeSrc","guid","insertIframe"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();function o(q){var r=j.getClientID();if(!q.api_key&&r)q.api_key=r;q.kid_directed_site=j.getKidDirectedSite();var s=k.resolve('www',true)+'/impression.php/'+m()+'/',t=i.appendToUrl(s,q);if(t.length>2000)if(q.payload&&typeof q.payload==='string'){var u=h.encode(q.payload);if(u&&u.length<q.payload.length){q.payload=u;t=i.appendToUrl(s,q);}}if(t.length<=2000){var v=new Image();v.src=t;}else{var w=m(),x=g.appendHidden('');n({url:l(),root:x,name:w,className:'fb_hidden fb_invisible',onload:function(){x.parentNode.removeChild(x);}});g.submitToTarget({url:s,target:w,params:q});}}var p={log:function(q,r){if(!r.source)r.source='jssdk';o({lid:q,payload:ES('JSON','stringify',false,r)});},impression:o};e.exports=p;},null);
__d("Base64",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';function h(l){l=(l.charCodeAt(0)<<16)|(l.charCodeAt(1)<<8)|l.charCodeAt(2);return String.fromCharCode(g.charCodeAt(l>>>18),g.charCodeAt((l>>>12)&63),g.charCodeAt((l>>>6)&63),g.charCodeAt(l&63));}var i='>___?456789:;<=_______'+'\0\1\2\3\4\5\6\7\b\t\n\13\f\r\16\17\20\21\22\23\24\25\26\27\30\31'+'______\32\33\34\35\36\37 !"#$%&\'()*+,-./0123';function j(l){l=(i.charCodeAt(l.charCodeAt(0)-43)<<18)|(i.charCodeAt(l.charCodeAt(1)-43)<<12)|(i.charCodeAt(l.charCodeAt(2)-43)<<6)|i.charCodeAt(l.charCodeAt(3)-43);return String.fromCharCode(l>>>16,(l>>>8)&255,l&255);}var k={encode:function(l){l=unescape(encodeURI(l));var m=(l.length+2)%3;l=(l+'\0\0'.slice(m)).replace(/[\s\S]{3}/g,h);return l.slice(0,l.length+m-2)+'=='.slice(m);},decode:function(l){l=l.replace(/[^A-Za-z0-9+\/]/g,'');var m=(l.length+3)&3;l=(l+'AAA'.slice(m)).replace(/..../g,j);l=l.slice(0,l.length+m-3);try{return decodeURIComponent(escape(l));}catch(n){throw new Error('Not valid UTF-8');}},encodeObject:function(l){return k.encode(ES('JSON','stringify',false,l));},decodeObject:function(l){return ES('JSON','parse',false,k.decode(l));},encodeNums:function(l){return String.fromCharCode.apply(String,ES(l,'map',true,function(m){return g.charCodeAt((m|-(m>63))&-(m>0)&63);}));}};e.exports=k;},null);
__d("sdk.SignedRequest",["Base64"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(j){if(!j)return null;var k=j.split('.',2)[1].replace(/\-/g,'+').replace(/\_/g,'/');return g.decodeObject(k);}var i={parse:h};e.exports=i;},null);
__d("URIRFC3986",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g=new RegExp('^'+'([^:/?#]+:)?'+'(//'+'([^\\\\/?#@]*@)?'+'('+'\\[[A-Fa-f0-9:.]+\\]|'+'[^\\/?#:]*'+')'+'(:[0-9]*)?'+')?'+'([^?#]*)'+'(\\?[^#]*)?'+'(#.*)?'),h={parse:function(i){if(ES(i,'trim',true)==='')return null;var j=i.match(g),k={};k.uri=j[0]?j[0]:null;k.scheme=j[1]?j[1].substr(0,j[1].length-1):null;k.authority=j[2]?j[2].substr(2):null;k.userinfo=j[3]?j[3].substr(0,j[3].length-1):null;k.host=j[2]?j[4]:null;k.port=j[5]?(j[5].substr(1)?parseInt(j[5].substr(1),10):null):null;k.path=j[6]?j[6]:null;k.query=j[7]?j[7].substr(1):null;k.fragment=j[8]?j[8].substr(1):null;k.isGenericURI=k.authority===null&&!!k.scheme;return k;}};e.exports=h;},null);
__d("createObjectFrom",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h,i){var j={},k=ES('Array','isArray',false,i);if(typeof i=='undefined')i=true;for(var l=h.length;l--;)j[h[l]]=k?i[l]:i;return j;}e.exports=g;},null);
__d("URISchemes",["createObjectFrom"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=g(['fb','fb-ama','fb-messenger','fbcf','fbconnect','fbrpc','file','ftp','http','https','mailto','ms-app','itms','itms-apps','itms-services','market','svn+ssh','fbstaging','tel','sms','pebblejs','sftp']),i={isAllowed:function(j){if(!j)return true;return h.hasOwnProperty(j.toLowerCase());}};e.exports=i;},null);
__d("copyProperties",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h,i,j,k,l,m,n){h=h||{};var o=[i,j,k,l,m],p=0,q;while(o[p]){q=o[p++];for(var r in q)h[r]=q[r];if(q.hasOwnProperty&&q.hasOwnProperty('toString')&&(typeof q.toString!='undefined')&&(h.toString!==q.toString))h.toString=q.toString;}return h;}e.exports=g;},null);
__d("URIBase",["URIRFC3986","URISchemes","copyProperties","ex","invariant"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=new RegExp('[\\x00-\\x2c\\x2f\\x3b-\\x40\\x5c\\x5e\\x60\\x7b-\\x7f'+'\\uFDD0-\\uFDEF\\uFFF0-\\uFFFF'+'\\u2047\\u2048\\uFE56\\uFE5F\\uFF03\\uFF0F\\uFF1F]'),m=new RegExp('^(?:[^/]*:|'+'[\\x00-\\x1f]*/[\\x00-\\x1f]*/)');function n(q,r,s,t){if(!r)return true;if(r instanceof p){q.setProtocol(r.getProtocol());q.setDomain(r.getDomain());q.setPort(r.getPort());q.setPath(r.getPath());q.setQueryData(t.deserialize(t.serialize(r.getQueryData())));q.setFragment(r.getFragment());q.setForceFragmentSeparator(r.getForceFragmentSeparator());return true;}r=ES(r.toString(),'trim',true);var u=g.parse(r)||{};if(!s&&!h.isAllowed(u.scheme))return false;q.setProtocol(u.scheme||'');if(!s&&l.test(u.host))return false;q.setDomain(u.host||'');q.setPort(u.port||'');q.setPath(u.path||'');if(s){q.setQueryData(t.deserialize(u.query)||{});}else try{q.setQueryData(t.deserialize(u.query)||{});}catch(v){return false;}q.setFragment(u.fragment||'');if(u.fragment==='')q.setForceFragmentSeparator(true);if(u.userinfo!==null)if(s){throw new Error(j('URI.parse: invalid URI (userinfo is not allowed in a URI): %s',q.toString()));}else return false;if(!q.getDomain()&&ES(q.getPath(),'indexOf',true,'\\')!==-1)if(s){throw new Error(j('URI.parse: invalid URI (no domain but multiple back-slashes): %s',q.toString()));}else return false;if(!q.getProtocol()&&m.test(r))if(s){throw new Error(j('URI.parse: invalid URI (unsafe protocol-relative URLs): %s',q.toString()));}else return false;return true;}var o=[];function p(q,r){"use strict";k(r);this.$URIBase0=r;this.$URIBase1='';this.$URIBase2='';this.$URIBase3='';this.$URIBase4='';this.$URIBase5='';this.$URIBase6={};this.$URIBase7=false;n(this,q,true,r);}p.prototype.setProtocol=function(q){"use strict";k(h.isAllowed(q));this.$URIBase1=q;return this;};p.prototype.getProtocol=function(q){"use strict";return this.$URIBase1;};p.prototype.setSecure=function(q){"use strict";return this.setProtocol(q?'https':'http');};p.prototype.isSecure=function(){"use strict";return this.getProtocol()==='https';};p.prototype.setDomain=function(q){"use strict";if(l.test(q))throw new Error(j('URI.setDomain: unsafe domain specified: %s for url %s',q,this.toString()));this.$URIBase2=q;return this;};p.prototype.getDomain=function(){"use strict";return this.$URIBase2;};p.prototype.setPort=function(q){"use strict";this.$URIBase3=q;return this;};p.prototype.getPort=function(){"use strict";return this.$URIBase3;};p.prototype.setPath=function(q){"use strict";this.$URIBase4=q;return this;};p.prototype.getPath=function(){"use strict";return this.$URIBase4;};p.prototype.addQueryData=function(q,r){"use strict";if(Object.prototype.toString.call(q)==='[object Object]'){i(this.$URIBase6,q);}else this.$URIBase6[q]=r;return this;};p.prototype.setQueryData=function(q){"use strict";this.$URIBase6=q;return this;};p.prototype.getQueryData=function(){"use strict";return this.$URIBase6;};p.prototype.removeQueryData=function(q){"use strict";if(!ES('Array','isArray',false,q))q=[q];for(var r=0,s=q.length;r<s;++r)delete this.$URIBase6[q[r]];return this;};p.prototype.setFragment=function(q){"use strict";this.$URIBase5=q;this.setForceFragmentSeparator(false);return this;};p.prototype.getFragment=function(){"use strict";return this.$URIBase5;};p.prototype.setForceFragmentSeparator=function(q){"use strict";this.$URIBase7=q;return this;};p.prototype.getForceFragmentSeparator=function(){"use strict";return this.$URIBase7;};p.prototype.isEmpty=function(){"use strict";return !(this.getPath()||this.getProtocol()||this.getDomain()||this.getPort()||ES('Object','keys',false,this.getQueryData()).length>0||this.getFragment());};p.prototype.toString=function(){"use strict";var q=this;for(var r=0;r<o.length;r++)q=o[r](q);return q.$URIBase8();};p.prototype.$URIBase8=function(){"use strict";var q='',r=this.getProtocol();if(r)q+=r+'://';var s=this.getDomain();if(s)q+=s;var t=this.getPort();if(t)q+=':'+t;var u=this.getPath();if(u){q+=u;}else if(q)q+='/';var v=this.$URIBase0.serialize(this.getQueryData());if(v)q+='?'+v;var w=this.getFragment();if(w){q+='#'+w;}else if(this.getForceFragmentSeparator())q+='#';return q;};p.registerFilter=function(q){"use strict";o.push(q);};p.prototype.getOrigin=function(){"use strict";var q=this.getPort();return this.getProtocol()+'://'+this.getDomain()+(q?':'+q:'');};p.isValidURI=function(q,r){return n(new p(null,r),q,false,r);};e.exports=p;},null);
__d("sdk.URI",["Assert","QueryString","URIBase"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=/\.facebook\.com$/,k={serialize:function(o){return o?h.encode(o):'';},deserialize:function(o){return o?h.decode(o):{};}};for(var l in i)if(i.hasOwnProperty(l))n[l]=i[l];var m=i===null?null:i.prototype;n.prototype=ES('Object','create',false,m);n.prototype.constructor=n;n.__superConstructor__=i;function n(o){"use strict";g.isString(o,'The passed argument was of invalid type.');if(!(this instanceof n))return new n(o);i.call(this,o,k);}n.prototype.isFacebookURI=function(){"use strict";return j.test(this.getDomain());};n.prototype.valueOf=function(){"use strict";return this.toString();};e.exports=n;},null);
__d("sdk.Event",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={SUBSCRIBE:'event.subscribe',UNSUBSCRIBE:'event.unsubscribe',subscribers:function(){if(!this._subscribersMap)this._subscribersMap={};return this._subscribersMap;},subscribe:function(h,i){var j=this.subscribers();if(!j[h]){j[h]=[i];}else if(ES(j[h],'indexOf',true,i)==-1)j[h].push(i);if(h!=this.SUBSCRIBE&&h!=this.UNSUBSCRIBE)this.fire(this.SUBSCRIBE,h,j[h]);},unsubscribe:function(h,i){var j=this.subscribers()[h];if(j)ES(j,'forEach',true,function(k,l){if(k==i)j.splice(l,1);});if(h!=this.SUBSCRIBE&&h!=this.UNSUBSCRIBE)this.fire(this.UNSUBSCRIBE,h,j);},monitor:function(h,i){if(!i()){var j=this,k=function(){if(i.apply(i,arguments))j.unsubscribe(h,k);};this.subscribe(h,k);}},clear:function(h){delete this.subscribers()[h];},fire:function(h){var i=Array.prototype.slice.call(arguments,1),j=this.subscribers()[h];if(j)ES(j,'forEach',true,function(k){if(k)k.apply(this,i);});}};e.exports=g;},null);
__d("Queue",["copyProperties"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={};function i(j){"use strict";this._opts=g({interval:0,processor:null},j);this._queue=[];this._stopped=true;}i.prototype._dispatch=function(j){"use strict";if(this._stopped||this._queue.length===0)return;if(!this._opts.processor){this._stopped=true;throw new Error('No processor available');}if(this._opts.interval){this._opts.processor.call(this,this._queue.shift());this._timeout=setTimeout(ES(this._dispatch,'bind',true,this),this._opts.interval);}else while(this._queue.length)this._opts.processor.call(this,this._queue.shift());};i.prototype.enqueue=function(j){"use strict";if(this._opts.processor&&!this._stopped){this._opts.processor.call(this,j);}else this._queue.push(j);return this;};i.prototype.start=function(j){"use strict";if(j)this._opts.processor=j;this._stopped=false;this._dispatch();return this;};i.prototype.isStarted=function(){"use strict";return !this._stopped;};i.prototype.dispatch=function(){"use strict";this._dispatch(true);};i.prototype.stop=function(j){"use strict";this._stopped=true;if(j)clearTimeout(this._timeout);return this;};i.prototype.merge=function(j,k){"use strict";this._queue[k?'unshift':'push'].apply(this._queue,j._queue);j._queue=[];this._dispatch();return this;};i.prototype.getLength=function(){"use strict";return this._queue.length;};i.get=function(j,k){"use strict";var l;if(j in h){l=h[j];}else l=h[j]=new i(k);return l;};i.exists=function(j){"use strict";return j in h;};i.remove=function(j){"use strict";return delete h[j];};e.exports=i;},null);
__d("JSONRPC",["Log"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(i){"use strict";this.$JSONRPC0=0;this.$JSONRPC1={};this.remote=ES(function(j){this.$JSONRPC2=j;return this.remote;},'bind',true,this);this.local={};this.$JSONRPC3=i;}h.prototype.stub=function(i){"use strict";this.remote[i]=ES(function(){for(var j=[],k=0,l=arguments.length;k<l;k++)j.push(arguments[k]);var m={jsonrpc:'2.0',method:i};if(typeof j[j.length-1]=='function'){m.id=++this.$JSONRPC0;this.$JSONRPC1[m.id]=j.pop();}m.params=j;this.$JSONRPC3(ES('JSON','stringify',false,m),this.$JSONRPC2||{method:i});},'bind',true,this);};h.prototype.read=function(i,j){"use strict";var k=ES('JSON','parse',false,i),l=k.id;if(!k.method){if(!this.$JSONRPC1[l]){g.warn('Could not find callback %s',l);return;}var m=this.$JSONRPC1[l];delete this.$JSONRPC1[l];delete k.id;delete k.jsonrpc;m(k);return;}var n=this,o=this.local[k.method],p;if(l){p=function(s,t){var u={jsonrpc:'2.0',id:l};u[s]=t;setTimeout(function(){n.$JSONRPC3(ES('JSON','stringify',false,u),j);},0);};}else p=function(){};if(!o){g.error('Method "%s" has not been defined',k.method);p('error',{code:-32601,message:'Method not found',data:k.method});return;}k.params.push(ES(p,'bind',true,null,'result'));k.params.push(ES(p,'bind',true,null,'error'));try{var r=o.apply(j||null,k.params);if(typeof r!=='undefined')p('result',r);}catch(q){g.error('Invokation of RPC method %s resulted in the error: %s',k.method,q.message);p('error',{code:-32603,message:'Internal error',data:q.message});}};e.exports=h;},null);
__d("sdk.RPC",["Assert","JSONRPC","Queue"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=new i(),k=new h(function(m){j.enqueue(m);}),l={local:k.local,remote:k.remote,stub:ES(k.stub,'bind',true,k),setInQueue:function(m){g.isInstanceOf(i,m);m.start(function(n){k.read(n);});},getOutQueue:function(){return j;}};e.exports=l;},null);
__d("sdk.Scribe",["QueryString","sdk.Runtime","UrlMap"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();function j(l,m){if(typeof m.extra=='object')m.extra.revision=h.getRevision();(new Image()).src=g.appendToUrl(i.resolve('www',true)+'/common/scribe_endpoint.php',{c:l,m:ES('JSON','stringify',false,m)});}var k={log:j};e.exports=k;},null);
__d("emptyFunction",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(i){return function(){return i;};}function h(){}h.thatReturns=g;h.thatReturnsFalse=g(false);h.thatReturnsTrue=g(true);h.thatReturnsNull=g(null);h.thatReturnsThis=function(){return this;};h.thatReturnsArgument=function(i){return i;};e.exports=h;},null);
__d("htmlSpecialChars",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g=/&/g,h=/</g,i=/>/g,j=/"/g,k=/'/g;function l(m){if(typeof m=='undefined'||m===null||!m.toString)return '';if(m===false){return '0';}else if(m===true)return '1';return m.toString().replace(g,'&amp;').replace(j,'&quot;').replace(k,'&#039;').replace(h,'&lt;').replace(i,'&gt;');}e.exports=l;},null);
__d("Flash",["DOMEventListener","DOMWrapper","QueryString","UserAgent_DEPRECATED","copyProperties","guid","htmlSpecialChars"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n={},o,p=h.getWindow().document;function q(v){var w=p.getElementById(v);if(w)w.parentNode.removeChild(w);delete n[v];}function r(){for(var v in n)if(n.hasOwnProperty(v))q(v);}function s(v){return v.replace(/\d+/g,function(w){return '000'.substring(w.length)+w;});}function t(v){if(!o){if(j.ie()>=9)g.add(window,'unload',r);o=true;}n[v]=v;}var u={embed:function(v,w,x,y){var z=l();v=m(v).replace(/&amp;/g,'&');x=k({allowscriptaccess:'always',flashvars:y,movie:v},x||{});if(typeof x.flashvars=='object')x.flashvars=i.encode(x.flashvars);var aa=[];for(var ba in x)if(x.hasOwnProperty(ba)&&x[ba])aa.push('<param name="'+m(ba)+'" value="'+m(x[ba])+'">');var ca=w.appendChild(p.createElement('span')),da='<object '+(j.ie()?'classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" ':'type="application/x-shockwave-flash"')+'data="'+v+'" '+(x.height?'height="'+x.height+'" ':'')+(x.width?'width="'+x.width+'" ':'')+'id="'+z+'">'+aa.join('')+'</object>';ca.innerHTML=da;var ea=ca.firstChild;t(z);return ea;},remove:q,getVersion:function(){var v='Shockwave Flash',w='application/x-shockwave-flash',x='ShockwaveFlash.ShockwaveFlash',y;if(navigator.plugins&&typeof navigator.plugins[v]=='object'){var z=navigator.plugins[v].description;if(z&&navigator.mimeTypes&&navigator.mimeTypes[w]&&navigator.mimeTypes[w].enabledPlugin)y=z.match(/\d+/g);}if(!y)try{y=(new ActiveXObject(x)).GetVariable('$version').match(/(\d+),(\d+),(\d+),(\d+)/);y=Array.prototype.slice.call(y,1);}catch(aa){}return y;},checkMinVersion:function(v){var w=u.getVersion();if(!w)return false;return s(w.join('.'))>=s(v);},isAvailable:function(){return !!u.getVersion();}};e.exports=u;},null);
__d("XDM",["DOMEventListener","DOMWrapper","emptyFunction","Flash","GlobalCallback","guid","Log","UserAgent_DEPRECATED","wrapFunction"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p={},q={transports:[]},r=h.getWindow();function s(u){var v={},w=u.length,x=q.transports;while(w--)v[u[w]]=1;w=x.length;while(w--){var y=x[w],z=p[y];if(!v[y]&&z.isAvailable())return y;}}var t={register:function(u,v){m.debug('Registering %s as XDM provider',u);q.transports.push(u);p[u]=v;},create:function(u){if(!u.whenReady&&!u.onMessage){m.error('An instance without whenReady or onMessage makes no sense');throw new Error('An instance without whenReady or '+'onMessage makes no sense');}if(!u.channel){m.warn('Missing channel name, selecting at random');u.channel=l();}if(!u.whenReady)u.whenReady=i;if(!u.onMessage)u.onMessage=i;var v=u.transport||s(u.blacklist||[]),w=p[v];if(w&&w.isAvailable()){m.debug('%s is available',v);w.init(u);return v;}}};t.register('flash',(function(){var u=false,v,w=false,x=15000,y;return {isAvailable:function(){return j.checkMinVersion('8.0.24');},init:function(z){m.debug('init flash: '+z.channel);var aa={send:function(da,ea,fa,ga){m.debug('sending to: %s (%s)',ea,ga);v.postMessage(da,ea,ga);}};if(u){z.whenReady(aa);return;}var ba=z.root.appendChild(r.document.createElement('div')),ca=k.create(function(){k.remove(ca);clearTimeout(y);m.info('xdm.swf called the callback');var da=k.create(function(ea,fa){ea=decodeURIComponent(ea);fa=decodeURIComponent(fa);m.debug('received message %s from %s',ea,fa);z.onMessage(ea,fa);},'xdm.swf:onMessage');v.init(z.channel,da);z.whenReady(aa);},'xdm.swf:load');v=j.embed(z.flashUrl,ba,null,{protocol:location.protocol.replace(':',''),host:location.host,callback:ca,log:w});y=setTimeout(function(){m.warn('The Flash component did not load within %s ms - '+'verify that the container is not set to hidden or invisible '+'using CSS as this will cause some browsers to not load '+'the components',x);},x);u=true;}};})());t.register('postmessage',(function(){var u=false;return {isAvailable:function(){return !!r.postMessage;},init:function(v){m.debug('init postMessage: '+v.channel);var w='_FB_'+v.channel,x={send:function(y,z,aa,ba){if(r===aa){m.error('Invalid windowref, equal to window (self)');throw new Error();}m.debug('sending to: %s (%s)',z,ba);var ca=function(){aa.postMessage('_FB_'+ba+y,z);};if(n.ie()==8||n.ieCompatibilityMode()){setTimeout(ca,0);}else ca();}};if(u){v.whenReady(x);return;}g.add(r,'message',o(function(event){var y=event.data,z=event.origin||'native';if(!/^(https?:\/\/|native$)/.test(z)){m.debug('Received message from invalid origin type: %s',z);return;}if(typeof y!='string'){m.warn('Received message of type %s from %s, expected a string',typeof y,z);return;}m.debug('received message %s from %s',y,z);if(y.substring(0,w.length)==w)y=y.substring(w.length);v.onMessage(y,z);},'entry','onMessage'));v.whenReady(x);u=true;}};})());e.exports=t;},null);
__d("isFacebookURI",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g=null,h=['http','https'];function i(j){if(!g)g=new RegExp('(^|\\.)facebook\\.com$','i');if(j.isEmpty()&&j.toString()!=='#')return false;if(!j.getDomain()&&!j.getProtocol())return true;return (ES(h,'indexOf',true,j.getProtocol())!==-1&&g.test(j.getDomain()));}i.setRegex=function(j){g=j;};e.exports=i;},null);
__d("sdk.XD",["sdk.Content","sdk.Event","Log","QueryString","Queue","sdk.RPC","sdk.Runtime","sdk.Scribe","sdk.URI","UrlMap","JSSDKXDConfig","XDM","isFacebookURI","sdk.createIframe","sdk.feature","guid"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){b.__markCompiled&&b.__markCompiled();var w=new k(),x=new k(),y=new k(),z,aa,ba=v(),ca=q.useCdn?'cdn':'www',da=u('use_bundle',false)?q.XdBundleUrl:q.XdUrl,ea=p.resolve(ca,false)+da,fa=p.resolve(ca,true)+da,ga=v(),ha=location.protocol+'//'+location.host,ia,ja=false,ka='Facebook Cross Domain Communication Frame',la={},ma=new k();l.setInQueue(ma);function na(ta){i.info('Remote XD can talk to facebook.com (%s)',ta);m.setEnvironment(ta==='canvas'?m.ENVIRONMENTS.CANVAS:m.ENVIRONMENTS.PAGETAB);}function oa(ta,ua){if(!ua){i.error('No senderOrigin');throw new Error();}var va=/^https?/.exec(ua)[0];switch(ta.xd_action){case 'proxy_ready':var wa,xa;if(va=='https'){wa=y;xa=aa;}else{wa=x;xa=z;}if(ta.registered){na(ta.registered);w=wa.merge(w);}i.info('Proxy ready, starting queue %s containing %s messages',va+'ProxyQueue',wa.getLength());wa.start(function(za){ia.send(typeof za==='string'?za:j.encode(za),ua,xa.contentWindow,ga+'_'+va);});break;case 'plugin_ready':i.info('Plugin %s ready, protocol: %s',ta.name,va);la[ta.name]={protocol:va};if(k.exists(ta.name)){var ya=k.get(ta.name);i.debug('Enqueuing %s messages for %s in %s',ya.getLength(),ta.name,va+'ProxyQueue');(va=='https'?y:x).merge(ya);}break;}if(ta.data)pa(ta.data,ua);}function pa(ta,ua){if(ua&&ua!=='native'&&!s(o(ua)))return;if(typeof ta=='string'){if(/^FB_RPC:/.test(ta)){ma.enqueue(ta.substring(7));return;}if(ta.substring(0,1)=='{'){try{ta=ES('JSON','parse',false,ta);}catch(va){i.warn('Failed to decode %s as JSON',ta);return;}}else ta=j.decode(ta);}if(!ua)if(ta.xd_sig==ba)ua=ta.xd_origin;if(ta.xd_action){oa(ta,ua);return;}if(ta.access_token)m.setSecure(/^https/.test(ha));if(ta.cb){var wa=sa._callbacks[ta.cb];if(!sa._forever[ta.cb])delete sa._callbacks[ta.cb];if(wa)wa(ta);}}function qa(ta,ua){if(ta=='facebook'){ua.relation='parent.parent';w.enqueue(ua);}else{ua.relation='parent.frames["'+ta+'"]';var va=la[ta];if(va){i.debug('Enqueuing message for plugin %s in %s',ta,va.protocol+'ProxyQueue');(va.protocol=='https'?y:x).enqueue(ua);}else{i.debug('Buffering message for plugin %s',ta);k.get(ta).enqueue(ua);}}}l.getOutQueue().start(function(ta){qa('facebook','FB_RPC:'+ta);});function ra(ta){if(ja)return;var ua=g.appendHidden(document.createElement('div')),va=r.create({blacklist:null,root:ua,channel:ga,flashUrl:q.Flash.path,whenReady:function(wa){ia=wa;var xa={channel:ga,origin:location.protocol+'//'+location.host,transport:va,xd_name:ta},ya='#'+j.encode(xa);if(m.getSecure()!==true)z=t({url:ea+ya,name:'fb_xdm_frame_http',id:'fb_xdm_frame_http',root:ua,'aria-hidden':true,title:ka,tabindex:-1});aa=t({url:fa+ya,name:'fb_xdm_frame_https',id:'fb_xdm_frame_https',root:ua,'aria-hidden':true,title:ka,tabindex:-1});},onMessage:pa});if(!va)n.log('jssdk_error',{appId:m.getClientID(),error:'XD_TRANSPORT',extra:{message:'Failed to create a valid transport'}});ja=true;}var sa={rpc:l,_callbacks:{},_forever:{},_channel:ga,_origin:ha,onMessage:pa,recv:pa,init:ra,sendToFacebook:qa,inform:function(ta,ua,va,wa){qa('facebook',{method:ta,params:ES('JSON','stringify',false,ua||{}),behavior:wa||'p',relation:va});},handler:function(ta,ua,va,wa){var xa='#'+j.encode({cb:this.registerCallback(ta,va,wa),origin:ha+'/'+ga,domain:location.hostname,relation:ua||'opener'});return (location.protocol=='https:'?fa:ea)+xa;},registerCallback:function(ta,ua,va){va=va||v();if(ua)sa._forever[va]=true;sa._callbacks[va]=ta;return va;}};h.subscribe('init:post',function(ta){ra(ta.xdProxyName);var ua=u('xd_timeout',false);if(ua)setTimeout(function(){var va=aa&&(!!z==x.isStarted()&&!!aa==y.isStarted());if(!va)n.log('jssdk_error',{appId:m.getClientID(),error:'XD_INITIALIZATION',extra:{message:'Failed to initialize in '+ua+'ms'}});},ua);});e.exports=sa;},null);
__d("sdk.Auth",["sdk.Cookie","sdk.createIframe","DOMWrapper","sdk.feature","sdk.getContextType","guid","sdk.Impressions","Log","ObservableMixin","sdk.Runtime","sdk.SignedRequest","UrlMap","sdk.URI","sdk.XD"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){b.__markCompiled&&b.__markCompiled();var u,v,w=new o();function x(da,ea){var fa=p.getUserID(),ga='';if(da)if(da.userID){ga=da.userID;}else if(da.signedRequest){var ha=q.parse(da.signedRequest);if(ha&&ha.user_id)ga=ha.user_id;}var ia=p.getLoginStatus(),ja=(ia==='unknown'&&da)||(p.getUseCookie()&&p.getCookieUserID()!==ga),ka=fa&&!da,la=da&&fa&&fa!=ga,ma=da!=u,na=ea!=(ia||'unknown');p.setLoginStatus(ea);p.setAccessToken(da&&da.accessToken||null);p.setUserID(ga);u=da;var oa={authResponse:da,status:ea};if(ka||la)w.inform('logout',oa);if(ja||la)w.inform('login',oa);if(ma)w.inform('authresponse.change',oa);if(na)w.inform('status.change',oa);return oa;}function y(){return u;}function z(da,ea,fa){return function(ga){var ha;if(ga&&ga.access_token){var ia=q.parse(ga.signed_request);ea={accessToken:ga.access_token,userID:ia.user_id,expiresIn:parseInt(ga.expires_in,10),signedRequest:ga.signed_request};if(ga.granted_scopes)ea.grantedScopes=ga.granted_scopes;if(p.getUseCookie()){var ja=ea.expiresIn===0?0:ES('Date','now',false)+ea.expiresIn*1000,ka=g.getDomain();if(!ka&&ga.base_domain)g.setDomain('.'+ga.base_domain);g.setSignedRequestCookie(ga.signed_request,ja);}ha='connected';x(ea,ha);}else if(fa==='logout'||fa==='login_status'){if(ga.error&&ga.error==='not_authorized'){ha='not_authorized';}else ha='unknown';x(null,ha);if(p.getUseCookie())g.clearSignedRequestCookie();}if(ga&&ga.https==1)p.setSecure(true);if(da)da({authResponse:ea,status:p.getLoginStatus()});return ea;};}function aa(da){var ea,fa=ES('Date','now',false);if(v){clearTimeout(v);v=null;}var ga=z(da,u,'login_status'),ha=s(r.resolve('www',true)+'/connect/ping').setQueryData({client_id:p.getClientID(),response_type:'token,signed_request,code',domain:location.hostname,origin:k(),redirect_uri:t.handler(function(ia){if(j('e2e_ping_tracking',true)){var ja={init:fa,close:ES('Date','now',false),method:'ping'};n.debug('e2e: %s',ES('JSON','stringify',false,ja));m.log(114,{payload:ja});}ea.parentNode.removeChild(ea);if(ga(ia))v=setTimeout(function(){aa(function(){});},1200000);},'parent'),sdk:'joey',kid_directed_site:p.getKidDirectedSite()});ea=h({root:i.getRoot(),name:l(),url:ha.toString(),style:{display:'none'}});}var ba;function ca(da,ea){if(!p.getClientID()){n.warn('FB.getLoginStatus() called before calling FB.init().');return;}if(da)if(!ea&&ba=='loaded'){da({status:p.getLoginStatus(),authResponse:y()});return;}else w.subscribe('FB.loginStatus',da);if(!ea&&ba=='loading')return;ba='loading';var fa=function(ga){ba='loaded';w.inform('FB.loginStatus',ga);w.clearSubscribers('FB.loginStatus');};aa(fa);}ES('Object','assign',false,w,{getLoginStatus:ca,fetchLoginStatus:aa,setAuthResponse:x,getAuthResponse:y,parseSignedRequest:q.parse,xdResponseWrapper:z});e.exports=w;},null);
__d("toArray",["invariant"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(i){var j=i.length;g(!ES('Array','isArray',false,i)&&(typeof i==='object'||typeof i==='function'));g(typeof j==='number');g(j===0||(j-1) in i);if(i.hasOwnProperty)try{return Array.prototype.slice.call(i);}catch(k){}var l=Array(j);for(var m=0;m<j;m++)l[m]=i[m];return l;}e.exports=h;},null);
__d("createArrayFromMixed",["toArray"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(j){return (!!j&&(typeof j=='object'||typeof j=='function')&&('length' in j)&&!('setInterval' in j)&&(typeof j.nodeType!='number')&&(ES('Array','isArray',false,j)||('callee' in j)||('item' in j)));}function i(j){if(!h(j)){return [j];}else if(ES('Array','isArray',false,j)){return j.slice();}else return g(j);}e.exports=i;},null);
__d("sdk.DOM",["Assert","sdk.UA","createArrayFromMixed","sdk.domReady"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k={};function l(z,aa){var ba=(z.getAttribute(aa)||z.getAttribute(aa.replace(/_/g,'-'))||z.getAttribute(aa.replace(/-/g,'_'))||z.getAttribute(aa.replace(/-/g,''))||z.getAttribute(aa.replace(/_/g,''))||z.getAttribute('data-'+aa)||z.getAttribute('data-'+aa.replace(/_/g,'-'))||z.getAttribute('data-'+aa.replace(/-/g,'_'))||z.getAttribute('data-'+aa.replace(/-/g,''))||z.getAttribute('data-'+aa.replace(/_/g,'')));return ba?String(ba):null;}function m(z,aa){var ba=l(z,aa);return ba?/^(true|1|yes|on)$/.test(ba):null;}function n(z,aa){g.isTruthy(z,'element not specified');g.isString(aa);try{return String(z[aa]);}catch(ba){throw new Error('Could not read property '+aa+' : '+ba.message);}}function o(z,aa){g.isTruthy(z,'element not specified');g.isString(aa);try{z.innerHTML=aa;}catch(ba){throw new Error('Could not set innerHTML : '+ba.message);}}function p(z,aa){g.isTruthy(z,'element not specified');g.isString(aa);var ba=' '+n(z,'className')+' ';return ES(ba,'indexOf',true,' '+aa+' ')>=0;}function q(z,aa){g.isTruthy(z,'element not specified');g.isString(aa);if(!p(z,aa))z.className=n(z,'className')+' '+aa;}function r(z,aa){g.isTruthy(z,'element not specified');g.isString(aa);var ba=new RegExp('\\s*'+aa,'g');z.className=ES(n(z,'className').replace(ba,''),'trim',true);}function s(z,aa,ba){g.isString(z);aa=aa||document.body;ba=ba||'*';if(aa.querySelectorAll)return i(aa.querySelectorAll(ba+'.'+z));var ca=aa.getElementsByTagName(ba),da=[];for(var ea=0,fa=ca.length;ea<fa;ea++)if(p(ca[ea],z))da[da.length]=ca[ea];return da;}function t(z,aa){g.isTruthy(z,'element not specified');g.isString(aa);aa=aa.replace(/-(\w)/g,function(da,ea){return ea.toUpperCase();});var ba=z.currentStyle||document.defaultView.getComputedStyle(z,null),ca=ba[aa];if(/backgroundPosition?/.test(aa)&&/top|left/.test(ca))ca='0%';return ca;}function u(z,aa,ba){g.isTruthy(z,'element not specified');g.isString(aa);aa=aa.replace(/-(\w)/g,function(ca,da){return da.toUpperCase();});z.style[aa]=ba;}function v(z,aa){var ba=true;for(var ca=0,da;da=aa[ca++];)if(!(da in k)){ba=false;k[da]=true;}if(ba)return;if(h.ie()<11){try{document.createStyleSheet().cssText=z;}catch(ea){if(document.styleSheets[0])document.styleSheets[0].cssText+=z;}}else{var fa=document.createElement('style');fa.type='text/css';fa.textContent=z;document.getElementsByTagName('head')[0].appendChild(fa);}}function w(){var z=(document.documentElement&&document.compatMode=='CSS1Compat')?document.documentElement:document.body;return {scrollTop:z.scrollTop||document.body.scrollTop,scrollLeft:z.scrollLeft||document.body.scrollLeft,width:window.innerWidth?window.innerWidth:z.clientWidth,height:window.innerHeight?window.innerHeight:z.clientHeight};}function x(z){g.isTruthy(z,'element not specified');var aa=0,ba=0;do{aa+=z.offsetLeft;ba+=z.offsetTop;}while(z=z.offsetParent);return {x:aa,y:ba};}var y={containsCss:p,addCss:q,removeCss:r,getByClass:s,getStyle:t,setStyle:u,getAttr:l,getBoolAttr:m,getProp:n,html:o,addCssRules:v,getViewportInfo:w,getPosition:x,ready:j};e.exports=y;},null);
__d("sdk.ErrorHandling",["ManagedError","sdk.Runtime","sdk.Scribe","sdk.UA","sdk.feature","wrapFunction"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=k('error_handling',false),n='';function o(u){var v=u._originalError;delete u._originalError;i.log('jssdk_error',{appId:h.getClientID(),error:u.name||u.message,extra:u});throw v;}function p(u){var v={line:u.lineNumber||u.line,message:u.message,name:u.name,script:u.fileName||u.sourceURL||u.script,stack:u.stackTrace||u.stack};v._originalError=u;if(j.chrome()&&/([\w:\.\/]+\.js):(\d+)/.test(u.stack)){v.script=RegExp.$1;v.line=parseInt(RegExp.$2,10);}for(var w in v)(v[w]==null&&delete v[w]);return v;}function q(u,v){return function(){if(!m)return u.apply(this,arguments);try{n=v;return u.apply(this,arguments);}catch(w){if(w instanceof g)throw w;var x=p(w);x.entry=v;var y=ES(Array.prototype.slice.call(arguments),'map',true,function(z){var aa=Object.prototype.toString.call(z);return (/^\[object (String|Number|Boolean|Object|Date)\]$/).test(aa)?z:z.toString();});x.args=ES('JSON','stringify',false,y).substring(0,200);o(x);}finally{n='';}};}function r(u){if(!u.__wrapper)u.__wrapper=function(){try{return u.apply(this,arguments);}catch(v){window.setTimeout(function(){throw v;},0);return false;}};return u.__wrapper;}function s(u,v){return function(w,x){var y=v+':'+(n||'[global]')+':'+(w.name||'[anonymous]'+(arguments.callee.caller.name?'('+arguments.callee.caller.name+')':''));return u(l(w,'entry',y),x);};}if(m){setTimeout=s(setTimeout,'setTimeout');setInterval=s(setInterval,'setInterval');l.setWrapper(q,'entry');}var t={guard:q,unguard:r};e.exports=t;},null);
__d("sdk.Insights",["sdk.Impressions"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={TYPE:{NOTICE:'notice',WARNING:'warn',ERROR:'error'},CATEGORY:{DEPRECATED:'deprecated',APIERROR:'apierror'},log:function(i,j,k){var l={source:'jssdk',type:i,category:j,payload:k};g.log(113,l);},impression:g.impression};e.exports=h;},null);
__d("FB",["sdk.Auth","JSSDKCssConfig","dotAccess","sdk.domReady","sdk.DOM","sdk.ErrorHandling","sdk.Content","DOMWrapper","GlobalCallback","sdk.Insights","Log","sdk.Runtime","sdk.Scribe","JSSDKConfig"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){b.__markCompiled&&b.__markCompiled();var u,v,w=i(t,'api.mode'),x={};u=window.FB={};var y={};q.level=1;o.setPrefix('FB.__globalCallbacks');var z=document.createElement('div');n.setRoot(z);j(function(){q.info('domReady');m.appendHidden(z);if(h.rules)k.addCssRules(h.rules,h.components);});r.subscribe('AccessToken.change',function(ca){if(!ca&&r.getLoginStatus()==='connected')g.getLoginStatus(null,true);});if(i(t,'api.whitelist.length')){v={};ES(t.api.whitelist,'forEach',true,function(ca){v[ca]=1;});}function aa(ca,da,ea,fa){var ga;if(/^_/.test(ea)){ga='hide';}else if(v&&!v[da])ga=w;switch(ga){case 'hide':return;case 'stub':return function(){q.warn('The method FB.%s has been removed from the JS SDK.',da);};break;default:return l.guard(function(){if(ga==='warn'){q.warn('The method FB.%s is not officially supported by '+'Facebook and access to it will soon be removed.',da);if(!x.hasOwnProperty(da)){p.log(p.TYPE.WARNING,p.CATEGORY.DEPRECATED,'FB.'+da);s.log('jssdk_error',{appId:r.getClientID(),error:'Private method used',extra:{args:da}});x[da]=true;}}function ha(oa){if(ES('Array','isArray',false,oa))return ES(oa,'map',true,ha);if(oa&&typeof oa==='object'&&oa.__wrapped)return oa.__wrapped;return typeof oa==='function'&&/^function/.test(oa.toString())?l.unguard(oa):oa;}var ia=ES(Array.prototype.slice.call(arguments),'map',true,ha),ja=ca.apply(fa,ia),ka,la=true;if(ja&&typeof ja==='object'){ka=ES('Object','create',false,ja);ka.__wrapped=ja;for(var ma in ja){var na=ja[ma];if(typeof na!=='function'||ma==='constructor')continue;la=false;ka[ma]=aa(na,da+':'+ma,ma,ja);}}if(!la)return ka;return la?ja:ka;},da);}}function ba(ca,da){var ea=ca?i(u,ca,true):u;ES(ES('Object','keys',false,da),'forEach',true,function(fa){var ga=da[fa];if(typeof ga==='function'){var ha=(ca?ca+'.':'')+fa,ia=aa(ga,ha,fa,da);if(ia)ea[fa]=ia;}else if(typeof ga==='object'){ha=(ca?ca+'.':'')+fa;if(v&&v[ha])ea[fa]=ga;}});}r.setSecure((function(){var ca=/iframe_canvas|app_runner/.test(window.name),da=/dialog/.test(window.name);if(location.protocol=='https:'&&(window==top||!(ca||da)))return true;if(/_fb_https?/.test(window.name))return ES(window.name,'indexOf',true,'_fb_https')!=-1;})());ES('Object','assign',false,y,{provide:ba});e.exports=y;},null);
__d("ArgumentError",["ManagedError"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(i,j){g.prototype.constructor.apply(this,arguments);}h.prototype=new g();h.prototype.constructor=h;e.exports=h;},null);
__d("CORSRequest",["wrapFunction","QueryString"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();function i(l,m){if(!self.XMLHttpRequest)return null;var n=new XMLHttpRequest(),o=function(){};if('withCredentials' in n){n.open(l,m,true);n.setRequestHeader('Content-type','application/x-www-form-urlencoded');}else if(self.XDomainRequest){n=new XDomainRequest();try{n.open(l,m);n.onprogress=n.ontimeout=o;}catch(p){return null;}}else return null;var q={send:function(t){n.send(t);}},r=g(function(){r=o;if('onload' in q)q.onload(n);},'entry','XMLHttpRequest:load'),s=g(function(){s=o;if('onerror' in q)q.onerror(n);},'entry','XMLHttpRequest:error');n.onload=function(){r();};n.onerror=function(){s();};n.onreadystatechange=function(){if(n.readyState==4)if(n.status==200){r();}else s();};return q;}function j(l,m,n,o){n.suppress_http_code=1;var p=h.encode(n);if(m!='post'){l=h.appendToUrl(l,p);p='';}var q=i(m,l);if(!q)return false;q.onload=function(r){o(ES('JSON','parse',false,r.responseText));};q.onerror=function(r){if(r.responseText){o(ES('JSON','parse',false,r.responseText));}else o({error:{type:'http',message:'unknown error',status:r.status}});};q.send(p);return true;}var k={execute:j};e.exports=k;},null);
__d("FlashRequest",["DOMWrapper","Flash","GlobalCallback","QueryString","Queue"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l,m={},n,o;function p(){if(!n)throw new Error('swfUrl has not been set');var s=i.create(function(){l.start(function(u){var v=o.execute(u.method,u.url,u.body);if(!v)throw new Error('Could create request');m[v]=u.callback;});}),t=i.create(function(u,v,w){var x;try{x=ES('JSON','parse',false,decodeURIComponent(w));}catch(y){x={error:{type:'SyntaxError',message:y.message,status:v,raw:w}};}m[u](x);delete m[u];});o=h.embed(n,g.getRoot(),null,{log:false,initCallback:s,requestCallback:t});}function q(s,t,u,v){u.suppress_http_code=1;if(!u.method)u.method=t;var w=j.encode(u);if(t==='get'&&s.length+w.length<2000){s=j.appendToUrl(s,w);w='';}else t='post';if(!l){if(!h.isAvailable())return false;l=new k();p();}l.enqueue({method:t,url:s,body:w,callback:v});return true;}var r={setSwfUrl:function(s){n=s;},execute:q};e.exports=r;},null);
__d("flattenObject",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h){var i={};for(var j in h)if(h.hasOwnProperty(j)){var k=h[j];if(null===k||(void 0)===k){continue;}else if(typeof k=='string'){i[j]=k;}else i[j]=ES('JSON','stringify',false,k);}return i;}e.exports=g;},null);
__d("JSONPRequest",["DOMWrapper","GlobalCallback","QueryString"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=2000;function k(m,n,o,p){var q=document.createElement('script'),r=function(t){r=function(){};h.remove(o.callback);p(t);q.parentNode.removeChild(q);};o.callback=h.create(r);if(!o.method)o.method=n;m=i.appendToUrl(m,o);if(m.length>j){h.remove(o.callback);return false;}q.onerror=function(){r({error:{type:'http',message:'unknown error'}});};var s=function(){setTimeout(function(){r({error:{type:'http',message:'unknown error'}});},0);};if(q.addEventListener){q.addEventListener('load',s,false);}else q.onreadystatechange=function(){if(/loaded|complete/.test(this.readyState))s();};q.src=m;g.getRoot().appendChild(q);return true;}var l={execute:k,MAX_QUERYSTRING_LENGTH:j};e.exports=l;},null);
__d("ApiClient",["ArgumentError","Assert","CORSRequest","FlashRequest","flattenObject","JSONPRequest","Log","ObservableMixin","QueryString","sprintf","sdk.URI","UrlMap","ApiClientConfig","invariant"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){b.__markCompiled&&b.__markCompiled();var u,v,w,x=l.MAX_QUERYSTRING_LENGTH,y={get:true,post:true,'delete':true,put:true},z={fql_query:true,fql_multiquery:true,friends_get:true,notifications_get:true,stream_get:true,users_getinfo:true},aa=[],ba=[],ca=null,da=50,ea=105440539523;function fa(oa,pa,qa,ra){if(w)qa=ES('Object','assign',false,{},w,qa);qa.access_token=qa.access_token||u;qa.pretty=qa.pretty||0;qa=k(qa);var sa={jsonp:l,cors:i,flash:j},ta;if(qa.transport){ta=[qa.transport];delete qa.transport;}else ta=['jsonp','cors','flash'];for(var ua=0;ua<ta.length;ua++){var va=sa[ta[ua]],wa=ES('Object','assign',false,{},qa);if(va.execute(oa,pa,wa,ra))return;}ra({error:{type:'no-transport',message:'Could not find a usable transport for request'}});}function ga(oa,pa,qa,ra,sa,ta){if(ta&&ta.error)ma.inform('request.error',pa,qa,ra,ta,ES('Date','now',false)-sa);ma.inform('request.complete',pa,qa,ra,ta,ES('Date','now',false)-sa);if(oa)oa(ta);}function ha(oa){var pa=oa.shift();h.isString(pa,'Invalid path');if(!/^https?/.test(pa)&&pa.charAt(0)!=='/')pa='/'+pa;var qa,ra={};try{qa=new q(pa);}catch(sa){throw new g(sa.message,sa);}ES(oa,'forEach',true,function(wa){return ra[typeof wa]=wa;});var ta=(ra.string||'get').toLowerCase();h.isTrue(y.hasOwnProperty(ta),p('Invalid method passed to ApiClient: %s',ta));var ua=ra['function'];if(!ua)m.warn('No callback passed to the ApiClient');if(ra.object)qa.addQueryData(k(ra.object));var va=qa.getQueryData();va.method=ta;return {uri:qa,callback:ua,params:va};}function ia(){for(var oa=[],pa=0,qa=arguments.length;pa<qa;pa++)oa.push(arguments[pa]);var ra=ha(oa),sa=ra.uri,ta=ra.callback,ua=ra.params,va=ua.method;if(na(sa,va))va='post';var wa=sa.getProtocol()&&sa.getDomain()?sa.setQueryData({}).toString():r.resolve('graph')+sa.getPath();ma.inform('request.prepare',wa,ua);fa(wa,va=='get'?'get':'post',ua,ES(ga,'bind',true,null,ta,sa.getPath(),va,ua,ES('Date','now',false)));}function ja(){for(var oa=[],pa=0,qa=arguments.length;pa<qa;pa++)oa.push(arguments[pa]);var ra=ha(oa),sa=ra.uri,ta=ra.callback,ua=ra.params,va=ua.method,wa={method:va,relative_url:sa.removeQueryData('method').toString()};if(va.toLowerCase()=='post'){wa.body=o.encode(sa.getQueryData());wa.relative_url=sa.setQueryData({}).toString();}aa.push(wa);ba.push(ta);if(aa.length==da){if(ca)clearTimeout(ca);ka();}else if(!ca)ca=setTimeout(ka,0);}function ka(){t(aa.length>0);t(aa.length===ba.length);var oa=aa,pa=ba;aa=[];ba=[];ca=null;if(oa.length===1){var qa=oa[0],ra=pa[0],sa=qa.body?o.decode(qa.body):null;ia(qa.relative_url,qa.method,sa,ra);return;}ia('/','POST',{batch:oa,include_headers:false,batch_app_id:v||ea},function(ta){if(ES('Array','isArray',false,ta)){ES(ta,'forEach',true,function(ua,va){pa[va](ES('JSON','parse',false,ua.body));});}else ES(pa,'forEach',true,function(ua){return ua({error:{message:'Fatal: batch call failed.'}});});});}function la(oa,pa){h.isObject(oa);h.isString(oa.method,'method missing');if(!pa)m.warn('No callback passed to the ApiClient');var qa=oa.method.toLowerCase().replace('.','_');oa.format='json-strings';oa.api_key=v;var ra=qa in z?'api_read':'api',sa=r.resolve(ra)+'/restserver.php',ta=ES(ga,'bind',true,null,pa,'/restserver.php','get',oa,ES('Date','now',false));fa(sa,'get',oa,ta);}var ma=ES('Object','assign',false,new n(),{setAccessToken:function(oa){u=oa;},setClientID:function(oa){v=oa;},setDefaultParams:function(oa){w=oa;},rest:la,graph:ia,scheduleBatchCall:ja});function na(oa,pa){return (oa.toString().length>x&&pa==='get');}j.setSwfUrl(s.FlashRequest.swfUrl);e.exports=ma;},null);
__d("sdk.PlatformVersioning",["sdk.Runtime","ManagedError"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i=/^v\d+\.\d\d?$/,j={REGEX:i,assertVersionIsSet:function(){if(!g.getVersion())throw new h('init not called with valid version');},assertValidVersion:function(k){if(!i.test(k))throw new h('invalid version specified');}};e.exports=j;},null);
__d("sdk.api",["ApiClient","sdk.PlatformVersioning","sdk.Runtime","sdk.Scribe","sdk.URI","sdk.feature"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=l('should_log_response_error',false),n;i.subscribe('ClientID.change',function(p){return g.setClientID(p);});i.subscribe('AccessToken.change',function(p){n=p;g.setAccessToken(p);});g.setDefaultParams({sdk:'joey'});g.subscribe('request.complete',function(p,q,r,s){var t=false;if(s&&typeof s=='object')if(s.error){if(s.error=='invalid_token'||(s.error.type=='OAuthException'&&s.error.code==190))t=true;}else if(s.error_code)if(s.error_code=='190')t=true;if(t&&n===i.getAccessToken())i.setAccessToken(null);});g.subscribe('request.complete',function(p,q,r,s){if(((p=='/me/permissions'&&q==='delete')||(p=='/restserver.php'&&r.method=='Auth.revokeAuthorization'))&&s===true)i.setAccessToken(null);});g.subscribe('request.error',function(p,q,r,s){if(m&&s.error.type==='http')j.log('jssdk_error',{appId:i.getClientID(),error:'transport',extra:{name:'transport',message:ES('JSON','stringify',false,s.error)}});});function o(p){if(typeof p==='string'){if(i.getIsVersioned()){h.assertVersionIsSet();if(!/https?/.test(p)&&p.charAt(0)!=='/')p='/'+p;p=k(p).setDomain(null).setProtocol(null).toString();if(!h.REGEX.test(p.substring(1,ES(p,'indexOf',true,'/',1))))p='/'+i.getVersion()+p;var q=[p].concat(Array.prototype.slice.call(arguments,1));g.graph.apply(g,q);}else g.graph.apply(g,arguments);}else g.rest.apply(g,arguments);}e.exports=o;},null);
__d("legacy:fb.api",["FB","sdk.api"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();g.provide('',{api:h});},3);
__d("merge",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();'use strict';var g=function(h,i){return ES('Object','assign',false,{},h,i);};e.exports=g;},null);
__d("sdk.AppEvents",["Assert","sdk.Impressions","merge","sdk.Runtime"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k={COMPLETED_REGISTRATION:'fb_mobile_complete_registration',VIEWED_CONTENT:'fb_mobile_content_view',SEARCHED:'fb_mobile_search',RATED:'fb_mobile_rate',COMPLETED_TUTORIAL:'fb_mobile_tutorial_completion',ADDED_TO_CART:'fb_mobile_add_to_cart',ADDED_TO_WISHLIST:'fb_mobile_add_to_wishlist',INITIATED_CHECKOUT:'fb_mobile_initiated_checkout',ADDED_PAYMENT_INFO:'fb_mobile_add_payment_info',ACHIEVED_LEVEL:'fb_mobile_level_achieved',UNLOCKED_ACHIEVEMENT:'fb_mobile_achievement_unlocked',SPENT_CREDITS:'fb_mobile_spent_credits'},l={ACTIVATED_APP:'fb_mobile_activate_app',PURCHASED:'fb_mobile_purchase'},m={CURRENCY:'fb_currency',REGISTRATION_METHOD:'fb_registration_method',CONTENT_TYPE:'fb_content_type',CONTENT_ID:'fb_content_id',SEARCH_STRING:'fb_search_string',SUCCESS:'fb_success',MAX_RATING_VALUE:'fb_max_rating_value',PAYMENT_INFO_AVAILABLE:'fb_payment_info_available',NUM_ITEMS:'fb_num_items',LEVEL:'fb_level',DESCRIPTION:'fb_description'},n=40,o='^[0-9a-zA-Z_]+[0-9a-zA-Z _-]*$';function p(t,u,v,w){g.isTrue(q(u),'Invalid event name: '+u+'. '+'It must be between 1 and '+n+' characters, '+'and must be contain only alphanumerics, _, - or spaces, '+'starting with alphanumeric or _.');var x={ae:1,ev:u,vts:v,canvas:j.isCanvasEnvironment()?1:0};if(w)x.cd=w;h.impression({api_key:t,payload:ES('JSON','stringify',false,x)});}function q(t){if(t===null||t.length===0||t.length>n||!(new RegExp(o)).test(t))return false;return true;}function r(t,u,v,w){var x={};x[m.CURRENCY]=v;p(t,l.PURCHASED,u,i(w,x));}function s(t){p(t,l.ACTIVATED_APP);}e.exports={activateApp:s,logEvent:p,logPurchase:r,isValidEventName:q,EventNames:k,ParameterNames:m};},null);
__d("legacy:fb.appevents",["Assert","sdk.AppEvents","FB","sdk.feature","sdk.Runtime"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();i.provide('AppEvents',{logEvent:function(l,m,n){g.isTrue(j('allow_non_canvas_app_events',false)||k.isCanvasEnvironment(),'You can only use this function in Facebook Canvas environment');g.isString(l,'Invalid eventName');g.maybeNumber(m,'Invalid valueToSum');g.maybeObject(n,'Invalid params');var o=k.getClientID();g.isTrue(o!==null&&o.length>0,'You need to call FB.init() with App ID first.');h.logEvent(o,l,m,n);},logPurchase:function(l,m,n){g.isTrue(j('allow_non_canvas_app_events',false)||k.isCanvasEnvironment(),'You can only use this function in Facebook Canvas environment');g.isNumber(l,'Invalid purchaseAmount');g.isString(m,'Invalid currency');g.maybeObject(n,'Invalid params');var o=k.getClientID();g.isTrue(o!==null&&o.length>0,'You need to call FB.init() with App ID first.');h.logPurchase(o,l,m,n);},activateApp:function(){g.isTrue(j('allow_non_canvas_app_events',false)||k.isCanvasEnvironment(),'You can only use this function in Facebook Canvas environment');var l=k.getClientID();g.isTrue(l!==null&&l.length>0,'You need to call FB.init() with App ID first.');h.activateApp(l);},EventNames:h.EventNames,ParameterNames:h.ParameterNames});},3);
__d("sdk.Canvas.Environment",["sdk.RPC"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(k){g.remote.getPageInfo(function(l){k(l.result);});}function i(k,l){g.remote.scrollTo({x:k||0,y:l||0});}g.stub('getPageInfo');g.stub('scrollTo');var j={getPageInfo:h,scrollTo:i};e.exports=j;},null);
__d("sdk.fbt",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={_:function(h){return typeof h==='string'?h:h[0];}};e.exports=g;},null);
__d("sdk.Dialog",["sdk.Canvas.Environment","sdk.Content","sdk.DOM","DOMEventListener","ObservableMixin","sdk.Runtime","Type","sdk.UA","sdk.fbt","sdk.feature"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();var q=590,r=500,s=240,t=575,u=function(){var y;if(p('dialog_resize_refactor',false)){var z=v();y=z&&(z.height>=q||z.width>=r);}else y=!!n.ipad();u=function(){return y;};return y;};function v(){if(p('dialog_resize_refactor',false)){var y=i.getViewportInfo();if(y.height&&y.width)return {width:Math.min(y.width,q),height:Math.min(y.height,r)};}return null;}var w=m.extend({constructor:function y(z,aa){this.parent();this.id=z;this.display=aa;this._e2e={};if(!x._dialogs){x._dialogs={};x._addOrientationHandler();}x._dialogs[z]=this;this.trackEvent('init');},trackEvent:function(y,z){if(this._e2e[y])return this;this._e2e[y]=z||ES('Date','now',false);if(y=='close')this.inform('e2e:end',this._e2e);return this;},trackEvents:function(y){if(typeof y==='string')y=ES('JSON','parse',false,y);for(var z in y)if(y.hasOwnProperty(z))this.trackEvent(z,y[z]);return this;}},k),x={newInstance:function(y,z){return new w(y,z);},_dialogs:null,_lastYOffset:0,_loaderEl:null,_overlayEl:null,_stack:[],_active:null,get:function(y){return x._dialogs[y];},_findRoot:function(y){while(y){if(i.containsCss(y,'fb_dialog'))return y;y=y.parentNode;}},_createWWWLoader:function(y){y=y?y:460;return x.create({content:('<div class="dialog_title">'+'  <a id="fb_dialog_loader_close">'+'    <div class="fb_dialog_close_icon"></div>'+'  </a>'+'  <span>Facebook</span>'+'  <div style="clear:both;"></div>'+'</div>'+'<div class="dialog_content"></div>'+'<div class="dialog_footer"></div>'),width:y});},_createMobileLoader:function(){var y=n.nativeApp()?'':('<table>'+'  <tbody>'+'    <tr>'+'      <td class="header_left">'+'        <label class="touchable_button">'+'          <input type="submit" value="'+o._("\u30ad\u30e3\u30f3\u30bb\u30eb")+'"'+'            id="fb_dialog_loader_close"/>'+'        </label>'+'      </td>'+'      <td class="header_center">'+'        <div>'+'         '+o._("\u8aad\u307f\u8fbc\u307f\u4e2d...")+'        </div>'+'      </td>'+'      <td class="header_right">'+'      </td>'+'    </tr>'+'  </tbody>'+'</table>');return x.create({classes:'loading'+(u()?' centered':''),content:('<div class="dialog_header">'+y+'</div>')});},_restoreBodyPosition:function(){if(!u()){var y=document.getElementsByTagName('body')[0];i.removeCss(y,'fb_hidden');}},_showTabletOverlay:function(){if(!u())return;if(!x._overlayEl){x._overlayEl=document.createElement('div');x._overlayEl.setAttribute('id','fb_dialog_ipad_overlay');h.append(x._overlayEl,null);}x._overlayEl.className='';},_hideTabletOverlay:function(){if(u())x._overlayEl.className='hidden';},showLoader:function(y,z){x._showTabletOverlay();if(!x._loaderEl)x._loaderEl=x._findRoot(n.mobile()?x._createMobileLoader():x._createWWWLoader(z));if(!y)y=function(){};var aa=document.getElementById('fb_dialog_loader_close');i.removeCss(aa,'fb_hidden');aa.onclick=function(){x._hideLoader();x._restoreBodyPosition();x._hideTabletOverlay();y();};var ba=document.getElementById('fb_dialog_ipad_overlay');if(ba)ba.ontouchstart=aa.onclick;x._makeActive(x._loaderEl);},_hideLoader:function(){if(x._loaderEl&&x._loaderEl==x._active)x._loaderEl.style.top='-10000px';},_makeActive:function(y){x._setDialogSizes();x._lowerActive();x._active=y;if(l.isEnvironment(l.ENVIRONMENTS.CANVAS))g.getPageInfo(function(z){x._centerActive(z);});x._centerActive();},_lowerActive:function(){if(!x._active)return;x._active.style.top='-10000px';x._active=null;},_removeStacked:function(y){x._stack=ES(x._stack,'filter',true,function(z){return z!=y;});},_centerActive:function(y){var z=x._active;if(!z)return;var aa=i.getViewportInfo(),ba=parseInt(z.offsetWidth,10),ca=parseInt(z.offsetHeight,10),da=aa.scrollLeft+(aa.width-ba)/2,ea=(aa.height-ca)/2.5;if(da<ea)ea=da;var fa=aa.height-ca-ea,ga=(aa.height-ca)/2;if(y)ga=y.scrollTop-y.offsetTop+(y.clientHeight-ca)/2;if(ga<ea){ga=ea;}else if(ga>fa)ga=fa;ga+=aa.scrollTop;if(n.mobile()){var ha=100;if(u()){ha+=(aa.height-ca)/2;}else{var ia=document.getElementsByTagName('body')[0];i.addCss(ia,'fb_hidden');if(p('dialog_resize_refactor',false))ia.style.width='auto';ga=10000;}var ja=i.getByClass('fb_dialog_padding',z);if(ja.length)ja[0].style.height=ha+'px';}z.style.left=(da>0?da:0)+'px';z.style.top=(ga>0?ga:0)+'px';},_setDialogSizes:function(){if(!n.mobile()||u())return;for(var y in x._dialogs)if(x._dialogs.hasOwnProperty(y)){var z=document.getElementById(y);if(z){z.style.width=x.getDefaultSize().width+'px';z.style.height=x.getDefaultSize().height+'px';}}},getDefaultSize:function(){if(n.mobile()){var y=v();if(y)return y;if(n.ipad())return {width:r,height:q};if(n.android()){return {width:screen.availWidth,height:screen.availHeight};}else{var z=window.innerWidth,aa=window.innerHeight,ba=z/aa>1.2;return {width:z,height:Math.max(aa,(ba?screen.width:screen.height))};}}return {width:t,height:s};},_handleOrientationChange:function(y){var z=p('dialog_resize_refactor',false)?i.getViewportInfo().width:screen.availWidth;if(n.android()&&z==x._availScreenWidth){setTimeout(x._handleOrientationChange,50);return;}x._availScreenWidth=z;if(u()){x._centerActive();}else{var aa=x.getDefaultSize().width;for(var ba in x._dialogs)if(x._dialogs.hasOwnProperty(ba)){var ca=document.getElementById(ba);if(ca)ca.style.width=aa+'px';}}},_addOrientationHandler:function(){if(!n.mobile())return;var y="onorientationchange" in window?'orientationchange':'resize';x._availScreenWidth=p('dialog_resize_refactor',false)?i.getViewportInfo().width:screen.availWidth;j.add(window,y,x._handleOrientationChange);},create:function(y){y=y||{};var z=document.createElement('div'),aa=document.createElement('div'),ba='fb_dialog';if(y.closeIcon&&y.onClose){var ca=document.createElement('a');ca.className='fb_dialog_close_icon';ca.onclick=y.onClose;z.appendChild(ca);}ba+=' '+(y.classes||'');if(n.ie()){ba+=' fb_dialog_legacy';ES(['vert_left','vert_right','horiz_top','horiz_bottom','top_left','top_right','bottom_left','bottom_right'],'forEach',true,function(fa){var ga=document.createElement('span');ga.className='fb_dialog_'+fa;z.appendChild(ga);});}else ba+=n.mobile()?' fb_dialog_mobile':' fb_dialog_advanced';if(y.content)h.append(y.content,aa);z.className=ba;var da=parseInt(y.width,10);if(!isNaN(da))z.style.width=da+'px';aa.className='fb_dialog_content';z.appendChild(aa);if(n.mobile()){var ea=document.createElement('div');ea.className='fb_dialog_padding';z.appendChild(ea);}h.append(z);if(y.visible)x.show(z);return aa;},show:function(y){var z=x._findRoot(y);if(z){x._removeStacked(z);x._hideLoader();x._makeActive(z);x._stack.push(z);if('fbCallID' in y)x.get(y.fbCallID).inform('iframe_show').trackEvent('show');}},hide:function(y){var z=x._findRoot(y);x._hideLoader();if(z==x._active){x._lowerActive();x._restoreBodyPosition();x._hideTabletOverlay();if('fbCallID' in y)x.get(y.fbCallID).inform('iframe_hide').trackEvent('hide');}},remove:function(y){y=x._findRoot(y);if(y){var z=x._active==y;x._removeStacked(y);if(z){x._hideLoader();if(x._stack.length>0){x.show(x._stack.pop());}else{x._lowerActive();x._restoreBodyPosition();x._hideTabletOverlay();}}else if(x._active===null&&x._stack.length>0)x.show(x._stack.pop());setTimeout(function(){y.parentNode.removeChild(y);},3000);}},isActive:function(y){var z=x._findRoot(y);return z&&z===x._active;}};e.exports=x;},null);
__d("sdk.Frictionless",["sdk.Auth","sdk.api","sdk.Event","sdk.Dialog"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k={_allowedRecipients:{},_useFrictionless:false,_updateRecipients:function(){k._allowedRecipients={};h('/me/apprequestformerrecipients',function(l){if(!l||l.error)return;ES(l.data,'forEach',true,function(m){k._allowedRecipients[m.recipient_id]=true;});});},init:function(){k._useFrictionless=true;g.getLoginStatus(function(l){if(l.status=='connected')k._updateRecipients();});i.subscribe('auth.login',function(l){if(l.authResponse)k._updateRecipients();});},_processRequestResponse:function(l,m){return function(n){var o=n&&n.updated_frictionless;if(k._useFrictionless&&o)k._updateRecipients();if(n){if(!m&&n.frictionless){j._hideLoader();j._restoreBodyPosition();j._hideIPadOverlay();}delete n.frictionless;delete n.updated_frictionless;}l&&l(n);};},isAllowed:function(l){if(!l)return false;if(typeof l==='number')return l in k._allowedRecipients;if(typeof l==='string')l=l.split(',');l=ES(l,'map',true,function(o){return ES(String(o),'trim',true);});var m=true,n=false;ES(l,'forEach',true,function(o){m=m&&o in k._allowedRecipients;n=true;});return m&&n;}};i.subscribe('init:post',function(l){if(l.frictionlessRequests)k.init();});e.exports=k;},null);
__d("sdk.Native",["Log","sdk.UA"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i='fbNativeReady',j={onready:function(k){if(!h.nativeApp()){g.error('FB.Native.onready only works when the page is rendered '+'in a WebView of the native Facebook app. Test if this is the '+'case calling FB.UA.nativeApp()');return;}if(window.__fbNative&&!this.nativeReady)ES('Object','assign',false,this,window.__fbNative);if(this.nativeReady){k();}else{var l=function(m){window.removeEventListener(i,l);this.onready(k);};window.addEventListener(i,l,false);}}};e.exports=j;},null);
__d("resolveURI",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h){if(!h)return window.location.href;h=h.replace(/&/g,'&amp;').replace(/"/g,'&quot;');var i=document.createElement('div');i.innerHTML='<a href="'+h+'"></a>';return i.firstChild.href;}e.exports=g;},null);
__d("sdk.UIServer",["sdk.Auth","sdk.Content","sdk.DOM","sdk.Dialog","sdk.Event","sdk.Frictionless","Log","sdk.Native","QueryString","sdk.RPC","sdk.Runtime","JSSDKConfig","sdk.UA","UrlMap","sdk.XD","createObjectFrom","sdk.feature","flattenObject","sdk.getContextType","guid","insertIframe","resolveURI"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba){b.__markCompiled&&b.__markCompiled();var ca={transform:function(ia){if(ia.params.display==='touch'&&ia.params.access_token&&window.postMessage){ia.params.channel=ha._xdChannelHandler(ia.id,'parent');if(!s.nativeApp())ia.params.in_iframe=1;return ia;}else return ha.genericTransform(ia);},getXdRelation:function(ia){var ja=ia.display;if(ja==='touch'&&window.postMessage&&ia.in_iframe)return 'parent';return ha.getXdRelation(ia);}},da={'stream.share':{size:{width:670,height:340},url:'sharer.php',transform:function(ia){if(!ia.params.u)ia.params.u=window.location.toString();ia.params.display='popup';return ia;}},apprequests:{transform:function(ia){ia=ca.transform(ia);ia.params.frictionless=l&&l._useFrictionless;if(ia.params.frictionless){if(l.isAllowed(ia.params.to)){ia.params.display='iframe';ia.params.in_iframe=true;ia.hideLoader=true;}ia.cb=l._processRequestResponse(ia.cb,ia.hideLoader);}ia.closeIcon=false;return ia;},getXdRelation:ca.getXdRelation},feed:ca,'permissions.oauth':{url:'dialog/oauth',size:{width:(s.mobile()?null:475),height:(s.mobile()?null:183)},transform:function(ia){if(!q.getClientID()){m.error('FB.login() called before FB.init().');return;}if(g.getAuthResponse()&&!ia.params.scope&&!ia.params.auth_type){m.error('FB.login() called when user is already connected.');ia.cb&&ia.cb({status:q.getLoginStatus(),authResponse:g.getAuthResponse()});return;}var ja=ia.cb,ka=ia.id;delete ia.cb;var la=ES('Object','keys',false,ES('Object','assign',false,ia.params.response_type?v(ia.params.response_type.split(',')):{},{token:true,signed_request:true})).join(',');if(ia.params.display==='async'){ES('Object','assign',false,ia.params,{client_id:q.getClientID(),origin:y(),response_type:la,domain:location.hostname});ia.cb=g.xdResponseWrapper(ja,g.getAuthResponse(),'permissions.oauth');}else ES('Object','assign',false,ia.params,{client_id:q.getClientID(),redirect_uri:ba(ha.xdHandler(ja,ka,'opener',g.getAuthResponse(),'permissions.oauth')),origin:y(),response_type:la,domain:location.hostname});return ia;}},'auth.logout':{url:'logout.php',transform:function(ia){if(!q.getClientID()){m.error('FB.logout() called before calling FB.init().');}else if(!g.getAuthResponse()){m.error('FB.logout() called without an access token.');}else{ia.params.next=ha.xdHandler(ia.cb,ia.id,'parent',g.getAuthResponse(),'logout');return ia;}}},'login.status':{url:'dialog/oauth',transform:function(ia){var ja=ia.cb,ka=ia.id;delete ia.cb;ES('Object','assign',false,ia.params,{client_id:q.getClientID(),redirect_uri:ha.xdHandler(ja,ka,'parent',g.getAuthResponse(),'login_status'),origin:y(),response_type:'token,signed_request,code',domain:location.hostname});return ia;}},pay:{size:{width:555,height:120},connectDisplay:'popup'}},ea={};function fa(ia,ja){ea[ja]=true;return function(ka){delete ea[ja];ia(ka);};}function ga(ia){if(!w('should_force_single_dialog_instance',true))return false;var ja=ia.method.toLowerCase();if(ja==='pay'&&ia.display==='async')return true;return false;}var ha={Methods:da,_loadedNodes:{},_defaultCb:{},_resultToken:'"xxRESULTTOKENxx"',genericTransform:function(ia){if(ia.params.display=='dialog'||ia.params.display=='iframe')ES('Object','assign',false,ia.params,{display:'iframe',channel:ha._xdChannelHandler(ia.id,'parent.parent')},true);return ia;},checkOauthDisplay:function(ia){var ja=ia.scope||ia.perms||q.getScope();if(!ja)return ia.display;var ka=ja.split(/\s|,/g);for(var la=0;la<ka.length;la++)if(!r.initSitevars.iframePermissions[ES(ka[la],'trim',true)])return 'popup';return ia.display;},prepareCall:function(ia,ja){var ka=ia.method.toLowerCase(),la=ha.Methods.hasOwnProperty(ka)?ES('Object','assign',false,{},ha.Methods[ka]):{},ma=z(),na=q.getSecure()||(ka!=='auth.status'&&ka!='login.status');ES('Object','assign',false,ia,{app_id:q.getClientID(),locale:q.getLocale(),sdk:'joey',access_token:na&&q.getAccessToken()||(void 0)});ia.display=ha.getDisplayMode(la,ia);if(!la.url)la.url='dialog/'+ka;if((la.url=='dialog/oauth'||la.url=='dialog/permissions.request')&&(ia.display=='iframe'||(ia.display=='touch'&&ia.in_iframe)))ia.display=ha.checkOauthDisplay(ia);if(ia.display=='popup')delete ia.access_token;if(q.getIsVersioned()&&la.url.substring(0,7)==='dialog/')la.url=ia.version+'/'+la.url;if(ga(ia)){if(ea[ka]){var oa='Dialog "'+ka+'" is trying to run more than once.';m.warn(oa);ja({error_code:-100,error_message:oa});return;}ja=fa(ja,ka);}var pa={cb:ja,id:ma,size:la.size||ha.getDefaultSize(),url:t.resolve(ia.display=='touch'?'m':'www',na)+'/'+la.url,params:ia,name:ka,dialog:j.newInstance(ma,ia.display)},qa=la.transform?la.transform:ha.genericTransform;if(qa){pa=qa(pa);if(!pa)return;}if(ia.display==='touch'&&ia.in_iframe)pa.params.parent_height=window.innerHeight;var ra=la.getXdRelation||ha.getXdRelation,sa=ra(pa.params);if(!(pa.id in ha._defaultCb)&&!('next' in pa.params)&&!('redirect_uri' in pa.params))pa.params.next=ha._xdResult(pa.cb,pa.id,sa,true);if(sa==='parent')ES('Object','assign',false,pa.params,{channel_url:ha._xdChannelHandler(ma,'parent.parent')},true);pa=ha.prepareParams(pa);return pa;},prepareParams:function(ia){if(ia.params.display!=='async')delete ia.params.method;ia.params=x(ia.params);var ja=o.encode(ia.params);if(!s.nativeApp()&&ha.urlTooLongForIE(ia.url+'?'+ja)){ia.post=true;}else if(ja)ia.url+='?'+ja;return ia;},urlTooLongForIE:function(ia){return ia.length>2000;},getDisplayMode:function(ia,ja){if(ja.display==='hidden'||ja.display==='none')return ja.display;var ka=q.isEnvironment(q.ENVIRONMENTS.CANVAS)||q.isEnvironment(q.ENVIRONMENTS.PAGETAB);if(ka&&!ja.display)return 'async';if(s.mobile()||ja.display==='touch')return 'touch';if(!q.getAccessToken()&&(ja.display=='iframe'||ja.display=='dialog')&&!ia.loggedOutIframe){m.error('"dialog" mode can only be used when the user is connected.');return 'popup';}if(ia.connectDisplay&&!ka)return ia.connectDisplay;return ja.display||(q.getAccessToken()?'dialog':'popup');},getXdRelation:function(ia){var ja=ia.display;if(ja==='popup'||ja==='touch')return 'opener';if(ja==='dialog'||ja==='iframe'||ja==='hidden'||ja==='none')return 'parent';if(ja==='async')return 'parent.frames['+window.name+']';},popup:function(ia){var ja=typeof window.screenX!='undefined'?window.screenX:window.screenLeft,ka=typeof window.screenY!='undefined'?window.screenY:window.screenTop,la=typeof window.outerWidth!='undefined'?window.outerWidth:document.documentElement.clientWidth,ma=typeof window.outerHeight!='undefined'?window.outerHeight:(document.documentElement.clientHeight-22),na=s.mobile()?null:ia.size.width,oa=s.mobile()?null:ia.size.height,pa=(ja<0)?window.screen.width+ja:ja,qa=parseInt(pa+((la-na)/2),10),ra=parseInt(ka+((ma-oa)/2.5),10),sa=[];if(na!==null)sa.push('width='+na);if(oa!==null)sa.push('height='+oa);sa.push('left='+qa);sa.push('top='+ra);sa.push('scrollbars=1');if(ia.name=='permissions.request'||ia.name=='permissions.oauth')sa.push('location=1,toolbar=0');sa=sa.join(',');var ta;if(ia.post){ta=window.open('about:blank',ia.id,sa);if(ta){ha.setLoadedNode(ia,ta,'popup');h.submitToTarget({url:ia.url,target:ia.id,params:ia.params});}}else{ta=window.open(ia.url,ia.id,sa);if(ta)ha.setLoadedNode(ia,ta,'popup');}if(!ta)return;if(ia.id in ha._defaultCb)ha._popupMonitor();},setLoadedNode:function(ia,ja,ka){if(ia.params&&ia.params.display!='popup')ja.fbCallID=ia.id;ja={node:ja,type:ka,fbCallID:ia.id};ha._loadedNodes[ia.id]=ja;},getLoadedNode:function(ia){var ja=typeof ia=='object'?ia.id:ia,ka=ha._loadedNodes[ja];return ka?ka.node:null;},hidden:function(ia){ia.className='FB_UI_Hidden';ia.root=h.appendHidden('');ha._insertIframe(ia);},iframe:function(ia){ia.className='FB_UI_Dialog';var ja=function(){ha._triggerDefault(ia.id);};ia.root=j.create({onClose:ja,closeIcon:ia.closeIcon===(void 0)?true:ia.closeIcon,classes:(s.ipad()?'centered':'')});if(!ia.hideLoader)j.showLoader(ja,ia.size.width);i.addCss(ia.root,'fb_dialog_iframe');ha._insertIframe(ia);},touch:function(ia){if(ia.params&&ia.params.in_iframe){if(ia.ui_created){j.showLoader(function(){ha._triggerDefault(ia.id);},0);}else ha.iframe(ia);}else if(s.nativeApp()&&!ia.ui_created){ia.frame=ia.id;n.onready(function(){ha.setLoadedNode(ia,n.open(ia.url+'#cb='+ia.frameName),'native');});ha._popupMonitor();}else if(!ia.ui_created)ha.popup(ia);},async:function(ia){ia.params.redirect_uri=location.protocol+'//'+location.host+location.pathname;delete ia.params.access_token;p.remote.showDialog(ia.params,function(ja){var ka=ja.result;if(ka&&ka.e2e){var la=j.get(ia.id);la.trackEvents(ka.e2e);la.trackEvent('close');delete ka.e2e;}ia.cb(ka);});},getDefaultSize:function(){return j.getDefaultSize();},_insertIframe:function(ia){ha._loadedNodes[ia.id]=false;var ja=function(ka){if(ia.id in ha._loadedNodes)ha.setLoadedNode(ia,ka,'iframe');};if(ia.post){aa({url:'about:blank',root:ia.root,className:ia.className,width:ia.size.width,height:ia.size.height,id:ia.id,onInsert:ja,onload:function(ka){h.submitToTarget({url:ia.url,target:ka.name,params:ia.params});}});}else aa({url:ia.url,root:ia.root,className:ia.className,width:ia.size.width,height:ia.size.height,id:ia.id,name:ia.frameName,onInsert:ja});},_handleResizeMessage:function(ia,ja){var ka=ha.getLoadedNode(ia);if(!ka)return;if(ja.height)ka.style.height=ja.height+'px';if(ja.width)ka.style.width=ja.width+'px';u.inform('resize.ack',ja||{},'parent.frames['+ka.name+']');if(!j.isActive(ka))j.show(ka);},_triggerDefault:function(ia){ha._xdRecv({frame:ia},ha._defaultCb[ia]||function(){});},_popupMonitor:function(){var ia;for(var ja in ha._loadedNodes)if(ha._loadedNodes.hasOwnProperty(ja)&&ja in ha._defaultCb){var ka=ha._loadedNodes[ja];if(ka.type!='popup'&&ka.type!='native')continue;var la=ka.node;try{if(la.closed){ha._triggerDefault(ja);}else ia=true;}catch(ma){}}if(ia&&!ha._popupInterval){ha._popupInterval=setInterval(ha._popupMonitor,100);}else if(!ia&&ha._popupInterval){clearInterval(ha._popupInterval);ha._popupInterval=null;}},_xdChannelHandler:function(ia,ja){return u.handler(function(ka){var la=ha.getLoadedNode(ia);if(!la)return;if(ka.type=='resize'){ha._handleResizeMessage(ia,ka);}else if(ka.type=='hide'){j.hide(la);}else if(ka.type=='rendered'){var ma=j._findRoot(la);j.show(ma);}else if(ka.type=='fireevent')k.fire(ka.event);},ja,true,null);},_xdNextHandler:function(ia,ja,ka,la){if(la)ha._defaultCb[ja]=ia;return u.handler(function(ma){ha._xdRecv(ma,ia);},ka)+'&frame='+ja;},_xdRecv:function(ia,ja){var ka=ha.getLoadedNode(ia.frame);if(ka)if(ka.close){try{ka.close();if(/iPhone.*Version\/(5|6)/.test(navigator.userAgent)&&RegExp.$1!=='5')window.focus();ha._popupCount--;}catch(la){}}else if(i.containsCss(ka,'FB_UI_Hidden')){setTimeout(function(){ka.parentNode.parentNode.removeChild(ka.parentNode);},3000);}else if(i.containsCss(ka,'FB_UI_Dialog'))j.remove(ka);delete ha._loadedNodes[ia.frame];delete ha._defaultCb[ia.frame];if(ia.e2e){var ma=j.get(ia.frame);ma.trackEvents(ia.e2e);ma.trackEvent('close');delete ia.e2e;}ja(ia);},_xdResult:function(ia,ja,ka,la){return (ha._xdNextHandler(function(ma){ia&&ia(ma.result&&ma.result!=ha._resultToken&&ES('JSON','parse',false,ma.result));},ja,ka,la)+'&result='+encodeURIComponent(ha._resultToken));},xdHandler:function(ia,ja,ka,la,ma){return ha._xdNextHandler(g.xdResponseWrapper(ia,la,ma),ja,ka,true);}};p.stub('showDialog');e.exports=ha;},null);
__d("sdk.ui",["Assert","sdk.Impressions","Log","sdk.PlatformVersioning","sdk.Runtime","sdk.UIServer","sdk.feature"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();function n(o,p){g.isObject(o);g.maybeFunction(p);if(k.getIsVersioned()){j.assertVersionIsSet();if(o.version){j.assertValidVersion(o.version);}else o.version=k.getVersion();}o=ES('Object','assign',false,{},o);if(!o.method){i.error('"method" is a required parameter for FB.ui().');return null;}if(o.method=='pay.prompt')o.method='pay';var q=o.method;if(o.redirect_uri){i.warn('When using FB.ui, you should not specify a redirect_uri.');delete o.redirect_uri;}if((q=='permissions.request'||q=='permissions.oauth')&&(o.display=='iframe'||o.display=='dialog'))o.display=l.checkOauthDisplay(o);var r=m('e2e_tracking',true);if(r)o.e2e={};var s=l.prepareCall(o,p||function(){});if(!s)return null;var t=s.params.display;if(t==='dialog'){t='iframe';}else if(t==='none')t='hidden';var u=l[t];if(!u){i.error('"display" must be one of "popup", '+'"dialog", "iframe", "touch", "async", "hidden", or "none"');return null;}if(r)s.dialog.subscribe('e2e:end',function(v){v.method=q;v.display=t;i.debug('e2e: %s',ES('JSON','stringify',false,v));h.log(114,{payload:v});});u(s);return s.dialog;}e.exports=n;},null);
__d("legacy:fb.auth",["sdk.Auth","sdk.Cookie","copyProperties","sdk.Event","FB","Log","sdk.Runtime","sdk.SignedRequest","sdk.ui"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();k.provide('',{getLoginStatus:function(){return g.getLoginStatus.apply(g,arguments);},getAuthResponse:function(){return g.getAuthResponse();},getAccessToken:function(){return m.getAccessToken()||null;},getUserID:function(){return m.getUserID()||m.getCookieUserID();},login:function(p,q){if(q&&q.perms&&!q.scope){q.scope=q.perms;delete q.perms;l.warn('OAuth2 specification states that \'perms\' '+'should now be called \'scope\'.  Please update.');}var r=m.isEnvironment(m.ENVIRONMENTS.CANVAS)||m.isEnvironment(m.ENVIRONMENTS.PAGETAB);o(i({method:'permissions.oauth',display:r?'async':'popup',domain:location.hostname},q||{}),p);},logout:function(p){o({method:'auth.logout',display:'hidden'},p);}});g.subscribe('logout',ES(j.fire,'bind',true,j,'auth.logout'));g.subscribe('login',ES(j.fire,'bind',true,j,'auth.login'));g.subscribe('authresponse.change',ES(j.fire,'bind',true,j,'auth.authResponseChange'));g.subscribe('status.change',ES(j.fire,'bind',true,j,'auth.statusChange'));j.subscribe('init:post',function(p){if(p.status)g.getLoginStatus();if(m.getClientID())if(p.authResponse){g.setAuthResponse(p.authResponse,'connected');}else if(m.getUseCookie()){var q=h.loadSignedRequest(),r;if(q){try{r=n.parse(q);}catch(s){h.clearSignedRequestCookie();}if(r&&r.user_id)m.setCookieUserID(r.user_id);}h.loadMeta();}});},3);
__d("sdk.Canvas.IframeHandling",["DOMWrapper","sdk.RPC"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i=null,j;function k(){var o=g.getWindow().document,p=o.body,q=o.documentElement,r=Math.max(p.offsetTop,0),s=Math.max(q.offsetTop,0),t=p.scrollHeight+r,u=p.offsetHeight+r,v=q.scrollHeight+s,w=q.offsetHeight+s;return Math.max(t,u,v,w);}function l(o){if(typeof o!='object')o={};var p=0,q=0;if(!o.height){o.height=k();p=16;q=4;}if(!o.frame)o.frame=window.name||'iframe_canvas';if(j){var r=j.height,s=o.height-r;if(s<=q&&s>=-p)return false;}j=o;h.remote.setSize(o);return true;}function m(o,p){if(p===(void 0)&&typeof o==='number'){p=o;o=true;}if(o||o===(void 0)){if(i===null)i=setInterval(function(){l();},p||100);l();}else if(i!==null){clearInterval(i);i=null;}}h.stub('setSize');var n={setSize:l,setAutoGrow:m};e.exports=n;},null);
__d("sdk.Canvas.Navigation",["sdk.RPC"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(j){g.local.navigate=function(k){j({path:k});};g.remote.setNavigationEnabled(true);}g.stub('setNavigationEnabled');var i={setUrlHandler:h};e.exports=i;},null);
__d("sdk.Canvas.Plugin",["Log","sdk.RPC","sdk.Runtime","sdk.UA","sdk.api","createArrayFromMixed"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m='CLSID:D27CDB6E-AE6D-11CF-96B8-444553540000',n='CLSID:444785F1-DE89-4295-863A-D46C3A781394',o=null,p=j.osx()&&j.osx.getVersionParts(),q=!((p&&p[0]>10&&p[1]>10)&&(j.chrome()>=31||j.webkit()>=537.71||j.firefox()>=25));function r(ba){ba._hideunity_savedstyle={};ba._hideunity_savedstyle.left=ba.style.left;ba._hideunity_savedstyle.position=ba.style.position;ba._hideunity_savedstyle.width=ba.style.width;ba._hideunity_savedstyle.height=ba.style.height;ba.style.left='-10000px';ba.style.position='absolute';ba.style.width='1px';ba.style.height='1px';}function s(ba){if(ba._hideunity_savedstyle){ba.style.left=ba._hideunity_savedstyle.left;ba.style.position=ba._hideunity_savedstyle.position;ba.style.width=ba._hideunity_savedstyle.width;ba.style.height=ba._hideunity_savedstyle.height;}}function t(ba){ba._old_visibility=ba.style.visibility;ba.style.visibility='hidden';}function u(ba){ba.style.visibility=ba._old_visibility||'';delete ba._old_visibility;}function v(ba){var ca=ba.type?ba.type.toLowerCase():null,da=ca==='application/x-shockwave-flash'||(ba.classid&&ba.classid.toUpperCase()==m);if(!da)return false;var ea=/opaque|transparent/i;if(ea.test(ba.getAttribute('wmode')))return false;for(var fa=0;fa<ba.childNodes.length;fa++){var ga=ba.childNodes[fa];if(/param/i.test(ga.nodeName)&&/wmode/i.test(ga.name)&&ea.test(ga.value))return false;}return true;}function w(ba){var ca=ba.type?ba.type.toLowerCase():null;return ca==='application/vnd.unity'||(ba.classid&&ba.classid.toUpperCase()==n);}function x(ba){var ca=l(window.document.getElementsByTagName('object'));ca=ca.concat(l(window.document.getElementsByTagName('embed')));var da=false,ea=false;ES(ca,'forEach',true,function(ga){var ha=v(ga),ia=q&&w(ga);if(!ha&&!ia)return;da=da||ha;ea=ea||ia;var ja=function(){if(ba.state==='opened'){if(ha){t(ga);}else r(ga);}else if(ha){u(ga);}else s(ga);};if(o){g.info('Calling developer specified callback');var ka={state:ba.state,elem:ga};o(ka);setTimeout(ja,200);}else ja();});if(Math.random()<=1/1000){var fa={unity:ea,flash:da};k(i.getClientID()+'/occludespopups','post',fa);}}h.local.hidePluginObjects=function(){g.info('hidePluginObjects called');x({state:'opened'});};h.local.showPluginObjects=function(){g.info('showPluginObjects called');x({state:'closed'});};h.local.showFlashObjects=h.local.showPluginObjects;h.local.hideFlashObjects=h.local.hidePluginObjects;function y(){t();r();}function z(){u();s();}var aa={_setHidePluginCallback:function(ba){o=ba;},hidePluginElement:y,showPluginElement:z};e.exports=aa;},null);
__d("sdk.Canvas.Tti",["sdk.RPC","sdk.Runtime"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();function i(n,o){var p={appId:h.getClientID(),time:ES('Date','now',false),name:o},q=[p];if(n)q.push(function(r){n(r.result);});g.remote.logTtiMessage.apply(null,q);}function j(){i(null,'StartIframeAppTtiTimer');}function k(n){i(n,'StopIframeAppTtiTimer');}function l(n){i(n,'RecordIframeAppTti');}g.stub('logTtiMessage');var m={setDoneLoading:l,startTimer:j,stopTimer:k};e.exports=m;},null);
__d("legacy:fb.canvas",["Assert","sdk.Canvas.Environment","sdk.Event","FB","sdk.Canvas.IframeHandling","sdk.Canvas.Navigation","sdk.Canvas.Plugin","sdk.RPC","sdk.Runtime","sdk.Canvas.Tti"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();j.provide('Canvas',{setSize:function(q){g.maybeObject(q,'Invalid argument');return k.setSize.apply(null,arguments);},setAutoGrow:function(){return k.setAutoGrow.apply(null,arguments);},getPageInfo:function(q){g.isFunction(q,'Invalid argument');return h.getPageInfo.apply(null,arguments);},scrollTo:function(q,r){g.maybeNumber(q,'Invalid argument');g.maybeNumber(r,'Invalid argument');return h.scrollTo.apply(null,arguments);},setDoneLoading:function(q){g.maybeFunction(q,'Invalid argument');return p.setDoneLoading.apply(null,arguments);},startTimer:function(){return p.startTimer.apply(null,arguments);},stopTimer:function(q){g.maybeFunction(q,'Invalid argument');return p.stopTimer.apply(null,arguments);},getHash:function(q){g.isFunction(q,'Invalid argument');return l.getHash.apply(null,arguments);},setHash:function(q){g.isString(q,'Invalid argument');return l.setHash.apply(null,arguments);},setUrlHandler:function(q){g.isFunction(q,'Invalid argument');return l.setUrlHandler.apply(null,arguments);}});n.local.fireEvent=ES(i.fire,'bind',true,i);i.subscribe('init:post',function(q){if(o.isEnvironment(o.ENVIRONMENTS.CANVAS)){g.isTrue(!q.hideFlashCallback||!q.hidePluginCallback,'cannot specify deprecated hideFlashCallback and new hidePluginCallback');m._setHidePluginCallback(q.hidePluginCallback||q.hideFlashCallback);}});},3);
__d("legacy:fb.canvas.syncrequests",["sdk.RPC","sdk.Event"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();g.stub('initPendingSyncRequests');function i(j,k){if(j!='canvas.syncRequestUpdated')return;g.remote.initPendingSyncRequests();h.unsubscribe(h.SUBSCRIBE,i);}h.subscribe(h.SUBSCRIBE,i);},3);
__d("sdk.Canvas.Prefetcher",["sdk.api","createArrayFromMixed","JSSDKCanvasPrefetcherConfig","sdk.Runtime"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k={AUTOMATIC:0,MANUAL:1},l=i.sampleRate,m=i.blacklist,n=k.AUTOMATIC,o=[];function p(){var u={object:'data',link:'href',script:'src'};if(n==k.AUTOMATIC)ES(ES('Object','keys',false,u),'forEach',true,function(v){var w=u[v];ES(h(document.getElementsByTagName(v)),'forEach',true,function(x){if(x[w])o.push(x[w]);});});if(o.length===0)return;g(j.getClientID()+'/staticresources','post',{urls:ES('JSON','stringify',false,o),is_https:location.protocol==='https:'});o=[];}function q(){if(!j.isEnvironment(j.ENVIRONMENTS.CANVAS)||!j.getClientID()||!l)return;if(Math.random()>1/l||m=='*'||~ES(m,'indexOf',true,j.getClientID()))return;setTimeout(p,30000);}function r(u){n=u;}function s(u){o.push(u);}var t={COLLECT_AUTOMATIC:k.AUTOMATIC,COLLECT_MANUAL:k.MANUAL,addStaticResource:s,setCollectionMode:r,_maybeSample:q};e.exports=t;},null);
__d("legacy:fb.canvas.prefetcher",["FB","sdk.Canvas.Prefetcher","sdk.Event","sdk.Runtime"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();g.provide('Canvas.Prefetcher',h);i.subscribe('init:post',function(k){if(j.isEnvironment(j.ENVIRONMENTS.CANVAS))h._maybeSample();});},3);
__d("legacy:fb.canvas.presence",["sdk.RPC","sdk.Event"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();h.subscribe(h.SUBSCRIBE,i);h.subscribe(h.UNSUBSCRIBE,j);g.stub('useFriendsOnline');function i(k,l){if(k!='canvas.friendsOnlineUpdated')return;if(l.length===1)g.remote.useFriendsOnline(true);}function j(k,l){if(k!='canvas.friendsOnlineUpdated')return;if(l.length===0)g.remote.useFriendsOnline(false);}},3);
__d("legacy:fb.event",["FB","sdk.Event","sdk.Runtime","sdk.Scribe","sdk.feature"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=[],m=null,n=k('event_subscriptions_log',false);g.provide('Event',{subscribe:function(o,p){if(n){l.push(o);if(!m)m=setTimeout(function(){j.log('jssdk_error',{appId:i.getClientID(),error:'EVENT_SUBSCRIPTIONS_LOG',extra:{line:0,name:'EVENT_SUBSCRIPTIONS_LOG',script:'N/A',stack:'N/A',message:l.sort().join(',')}});l.length=0;m=null;},n);}return h.subscribe(o,p);},unsubscribe:ES(h.unsubscribe,'bind',true,h)});},3);
__d("legacy:fb.frictionless",["FB","sdk.Frictionless"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();g.provide('Frictionless',h);},3);
__d("sdk.init",["sdk.Cookie","sdk.ErrorHandling","sdk.Event","Log","ManagedError","sdk.PlatformVersioning","QueryString","sdk.Runtime","sdk.URI","createArrayFromMixed"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();function q(s){var t=(typeof s=='number'&&s>0)||(typeof s=='string'&&/^[0-9a-f]{21,}$|^[0-9]{1,21}$/.test(s));if(t)return s.toString();j.warn('Invalid App Id: Must be a number or numeric string representing '+'the application id.');return null;}function r(s){if(n.getInitialized())j.warn('FB.init has already been called - this could indicate a problem');if(n.getIsVersioned()){if(Object.prototype.toString.call(s)!=='[object Object]')throw new k('Invalid argument');if(s.authResponse)j.warn('Setting authResponse is not supported');if(!s.version)s.version=o(location.href).getQueryData().sdk_version;l.assertValidVersion(s.version);n.setVersion(s.version);}else{if(/number|string/.test(typeof s)){j.warn('FB.init called with invalid parameters');s={apiKey:s};}s=ES('Object','assign',false,{status:true},s||{});}var t=q(s.appId||s.apiKey);if(t!==null)n.setClientID(t);if('scope' in s)n.setScope(s.scope);if(s.cookie){n.setUseCookie(true);if(typeof s.cookie==='string')g.setDomain(s.cookie);}if(s.kidDirectedSite)n.setKidDirectedSite(true);n.setInitialized(true);i.fire('init:post',s);}setTimeout(function(){var s=/(connect\.facebook\.net|\.facebook\.com\/assets.php).*?#(.*)/;ES(p(document.getElementsByTagName('script')),'forEach',true,function(t){if(t.src){var u=s.exec(t.src);if(u){var v=m.decode(u[2]);for(var w in v)if(v.hasOwnProperty(w)){var x=v[w];if(x=='0')v[w]=0;}r(v);}}});if(window.fbAsyncInit&&!window.fbAsyncInit.hasRun){window.fbAsyncInit.hasRun=true;h.unguard(window.fbAsyncInit)();}},0);e.exports=r;},null);
__d("legacy:fb.init",["FB","sdk.init"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();g.provide('',{init:h});},3);
__d("legacy:fb.ui",["FB","sdk.ui"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();g.provide('',{ui:h});},3);
__d("runOnce",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h){var i,j;return function(){if(!i){i=true;j=h();}return j;};}e.exports=g;},null);
__d("XFBML",["Assert","sdk.DOM","Log","ObservableMixin","sdk.UA","createArrayFromMixed","runOnce"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n={},o={},p=0,q=new j();function r(y,z){return ES((y[z]+''),'trim',true);}function s(y){return y.scopeName?(y.scopeName+':'+y.nodeName):'';}function t(y){return n[r(y,'nodeName').toLowerCase()]||n[s(y).toLowerCase()];}function u(y){var z=ES(r(y,'className').split(/\s+/),'filter',true,function(aa){return o.hasOwnProperty(aa);});if(z.length===0)return (void 0);if(y.getAttribute('fb-xfbml-state')||!y.childNodes||y.childNodes.length===0||(y.childNodes.length===1&&y.childNodes[0].nodeType===3)||(y.children.length===1&&r(y.children[0],'className')==='fb-xfbml-parse-ignore'))return o[z[0]];}function v(y){var z={};ES(l(y.attributes),'forEach',true,function(aa){z[r(aa,'name')]=r(aa,'value');});return z;}function w(y,z,aa){var ba=document.createElement('div');h.addCss(y,z+'-'+aa);ES(l(y.childNodes),'forEach',true,function(ca){ba.appendChild(ca);});ES(l(y.attributes),'forEach',true,function(ca){ba.setAttribute(ca.name,ca.value);});y.parentNode.replaceChild(ba,y);return ba;}function x(y,z,aa){g.isTrue(y&&y.nodeType&&y.nodeType===1&&!!y.getElementsByTagName,'Invalid DOM node passed to FB.XFBML.parse()');g.isFunction(z,'Invalid callback passed to FB.XFBML.parse()');var ba=++p;i.info('XFBML Parsing Start %s',ba);var ca=1,da=0,ea=function(){ca--;if(ca===0){i.info('XFBML Parsing Finish %s, %s tags found',ba,da);z();q.inform('render',ba,da);}g.isTrue(ca>=0,'onrender() has been called too many times');};ES(l(y.getElementsByTagName('*')),'forEach',true,function(ga){if(!aa&&ga.getAttribute('fb-xfbml-state'))return;if(ga.nodeType!==1)return;var ha=t(ga)||u(ga);if(!ha)return;if(k.ie()<9&&ga.scopeName)ga=w(ga,ha.xmlns,ha.localName);ca++;da++;var ia=new ha.ctor(ga,ha.xmlns,ha.localName,v(ga));ia.subscribe('render',m(function(){ga.setAttribute('fb-xfbml-state','rendered');ea();}));var ja=function(){if(ga.getAttribute('fb-xfbml-state')=='parsed'){q.subscribe('render.queue',ja);}else{ga.setAttribute('fb-xfbml-state','parsed');ia.process();}};ja();});q.inform('parse',ba,da);var fa=30000;setTimeout(function(){if(ca>0)i.warn('%s tags failed to render in %s ms',ca,fa);},fa);ea();}q.subscribe('render',function(){var y=q.getSubscribers('render.queue');q.clearSubscribers('render.queue');ES(y,'forEach',true,function(z){z();});});ES('Object','assign',false,q,{registerTag:function(y){var z=y.xmlns+':'+y.localName;g.isUndefined(n[z],z+' already registered');n[z]=y;o[y.xmlns+'-'+y.localName]=y;},parse:function(y,z){x(y||document.body,z||function(){},true);},parseNew:function(){x(document.body,function(){},false);}});e.exports=q;},null);
__d("PluginPipe",["sdk.Content","sdk.feature","guid","insertIframe","Miny","ObservableMixin","JSSDKPluginPipeConfig","sdk.Runtime","sdk.UA","UrlMap","XFBML"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){b.__markCompiled&&b.__markCompiled();var r=new l(),s=m.threshold,t=[];function u(){return !!(h('plugin_pipe',false)&&n.getSecure()!==(void 0)&&(o.chrome()||o.firefox())&&m.enabledApps[n.getClientID()]);}function v(){var x=t;t=[];if(x.length<=s){ES(x,'forEach',true,function(aa){j(aa.config);});return;}var y=x.length+1;function z(){y--;if(y===0)w(x);}ES(x,'forEach',true,function(aa){var ba={};for(var ca in aa.config)ba[ca]=aa.config[ca];ba.url=p.resolve('www',n.getSecure())+'/plugins/plugin_pipe_shell.php';ba.onload=z;j(ba);});z();}q.subscribe('parse',v);function w(x){var y=document.createElement('span');g.appendHidden(y);var z={};ES(x,'forEach',true,function(ea){z[ea.config.name]={plugin:ea.tag,params:ea.params};});var aa=ES('JSON','stringify',false,z),ba=k.encode(aa);ES(x,'forEach',true,function(ea){var fa=document.getElementsByName(ea.config.name)[0];fa.onload=ea.config.onload;});var ca=p.resolve('www',n.getSecure())+'/plugins/pipe.php',da=i();j({url:'about:blank',root:y,name:da,className:'fb_hidden fb_invisible',onload:function(){g.submitToTarget({url:ca,target:da,params:{plugins:ba.length<aa.length?ba:aa}});}});}ES('Object','assign',false,r,{add:function(x){var y=u();y&&t.push({config:x._config,tag:x._tag,params:x._params});return y;}});e.exports=r;},null);
__d("IframePlugin",["sdk.Auth","sdk.DOM","sdk.Event","Log","ObservableMixin","sdk.PlatformVersioning","PluginPipe","QueryString","sdk.Runtime","Type","sdk.UA","sdk.URI","UrlMap","sdk.XD","sdk.createIframe","sdk.feature","guid","resolveURI"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){b.__markCompiled&&b.__markCompiled();var y={skin:'string',font:'string',width:'px',height:'px',ref:'string',color_scheme:'string'};function z(ha,ia,ja){if(ia||ia===0)ha.style.width=ia+'px';if(ja||ja===0)ha.style.height=ja+'px';}function aa(ha){return function(ia){var ja={width:ia.width,height:ia.height,pluginID:ha};i.fire('xfbml.resize',ja);};}var ba={string:function(ha){return ha;},bool:function(ha){return ha?(/^(?:true|1|yes|on)$/i).test(ha):(void 0);},url:function(ha){return x(ha);},url_maybe:function(ha){return ha?x(ha):ha;},hostname:function(ha){return ha||window.location.hostname;},px:function(ha){return (/^(\d+)(?:px)?$/).test(ha)?parseInt(RegExp.$1,10):(void 0);},text:function(ha){return ha;}};function ca(ha,ia){var ja=ha[ia]||ha[ia.replace(/_/g,'-')]||ha[ia.replace(/_/g,'')]||ha['data-'+ia]||ha['data-'+ia.replace(/_/g,'-')]||ha['data-'+ia.replace(/_/g,'')]||(void 0);return ja;}function da(ha,ia,ja,ka){ES(ES('Object','keys',false,ha),'forEach',true,function(la){if(ha[la]=='text'&&!ja[la]){ja[la]=ia.textContent||ia.innerText||'';ia.setAttribute(la,ja[la]);}ka[la]=ba[ha[la]](ca(ja,la));});}function ea(ha){return ha||ha==='0'||ha===0?parseInt(ha,10):(void 0);}function fa(ha){if(ha)z(ha,0,0);}var ga=p.extend({constructor:function(ha,ia,ja,ka){this.parent();ja=ja.replace(/-/g,'_');var la=ca(ka,'plugin_id');this.subscribe('xd.resize',aa(la));this.subscribe('xd.resize.flow',aa(la));this.subscribe('xd.resize.flow',ES(function(ra){ES('Object','assign',false,this._iframeOptions.root.style,{verticalAlign:'bottom',overflow:''});z(this._iframeOptions.root,ea(ra.width),ea(ra.height));this.updateLift();clearTimeout(this._timeoutID);},'bind',true,this));this.subscribe('xd.resize',ES(function(ra){ES('Object','assign',false,this._iframeOptions.root.style,{verticalAlign:'bottom',overflow:''});z(this._iframeOptions.root,ea(ra.width),ea(ra.height));z(this._iframe,ea(ra.width),ea(ra.height));this._isIframeResized=true;this.updateLift();clearTimeout(this._timeoutID);},'bind',true,this));this.subscribe('xd.resize.iframe',ES(function(ra){if(ra.reposition==='true'&&v('reposition_iframe',false))this.reposition(ea(ra.width));z(this._iframe,ea(ra.width),ea(ra.height));this._isIframeResized=true;this.updateLift();clearTimeout(this._timeoutID);},'bind',true,this));this.subscribe('xd.sdk_event',function(ra){var sa=ES('JSON','parse',false,ra.data);sa.pluginID=la;i.fire(ra.event,sa,ha);});var ma=o.getSecure()||window.location.protocol=='https:',na=s.resolve('www',ma)+'/plugins/'+ja+'.php?',oa={};da(this.getParams(),ha,ka,oa);da(y,ha,ka,oa);ES('Object','assign',false,oa,{app_id:o.getClientID(),locale:o.getLocale(),sdk:'joey',kid_directed_site:o.getKidDirectedSite(),channel:t.handler(ES(function(ra){return this.inform('xd.'+ra.type,ra);},'bind',true,this),'parent.parent',true)});oa.container_width=ha.offsetWidth;h.addCss(ha,'fb_iframe_widget');var pa=w();this.subscribe('xd.verify',function(ra){t.sendToFacebook(pa,{method:'xd/verify',params:ES('JSON','stringify',false,ra.token)});});this.subscribe('xd.refreshLoginStatus',ES(g.getLoginStatus,'bind',true,g,ES(this.inform,'bind',true,this,'login.status'),true));var qa=document.createElement('span');ES('Object','assign',false,qa.style,{verticalAlign:'top',width:'0px',height:'0px',overflow:'hidden'});this._element=ha;this._ns=ia;this._tag=ja;this._params=oa;this._config=this.getConfig();this._iframeOptions={root:qa,url:na+n.encode(oa),name:pa,width:this._config.mobile_fullsize&&q.mobile()?void 0:oa.width||1000,height:oa.height||1000,style:{border:'none',visibility:'hidden'},title:this._ns+':'+this._tag+' Facebook Social Plugin',onload:ES(function(){return this.inform('render');},'bind',true,this),onerror:ES(function(){return fa(this._iframe);},'bind',true,this)};if(this.isFluid()){h.addCss(this._element,'fb_iframe_widget_fluid_desktop');if(!oa.width&&this._config.full_width){this._element.style.width='100%';this._iframeOptions.root.style.width='100%';this._iframeOptions.style.width='100%';this._params.container_width=this._element.offsetWidth;this._iframeOptions.url=na+n.encode(this._params);}}},process:function(){if(o.getIsVersioned()){l.assertVersionIsSet();var ha=r(this._iframeOptions.url);this._iframeOptions.url=ha.setPath('/'+o.getVersion()+ha.getPath()).toString();}var ia=ES('Object','assign',false,{},this._params);delete ia.channel;var ja=n.encode(ia);if(this._element.getAttribute('fb-iframe-plugin-query')==ja){j.info('Skipping render: %s:%s %s',this._ns,this._tag,ja);this.inform('render');return;}this._element.setAttribute('fb-iframe-plugin-query',ja);this.subscribe('render',ES(function(){this._iframe.style.visibility='visible';if(!this._isIframeResized)fa(this._iframe);},'bind',true,this));while(this._element.firstChild)this._element.removeChild(this._element.firstChild);this._element.appendChild(this._iframeOptions.root);var ka=q.mobile()?120:45;this._timeoutID=setTimeout(ES(function(){fa(this._iframe);j.warn('%s:%s failed to resize in %ss',this._ns,this._tag,ka);},'bind',true,this),ka*1000);if(!m.add(this))this._iframe=u(this._iframeOptions);if(q.mobile()){h.addCss(this._element,'fb_iframe_widget_fluid');if(!this._iframeOptions.width){ES('Object','assign',false,this._element.style,{display:'block',width:'100%',height:'auto'});ES('Object','assign',false,this._iframeOptions.root.style,{width:'100%',height:'auto'});var la={height:'auto',position:'static',width:'100%'};if(q.iphone()||q.ipad())ES('Object','assign',false,la,{width:'220px','min-width':'100%'});ES('Object','assign',false,this._iframe.style,la);}}},getConfig:function(){return {};},isFluid:function(){var ha=this.getConfig();return ha.fluid;},reposition:function(ha){var ia=h.getPosition(this._iframe).x,ja=h.getViewportInfo().width,ka=parseInt(h.getStyle(this._iframe,'width'),10),la={};if((ia+ha)>ja&&ia>ha){this._iframe.style.left=parseInt(h.getStyle(this._iframe,'width'),10)-ha+'px';this._isRepositioned=true;la.type='reposition';}else if(this._isRepositioned&&(ka-ha)!==0){this._iframe.style.left='0px';this._isRepositioned=false;la.type='restore';}else return;t.sendToFacebook(this._iframe.name,{method:'xd/reposition',params:ES('JSON','stringify',false,la)});},updateLift:function(){var ha=this._iframe.style.width===this._iframeOptions.root.style.width&&this._iframe.style.height===this._iframeOptions.root.style.height;h[ha?'removeCss':'addCss'](this._iframe,'fb_iframe_widget_lift');}},k);ga.getVal=ca;ga.withParams=function(ha,ia){return ga.extend({getParams:function(){return ha;},getConfig:function(){return ia?ia:{};}});};e.exports=ga;},null);
__d("PluginConfig",["sdk.feature"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={messengerpreconfirmation:{mobile_fullsize:true},messengeraccountconfirmation:{mobile_fullsize:true},messengertoggle:{mobile_fullsize:true},post:{fluid:g('fluid_embed',false),mobile_fullsize:true},video:{fluid:true,full_width:true}};e.exports=h;},null);
__d("PluginTags",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={activity:{filter:'string',action:'string',max_age:'string',linktarget:'string',header:'bool',recommendations:'bool',site:'hostname'},composer:{action_type:'string',action_properties:'string'},create_event_button:{},degrees:{href:'url'},facepile:{href:'string',action:'string',size:'string',max_rows:'string',show_count:'bool'},follow:{href:'url',layout:'string',show_faces:'bool'},like:{href:'url',layout:'string',show_faces:'bool',share:'bool',action:'string',send:'bool'},like_box:{href:'string',show_faces:'bool',header:'bool',stream:'bool',force_wall:'bool',show_border:'bool',id:'string',connections:'string',profile_id:'string',name:'string'},page:{href:'string',hide_cover:'bool',show_facepile:'bool',show_about:'bool',show_posts:'bool'},open_graph:{href:'url',layout:'string',show_faces:'bool',action_type:'string',action_properties:'string'},open_graph_preview:{action_type:'string',action_properties:'string'},messengerpreconfirmation:{messenger_app_id:'string'},messengeraccountconfirmation:{messenger_app_id:'string',state:'string'},messengertoggle:{messenger_app_id:'string',token:'string'},page_events:{href:'url'},post:{href:'url',show_border:'bool'},privacy_selector:{},profile_pic:{uid:'string',linked:'bool',href:'string',size:'string',facebook_logo:'bool'},recommendations:{filter:'string',action:'string',max_age:'string',linktarget:'string',header:'bool',site:'hostname'},share_button:{href:'url',layout:'string',type:'string'},shared_activity:{header:'bool'},send:{href:'url'},send_to_mobile:{max_rows:'string',show_faces:'bool',size:'string'},story:{href:'url',show_border:'bool'},topic:{topic_name:'string',topic_id:'string'},video:{allowfullscreen:'bool',href:'url'},want:{href:'url',layout:'string',show_faces:'bool'}},h={subscribe:'follow',fan:'like_box',likebox:'like_box',friendpile:'facepile'};ES(ES('Object','keys',false,h),'forEach',true,function(i){g[i]=g[h[i]];});e.exports=g;},null);
__d("sdk.Arbiter",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={BEHAVIOR_EVENT:'e',BEHAVIOR_PERSISTENT:'p',BEHAVIOR_STATE:'s'};e.exports=g;},null);
__d("sdk.XFBML.Element",["sdk.DOM","Type","ObservableMixin"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=h.extend({constructor:function(k){this.parent();this.dom=k;},fire:function(){this.inform.apply(this,arguments);},getAttribute:function(k,l,m){var n=g.getAttr(this.dom,k);return n?m?m(n):n:l;},_getBoolAttribute:function(k,l){var m=g.getBoolAttr(this.dom,k);return m===null?l:m;},_getPxAttribute:function(k,l){return this.getAttribute(k,l,function(m){var n=parseInt(m,10);return isNaN(n)?l:n;});},_getLengthAttribute:function(k,l){return this.getAttribute(k,l,function(m){if(m==='100%')return m;var n=parseInt(m,10);return isNaN(n)?l:n;});},_getAttributeFromList:function(k,l,m){return this.getAttribute(k,l,function(n){n=n.toLowerCase();return (ES(m,'indexOf',true,n)>-1)?n:l;});},isValid:function(){for(var k=this.dom;k;k=k.parentNode)if(k==document.body)return true;},clear:function(){g.html(this.dom,'');}},i);e.exports=j;},null);
__d("sdk.XFBML.IframeWidget",["sdk.Arbiter","sdk.Auth","sdk.Content","sdk.DOM","sdk.Event","sdk.XFBML.Element","guid","insertIframe","QueryString","sdk.Runtime","sdk.ui","UrlMap","sdk.XD"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){b.__markCompiled&&b.__markCompiled();var t=l.extend({_iframeName:null,_showLoader:true,_refreshOnAuthChange:false,_allowReProcess:false,_fetchPreCachedLoader:false,_visibleAfter:'load',_widgetPipeEnabled:false,_borderReset:false,_repositioned:false,getUrlBits:function(){throw new Error('Inheriting class needs to implement getUrlBits().');},setupAndValidate:function(){return true;},oneTimeSetup:function(){},getSize:function(){},getIframeName:function(){return this._iframeName;},getIframeTitle:function(){return 'Facebook Social Plugin';},getChannelUrl:function(){if(!this._channelUrl){var x=this;this._channelUrl=s.handler(function(y){x.fire('xd.'+y.type,y);},'parent.parent',true);}return this._channelUrl;},getIframeNode:function(){return this.dom.getElementsByTagName('iframe')[0];},arbiterInform:function(event,x,y){s.sendToFacebook(this.getIframeName(),{method:event,params:ES('JSON','stringify',false,x||{}),behavior:y||g.BEHAVIOR_PERSISTENT});},_arbiterInform:function(event,x,y){var z='parent.frames["'+this.getIframeNode().name+'"]';s.inform(event,x,z,y);},getDefaultWebDomain:function(){return r.resolve('www');},process:function(x){if(this._done){if(!this._allowReProcess&&!x)return;this.clear();}else this._oneTimeSetup();this._done=true;this._iframeName=this.getIframeName()||this._iframeName||m();if(!this.setupAndValidate()){this.fire('render');return;}if(this._showLoader)this._addLoader();j.addCss(this.dom,'fb_iframe_widget');if(this._visibleAfter!='immediate'){j.addCss(this.dom,'fb_hide_iframes');}else this.subscribe('iframe.onload',ES(this.fire,'bind',true,this,'render'));var y=this.getSize()||{},z=this.getFullyQualifiedURL();if(y.width=='100%')j.addCss(this.dom,'fb_iframe_widget_fluid');this.clear();n({url:z,root:this.dom.appendChild(document.createElement('span')),name:this._iframeName,title:this.getIframeTitle(),className:p.getRtl()?'fb_rtl':'fb_ltr',height:y.height,width:y.width,onload:ES(this.fire,'bind',true,this,'iframe.onload')});this._resizeFlow(y);this.loaded=false;this.subscribe('iframe.onload',ES(function(){this.loaded=true;if(!this._isResizeHandled)j.addCss(this.dom,'fb_hide_iframes');},'bind',true,this));},generateWidgetPipeIframeName:function(){u++;return 'fb_iframe_'+u;},getFullyQualifiedURL:function(){var x=this._getURL();x+='?'+o.encode(this._getQS());if(x.length>2000){x='about:blank';var y=ES(function(){this._postRequest();this.unsubscribe('iframe.onload',y);},'bind',true,this);this.subscribe('iframe.onload',y);}return x;},_getWidgetPipeShell:function(){return r.resolve('www')+'/common/widget_pipe_shell.php';},_oneTimeSetup:function(){this.subscribe('xd.resize',ES(this._handleResizeMsg,'bind',true,this));this.subscribe('xd.resize',ES(this._bubbleResizeEvent,'bind',true,this));this.subscribe('xd.resize.iframe',ES(this._resizeIframe,'bind',true,this));this.subscribe('xd.resize.flow',ES(this._resizeFlow,'bind',true,this));this.subscribe('xd.resize.flow',ES(this._bubbleResizeEvent,'bind',true,this));this.subscribe('xd.refreshLoginStatus',function(){h.getLoginStatus(function(){},true);});this.subscribe('xd.logout',function(){q({method:'auth.logout',display:'hidden'},function(){});});if(this._refreshOnAuthChange)this._setupAuthRefresh();if(this._visibleAfter=='load')this.subscribe('iframe.onload',ES(this._makeVisible,'bind',true,this));this.subscribe('xd.verify',ES(function(x){this.arbiterInform('xd/verify',x.token);},'bind',true,this));this.oneTimeSetup();},_makeVisible:function(){this._removeLoader();j.removeCss(this.dom,'fb_hide_iframes');this.fire('render');},_setupAuthRefresh:function(){h.getLoginStatus(ES(function(x){var y=x.status;k.subscribe('auth.statusChange',ES(function(z){if(!this.isValid())return;if(y=='unknown'||z.status=='unknown')this.process(true);y=z.status;},'bind',true,this));},'bind',true,this));},_handleResizeMsg:function(x){if(!this.isValid())return;this._resizeIframe(x);this._resizeFlow(x);if(!this._borderReset){this.getIframeNode().style.border='none';this._borderReset=true;}this._isResizeHandled=true;this._makeVisible();},_bubbleResizeEvent:function(x){var y={height:x.height,width:x.width,pluginID:this.getAttribute('plugin-id')};k.fire('xfbml.resize',y);},_resizeIframe:function(x){var y=this.getIframeNode();if(x.reposition==="true")this._repositionIframe(x);x.height&&(y.style.height=x.height+'px');x.width&&(y.style.width=x.width+'px');this._updateIframeZIndex();},_resizeFlow:function(x){var y=this.dom.getElementsByTagName('span')[0];x.height&&(y.style.height=x.height+'px');x.width&&(y.style.width=x.width+'px');this._updateIframeZIndex();},_updateIframeZIndex:function(){var x=this.dom.getElementsByTagName('span')[0],y=this.getIframeNode(),z=y.style.height===x.style.height&&y.style.width===x.style.width,aa=z?'removeCss':'addCss';j[aa](y,'fb_iframe_widget_lift');},_repositionIframe:function(x){var y=this.getIframeNode(),z=parseInt(j.getStyle(y,'width'),10),aa=j.getPosition(y).x,ba=j.getViewportInfo().width,ca=parseInt(x.width,10);if(aa+ca>ba&&aa>ca){y.style.left=z-ca+'px';this.arbiterInform('xd/reposition',{type:'horizontal'});this._repositioned=true;}else if(this._repositioned){y.style.left='0px';this.arbiterInform('xd/reposition',{type:'restore'});this._repositioned=false;}},_addLoader:function(){if(!this._loaderDiv){j.addCss(this.dom,'fb_iframe_widget_loader');this._loaderDiv=document.createElement('div');this._loaderDiv.className='FB_Loader';this.dom.appendChild(this._loaderDiv);}},_removeLoader:function(){if(this._loaderDiv){j.removeCss(this.dom,'fb_iframe_widget_loader');if(this._loaderDiv.parentNode)this._loaderDiv.parentNode.removeChild(this._loaderDiv);this._loaderDiv=null;}},_getQS:function(){return ES('Object','assign',false,{api_key:p.getClientID(),locale:p.getLocale(),sdk:'joey',kid_directed_site:p.getKidDirectedSite(),ref:this.getAttribute('ref')},this.getUrlBits().params);},_getURL:function(){var x=this.getDefaultWebDomain(),y='';return x+'/plugins/'+y+this.getUrlBits().name+'.php';},_postRequest:function(){i.submitToTarget({url:this._getURL(),target:this.getIframeNode().name,params:this._getQS()});}}),u=0,v={};function w(){var x={};for(var y in v){var z=v[y];x[y]={widget:z.getUrlBits().name,params:z._getQS()};}return x;}e.exports=t;},null);
__d("sdk.XFBML.Comments",["sdk.Event","sdk.XFBML.IframeWidget","QueryString","sdk.Runtime","JSSDKConfig","sdk.UA","UrlMap","sdk.feature"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();var o=h.extend({_visibleAfter:'immediate',_refreshOnAuthChange:true,setupAndValidate:function(){var p={channel_url:this.getChannelUrl(),colorscheme:this.getAttribute('colorscheme'),skin:this.getAttribute('skin'),numposts:this.getAttribute('num-posts',10),width:this._getLengthAttribute('width'),href:this.getAttribute('href'),permalink:this.getAttribute('permalink'),publish_feed:this.getAttribute('publish_feed'),order_by:this.getAttribute('order_by'),mobile:this._getBoolAttribute('mobile'),version:this.getAttribute('version')};if(!p.width&&!p.permalink)p.width=550;if(k.initSitevars.enableMobileComments&&l.mobile()&&p.mobile!==false){p.mobile=true;delete p.width;}if(!p.skin)p.skin=p.colorscheme;if(!p.href){p.migrated=this.getAttribute('migrated');p.xid=this.getAttribute('xid');p.title=this.getAttribute('title',document.title);p.url=this.getAttribute('url',document.URL);p.quiet=this.getAttribute('quiet');p.reverse=this.getAttribute('reverse');p.simple=this.getAttribute('simple');p.css=this.getAttribute('css');p.notify=this.getAttribute('notify');if(!p.xid){var q=ES(document.URL,'indexOf',true,'#');if(q>0){p.xid=encodeURIComponent(document.URL.substring(0,q));}else p.xid=encodeURIComponent(document.URL);}if(p.migrated)p.href=m.resolve('www')+'/plugins/comments_v1.php?'+'app_id='+j.getClientID()+'&xid='+encodeURIComponent(p.xid)+'&url='+encodeURIComponent(p.url);}else{var r=this.getAttribute('fb_comment_id');if(!r){r=i.decode(document.URL.substring(ES(document.URL,'indexOf',true,'?')+1)).fb_comment_id;if(r&&ES(r,'indexOf',true,'#')>0)r=r.substring(0,ES(r,'indexOf',true,'#'));}if(r){p.fb_comment_id=r;this.subscribe('render',ES(function(){if(!window.location.hash)window.location.hash=this.getIframeNode().id;},'bind',true,this));}}if(!p.version)p.version=j.getVersion();this._attr=p;return true;},oneTimeSetup:function(){this.subscribe('xd.commentCreated',ES(this._handleCommentCreatedMsg,'bind',true,this));this.subscribe('xd.commentRemoved',ES(this._handleCommentRemovedMsg,'bind',true,this));},getSize:function(){if(!this._attr.permalink)return {width:this._attr.mobile?'100%':this._attr.width,height:100};},getUrlBits:function(){return {name:'comments',params:this._attr};},getDefaultWebDomain:function(){if(this._attr.mobile&&!n('one_comment_controller',false)&&this._attr.version!=='v2.3')return m.resolve('m',true);return m.resolve('www',true);},_handleCommentCreatedMsg:function(p){if(!this.isValid())return;var q={href:p.href,commentID:p.commentID,parentCommentID:p.parentCommentID,message:p.message};g.fire('comment.create',q);},_handleCommentRemovedMsg:function(p){if(!this.isValid())return;var q={href:p.href,commentID:p.commentID};g.fire('comment.remove',q);}});e.exports=o;},null);
__d("sdk.XFBML.CommentsCount",["ApiClient","sdk.DOM","sdk.XFBML.Element","sprintf"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=i.extend({process:function(){h.addCss(this.dom,'fb_comments_count_zero');var l=this.getAttribute('href',window.location.href);g.scheduleBatchCall('/v2.1/'+encodeURIComponent(l),{fields:'share'},ES(function(m){var n=(m.share&&m.share.comment_count)||0;h.html(this.dom,j('<span class="fb_comments_count">%s</span>',n));if(n>0)h.removeCss(this.dom,'fb_comments_count_zero');this.fire('render');},'bind',true,this));}});e.exports=k;},null);
__d("safeEval",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h,i){if(h===null||typeof h==='undefined')return;if(typeof h!=='string')return h;if(/^\w+$/.test(h)&&typeof window[h]==='function')return window[h].apply(null,i||[]);return Function('return eval("'+h.replace(/"/g,'\\"')+'");').apply(null,i||[]);}e.exports=g;},null);
__d("sdk.Helper",["sdk.ErrorHandling","sdk.Event","UrlMap","safeEval","sprintf"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l={isUser:function(m){return m<2.2e+09||(m>=1e+14&&m<=100099999989999)||(m>=8.9e+13&&m<=89999999999999)||(m>=6.000001e+13&&m<=60000019999999);},upperCaseFirstChar:function(m){if(m.length>0){return m.substr(0,1).toUpperCase()+m.substr(1);}else return m;},getProfileLink:function(m,n,o){if(!o&&m)o=k('%s/profile.php?id=%s',i.resolve('www'),m.uid||m.id);if(o)n=k('<a class="fb_link" href="%s">%s</a>',o,n);return n;},invokeHandler:function(m,n,o){if(m)if(typeof m==='string'){g.unguard(j)(m,o);}else if(m.apply)g.unguard(m).apply(n,o||[]);},fireEvent:function(m,n){var o=n._attr.href;n.fire(m,o);h.fire(m,o,n);},executeFunctionByName:function(m){var n=Array.prototype.slice.call(arguments,1),o=m.split("."),p=o.pop(),q=window;for(var r=0;r<o.length;r++)q=q[o[r]];return q[p].apply(this,n);}};e.exports=l;},null);
__d("sdk.XFBML.LoginButton",["sdk.Helper","IframePlugin"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i=h.extend({constructor:function(j,k,l,m){this.parent(j,k,l,m);var n=h.getVal(m,'on_login');if(n)this.subscribe('login.status',function(o){g.invokeHandler(n,null,[o]);});},getParams:function(){return {scope:'string',perms:'string',size:'string',login_text:'text',show_faces:'bool',max_rows:'string',show_login_face:'bool',registration_url:'url_maybe',auto_logout_link:'bool',one_click:'bool',show_banner:'bool',auth_type:'string',default_audience:'string'};}});e.exports=i;},null);
__d("escapeHTML",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g=/[&<>"'\/]/g,h={'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#039;','/':'&#x2F;'};function i(j){return j.replace(g,function(k){return h[k];});}e.exports=i;},null);
__d("sdk.XFBML.Name",["ApiClient","escapeHTML","sdk.Event","sdk.XFBML.Element","sdk.Helper","Log","sdk.Runtime"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n=({}).hasOwnProperty,o=j.extend({process:function(){ES('Object','assign',false,this,{_uid:this.getAttribute('uid'),_firstnameonly:this._getBoolAttribute('first-name-only'),_lastnameonly:this._getBoolAttribute('last-name-only'),_possessive:this._getBoolAttribute('possessive'),_reflexive:this._getBoolAttribute('reflexive'),_objective:this._getBoolAttribute('objective'),_linked:this._getBoolAttribute('linked',true),_subjectId:this.getAttribute('subject-id')});if(!this._uid){l.error('"uid" is a required attribute for <fb:name>');this.fire('render');return;}var p=[];if(this._firstnameonly){p.push('first_name');}else if(this._lastnameonly){p.push('last_name');}else p.push('name');if(this._subjectId){p.push('gender');if(this._subjectId==m.getUserID())this._reflexive=true;}i.monitor('auth.statusChange',ES(function(){if(!this.isValid()){this.fire('render');return true;}if(!this._uid||this._uid=='loggedinuser')this._uid=m.getUserID();if(!this._uid)return;g.scheduleBatchCall('/v1.0/'+this._uid,{fields:p.join(',')},ES(function(q){if(n.call(q,'error')){l.warn('The name is not found for ID: '+this._uid);return;}if(this._subjectId==this._uid){this._renderPronoun(q);}else this._renderOther(q);this.fire('render');},'bind',true,this));},'bind',true,this));},_renderPronoun:function(p){var q='',r=this._objective;if(this._subjectId){r=true;if(this._subjectId===this._uid)this._reflexive=true;}if(this._uid==m.getUserID()&&this._getBoolAttribute('use-you',true)){if(this._possessive){if(this._reflexive){q='your own';}else q='your';}else if(this._reflexive){q='yourself';}else q='you';}else switch(p.gender){case 'male':if(this._possessive){q=this._reflexive?'his own':'his';}else if(this._reflexive){q='himself';}else if(r){q='him';}else q='he';break;case 'female':if(this._possessive){q=this._reflexive?'her own':'her';}else if(this._reflexive){q='herself';}else if(r){q='her';}else q='she';break;default:if(this._getBoolAttribute('use-they',true)){if(this._possessive){if(this._reflexive){q='their own';}else q='their';}else if(this._reflexive){q='themselves';}else if(r){q='them';}else q='they';}else if(this._possessive){if(this._reflexive){q='his/her own';}else q='his/her';}else if(this._reflexive){q='himself/herself';}else if(r){q='him/her';}else q='he/she';break;}if(this._getBoolAttribute('capitalize',false))q=k.upperCaseFirstChar(q);this.dom.innerHTML=q;},_renderOther:function(p){var q='',r='';if(this._uid==m.getUserID()&&this._getBoolAttribute('use-you',true)){if(this._reflexive){if(this._possessive){q='your own';}else q='yourself';}else if(this._possessive){q='your';}else q='you';}else if(p){if(null===p.first_name)p.first_name='';if(null===p.last_name)p.last_name='';if(this._firstnameonly&&p.first_name!==(void 0)){q=h(p.first_name);}else if(this._lastnameonly&&p.last_name!==(void 0))q=h(p.last_name);if(!q)q=h(p.name);if(q!==''&&this._possessive)q+='\'s';}if(!q)q=h(this.getAttribute('if-cant-see','Facebook User'));if(q){if(this._getBoolAttribute('capitalize',false))q=k.upperCaseFirstChar(q);if(p&&this._linked){r=k.getProfileLink(p,q,this.getAttribute('href',null));}else r=q;}this.dom.innerHTML=r;}});e.exports=o;},null);
__d("sdk.XFBML.Registration",["sdk.Auth","sdk.Helper","sdk.XFBML.IframeWidget","sdk.Runtime","UrlMap"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=i.extend({_visibleAfter:'immediate',_baseHeight:167,_fieldHeight:28,_skinnyWidth:520,_skinnyBaseHeight:173,_skinnyFieldHeight:52,setupAndValidate:function(){this._attr={action:this.getAttribute('action'),border_color:this.getAttribute('border-color'),channel_url:this.getChannelUrl(),client_id:j.getClientID(),fb_only:this._getBoolAttribute('fb-only',false),fb_register:this._getBoolAttribute('fb-register',false),fields:this.getAttribute('fields'),height:this._getPxAttribute('height'),redirect_uri:this.getAttribute('redirect-uri',window.location.href),no_footer:this._getBoolAttribute('no-footer'),no_header:this._getBoolAttribute('no-header'),onvalidate:this.getAttribute('onvalidate'),width:this._getPxAttribute('width',600),target:this.getAttribute('target')};if(this._attr.onvalidate)this.subscribe('xd.validate',ES(function(m){var n=ES('JSON','parse',false,m.value),o=ES(function(q){this.arbiterInform('Registration.Validation',{errors:q,id:m.id});},'bind',true,this),p=h.executeFunctionByName(this._attr.onvalidate,n,o);if(p)o(p);},'bind',true,this));this.subscribe('xd.authLogin',ES(this._onAuthLogin,'bind',true,this));this.subscribe('xd.authLogout',ES(this._onAuthLogout,'bind',true,this));return true;},getSize:function(){return {width:this._attr.width,height:this._getHeight()};},_getHeight:function(){if(this._attr.height)return this._attr.height;var m;if(!this._attr.fields){m=['name'];}else try{m=ES('JSON','parse',false,this._attr.fields);}catch(n){m=this._attr.fields.split(/,/);}if(this._attr.width<this._skinnyWidth){return this._skinnyBaseHeight+m.length*this._skinnyFieldHeight;}else return this._baseHeight+m.length*this._fieldHeight;},getUrlBits:function(){return {name:'registration',params:this._attr};},getDefaultWebDomain:function(){return k.resolve('www',true);},_onAuthLogin:function(){if(!g.getAuthResponse())g.getLoginStatus();h.fireEvent('auth.login',this);},_onAuthLogout:function(){if(!g.getAuthResponse())g.getLoginStatus();h.fireEvent('auth.logout',this);}});e.exports=l;},null);
__d("legacy:fb.xfbml",["Assert","sdk.Event","FB","IframePlugin","PluginConfig","PluginTags","XFBML","sdk.domReady","sdk.feature","wrapFunction","sdk.XFBML.Comments","sdk.XFBML.CommentsCount","sdk.XFBML.LoginButton","sdk.XFBML.Name","sdk.XFBML.Registration"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();var q={comments:b('sdk.XFBML.Comments'),comments_count:b('sdk.XFBML.CommentsCount'),login_button:b('sdk.XFBML.LoginButton'),name:b('sdk.XFBML.Name'),registration:b('sdk.XFBML.Registration')},r=o('plugin_tags_blacklist',[]);ES(ES('Object','keys',false,l),'forEach',true,function(t){if(ES(r,'indexOf',true,t)!==-1)return;m.registerTag({xmlns:'fb',localName:t.replace(/_/g,'-'),ctor:j.withParams(l[t],k[t])});});ES(ES('Object','keys',false,q),'forEach',true,function(t){if(ES(r,'indexOf',true,t)!==-1)return;m.registerTag({xmlns:'fb',localName:t.replace(/_/g,'-'),ctor:q[t]});});i.provide('XFBML',{parse:function(t){g.maybeXfbml(t,'Invalid argument');if(t&&t.nodeType===9)t=t.body;return m.parse.apply(null,arguments);}});m.subscribe('parse',ES(h.fire,'bind',true,h,'xfbml.parse'));m.subscribe('render',ES(h.fire,'bind',true,h,'xfbml.render'));h.subscribe('init:post',function(t){if(t.xfbml)setTimeout(p(ES(n,'bind',true,null,m.parse),'entry','init:post:xfbml.parse'),0);});g.define('Xfbml',function(t){return (t.nodeType===1||t.nodeType===9)&&typeof t.nodeName==='string';});try{if(document.namespaces&&!document.namespaces.item.fb)document.namespaces.add('fb');}catch(s){}},3);
__d("legacy:fb.versioned-sdk",["sdk.Runtime"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();g.setIsVersioned(true);},3);

}).call({}, window.inDapIF ? parent.window : window);
} catch (e) {new Image().src="http:\/\/www.facebook.com\/" + 'common/scribe_endpoint.php?c=jssdk_error&m='+encodeURIComponent('{"error":"LOAD", "extra": {"name":"'+e.name+'","line":"'+(e.lineNumber||e.line)+'","script":"'+(e.fileName||e.sourceURL||e.script)+'","stack":"'+(e.stackTrace||e.stack)+'","revision":"1717240","message":"'+e.message+'"}}');}_application/x-javascriptÕ	'“”*•_ªhttps://apis.google.com/_/scs/apps-static/_/js/k=oz.gapi.ja.GaAqtE9vSt8.O/m=plusone/rt=j/sv=1/d=1/ed=1/am=IQ/rs=AGLTcCObdvcYYb_30dT3f0o1AM2Q88jrEw/t=zcms/cb=gapi.loaded_0O|bplist00ÔwxX$versionX$objectsY$archiverT$top † ¯'#)*0123STUVWXYZ[\]^_`abcdefghijklmpqrU$nullİ	
 !"R$6S$10R$2R$7R$3S$11R$8V$classR$4R$9R$0R$5R$1€	€€€$€&€€%€Ó$%&'(WNS.base[NS.relative€ €€_ªhttps://apis.google.com/_/scs/apps-static/_/js/k=oz.gapi.ja.GaAqtE9vSt8.O/m=plusone/rt=j/sv=1/d=1/ed=1/am=IQ/rs=AGLTcCObdvcYYb_30dT3f0o1AM2Q88jrEw/t=zcms/cb=gapi.loaded_0Ò+,-.Z$classnameX$classesUNSURL¢-/XNSObject#AºôÒ:èå ÈÓ456DRWNS.keysZNS.objects­789:;<=>?@ABC€	€
€€€€€€€€€€€­EFGHIJKLMNOPQ€€€€€€€€€€€ €!€"€#\Content-Type_alternate-protocol_Content-EncodingVServer_x-xss-protectionWExpiresSAge]Cache-ControlTDate^Content-Length_x-content-type-optionsTVary]Last-Modified_text/javascript; charset=UTF-8\443:quic,p=1TgzipTsffe]1; mode=block_Sun, 01 May 2016 00:53:12 GMTU31426_public, max-age=31536000_Sat, 02 May 2015 00:53:12 GMTU40781Wnosniff_Accept-Encoding_Fri, 01 May 2015 01:17:55 GMTÒ+,no\NSDictionary¢n/ÿÿÿÿÿÿÿÿ_text/javascriptÒ+,st_NSHTTPURLResponse£uv/_NSHTTPURLResponse]NSURLResponse_NSKeyedArchiverÑyz_WebResourceResponse€    # - 2 7 a g ‚ … ‰ Œ  ’ – ™   £ ¦ © ¬ ¯ ± ³ µ · ¹ º ¼ ¾ À Â Ä Æ È Ï × ã å ç é–›¦¯µ¸ÁÊÌÎÕİèöøúüş 
 "$&(*,.02468:G\ov‰‘•£¨·ĞÕã)IOjŠ˜ªÊÏÜßèúÿ+9KNd             {              f_text/javascriptÔ	—˜™š_,http://www.google-analytics.com/analytics.jsOµbplist00ÔstX$versionX$objectsY$archiverT$top † ¯%#)*0123QRSTUVWXYZ[\]^_`abcdefghilmnU$nullİ	
 !"R$6S$10R$2R$7R$3S$11R$8V$classR$4R$9R$0R$5R$1€	€€€"€$€€#€Ó$%&'(WNS.base[NS.relative€ €€_,http://www.google-analytics.com/analytics.jsÒ+,-.Z$classnameX$classesUNSURL¢-/XNSObject#AºôÒ:¶sÖ ÈÓ456CPWNS.keysZNS.objects¬789:;<=>?@AB€	€
€€€€€€€€€€¬DEFGHIJKLMNO€€€€€€€€€€€€ €!\Content-TypeSAge_Content-EncodingVServer_Alternate-ProtocolWExpires]Cache-ControlTDate^Content-Length_X-Content-Type-OptionsTVary]Last-Modified_text/javascriptT4508TgzipWGFE/2.0[80:quic,p=1_Sat, 02 May 2015 10:21:50 GMT_public, max-age=7200_Sat, 02 May 2015 08:21:50 GMTU11109Wnosniff_Accept-Encoding_Mon, 27 Apr 2015 18:49:35 GMTÒ+,jk\NSDictionary¢j/+e_text/javascriptÒ+,op_NSHTTPURLResponse£qr/_NSHTTPURLResponse]NSURLResponse_NSKeyedArchiverÑuv_WebResourceResponse€    # - 2 7 _ e € ƒ ‡ Š   ” —  ¡ ¤ § ª ­ ¯ ± ³ µ · ¸ º ¼ ¾ À Â Ä Æ Í Õ á ã å ç&/58AJLNU]huwy{}ƒ…‡‰‹šœ ¢¤¦¨ª¬®°²´ÁÅØßôü
7<J\afnzš±Ñ×ßñ#&);@TXlzŒ¥             w              §ObŞ(function(){var aa=encodeURIComponent,f=window,n=Math;function Pc(a,b){return a.href=b}
var Qc="replace",q="data",m="match",ja="port",u="createElement",id="setAttribute",da="getTime",A="split",B="location",ra="hasOwnProperty",ma="hostname",ga="search",E="protocol",Ab="href",kd="action",G="apply",p="push",h="hash",pa="test",ha="slice",r="cookie",t="indexOf",ia="defaultValue",v="name",y="length",Ga="sendBeacon",z="prototype",la="clientWidth",jd="target",C="call",na="clientHeight",F="substring",oa="navigator",H="join",I="toLowerCase";var $c=function(a){this.w=a||[]};$c[z].set=function(a){this.w[a]=!0};$c[z].encode=function(){for(var a=[],b=0;b<this.w[y];b++)this.w[b]&&(a[n.floor(b/6)]=a[n.floor(b/6)]^1<<b%6);for(b=0;b<a[y];b++)a[b]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".charAt(a[b]||0);return a[H]("")+"~"};var vd=new $c;function J(a){vd.set(a)}var Nd=function(a,b){var c=new $c(Dd(a));c.set(b);a.set(Gd,c.w)},Td=function(a){a=Dd(a);a=new $c(a);for(var b=vd.w[ha](),c=0;c<a.w[y];c++)b[c]=b[c]||a.w[c];return(new $c(b)).encode()},Dd=function(a){a=a.get(Gd);ka(a)||(a=[]);return a};var ea=function(a){return"function"==typeof a},ka=function(a){return"[object Array]"==Object[z].toString[C](Object(a))},qa=function(a){return void 0!=a&&-1<(a.constructor+"")[t]("String")},D=function(a,b){return 0==a[t](b)},sa=function(a){return a?a[Qc](/^[\s\xa0]+|[\s\xa0]+$/g,""):""},ta=function(a){var b=M[u]("img");b.width=1;b.height=1;b.src=a;return b},ua=function(){},K=function(a){if(aa instanceof Function)return aa(a);J(28);return a},L=function(a,b,c,d){try{a.addEventListener?a.addEventListener(b,
c,!!d):a.attachEvent&&a.attachEvent("on"+b,c)}catch(e){J(27)}},wa=function(a,b){if(a){var c=M[u]("script");c.type="text/javascript";c.async=!0;c.src=a;b&&(c.id=b);var d=M.getElementsByTagName("script")[0];d.parentNode.insertBefore(c,d)}},Ud=function(){return"https:"==M[B][E]},xa=function(){var a=""+M[B][ma];return 0==a[t]("www.")?a[F](4):a},ya=function(a){var b=M.referrer;if(/^https?:\/\//i[pa](b)){if(a)return b;a="//"+M[B][ma];var c=b[t](a);if(5==c||6==c)if(a=b.charAt(c+a[y]),"/"==a||"?"==a||""==
a||":"==a)return;return b}},za=function(a,b){if(1==b[y]&&null!=b[0]&&"object"===typeof b[0])return b[0];for(var c={},d=n.min(a[y]+1,b[y]),e=0;e<d;e++)if("object"===typeof b[e]){for(var g in b[e])b[e][ra](g)&&(c[g]=b[e][g]);break}else e<a[y]&&(c[a[e]]=b[e]);return c};var ee=function(){this.keys=[];this.values={};this.m={}};ee[z].set=function(a,b,c){this.keys[p](a);c?this.m[":"+a]=b:this.values[":"+a]=b};ee[z].get=function(a){return this.m[ra](":"+a)?this.m[":"+a]:this.values[":"+a]};ee[z].map=function(a){for(var b=0;b<this.keys[y];b++){var c=this.keys[b],d=this.get(c);d&&a(c,d)}};var O=f,M=document,Mc=function(){for(var a=O[oa].userAgent+(M[r]?M[r]:"")+(M.referrer?M.referrer:""),b=a[y],c=O.history[y];0<c;)a+=c--^b++;return La(a)};var Aa=function(a){var b=O._gaUserPrefs;if(b&&b.ioo&&b.ioo()||a&&!0===O["ga-disable-"+a])return!0;try{var c=O.external;if(c&&c._gaUserPrefs&&"oo"==c._gaUserPrefs)return!0}catch(d){}return!1};var Ca=function(a){var b=[],c=M[r][A](";");a=new RegExp("^\\s*"+a+"=\\s*(.*?)\\s*$");for(var d=0;d<c[y];d++){var e=c[d][m](a);e&&b[p](e[1])}return b},zc=function(a,b,c,d,e,g){e=Aa(e)?!1:eb[pa](M[B][ma])||"/"==c&&vc[pa](d)?!1:!0;if(!e)return!1;b&&1200<b[y]&&(b=b[F](0,1200),J(24));c=a+"="+b+"; path="+c+"; ";g&&(c+="expires="+(new Date((new Date)[da]()+g)).toGMTString()+"; ");d&&"none"!=d&&(c+="domain="+d+";");d=M[r];M.cookie=c;if(!(d=d!=M[r]))a:{a=Ca(a);for(d=0;d<a[y];d++)if(b==a[d]){d=!0;break a}d=
!1}return d},Cc=function(a){return K(a)[Qc](/\(/g,"%28")[Qc](/\)/g,"%29")},vc=/^(www\.)?google(\.com?)?(\.[a-z]{2})?$/,eb=/(^|\.)doubleclick\.net$/i;var oc=function(){return(Ba||Ud()?"https:":"http:")+"//www.google-analytics.com"},Da=function(a){this.name="len";this.message=a+"-8192"},ba=function(a,b,c){c=c||ua;if(2036>=b[y])wc(a,b,c);else if(8192>=b[y])x(a,b,c)||wd(a,b,c)||wc(a,b,c);else throw ge("len",b[y]),new Da(b[y]);},wc=function(a,b,c){var d=ta(a+"?"+b);d.onload=d.onerror=function(){d.onload=null;d.onerror=null;c()}},wd=function(a,b,c){var d=O.XMLHttpRequest;if(!d)return!1;var e=new d;if(!("withCredentials"in e))return!1;e.open("POST",
a,!0);e.withCredentials=!0;e.setRequestHeader("Content-Type","text/plain");e.onreadystatechange=function(){4==e.readyState&&(c(),e=null)};e.send(b);return!0},x=function(a,b,c){if(!O[oa][Ga])return!1;2036>=b[y]&&(a+="?"+b,b="");return O[oa][Ga](a,b)?(c(),!0):!1},ge=function(a,b,c){1<=100*n.random()||Aa("?")||(a=["t=error","_e="+a,"_v=j36","sr=1"],b&&a[p]("_f="+b),c&&a[p]("_m="+K(c[F](0,100))),a[p]("aip=1"),a[p]("z="+fe()),wc(oc()+"/collect",a[H]("&"),ua))};var Ha=function(){this.t=[]};Ha[z].add=function(a){this.t[p](a)};Ha[z].D=function(a){try{for(var b=0;b<this.t[y];b++){var c=a.get(this.t[b]);c&&ea(c)&&c[C](O,a)}}catch(d){}b=a.get(Ia);b!=ua&&ea(b)&&(a.set(Ia,ua,!0),setTimeout(b,10))};function Ja(a){if(100!=a.get(Ka)&&La(P(a,Q))%1E4>=100*R(a,Ka))throw"abort";}function Ma(a){if(Aa(P(a,Na)))throw"abort";}function Oa(){var a=M[B][E];if("http:"!=a&&"https:"!=a)throw"abort";}
function Pa(a){try{O[oa][Ga]?J(42):O.XMLHttpRequest&&"withCredentials"in new O.XMLHttpRequest&&J(40)}catch(b){}a.set(ld,Td(a),!0);a.set(Ac,R(a,Ac)+1);var c=[];Qa.map(function(b,e){if(e.p){var g=a.get(b);void 0!=g&&g!=e[ia]&&("boolean"==typeof g&&(g*=1),c[p](e.p+"="+K(""+g)))}});c[p]("z="+Bd());a.set(Ra,c[H]("&"),!0)}
function Sa(a){var b=P(a,gd)||oc()+"/collect",c=P(a,fa);!c&&a.get(Vd)&&(c="beacon");if(c){var d=P(a,Ra),e=a.get(Ia),e=e||ua;"image"==c?wc(b,d,e):"xhr"==c&&wd(b,d,e)||"beacon"==c&&x(b,d,e)||ba(b,d,e)}else ba(b,P(a,Ra),a.get(Ia));a.set(Ia,ua,!0)}function Hc(a){var b=O.gaData;b&&(b.expId&&a.set(Nc,b.expId),b.expVar&&a.set(Oc,b.expVar))}function cd(){if(O[oa]&&"preview"==O[oa].loadPurpose)throw"abort";}function yd(a){var b=O.gaDevIds;ka(b)&&0!=b[y]&&a.set("&did",b[H](","),!0)}
function vb(a){if(!a.get(Na))throw"abort";};var hd=function(){return n.round(2147483647*n.random())},Bd=function(){try{var a=new Uint32Array(1);O.crypto.getRandomValues(a);return a[0]&2147483647}catch(b){return hd()}},fe=hd;function Ta(a){var b=R(a,Ua);500<=b&&J(15);var c=P(a,Va);if("transaction"!=c&&"item"!=c){var c=R(a,Wa),d=(new Date)[da](),e=R(a,Xa);0==e&&a.set(Xa,d);e=n.round(2*(d-e)/1E3);0<e&&(c=n.min(c+e,20),a.set(Xa,d));if(0>=c)throw"abort";a.set(Wa,--c)}a.set(Ua,++b)};var Ya=function(){this.data=new ee},Qa=new ee,Za=[];Ya[z].get=function(a){var b=$a(a),c=this[q].get(a);b&&void 0==c&&(c=ea(b[ia])?b[ia]():b[ia]);return b&&b.n?b.n(this,a,c):c};var P=function(a,b){var c=a.get(b);return void 0==c?"":""+c},R=function(a,b){var c=a.get(b);return void 0==c||""===c?0:1*c};Ya[z].set=function(a,b,c){if(a)if("object"==typeof a)for(var d in a)a[ra](d)&&ab(this,d,a[d],c);else ab(this,a,b,c)};
var ab=function(a,b,c,d){if(void 0!=c)switch(b){case Na:wb[pa](c)}var e=$a(b);e&&e.o?e.o(a,b,c,d):a[q].set(b,c,d)},bb=function(a,b,c,d,e){this.name=a;this.p=b;this.n=d;this.o=e;this.defaultValue=c},$a=function(a){var b=Qa.get(a);if(!b)for(var c=0;c<Za[y];c++){var d=Za[c],e=d[0].exec(a);if(e){b=d[1](e);Qa.set(b[v],b);break}}return b},yc=function(a){var b;Qa.map(function(c,d){d.p==a&&(b=d)});return b&&b[v]},S=function(a,b,c,d,e){a=new bb(a,b,c,d,e);Qa.set(a[v],a);return a[v]},cb=function(a,b){Za[p]([new RegExp("^"+
a+"$"),b])},T=function(a,b,c){return S(a,b,c,void 0,db)},db=function(){};var gb=qa(f.GoogleAnalyticsObject)&&sa(f.GoogleAnalyticsObject)||"ga",Ba=!1,he=S("_br"),hb=T("apiVersion","v"),ib=T("clientVersion","_v");S("anonymizeIp","aip");var jb=S("adSenseId","a"),Va=S("hitType","t"),Ia=S("hitCallback"),Ra=S("hitPayload");S("nonInteraction","ni");S("currencyCode","cu");S("dataSource","ds");var Vd=S("useBeacon",void 0,!1),fa=S("transport");S("sessionControl","sc","");S("sessionGroup","sg");S("queueTime","qt");var Ac=S("_s","_s");S("screenName","cd");
var kb=S("location","dl",""),lb=S("referrer","dr"),mb=S("page","dp","");S("hostname","dh");var nb=S("language","ul"),ob=S("encoding","de");S("title","dt",function(){return M.title||void 0});cb("contentGroup([0-9]+)",function(a){return new bb(a[0],"cg"+a[1])});var pb=S("screenColors","sd"),qb=S("screenResolution","sr"),rb=S("viewportSize","vp"),sb=S("javaEnabled","je"),tb=S("flashVersion","fl");S("campaignId","ci");S("campaignName","cn");S("campaignSource","cs");S("campaignMedium","cm");
S("campaignKeyword","ck");S("campaignContent","cc");var ub=S("eventCategory","ec"),xb=S("eventAction","ea"),yb=S("eventLabel","el"),zb=S("eventValue","ev"),Bb=S("socialNetwork","sn"),Cb=S("socialAction","sa"),Db=S("socialTarget","st"),Eb=S("l1","plt"),Fb=S("l2","pdt"),Gb=S("l3","dns"),Hb=S("l4","rrt"),Ib=S("l5","srt"),Jb=S("l6","tcp"),Kb=S("l7","dit"),Lb=S("l8","clt"),Mb=S("timingCategory","utc"),Nb=S("timingVar","utv"),Ob=S("timingLabel","utl"),Pb=S("timingValue","utt");S("appName","an");
S("appVersion","av","");S("appId","aid","");S("appInstallerId","aiid","");S("exDescription","exd");S("exFatal","exf");var Nc=S("expId","xid"),Oc=S("expVar","xvar"),Rc=S("_utma","_utma"),Sc=S("_utmz","_utmz"),Tc=S("_utmht","_utmht"),Ua=S("_hc",void 0,0),Xa=S("_ti",void 0,0),Wa=S("_to",void 0,20);cb("dimension([0-9]+)",function(a){return new bb(a[0],"cd"+a[1])});cb("metric([0-9]+)",function(a){return new bb(a[0],"cm"+a[1])});S("linkerParam",void 0,void 0,Bc,db);var ld=S("usage","_u"),Gd=S("_um");
S("forceSSL",void 0,void 0,function(){return Ba},function(a,b,c){J(34);Ba=!!c});var ed=S("_j1","jid");cb("\\&(.*)",function(a){var b=new bb(a[0],a[1]),c=yc(a[0][F](1));c&&(b.n=function(a){return a.get(c)},b.o=function(a,b,g,ca){a.set(c,g,ca)},b.p=void 0);return b});
var Qb=T("_oot"),dd=S("previewTask"),Rb=S("checkProtocolTask"),md=S("validationTask"),Sb=S("checkStorageTask"),Uc=S("historyImportTask"),Tb=S("samplerTask"),Vb=S("_rlt"),Wb=S("buildHitTask"),Xb=S("sendHitTask"),Vc=S("ceTask"),zd=S("devIdTask"),Cd=S("timingTask"),Ld=S("displayFeaturesTask"),V=T("name"),Q=T("clientId","cid"),Ad=S("userId","uid"),Na=T("trackingId","tid"),U=T("cookieName",void 0,"_ga"),W=T("cookieDomain"),Yb=T("cookiePath",void 0,"/"),Zb=T("cookieExpires",void 0,63072E3),$b=T("legacyCookieDomain"),
Wc=T("legacyHistoryImport",void 0,!0),ac=T("storage",void 0,"cookie"),bc=T("allowLinker",void 0,!1),cc=T("allowAnchor",void 0,!0),Ka=T("sampleRate","sf",100),dc=T("siteSpeedSampleRate",void 0,1),ec=T("alwaysSendReferrer",void 0,!1),gd=S("transportUrl"),Md=S("_r","_r");function X(a,b,c,d){b[a]=function(){try{return d&&J(d),c[G](this,arguments)}catch(b){throw ge("exc",a,b&&b[v]),b;}}};var Od=function(a,b,c){this.V=1E4;this.fa=a;this.$=!1;this.B=b;this.ea=c||1},Ed=function(a,b){var c;if(a.fa&&a.$)return 0;a.$=!0;if(b){if(a.B&&R(b,a.B))return R(b,a.B);if(0==b.get(dc))return 0}if(0==a.V)return 0;void 0===c&&(c=Bd());return 0==c%a.V?n.floor(c/a.V)%a.ea+1:0};var ie=new Od(!0,he,7),je=function(a){if(!Ud()&&!Ba){var b=Ed(ie,a);if(b&&!(!O[oa][Ga]&&4<=b&&6>=b)){var c=(new Date).getHours(),d=[Bd(),Bd(),Bd()][H](".");a=(3==b||5==b?"https:":"http:")+"//www.google-analytics.com/collect?z=br.";a+=[b,"A",c,d][H](".");var e=1!=b%3?"https:":"http:",e=e+"//www.google-analytics.com/collect?z=br.",e=e+[b,"B",c,d][H](".");7==b&&(e=e[Qc]("//www.","//ssl."));c=function(){4<=b&&6>=b?O[oa][Ga](e,""):ta(e)};Bd()%2?(ta(a),c()):(c(),ta(a))}}};function fc(){var a,b,c;if((c=(c=O[oa])?c.plugins:null)&&c[y])for(var d=0;d<c[y]&&!b;d++){var e=c[d];-1<e[v][t]("Shockwave Flash")&&(b=e.description)}if(!b)try{a=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7"),b=a.GetVariable("$version")}catch(g){}if(!b)try{a=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6"),b="WIN 6,0,21,0",a.AllowScriptAccess="always",b=a.GetVariable("$version")}catch(ca){}if(!b)try{a=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),b=a.GetVariable("$version")}catch(l){}b&&
(a=b[m](/[\d]+/g))&&3<=a[y]&&(b=a[0]+"."+a[1]+" r"+a[2]);return b||void 0};var gc=function(a,b){var c=n.min(R(a,dc),100);if(!(La(P(a,Q))%100>=c)&&(c={},Ec(c)||Fc(c))){var d=c[Eb];void 0==d||Infinity==d||isNaN(d)||(0<d?(Y(c,Gb),Y(c,Jb),Y(c,Ib),Y(c,Fb),Y(c,Hb),Y(c,Kb),Y(c,Lb),b(c)):L(O,"load",function(){gc(a,b)},!1))}},Ec=function(a){var b=O.performance||O.webkitPerformance,b=b&&b.timing;if(!b)return!1;var c=b.navigationStart;if(0==c)return!1;a[Eb]=b.loadEventStart-c;a[Gb]=b.domainLookupEnd-b.domainLookupStart;a[Jb]=b.connectEnd-b.connectStart;a[Ib]=b.responseStart-b.requestStart;
a[Fb]=b.responseEnd-b.responseStart;a[Hb]=b.fetchStart-c;a[Kb]=b.domInteractive-c;a[Lb]=b.domContentLoadedEventStart-c;return!0},Fc=function(a){if(O.top!=O)return!1;var b=O.external,c=b&&b.onloadT;b&&!b.isValidLoadTime&&(c=void 0);2147483648<c&&(c=void 0);0<c&&b.setPageReadyTime();if(void 0==c)return!1;a[Eb]=c;return!0},Y=function(a,b){var c=a[b];if(isNaN(c)||Infinity==c||0>c)a[b]=void 0},Fd=function(a){return function(b){"pageview"!=b.get(Va)||a.I||(a.I=!0,gc(b,function(b){a.send("timing",b)}))}};var hc=!1,mc=function(a){if("cookie"==P(a,ac)){var b=P(a,U),c=nd(a),d=kc(P(a,Yb)),e=lc(P(a,W)),g=1E3*R(a,Zb),ca=P(a,Na);if("auto"!=e)zc(b,c,d,e,ca,g)&&(hc=!0);else{J(32);var l;a:{c=[];e=xa()[A](".");if(4==e[y]&&(l=e[e[y]-1],parseInt(l,10)==l)){l=["none"];break a}for(l=e[y]-2;0<=l;l--)c[p](e[ha](l)[H]("."));c[p]("none");l=c}for(var k=0;k<l[y];k++)if(e=l[k],a[q].set(W,e),c=nd(a),zc(b,c,d,e,ca,g)){hc=!0;return}a[q].set(W,"auto")}}},nc=function(a){if("cookie"==P(a,ac)&&!hc&&(mc(a),!hc))throw"abort";},
Yc=function(a){if(a.get(Wc)){var b=P(a,W),c=P(a,$b)||xa(),d=Xc("__utma",c,b);d&&(J(19),a.set(Tc,(new Date)[da](),!0),a.set(Rc,d.R),(b=Xc("__utmz",c,b))&&d[h]==b[h]&&a.set(Sc,b.R))}},nd=function(a){var b=Cc(P(a,Q)),c=ic(P(a,W));a=jc(P(a,Yb));1<a&&(c+="-"+a);return["GA1",c,b][H](".")},Gc=function(a,b,c){for(var d=[],e=[],g,ca=0;ca<a[y];ca++){var l=a[ca];if(l.r[c]==b)d[p](l);else void 0==g||l.r[c]<g?(e=[l],g=l.r[c]):l.r[c]==g&&e[p](l)}return 0<d[y]?d:e},lc=function(a){return 0==a[t](".")?a.substr(1):
a},ic=function(a){return lc(a)[A](".")[y]},kc=function(a){if(!a)return"/";1<a[y]&&a.lastIndexOf("/")==a[y]-1&&(a=a.substr(0,a[y]-1));0!=a[t]("/")&&(a="/"+a);return a},jc=function(a){a=kc(a);return"/"==a?1:a[A]("/")[y]};function Xc(a,b,c){"none"==b&&(b="");var d=[],e=Ca(a);a="__utma"==a?6:2;for(var g=0;g<e[y];g++){var ca=(""+e[g])[A](".");ca[y]>=a&&d[p]({hash:ca[0],R:e[g],O:ca})}return 0==d[y]?void 0:1==d[y]?d[0]:Zc(b,d)||Zc(c,d)||Zc(null,d)||d[0]}function Zc(a,b){var c,d;null==a?c=d=1:(c=La(a),d=La(D(a,".")?a[F](1):"."+a));for(var e=0;e<b[y];e++)if(b[e][h]==c||b[e][h]==d)return b[e]};var od=new RegExp(/^https?:\/\/([^\/:]+)/),pd=/(.*)([?&#])(?:_ga=[^&#]*)(?:&?)(.*)/;function Bc(a){a=a.get(Q);var b=Ic(a,0);return"_ga=1."+K(b+"."+a)}function Ic(a,b){for(var c=new Date,d=O[oa],e=d.plugins||[],c=[a,d.userAgent,c.getTimezoneOffset(),c.getYear(),c.getDate(),c.getHours(),c.getMinutes()+b],d=0;d<e[y];++d)c[p](e[d].description);return La(c[H]("."))}var Dc=function(a){J(48);this.target=a;this.T=!1};
Dc[z].Q=function(a,b){if(a.tagName){if("a"==a.tagName[I]()){a[Ab]&&Pc(a,qd(this,a[Ab],b));return}if("form"==a.tagName[I]())return rd(this,a)}if("string"==typeof a)return qd(this,a,b)};
var qd=function(a,b,c){var d=pd.exec(b);d&&3<=d[y]&&(b=d[1]+(d[3]?d[2]+d[3]:""));a=a[jd].get("linkerParam");var e=b[t]("?"),d=b[t]("#");c?b+=(-1==d?"#":"&")+a:(c=-1==e?"?":"&",b=-1==d?b+(c+a):b[F](0,d)+c+a+b[F](d));return b},rd=function(a,b){if(b&&b[kd]){var c=a[jd].get("linkerParam")[A]("=")[1];if("get"==b.method[I]()){for(var d=b.childNodes||[],e=0;e<d[y];e++)if("_ga"==d[e][v]){d[e][id]("value",c);return}d=M[u]("input");d[id]("type","hidden");d[id]("name","_ga");d[id]("value",c);b.appendChild(d)}else"post"==
b.method[I]()&&(b.action=qd(a,b[kd]))}};
Dc[z].S=function(a,b,c){function d(c){try{c=c||O.event;var d;a:{var g=c[jd]||c.srcElement;for(c=100;g&&0<c;){if(g[Ab]&&g.nodeName[m](/^a(?:rea)?$/i)){d=g;break a}g=g.parentNode;c--}d={}}("http:"==d[E]||"https:"==d[E])&&sd(a,d[ma]||"")&&d[Ab]&&Pc(d,qd(e,d[Ab],b))}catch(w){J(26)}}var e=this;this.T||(this.T=!0,L(M,"mousedown",d,!1),L(M,"touchstart",d,!1),L(M,"keyup",d,!1));if(c){c=function(b){b=b||O.event;if((b=b[jd]||b.srcElement)&&b[kd]){var c=b[kd][m](od);c&&sd(a,c[1])&&rd(e,b)}};for(var g=0;g<M.forms[y];g++)L(M.forms[g],
"submit",c)}};function sd(a,b){if(b==M[B][ma])return!1;for(var c=0;c<a[y];c++)if(a[c]instanceof RegExp){if(a[c][pa](b))return!0}else if(0<=b[t](a[c]))return!0;return!1};var Jd=function(a,b,c){this.U=ed;this.aa=b;(b=c)||(b=(b=P(a,V))&&"t0"!=b?Wd[pa](b)?"_gat_"+Cc(P(a,Na)):"_gat_"+Cc(b):"_gat");this.Y=b},Rd=function(a,b){var c=b.get(Wb);b.set(Wb,function(b){Pd(a,b);var d=c(b);Qd(a,b);return d});var d=b.get(Xb);b.set(Xb,function(b){var c=d(b);Id(a,b);return c})},Pd=function(a,b){b.get(a.U)||("1"==Ca(a.Y)[0]?b.set(a.U,"",!0):b.set(a.U,""+fe(),!0))},Qd=function(a,b){b.get(a.U)&&zc(a.Y,"1",b.get(Yb),b.get(W),b.get(Na),6E5)},Id=function(a,b){if(b.get(a.U)){var c=new ee,
d=function(a){$a(a).p&&c.set($a(a).p,b.get(a))};d(hb);d(ib);d(Na);d(Q);d(a.U);c.set($a(ld).p,Td(b));var e=a.aa;c.map(function(a,b){e+=K(a)+"=";e+=K(""+b)+"&"});e+="z="+fe();ta(e);b.set(a.U,"",!0)}},Wd=/^gtm\d+$/;var fd=function(a,b){var c=a.b;if(!c.get("dcLoaded")){Nd(c,29);b=b||{};var d;b[U]&&(d=Cc(b[U]));d=new Jd(c,"https://stats.g.doubleclick.net/r/collect?t=dc&aip=1&_r=3&",d);Rd(d,c);c.set("dcLoaded",!0)}};var Sd=function(a){var b;b=a.get("dcLoaded")?!1:"cookie"!=a.get(ac)?!1:!0;b&&(Nd(a,51),b=new Jd(a),Pd(b,a),Qd(b,a),a.get(b.U)&&(a.set(Md,1,!0),a.set(gd,oc()+"/r/collect",!0)))};var Lc=function(){var a=O.gaGlobal=O.gaGlobal||{};return a.hid=a.hid||fe()};var ad,bd=function(a,b,c){if(!ad){var d;d=M[B][h];var e=O[v],g=/^#?gaso=([^&]*)/;if(e=(d=(d=d&&d[m](g)||e&&e[m](g))?d[1]:Ca("GASO")[0]||"")&&d[m](/^(?:!([-0-9a-z.]{1,40})!)?([-.\w]{10,1200})$/i))zc("GASO",""+d,c,b,a,0),f._udo||(f._udo=b),f._utcp||(f._utcp=c),a=e[1],wa("https://www.google.com/analytics/web/inpage/pub/inpage.js?"+(a?"prefix="+a+"&":"")+fe(),"_gasojs");ad=!0}};var wb=/^(UA|YT|MO|GP)-(\d+)-(\d+)$/,pc=function(a){function b(a,b){d.b[q].set(a,b)}function c(a,c){b(a,c);d.filters.add(a)}var d=this;this.b=new Ya;this.filters=new Ha;b(V,a[V]);b(Na,sa(a[Na]));b(U,a[U]);b(W,a[W]||xa());b(Yb,a[Yb]);b(Zb,a[Zb]);b($b,a[$b]);b(Wc,a[Wc]);b(bc,a[bc]);b(cc,a[cc]);b(Ka,a[Ka]);b(dc,a[dc]);b(ec,a[ec]);b(ac,a[ac]);b(Ad,a[Ad]);b(hb,1);b(ib,"j36");c(Qb,Ma);c(dd,cd);c(Rb,Oa);c(md,vb);c(Sb,nc);c(Uc,Yc);c(Tb,Ja);c(Vb,Ta);c(Vc,Hc);c(zd,yd);c(Ld,Sd);c(Wb,Pa);c(Xb,Sa);c(Cd,Fd(this));
Jc(this.b,a[Q]);Kc(this.b);this.b.set(jb,Lc());bd(this.b.get(Na),this.b.get(W),this.b.get(Yb))},Jc=function(a,b){if("cookie"==P(a,ac)){hc=!1;var c;b:{var d=Ca(P(a,U));if(d&&!(1>d[y])){c=[];for(var e=0;e<d[y];e++){var g;g=d[e][A](".");var ca=g.shift();("GA1"==ca||"1"==ca)&&1<g[y]?(ca=g.shift()[A]("-"),1==ca[y]&&(ca[1]="1"),ca[0]*=1,ca[1]*=1,g={r:ca,s:g[H](".")}):g=void 0;g&&c[p](g)}if(1==c[y]){J(13);c=c[0].s;break b}if(0==c[y])J(12);else{J(14);d=ic(P(a,W));c=Gc(c,d,0);if(1==c[y]){c=c[0].s;break b}d=
jc(P(a,Yb));c=Gc(c,d,1);c=c[0]&&c[0].s;break b}}c=void 0}c||(c=P(a,W),d=P(a,$b)||xa(),c=Xc("__utma",d,c),void 0!=c?(J(10),c=c.O[1]+"."+c.O[2]):c=void 0);c&&(a[q].set(Q,c),hc=!0)}c=a.get(cc);if(e=(c=M[B][c?"href":"search"][m]("(?:&|#|\\?)"+K("_ga")[Qc](/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")+"=([^&#]*)"))&&2==c[y]?c[1]:"")a.get(bc)?(c=e[t]("."),-1==c?J(22):(d=e[F](c+1),"1"!=e[F](0,c)?J(22):(c=d[t]("."),-1==c?J(22):(e=d[F](0,c),c=d[F](c+1),e!=Ic(c,0)&&e!=Ic(c,-1)&&e!=Ic(c,-2)?J(23):(J(11),a[q].set(Q,
c)))))):J(21);b&&(J(9),a[q].set(Q,K(b)));a.get(Q)||((c=(c=O.gaGlobal&&O.gaGlobal.vid)&&-1!=c[ga](/^(?:utma\.)?\d+\.\d+$/)?c:void 0)?(J(17),a[q].set(Q,c)):(J(8),a[q].set(Q,[fe()^Mc()&2147483647,n.round((new Date)[da]()/1E3)][H]("."))));mc(a)},Kc=function(a){var b=O[oa],c=O.screen,d=M[B];a.set(lb,ya(a.get(ec)));if(d){var e=d.pathname||"";"/"!=e.charAt(0)&&(J(31),e="/"+e);a.set(kb,d[E]+"//"+d[ma]+e+d[ga])}c&&a.set(qb,c.width+"x"+c.height);c&&a.set(pb,c.colorDepth+"-bit");var c=M.documentElement,g=(e=
M.body)&&e[la]&&e[na],ca=[];c&&c[la]&&c[na]&&("CSS1Compat"===M.compatMode||!g)?ca=[c[la],c[na]]:g&&(ca=[e[la],e[na]]);c=0>=ca[0]||0>=ca[1]?"":ca[H]("x");a.set(rb,c);a.set(tb,fc());a.set(ob,M.characterSet||M.charset);a.set(sb,b&&"function"===typeof b.javaEnabled&&b.javaEnabled()||!1);a.set(nb,(b&&(b.language||b.browserLanguage)||"")[I]());if(d&&a.get(cc)&&(b=M[B][h])){b=b[A](/[?&#]+/);d=[];for(c=0;c<b[y];++c)(D(b[c],"utm_id")||D(b[c],"utm_campaign")||D(b[c],"utm_source")||D(b[c],"utm_medium")||D(b[c],
"utm_term")||D(b[c],"utm_content")||D(b[c],"gclid")||D(b[c],"dclid")||D(b[c],"gclsrc"))&&d[p](b[c]);0<d[y]&&(b="#"+d[H]("&"),a.set(kb,a.get(kb)+b))}};pc[z].get=function(a){return this.b.get(a)};pc[z].set=function(a,b){this.b.set(a,b)};var qc={pageview:[mb],event:[ub,xb,yb,zb],social:[Bb,Cb,Db],timing:[Mb,Nb,Pb,Ob]};
pc[z].send=function(a){if(!(1>arguments[y])){var b,c;"string"===typeof arguments[0]?(b=arguments[0],c=[][ha][C](arguments,1)):(b=arguments[0]&&arguments[0][Va],c=arguments);b&&(c=za(qc[b]||[],c),c[Va]=b,this.b.set(c,void 0,!0),this.filters.D(this.b),this.b[q].m={},je(this.b))}};var rc=function(a){if("prerender"==M.visibilityState)return!1;a();return!0};var td=/^(?:(\w+)\.)?(?:(\w+):)?(\w+)$/,sc=function(a){if(ea(a[0]))this.u=a[0];else{var b=td.exec(a[0]);null!=b&&4==b[y]&&(this.c=b[1]||"t0",this.e=b[2]||"",this.d=b[3],this.a=[][ha][C](a,1),this.e||(this.A="create"==this.d,this.i="require"==this.d,this.g="provide"==this.d,this.ba="remove"==this.d),this.i&&(3<=this.a[y]?(this.X=this.a[1],this.W=this.a[2]):this.a[1]&&(qa(this.a[1])?this.X=this.a[1]:this.W=this.a[1])));b=a[1];a=a[2];if(!this.d)throw"abort";if(this.i&&(!qa(b)||""==b))throw"abort";if(this.g&&
(!qa(b)||""==b||!ea(a)))throw"abort";if(ud(this.c)||ud(this.e))throw"abort";if(this.g&&"t0"!=this.c)throw"abort";}};function ud(a){return 0<=a[t](".")||0<=a[t](":")};var Yd,Zd,$d;Yd=new ee;$d=new ee;Zd={ec:45,ecommerce:46,linkid:47};
var ae=function(a){function b(a){var b=(a[ma]||"")[A](":")[0][I](),c=(a[E]||"")[I](),c=1*a[ja]||("http:"==c?80:"https:"==c?443:"");a=a.pathname||"";D(a,"/")||(a="/"+a);return[b,""+c,a]}var c=M[u]("a");Pc(c,M[B][Ab]);var d=(c[E]||"")[I](),e=b(c),g=c[ga]||"",ca=d+"//"+e[0]+(e[1]?":"+e[1]:"");D(a,"//")?a=d+a:D(a,"/")?a=ca+a:!a||D(a,"?")?a=ca+e[2]+(a||g):0>a[A]("/")[0][t](":")&&(a=ca+e[2][F](0,e[2].lastIndexOf("/"))+"/"+a);Pc(c,a);d=b(c);return{protocol:(c[E]||"")[I](),host:d[0],port:d[1],path:d[2],G:c[ga]||
"",url:a||""}};var Z={ga:function(){Z.f=[]}};Z.ga();Z.D=function(a){var b=Z.J[G](Z,arguments),b=Z.f.concat(b);for(Z.f=[];0<b[y]&&!Z.v(b[0])&&!(b.shift(),0<Z.f[y]););Z.f=Z.f.concat(b)};
Z.J=function(a){for(var b=[],c=0;c<arguments[y];c++)try{var d=new sc(arguments[c]);if(d.g)Yd.set(d.a[0],d.a[1]);else{if(d.i){var e=d,g=e.a[0];if(!ea(Yd.get(g))&&!$d.get(g)){Zd[ra](g)&&J(Zd[g]);var ca=e.X;!ca&&Zd[ra](g)?(J(39),ca=g+".js"):J(43);if(ca){ca&&0<=ca[t]("/")||(ca=(Ba||Ud()?"https:":"http:")+"//www.google-analytics.com/plugins/ua/"+ca);var l=ae(ca),e=void 0;var k=l[E],w=M[B][E],e="https:"==k||k==w?!0:"http:"!=k?!1:"http:"==w;var Xd;if(Xd=e){var e=l,be=ae(M[B][Ab]);if(e.G||0<=e.url[t]("?")||
0<=e.path[t]("://"))Xd=!1;else if(e.host==be.host&&e[ja]==be[ja])Xd=!0;else{var ce="http:"==e[E]?80:443;Xd="www.google-analytics.com"==e.host&&(e[ja]||ce)==ce&&D(e.path,"/plugins/")?!0:!1}}Xd&&(wa(l.url),$d.set(g,!0))}}}b[p](d)}}catch(de){}return b};
Z.v=function(a){try{if(a.u)a.u[C](O,N.j("t0"));else{var b=a.c==gb?N:N.j(a.c);if(a.A)"t0"==a.c&&N.create[G](N,a.a);else if(a.ba)N.remove(a.c);else if(b)if(a.i){var c;var d=a.a[0],e=a.W;b==N||b.get(V);var g=Yd.get(d);ea(g)?(b.plugins_=b.plugins_||new ee,b.plugins_.get(d)||b.plugins_.set(d,new g(b,e||{})),c=!0):c=!1;if(!c)return!0}else if(a.e){var ca=a.d,l=a.a,k=b.plugins_.get(a.e);k[ca][G](k,l)}else b[a.d][G](b,a.a)}}catch(w){}};var N=function(a){J(1);Z.D[G](Z,[arguments])};N.h={};N.P=[];N.L=0;N.answer=42;var uc=[Na,W,V];N.create=function(a){var b=za(uc,[][ha][C](arguments));b[V]||(b[V]="t0");var c=""+b[V];if(N.h[c])return N.h[c];b=new pc(b);N.h[c]=b;N.P[p](b);return b};N.remove=function(a){for(var b=0;b<N.P[y];b++)if(N.P[b].get(V)==a){N.P.splice(b,1);N.h[a]=null;break}};N.j=function(a){return N.h[a]};N.getAll=function(){return N.P[ha](0)};
N.N=function(){"ga"!=gb&&J(49);var a=O[gb];if(!a||42!=a.answer){N.L=a&&a.l;N.loaded=!0;var b=O[gb]=N;X("create",b,b.create);X("remove",b,b.remove);X("getByName",b,b.j,5);X("getAll",b,b.getAll,6);b=pc[z];X("get",b,b.get,7);X("set",b,b.set,4);X("send",b,b.send);b=Ya[z];X("get",b,b.get);X("set",b,b.set);if(!Ud()&&!Ba){a:{for(var b=M.getElementsByTagName("script"),c=0;c<b[y]&&100>c;c++){var d=b[c].src;if(d&&0==d[t]("https://www.google-analytics.com/analytics")){J(33);b=!0;break a}}b=!1}b&&(Ba=!0)}Ud()||
Ba||!Ed(new Od)||(J(36),Ba=!0);(O.gaplugins=O.gaplugins||{}).Linker=Dc;b=Dc[z];Yd.set("linker",Dc);X("decorate",b,b.Q,20);X("autoLink",b,b.S,25);Yd.set("displayfeatures",fd);Yd.set("adfeatures",fd);a=a&&a.q;ka(a)?Z.D[G](N,a):J(50)}};N.k=function(){for(var a=N.getAll(),b=0;b<a[y];b++)a[b].get(V)};
(function(){var a=N.N;if(!rc(a)){J(16);var b=!1,c=function(){if(!b&&rc(a)){b=!0;var d=c,e=M;e.removeEventListener?e.removeEventListener("visibilitychange",d,!1):e.detachEvent&&e.detachEvent("onvisibilitychange",d)}};L(M,"visibilitychange",c)}})();function La(a){var b=1,c=0,d;if(a)for(b=0,d=a[y]-1;0<=d;d--)c=a.charCodeAt(d),b=(b<<6&268435455)+c+(c<<14),c=b&266338304,b=0!=c?b^c>>21:b;return b};})(window);
_text/javascriptÕ	'œ _¬https://blog.st-hatena.com/.shared.css:f95a219773244f14c2c322979e39f67b:/css/theme/base.css,/css/prettify.css,/css/globalheader.css?version=f95a219773244f14c2c322979e39f67bO'bplist00ÔopX$versionX$objectsY$archiverT$top † ¯##)*0123OPQRSTUVWXYZ[\]^_`abcdehijU$nullİ	
 !"R$6S$10R$2R$7R$3S$11R$8V$classR$4R$9R$0R$5R$1€	€€€ €"€€!€Ó$%&'(WNS.base[NS.relative€ €€_¬https://blog.st-hatena.com/.shared.css:f95a219773244f14c2c322979e39f67b:/css/theme/base.css,/css/prettify.css,/css/globalheader.css?version=f95a219773244f14c2c322979e39f67bÒ+,-.Z$classnameX$classesUNSURL¢-/XNSObject#AºôÒ:¡Š‡ ÈÓ456BNWNS.keysZNS.objects«789:;<=>?@A€	€
€€€€€€€€€«CDEFGHIJKLM€€€€€€€€€€€€ZConnection\Content-TypeVServer]Last-Modified]Cache-ControlTVaryTDate_Content-EncodingYX-RuntimeWExpires_Transfer-EncodingZkeep-alive_text/css; charset=utf-8Unginx_Thu, 01 Jan 1970 00:00:00 GMT_-public; max-age=315360000; s-maxage=315360000_Accept-Encoding_Sat, 02 May 2015 09:36:58 GMTTgzipX0.004844_Fri, 02 May 2025 09:36:58 GMTXIdentityÒ+,fg\NSDictionary¢f/ÿÿÿÿÿÿÿÿXtext/cssÒ+,kl_NSHTTPURLResponse£mn/_NSHTTPURLResponse]NSURLResponse_NSKeyedArchiverÑqr_WebResourceResponse€    # - 2 7 ] c ~  … ˆ ‹  ’ • œ Ÿ ¢ ¥ ¨ « ­ ¯ ± ³ µ ¶ ¸ º ¼ ¾ À Â Ä Ë Ó ß á ã å”™¤­³¶¿ÈÊÌÓÛæòôöøúüş  "$&(*,7DKYglq„–ªµÏÕõ%7W\e…“ £¬µºÎÒæô	             s              !O D§/* CSS Document */ /* base.less by HATENA-BLOG TEAM */ /* LESS Mixins */ /* box properties */ .clearfix { display: block; *zoom: 1; } .clearfix:after { display: block; visibility: hidden; font-size: 0; height: 0; clear: both; content: "."; } .inline-block { display: inline-block; *display: inline; *zoom: 1; } .ellipsis { white-space: nowrap; -webkit-text-overflow: ellipsis; -o-text-overflow: ellipsis; text-overflow: ellipsis; overflow: hidden; } /* text properties */ .font-default { font-family: 'Helvetica Neue', 'Helvetica', 'Arial', 'ãƒ’ãƒ©ã‚®ãƒè§’ã‚´ Pro W3', 'Hiragino Kaku Gothic Pro', 'ãƒ¡ã‚¤ãƒªã‚ª', Meiryo, 'ï¼­ï¼³ ï¼°ã‚´ã‚·ãƒƒã‚¯', 'MS PGothic', sans-serif; } /* CSS3 properties */ .border-box { -webkit-box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; box-sizing: border-box; } .center { text-align: center; margin-left: auto; margin-right: auto; } .left { float: left; } .right { float: right; } .nofloat { float: none; } .clear { clear: both; } .block { display: block; } .inline { display: inline; } .nodisplay { display: none; } .relative { position: relative; } .absolute { position: absolute; } .static { position: static; } .fixed { position: fixed; } .margin0 { margin: 0 !important; } .padding0 { padding: 0 !important; } .bold { font-weight: bold; } .normal { font-weight: normal; font-style: normal; } .thin { font-weight: 300; } .italic { font-style: italic; } .nodeco { text-decoration: none; } .underline { text-decoration: underline; } .nolist { list-style-type: none; } .disc { list-style-type: disc; } .circle { list-style-type: circle; } .textleft { text-align: left; } .textright { text-align: right; } @font-face { font-family: 'blogicon'; src: url('/fonts/public/blogicon/blogicon-regular.eot'); src: url('/fonts/public/blogicon/blogicon-regular.eot?#iefix') format('embedded-opentype'), url('/fonts/public/blogicon/blogicon-regular.woff') format('woff'), url('/fonts/public/blogicon/blogicon-regular.ttf') format('truetype'), url('/fonts/public/blogicon/blogicon-regular.svg#blogicon') format('svg'); font-weight: normal; font-style: normal; } [class*="blogicon-"] { display: inline-block; font-family: 'blogicon'; font-style: normal; font-weight: normal; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; } [class*="blogicon-"].lg { font-size: 1.3333333333333333em; line-height: 0.75em; vertical-align: -10%; } .blogicon-hatenablog:before { content: '\f000'; } .blogicon-plus:before { content: '\f001'; } .blogicon-minus:before { content: '\f002'; } .blogicon-reorder:before { content: '\f003'; } .blogicon-grid:before { content: '\f004'; } .blogicon-chevron-left:before { content: '\f005'; } .blogicon-chevron-right:before { content: '\f006'; } .blogicon-chevron-up:before { content: '\f007'; } .blogicon-chevron-down:before { content: '\f008'; } .blogicon-external:before { content: '\f009'; } .blogicon-plugin:before { content: '\f00a'; } .blogicon-member:before { content: '\f00b'; } .blogicon-account:before { content: '\f00c'; } .blogicon-design:before { content: '\f00d'; } .blogicon-cog:before { content: '\f00e'; } .blogicon-edit:before { content: '\f010'; } .blogicon-addstar:before { content: '\f011'; } .blogicon-subscribe:before { content: '\f012'; } .blogicon-entry:before { content: '\f013'; } .blogicon-notify:before { content: '\f014'; } .blogicon-private:before { content: '\f015'; } .blogicon-user:before { content: '\f016'; } .blogicon-home:before { content: '\f017'; } .blogicon-setting:before { content: '\f018'; } .blogicon-draft:before { content: '\f019'; } .blogicon-search:before { content: '\f01a'; } .blogicon-analytics:before { content: '\f01b'; } .blogicon-help:before { content: '\f01c'; } .blogicon-comment:before { content: '\f01d'; } .blogicon-import:before { content: '\f01e'; } .blogicon-truck:before { content: '\f020'; } .blogicon-group:before { content: '\f021'; } .blogicon-folder:before { content: '\f022'; } .blogicon-add:before { content: '\f023'; } .blogicon-pen:before { content: '\f024'; } .blogicon-close:before { content: '\f025'; } .blogicon-trash:before { content: '\f026'; } .blogicon-bookmark:before { content: '\f027'; } .blogicon-redirect:before { content: '\f028'; } .blogicon-check:before { content: '\f029'; color: #c3c1fd; } .blogicon-crop:before { content: '\f02a'; } .blogicon-repeat:before { content: '\f02b'; } .blogicon-logout:before { content: '\f02c'; } .blogicon-star:before { content: '\f02d'; } .blogicon-pro:before { content: '\f02e'; } .blogicon-myblog:before { content: '\f030'; } .blogicon-recent:before { content: '\f031'; } .blogicon-info:before { content: '\f032'; } .blogicon-good:before { content: '\f033'; } .blogicon-amazon:before { content: '\f034'; } .blogicon-twitter:before { content: '\f035'; } .blogicon-facebook:before { content: '\f036'; } .blogicon-share:before { content: '\f037'; } .blogicon-code:before { content: '\f038'; } .blogicon-list:before { content: '\f039'; } .blogicon-calender:before { content: '\f03a'; } .blogicon-bracket:before { content: '\f03b'; } .blogicon-photo:before { content: '\f03c'; } .blogicon-color:before { content: '\f03d'; } .blogicon-public:before { content: '\f03e'; } .blogicon-realtime-preview:before { content: '\f040'; } .blogicon-warning:before { content: '\f041'; } .blogicon-link:before { content: '\f042'; } .blogicon-time:before { content: '\f043'; } .blogicon-markdown:before { content: '\f044'; } .blogicon-evernote:before { content: '\f045'; } .blogicon-music:before { content: '\f046'; } .blogicon-niconico:before { content: '\f047'; } .blogicon-heart:before { content: '\f048'; } .blogicon-heart-alt:before { content: '\f049'; } .blogicon-tag:before { content: '\f04a'; } .blogicon-mail:before { content: '\f04b'; } .blogicon-help-alt:before { content: '\f04c'; } .blogicon-sushi:before { content: '\f04d'; } .blogicon-rss:before { content: '\f04e'; } .blogicon-smartphone:before { content: '\f051'; } .blogicon-laptop:before { content: '\f052'; } .blogicon-mixi:before { content: '\f053'; } .blogicon-haiku:before { content: '\f054'; } /* @HATENA-MODULE-FOLLOW-BUTTON */ .hatena-follow-button-box { clear: both; font-size: 10px !important; height: 20px; margin: 0.7em 0; display: block; *zoom: 1; } .hatena-follow-button-box:after { display: block; visibility: hidden; font-size: 0; height: 0; clear: both; content: "."; } .hatena-follow-button { display: inline-block; *display: inline; *zoom: 1; height: 18px !important; padding-left: 20px; padding-right: 5px; min-width: 40px; border: 1px solid #bbb !important; border-radius: 3px; -moz-border-radius: 3px; -webkit-border-radius: 3px; transition: 0.3s ease; transition-property: opacity, border, color, background; -o-transition: 0.3s ease; -o-transition-property: opacity, border, color, background; -moz-transition: 0.3s ease; -moz-transition-property: opacity, border, color, background; -webkit-transition: 0.3s ease; -webkit-transition-property: opacity, border, color, background; line-height: 18px !important; font-weight: bold; text-decoration: none; color: #555 !important; background: #ebebeb; float: left; letter-spacing: 0 !important; white-space: nowrap; -webkit-text-overflow: ellipsis; -o-text-overflow: ellipsis; text-overflow: ellipsis; overflow: hidden; } .hatena-follow-button:hover { text-decoration: none !important; } .hatena-follow-button.unsubscribing { background: #f5f5f5 url('/images/theme/hatena-follow-button.png') no-repeat 0 0; background: url('/images/theme/hatena-follow-button.png') no-repeat 0 0, -webkit-gradient(linear, left top, left bottom, from(#ffffff), to(#dddddd)); background: url('/images/theme/hatena-follow-button.png') no-repeat 0 0, -moz-linear-gradient(top, #ffffff 0%, #dddddd 100%); background: url('/images/theme/hatena-follow-button.png') no-repeat 0 0, -o-linear-gradient(top, #ffffff 0%, #dddddd 100%); } .hatena-follow-button.unsubscribing.hover { border: 1px solid #888; color: #222 !important; } .hatena-follow-button.subscribing { color: #2F81D5 !important; background: #f5f5f5 url('/images/theme/hatena-follow-button.png') no-repeat 0 -18px; background: url('/images/theme/hatena-follow-button.png') no-repeat 0 -18px, -webkit-gradient(linear, left top, left bottom, from(#ffffff), to(#dddddd)); background: url('/images/theme/hatena-follow-button.png') no-repeat 0 -18px, -moz-linear-gradient(top, #ffffff 0%, #dddddd 100%); background: url('/images/theme/hatena-follow-button.png') no-repeat 0 -18px, -o-linear-gradient(top, #ffffff 0%, #dddddd 100%); } .hatena-follow-button.subscribing.hover { width: 65px; color: #fff !important; border: 1px solid #666; background: #666666 url('/images/theme/hatena-follow-button.png') no-repeat 0 -36px; } .hatena-follow-button-box .subscription-count-box { display: none; position: relative; float: left; margin: 0 0 0 5px !important; } .hatena-follow-button-box i, .hatena-follow-button-box u { position: absolute; z-index: 10; zoom: 1; line-height: 0; width: 0; height: 0; left: 0; top: 50%; margin: -4px 0 0 -4px; border: 4px transparent solid; border-right-color: #bbb; border-left: 0; } .hatena-follow-button-box u { margin-left: -3px; border-right-color: #fff; } .hatena-follow-button-box .subscription-count { float: left; border: 1px solid #bbb; height: 18px; line-height: 18px; padding: 0 5px; display: block; min-width: 8px; font-size: 12px; color: #454545 !important; background: #fff; border-radius: 3px; -moz-border-radius: 3px; -webkit-border-radius: 3px; margin-left: -1px; position: relative; z-index: 9; font-family: 'Helvetica', 'Ariel', sans-serif; } .hatena-module .hatena-follow-button .background { display: none; } .hatena-module .hatena-follow-button.hover .foreground { display: none; } .hatena-module .hatena-follow-button.hover .background { display: inline; } .hatena-module .hatena-follow-button .subscribing, .hatena-module .hatena-follow-button .unsubscribing, .hatena-module .hatena-follow-button .friend, .hatena-module .hatena-follow-button .non-friend { display: none; } .hatena-module .hatena-follow-button.subscribing .subscribing, .hatena-module .hatena-follow-button.unsubscribing .unsubscribing, .hatena-module .hatena-follow-button.friend .friend, .hatena-module .hatena-follow-button.non-friend .non-friend { display: inline; } /* LESS Variables Description: for Hatena Blog Admin Author: Hatena Blog Team Version: 1.0 */ /* Background color */ /* Light Gray Background color */ /* dark background color */ /* Base text color */ /* light text color */ /* æ¨™æº–ãƒªãƒ³ã‚¯è‰² */ /* ãƒªãƒ³ã‚¯ã®hover */ /* ã‚°ãƒ¬ãƒ¼ã®æ¨™æº–ãƒœã‚¿ãƒ³è‰² */ /* æ¨™æº–ãƒœã‚¿ãƒ³ã®æ–‡å­—è‰² */ /* é’ã„æ¨™æº–ãƒœã‚¿ãƒ³è‰² */ /* é’ã„æ¨™æº–ãƒœã‚¿ãƒ³è‰²(hover) */ /* Registerç³»ã®ç·‘è‰²ãƒœã‚¿ãƒ³ */ /* Registerç³»ã®ç·‘è‰²ãƒœã‚¿ãƒ³ï¼ˆhoverï¼‰ */ /* RESET */ article, aside, details, figcaption, figure, footer, header, hgroup, menu, nav, section { display: block; } html, body { margin: 0; padding: 0; } img { border: none; } /* @COMMON STYLE */ .leave-comment-title { cursor: pointer; } #footer address { font-style: normal; } #globalheader { width: 100%; height: 37px; border: none; } #globalheader-container { position: relative; z-index: 9999; } .entry-content h1, .entry-content h2, .entry-content h3, .entry-content h4, .entry-content h5, .entry-content h6, .entry-footer { clear: both; } span a.keyword { color: inherit !important; _color: expression(this.parentNode.currentStyle.color); font-weight: inherit !important; font-style: inherit !important; font-size: 100%; } .entry-content iframe { max-width: 100%; } .entry-content table { max-width: none; } .entry-content img { max-width: 100%; } .entry-content a { word-wrap: break-word; } .entry-content .http-favicon, .entry-content .hatena-id-icon { margin-right: .2em; vertical-align: middle; } .entry-content .http-bookmark, .entry-content .http-star { margin: 0 .1em; vertical-align: middle; } .pocket-btn { display: inline-block; *display: inline; *zoom: 1; vertical-align: top; } #box2 { word-wrap: break-word; } #box2 img { max-width: 100%; height: auto; } img.photo { float: right; margin: 0.8em 0 1em 1em; } div.footnote { font-size: 90%; margin-top: 3em; } p.footnote { margin: .5em 0; line-height: 1.5; } /* @Comment */ .read-more-comments { text-align: center; list-style-type: none; } .read-more-comments a { cursor: pointer; } .entry-comment { position: relative; } .entry-comment .hatena-id-icon { width: 16px; height: 16px; } .entry-comment .comment-delete-button img { display: none; position: absolute; top: 8px; right: 8px; text-align: right; } .entry-comment:hover .comment-delete-button img { display: block; } /* @Quote-star */ .quote-stars { margin-top: 8px; } .quote-stars .quote-description { margin-bottom: 13px; } .quote-stars .quote-star { margin-bottom: 9px; } .quote-stars .quote-text { color: #aaa; font-style: italic; display: inline; } .quote-star-show { cursor: pointer; margin-bottom: 6px; display: inline-block; zoom: 1; *display: inline; padding: 5px 5px; background: #f5f5f5; border: 1px solid #ccc; border-radius: 0px; width: 71px; text-align: center; } .quote-star-show:hover { border-color: #bbb; background-color: #eee; text-decoration: none !important; } .quote-star-show .quote-star-show-text { font-size: 10px; } /* Delete Star */ .star-delete-button { cursor: pointer; position: absolute; width: 11px; height: 11px; z-index: 120; } /* @HATENA-SYNTAX */ img.hatena-fotolife { cursor: pointer; } .hatena-image-right { float: right; margin: 0 0 1em 1em; } .hatena-image-left { float: left; margin: 0 1em 1em 0; } pre { overflow: auto; overflow-y: hidden; } pre.code { font-family: 'Monaco', 'Consolas', 'Courier New', Courier, monospace, sans-serif; } .gist { line-height: 1.4; } .gist .line-numbers, .gist .line-pre { line-height: 1.4; } .gist .line-data { border: 0; } .gist .line-number, .gist .line { height: 1.4em; } .gist pre { border-radius: none; -webkit-border-radius: none; -moz-border-radius: none; box-shadow: none; -webkit-box-shadow: none; -moz-box-shadow: none; font-size: inherit !important; box-shadow: none !important; -moz-box-shadow: none !important; -webkit-box-shadow: none !important; } .footnote-delimiter { padding-right: 0.5em; } /* SUPER PRE SYNTAX HIGHLIGHT */ .synSpecial { color: #c000c0; } .synType { color: #3EC63E; } .synComment { color: #4F80E5; } .synPreProc { color: #9355E6; } .synIdentifier { color: #51CFCF; } .synConstant { color: #FF6666; } .synStatement { color: #D88A17; } /* ascii-art AA*/ pre.lang-aa { font-family: "Mona", "IPA MONAPGOTHIC", "MS PGothic", "ï¼­ï¼³ ï¼°ã‚´ã‚·ãƒƒã‚¯", "MS Pï½ºï¾ï½¼ï½¯ï½¸", "MS Pã‚´ã‚·ãƒƒã‚¯", sans-serif; font-size: 12pt; line-height: 18px; padding: 0; background: transparent; border-radius: none; -webkit-border-radius: none; -moz-border-radius: none; -webkit-box-shadow: none; -moz-box-shadow: none; box-shadow: none; } /* æ–‡ä¸­ã®codeã‚¿ã‚°ã®ã‚¹ã‚¿ã‚¤ãƒ« */ .entry-content pre > code { margin: 0; padding: 0; white-space: pre; border: 0; background: transparent; font-family: 'Monaco', 'Consolas', 'Courier New', Courier, monospace, sans-serif; } .entry-content code { font-size: 90%; margin: 0 2px; padding: 0 5px; border: 1px solid rgba(0, 0, 0, 0.08); background-color: rgba(0, 0, 0, 0.03); border-radius: 3px; font-family: 'Monaco', 'Consolas', 'Courier New', Courier, monospace, sans-serif; } /* asin */ .hatena-asin-detail { margin: 1em 0; border-image: initial; font-size: 90%; display: block; *zoom: 1; } .hatena-asin-detail:after { display: block; visibility: hidden; font-size: 0; height: 0; clear: both; content: "."; } .hatena-asin-detail .hatena-asin-detail-image { float: left; margin-right: 15px; } .hatena-asin-detail .hatena-asin-detail-title { margin-top: 0; font-weight: bold; margin: 0 0 .3em 0; } .hatena-asin-detail p { text-indent: 0; } .hatena-asin-detail ul { list-style: none; margin: 0; padding: 0; } .hatena-asin-detail .hatena-asin-detail-foot { clear: left; } .hatena-asin-detail, .itunes-embed { padding: 0.8em 0.6em; border: 1px solid #ddd; } /* iTunes è²¼ã‚Šä»˜ã‘ï¼ˆæ¦‚ã­asinè²¼ã‚Šä»˜ã‘ã¨åŒã˜ã‚¹ã‚¿ã‚¤ãƒ«ï¼‰ */ .itunes-embed { margin: 1em 0; border-image: initial; font-size: 90%; display: block; *zoom: 1; } .itunes-embed:after { display: block; visibility: hidden; font-size: 0; height: 0; clear: both; content: "."; } .itunes-embed .itunes-embed-image { float: left; margin-right: 15px; max-width: 100px; } .itunes-embed .itunes-embed-title { margin-top: 0; font-weight: bold; margin: 0 0 .3em 0; } .itunes-embed p { text-indent: 0; } .itunes-embed ul { list-style: none; margin: 0; padding: 0; } .itunes-embed ul li { line-height: 1.5; } .itunes-embed .itunes-embed-preview { margin: 10px 0; } .itunes-embed.itunes-kind-software .itunes-embed-image { -webkit-border-top-right-radius: 15px; -webkit-border-bottom-right-radius: 0; -webkit-border-bottom-left-radius: 0; -webkit-border-top-left-radius: 0; -moz-border-radius-topright: 15px; -moz-border-radius-bottomright: 0; -moz-border-radius-bottomleft: 0; -moz-border-radius-topleft: 0; border-top-right-radius: 15px; border-bottom-right-radius: 0; border-bottom-left-radius: 0; border-top-left-radius: 0; -webkit-border-radius: 15px; -moz-border-radius: 15px; border-radius: 15px; -moz-background-clip: padding; -webkit-background-clip: padding-box; background-clip: padding-box; } /* ãƒ–ãƒ­ã‚°ã‚«ãƒ¼ãƒ‰ */ .hatena-citation { font-style: normal; font-size: 90%; opacity: .75; } /* twitter:123456789:tweet */ div.twitter-tweet { text-align: left; margin: 0; border-bottom: 1px solid #ddd; } p.twitter-tweet-info { font-size: 0.85em; } div.twitter-tweet p.twitter-tweet-text, div.twitter-tweet p.twitter-tweet-info { margin-top: 0; margin-bottom: 0; padding-top: 0; padding-bottom: 0; } /* twitter:123456789:detail */ div.twitter-detail { overflow: hidden; text-align: left; margin: 0; border-bottom: 1px solid #ddd; } div.twitter-detail:after { content: "."; font-size: 0.1em; line-height: 0; display: block; height: 0.1px; visibility: hidden; clear: both; } div.twitter-detail-user { margin: auto; width: 58px; } div.twitter-detail-left div.twitter-detail-user { text-align: left; } div.twitter-detail-right div.twitter-detail-user { text-align: right; } div.twitter-detail div.twitter-detail-user, div.twitter-detail-left div.twitter-detail-user { float: left; } div.twitter-detail-right div.twitter-detail-user { float: right; } div.twitter-detail-tweet { margin-left: 60px; margin-right: 60px; } div.twitter-detail div.twitter-detail-tweet { _height: 1%; } div.twitter-detail-tweet p.twitter-detail-text, div.twitter-detail-tweet p.twitter-detail-info { clear: none; line-height: 1.4; } div.twitter-detail-tweet p.twitter-detail-text { margin-top: 0; margin-bottom: 0; padding-top: 0; padding-bottom: 0; } p.twitter-detail-info { font-size: 0.85em; margin-top: 0.3em; margin-bottom: 0; padding-top: 0; padding-bottom: 6px; } /* æ¯æ—¥ã®ãƒ„ã‚¤ãƒ¼ãƒˆã®ã¾ã¨ã‚ */ div.twitter-tweet-wrapper { overflow: hidden; } div.twitter-tweet-wrapper div.twitter-tweet span.twitter-tweet-text-user { display: none; } div.twitter-tweet-wrapper div.twitter-tweet span.twitter-tweet-info-date { display: none; } div.tweet-images { width: 95%; margin-left: auto; margin-right: auto; } /* twitter-entry-icon */ a.twitter-header-icon img, a.twitter-entry-icon img { border: none; } /* social-button */ .social-buttons .social-button-item { display: inline-block; vertical-align: top; margin-right: .2em; margin-bottom: 5px; } .fb_iframe_widget > span { vertical-align: baseline !important; } /* ã¯ã¦ãªã‚¹ã‚¿ãƒ¼ */ .hatena-star-container { margin-bottom: 8px; min-height: 24px; } .hatena-star-add-button { margin: 1px !important; } .hatena-big-star-star-container { display: inline-block; position: relative; width: 20px; height: 20px; margin: 2px; vertical-align: middle; border-radius: 2px; overflow: hidden; } .hatena-star-user { width: 20px; height: 20px; position: absolute; top: 0px; left: 0px; margin: 0px; padding: 0px; margin-bottom: 0px !important; z-index: 10; border-radius: 3px; } .hatena-big-star-star-container > .hatena-star-star { position: absolute; bottom: 0px; left: 0px; margin: 0px; padding: 0px; margin-bottom: 0px !important; z-index: 11; background: rgba(255, 255, 255, 0.8); border-top-right-radius: 2px; border-bottom-left-radius: 2px; } .hatena-star-comment-container { display: none; } .hatena-star-comment-container.hatena-star-comment-active { display: inline; } /* @HATENA-MODULE */ .recent-comments { word-wrap: break-word; word-break: break-all; } .recent-comments .user-id img { vertical-align: text-bottom; margin-right: 3px; word-wrap: break-word; word-break: break-all; } .recent-comments .recent-comment-time { filter: alpha(opacity=70); -moz-opacity: 0.7; opacity: 0.7; font-style: italic; font-size: 90%; } .urllist-date-link { font-size: 85%; } .urllist-title-link { font-size: 110%; } .urllist-category-link { font-size: 85%; margin-right: .5em; } .urllist-entry-body { font-size: 90%; line-height: 1.5; } .urllist-with-thumbnails li { display: block; *zoom: 1; } .urllist-with-thumbnails li:after { display: block; visibility: hidden; font-size: 0; height: 0; clear: both; content: "."; } .urllist-with-thumbnails li .urllist-image { margin: 0 .7em .7em 0; float: left; } .hatena-module-archive .hatena-urllist { padding-left: 0; margin-left: 0; } .hatena-urllist .archive-module-year { list-style-type: none; margin: 0; padding-left: 0; line-height: 1.5; background: none; } .hatena-urllist .archive-module-year:before, .hatena-urllist .archive-module-year:after { content: none !important; } .hatena-urllist .archive-module-year .archive-module-button { opacity: 0.6; } .hatena-urllist .archive-module-year .archive-module-months { padding-left: 0; margin-left: 0; background: none; } .hatena-urllist .archive-module-year .archive-module-month { margin: 0 0 0 2.5em; padding: 0; border: none; list-style-type: none !important; background: none; } .hatena-urllist .archive-module-year .archive-module-month:before, .hatena-urllist .archive-module-year .archive-module-month:after { content: none !important; } /* calendar ç‰ˆã®archive module */ .archive-module-calendar { text-align: center; } .archive-module-calendar .archive-module-calendar-selector { display: inline-block; margin-bottom: 1em; } .archive-module-calendar table { width: 100%; table-layout: fixed; border-collapse: collapse; border-spacing: 0; } .archive-module-calendar th { font-size: 0.8em; text-align: center; padding: .3em 0; } .archive-module-calendar .archive-module-calendar-week td { text-align: center; } .facebook-follow-button { display: inline-block; padding-left: 20px; padding-right: 5px; border: solid 1px #cad4e7; border-radius: 4px; -moz-border-radius: 4px; height: 20px; line-height: 20px; background: url('/images/admin/curation/services/facebook.png') no-repeat 2px center #eceef5; text-decoration: none; color: #3c5995 !important; font-weight: bold; } .facebook-follow-button:hover { border: solid 1px #9dacce; text-decoration: none; } .cannot-facebook-follow { display: none; } .cannot-facebook-subscribe { display: none; } .cannot-twitter-button { display: none; } .cannot-facebook-follow-display { display: inline; } .cannot-facebook-subscribe-display { display: inline; } .cannot-twitter-button-display { display: inline; } /* @PREVIEW */ body.preview { margin: 10px; background: #fff !important; color: #000 !important; font-size: 100%; line-height: 1.7; font-family: 'Helvetica Neue', 'Helvetica', 'Arial', 'ãƒ’ãƒ©ã‚®ãƒè§’ã‚´ Pro W3', 'Hiragino Kaku Gothic Pro', 'ãƒ¡ã‚¤ãƒªã‚ª', Meiryo, 'ï¼­ï¼³ ï¼°ã‚´ã‚·ãƒƒã‚¯', 'MS PGothic', sans-serif; /* ãƒ–ãƒ­ã‚°ã‚«ãƒ¼ãƒ‰ */ } body.preview img { max-width: 100%; } body.preview p { line-height: 1.5; margin: 0.5em 0; padding: 0; } body.preview blockquote { border-left: 4px solid #ddd; padding-left: .6em; } body.preview #mceResizeHandlen, body.preview #mceResizeHandlee, body.preview #mceResizeHandlew, body.preview #mceResizeHandles { display: none !important; } body.preview .mce-pagebreak { border-bottom: none; border-left: none; border-right: none; } body.preview .hatena-citation a { opacity: 1; color: #999; font-size: 80%; } .hatena-module-recent-comments .hatena-id-icon { width: 16px; height: 16px; } /* @div.google_afc */ .google-afc-image #google_afc_user_container_0, .google-afc-text #google_afc_user_container_0, .google-afc-image #google_afc_user_container_1, .google-afc-text #google_afc_user_container_1, .google-afc-image #google_afc_user_container_2, .google-afc-text #google_afc_user_container_2, .google-afc-image #google_afc_user_container_3, .google-afc-text #google_afc_user_container_3, .google-afc-image #google_afc_user_container_4, .google-afc-text #google_afc_user_container_4, .google-afc-image #google_afc_user_container_5, .google-afc-text #google_afc_user_container_5 { display: block !important; visibility: visible !important; width: auto !important; height: auto !important; opacity: 1 !important; position: static !important; filter: alpha(opacity=100) !important; } .google-afc-image * { opacity: 1 !important; filter: alpha(opacity=100) !important; } .google-afc-image, .google-afc-text { font-size: 16px; margin: 0 0 1em; clear: both; font-family: 'Helvetica', 'Arial', 'ãƒ’ãƒ©ã‚®ãƒè§’ã‚´ Pro W3', 'Hiragino Kaku Gothic Pro', sans-serif; position: relative; } .google-afc-image a, .google-afc-text a, .google-afc-image a:hover, .google-afc-text a:hover { border: none; } .google-afc-image div#google_#google_afc_user_user_container, .google-afc-text div#google_#google_afc_user_user_container { min-height: 12em !important; margin-left: 1em; margin-right: 1em; } .google-afc-image div.google_ads_by, .google-afc-text div.google_ads_by { font-size: 0.8em; margin: 0 0 0.8em 0; } .google-afc-image ul, .google-afc-text ul { font-size: 100%; list-style: none outside none; margin: 0 0 5px; padding: 0; } .google-afc-image li, .google-afc-text li { background: none repeat scroll 0 0 transparent; list-style-image: none; list-style-type: none; margin: 0 0 2em !important; padding: 0; } .google-afc-image .google_ads_by a, .google-afc-text .google_ads_by a { display: inline !important; text-decoration: none; border: medium none; filter: alpha(opacity=60); -moz-opacity: 0.6; opacity: 0.6; margin-bottom: .5em; } .google-afc-image ul .title, .google-afc-text ul .title { font-size: 100%; font-weight: bold; margin: 0; line-height: 1.2em; display: block !important; } .google-afc-image ul .title a, .google-afc-text ul .title a { letter-spacing: 0.3em; font-size: 17px !important; text-decoration: underline; padding: .5em 0; } .google-afc-image ul .summary, .google-afc-text ul .summary { display: inline !important; font-size: 13px !important; line-height: 1em; margin: 0.2em 0.5em 0 0; filter: alpha(opacity=60); -moz-opacity: 0.6; opacity: 0.6; letter-spacing: 0; } .google-afc-image ul .visible_url, .google-afc-text ul .visible_url { font-size: 0.8em; margin-left: 0; } .google-afc-image ul .visible_url a, .google-afc-text ul .visible_url a { font-size: 13px !important; border: medium none; font-weight: normal; text-decoration: none; letter-spacing: 2px; padding: .5em 0; } .google-afc-image .visible_url a:hover, .google-afc-text .visible_url a:hover { text-decoration: underline; } .google-afc-image p.google_afc_inactive_notice, .google-afc-text p.google_afc_inactive_notice { font-size: 0.9em; margin-top: 0; margin-right: 1em; margin-left: 1em; padding-top: 0; text-align: right; } .google-afc-image p.google_afc_inactive_notice a, .google-afc-text p.google_afc_inactive_notice a { text-decoration: underline; } .google-afc-image .open-pro-modal, .google-afc-text .open-pro-modal { display: inline-block; font-size: 12px; padding-top: 4px; } /* @HATENA-FOTOLIFE LIGHTBOX */ /* ColorBox Core Style: The following CSS is consistent between example themes and should not be altered. */ #colorbox, #cboxOverlay, #cboxWrapper { position: absolute; top: 0; left: 0; z-index: 9999; overflow: hidden; } #cboxOverlay { position: fixed; width: 100%; height: 100%; } #cboxMiddleLeft, #cboxBottomLeft { clear: left; } #cboxContent { position: relative; } #cboxLoadedContent { overflow: auto; -webkit-overflow-scrolling: touch; } #cboxTitle { margin: 0; } #cboxLoadingOverlay, #cboxLoadingGraphic { position: absolute; top: 0; left: 0; width: 100%; height: 100%; } #cboxPrevious, #cboxNext, #cboxClose, #cboxSlideshow { cursor: pointer; } .cboxPhoto { float: left; margin: auto; border: 0; display: block; max-width: none; } .cboxIframe { width: 100%; height: 100%; display: block; border: 0; } #colorbox, #cboxContent, #cboxLoadedContent { box-sizing: content-box; -moz-box-sizing: content-box; -webkit-box-sizing: content-box; } /* User Style: Change the following styles to modify the appearance of ColorBox. They are ordered & tabbed in a way that represents the nesting of the generated HTML. */ #cboxOverlay { background: #fff; } #colorbox { outline: 0; } #colorbox #cboxContent { margin-top: 32px; overflow: visible; background: #000; /* these elements are buttons, and may need to have additional styles reset to avoid unwanted base styles */ /* avoid outlines on :active (mouseclick), but preserve outlines on :focus (tabbed navigating) */ } #colorbox #cboxContent .cboxIframe { background: #fff; } #colorbox #cboxContent #cboxError { padding: 50px; border: 1px solid #ccc; } #colorbox #cboxContent #cboxLoadedContent { background: #000; padding: 1px; } #colorbox #cboxContent #cboxLoadingGraphic { background: url(/images/loading.gif) no-repeat center center; } #colorbox #cboxContent #cboxLoadingOverlay { background: #000; } #colorbox #cboxContent #cboxTitle { position: absolute; top: -22px; left: 0; color: #000; } #colorbox #cboxContent #cboxCurrent { position: absolute; top: -22px; right: 205px; text-indent: -9999px; } #colorbox #cboxContent #cboxPrevious, #colorbox #cboxContent #cboxNext, #colorbox #cboxContent #cboxSlideshow, #colorbox #cboxContent #cboxClose { border: 0; padding: 0; margin: 0; overflow: visible; text-indent: -9999px; width: 20px; height: 20px; position: absolute; top: -20px; background: url(/images/controls.png) no-repeat 0 0; } #colorbox #cboxContent #cboxPrevious:active, #colorbox #cboxContent #cboxNext:active, #colorbox #cboxContent #cboxSlideshow:active, #colorbox #cboxContent #cboxClose:active { outline: 0; } #colorbox #cboxContent #cboxPrevious { background-position: 0px 0px; right: 44px; } #colorbox #cboxContent #cboxPrevious:hover { background-position: 0px -25px; } #colorbox #cboxContent #cboxNext { background-position: -25px 0px; right: 22px; } #colorbox #cboxContent #cboxNext:hover { background-position: -25px -25px; } #colorbox #cboxContent #cboxClose { background-position: -50px 0px; right: 0; } #colorbox #cboxContent #cboxClose:hover { background-position: -50px -25px; } #colorbox #cboxContent .cboxSlideshow_on #cboxPrevious, #colorbox #cboxContent .cboxSlideshow_off #cboxPrevious { right: 66px; } #colorbox #cboxContent .cboxSlideshow_on #cboxSlideshow { background-position: -75px -25px; right: 44px; } #colorbox #cboxContent .cboxSlideshow_on #cboxSlideshow:hover { background-position: -100px -25px; } #colorbox #cboxContent .cboxSlideshow_off #cboxSlideshow { background-position: -100px 0px; right: 44px; } #colorbox #cboxContent .cboxSlideshow_off #cboxSlideshow:hover { background-position: -75px -25px; } /* @PAGE-ABOUT */ .page-about .entry-content img.profile-icon { height: 16px; width: 16px; } /* @PAGE-ARCHIVE */ .page-archive .bookmark-widget-counter { text-decoration: none; } .page-archive .bookmark-widget-counter img { vertical-align: middle; } .page-archive .archive-entry { display: block; *zoom: 1; } .page-archive .archive-entry:after { display: block; visibility: hidden; font-size: 0; height: 0; clear: both; content: "."; } .page-archive .entry-thumb { width: 120px; height: 120px; float: left; margin-right: 10px; } .page-archive span.highlight { background-color: #ffff8c; font-weight: bold; padding: .1em .2em; font-style: inherit; margin: .2em; color: #333333; border: 1px solid rgba(0, 0, 0, 0.15); border-radius: 3px; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; box-sizing: border-box; } /* @Custom Header-image */ .header-image-enable #blog-title { background: transparent; } .header-image-enable #blog-title #title, .header-image-enable #blog-title #blog-description { background: transparent; } .header-image-enable #blog-title #blog-title-inner { background-repeat: no-repeat; position: relative; height: 200px; } .header-image-enable #blog-title #title a { color: #fff; -moz-text-shadow: 0px 0px 20px #000; -webkit-text-shadow: 0px 0px 20px #000; text-shadow: 0px 0px 20px #000; } .header-image-enable #blog-title #blog-description { font-weight: bold; color: #fff; -moz-text-shadow: 0px 0px 10px #000; -webkit-text-shadow: 0px 0px 10px #000; text-shadow: 0px 0px 10px #000; } .header-image-only #blog-title { background: transparent; } .header-image-only #blog-title #title, .header-image-only #blog-title #blog-description { background: transparent; } .header-image-only #blog-title #blog-title-inner { background-repeat: no-repeat; position: relative; height: 200px; } .header-image-only #blog-title #title a { filter: alpha(opacity=0); -moz-opacity: 0; opacity: 0; position: absolute; width: 100%; height: 100%; top: 0; left: 0; } .header-image-only #blog-title #blog-description { visibility: hidden; } /* Welcome Message (AB test) */ .welcome-tooltip-newentry { position: absolute; width: 180px; height: 60px; top: 40px; right: 200px; background: #14afd6; text-shadow: 0 -1px 0px #164a5a; -moz-text-shadow: 0 -1px 0px #164a5a; -webkit-text-shadow: 0 -1px 0px #164a5a; padding: 10px; font-size: 80%; line-height: 1.5em; color: #fff; text-align: left; -webkit-border-radius: 5px; -moz-border-radius: 5px; border-radius: 5px; border: 1px solid #2e69a4; -webkit-box-shadow: 0 0 10px rgba(0, 0, 0, 0.5); -moz-box-shadow: 0 0 10px rgba(0, 0, 0, 0.5); box-shadow: 0 0 10px rgba(0, 0, 0, 0.5); cursor: pointer; } .welcome-tooltip-newentry p { margin: 0 0 5px 0; } .welcome-tooltip-newentry .btn { display: inline-block; *display: inline; *zoom: 1; padding: 4px 10px 4px; margin-bottom: 0; line-height: 18px; color: #454545 !important; background-color: #f5f5f5; text-align: center; text-shadow: 0 1px 1px rgba(255, 255, 255, 0.75); -moz-text-shadow: 0 1px 1px rgba(255, 255, 255, 0.75); -webkit-text-shadow: 0 1px 1px rgba(255, 255, 255, 0.75); vertical-align: middle; border: 1px solid #cccccc; border-bottom-color: #c0c0c0; -webkit-border-top-right-radius: 3px; -webkit-border-bottom-right-radius: 0; -webkit-border-bottom-left-radius: 0; -webkit-border-top-left-radius: 0; -moz-border-radius-topright: 3px; -moz-border-radius-bottomright: 0; -moz-border-radius-bottomleft: 0; -moz-border-radius-topleft: 0; border-top-right-radius: 3px; border-bottom-right-radius: 0; border-bottom-left-radius: 0; border-top-left-radius: 0; -webkit-border-radius: 3px; -moz-border-radius: 3px; border-radius: 3px; -moz-background-clip: padding; -webkit-background-clip: padding-box; background-clip: padding-box; cursor: pointer; *margin-left: .3em; *padding: 0px 0px 0px; font-size: 90%; } .welcome-tooltip-newentry .btn:hover { border-color: #bbb; background-color: #eee; text-decoration: none !important; } .tipsy-arrow.blue { position: absolute; background: url('/images/admin/tipsy-blue.gif') no-repeat top left; width: 9px; height: 5px; } .tipsy-n .tipsy-arrow { top: -5px; left: 50%; margin-left: -4px; } /* Star Navigation (ABTest) */ .star-navigation-tooltip { width: 180px; height: 47px; background: #3f8ad6; background: -webkit-gradient(linear, left top, left bottom, from(#3f8ad6), to(#3675b4)); background: -ms-linear-gradient(top, #3f8ad6, #3675b4); background: -moz-linear-gradient(top, #3f8ad6 0%, #3675b4 100%); text-shadow: 0 -1px 0px #164a5a; -moz-text-shadow: 0 -1px 0px #164a5a; -webkit-text-shadow: 0 -1px 0px #164a5a; padding: 10px; margin: 10px 2px 2px; line-height: 1.4em; color: #fff; text-align: left; -webkit-border-radius: 5px; -moz-border-radius: 5px; border-radius: 5px; border: 1px solid #2e69a4; -webkit-box-shadow: 0 0 10px rgba(0, 0, 0, 0.5); -moz-box-shadow: 0 0 10px rgba(0, 0, 0, 0.5); box-shadow: 0 0 10px rgba(0, 0, 0, 0.5); cursor: pointer; position: relative; } .star-navigation-tooltip p { font-size: 12px !important; line-height: 1.4 !important; margin: 0 !important; } .star-navigation-tooltip .btn { display: inline-block; *display: inline; *zoom: 1; padding: 4px 10px 4px; margin-bottom: 0; line-height: 18px; color: #454545 !important; background-color: #f5f5f5; text-align: center; text-shadow: 0 1px 1px rgba(255, 255, 255, 0.75); -moz-text-shadow: 0 1px 1px rgba(255, 255, 255, 0.75); -webkit-text-shadow: 0 1px 1px rgba(255, 255, 255, 0.75); vertical-align: middle; border: 1px solid #cccccc; border-bottom-color: #c0c0c0; -webkit-border-top-right-radius: 3px; -webkit-border-bottom-right-radius: 0; -webkit-border-bottom-left-radius: 0; -webkit-border-top-left-radius: 0; -moz-border-radius-topright: 3px; -moz-border-radius-bottomright: 0; -moz-border-radius-bottomleft: 0; -moz-border-radius-topleft: 0; border-top-right-radius: 3px; border-bottom-right-radius: 0; border-bottom-left-radius: 0; border-top-left-radius: 0; -webkit-border-radius: 3px; -moz-border-radius: 3px; border-radius: 3px; -moz-background-clip: padding; -webkit-background-clip: padding-box; background-clip: padding-box; cursor: pointer; *margin-left: .3em; *padding: 0px 0px 0px; font-size: 90%; } .star-navigation-tooltip .btn:hover { border-color: #bbb; background-color: #eee; text-decoration: none !important; } /* Select Star AB Test */ .select_star_button_container { position: absolute; width: 32px; height: 32px; opacity: 0.6; display: none; z-index: 3000; } .select_star_button_container .select_star_star { position: absolute; left: 0px; top: 0px; } .message-box { position: absolute; display: none; margin: 0px; padding: 5px 10px 5px 35px; background: #eff3ff url('/images/admin/check.png') no-repeat 7px center; border: 1px solid #C6C3FF; font-size: 12px; font-weight: bold; line-height: 19px; color: #454545; z-index: 2000; } .message-box a { font-weight: normal; } /* Title Star */ .title-star-container { display: inline-block; margin-left: 4px; } .title-star-container .title-star-count { height: 14px; } .title-star-container .title-star-add-button { font-size: 26px; display: inline; cursor: pointer; } /* Circle */ .hatena-module-body .circle-urllist li { display: block; *zoom: 1; } .hatena-module-body .circle-urllist li:after { display: block; visibility: hidden; font-size: 0; height: 0; clear: both; content: "."; } .hatena-module-body .circle-urllist .circle-image { width: 48px; height: 48px; float: left; margin: 0 10px 0 0; } /* archive module */ .hatena-module-body .archive-module-button { display: inline; } .hatena-module-body .archive-module-show-button { cursor: pointer; display: none; } .hatena-module-body .archive-module-hide-button { cursor: pointer; } .hatena-module-body .archive-module-year-hidden .archive-module-months { display: none; } .hatena-module-body .archive-module-year-hidden .archive-module-show-button { display: inline; } .hatena-module-body .archive-module-year-hidden .archive-module-hide-button { display: none; } /* é–¢é€£è¨˜äº‹ */ .related-entries { font-size: 100%; } .related-entries h2 { margin: 0 0 .8em 0; } .related-entries .related-entries-list { margin: 0; padding: 0; } .related-entries .related-entries-list li { list-style: none; margin-bottom: 10px; display: block; *zoom: 1; } .related-entries .related-entries-list li:after { display: block; visibility: hidden; font-size: 0; height: 0; clear: both; content: "."; } .related-entries .related-entry-title { font-size: 120%; font-weight: bold; } .related-entries .related-thumb { width: 120px; height: 120px; float: left; margin: 0 10px 10px 0; } /* ãƒ–ãƒ­ã‚°å†…æ¤œç´¢ */ .hatena-module-search-top-box .search-form { border: 1px solid; -webkit-border-top-right-radius: 3px; -webkit-border-bottom-right-radius: 0; -webkit-border-bottom-left-radius: 0; -webkit-border-top-left-radius: 0; -moz-border-radius-topright: 3px; -moz-border-radius-bottomright: 0; -moz-border-radius-bottomleft: 0; -moz-border-radius-topleft: 0; border-top-right-radius: 3px; border-bottom-right-radius: 0; border-bottom-left-radius: 0; border-top-left-radius: 0; -webkit-border-radius: 3px; -moz-border-radius: 3px; border-radius: 3px; -moz-background-clip: padding; -webkit-background-clip: padding-box; background-clip: padding-box; width: 200px; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; box-sizing: border-box; float: right; position: relative; } .hatena-module-search-top-box .search-module-input { padding: 5px; background: none; border: none; outline: none; height: 20px; width: 90%; } .hatena-module-search-top-box .search-module-button { width: 20px; height: 20px; background: transparent url(/images/theme/search.png) no-repeat right center; border: none; outline: none; text-indent: -9999px; position: absolute; top: 5px; right: 5px; -moz-opacity: 0.5; opacity: 0.5; -khtml-opacity: 0.5; -webkit-opacity: 0.5; filter: alpha(opacity=50); } .hatena-module-search-top-box .search-module-button:hover { -moz-opacity: 0.85; opacity: 0.85; -khtml-opacity: 0.85; -webkit-opacity: 0.85; filter: alpha(opacity=85); } /* æ¤œç´¢çµæœ */ .search-result { margin-bottom: 3em; } .search-result-form { border: 1px solid rgba(0, 0, 0, 0.15); -webkit-border-top-right-radius: 3px; -webkit-border-bottom-right-radius: 0; -webkit-border-bottom-left-radius: 0; -webkit-border-top-left-radius: 0; -moz-border-radius-topright: 3px; -moz-border-radius-bottomright: 0; -moz-border-radius-bottomleft: 0; -moz-border-radius-topleft: 0; border-top-right-radius: 3px; border-bottom-right-radius: 0; border-bottom-left-radius: 0; border-top-left-radius: 0; -webkit-border-radius: 3px; -moz-border-radius: 3px; border-radius: 3px; -moz-background-clip: padding; -webkit-background-clip: padding-box; background-clip: padding-box; max-width: 20em; -moz-box-sizing: border-box; box-sizing: border-box; position: relative; background-color: rgba(255, 255, 255, 0.8); } .search-result-form .search-result-input { padding: 5px; color: #333; background: none; border: none; outline: none; height: 20px; width: 90%; } .search-result-form .search-result-button { width: 20px; height: 20px; background: transparent url(/images/theme/search.png) no-repeat right center; border: none; outline: none; text-indent: -9999px; position: absolute; top: 5px; right: 5px; -moz-opacity: 0.5; opacity: 0.5; -khtml-opacity: 0.5; -webkit-opacity: 0.5; } .search-result-form .search-result-button:hover { -moz-opacity: 0.85; opacity: 0.85; -khtml-opacity: 0.85; -webkit-opacity: 0.85; } /* ä¸‹æ›¸ãå…±æœ‰ã®ãƒ¢ãƒ¼ãƒ€ãƒ« */ .preview-draft-modal { position: fixed; top: 64px; left: 50%; margin-left: -225px; padding: 1em; width: 450px; box-sizing: border-box; box-shadow: 0 5px 10px rgba(0, 0, 0, 0.15); background: #ffffff; text-align: center; z-index: 100; line-height: 1.5; } .preview-draft-modal.is-hidden { display: none; } .preview-draft-modal .preview-draft-modal-heading { font-size: 100%; margin-bottom: 1em; font-weight: bold; } .preview-draft-modal .preview-draft-modal-notices { font-size: 80%; text-align: left; margin: 1em 0; padding: 0 0 0 2em; } .preview-draft-modal .preview-draft-modal-help { text-align: right; font-size: 0.8em; } .preview-draft-modal .preview-draft-modal-btn { display: inline-block; padding: 4px 10px; line-height: 18px; color: #3d3f44; background-color: #f7f8f9; border: 1px solid #dfe5e7; -webkit-border-top-right-radius: 2px; -webkit-border-bottom-right-radius: 0; -webkit-border-bottom-left-radius: 0; -webkit-border-top-left-radius: 0; -moz-border-radius-topright: 2px; -moz-border-radius-bottomright: 0; -moz-border-radius-bottomleft: 0; -moz-border-radius-topleft: 0; border-top-right-radius: 2px; border-bottom-right-radius: 0; border-bottom-left-radius: 0; border-top-left-radius: 0; -webkit-border-radius: 2px; -moz-border-radius: 2px; border-radius: 2px; -moz-background-clip: padding; -webkit-background-clip: padding-box; background-clip: padding-box; cursor: pointer; font-size: 12px; text-decoration: none; font-weight: bold; -webkit-appearance: none; } .preview-draft-modal .preview-draft-modal-btn:hover { border-color: #ccc; background-color: #eef0f2; text-decoration: none !important; } /* globalheaderç”¨éš ã—è³¼èª­ãƒœã‚¿ãƒ³ */ #hidden-subscribe-button { display: none; } pre.code .comment { color: #51cfcf; } pre.code .lparen, pre.code .rparen { color: #f333d1; } pre.code .keyword, pre.code .keyword, pre.code .keyword\.operator { color: #ff4545; } pre.code .support\.function { color: #ff4545; } pre.code .identifier { color: #578cf9; } pre.code .string { color: #d88a17; } pre.code .string\.regexp { color: #d88a17; } pre.code .constant, pre.code .constant\.numeric, pre.code .constant\.language\.boolean { color: #ff4545; } pre.code .variable { color: #3ec63e; } pre.code .variable\.language { color: #b680ff; } /* LESS Variables Description: for Hatena Blog Admin Author: Hatena Blog Team Version: 1.0 */ /* Background color */ /* Light Gray Background color */ /* dark background color */ /* Base text color */ /* light text color */ /* æ¨™æº–ãƒªãƒ³ã‚¯è‰² */ /* ãƒªãƒ³ã‚¯ã®hover */ /* ã‚°ãƒ¬ãƒ¼ã®æ¨™æº–ãƒœã‚¿ãƒ³è‰² */ /* æ¨™æº–ãƒœã‚¿ãƒ³ã®æ–‡å­—è‰² */ /* é’ã„æ¨™æº–ãƒœã‚¿ãƒ³è‰² */ /* é’ã„æ¨™æº–ãƒœã‚¿ãƒ³è‰²(hover) */ /* Registerç³»ã®ç·‘è‰²ãƒœã‚¿ãƒ³ */ /* Registerç³»ã®ç·‘è‰²ãƒœã‚¿ãƒ³ï¼ˆhoverï¼‰ */ /* LESS Mixins */ /* box properties */ .clearfix { display: block; *zoom: 1; } .clearfix:after { display: block; visibility: hidden; font-size: 0; height: 0; clear: both; content: "."; } .inline-block { display: inline-block; *display: inline; *zoom: 1; } .ellipsis { white-space: nowrap; -webkit-text-overflow: ellipsis; -o-text-overflow: ellipsis; text-overflow: ellipsis; overflow: hidden; } /* text properties */ .font-default { font-family: 'Helvetica Neue', 'Helvetica', 'Arial', 'ãƒ’ãƒ©ã‚®ãƒè§’ã‚´ Pro W3', 'Hiragino Kaku Gothic Pro', 'ãƒ¡ã‚¤ãƒªã‚ª', Meiryo, 'ï¼­ï¼³ ï¼°ã‚´ã‚·ãƒƒã‚¯', 'MS PGothic', sans-serif; } /* CSS3 properties */ .border-box { -webkit-box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; box-sizing: border-box; } .center { text-align: center; margin-left: auto; margin-right: auto; } .left { float: left; } .right { float: right; } .nofloat { float: none; } .clear { clear: both; } .block { display: block; } .inline { display: inline; } .nodisplay { display: none; } .relative { position: relative; } .absolute { position: absolute; } .static { position: static; } .fixed { position: fixed; } .margin0 { margin: 0 !important; } .padding0 { padding: 0 !important; } .bold { font-weight: bold; } .normal { font-weight: normal; font-style: normal; } .thin { font-weight: 300; } .italic { font-style: italic; } .nodeco { text-decoration: none; } .underline { text-decoration: underline; } .nolist { list-style-type: none; } .disc { list-style-type: disc; } .circle { list-style-type: circle; } .textleft { text-align: left; } .textright { text-align: right; } /* Common.LESS Description: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ–ãƒ­ã‚°ã€serviceã€admin ã®å…¨ã¦ã§èª­ã¿ã“ã¾ã‚Œã‚‹ã‚¹ã‚¿ã‚¤ãƒ« Author: Hatena Blog Team */ /* åºƒå‘Šæ¶ˆã™ãƒœã‚¿ãƒ³ã‹ã‚‰PROã«èª˜å°ã™ã‚‹ */ .modal-window-background { position: fixed; left: 0px; top: 0px; width: 100%; height: 100%; background-color: #000000; z-index: 100; -moz-opacity: 0.5; opacity: 0.5; -khtml-opacity: 0.5; -webkit-opacity: 0.5; filter: alpha(opacity=50); } a.open-pro-modal { visibility: hidden; } .pro-modal-container { position: fixed; width: 500px; height: 250px; z-index: 110; background-color: #ffffff; } .favicon { margin-right: .3em; vertical-align: text-top; } @font-face { font-family: 'blogicon'; src: url('/fonts/public/blogicon/blogicon-regular.eot'); src: url('/fonts/public/blogicon/blogicon-regular.eot?#iefix') format('embedded-opentype'), url('/fonts/public/blogicon/blogicon-regular.woff') format('woff'), url('/fonts/public/blogicon/blogicon-regular.ttf') format('truetype'), url('/fonts/public/blogicon/blogicon-regular.svg#blogicon') format('svg'); font-weight: normal; font-style: normal; } [class*="blogicon-"] { display: inline-block; font-family: 'blogicon'; font-style: normal; font-weight: normal; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; } [class*="blogicon-"].lg { font-size: 1.3333333333333333em; line-height: 0.75em; vertical-align: -10%; } .blogicon-hatenablog:before { content: '\f000'; } .blogicon-plus:before { content: '\f001'; } .blogicon-minus:before { content: '\f002'; } .blogicon-reorder:before { content: '\f003'; } .blogicon-grid:before { content: '\f004'; } .blogicon-chevron-left:before { content: '\f005'; } .blogicon-chevron-right:before { content: '\f006'; } .blogicon-chevron-up:before { content: '\f007'; } .blogicon-chevron-down:before { content: '\f008'; } .blogicon-external:before { content: '\f009'; } .blogicon-plugin:before { content: '\f00a'; } .blogicon-member:before { content: '\f00b'; } .blogicon-account:before { content: '\f00c'; } .blogicon-design:before { content: '\f00d'; } .blogicon-cog:before { content: '\f00e'; } .blogicon-edit:before { content: '\f010'; } .blogicon-addstar:before { content: '\f011'; } .blogicon-subscribe:before { content: '\f012'; } .blogicon-entry:before { content: '\f013'; } .blogicon-notify:before { content: '\f014'; } .blogicon-private:before { content: '\f015'; } .blogicon-user:before { content: '\f016'; } .blogicon-home:before { content: '\f017'; } .blogicon-setting:before { content: '\f018'; } .blogicon-draft:before { content: '\f019'; } .blogicon-search:before { content: '\f01a'; } .blogicon-analytics:before { content: '\f01b'; } .blogicon-help:before { content: '\f01c'; } .blogicon-comment:before { content: '\f01d'; } .blogicon-import:before { content: '\f01e'; } .blogicon-truck:before { content: '\f020'; } .blogicon-group:before { content: '\f021'; } .blogicon-folder:before { content: '\f022'; } .blogicon-add:before { content: '\f023'; } .blogicon-pen:before { content: '\f024'; } .blogicon-close:before { content: '\f025'; } .blogicon-trash:before { content: '\f026'; } .blogicon-bookmark:before { content: '\f027'; } .blogicon-redirect:before { content: '\f028'; } .blogicon-check:before { content: '\f029'; color: #c3c1fd; } .blogicon-crop:before { content: '\f02a'; } .blogicon-repeat:before { content: '\f02b'; } .blogicon-logout:before { content: '\f02c'; } .blogicon-star:before { content: '\f02d'; } .blogicon-pro:before { content: '\f02e'; } .blogicon-myblog:before { content: '\f030'; } .blogicon-recent:before { content: '\f031'; } .blogicon-info:before { content: '\f032'; } .blogicon-good:before { content: '\f033'; } .blogicon-amazon:before { content: '\f034'; } .blogicon-twitter:before { content: '\f035'; } .blogicon-facebook:before { content: '\f036'; } .blogicon-share:before { content: '\f037'; } .blogicon-code:before { content: '\f038'; } .blogicon-list:before { content: '\f039'; } .blogicon-calender:before { content: '\f03a'; } .blogicon-bracket:before { content: '\f03b'; } .blogicon-photo:before { content: '\f03c'; } .blogicon-color:before { content: '\f03d'; } .blogicon-public:before { content: '\f03e'; } .blogicon-realtime-preview:before { content: '\f040'; } .blogicon-warning:before { content: '\f041'; } .blogicon-link:before { content: '\f042'; } .blogicon-time:before { content: '\f043'; } .blogicon-markdown:before { content: '\f044'; } .blogicon-evernote:before { content: '\f045'; } .blogicon-music:before { content: '\f046'; } .blogicon-niconico:before { content: '\f047'; } .blogicon-heart:before { content: '\f048'; } .blogicon-heart-alt:before { content: '\f049'; } .blogicon-tag:before { content: '\f04a'; } .blogicon-mail:before { content: '\f04b'; } .blogicon-help-alt:before { content: '\f04c'; } .blogicon-sushi:before { content: '\f04d'; } .blogicon-rss:before { content: '\f04e'; } .blogicon-smartphone:before { content: '\f051'; } .blogicon-laptop:before { content: '\f052'; } .blogicon-mixi:before { content: '\f053'; } .blogicon-haiku:before { content: '\f054'; } .icon-allabout-guide { background-image: url(/images/sprite.png); width: 44px; height: 11px; background-position: 0px -210px; } .icon-curation-amazon-search-selected { background-image: url(/images/sprite.png); width: 30px; height: 30px; background-position: 0px -150px; } .icon-curation-amazon-search { background-image: url(/images/sprite.png); width: 30px; height: 30px; background-position: -150px -120px; } .icon-curation-archive-selected { background-image: url(/images/sprite.png); width: 30px; height: 30px; background-position: 0px -30px; } .icon-curation-archive { background-image: url(/images/sprite.png); width: 30px; height: 30px; background-position: -30px -30px; } .icon-curation-bar-close-hover { background-image: url(/images/sprite.png); width: 30px; height: 30px; background-position: -60px 0px; } .icon-curation-bar-close { background-image: url(/images/sprite.png); width: 30px; height: 30px; background-position: -60px -30px; } .icon-curation-bar-open-hover { background-image: url(/images/sprite.png); width: 30px; height: 30px; background-position: 0px -60px; } .icon-curation-bar-open { background-image: url(/images/sprite.png); width: 30px; height: 30px; background-position: -30px -60px; } .icon-curation-beginner-selected { background-image: url(/images/sprite.png); width: 30px; height: 30px; background-position: -60px -60px; } .icon-curation-beginner { background-image: url(/images/sprite.png); width: 30px; height: 30px; background-position: -90px 0px; } .icon-curation-bookmark-selected { background-image: url(/images/sprite.png); width: 30px; height: 30px; background-position: -90px -30px; } .icon-curation-bookmark { background-image: url(/images/sprite.png); width: 30px; height: 30px; background-position: -90px -60px; } .icon-curation-category-selected { background-image: url(/images/sprite.png); width: 30px; height: 30px; background-position: 0px -90px; } .icon-curation-category { background-image: url(/images/sprite.png); width: 30px; height: 30px; background-position: -30px -90px; } .icon-curation-evernote-selected { background-image: url(/images/sprite.png); width: 30px; height: 30px; background-position: -60px -90px; } .icon-curation-evernote { background-image: url(/images/sprite.png); width: 30px; height: 30px; background-position: -90px -90px; } .icon-curation-flickr-selected { background-image: url(/images/sprite.png); width: 30px; height: 30px; background-position: -120px 0px; } .icon-curation-flickr { background-image: url(/images/sprite.png); width: 30px; height: 30px; background-position: -120px -30px; } .icon-curation-fotolife-selected { background-image: url(/images/sprite.png); width: 30px; height: 30px; background-position: -120px -60px; } .icon-curation-fotolife { background-image: url(/images/sprite.png); width: 30px; height: 30px; background-position: -120px -90px; } .icon-curation-gist-selected { background-image: url(/images/sprite.png); width: 30px; height: 30px; background-position: 0px -120px; } .icon-curation-gist { background-image: url(/images/sprite.png); width: 30px; height: 30px; background-position: -30px -120px; } .icon-curation-gnavi-selected { background-image: url(/images/sprite.png); width: 30px; height: 30px; background-position: -60px -120px; } .icon-curation-gnavi { background-image: url(/images/sprite.png); width: 30px; height: 30px; background-position: -90px -120px; } .icon-curation-google-picker-selected { background-image: url(/images/sprite.png); width: 30px; height: 30px; background-position: -120px -120px; } .icon-curation-google-picker { background-image: url(/images/sprite.png); width: 30px; height: 30px; background-position: -150px 0px; } .icon-curation-gourmet-selected { background-image: url(/images/sprite.png); width: 30px; height: 30px; background-position: -150px -30px; } .icon-curation-gourmet { background-image: url(/images/sprite.png); width: 30px; height: 30px; background-position: -150px -60px; } .icon-curation-hatena-bookmark-selected { background-image: url(/images/sprite.png); width: 30px; height: 30px; background-position: -150px -90px; } .icon-curation-hatena-bookmark { background-image: url(/images/sprite.png); width: 30px; height: 30px; background-position: 0px 0px; } .icon-curation-home-selected { background-image: url(/images/sprite.png); width: 30px; height: 30px; background-position: -30px 0px; } .icon-curation-home { background-image: url(/images/sprite.png); width: 30px; height: 30px; background-position: -30px -150px; } .icon-curation-instagram-selected { background-image: url(/images/sprite.png); width: 30px; height: 30px; background-position: -60px -150px; } .icon-curation-instagram { background-image: url(/images/sprite.png); width: 30px; height: 30px; background-position: -90px -150px; } .icon-curation-itunes-selected { background-image: url(/images/sprite.png); width: 30px; height: 30px; background-position: -120px -150px; } .icon-curation-itunes { background-image: url(/images/sprite.png); width: 30px; height: 30px; background-position: -150px -150px; } .icon-curation-miil-selected { background-image: url(/images/sprite.png); width: 30px; height: 30px; background-position: -180px 0px; } .icon-curation-miil { background-image: url(/images/sprite.png); width: 30px; height: 30px; background-position: -180px -30px; } .icon-curation-nicovideo-selected { background-image: url(/images/sprite.png); width: 30px; height: 30px; background-position: -180px -60px; } .icon-curation-nicovideo { background-image: url(/images/sprite.png); width: 30px; height: 30px; background-position: -180px -90px; } .icon-curation-option-selected { background-image: url(/images/sprite.png); width: 30px; height: 30px; background-position: -180px -120px; } .icon-curation-option { background-image: url(/images/sprite.png); width: 30px; height: 30px; background-position: -180px -150px; } .icon-curation-paint-selected { background-image: url(/images/sprite.png); width: 30px; height: 30px; background-position: 0px -180px; } .icon-curation-paint { background-image: url(/images/sprite.png); width: 30px; height: 30px; background-position: -30px -180px; } .icon-curation-pixiv-selected { background-image: url(/images/sprite.png); width: 30px; height: 30px; background-position: -60px -180px; } .icon-curation-pixiv { background-image: url(/images/sprite.png); width: 30px; height: 30px; background-position: -90px -180px; } .icon-curation-twitter-selected { background-image: url(/images/sprite.png); width: 30px; height: 30px; background-position: -120px -180px; } .icon-curation-twitter { background-image: url(/images/sprite.png); width: 30px; height: 30px; background-position: -150px -180px; } .icon-curation-youtube-selected { background-image: url(/images/sprite.png); width: 30px; height: 30px; background-position: -180px -180px; } .icon-curation-youtube { background-image: url(/images/sprite.png); width: 30px; height: 30px; background-position: -210px 0px; } .icon-customize-article { background-image: url(/images/sprite.png); width: 16px; height: 16px; background-position: -210px -30px; } .icon-customize-background-color { background-image: url(/images/sprite.png); width: 16px; height: 15px; background-position: -210px -94px; } .icon-customize-background-image { background-image: url(/images/sprite.png); width: 16px; height: 12px; background-position: -210px -124px; } .icon-customize-css { background-image: url(/images/sprite.png); width: 16px; height: 15px; background-position: -210px -109px; } .icon-customize-footer { background-image: url(/images/sprite.png); width: 16px; height: 16px; background-position: -210px -46px; } .icon-customize-header { background-image: url(/images/sprite.png); width: 16px; height: 16px; background-position: -210px -62px; } .icon-customize-sidebar { background-image: url(/images/sprite.png); width: 16px; height: 16px; background-position: -210px -78px; } .icon-customize-smartphone { background-image: url(/images/sprite.png); width: 10px; height: 16px; background-position: -226px -30px; } .icon-library { background-image: url(/images/sprite.png); width: 41px; height: 11px; background-position: -44px -210px; } .icon-npo { background-image: url(/images/sprite.png); width: 25px; height: 11px; background-position: -210px -136px; } .icon-pro { background-image: url(/images/sprite.png); width: 25px; height: 11px; background-position: -210px -147px; } .icon-sponsored { background-image: url(/images/sprite.png); width: 58px; height: 11px; background-position: -85px -210px; } [class^="icon-"], [class*=" icon-"] { display: inline-block; vertical-align: text-top; background-repeat: no-repeat; *margin-right: .3em; margin-right: 2px; } [class^="icon-"]:last-child, [class*=" icon-"]:last-child { *margin-left: 0; } [class^="icon-big-"], [class*=" icon-big-"] { display: inline-block; vertical-align: text-top; background-repeat: no-repeat; *margin-right: .3em; padding-right: 0; margin-right: 3px; } .icon-pro, .icon-npo, .icon-sponsored, .icon-library, .icon-allabout { margin: 0 3px; vertical-align: middle; } @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 2dppx) { [class^="icon-"], [class*=" icon-"] { background-image: url(/images/sprite@2x.png); background-size: 240px auto; } } #header, #globalheader { position: relative; z-index: 99; width: 100%; border: none; font-family: 'Open Sans', 'Helvetica Neue', 'Helvetica', 'Arial', 'ãƒ’ãƒ©ã‚®ãƒè§’ã‚´ Pro W3', 'Hiragino Kaku Gothic Pro', 'ãƒ¡ã‚¤ãƒªã‚ª', Meiryo, 'ï¼­ï¼³ ï¼°ã‚´ã‚·ãƒƒã‚¯', 'MS PGothic', sans-serif; } #globalheader-container { height: 37px; width: 100%; z-index: 99; } .browsing-with-smartphone #globalheader-container { height: 44px; } .browsing-with-smartphone #globalheader-container iframe#globalheader { height: 44px; } .global-page #header a:link, .global-page #header a:visited { color: #333 !important; } #header a:hover { text-decoration: underline; } .page-globalheader { margin: 0; padding: 0; height: 37px; overflow: hidden; } #header { width: 100%; background: transparent; /* service header-bg color */ } #header #header-body { width: 100%; height: 37px; display: block; *zoom: 1; text-align: center; font-size: 75%; position: fixed; top: 0; left: 0; z-index: 9998; } #header #header-body:after { display: block; visibility: hidden; font-size: 0; height: 0; clear: both; content: "."; } #header img { border: 0; } #header a { text-decoration: none; } #header a:hover { text-decoration: underline; } .globalheader-nav { position: relative; float: left; margin: 0; padding: 0; list-style: none; display: block; *zoom: 1; } .globalheader-nav:after { display: block; visibility: hidden; font-size: 0; height: 0; clear: both; content: "."; } .globalheader-nav > li { float: left; padding: 0 10px; } .globalheader-nav > li a { float: none; line-height: 37px; text-decoration: none; } .globalheader-nav > li span { float: none; line-height: 37px; cursor: pointer; } .globalheader-nav .service-logo { vertical-align: middle; height: 37px; } .globalheader-nav .service-logo-container svg { width: 141px; height: 37px; } .globalheader-nav .current-blog a { display: block; max-width: 180px; white-space: nowrap; -webkit-text-overflow: ellipsis; -o-text-overflow: ellipsis; text-overflow: ellipsis; overflow: hidden; } .globalheader-nav .blog-private-badge { display: none; margin-right: .3em; float: left; } .globalheader-nav #subscribe span:hover { text-decoration: underline; } .globalheader-nav .subscribe .subscribe-count { vertical-align: middle; background: rgba(0, 0, 0, 0.3); padding: 3px 5px; font-size: 10px; -webkit-border-top-right-radius: 2px; -webkit-border-bottom-right-radius: 0; -webkit-border-bottom-left-radius: 0; -webkit-border-top-left-radius: 0; -moz-border-radius-topright: 2px; -moz-border-radius-bottomright: 0; -moz-border-radius-bottomleft: 0; -moz-border-radius-topleft: 0; border-top-right-radius: 2px; border-bottom-right-radius: 0; border-bottom-left-radius: 0; border-top-left-radius: 0; -webkit-border-radius: 2px; -moz-border-radius: 2px; border-radius: 2px; -moz-background-clip: padding; -webkit-background-clip: padding-box; background-clip: padding-box; color: #fff; } .globalheader-nav [class*="blogicon-"] { vertical-align: middle; font-size: 14px; margin-right: .2em; } .service-menu { position: absolute; top: 0; right: 0; margin: 0; padding: 0; display: block; *zoom: 1; } .service-menu:after { display: block; visibility: hidden; font-size: 0; height: 0; clear: both; content: "."; } .service-menu li { float: left; padding: 0 8px; line-height: 37px; vertical-align: middle; list-style-type: none; } .service-menu li span { cursor: pointer; } .service-menu li img { vertical-align: middle; margin-top: -2px; } .service-menu .upgrade-pro a { color: #62d7f4 !important; } .service-menu .header-user-image { width: 20px; height: 20px; -webkit-border-top-right-radius: 2px; -webkit-border-bottom-right-radius: 0; -webkit-border-bottom-left-radius: 0; -webkit-border-top-left-radius: 0; -moz-border-radius-topright: 2px; -moz-border-radius-bottomright: 0; -moz-border-radius-bottomleft: 0; -moz-border-radius-topleft: 0; border-top-right-radius: 2px; border-bottom-right-radius: 0; border-bottom-left-radius: 0; border-top-left-radius: 0; -webkit-border-radius: 2px; -moz-border-radius: 2px; border-radius: 2px; -moz-background-clip: padding; -webkit-background-clip: padding-box; background-clip: padding-box; } .service-menu .header-notify, .service-menu .header-services, .service-menu .header-unread { width: 36px; height: 37px; } .service-menu .global-notify { width: 25px; height: 25px; } .service-menu .global-logo { padding-left: 3px; } .service-menu .global-logo .global-hatena-logo { width: 76px; height: 12px; } .service-menu .global-logo .global-logo-svg-wrapper svg { width: 76px; height: 12px; vertical-align: middle; } #header .header-button { height: 37px; cursor: pointer; display: block; } #header .header-button.header-dropdown { background: url('/images/header/dropdown.gif') center right no-repeat; background-size: 12px 12px; padding-right: 12px; } #header .header-button img { vertical-align: middle; } #header .header-button .usermenu-svg-wrapper svg { width: 24px; height: 24px; } #header .header-button .notify-svg-wrapper svg { width: 25px; height: 25px; } #header .header-button .unread-svg-wrapper svg { width: 24px; height: 24px; } #header .header-button svg { vertical-align: middle; } .header-my .header-user-image { *padding-top: 11px !important; } .header-services img, .header-notify img, .header-unread img { *padding-top: 8px; } .global-logo img { *padding-top: 14px; } #header .header-notify, #header .header-services, #header .header-unread { margin-right: 2px; position: relative; padding: 0 3px !important; } #header .header-services span.header-dropdown { padding-right: 12px; } #header .header-notify span.header-dropdown, #header .header-services span.header-dropdown, #header .header-unread span.header-dropdown { padding-right: 9px; width: 25px; } #header .header-notify img, #header .header-unread img { opacity: 1 !important; } #header .notify-count { font-weight: bold; color: #fff; background: url(/images/header/count-bg.png) top left no-repeat; background-size: 14px 14px; text-align: center; margin-right: 6px; position: absolute; top: 3px; right: 4px; width: 14px; height: 14px; line-height: 14px; font-size: 80%; display: none; } @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 2dppx) { #header .notify-count { background-image: url(/images/header/count-bg@2x.png); } } #header .unread-count { margin-right: 0; background-color: #c40017; position: absolute; top: 10px; right: 11px; width: 6px; height: 6px; border-radius: 6px; display: none; text-indent: 100%; white-space: nowrap; overflow: hidden; background-position: 0 0; background-repeat: no-repeat; } .page-globalheader .btn { display: inline-block; *display: inline; *zoom: 1; padding: 4px 10px 4px; margin-bottom: 0; line-height: 18px; color: #4f5051; background-color: #f7f8f9; text-align: center; vertical-align: middle; border: 1px solid #dfe5e7; -webkit-border-top-right-radius: 2px; -webkit-border-bottom-right-radius: 0; -webkit-border-bottom-left-radius: 0; -webkit-border-top-left-radius: 0; -moz-border-radius-topright: 2px; -moz-border-radius-bottomright: 0; -moz-border-radius-bottomleft: 0; -moz-border-radius-topleft: 0; border-top-right-radius: 2px; border-bottom-right-radius: 0; border-bottom-left-radius: 0; border-top-left-radius: 0; -webkit-border-radius: 2px; -moz-border-radius: 2px; border-radius: 2px; -moz-background-clip: padding; -webkit-background-clip: padding-box; background-clip: padding-box; cursor: pointer; font-size: 12px; text-decoration: none; font-weight: bold; -webkit-appearance: none; } .page-globalheader .btn:hover { border-color: #ccc; background-color: #eef0f2; text-decoration: none !important; } .page-globalheader .btn-blue, .page-globalheader .btn-primary { color: #fff !important; background: #4eacd1; border: 1px solid transparent; } .page-globalheader .btn-blue:hover, .page-globalheader .btn-primary:hover { border-color: #339bc3; background: #339bc3; background: -webkit-gradient(linear, left top, left bottom, from(#4eacd1), to(#339bc3)); background: -ms-linear-gradient(top, #4eacd1, #339bc3); background: -moz-linear-gradient(top, #4eacd1 0%, #339bc3 100%); } .page-globalheader .btn-register { color: #fff !important; background: #5aba90 !important; border: 1px solid transparent; } .page-globalheader .btn-register:hover { background: #45a67c; background: -webkit-gradient(linear, left top, left bottom, from(#5aba90), to(#45a67c)); background: -ms-linear-gradient(top, #5aba90, #45a67c); background: -moz-linear-gradient(top, #5aba90 0%, #45a67c 100%); border-color: #45a67c; } .page-globalheader .btn-pro { color: #fff !important; background: #333; border: 1px solid transparent; } .page-globalheader .btn-pro:hover { background: #111111; background: -webkit-gradient(linear, left top, left bottom, from(#333333), to(#111111)); background: -ms-linear-gradient(top, #333333, #111111); background: -moz-linear-gradient(top, #333333 0%, #111111 100%); border-color: #000; } .page-globalheader .btn-small { padding: 2px 10px !important; font-size: 11px !important; } .page-globalheader .btn-large { padding: 13px 19px; font-size: 17px; line-height: normal; font-weight: bold; } .page-globalheader .btn[disabled="disabled"], .page-globalheader .btn[disabled="disabled"]:hover, .page-globalheader input#submit[disabled="disabled"], .page-globalheader input#submit[disabled="disabled"]:hover, .page-globalheader form input[disabled="disabled"], .page-globalheader form input[disabled="disabled"]:hover { -moz-opacity: 0.4; opacity: 0.4; -khtml-opacity: 0.4; -webkit-opacity: 0.4; cursor: default; white-space: nowrap; } .page-globalheader .btn.disabled, .page-globalheader .btn.disabled:hover { -moz-opacity: 0.4; opacity: 0.4; -khtml-opacity: 0.4; -webkit-opacity: 0.4; cursor: default; white-space: nowrap; } #header .cookie-notify { margin: 10px 10px 20px 10px; padding: 2px 10px 2px 30px; background: #ddcccc url('/images/admin/error.png') no-repeat 5px center; background-size: contain; border: 1px solid #EFCFD1; font-size: 11px; color: #9b4d51; } #header .cookie-notify a { font-weight: normal; } #header .btn { line-height: 13px; position: relative; top: -1px; } @media screen and (max-width: 550px) { #current-blog { display: none !important; } } #header-body-mobile { display: block; height: 44px; margin-left: 8px; margin-right: 8px; } #header-body-mobile .service-logo { margin: 5px 0; } #header-body-mobile .service-logo-container svg { width: 130px; height: 34px; margin: 5px 0; } #header-body-mobile .houyhnhnm-logo { margin: 3px 0 2px; display: inline-block; } #header-body-mobile .globalheader-right { position: absolute; top: 0; right: 8px; margin: 6px 0; height: 32px; } #header-body-mobile .globalheader-right-nav { margin: 0; padding: 0; list-style: none; display: block; *zoom: 1; } #header-body-mobile .globalheader-right-nav:after { display: block; visibility: hidden; font-size: 0; height: 0; clear: both; content: "."; } #header-body-mobile .globalheader-right-nav li { float: left; margin-left: 5px; } #header-body-mobile .globalheader-right-nav i { vertical-align: middle; } #header-body-mobile .touch-header-btn { margin: 3px 0; } #header-body-mobile .touch-header-btn a { background: #fff; } #header-body-mobile .profile-image { width: 32px; height: 32px; -webkit-border-top-right-radius: 3px; -webkit-border-bottom-right-radius: 0; -webkit-border-bottom-left-radius: 0; -webkit-border-top-left-radius: 0; -moz-border-radius-topright: 3px; -moz-border-radius-bottomright: 0; -moz-border-radius-bottomleft: 0; -moz-border-radius-topleft: 0; border-top-right-radius: 3px; border-bottom-right-radius: 0; border-bottom-left-radius: 0; border-top-left-radius: 0; -webkit-border-radius: 3px; -moz-border-radius: 3px; border-radius: 3px; -moz-background-clip: padding; -webkit-background-clip: padding-box; background-clip: padding-box; } #header-body-mobile .btn { display: inline-block; *display: inline; *zoom: 1; padding: 0px 5px; margin-bottom: 0; line-height: 26px; text-align: center; vertical-align: middle; border: 1px solid #dfe5e7; -webkit-border-top-right-radius: 3px; -webkit-border-bottom-right-radius: 0; -webkit-border-bottom-left-radius: 0; -webkit-border-top-left-radius: 0; -moz-border-radius-topright: 3px; -moz-border-radius-bottomright: 0; -moz-border-radius-bottomleft: 0; -moz-border-radius-topleft: 0; border-top-right-radius: 3px; border-bottom-right-radius: 0; border-bottom-left-radius: 0; border-top-left-radius: 0; -webkit-border-radius: 3px; -moz-border-radius: 3px; border-radius: 3px; -moz-background-clip: padding; -webkit-background-clip: padding-box; background-clip: padding-box; cursor: pointer; font-size: 70%; font-weight: normal; background: transparent; } #header-body-mobile .btn-register { background-color: #5aba90; border: 1px solid #5aba90; } .hatena-globalheader-window { position: fixed; top: 37px; right: 100px; width: 150px; height: 300px; margin: 0; padding: 0; border: 1px solid #ccc; background: #fff; font-size: 75%; z-index: 9999; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2); -moz-box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2); -webkit-box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2); } .hatena-globalheader-window iframe { width: 100%; height: 100%; } .hatena-globalheader-window.message { font-weight: bold; font-size: 100%; font-size: 13px; line-height: 30px; margin: 0 0 20px 0; padding: 5px 10px 5px 35px; border: 1px solid #C6C3FF; background: #eff3ff url('/images/admin/check.png') no-repeat 7px 7px; color: #454545; } .globalheader-dropdown-wrapper .iframe-dropdown-list { padding: 5px 0 5px 0; margin: 0; } .globalheader-dropdown-wrapper .iframe-dropdown-list a, .globalheader-dropdown-wrapper .iframe-dropdown-list li > span { display: block; width: 176px; padding: 8px 12px; color: #454545; height: 16px; line-height: 16px; white-space: nowrap; -webkit-text-overflow: ellipsis; -o-text-overflow: ellipsis; text-overflow: ellipsis; overflow: hidden; cursor: pointer; } .globalheader-dropdown-wrapper .iframe-dropdown-list a:hover, .globalheader-dropdown-wrapper .iframe-dropdown-list li > span:hover { text-decoration: none; background-color: #f7f8f9; } .globalheader-dropdown-wrapper .iframe-dropdown-list a .blogicon-subscribe, .globalheader-dropdown-wrapper .iframe-dropdown-list li > span .blogicon-subscribe { margin: 0 .1em; } .globalheader-dropdown-wrapper .iframe-dropdown-list .favicon { vertical-align: text-bottom; -webkit-border-top-right-radius: 2px; -webkit-border-bottom-right-radius: 0; -webkit-border-bottom-left-radius: 0; -webkit-border-top-left-radius: 0; -moz-border-radius-topright: 2px; -moz-border-radius-bottomright: 0; -moz-border-radius-bottomleft: 0; -moz-border-radius-topleft: 0; border-top-right-radius: 2px; border-bottom-right-radius: 0; border-bottom-left-radius: 0; border-top-left-radius: 0; -webkit-border-radius: 2px; -moz-border-radius: 2px; border-radius: 2px; -moz-background-clip: padding; -webkit-background-clip: padding-box; background-clip: padding-box; } .globalheader-dropdown-wrapper .iframe-dropdown-list .dropdown-divider { padding-top: 1px; margin: 5px 1px 6px; border-bottom: 1px solid #dfe5e7; } .globalheader-dropdown-wrapper .iframe-dropdown-list.section { padding-bottom: 5px; } .globalheader-dropdown-wrapper .iframe-dropdown-list .dropdown-mymenu-more-blogs { text-align: center; } .globalheader-dropdown-wrapper .upgrade-pro a { color: #4eacd1 !important; } .globalheader-dropdown-wrapper .arrow a { background-image: url('/images/header/header-arrow.png'); background-repeat: no-repeat; background-position: 5% 50%; padding-left: 25px; width: 163px; } .globalheader-dropdown-wrapper h1 { margin-left: 8px; margin-right: 8px; margin-bottom: 0 !important; padding-top: 10px !important; } .globalheader-dropdown-wrapper h1 a { color: #3d3f44; } .globalheader-dropdown-wrapper .search { padding: 8px; } .globalheader-dropdown-wrapper .search-form { width: 100%; border: 1px solid #dfe5e7; -webkit-border-top-right-radius: 3px; -webkit-border-bottom-right-radius: 0; -webkit-border-bottom-left-radius: 0; -webkit-border-top-left-radius: 0; -moz-border-radius-topright: 3px; -moz-border-radius-bottomright: 0; -moz-border-radius-bottomleft: 0; -moz-border-radius-topleft: 0; border-top-right-radius: 3px; border-bottom-right-radius: 0; border-bottom-left-radius: 0; border-top-left-radius: 0; -webkit-border-radius: 3px; -moz-border-radius: 3px; border-radius: 3px; -moz-background-clip: padding; -webkit-background-clip: padding-box; background-clip: padding-box; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; box-sizing: border-box; position: relative; } .globalheader-dropdown-wrapper .search-form .search-module-input { padding: 5px; color: #555555; background: none; border: none; outline: none; height: 30px; width: 90%; box-shadow: none; } .globalheader-dropdown-wrapper .search-form .search-module-button { width: 20px; height: 20px; background: transparent url(https://blog.st-hatena.com/images/theme/search.png) no-repeat right center; border: none; outline: none; text-indent: -9999px; position: absolute; top: 5px; right: 5px; -moz-opacity: 0.5; -khtml-opacity: 0.5; -webkit-opacity: 0.5; opacity: 0.5; filter: alpha(opacity=50); cursor: pointer; } @media (-webkit-min-device-pixel-ratio: 2) { .globalheader-dropdown-wrapper .search-form .search-module-button { background: transparent url(https://blog.st-hatena.com/images/theme/search@2x.png) no-repeat right center; background-size: 20px 20px; } .globalheader-dropdown-wrapper .arrow a { background-image: url('/images/header/header-arrow@2x.png'); background-size: 7px 10px; } } #hatena-diary-dropdown-mymenu, #hatena-diary-dropdown-blogmenu, .hatena-diary-dropdown-myblogs { width: 200px; } #hatena-diary-feedback { position: fixed; padding: 0; margin: 0; top: 37px; right: 188px; border: 1px solid #ccc; background: #fff; z-index: 9999; } #hatena-diary-edit-in-place { max-width: 982px !important; left: 10%; top: 37px; border: 1px solid #ccc; overflow: hidden; background: #fff; } #hatena-diary-dropdown-notify { width: 250px; height: 300px; } .hatena-iframe-container { position: fixed; top: 37px; padding: 0; margin: 0; border: 1px solid #ccc; overflow: hidden; background: #fff; z-index: 9999; } .hatena-iframe-container .loading { display: block; position: absolute; margin: 0; padding: 10% 0; width: 100%; height: 100%; line-height: 100%; text-align: center; background: #fff; opacity: 0.8; } .hatena-iframe-container .loading img { vertical-align: middle; margin: 2px; } .hatena-iframe-container iframe { width: 100%; height: 100%; } .hatena-iframe-container.popup { box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2); -moz-box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2); -webkit-box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2); } .globalheader-config-dropdown-window { padding: 10px; font-size: 12px; } .globalheader-config-dropdown-window h1 { border-bottom: 1px solid #ccc; margin-bottom: 8px; padding: 5px 0; } .globalheader-config-dropdown-window h1 a { display: block; color: #3d3f44; } .globalheader-config-dropdown-window ul a { display: block; padding: 8px 0; color: #3d3f44; white-space: nowrap; -webkit-text-overflow: ellipsis; -o-text-overflow: ellipsis; text-overflow: ellipsis; overflow: hidden; } .globalheader-config-dropdown-window ul a:hover { text-decoration: underline; } .globalheader-config-dropdown-window ul .goto-dashboard a { border-top: 1px solid #ccc; margin-top: 5px; padding-top: 13px; } #username-window { right: 0; width: 150px; overflow: hidden; } #username-window li a { display: block; color: #333; } #username-window li img { vertical-align: middle; margin-bottom: 2px; margin-left: 3px; border: 0; background: #fff; } #username-window img { border: 0; } #username-window a { text-decoration: none; } #username-window a:hover { text-decoration: underline; } #username-window dt.label span, #username-window li.label span { display: block; font-weight: bold; margin-top: 3px; padding: 3px 0 5px 3px; border-bottom: 1px solid #ddd; background: #fff; color: #000; } #username-window dt, #username-window dd, #username-window li { display: block !important; line-height: 1.5; margin: 0 !important; padding: 3px 5px; text-align: left; } #username-window dd img { margin-right: 4px; margin-left: 3px; } #username-window a { color: #333 !important; } #username-window li:last-child { border-bottom: 0; } #username-window img { vertical-align: middle; margin-top: -2px; } #notify-window { width: 250px; } #header-container #sp-suggest { background: #3d3f44; padding: 1em; text-align: center; } #header-container #sp-suggest a { display: inline-block; color: #3d3f44; background: #fff; padding: 1em; border-radius: .5em; } @media (min-width: 300px) { #header-container #sp-suggest a { font-size: 16px; } } @media (min-width: 900px) { #header-container #sp-suggest { padding: 3em; text-align: center; } #header-container #sp-suggest a { font-size: 50px; padding: 1em; border-radius: .5em; } } body.hide-global-header #globalheader-container { display: none; } #header.admin { background: #000000 url('/images/stripe_gray.gif') !important; color: #fff; } #header.admin a:link, #header.admin a:visited { color: #fff !important; text-decoration: none; } #header.admin a:hover { text-decoration: underline; } #header.admin #userinfo { background: #000000 url('/images/stripe_gray.gif'); color: #fff; border: 1px solid #333; line-height: 2; padding: 10px; } #header.admin #userinfo table { border-collapse: collapse; margin: 0; padding: 0; width: 100%; } #header.admin #userinfo tr, #header.admin #userinfo th { text-align: left; margin: 0; padding: 0 1em; overflow: hidden; } .globalheader-fixed { margin-top: 37px; } .globalheader-fixed #globalheader-container { width: 100%; position: fixed; z-index: 9999; top: 0; left: 0; } Ô	 ¡$¢_Fhttps://blog.st-hatena.com/fonts/public/blogicon/blogicon-regular.woffOCbplist00ÔghX$versionX$objectsY$archiverT$top † ¯#)*0123KLMNOPQRSTUVWXYZ[\]`abU$nullİ	
 !"R$6S$10R$2R$7R$3S$11R$8V$classR$4R$9R$0R$5R$1€	€€€€€€€Ó$%&'(WNS.base[NS.relative€ €€_Fhttps://blog.st-hatena.com/fonts/public/blogicon/blogicon-regular.woffÒ+,-.Z$classnameX$classesUNSURL¢-/XNSObject#AºôÒ;˜Iw ÈÓ456@JWNS.keysZNS.objects©789:;<=>?€	€
€€€€€€€©ABCDEFGHI€€€€€€€€€€VServer\Content-Type_Access-Control-Allow-Origin]Last-ModifiedTEtagTDate]Accept-Ranges^Content-LengthZConnectionUnginx_application/font-woffQ*_Fri, 01 May 2015 10:50:42 GMT_"55435a82-4c04"_Sat, 02 May 2015 09:36:59 GMTUbytesU19460Zkeep-aliveÒ+,^_\NSDictionary¢^/L_application/font-woffÒ+,cd_NSHTTPURLResponse£ef/_NSHTTPURLResponse]NSURLResponse_NSKeyedArchiverÑij_WebResourceResponse€    # - 2 7 Y _ z }  „ ‡ Š  ‘ ˜ ›  ¡ ¤ § © « ­ ¯ ± ² ´ ¶ ¸ º ¼ ¾ À Ç Ï Û İ ß á*/:CILU^`biq|†ˆŠŒ’”–˜¢¤¦¨ª¬®°²´¶½Êèöû (.FHhzš ¦±¶ÃÆÉáæúş 25K             k              M_application/font-woffÕ	'¤¥¦ _bhttp://blog.hatena.ne.jp/-/blog_style/8454420450079512669/0b3fc607220da770b62932359e9cae488482b6e6Oibplist00Ô‹ŒX$versionX$objectsY$archiverT$top † ¯1#)*0123]^_`abcdefghijklmnopqrstuvwxyz{|}~€„…†U$nullİ	
 !"R$6S$10R$2R$7R$3S$11R$8V$classR$4R$9R$0R$5R$1€	€€€.€0€€/€Ó$%&'(WNS.base[NS.relative€ €€_bhttp://blog.hatena.ne.jp/-/blog_style/8454420450079512669/0b3fc607220da770b62932359e9cae488482b6e6Ò+,-.Z$classnameX$classesUNSURL¢-/XNSObject#AºôÒ:<‚ ÈÓ456I\WNS.keysZNS.objects¯789:;<=>?@ABCDEFGH€	€
€€€€€€€€€€€€€€€€¯JKLMNOPQRSTUVWXYZ[€€€€€€ €!€"€#€$€%€&€'€(€)€*€+€,€-\Content-TypeSP3P]Last-ModifiedYX-RuntimeZSet-CookieVServer_Content-Encoding_X-XSS-ProtectionWExpires]Cache-ControlTDateZX-DispatchZX-RevisionZConnection^Content-Length_X-Content-Type-Options_X-Frame-OptionsTVary_text/css; charset=utf-8_CP="OTI CUR OUR BUS STA"_Thu, 01 Jan 1970 00:00:00 GMTX0.007729_3sk=6b77e493eed44789f80d2b15ff3e81f3a5ace98d; path=/UnginxTgzipQ1_Fri, 02 May 2025 09:36:58 GMT_-public; max-age=315360000; s-maxage=315360000_Sat, 02 May 2015 09:36:58 GMT_&Hatena::Epic::Admin::BlogStyle#default_ f95a219773244f14c2c322979e39f67bZkeep-aliveS541WnosniffTDENY_(Accept-Encoding, Accept-Language, CookieÒ+,‚ƒ\NSDictionary¢‚/ÑXtext/cssÒ+,‡ˆ_NSHTTPURLResponse£‰Š/_NSHTTPURLResponse]NSURLResponse_NSKeyedArchiverÑ_WebResourceResponse€    # - 2 7 k q Œ  “ – ™ œ   £ ª ­ ° ³ ¶ ¹ » ½ ¿ Á Ã Ä Æ È Ê Ì Î Ğ Ò Ù á í ï ñ óX]hqwzƒŒ—Ÿª¿ÁÃÅÇÉËÍÏÑÓÕ×ÙÛİßáãøúüş 
+/=GRYl‡•š¥°»Êãõú/OX”™›»ë4Wbfns£°³¶¿ÄØÜğş)                           +OÑ/* <system section="theme" selected="wideboard"> */
@import "http://blog.hatena.ne.jp/css/theme/welluneednt/master.css";
/* </system> */

/* <system section="background" selected="default"> */
/* default */
/* </system> */

.page-entry.category-ç®¡ç†äººã‚ˆã‚Š .entry-content > p,
.page-entry.category-ãƒã‚¦ã‚¹ãƒ«ãƒ¼ãƒ« .entry-content > p{
    padding-left: 0;
}
.page-archive.category-æ‘ä¸Šæ˜¥æ¨¹ã‚ˆã‚Š .archive-entries:before,
.page-archive.category-ç®¡ç†äººã‚ˆã‚Š .archive-entries:before {
    padding-right: 130px;
}
@media (max-width: 960px) {
 .page-archive.category-æ‘ä¸Šæ˜¥æ¨¹ã‚ˆã‚Š .archive-entries:before,
 .page-archive.category-ç®¡ç†äººã‚ˆã‚Š .archive-entries:before {
    padding-right: 0;
 }
}
#header-modules ul.top-social-buttons .s-tw {
    width: 120px;
}
#header-modules ul.top-social-buttons .s-fb {
    margin-right: 0;
}
.page-archive .bookmark-widget-counter img {
    display: none;
}
.page-entry.category-æ‘ä¸Šæ˜¥æ¨¹ã‚ˆã‚Š .pager, .page-entry.category-ç®¡ç†äººã‚ˆã‚Š .pager {
    display: block;
    padding-top: 50px;
}
.page-archive-category .social-buttons {
    display: none;
}
.message a {
    color: #3c8c99;
}
.message a:hover {
    color: #c60000;
}Ô	¨©ª _9http://blog.hatena.ne.jp/css/theme/welluneednt/master.cssOîbplist00ÔbcX$versionX$objectsY$archiverT$top † ¯#)*0123IJKLMNOPQRSTUVWXY\]U$nullİ	
 !"R$6S$10R$2R$7R$3S$11R$8V$classR$4R$9R$0R$5R$1€	€€€€€€€Ó$%&'(WNS.base[NS.relative€ €€_9http://blog.hatena.ne.jp/css/theme/welluneednt/master.cssÒ+,-.Z$classnameX$classesUNSURL¢-/XNSObject#AºôÒ:˜Cp ÈÓ456?HWNS.keysZNS.objects¨789:;<=>€	€
€€€€€€¨@BCDEFG€€€€€€€€€ZConnection\Content-TypeVServer]Last-ModifiedTVaryTDate_Content-Encoding_Transfer-EncodingZkeep-aliveXtext/cssUnginx_Fri, 01 May 2015 10:50:42 GMT_Accept-Encoding_Sat, 02 May 2015 09:36:58 GMTTgzipXIdentityÒ+,Z[\NSDictionary¢Z/ÿÿÿÿÿÿÿÿÒ+,^__NSHTTPURLResponse£`a/_NSHTTPURLResponse]NSURLResponse_NSKeyedArchiverÑde_WebResourceResponse€    # - 2 7 V \ w z ~  „ ‡ ‹  • ˜ ›  ¡ ¤ ¦ ¨ ª ¬ ® ¯ ± ³ µ · ¹ » ½ Ä Ì Ø Ú Ü Ş*39<ENPRYaluwy{}ƒ…’”–˜šœ «¸¿ÍÒ×êş	8Jjox}Š–›¯³ÇÕçê              f              OÀƒ@charset 'utf-8';
html {
  -webkit-text-size-adjust: 100%;
  -moz-text-size-adjust: 100%;
  -ms-text-size-adjust: 100%;
  -o-text-size-adjust: 100%;
  text-size-adjust: 100%;
  text-rendering: optimizeLegibility;
  margin: 0;
  padding: 0;
}
body {
  background: #fff;
  color: #1a1a1a;
  font: 16px/1.8 "æ¸¸ã‚´ã‚·ãƒƒã‚¯", "YuGothic", 'ãƒ’ãƒ©ã‚®ãƒè§’ã‚´ ProN W3', "Hiragino Kaku Gothic ProN", "Meiryo", Helvetica, Arial, sans-serif;
  margin: 0;
  padding: 0;
}
a {
  color: #1a1a1a;
  text-decoration: none;
}
a:visited {
  color: #878778;
}
a:hover,
a:active {
  color: #c60000;
}
a img {
  border: none;
}
a:focus,
input:focus,
textarea:focus {
  outline: none;
}
ul {
  list-style-type: none;
  margin: 0;
  padding: 0;
}
#container {
  margin: 0 auto;
  position: relative;
}
h1#title {
  position: fixed;
  margin: 0 0 0 -475px;
  padding: 0;
  top: 0;
  left: 50%;
  z-index: 2;
  font-size: 22px;
  margin-top: 12px;
}
.page-index h1#title {
  display: none;
}
h1#title a {
  display: block;
  overflow: hidden;
  padding-top: 32px;
  height: 32px;
  width: 220px;
  background: transparent url(http://f.st-hatena.com/images/fotolife/t/teamennoshita/20150114/20150114205324.png) 0 0 no-repeat;
  -webkit-background-size: contain;
  background-size: contain;
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}
nav {
  position: fixed;
  top: 0;
  width: 100%;
  background: #fff;
  z-index: 1;
  font-size: 16px;
}
.page-index nav {
  border-bottom: 1px solid #ddd;
}
nav ul {
  width: 950px;
  margin: 0 auto;
  text-align: right;
  padding: 10px 0;
}
nav li {
  display: inline-block;
}
nav li:first-child a {
  margin-left: 0;
}
nav li:after {
  content: "";
  display: inline-block;
  vertical-align: middle;
  margin-top: -3px;
  height: 6px;
  width: 6px;
  background: #ddd;
  -moz-border-radius: 3px;
  -webkit-border-radius: 3px;
  border-radius: 3px;
}
nav li:last-child:after {
  display: none;
}
nav a {
  display: inline-block;
  padding: 5px 13px;
  font-weight: bold;
  color: #888;
}
nav a:hover {
  color: #c60000;
}
.page-index nav a {
  color: #1a1a1a;
}
.page-index nav a:hover {
  color: #c60000;
}
.page-index nav .nav-top {
  display: none;
}
body.category-èª­è€…â†”æ‘ä¸Šæ˜¥æ¨¹ nav .nav-archive a {
  color: #c60000;
}
body.category-èª­è€…â†”æ‘ä¸Šæ˜¥æ¨¹ nav .nav-archive a:hover {
  color: #ad0000;
}
body.category-æ‘ä¸Šæ˜¥æ¨¹ã‚ˆã‚Š nav .frommurakami a {
  color: #c60000;
}
body.category-æ‘ä¸Šæ˜¥æ¨¹ã‚ˆã‚Š nav .frommurakami a:hover {
  color: #ad0000;
}
body.category-ç®¡ç†äººã‚ˆã‚Š nav .fromadmin a {
  color: #c60000;
}
body.category-ç®¡ç†äººã‚ˆã‚Š nav .fromadmin a:hover {
  color: #ad0000;
}
body.category-ãƒã‚¦ã‚¹ãƒ«ãƒ¼ãƒ« nav .qna a {
  color: #c60000;
}
body.category-ãƒã‚¦ã‚¹ãƒ«ãƒ¼ãƒ« nav .qna a:hover {
  color: #ad0000;
}
.pagefooter {
  text-align: left;
  padding: 20px 0 40px;
  width: 950px;
  margin: 0 auto;
}
.pagefooter .copyright {
  font-size: 11px;
  font-family: Verdana, Arial, Helvetica, sans-serif;
  color: #999;
}
.pagefooter .badge {
  margin-top: 30px;
  zoom: 1;
}
.pagefooter .badge:after {
  content: "";
  display: block;
  clear: both;
  height: 0;
}
.pagefooter .badge li {
  float: left;
  margin-right: 25px;
}
.pagefooter .badge a {
  opacity: 0.3;
}
.pagefooter .badge a:hover {
  opacity: 1;
}
.pagefooter .hatenablog img {
  height: 30px;
}
.pagefooter .shinchosha {
  margin-top: 7px;
}
.pagefooter .shinchosha img {
  height: 21px;
}
.entry-thumb {
  display: none;
}
#header-modules {
  text-align: center;
  height: 615px;
  background: transparent url(http://f.st-hatena.com/images/fotolife/t/teamennoshita/20150202/20150202112228_original.png) 50% bottom no-repeat;
  -webkit-background-size: 750px auto;
  background-size: 750px auto;
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}
#header-modules h2 {
  margin: 0;
  padding: 110px 0 0;
}
#header-modules h2 img {
  width: 600px;
}
#header-modules ul {
  margin: 15px 0 0;
}
#header-modules li {
  font-weight: bold;
}
#header-modules span {
  font-size: 11px;
  font-weight: normal;
  display: inline-block;
  vertical-align: middle;
  margin-right: 10px;
  margin-top: -2px;
}
#header-modules ul.top-social-buttons {
  position: absolute;
  width: 100%;
  top: 615px;
  background: rgba(0, 0, 0, 0.06);
  margin: 0;
  padding: 10px 0 3px;
  z-index: 10;
}
#header-modules ul.top-social-buttons li {
  display: inline-block;
  margin-right: 10px;
}
#header-modules ul.top-social-buttons li.s-gp {
  margin-right: 0;
}
#header-modules ul.top-social-buttons .s-tw {
  width: 120px;
  margin-right: 0;
}
#header-modules ul.top-social-buttons .s-fb {
  margin-right: 0;
}
#header-modules ul.top-social-buttons .mb {
  display: none;
}
#content-inner {
  background: #f4f4d4;
}
#wrapper {
  margin: 0 auto;
  position: relative;
}
.page-index #wrapper {
  width: 950px;
  padding-bottom: 100px;
}
.intro {
  text-align: center;
  font-size: 16px;
  color: #c60000;
  padding: 55px 0 0;
}
.intro a {
  display: inline-block;
  padding: 20px 60px;
  margin-top: 8px;
  color: #f4f4d4;
  font-size: 16px;
  font-weight: bold;
  background: transparent url(http://f.st-hatena.com/images/fotolife/t/teamennoshita/20150114/20150114200858.png) center center no-repeat;
  -webkit-background-size: contain;
  background-size: contain;
}
.intro a:hover {
  color: yellow;
}
.intro p {
  margin: 0;
  font-size: 18px;
}
.message-title {
  border-top: 2px solid #1a1a1a;
  margin: 30px 0 0;
  padding: 15px 0 12px;
  font-size: 16px;
}
.message-title:before {
  content: "";
  display: inline-block;
  vertical-align: middle;
  margin: -5px 13px 0 0;
  width: 60px;
  height: 60px;
  background: url(http://f.st-hatena.com/images/fotolife/t/teamennoshita/20150114/20150114200825.png) center center no-repeat;
  -webkit-background-size: contain;
  background-size: contain;
}
.message {
  column-count: 2;
  -moz-column-count: 2;
  -webkit-column-count: 2;
  -o-column-count: 2;
  -ms-column-count: 2;
  column-gap: 35px;
  -moz-column-gap: 35px;
  -webkit-column-gap: 35px;
  -o-column-gap: 35px;
  -ms-column-gap: 35px;
  text-align: justify;
  margin-bottom: 65px;
}
.message p {
  margin: 0;
  text-indent: 1em;
  line-height: 1.8;
}
.message p:last-child {
  text-align: right;
}
.top-recent-list-title {
  border-top: 2px solid #1a1a1a;
  border-bottom: 1px solid #c3c3a8;
  font-weight: bold;
  padding: 20px 0;
  margin-bottom: 5px;
  text-align: center;
}
.top-recent-list-title:before {
  display: block;
  content: "";
  width: 220px;
  height: 150px;
  background: url(http://f.st-hatena.com/images/fotolife/t/teamennoshita/20150114/20150114200817.png) 0 0 no-repeat;
  -webkit-background-size: contain;
  background-size: contain;
  position: absolute;
  right: 15px;
  margin-top: -39px;
}
.top-recent-list-title span {
  -moz-transform: scale(2, 1);
  -webkit-transform: scale(2, 1);
  -o-transform: scale(2, 1);
  -ms-transform: scale(2, 1);
  transform: scale(2, 1);
  display: inline-block;
  padding: 0 6px;
}
.hatena-module-recent-entries.category-æ‘ä¸Šæ˜¥æ¨¹ã‚ˆã‚Š:before {
  display: block;
  content: "";
  width: 150px;
  height: 108px;
  background: url(http://f.st-hatena.com/images/fotolife/t/teamennoshita/20150114/20150114201733.png) 0 0 no-repeat;
  -webkit-background-size: contain;
  background-size: contain;
  position: absolute;
  margin-top: -30px;
}
.hatena-module-recent-entries .hatena-module-title {
  font-size: 12px;
  font-weight: bold;
  margin: 22px 0 8px;
  display: inline-block;
  background: rgba(0, 0, 0, 0.06);
  padding: 0 5px;
}
.hatena-module-recent-entries .hatena-module-title:after {
  content: ">";
  font-size: 8px;
  color: #999;
  display: inline-block;
  vertical-align: middle;
  margin-top: -3px;
  padding-left: 5px;
  font-weight: normal;
  font-family: Verdana, Arial, Helvetica, sans-serif;
}
.hatena-module-recent-entries .hatena-module-title a {
  color: #1a1a1a;
}
.page-index .hatena-module-recent-entries .recent-entries-item-inner {
  display: inline;
}
.hatena-module-recent-entries time,
.archive-entry time {
  display: inline-block;
  color: #878778;
  font-size: 12px;
  width: 130px;
  vertical-align: middle;
  margin-top: -2px;
  font-family: Verdana, Arial, Helvetica, sans-serif;
}
.hatena-module-recent-entries time:hover,
.archive-entry time:hover {
  color: #c60000;
}
.recent-entries-item,
.archive-entries {
  position: relative;
  text-overflow: ellipsis;
  white-space: nowrap;
  overflow: hidden;
  color: #878778;
}
.urllist-date-link,
.urllist-entry-body {
  display: inline;
}
.archive-entries {
  width: 950px;
  margin: 0 auto;
  padding: 0 0 100px;
}
.archive-entries .entry-title,
.archive-entries .entry-description,
.archive-entries .date {
  display: inline;
}
.archive-entries .categories {
  display: none;
}
.urllist-title-link,
.archive-entries .entry-title-link {
  padding-right: 15px;
  font-size: 18px;
  font-weight: bold;
  line-height: 30px;
  color: #3c8c99;
}
.urllist-title-link:visited,
.archive-entries .entry-title-link:visited {
  color: #878778;
}
.urllist-title-link:visited:before,
.archive-entries .entry-title-link:visited:before {
  background: #c3c3a8;
}
.urllist-title-link:hover,
.archive-entries .entry-title-link:hover {
  color: #c60000;
}
.urllist-title-link:before,
.archive-entries .entry-title-link:before {
  content: "";
  width: 6px;
  height: 6px;
  -moz-border-radius: 3px;
  -webkit-border-radius: 3px;
  border-radius: 3px;
  background: #99c0b6;
  display: inline-block;
  vertical-align: middle;
  margin-right: 24px;
  margin-top: -2px;
}
.urllist-entry-body,
.archive-entries .entry-description {
  font-size: 14px;
  color: #878778;
}
.page-index .category-æ‘ä¸Šæ˜¥æ¨¹ã‚ˆã‚Š .hatena-module-title {
  display: block;
  background: transparent;
  text-align: center;
  font-size: 16px;
  padding: 20px 0;
  border-top: 2px solid #1a1a1a;
  border-bottom: 1px solid #c3c3a8;
  margin: 0;
}
.page-index .category-æ‘ä¸Šæ˜¥æ¨¹ã‚ˆã‚Š .hatena-module-title:after {
  display: none;
}
.page-index .category-æ‘ä¸Šæ˜¥æ¨¹ã‚ˆã‚Š .hatena-module-body {
  margin-top: 20px;
}
.page-index .category-ç®¡ç†äººã‚ˆã‚Š {
  margin-top: 80px;
  background: rgba(0, 0, 0, 0.06);
}
.page-index .category-ç®¡ç†äººã‚ˆã‚Š .hatena-module-title {
  display: block;
  text-align: center;
  font-size: 14px;
  font-weight: normal;
  background: transparent;
  padding: 20px 0 0;
  margin: 0;
}
.page-index .category-ç®¡ç†äººã‚ˆã‚Š .hatena-module-title:after {
  display: none;
}
.page-index .category-ç®¡ç†äººã‚ˆã‚Š .hatena-module-body {
  margin-top: 0;
  padding: 10px 0 20px;
}
.page-index .category-ç®¡ç†äººã‚ˆã‚Š .recent-entries {
  margin: 0 20px;
}
.page-index .category-ç®¡ç†äººã‚ˆã‚Š .urllist-item {
  padding: 0;
}
.page-index .category-ç®¡ç†äººã‚ˆã‚Š time {
  width: auto;
  padding-right: 20px;
}
.page-index .category-ç®¡ç†äººã‚ˆã‚Š .urllist-title-link {
  font-size: 14px;
  color: #1a1a1a;
}
.page-index .category-ç®¡ç†äººã‚ˆã‚Š .urllist-title-link:hover {
  color: #c60000;
}
.page-index .category-ç®¡ç†äººã‚ˆã‚Š .urllist-title-link:before {
  display: none;
}
.hatena-module-recent-entries.category-æ‘ä¸Šã•ã‚“ã«ãŠã‚Šã„ã£ã¦è³ªå•ãƒ»ç›¸è«‡ã—ãŸã„ã“ã¨ .recent-entries .recent-entries-item:nth-child(2) {
  margin-right: 35px;
}
.hatena-module-recent-entries.category-æ‘ä¸Šã•ã‚“ã«ãŠã‚Šã„ã£ã¦è³ªå•ãƒ»ç›¸è«‡ã—ãŸã„ã“ã¨ .recent-entries .recent-entries-item:nth-child(3) {
  margin-right: 40px;
}
.hatena-module-recent-entries.category-æ‘ä¸Šã•ã‚“ã«ãŠã‚Šã„ã£ã¦è³ªå•ãƒ»ç›¸è«‡ã—ãŸã„ã“ã¨ .recent-entries .recent-entries-item:nth-child(4) {
  margin-right: 50px;
}
.hatena-module-recent-entries.category-æ‘ä¸Šã•ã‚“ã«ãŠã‚Šã„ã£ã¦è³ªå•ãƒ»ç›¸è«‡ã—ãŸã„ã“ã¨:after {
  content: "";
  width: 80px;
  height: 80px;
  background: url(http://f.st-hatena.com/images/fotolife/t/teamennoshita/20150114/20150114200834.png) right bottom no-repeat;
  -webkit-background-size: contain;
  background-size: contain;
  position: absolute;
  right: 0px;
  margin-top: -80px;
  margin-right: -10px;
}
.hatena-module-recent-entries.category-æ‘ä¸Šã•ã‚“ã«ã¡ã‚‡ã£ã¨è©±ã—ãŸã„ã“ã¨ .recent-entries .recent-entries-item:nth-child(3) {
  margin-right: 90px;
}
.hatena-module-recent-entries.category-æ‘ä¸Šã•ã‚“ã«ã¡ã‚‡ã£ã¨è©±ã—ãŸã„ã“ã¨ .recent-entries .recent-entries-item:nth-child(4) {
  margin-right: 105px;
}
.hatena-module-recent-entries.category-æ‘ä¸Šã•ã‚“ã«ã¡ã‚‡ã£ã¨è©±ã—ãŸã„ã“ã¨:after {
  content: "";
  width: 110px;
  height: 110px;
  background: url(http://f.st-hatena.com/images/fotolife/t/teamennoshita/20150114/20150114200831.png) right bottom no-repeat;
  -webkit-background-size: contain;
  background-size: contain;
  position: absolute;
  right: 0px;
  margin-top: -115px;
  margin-right: -15px;
}
.hatena-module-recent-entries.category-ç§ã®å¥½ããªå ´æ‰€ãƒ»å«Œã„ãªå ´æ‰€ .recent-entries .recent-entries-item:nth-child(2) {
  margin-right: 30px;
}
.hatena-module-recent-entries.category-ç§ã®å¥½ããªå ´æ‰€ãƒ»å«Œã„ãªå ´æ‰€ .recent-entries .recent-entries-item:nth-child(3) {
  margin-right: 40px;
}
.hatena-module-recent-entries.category-ç§ã®å¥½ããªå ´æ‰€ãƒ»å«Œã„ãªå ´æ‰€ .recent-entries .recent-entries-item:nth-child(4) {
  margin-right: 68px;
}
.hatena-module-recent-entries.category-ç§ã®å¥½ããªå ´æ‰€ãƒ»å«Œã„ãªå ´æ‰€:after {
  content: "";
  width: 90px;
  height: 90px;
  background: url(http://f.st-hatena.com/images/fotolife/t/teamennoshita/20150114/20150114200840.png) right bottom no-repeat;
  -webkit-background-size: contain;
  background-size: contain;
  position: absolute;
  right: 0px;
  margin-top: -90px;
  margin-right: -30px;
}
.hatena-module-recent-entries.category-ã€ŒçŒ«ã€ã‚ã‚‹ã„ã¯ã€Œãƒ¤ã‚¯ãƒ«ãƒˆãƒ»ã‚¹ãƒ¯ãƒ­ãƒ¼ã‚ºã€é–¢é€£ .recent-entries .recent-entries-item:nth-child(1) {
  margin-right: 35px;
}
.hatena-module-recent-entries.category-ã€ŒçŒ«ã€ã‚ã‚‹ã„ã¯ã€Œãƒ¤ã‚¯ãƒ«ãƒˆãƒ»ã‚¹ãƒ¯ãƒ­ãƒ¼ã‚ºã€é–¢é€£ .recent-entries .recent-entries-item:nth-child(2) {
  margin-right: 45px;
}
.hatena-module-recent-entries.category-ã€ŒçŒ«ã€ã‚ã‚‹ã„ã¯ã€Œãƒ¤ã‚¯ãƒ«ãƒˆãƒ»ã‚¹ãƒ¯ãƒ­ãƒ¼ã‚ºã€é–¢é€£ .recent-entries .recent-entries-item:nth-child(3) {
  margin-right: 45px;
}
.hatena-module-recent-entries.category-ã€ŒçŒ«ã€ã‚ã‚‹ã„ã¯ã€Œãƒ¤ã‚¯ãƒ«ãƒˆãƒ»ã‚¹ãƒ¯ãƒ­ãƒ¼ã‚ºã€é–¢é€£ .recent-entries .recent-entries-item:nth-child(4) {
  margin-right: 60px;
}
.hatena-module-recent-entries.category-ã€ŒçŒ«ã€ã‚ã‚‹ã„ã¯ã€Œãƒ¤ã‚¯ãƒ«ãƒˆãƒ»ã‚¹ãƒ¯ãƒ­ãƒ¼ã‚ºã€é–¢é€£:after {
  content: "";
  width: 120px;
  height: 120px;
  background: url(http://f.st-hatena.com/images/fotolife/t/teamennoshita/20150114/20150114200837.png) right bottom no-repeat;
  -webkit-background-size: contain;
  background-size: contain;
  position: absolute;
  right: 0px;
  margin-top: -105px;
  margin-right: -10px;
}
.to-message-list {
  border-top: 1px solid #c3c3a8;
  font-size: 18px;
  font-weight: bold;
  margin-top: 25px;
  padding: 20px 0 80px 135px;
}
.to-message-list a {
  color: #c60000;
}
.to-message-list a:hover {
  color: #ad0000;
}
.to-message-list:before {
  content: ">";
  color: #c60000;
  width: 30px;
  font-size: 8px;
  display: inline-block;
  vertical-align: middle;
  margin-top: -4px;
  font-weight: bold;
  font-family: Verdana, Arial, Helvetica, sans-serif;
}
.entry-header {
  position: relative;
  width: 950px;
  margin: 0 auto;
  padding-top: 290px;
}
.entry-header .categories {
  position: absolute;
  width: 100%;
  text-align: center;
  font-size: 22px;
  font-weight: bold;
  top: 148px;
  padding-right: 130px;
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}
.entry-header .date {
  border-top: 1px solid #c3c3a8;
}
.entry-header .date a {
  display: inline-block;
  position: absolute;
  margin-top: -14px;
  font-size: 14px;
  color: #878778;
  background: #f4f4d4;
  padding-right: 5px;
}
.entry-header .date a:before {
  content: "";
  width: 57px;
  height: 57px;
  display: block;
  position: absolute;
  margin-top: -20px;
  background: #f4f4d4 url(http://f.st-hatena.com/images/fotolife/t/teamennoshita/20150114/20150114200843.png) center center no-repeat;
  -webkit-background-size: contain;
  background-size: contain;
}
.entry-header .date a time {
  padding-left: 65px;
}
.entry-header .entry-title {
  position: absolute;
  width: 280px;
  text-align: right;
  font-size: 18px;
  font-weight: bold;
}
.entry-header .entry-title a {
  display: block;
  margin-top: 30px;
  color: #3c8c99;
}
.entry-header .entry-title a:hover {
  color: #c60000;
}
.entry-content {
  padding-top: 30px;
}
.entry-content blockquote {
  line-height: 28px;
}
.entry-content blockquote p {
  margin-bottom: 28px;
}
.entry-content blockquote:first-child {
  width: 950px;
  margin-right: auto;
  margin-left: auto;
  padding-left: 350px;
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
  background: transparent url(http://f.st-hatena.com/images/fotolife/t/teamennoshita/20150114/20150114202059.png) 320px 0 repeat-y;
}
.entry-content blockquote:last-child {
  background: #fff;
  padding-top: 50px;
  margin: 90px 0 0;
  position: relative;
}
.entry-content blockquote:last-child p {
  width: 950px;
  margin-right: auto;
  margin-left: auto;
  padding-left: 350px;
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
  margin-top: 0;
}
.entry-content blockquote:last-child p:last-child {
  margin-bottom: 0;
  text-align: right;
}
.entry-content blockquote:last-child:before {
  content: "Reply";
  font-weight: bold;
  font-size: 14px;
  position: absolute;
  left: 50%;
  top: 10px;
  margin-left: -210px;
  font-style: italic;
  color: #ccc;
  text-transform: uppercase;
}
.entry-content blockquote:last-child:after {
  content: "";
  width: 110px;
  height: 90px;
  position: absolute;
  display: block;
  top: -52px;
  left: 50%;
  margin-left: -145px;
  background: transparent url(http://f.st-hatena.com/images/fotolife/t/teamennoshita/20150114/20150114200827.png) 0 0 no-repeat;
  -webkit-background-size: contain;
  background-size: contain;
}
.entry-content p a {
  color: #3c8c99;
  text-decoration: underline;
}
.entry-content p a:hover {
  color: #c60000;
}
.entry-content p a.send-message-link {
  display: block;
  padding: 8px 10px;
  background: #3c8c99;
  color: #fff;
  margin: 20px auto 0;
  text-align: center;
  text-decoration: none;
  width: 200px;
  font-weight: bold;
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}
.entry-content p a.send-message-link:hover {
  background: #c60000;
}
.entry-content p img {
  max-width: 100%;
}
.entry-footer {
  background: #fff;
  padding-top: 60px;
  padding-bottom: 100px;
}
.entry-footer-section,
.hatena-star-container {
  display: none;
}
.social-buttons {
  width: 950px;
  margin-right: auto;
  margin-left: auto;
  padding-left: 350px;
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}
.write-blog {
  width: 950px;
  margin-right: auto;
  margin-left: auto;
  padding-left: 350px;
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
  position: relative;
}
.write-blog a {
  display: block;
  position: absolute;
  right: 0;
  top: -50px;
  font-size: 12px;
  font-weight: bold;
  border: 1px solid #c3c3a8;
  padding: 3px 12px;
  -moz-border-radius: 3px;
  -webkit-border-radius: 3px;
  border-radius: 3px;
}
.pager {
  background: #fff;
  position: relative;
  height: 100px;
}
.pager:after {
  content: "";
  width: 950px;
  display: block;
  border-top: 1px solid #c3c3a8;
  margin: 0 auto;
}
.page-entries-year-month-day .pager:after,
.page-archive .pager:after,
.page-category-category_name .pager:after {
  display: none;
}
.pager .pager-next,
.pager .pager-prev {
  position: absolute;
  display: block;
  padding-top: 15px;
  font-size: 18px;
  font-weight: bold;
}
.pager .pager-next {
  left: 50%;
  width: 475px;
  text-align: right;
}
.pager .pager-next .pager-arrow {
  padding-left: 5px;
  right: 0;
}
.pager .pager-next .pager-arrow:before {
  content: "Next";
}
.pager .pager-prev {
  left: 50%;
  width: 475px;
  margin-left: -475px;
}
.pager .pager-prev .pager-arrow {
  padding-right: 5px;
}
.pager .pager-prev .pager-arrow:after {
  content: "Prev";
}
.pager .pager-arrow {
  display: block;
  position: absolute;
  top: 0px;
  margin-top: -10px;
  background: #fff;
  line-height: 1;
  color: #c60000;
}
.pager .pager-arrow:after,
.pager .pager-arrow:before {
  font-size: 12px;
  text-transform: uppercase;
  color: #c60000;
}
.entry-header-menu {
  position: absolute;
  margin-top: 50px;
  font-size: 12px;
}
.page-entry.category-èª­è€…â†”æ‘ä¸Šæ˜¥æ¨¹ .entry-content > p {
  width: 950px;
  margin-left: auto;
  margin-right: auto;
  padding-left: 350px;
  padding-bottom: 50px;
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}
.page-entry .entry-header,
.page-category-category_name .entry-header,
body.category-æ‘ä¸Šæ˜¥æ¨¹ã‚ˆã‚Š .entry-header,
body.category-ç®¡ç†äººã‚ˆã‚Š .entry-header,
body.category-ãƒã‚¦ã‚¹ãƒ«ãƒ¼ãƒ« .entry-header {
  background-color: transparent;
  background-position: 90% 82%;
  background-repeat: no-repeat;
  -webkit-background-size: auto 200px;
  background-size: auto 200px;
}
.page-category-category_name.category-æ‘ä¸Šã•ã‚“ã«ãŠã‚Šã„ã£ã¦è³ªå•ãƒ»ç›¸è«‡ã—ãŸã„ã“ã¨ .entry-header,
.page-entry.category-æ‘ä¸Šã•ã‚“ã«ãŠã‚Šã„ã£ã¦è³ªå•ãƒ»ç›¸è«‡ã—ãŸã„ã“ã¨ .entry-header {
  background-image: url(http://f.st-hatena.com/images/fotolife/t/teamennoshita/20150129/20150129195051.png);
}
.page-category-category_name.category-æ‘ä¸Šã•ã‚“ã«ãŠã‚Šã„ã£ã¦è³ªå•ãƒ»ç›¸è«‡ã—ãŸã„ã“ã¨ .categories a:last-child,
.page-entry.category-æ‘ä¸Šã•ã‚“ã«ãŠã‚Šã„ã£ã¦è³ªå•ãƒ»ç›¸è«‡ã—ãŸã„ã“ã¨ .categories a:last-child {
  display: none;
}
.page-category-category_name.category-æ‘ä¸Šã•ã‚“ã«ã¡ã‚‡ã£ã¨è©±ã—ãŸã„ã“ã¨ .entry-header,
.page-entry.category-æ‘ä¸Šã•ã‚“ã«ã¡ã‚‡ã£ã¨è©±ã—ãŸã„ã“ã¨ .entry-header {
  background-image: url(http://f.st-hatena.com/images/fotolife/t/teamennoshita/20150129/20150129195052.png);
}
.page-category-category_name.category-æ‘ä¸Šã•ã‚“ã«ã¡ã‚‡ã£ã¨è©±ã—ãŸã„ã“ã¨ .categories a:last-child,
.page-entry.category-æ‘ä¸Šã•ã‚“ã«ã¡ã‚‡ã£ã¨è©±ã—ãŸã„ã“ã¨ .categories a:last-child {
  display: none;
}
.page-category-category_name.category-ç§ã®å¥½ããªå ´æ‰€ãƒ»å«Œã„ãªå ´æ‰€ .entry-header,
.page-entry.category-ç§ã®å¥½ããªå ´æ‰€ãƒ»å«Œã„ãªå ´æ‰€ .entry-header {
  background-image: url(http://f.st-hatena.com/images/fotolife/t/teamennoshita/20150129/20150129195054.png);
}
.page-category-category_name.category-ç§ã®å¥½ããªå ´æ‰€ãƒ»å«Œã„ãªå ´æ‰€ .categories a:last-child,
.page-entry.category-ç§ã®å¥½ããªå ´æ‰€ãƒ»å«Œã„ãªå ´æ‰€ .categories a:last-child {
  display: none;
}
.page-category-category_name.category-ã€ŒçŒ«ã€ã‚ã‚‹ã„ã¯ã€Œãƒ¤ã‚¯ãƒ«ãƒˆãƒ»ã‚¹ãƒ¯ãƒ­ãƒ¼ã‚ºã€é–¢é€£ .entry-header,
.page-entry.category-ã€ŒçŒ«ã€ã‚ã‚‹ã„ã¯ã€Œãƒ¤ã‚¯ãƒ«ãƒˆãƒ»ã‚¹ãƒ¯ãƒ­ãƒ¼ã‚ºã€é–¢é€£ .entry-header {
  background-image: url(http://f.st-hatena.com/images/fotolife/t/teamennoshita/20150129/20150129195053.png);
}
.page-category-category_name.category-ã€ŒçŒ«ã€ã‚ã‚‹ã„ã¯ã€Œãƒ¤ã‚¯ãƒ«ãƒˆãƒ»ã‚¹ãƒ¯ãƒ­ãƒ¼ã‚ºã€é–¢é€£ .categories a:last-child,
.page-entry.category-ã€ŒçŒ«ã€ã‚ã‚‹ã„ã¯ã€Œãƒ¤ã‚¯ãƒ«ãƒˆãƒ»ã‚¹ãƒ¯ãƒ­ãƒ¼ã‚ºã€é–¢é€£ .categories a:last-child {
  display: none;
}
body.category-æ‘ä¸Šæ˜¥æ¨¹ã‚ˆã‚Š .entry-header {
  background-image: url(http://f.st-hatena.com/images/fotolife/t/teamennoshita/20150114/20150114200811.png);
}
body.category-ç®¡ç†äººã‚ˆã‚Š .entry-header {
  background-image: url(http://f.st-hatena.com/images/fotolife/t/teamennoshita/20150114/20150114200803.png);
}
body.category-ãƒã‚¦ã‚¹ãƒ«ãƒ¼ãƒ« .entry-header {
  background-image: url(http://f.st-hatena.com/images/fotolife/t/teamennoshita/20150114/20150114200815.png);
}
.page-archive .archive-entries:before {
  display: block;
  color: #1a1a1a;
  text-align: center;
  font-size: 22px;
  font-weight: bold;
  border-bottom: 1px solid #c3c3a8;
  padding: 148px 280px 0 0;
  margin-bottom: 10px;
  height: 291px;
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
  background-color: transparent;
  background-position: 90% 82%;
  background-repeat: no-repeat;
  -webkit-background-size: auto 200px;
  background-size: auto 200px;
}
.page-archive .archive-entries .archive-entry {
  display: inline;
}
.page-archive .bookmark-widget-counter img {
  display: none;
}
.page-archive.category-èª­è€…â†”æ‘ä¸Šæ˜¥æ¨¹ .archive-entries:before {
  content: "èª­è€…â†”æ‘ä¸Šæ˜¥æ¨¹";
  background: transparent url(http://f.st-hatena.com/images/fotolife/t/teamennoshita/20150114/20150114200819.png) 95% bottom no-repeat;
  -webkit-background-size: auto 200px;
  background-size: auto 200px;
}
.page-archive.category-æ‘ä¸Šã•ã‚“ã«ãŠã‚Šã„ã£ã¦è³ªå•ãƒ»ç›¸è«‡ã—ãŸã„ã“ã¨ .archive-entries:before {
  content: "æ‘ä¸Šã•ã‚“ã«ãŠã‚Šã„ã£ã¦è³ªå•ãƒ»ç›¸è«‡ã—ãŸã„ã“ã¨";
  background-image: url(http://f.st-hatena.com/images/fotolife/t/teamennoshita/20150129/20150129195051.png);
}
.page-archive.category-æ‘ä¸Šã•ã‚“ã«ã¡ã‚‡ã£ã¨è©±ã—ãŸã„ã“ã¨ .archive-entries:before {
  content: "æ‘ä¸Šã•ã‚“ã«ã¡ã‚‡ã£ã¨è©±ã—ãŸã„ã“ã¨";
  background-image: url(http://f.st-hatena.com/images/fotolife/t/teamennoshita/20150129/20150129195052.png);
}
.page-archive.category-ç§ã®å¥½ããªå ´æ‰€ãƒ»å«Œã„ãªå ´æ‰€ .archive-entries:before {
  content: "ç§ã®å¥½ããªå ´æ‰€ãƒ»å«Œã„ãªå ´æ‰€";
  background-image: url(http://f.st-hatena.com/images/fotolife/t/teamennoshita/20150129/20150129195054.png);
}
.page-archive.category-ã€ŒçŒ«ã€ã‚ã‚‹ã„ã¯ã€Œãƒ¤ã‚¯ãƒ«ãƒˆãƒ»ã‚¹ãƒ¯ãƒ­ãƒ¼ã‚ºã€é–¢é€£ .archive-entries:before {
  content: "ã€ŒçŒ«ã€ã‚ã‚‹ã„ã¯ã€Œãƒ¤ã‚¯ãƒ«ãƒˆãƒ»ã‚¹ãƒ¯ãƒ­ãƒ¼ã‚ºã€é–¢é€£";
  background-image: url(http://f.st-hatena.com/images/fotolife/t/teamennoshita/20150129/20150129195053.png);
}
.page-archive.category-æ‘ä¸Šæ˜¥æ¨¹ã‚ˆã‚Š .archive-entries:before {
  content: "æ‘ä¸Šæ˜¥æ¨¹ã‚ˆã‚Š";
  background-image: url(http://f.st-hatena.com/images/fotolife/t/teamennoshita/20150114/20150114200811.png);
  padding-right: 130px;
}
.page-archive.category-ç®¡ç†äººã‚ˆã‚Š .archive-entries:before {
  content: "ç®¡ç†äººã‚ˆã‚Š";
  background-image: url(http://f.st-hatena.com/images/fotolife/t/teamennoshita/20150114/20150114200803.png);
  padding-right: 130px;
}
body.category-æ‘ä¸Šæ˜¥æ¨¹ã‚ˆã‚Š .entry-header .date a:before,
body.category-ç®¡ç†äººã‚ˆã‚Š .entry-header .date a:before,
body.category-ãƒã‚¦ã‚¹ãƒ«ãƒ¼ãƒ« .entry-header .date a:before {
  display: none;
}
body.category-æ‘ä¸Šæ˜¥æ¨¹ã‚ˆã‚Š .entry-header .date a time,
body.category-ç®¡ç†äººã‚ˆã‚Š .entry-header .date a time,
body.category-ãƒã‚¦ã‚¹ãƒ«ãƒ¼ãƒ« .entry-header .date a time {
  padding-left: 0;
}
body.category-æ‘ä¸Šæ˜¥æ¨¹ã‚ˆã‚Š .entry-content,
body.category-ç®¡ç†äººã‚ˆã‚Š .entry-content,
body.category-ãƒã‚¦ã‚¹ãƒ«ãƒ¼ãƒ« .entry-content {
  line-height: 28px;
  width: 950px;
  margin-right: auto;
  margin-left: auto;
  padding-left: 350px;
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}
body.category-æ‘ä¸Šæ˜¥æ¨¹ã‚ˆã‚Š .entry-content p,
body.category-ç®¡ç†äººã‚ˆã‚Š .entry-content p,
body.category-ãƒã‚¦ã‚¹ãƒ«ãƒ¼ãƒ« .entry-content p {
  margin-bottom: 28px;
}
body.category-æ‘ä¸Šæ˜¥æ¨¹ã‚ˆã‚Š .entry-footer,
body.category-ç®¡ç†äººã‚ˆã‚Š .entry-footer,
body.category-ãƒã‚¦ã‚¹ãƒ«ãƒ¼ãƒ« .entry-footer {
  background: #f4f4d4;
  padding: 50px 0 80px;
}
body.category-æ‘ä¸Šæ˜¥æ¨¹ã‚ˆã‚Š blockquote:first-child,
body.category-ç®¡ç†äººã‚ˆã‚Š blockquote:first-child,
body.category-ãƒã‚¦ã‚¹ãƒ«ãƒ¼ãƒ« blockquote:first-child {
  width: auto;
  padding-left: 30px;
  margin-left: -30px;
  background-position: 0 0;
}
body.category-æ‘ä¸Šæ˜¥æ¨¹ã‚ˆã‚Š blockquote:last-child,
body.category-ç®¡ç†äººã‚ˆã‚Š blockquote:last-child,
body.category-ãƒã‚¦ã‚¹ãƒ«ãƒ¼ãƒ« blockquote:last-child {
  background: transparent;
}
body.category-æ‘ä¸Šæ˜¥æ¨¹ã‚ˆã‚Š blockquote:last-child p,
body.category-ç®¡ç†äººã‚ˆã‚Š blockquote:last-child p,
body.category-ãƒã‚¦ã‚¹ãƒ«ãƒ¼ãƒ« blockquote:last-child p {
  width: auto;
  padding-left: 0;
}
body.category-æ‘ä¸Šæ˜¥æ¨¹ã‚ˆã‚Š blockquote:last-child:before,
body.category-ç®¡ç†äººã‚ˆã‚Š blockquote:last-child:before,
body.category-ãƒã‚¦ã‚¹ãƒ«ãƒ¼ãƒ« blockquote:last-child:before {
  left: auto;
  margin-left: -70px;
}
body.category-æ‘ä¸Šæ˜¥æ¨¹ã‚ˆã‚Š blockquote:last-child:after,
body.category-ç®¡ç†äººã‚ˆã‚Š blockquote:last-child:after,
body.category-ãƒã‚¦ã‚¹ãƒ«ãƒ¼ãƒ« blockquote:last-child:after {
  left: auto;
  margin-left: -15px;
}
body.category-ãƒã‚¦ã‚¹ãƒ«ãƒ¼ãƒ« .pager {
  display: none;
}
.breadcrumb {
  display: none;
}
.page-entry.category-æ‘ä¸Šæ˜¥æ¨¹ã‚ˆã‚Š .pager,
.page-entry.category-ç®¡ç†äººã‚ˆã‚Š .pager {
  padding-top: 50px;
}
.page-entry.category-ç®¡ç†äººã‚ˆã‚Š .entry-content > p,
.page-entry.category-ãƒã‚¦ã‚¹ãƒ«ãƒ¼ãƒ« .entry-content > p {
  padding-left: 0;
}
.page-entries-year-month-day .entry-header {
  padding-top: 200px;
}
.page-entries-year-month-day .entry-header .categories {
  text-align: right;
  top: 140px;
  font-size: 16px;
}
.page-entries-year-month-day .entry-header .categories a:nth-child(2) {
  display: none;
}
.page-entries-year-month-day .entry-content > p {
  width: 950px;
  margin-left: auto;
  margin-right: auto;
  padding-left: 350px;
  padding-bottom: 50px;
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}
.page-entries-year-month-day .entry-content blockquote:last-child {
  background: transparent;
}
.page-entries-year-month-day .entry-footer {
  background: transparent;
}
.page-category-category_name .entry:nth-child(n+2) .entry-header {
  background: none;
  padding-top: 60px;
}
.page-category-category_name .entry:nth-child(n+2) .entry-header .categories {
  display: none;
}
.page-category-category_name .entry-footer,
.page-category-category_name .entry-content blockquote:last-child {
  background: transparent;
}
.page-about .entry {
  padding-top: 60px;
}
.page-about .entry-content {
  width: 950px;
  margin: 0 auto;
  padding-bottom: 50px;
}
.page-about .entry-content dl {
  margin: 0;
  padding: 0;
}
.page-about .entry-content dt {
  border-top: 1px solid #c3c3a8;
  font-size: 12px;
  color: #878778;
}
.page-about .entry-content dd {
  margin: .5em 0 1.5em;
}
@media (max-width: 960px) {
  nav ul {
    width: 100%;
    font-size: 14px;
  }
  h1#title {
    margin-left: 0;
    left: 20px;
  }
  .pagefooter {
    width: 100%;
    padding: 20px;
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
  }
  .pagefooter .badge {
    margin-top: 15px;
  }
  .pagefooter .badge .hatenablog img {
    height: 25px;
  }
  .pagefooter .badge .shinchosha {
    margin-top: 3px;
  }
  .pagefooter .badge .shinchosha img {
    height: 17px;
  }
  .page-index #wrapper {
    width: 100%;
    padding-bottom: 50px;
  }
  .page-index #main {
    padding: 0 20px;
  }
  .page-index .category-ç®¡ç†äººã‚ˆã‚Š {
    margin-top: 40px;
  }
  .page-index .category-ç®¡ç†äººã‚ˆã‚Š .hatena-module-title {
    font-size: 12px;
    font-weight: bold;
    padding: 10px 0 0;
  }
  .page-index .category-ç®¡ç†äººã‚ˆã‚Š .hatena-module-title a {
    color: #878778;
  }
  .intro p {
    font-size: 16px;
    line-height: 1.6;
  }
  .intro a {
    padding: 18px 50px;
  }
  .message-title {
    font-size: 14px;
  }
  .message-title:before {
    width: 35px;
    height: 35px;
  }
  .message {
    column-count: 1;
    -moz-column-count: 1;
    -webkit-column-count: 1;
    -o-column-count: 1;
    -ms-column-count: 1;
    font-size: 14px;
  }
  .message p {
    line-height: 1.6;
  }
  .top-recent-list-title {
    padding: 0 0 0 138px;
    line-height: 45px;
    text-align: left;
    font-size: 16px;
    border-bottom: 2px solid #1a1a1a;
    margin-bottom: -10px;
  }
  .top-recent-list-title:before {
    width: 128px;
    height: 60px;
    margin-top: -6px;
    left: 22px;
  }
  .urllist-title-link:before,
  .archive-entries .entry-title-link:before {
    display: none;
  }
  .hatena-module-recent-entries time,
  .archive-entry time {
    display: block;
  }
  .hatena-module-recent-entries time {
    margin: 6px 0 -3px;
  }
  .archive-entry time {
    margin: 6px 0 -10px;
  }
  .hatena-module-recent-entries:after {
    display: none;
  }
  .hatena-module-recent-entries .hatena-module-title {
    display: block;
    background: rgba(0, 0, 0, 0.1);
    margin-top: 30px;
  }
  .hatena-module-recent-entries .recent-entries-item {
    margin-right: 0 !important;
  }
  .hatena-module-recent-entries.category-æ‘ä¸Šæ˜¥æ¨¹ã‚ˆã‚Š:before {
    width: 100px;
    height: 75px;
    margin-top: -19px;
    left: 22px;
  }
  .to-message-list {
    padding-top: 10px;
    padding-left: 0;
    padding-bottom: 60px;
    font-size: 14px;
  }
  .to-message-list:before {
    color: #1a1a1a;
  }
  .to-message-list a {
    color: #1a1a1a;
  }
  .to-message-list a:hover {
    color: #c60000;
  }
  .page-index .category-æ‘ä¸Šæ˜¥æ¨¹ã‚ˆã‚Š .hatena-module-title {
    padding: 0;
    line-height: 45px;
    text-align: left;
    font-size: 16px;
    border-bottom: 2px solid #1a1a1a;
    margin-bottom: -10px;
    text-indent: 113px;
  }
  .archive-entries {
    width: 100%;
    padding-left: 20px;
    padding-right: 20px;
    padding-bottom: 40px;
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
  }
  .page-archive.category-èª­è€…â†”æ‘ä¸Šæ˜¥æ¨¹ .archive-entries:before {
    font-size: 18px;
    padding: 75px 0 0 0;
    height: 241px;
    background-position: center bottom;
    -webkit-background-size: auto 120px;
    background-size: auto 120px;
  }
  .page-archive.category-æ‘ä¸Šã•ã‚“ã«ãŠã‚Šã„ã£ã¦è³ªå•ãƒ»ç›¸è«‡ã—ãŸã„ã“ã¨ .archive-entries:before,
  .page-archive.category-æ‘ä¸Šã•ã‚“ã«ã¡ã‚‡ã£ã¨è©±ã—ãŸã„ã“ã¨ .archive-entries:before,
  .page-archive.category-ç§ã®å¥½ããªå ´æ‰€ãƒ»å«Œã„ãªå ´æ‰€ .archive-entries:before,
  .page-archive.category-ã€ŒçŒ«ã€ã‚ã‚‹ã„ã¯ã€Œãƒ¤ã‚¯ãƒ«ãƒˆãƒ»ã‚¹ãƒ¯ãƒ­ãƒ¼ã‚ºã€é–¢é€£ .archive-entries:before,
  .page-archive.category-æ‘ä¸Šæ˜¥æ¨¹ã‚ˆã‚Š .archive-entries:before,
  .page-archive.category-ç®¡ç†äººã‚ˆã‚Š .archive-entries:before,
  .page-archive.category-ãƒã‚¦ã‚¹ãƒ«ãƒ¼ãƒ« .archive-entries:before {
    font-size: 18px;
    padding: 80px 0 0 0;
    height: 256px;
    background-position: center 117px;
    -webkit-background-size: auto 120px;
    background-size: auto 120px;
  }
  .page-archive.category-æ‘ä¸Šæ˜¥æ¨¹ã‚ˆã‚Š .archive-entries:before,
  .page-archive.category-ç®¡ç†äººã‚ˆã‚Š .archive-entries:before {
    padding-right: 0;
  }
  .entry-header {
    width: 100%;
    padding-top: 200px;
    margin-top: 55px;
  }
  .page-entry .entry-header,
  .page-category-category_name .entry-header,
  body.category-æ‘ä¸Šæ˜¥æ¨¹ã‚ˆã‚Š .entry-header,
  body.category-ç®¡ç†äººã‚ˆã‚Š .entry-header,
  body.category-ãƒã‚¦ã‚¹ãƒ«ãƒ¼ãƒ« .entry-header {
    background-position: center 62px;
    -webkit-background-size: auto 120px;
    background-size: auto 120px;
  }
  .page-entries-year-month-day .entry-header {
    padding-top: 145px;
  }
  .page-entries-year-month-day .entry-header .categories {
    top: 95px;
    right: 20px;
  }
  .entry-header .categories {
    padding-right: 0;
    top: 25px;
    font-size: 18px;
  }
  .entry-header .date {
    margin-right: 20px;
  }
  .entry-header .date a {
    font-size: 11px;
    margin-top: -11px;
  }
  .entry-header .date a:before {
    width: 40px;
    height: 40px;
    margin-top: -11px;
    padding-left: 15px;
  }
  .entry-header .date a time {
    padding-left: 55px;
  }
  body.category-æ‘ä¸Šæ˜¥æ¨¹ã‚ˆã‚Š .entry-header .date,
  body.category-ç®¡ç†äººã‚ˆã‚Š .entry-header .date,
  body.category-ãƒã‚¦ã‚¹ãƒ«ãƒ¼ãƒ« .entry-header .date {
    margin-left: 20px;
  }
  .entry-header .entry-title {
    position: static;
    width: 100%;
    text-align: left;
    padding-left: 100px;
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
  }
  .entry-content {
    font-size: 14px;
    padding-top: 0;
  }
  .entry-content blockquote {
    line-height: 24px;
  }
  .entry-content blockquote p {
    margin-bottom: 24px;
  }
  .entry-content blockquote:first-child {
    width: 100%;
    padding-left: 100px;
    padding-right: 20px;
    background-position: 70px 0;
    background-image: url(http://f.st-hatena.com/images/fotolife/t/teamennoshita/20150114/20150114200845.png);
  }
  .entry-content blockquote:last-child p {
    width: 100%;
    padding-left: 100px;
    padding-right: 20px;
  }
  .entry-content blockquote:last-child:before {
    display: none;
  }
  .entry-content blockquote:last-child:after {
    left: 70px;
    margin-left: 0;
  }
  .page-entries-year-month-day .entry-content > p {
    width: 100%;
    padding-left: 100px;
    padding-right: 20px;
  }
  .page-entry.category-èª­è€…â†”æ‘ä¸Šæ˜¥æ¨¹ .entry-content > p,
  .page-entry.category-ç®¡ç†äººã‚ˆã‚Š .entry-content > p,
  .page-entry.category-ãƒã‚¦ã‚¹ãƒ«ãƒ¼ãƒ« .entry-content > p {
    width: 100%;
    padding-left: 100px;
    padding-right: 20px;
  }
  .entry-footer {
    padding-top: 50px;
    padding-bottom: 50px;
    overflow: hidden;
  }
  .social-buttons {
    width: 100%;
    padding-left: 100px;
  }
  .write-blog {
    width: 100%;
    padding: 0;
  }
  .write-blog a {
    margin-right: 20px;
  }
  .pager:after {
    width: 100%;
    padding: 0;
  }
  .pager .pager-prev {
    left: 0;
    margin-left: 0;
    padding-right: 15px;
    border-left: 20px solid #fff;
  }
  .pager .pager-next {
    padding-left: 15px;
    border-right: 20px solid #fff;
  }
  .pager .pager-prev,
  .pager .pager-next {
    width: 50%;
    font-size: 14px;
    padding-top: 10px;
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
  }
  .pager .pager-prev .pager-arrow,
  .pager .pager-next .pager-arrow,
  .pager .pager-prev .pager-arrow:after,
  .pager .pager-next .pager-arrow:after {
    font-size: 11px;
  }
  .pager .pager-prev .pager-arrow,
  .pager .pager-next .pager-arrow {
    margin-top: -6px;
  }
  body.category-æ‘ä¸Šæ˜¥æ¨¹ã‚ˆã‚Š .entry-content,
  body.category-ç®¡ç†äººã‚ˆã‚Š .entry-content,
  body.category-ãƒã‚¦ã‚¹ãƒ«ãƒ¼ãƒ« .entry-content {
    width: 100%;
    padding-left: 100px;
    padding-right: 20px;
    line-height: 24px;
  }
  .page-about .entry {
    padding-top: 90px;
  }
  .page-about .entry-content {
    width: 100%;
    padding-left: 20px;
    padding-right: 20px;
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
  }
}
@media (max-width: 760px) {
  h1#title {
    position: relative;
    left: 0;
  }
  h1#title a {
    margin: 0 auto;
    width: 150px;
    height: 23px;
    padding-top: 23px;
  }
  nav {
    position: relative;
  }
  nav ul {
    width: 100%;
    text-align: center;
    font-size: 12px;
    padding: 5px 0;
  }
  nav li:after {
    height: 4px;
    width: 4px;
    -moz-border-radius: 3px;
    -webkit-border-radius: 3px;
    border-radius: 3px;
  }
  nav li a {
    padding: 3px 5px;
  }
  #header-modules {
    height: 510px;
    -webkit-background-size: contain;
    background-size: contain;
  }
  #header-modules h2 {
    padding-top: 30px;
  }
  #header-modules h2 img {
    max-width: 90%;
  }
  #header-modules ul {
    margin-top: 5px;
    font-size: 14px;
  }
  #header-modules ul.top-social-buttons {
    top: 548px;
  }
  .page-archive.category-èª­è€…â†”æ‘ä¸Šæ˜¥æ¨¹ .archive-entries:before {
    padding-top: 25px;
    height: 201px;
  }
  .page-archive.category-æ‘ä¸Šã•ã‚“ã«ãŠã‚Šã„ã£ã¦è³ªå•ãƒ»ç›¸è«‡ã—ãŸã„ã“ã¨ .archive-entries:before,
  .page-archive.category-æ‘ä¸Šã•ã‚“ã«ã¡ã‚‡ã£ã¨è©±ã—ãŸã„ã“ã¨ .archive-entries:before,
  .page-archive.category-ç§ã®å¥½ããªå ´æ‰€ãƒ»å«Œã„ãªå ´æ‰€ .archive-entries:before,
  .page-archive.category-ã€ŒçŒ«ã€ã‚ã‚‹ã„ã¯ã€Œãƒ¤ã‚¯ãƒ«ãƒˆãƒ»ã‚¹ãƒ¯ãƒ­ãƒ¼ã‚ºã€é–¢é€£ .archive-entries:before,
  .page-archive.category-æ‘ä¸Šæ˜¥æ¨¹ã‚ˆã‚Š .archive-entries:before,
  .page-archive.category-ç®¡ç†äººã‚ˆã‚Š .archive-entries:before,
  .page-archive.category-ãƒã‚¦ã‚¹ãƒ«ãƒ¼ãƒ« .archive-entries:before {
    padding-top: 28px;
    height: 201px;
    background-position-y: 62px;
    white-space: normal;
    line-height: 1.4;
  }
  .entry-header {
    margin-top: 0;
  }
  .entry-header .categories {
    line-height: 1.4;
  }
  .write-blog {
    margin: 20px 0 0 100px;
  }
  .write-blog a {
    position: static;
    margin-right: 0;
    display: inline-block;
  }
  .page-about .entry {
    padding-top: 30px;
  }
}
@media (max-width: 620px) {
  #header-modules {
    height: 410px;
  }
  #header-modules ul.top-social-buttons {
    top: 448px;
  }
  .urllist-entry-body,
  .archive-entries .entry-description {
    display: none;
  }
  .archive-entries {
    text-overflow: clip;
    white-space: nowrap;
    overflow: hidden;
  }
}
@media (max-width: 450px) {
  nav ul {
    font-size: 11px;
  }
  .nav-top {
    display: none;
  }
  #header-modules {
    height: 310px;
  }
  #header-modules ul {
    margin-top: 5px;
    font-size: 14px;
  }
  #header-modules ul.top-social-buttons {
    top: 348px;
  }
  #header-modules ul.top-social-buttons li.s-hb,
  #header-modules ul.top-social-buttons li.s-fb,
  #header-modules ul.top-social-buttons li.s-tw,
  #header-modules ul.top-social-buttons li.s-gp {
    display: none;
  }
  #header-modules ul.top-social-buttons li.s-hb.mb,
  #header-modules ul.top-social-buttons li.s-fb.mb,
  #header-modules ul.top-social-buttons li.s-tw.mb,
  #header-modules ul.top-social-buttons li.s-gp.mb {
    display: inline-block;
    margin-right: 5px;
  }
  #header-modules ul.top-social-buttons li.s-fb.mb {
    width: 60px;
  }
  #header-modules ul.top-social-buttons li.s-tw.mb {
    width: auto;
  }
  .intro {
    padding-top: 100px;
  }
  .entry-header .entry-title {
    padding-left: 50px;
  }
  .entry-content blockquote:first-child {
    padding-left: 50px;
    background-position: 20px 0;
  }
  .entry-content blockquote:last-child p {
    padding-left: 50px;
  }
  .entry-content blockquote:last-child:before {
    display: none;
  }
  .entry-content blockquote:last-child:after {
    left: 20px;
    margin-left: 0;
  }
  .social-buttons {
    padding-left: 20px;
  }
  .write-blog {
    display: none;
  }
  .pager {
    zoom: 1;
  }
  .pager:after {
    content: "";
    display: block;
    clear: both;
    height: 0;
  }
  .pager .pager-prev,
  .pager .pager-next {
    font-size: 12px;
  }
  .page-archive.category-æ‘ä¸Šã•ã‚“ã«ãŠã‚Šã„ã£ã¦è³ªå•ãƒ»ç›¸è«‡ã—ãŸã„ã“ã¨ .archive-entries:before,
  .page-archive.category-ã€ŒçŒ«ã€ã‚ã‚‹ã„ã¯ã€Œãƒ¤ã‚¯ãƒ«ãƒˆãƒ»ã‚¹ãƒ¯ãƒ­ãƒ¼ã‚ºã€é–¢é€£ .archive-entries:before {
    height: 226px;
    background-position-y: 87px;
  }
  .page-entry.category-æ‘ä¸Šã•ã‚“ã«ãŠã‚Šã„ã£ã¦è³ªå•ãƒ»ç›¸è«‡ã—ãŸã„ã“ã¨ .entry-header,
  .page-category-category_name.category-æ‘ä¸Šã•ã‚“ã«ãŠã‚Šã„ã£ã¦è³ªå•ãƒ»ç›¸è«‡ã—ãŸã„ã“ã¨ .entry-header,
  .page-entry.category-ã€ŒçŒ«ã€ã‚ã‚‹ã„ã¯ã€Œãƒ¤ã‚¯ãƒ«ãƒˆãƒ»ã‚¹ãƒ¯ãƒ­ãƒ¼ã‚ºã€é–¢é€£ .entry-header,
  .page-category-category_name.category-ã€ŒçŒ«ã€ã‚ã‚‹ã„ã¯ã€Œãƒ¤ã‚¯ãƒ«ãƒˆãƒ»ã‚¹ãƒ¯ãƒ­ãƒ¼ã‚ºã€é–¢é€£ .entry-header {
    padding-top: 225px;
    background-position-y: 87px;
  }
  body.category-æ‘ä¸Šæ˜¥æ¨¹ã‚ˆã‚Š .entry-content,
  body.category-ç®¡ç†äººã‚ˆã‚Š .entry-content,
  body.category-ãƒã‚¦ã‚¹ãƒ«ãƒ¼ãƒ« .entry-content {
    padding-left: 50px;
  }
  .page-entries-year-month-day .entry-content > p {
    padding-left: 50px;
    padding-right: 20px;
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
  }
  .page-entries-year-month-day .entry-header .categories {
    font-size: 12px;
  }
  .page-entry.category-èª­è€…â†”æ‘ä¸Šæ˜¥æ¨¹ .entry-content > p,
  .page-entry.category-ç®¡ç†äººã‚ˆã‚Š .entry-content > p {
    padding-left: 50px;
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
  }
  .page-entry.category-ãƒã‚¦ã‚¹ãƒ«ãƒ¼ãƒ« .entry-content > p {
    padding-left: 0;
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
  }
}
@media (-webkit-min-device-pixel-ratio: 2) {
  .top-recent-list-title:before {
    background-image: url(http://f.st-hatena.com/images/fotolife/t/teamennoshita/20150114/20150114200818.png);
  }
  .hatena-module-recent-entries.category-æ‘ä¸Šæ˜¥æ¨¹ã‚ˆã‚Š:before {
    background-image: url(http://f.st-hatena.com/images/fotolife/t/teamennoshita/20150114/20150114200810.png);
  }
  .hatena-module-recent-entries.category-æ‘ä¸Šã•ã‚“ã«ãŠã‚Šã„ã£ã¦è³ªå•ãƒ»ç›¸è«‡ã—ãŸã„ã“ã¨:after {
    background-image: url(http://f.st-hatena.com/images/fotolife/t/teamennoshita/20150114/20150114200835.png);
  }
  .hatena-module-recent-entries.category-æ‘ä¸Šã•ã‚“ã«ã¡ã‚‡ã£ã¨è©±ã—ãŸã„ã“ã¨:after {
    background-image: url(http://f.st-hatena.com/images/fotolife/t/teamennoshita/20150114/20150114203844.png);
  }
  .hatena-module-recent-entries.category-ç§ã®å¥½ããªå ´æ‰€ãƒ»å«Œã„ãªå ´æ‰€:after {
    background-image: url(http://f.st-hatena.com/images/fotolife/t/teamennoshita/20150114/20150114200841.png);
  }
  .hatena-module-recent-entries.category-ã€ŒçŒ«ã€ã‚ã‚‹ã„ã¯ã€Œãƒ¤ã‚¯ãƒ«ãƒˆãƒ»ã‚¹ãƒ¯ãƒ­ãƒ¼ã‚ºã€é–¢é€£:after {
    background-image: url(http://f.st-hatena.com/images/fotolife/t/teamennoshita/20150114/20150114200838.png);
  }
  .message-title:before {
    background-image: url(http://f.st-hatena.com/images/fotolife/t/teamennoshita/20150114/20150114200826.png);
  }
  .page-category-category_name.category-æ‘ä¸Šã•ã‚“ã«ãŠã‚Šã„ã£ã¦è³ªå•ãƒ»ç›¸è«‡ã—ãŸã„ã“ã¨ .entry-header,
  .page-entry.category-æ‘ä¸Šã•ã‚“ã«ãŠã‚Šã„ã£ã¦è³ªå•ãƒ»ç›¸è«‡ã—ãŸã„ã“ã¨ .entry-header {
    background-image: url(http://f.st-hatena.com/images/fotolife/t/teamennoshita/20150129/20150129200052.png);
  }
  .page-category-category_name.category-æ‘ä¸Šã•ã‚“ã«ã¡ã‚‡ã£ã¨è©±ã—ãŸã„ã“ã¨ .entry-header,
  .page-entry.category-æ‘ä¸Šã•ã‚“ã«ã¡ã‚‡ã£ã¨è©±ã—ãŸã„ã“ã¨ .entry-header {
    background-image: url(http://f.st-hatena.com/images/fotolife/t/teamennoshita/20150129/20150129200053.png);
  }
  .page-category-category_name.category-ç§ã®å¥½ããªå ´æ‰€ãƒ»å«Œã„ãªå ´æ‰€ .entry-header,
  .page-entry.category-ç§ã®å¥½ããªå ´æ‰€ãƒ»å«Œã„ãªå ´æ‰€ .entry-header {
    background-image: url(http://f.st-hatena.com/images/fotolife/t/teamennoshita/20150129/20150129200055.png);
  }
  .page-category-category_name.category-ã€ŒçŒ«ã€ã‚ã‚‹ã„ã¯ã€Œãƒ¤ã‚¯ãƒ«ãƒˆãƒ»ã‚¹ãƒ¯ãƒ­ãƒ¼ã‚ºã€é–¢é€£ .entry-header,
  .page-entry.category-ã€ŒçŒ«ã€ã‚ã‚‹ã„ã¯ã€Œãƒ¤ã‚¯ãƒ«ãƒˆãƒ»ã‚¹ãƒ¯ãƒ­ãƒ¼ã‚ºã€é–¢é€£ .entry-header {
    background-image: url(http://f.st-hatena.com/images/fotolife/t/teamennoshita/20150129/20150129200054.png);
  }
  body.category-æ‘ä¸Šæ˜¥æ¨¹ã‚ˆã‚Š .entry-header {
    background-image: url(http://f.st-hatena.com/images/fotolife/t/teamennoshita/20150114/20150114200812.png);
  }
  body.category-ç®¡ç†äººã‚ˆã‚Š .entry-header {
    background-image: url(http://f.st-hatena.com/images/fotolife/t/teamennoshita/20150114/20150114200804.png);
  }
  body.category-ãƒã‚¦ã‚¹ãƒ«ãƒ¼ãƒ« .entry-header {
    background-image: url(http://f.st-hatena.com/images/fotolife/t/teamennoshita/20150114/20150114200816.png);
  }
  .page-archive.category-èª­è€…â†”æ‘ä¸Šæ˜¥æ¨¹ .archive-entries:before {
    background-image: url(http://f.st-hatena.com/images/fotolife/t/teamennoshita/20150114/20150114204608.png);
  }
  .page-archive.category-æ‘ä¸Šã•ã‚“ã«ãŠã‚Šã„ã£ã¦è³ªå•ãƒ»ç›¸è«‡ã—ãŸã„ã“ã¨ .archive-entries:before {
    background-image: url(http://f.st-hatena.com/images/fotolife/t/teamennoshita/20150129/20150129200052.png);
  }
  .page-archive.category-æ‘ä¸Šã•ã‚“ã«ã¡ã‚‡ã£ã¨è©±ã—ãŸã„ã“ã¨ .archive-entries:before {
    background-image: url(http://f.st-hatena.com/images/fotolife/t/teamennoshita/20150129/20150129200053.png);
  }
  .page-archive.category-ç§ã®å¥½ããªå ´æ‰€ãƒ»å«Œã„ãªå ´æ‰€ .archive-entries:before {
    background-image: url(http://f.st-hatena.com/images/fotolife/t/teamennoshita/20150129/20150129200055.png);
  }
  .page-archive.category-ã€ŒçŒ«ã€ã‚ã‚‹ã„ã¯ã€Œãƒ¤ã‚¯ãƒ«ãƒˆãƒ»ã‚¹ãƒ¯ãƒ­ãƒ¼ã‚ºã€é–¢é€£ .archive-entries:before {
    background-image: url(http://f.st-hatena.com/images/fotolife/t/teamennoshita/20150129/20150129200054.png);
  }
  .page-archive.category-æ‘ä¸Šæ˜¥æ¨¹ã‚ˆã‚Š .archive-entries:before {
    background-image: url(http://f.st-hatena.com/images/fotolife/t/teamennoshita/20150114/20150114200812.png);
  }
  .page-archive.category-ç®¡ç†äººã‚ˆã‚Š .archive-entries:before {
    background-image: url(http://f.st-hatena.com/images/fotolife/t/teamennoshita/20150114/20150114200804.png);
  }
  .entry-header .date a:before {
    background-image: url(http://f.st-hatena.com/images/fotolife/t/teamennoshita/20150114/20150114200826.png);
  }
  .entry-content blockquote:last-child:after {
    background-image: url(http://f.st-hatena.com/images/fotolife/t/teamennoshita/20150114/20150114200828.png);
  }
}
Ô	¬­®¯_jhttps://blog.st-hatena.com/images/theme/hatena-star-quote-box.png?version=f95a219773244f14c2c322979e39f67bOtbplist00ÔjkX$versionX$objectsY$archiverT$top † ¯ #)*0123MNOPQRSTUVWXYZ[\]^_`adeU$nullİ	
 !"R$6S$10R$2R$7R$3S$11R$8V$classR$4R$9R$0R$5R$1€	€€€€€€€Ó$%&'(WNS.base[NS.relative€ €€_jhttps://blog.st-hatena.com/images/theme/hatena-star-quote-box.png?version=f95a219773244f14c2c322979e39f67bÒ+,-.Z$classnameX$classesUNSURL¢-/XNSObject#AºôÒ:´Òå ÈÓ456ALWNS.keysZNS.objectsª789:;<=>?@€	€
€€€€€€€€ªBDEFGHIJK€€€€€€€€€€€VServer\Content-TypeWExpires]Last-ModifiedTEtag]Accept-RangesTDate^Content-Length]Cache-ControlZConnectionUnginxYimage/png_Thu, 31 Dec 2037 23:55:55 GMT_Thu, 01 Jan 1970 00:00:00 GMT^"55435a82-533"Ubytes_Sat, 02 May 2015 09:36:58 GMTT1331_max-age=315360000Zkeep-aliveÒ+,bc\NSDictionary¢b/3Ò+,fg_NSHTTPURLResponse£hi/_NSHTTPURLResponse]NSURLResponse_NSKeyedArchiverÑlm_WebResourceResponse€    # - 2 7 Z ` { ~ ‚ … ˆ ‹  ’ ™ œ Ÿ ¢ ¥ ¨ ª ¬ ® ° ² ³ µ · ¹ » ½ ¿ Á È Ğ Ü Ş à âOT_hnqzƒ…‡–¡¬®°²´¶¸º¼¾ÀËÍÏÑÓÕ×ÙÛİßáèõı#2@KQ[{›ª°ĞÕéôù	%)=K]`v             n              xO3‰PNG

   IHDR          3£ºP   tEXtSoftware Adobe ImageReadyqÉe<  fiTXtXML:com.adobe.xmp     <?xpacket begin="ï»¿" id="W5M0MpCehiHzreSzNTczkc9d"?> <x:xmpmeta xmlns:x="adobe:ns:meta/" x:xmptk="Adobe XMP Core 5.0-c060 61.134777, 2010/02/12-17:32:00        "> <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"> <rdf:Description rdf:about="" xmlns:xmpMM="http://ns.adobe.com/xap/1.0/mm/" xmlns:stRef="http://ns.adobe.com/xap/1.0/sType/ResourceRef#" xmlns:xmp="http://ns.adobe.com/xap/1.0/" xmpMM:OriginalDocumentID="xmp.did:06801174072068118A6DC74538DFFD77" xmpMM:DocumentID="xmp.did:99A91D95EFF911E1A665E0BF6250D19F" xmpMM:InstanceID="xmp.iid:99A91D94EFF911E1A665E0BF6250D19F" xmp:CreatorTool="Adobe Photoshop CS5 Macintosh"> <xmpMM:DerivedFrom stRef:instanceID="xmp.iid:06801174072068118A6DC74538DFFD77" stRef:documentID="xmp.did:06801174072068118A6DC74538DFFD77"/> </rdf:Description> </rdf:RDF> </x:xmpmeta> <?xpacket end="r"?>9§n   ŠPLTEäääÿÿÿËËËËËËËËËËËËËËËËËËËËËËËËËËËËËËËËËËËËËËËÌÌÌÍÍÍÚÚÚäääåååæææçççèèèéééêêêëëëìììíííîîîïïïğğğñññòòòóóóôôôõõõööö÷÷÷øøøùùùúúúûûûüüüııışşşÿÿÿ¶Ô9Õ   tRNS  *-06“–™Ÿêóöüœ»7ù   ³IDAT8Ëí’;Â0gñ†„"H(RĞ qÿqèbÀŠ)‰‰W¬wgÇ®,R‚–5(¶+2‡¨5 ö^d¾èŒ´ñç¶‘Y@£[º•û¤ñí$ßÑÏAsŸ€…âÀWÀÉLzcô’ÒW«Õ:¹±×ULÀTƒGH2;u¦O‚SÎ–ÂãÄcsÒ¢Ä8"P¹‹]F•ÀÓü…·…øB°Éw&XÁh6¦„«ó7ÚjKMkSLP    IEND®B`‚Yimage/pngÔ	±²³¯_khttps://blog.st-hatena.com/images/theme/hatena-star-quote-star.png?version=f95a219773244f14c2c322979e39f67bOubplist00ÔjkX$versionX$objectsY$archiverT$top † ¯ #)*0123MNOPQRSTUVWXYZ[\]^_`adeU$nullİ	
 !"R$6S$10R$2R$7R$3S$11R$8V$classR$4R$9R$0R$5R$1€	€€€€€€€Ó$%&'(WNS.base[NS.relative€ €€_khttps://blog.st-hatena.com/images/theme/hatena-star-quote-star.png?version=f95a219773244f14c2c322979e39f67bÒ+,-.Z$classnameX$classesUNSURL¢-/XNSObject#AºôÒ:Î³š ÈÓ456ALWNS.keysZNS.objectsª789:;<=>?@€	€
€€€€€€€€ªBDEFGHIJK€€€€€€€€€€€VServer\Content-TypeWExpires]Last-ModifiedTEtag]Accept-RangesTDate^Content-Length]Cache-ControlZConnectionUnginxYimage/png_Thu, 31 Dec 2037 23:55:55 GMT_Thu, 01 Jan 1970 00:00:00 GMT^"55435a82-57a"Ubytes_Sat, 02 May 2015 09:36:58 GMTT1402_max-age=315360000Zkeep-aliveÒ+,bc\NSDictionary¢b/zÒ+,fg_NSHTTPURLResponse£hi/_NSHTTPURLResponse]NSURLResponse_NSKeyedArchiverÑlm_WebResourceResponse€    # - 2 7 Z ` { ~ ‚ … ˆ ‹  ’ ™ œ Ÿ ¢ ¥ ¨ ª ¬ ® ° ² ³ µ · ¹ » ½ ¿ Á È Ğ Ü Ş à âPU`ior{„†ˆ—¢­¯±³µ·¹»½¿ÁÌÎĞÒÔÖØÚÜŞàâéöş$3ALR\|œ«±ÑÖêõú
&*>L^aw             n              yOz‰PNG

   IHDR          3£ºP   tEXtSoftware Adobe ImageReadyqÉe<  fiTXtXML:com.adobe.xmp     <?xpacket begin="ï»¿" id="W5M0MpCehiHzreSzNTczkc9d"?> <x:xmpmeta xmlns:x="adobe:ns:meta/" x:xmptk="Adobe XMP Core 5.0-c060 61.134777, 2010/02/12-17:32:00        "> <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"> <rdf:Description rdf:about="" xmlns:xmpMM="http://ns.adobe.com/xap/1.0/mm/" xmlns:stRef="http://ns.adobe.com/xap/1.0/sType/ResourceRef#" xmlns:xmp="http://ns.adobe.com/xap/1.0/" xmpMM:OriginalDocumentID="xmp.did:06801174072068118A6DC74538DFFD77" xmpMM:DocumentID="xmp.did:4033CB3AF00511E1A665E0BF6250D19F" xmpMM:InstanceID="xmp.iid:4033CB39F00511E1A665E0BF6250D19F" xmp:CreatorTool="Adobe Photoshop CS5 Macintosh"> <xmpMM:DerivedFrom stRef:instanceID="xmp.iid:06801174072068118A6DC74538DFFD77" stRef:documentID="xmp.did:06801174072068118A6DC74538DFFD77"/> </rdf:Description> </rdf:RDF> </x:xmpmeta> <?xpacket end="r"?>ğñx’   ´PLTEÿÿÿà’ à’ à’ à’ à’ à’ à’ à’ à’ à’ à’ à’ à’ à’ à’ à“á”á•á•á–á–â—â˜â˜ãš	ã›	ã›
ãœ
äœääääŸåŸå å¡å£å£æ¢æ£æ¤æ¤æ¥ç§è«è¬é­é¯ê°ê°ê° ê± ëµ$íº)î¾-î¿/ïÂ2ğÆ6òÊ9é*ûç   tRNS "3DUfwˆ™ª»ÌİîF*õ™   ÏIDATÍÁëR‚@ €ÑoY¹¸
e7Ón”Û•‚¬÷¯œ­Ü¨Æ?Íx_nY©øãæ‡%Ÿ“œõ1Âªò0&'
61 -zXIm<E¬åZë>V	z;ü»¿$mcZäòK.jcÆÚ^µcyZë?æy1—XYi‚å±²=$İ¢± ‹œÖŠ.ÉëÛ…C84î›¦¹±G‹PgÏ/ß©ƒ,îŒK…[8)Ëò¼,¯RœÄèp7–„Ù~á¢RC¨‘d›| „J¬ïûİ    IEND®B`‚Ô	µ¶·¯_Rhttp://f.st-hatena.com/images/fotolife/t/teamennoshita/20150114/20150114200802.pngOŸbplist00Ôz{X$versionX$objectsY$archiverT$top † ¯(#)*0123UVWXYZ[\]^_`abcdefghijklmnopqtuU$nullİ	
 !"R$6S$10R$2R$7R$3S$11R$8V$classR$4R$9R$0R$5R$1€	€€€&€'€€€Ó$%&'(WNS.base[NS.relative€ €€_Rhttp://f.st-hatena.com/images/fotolife/t/teamennoshita/20150114/20150114200802.pngÒ+,-.Z$classnameX$classesUNSURL¢-/XNSObject#AºôÒ:¾½ ÈÓ456ETWNS.keysZNS.objects®789:;<=>?@ABCD€	€
€€€€€€€€€€€€®GHIJKLMNOPQRS€€€€€€€€€€ €!€"€#€$€%\Content-TypeWX-CacheZKeep-AliveSAgeZSet-CookieVServerSVia^X-Cache-Lookup]Cache-ControlTDate^Content-LengthZConnectionTEtag]Last-ModifiedYimage/png_HIT from squid.hatena.ne.jp_timeout=7, max=5Q2_gb=$1$A0tvopyW$UjMZowvcofv0FLe1Z2.JD.; path=/; expires=Fri, 27-Apr-35 09:36:58 GMT; domain=.hatena.ne.jp[nginx/1.2.2_/1.0 squid.hatena.ne.jp:8080 (squid/2.7.STABLE6)_ HIT from squid.hatena.ne.jp:8080_%public, max-age=86400, s-maxage=86400_Sat, 02 May 2015 09:36:58 GMTT7113ZKeep-Alive\"0861459476"_Wed, 14 Jan 2015 11:09:18 GMTÒ+,rs\NSDictionary¢r/ÉÒ+,vw_NSHTTPURLResponse£xy/_NSHTTPURLResponse]NSURLResponse_NSKeyedArchiverÑ|}_WebResourceResponse€    # - 2 7 b h ƒ † Š   “ — š ¡ ¤ § ª ­ ° ² ´ ¶ ¸ º » ½ ¿ Á Ã Å Ç É Ğ Ø ä æ è ê?DOX^ajsuw~†‘ ¢¤¦¨ª¬®°²´¶¸º¼ËÍÏÑÓÕ×ÙÛİßáãåçéöş	#2@ET_dr|š­¯%Wz¢ÂÇÒßÿ04HVhk             ~              ƒOÉ‰PNG

   IHDR  ‡   u   ÆH_   bKGDÿÿ«1Í   	pHYs   H   H FÉk>   	vpAg  ‡   u Ó°ó  ®IDATxÚí‹‘9†10a#ÆLÀ„5ğ 000¸ËÓÕÓSR¦Ş©Ò÷GTÄÆ2İ]ªÒãS¾ôîİôòòáÃËËÇ//Ÿ?¿¼|ùòòòõëËËúõí[ø{¹äóÿüó!„B­‚ÿş{àŸ?í¯Ÿ?8Êï Œ!„BÎ€ğÓ§ ƒ¿~õAíúıû„Å÷ïy#!„BS€P€LÀl¦®ïßyK!„B]ğıûÿ7ËBXbQ‹æ‡¼=„B¡fP(q„b%\c—Ä?~üÈÛD!„Ú
D„B¡J(÷ñ(·ïU	›nkùÜÍ!„B
J-Â–I&GÙ™²Z…ò÷gÄåqä;ÉpF!„º€0¹0(À%ÙÌı + £ g‹{Kå§Oô„B¡ÿ–@V-Šeo›6¸Á¥Æ¡”°©i‡X8±""„Bh[(¨*uÓ…§}P’hjÊíÈç8u!„BÛ¡¸eKbå3_ş-lÁšX
‰ÑF!„Ğ6`(Ğt_(l‰ß¾Ñ[B!ts0,)Q³&¾m{I&¶¸İ‰CD!„`8¬à‘)\Rê&ÿ·$Î27qEn D„Bİ
sOÄºöùó¸{ûòå„ÃQ¿+¥vr¬ˆ "B!„n†9µ åoÇeë†xÀG8üùsì³É±"ˆ!„Zs\Éãëü8{„C¹±õC,"€ˆB!Àpjé–`¹	/¯ápÆ½ä”öB!´ZO= šstÜYRçü˜s?r„ ¿§—!„Bh0´Ö1šwÈï÷‡ã]Ëç=åÄh~ıJoC!„s0´Z¿fƒááRÁá˜¬åz@ä$„B¹CËI sÁ0ÜëcÈşú5ÿYZ qş³D!„Š 5e>Ì¼†Ø+8”ëãÇ¹÷øáƒÍ
;®üB!„d¤¨ónĞ·ƒÃùgÛİôÄ"„BÈŠÔ0ÂæßïsáéÎKL)ï¹–N„B­æ}9U¬æ’Š!rI‚èøµA×÷EœüFØrÊ‡Ò+ÁU{­×pèh-¥p/#ÏóÄ±X=_ó7`ù/ÖÁ9—Ä±´õíŠ™ëcMEİ;ÀP]%Mø(Ú|™‚CO÷n9ŸzßYÎ©3y}²ëö}ë/vX¼‡—ÌcıÆp¸}¶dÔú˜ü¯­†z²ZTüÀlìú¹Ç¸Å–Ñ"´.öW·î¼–b×~%âÙÔz²ZÎaŸH"à¡à°Ï‘¬ÀáÖW«i(ÿîªbVCúêĞ6÷²ÿ8.àÅ8DÈ¶DàpÛk±Î93ùú~S5-pèÉz˜İu¬‡À!‹pˆPîxˆ³d+[OÙê“8
nÛq5«¡§¤¦,pèÍEnÉ^öm=Yì€C„ú—P+WÂ‘,§vµˆÃ-;­ÅjèçH7}PXáĞpÙjKú¶‡,vÀ!BãÆKXã4‹b/p¸e§Õ:—(±_ú¨×¨Ë
™ËÀ!‹pˆĞøñ¢uûù3pˆ2_¸˜¨×qgêîï\8ôTšÇb=ô[8d±š3^Òµ_¿€CÔxÇá)ÖĞRö¥ıœD¢[ıš²Ø‡Í‚C-¿.48Ü®Ãj–ª•¬j¥pØÆìŞ®ëÄ‡,vÀ!B>ÆKÚØS·Æ‡[uÖOŸ´º†~îU³pÖÂ¡÷#}fY‡,vÀ!B^à0µ¦×Ap¸UgíÄÚæ>s ¯ı$Şè÷íÚC;à!/p˜r-×…ˆ‡[uVÍMë¥ÌKnñÏR8ôäF×oü¹–C;àpÖ»ÄB™ï/Ÿ!(éqìZãŒùÙãe8}B,¥2§_]òokÎEò¥}±¶É¿uâ3œ|$>ØŠC·„CV9q¯`ÕCà°%ÌÙ (,9…åïäïı Vˆ¯–»âÁ²T¡8Â¾Ÿ³·%œÀá:pÆŒÌß%'ÅÈgdMõ»Y
0+cÁš[qi,Ÿ±õ¡0æ”M¤]óáÃVf§5ú0“ëm÷“EÖBlw( _ĞZuëBxÆ£¡)>VÒÏ.Ü«cp%‹ä<HmÈ‰!O‡Yú›‡1?Æ­œZóêÂ¦fÁa£%@˜E%á¬É<”„)PL·+Ş?xBŸ`æ»”Ë'ÁZ8ôá¶Õ:p¸–±|äN‡åÇ6.O·D™›1¾Ã|¼âKı³}ÆWëBÿ3äsá0¼Ï(¼‚Äşí|ûnZ¶áy|ÄÇÆ>p˜*÷¶VBJ˜'¬åR˜;ú@áU»bóˆ	}»Ví5{Áá|·z€ˆuâÃ¨µ²”„S}tS¬6‹sİØ±-æ¾­2ÁÊ3ìcaËÃĞ¶‹È¸$¼²ğ à½öxí‡)ø®¡QpÀ©å|i™OÇYÒûCo¼ª‰
‡úÄ??k·î¡´€Ãù®u}Å‡£'9ùîëIm8´-Û8FÀá˜E²ß|6F=ßm\ì ‡ú˜­ p¬Ë£ûË±ìol³Iz¶¨Ÿïİ ‡tÌ÷Çû€Ã¹±SzÜ¡Ÿ3¯Ãçß‘8·^Öİ=¸êI[-/Y°Ú…ÚXàĞ†G‚ÆU<eNøBûÚ©aş*ò¬åù<_9ß%ßñ¸(î ‡)¨ª_+zÃaY‘¿—û’±rô{ùïÜşÒ?Ô¢l£'íyîylç´ï8Ô&Uñv5f×{À¡É¾’R€ÃĞr=AßƒEv†u¡İâ¡Á¡¾äd(ÊFÅë×naÌ[èe®—1cI,ÉÉÒ~\ï‡ziñıà0¯¿È{µÅ_Ÿı%g¾ho³ƒá‘0f?b¬5^
cÁ ‡éå4ö‚Cÿï
8|„–Ü~{ì|¯v‡bùÉ™ÔNëÀ]á0L†¹ÇØóÍİ·[<Rp˜^HÒ‰éßÔbå¹ÖÇ^ÙzéÛå@j‹åışıîph}^áĞŞ_ä÷ËŸU^¦;™İPãÆwjnãMÃô ‡2¶µå©nÙ¾p˜gÍ:,%9™Ã2ğ-c" b-zp“]?+ÈÉ¸±ƒGX äX¿¿ãï2•„Vû¨/Äµ½ ›öÛÆqêq§qKşÊph‹·•gİfë‡¶1İº¿ˆ%Ñò›õÏÍ–XÛ.!&<Ï”ç*Öî¿pèßU©gêö‡Cï0ã¯¦ÜÎph7½•mñÕÆ†LH÷‚C;|–Oêy%&ÊßeŞæWîeÔù»¿×}·öÚÆn¾~où1]«ÁaÿÖâ¨Lè8ÔÚ!ı¥}˜›-ñ¥ÎPf«ÓÜ'¿#?æı¿ëBD¾@Û h8LMäÀ¡8´-Jmëƒ?ö.V…Cˆãµ½úìÀh+[¸ì‹{ùo”÷Ù2W¯>g¿N™ãiñ‡É±Ä¢9á=áP·ªõí/¶gø¦¾»Ï¸Îó¼C˜€Ã;è¶.“5ÊÙì‡a?'®,1c=8œ¹ˆôŠÓ³Ãa/Ë‚X Úe¶êV’ş`Xˆ>à°GâTE;8ÔÃÆôÛšoéÖç¬1F;™àĞË±2³áĞ‹{}˜×¼ÔÎxäÕ`õ	nÄî0×‚C‹ˆ¾Ï/cƒÃöåelÖØüCÒíi“èÒÖÒ|W8Œ×>õ‡)€o'ÙfÉÛ,éq”c:6–2Á¡7¥îNİ×È³†ø¼Ú·wLI¨<@\S‹üHk”6å-fzß‘Å¥7ô¦¬Şößö¸¦„1¡gµß¥ÍbµjßwZÁaÚj=«¿h}Ø>¾ÓãjWèóÍRpX
v²˜„y—¯‡ú¤Î€Coxëb¸êÏxl=Öô\’k]ĞÆJÿş“^¤s’$R ß×úYk`¸>n.ê’³úÁa*–wŞÁik¦ı¾Òóğœ
(ú\z{8¼®çTvNó¼I8\SmmSW¬Ï˜Y	SĞ1§ß·šøÓıg\¼s¼=68M{6ú[?kç¤ûÂáëúy¾à0ærÛ_Òî`Û˜LÇŞÎ=Ñ,=–‚CK¸}rÎÏôò]À¡'8L÷ÍÙœŒ¿¦­ZóqÚedßP¦ÇÊ¸E¤vÁO?ùs“¶ŞİÛ…`´€Ã´5wşq°i«¦X˜şüÜºÉég¿–¦¶à‡%ÀÜ÷¡Çó¬‡)îìg³¶Ù9Òc¥ßù®íá0eİˆ€fíõ1‹gKÖeËUzzÒXŠÑıÂ“>êğ's¼Iv#ÙÍá°­åĞS‰àĞÆ›ùn4İz¸
¦¾Ù®ÊT˜ŠõÔeŸêYTN\p1/İó„”fÄzkÅrb8Œİ§“ÙjïÑ˜ØfÎ‡ãv­íáğÚ­Ss¸Š{}8ôsuu=Ç”ØîÑ?¦wïówàéû³m*ãc%¿ŒÌ,8lñÆ´1¾æ­‡oÛiÄÒsÍ[Àá
1şekDš­¼XÑã}­ºy¹fó·'Q”áJ‰9ÀáX8LÅXyÚXÅ¬›+Àa*6ÆË¼Î}4â›şp˜š›üx R}õNph™ãjà½>!µiõ4w¦úuÜ3_|¨‘nÛÿàğ–(Ëî(ß•¼"r|ŞX8ôá¢Òï3æZ^k
àÏ¾lî±øXk­ƒÃøFé3Å6Kw„C}[S‡eĞ5¾¯”•xq}}Ûbü÷ÿ{,)³Ö^ócÇl%p8}X|ôûŒYÌW€CÛé+Ç®¶>§v¶?§|ôÜtW8´bõ°'úë/÷„ÃxÛşÂaÊ¢æ‰róQŸyZF¿gÊîòË ú‰™IOÄ+Àáı›î‡¾Ã]áPßhåÅ·‡é¶ÆÇƒo¬ı­³ší ‡k¼«}à0Ëçm ç]zûCàpj¥­ìî\àp8Ô,rŞ3kúŸOéçE¦¬¼~Òÿ÷Cÿ±ºá>•Ø×p¸2‡æÏİáP_ïí®eà08³FÌal³ğ5èò‘94}¼L}×ç'>8ô‡±cÍV†Cé_G`Ï—¾¹¾®”²3¦²ÿ[œêÓ"!ÅGŒÍ»ç]ß.Å£¤gÀúˆŸ*;_ùNp¨ïHv9Ä­Üß­ìë÷iãØ³~¥lüÄB§úêp˜22Øçƒ¾¥l<%V–•hŠÎS)›Ø†î/¦K÷ã®µdoµÄHH{Â¡/K9p˜‚õ(µûÜÓ¿=Ó÷á©hz¼6rùxğªcŠ‡~:oÒ‹™wú°P¬ğöƒÃÄñC®Ş…²C\ı%:ì‡áó±˜h§¥Çp8}Ÿ=œãõXÚøxğ^¼ÿjI)ó£ÇÜİõ¶ûJFÙ×¨ífÚ!º…Ãuêç‡±vxr¥Å×:àp4¦¸ÃƒAJ¼ªå8Xz?öójñl^Î‰İµcÿ|¹1÷ÃÔ¸ñt”a‡èSÏØÏI
À¡6Oy00¤û]bÛœµŞ}™.®ß_úós]Ëé0µWp¨ÅúØùÍCT;WÚW¼á>p˜Ú}yÙPµ	@Ÿ‡©û÷›jïj~Ií”=à0ğ9`×S°î¡¿¤B¹tËf­åqÖ&éÍx×‹Íz€¤šó‘×<WYw)ûqÙì‡:¸{p¤J@ù‡Ãô3ö”,Wş®ï‡ú:2o	b:n{8L=»·£U´kyfIm$ì`—nßÏ‡Üú5×åü ğ9§%Ì†CíEú	öŞÛìÄçl¨VÃàÎŸ‡›NsÙbv/8L-ªòŒæl˜,urï‡zø˜ıİ´ƒÃ”›{NÑ7öw”6îÈ¦wlûÒÏ;
‡–„Ù~òp87®I·–ú‰mÛSãFŞİ¼1£/ˆ«Àá×x›~.‹J$Ş	uëÔø`|Û‚xo8Ô'÷·«?š^×gô—”µ/¾Iß8ãÅzmcú`îùVªp8·½é¯.åàPüs2ÓPi‹5àPŸ›ælÒğİâ´‰UáP³P‹Õã«vCmmoµ¡)CŞÇ¹—õ57ßX¤ÏÅı¹*Œ-w!	‡:ŒÌŒ£Ò]¬wƒCòıe)ï	‡šÕ}|ìŒm#µ¦êœŸ—ôÍn1¾ö€‘şâ}áP/U—ŸüÑúä"}mÑ_4ş)_oõ°½~€Ö'û8ˆw}—5/jÆùÊ~­†ş¥Úmğ¸ğı^ÖƒC8Æ¹—uK@Ş"rO8´XìúY¼ç,ˆ÷ƒCû3ÈÿÍöphùıEƒ71ÔÔm@õ“´¿í:¬ø¹‰¼Q8Ô ÌwPqÛk^6¤n5ô}|Ø~p¨-†òoıÑ†+Âá
î™üùñp¨[{Ïy¬õzúX?¹Ã …Öy ÌÖãÌópßÈ´í/a<kĞÖfî¶[²ÅŠZgø	c/å=’6Å€8
‡ZÍÃyîLîïq®²Íjè¯¶áÎpxîÒ´I¦O|\·9`¸Úæ€îY¼´M[şû½+Úç²òLï¼1¼Ÿ»ÀaØ,I›å’w'ãß’pPŸ-ÛmsèÑ_¤½µ–¼Ô&¢K;/ÔAŞ§<[;Cñ¦ »ñÍ[b¼Û™ñ.Íñç+‡C[F‘ÿsew„Ãğ–¸Xù›–»_š5ëp~Ëâi;?Ù’ÖV˜õáĞˆg¦w¾åUPKŒmXä}Ãá8¯XŸÚœõagöş"ãQæR»U/@‘|Æêjmë˜{¾/yæ2F/i‹üë¦à´‚Â¡¥¬Íp‡3Òè-®sßVÃáĞ¾¹Ê/yr=Nµß’ï³èÏƒCËä¬mªÂòÀaÁ‚şf¸ŸÃ2&‹ú³¥L6	ù‹<pX__¯'–õ£Òhzì'G_É±ªöM‚)óôÔ^Òş¤ã<¥lrm26s<M¾)*P	ºƒC; V¬R9Ù­b)Ñ¬g§‹õnpx.¨œç+ß-Ÿ±.&½¬0÷ÃsÁ}ÊÕÛx±½áPæ¥z¯Eo8<ç¹§¢õÿ™×Æ·±šññ®¼C[¶Ùø"¿÷†Ã>™eÀáx8ÌÄGÈ8,}2i<ï~sê|±ww„Ã<@|ñãù
¨ÏWà¼Ôº ï¤—æ^px¾³\—ZyXĞÕ»Ù¥_·pxzGFõ—>Ã6+b¯d[yO×óH1†[@ÆZ²î
‡¶X5ŸGå‡µø¾ıö®p8gñhŸ˜·¾ş­^“t‚Ë^p(c£GÜÜ8|Í"=-l!{wîzt@b‹vÆ¡PïÆç`›xGBÔıÎU¶ghÍ+@ÖüX§r-R¥Ö·}öÎpxNª#ä·u;í‡íÃ£ÿëY¬÷‡Ã#^³Ÿl4¾î/-çR[Ÿ¿6	ÈœfİøÊÏ‡=D)šdœw¬çR©‹ìÈ…ÍrÌÙØ#§€Ãö÷Ø~!´—v¸;¾†ğŞGl¶Í4÷-.îç,Ä¼8ÉvÏïê>FN‘“`ò*`‡õë6!º¾‡üë1<b\‰÷Ù‘•ÜÒ=å}fşZu¼ci·<gÀº÷Ÿ+36¶]ù¨"¿#ÏWîí³¦´¯‘„Z7­ ÑVïk8|=‘Zvrs}aZd}b8Áã:bE³QyèXGc‡¯®¦Öñ¾Í²^|‘bêSä}ÁaßÉÇÖ–ñI?í&øcgóúòs¥1ÆßcÙî÷HZÉ±”ÄÚÙn3{sÏb?ŠÂ–$šÈs \Çº€BöùºÑ©pöÌÀ¾€8û¾k&+‹Ó^öjìª×·0\=ãÃ=76S!t÷ù¼ß¦¼üŞbŞàÂ$;{aÊ~€82ûs>Î9¦!„B5ë|Ì5?¹4îI©0FÙÁ¦ ®‡9Ïá…B­‡©C;ÆŸ¾vŞW¬Dáïß¾Üš^İƒk¨e°¹~ÌL»ûÎ95ƒÀY„Bh]@L…Á=a.ÜO*<°Aå¼ƒ£ÛƒÖIå­ãmÙŸ}Ÿ×˜¬o„Bõ„1íÈß‘¥¾4i”øj;^¯ÿY…„sŠE^İ›XôúP|¸?k¦$`ˆBİSÃôi>íîA;Iªq~CşÙ¦},ÎlÄXÎ±u²òš'3!„ºZi=O–‘’i©ßï” “ˆã¶Órã"ÇÇ „B¨7hîåƒÚ¹™ƒµĞÂ!]Ûy®Ó3¶ï@£t\É!„Ğ^€h-(¹ò·eÖ¼ópËo8–7/é¢)Ï}ñBé¹	2€!B! Æ@Qr*ÏR~¾0:ùÛÃTƒìä<@,É Óçšçd†6[ÎŞÏ½B¡g@Ì¸×¤0¶2X
$»
$K¡ĞzÉK¦!B!´ J(Ş¸£€_—œì­Í½{6¥úÌÜ/ÕêÏ›•„B¡U Q¬ˆ9ù¾j8W4¼$ï™r¥As­‰¡âó/­¥è„ØB!ä{XAáÛ†—º_ŸcôÄ]=°‚…°Ïú¸‘B!çÃ%¡g¥Ìt°Ò"u“ë­ˆW®gNq_×%v„{“¬ù¾š—‚µ!„B­¸IØD€1u¨‡Xåï6B˜ëåc—ïh<À1v	 Êß´°
îUÇ!„B¨$¶p5{»œû÷B!„|¢Ô˜‘­"„B-Šâ3ïåæíY3Hb€B„B¡N(YÂ’iãÕå,÷%uI4A!„Š’¼" 8Ûí| ¡ÜVB„B! xÔ”LãŞ°(0(¿#¿ÇùÇ!„BÀ¢$³õÄºx”°É­•(—|^JäûÖ8Û!„B¨¹şüáâââââââââ
× Å^¾~¡ú‡   %tEXtdate:create 2015-01-14T20:09:17+09:00Üû1n   %tEXtdate:modify 2015-01-14T20:09:17+09:00­¦‰Ò   tEXtpng:bit-depth-written §Ä,ò   tEXtSoftware Adobe ImageReadyqÉe<    IEND®B`‚Ô	¹º»¯_Rhttp://f.st-hatena.com/images/fotolife/t/teamennoshita/20150114/20150114200857.pngOŸbplist00Ôz{X$versionX$objectsY$archiverT$top † ¯(#)*0123UVWXYZ[\]^_`abcdefghijklmnopqtuU$nullİ	
 !"R$6S$10R$2R$7R$3S$11R$8V$classR$4R$9R$0R$5R$1€	€€€&€'€€€Ó$%&'(WNS.base[NS.relative€ €€_Rhttp://f.st-hatena.com/images/fotolife/t/teamennoshita/20150114/20150114200857.pngÒ+,-.Z$classnameX$classesUNSURL¢-/XNSObject#AºôÒ:¾€ ÈÓ456ETWNS.keysZNS.objects®789:;<=>?@ABCD€	€
€€€€€€€€€€€€®GHIJKLMNOPQRS€€€€€€€€€€ €!€"€#€$€%\Content-TypeWX-CacheZKeep-AliveSAgeZSet-CookieVServerSVia^X-Cache-Lookup]Cache-ControlTDate^Content-LengthZConnectionTEtag]Last-ModifiedYimage/png_HIT from squid.hatena.ne.jp_timeout=7, max=5Q2_gb=$1$Orju60qX$EJkeXB6x/GvDhjBjOd8ph/; path=/; expires=Fri, 27-Apr-35 09:36:58 GMT; domain=.hatena.ne.jp[nginx/1.2.2_/1.0 squid.hatena.ne.jp:8080 (squid/2.7.STABLE6)_ HIT from squid.hatena.ne.jp:8080_%public, max-age=86400, s-maxage=86400_Sat, 02 May 2015 09:36:58 GMTT7235ZKeep-Alive\"0861460739"_Wed, 14 Jan 2015 11:10:46 GMTÒ+,rs\NSDictionary¢r/CÒ+,vw_NSHTTPURLResponse£xy/_NSHTTPURLResponse]NSURLResponse_NSKeyedArchiverÑ|}_WebResourceResponse€    # - 2 7 b h ƒ † Š   “ — š ¡ ¤ § ª ­ ° ² ´ ¶ ¸ º » ½ ¿ Á Ã Å Ç É Ğ Ø ä æ è ê?DOX^ajsuw~†‘ ¢¤¦¨ª¬®°²´¶¸º¼ËÍÏÑÓÕ×ÙÛİßáãåçéöş	#2@ET_dr|š­¯%Wz¢ÂÇÒßÿ04HVhk             ~              ƒOC‰PNG

   IHDR  y   g   µ8î!   bKGDÿÿÿÿÿÿ	X÷Ü   	pHYs   H   H FÉk>   	vpAg  y   g µ4Ô  $IDATxÚíëqIÖ†çÇ B€hnËìB°½±È™ d&¬cÂš€	cÂ˜€	˜ÀÚ÷kªFMeæ¹dV×óüé˜]$UWe|ó\ùàæFŸ¯_?şìÙş³ô9ı¹ı{    àÆn÷äÉ£G¿şz{ûæÍ‹ÏŸÿşûo¿½zõòåŸşã¯_ïvß¿ÿûß¿ıöî]ûç?ÿùîİë×ß¿ë÷>~qñäÉİş>Ï     à'‚]úo{ùòÅ‹/_>~|ûöÕ+»PoıüøñÍ›W¯¾}»ºº¼¼¸¸½å    ür}ıîİÕÕ‹ÿı¯s/Á¾ôù¯½ÿöí÷ïº^    l‚§O?~ôèææıûİîêê?$ŒGîKŸ/_^^>}úù3O    î+úTáğmÉ¡    „ûOS[TÜª¿£\úy7ši±ê±›ÍáóöVÿN?¯bW<ó    °ö{	a«pÿQ¨¿|ùí›rÑ§‚üú:úû|øpPøóÏÒëÖ‚µ     ³ÛÉ“İêÁÖçßÿ~ßæñëWµ“Ìêåßó:óõëÒ÷P„€µ    C!xkW	~y®Õ~ôï­B    V$Ü¯¯5©U¸OÛ4®ob*B    V@{ÊŒrÛ§¹âëîsJ2y    HE÷Ò\ğS9îêVs^wg¿/=Ğ ä    …VÏ»ş½~ş\ïºğ”ŞyîYY    À~¯Ô—¶ÁG_¿ÊƒŞœ»»Ú6šÓZ      #JyùôéŞ“^ßmFéÃo;ßÉ¥: ´Ş§iŸ{    €F”úRëYÖ¿ßÊ¤R«€WªÑá·e÷ŞÜLŸÓùFJ À9fævä|6 ì·0¼aVŠG­ •½ºº¼¼¸¿¿»×ıj-òÍJ©QDEGo*¶½ÿßy `nç$@TËóñãÛ·¯^ıÕ{íÀÏĞ|e"¨‰“Ü!ÅPøp¿àêû½KÀŸ{î»×ıŠöÄK¸ËP”FTÈÑ !A^;ÀïğÓçÖ}àçû­ºï•¾'ÓIô Hx#àkØï­>ÊsÕš
…' ä hàGû\Øâ­û-5qà"à[sº·&à­÷ëT÷mœ^Şz]‡ß†'`‹Şê G’{	[ğì·°JAª“çynŠğ1÷¯|àÔÒu~Å7 [ÂË@Î/œ?××­x"W0„€Wômllww^>6'îæÆz]€íÒ:„Ô<àÀÛ¶ßÒTÒ¼>·ÒFÒšc~êS!ëÃ_ñnËfòL”@È[íÈVö	Ø²º»#r‰Øs·ÑÅd·S›(/á[K`òÓ] €'çàG¼<òt«ëAåd}}míÿ¾”ŠİOßË°Ø.µmóşZ¼è'®û€ç~Kä
~Jë §­t£Ñd-¥–ÀË°Ğ`»œXCÎ/€Ÿ¾"rE•“âCìv^¡ãÑR‘¼R‚0, [å~2õÃZÉù8bÕQ aåÈsnõ0Ÿ›!VJKíDÂµÕXİj ¶½Æ†‰Ğ°¬)hì·ğ ­øæ'ÄóH¥9zŞ½»ÎŒº)¤Í  ¨åÉ“G~ıõö–€²ıÖ’‚Fä
&xåF¯İ“]´:ú}Ã° @ï}äğÛHÍƒsÆ>x‘ÈL„«uAG®Ö}ngNêŒ<üc½ˆö8m° ¶‹µxœ_Øöı–Èü¯¢ÍµŸ³ŠWÇhk7,´Á`?!çà4^ÍD”ÊÆİ(OŸ>~üèÑÍ5÷[?¯ß·Î»aq•¶áŒîß
!q °b-Şc"4lë~+İuømç×Ö’<'çUÜh÷D/Â½ø×jXà Ö&BÃ°¶y&rµq¼<ñç•íï‘ŸnHã[Bâ ĞÛ’ó[Àºß¹Ú8^“ÄÎ-GKkêÌZsÄ­mGéV°uì‘Mr~aXÛ<³ßnûÄ½sO¥ /XL_¨õvY°†Äiƒe@k_?°m¼Š÷¦ïÀù
yË~Käj£r´ïî¼<ñ:QëıR
’ª»Rft?9àaX–Ùïu@TMÉÜ+%aú^!ìaXklHÍƒ-9n¬úë¼ôãRChÃBH|IØÜİµæs0‚5aÍùe"4l¯ÉÇÚ·¹£Z„<˜#5´Ázû`1kÁ–ööØƒ‡îpĞˆ5'Ã‹a!$^Êõµµ+ïliáà
[Àšqî)Í€‡¬ıliƒõ0x(a;Økl˜ìì,ä9bX0,§±¦,1Öƒ½ÆF¿‡{	ç®Ã,m'‰\±€\…<¹Ñ¬Š2ã÷¶p`%çØoÙ “§ø9`‰Ó+æ½Ã`Ã Æ Ş±Cä
ş‡w×šyÿëÃ_¡ï5†,B^‘.Í1àÂÈXklHÍö[tâİGƒ¼n‰ç şØ¼G€ƒˆˆ.l"W0„p£ÃB±sœĞùğáŞP«û#Xäü,cu¤Ò~À]š@;±±!$ÃÕÕååÅÅíí|Â«ş{ê‘DÀÃ¶ö&Bº˜A²€#tŠa!òÒŠr•ûN®#¬™öœ_ºÁ–°¶$rTDg<Ù:¤ø`¸G0,„Ä kª&9¿À~Kä
ŒDu±)­¾
AR
r±‡Ä¿‡®* [ÄZcCÎ/lºÃA(ûı§O÷Âº=äcıüøñÍ›W¯¾~¥ù:m° €€eäI'r	•»»ìT›¥n(S=‚ÑBâ `EuRó –ôU{äJí‹¹“PDtŸy«X ©ç”œlÃBH ¬9¿D`]Eä
6&èO$Bà×a‰Ó`ëì÷óvªäüüºÃ‚¾9çşÛ7]?£î§ í56L„†-am;É<pAÂm”úÖ~ÅÊ5Ûºç8 ´"aÁDh€øıVgî$¸ Ï¶<Şkô§<÷Û*ª%$ vÇ9¿0>××r<iİêsêéÚ÷éC³Û)ue­úS/Îtí¹½@í†…n5 `ÍùeÒ7Dv­+E|JuÉ¼™†ôõŠè«Bzøsöç2¸Š8 X¡Ææœ‘ãJ×ñ&°Gë¯ˆ‘+@ØœŠ³Öâ X!çwh0‘<×:éyÎS.µoO8ùêƒgûú:[Oè~µ^7İáà,…½ˆº¬]ØO…íø)8´Á‚ßÇ‡sEé"Ò—İN!yÙK½·÷ïß³g_¾è¿õür‹÷¯¯[…”~N¿‡gÉ~/{míšÒë ¦õm­éê9²î·D®Ö€Ş‡›í£Óç6ndË}Ã’g`­ûOŸîŠfÇíæ¢®=–m²Ô}ŠnD}ì ‹µ‰€$±©€ÔØŒºtğó¾Z—9ÅİÎ*€½Rj	hı&ÖÈ•5" >ëQ]ë²ö¹Î#[i‹~,ZY[w=°Q‹¹‰ç²ÊÖ§<­½7F6®®.//.no£íÛ‡÷ëK˜íŒ‰ĞÛ\GÑ	æÃ÷(w4éàêá×şíã£;Ü:Ùï³2G´Ş¼‹¬‡=ÉS(òZ<÷ÓÔ›Ş¨=$>f¬yQVÿ`¾N{·nŒ¹Çñ½–!Óû2Okİµ£T‡lûå•k«ë?¯›µ…¾óºÅÉ~DÙWÙ)E´mÍ'ö{\û
øãº:¯È•Şs;XÄE²pt, „6¨Ş`ØzË\ ÏŸ·<RÖPhëFdíâá%´j7Æl!ßêA|¸-ìZ<»u}xy~tÿ[¿Éºs~¶ydR÷'62f_G­Bµu½D…şkí”ş]™}ßíJÓƒ_J¡µ;œö¹^+Mïé)Ç©OÙûíÚ"YÔ™C"c¦äô*]gH|¿¯@ÙĞ«ˆÌš›nğÑBŞÛƒ¸nåBİ	åiŠÓÍÍåå“'şl½V‡‚u½g×`HPÕ¾£ÔŠè½ÎğQ®Z;Õz XÒúQBtmİáZRëêª³ÛézGÍè +à‰çUD¶OÇ’]8Yin
P{ª’×ÁÃKÀGİ7«gjmm©ËÂÑZ¬n¬­¥ÆÆš4†@‘g9nßÒóÔºŠmÖPÿ}¬Šy&+¢·–îpÖıcôâõÖÓùOÏC9V¼Ú¡z×2!ìW–³šeXrBâû½Uf	/jõüY…]”A–NyË†Şë·µ+†µ/µí¾µ§æ©h,z£’í¹°îS^x­3yZn‹7Şş³vÏ¤Õ.GÏ©ñr Z”«Ô™Úï×: TÙÚHÓ:SEö^zÔ“ìØ!qÿÜÏhÃbÍy¶¶s“g`Ôõ˜Õ>nŒ¤|ıZ‹ê¬!ûÖH†u½EO„öğ½=Ö÷FveêÑí±jux¬½îØ‘+?‡ÙhB¾ÕÔÕ`´ô~Zk•`ag	ì¢†1K\ñV´!´zš­íI½SV¼j¢RiFİ@j=äÖ¹UÈ·
êQs~å	óÎy>xxİ_	Ÿ¹Çî²Ú7Ú¶§­»î¨İáÖºßÆ	øiJ‹ßı\ÌØÿ5§|”š^°Ñ<SÑ÷7Ê°è…ì=úÛú\c„–¿§§wª†×Å«ŸUP· ­)=Şs5¼Sz¥vÔD~ì®s<Ú×éó-}Öı¨sXÖºßFuÍêİe¥UÀG·U…¡(oc5jQ‹Uxz{¦¬Eh½UĞøj{±­WÍFö$Æ^ıv³ºnx¯?]o«çi¬›x»œ%$Ks©£Ú$ŠÒˆméÇ*{5…èY‰:@F;Ìz¥ µÖ`y¥ĞÀÊğòÀöòüŒbX¼sX{	<k­w‘³5eÊ*´¢ßÑú‘÷.Ú[HóQàZoÖœÌ1FÍçõQÎÑ.}o²„Géó-sìÜ´|&b®MxÒÎºï]”Ü~ÏÉ€€añêı"ô‰Gå°öñ¤Ù=àŞ†ÄËŞ&Œ—s`u¿$@½ºØş~§®öÀ•ëªç¤ç®×t]yöš¯Ğ{VªcVªÀ’'>fÒ¨ış–y`ıRşÖ&è{G®²f½*­z¦W$é½_óÉå,Vö‚öJ­±†8mÚ¸Öì")«‡#J xy^j…ñ’A=%D¬¹³}B¹õ uçøú	3ëóŠNÅË(WêØÈXÚ•¨—ŸG@½ºÃõÚo³*Š(ÖPú¤h‹ÆK¯AŸDT¨*úDÛ§[My\İİîÙ³§Oÿ½Õ“o=ÈEuÁÈò¥uÉ0µ®ËlÏJëı]w×#½FÍ×zu°´:.¢`K`k[Zûõç)1e‰8!ÿs{Ğ0\Ÿı¶¼É€;ŞáÊíêÔŞı(w¿hOıËHßH›ÄVr©à=5É¬u#°eõ´Dëº¬; -{¦K¿gë†—Ê­}îÙmG·{µë¾´ˆMöéác»Œ=€-å^µµö÷çû–_~­§~ÉÈNÁÉ\•ÇSûm«ÎŠ8ZíOÖ<GßÈrÏ¯‰Š¹~a)Í±\jûÔúBÄ¾°ö)jƒöè+^òœ—RjsÂ[7Øƒï\PÖñfOl}ƒªK)÷,şü÷ÖÛ½h{¼´bû‡ûïsKï¡×Äik*£®#z Ovw¸ÒçtJÀ[T9ÇvGd–CÅËÁ›ä‘ßïe8eØµÖÖªoÃ}¢Í
‰—†ÀK‹•j^tJWW–¨ƒ†Õ,uù)õÖTêFÙ}ã[ß÷ŞÕÑì^Ùı(÷,.”Zí^ï”šQBëKö¤ôàŸ=®TØG=ç¬ÈUéß)k7[ß](K Òı'ê ‘¶oH •†8Ï[Ğû=°¬®Ö"±%ÃRZ´U×}¡^àE¿°^ÅvQäèd)Ô^;X£õz³úÆ[»,eE²ˆÎùõò,Z@´‡qé>Éñò^µt7‹îWê0+Õc¥ÅÍ}RjÚsâ³ŠG½ºh•ÚµFd}£ı^ZÖ:É.¾ˆ
‰×VÇ—4[=8Ñğè¹oÖõyê9/ıŞÖ|«‡7«‹G«î=á0†ö”²¥ûQëY,m;X»¾r<áË©>£Dr¼…¼Êh‚^ëÓ+å&ª;\é~[Û®´ÖA•å°õŠäÄ:Tì]ë€¾°¬÷ÈôQCËóÈ¬>¸1!q¿¸Õ£‘Š¶z$Gò?çå\å6b»0Ì*ZjÍ=·b¥VİÒığö,Z7Øh]*LÖ"ä­(ı~¯÷(¹É1ÓÊ=ÓµòÚƒG–£Öz Š¶ÃVO|ZKŸöIãá=±2»/°÷sô[TÎı´Ÿ¼£#0VO×|Yú}­íñ¬–h»%\·‰œ¤ÚH^mh|”]­ÿ(B~ÉSë•Z¡õ {“İåÆ7²kß'æö­TĞ¶	ìúÜøœ>çöû›Ãßò“<àÍŞÿõ<ú'Ûs´ZsˆGyú=Q!p«§6çÀh¿£y}O¯şğŞ×™%­µç&ä­§éº/¨Õ*k¯7ËÃXºî{M¬õˆFEÆä¡”Ã(Ûco;HµïóL†R;dÓå×›•2èå8z¬×—6 Ğ+7ií]¼Š{”¶zõy? éòòË—˜xûºËMá²ùèØ*ä5dÉSj3õ l|.}€µáHéºj`Öû!¡ëY<R›J˜U\Zz]ct­9ííÓs¿—ˆXÚj§½&~ßëgÏ–÷[«®¨½Ş,»æU<%ä[íaº#×«¨s­E¯­#€;‡PÂcVÈ­67>W0Ù…|t
5…*:a-)+Ö_½Š]u€^Ìµœõ~ÔmtÖI¦õ!ù¬TÇÒ÷³wù%!5ÊACû…w*N« ôrüeéŠZAºGJ”·v1ËII
€£¶¨5^'şôgÆ½=Íµ‚!W0ŸZ-ä­¶¬U£ÜÇœ¢Üı^ï_éS'\Û#(ÙËÖwV*KíºÊnCYZ|œ]ãUêxóÚ·[í\V7¯û?ÚœoÇ·#ÙZ|+QÁÖºÒóš§*†yÎFñOİ°Ò.,Ãä@u6,¾/J{“œû½†â›Áåõœ½ÖcAÜí¦óòä%äcâñûÔ
—¶ƒ¯ı ›±lÉguk]WSûæ/ Jüè¹Ú"jo!¹ò=Øµ¿×Ñ)Ó^ö×Ëñã•êS[3ºäˆ-|~ƒÂûdv~P?æ¶t`‰òĞú„ÀXk2¾ÿ§'Øé…’@}ñâéÓ‹‹eÃd½Ÿ±ÁåİËk£+ótïvó÷ºt#«ÍìQ¸[‹îkdŞİº¢<V™ö©²÷˜³}Èi^> [×•M>ãûQê@¥7zİ¶yNãö[ïAA^¹üe’İn^«³”©àu³kö¼bîİ­¼=º£/ß+>ë ]´ëË¯ï­óıû—/¯®¾~=å±.}!¼^LÁ_È{-/=-:®C	°S‘µRûã’6İˆ—77Z^İ²ZS}¢jl¢RF¼…Ô<”}øüömnWK=^û©şşÔ,ÙããÁ£v]Eõ»ÖûªëòNE­]¶ˆ©¿ıÚo½<Ìó”	õ¥ı6KÈ·êN]_TÔy„­´¶©Ù[“ûGMµ9oïoX¢¿ovQn«ÆKàÅ„¨ıwLu½ÿÁRëR†ÉN• ¢<ÑúşÇï°ÁÜÿ÷ÕÕxƒn¼9a#Èƒ=¢^‘¨bÈù{0ÿ´¦Üy¼$HO	ßCŞ@0ïTäèAA½&ë–î{ÖÈZÙ:Ö}½¹¹¼|òäñãÏŸ½uµ ÚuÚœá}‚ÓBÍ-µ†Ö	9|WçT•ìƒW/!_ëñ¾¯¾*»İ@Úk ú¤öùÍè=z¾õyzm¨Yíw{	ùÒ}Ì[ğùŞœÖ¥¹ëÖ_í}¶¦Šzí_YÂ¬&­…^×7ú§S-Ïn—sRòóÔ¨šİ7·tüî;^Ÿ¬®	Ş9Öã/H}Jv!û¼ãŠ&£„lïHQï.C^5!Y¨ıÉ7²6şÑ[P¶>—VA_ê°óZŸ^Â3«IF/»Vš
ÒKœZ½ß×°^m‘LíÉ¸¶ËÄ<$nõ,½ÖVÖÈCt<+õ"Êã‚ó©®·Lô-^îí1õ5|å“HGùôökvûİ¬>ŞÖ¸w„{ÔvÂ^ëHïßt=Ix›Ô
x/adİoûÌÛÉ‹¶¥öõ;ğÎ×G¯T¤´©ÇÛ£ûkÅEGÇOk©œ~_öVoZ…fïîBY/ŒU`x{¼ÚdÕ
e­{½Ç£®ËÚõëı}¼ÚÚ­K€µû¶ßwô\µ®õŸ*Qkïôşz{6[Y”^û­uÉœÎÙßîT+	œì¢V»òè9ïY‚nŒûà7+v£òóx¥´Œ:š>Ú0ë møFôQ‘ÃÖçÔ'’—·Î¼sı{§niıäDNüæ´´:è¢T­ŠŞCıı¨¥OÊh|D´lÿˆ;x?Ü>»Ÿıü
yI@©¸0+¤£¿#SÖg|ı”
ºQ»ïx¦(O“W?^¯Téõô¼Ø7ô‡Sğò×gvNvVä°¶Xp•Ââ~ûöêêùó¼Ğ}ßÈ³½éÄR_Ï=Ë1U:cÿğ¾qwgª²OŞû­·hu€xEâçv|åäëkİyç£hK>ï_ ıœĞÔÃ°ŞëÂÿñ~>tŸF_@óïQ{p«í›í™ò„Ô|ù2?0ë:ÇØHiNµÇ›·kœŞ¯q£6­;/G…ì\¯÷UßK÷nGF}§6àÒ÷Tën±Š?ğÊ^yE´µ§ÇÑ6wwºÏ§Úeêyèÿ×ıÑ{1ı^ùëPïå\¿Ì÷ÛÑSvu}µ@ıûœÍı¾¶RvkzÀhŸkí‰Ö³Öù¹e€ 4ps#ñğ ‘|C)VjXrsˆu?Åac>W]×±¿oŸˆß}—À˜¯×SŸSA‚¡Zg§Ëôş÷_wŠŒ(’,#áôğÀª?ş˜z×êÈšÛƒó ³ßÚì¬®g~9vô´=YÇ¾ 
úùF+@v   8_ş¥Fvöª´$(   %tEXtdate:create 2015-01-14T20:10:45+09:00>Ú)   %tEXtdate:modify 2015-01-14T20:10:45+09:00OBb•   tEXtpng:bit-depth-written §Ä,ò   tEXtSoftware Adobe ImageReadyqÉe<    IEND®B`‚Õ	'½¾/¿_'https://platform.twitter.com/widgets.jsObplist00Ô‹ŒX$versionX$objectsY$archiverT$top † ¯1#)*0123]^_`abcdefghijklmnopqrstuvwxyz{|}~€„…†U$nullİ	
 !"R$6S$10R$2R$7R$3S$11R$8V$classR$4R$9R$0R$5R$1€	€€€.€0€€/€Ó$%&'(WNS.base[NS.relative€ €€_'https://platform.twitter.com/widgets.jsÒ+,-.Z$classnameX$classesUNSURL¢-/XNSObject#AºôÒ:ˆ1H ÈÓ456I\WNS.keysZNS.objects¯789:;<=>?@ABCDEFGH€	€
€€€€€€€€€€€€€€€€¯JKLMNOPQRSTUVWXYZ[€€€€€€ €!€"€#€$€%€&€'€(€)€*€+€,€-\Content-TypeSP3P\X-Cache-HitsZKeep-Alive]Last-Modified_Content-EncodingVServerSAgeSVia[X-Served-By]Cache-ControlTDateWX-Timer^Content-LengthZConnectionTEtagTVaryWX-Cache_%application/javascript; charset=utf-8_TCP="CAO DSP LAW CURa ADMa DEVa TAIa PSAa PSDa IVAa IVDa OUR BUS IND UNI COM NAV INT"V244278_timeout=7, max=50_Mon, 27 Apr 2015 21:40:59 GMTTgzipVApacheT1329[1.1 varnish_cache-tw-tyo1-cr1-4-TWTYO1_public, max-age=1800_Sat, 02 May 2015 09:36:58 GMT_S1430559418.620628,VS0,VE0U34206ZKeep-Alive_'"44a1bc9b6f728cd735a94b8506487699+gzip"_Accept-EncodingSHITÒ+,‚ƒ\NSDictionary¢‚/…_application/javascriptÒ+,‡ˆ_NSHTTPURLResponse£‰Š/_NSHTTPURLResponse]NSURLResponse_NSKeyedArchiverÑ_WebResourceResponse€    # - 2 7 k q Œ  “ – ™ œ   £ ª ­ ° ³ ¶ ¹ » ½ ¿ Á Ã Ä Æ È Ê Ì Î Ğ Ò Ù á í ï ñ ó"-6<?HQSU\do„†ˆŠŒ’”–˜šœ ¢¤¦¨½¿ÁÃÅÇÉËÍÏÑÓÕ×ÙÛİßáãğô-48<HV[cr}‚‡·)INUZfƒšº×İè$(-:=@Y^rvŠ˜ª­Ã                           Å_application/javascriptÕ	'ÁÂ4Ã_%https://apis.google.com/js/plusone.jsOabplist00Ô{|X$versionX$objectsY$archiverT$top † ¯)#)*0123UVWXYZ[\]^_`abcdefghijklmnopqtuvU$nullİ	
 !"R$6S$10R$2R$7R$3S$11R$8V$classR$4R$9R$0R$5R$1€	€€€&€(€€'€Ó$%&'(WNS.base[NS.relative€ €€_%https://apis.google.com/js/plusone.jsÒ+,-.Z$classnameX$classesUNSURL¢-/XNSObject#AºôÒ:Á«° ÈÓ456ETWNS.keysZNS.objects®789:;<=>?@ABCD€	€
€€€€€€€€€€€€®FGHIJKLMNOPQRS€€€€€€€€€€ €!€"€#€$€%\Content-Type_alternate-protocol_Content-EncodingVServer_x-xss-protectionWExpires_timing-allow-origin]Cache-ControlTDate_Strict-Transport-Security_x-content-type-optionsTEtag_x-frame-options_x-ua-compatible_%application/javascript; charset=utf-8\443:quic,p=1TgzipSGSE]1; mode=block_Sat, 02 May 2015 09:36:58 GMTQ*_private, max-age=1800_Sat, 02 May 2015 09:36:58 GMT_max-age=10886400Wnosniff_""e210ac97d5b0e7294f0fffafe6d5f34d"ZSAMEORIGIN_IE=edge, chrome=1Ò+,rs\NSDictionary¢r/ÿÿÿÿÿÿÿÿ_application/javascriptÒ+,wx_NSHTTPURLResponse£yz/_NSHTTPURLResponse]NSURLResponse_NSKeyedArchiverÑ}~_WebResourceResponse€    # - 2 7 c i „ ‡ ‹  ‘ ” ˜ › ¢ ¥ ¨ « ® ± ³ µ · ¹ » ¼ ¾ À Â Ä Æ È Ê Ñ Ù å ç é ë#,25>GIKRZetvxz|~€‚„†ˆŠŒŸ¡£¥§©«­¯±³µ·¹»½Êßòù*8=Yrw‰›ÃĞÕÙç	!AT\Œ ¥²µ¾×Üğô(+A                           C_application/javascriptÔ	ÅÆ9Ç_-https://b.st-hatena.com/js/bookmark_button.jsOvbplist00ÔklX$versionX$objectsY$archiverT$top † ¯!#)*0123MNOPQRSTUVWXYZ[\]^_`adefU$nullİ	
 !"R$6S$10R$2R$7R$3S$11R$8V$classR$4R$9R$0R$5R$1€	€€€€ €€€Ó$%&'(WNS.base[NS.relative€ €€_-https://b.st-hatena.com/js/bookmark_button.jsÒ+,-.Z$classnameX$classesUNSURL¢-/XNSObject#AºôÒ:‘Ê ÈÓ456ALWNS.keysZNS.objectsª789:;<=>?@€	€
€€€€€€€€ªBCDEFGHIJK€€€€€€€€€€€ZConnection\Content-TypeVServer]Last-ModifiedWExpiresTVaryTDate_Content-Encoding]Cache-Control_Transfer-EncodingZkeep-alive_application/x-javascriptUnginx_Fri, 01 May 2015 08:31:09 GMT_Sun, 03 May 2015 09:36:59 GMT_Accept-Encoding_Sat, 02 May 2015 09:36:59 GMTTgzip]max-age=86400XIdentityÒ+,bc\NSDictionary¢b/ÿÿÿÿÿÿÿÿ_application/x-javascriptÒ+,gh_NSHTTPURLResponse£ij/_NSHTTPURLResponse]NSURLResponse_NSKeyedArchiverÑmn_WebResourceResponse€    # - 2 7 [ a |  ƒ † ‰ Œ  “ š    £ ¦ © « ­ ¯ ± ³ ´ ¶ ¸ º ¼ ¾ À Â É Ñ İ ß á ã#,25>GIKRZeprtvxz|~€‚„‘“•—™›Ÿ¡£¥°½ÄÒÚßä÷$?Ee…—·¼ÊÓØåèñ%)=K]`v             o              x_application/x-javascriptÕ	'ÉÊËÌ_'https://www.google.com/recaptcha/api.jsO˜bplist00ÔopX$versionX$objectsY$archiverT$top † ¯##)*0123OPQRSTUVWXYZ[\]^_`abcdehijU$nullİ	
 !"R$6S$10R$2R$7R$3S$11R$8V$classR$4R$9R$0R$5R$1€	€€€ €"€€!€Ó$%&'(WNS.base[NS.relative€ €€_'https://www.google.com/recaptcha/api.jsÒ+,-.Z$classnameX$classesUNSURL¢-/XNSObject#AºôÒˆÎY\ ÈÓ456BNWNS.keysZNS.objects«789:;<=>?@A€	€
€€€€€€€€€«CDEFGHIJKLM€€€€€€€€€€€€_x-content-type-options\Content-TypeVServer_alternate-protocolTDate_x-frame-options_x-xss-protection_Content-Encoding^Content-LengthWExpires]Cache-ControlWnosniff_text/javascript; charset=UTF-8SGSE\443:quic,p=1_Sat, 02 May 2015 09:38:16 GMTZSAMEORIGIN]1; mode=blockTgzipS325_Sat, 02 May 2015 09:38:16 GMT_private, max-age=0Ò+,fg\NSDictionary¢f/_text/javascriptÒ+,kl_NSHTTPURLResponse£mn/_NSHTTPURLResponse]NSURLResponse_NSKeyedArchiverÑqr_WebResourceResponse€    # - 2 7 ] c ~  … ˆ ‹  ’ • œ Ÿ ¢ ¥ ¨ « ­ ¯ ± ³ µ ¶ ¸ º ¼ ¾ À Â Ä Ë Ó ß á ã å(.1:CEGNVamoqsuwy{}ƒ‘“•—™›Ÿ¡£¥§ÀÍÔéî &5=KStx…¥°¾ÃÇçü&+?CWewz             s              ’O/* PLEASE DO NOT COPY AND PASTE THIS CODE. */(function() {if (!window['___grecaptcha_cfg']) { window['___grecaptcha_cfg'] = {}; };if (!window['___grecaptcha_cfg']['render']) { window['___grecaptcha_cfg']['render'] = 'onload'; };window['__google_recaptcha_client'] = true;var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;po.src = 'https://www.gstatic.com/recaptcha/api2/r20150429132001/recaptcha__ja.js';var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);})();_text/javascriptÕ	'ÎÏĞÑ_Dhttp://blog.hatena.ne.jp/js?version=f95a219773244f14c2c322979e39f67bO„bplist00ÔX$versionX$objectsY$archiverT$top † ¯3#)*0123_`abcdefghijklmnopqrstuvwxyz{|}~€‚ƒ„…ˆ‰ŠU$nullİ	
 !"R$6S$10R$2R$7R$3S$11R$8V$classR$4R$9R$0R$5R$1€	€€€0€2€€1€Ó$%&'(WNS.base[NS.relative€ €€_Dhttp://blog.hatena.ne.jp/js?version=f95a219773244f14c2c322979e39f67bÒ+,-.Z$classnameX$classesUNSURL¢-/XNSObject#AºôÒ:œ+ ÈÓ456J^WNS.keysZNS.objects¯789:;<=>?@ABCDEFGHI€	€
€€€€€€€€€€€€€€€€€¯KLMNOPQRSTUVWXYZ[\]€€€€€ €!€"€#€$€%€&€'€(€)€*€+€,€-€.€/\Content-TypeSP3P]Last-ModifiedYX-Runtime_Content-EncodingVServer_X-XSS-ProtectionWExpires_Transfer-EncodingZSet-Cookie]Cache-Control\X-Page-CacheTDateZX-DispatchZX-RevisionZConnection_X-Content-Type-Options_X-Frame-OptionsTVary_text/javascript; charset=utf-8_CP="OTI CUR OUR BUS STA"_Thu, 01 Jan 1970 00:00:00 GMTX0.017250TgzipUnginxQ1_Fri, 02 May 2025 09:36:58 GMTXIdentity_3sk=6ec6b503f3d622e2957139fc054488954c0f66d9; path=/_-public, max-age=315360000, s-maxage=315360000Shit_Sat, 02 May 2015 09:36:58 GMT_Hatena::Epic::Admin::Static#js_ f95a219773244f14c2c322979e39f67bZkeep-aliveWnosniffTDENY_(Accept-Encoding, Accept-Language, CookieÒ+,†‡\NSDictionary¢†/ÿÿÿÿÿÿÿÿ_text/javascriptÒ+,‹Œ_NSHTTPURLResponse£/_NSHTTPURLResponse]NSURLResponse_NSKeyedArchiverÑ‘’_WebResourceResponse€    # - 2 7 m s  ‘ • ˜ ›  ¢ ¥ ¬ ¯ ² µ ¸ » ½ ¿ Á Ã Å Æ È Ê Ì Î Ğ Ò Ô Û ã ï ñ ó õ<ALU[^gprt{ƒ¤¦¨ª¬®°²´¶¸º¼¾ÀÂÄÆÈÊàâäæèêìîğòôöøúüş '1DK^fz…“ ¥°»Æßñö2R[`fhˆ‘Ç÷û<_jrw¢§´·ÀÒ×ëï#&<             “              >O ¸ü// XXX: twitterã®widget.jsãŒwindow.defineã‚’å®šç¾©ã—ã¦ã„ã‚‹ï¼
//      ãã‚Œã«ã‚ˆã£ã¦ï¼Œjquery.cookieãŒdefineã‚ã‚‹ã¨ãã¯AMDå½¢å¼ã®exportã™ã‚‹ã®ã§ï¼Œjquery.cookieãŒå®šç¾©ã•ã‚Œãªããªã‚‹ï¼
//      ãã®å¯¾ç­–ã¨ã—ã¦ï¼Œå…ˆã«window.defineæ¶ˆã—ã¦ãŠãï¼
window.define = undefined;

/*! jQuery v1.9.1 | (c) 2005, 2012 jQuery Foundation, Inc. | jquery.org/license
//@ sourceMappingURL=jquery.min.map
*/(function(e,t){var n,r,i=typeof t,o=e.document,a=e.location,s=e.jQuery,u=e.$,l={},c=[],p="1.9.1",f=c.concat,d=c.push,h=c.slice,g=c.indexOf,m=l.toString,y=l.hasOwnProperty,v=p.trim,b=function(e,t){return new b.fn.init(e,t,r)},x=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,w=/\S+/g,T=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,N=/^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/,C=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,k=/^[\],:{}\s]*$/,E=/(?:^|:|,)(?:\s*\[)+/g,S=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,A=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,j=/^-ms-/,D=/-([\da-z])/gi,L=function(e,t){return t.toUpperCase()},H=function(e){(o.addEventListener||"load"===e.type||"complete"===o.readyState)&&(q(),b.ready())},q=function(){o.addEventListener?(o.removeEventListener("DOMContentLoaded",H,!1),e.removeEventListener("load",H,!1)):(o.detachEvent("onreadystatechange",H),e.detachEvent("onload",H))};b.fn=b.prototype={jquery:p,constructor:b,init:function(e,n,r){var i,a;if(!e)return this;if("string"==typeof e){if(i="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:N.exec(e),!i||!i[1]&&n)return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e);if(i[1]){if(n=n instanceof b?n[0]:n,b.merge(this,b.parseHTML(i[1],n&&n.nodeType?n.ownerDocument||n:o,!0)),C.test(i[1])&&b.isPlainObject(n))for(i in n)b.isFunction(this[i])?this[i](n[i]):this.attr(i,n[i]);return this}if(a=o.getElementById(i[2]),a&&a.parentNode){if(a.id!==i[2])return r.find(e);this.length=1,this[0]=a}return this.context=o,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):b.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),b.makeArray(e,this))},selector:"",length:0,size:function(){return this.length},toArray:function(){return h.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e){var t=b.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return b.each(this,e,t)},ready:function(e){return b.ready.promise().done(e),this},slice:function(){return this.pushStack(h.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},map:function(e){return this.pushStack(b.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:d,sort:[].sort,splice:[].splice},b.fn.init.prototype=b.fn,b.extend=b.fn.extend=function(){var e,n,r,i,o,a,s=arguments[0]||{},u=1,l=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[1]||{},u=2),"object"==typeof s||b.isFunction(s)||(s={}),l===u&&(s=this,--u);l>u;u++)if(null!=(o=arguments[u]))for(i in o)e=s[i],r=o[i],s!==r&&(c&&r&&(b.isPlainObject(r)||(n=b.isArray(r)))?(n?(n=!1,a=e&&b.isArray(e)?e:[]):a=e&&b.isPlainObject(e)?e:{},s[i]=b.extend(c,a,r)):r!==t&&(s[i]=r));return s},b.extend({noConflict:function(t){return e.$===b&&(e.$=u),t&&e.jQuery===b&&(e.jQuery=s),b},isReady:!1,readyWait:1,holdReady:function(e){e?b.readyWait++:b.ready(!0)},ready:function(e){if(e===!0?!--b.readyWait:!b.isReady){if(!o.body)return setTimeout(b.ready);b.isReady=!0,e!==!0&&--b.readyWait>0||(n.resolveWith(o,[b]),b.fn.trigger&&b(o).trigger("ready").off("ready"))}},isFunction:function(e){return"function"===b.type(e)},isArray:Array.isArray||function(e){return"array"===b.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?l[m.call(e)]||"object":typeof e},isPlainObject:function(e){if(!e||"object"!==b.type(e)||e.nodeType||b.isWindow(e))return!1;try{if(e.constructor&&!y.call(e,"constructor")&&!y.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var r;for(r in e);return r===t||y.call(e,r)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw Error(e)},parseHTML:function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||o;var r=C.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=b.buildFragment([e],t,i),i&&b(i).remove(),b.merge([],r.childNodes))},parseJSON:function(n){return e.JSON&&e.JSON.parse?e.JSON.parse(n):null===n?n:"string"==typeof n&&(n=b.trim(n),n&&k.test(n.replace(S,"@").replace(A,"]").replace(E,"")))?Function("return "+n)():(b.error("Invalid JSON: "+n),t)},parseXML:function(n){var r,i;if(!n||"string"!=typeof n)return null;try{e.DOMParser?(i=new DOMParser,r=i.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(o){r=t}return r&&r.documentElement&&!r.getElementsByTagName("parsererror").length||b.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&b.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(j,"ms-").replace(D,L)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,o=e.length,a=M(e);if(n){if(a){for(;o>i;i++)if(r=t.apply(e[i],n),r===!1)break}else for(i in e)if(r=t.apply(e[i],n),r===!1)break}else if(a){for(;o>i;i++)if(r=t.call(e[i],i,e[i]),r===!1)break}else for(i in e)if(r=t.call(e[i],i,e[i]),r===!1)break;return e},trim:v&&!v.call("\ufeff\u00a0")?function(e){return null==e?"":v.call(e)}:function(e){return null==e?"":(e+"").replace(T,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(M(Object(e))?b.merge(n,"string"==typeof e?[e]:e):d.call(n,e)),n},inArray:function(e,t,n){var r;if(t){if(g)return g.call(t,e,n);for(r=t.length,n=n?0>n?Math.max(0,r+n):n:0;r>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,i=e.length,o=0;if("number"==typeof r)for(;r>o;o++)e[i++]=n[o];else while(n[o]!==t)e[i++]=n[o++];return e.length=i,e},grep:function(e,t,n){var r,i=[],o=0,a=e.length;for(n=!!n;a>o;o++)r=!!t(e[o],o),n!==r&&i.push(e[o]);return i},map:function(e,t,n){var r,i=0,o=e.length,a=M(e),s=[];if(a)for(;o>i;i++)r=t(e[i],i,n),null!=r&&(s[s.length]=r);else for(i in e)r=t(e[i],i,n),null!=r&&(s[s.length]=r);return f.apply([],s)},guid:1,proxy:function(e,n){var r,i,o;return"string"==typeof n&&(o=e[n],n=e,e=o),b.isFunction(e)?(r=h.call(arguments,2),i=function(){return e.apply(n||this,r.concat(h.call(arguments)))},i.guid=e.guid=e.guid||b.guid++,i):t},access:function(e,n,r,i,o,a,s){var u=0,l=e.length,c=null==r;if("object"===b.type(r)){o=!0;for(u in r)b.access(e,n,u,r[u],!0,a,s)}else if(i!==t&&(o=!0,b.isFunction(i)||(s=!0),c&&(s?(n.call(e,i),n=null):(c=n,n=function(e,t,n){return c.call(b(e),n)})),n))for(;l>u;u++)n(e[u],r,s?i:i.call(e[u],u,n(e[u],r)));return o?e:c?n.call(e):l?n(e[0],r):a},now:function(){return(new Date).getTime()}}),b.ready.promise=function(t){if(!n)if(n=b.Deferred(),"complete"===o.readyState)setTimeout(b.ready);else if(o.addEventListener)o.addEventListener("DOMContentLoaded",H,!1),e.addEventListener("load",H,!1);else{o.attachEvent("onreadystatechange",H),e.attachEvent("onload",H);var r=!1;try{r=null==e.frameElement&&o.documentElement}catch(i){}r&&r.doScroll&&function a(){if(!b.isReady){try{r.doScroll("left")}catch(e){return setTimeout(a,50)}q(),b.ready()}}()}return n.promise(t)},b.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){l["[object "+t+"]"]=t.toLowerCase()});function M(e){var t=e.length,n=b.type(e);return b.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||"function"!==n&&(0===t||"number"==typeof t&&t>0&&t-1 in e)}r=b(o);var _={};function F(e){var t=_[e]={};return b.each(e.match(w)||[],function(e,n){t[n]=!0}),t}b.Callbacks=function(e){e="string"==typeof e?_[e]||F(e):b.extend({},e);var n,r,i,o,a,s,u=[],l=!e.once&&[],c=function(t){for(r=e.memory&&t,i=!0,a=s||0,s=0,o=u.length,n=!0;u&&o>a;a++)if(u[a].apply(t[0],t[1])===!1&&e.stopOnFalse){r=!1;break}n=!1,u&&(l?l.length&&c(l.shift()):r?u=[]:p.disable())},p={add:function(){if(u){var t=u.length;(function i(t){b.each(t,function(t,n){var r=b.type(n);"function"===r?e.unique&&p.has(n)||u.push(n):n&&n.length&&"string"!==r&&i(n)})})(arguments),n?o=u.length:r&&(s=t,c(r))}return this},remove:function(){return u&&b.each(arguments,function(e,t){var r;while((r=b.inArray(t,u,r))>-1)u.splice(r,1),n&&(o>=r&&o--,a>=r&&a--)}),this},has:function(e){return e?b.inArray(e,u)>-1:!(!u||!u.length)},empty:function(){return u=[],this},disable:function(){return u=l=r=t,this},disabled:function(){return!u},lock:function(){return l=t,r||p.disable(),this},locked:function(){return!l},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],!u||i&&!l||(n?l.push(t):c(t)),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!i}};return p},b.extend({Deferred:function(e){var t=[["resolve","done",b.Callbacks("once memory"),"resolved"],["reject","fail",b.Callbacks("once memory"),"rejected"],["notify","progress",b.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return b.Deferred(function(n){b.each(t,function(t,o){var a=o[0],s=b.isFunction(e[t])&&e[t];i[o[1]](function(){var e=s&&s.apply(this,arguments);e&&b.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[a+"With"](this===r?n.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?b.extend(e,r):r}},i={};return r.pipe=r.then,b.each(t,function(e,o){var a=o[2],s=o[3];r[o[1]]=a.add,s&&a.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this},i[o[0]+"With"]=a.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=h.call(arguments),r=n.length,i=1!==r||e&&b.isFunction(e.promise)?r:0,o=1===i?e:b.Deferred(),a=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?h.call(arguments):r,n===s?o.notifyWith(t,n):--i||o.resolveWith(t,n)}},s,u,l;if(r>1)for(s=Array(r),u=Array(r),l=Array(r);r>t;t++)n[t]&&b.isFunction(n[t].promise)?n[t].promise().done(a(t,l,n)).fail(o.reject).progress(a(t,u,s)):--i;return i||o.resolveWith(l,n),o.promise()}}),b.support=function(){var t,n,r,a,s,u,l,c,p,f,d=o.createElement("div");if(d.setAttribute("className","t"),d.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=d.getElementsByTagName("*"),r=d.getElementsByTagName("a")[0],!n||!r||!n.length)return{};s=o.createElement("select"),l=s.appendChild(o.createElement("option")),a=d.getElementsByTagName("input")[0],r.style.cssText="top:1px;float:left;opacity:.5",t={getSetAttribute:"t"!==d.className,leadingWhitespace:3===d.firstChild.nodeType,tbody:!d.getElementsByTagName("tbody").length,htmlSerialize:!!d.getElementsByTagName("link").length,style:/top/.test(r.getAttribute("style")),hrefNormalized:"/a"===r.getAttribute("href"),opacity:/^0.5/.test(r.style.opacity),cssFloat:!!r.style.cssFloat,checkOn:!!a.value,optSelected:l.selected,enctype:!!o.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==o.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===o.compatMode,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},a.checked=!0,t.noCloneChecked=a.cloneNode(!0).checked,s.disabled=!0,t.optDisabled=!l.disabled;try{delete d.test}catch(h){t.deleteExpando=!1}a=o.createElement("input"),a.setAttribute("value",""),t.input=""===a.getAttribute("value"),a.value="t",a.setAttribute("type","radio"),t.radioValue="t"===a.value,a.setAttribute("checked","t"),a.setAttribute("name","t"),u=o.createDocumentFragment(),u.appendChild(a),t.appendChecked=a.checked,t.checkClone=u.cloneNode(!0).cloneNode(!0).lastChild.checked,d.attachEvent&&(d.attachEvent("onclick",function(){t.noCloneEvent=!1}),d.cloneNode(!0).click());for(f in{submit:!0,change:!0,focusin:!0})d.setAttribute(c="on"+f,"t"),t[f+"Bubbles"]=c in e||d.attributes[c].expando===!1;return d.style.backgroundClip="content-box",d.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle="content-box"===d.style.backgroundClip,b(function(){var n,r,a,s="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",u=o.getElementsByTagName("body")[0];u&&(n=o.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",u.appendChild(n).appendChild(d),d.innerHTML="<table><tr><td></td><td>t</td></tr></table>",a=d.getElementsByTagName("td"),a[0].style.cssText="padding:0;margin:0;border:0;display:none",p=0===a[0].offsetHeight,a[0].style.display="",a[1].style.display="none",t.reliableHiddenOffsets=p&&0===a[0].offsetHeight,d.innerHTML="",d.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",t.boxSizing=4===d.offsetWidth,t.doesNotIncludeMarginInBodyOffset=1!==u.offsetTop,e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(d,null)||{}).top,t.boxSizingReliable="4px"===(e.getComputedStyle(d,null)||{width:"4px"}).width,r=d.appendChild(o.createElement("div")),r.style.cssText=d.style.cssText=s,r.style.marginRight=r.style.width="0",d.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(r,null)||{}).marginRight)),typeof d.style.zoom!==i&&(d.innerHTML="",d.style.cssText=s+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=3===d.offsetWidth,d.style.display="block",d.innerHTML="<div></div>",d.firstChild.style.width="5px",t.shrinkWrapBlocks=3!==d.offsetWidth,t.inlineBlockNeedsLayout&&(u.style.zoom=1)),u.removeChild(n),n=d=a=r=null)}),n=s=u=l=r=a=null,t}();var O=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,B=/([A-Z])/g;function P(e,n,r,i){if(b.acceptData(e)){var o,a,s=b.expando,u="string"==typeof n,l=e.nodeType,p=l?b.cache:e,f=l?e[s]:e[s]&&s;if(f&&p[f]&&(i||p[f].data)||!u||r!==t)return f||(l?e[s]=f=c.pop()||b.guid++:f=s),p[f]||(p[f]={},l||(p[f].toJSON=b.noop)),("object"==typeof n||"function"==typeof n)&&(i?p[f]=b.extend(p[f],n):p[f].data=b.extend(p[f].data,n)),o=p[f],i||(o.data||(o.data={}),o=o.data),r!==t&&(o[b.camelCase(n)]=r),u?(a=o[n],null==a&&(a=o[b.camelCase(n)])):a=o,a}}function R(e,t,n){if(b.acceptData(e)){var r,i,o,a=e.nodeType,s=a?b.cache:e,u=a?e[b.expando]:b.expando;if(s[u]){if(t&&(o=n?s[u]:s[u].data)){b.isArray(t)?t=t.concat(b.map(t,b.camelCase)):t in o?t=[t]:(t=b.camelCase(t),t=t in o?[t]:t.split(" "));for(r=0,i=t.length;i>r;r++)delete o[t[r]];if(!(n?$:b.isEmptyObject)(o))return}(n||(delete s[u].data,$(s[u])))&&(a?b.cleanData([e],!0):b.support.deleteExpando||s!=s.window?delete s[u]:s[u]=null)}}}b.extend({cache:{},expando:"jQuery"+(p+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?b.cache[e[b.expando]]:e[b.expando],!!e&&!$(e)},data:function(e,t,n){return P(e,t,n)},removeData:function(e,t){return R(e,t)},_data:function(e,t,n){return P(e,t,n,!0)},_removeData:function(e,t){return R(e,t,!0)},acceptData:function(e){if(e.nodeType&&1!==e.nodeType&&9!==e.nodeType)return!1;var t=e.nodeName&&b.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),b.fn.extend({data:function(e,n){var r,i,o=this[0],a=0,s=null;if(e===t){if(this.length&&(s=b.data(o),1===o.nodeType&&!b._data(o,"parsedAttrs"))){for(r=o.attributes;r.length>a;a++)i=r[a].name,i.indexOf("data-")||(i=b.camelCase(i.slice(5)),W(o,i,s[i]));b._data(o,"parsedAttrs",!0)}return s}return"object"==typeof e?this.each(function(){b.data(this,e)}):b.access(this,function(n){return n===t?o?W(o,e,b.data(o,e)):null:(this.each(function(){b.data(this,e,n)}),t)},null,n,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){b.removeData(this,e)})}});function W(e,n,r){if(r===t&&1===e.nodeType){var i="data-"+n.replace(B,"-$1").toLowerCase();if(r=e.getAttribute(i),"string"==typeof r){try{r="true"===r?!0:"false"===r?!1:"null"===r?null:+r+""===r?+r:O.test(r)?b.parseJSON(r):r}catch(o){}b.data(e,n,r)}else r=t}return r}function $(e){var t;for(t in e)if(("data"!==t||!b.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}b.extend({queue:function(e,n,r){var i;return e?(n=(n||"fx")+"queue",i=b._data(e,n),r&&(!i||b.isArray(r)?i=b._data(e,n,b.makeArray(r)):i.push(r)),i||[]):t},dequeue:function(e,t){t=t||"fx";var n=b.queue(e,t),r=n.length,i=n.shift(),o=b._queueHooks(e,t),a=function(){b.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),o.cur=i,i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,a,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return b._data(e,n)||b._data(e,n,{empty:b.Callbacks("once memory").add(function(){b._removeData(e,t+"queue"),b._removeData(e,n)})})}}),b.fn.extend({queue:function(e,n){var r=2;return"string"!=typeof e&&(n=e,e="fx",r--),r>arguments.length?b.queue(this[0],e):n===t?this:this.each(function(){var t=b.queue(this,e,n);b._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&b.dequeue(this,e)})},dequeue:function(e){return this.each(function(){b.dequeue(this,e)})},delay:function(e,t){return e=b.fx?b.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var r,i=1,o=b.Deferred(),a=this,s=this.length,u=function(){--i||o.resolveWith(a,[a])};"string"!=typeof e&&(n=e,e=t),e=e||"fx";while(s--)r=b._data(a[s],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(u));return u(),o.promise(n)}});var I,z,X=/[\t\r\n]/g,U=/\r/g,V=/^(?:input|select|textarea|button|object)$/i,Y=/^(?:a|area)$/i,J=/^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i,G=/^(?:checked|selected)$/i,Q=b.support.getSetAttribute,K=b.support.input;b.fn.extend({attr:function(e,t){return b.access(this,b.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){b.removeAttr(this,e)})},prop:function(e,t){return b.access(this,b.prop,e,t,arguments.length>1)},removeProp:function(e){return e=b.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,o,a=0,s=this.length,u="string"==typeof e&&e;if(b.isFunction(e))return this.each(function(t){b(this).addClass(e.call(this,t,this.className))});if(u)for(t=(e||"").match(w)||[];s>a;a++)if(n=this[a],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(X," "):" ")){o=0;while(i=t[o++])0>r.indexOf(" "+i+" ")&&(r+=i+" ");n.className=b.trim(r)}return this},removeClass:function(e){var t,n,r,i,o,a=0,s=this.length,u=0===arguments.length||"string"==typeof e&&e;if(b.isFunction(e))return this.each(function(t){b(this).removeClass(e.call(this,t,this.className))});if(u)for(t=(e||"").match(w)||[];s>a;a++)if(n=this[a],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(X," "):"")){o=0;while(i=t[o++])while(r.indexOf(" "+i+" ")>=0)r=r.replace(" "+i+" "," ");n.className=e?b.trim(r):""}return this},toggleClass:function(e,t){var n=typeof e,r="boolean"==typeof t;return b.isFunction(e)?this.each(function(n){b(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n){var o,a=0,s=b(this),u=t,l=e.match(w)||[];while(o=l[a++])u=r?u:!s.hasClass(o),s[u?"addClass":"removeClass"](o)}else(n===i||"boolean"===n)&&(this.className&&b._data(this,"__className__",this.className),this.className=this.className||e===!1?"":b._data(this,"__className__")||"")})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(X," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,r,i,o=this[0];{if(arguments.length)return i=b.isFunction(e),this.each(function(n){var o,a=b(this);1===this.nodeType&&(o=i?e.call(this,n,a.val()):e,null==o?o="":"number"==typeof o?o+="":b.isArray(o)&&(o=b.map(o,function(e){return null==e?"":e+""})),r=b.valHooks[this.type]||b.valHooks[this.nodeName.toLowerCase()],r&&"set"in r&&r.set(this,o,"value")!==t||(this.value=o))});if(o)return r=b.valHooks[o.type]||b.valHooks[o.nodeName.toLowerCase()],r&&"get"in r&&(n=r.get(o,"value"))!==t?n:(n=o.value,"string"==typeof n?n.replace(U,""):null==n?"":n)}}}),b.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,r=e.options,i=e.selectedIndex,o="select-one"===e.type||0>i,a=o?null:[],s=o?i+1:r.length,u=0>i?s:o?i:0;for(;s>u;u++)if(n=r[u],!(!n.selected&&u!==i||(b.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&b.nodeName(n.parentNode,"optgroup"))){if(t=b(n).val(),o)return t;a.push(t)}return a},set:function(e,t){var n=b.makeArray(t);return b(e).find("option").each(function(){this.selected=b.inArray(b(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attr:function(e,n,r){var o,a,s,u=e.nodeType;if(e&&3!==u&&8!==u&&2!==u)return typeof e.getAttribute===i?b.prop(e,n,r):(a=1!==u||!b.isXMLDoc(e),a&&(n=n.toLowerCase(),o=b.attrHooks[n]||(J.test(n)?z:I)),r===t?o&&a&&"get"in o&&null!==(s=o.get(e,n))?s:(typeof e.getAttribute!==i&&(s=e.getAttribute(n)),null==s?t:s):null!==r?o&&a&&"set"in o&&(s=o.set(e,r,n))!==t?s:(e.setAttribute(n,r+""),r):(b.removeAttr(e,n),t))},removeAttr:function(e,t){var n,r,i=0,o=t&&t.match(w);if(o&&1===e.nodeType)while(n=o[i++])r=b.propFix[n]||n,J.test(n)?!Q&&G.test(n)?e[b.camelCase("default-"+n)]=e[r]=!1:e[r]=!1:b.attr(e,n,""),e.removeAttribute(Q?n:r)},attrHooks:{type:{set:function(e,t){if(!b.support.radioValue&&"radio"===t&&b.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,r){var i,o,a,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return a=1!==s||!b.isXMLDoc(e),a&&(n=b.propFix[n]||n,o=b.propHooks[n]),r!==t?o&&"set"in o&&(i=o.set(e,r,n))!==t?i:e[n]=r:o&&"get"in o&&null!==(i=o.get(e,n))?i:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):V.test(e.nodeName)||Y.test(e.nodeName)&&e.href?0:t}}}}),z={get:function(e,n){var r=b.prop(e,n),i="boolean"==typeof r&&e.getAttribute(n),o="boolean"==typeof r?K&&Q?null!=i:G.test(n)?e[b.camelCase("default-"+n)]:!!i:e.getAttributeNode(n);return o&&o.value!==!1?n.toLowerCase():t},set:function(e,t,n){return t===!1?b.removeAttr(e,n):K&&Q||!G.test(n)?e.setAttribute(!Q&&b.propFix[n]||n,n):e[b.camelCase("default-"+n)]=e[n]=!0,n}},K&&Q||(b.attrHooks.value={get:function(e,n){var r=e.getAttributeNode(n);return b.nodeName(e,"input")?e.defaultValue:r&&r.specified?r.value:t},set:function(e,n,r){return b.nodeName(e,"input")?(e.defaultValue=n,t):I&&I.set(e,n,r)}}),Q||(I=b.valHooks.button={get:function(e,n){var r=e.getAttributeNode(n);return r&&("id"===n||"name"===n||"coords"===n?""!==r.value:r.specified)?r.value:t},set:function(e,n,r){var i=e.getAttributeNode(r);return i||e.setAttributeNode(i=e.ownerDocument.createAttribute(r)),i.value=n+="","value"===r||n===e.getAttribute(r)?n:t}},b.attrHooks.contenteditable={get:I.get,set:function(e,t,n){I.set(e,""===t?!1:t,n)}},b.each(["width","height"],function(e,n){b.attrHooks[n]=b.extend(b.attrHooks[n],{set:function(e,r){return""===r?(e.setAttribute(n,"auto"),r):t}})})),b.support.hrefNormalized||(b.each(["href","src","width","height"],function(e,n){b.attrHooks[n]=b.extend(b.attrHooks[n],{get:function(e){var r=e.getAttribute(n,2);return null==r?t:r}})}),b.each(["href","src"],function(e,t){b.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}})),b.support.style||(b.attrHooks.style={get:function(e){return e.style.cssText||t},set:function(e,t){return e.style.cssText=t+""}}),b.support.optSelected||(b.propHooks.selected=b.extend(b.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),b.support.enctype||(b.propFix.enctype="encoding"),b.support.checkOn||b.each(["radio","checkbox"],function(){b.valHooks[this]={get:function(e){return null===e.getAttribute("value")?"on":e.value}}}),b.each(["radio","checkbox"],function(){b.valHooks[this]=b.extend(b.valHooks[this],{set:function(e,n){return b.isArray(n)?e.checked=b.inArray(b(e).val(),n)>=0:t}})});var Z=/^(?:input|select|textarea)$/i,et=/^key/,tt=/^(?:mouse|contextmenu)|click/,nt=/^(?:focusinfocus|focusoutblur)$/,rt=/^([^.]*)(?:\.(.+)|)$/;function it(){return!0}function ot(){return!1}b.event={global:{},add:function(e,n,r,o,a){var s,u,l,c,p,f,d,h,g,m,y,v=b._data(e);if(v){r.handler&&(c=r,r=c.handler,a=c.selector),r.guid||(r.guid=b.guid++),(u=v.events)||(u=v.events={}),(f=v.handle)||(f=v.handle=function(e){return typeof b===i||e&&b.event.triggered===e.type?t:b.event.dispatch.apply(f.elem,arguments)},f.elem=e),n=(n||"").match(w)||[""],l=n.length;while(l--)s=rt.exec(n[l])||[],g=y=s[1],m=(s[2]||"").split(".").sort(),p=b.event.special[g]||{},g=(a?p.delegateType:p.bindType)||g,p=b.event.special[g]||{},d=b.extend({type:g,origType:y,data:o,handler:r,guid:r.guid,selector:a,needsContext:a&&b.expr.match.needsContext.test(a),namespace:m.join(".")},c),(h=u[g])||(h=u[g]=[],h.delegateCount=0,p.setup&&p.setup.call(e,o,m,f)!==!1||(e.addEventListener?e.addEventListener(g,f,!1):e.attachEvent&&e.attachEvent("on"+g,f))),p.add&&(p.add.call(e,d),d.handler.guid||(d.handler.guid=r.guid)),a?h.splice(h.delegateCount++,0,d):h.push(d),b.event.global[g]=!0;e=null}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,p,f,d,h,g,m=b.hasData(e)&&b._data(e);if(m&&(c=m.events)){t=(t||"").match(w)||[""],l=t.length;while(l--)if(s=rt.exec(t[l])||[],d=g=s[1],h=(s[2]||"").split(".").sort(),d){p=b.event.special[d]||{},d=(r?p.delegateType:p.bindType)||d,f=c[d]||[],s=s[2]&&RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),u=o=f.length;while(o--)a=f[o],!i&&g!==a.origType||n&&n.guid!==a.guid||s&&!s.test(a.namespace)||r&&r!==a.selector&&("**"!==r||!a.selector)||(f.splice(o,1),a.selector&&f.delegateCount--,p.remove&&p.remove.call(e,a));u&&!f.length&&(p.teardown&&p.teardown.call(e,h,m.handle)!==!1||b.removeEvent(e,d,m.handle),delete c[d])}else for(d in c)b.event.remove(e,d+t[l],n,r,!0);b.isEmptyObject(c)&&(delete m.handle,b._removeData(e,"events"))}},trigger:function(n,r,i,a){var s,u,l,c,p,f,d,h=[i||o],g=y.call(n,"type")?n.type:n,m=y.call(n,"namespace")?n.namespace.split("."):[];if(l=f=i=i||o,3!==i.nodeType&&8!==i.nodeType&&!nt.test(g+b.event.triggered)&&(g.indexOf(".")>=0&&(m=g.split("."),g=m.shift(),m.sort()),u=0>g.indexOf(":")&&"on"+g,n=n[b.expando]?n:new b.Event(g,"object"==typeof n&&n),n.isTrigger=!0,n.namespace=m.join("."),n.namespace_re=n.namespace?RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=t,n.target||(n.target=i),r=null==r?[n]:b.makeArray(r,[n]),p=b.event.special[g]||{},a||!p.trigger||p.trigger.apply(i,r)!==!1)){if(!a&&!p.noBubble&&!b.isWindow(i)){for(c=p.delegateType||g,nt.test(c+g)||(l=l.parentNode);l;l=l.parentNode)h.push(l),f=l;f===(i.ownerDocument||o)&&h.push(f.defaultView||f.parentWindow||e)}d=0;while((l=h[d++])&&!n.isPropagationStopped())n.type=d>1?c:p.bindType||g,s=(b._data(l,"events")||{})[n.type]&&b._data(l,"handle"),s&&s.apply(l,r),s=u&&l[u],s&&b.acceptData(l)&&s.apply&&s.apply(l,r)===!1&&n.preventDefault();if(n.type=g,!(a||n.isDefaultPrevented()||p._default&&p._default.apply(i.ownerDocument,r)!==!1||"click"===g&&b.nodeName(i,"a")||!b.acceptData(i)||!u||!i[g]||b.isWindow(i))){f=i[u],f&&(i[u]=null),b.event.triggered=g;try{i[g]()}catch(v){}b.event.triggered=t,f&&(i[u]=f)}return n.result}},dispatch:function(e){e=b.event.fix(e);var n,r,i,o,a,s=[],u=h.call(arguments),l=(b._data(this,"events")||{})[e.type]||[],c=b.event.special[e.type]||{};if(u[0]=e,e.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,e)!==!1){s=b.event.handlers.call(this,e,l),n=0;while((o=s[n++])&&!e.isPropagationStopped()){e.currentTarget=o.elem,a=0;while((i=o.handlers[a++])&&!e.isImmediatePropagationStopped())(!e.namespace_re||e.namespace_re.test(i.namespace))&&(e.handleObj=i,e.data=i.data,r=((b.event.special[i.origType]||{}).handle||i.handler).apply(o.elem,u),r!==t&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,n){var r,i,o,a,s=[],u=n.delegateCount,l=e.target;if(u&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(l.disabled!==!0||"click"!==e.type)){for(o=[],a=0;u>a;a++)i=n[a],r=i.selector+" ",o[r]===t&&(o[r]=i.needsContext?b(r,this).index(l)>=0:b.find(r,this,null,[l]).length),o[r]&&o.push(i);o.length&&s.push({elem:l,handlers:o})}return n.length>u&&s.push({elem:this,handlers:n.slice(u)}),s},fix:function(e){if(e[b.expando])return e;var t,n,r,i=e.type,a=e,s=this.fixHooks[i];s||(this.fixHooks[i]=s=tt.test(i)?this.mouseHooks:et.test(i)?this.keyHooks:{}),r=s.props?this.props.concat(s.props):this.props,e=new b.Event(a),t=r.length;while(t--)n=r[t],e[n]=a[n];return e.target||(e.target=a.srcElement||o),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,s.filter?s.filter(e,a):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,i,a,s=n.button,u=n.fromElement;return null==e.pageX&&null!=n.clientX&&(i=e.target.ownerDocument||o,a=i.documentElement,r=i.body,e.pageX=n.clientX+(a&&a.scrollLeft||r&&r.scrollLeft||0)-(a&&a.clientLeft||r&&r.clientLeft||0),e.pageY=n.clientY+(a&&a.scrollTop||r&&r.scrollTop||0)-(a&&a.clientTop||r&&r.clientTop||0)),!e.relatedTarget&&u&&(e.relatedTarget=u===e.target?n.toElement:u),e.which||s===t||(e.which=1&s?1:2&s?3:4&s?2:0),e}},special:{load:{noBubble:!0},click:{trigger:function(){return b.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):t}},focus:{trigger:function(){if(this!==o.activeElement&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===o.activeElement&&this.blur?(this.blur(),!1):t},delegateType:"focusout"},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=b.extend(new b.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?b.event.trigger(i,null,t):b.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},b.removeEvent=o.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]===i&&(e[r]=null),e.detachEvent(r,n))},b.Event=function(e,n){return this instanceof b.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?it:ot):this.type=e,n&&b.extend(this,n),this.timeStamp=e&&e.timeStamp||b.now(),this[b.expando]=!0,t):new b.Event(e,n)},b.Event.prototype={isDefaultPrevented:ot,isPropagationStopped:ot,isImmediatePropagationStopped:ot,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=it,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=it,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=it,this.stopPropagation()}},b.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){b.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;
return(!i||i!==r&&!b.contains(r,i))&&(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),b.support.submitBubbles||(b.event.special.submit={setup:function(){return b.nodeName(this,"form")?!1:(b.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=b.nodeName(n,"input")||b.nodeName(n,"button")?n.form:t;r&&!b._data(r,"submitBubbles")&&(b.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),b._data(r,"submitBubbles",!0))}),t)},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&b.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return b.nodeName(this,"form")?!1:(b.event.remove(this,"._submit"),t)}}),b.support.changeBubbles||(b.event.special.change={setup:function(){return Z.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(b.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),b.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),b.event.simulate("change",this,e,!0)})),!1):(b.event.add(this,"beforeactivate._change",function(e){var t=e.target;Z.test(t.nodeName)&&!b._data(t,"changeBubbles")&&(b.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||b.event.simulate("change",this.parentNode,e,!0)}),b._data(t,"changeBubbles",!0))}),t)},handle:function(e){var n=e.target;return this!==n||e.isSimulated||e.isTrigger||"radio"!==n.type&&"checkbox"!==n.type?e.handleObj.handler.apply(this,arguments):t},teardown:function(){return b.event.remove(this,"._change"),!Z.test(this.nodeName)}}),b.support.focusinBubbles||b.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){b.event.simulate(t,e.target,b.event.fix(e),!0)};b.event.special[t]={setup:function(){0===n++&&o.addEventListener(e,r,!0)},teardown:function(){0===--n&&o.removeEventListener(e,r,!0)}}}),b.fn.extend({on:function(e,n,r,i,o){var a,s;if("object"==typeof e){"string"!=typeof n&&(r=r||n,n=t);for(a in e)this.on(a,n,r,e[a],o);return this}if(null==r&&null==i?(i=n,r=n=t):null==i&&("string"==typeof n?(i=r,r=t):(i=r,r=n,n=t)),i===!1)i=ot;else if(!i)return this;return 1===o&&(s=i,i=function(e){return b().off(e),s.apply(this,arguments)},i.guid=s.guid||(s.guid=b.guid++)),this.each(function(){b.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,o;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,b(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(o in e)this.off(o,n,e[o]);return this}return(n===!1||"function"==typeof n)&&(r=n,n=t),r===!1&&(r=ot),this.each(function(){b.event.remove(this,e,r,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},trigger:function(e,t){return this.each(function(){b.event.trigger(e,t,this)})},triggerHandler:function(e,n){var r=this[0];return r?b.event.trigger(e,n,r,!0):t}}),function(e,t){var n,r,i,o,a,s,u,l,c,p,f,d,h,g,m,y,v,x="sizzle"+-new Date,w=e.document,T={},N=0,C=0,k=it(),E=it(),S=it(),A=typeof t,j=1<<31,D=[],L=D.pop,H=D.push,q=D.slice,M=D.indexOf||function(e){var t=0,n=this.length;for(;n>t;t++)if(this[t]===e)return t;return-1},_="[\\x20\\t\\r\\n\\f]",F="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",O=F.replace("w","w#"),B="([*^$|!~]?=)",P="\\["+_+"*("+F+")"+_+"*(?:"+B+_+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+O+")|)|)"+_+"*\\]",R=":("+F+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+P.replace(3,8)+")*)|.*)\\)|)",W=RegExp("^"+_+"+|((?:^|[^\\\\])(?:\\\\.)*)"+_+"+$","g"),$=RegExp("^"+_+"*,"+_+"*"),I=RegExp("^"+_+"*([\\x20\\t\\r\\n\\f>+~])"+_+"*"),z=RegExp(R),X=RegExp("^"+O+"$"),U={ID:RegExp("^#("+F+")"),CLASS:RegExp("^\\.("+F+")"),NAME:RegExp("^\\[name=['\"]?("+F+")['\"]?\\]"),TAG:RegExp("^("+F.replace("w","w*")+")"),ATTR:RegExp("^"+P),PSEUDO:RegExp("^"+R),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+_+"*(even|odd|(([+-]|)(\\d*)n|)"+_+"*(?:([+-]|)"+_+"*(\\d+)|))"+_+"*\\)|)","i"),needsContext:RegExp("^"+_+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+_+"*((?:-\\d)?\\d*)"+_+"*\\)|)(?=[^-]|$)","i")},V=/[\x20\t\r\n\f]*[+~]/,Y=/^[^{]+\{\s*\[native code/,J=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,G=/^(?:input|select|textarea|button)$/i,Q=/^h\d$/i,K=/'|\\/g,Z=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,et=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,tt=function(e,t){var n="0x"+t-65536;return n!==n?t:0>n?String.fromCharCode(n+65536):String.fromCharCode(55296|n>>10,56320|1023&n)};try{q.call(w.documentElement.childNodes,0)[0].nodeType}catch(nt){q=function(e){var t,n=[];while(t=this[e++])n.push(t);return n}}function rt(e){return Y.test(e+"")}function it(){var e,t=[];return e=function(n,r){return t.push(n+=" ")>i.cacheLength&&delete e[t.shift()],e[n]=r}}function ot(e){return e[x]=!0,e}function at(e){var t=p.createElement("div");try{return e(t)}catch(n){return!1}finally{t=null}}function st(e,t,n,r){var i,o,a,s,u,l,f,g,m,v;if((t?t.ownerDocument||t:w)!==p&&c(t),t=t||p,n=n||[],!e||"string"!=typeof e)return n;if(1!==(s=t.nodeType)&&9!==s)return[];if(!d&&!r){if(i=J.exec(e))if(a=i[1]){if(9===s){if(o=t.getElementById(a),!o||!o.parentNode)return n;if(o.id===a)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(a))&&y(t,o)&&o.id===a)return n.push(o),n}else{if(i[2])return H.apply(n,q.call(t.getElementsByTagName(e),0)),n;if((a=i[3])&&T.getByClassName&&t.getElementsByClassName)return H.apply(n,q.call(t.getElementsByClassName(a),0)),n}if(T.qsa&&!h.test(e)){if(f=!0,g=x,m=t,v=9===s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){l=ft(e),(f=t.getAttribute("id"))?g=f.replace(K,"\\$&"):t.setAttribute("id",g),g="[id='"+g+"'] ",u=l.length;while(u--)l[u]=g+dt(l[u]);m=V.test(e)&&t.parentNode||t,v=l.join(",")}if(v)try{return H.apply(n,q.call(m.querySelectorAll(v),0)),n}catch(b){}finally{f||t.removeAttribute("id")}}}return wt(e.replace(W,"$1"),t,n,r)}a=st.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},c=st.setDocument=function(e){var n=e?e.ownerDocument||e:w;return n!==p&&9===n.nodeType&&n.documentElement?(p=n,f=n.documentElement,d=a(n),T.tagNameNoComments=at(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),T.attributes=at(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return"boolean"!==t&&"string"!==t}),T.getByClassName=at(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",e.getElementsByClassName&&e.getElementsByClassName("e").length?(e.lastChild.className="e",2===e.getElementsByClassName("e").length):!1}),T.getByName=at(function(e){e.id=x+0,e.innerHTML="<a name='"+x+"'></a><div name='"+x+"'></div>",f.insertBefore(e,f.firstChild);var t=n.getElementsByName&&n.getElementsByName(x).length===2+n.getElementsByName(x+0).length;return T.getIdNotName=!n.getElementById(x),f.removeChild(e),t}),i.attrHandle=at(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==A&&"#"===e.firstChild.getAttribute("href")})?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},T.getIdNotName?(i.find.ID=function(e,t){if(typeof t.getElementById!==A&&!d){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},i.filter.ID=function(e){var t=e.replace(et,tt);return function(e){return e.getAttribute("id")===t}}):(i.find.ID=function(e,n){if(typeof n.getElementById!==A&&!d){var r=n.getElementById(e);return r?r.id===e||typeof r.getAttributeNode!==A&&r.getAttributeNode("id").value===e?[r]:t:[]}},i.filter.ID=function(e){var t=e.replace(et,tt);return function(e){var n=typeof e.getAttributeNode!==A&&e.getAttributeNode("id");return n&&n.value===t}}),i.find.TAG=T.tagNameNoComments?function(e,n){return typeof n.getElementsByTagName!==A?n.getElementsByTagName(e):t}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){while(n=o[i++])1===n.nodeType&&r.push(n);return r}return o},i.find.NAME=T.getByName&&function(e,n){return typeof n.getElementsByName!==A?n.getElementsByName(name):t},i.find.CLASS=T.getByClassName&&function(e,n){return typeof n.getElementsByClassName===A||d?t:n.getElementsByClassName(e)},g=[],h=[":focus"],(T.qsa=rt(n.querySelectorAll))&&(at(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||h.push("\\["+_+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||h.push(":checked")}),at(function(e){e.innerHTML="<input type='hidden' i=''/>",e.querySelectorAll("[i^='']").length&&h.push("[*^$]="+_+"*(?:\"\"|'')"),e.querySelectorAll(":enabled").length||h.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),h.push(",.*:")})),(T.matchesSelector=rt(m=f.matchesSelector||f.mozMatchesSelector||f.webkitMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&at(function(e){T.disconnectedMatch=m.call(e,"div"),m.call(e,"[s!='']:x"),g.push("!=",R)}),h=RegExp(h.join("|")),g=RegExp(g.join("|")),y=rt(f.contains)||f.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},v=f.compareDocumentPosition?function(e,t){var r;return e===t?(u=!0,0):(r=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t))?1&r||e.parentNode&&11===e.parentNode.nodeType?e===n||y(w,e)?-1:t===n||y(w,t)?1:0:4&r?-1:1:e.compareDocumentPosition?-1:1}:function(e,t){var r,i=0,o=e.parentNode,a=t.parentNode,s=[e],l=[t];if(e===t)return u=!0,0;if(!o||!a)return e===n?-1:t===n?1:o?-1:a?1:0;if(o===a)return ut(e,t);r=e;while(r=r.parentNode)s.unshift(r);r=t;while(r=r.parentNode)l.unshift(r);while(s[i]===l[i])i++;return i?ut(s[i],l[i]):s[i]===w?-1:l[i]===w?1:0},u=!1,[0,0].sort(v),T.detectDuplicates=u,p):p},st.matches=function(e,t){return st(e,null,null,t)},st.matchesSelector=function(e,t){if((e.ownerDocument||e)!==p&&c(e),t=t.replace(Z,"='$1']"),!(!T.matchesSelector||d||g&&g.test(t)||h.test(t)))try{var n=m.call(e,t);if(n||T.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(r){}return st(t,p,null,[e]).length>0},st.contains=function(e,t){return(e.ownerDocument||e)!==p&&c(e),y(e,t)},st.attr=function(e,t){var n;return(e.ownerDocument||e)!==p&&c(e),d||(t=t.toLowerCase()),(n=i.attrHandle[t])?n(e):d||T.attributes?e.getAttribute(t):((n=e.getAttributeNode(t))||e.getAttribute(t))&&e[t]===!0?t:n&&n.specified?n.value:null},st.error=function(e){throw Error("Syntax error, unrecognized expression: "+e)},st.uniqueSort=function(e){var t,n=[],r=1,i=0;if(u=!T.detectDuplicates,e.sort(v),u){for(;t=e[r];r++)t===e[r-1]&&(i=n.push(r));while(i--)e.splice(n[i],1)}return e};function ut(e,t){var n=t&&e,r=n&&(~t.sourceIndex||j)-(~e.sourceIndex||j);if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function lt(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function ct(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function pt(e){return ot(function(t){return t=+t,ot(function(n,r){var i,o=e([],n.length,t),a=o.length;while(a--)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}o=st.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r];r++)n+=o(t);return n},i=st.selectors={cacheLength:50,createPseudo:ot,match:U,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(et,tt),e[3]=(e[4]||e[5]||"").replace(et,tt),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||st.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&st.error(e[0]),e},PSEUDO:function(e){var t,n=!e[5]&&e[2];return U.CHILD.test(e[0])?null:(e[4]?e[2]=e[4]:n&&z.test(n)&&(t=ft(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){return"*"===e?function(){return!0}:(e=e.replace(et,tt).toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=k[e+" "];return t||(t=RegExp("(^|"+_+")"+e+"("+_+"|$)"))&&k(e,function(e){return t.test(e.className||typeof e.getAttribute!==A&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=st.attr(r,e);return null==i?"!="===t:t?(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i+" ").indexOf(n)>-1:"|="===t?i===n||i.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,u){var l,c,p,f,d,h,g=o!==a?"nextSibling":"previousSibling",m=t.parentNode,y=s&&t.nodeName.toLowerCase(),v=!u&&!s;if(m){if(o){while(g){p=t;while(p=p[g])if(s?p.nodeName.toLowerCase()===y:1===p.nodeType)return!1;h=g="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?m.firstChild:m.lastChild],a&&v){c=m[x]||(m[x]={}),l=c[e]||[],d=l[0]===N&&l[1],f=l[0]===N&&l[2],p=d&&m.childNodes[d];while(p=++d&&p&&p[g]||(f=d=0)||h.pop())if(1===p.nodeType&&++f&&p===t){c[e]=[N,d,f];break}}else if(v&&(l=(t[x]||(t[x]={}))[e])&&l[0]===N)f=l[1];else while(p=++d&&p&&p[g]||(f=d=0)||h.pop())if((s?p.nodeName.toLowerCase()===y:1===p.nodeType)&&++f&&(v&&((p[x]||(p[x]={}))[e]=[N,f]),p===t))break;return f-=i,f===r||0===f%r&&f/r>=0}}},PSEUDO:function(e,t){var n,r=i.pseudos[e]||i.setFilters[e.toLowerCase()]||st.error("unsupported pseudo: "+e);return r[x]?r(t):r.length>1?(n=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?ot(function(e,n){var i,o=r(e,t),a=o.length;while(a--)i=M.call(e,o[a]),e[i]=!(n[i]=o[a])}):function(e){return r(e,0,n)}):r}},pseudos:{not:ot(function(e){var t=[],n=[],r=s(e.replace(W,"$1"));return r[x]?ot(function(e,t,n,i){var o,a=r(e,null,i,[]),s=e.length;while(s--)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),!n.pop()}}),has:ot(function(e){return function(t){return st(e,t).length>0}}),contains:ot(function(e){return function(t){return(t.textContent||t.innerText||o(t)).indexOf(e)>-1}}),lang:ot(function(e){return X.test(e||"")||st.error("unsupported lang: "+e),e=e.replace(et,tt).toLowerCase(),function(t){var n;do if(n=d?t.getAttribute("xml:lang")||t.getAttribute("lang"):t.lang)return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===f},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!i.pseudos.empty(e)},header:function(e){return Q.test(e.nodeName)},input:function(e){return G.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},first:pt(function(){return[0]}),last:pt(function(e,t){return[t-1]}),eq:pt(function(e,t,n){return[0>n?n+t:n]}),even:pt(function(e,t){var n=0;for(;t>n;n+=2)e.push(n);return e}),odd:pt(function(e,t){var n=1;for(;t>n;n+=2)e.push(n);return e}),lt:pt(function(e,t,n){var r=0>n?n+t:n;for(;--r>=0;)e.push(r);return e}),gt:pt(function(e,t,n){var r=0>n?n+t:n;for(;t>++r;)e.push(r);return e})}};for(n in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[n]=lt(n);for(n in{submit:!0,reset:!0})i.pseudos[n]=ct(n);function ft(e,t){var n,r,o,a,s,u,l,c=E[e+" "];if(c)return t?0:c.slice(0);s=e,u=[],l=i.preFilter;while(s){(!n||(r=$.exec(s)))&&(r&&(s=s.slice(r[0].length)||s),u.push(o=[])),n=!1,(r=I.exec(s))&&(n=r.shift(),o.push({value:n,type:r[0].replace(W," ")}),s=s.slice(n.length));for(a in i.filter)!(r=U[a].exec(s))||l[a]&&!(r=l[a](r))||(n=r.shift(),o.push({value:n,type:a,matches:r}),s=s.slice(n.length));if(!n)break}return t?s.length:s?st.error(e):E(e,u).slice(0)}function dt(e){var t=0,n=e.length,r="";for(;n>t;t++)r+=e[t].value;return r}function ht(e,t,n){var i=t.dir,o=n&&"parentNode"===i,a=C++;return t.first?function(t,n,r){while(t=t[i])if(1===t.nodeType||o)return e(t,n,r)}:function(t,n,s){var u,l,c,p=N+" "+a;if(s){while(t=t[i])if((1===t.nodeType||o)&&e(t,n,s))return!0}else while(t=t[i])if(1===t.nodeType||o)if(c=t[x]||(t[x]={}),(l=c[i])&&l[0]===p){if((u=l[1])===!0||u===r)return u===!0}else if(l=c[i]=[p],l[1]=e(t,n,s)||r,l[1]===!0)return!0}}function gt(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function mt(e,t,n,r,i){var o,a=[],s=0,u=e.length,l=null!=t;for(;u>s;s++)(o=e[s])&&(!n||n(o,r,i))&&(a.push(o),l&&t.push(s));return a}function yt(e,t,n,r,i,o){return r&&!r[x]&&(r=yt(r)),i&&!i[x]&&(i=yt(i,o)),ot(function(o,a,s,u){var l,c,p,f=[],d=[],h=a.length,g=o||xt(t||"*",s.nodeType?[s]:s,[]),m=!e||!o&&t?g:mt(g,f,e,s,u),y=n?i||(o?e:h||r)?[]:a:m;if(n&&n(m,y,s,u),r){l=mt(y,d),r(l,[],s,u),c=l.length;while(c--)(p=l[c])&&(y[d[c]]=!(m[d[c]]=p))}if(o){if(i||e){if(i){l=[],c=y.length;while(c--)(p=y[c])&&l.push(m[c]=p);i(null,y=[],l,u)}c=y.length;while(c--)(p=y[c])&&(l=i?M.call(o,p):f[c])>-1&&(o[l]=!(a[l]=p))}}else y=mt(y===a?y.splice(h,y.length):y),i?i(null,a,y,u):H.apply(a,y)})}function vt(e){var t,n,r,o=e.length,a=i.relative[e[0].type],s=a||i.relative[" "],u=a?1:0,c=ht(function(e){return e===t},s,!0),p=ht(function(e){return M.call(t,e)>-1},s,!0),f=[function(e,n,r){return!a&&(r||n!==l)||((t=n).nodeType?c(e,n,r):p(e,n,r))}];for(;o>u;u++)if(n=i.relative[e[u].type])f=[ht(gt(f),n)];else{if(n=i.filter[e[u].type].apply(null,e[u].matches),n[x]){for(r=++u;o>r;r++)if(i.relative[e[r].type])break;return yt(u>1&&gt(f),u>1&&dt(e.slice(0,u-1)).replace(W,"$1"),n,r>u&&vt(e.slice(u,r)),o>r&&vt(e=e.slice(r)),o>r&&dt(e))}f.push(n)}return gt(f)}function bt(e,t){var n=0,o=t.length>0,a=e.length>0,s=function(s,u,c,f,d){var h,g,m,y=[],v=0,b="0",x=s&&[],w=null!=d,T=l,C=s||a&&i.find.TAG("*",d&&u.parentNode||u),k=N+=null==T?1:Math.random()||.1;for(w&&(l=u!==p&&u,r=n);null!=(h=C[b]);b++){if(a&&h){g=0;while(m=e[g++])if(m(h,u,c)){f.push(h);break}w&&(N=k,r=++n)}o&&((h=!m&&h)&&v--,s&&x.push(h))}if(v+=b,o&&b!==v){g=0;while(m=t[g++])m(x,y,u,c);if(s){if(v>0)while(b--)x[b]||y[b]||(y[b]=L.call(f));y=mt(y)}H.apply(f,y),w&&!s&&y.length>0&&v+t.length>1&&st.uniqueSort(f)}return w&&(N=k,l=T),x};return o?ot(s):s}s=st.compile=function(e,t){var n,r=[],i=[],o=S[e+" "];if(!o){t||(t=ft(e)),n=t.length;while(n--)o=vt(t[n]),o[x]?r.push(o):i.push(o);o=S(e,bt(i,r))}return o};function xt(e,t,n){var r=0,i=t.length;for(;i>r;r++)st(e,t[r],n);return n}function wt(e,t,n,r){var o,a,u,l,c,p=ft(e);if(!r&&1===p.length){if(a=p[0]=p[0].slice(0),a.length>2&&"ID"===(u=a[0]).type&&9===t.nodeType&&!d&&i.relative[a[1].type]){if(t=i.find.ID(u.matches[0].replace(et,tt),t)[0],!t)return n;e=e.slice(a.shift().value.length)}o=U.needsContext.test(e)?0:a.length;while(o--){if(u=a[o],i.relative[l=u.type])break;if((c=i.find[l])&&(r=c(u.matches[0].replace(et,tt),V.test(a[0].type)&&t.parentNode||t))){if(a.splice(o,1),e=r.length&&dt(a),!e)return H.apply(n,q.call(r,0)),n;break}}}return s(e,p)(r,t,d,n,V.test(e)),n}i.pseudos.nth=i.pseudos.eq;function Tt(){}i.filters=Tt.prototype=i.pseudos,i.setFilters=new Tt,c(),st.attr=b.attr,b.find=st,b.expr=st.selectors,b.expr[":"]=b.expr.pseudos,b.unique=st.uniqueSort,b.text=st.getText,b.isXMLDoc=st.isXML,b.contains=st.contains}(e);var at=/Until$/,st=/^(?:parents|prev(?:Until|All))/,ut=/^.[^:#\[\.,]*$/,lt=b.expr.match.needsContext,ct={children:!0,contents:!0,next:!0,prev:!0};b.fn.extend({find:function(e){var t,n,r,i=this.length;if("string"!=typeof e)return r=this,this.pushStack(b(e).filter(function(){for(t=0;i>t;t++)if(b.contains(r[t],this))return!0}));for(n=[],t=0;i>t;t++)b.find(e,this[t],n);return n=this.pushStack(i>1?b.unique(n):n),n.selector=(this.selector?this.selector+" ":"")+e,n},has:function(e){var t,n=b(e,this),r=n.length;return this.filter(function(){for(t=0;r>t;t++)if(b.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(ft(this,e,!1))},filter:function(e){return this.pushStack(ft(this,e,!0))},is:function(e){return!!e&&("string"==typeof e?lt.test(e)?b(e,this.context).index(this[0])>=0:b.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var n,r=0,i=this.length,o=[],a=lt.test(e)||"string"!=typeof e?b(e,t||this.context):0;for(;i>r;r++){n=this[r];while(n&&n.ownerDocument&&n!==t&&11!==n.nodeType){if(a?a.index(n)>-1:b.find.matchesSelector(n,e)){o.push(n);break}n=n.parentNode}}return this.pushStack(o.length>1?b.unique(o):o)},index:function(e){return e?"string"==typeof e?b.inArray(this[0],b(e)):b.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n="string"==typeof e?b(e,t):b.makeArray(e&&e.nodeType?[e]:e),r=b.merge(this.get(),n);return this.pushStack(b.unique(r))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),b.fn.andSelf=b.fn.addBack;function pt(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}b.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return b.dir(e,"parentNode")},parentsUntil:function(e,t,n){return b.dir(e,"parentNode",n)},next:function(e){return pt(e,"nextSibling")},prev:function(e){return pt(e,"previousSibling")},nextAll:function(e){return b.dir(e,"nextSibling")},prevAll:function(e){return b.dir(e,"previousSibling")},nextUntil:function(e,t,n){return b.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return b.dir(e,"previousSibling",n)},siblings:function(e){return b.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return b.sibling(e.firstChild)},contents:function(e){return b.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:b.merge([],e.childNodes)}},function(e,t){b.fn[e]=function(n,r){var i=b.map(this,t,n);return at.test(e)||(r=n),r&&"string"==typeof r&&(i=b.filter(r,i)),i=this.length>1&&!ct[e]?b.unique(i):i,this.length>1&&st.test(e)&&(i=i.reverse()),this.pushStack(i)}}),b.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),1===t.length?b.find.matchesSelector(t[0],e)?[t[0]]:[]:b.find.matches(e,t)},dir:function(e,n,r){var i=[],o=e[n];while(o&&9!==o.nodeType&&(r===t||1!==o.nodeType||!b(o).is(r)))1===o.nodeType&&i.push(o),o=o[n];return i},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});function ft(e,t,n){if(t=t||0,b.isFunction(t))return b.grep(e,function(e,r){var i=!!t.call(e,r,e);return i===n});if(t.nodeType)return b.grep(e,function(e){return e===t===n});if("string"==typeof t){var r=b.grep(e,function(e){return 1===e.nodeType});if(ut.test(t))return b.filter(t,r,!n);t=b.filter(t,r)}return b.grep(e,function(e){return b.inArray(e,t)>=0===n})}function dt(e){var t=ht.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}var ht="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",gt=/ jQuery\d+="(?:null|\d+)"/g,mt=RegExp("<(?:"+ht+")[\\s/>]","i"),yt=/^\s+/,vt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bt=/<([\w:]+)/,xt=/<tbody/i,wt=/<|&#?\w+;/,Tt=/<(?:script|style|link)/i,Nt=/^(?:checkbox|radio)$/i,Ct=/checked\s*(?:[^=]|=\s*.checked.)/i,kt=/^$|\/(?:java|ecma)script/i,Et=/^true\/(.*)/,St=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,At={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:b.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},jt=dt(o),Dt=jt.appendChild(o.createElement("div"));At.optgroup=At.option,At.tbody=At.tfoot=At.colgroup=At.caption=At.thead,At.th=At.td,b.fn.extend({text:function(e){return b.access(this,function(e){return e===t?b.text(this):this.empty().append((this[0]&&this[0].ownerDocument||o).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(b.isFunction(e))return this.each(function(t){b(this).wrapAll(e.call(this,t))});if(this[0]){var t=b(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&1===e.firstChild.nodeType)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return b.isFunction(e)?this.each(function(t){b(this).wrapInner(e.call(this,t))}):this.each(function(){var t=b(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=b.isFunction(e);return this.each(function(n){b(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){b.nodeName(this,"body")||b(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.insertBefore(e,this.firstChild)})},before:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){var n,r=0;for(;null!=(n=this[r]);r++)(!e||b.filter(e,[n]).length>0)&&(t||1!==n.nodeType||b.cleanData(Ot(n)),n.parentNode&&(t&&b.contains(n.ownerDocument,n)&&Mt(Ot(n,"script")),n.parentNode.removeChild(n)));return this},empty:function(){var e,t=0;for(;null!=(e=this[t]);t++){1===e.nodeType&&b.cleanData(Ot(e,!1));while(e.firstChild)e.removeChild(e.firstChild);e.options&&b.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return b.clone(this,e,t)})},html:function(e){return b.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return 1===n.nodeType?n.innerHTML.replace(gt,""):t;if(!("string"!=typeof e||Tt.test(e)||!b.support.htmlSerialize&&mt.test(e)||!b.support.leadingWhitespace&&yt.test(e)||At[(bt.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(vt,"<$1></$2>");try{for(;i>r;r++)n=this[r]||{},1===n.nodeType&&(b.cleanData(Ot(n,!1)),n.innerHTML=e);n=0}catch(o){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){var t=b.isFunction(e);return t||"string"==typeof e||(e=b(e).not(this).detach()),this.domManip([e],!0,function(e){var t=this.nextSibling,n=this.parentNode;n&&(b(this).remove(),n.insertBefore(e,t))})},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,r){e=f.apply([],e);var i,o,a,s,u,l,c=0,p=this.length,d=this,h=p-1,g=e[0],m=b.isFunction(g);if(m||!(1>=p||"string"!=typeof g||b.support.checkClone)&&Ct.test(g))return this.each(function(i){var o=d.eq(i);m&&(e[0]=g.call(this,i,n?o.html():t)),o.domManip(e,n,r)});if(p&&(l=b.buildFragment(e,this[0].ownerDocument,!1,this),i=l.firstChild,1===l.childNodes.length&&(l=i),i)){for(n=n&&b.nodeName(i,"tr"),s=b.map(Ot(l,"script"),Ht),a=s.length;p>c;c++)o=l,c!==h&&(o=b.clone(o,!0,!0),a&&b.merge(s,Ot(o,"script"))),r.call(n&&b.nodeName(this[c],"table")?Lt(this[c],"tbody"):this[c],o,c);if(a)for(u=s[s.length-1].ownerDocument,b.map(s,qt),c=0;a>c;c++)o=s[c],kt.test(o.type||"")&&!b._data(o,"globalEval")&&b.contains(u,o)&&(o.src?b.ajax({url:o.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):b.globalEval((o.text||o.textContent||o.innerHTML||"").replace(St,"")));l=i=null}return this}});function Lt(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function Ht(e){var t=e.getAttributeNode("type");return e.type=(t&&t.specified)+"/"+e.type,e}function qt(e){var t=Et.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function Mt(e,t){var n,r=0;for(;null!=(n=e[r]);r++)b._data(n,"globalEval",!t||b._data(t[r],"globalEval"))}function _t(e,t){if(1===t.nodeType&&b.hasData(e)){var n,r,i,o=b._data(e),a=b._data(t,o),s=o.events;if(s){delete a.handle,a.events={};for(n in s)for(r=0,i=s[n].length;i>r;r++)b.event.add(t,n,s[n][r])}a.data&&(a.data=b.extend({},a.data))}}function Ft(e,t){var n,r,i;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!b.support.noCloneEvent&&t[b.expando]){i=b._data(t);for(r in i.events)b.removeEvent(t,r,i.handle);t.removeAttribute(b.expando)}"script"===n&&t.text!==e.text?(Ht(t).text=e.text,qt(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),b.support.html5Clone&&e.innerHTML&&!b.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&Nt.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}}b.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){b.fn[e]=function(e){var n,r=0,i=[],o=b(e),a=o.length-1;for(;a>=r;r++)n=r===a?this:this.clone(!0),b(o[r])[t](n),d.apply(i,n.get());return this.pushStack(i)}});function Ot(e,n){var r,o,a=0,s=typeof e.getElementsByTagName!==i?e.getElementsByTagName(n||"*"):typeof e.querySelectorAll!==i?e.querySelectorAll(n||"*"):t;if(!s)for(s=[],r=e.childNodes||e;null!=(o=r[a]);a++)!n||b.nodeName(o,n)?s.push(o):b.merge(s,Ot(o,n));return n===t||n&&b.nodeName(e,n)?b.merge([e],s):s}function Bt(e){Nt.test(e.type)&&(e.defaultChecked=e.checked)}b.extend({clone:function(e,t,n){var r,i,o,a,s,u=b.contains(e.ownerDocument,e);if(b.support.html5Clone||b.isXMLDoc(e)||!mt.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(Dt.innerHTML=e.outerHTML,Dt.removeChild(o=Dt.firstChild)),!(b.support.noCloneEvent&&b.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||b.isXMLDoc(e)))for(r=Ot(o),s=Ot(e),a=0;null!=(i=s[a]);++a)r[a]&&Ft(i,r[a]);if(t)if(n)for(s=s||Ot(e),r=r||Ot(o),a=0;null!=(i=s[a]);a++)_t(i,r[a]);else _t(e,o);return r=Ot(o,"script"),r.length>0&&Mt(r,!u&&Ot(e,"script")),r=s=i=null,o},buildFragment:function(e,t,n,r){var i,o,a,s,u,l,c,p=e.length,f=dt(t),d=[],h=0;for(;p>h;h++)if(o=e[h],o||0===o)if("object"===b.type(o))b.merge(d,o.nodeType?[o]:o);else if(wt.test(o)){s=s||f.appendChild(t.createElement("div")),u=(bt.exec(o)||["",""])[1].toLowerCase(),c=At[u]||At._default,s.innerHTML=c[1]+o.replace(vt,"<$1></$2>")+c[2],i=c[0];while(i--)s=s.lastChild;if(!b.support.leadingWhitespace&&yt.test(o)&&d.push(t.createTextNode(yt.exec(o)[0])),!b.support.tbody){o="table"!==u||xt.test(o)?"<table>"!==c[1]||xt.test(o)?0:s:s.firstChild,i=o&&o.childNodes.length;while(i--)b.nodeName(l=o.childNodes[i],"tbody")&&!l.childNodes.length&&o.removeChild(l)
}b.merge(d,s.childNodes),s.textContent="";while(s.firstChild)s.removeChild(s.firstChild);s=f.lastChild}else d.push(t.createTextNode(o));s&&f.removeChild(s),b.support.appendChecked||b.grep(Ot(d,"input"),Bt),h=0;while(o=d[h++])if((!r||-1===b.inArray(o,r))&&(a=b.contains(o.ownerDocument,o),s=Ot(f.appendChild(o),"script"),a&&Mt(s),n)){i=0;while(o=s[i++])kt.test(o.type||"")&&n.push(o)}return s=null,f},cleanData:function(e,t){var n,r,o,a,s=0,u=b.expando,l=b.cache,p=b.support.deleteExpando,f=b.event.special;for(;null!=(n=e[s]);s++)if((t||b.acceptData(n))&&(o=n[u],a=o&&l[o])){if(a.events)for(r in a.events)f[r]?b.event.remove(n,r):b.removeEvent(n,r,a.handle);l[o]&&(delete l[o],p?delete n[u]:typeof n.removeAttribute!==i?n.removeAttribute(u):n[u]=null,c.push(o))}}});var Pt,Rt,Wt,$t=/alpha\([^)]*\)/i,It=/opacity\s*=\s*([^)]*)/,zt=/^(top|right|bottom|left)$/,Xt=/^(none|table(?!-c[ea]).+)/,Ut=/^margin/,Vt=RegExp("^("+x+")(.*)$","i"),Yt=RegExp("^("+x+")(?!px)[a-z%]+$","i"),Jt=RegExp("^([+-])=("+x+")","i"),Gt={BODY:"block"},Qt={position:"absolute",visibility:"hidden",display:"block"},Kt={letterSpacing:0,fontWeight:400},Zt=["Top","Right","Bottom","Left"],en=["Webkit","O","Moz","ms"];function tn(e,t){if(t in e)return t;var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=en.length;while(i--)if(t=en[i]+n,t in e)return t;return r}function nn(e,t){return e=t||e,"none"===b.css(e,"display")||!b.contains(e.ownerDocument,e)}function rn(e,t){var n,r,i,o=[],a=0,s=e.length;for(;s>a;a++)r=e[a],r.style&&(o[a]=b._data(r,"olddisplay"),n=r.style.display,t?(o[a]||"none"!==n||(r.style.display=""),""===r.style.display&&nn(r)&&(o[a]=b._data(r,"olddisplay",un(r.nodeName)))):o[a]||(i=nn(r),(n&&"none"!==n||!i)&&b._data(r,"olddisplay",i?n:b.css(r,"display"))));for(a=0;s>a;a++)r=e[a],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?o[a]||"":"none"));return e}b.fn.extend({css:function(e,n){return b.access(this,function(e,n,r){var i,o,a={},s=0;if(b.isArray(n)){for(o=Rt(e),i=n.length;i>s;s++)a[n[s]]=b.css(e,n[s],!1,o);return a}return r!==t?b.style(e,n,r):b.css(e,n)},e,n,arguments.length>1)},show:function(){return rn(this,!0)},hide:function(){return rn(this)},toggle:function(e){var t="boolean"==typeof e;return this.each(function(){(t?e:nn(this))?b(this).show():b(this).hide()})}}),b.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Wt(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":b.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,a,s,u=b.camelCase(n),l=e.style;if(n=b.cssProps[u]||(b.cssProps[u]=tn(l,u)),s=b.cssHooks[n]||b.cssHooks[u],r===t)return s&&"get"in s&&(o=s.get(e,!1,i))!==t?o:l[n];if(a=typeof r,"string"===a&&(o=Jt.exec(r))&&(r=(o[1]+1)*o[2]+parseFloat(b.css(e,n)),a="number"),!(null==r||"number"===a&&isNaN(r)||("number"!==a||b.cssNumber[u]||(r+="px"),b.support.clearCloneStyle||""!==r||0!==n.indexOf("background")||(l[n]="inherit"),s&&"set"in s&&(r=s.set(e,r,i))===t)))try{l[n]=r}catch(c){}}},css:function(e,n,r,i){var o,a,s,u=b.camelCase(n);return n=b.cssProps[u]||(b.cssProps[u]=tn(e.style,u)),s=b.cssHooks[n]||b.cssHooks[u],s&&"get"in s&&(a=s.get(e,!0,r)),a===t&&(a=Wt(e,n,i)),"normal"===a&&n in Kt&&(a=Kt[n]),""===r||r?(o=parseFloat(a),r===!0||b.isNumeric(o)?o||0:a):a},swap:function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];i=n.apply(e,r||[]);for(o in t)e.style[o]=a[o];return i}}),e.getComputedStyle?(Rt=function(t){return e.getComputedStyle(t,null)},Wt=function(e,n,r){var i,o,a,s=r||Rt(e),u=s?s.getPropertyValue(n)||s[n]:t,l=e.style;return s&&(""!==u||b.contains(e.ownerDocument,e)||(u=b.style(e,n)),Yt.test(u)&&Ut.test(n)&&(i=l.width,o=l.minWidth,a=l.maxWidth,l.minWidth=l.maxWidth=l.width=u,u=s.width,l.width=i,l.minWidth=o,l.maxWidth=a)),u}):o.documentElement.currentStyle&&(Rt=function(e){return e.currentStyle},Wt=function(e,n,r){var i,o,a,s=r||Rt(e),u=s?s[n]:t,l=e.style;return null==u&&l&&l[n]&&(u=l[n]),Yt.test(u)&&!zt.test(n)&&(i=l.left,o=e.runtimeStyle,a=o&&o.left,a&&(o.left=e.currentStyle.left),l.left="fontSize"===n?"1em":u,u=l.pixelLeft+"px",l.left=i,a&&(o.left=a)),""===u?"auto":u});function on(e,t,n){var r=Vt.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function an(e,t,n,r,i){var o=n===(r?"border":"content")?4:"width"===t?1:0,a=0;for(;4>o;o+=2)"margin"===n&&(a+=b.css(e,n+Zt[o],!0,i)),r?("content"===n&&(a-=b.css(e,"padding"+Zt[o],!0,i)),"margin"!==n&&(a-=b.css(e,"border"+Zt[o]+"Width",!0,i))):(a+=b.css(e,"padding"+Zt[o],!0,i),"padding"!==n&&(a+=b.css(e,"border"+Zt[o]+"Width",!0,i)));return a}function sn(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,o=Rt(e),a=b.support.boxSizing&&"border-box"===b.css(e,"boxSizing",!1,o);if(0>=i||null==i){if(i=Wt(e,t,o),(0>i||null==i)&&(i=e.style[t]),Yt.test(i))return i;r=a&&(b.support.boxSizingReliable||i===e.style[t]),i=parseFloat(i)||0}return i+an(e,t,n||(a?"border":"content"),r,o)+"px"}function un(e){var t=o,n=Gt[e];return n||(n=ln(e,t),"none"!==n&&n||(Pt=(Pt||b("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(Pt[0].contentWindow||Pt[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),n=ln(e,t),Pt.detach()),Gt[e]=n),n}function ln(e,t){var n=b(t.createElement(e)).appendTo(t.body),r=b.css(n[0],"display");return n.remove(),r}b.each(["height","width"],function(e,n){b.cssHooks[n]={get:function(e,r,i){return r?0===e.offsetWidth&&Xt.test(b.css(e,"display"))?b.swap(e,Qt,function(){return sn(e,n,i)}):sn(e,n,i):t},set:function(e,t,r){var i=r&&Rt(e);return on(e,t,r?an(e,n,r,b.support.boxSizing&&"border-box"===b.css(e,"boxSizing",!1,i),i):0)}}}),b.support.opacity||(b.cssHooks.opacity={get:function(e,t){return It.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=b.isNumeric(t)?"alpha(opacity="+100*t+")":"",o=r&&r.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===b.trim(o.replace($t,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||r&&!r.filter)||(n.filter=$t.test(o)?o.replace($t,i):o+" "+i)}}),b(function(){b.support.reliableMarginRight||(b.cssHooks.marginRight={get:function(e,n){return n?b.swap(e,{display:"inline-block"},Wt,[e,"marginRight"]):t}}),!b.support.pixelPosition&&b.fn.position&&b.each(["top","left"],function(e,n){b.cssHooks[n]={get:function(e,r){return r?(r=Wt(e,n),Yt.test(r)?b(e).position()[n]+"px":r):t}}})}),b.expr&&b.expr.filters&&(b.expr.filters.hidden=function(e){return 0>=e.offsetWidth&&0>=e.offsetHeight||!b.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||b.css(e,"display"))},b.expr.filters.visible=function(e){return!b.expr.filters.hidden(e)}),b.each({margin:"",padding:"",border:"Width"},function(e,t){b.cssHooks[e+t]={expand:function(n){var r=0,i={},o="string"==typeof n?n.split(" "):[n];for(;4>r;r++)i[e+Zt[r]+t]=o[r]||o[r-2]||o[0];return i}},Ut.test(e)||(b.cssHooks[e+t].set=on)});var cn=/%20/g,pn=/\[\]$/,fn=/\r?\n/g,dn=/^(?:submit|button|image|reset|file)$/i,hn=/^(?:input|select|textarea|keygen)/i;b.fn.extend({serialize:function(){return b.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=b.prop(this,"elements");return e?b.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!b(this).is(":disabled")&&hn.test(this.nodeName)&&!dn.test(e)&&(this.checked||!Nt.test(e))}).map(function(e,t){var n=b(this).val();return null==n?null:b.isArray(n)?b.map(n,function(e){return{name:t.name,value:e.replace(fn,"\r\n")}}):{name:t.name,value:n.replace(fn,"\r\n")}}).get()}}),b.param=function(e,n){var r,i=[],o=function(e,t){t=b.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(n===t&&(n=b.ajaxSettings&&b.ajaxSettings.traditional),b.isArray(e)||e.jquery&&!b.isPlainObject(e))b.each(e,function(){o(this.name,this.value)});else for(r in e)gn(r,e[r],n,o);return i.join("&").replace(cn,"+")};function gn(e,t,n,r){var i;if(b.isArray(t))b.each(t,function(t,i){n||pn.test(e)?r(e,i):gn(e+"["+("object"==typeof i?t:"")+"]",i,n,r)});else if(n||"object"!==b.type(t))r(e,t);else for(i in t)gn(e+"["+i+"]",t[i],n,r)}b.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){b.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),b.fn.hover=function(e,t){return this.mouseenter(e).mouseleave(t||e)};var mn,yn,vn=b.now(),bn=/\?/,xn=/#.*$/,wn=/([?&])_=[^&]*/,Tn=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Nn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Cn=/^(?:GET|HEAD)$/,kn=/^\/\//,En=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Sn=b.fn.load,An={},jn={},Dn="*/".concat("*");try{yn=a.href}catch(Ln){yn=o.createElement("a"),yn.href="",yn=yn.href}mn=En.exec(yn.toLowerCase())||[];function Hn(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(w)||[];if(b.isFunction(n))while(r=o[i++])"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function qn(e,n,r,i){var o={},a=e===jn;function s(u){var l;return o[u]=!0,b.each(e[u]||[],function(e,u){var c=u(n,r,i);return"string"!=typeof c||a||o[c]?a?!(l=c):t:(n.dataTypes.unshift(c),s(c),!1)}),l}return s(n.dataTypes[0])||!o["*"]&&s("*")}function Mn(e,n){var r,i,o=b.ajaxSettings.flatOptions||{};for(i in n)n[i]!==t&&((o[i]?e:r||(r={}))[i]=n[i]);return r&&b.extend(!0,e,r),e}b.fn.load=function(e,n,r){if("string"!=typeof e&&Sn)return Sn.apply(this,arguments);var i,o,a,s=this,u=e.indexOf(" ");return u>=0&&(i=e.slice(u,e.length),e=e.slice(0,u)),b.isFunction(n)?(r=n,n=t):n&&"object"==typeof n&&(a="POST"),s.length>0&&b.ajax({url:e,type:a,dataType:"html",data:n}).done(function(e){o=arguments,s.html(i?b("<div>").append(b.parseHTML(e)).find(i):e)}).complete(r&&function(e,t){s.each(r,o||[e.responseText,t,e])}),this},b.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){b.fn[t]=function(e){return this.on(t,e)}}),b.each(["get","post"],function(e,n){b[n]=function(e,r,i,o){return b.isFunction(r)&&(o=o||i,i=r,r=t),b.ajax({url:e,type:n,dataType:o,data:r,success:i})}}),b.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:yn,type:"GET",isLocal:Nn.test(mn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Dn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":b.parseJSON,"text xml":b.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Mn(Mn(e,b.ajaxSettings),t):Mn(b.ajaxSettings,e)},ajaxPrefilter:Hn(An),ajaxTransport:Hn(jn),ajax:function(e,n){"object"==typeof e&&(n=e,e=t),n=n||{};var r,i,o,a,s,u,l,c,p=b.ajaxSetup({},n),f=p.context||p,d=p.context&&(f.nodeType||f.jquery)?b(f):b.event,h=b.Deferred(),g=b.Callbacks("once memory"),m=p.statusCode||{},y={},v={},x=0,T="canceled",N={readyState:0,getResponseHeader:function(e){var t;if(2===x){if(!c){c={};while(t=Tn.exec(a))c[t[1].toLowerCase()]=t[2]}t=c[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===x?a:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return x||(e=v[n]=v[n]||e,y[e]=t),this},overrideMimeType:function(e){return x||(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>x)for(t in e)m[t]=[m[t],e[t]];else N.always(e[N.status]);return this},abort:function(e){var t=e||T;return l&&l.abort(t),k(0,t),this}};if(h.promise(N).complete=g.add,N.success=N.done,N.error=N.fail,p.url=((e||p.url||yn)+"").replace(xn,"").replace(kn,mn[1]+"//"),p.type=n.method||n.type||p.method||p.type,p.dataTypes=b.trim(p.dataType||"*").toLowerCase().match(w)||[""],null==p.crossDomain&&(r=En.exec(p.url.toLowerCase()),p.crossDomain=!(!r||r[1]===mn[1]&&r[2]===mn[2]&&(r[3]||("http:"===r[1]?80:443))==(mn[3]||("http:"===mn[1]?80:443)))),p.data&&p.processData&&"string"!=typeof p.data&&(p.data=b.param(p.data,p.traditional)),qn(An,p,n,N),2===x)return N;u=p.global,u&&0===b.active++&&b.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Cn.test(p.type),o=p.url,p.hasContent||(p.data&&(o=p.url+=(bn.test(o)?"&":"?")+p.data,delete p.data),p.cache===!1&&(p.url=wn.test(o)?o.replace(wn,"$1_="+vn++):o+(bn.test(o)?"&":"?")+"_="+vn++)),p.ifModified&&(b.lastModified[o]&&N.setRequestHeader("If-Modified-Since",b.lastModified[o]),b.etag[o]&&N.setRequestHeader("If-None-Match",b.etag[o])),(p.data&&p.hasContent&&p.contentType!==!1||n.contentType)&&N.setRequestHeader("Content-Type",p.contentType),N.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Dn+"; q=0.01":""):p.accepts["*"]);for(i in p.headers)N.setRequestHeader(i,p.headers[i]);if(p.beforeSend&&(p.beforeSend.call(f,N,p)===!1||2===x))return N.abort();T="abort";for(i in{success:1,error:1,complete:1})N[i](p[i]);if(l=qn(jn,p,n,N)){N.readyState=1,u&&d.trigger("ajaxSend",[N,p]),p.async&&p.timeout>0&&(s=setTimeout(function(){N.abort("timeout")},p.timeout));try{x=1,l.send(y,k)}catch(C){if(!(2>x))throw C;k(-1,C)}}else k(-1,"No Transport");function k(e,n,r,i){var c,y,v,w,T,C=n;2!==x&&(x=2,s&&clearTimeout(s),l=t,a=i||"",N.readyState=e>0?4:0,r&&(w=_n(p,N,r)),e>=200&&300>e||304===e?(p.ifModified&&(T=N.getResponseHeader("Last-Modified"),T&&(b.lastModified[o]=T),T=N.getResponseHeader("etag"),T&&(b.etag[o]=T)),204===e?(c=!0,C="nocontent"):304===e?(c=!0,C="notmodified"):(c=Fn(p,w),C=c.state,y=c.data,v=c.error,c=!v)):(v=C,(e||!C)&&(C="error",0>e&&(e=0))),N.status=e,N.statusText=(n||C)+"",c?h.resolveWith(f,[y,C,N]):h.rejectWith(f,[N,C,v]),N.statusCode(m),m=t,u&&d.trigger(c?"ajaxSuccess":"ajaxError",[N,p,c?y:v]),g.fireWith(f,[N,C]),u&&(d.trigger("ajaxComplete",[N,p]),--b.active||b.event.trigger("ajaxStop")))}return N},getScript:function(e,n){return b.get(e,t,n,"script")},getJSON:function(e,t,n){return b.get(e,t,n,"json")}});function _n(e,n,r){var i,o,a,s,u=e.contents,l=e.dataTypes,c=e.responseFields;for(s in c)s in r&&(n[c[s]]=r[s]);while("*"===l[0])l.shift(),o===t&&(o=e.mimeType||n.getResponseHeader("Content-Type"));if(o)for(s in u)if(u[s]&&u[s].test(o)){l.unshift(s);break}if(l[0]in r)a=l[0];else{for(s in r){if(!l[0]||e.converters[s+" "+l[0]]){a=s;break}i||(i=s)}a=a||i}return a?(a!==l[0]&&l.unshift(a),r[a]):t}function Fn(e,t){var n,r,i,o,a={},s=0,u=e.dataTypes.slice(),l=u[0];if(e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u[1])for(i in e.converters)a[i.toLowerCase()]=e.converters[i];for(;r=u[++s];)if("*"!==r){if("*"!==l&&l!==r){if(i=a[l+" "+r]||a["* "+r],!i)for(n in a)if(o=n.split(" "),o[1]===r&&(i=a[l+" "+o[0]]||a["* "+o[0]])){i===!0?i=a[n]:a[n]!==!0&&(r=o[0],u.splice(s--,0,r));break}if(i!==!0)if(i&&e["throws"])t=i(t);else try{t=i(t)}catch(c){return{state:"parsererror",error:i?c:"No conversion from "+l+" to "+r}}}l=r}return{state:"success",data:t}}b.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return b.globalEval(e),e}}}),b.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),b.ajaxTransport("script",function(e){if(e.crossDomain){var n,r=o.head||b("head")[0]||o.documentElement;return{send:function(t,i){n=o.createElement("script"),n.async=!0,e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,t){(t||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null,t||i(200,"success"))},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(t,!0)}}}});var On=[],Bn=/(=)\?(?=&|$)|\?\?/;b.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=On.pop()||b.expando+"_"+vn++;return this[e]=!0,e}}),b.ajaxPrefilter("json jsonp",function(n,r,i){var o,a,s,u=n.jsonp!==!1&&(Bn.test(n.url)?"url":"string"==typeof n.data&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Bn.test(n.data)&&"data");return u||"jsonp"===n.dataTypes[0]?(o=n.jsonpCallback=b.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,u?n[u]=n[u].replace(Bn,"$1"+o):n.jsonp!==!1&&(n.url+=(bn.test(n.url)?"&":"?")+n.jsonp+"="+o),n.converters["script json"]=function(){return s||b.error(o+" was not called"),s[0]},n.dataTypes[0]="json",a=e[o],e[o]=function(){s=arguments},i.always(function(){e[o]=a,n[o]&&(n.jsonpCallback=r.jsonpCallback,On.push(o)),s&&b.isFunction(a)&&a(s[0]),s=a=t}),"script"):t});var Pn,Rn,Wn=0,$n=e.ActiveXObject&&function(){var e;for(e in Pn)Pn[e](t,!0)};function In(){try{return new e.XMLHttpRequest}catch(t){}}function zn(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}b.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&In()||zn()}:In,Rn=b.ajaxSettings.xhr(),b.support.cors=!!Rn&&"withCredentials"in Rn,Rn=b.support.ajax=!!Rn,Rn&&b.ajaxTransport(function(n){if(!n.crossDomain||b.support.cors){var r;return{send:function(i,o){var a,s,u=n.xhr();if(n.username?u.open(n.type,n.url,n.async,n.username,n.password):u.open(n.type,n.url,n.async),n.xhrFields)for(s in n.xhrFields)u[s]=n.xhrFields[s];n.mimeType&&u.overrideMimeType&&u.overrideMimeType(n.mimeType),n.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");try{for(s in i)u.setRequestHeader(s,i[s])}catch(l){}u.send(n.hasContent&&n.data||null),r=function(e,i){var s,l,c,p;try{if(r&&(i||4===u.readyState))if(r=t,a&&(u.onreadystatechange=b.noop,$n&&delete Pn[a]),i)4!==u.readyState&&u.abort();else{p={},s=u.status,l=u.getAllResponseHeaders(),"string"==typeof u.responseText&&(p.text=u.responseText);try{c=u.statusText}catch(f){c=""}s||!n.isLocal||n.crossDomain?1223===s&&(s=204):s=p.text?200:404}}catch(d){i||o(-1,d)}p&&o(s,c,p,l)},n.async?4===u.readyState?setTimeout(r):(a=++Wn,$n&&(Pn||(Pn={},b(e).unload($n)),Pn[a]=r),u.onreadystatechange=r):r()},abort:function(){r&&r(t,!0)}}}});var Xn,Un,Vn=/^(?:toggle|show|hide)$/,Yn=RegExp("^(?:([+-])=|)("+x+")([a-z%]*)$","i"),Jn=/queueHooks$/,Gn=[nr],Qn={"*":[function(e,t){var n,r,i=this.createTween(e,t),o=Yn.exec(t),a=i.cur(),s=+a||0,u=1,l=20;if(o){if(n=+o[2],r=o[3]||(b.cssNumber[e]?"":"px"),"px"!==r&&s){s=b.css(i.elem,e,!0)||n||1;do u=u||".5",s/=u,b.style(i.elem,e,s+r);while(u!==(u=i.cur()/a)&&1!==u&&--l)}i.unit=r,i.start=s,i.end=o[1]?s+(o[1]+1)*n:n}return i}]};function Kn(){return setTimeout(function(){Xn=t}),Xn=b.now()}function Zn(e,t){b.each(t,function(t,n){var r=(Qn[t]||[]).concat(Qn["*"]),i=0,o=r.length;for(;o>i;i++)if(r[i].call(e,t,n))return})}function er(e,t,n){var r,i,o=0,a=Gn.length,s=b.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;var t=Xn||Kn(),n=Math.max(0,l.startTime+l.duration-t),r=n/l.duration||0,o=1-r,a=0,u=l.tweens.length;for(;u>a;a++)l.tweens[a].run(o);return s.notifyWith(e,[l,o,n]),1>o&&u?n:(s.resolveWith(e,[l]),!1)},l=s.promise({elem:e,props:b.extend({},t),opts:b.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Xn||Kn(),duration:n.duration,tweens:[],createTween:function(t,n){var r=b.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(r),r},stop:function(t){var n=0,r=t?l.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)l.tweens[n].run(1);return t?s.resolveWith(e,[l,t]):s.rejectWith(e,[l,t]),this}}),c=l.props;for(tr(c,l.opts.specialEasing);a>o;o++)if(r=Gn[o].call(l,e,c,l.opts))return r;return Zn(l,c),b.isFunction(l.opts.start)&&l.opts.start.call(e,l),b.fx.timer(b.extend(u,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function tr(e,t){var n,r,i,o,a;for(i in e)if(r=b.camelCase(i),o=t[r],n=e[i],b.isArray(n)&&(o=n[1],n=e[i]=n[0]),i!==r&&(e[r]=n,delete e[i]),a=b.cssHooks[r],a&&"expand"in a){n=a.expand(n),delete e[r];for(i in n)i in e||(e[i]=n[i],t[i]=o)}else t[r]=o}b.Animation=b.extend(er,{tweener:function(e,t){b.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");var n,r=0,i=e.length;for(;i>r;r++)n=e[r],Qn[n]=Qn[n]||[],Qn[n].unshift(t)},prefilter:function(e,t){t?Gn.unshift(e):Gn.push(e)}});function nr(e,t,n){var r,i,o,a,s,u,l,c,p,f=this,d=e.style,h={},g=[],m=e.nodeType&&nn(e);n.queue||(c=b._queueHooks(e,"fx"),null==c.unqueued&&(c.unqueued=0,p=c.empty.fire,c.empty.fire=function(){c.unqueued||p()}),c.unqueued++,f.always(function(){f.always(function(){c.unqueued--,b.queue(e,"fx").length||c.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],"inline"===b.css(e,"display")&&"none"===b.css(e,"float")&&(b.support.inlineBlockNeedsLayout&&"inline"!==un(e.nodeName)?d.zoom=1:d.display="inline-block")),n.overflow&&(d.overflow="hidden",b.support.shrinkWrapBlocks||f.always(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]}));for(i in t)if(a=t[i],Vn.exec(a)){if(delete t[i],u=u||"toggle"===a,a===(m?"hide":"show"))continue;g.push(i)}if(o=g.length){s=b._data(e,"fxshow")||b._data(e,"fxshow",{}),"hidden"in s&&(m=s.hidden),u&&(s.hidden=!m),m?b(e).show():f.done(function(){b(e).hide()}),f.done(function(){var t;b._removeData(e,"fxshow");for(t in h)b.style(e,t,h[t])});for(i=0;o>i;i++)r=g[i],l=f.createTween(r,m?s[r]:0),h[r]=s[r]||b.style(e,r),r in s||(s[r]=l.start,m&&(l.end=l.start,l.start="width"===r||"height"===r?1:0))}}function rr(e,t,n,r,i){return new rr.prototype.init(e,t,n,r,i)}b.Tween=rr,rr.prototype={constructor:rr,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(b.cssNumber[n]?"":"px")},cur:function(){var e=rr.propHooks[this.prop];return e&&e.get?e.get(this):rr.propHooks._default.get(this)},run:function(e){var t,n=rr.propHooks[this.prop];return this.pos=t=this.options.duration?b.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):rr.propHooks._default.set(this),this}},rr.prototype.init.prototype=rr.prototype,rr.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=b.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){b.fx.step[e.prop]?b.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[b.cssProps[e.prop]]||b.cssHooks[e.prop])?b.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},rr.propHooks.scrollTop=rr.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},b.each(["toggle","show","hide"],function(e,t){var n=b.fn[t];b.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(ir(t,!0),e,r,i)}}),b.fn.extend({fadeTo:function(e,t,n,r){return this.filter(nn).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=b.isEmptyObject(e),o=b.speed(t,n,r),a=function(){var t=er(this,b.extend({},e),o);a.finish=function(){t.stop(!0)},(i||b._data(this,"finish"))&&t.stop(!0)};return a.finish=a,i||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return"string"!=typeof e&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=null!=e&&e+"queueHooks",o=b.timers,a=b._data(this);if(n)a[n]&&a[n].stop&&i(a[n]);else for(n in a)a[n]&&a[n].stop&&Jn.test(n)&&i(a[n]);for(n=o.length;n--;)o[n].elem!==this||null!=e&&o[n].queue!==e||(o[n].anim.stop(r),t=!1,o.splice(n,1));(t||!r)&&b.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=b._data(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=b.timers,a=r?r.length:0;for(n.finish=!0,b.queue(this,e,[]),i&&i.cur&&i.cur.finish&&i.cur.finish.call(this),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;a>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}});function ir(e,t){var n,r={height:e},i=0;for(t=t?1:0;4>i;i+=2-t)n=Zt[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}b.each({slideDown:ir("show"),slideUp:ir("hide"),slideToggle:ir("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){b.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),b.speed=function(e,t,n){var r=e&&"object"==typeof e?b.extend({},e):{complete:n||!n&&t||b.isFunction(e)&&e,duration:e,easing:n&&t||t&&!b.isFunction(t)&&t};return r.duration=b.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in b.fx.speeds?b.fx.speeds[r.duration]:b.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){b.isFunction(r.old)&&r.old.call(this),r.queue&&b.dequeue(this,r.queue)},r},b.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},b.timers=[],b.fx=rr.prototype.init,b.fx.tick=function(){var e,n=b.timers,r=0;for(Xn=b.now();n.length>r;r++)e=n[r],e()||n[r]!==e||n.splice(r--,1);n.length||b.fx.stop(),Xn=t},b.fx.timer=function(e){e()&&b.timers.push(e)&&b.fx.start()},b.fx.interval=13,b.fx.start=function(){Un||(Un=setInterval(b.fx.tick,b.fx.interval))},b.fx.stop=function(){clearInterval(Un),Un=null},b.fx.speeds={slow:600,fast:200,_default:400},b.fx.step={},b.expr&&b.expr.filters&&(b.expr.filters.animated=function(e){return b.grep(b.timers,function(t){return e===t.elem}).length}),b.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){b.offset.setOffset(this,e,t)});var n,r,o={top:0,left:0},a=this[0],s=a&&a.ownerDocument;if(s)return n=s.documentElement,b.contains(n,a)?(typeof a.getBoundingClientRect!==i&&(o=a.getBoundingClientRect()),r=or(s),{top:o.top+(r.pageYOffset||n.scrollTop)-(n.clientTop||0),left:o.left+(r.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}):o},b.offset={setOffset:function(e,t,n){var r=b.css(e,"position");"static"===r&&(e.style.position="relative");var i=b(e),o=i.offset(),a=b.css(e,"top"),s=b.css(e,"left"),u=("absolute"===r||"fixed"===r)&&b.inArray("auto",[a,s])>-1,l={},c={},p,f;u?(c=i.position(),p=c.top,f=c.left):(p=parseFloat(a)||0,f=parseFloat(s)||0),b.isFunction(t)&&(t=t.call(e,n,o)),null!=t.top&&(l.top=t.top-o.top+p),null!=t.left&&(l.left=t.left-o.left+f),"using"in t?t.using.call(e,l):i.css(l)}},b.fn.extend({position:function(){if(this[0]){var e,t,n={top:0,left:0},r=this[0];return"fixed"===b.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),b.nodeName(e[0],"html")||(n=e.offset()),n.top+=b.css(e[0],"borderTopWidth",!0),n.left+=b.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-b.css(r,"marginTop",!0),left:t.left-n.left-b.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||o.documentElement;while(e&&!b.nodeName(e,"html")&&"static"===b.css(e,"position"))e=e.offsetParent;return e||o.documentElement})}}),b.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r=/Y/.test(n);b.fn[e]=function(i){return b.access(this,function(e,i,o){var a=or(e);return o===t?a?n in a?a[n]:a.document.documentElement[i]:e[i]:(a?a.scrollTo(r?b(a).scrollLeft():o,r?o:b(a).scrollTop()):e[i]=o,t)},e,i,arguments.length,null)}});function or(e){return b.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}b.each({Height:"height",Width:"width"},function(e,n){b.each({padding:"inner"+e,content:n,"":"outer"+e},function(r,i){b.fn[i]=function(i,o){var a=arguments.length&&(r||"boolean"!=typeof i),s=r||(i===!0||o===!0?"margin":"border");return b.access(this,function(n,r,i){var o;return b.isWindow(n)?n.document.documentElement["client"+e]:9===n.nodeType?(o=n.documentElement,Math.max(n.body["scroll"+e],o["scroll"+e],n.body["offset"+e],o["offset"+e],o["client"+e])):i===t?b.css(n,r,s):b.style(n,r,i,s)},n,a?i:t,a,null)}})}),e.jQuery=e.$=b,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return b})})(window);
/*! jQuery UI - v1.10.0 - 2013-01-18
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.position.js, jquery.ui.draggable.js, jquery.ui.droppable.js, jquery.ui.resizable.js, jquery.ui.selectable.js, jquery.ui.sortable.js, jquery.ui.accordion.js, jquery.ui.autocomplete.js, jquery.ui.button.js, jquery.ui.datepicker.js, jquery.ui.dialog.js, jquery.ui.menu.js, jquery.ui.progressbar.js, jquery.ui.slider.js, jquery.ui.spinner.js, jquery.ui.tabs.js, jquery.ui.tooltip.js, jquery.ui.effect.js, jquery.ui.effect-blind.js, jquery.ui.effect-bounce.js, jquery.ui.effect-clip.js, jquery.ui.effect-drop.js, jquery.ui.effect-explode.js, jquery.ui.effect-fade.js, jquery.ui.effect-fold.js, jquery.ui.effect-highlight.js, jquery.ui.effect-pulsate.js, jquery.ui.effect-scale.js, jquery.ui.effect-shake.js, jquery.ui.effect-slide.js, jquery.ui.effect-transfer.js
* Copyright (c) 2013 jQuery Foundation and other contributors Licensed MIT */

(function(e,t){function i(t,n){var r,i,o,u=t.nodeName.toLowerCase();return"area"===u?(r=t.parentNode,i=r.name,!t.href||!i||r.nodeName.toLowerCase()!=="map"?!1:(o=e("img[usemap=#"+i+"]")[0],!!o&&s(o))):(/input|select|textarea|button|object/.test(u)?!t.disabled:"a"===u?t.href||n:n)&&s(t)}function s(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return e.css(this,"visibility")==="hidden"}).length}var n=0,r=/^ui-id-\d+$/;e.ui=e.ui||{};if(e.ui.version)return;e.extend(e.ui,{version:"1.10.0",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({_focus:e.fn.focus,focus:function(t,n){return typeof t=="number"?this.each(function(){var r=this;setTimeout(function(){e(r).focus(),n&&n.call(r)},t)}):this._focus.apply(this,arguments)},scrollParent:function(){var t;return e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?t=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):t=this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length){var r=e(this[0]),i,s;while(r.length&&r[0]!==document){i=r.css("position");if(i==="absolute"||i==="relative"||i==="fixed"){s=parseInt(r.css("zIndex"),10);if(!isNaN(s)&&s!==0)return s}r=r.parent()}}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++n)})},removeUniqueId:function(){return this.each(function(){r.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,r){return!!e.data(t,r[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var n=e.attr(t,"tabindex"),r=isNaN(n);return(r||n>=0)&&i(t,!r)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(n,r){function u(t,n,r,s){return e.each(i,function(){n-=parseFloat(e.css(t,"padding"+this))||0,r&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),s&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var i=r==="Width"?["Left","Right"]:["Top","Bottom"],s=r.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+r]=function(n){return n===t?o["inner"+r].call(this):this.each(function(){e(this).css(s,u(this,n)+"px")})},e.fn["outer"+r]=function(t,n){return typeof t!="number"?o["outer"+r].call(this,t):this.each(function(){e(this).css(s,u(this,t,!0,n)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(n){return arguments.length?t.call(this,e.camelCase(n)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,n,r){var i,s=e.ui[t].prototype;for(i in r)s.plugins[i]=s.plugins[i]||[],s.plugins[i].push([n,r[i]])},call:function(e,t,n){var r,i=e.plugins[t];if(!i||!e.element[0].parentNode||e.element[0].parentNode.nodeType===11)return;for(r=0;r<i.length;r++)e.options[i[r][0]]&&i[r][1].apply(e.element,n)}},hasScroll:function(t,n){if(e(t).css("overflow")==="hidden")return!1;var r=n&&n==="left"?"scrollLeft":"scrollTop",i=!1;return t[r]>0?!0:(t[r]=1,i=t[r]>0,t[r]=0,i)}})})(jQuery);(function(e,t){var n=0,r=Array.prototype.slice,i=e.cleanData;e.cleanData=function(t){for(var n=0,r;(r=t[n])!=null;n++)try{e(r).triggerHandler("remove")}catch(s){}i(t)},e.widget=function(t,n,r){var i,s,o,u,a={},f=t.split(".")[0];t=t.split(".")[1],i=f+"-"+t,r||(r=n,n=e.Widget),e.expr[":"][i.toLowerCase()]=function(t){return!!e.data(t,i)},e[f]=e[f]||{},s=e[f][t],o=e[f][t]=function(e,t){if(!this._createWidget)return new o(e,t);arguments.length&&this._createWidget(e,t)},e.extend(o,s,{version:r.version,_proto:e.extend({},r),_childConstructors:[]}),u=new n,u.options=e.widget.extend({},u.options),e.each(r,function(t,r){if(!e.isFunction(r)){a[t]=r;return}a[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},i=function(e){return n.prototype[t].apply(this,e)};return function(){var t=this._super,n=this._superApply,s;return this._super=e,this._superApply=i,s=r.apply(this,arguments),this._super=t,this._superApply=n,s}}()}),o.prototype=e.widget.extend(u,{widgetEventPrefix:s?u.widgetEventPrefix:t},a,{constructor:o,namespace:f,widgetName:t,widgetFullName:i}),s?(e.each(s._childConstructors,function(t,n){var r=n.prototype;e.widget(r.namespace+"."+r.widgetName,o,n._proto)}),delete s._childConstructors):n._childConstructors.push(o),e.widget.bridge(t,o)},e.widget.extend=function(n){var i=r.call(arguments,1),s=0,o=i.length,u,a;for(;s<o;s++)for(u in i[s])a=i[s][u],i[s].hasOwnProperty(u)&&a!==t&&(e.isPlainObject(a)?n[u]=e.isPlainObject(n[u])?e.widget.extend({},n[u],a):e.widget.extend({},a):n[u]=a);return n},e.widget.bridge=function(n,i){var s=i.prototype.widgetFullName||n;e.fn[n]=function(o){var u=typeof o=="string",a=r.call(arguments,1),f=this;return o=!u&&a.length?e.widget.extend.apply(null,[o].concat(a)):o,u?this.each(function(){var r,i=e.data(this,s);if(!i)return e.error("cannot call methods on "+n+" prior to initialization; "+"attempted to call method '"+o+"'");if(!e.isFunction(i[o])||o.charAt(0)==="_")return e.error("no such method '"+o+"' for "+n+" widget instance");r=i[o].apply(i,a);if(r!==i&&r!==t)return f=r&&r.jquery?f.pushStack(r.get()):r,!1}):this.each(function(){var t=e.data(this,s);t?t.option(o||{})._init():e.data(this,s,new i(o,this))}),f}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,r){r=e(r||this.defaultElement||this)[0],this.element=e(r),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),r!==this&&(e.data(r,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===r&&this.destroy()}}),this.document=e(r.style?r.ownerDocument:r.document||r),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(n,r){var i=n,s,o,u;if(arguments.length===0)return e.widget.extend({},this.options);if(typeof n=="string"){i={},s=n.split("."),n=s.shift();if(s.length){o=i[n]=e.widget.extend({},this.options[n]);for(u=0;u<s.length-1;u++)o[s[u]]=o[s[u]]||{},o=o[s[u]];n=s.pop();if(r===t)return o[n]===t?null:o[n];o[n]=r}else{if(r===t)return this.options[n]===t?null:this.options[n];i[n]=r}}return this._setOptions(i),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,e==="disabled"&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,n,r){var i,s=this;typeof t!="boolean"&&(r=n,n=t,t=!1),r?(n=i=e(n),this.bindings=this.bindings.add(n)):(r=n,n=this.element,i=this.widget()),e.each(r,function(r,o){function u(){if(!t&&(s.options.disabled===!0||e(this).hasClass("ui-state-disabled")))return;return(typeof o=="string"?s[o]:o).apply(s,arguments)}typeof o!="string"&&(u.guid=o.guid=o.guid||u.guid||e.guid++);var a=r.match(/^(\w+)\s*(.*)$/),f=a[1]+s.eventNamespace,l=a[2];l?i.delegate(l,f,u):n.bind(f,u)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function n(){return(typeof e=="string"?r[e]:e).apply(r,arguments)}var r=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,r){var i,s,o=this.options[t];r=r||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],s=n.originalEvent;if(s)for(i in s)i in n||(n[i]=s[i]);return this.element.trigger(n,r),!(e.isFunction(o)&&o.apply(this.element[0],[n].concat(r))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(r,i,s){typeof i=="string"&&(i={effect:i});var o,u=i?i===!0||typeof i=="number"?n:i.effect||n:t;i=i||{},typeof i=="number"&&(i={duration:i}),o=!e.isEmptyObject(i),i.complete=s,i.delay&&r.delay(i.delay),o&&e.effects&&e.effects.effect[u]?r[t](i):u!==t&&r[u]?r[u](i.duration,i.easing,s):r.queue(function(n){e(this)[t](),s&&s.call(r[0]),n()})}})})(jQuery);(function(e,t){var n=!1;e(document).mouseup(function(){n=!1}),e.widget("ui.mouse",{version:"1.10.0",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent"))return e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(n)return;this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var r=this,i=t.which===1,s=typeof this.options.cancel=="string"&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;if(!i||s||!this._mouseCapture(t))return!0;this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){r.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)){this._mouseStarted=this._mouseStart(t)!==!1;if(!this._mouseStarted)return t.preventDefault(),!0}return!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return r._mouseMove(e)},this._mouseUpDelegate=function(e){return r._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),n=!0,!0},_mouseMove:function(t){return e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})(jQuery);(function(e,t){function h(e,t,n){return[parseInt(e[0],10)*(l.test(e[0])?t/100:1),parseInt(e[1],10)*(l.test(e[1])?n/100:1)]}function p(t,n){return parseInt(e.css(t,n),10)||0}function d(t){var n=t[0];return n.nodeType===9?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(n)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:n.preventDefault?{width:0,height:0,offset:{top:n.pageY,left:n.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.ui=e.ui||{};var n,r=Math.max,i=Math.abs,s=Math.round,o=/left|center|right/,u=/top|center|bottom/,a=/[\+\-]\d+%?/,f=/^\w+/,l=/%$/,c=e.fn.position;e.position={scrollbarWidth:function(){if(n!==t)return n;var r,i,s=e("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=s.children()[0];return e("body").append(s),r=o.offsetWidth,s.css("overflow","scroll"),i=o.offsetWidth,r===i&&(i=s[0].clientWidth),s.remove(),n=r-i},getScrollInfo:function(t){var n=t.isWindow?"":t.element.css("overflow-x"),r=t.isWindow?"":t.element.css("overflow-y"),i=n==="scroll"||n==="auto"&&t.width<t.element[0].scrollWidth,s=r==="scroll"||r==="auto"&&t.height<t.element[0].scrollHeight;return{width:i?e.position.scrollbarWidth():0,height:s?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var n=e(t||window),r=e.isWindow(n[0]);return{element:n,isWindow:r,offset:n.offset()||{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:r?n.width():n.outerWidth(),height:r?n.height():n.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return c.apply(this,arguments);t=e.extend({},t);var n,l,v,m,g,y,b=e(t.of),w=e.position.getWithinInfo(t.within),E=e.position.getScrollInfo(w),S=(t.collision||"flip").split(" "),x={};return y=d(b),b[0].preventDefault&&(t.at="left top"),l=y.width,v=y.height,m=y.offset,g=e.extend({},m),e.each(["my","at"],function(){var e=(t[this]||"").split(" "),n,r;e.length===1&&(e=o.test(e[0])?e.concat(["center"]):u.test(e[0])?["center"].concat(e):["center","center"]),e[0]=o.test(e[0])?e[0]:"center",e[1]=u.test(e[1])?e[1]:"center",n=a.exec(e[0]),r=a.exec(e[1]),x[this]=[n?n[0]:0,r?r[0]:0],t[this]=[f.exec(e[0])[0],f.exec(e[1])[0]]}),S.length===1&&(S[1]=S[0]),t.at[0]==="right"?g.left+=l:t.at[0]==="center"&&(g.left+=l/2),t.at[1]==="bottom"?g.top+=v:t.at[1]==="center"&&(g.top+=v/2),n=h(x.at,l,v),g.left+=n[0],g.top+=n[1],this.each(function(){var o,u,a=e(this),f=a.outerWidth(),c=a.outerHeight(),d=p(this,"marginLeft"),y=p(this,"marginTop"),T=f+d+p(this,"marginRight")+E.width,N=c+y+p(this,"marginBottom")+E.height,C=e.extend({},g),k=h(x.my,a.outerWidth(),a.outerHeight());t.my[0]==="right"?C.left-=f:t.my[0]==="center"&&(C.left-=f/2),t.my[1]==="bottom"?C.top-=c:t.my[1]==="center"&&(C.top-=c/2),C.left+=k[0],C.top+=k[1],e.support.offsetFractions||(C.left=s(C.left),C.top=s(C.top)),o={marginLeft:d,marginTop:y},e.each(["left","top"],function(r,i){e.ui.position[S[r]]&&e.ui.position[S[r]][i](C,{targetWidth:l,targetHeight:v,elemWidth:f,elemHeight:c,collisionPosition:o,collisionWidth:T,collisionHeight:N,offset:[n[0]+k[0],n[1]+k[1]],my:t.my,at:t.at,within:w,elem:a})}),t.using&&(u=function(e){var n=m.left-C.left,s=n+l-f,o=m.top-C.top,u=o+v-c,h={target:{element:b,left:m.left,top:m.top,width:l,height:v},element:{element:a,left:C.left,top:C.top,width:f,height:c},horizontal:s<0?"left":n>0?"right":"center",vertical:u<0?"top":o>0?"bottom":"middle"};l<f&&i(n+s)<l&&(h.horizontal="center"),v<c&&i(o+u)<v&&(h.vertical="middle"),r(i(n),i(s))>r(i(o),i(u))?h.important="horizontal":h.important="vertical",t.using.call(this,e,h)}),a.offset(e.extend(C,{using:u}))})},e.ui.position={fit:{left:function(e,t){var n=t.within,i=n.isWindow?n.scrollLeft:n.offset.left,s=n.width,o=e.left-t.collisionPosition.marginLeft,u=i-o,a=o+t.collisionWidth-s-i,f;t.collisionWidth>s?u>0&&a<=0?(f=e.left+u+t.collisionWidth-s-i,e.left+=u-f):a>0&&u<=0?e.left=i:u>a?e.left=i+s-t.collisionWidth:e.left=i:u>0?e.left+=u:a>0?e.left-=a:e.left=r(e.left-o,e.left)},top:function(e,t){var n=t.within,i=n.isWindow?n.scrollTop:n.offset.top,s=t.within.height,o=e.top-t.collisionPosition.marginTop,u=i-o,a=o+t.collisionHeight-s-i,f;t.collisionHeight>s?u>0&&a<=0?(f=e.top+u+t.collisionHeight-s-i,e.top+=u-f):a>0&&u<=0?e.top=i:u>a?e.top=i+s-t.collisionHeight:e.top=i:u>0?e.top+=u:a>0?e.top-=a:e.top=r(e.top-o,e.top)}},flip:{left:function(e,t){var n=t.within,r=n.offset.left+n.scrollLeft,s=n.width,o=n.isWindow?n.scrollLeft:n.offset.left,u=e.left-t.collisionPosition.marginLeft,a=u-o,f=u+t.collisionWidth-s-o,l=t.my[0]==="left"?-t.elemWidth:t.my[0]==="right"?t.elemWidth:0,c=t.at[0]==="left"?t.targetWidth:t.at[0]==="right"?-t.targetWidth:0,h=-2*t.offset[0],p,d;if(a<0){p=e.left+l+c+h+t.collisionWidth-s-r;if(p<0||p<i(a))e.left+=l+c+h}else if(f>0){d=e.left-t.collisionPosition.marginLeft+l+c+h-o;if(d>0||i(d)<f)e.left+=l+c+h}},top:function(e,t){var n=t.within,r=n.offset.top+n.scrollTop,s=n.height,o=n.isWindow?n.scrollTop:n.offset.top,u=e.top-t.collisionPosition.marginTop,a=u-o,f=u+t.collisionHeight-s-o,l=t.my[1]==="top",c=l?-t.elemHeight:t.my[1]==="bottom"?t.elemHeight:0,h=t.at[1]==="top"?t.targetHeight:t.at[1]==="bottom"?-t.targetHeight:0,p=-2*t.offset[1],d,v;a<0?(v=e.top+c+h+p+t.collisionHeight-s-r,e.top+c+h+p>a&&(v<0||v<i(a))&&(e.top+=c+h+p)):f>0&&(d=e.top-t.collisionPosition.marginTop+c+h+p-o,e.top+c+h+p>f&&(d>0||i(d)<f)&&(e.top+=c+h+p))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,n,r,i,s,o=document.getElementsByTagName("body")[0],u=document.createElement("div");t=document.createElement(o?"div":"body"),r={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},o&&e.extend(r,{position:"absolute",left:"-1000px",top:"-1000px"});for(s in r)t.style[s]=r[s];t.appendChild(u),n=o||document.documentElement,n.insertBefore(t,n.firstChild),u.style.cssText="position: absolute; left: 10.7432222px;",i=e(u).offset().left,e.support.offsetFractions=i>10&&i<11,t.innerHTML="",n.removeChild(t)}()})(jQuery);(function(e,t){e.widget("ui.draggable",e.ui.mouse,{version:"1.10.0",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){this.options.helper==="original"&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var n=this.options;return this.helper||n.disabled||e(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(e(n.iframeFix===!0?"iframe":n.iframeFix).each(function(){e("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var n=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),n.containment&&this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,n){this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute");if(!n){var r=this._uiHash();if(this._trigger("drag",t,r)===!1)return this._mouseUp({}),!1;this.position=r.position}if(!this.options.axis||this.options.axis!=="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!=="x")this.helper[0].style.top=this.position.top+"px";return e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var n,r=this,i=!1,s=!1;e.ui.ddmanager&&!this.options.dropBehaviour&&(s=e.ui.ddmanager.drop(this,t)),this.dropped&&(s=this.dropped,this.dropped=!1),n=this.element[0];while(n&&(n=n.parentNode))n===document&&(i=!0);return!i&&this.options.helper==="original"?!1:(this.options.revert==="invalid"&&!s||this.options.revert==="valid"&&s||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,s)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){r._trigger("stop",t)!==!1&&r._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1)},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){var n=!this.options.handle||!e(this.options.handle,this.element).length?!0:!1;return e(this.options.handle,this.element).find("*").addBack().each(function(){this===t.target&&(n=!0)}),n},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t])):n.helper==="clone"?this.element.clone().removeAttr("id"):this.element;return r.parents("body").length||r.appendTo(n.appendTo==="parent"?this.element[0].parentNode:n.appendTo),r[0]!==this.element[0]&&!/(fixed|absolute)/.test(r.css("position"))&&r.css("position","absolute"),r},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();this.cssPosition==="absolute"&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&e.ui.ie)t={top:0,left:0};return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,r,i=this.options;i.containment==="parent"&&(i.containment=this.helper[0].parentNode);if(i.containment==="document"||i.containment==="window")this.containment=[i.containment==="document"?0:e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,i.containment==="document"?0:e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(i.containment==="document"?0:e(window).scrollLeft())+e(i.containment==="document"?document:window).width()-this.helperProportions.width-this.margins.left,(i.containment==="document"?0:e(window).scrollTop())+(e(i.containment==="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(i.containment)&&i.containment.constructor!==Array){n=e(i.containment),r=n[0];if(!r)return;t=e(r).css("overflow")!=="hidden",this.containment=[(parseInt(e(r).css("borderLeftWidth"),10)||0)+(parseInt(e(r).css("paddingLeft"),10)||0),(parseInt(e(r).css("borderTopWidth"),10)||0)+(parseInt(e(r).css("paddingTop"),10)||0),(t?Math.max(r.scrollWidth,r.offsetWidth):r.offsetWidth)-(parseInt(e(r).css("borderLeftWidth"),10)||0)-(parseInt(e(r).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(r.scrollHeight,r.offsetHeight):r.offsetHeight)-(parseInt(e(r).css("borderTopWidth"),10)||0)-(parseInt(e(r).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=n}else i.containment.constructor===Array&&(this.containment=i.containment)},_convertPositionTo:function(t,n){n||(n=this.position);var r=t==="absolute"?1:-1,i=this.cssPosition!=="absolute"||this.scrollParent[0]!==document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,s=/(html|body)/i.test(i[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():s?0:i.scrollTop())*r,left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():s?0:i.scrollLeft())*r}},_generatePosition:function(t){var n,r,i,s,o=this.options,u=this.cssPosition!=="absolute"||this.scrollParent[0]!==document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(u[0].tagName),f=t.pageX,l=t.pageY;return this.originalPosition&&(this.containment&&(this.relative_container?(r=this.relative_container.offset(),n=[this.containment[0]+r.left,this.containment[1]+r.top,this.containment[2]+r.left,this.containment[3]+r.top]):n=this.containment,t.pageX-this.offset.click.left<n[0]&&(f=n[0]+this.offset.click.left),t.pageY-this.offset.click.top<n[1]&&(l=n[1]+this.offset.click.top),t.pageX-this.offset.click.left>n[2]&&(f=n[2]+this.offset.click.left),t.pageY-this.offset.click.top>n[3]&&(l=n[3]+this.offset.click.top)),o.grid&&(i=o.grid[1]?this.originalPageY+Math.round((l-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,l=n?i-this.offset.click.top>=n[1]||i-this.offset.click.top>n[3]?i:i-this.offset.click.top>=n[1]?i-o.grid[1]:i+o.grid[1]:i,s=o.grid[0]?this.originalPageX+Math.round((f-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,f=n?s-this.offset.click.left>=n[0]||s-this.offset.click.left>n[2]?s:s-this.offset.click.left>=n[0]?s-o.grid[0]:s+o.grid[0]:s)),{top:l-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():a?0:u.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():a?0:u.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!==this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,n,r){return r=r||this._uiHash(),e.ui.plugin.call(this,t,[n,r]),t==="drag"&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,n,r)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,n){var r=e(this).data("ui-draggable"),i=r.options,s=e.extend({},n,{item:r.element});r.sortables=[],e(i.connectToSortable).each(function(){var n=e.data(this,"ui-sortable");n&&!n.options.disabled&&(r.sortables.push({instance:n,shouldRevert:n.options.revert}),n.refreshPositions(),n._trigger("activate",t,s))})},stop:function(t,n){var r=e(this).data("ui-draggable"),i=e.extend({},n,{item:r.element});e.each(r.sortables,function(){this.instance.isOver?(this.instance.isOver=0,r.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,r.options.helper==="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,i))})},drag:function(t,n){var r=e(this).data("ui-draggable"),i=this;e.each(r.sortables,function(){var s=!1,o=this;this.instance.positionAbs=r.positionAbs,this.instance.helperProportions=r.helperProportions,this.instance.offset.click=r.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(s=!0,e.each(r.sortables,function(){return this.instance.positionAbs=r.positionAbs,this.instance.helperProportions=r.helperProportions,this.instance.offset.click=r.offset.click,this!==o&&this.instance._intersectsWith(this.instance.containerCache)&&e.ui.contains(o.instance.element[0],this.instance.element[0])&&(s=!1),s})),s?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(i).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return n.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=r.offset.click.top,this.instance.offset.click.left=r.offset.click.left,this.instance.offset.parent.left-=r.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=r.offset.parent.top-this.instance.offset.parent.top,r._trigger("toSortable",t),r.dropped=this.instance.element,r.currentItem=r.element,this.instance.fromOutside=r),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),r._trigger("fromSortable",t),r.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(){var t=e("body"),n=e(this).data("ui-draggable").options;t.css("cursor")&&(n._cursor=t.css("cursor")),t.css("cursor",n.cursor)},stop:function(){var t=e(this).data("ui-draggable").options;t._cursor&&e("body").css("cursor",t._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,n){var r=e(n.helper),i=e(this).data("ui-draggable").options;r.css("opacity")&&(i._opacity=r.css("opacity")),r.css("opacity",i.opacity)},stop:function(t,n){var r=e(this).data("ui-draggable").options;r._opacity&&e(n.helper).css("opacity",r._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(){var t=e(this).data("ui-draggable");t.scrollParent[0]!==document&&t.scrollParent[0].tagName!=="HTML"&&(t.overflowOffset=t.scrollParent.offset())},drag:function(t){var n=e(this).data("ui-draggable"),r=n.options,i=!1;if(n.scrollParent[0]!==document&&n.scrollParent[0].tagName!=="HTML"){if(!r.axis||r.axis!=="x")n.overflowOffset.top+n.scrollParent[0].offsetHeight-t.pageY<r.scrollSensitivity?n.scrollParent[0].scrollTop=i=n.scrollParent[0].scrollTop+r.scrollSpeed:t.pageY-n.overflowOffset.top<r.scrollSensitivity&&(n.scrollParent[0].scrollTop=i=n.scrollParent[0].scrollTop-r.scrollSpeed);if(!r.axis||r.axis!=="y")n.overflowOffset.left+n.scrollParent[0].offsetWidth-t.pageX<r.scrollSensitivity?n.scrollParent[0].scrollLeft=i=n.scrollParent[0].scrollLeft+r.scrollSpeed:t.pageX-n.overflowOffset.left<r.scrollSensitivity&&(n.scrollParent[0].scrollLeft=i=n.scrollParent[0].scrollLeft-r.scrollSpeed)}else{if(!r.axis||r.axis!=="x")t.pageY-e(document).scrollTop()<r.scrollSensitivity?i=e(document).scrollTop(e(document).scrollTop()-r.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<r.scrollSensitivity&&(i=e(document).scrollTop(e(document).scrollTop()+r.scrollSpeed));if(!r.axis||r.axis!=="y")t.pageX-e(document).scrollLeft()<r.scrollSensitivity?i=e(document).scrollLeft(e(document).scrollLeft()-r.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<r.scrollSensitivity&&(i=e(document).scrollLeft(e(document).scrollLeft()+r.scrollSpeed))}i!==!1&&e.ui.ddmanager&&!r.dropBehaviour&&e.ui.ddmanager.prepareOffsets(n,t)}}),e.ui.plugin.add("draggable","snap",{start:function(){var t=e(this).data("ui-draggable"),n=t.options;t.snapElements=[],e(n.snap.constructor!==String?n.snap.items||":data(ui-draggable)":n.snap).each(function(){var n=e(this),r=n.offset();this!==t.element[0]&&t.snapElements.push({item:this,width:n.outerWidth(),height:n.outerHeight(),top:r.top,left:r.left})})},drag:function(t,n){var r,i,s,o,u,a,f,l,c,h,p=e(this).data("ui-draggable"),d=p.options,v=d.snapTolerance,m=n.offset.left,g=m+p.helperProportions.width,y=n.offset.top,b=y+p.helperProportions.height;for(c=p.snapElements.length-1;c>=0;c--){u=p.snapElements[c].left,a=u+p.snapElements[c].width,f=p.snapElements[c].top,l=f+p.snapElements[c].height;if(!(u-v<m&&m<a+v&&f-v<y&&y<l+v||u-v<m&&m<a+v&&f-v<b&&b<l+v||u-v<g&&g<a+v&&f-v<y&&y<l+v||u-v<g&&g<a+v&&f-v<b&&b<l+v)){p.snapElements[c].snapping&&p.options.snap.release&&p.options.snap.release.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[c].item})),p.snapElements[c].snapping=!1;continue}d.snapMode!=="inner"&&(r=Math.abs(f-b)<=v,i=Math.abs(l-y)<=v,s=Math.abs(u-g)<=v,o=Math.abs(a-m)<=v,r&&(n.position.top=p._convertPositionTo("relative",{top:f-p.helperProportions.height,left:0}).top-p.margins.top),i&&(n.position.top=p._convertPositionTo("relative",{top:l,left:0}).top-p.margins.top),s&&(n.position.left=p._convertPositionTo("relative",{top:0,left:u-p.helperProportions.width}).left-p.margins.left),o&&(n.position.left=p._convertPositionTo("relative",{top:0,left:a}).left-p.margins.left)),h=r||i||s||o,d.snapMode!=="outer"&&(r=Math.abs(f-y)<=v,i=Math.abs(l-b)<=v,s=Math.abs(u-m)<=v,o=Math.abs(a-g)<=v,r&&(n.position.top=p._convertPositionTo("relative",{top:f,left:0}).top-p.margins.top),i&&(n.position.top=p._convertPositionTo("relative",{top:l-p.helperProportions.height,left:0}).top-p.margins.top),s&&(n.position.left=p._convertPositionTo("relative",{top:0,left:u}).left-p.margins.left),o&&(n.position.left=p._convertPositionTo("relative",{top:0,left:a-p.helperProportions.width}).left-p.margins.left)),!p.snapElements[c].snapping&&(r||i||s||o||h)&&p.options.snap.snap&&p.options.snap.snap.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[c].item})),p.snapElements[c].snapping=r||i||s||o||h}}}),e.ui.plugin.add("draggable","stack",{start:function(){var t,n=e(this).data("ui-draggable").options,r=e.makeArray(e(n.stack)).sort(function(t,n){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(n).css("zIndex"),10)||0)});if(!r.length)return;t=parseInt(r[0].style.zIndex,10)||0,e(r).each(function(e){this.style.zIndex=t+e}),this[0].style.zIndex=t+r.length}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,n){var r=e(n.helper),i=e(this).data("ui-draggable").options;r.css("zIndex")&&(i._zIndex=r.css("zIndex")),r.css("zIndex",i.zIndex)},stop:function(t,n){var r=e(this).data("ui-draggable").options;r._zIndex&&e(n.helper).css("zIndex",r._zIndex)}})})(jQuery);(function(e,t){function n(e,t,n){return e>t&&e<t+n}e.widget("ui.droppable",{version:"1.10.0",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t=this.options,n=t.accept;this.isover=!1,this.isout=!0,this.accept=e.isFunction(n)?n:function(e){return e.is(n)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},e.ui.ddmanager.droppables[t.scope]=e.ui.ddmanager.droppables[t.scope]||[],e.ui.ddmanager.droppables[t.scope].push(this),t.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){var t=0,n=e.ui.ddmanager.droppables[this.options.scope];for(;t<n.length;t++)n[t]===this&&n.splice(t,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,n){t==="accept"&&(this.accept=e.isFunction(n)?n:function(e){return e.is(n)}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),n&&this._trigger("activate",t,this.ui(n))},_deactivate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),n&&this._trigger("deactivate",t,this.ui(n))},_over:function(t){var n=e.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]===this.element[0])return;this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(n)))},_out:function(t){var n=e.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]===this.element[0])return;this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(n)))},_drop:function(t,n){var r=n||e.ui.ddmanager.current,i=!1;return!r||(r.currentItem||r.element)[0]===this.element[0]?!1:(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var t=e.data(this,"ui-droppable");if(t.options.greedy&&!t.options.disabled&&t.options.scope===r.options.scope&&t.accept.call(t.element[0],r.currentItem||r.element)&&e.ui.intersect(r,e.extend(t,{offset:t.element.offset()}),t.options.tolerance))return i=!0,!1}),i?!1:this.accept.call(this.element[0],r.currentItem||r.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(r)),this.element):!1)},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(e,t,r){if(!t.offset)return!1;var i,s,o=(e.positionAbs||e.position.absolute).left,u=o+e.helperProportions.width,a=(e.positionAbs||e.position.absolute).top,f=a+e.helperProportions.height,l=t.offset.left,c=l+t.proportions.width,h=t.offset.top,p=h+t.proportions.height;switch(r){case"fit":return l<=o&&u<=c&&h<=a&&f<=p;case"intersect":return l<o+e.helperProportions.width/2&&u-e.helperProportions.width/2<c&&h<a+e.helperProportions.height/2&&f-e.helperProportions.height/2<p;case"pointer":return i=(e.positionAbs||e.position.absolute).left+(e.clickOffset||e.offset.click).left,s=(e.positionAbs||e.position.absolute).top+(e.clickOffset||e.offset.click).top,n(s,h,t.proportions.height)&&n(i,l,t.proportions.width);case"touch":return(a>=h&&a<=p||f>=h&&f<=p||a<h&&f>p)&&(o>=l&&o<=c||u>=l&&u<=c||o<l&&u>c);default:return!1}},e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,n){var r,i,s=e.ui.ddmanager.droppables[t.options.scope]||[],o=n?n.type:null,u=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(r=0;r<s.length;r++){if(s[r].options.disabled||t&&!s[r].accept.call(s[r].element[0],t.currentItem||t.element))continue;for(i=0;i<u.length;i++)if(u[i]===s[r].element[0]){s[r].proportions.height=0;continue e}s[r].visible=s[r].element.css("display")!=="none";if(!s[r].visible)continue;o==="mousedown"&&s[r]._activate.call(s[r],n),s[r].offset=s[r].element.offset(),s[r].proportions={width:s[r].element[0].offsetWidth,height:s[r].element[0].offsetHeight}}},drop:function(t,n){var r=!1;return e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options)return;!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance)&&(r=this._drop.call(this,n)||r),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,n))}),r},dragStart:function(t,n){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)})},drag:function(t,n){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,n),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible)return;var r,i,s,o=e.ui.intersect(t,this,this.options.tolerance),u=!o&&this.isover?"isout":o&&!this.isover?"isover":null;if(!u)return;this.options.greedy&&(i=this.options.scope,s=this.element.parents(":data(ui-droppable)").filter(function(){return e.data(this,"ui-droppable").options.scope===i}),s.length&&(r=e.data(s[0],"ui-droppable"),r.greedyChild=u==="isover")),r&&u==="isover"&&(r.isover=!1,r.isout=!0,r._out.call(r,n)),this[u]=!0,this[u==="isout"?"isover":"isout"]=!1,this[u==="isover"?"_over":"_out"].call(this,n),r&&u==="isout"&&(r.isout=!1,r.isover=!0,r._over.call(r,n))})},dragStop:function(t,n){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)}}})(jQuery);(function(e,t){function n(e){return parseInt(e,10)||0}function r(e){return!isNaN(parseInt(e,10))}e.widget("ui.resizable",e.ui.mouse,{version:"1.10.0",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var t,n,r,i,s,o=this,u=this.options;this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!u.aspectRatio,aspectRatio:u.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:u.helper||u.ghost||u.animate?u.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=u.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");if(this.handles.constructor===String){this.handles==="all"&&(this.handles="n,e,s,w,se,sw,ne,nw"),t=this.handles.split(","),this.handles={};for(n=0;n<t.length;n++)r=e.trim(t[n]),s="ui-resizable-"+r,i=e("<div class='ui-resizable-handle "+s+"'></div>"),i.css({zIndex:u.zIndex}),"se"===r&&i.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[r]=".ui-resizable-"+r,this.element.append(i)}this._renderAxis=function(t){var n,r,i,s;t=t||this.element;for(n in this.handles){this.handles[n].constructor===String&&(this.handles[n]=e(this.handles[n],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(r=e(this.handles[n],this.element),s=/sw|ne|nw|se|n|s/.test(n)?r.outerHeight():r.outerWidth(),i=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join(""),t.css(i,s),this._proportionallyResize());if(!e(this.handles[n]).length)continue}},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){o.resizing||(this.className&&(i=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),o.axis=i&&i[1]?i[1]:"se")}),u.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){if(u.disabled)return;e(this).removeClass("ui-resizable-autohide"),o._handles.show()}).mouseleave(function(){if(u.disabled)return;o.resizing||(e(this).addClass("ui-resizable-autohide"),o._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,n=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(n(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),n(this.originalElement),this},_mouseCapture:function(t){var n,r,i=!1;for(n in this.handles){r=e(this.handles[n])[0];if(r===t.target||e.contains(r,t.target))i=!0}return!this.options.disabled&&i},_mouseStart:function(t){var r,i,s,o=this.options,u=this.element.position(),a=this.element;return this.resizing=!0,/absolute/.test(a.css("position"))?a.css({position:"absolute",top:a.css("top"),left:a.css("left")}):a.is(".ui-draggable")&&a.css({position:"absolute",top:u.top,left:u.left}),this._renderProxy(),r=n(this.helper.css("left")),i=n(this.helper.css("top")),o.containment&&(r+=e(o.containment).scrollLeft()||0,i+=e(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:r,top:i},this.size=this._helper?{width:a.outerWidth(),height:a.outerHeight()}:{width:a.width(),height:a.height()},this.originalSize=this._helper?{width:a.outerWidth(),height:a.outerHeight()}:{width:a.width(),height:a.height()},this.originalPosition={left:r,top:i},this.sizeDiff={width:a.outerWidth()-a.width(),height:a.outerHeight()-a.height()},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio=typeof o.aspectRatio=="number"?o.aspectRatio:this.originalSize.width/this.originalSize.height||1,s=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor",s==="auto"?this.axis+"-resize":s),a.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var n,r=this.helper,i={},s=this.originalMousePosition,o=this.axis,u=this.position.top,a=this.position.left,f=this.size.width,l=this.size.height,c=t.pageX-s.left||0,h=t.pageY-s.top||0,p=this._change[o];if(!p)return!1;n=p.apply(this,[t,c,h]),this._updateVirtualBoundaries(t.shiftKey);if(this._aspectRatio||t.shiftKey)n=this._updateRatio(n,t);return n=this._respectSize(n,t),this._updateCache(n),this._propagate("resize",t),this.position.top!==u&&(i.top=this.position.top+"px"),this.position.left!==a&&(i.left=this.position.left+"px"),this.size.width!==f&&(i.width=this.size.width+"px"),this.size.height!==l&&(i.height=this.size.height+"px"),r.css(i),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(i)||this._trigger("resize",t,this.ui()),!1},_mouseStop:function(t){this.resizing=!1;var n,r,i,s,o,u,a,f=this.options,l=this;return this._helper&&(n=this._proportionallyResizeElements,r=n.length&&/textarea/i.test(n[0].nodeName),i=r&&e.ui.hasScroll(n[0],"left")?0:l.sizeDiff.height,s=r?0:l.sizeDiff.width,o={width:l.helper.width()-s,height:l.helper.height()-i},u=parseInt(l.element.css("left"),10)+(l.position.left-l.originalPosition.left)||null,a=parseInt(l.element.css("top"),10)+(l.position.top-l.originalPosition.top)||null,f.animate||this.element.css(e.extend(o,{top:a,left:u})),l.helper.height(l.size.height),l.helper.width(l.size.width),this._helper&&!f.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(e){var t,n,i,s,o,u=this.options;o={minWidth:r(u.minWidth)?u.minWidth:0,maxWidth:r(u.maxWidth)?u.maxWidth:Infinity,minHeight:r(u.minHeight)?u.minHeight:0,maxHeight:r(u.maxHeight)?u.maxHeight:Infinity};if(this._aspectRatio||e)t=o.minHeight*this.aspectRatio,i=o.minWidth/this.aspectRatio,n=o.maxHeight*this.aspectRatio,s=o.maxWidth/this.aspectRatio,t>o.minWidth&&(o.minWidth=t),i>o.minHeight&&(o.minHeight=i),n<o.maxWidth&&(o.maxWidth=n),s<o.maxHeight&&(o.maxHeight=s);this._vBoundaries=o},_updateCache:function(e){this.offset=this.helper.offset(),r(e.left)&&(this.position.left=e.left),r(e.top)&&(this.position.top=e.top),r(e.height)&&(this.size.height=e.height),r(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,n=this.size,i=this.axis;return r(e.height)?e.width=e.height*this.aspectRatio:r(e.width)&&(e.height=e.width/this.aspectRatio),i==="sw"&&(e.left=t.left+(n.width-e.width),e.top=null),i==="nw"&&(e.top=t.top+(n.height-e.height),e.left=t.left+(n.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,n=this.axis,i=r(e.width)&&t.maxWidth&&t.maxWidth<e.width,s=r(e.height)&&t.maxHeight&&t.maxHeight<e.height,o=r(e.width)&&t.minWidth&&t.minWidth>e.width,u=r(e.height)&&t.minHeight&&t.minHeight>e.height,a=this.originalPosition.left+this.originalSize.width,f=this.position.top+this.size.height,l=/sw|nw|w/.test(n),c=/nw|ne|n/.test(n);return o&&(e.width=t.minWidth),u&&(e.height=t.minHeight),i&&(e.width=t.maxWidth),s&&(e.height=t.maxHeight),o&&l&&(e.left=a-t.minWidth),i&&l&&(e.left=a-t.maxWidth),u&&c&&(e.top=f-t.minHeight),s&&c&&(e.top=f-t.maxHeight),!e.width&&!e.height&&!e.left&&e.top?e.top=null:!e.width&&!e.height&&!e.top&&e.left&&(e.left=null),e},_proportionallyResize:function(){if(!this._proportionallyResizeElements.length)return;var e,t,n,r,i,s=this.helper||this.element;for(e=0;e<this._proportionallyResizeElements.length;e++){i=this._proportionallyResizeElements[e];if(!this.borderDif){this.borderDif=[],n=[i.css("borderTopWidth"),i.css("borderRightWidth"),i.css("borderBottomWidth"),i.css("borderLeftWidth")],r=[i.css("paddingTop"),i.css("paddingRight"),i.css("paddingBottom"),i.css("paddingLeft")];for(t=0;t<n.length;t++)this.borderDif[t]=(parseInt(n[t],10)||0)+(parseInt(r[t],10)||0)}i.css({height:s.height()-this.borderDif[0]-this.borderDif[2]||0,width:s.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var t=this.element,n=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var n=this.originalSize,r=this.originalPosition;return{left:r.left+t,width:n.width-t}},n:function(e,t,n){var r=this.originalSize,i=this.originalPosition;return{top:i.top+n,height:r.height-n}},s:function(e,t,n){return{height:this.originalSize.height+n}},se:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},sw:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,n,r]))},ne:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},nw:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,n,r]))}},_propagate:function(t,n){e.ui.plugin.call(this,t,[n,this.ui()]),t!=="resize"&&this._trigger(t,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var n=e(this).data("ui-resizable"),r=n.options,i=n._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),o=s&&e.ui.hasScroll(i[0],"left")?0:n.sizeDiff.height,u=s?0:n.sizeDiff.width,a={width:n.size.width-u,height:n.size.height-o},f=parseInt(n.element.css("left"),10)+(n.position.left-n.originalPosition.left)||null,l=parseInt(n.element.css("top"),10)+(n.position.top-n.originalPosition.top)||null;n.element.animate(e.extend(a,l&&f?{top:l,left:f}:{}),{duration:r.animateDuration,easing:r.animateEasing,step:function(){var r={width:parseInt(n.element.css("width"),10),height:parseInt(n.element.css("height"),10),top:parseInt(n.element.css("top"),10),left:parseInt(n.element.css("left"),10)};i&&i.length&&e(i[0]).css({width:r.width,height:r.height}),n._updateCache(r),n._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var t,r,i,s,o,u,a,f=e(this).data("ui-resizable"),l=f.options,c=f.element,h=l.containment,p=h instanceof e?h.get(0):/parent/.test(h)?c.parent().get(0):h;if(!p)return;f.containerElement=e(p),/document/.test(h)||h===document?(f.containerOffset={left:0,top:0},f.containerPosition={left:0,top:0},f.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(t=e(p),r=[],e(["Top","Right","Left","Bottom"]).each(function(e,i){r[e]=n(t.css("padding"+i))}),f.containerOffset=t.offset(),f.containerPosition=t.position(),f.containerSize={height:t.innerHeight()-r[3],width:t.innerWidth()-r[1]},i=f.containerOffset,s=f.containerSize.height,o=f.containerSize.width,u=e.ui.hasScroll(p,"left")?p.scrollWidth:o,a=e.ui.hasScroll(p)?p.scrollHeight:s,f.parentData={element:p,left:i.left,top:i.top,width:u,height:a})},resize:function(t){var n,r,i,s,o=e(this).data("ui-resizable"),u=o.options,a=o.containerOffset,f=o.position,l=o._aspectRatio||t.shiftKey,c={top:0,left:0},h=o.containerElement;h[0]!==document&&/static/.test(h.css("position"))&&(c=a),f.left<(o._helper?a.left:0)&&(o.size.width=o.size.width+(o._helper?o.position.left-a.left:o.position.left-c.left),l&&(o.size.height=o.size.width/o.aspectRatio),o.position.left=u.helper?a.left:0),f.top<(o._helper?a.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-a.top:o.position.top),l&&(o.size.width=o.size.height*o.aspectRatio),o.position.top=o._helper?a.top:0),o.offset.left=o.parentData.left+o.position.left,o.offset.top=o.parentData.top+o.position.top,n=Math.abs((o._helper?o.offset.left-c.left:o.offset.left-c.left)+o.sizeDiff.width),r=Math.abs((o._helper?o.offset.top-c.top:o.offset.top-a.top)+o.sizeDiff.height),i=o.containerElement.get(0)===o.element.parent().get(0),s=/relative|absolute/.test(o.containerElement.css("position")),i&&s&&(n-=o.parentData.left),n+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-n,l&&(o.size.height=o.size.width/o.aspectRatio)),r+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-r,l&&(o.size.width=o.size.height*o.aspectRatio))},stop:function(){var t=e(this).data("ui-resizable"),n=t.options,r=t.containerOffset,i=t.containerPosition,s=t.containerElement,o=e(t.helper),u=o.offset(),a=o.outerWidth()-t.sizeDiff.width,f=o.outerHeight()-t.sizeDiff.height;t._helper&&!n.animate&&/relative/.test(s.css("position"))&&e(this).css({left:u.left-i.left-r.left,width:a,height:f}),t._helper&&!n.animate&&/static/.test(s.css("position"))&&e(this).css({left:u.left-i.left-r.left,width:a,height:f})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).data("ui-resizable"),n=t.options,r=function(t){e(t).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};typeof n.alsoResize=="object"&&!n.alsoResize.parentNode?n.alsoResize.length?(n.alsoResize=n.alsoResize[0],r(n.alsoResize)):e.each(n.alsoResize,function(e){r(e)}):r(n.alsoResize)},resize:function(t,n){var r=e(this).data("ui-resizable"),i=r.options,s=r.originalSize,o=r.originalPosition,u={height:r.size.height-s.height||0,width:r.size.width-s.width||0,top:r.position.top-o.top||0,left:r.position.left-o.left||0},a=function(t,r){e(t).each(function(){var t=e(this),i=e(this).data("ui-resizable-alsoresize"),s={},o=r&&r.length?r:t.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(o,function(e,t){var n=(i[t]||0)+(u[t]||0);n&&n>=0&&(s[t]=n||null)}),t.css(s)})};typeof i.alsoResize=="object"&&!i.alsoResize.nodeType?e.each(i.alsoResize,function(e,t){a(e,t)}):a(i.alsoResize)},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).data("ui-resizable"),n=t.options,r=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:r.height,width:r.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof n.ghost=="string"?n.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).data("ui-resizable");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).data("ui-resizable");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t=e(this).data("ui-resizable"),n=t.options,r=t.size,i=t.originalSize,s=t.originalPosition,o=t.axis,u=typeof n.grid=="number"?[n.grid,n.grid]:n.grid,a=u[0]||1,f=u[1]||1,l=Math.round((r.width-i.width)/a)*a,c=Math.round((r.height-i.height)/f)*f,h=i.width+l,p=i.height+c,d=n.maxWidth&&n.maxWidth<h,v=n.maxHeight&&n.maxHeight<p,m=n.minWidth&&n.minWidth>h,g=n.minHeight&&n.minHeight>p;n.grid=u,m&&(h+=a),g&&(p+=f),d&&(h-=a),v&&(p-=f),/^(se|s|e)$/.test(o)?(t.size.width=h,t.size.height=p):/^(ne)$/.test(o)?(t.size.width=h,t.size.height=p,t.position.top=s.top-c):/^(sw)$/.test(o)?(t.size.width=h,t.size.height=p,t.position.left=s.left-l):(t.size.width=h,t.size.height=p,t.position.top=s.top-c,t.position.left=s.left-l)}})})(jQuery);(function(e,t){e.widget("ui.selectable",e.ui.mouse,{version:"1.10.0",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t,n=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){t=e(n.options.filter,n.element[0]),t.addClass("ui-selectee"),t.each(function(){var t=e(this),n=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:n.left,top:n.top,right:n.left+t.outerWidth(),bottom:n.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=t.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(t){var n=this,r=this.options;this.opos=[t.pageX,t.pageY];if(this.options.disabled)return;this.selectees=e(r.filter,this.element[0]),this._trigger("start",t),e(r.appendTo).append(this.helper),this.helper.css({left:t.pageX,top:t.pageY,width:0,height:0}),r.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var r=e.data(this,"selectable-item");r.startselected=!0,!t.metaKey&&!t.ctrlKey&&(r.$element.removeClass("ui-selected"),r.selected=!1,r.$element.addClass("ui-unselecting"),r.unselecting=!0,n._trigger("unselecting",t,{unselecting:r.element}))}),e(t.target).parents().addBack().each(function(){var r,i=e.data(this,"selectable-item");if(i)return r=!t.metaKey&&!t.ctrlKey||!i.$element.hasClass("ui-selected"),i.$element.removeClass(r?"ui-unselecting":"ui-selected").addClass(r?"ui-selecting":"ui-unselecting"),i.unselecting=!r,i.selecting=r,i.selected=r,r?n._trigger("selecting",t,{selecting:i.element}):n._trigger("unselecting",t,{unselecting:i.element}),!1})},_mouseDrag:function(t){this.dragged=!0;if(this.options.disabled)return;var n,r=this,i=this.options,s=this.opos[0],o=this.opos[1],u=t.pageX,a=t.pageY;return s>u&&(n=u,u=s,s=n),o>a&&(n=a,a=o,o=n),this.helper.css({left:s,top:o,width:u-s,height:a-o}),this.selectees.each(function(){var n=e.data(this,"selectable-item"),f=!1;if(!n||n.element===r.element[0])return;i.tolerance==="touch"?f=!(n.left>u||n.right<s||n.top>a||n.bottom<o):i.tolerance==="fit"&&(f=n.left>s&&n.right<u&&n.top>o&&n.bottom<a),f?(n.selected&&(n.$element.removeClass("ui-selected"),n.selected=!1),n.unselecting&&(n.$element.removeClass("ui-unselecting"),n.unselecting=!1),n.selecting||(n.$element.addClass("ui-selecting"),n.selecting=!0,r._trigger("selecting",t,{selecting:n.element}))):(n.selecting&&((t.metaKey||t.ctrlKey)&&n.startselected?(n.$element.removeClass("ui-selecting"),n.selecting=!1,n.$element.addClass("ui-selected"),n.selected=!0):(n.$element.removeClass("ui-selecting"),n.selecting=!1,n.startselected&&(n.$element.addClass("ui-unselecting"),n.unselecting=!0),r._trigger("unselecting",t,{unselecting:n.element}))),n.selected&&!t.metaKey&&!t.ctrlKey&&!n.startselected&&(n.$element.removeClass("ui-selected"),n.selected=!1,n.$element.addClass("ui-unselecting"),n.unselecting=!0,r._trigger("unselecting",t,{unselecting:n.element})))}),!1},_mouseStop:function(t){var n=this;return this.dragged=!1,e(".ui-unselecting",this.element[0]).each(function(){var r=e.data(this,"selectable-item");r.$element.removeClass("ui-unselecting"),r.unselecting=!1,r.startselected=!1,n._trigger("unselected",t,{unselected:r.element})}),e(".ui-selecting",this.element[0]).each(function(){var r=e.data(this,"selectable-item");r.$element.removeClass("ui-selecting").addClass("ui-selected"),r.selecting=!1,r.selected=!0,r.startselected=!0,n._trigger("selected",t,{selected:r.element})}),this._trigger("stop",t),this.helper.remove(),!1}})})(jQuery);(function(e,t){function n(e,t,n){return e>t&&e<t+n}e.widget("ui.sortable",e.ui.mouse,{version:"1.10.0",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?e.axis==="x"||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,n){t==="disabled"?(this.options[t]=n,this.widget().toggleClass("ui-sortable-disabled",!!n)):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,n){var r=null,i=!1,s=this;if(this.reverting)return!1;if(this.options.disabled||this.options.type==="static")return!1;this._refreshItems(t),e(t.target).parents().each(function(){if(e.data(this,s.widgetName+"-item")===s)return r=e(this),!1}),e.data(t.target,s.widgetName+"-item")===s&&(r=e(t.target));if(!r)return!1;if(this.options.handle&&!n){e(this.options.handle,r).find("*").addBack().each(function(){this===t.target&&(i=!0)});if(!i)return!1}return this.currentItem=r,this._removeCurrentsFromItems(),!0},_mouseStart:function(t,n,r){var i,s=this.options;this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,s.cursorAt&&this._adjustOffsetFromHelper(s.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),s.containment&&this._setContainment(),s.cursor&&(e("body").css("cursor")&&(this._storedCursor=e("body").css("cursor")),e("body").css("cursor",s.cursor)),s.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",s.opacity)),s.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",s.zIndex)),this.scrollParent[0]!==document&&this.scrollParent[0].tagName!=="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions();if(!r)for(i=this.containers.length-1;i>=0;i--)this.containers[i]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!s.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var n,r,i,s,o=this.options,u=!1;this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&this.scrollParent[0].tagName!=="HTML"?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=u=this.scrollParent[0].scrollTop+o.scrollSpeed:t.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=u=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=u=this.scrollParent[0].scrollLeft+o.scrollSpeed:t.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=u=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(t.pageY-e(document).scrollTop()<o.scrollSensitivity?u=e(document).scrollTop(e(document).scrollTop()-o.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<o.scrollSensitivity&&(u=e(document).scrollTop(e(document).scrollTop()+o.scrollSpeed)),t.pageX-e(document).scrollLeft()<o.scrollSensitivity?u=e(document).scrollLeft(e(document).scrollLeft()-o.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<o.scrollSensitivity&&(u=e(document).scrollLeft(e(document).scrollLeft()+o.scrollSpeed))),u!==!1&&e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!=="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!=="x")this.helper[0].style.top=this.position.top+"px";for(n=this.items.length-1;n>=0;n--){r=this.items[n],i=r.item[0],s=this._intersectsWithPointer(r);if(!s)continue;if(r.instance!==this.currentContainer)continue;if(i!==this.currentItem[0]&&this.placeholder[s===1?"next":"prev"]()[0]!==i&&!e.contains(this.placeholder[0],i)&&(this.options.type==="semi-dynamic"?!e.contains(this.element[0],i):!0)){this.direction=s===1?"down":"up";if(this.options.tolerance!=="pointer"&&!this._intersectsWithSides(r))break;this._rearrange(t,r),this._trigger("change",t,this._uiHash());break}}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,n){if(!t)return;e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t);if(this.options.revert){var r=this,i=this.placeholder.offset();this.reverting=!0,e(this.helper).animate({left:i.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft),top:i.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){r._clear(t)})}else this._clear(t,n);return!1},cancel:function(){if(this.dragging){this._mouseUp({target:null}),this.options.helper==="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.options.helper!=="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},e(n).each(function(){var n=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);n&&r.push((t.key||n[1]+"[]")+"="+(t.key&&t.expression?n[1]:n[2]))}),!r.length&&t.key&&r.push(t.key+"="),r.join("&")},toArray:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},n.each(function(){r.push(e(t.item||this).attr(t.attribute||"id")||"")}),r},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,r=this.positionAbs.top,i=r+this.helperProportions.height,s=e.left,o=s+e.width,u=e.top,a=u+e.height,f=this.offset.click.top,l=this.offset.click.left,c=r+f>u&&r+f<a&&t+l>s&&t+l<o;return this.options.tolerance==="pointer"||this.options.forcePointerForContainers||this.options.tolerance!=="pointer"&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?c:s<t+this.helperProportions.width/2&&n-this.helperProportions.width/2<o&&u<r+this.helperProportions.height/2&&i-this.helperProportions.height/2<a},_intersectsWithPointer:function(e){var t=this.options.axis==="x"||n(this.positionAbs.top+this.offset.click.top,e.top,e.height),r=this.options.axis==="y"||n(this.positionAbs.left+this.offset.click.left,e.left,e.width),i=t&&r,s=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return i?this.floating?o&&o==="right"||s==="down"?2:1:s&&(s==="down"?2:1):!1},_intersectsWithSides:function(e){var t=n(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),r=n(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),i=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return this.floating&&s?s==="right"&&r||s==="left"&&!r:i&&(i==="down"&&t||i==="up"&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return e!==0&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return e!==0&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var n,r,i,s,o=[],u=[],a=this._connectWith();if(a&&t)for(n=a.length-1;n>=0;n--){i=e(a[n]);for(r=i.length-1;r>=0;r--)s=e.data(i[r],this.widgetFullName),s&&s!==this&&!s.options.disabled&&u.push([e.isFunction(s.options.items)?s.options.items.call(s.element):e(s.options.items,s.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),s])}u.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(n=u.length-1;n>=0;n--)u[n][0].each(function(){o.push(this)});return e(o)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var n=0;n<t.length;n++)if(t[n]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var n,r,i,s,o,u,a,f,l=this.items,c=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],h=this._connectWith();if(h&&this.ready)for(n=h.length-1;n>=0;n--){i=e(h[n]);for(r=i.length-1;r>=0;r--)s=e.data(i[r],this.widgetFullName),s&&s!==this&&!s.options.disabled&&(c.push([e.isFunction(s.options.items)?s.options.items.call(s.element[0],t,{item:this.currentItem}):e(s.options.items,s.element),s]),this.containers.push(s))}for(n=c.length-1;n>=0;n--){o=c[n][1],u=c[n][0];for(r=0,f=u.length;r<f;r++)a=e(u[r]),a.data(this.widgetName+"-item",o),l.push({item:a,instance:o,width:0,height:0,left:0,top:0})}},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var n,r,i,s;for(n=this.items.length-1;n>=0;n--){r=this.items[n];if(r.instance!==this.currentContainer&&this.currentContainer&&r.item[0]!==this.currentItem[0])continue;i=this.options.toleranceElement?e(this.options.toleranceElement,r.item):r.item,t||(r.width=i.outerWidth(),r.height=i.outerHeight()),s=i.offset(),r.left=s.left,r.top=s.top}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(n=this.containers.length-1;n>=0;n--)s=this.containers[n].element.offset(),this.containers[n].containerCache.left=s.left,this.containers[n].containerCache.top=s.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var n,r=t.options;if(!r.placeholder||r.placeholder.constructor===String)n=r.placeholder,r.placeholder={element:function(){var r=e(document.createElement(t.currentItem[0].nodeName)).addClass(n||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return n||(r.style.visibility="hidden"),r},update:function(e,i){if(n&&!r.forcePlaceholderSize)return;i.height()||i.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),i.width()||i.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10))}};t.placeholder=e(r.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),r.placeholder.update(t,t.placeholder)},_contactContainers:function(t){var n,r,i,s,o,u,a,f,l,c=null,h=null;for(n=this.containers.length-1;n>=0;n--){if(e.contains(this.currentItem[0],this.containers[n].element[0]))continue;if(this._intersectsWith(this.containers[n].containerCache)){if(c&&e.contains(this.containers[n].element[0],c.element[0]))continue;c=this.containers[n],h=n}else this.containers[n].containerCache.over&&(this.containers[n]._trigger("out",t,this._uiHash(this)),this.containers[n].containerCache.over=0)}if(!c)return;if(this.containers.length===1)this.containers[h]._trigger("over",t,this._uiHash(this)),this.containers[h].containerCache.over=1;else{i=1e4,s=null,o=this.containers[h].floating?"left":"top",u=this.containers[h].floating?"width":"height",a=this.positionAbs[o]+this.offset.click[o];for(r=this.items.length-1;r>=0;r--){if(!e.contains(this.containers[h].element[0],this.items[r].item[0]))continue;if(this.items[r].item[0]===this.currentItem[0])continue;f=this.items[r].item.offset()[o],l=!1,Math.abs(f-a)>Math.abs(f+this.items[r][u]-a)&&(l=!0,f+=this.items[r][u]),Math.abs(f-a)<i&&(i=Math.abs(f-a),s=this.items[r],this.direction=l?"up":"down")}if(!s&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[h],s?this._rearrange(t,s,null,!0):this._rearrange(t,null,this.containers[h].element,!0),this._trigger("change",t,this._uiHash()),this.containers[h]._trigger("change",t,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[h]._trigger("over",t,this._uiHash(this)),this.containers[h].containerCache.over=1}},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t,this.currentItem])):n.helper==="clone"?this.currentItem.clone():this.currentItem;return r.parents("body").length||e(n.appendTo!=="parent"?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(r[0]),r[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!r[0].style.width||n.forceHelperSize)&&r.width(this.currentItem.width()),(!r[0].style.height||n.forceHelperSize)&&r.height(this.currentItem.height()),r},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();this.cssPosition==="absolute"&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&e.ui.ie)t={top:0,left:0};return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,r,i=this.options;i.containment==="parent"&&(i.containment=this.helper[0].parentNode);if(i.containment==="document"||i.containment==="window")this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e(i.containment==="document"?document:window).width()-this.helperProportions.width-this.margins.left,(e(i.containment==="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];/^(document|window|parent)$/.test(i.containment)||(t=e(i.containment)[0],n=e(i.containment).offset(),r=e(t).css("overflow")!=="hidden",this.containment=[n.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,n.left+(r?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(r?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,n){n||(n=this.position);var r=t==="absolute"?1:-1,i=this.cssPosition!=="absolute"||this.scrollParent[0]!==document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,s=/(html|body)/i.test(i[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():s?0:i.scrollTop())*r,left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():s?0:i.scrollLeft())*r}},_generatePosition:function(t){var n,r,i=this.options,s=t.pageX,o=t.pageY,u=this.cssPosition!=="absolute"||this.scrollParent[0]!==document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(u[0].tagName);return this.cssPosition==="relative"&&(this.scrollParent[0]===document||this.scrollParent[0]===this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(s=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(s=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),i.grid&&(n=this.originalPageY+Math.round((o-this.originalPageY)/i.grid[1])*i.grid[1],o=this.containment?n-this.offset.click.top>=this.containment[1]&&n-this.offset.click.top<=this.containment[3]?n:n-this.offset.click.top>=this.containment[1]?n-i.grid[1]:n+i.grid[1]:n,r=this.originalPageX+Math.round((s-this.originalPageX)/i.grid[0])*i.grid[0],s=this.containment?r-this.offset.click.left>=this.containment[0]&&r-this.offset.click.left<=this.containment[2]?r:r-this.offset.click.left>=this.containment[0]?r-i.grid[0]:r+i.grid[0]:r)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():a?0:u.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():a?0:u.scrollLeft())}},_rearrange:function(e,t,n,r){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],this.direction==="down"?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var i=this.counter;this._delay(function(){i===this.counter&&this.refreshPositions(!r)})},_clear:function(t,n){this.reverting=!1;var r,i=[];!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null;if(this.helper[0]===this.currentItem[0]){for(r in this._storedCSS)if(this._storedCSS[r]==="auto"||this._storedCSS[r]==="static")this._storedCSS[r]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!n&&i.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!==this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!==this.currentItem.parent()[0])&&!n&&i.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(n||(i.push(function(e){this._trigger("remove",e,this._uiHash())}),i.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),i.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer))));for(r=this.containers.length-1;r>=0;r--)n||i.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[r])),this.containers[r].containerCache.over&&(i.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[r])),this.containers[r].containerCache.over=0);this._storedCursor&&e("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex",this._storedZIndex==="auto"?"":this._storedZIndex),this.dragging=!1;if(this.cancelHelperRemoval){if(!n){this._trigger("beforeStop",t,this._uiHash());for(r=0;r<i.length;r++)i[r].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!1}n||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null;if(!n){for(r=0;r<i.length;r++)i[r].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var n=t||this;return{helper:n.helper,placeholder:n.placeholder||e([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:t?t.element:null}}})})(jQuery);(function(e,t){var n=0,r={},i={};r.height=r.paddingTop=r.paddingBottom=r.borderTopWidth=r.borderBottomWidth="hide",i.height=i.paddingTop=i.paddingBottom=i.borderTopWidth=i.borderBottomWidth="show",e.widget("ui.accordion",{version:"1.10.0",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var t=this.options;this.prevShow=this.prevHide=e(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),!t.collapsible&&(t.active===!1||t.active==null)&&(t.active=0),this._processPanels(),t.active<0&&(t.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,content:this.active.length?this.active.next():e()}},_createIcons:function(){var t=this.options.icons;t&&(e("<span>").addClass("ui-accordion-header-icon ui-icon "+t.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this._destroyIcons(),e=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this.options.heightStyle!=="content"&&e.css("height","")},_setOption:function(e,t){if(e==="active"){this._activate(t);return}e==="event"&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(e,t),e==="collapsible"&&!t&&this.options.active===!1&&this._activate(0),e==="icons"&&(this._destroyIcons(),t&&this._createIcons()),e==="disabled"&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!t)},_keydown:function(t){if(t.altKey||t.ctrlKey)return;var n=e.ui.keyCode,r=this.headers.length,i=this.headers.index(t.target),s=!1;switch(t.keyCode){case n.RIGHT:case n.DOWN:s=this.headers[(i+1)%r];break;case n.LEFT:case n.UP:s=this.headers[(i-1+r)%r];break;case n.SPACE:case n.ENTER:this._eventHandler(t);break;case n.HOME:s=this.headers[0];break;case n.END:s=this.headers[r-1]}s&&(e(t.target).attr("tabIndex",-1),e(s).attr("tabIndex",0),s.focus(),t.preventDefault())},_panelKeyDown:function(t){t.keyCode===e.ui.keyCode.UP&&t.ctrlKey&&e(t.currentTarget).prev().focus()},refresh:function(){var t=this.options;this._processPanels();if(t.active===!1&&t.collapsible===!0||!this.headers.length)t.active=!1,this.active=e();t.active===!1?this._activate(0):this.active.length&&!e.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(t.active=!1,this.active=e()):this._activate(Math.max(0,t.active-1)):t.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide()},_refresh:function(){var t,r=this.options,i=r.heightStyle,s=this.element.parent(),o=this.accordionId="ui-accordion-"+(this.element.attr("id")||++n);this.active=this._findActive(r.active).addClass("ui-accordion-header-active ui-state-active").toggleClass("ui-corner-all ui-corner-top"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(t){var n=e(this),r=n.attr("id"),i=n.next(),s=i.attr("id");r||(r=o+"-header-"+t,n.attr("id",r)),s||(s=o+"-panel-"+t,i.attr("id",s)),n.attr("aria-controls",s),i.attr("aria-labelledby",r)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(r.event),i==="fill"?(t=s.height(),this.element.siblings(":visible").each(function(){var n=e(this),r=n.css("position");if(r==="absolute"||r==="fixed")return;t-=n.outerHeight(!0)}),this.headers.each(function(){t-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,t-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):i==="auto"&&(t=0,this.headers.next().each(function(){t=Math.max(t,e(this).css("height","").height())}).height(t))},_activate:function(t){var n=this._findActive(t)[0];if(n===this.active[0])return;n=n||this.active[0],this._eventHandler({target:n,currentTarget:n,preventDefault:e.noop})},_findActive:function(t){return typeof t=="number"?this.headers.eq(t):e()},_setupEvents:function(t){var n={keydown:"_keydown"};t&&e.each(t.split(" "),function(e,t){n[t]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,n),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(t){var n=this.options,r=this.active,i=e(t.currentTarget),s=i[0]===r[0],o=s&&n.collapsible,u=o?e():i.next(),a=r.next(),f={oldHeader:r,oldPanel:a,newHeader:o?e():i,newPanel:u};t.preventDefault();if(s&&!n.collapsible||this._trigger("beforeActivate",t,f)===!1)return;n.active=o?!1:this.headers.index(i),this.active=s?e():i,this._toggle(f),r.removeClass("ui-accordion-header-active ui-state-active"),n.icons&&r.children(".ui-accordion-header-icon").removeClass(n.icons.activeHeader).addClass(n.icons.header),s||(i.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),n.icons&&i.children(".ui-accordion-header-icon").removeClass(n.icons.header).addClass(n.icons.activeHeader),i.next().addClass("ui-accordion-content-active"))},_toggle:function(t){var n=t.newPanel,r=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=n,this.prevHide=r,this.options.animate?this._animate(n,r,t):(r.hide(),n.show(),this._toggleComplete(t)),r.attr({"aria-expanded":"false","aria-hidden":"true"}),r.prev().attr("aria-selected","false"),n.length&&r.length?r.prev().attr("tabIndex",-1):n.length&&this.headers.filter(function(){return e(this).attr("tabIndex")===0}).attr("tabIndex",-1),n.attr({"aria-expanded":"true","aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(e,t,n){var s,o,u,a=this,f=0,l=e.length&&(!t.length||e.index()<t.index()),c=this.options.animate||{},h=l&&c.down||c,p=function(){a._toggleComplete(n)};typeof h=="number"&&(u=h),typeof h=="string"&&(o=h),o=o||h.easing||c.easing,u=u||h.duration||c.duration;if(!t.length)return e.animate(i,u,o,p);if(!e.length)return t.animate(r,u,o,p);s=e.show().outerHeight(),t.animate(r,{duration:u,easing:o,step:function(e,t){t.now=Math.round(e)}}),e.hide().animate(i,{duration:u,easing:o,complete:p,step:function(e,n){n.now=Math.round(e),n.prop!=="height"?f+=n.now:a.options.heightStyle!=="content"&&(n.now=Math.round(s-t.outerHeight()-f),f=0)}})},_toggleComplete:function(e){var t=e.oldPanel;t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),t.length&&(t.parent()[0].className=t.parent()[0].className),this._trigger("activate",null,e)}})})(jQuery);(function(e,t){var n=0;e.widget("ui.autocomplete",{version:"1.10.0",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var t,n,r;this.isMultiLine=this._isMultiLine(),this.valueMethod=this.element[this.element.is("input,textarea")?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(i){if(this.element.prop("readOnly")){t=!0,r=!0,n=!0;return}t=!1,r=!1,n=!1;var s=e.ui.keyCode;switch(i.keyCode){case s.PAGE_UP:t=!0,this._move("previousPage",i);break;case s.PAGE_DOWN:t=!0,this._move("nextPage",i);break;case s.UP:t=!0,this._keyEvent("previous",i);break;case s.DOWN:t=!0,this._keyEvent("next",i);break;case s.ENTER:case s.NUMPAD_ENTER:this.menu.active&&(t=!0,i.preventDefault(),this.menu.select(i));break;case s.TAB:this.menu.active&&this.menu.select(i);break;case s.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(i),i.preventDefault());break;default:n=!0,this._searchTimeout(i)}},keypress:function(r){if(t){t=!1,r.preventDefault();return}if(n)return;var i=e.ui.keyCode;switch(r.keyCode){case i.PAGE_UP:this._move("previousPage",r);break;case i.PAGE_DOWN:this._move("nextPage",r);break;case i.UP:this._keyEvent("previous",r);break;case i.DOWN:this._keyEvent("next",r)}},input:function(e){if(r){r=!1,e.preventDefault();return}this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){if(this.cancelBlur){delete this.cancelBlur;return}clearTimeout(this.searching),this.close(e),this._change(e)}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete").appendTo(this._appendTo()).menu({input:e(),role:null}).zIndex(this.element.zIndex()+1).hide().data("ui-menu"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var n=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(r){r.target!==t.element[0]&&r.target!==n&&!e.contains(n,r.target)&&t.close()})})},menufocus:function(t,n){if(this.isNewMenu){this.isNewMenu=!1;if(t.originalEvent&&/^mouse/.test(t.originalEvent.type)){this.menu.blur(),this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)});return}}var r=n.item.data("ui-autocomplete-item");!1!==this._trigger("focus",t,{item:r})?t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(r.value):this.liveRegion.text(r.value)},menuselect:function(e,t){var n=t.item.data("ui-autocomplete-item"),r=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=r,this._delay(function(){this.previous=r,this.selectedItem=n})),!1!==this._trigger("select",e,{item:n})&&this._value(n.value),this.term=this._value(),this.close(e),this.selectedItem=n}}),this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertAfter(this.element),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),e==="source"&&this._initSource(),e==="appendTo"&&this.menu.element.appendTo(this._appendTo()),e==="disabled"&&t&&this.xhr&&this.xhr.abort()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_isMultiLine:function(){return this.element.is("textarea")?!0:this.element.is("input")?!1:this.element.prop("isContentEditable")},_initSource:function(){var t,n,r=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(n,r){r(e.ui.autocomplete.filter(t,n.term))}):typeof this.options.source=="string"?(n=this.options.source,this.source=function(t,i){r.xhr&&r.xhr.abort(),r.xhr=e.ajax({url:n,data:t,dataType:"json",success:function(e){i(e)},error:function(){i([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){e=e!=null?e:this._value(),this.term=this._value();if(e.length<this.options.minLength)return this.close(t);if(this._trigger("search",t)===!1)return;return this._search(e)},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var e=this,t=++n;return function(r){t===n&&e.__response(r),e.pending--,e.pending||e.element.removeClass("ui-autocomplete-loading")}},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return typeof t=="string"?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)})},_suggest:function(t){var n=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(n,t),this.menu.refresh(),n.show(),this._resizeMenu(),n.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,n){var r=this;e.each(n,function(e,n){r._renderItemData(t,n)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,n){return e("<li>").append(e("<a>").text(n.label)).appendTo(t)},_move:function(e,t){if(!this.menu.element.is(":visible")){this.search(null,t);return}if(this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)){this._value(this.term),this.menu.blur();return}this.menu[e](t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){if(!this.isMultiLine||this.menu.element.is(":visible"))this._move(e,t),t.preventDefault()}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,n){var r=new RegExp(e.ui.autocomplete.escapeRegex(n),"i");return e.grep(t,function(e){return r.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var t;this._superApply(arguments);if(this.options.disabled||this.cancelSearch)return;e&&e.length?t=this.options.messages.results(e.length):t=this.options.messages.noResults,this.liveRegion.text(t)}})})(jQuery);(function(e,t){var n,r,i,s,o="ui-button ui-widget ui-state-default ui-corner-all",u="ui-state-hover ui-state-active ",a="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",f=function(){var t=e(this).find(":ui-button");setTimeout(function(){t.button("refresh")},1)},l=function(t){var n=t.name,r=t.form,i=e([]);return n&&(n=n.replace(/'/g,"\\'"),r?i=e(r).find("[name='"+n+"']"):i=e("[name='"+n+"']",t.ownerDocument).filter(function(){return!this.form})),i};e.widget("ui.button",{version:"1.10.0",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,f),typeof this.options.disabled!="boolean"?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var t=this,u=this.options,a=this.type==="checkbox"||this.type==="radio",c=a?"":"ui-state-active",h="ui-state-focus";u.label===null&&(u.label=this.type==="input"?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(o).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){if(u.disabled)return;this===n&&e(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){if(u.disabled)return;e(this).removeClass(c)}).bind("click"+this.eventNamespace,function(e){u.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this.element.bind("focus"+this.eventNamespace,function(){t.buttonElement.addClass(h)}).bind("blur"+this.eventNamespace,function(){t.buttonElement.removeClass(h)}),a&&(this.element.bind("change"+this.eventNamespace,function(){if(s)return;t.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(e){if(u.disabled)return;s=!1,r=e.pageX,i=e.pageY}).bind("mouseup"+this.eventNamespace,function(e){if(u.disabled)return;if(r!==e.pageX||i!==e.pageY)s=!0})),this.type==="checkbox"?this.buttonElement.bind("click"+this.eventNamespace,function(){if(u.disabled||s)return!1}):this.type==="radio"?this.buttonElement.bind("click"+this.eventNamespace,function(){if(u.disabled||s)return!1;e(this).addClass("ui-state-active"),t.buttonElement.attr("aria-pressed","true");var n=t.element[0];l(n).not(n).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){if(u.disabled)return!1;e(this).addClass("ui-state-active"),n=this,t.document.one("mouseup",function(){n=null})}).bind("mouseup"+this.eventNamespace,function(){if(u.disabled)return!1;e(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(t){if(u.disabled)return!1;(t.keyCode===e.ui.keyCode.SPACE||t.keyCode===e.ui.keyCode.ENTER)&&e(this).addClass("ui-state-active")}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",u.disabled),this._resetButton()},_determineButtonType:function(){var e,t,n;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button",this.type==="checkbox"||this.type==="radio"?(e=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),n=this.element.is(":checked"),n&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",n)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(o+" "+u+" "+a).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(e,t){this._super(e,t);if(e==="disabled"){t?this.element.prop("disabled",!0):this.element.prop("disabled",!1);return}this._resetButton()},refresh:function(){var t=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t),this.type==="radio"?l(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):this.type==="checkbox"&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if(this.type==="input"){this.options.label&&this.element.val(this.options.label);return}var t=this.buttonElement.removeClass(a),n=e("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),r=this.options.icons,i=r.primary&&r.secondary,s=[];r.primary||r.secondary?(this.options.text&&s.push("ui-button-text-icon"+(i?"s":r.primary?"-primary":"-secondary")),r.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+r.primary+"'></span>"),r.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+r.secondary+"'></span>"),this.options.text||(s.push(i?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",e.trim(n)))):s.push("ui-button-text-only"),t.addClass(s.join(" "))}}),e.widget("ui.buttonset",{version:"1.10.0",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){e==="disabled"&&this.buttons.button("option",e,t),this._super(e,t)},refresh:function(){var t=this.element.css("direction")==="rtl";this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})})(jQuery);(function(e,t){function s(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},e.extend(this._defaults,this.regional[""]),this.dpDiv=o(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function o(t){var n="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.delegate(n,"mouseout",function(){e(this).removeClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!==-1&&e(this).removeClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!==-1&&e(this).removeClass("ui-datepicker-next-hover")}).delegate(n,"mouseover",function(){e.datepicker._isDisabledDatepicker(i.inline?t.parent()[0]:i.input[0])||(e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!==-1&&e(this).addClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!==-1&&e(this).addClass("ui-datepicker-next-hover"))})}function u(t,n){e.extend(t,n);for(var r in n)n[r]==null&&(t[r]=n[r]);return t}e.extend(e.ui,{datepicker:{version:"1.10.0"}});var n="datepicker",r=(new Date).getTime(),i;e.extend(s.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return u(this._defaults,e||{}),this},_attachDatepicker:function(t,n){var r,i,s;r=t.nodeName.toLowerCase(),i=r==="div"||r==="span",t.id||(this.uuid+=1,t.id="dp"+this.uuid),s=this._newInst(e(t),i),s.settings=e.extend({},n||{}),r==="input"?this._connectDatepicker(t,s):i&&this._inlineDatepicker(t,s)},_newInst:function(t,n){var r=t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:r,input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:n,dpDiv:n?o(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,r){var i=e(t);r.append=e([]),r.trigger=e([]);if(i.hasClass(this.markerClassName))return;this._attachments(i,r),i.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(r),e.data(t,n,r),r.settings.disabled&&this._disableDatepicker(t)},_attachments:function(t,n){var r,i,s,o=this._get(n,"appendText"),u=this._get(n,"isRTL");n.append&&n.append.remove(),o&&(n.append=e("<span class='"+this._appendClass+"'>"+o+"</span>"),t[u?"before":"after"](n.append)),t.unbind("focus",this._showDatepicker),n.trigger&&n.trigger.remove(),r=this._get(n,"showOn"),(r==="focus"||r==="both")&&t.focus(this._showDatepicker);if(r==="button"||r==="both")i=this._get(n,"buttonText"),s=this._get(n,"buttonImage"),n.trigger=e(this._get(n,"buttonImageOnly")?e("<img/>").addClass(this._triggerClass).attr({src:s,alt:i,title:i}):e("<button type='button'></button>").addClass(this._triggerClass).html(s?e("<img/>").attr({src:s,alt:i,title:i}):i)),t[u?"before":"after"](n.trigger),n.trigger.click(function(){return e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]?e.datepicker._hideDatepicker():e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]?(e.datepicker._hideDatepicker(),e.datepicker._showDatepicker(t[0])):e.datepicker._showDatepicker(t[0]),!1})},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,n,r,i,s=new Date(2009,11,20),o=this._get(e,"dateFormat");o.match(/[DM]/)&&(t=function(e){n=0,r=0;for(i=0;i<e.length;i++)e[i].length>n&&(n=e[i].length,r=i);return r},s.setMonth(t(this._get(e,o.match(/MM/)?"monthNames":"monthNamesShort"))),s.setDate(t(this._get(e,o.match(/DD/)?"dayNames":"dayNamesShort"))+20-s.getDay())),e.input.attr("size",this._formatDate(e,s).length)}},_inlineDatepicker:function(t,r){var i=e(t);if(i.hasClass(this.markerClassName))return;i.addClass(this.markerClassName).append(r.dpDiv),e.data(t,n,r),this._setDate(r,this._getDefaultDate(r),!0),this._updateDatepicker(r),this._updateAlternate(r),r.settings.disabled&&this._disableDatepicker(t),r.dpDiv.css("display","block")},_dialogDatepicker:function(t,r,i,s,o){var a,f,l,c,h,p=this._dialogInst;return p||(this.uuid+=1,a="dp"+this.uuid,this._dialogInput=e("<input type='text' id='"+a+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),e("body").append(this._dialogInput),p=this._dialogInst=this._newInst(this._dialogInput,!1),p.settings={},e.data(this._dialogInput[0],n,p)),u(p.settings,s||{}),r=r&&r.constructor===Date?this._formatDate(p,r):r,this._dialogInput.val(r),this._pos=o?o.length?o:[o.pageX,o.pageY]:null,this._pos||(f=document.documentElement.clientWidth,l=document.documentElement.clientHeight,c=document.documentElement.scrollLeft||document.body.scrollLeft,h=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[f/2-100+c,l/2-150+h]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),p.settings.onSelect=i,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),e.blockUI&&e.blockUI(this.dpDiv),e.data(this._dialogInput[0],n,p),this},_destroyDatepicker:function(t){var r,i=e(t),s=e.data(t,n);if(!i.hasClass(this.markerClassName))return;r=t.nodeName.toLowerCase(),e.removeData(t,n),r==="input"?(s.append.remove(),s.trigger.remove(),i.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):(r==="div"||r==="span")&&i.removeClass(this.markerClassName).empty()},_enableDatepicker:function(t){var r,i,s=e(t),o=e.data(t,n);if(!s.hasClass(this.markerClassName))return;r=t.nodeName.toLowerCase();if(r==="input")t.disabled=!1,o.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if(r==="div"||r==="span")i=s.children("."+this._inlineClass),i.children().removeClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1);this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e})},_disableDatepicker:function(t){var r,i,s=e(t),o=e.data(t,n);if(!s.hasClass(this.markerClassName))return;r=t.nodeName.toLowerCase();if(r==="input")t.disabled=!0,o.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if(r==="div"||r==="span")i=s.children("."+this._inlineClass),i.children().addClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0);this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(t){try{return e.data(t,n)}catch(r){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(n,r,i){var s,o,a,f,l=this._getInst(n);if(arguments.length===2&&typeof r=="string")return r==="defaults"?e.extend({},e.datepicker._defaults):l?r==="all"?e.extend({},l.settings):this._get(l,r):null;s=r||{},typeof r=="string"&&(s={},s[r]=i),l&&(this._curInst===l&&this._hideDatepicker(),o=this._getDateDatepicker(n,!0),a=this._getMinMaxDate(l,"min"),f=this._getMinMaxDate(l,"max"),u(l.settings,s),a!==null&&s.dateFormat!==t&&s.minDate===t&&(l.settings.minDate=this._formatDate(l,a)),f!==null&&s.dateFormat!==t&&s.maxDate===t&&(l.settings.maxDate=this._formatDate(l,f)),"disabled"in s&&(s.disabled?this._disableDatepicker(n):this._enableDatepicker(n)),this._attachments(e(n),l),this._autoSize(l),this._setDate(l,o),this._updateAlternate(l),this._updateDatepicker(l))},_changeDatepicker:function(e,t,n){this._optionDatepicker(e,t,n)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var n=this._getInst(e);n&&(this._setDate(n,t),this._updateDatepicker(n),this._updateAlternate(n))},_getDateDatepicker:function(e,t){var n=this._getInst(e);return n&&!n.inline&&this._setDateFromField(n,t),n?this._getDate(n):null},_doKeyDown:function(t){var n,r,i,s=e.datepicker._getInst(t.target),o=!0,u=s.dpDiv.is(".ui-datepicker-rtl");s._keyEvent=!0;if(e.datepicker._datepickerShowing)switch(t.keyCode){case 9:e.datepicker._hideDatepicker(),o=!1;break;case 13:return i=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",s.dpDiv),i[0]&&e.datepicker._selectDay(t.target,s.selectedMonth,s.selectedYear,i[0]),n=e.datepicker._get(s,"onSelect"),n?(r=e.datepicker._formatDate(s),n.apply(s.input?s.input[0]:null,[r,s])):e.datepicker._hideDatepicker(),!1;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(s,"stepBigMonths"):-e.datepicker._get(s,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(s,"stepBigMonths"):+e.datepicker._get(s,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&e.datepicker._clearDate(t.target),o=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&e.datepicker._gotoToday(t.target),o=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,u?1:-1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(s,"stepBigMonths"):-e.datepicker._get(s,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,-7,"D"),o=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,u?-1:1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(s,"stepBigMonths"):+e.datepicker._get(s,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,7,"D"),o=t.ctrlKey||t.metaKey;break;default:o=!1}else t.keyCode===36&&t.ctrlKey?e.datepicker._showDatepicker(this):o=!1;o&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var n,r,i=e.datepicker._getInst(t.target);if(e.datepicker._get(i,"constrainInput"))return n=e.datepicker._possibleChars(e.datepicker._get(i,"dateFormat")),r=String.fromCharCode(t.charCode==null?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||r<" "||!n||n.indexOf(r)>-1},_doKeyUp:function(t){var n,r=e.datepicker._getInst(t.target);if(r.input.val()!==r.lastVal)try{n=e.datepicker.parseDate(e.datepicker._get(r,"dateFormat"),r.input?r.input.val():null,e.datepicker._getFormatConfig(r)),n&&(e.datepicker._setDateFromField(r),e.datepicker._updateAlternate(r),e.datepicker._updateDatepicker(r))}catch(i){}return!0},_showDatepicker:function(t){t=t.target||t,t.nodeName.toLowerCase()!=="input"&&(t=e("input",t.parentNode)[0]);if(e.datepicker._isDisabledDatepicker(t)||e.datepicker._lastInput===t)return;var n,r,i,s,o,a,f;n=e.datepicker._getInst(t),e.datepicker._curInst&&e.datepicker._curInst!==n&&(e.datepicker._curInst.dpDiv.stop(!0,!0),n&&e.datepicker._datepickerShowing&&e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])),r=e.datepicker._get(n,"beforeShow"),i=r?r.apply(t,[t,n]):{};if(i===!1)return;u(n.settings,i),n.lastVal=null,e.datepicker._lastInput=t,e.datepicker._setDateFromField(n),e.datepicker._inDialog&&(t.value=""),e.datepicker._pos||(e.datepicker._pos=e.datepicker._findPos(t),e.datepicker._pos[1]+=t.offsetHeight),s=!1,e(t).parents().each(function(){return s|=e(this).css("position")==="fixed",!s}),o={left:e.datepicker._pos[0],top:e.datepicker._pos[1]},e.datepicker._pos=null,n.dpDiv.empty(),n.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),e.datepicker._updateDatepicker(n),o=e.datepicker._checkOffset(n,o,s),n.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":s?"fixed":"absolute",display:"none",left:o.left+"px",top:o.top+"px"}),n.inline||(a=e.datepicker._get(n,"showAnim"),f=e.datepicker._get(n,"duration"),n.dpDiv.zIndex(e(t).zIndex()+1),e.datepicker._datepickerShowing=!0,e.effects&&e.effects.effect[a]?n.dpDiv.show(a,e.datepicker._get(n,"showOptions"),f):n.dpDiv[a||"show"](a?f:null),n.input.is(":visible")&&!n.input.is(":disabled")&&n.input.focus(),e.datepicker._curInst=n)},_updateDatepicker:function(t){this.maxRows=4,i=t,t.dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t),t.dpDiv.find("."+this._dayOverClass+" a").mouseover();var n,r=this._getNumberOfMonths(t),s=r[1],o=17;t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),s>1&&t.dpDiv.addClass("ui-datepicker-multi-"+s).css("width",o*s+"em"),t.dpDiv[(r[0]!==1||r[1]!==1?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===e.datepicker._curInst&&e.datepicker._datepickerShowing&&t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&t.input[0]!==document.activeElement&&t.input.focus(),t.yearshtml&&(n=t.yearshtml,setTimeout(function(){n===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),n=t.yearshtml=null},0))},_getBorders:function(e){var t=function(e){return{thin:1,medium:2,thick:3}[e]||e};return[parseFloat(t(e.css("border-left-width"))),parseFloat(t(e.css("border-top-width")))]},_checkOffset:function(t,n,r){var i=t.dpDiv.outerWidth(),s=t.dpDiv.outerHeight(),o=t.input?t.input.outerWidth():0,u=t.input?t.input.outerHeight():0,a=document.documentElement.clientWidth+(r?0:e(document).scrollLeft()),f=document.documentElement.clientHeight+(r?0:e(document).scrollTop());return n.left-=this._get(t,"isRTL")?i-o:0,n.left-=r&&n.left===t.input.offset().left?e(document).scrollLeft():0,n.top-=r&&n.top===t.input.offset().top+u?e(document).scrollTop():0,n.left-=Math.min(n.left,n.left+i>a&&a>i?Math.abs(n.left+i-a):0),n.top-=Math.min(n.top,n.top+s>f&&f>s?Math.abs(s+u):0),n},_findPos:function(t){var n,r=this._getInst(t),i=this._get(r,"isRTL");while(t&&(t.type==="hidden"||t.nodeType!==1||e.expr.filters.hidden(t)))t=t[i?"previousSibling":"nextSibling"];return n=e(t).offset(),[n.left,n.top]},_hideDatepicker:function(t){var r,i,s,o,u=this._curInst;if(!u||t&&u!==e.data(t,n))return;this._datepickerShowing&&(r=this._get(u,"showAnim"),i=this._get(u,"duration"),s=function(){e.datepicker._tidyDialog(u)},e.effects&&(e.effects.effect[r]||e.effects[r])?u.dpDiv.hide(r,e.datepicker._get(u,"showOptions"),i,s):u.dpDiv[r==="slideDown"?"slideUp":r==="fadeIn"?"fadeOut":"hide"](r?i:null,s),r||s(),this._datepickerShowing=!1,o=this._get(u,"onClose"),o&&o.apply(u.input?u.input[0]:null,[u.input?u.input.val():"",u]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI&&(e.unblockUI(),e("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(!e.datepicker._curInst)return;var n=e(t.target),r=e.datepicker._getInst(n[0]);(n[0].id!==e.datepicker._mainDivId&&n.parents("#"+e.datepicker._mainDivId).length===0&&!n.hasClass(e.datepicker.markerClassName)&&!n.closest("."+e.datepicker._triggerClass).length&&e.datepicker._datepickerShowing&&(!e.datepicker._inDialog||!e.blockUI)||n.hasClass(e.datepicker.markerClassName)&&e.datepicker._curInst!==r)&&e.datepicker._hideDatepicker()},_adjustDate:function(t,n,r){var i=e(t),s=this._getInst(i[0]);if(this._isDisabledDatepicker(i[0]))return;this._adjustInstDate(s,n+(r==="M"?this._get(s,"showCurrentAtPos"):0),r),this._updateDatepicker(s)},_gotoToday:function(t){var n,r=e(t),i=this._getInst(r[0]);this._get(i,"gotoCurrent")&&i.currentDay?(i.selectedDay=i.currentDay,i.drawMonth=i.selectedMonth=i.currentMonth,i.drawYear=i.selectedYear=i.currentYear):(n=new Date,i.selectedDay=n.getDate(),i.drawMonth=i.selectedMonth=n.getMonth(),i.drawYear=i.selectedYear=n.getFullYear()),this._notifyChange(i),this._adjustDate(r)},_selectMonthYear:function(t,n,r){var i=e(t),s=this._getInst(i[0]);s["selected"+(r==="M"?"Month":"Year")]=s["draw"+(r==="M"?"Month":"Year")]=parseInt(n.options[n.selectedIndex].value,10),this._notifyChange(s),this._adjustDate(i)},_selectDay:function(t,n,r,i){var s,o=e(t);if(e(i).hasClass(this._unselectableClass)||this._isDisabledDatepicker(o[0]))return;s=this._getInst(o[0]),s.selectedDay=s.currentDay=e("a",i).html(),s.selectedMonth=s.currentMonth=n,s.selectedYear=s.currentYear=r,this._selectDate(t,this._formatDate(s,s.currentDay,s.currentMonth,s.currentYear))},_clearDate:function(t){var n=e(t);this._selectDate(n,"")},_selectDate:function(t,n){var r,i=e(t),s=this._getInst(i[0]);n=n!=null?n:this._formatDate(s),s.input&&s.input.val(n),this._updateAlternate(s),r=this._get(s,"onSelect"),r?r.apply(s.input?s.input[0]:null,[n,s]):s.input&&s.input.trigger("change"),s.inline?this._updateDatepicker(s):(this._hideDatepicker(),this._lastInput=s.input[0],typeof s.input[0]!="object"&&s.input.focus(),this._lastInput=null)},_updateAlternate:function(t){var n,r,i,s=this._get(t,"altField");s&&(n=this._get(t,"altFormat")||this._get(t,"dateFormat"),r=this._getDate(t),i=this.formatDate(n,r,this._getFormatConfig(t)),e(s).each(function(){e(this).val(i)}))},noWeekends:function(e){var t=e.getDay();return[t>0&&t<6,""]},iso8601Week:function(e){var t,n=new Date(e.getTime());return n.setDate(n.getDate()+4-(n.getDay()||7)),t=n.getTime(),n.setMonth(0),n.setDate(1),Math.floor(Math.round((t-n)/864e5)/7)+1},parseDate:function(t,n,r){if(t==null||n==null)throw"Invalid arguments";n=typeof n=="object"?n.toString():n+"";if(n==="")return null;var i,s,o,u=0,a=(r?r.shortYearCutoff:null)||this._defaults.shortYearCutoff,f=typeof a!="string"?a:(new Date).getFullYear()%100+parseInt(a,10),l=(r?r.dayNamesShort:null)||this._defaults.dayNamesShort,c=(r?r.dayNames:null)||this._defaults.dayNames,h=(r?r.monthNamesShort:null)||this._defaults.monthNamesShort,p=(r?r.monthNames:null)||this._defaults.monthNames,d=-1,v=-1,m=-1,g=-1,y=!1,b,w=function(e){var n=i+1<t.length&&t.charAt(i+1)===e;return n&&i++,n},E=function(e){var t=w(e),r=e==="@"?14:e==="!"?20:e==="y"&&t?4:e==="o"?3:2,i=new RegExp("^\\d{1,"+r+"}"),s=n.substring(u).match(i);if(!s)throw"Missing number at position "+u;return u+=s[0].length,parseInt(s[0],10)},S=function(t,r,i){var s=-1,o=e.map(w(t)?i:r,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});e.each(o,function(e,t){var r=t[1];if(n.substr(u,r.length).toLowerCase()===r.toLowerCase())return s=t[0],u+=r.length,!1});if(s!==-1)return s+1;throw"Unknown name at position "+u},x=function(){if(n.charAt(u)!==t.charAt(i))throw"Unexpected literal at position "+u;u++};for(i=0;i<t.length;i++)if(y)t.charAt(i)==="'"&&!w("'")?y=!1:x();else switch(t.charAt(i)){case"d":m=E("d");break;case"D":S("D",l,c);break;case"o":g=E("o");break;case"m":v=E("m");break;case"M":v=S("M",h,p);break;case"y":d=E("y");break;case"@":b=new Date(E("@")),d=b.getFullYear(),v=b.getMonth()+1,m=b.getDate();break;case"!":b=new Date((E("!")-this._ticksTo1970)/1e4),d=b.getFullYear(),v=b.getMonth()+1,m=b.getDate();break;case"'":w("'")?x():y=!0;break;default:x()}if(u<n.length){o=n.substr(u);if(!/^\s+/.test(o))throw"Extra/unparsed characters found in date: "+o}d===-1?d=(new Date).getFullYear():d<100&&(d+=(new Date).getFullYear()-(new Date).getFullYear()%100+(d<=f?0:-100));if(g>-1){v=1,m=g;do{s=this._getDaysInMonth(d,v-1);if(m<=s)break;v++,m-=s}while(!0)}b=this._daylightSavingAdjust(new Date(d,v-1,m));if(b.getFullYear()!==d||b.getMonth()+1!==v||b.getDate()!==m)throw"Invalid date";return b},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*24*60*60*1e7,formatDate:function(e,t,n){if(!t)return"";var r,i=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,s=(n?n.dayNames:null)||this._defaults.dayNames,o=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,u=(n?n.monthNames:null)||this._defaults.monthNames,a=function(t){var n=r+1<e.length&&e.charAt(r+1)===t;return n&&r++,n},f=function(e,t,n){var r=""+t;if(a(e))while(r.length<n)r="0"+r;return r},l=function(e,t,n,r){return a(e)?r[t]:n[t]},c="",h=!1;if(t)for(r=0;r<e.length;r++)if(h)e.charAt(r)==="'"&&!a("'")?h=!1:c+=e.charAt(r);else switch(e.charAt(r)){case"d":c+=f("d",t.getDate(),2);break;case"D":c+=l("D",t.getDay(),i,s);break;case"o":c+=f("o",Math.round(((new Date(t.getFullYear(),t.getMonth(),t.getDate())).getTime()-(new Date(t.getFullYear(),0,0)).getTime())/864e5),3);break;case"m":c+=f("m",t.getMonth()+1,2);break;case"M":c+=l("M",t.getMonth(),o,u);break;case"y":c+=a("y")?t.getFullYear():(t.getYear()%100<10?"0":"")+t.getYear()%100;break;case"@":c+=t.getTime();break;case"!":c+=t.getTime()*1e4+this._ticksTo1970;break;case"'":a("'")?c+="'":h=!0;break;default:c+=e.charAt(r)}return c},_possibleChars:function(e){var t,n="",r=!1,i=function(n){var r=t+1<e.length&&e.charAt(t+1)===n;return r&&t++,r};for(t=0;t<e.length;t++)if(r)e.charAt(t)==="'"&&!i("'")?r=!1:n+=e.charAt(t);else switch(e.charAt(t)){case"d":case"m":case"y":case"@":n+="0123456789";break;case"D":case"M":return null;case"'":i("'")?n+="'":r=!0;break;default:n+=e.charAt(t)}return n},_get:function(e,n){return e.settings[n]!==t?e.settings[n]:this._defaults[n]},_setDateFromField:function(e,t){if(e.input.val()===e.lastVal)return;var n=this._get(e,"dateFormat"),r=e.lastVal=e.input?e.input.val():null,i=this._getDefaultDate(e),s=i,o=this._getFormatConfig(e);try{s=this.parseDate(n,r,o)||i}catch(u){r=t?"":r}e.selectedDay=s.getDate(),e.drawMonth=e.selectedMonth=s.getMonth(),e.drawYear=e.selectedYear=s.getFullYear(),e.currentDay=r?s.getDate():0,e.currentMonth=r?s.getMonth():0,e.currentYear=r?s.getFullYear():0,this._adjustInstDate(e)},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,n,r){var i=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},s=function(n){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),n,e.datepicker._getFormatConfig(t))}catch(r){}var i=(n.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,s=i.getFullYear(),o=i.getMonth(),u=i.getDate(),a=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,f=a.exec(n);while(f){switch(f[2]||"d"){case"d":case"D":u+=parseInt(f[1],10);break;case"w":case"W":u+=parseInt(f[1],10)*7;break;case"m":case"M":o+=parseInt(f[1],10),u=Math.min(u,e.datepicker._getDaysInMonth(s,o));break;case"y":case"Y":s+=parseInt(f[1],10),u=Math.min(u,e.datepicker._getDaysInMonth(s,o))}f=a.exec(n)}return new Date(s,o,u)},o=n==null||n===""?r:typeof n=="string"?s(n):typeof n=="number"?isNaN(n)?r:i(n):new Date(n.getTime());return o=o&&o.toString()==="Invalid Date"?r:o,o&&(o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0)),this._daylightSavingAdjust(o)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,n){var r=!t,i=e.selectedMonth,s=e.selectedYear,o=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=o.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=o.getMonth(),e.drawYear=e.selectedYear=e.currentYear=o.getFullYear(),(i!==e.selectedMonth||s!==e.selectedYear)&&!n&&this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(r?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&e.input.val()===""?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(t){var n=this._get(t,"stepMonths"),i="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){window["DP_jQuery_"+r].datepicker._adjustDate(i,-n,"M")},next:function(){window["DP_jQuery_"+r].datepicker._adjustDate(i,+n,"M")},hide:function(){window["DP_jQuery_"+r].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+r].datepicker._gotoToday(i)},selectDay:function(){return window["DP_jQuery_"+r].datepicker._selectDay(i,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return window["DP_jQuery_"+r].datepicker._selectMonthYear(i,this,"M"),!1},selectYear:function(){return window["DP_jQuery_"+r].datepicker._selectMonthYear(i,this,"Y"),!1}};e(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q=new Date,R=this._daylightSavingAdjust(new Date(q.getFullYear(),q.getMonth(),q.getDate())),U=this._get(e,"isRTL"),z=this._get(e,"showButtonPanel"),W=this._get(e,"hideIfNoPrevNext"),X=this._get(e,"navigationAsDateFormat"),V=this._getNumberOfMonths(e),$=this._get(e,"showCurrentAtPos"),J=this._get(e,"stepMonths"),K=V[0]!==1||V[1]!==1,Q=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),G=this._getMinMaxDate(e,"min"),Y=this._getMinMaxDate(e,"max"),Z=e.drawMonth-$,et=e.drawYear;Z<0&&(Z+=12,et--);if(Y){t=this._daylightSavingAdjust(new Date(Y.getFullYear(),Y.getMonth()-V[0]*V[1]+1,Y.getDate())),t=G&&t<G?G:t;while(this._daylightSavingAdjust(new Date(et,Z,1))>t)Z--,Z<0&&(Z=11,et--)}e.drawMonth=Z,e.drawYear=et,n=this._get(e,"prevText"),n=X?this.formatDate(n,this._daylightSavingAdjust(new Date(et,Z-J,1)),this._getFormatConfig(e)):n,r=this._canAdjustMonth(e,-1,et,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"e":"w")+"'>"+n+"</span></a>":W?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"e":"w")+"'>"+n+"</span></a>",i=this._get(e,"nextText"),i=X?this.formatDate(i,this._daylightSavingAdjust(new Date(et,Z+J,1)),this._getFormatConfig(e)):i,s=this._canAdjustMonth(e,1,et,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"w":"e")+"'>"+i+"</span></a>":W?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"w":"e")+"'>"+i+"</span></a>",o=this._get(e,"currentText"),u=this._get(e,"gotoCurrent")&&e.currentDay?Q:R,o=X?this.formatDate(o,u,this._getFormatConfig(e)):o,a=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",f=z?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(U?a:"")+(this._isInRange(e,u)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+o+"</button>":"")+(U?"":a)+"</div>":"",l=parseInt(this._get(e,"firstDay"),10),l=isNaN(l)?0:l,c=this._get(e,"showWeek"),h=this._get(e,"dayNames"),p=this._get(e,"dayNamesMin"),d=this._get(e,"monthNames"),v=this._get(e,"monthNamesShort"),m=this._get(e,"beforeShowDay"),g=this._get(e,"showOtherMonths"),y=this._get(e,"selectOtherMonths"),b=this._getDefaultDate(e),w="",E;for(S=0;S<V[0];S++){x="",this.maxRows=4;for(T=0;T<V[1];T++){N=this._daylightSavingAdjust(new Date(et,Z,e.selectedDay)),C=" ui-corner-all",k="";if(K){k+="<div class='ui-datepicker-group";if(V[1]>1)switch(T){case 0:k+=" ui-datepicker-group-first",C=" ui-corner-"+(U?"right":"left");break;case V[1]-1:k+=" ui-datepicker-group-last",C=" ui-corner-"+(U?"left":"right");break;default:k+=" ui-datepicker-group-middle",C=""}k+="'>"}k+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+C+"'>"+(/all|left/.test(C)&&S===0?U?s:r:"")+(/all|right/.test(C)&&S===0?U?r:s:"")+this._generateMonthYearHeader(e,Z,et,G,Y,S>0||T>0,d,v)+"</div><table class='ui-datepicker-calendar'><thead>"+"<tr>",L=c?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"";for(E=0;E<7;E++)A=(E+l)%7,L+="<th"+((E+l+6)%7>=5?" class='ui-datepicker-week-end'":"")+">"+"<span title='"+h[A]+"'>"+p[A]+"</span></th>";k+=L+"</tr></thead><tbody>",O=this._getDaysInMonth(et,Z),et===e.selectedYear&&Z===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,O)),M=(this._getFirstDayOfMonth(et,Z)-l+7)%7,_=Math.ceil((M+O)/7),D=K?this.maxRows>_?this.maxRows:_:_,this.maxRows=D,P=this._daylightSavingAdjust(new Date(et,Z,1-M));for(H=0;H<D;H++){k+="<tr>",B=c?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(P)+"</td>":"";for(E=0;E<7;E++)j=m?m.apply(e.input?e.input[0]:null,[P]):[!0,""],F=P.getMonth()!==Z,I=F&&!y||!j[0]||G&&P<G||Y&&P>Y,B+="<td class='"+((E+l+6)%7>=5?" ui-datepicker-week-end":"")+(F?" ui-datepicker-other-month":"")+(P.getTime()===N.getTime()&&Z===e.selectedMonth&&e._keyEvent||b.getTime()===P.getTime()&&b.getTime()===N.getTime()?" "+this._dayOverClass:"")+(I?" "+this._unselectableClass+" ui-state-disabled":"")+(F&&!g?"":" "+j[1]+(P.getTime()===Q.getTime()?" "+this._currentClass:"")+(P.getTime()===R.getTime()?" ui-datepicker-today":""))+"'"+((!F||g)&&j[2]?" title='"+j[2]+"'":"")+(I?"":" data-handler='selectDay' data-event='click' data-month='"+P.getMonth()+"' data-year='"+P.getFullYear()+"'")+">"+(F&&!g?"&#xa0;":I?"<span class='ui-state-default'>"+P.getDate()+"</span>":"<a class='ui-state-default"+(P.getTime()===R.getTime()?" ui-state-highlight":"")+(P.getTime()===Q.getTime()?" ui-state-active":"")+(F?" ui-priority-secondary":"")+"' href='#'>"+P.getDate()+"</a>")+"</td>",P.setDate(P.getDate()+1),P=this._daylightSavingAdjust(P);k+=B+"</tr>"}Z++,Z>11&&(Z=0,et++),k+="</tbody></table>"+(K?"</div>"+(V[0]>0&&T===V[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),x+=k}w+=x}return w+=f,e._keyEvent=!1,w},_generateMonthYearHeader:function(e,t,n,r,i,s,o,u){var a,f,l,c,h,p,d,v,m=this._get(e,"changeMonth"),g=this._get(e,"changeYear"),y=this._get(e,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",w="";if(s||!m)w+="<span class='ui-datepicker-month'>"+o[t]+"</span>";else{a=r&&r.getFullYear()===n,f=i&&i.getFullYear()===n,w+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>";for(l=0;l<12;l++)(!a||l>=r.getMonth())&&(!f||l<=i.getMonth())&&(w+="<option value='"+l+"'"+(l===t?" selected='selected'":"")+">"+u[l]+"</option>");w+="</select>"}y||(b+=w+(s||!m||!g?"&#xa0;":""));if(!e.yearshtml){e.yearshtml="";if(s||!g)b+="<span class='ui-datepicker-year'>"+n+"</span>";else{c=this._get(e,"yearRange").split(":"),h=(new Date).getFullYear(),p=function(e){var t=e.match(/c[+\-].*/)?n+parseInt(e.substring(1),10):e.match(/[+\-].*/)?h+parseInt(e,10):parseInt(e,10);return isNaN(t)?h:t},d=p(c[0]),v=Math.max(d,p(c[1]||"")),d=r?Math.max(d,r.getFullYear()):d,v=i?Math.min(v,i.getFullYear()):v,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";for(;d<=v;d++)e.yearshtml+="<option value='"+d+"'"+(d===n?" selected='selected'":"")+">"+d+"</option>";e.yearshtml+="</select>",b+=e.yearshtml,e.yearshtml=null}}return b+=this._get(e,"yearSuffix"),y&&(b+=(s||!m||!g?"&#xa0;":"")+w),b+="</div>",b},_adjustInstDate:function(e,t,n){var r=e.drawYear+(n==="Y"?t:0),i=e.drawMonth+(n==="M"?t:0),s=Math.min(e.selectedDay,this._getDaysInMonth(r,i))+(n==="D"?t:0),o=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(r,i,s)));e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),(n==="M"||n==="Y")&&this._notifyChange(e)},_restrictMinMax:function(e,t){var n=this._getMinMaxDate(e,"min"),r=this._getMinMaxDate(e,"max"),i=n&&t<n?n:t;return r&&i>r?r:i},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return t==null?[1,1]:typeof t=="number"?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return(new Date(e,t,1)).getDay()},_canAdjustMonth:function(e,t,n,r){var i=this._getNumberOfMonths(e),s=this._daylightSavingAdjust(new Date(n,r+(t<0?t:i[0]*i[1]),1));return t<0&&s.setDate(this._getDaysInMonth(s.getFullYear(),s.getMonth())),this._isInRange(e,s)},_isInRange:function(e,t){var n,r,i=this._getMinMaxDate(e,"min"),s=this._getMinMaxDate(e,"max"),o=null,u=null,a=this._get(e,"yearRange");return a&&(n=a.split(":"),r=(new Date).getFullYear(),o=parseInt(n[0],10)+r,u=parseInt(n[1],10)+r),(!i||t.getTime()>=i.getTime())&&(!s||t.getTime()<=s.getTime())&&(!o||t.getFullYear()>=o)&&(!u||t.getFullYear()<=u)},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t=typeof t!="string"?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,n,r){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var i=t?typeof t=="object"?t:this._daylightSavingAdjust(new Date(r,n,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),i,this._getFormatConfig(e))}}),e.fn.datepicker=function(t){if(!this.length)return this;e.datepicker.initialized||(e(document).mousedown(e.datepicker._checkExternalClick),e.datepicker.initialized=!0),e("#"+e.datepicker._mainDivId).length===0&&e("body").append(e.datepicker.dpDiv);var n=Array.prototype.slice.call(arguments,1);return typeof t!="string"||t!=="isDisabled"&&t!=="getDate"&&t!=="widget"?t==="option"&&arguments.length===2&&typeof arguments[1]=="string"?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(n)):this.each(function(){typeof t=="string"?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(n)):e.datepicker._attachDatepicker(this,t)}):e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(n))},e.datepicker=new s,e.datepicker.initialized=!1,e.datepicker.uuid=(new Date).getTime(),e.datepicker.version="1.10.0",window["DP_jQuery_"+r]=e})(jQuery);(function(e,t){var n={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},r={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};e.widget("ui.dialog",{version:"1.10.0",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var n=e(this).css(t).offset().top;n<0&&e(this).css("top",t.top-n)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&e.fn.draggable&&this._makeDraggable(),this.options.resizable&&e.fn.resizable&&this._makeResizable(),this._isOpen=!1},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?e(t):this.document.find(t||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),e=t.parent.children().eq(t.index),e.length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(t){var n=this;if(!this._isOpen||this._trigger("beforeClose",t)===!1)return;this._isOpen=!1,this._destroyOverlay(),this.opener.filter(":focusable").focus().length||e(this.document[0].activeElement).blur(),this._hide(this.uiDialog,this.options.hide,function(){n._trigger("close",t)})},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(e,t){var n=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;return n&&!t&&this._trigger("focus",e),n},open:function(){if(this._isOpen){this._moveToTop()&&this._focusTabbable();return}this.opener=e(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show),this._focusTabbable(),this._isOpen=!0,this._trigger("open"),this._trigger("focus")},_focusTabbable:function(){var e=this.element.find("[autofocus]");e.length||(e=this.element.find(":tabbable")),e.length||(e=this.uiDialogButtonPane.find(":tabbable")),e.length||(e=this.uiDialogTitlebarClose.filter(":tabbable")),e.length||(e=this.uiDialog),e.eq(0).focus()},_keepFocus:function(t){function n(){var t=this.document[0].activeElement,n=this.uiDialog[0]===t||e.contains(this.uiDialog[0],t);n||this._focusTabbable()}t.preventDefault(),n.call(this),this._delay(n)},_createWrapper:function(){this.uiDialog=e("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE){t.preventDefault(),this.close(t);return}if(t.keyCode!==e.ui.keyCode.TAB)return;var n=this.uiDialog.find(":tabbable"),r=n.filter(":first"),i=n.filter(":last");t.target!==i[0]&&t.target!==this.uiDialog[0]||!!t.shiftKey?(t.target===r[0]||t.target===this.uiDialog[0])&&t.shiftKey&&(i.focus(1),t.preventDefault()):(r.focus(1),t.preventDefault())},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=e("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(t){e(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=e("<button></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),t=e("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(t),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(e){this.options.title||e.html("&#160;"),e.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=e("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var t=this,n=this.options.buttons;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty();if(e.isEmptyObject(n)){this.uiDialog.removeClass("ui-dialog-buttons");return}e.each(n,function(n,r){var i,s;r=e.isFunction(r)?{click:r,text:n}:r,r=e.extend({type:"button"},r),i=r.click,r.click=function(){i.apply(t.element[0],arguments)},s={icons:r.icons,text:r.showText},delete r.icons,delete r.showText,e("<button></button>",r).button(s).appendTo(t.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog)},_makeDraggable:function(){function r(e){return{position:e.position,offset:e.offset}}var t=this,n=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(n,i){e(this).addClass("ui-dialog-dragging"),t._trigger("dragStart",n,r(i))},drag:function(e,n){t._trigger("drag",e,r(n))},stop:function(i,s){n.position=[s.position.left-t.document.scrollLeft(),s.position.top-t.document.scrollTop()],e(this).removeClass("ui-dialog-dragging"),t._trigger("dragStop",i,r(s))}})},_makeResizable:function(){function o(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}var t=this,n=this.options,r=n.resizable,i=this.uiDialog.css("position"),s=typeof r=="string"?r:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:n.maxWidth,maxHeight:n.maxHeight,minWidth:n.minWidth,minHeight:this._minHeight(),handles:s,start:function(n,r){e(this).addClass("ui-dialog-resizing"),t._trigger("resizeStart",n,o(r))},resize:function(e,n){t._trigger("resize",e,o(n))},stop:function(r,i){n.height=e(this).height(),n.width=e(this).width(),e(this).removeClass("ui-dialog-resizing"),t._trigger("resizeStop",r,o(i))}}).css("position",i)},_minHeight:function(){var e=this.options;return e.height==="auto"?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide()},_setOptions:function(t){var i=this,s=!1,o={};e.each(t,function(e,t){i._setOption(e,t),e in n&&(s=!0),e in r&&(o[e]=t)}),s&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",o)},_setOption:function(e,t){var n,r,i=this.uiDialog;e==="dialogClass"&&i.removeClass(this.options.dialogClass).addClass(t);if(e==="disabled")return;this._super(e,t),e==="appendTo"&&this.uiDialog.appendTo(this._appendTo()),e==="buttons"&&this._createButtons(),e==="closeText"&&this.uiDialogTitlebarClose.button({label:""+t}),e==="draggable"&&(n=i.is(":data(ui-draggable)"),n&&!t&&i.draggable("destroy"),!n&&t&&this._makeDraggable()),e==="position"&&this._position(),e==="resizable"&&(r=i.is(":data(ui-resizable)"),r&&!t&&i.resizable("destroy"),r&&typeof t=="string"&&i.resizable("option","handles",t),!r&&t!==!1&&this._makeResizable()),e==="title"&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title"))},_size:function(){var e,t,n,r=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),r.minWidth>r.width&&(r.width=r.minWidth),e=this.uiDialog.css({height:"auto",width:r.width}).outerHeight(),t=Math.max(0,r.minHeight-e),n=typeof r.maxHeight=="number"?Math.max(0,r.maxHeight-e):"none",r.height==="auto"?this.element.css({minHeight:t,maxHeight:n,height:"auto"}):this.element.height(Math.max(0,r.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_createOverlay:function(){if(!this.options.modal)return;e.ui.dialog.overlayInstances||this._delay(function(){e.ui.dialog.overlayInstances&&this._on(this.document,{focusin:function(t){e(t.target).closest(".ui-dialog").length||(t.preventDefault(),e(".ui-dialog:visible:last .ui-dialog-content").data("ui-dialog")._focusTabbable())}})}),this.overlay=e("<div>").addClass("ui-widget-overlay ui-front").appendTo(this.document[0].body),this._on(this.overlay,{mousedown:"_keepFocus"}),e.ui.dialog.overlayInstances++},_destroyOverlay:function(){if(!this.options.modal)return;e.ui.dialog.overlayInstances--,e.ui.dialog.overlayInstances||this._off(this.document,"focusin"),this.overlay.remove()}}),e.ui.dialog.overlayInstances=0,e.uiBackCompat!==!1&&e.widget("ui.dialog",e.ui.dialog,{_position:function(){var t=this.options.position,n=[],r=[0,0],i;if(t){if(typeof t=="string"||typeof t=="object"&&"0"in t)n=t.split?t.split(" "):[t[0],t[1]],n.length===1&&(n[1]=n[0]),e.each(["left","top"],function(e,t){+n[e]===n[e]&&(r[e]=n[e],n[e]=t)}),t={my:n[0]+(r[0]<0?r[0]:"+"+r[0])+" "+n[1]+(r[1]<0?r[1]:"+"+r[1]),at:n.join(" ")};t=e.extend({},e.ui.dialog.prototype.options.position,t)}else t=e.ui.dialog.prototype.options.position;i=this.uiDialog.is(":visible"),i||this.uiDialog.show(),this.uiDialog.position(t),i||this.uiDialog.hide()}})})(jQuery);(function(e,t){e.widget("ui.menu",{version:"1.10.0",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,e.proxy(function(e){this.options.disabled&&e.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(e){e.preventDefault()},"click .ui-state-disabled > a":function(e){e.preventDefault()},"click .ui-menu-item:has(a)":function(t){var n=e(t.target).closest(".ui-menu-item");!this.mouseHandled&&n.not(".ui-state-disabled").length&&(this.mouseHandled=!0,this.select(t),n.has(".ui-menu").length?this.expand(t):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&this.active.parents(".ui-menu").length===1&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){var n=e(t.currentTarget);n.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(t,n)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var n=this.active||this.element.children(".ui-menu-item").eq(0);t||this.focus(e,n)},blur:function(t){this._delay(function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){e(t.target).closest(".ui-menu").length||this.collapseAll(t),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){function a(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var n,r,i,s,o,u=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:u=!1,r=this.previousFilter||"",i=String.fromCharCode(t.keyCode),s=!1,clearTimeout(this.filterTimer),i===r?s=!0:i=r+i,o=new RegExp("^"+a(i),"i"),n=this.activeMenu.children(".ui-menu-item").filter(function(){return o.test(e(this).children("a").text())}),n=s&&n.index(this.active.next())!==-1?this.active.nextAll(".ui-menu-item"):n,n.length||(i=String.fromCharCode(t.keyCode),o=new RegExp("^"+a(i),"i"),n=this.activeMenu.children(".ui-menu-item").filter(function(){return o.test(e(this).children("a").text())})),n.length?(this.focus(t,n),n.length>1?(this.previousFilter=i,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}u&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var t,n=this.options.icons.submenu,r=this.element.find(this.options.menus);r.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=e(this),r=t.prev("a"),i=e("<span>").addClass("ui-menu-icon ui-icon "+n).data("ui-menu-submenu-carat",!0);r.attr("aria-haspopup","true").prepend(i),t.attr("aria-labelledby",r.attr("id"))}),t=r.add(this.element),t.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),t.children(":not(.ui-menu-item)").each(function(){var t=e(this);/[^\-â€”â€“\s]/.test(t.text())||t.addClass("ui-widget-content ui-menu-divider")}),t.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){e==="icons"&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu),this._super(e,t)},focus:function(e,t){var n,r;this.blur(e,e&&e.type==="focus"),this._scrollIntoView(t),this.active=t.first(),r=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",r.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),e&&e.type==="keydown"?this._close():this.timer=this._delay(function(){this._close()},this.delay),n=t.children(".ui-menu"),n.length&&/^mouse/.test(e.type)&&this._startOpening(n),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var n,r,i,s,o,u;this._hasScroll()&&(n=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,r=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,i=t.offset().top-this.activeMenu.offset().top-n-r,s=this.activeMenu.scrollTop(),o=this.activeMenu.height(),u=t.height(),i<0?this.activeMenu.scrollTop(s+i):i+u>o&&this.activeMenu.scrollTop(s+i-o+u))},blur:function(e,t){t||clearTimeout(this.timer);if(!this.active)return;this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active})},_startOpening:function(e){clearTimeout(this.timer);if(e.attr("aria-hidden")!=="true")return;this.timer=this._delay(function(){this._close(),this._open(e)},this.delay)},_open:function(t){var n=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(n)},collapseAll:function(t,n){clearTimeout(this.timer),this.timer=this._delay(function(){var r=n?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));r.length||(r=this.element),this._close(r),this.blur(t),this.activeMenu=r},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,n){var r;this.active&&(e==="first"||e==="last"?r=this.active[e==="first"?"prevAll":"nextAll"](".ui-menu-item").eq(-1):r=this.active[e+"All"](".ui-menu-item").eq(0));if(!r||!r.length||!this.active)r=this.activeMenu.children(".ui-menu-item")[t]();this.focus(n,r)},nextPage:function(t){var n,r,i;if(!this.active){this.next(t);return}if(this.isLastItem())return;this._hasScroll()?(r=this.active.offset().top,i=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return n=e(this),n.offset().top-r-i<0}),this.focus(t,n)):this.focus(t,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())},previousPage:function(t){var n,r,i;if(!this.active){this.next(t);return}if(this.isFirstItem())return;this._hasScroll()?(r=this.active.offset().top,i=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return n=e(this),n.offset().top-r+i>0}),this.focus(t,n)):this.focus(t,this.activeMenu.children(".ui-menu-item").first())},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var n={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,n)}})})(jQuery);(function(e,t){e.widget("ui.progressbar",{version:"1.10.0",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(e){if(e===t)return this.options.value;this.options.value=this._constrainedValue(e),this._refreshValue()},_constrainedValue:function(e){return e===t&&(e=this.options.value),this.indeterminate=e===!1,typeof e!="number"&&(e=0),this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,e))},_setOptions:function(e){var t=e.value;delete e.value,this._super(e),this.options.value=this._constrainedValue(t),this._refreshValue()},_setOption:function(e,t){e==="max"&&(t=Math.max(this.min,t)),this._super(e,t)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var t=this.options.value,n=this._percentage();this.valueDiv.toggle(this.indeterminate||t>this.min).toggleClass("ui-corner-right",t===this.options.max).width(n.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=e("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":t}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==t&&(this.oldValue=t,this._trigger("change")),t===this.options.max&&this._trigger("complete")}})})(jQuery);(function(e,t){var n=5;e.widget("ui.slider",e.ui.mouse,{version:"1.10.0",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){var t,n,r=this.options,i=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),s="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",o=[];this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"),this.range=e([]),r.range&&(r.range===!0&&(r.values?r.values.length&&r.values.length!==2?r.values=[r.values[0],r.values[0]]:e.isArray(r.values)&&(r.values=r.values.slice(0)):r.values=[this._valueMin(),this._valueMin()]),this.range=e("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+(r.range==="min"||r.range==="max"?" ui-slider-range-"+r.range:""))),n=r.values&&r.values.length||1;for(t=i.length;t<n;t++)o.push(s);this.handles=i.add(e(o.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(e){e.preventDefault()}).mouseenter(function(){r.disabled||e(this).addClass("ui-state-hover")}).mouseleave(function(){e(this).removeClass("ui-state-hover")}).focus(function(){r.disabled?e(this).blur():(e(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),e(this).addClass("ui-state-focus"))}).blur(function(){e(this).removeClass("ui-state-focus")}),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t)}),this._setOption("disabled",r.disabled),this._on(this.handles,this._handleEvents),this._refreshValue(),this._animateOff=!1},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var n,r,i,s,o,u,a,f,l=this,c=this.options;return c.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),n={x:t.pageX,y:t.pageY},r=this._normValueFromMouse(n),i=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var n=Math.abs(r-l.values(t));if(i>n||i===n&&(t===l._lastChangedValue||l.values(t)===c.min))i=n,s=e(this),o=t}),u=this._start(t,o),u===!1?!1:(this._mouseSliding=!0,this._handleIndex=o,s.addClass("ui-state-active").focus(),a=s.offset(),f=!e(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=f?{left:0,top:0}:{left:t.pageX-a.left-s.width()/2,top:t.pageY-a.top-s.height()/2-(parseInt(s.css("borderTopWidth"),10)||0)-(parseInt(s.css("borderBottomWidth"),10)||0)+(parseInt(s.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,o,r),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,n),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,n,r,i,s;return this.orientation==="horizontal"?(t=this.elementSize.width,n=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,n=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),r=n/t,r>1&&(r=1),r<0&&(r=0),this.orientation==="vertical"&&(r=1-r),i=this._valueMax()-this._valueMin(),s=this._valueMin()+r*i,this._trimAlignValue(s)},_start:function(e,t){var n={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("start",e,n)},_slide:function(e,t,n){var r,i,s;this.options.values&&this.options.values.length?(r=this.values(t?0:1),this.options.values.length===2&&this.options.range===!0&&(t===0&&n>r||t===1&&n<r)&&(n=r),n!==this.values(t)&&(i=this.values(),i[t]=n,s=this._trigger("slide",e,{handle:this.handles[t],value:n,values:i}),r=this.values(t?0:1),s!==!1&&this.values(t,n,!0))):n!==this.value()&&(s=this._trigger("slide",e,{handle:this.handles[t],value:n}),s!==!1&&this.value(n))},_stop:function(e,t){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("stop",e,n)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._lastChangedValue=t,this._trigger("change",e,n)}},value:function(e){if(arguments.length){this.options.value=this._trimAlignValue(e),this._refreshValue(),this._change(null,0);return}return this._value()},values:function(t,n){var r,i,s;if(arguments.length>1){this.options.values[t]=this._trimAlignValue(n),this._refreshValue(),this._change(null,t);return}if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();r=this.options.values,i=arguments[0];for(s=0;s<r.length;s+=1)r[s]=this._trimAlignValue(i[s]),this._change(null,s);this._refreshValue()},_setOption:function(t,n){var r,i=0;e.isArray(this.options.values)&&(i=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments);switch(t){case"disabled":n?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.prop("disabled",!0)):this.handles.prop("disabled",!1);break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":this._animateOff=!0,this._refreshValue();for(r=0;r<i;r+=1)this._change(null,r);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e),e},_values:function(e){var t,n,r;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t),t;n=this.options.values.slice();for(r=0;r<n.length;r+=1)n[r]=this._trimAlignValue(n[r]);return n},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,n=(e-this._valueMin())%t,r=e-n;return Math.abs(n)*2>=t&&(r+=n>0?t:-t),parseFloat(r.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t,n,r,i,s,o=this.options.range,u=this.options,a=this,f=this._animateOff?!1:u.animate,l={};this.options.values&&this.options.values.length?this.handles.each(function(r){n=(a.values(r)-a._valueMin())/(a._valueMax()-a._valueMin())*100,l[a.orientation==="horizontal"?"left":"bottom"]=n+"%",e(this).stop(1,1)[f?"animate":"css"](l,u.animate),a.options.range===!0&&(a.orientation==="horizontal"?(r===0&&a.range.stop(1,1)[f?"animate":"css"]({left:n+"%"},u.animate),r===1&&a.range[f?"animate":"css"]({width:n-t+"%"},{queue:!1,duration:u.animate})):(r===0&&a.range.stop(1,1)[f?"animate":"css"]({bottom:n+"%"},u.animate),r===1&&a.range[f?"animate":"css"]({height:n-t+"%"},{queue:!1,duration:u.animate}))),t=n}):(r=this.value(),i=this._valueMin(),s=this._valueMax(),n=s!==i?(r-i)/(s-i)*100:0,l[this.orientation==="horizontal"?"left":"bottom"]=n+"%",this.handle.stop(1,1)[f?"animate":"css"](l,u.animate),o==="min"&&this.orientation==="horizontal"&&this.range.stop(1,1)[f?"animate":"css"]({width:n+"%"},u.animate),o==="max"&&this.orientation==="horizontal"&&this.range[f?"animate":"css"]({width:100-n+"%"},{queue:!1,duration:u.animate}),o==="min"&&this.orientation==="vertical"&&this.range.stop(1,1)[f?"animate":"css"]({height:n+"%"},u.animate),o==="max"&&this.orientation==="vertical"&&this.range[f?"animate":"css"]({height:100-n+"%"},{queue:!1,duration:u.animate}))},_handleEvents:{keydown:function(t){var r,i,s,o,u=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:t.preventDefault();if(!this._keySliding){this._keySliding=!0,e(t.target).addClass("ui-state-active"),r=this._start(t,u);if(r===!1)return}}o=this.options.step,this.options.values&&this.options.values.length?i=s=this.values(u):i=s=this.value();switch(t.keyCode){case e.ui.keyCode.HOME:s=this._valueMin();break;case e.ui.keyCode.END:s=this._valueMax();break;case e.ui.keyCode.PAGE_UP:s=this._trimAlignValue(i+(this._valueMax()-this._valueMin())/n);break;case e.ui.keyCode.PAGE_DOWN:s=this._trimAlignValue(i-(this._valueMax()-this._valueMin())/n);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(i===this._valueMax())return;s=this._trimAlignValue(i+o);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(i===this._valueMin())return;s=this._trimAlignValue(i-o)}this._slide(t,u,s)},keyup:function(t){var n=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,n),this._change(t,n),e(t.target).removeClass("ui-state-active"))}}})})(jQuery);(function(e){function t(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}e.widget("ui.spinner",{version:"1.10.0",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var t={},n=this.element;return e.each(["min","max","step"],function(e,r){var i=n.attr(r);i!==undefined&&i.length&&(t[r]=i)}),t},_events:{keydown:function(e){this._start(e)&&this._keydown(e)&&e.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(e){if(this.cancelBlur){delete this.cancelBlur;return}this._refresh(),this.previous!==this.element.val()&&this._trigger("change",e)},mousewheel:function(e,t){if(!t)return;if(!this.spinning&&!this._start(e))return!1;this._spin((t>0?1:-1)*this.options.step,e),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(e)},100),e.preventDefault()},"mousedown .ui-spinner-button":function(t){function r(){var e=this.element[0]===this.document[0].activeElement;e||(this.element.focus(),this.previous=n,this._delay(function(){this.previous=n}))}var n;n=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),t.preventDefault(),r.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,r.call(this)});if(this._start(t)===!1)return;this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){if(!e(t.currentTarget).hasClass("ui-state-active"))return;if(this._start(t)===!1)return!1;this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var e=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=e.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(e.height()*.5)&&e.height()>0&&e.height(e.height()),this.options.disabled&&this.disable()},_keydown:function(t){var n=this.options,r=e.ui.keyCode;switch(t.keyCode){case r.UP:return this._repeat(null,1,t),!0;case r.DOWN:return this._repeat(null,-1,t),!0;case r.PAGE_UP:return this._repeat(null,n.page,t),!0;case r.PAGE_DOWN:return this._repeat(null,-n.page,t),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span>"+"</a>"+"<a class='ui-spinner-button ui-spinner-down ui-corner-br'>"+"<span class='ui-icon "+this.options.icons.down+"'>&#9660;</span>"+"</a>"},_start:function(e){return!this.spinning&&this._trigger("start",e)===!1?!1:(this.counter||(this.counter=1),this.spinning=!0,!0)},_repeat:function(e,t,n){e=e||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,t,n)},e),this._spin(t*this.options.step,n)},_spin:function(e,t){var n=this.value()||0;this.counter||(this.counter=1),n=this._adjustValue(n+e*this._increment(this.counter));if(!this.spinning||this._trigger("spin",t,{value:n})!==!1)this._value(n),this.counter++},_increment:function(t){var n=this.options.incremental;return n?e.isFunction(n)?n(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var e=this._precisionOf(this.options.step);return this.options.min!==null&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=e.toString(),n=t.indexOf(".");return n===-1?0:t.length-n-1},_adjustValue:function(e){var t,n,r=this.options;return t=r.min!==null?r.min:0,n=e-t,n=Math.round(n/r.step)*r.step,e=t+n,e=parseFloat(e.toFixed(this._precision())),r.max!==null&&e>r.max?r.max:r.min!==null&&e<r.min?r.min:e},_stop:function(e){if(!this.spinning)return;clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",e)},_setOption:function(e,t){if(e==="culture"||e==="numberFormat"){var n=this._parse(this.element.val());this.options[e]=t,this.element.val(this._format(n));return}(e==="max"||e==="min"||e==="step")&&typeof t=="string"&&(t=this._parse(t)),e==="icons"&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(t.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(t.down)),this._super(e,t),e==="disabled"&&(t?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:t(function(e){this._super(e),this._value(this.element.val())}),_parse:function(e){return typeof e=="string"&&e!==""&&(e=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e),e===""||isNaN(e)?null:e},_format:function(e){return e===""?"":window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(e,t){var n;e!==""&&(n=this._parse(e),n!==null&&(t||(n=this._adjustValue(n)),e=this._format(n))),this.element.val(e),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:t(function(e){this._stepUp(e)}),_stepUp:function(e){this._start()&&(this._spin((e||1)*this.options.step),this._stop())},stepDown:t(function(e){this._stepDown(e)}),_stepDown:function(e){this._start()&&(this._spin((e||1)*-this.options.step),this._stop())},pageUp:t(function(e){this._stepUp((e||1)*this.options.page)}),pageDown:t(function(e){this._stepDown((e||1)*this.options.page)}),value:function(e){if(!arguments.length)return this._parse(this.element.val());t(this._value).call(this,e)},widget:function(){return this.uiSpinner}})})(jQuery);(function(e,t){function i(){return++n}function s(e){return e.hash.length>1&&decodeURIComponent(e.href.replace(r,""))===decodeURIComponent(location.href.replace(r,""))}var n=0,r=/#.*$/;e.widget("ui.tabs",{version:"1.10.0",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var t=this,n=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",n.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(t){e(this).is(".ui-state-disabled")&&t.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){e(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this._processTabs(),n.active=this._initialActive(),e.isArray(n.disabled)&&(n.disabled=e.unique(n.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),function(e){return t.tabs.index(e)}))).sort()),this.options.active!==!1&&this.anchors.length?this.active=this._findActive(n.active):this.active=e(),this._refresh(),this.active.length&&this.load(n.active)},_initialActive:function(){var t=this.options.active,n=this.options.collapsible,r=location.hash.substring(1);if(t===null){r&&this.tabs.each(function(n,i){if(e(i).attr("aria-controls")===r)return t=n,!1}),t===null&&(t=this.tabs.index(this.tabs.filter(".ui-tabs-active")));if(t===null||t===-1)t=this.tabs.length?0:!1}return t!==!1&&(t=this.tabs.index(this.tabs.eq(t)),t===-1&&(t=n?!1:0)),!n&&t===!1&&this.anchors.length&&(t=0),t},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()}},_tabKeydown:function(t){var n=e(this.document[0].activeElement).closest("li"),r=this.tabs.index(n),i=!0;if(this._handlePageNav(t))return;switch(t.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:r++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:i=!1,r--;break;case e.ui.keyCode.END:r=this.anchors.length-1;break;case e.ui.keyCode.HOME:r=0;break;case e.ui.keyCode.SPACE:t.preventDefault(),clearTimeout(this.activating),this._activate(r);return;case e.ui.keyCode.ENTER:t.preventDefault(),clearTimeout(this.activating),this._activate(r===this.options.active?!1:r);return;default:return}t.preventDefault(),clearTimeout(this.activating),r=this._focusNextTab(r,i),t.ctrlKey||(n.attr("aria-selected","false"),this.tabs.eq(r).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",r)},this.delay))},_panelKeydown:function(t){if(this._handlePageNav(t))return;t.ctrlKey&&t.keyCode===e.ui.keyCode.UP&&(t.preventDefault(),this.active.focus())},_handlePageNav:function(t){if(t.altKey&&t.keyCode===e.ui.keyCode.PAGE_UP)return this._activate(this._focusNextTab(this.options.active-1,!1)),!0;if(t.altKey&&t.keyCode===e.ui.keyCode.PAGE_DOWN)return this._activate(this._focusNextTab(this.options.active+1,!0)),!0},_findNextTab:function(t,n){function i(){return t>r&&(t=0),t<0&&(t=r),t}var r=this.tabs.length-1;while(e.inArray(i(),this.options.disabled)!==-1)t=n?t+1:t-1;return t},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).focus(),e},_setOption:function(e,t){if(e==="active"){this._activate(t);return}if(e==="disabled"){this._setupDisabled(t);return}this._super(e,t),e==="collapsible"&&(this.element.toggleClass("ui-tabs-collapsible",t),!t&&this.options.active===!1&&this._activate(0)),e==="event"&&this._setupEvents(t),e==="heightStyle"&&this._setupHeightStyle(t)},_tabId:function(e){return e.attr("aria-controls")||"ui-tabs-"+i()},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,n=this.tablist.children(":has(a[href])");t.disabled=e.map(n.filter(".ui-state-disabled"),function(e){return n.index(e)}),this._processTabs(),t.active===!1||!this.anchors.length?(t.active=!1,this.active=e()):this.active.length&&!e.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=e()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return e("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=e(),this.anchors.each(function(n,r){var i,o,u,a=e(r).uniqueId().attr("id"),f=e(r).closest("li"),l=f.attr("aria-controls");s(r)?(i=r.hash,o=t.element.find(t._sanitizeSelector(i))):(u=t._tabId(f),i="#"+u,o=t.element.find(i),o.length||(o=t._createPanel(u),o.insertAfter(t.panels[n-1]||t.tablist)),o.attr("aria-live","polite")),o.length&&(t.panels=t.panels.add(o)),l&&f.data("ui-tabs-aria-controls",l),f.attr({"aria-controls":i.substring(1),"aria-labelledby":a}),o.attr("aria-labelledby",a)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(t){e.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1);for(var n=0,r;r=this.tabs[n];n++)t===!0||e.inArray(n,t)!==-1?e(r).addClass("ui-state-disabled").attr("aria-disabled","true"):e(r).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=t},_setupEvents:function(t){var n={click:function(e){e.preventDefault()}};t&&e.each(t.split(" "),function(e,t){n[t]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,n),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var n,r=this.element.parent();t==="fill"?(n=r.height(),n-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var t=e(this),r=t.css("position");if(r==="absolute"||r==="fixed")return;n-=t.outerHeight(!0)}),this.element.children().not(this.panels).each(function(){n-=e(this).outerHeight(!0)}),this.panels.each(function(){e(this).height(Math.max(0,n-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):t==="auto"&&(n=0,this.panels.each(function(){n=Math.max(n,e(this).height("").height())}).height(n))},_eventHandler:function(t){var n=this.options,r=this.active,i=e(t.currentTarget),s=i.closest("li"),o=s[0]===r[0],u=o&&n.collapsible,a=u?e():this._getPanelForTab(s),f=r.length?this._getPanelForTab(r):e(),l={oldTab:r,oldPanel:f,newTab:u?e():s,newPanel:a};t.preventDefault();if(s.hasClass("ui-state-disabled")||s.hasClass("ui-tabs-loading")||this.running||o&&!n.collapsible||this._trigger("beforeActivate",t,l)===!1)return;n.active=u?!1:this.tabs.index(s),this.active=o?e():s,this.xhr&&this.xhr.abort(),!f.length&&!a.length&&e.error("jQuery UI Tabs: Mismatching fragment identifier."),a.length&&this.load(this.tabs.index(s),t),this._toggle(t,l)},_toggle:function(t,n){function o(){r.running=!1,r._trigger("activate",t,n)}function u(){n.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),i.length&&r.options.show?r._show(i,r.options.show,o):(i.show(),o())}var r=this,i=n.newPanel,s=n.oldPanel;this.running=!0,s.length&&this.options.hide?this._hide(s,this.options.hide,function(){n.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),u()}):(n.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),s.hide(),u()),s.attr({"aria-expanded":"false","aria-hidden":"true"}),n.oldTab.attr("aria-selected","false"),i.length&&s.length?n.oldTab.attr("tabIndex",-1):i.length&&this.tabs.filter(function(){return e(this).attr("tabIndex")===0}).attr("tabIndex",-1),i.attr({"aria-expanded":"true","aria-hidden":"false"}),n.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(t){var n,r=this._findActive(t);if(r[0]===this.active[0])return;r.length||(r=this.active),n=r.find(".ui-tabs-anchor")[0],this._eventHandler({target:n,currentTarget:n,preventDefault:e.noop})},_findActive:function(t){return t===!1?e():this.tabs.eq(t)},_getIndex:function(e){return typeof e=="string"&&(e=this.anchors.index(this.anchors.filter("[href$='"+e+"']"))),e},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var t=e(this),n=t.data("ui-tabs-aria-controls");n?t.attr("aria-controls",n).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls")}),this.panels.show(),this.options.heightStyle!=="content"&&this.panels.css("height","")},enable:function(n){var r=this.options.disabled;if(r===!1)return;n===t?r=!1:(n=this._getIndex(n),e.isArray(r)?r=e.map(r,function(e){return e!==n?e:null}):r=e.map(this.tabs,function(e,t){return t!==n?t:null})),this._setupDisabled(r)},disable:function(n){var r=this.options.disabled;if(r===!0)return;if(n===t)r=!0;else{n=this._getIndex(n);if(e.inArray(n,r)!==-1)return;e.isArray(r)?r=e.merge([n],r).sort():r=[n]}this._setupDisabled(r)},load:function(t,n){t=this._getIndex(t);var r=this,i=this.tabs.eq(t),o=i.find(".ui-tabs-anchor"),u=this._getPanelForTab(i),a={tab:i,panel:u};if(s(o[0]))return;this.xhr=e.ajax(this._ajaxSettings(o,n,a)),this.xhr&&this.xhr.statusText!=="canceled"&&(i.addClass("ui-tabs-loading"),u.attr("aria-busy","true"),this.xhr.success(function(e){setTimeout(function(){u.html(e),r._trigger("load",n,a)},1)}).complete(function(e,t){setTimeout(function(){t==="abort"&&r.panels.stop(!1,!0),i.removeClass("ui-tabs-loading"),u.removeAttr("aria-busy"),e===r.xhr&&delete r.xhr},1)}))},_ajaxSettings:function(t,n,r){var i=this;return{url:t.attr("href"),beforeSend:function(t,s){return i._trigger("beforeLoad",n,e.extend({jqXHR:t,ajaxSettings:s},r))}}},_getPanelForTab:function(t){var n=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+n))}})})(jQuery);(function(e){function n(t,n){var r=(t.attr("aria-describedby")||"").split(/\s+/);r.push(n),t.data("ui-tooltip-id",n).attr("aria-describedby",e.trim(r.join(" ")))}function r(t){var n=t.data("ui-tooltip-id"),r=(t.attr("aria-describedby")||"").split(/\s+/),i=e.inArray(n,r);i!==-1&&r.splice(i,1),t.removeData("ui-tooltip-id"),r=e.trim(r.join(" ")),r?t.attr("aria-describedby",r):t.removeAttr("aria-describedby")}var t=0;e.widget("ui.tooltip",{version:"1.10.0",options:{content:function(){var t=e(this).attr("title")||"";return e("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable()},_setOption:function(t,n){var r=this;if(t==="disabled"){this[n?"_disable":"_enable"](),this.options[t]=n;return}this._super(t,n),t==="content"&&e.each(this.tooltips,function(e,t){r._updateContent(t)})},_disable:function(){var t=this;e.each(this.tooltips,function(n,r){var i=e.Event("blur");i.target=i.currentTarget=r[0],t.close(i,!0)}),this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.is("[title]")&&t.data("ui-tooltip-title",t.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))})},open:function(t){var n=this,r=e(t?t.target:this.element).closest(this.options.items);if(!r.length||r.data("ui-tooltip-id"))return;r.attr("title")&&r.data("ui-tooltip-title",r.attr("title")),r.data("ui-tooltip-open",!0),t&&t.type==="mouseover"&&r.parents().each(function(){var t=e(this),r;t.data("ui-tooltip-open")&&(r=e.Event("blur"),r.target=r.currentTarget=this,n.close(r,!0)),t.attr("title")&&(t.uniqueId(),n.parents[this.id]={element:this,title:t.attr("title")},t.attr("title",""))}),this._updateContent(r,t)},_updateContent:function(e,t){var n,r=this.options.content,i=this,s=t?t.type:null;if(typeof r=="string")return this._open(t,e,r);n=r.call(e[0],function(n){if(!e.data("ui-tooltip-open"))return;i._delay(function(){t&&(t.type=s),this._open(t,e,n)})}),n&&this._open(t,e,n)},_open:function(t,r,i){function f(e){a.of=e;if(s.is(":hidden"))return;s.position(a)}var s,o,u,a=e.extend({},this.options.position);if(!i)return;s=this._find(r);if(s.length){s.find(".ui-tooltip-content").html(i);return}r.is("[title]")&&(t&&t.type==="mouseover"?r.attr("title",""):r.removeAttr("title")),s=this._tooltip(r),n(r,s.attr("id")),s.find(".ui-tooltip-content").html(i),this.options.track&&t&&/^mouse/.test(t.type)?(this._on(this.document,{mousemove:f}),f(t)):s.position(e.extend({of:r},this.options.position)),s.hide(),this._show(s,this.options.show),this.options.show&&this.options.show.delay&&(u=this.delayedShow=setInterval(function(){s.is(":visible")&&(f(a.of),clearInterval(u))},e.fx.interval)),this._trigger("open",t,{tooltip:s}),o={keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var n=e.Event(t);n.currentTarget=r[0],this.close(n,!0)}},remove:function(){this._removeTooltip(s)}};if(!t||t.type==="mouseover")o.mouseleave="close";if(!t||t.type==="focusin")o.focusout="close";this._on(!0,r,o)},close:function(t){var n=this,i=e(t?t.currentTarget:this.element),s=this._find(i);if(this.closing)return;clearInterval(this.delayedShow),i.data("ui-tooltip-title")&&i.attr("title",i.data("ui-tooltip-title")),r(i),s.stop(!0),this._hide(s,this.options.hide,function(){n._removeTooltip(e(this))}),i.removeData("ui-tooltip-open"),this._off(i,"mouseleave focusout keyup"),i[0]!==this.element[0]&&this._off(i,"remove"),this._off(this.document,"mousemove"),t&&t.type==="mouseleave"&&e.each(this.parents,function(t,r){e(r.element).attr("title",r.title),delete n.parents[t]}),this.closing=!0,this._trigger("close",t,{tooltip:s}),this.closing=!1},_tooltip:function(n){var r="ui-tooltip-"+t++,i=e("<div>").attr({id:r,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));return e("<div>").addClass("ui-tooltip-content").appendTo(i),i.appendTo(this.document[0].body),this.tooltips[r]=n,i},_find:function(t){var n=t.data("ui-tooltip-id");return n?e("#"+n):e()},_removeTooltip:function(e){e.remove(),delete this.tooltips[e.attr("id")]},_destroy:function(){var t=this;e.each(this.tooltips,function(n,r){var i=e.Event("blur");i.target=i.currentTarget=r[0],t.close(i,!0),e("#"+n).remove(),r.data("ui-tooltip-title")&&(r.attr("title",r.data("ui-tooltip-title")),r.removeData("ui-tooltip-title"))})}})})(jQuery);jQuery.effects||function(e,t){var n="ui-effects-";e.effects={effect:{}},function(e,t){function h(e,t,n){var r=u[t.type]||{};return e==null?n||!t.def?null:t.def:(e=r.floor?~~e:parseFloat(e),isNaN(e)?t.def:r.mod?(e+r.mod)%r.mod:0>e?0:r.max<e?r.max:e)}function p(t){var n=s(),r=n._rgba=[];return t=t.toLowerCase(),c(i,function(e,i){var s,u=i.re.exec(t),a=u&&i.parse(u),f=i.space||"rgba";if(a)return s=n[f](a),n[o[f].cache]=s[o[f].cache],r=n._rgba=s._rgba,!1}),r.length?(r.join()==="0,0,0,0"&&e.extend(r,l.transparent),n):l[t]}function d(e,t,n){return n=(n+1)%1,n*6<1?e+(t-e)*n*6:n*2<1?t:n*3<2?e+(t-e)*(2/3-n)*6:e}var n="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",r=/^([\-+])=\s*(\d+\.?\d*)/,i=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1]*2.55,e[2]*2.55,e[3]*2.55,e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],s=e.Color=function(t,n,r,i){return new e.Color.fn.parse(t,n,r,i)},o={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},u={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},a=s.support={},f=e("<p>")[0],l,c=e.each;f.style.cssText="background-color:rgba(1,1,1,.5)",a.rgba=f.style.backgroundColor.indexOf("rgba")>-1,c(o,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),s.fn=e.extend(s.prototype,{parse:function(n,r,i,u){if(n===t)return this._rgba=[null,null,null,null],this;if(n.jquery||n.nodeType)n=e(n).css(r),r=t;var a=this,f=e.type(n),d=this._rgba=[];r!==t&&(n=[n,r,i,u],f="array");if(f==="string")return this.parse(p(n)||l._default);if(f==="array")return c(o.rgba.props,function(e,t){d[t.idx]=h(n[t.idx],t)}),this;if(f==="object")return n instanceof s?c(o,function(e,t){n[t.cache]&&(a[t.cache]=n[t.cache].slice())}):c(o,function(t,r){var i=r.cache;c(r.props,function(e,t){if(!a[i]&&r.to){if(e==="alpha"||n[e]==null)return;a[i]=r.to(a._rgba)}a[i][t.idx]=h(n[e],t,!0)}),a[i]&&e.inArray(null,a[i].slice(0,3))<0&&(a[i][3]=1,r.from&&(a._rgba=r.from(a[i])))}),this},is:function(e){var t=s(e),n=!0,r=this;return c(o,function(e,i){var s,o=t[i.cache];return o&&(s=r[i.cache]||i.to&&i.to(r._rgba)||[],c(i.props,function(e,t){if(o[t.idx]!=null)return n=o[t.idx]===s[t.idx],n})),n}),n},_space:function(){var e=[],t=this;return c(o,function(n,r){t[r.cache]&&e.push(n)}),e.pop()},transition:function(e,t){var n=s(e),r=n._space(),i=o[r],a=this.alpha()===0?s("transparent"):this,f=a[i.cache]||i.to(a._rgba),l=f.slice();return n=n[i.cache],c(i.props,function(e,r){var i=r.idx,s=f[i],o=n[i],a=u[r.type]||{};if(o===null)return;s===null?l[i]=o:(a.mod&&(o-s>a.mod/2?s+=a.mod:s-o>a.mod/2&&(s-=a.mod)),l[i]=h((o-s)*t+s,r))}),this[r](l)},blend:function(t){if(this._rgba[3]===1)return this;var n=this._rgba.slice(),r=n.pop(),i=s(t)._rgba;return s(e.map(n,function(e,t){return(1-r)*i[t]+r*e}))},toRgbaString:function(){var t="rgba(",n=e.map(this._rgba,function(e,t){return e==null?t>2?1:0:e});return n[3]===1&&(n.pop(),t="rgb("),t+n.join()+")"},toHslaString:function(){var t="hsla(",n=e.map(this.hsla(),function(e,t){return e==null&&(e=t>2?1:0),t&&t<3&&(e=Math.round(e*100)+"%"),e});return n[3]===1&&(n.pop(),t="hsl("),t+n.join()+")"},toHexString:function(t){var n=this._rgba.slice(),r=n.pop();return t&&n.push(~~(r*255)),"#"+e.map(n,function(e){return e=(e||0).toString(16),e.length===1?"0"+e:e}).join("")},toString:function(){return this._rgba[3]===0?"transparent":this.toRgbaString()}}),s.fn.parse.prototype=s.fn,o.hsla.to=function(e){if(e[0]==null||e[1]==null||e[2]==null)return[null,null,null,e[3]];var t=e[0]/255,n=e[1]/255,r=e[2]/255,i=e[3],s=Math.max(t,n,r),o=Math.min(t,n,r),u=s-o,a=s+o,f=a*.5,l,c;return o===s?l=0:t===s?l=60*(n-r)/u+360:n===s?l=60*(r-t)/u+120:l=60*(t-n)/u+240,u===0?c=0:f<=.5?c=u/a:c=u/(2-a),[Math.round(l)%360,c,f,i==null?1:i]},o.hsla.from=function(e){if(e[0]==null||e[1]==null||e[2]==null)return[null,null,null,e[3]];var t=e[0]/360,n=e[1],r=e[2],i=e[3],s=r<=.5?r*(1+n):r+n-r*n,o=2*r-s;return[Math.round(d(o,s,t+1/3)*255),Math.round(d(o,s,t)*255),Math.round(d(o,s,t-1/3)*255),i]},c(o,function(n,i){var o=i.props,u=i.cache,a=i.to,f=i.from;s.fn[n]=function(n){a&&!this[u]&&(this[u]=a(this._rgba));if(n===t)return this[u].slice();var r,i=e.type(n),l=i==="array"||i==="object"?n:arguments,p=this[u].slice();return c(o,function(e,t){var n=l[i==="object"?e:t.idx];n==null&&(n=p[t.idx]),p[t.idx]=h(n,t)}),f?(r=s(f(p)),r[u]=p,r):s(p)},c(o,function(t,i){if(s.fn[t])return;s.fn[t]=function(s){var o=e.type(s),u=t==="alpha"?this._hsla?"hsla":"rgba":n,a=this[u](),f=a[i.idx],l;return o==="undefined"?f:(o==="function"&&(s=s.call(this,f),o=e.type(s)),s==null&&i.empty?this:(o==="string"&&(l=r.exec(s),l&&(s=f+parseFloat(l[2])*(l[1]==="+"?1:-1))),a[i.idx]=s,this[u](a)))}})}),s.hook=function(t){var n=t.split(" ");c(n,function(t,n){e.cssHooks[n]={set:function(t,r){var i,o,u="";if(r!=="transparent"&&(e.type(r)!=="string"||(i=p(r)))){r=s(i||r);if(!a.rgba&&r._rgba[3]!==1){o=n==="backgroundColor"?t.parentNode:t;while((u===""||u==="transparent")&&o&&o.style)try{u=e.css(o,"backgroundColor"),o=o.parentNode}catch(f){}r=r.blend(u&&u!=="transparent"?u:"_default")}r=r.toRgbaString()}try{t.style[n]=r}catch(f){}}},e.fx.step[n]=function(t){t.colorInit||(t.start=s(t.elem,n),t.end=s(t.end),t.colorInit=!0),e.cssHooks[n].set(t.elem,t.start.transition(t.end,t.pos))}})},s.hook(n),e.cssHooks.borderColor={expand:function(e){var t={};return c(["Top","Right","Bottom","Left"],function(n,r){t["border"+r+"Color"]=e}),t}},l=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function i(t){var n,r,i=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,s={};if(i&&i.length&&i[0]&&i[i[0]]){r=i.length;while(r--)n=i[r],typeof i[n]=="string"&&(s[e.camelCase(n)]=i[n])}else for(n in i)typeof i[n]=="string"&&(s[n]=i[n]);return s}function s(t,n){var i={},s,o;for(s in n)o=n[s],t[s]!==o&&!r[s]&&(e.fx.step[s]||!isNaN(parseFloat(o)))&&(i[s]=o);return i}var n=["add","remove","toggle"],r={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,n){e.fx.step[n]=function(e){if(e.end!=="none"&&!e.setAttr||e.pos===1&&!e.setAttr)jQuery.style(e.elem,n,e.end),e.setAttr=!0}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}),e.effects.animateClass=function(t,r,o,u){var a=e.speed(r,o,u);return this.queue(function(){var r=e(this),o=r.attr("class")||"",u,f=a.children?r.find("*").addBack():r;f=f.map(function(){var t=e(this);return{el:t,start:i(this)}}),u=function(){e.each(n,function(e,n){t[n]&&r[n+"Class"](t[n])})},u(),f=f.map(function(){return this.end=i(this.el[0]),this.diff=s(this.start,this.end),this}),r.attr("class",o),f=f.map(function(){var t=this,n=e.Deferred(),r=e.extend({},a,{queue:!1,complete:function(){n.resolve(t)}});return this.el.animate(this.diff,r),n.promise()}),e.when.apply(e,f.get()).done(function(){u(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),a.complete.call(r[0])})})},e.fn.extend({_addClass:e.fn.addClass,addClass:function(t,n,r,i){return n?e.effects.animateClass.call(this,{add:t},n,r,i):this._addClass(t)},_removeClass:e.fn.removeClass,removeClass:function(t,n,r,i){return n?e.effects.animateClass.call(this,{remove:t},n,r,i):this._removeClass(t)},_toggleClass:e.fn.toggleClass,toggleClass:function(n,r,i,s,o){return typeof r=="boolean"||r===t?i?e.effects.animateClass.call(this,r?{add:n}:{remove:n},i,s,o):this._toggleClass(n,r):e.effects.animateClass.call(this,{toggle:n},r,i,s)},switchClass:function(t,n,r,i,s){return e.effects.animateClass.call(this,{add:n,remove:t},r,i,s)}})}(),function(){function r(t,n,r,i){e.isPlainObject(t)&&(n=t,t=t.effect),t={effect:t},n==null&&(n={}),e.isFunction(n)&&(i=n,r=null,n={});if(typeof n=="number"||e.fx.speeds[n])i=r,r=n,n={};return e.isFunction(r)&&(i=r,r=null),n&&e.extend(t,n),r=r||n.duration,t.duration=e.fx.off?0:typeof r=="number"?r:r in e.fx.speeds?e.fx.speeds[r]:e.fx.speeds._default,t.complete=i||n.complete,t}function i(t){return!t||typeof t=="number"||e.fx.speeds[t]?!0:typeof t=="string"&&!e.effects.effect[t]}e.extend(e.effects,{version:"1.10.0",save:function(e,t){for(var r=0;r<t.length;r++)t[r]!==null&&e.data(n+t[r],e[0].style[t[r]])},restore:function(e,r){var i,s;for(s=0;s<r.length;s++)r[s]!==null&&(i=e.data(n+r[s]),i===t&&(i=""),e.css(r[s],i))},setMode:function(e,t){return t==="toggle"&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var n,r;switch(e[0]){case"top":n=0;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=e[0]/t.height}switch(e[1]){case"left":r=0;break;case"center":r=.5;break;case"right":r=1;break;default:r=e[1]/t.width}return{x:r,y:n}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var n={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},r=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),i={width:t.width(),height:t.height()},s=document.activeElement;try{s.id}catch(o){s=document.body}return t.wrap(r),(t[0]===s||e.contains(t[0],s))&&e(s).focus(),r=t.parent(),t.css("position")==="static"?(r.css({position:"relative"}),t.css({position:"relative"})):(e.extend(n,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,r){n[r]=t.css(r),isNaN(parseInt(n[r],10))&&(n[r]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(i),r.css(n).show()},removeWrapper:function(t){var n=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===n||e.contains(t[0],n))&&e(n).focus()),t},setTransition:function(t,n,r,i){return i=i||{},e.each(n,function(e,n){var s=t.cssUnit(n);s[0]>0&&(i[n]=s[0]*r+s[1])}),i}}),e.fn.extend({effect:function(){function o(n){function u(){e.isFunction(i)&&i.call(r[0]),e.isFunction(n)&&n()}var r=e(this),i=t.complete,o=t.mode;(r.is(":hidden")?o==="hide":o==="show")?u():s.call(r[0],t,u)}var t=r.apply(this,arguments),n=t.mode,i=t.queue,s=e.effects.effect[t.effect];return e.fx.off||!s?n?this[n](t.duration,t.complete):this.each(function(){t.complete&&t.complete.call(this)}):i===!1?this.each(o):this.queue(i||"fx",o)},_show:e.fn.show,show:function(e){if(i(e))return this._show.apply(this,arguments);var t=r.apply(this,arguments);return t.mode="show",this.effect.call(this,t)},_hide:e.fn.hide,hide:function(e){if(i(e))return this._hide.apply(this,arguments);var t=r.apply(this,arguments);return t.mode="hide",this.effect.call(this,t)},__toggle:e.fn.toggle,toggle:function(t){if(i(t)||typeof t=="boolean"||e.isFunction(t))return this.__toggle.apply(this,arguments);var n=r.apply(this,arguments);return n.mode="toggle",this.effect.call(this,n)},cssUnit:function(t){var n=this.css(t),r=[];return e.each(["em","px","%","pt"],function(e,t){n.indexOf(t)>0&&(r=[parseFloat(n),t])}),r}})}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,n){t[n]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return e===0||e===1?e:-Math.pow(2,8*(e-1))*Math.sin(((e-1)*80-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){var t,n=4;while(e<((t=Math.pow(2,--n))-1)/11);return 1/Math.pow(4,3-n)-7.5625*Math.pow((t*3-2)/22-e,2)}}),e.each(t,function(t,n){e.easing["easeIn"+t]=n,e.easing["easeOut"+t]=function(e){return 1-n(1-e)},e.easing["easeInOut"+t]=function(e){return e<.5?n(e*2)/2:1-n(e*-2+2)/2}})}()}(jQuery);(function(e,t){var n=/up|down|vertical/,r=/up|left|vertical|horizontal/;e.effects.effect.blind=function(t,i){var s=e(this),o=["position","top","bottom","left","right","height","width"],u=e.effects.setMode(s,t.mode||"hide"),a=t.direction||"up",f=n.test(a),l=f?"height":"width",c=f?"top":"left",h=r.test(a),p={},d=u==="show",v,m,g;s.parent().is(".ui-effects-wrapper")?e.effects.save(s.parent(),o):e.effects.save(s,o),s.show(),v=e.effects.createWrapper(s).css({overflow:"hidden"}),m=v[l](),g=parseFloat(v.css(c))||0,p[l]=d?m:0,h||(s.css(f?"bottom":"right",0).css(f?"top":"left","auto").css({position:"absolute"}),p[c]=d?g:m+g),d&&(v.css(l,0),h||v.css(c,g+m)),v.animate(p,{duration:t.duration,easing:t.easing,queue:!1,complete:function(){u==="hide"&&s.hide(),e.effects.restore(s,o),e.effects.removeWrapper(s),i()}})}})(jQuery);(function(e,t){e.effects.effect.bounce=function(t,n){var r=e(this),i=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(r,t.mode||"effect"),o=s==="hide",u=s==="show",a=t.direction||"up",f=t.distance,l=t.times||5,c=l*2+(u||o?1:0),h=t.duration/c,p=t.easing,d=a==="up"||a==="down"?"top":"left",v=a==="up"||a==="left",m,g,y,b=r.queue(),w=b.length;(u||o)&&i.push("opacity"),e.effects.save(r,i),r.show(),e.effects.createWrapper(r),f||(f=r[d==="top"?"outerHeight":"outerWidth"]()/3),u&&(y={opacity:1},y[d]=0,r.css("opacity",0).css(d,v?-f*2:f*2).animate(y,h,p)),o&&(f/=Math.pow(2,l-1)),y={},y[d]=0;for(m=0;m<l;m++)g={},g[d]=(v?"-=":"+=")+f,r.animate(g,h,p).animate(y,h,p),f=o?f*2:f/2;o&&(g={opacity:0},g[d]=(v?"-=":"+=")+f,r.animate(g,h,p)),r.queue(function(){o&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}),w>1&&b.splice.apply(b,[1,0].concat(b.splice(w,c+1))),r.dequeue()}})(jQuery);(function(e,t){e.effects.effect.clip=function(t,n){var r=e(this),i=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(r,t.mode||"hide"),o=s==="show",u=t.direction||"vertical",a=u==="vertical",f=a?"height":"width",l=a?"top":"left",c={},h,p,d;e.effects.save(r,i),r.show(),h=e.effects.createWrapper(r).css({overflow:"hidden"}),p=r[0].tagName==="IMG"?h:r,d=p[f](),o&&(p.css(f,0),p.css(l,d/2)),c[f]=o?d:0,c[l]=o?0:d/2,p.animate(c,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){o||r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}})}})(jQuery);(function(e,t){e.effects.effect.drop=function(t,n){var r=e(this),i=["position","top","bottom","left","right","opacity","height","width"],s=e.effects.setMode(r,t.mode||"hide"),o=s==="show",u=t.direction||"left",a=u==="up"||u==="down"?"top":"left",f=u==="up"||u==="left"?"pos":"neg",l={opacity:o?1:0},c;e.effects.save(r,i),r.show(),e.effects.createWrapper(r),c=t.distance||r[a==="top"?"outerHeight":"outerWidth"](!0)/2,o&&r.css("opacity",0).css(a,f==="pos"?-c:c),l[a]=(o?f==="pos"?"+=":"-=":f==="pos"?"-=":"+=")+c,r.animate(l,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){s==="hide"&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}})}})(jQuery);(function(e,t){e.effects.effect.explode=function(t,n){function y(){c.push(this),c.length===r*i&&b()}function b(){s.css({visibility:"visible"}),e(c).remove(),u||s.hide(),n()}var r=t.pieces?Math.round(Math.sqrt(t.pieces)):3,i=r,s=e(this),o=e.effects.setMode(s,t.mode||"hide"),u=o==="show",a=s.show().css("visibility","hidden").offset(),f=Math.ceil(s.outerWidth()/i),l=Math.ceil(s.outerHeight()/r),c=[],h,p,d,v,m,g;for(h=0;h<r;h++){v=a.top+h*l,g=h-(r-1)/2;for(p=0;p<i;p++)d=a.left+p*f,m=p-(i-1)/2,s.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-p*f,top:-h*l}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:f,height:l,left:d+(u?m*f:0),top:v+(u?g*l:0),opacity:u?0:1}).animate({left:d+(u?0:m*f),top:v+(u?0:g*l),opacity:u?1:0},t.duration||500,t.easing,y)}}})(jQuery);(function(e,t){e.effects.effect.fade=function(t,n){var r=e(this),i=e.effects.setMode(r,t.mode||"toggle");r.animate({opacity:i},{queue:!1,duration:t.duration,easing:t.easing,complete:n})}})(jQuery);(function(e,t){e.effects.effect.fold=function(t,n){var r=e(this),i=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(r,t.mode||"hide"),o=s==="show",u=s==="hide",a=t.size||15,f=/([0-9]+)%/.exec(a),l=!!t.horizFirst,c=o!==l,h=c?["width","height"]:["height","width"],p=t.duration/2,d,v,m={},g={};e.effects.save(r,i),r.show(),d=e.effects.createWrapper(r).css({overflow:"hidden"}),v=c?[d.width(),d.height()]:[d.height(),d.width()],f&&(a=parseInt(f[1],10)/100*v[u?0:1]),o&&d.css(l?{height:0,width:a}:{height:a,width:0}),m[h[0]]=o?v[0]:a,g[h[1]]=o?v[1]:0,d.animate(m,p,t.easing).animate(g,p,t.easing,function(){u&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()})}})(jQuery);(function(e,t){e.effects.effect.highlight=function(t,n){var r=e(this),i=["backgroundImage","backgroundColor","opacity"],s=e.effects.setMode(r,t.mode||"show"),o={backgroundColor:r.css("backgroundColor")};s==="hide"&&(o.opacity=0),e.effects.save(r,i),r.show().css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(o,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){s==="hide"&&r.hide(),e.effects.restore(r,i),n()}})}})(jQuery);(function(e,t){e.effects.effect.pulsate=function(t,n){var r=e(this),i=e.effects.setMode(r,t.mode||"show"),s=i==="show",o=i==="hide",u=s||i==="hide",a=(t.times||5)*2+(u?1:0),f=t.duration/a,l=0,c=r.queue(),h=c.length,p;if(s||!r.is(":visible"))r.css("opacity",0).show(),l=1;for(p=1;p<a;p++)r.animate({opacity:l},f,t.easing),l=1-l;r.animate({opacity:l},f,t.easing),r.queue(function(){o&&r.hide(),n()}),h>1&&c.splice.apply(c,[1,0].concat(c.splice(h,a+1))),r.dequeue()}})(jQuery);(function(e,t){e.effects.effect.puff=function(t,n){var r=e(this),i=e.effects.setMode(r,t.mode||"hide"),s=i==="hide",o=parseInt(t.percent,10)||150,u=o/100,a={height:r.height(),width:r.width(),outerHeight:r.outerHeight(),outerWidth:r.outerWidth()};e.extend(t,{effect:"scale",queue:!1,fade:!0,mode:i,complete:n,percent:s?o:100,from:s?a:{height:a.height*u,width:a.width*u,outerHeight:a.outerHeight*u,outerWidth:a.outerWidth*u}}),r.effect(t)},e.effects.effect.scale=function(t,n){var r=e(this),i=e.extend(!0,{},t),s=e.effects.setMode(r,t.mode||"effect"),o=parseInt(t.percent,10)||(parseInt(t.percent,10)===0?0:s==="hide"?0:100),u=t.direction||"both",a=t.origin,f={height:r.height(),width:r.width(),outerHeight:r.outerHeight(),outerWidth:r.outerWidth()},l={y:u!=="horizontal"?o/100:1,x:u!=="vertical"?o/100:1};i.effect="size",i.queue=!1,i.complete=n,s!=="effect"&&(i.origin=a||["middle","center"],i.restore=!0),i.from=t.from||(s==="show"?{height:0,width:0,outerHeight:0,outerWidth:0}:f),i.to={height:f.height*l.y,width:f.width*l.x,outerHeight:f.outerHeight*l.y,outerWidth:f.outerWidth*l.x},i.fade&&(s==="show"&&(i.from.opacity=0,i.to.opacity=1),s==="hide"&&(i.from.opacity=1,i.to.opacity=0)),r.effect(i)},e.effects.effect.size=function(t,n){var r,i,s,o=e(this),u=["position","top","bottom","left","right","width","height","overflow","opacity"],a=["position","top","bottom","left","right","overflow","opacity"],f=["width","height","overflow"],l=["fontSize"],c=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],h=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],p=e.effects.setMode(o,t.mode||"effect"),d=t.restore||p!=="effect",v=t.scale||"both",m=t.origin||["middle","center"],g=o.css("position"),y=d?u:a,b={height:0,width:0,outerHeight:0,outerWidth:0};p==="show"&&o.show(),r={height:o.height(),width:o.width(),outerHeight:o.outerHeight(),outerWidth:o.outerWidth()},t.mode==="toggle"&&p==="show"?(o.from=t.to||b,o.to=t.from||r):(o.from=t.from||(p==="show"?b:r),o.to=t.to||(p==="hide"?b:r)),s={from:{y:o.from.height/r.height,x:o.from.width/r.width},to:{y:o.to.height/r.height,x:o.to.width/r.width}};if(v==="box"||v==="both")s.from.y!==s.to.y&&(y=y.concat(c),o.from=e.effects.setTransition(o,c,s.from.y,o.from),o.to=e.effects.setTransition(o,c,s.to.y,o.to)),s.from.x!==s.to.x&&(y=y.concat(h),o.from=e.effects.setTransition(o,h,s.from.x,o.from),o.to=e.effects.setTransition(o,h,s.to.x,o.to));(v==="content"||v==="both")&&s.from.y!==s.to.y&&(y=y.concat(l).concat(f),o.from=e.effects.setTransition(o,l,s.from.y,o.from),o.to=e.effects.setTransition(o,l,s.to.y,o.to)),e.effects.save(o,y),o.show(),e.effects.createWrapper(o),o.css("overflow","hidden").css(o.from),m&&(i=e.effects.getBaseline(m,r),o.from.top=(r.outerHeight-o.outerHeight())*i.y,o.from.left=(r.outerWidth-o.outerWidth())*i.x,o.to.top=(r.outerHeight-o.to.outerHeight)*i.y,o.to.left=(r.outerWidth-o.to.outerWidth)*i.x),o.css(o.from);if(v==="content"||v==="both")c=c.concat(["marginTop","marginBottom"]).concat(l),h=h.concat(["marginLeft","marginRight"]),f=u.concat(c).concat(h),o.find("*[width]").each(function(){var n=e(this),r={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()};d&&e.effects.save(n,f),n.from={height:r.height*s.from.y,width:r.width*s.from.x,outerHeight:r.outerHeight*s.from.y,outerWidth:r.outerWidth*s.from.x},n.to={height:r.height*s.to.y,width:r.width*s.to.x,outerHeight:r.height*s.to.y,outerWidth:r.width*s.to.x},s.from.y!==s.to.y&&(n.from=e.effects.setTransition(n,c,s.from.y,n.from),n.to=e.effects.setTransition(n,c,s.to.y,n.to)),s.from.x!==s.to.x&&(n.from=e.effects.setTransition(n,h,s.from.x,n.from),n.to=e.effects.setTransition(n,h,s.to.x,n.to)),n.css(n.from),n.animate(n.to,t.duration,t.easing,function(){d&&e.effects.restore(n,f)})});o.animate(o.to,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){o.to.opacity===0&&o.css("opacity",o.from.opacity),p==="hide"&&o.hide(),e.effects.restore(o,y),d||(g==="static"?o.css({position:"relative",top:o.to.top,left:o.to.left}):e.each(["top","left"],function(e,t){o.css(t,function(t,n){var r=parseInt(n,10),i=e?o.to.left:o.to.top;return n==="auto"?i+"px":r+i+"px"})})),e.effects.removeWrapper(o),n()}})}})(jQuery);(function(e,t){e.effects.effect.shake=function(t,n){var r=e(this),i=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(r,t.mode||"effect"),o=t.direction||"left",u=t.distance||20,a=t.times||3,f=a*2+1,l=Math.round(t.duration/f),c=o==="up"||o==="down"?"top":"left",h=o==="up"||o==="left",p={},d={},v={},m,g=r.queue(),y=g.length;e.effects.save(r,i),r.show(),e.effects.createWrapper(r),p[c]=(h?"-=":"+=")+u,d[c]=(h?"+=":"-=")+u*2,v[c]=(h?"-=":"+=")+u*2,r.animate(p,l,t.easing);for(m=1;m<a;m++)r.animate(d,l,t.easing).animate(v,l,t.easing);r.animate(d,l,t.easing).animate(p,l/2,t.easing).queue(function(){s==="hide"&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}),y>1&&g.splice.apply(g,[1,0].concat(g.splice(y,f+1))),r.dequeue()}})(jQuery);(function(e,t){e.effects.effect.slide=function(t,n){var r=e(this),i=["position","top","bottom","left","right","width","height"],s=e.effects.setMode(r,t.mode||"show"),o=s==="show",u=t.direction||"left",a=u==="up"||u==="down"?"top":"left",f=u==="up"||u==="left",l,c={};e.effects.save(r,i),r.show(),l=t.distance||r[a==="top"?"outerHeight":"outerWidth"](!0),e.effects.createWrapper(r).css({overflow:"hidden"}),o&&r.css(a,f?isNaN(l)?"-"+l:-l:l),c[a]=(o?f?"+=":"-=":f?"-=":"+=")+l,r.animate(c,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){s==="hide"&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}})}})(jQuery);(function(e,t){e.effects.effect.transfer=function(t,n){var r=e(this),i=e(t.to),s=i.css("position")==="fixed",o=e("body"),u=s?o.scrollTop():0,a=s?o.scrollLeft():0,f=i.offset(),l={top:f.top-u,left:f.left-a,height:i.innerHeight(),width:i.innerWidth()},c=r.offset(),h=e("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(t.className).css({top:c.top-u,left:c.left-a,height:r.innerHeight(),width:r.innerWidth(),position:s?"fixed":"absolute"}).animate(l,t.duration,t.easing,function(){h.remove(),n()})}})(jQuery);
/*!
 * jQuery Cookie Plugin v1.4.0
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2013 Klaus Hartl
 * Released under the MIT license
 */
(function (factory) {
	if (typeof define === 'function' && define.amd) {
		// AMD. Register as anonymous module.
		define(['jquery'], factory);
	} else {
		// Browser globals.
		factory(jQuery);
	}
}(function ($) {

	var pluses = /\+/g;

	function encode(s) {
		return config.raw ? s : encodeURIComponent(s);
	}

	function decode(s) {
		return config.raw ? s : decodeURIComponent(s);
	}

	function stringifyCookieValue(value) {
		return encode(config.json ? JSON.stringify(value) : String(value));
	}

	function parseCookieValue(s) {
		if (s.indexOf('"') === 0) {
			// This is a quoted cookie as according to RFC2068, unescape...
			s = s.slice(1, -1).replace(/\\"/g, '"').replace(/\\\\/g, '\\');
		}

		try {
			// Replace server-side written pluses with spaces.
			// If we can't decode the cookie, ignore it, it's unusable.
			s = decodeURIComponent(s.replace(pluses, ' '));
		} catch(e) {
			return;
		}

		try {
			// If we can't parse the cookie, ignore it, it's unusable.
			return config.json ? JSON.parse(s) : s;
		} catch(e) {}
	}

	function read(s, converter) {
		var value = config.raw ? s : parseCookieValue(s);
		return $.isFunction(converter) ? converter(value) : value;
	}

	var config = $.cookie = function (key, value, options) {

		// Write
		if (value !== undefined && !$.isFunction(value)) {
			options = $.extend({}, config.defaults, options);

			if (typeof options.expires === 'number') {
				var days = options.expires, t = options.expires = new Date();
				t.setDate(t.getDate() + days);
			}

			return (document.cookie = [
				encode(key), '=', stringifyCookieValue(value),
				options.expires ? '; expires=' + options.expires.toUTCString() : '', // use expires attribute, max-age is not supported by IE
				options.path    ? '; path=' + options.path : '',
				options.domain  ? '; domain=' + options.domain : '',
				options.secure  ? '; secure' : ''
			].join(''));
		}

		// Read

		var result = key ? undefined : {};

		// To prevent the for loop in the first place assign an empty array
		// in case there are no cookies at all. Also prevents odd result when
		// calling $.cookie().
		var cookies = document.cookie ? document.cookie.split('; ') : [];

		for (var i = 0, l = cookies.length; i < l; i++) {
			var parts = cookies[i].split('=');
			var name = decode(parts.shift());
			var cookie = parts.join('=');

			if (key && key === name) {
				// If second argument (value) is a function it's a converter...
				result = read(cookie, value);
				break;
			}

			// Prevent storing a cookie that we couldn't decode.
			if (!key && (cookie = read(cookie)) !== undefined) {
				result[name] = cookie;
			}
		}

		return result;
	};

	config.defaults = {};

	$.removeCookie = function (key, options) {
		if ($.cookie(key) !== undefined) {
			// Must not alter options, thus extending a fresh object...
			$.cookie(key, '', $.extend({}, options, { expires: -1 }));
			return true;
		}
		return false;
	};

}));

(function ($) {
    var last = location.hash;

    $.fn.hashchange = function (fun) {
        if (fun) {
            arguments.callee.setup.apply(this);
            return this.bind('hashchange', fun);
        } else {
            return this.trigger('hashchange');
        }
    };

    var setuped;
    $.fn.hashchange.setup = function () {
        if (setuped) return; setuped = true;
        var self = this;
        (function () {
            if (location.hash != last) {
                self.trigger('hashchange');
            }
            setTimeout(arguments.callee, 500);
        })();
    };

    $(window).hashchange(function () {
        last = location.hash;
    });
})(jQuery);

/*!
	jQuery ColorBox v1.4.0 - 2013-02-12
	(c) 2013 Jack Moore - jacklmoore.com/colorbox
	license: http://www.opensource.org/licenses/mit-license.php
*/
(function(e,t,i){function o(i,o,n){var r=t.createElement(i);return o&&(r.id=Y+o),n&&(r.style.cssText=n),e(r)}function n(e){var t=T.length,i=(A+e)%t;return 0>i?t+i:i}function r(e,t){return Math.round((/%/.test(e)?("x"===t?k.width():k.height())/100:1)*parseInt(e,10))}function h(e){return _.photo||_.photoRegex.test(e)}function l(e){return _.retinaUrl&&i.devicePixelRatio>1?e.replace(_.photoRegex,_.retinaSuffix):e}function s(t){e.contains(w[0],t.target)||w[0]===t.target||(t.stopPropagation(),w.focus())}function a(){var t,i=e.data(N,V);null==i?(_=e.extend({},J),console&&console.log&&console.log("Error: cboxElement missing settings object")):_=e.extend({},i);for(t in _)e.isFunction(_[t])&&"on"!==t.slice(0,2)&&(_[t]=_[t].call(N));_.rel=_.rel||N.rel||e(N).data("rel")||"nofollow",_.href=_.href||e(N).attr("href"),_.title=_.title||N.title,"string"==typeof _.href&&(_.href=e.trim(_.href))}function d(i,o){e(t).trigger(i),at.trigger(i),e.isFunction(o)&&o.call(N)}function c(){var e,t,i,o,n,r=Y+"Slideshow_",h="click."+Y;_.slideshow&&T[1]?(t=function(){clearTimeout(e)},i=function(){(_.loop||T[A+1])&&(e=setTimeout(G.next,_.slideshowSpeed))},o=function(){M.html(_.slideshowStop).unbind(h).one(h,n),at.bind(it,i).bind(tt,t).bind(ot,n),w.removeClass(r+"off").addClass(r+"on")},n=function(){t(),at.unbind(it,i).unbind(tt,t).unbind(ot,n),M.html(_.slideshowStart).unbind(h).one(h,function(){G.next(),o()}),w.removeClass(r+"on").addClass(r+"off")},_.slideshowAuto?o():n()):w.removeClass(r+"off "+r+"on")}function u(i){U||(N=i,a(),T=e(N),A=0,"nofollow"!==_.rel&&(T=e("."+Z).filter(function(){var t,i=e.data(this,V);return i&&(t=e(this).data("rel")||i.rel||this.rel),t===_.rel}),A=T.index(N),-1===A&&(T=T.add(N),A=T.length-1)),j||(j=q=!0,w.css({visibility:"hidden",display:"block"}),E=o(dt,"LoadedContent","width:0; height:0; overflow:hidden").appendTo(v),K=x.height()+C.height()+v.outerHeight(!0)-v.height(),z=y.width()+b.width()+v.outerWidth(!0)-v.width(),D=E.outerHeight(!0),B=E.outerWidth(!0),m.css({opacity:parseFloat(_.opacity),cursor:_.overlayClose?"pointer":"auto",visibility:"visible"}).show(),_.w=r(_.initialWidth,"x"),_.h=r(_.initialHeight,"y"),G.position(),lt&&k.bind("resize."+st+" scroll."+st,function(){m.css({width:k.width(),height:k.height(),top:k.scrollTop(),left:k.scrollLeft()})}).trigger("resize."+st),c(),d(et,_.onOpen),P.add(W).hide(),R.html(_.close).show(),w.focus(),t.addEventListener&&(t.addEventListener("focus",s,!0),at.one(nt,function(){t.removeEventListener("focus",s,!0)})),_.returnFocus&&at.one(nt,function(){e(N).focus()})),G.load(!0))}function f(){!w&&t.body&&(X=!1,k=e(i),w=o(dt).attr({id:V,"class":ht?Y+(lt?"IE6":"IE"):"",role:"dialog",tabindex:"-1"}).hide(),m=o(dt,"Overlay",lt?"position:absolute":"").hide(),L=o(dt,"LoadingOverlay").add(o(dt,"LoadingGraphic")),g=o(dt,"Wrapper"),v=o(dt,"Content").append(W=o(dt,"Title"),H=o(dt,"Current"),F=o("button","Previous"),S=o("button","Next"),M=o("button","Slideshow"),L,R=o("button","Close")),g.append(o(dt).append(o(dt,"TopLeft"),x=o(dt,"TopCenter"),o(dt,"TopRight")),o(dt,!1,"clear:left").append(y=o(dt,"MiddleLeft"),v,b=o(dt,"MiddleRight")),o(dt,!1,"clear:left").append(o(dt,"BottomLeft"),C=o(dt,"BottomCenter"),o(dt,"BottomRight"))).find("div div").css({"float":"left"}),I=o(dt,!1,"position:absolute; width:9999px; visibility:hidden; display:none"),P=S.add(F).add(H).add(M),e(t.body).append(m,w.append(g,I)))}function p(){function i(e){e.which>1||e.shiftKey||e.altKey||e.metaKey||(e.preventDefault(),u(this))}return w?(X||(X=!0,S.click(function(){G.next()}),F.click(function(){G.prev()}),R.click(function(){G.close()}),m.click(function(){_.overlayClose&&G.close()}),e(t).bind("keydown."+Y,function(e){var t=e.keyCode;j&&_.escKey&&27===t&&(e.preventDefault(),G.close()),j&&_.arrowKey&&T[1]&&(37===t?(e.preventDefault(),F.click()):39===t&&(e.preventDefault(),S.click()))}),e.isFunction(e.fn.on)?e(t).on("click."+Y,"."+Z,i):e("."+Z).live("click."+Y,i)),!0):!1}var m,w,g,v,x,y,b,C,T,k,E,I,L,W,H,M,S,F,R,P,_,K,z,D,B,N,A,O,j,q,U,$,G,Q,X,J={transition:"elastic",speed:300,width:!1,initialWidth:"600",innerWidth:!1,maxWidth:!1,height:!1,initialHeight:"450",innerHeight:!1,maxHeight:!1,scalePhotos:!0,scrolling:!0,inline:!1,html:!1,iframe:!1,fastIframe:!0,photo:!1,href:!1,title:!1,rel:!1,opacity:.9,preloading:!0,className:!1,retinaImage:!1,retinaUrl:!1,retinaSuffix:"@2x.$1",current:"image {current} of {total}",previous:"previous",next:"next",close:"close",xhrError:"This content failed to load.",imgError:"This image failed to load.",open:!1,returnFocus:!0,reposition:!0,loop:!0,slideshow:!1,slideshowAuto:!0,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",photoRegex:/\.(gif|png|jp(e|g|eg)|bmp|ico)((#|\?).*)?$/i,onOpen:!1,onLoad:!1,onComplete:!1,onCleanup:!1,onClosed:!1,overlayClose:!0,escKey:!0,arrowKey:!0,top:!1,bottom:!1,left:!1,right:!1,fixed:!1,data:void 0},V="colorbox",Y="cbox",Z=Y+"Element",et=Y+"_open",tt=Y+"_load",it=Y+"_complete",ot=Y+"_cleanup",nt=Y+"_closed",rt=Y+"_purge",ht=!e.support.leadingWhitespace,lt=ht&&!i.XMLHttpRequest,st=Y+"_IE6",at=e({}),dt="div";e.colorbox||(e(f),G=e.fn[V]=e[V]=function(t,i){var o=this;if(t=t||{},f(),p()){if(e.isFunction(o))o=e("<a/>"),t.open=!0;else if(!o[0])return o;i&&(t.onComplete=i),o.each(function(){e.data(this,V,e.extend({},e.data(this,V)||J,t))}).addClass(Z),(e.isFunction(t.open)&&t.open.call(o)||t.open)&&u(o[0])}return o},G.position=function(e,t){function i(e){x[0].style.width=C[0].style.width=v[0].style.width=parseInt(e.style.width,10)-z+"px",v[0].style.height=y[0].style.height=b[0].style.height=parseInt(e.style.height,10)-K+"px"}var o,n,h,l=0,s=0,a=w.offset();k.unbind("resize."+Y),w.css({top:-9e4,left:-9e4}),n=k.scrollTop(),h=k.scrollLeft(),_.fixed&&!lt?(a.top-=n,a.left-=h,w.css({position:"fixed"})):(l=n,s=h,w.css({position:"absolute"})),s+=_.right!==!1?Math.max(k.width()-_.w-B-z-r(_.right,"x"),0):_.left!==!1?r(_.left,"x"):Math.round(Math.max(k.width()-_.w-B-z,0)/2),l+=_.bottom!==!1?Math.max(k.height()-_.h-D-K-r(_.bottom,"y"),0):_.top!==!1?r(_.top,"y"):Math.round(Math.max(k.height()-_.h-D-K,0)/2),w.css({top:a.top,left:a.left,visibility:"visible"}),e=w.width()===_.w+B&&w.height()===_.h+D?0:e||0,g[0].style.width=g[0].style.height="9999px",o={width:_.w+B+z,height:_.h+D+K,top:l,left:s},0===e&&w.css(o),w.dequeue().animate(o,{duration:e,complete:function(){i(this),q=!1,g[0].style.width=_.w+B+z+"px",g[0].style.height=_.h+D+K+"px",_.reposition&&setTimeout(function(){k.bind("resize."+Y,G.position)},1),t&&t()},step:function(){i(this)}})},G.resize=function(e){j&&(e=e||{},e.width&&(_.w=r(e.width,"x")-B-z),e.innerWidth&&(_.w=r(e.innerWidth,"x")),E.css({width:_.w}),e.height&&(_.h=r(e.height,"y")-D-K),e.innerHeight&&(_.h=r(e.innerHeight,"y")),e.innerHeight||e.height||(E.css({height:"auto"}),_.h=E.height()),E.css({height:_.h}),G.position("none"===_.transition?0:_.speed))},G.prep=function(t){function i(){return _.w=_.w||E.width(),_.w=_.mw&&_.mw<_.w?_.mw:_.w,_.w}function r(){return _.h=_.h||E.height(),_.h=_.mh&&_.mh<_.h?_.mh:_.h,_.h}if(j){var l,s="none"===_.transition?0:_.speed;E.empty().remove(),E=o(dt,"LoadedContent").append(t),E.hide().appendTo(I.show()).css({width:i(),overflow:_.scrolling?"auto":"hidden"}).css({height:r()}).prependTo(v),I.hide(),e(O).css({"float":"none"}),l=function(){function t(){ht&&w[0].style.removeAttribute("filter")}var i,r,l=T.length,a="frameBorder",c="allowTransparency";j&&(r=function(){clearTimeout($),L.hide(),d(it,_.onComplete)},ht&&O&&E.fadeIn(100),W.html(_.title).add(E).show(),l>1?("string"==typeof _.current&&H.html(_.current.replace("{current}",A+1).replace("{total}",l)).show(),S[_.loop||l-1>A?"show":"hide"]().html(_.next),F[_.loop||A?"show":"hide"]().html(_.previous),_.slideshow&&M.show(),_.preloading&&e.each([n(-1),n(1)],function(){var t,i,o=T[this],n=e.data(o,V);n&&n.href?(t=n.href,e.isFunction(t)&&(t=t.call(o))):t=e(o).attr("href"),t&&(h(t)||n.photo)&&(i=new Image,i.src=t)})):P.hide(),_.iframe?(i=o("iframe")[0],a in i&&(i[a]=0),c in i&&(i[c]="true"),_.scrolling||(i.scrolling="no"),e(i).attr({src:_.href,name:(new Date).getTime(),"class":Y+"Iframe",allowFullScreen:!0,webkitAllowFullScreen:!0,mozallowfullscreen:!0}).one("load",r).appendTo(E),at.one(rt,function(){i.src="//about:blank"}),_.fastIframe&&e(i).trigger("load")):r(),"fade"===_.transition?w.fadeTo(s,1,t):t())},"fade"===_.transition?w.fadeTo(s,0,function(){G.position(0,l)}):G.position(s,l)}},G.load=function(t){var n,s,c,u=G.prep;q=!0,O=!1,N=T[A],t||a(),Q&&w.add(m).removeClass(Q),_.className&&w.add(m).addClass(_.className),Q=_.className,d(rt),d(tt,_.onLoad),_.h=_.height?r(_.height,"y")-D-K:_.innerHeight&&r(_.innerHeight,"y"),_.w=_.width?r(_.width,"x")-B-z:_.innerWidth&&r(_.innerWidth,"x"),_.mw=_.w,_.mh=_.h,_.maxWidth&&(_.mw=r(_.maxWidth,"x")-B-z,_.mw=_.w&&_.w<_.mw?_.w:_.mw),_.maxHeight&&(_.mh=r(_.maxHeight,"y")-D-K,_.mh=_.h&&_.h<_.mh?_.h:_.mh),n=_.href,$=setTimeout(function(){L.show()},100),_.inline?(c=o(dt).hide().insertBefore(e(n)[0]),at.one(rt,function(){c.replaceWith(E.children())}),u(e(n))):_.iframe?u(" "):_.html?u(_.html):h(n)?(n=l(n),e(O=new Image).addClass(Y+"Photo").bind("error",function(){_.title=!1,u(o(dt,"Error").html(_.imgError))}).one("load",function(){var e;_.retinaImage&&i.devicePixelRatio>1&&(O.height=O.height/i.devicePixelRatio,O.width=O.width/i.devicePixelRatio),_.scalePhotos&&(s=function(){O.height-=O.height*e,O.width-=O.width*e},_.mw&&O.width>_.mw&&(e=(O.width-_.mw)/O.width,s()),_.mh&&O.height>_.mh&&(e=(O.height-_.mh)/O.height,s())),_.h&&(O.style.marginTop=Math.max(_.mh-O.height,0)/2+"px"),T[1]&&(_.loop||T[A+1])&&(O.style.cursor="pointer",O.onclick=function(){G.next()}),ht&&(O.style.msInterpolationMode="bicubic"),setTimeout(function(){u(O)},1)}),setTimeout(function(){O.src=n},1)):n&&I.load(n,_.data,function(t,i){u("error"===i?o(dt,"Error").html(_.xhrError):e(this).contents())})},G.next=function(){!q&&T[1]&&(_.loop||T[A+1])&&(A=n(1),G.load())},G.prev=function(){!q&&T[1]&&(_.loop||A)&&(A=n(-1),G.load())},G.close=function(){j&&!U&&(U=!0,j=!1,d(ot,_.onCleanup),k.unbind("."+Y+" ."+st),m.fadeTo(200,0),w.stop().fadeTo(300,0,function(){w.add(m).css({opacity:1,cursor:"auto"}).hide(),d(rt),E.empty().remove(),setTimeout(function(){U=!1,d(nt,_.onClosed)},1)}))},G.remove=function(){e([]).add(w).add(m).remove(),w=null,e("."+Z).removeData(V).removeClass(Z),e(t).unbind("click."+Y)},G.element=function(){return e(N)},G.settings=J)})(jQuery,document,window);
/*! Javascript plotting library for jQuery, v. 0.7.
 *
 * Released under the MIT license by IOLA, December 2007.
 *
 */

// first an inline dependency, jquery.colorhelpers.js, we inline it here
// for convenience

/* Plugin for jQuery for working with colors.
 * 
 * Version 1.1.
 * 
 * Inspiration from jQuery color animation plugin by John Resig.
 *
 * Released under the MIT license by Ole Laursen, October 2009.
 *
 * Examples:
 *
 *   $.color.parse("#fff").scale('rgb', 0.25).add('a', -0.5).toString()
 *   var c = $.color.extract($("#mydiv"), 'background-color');
 *   console.log(c.r, c.g, c.b, c.a);
 *   $.color.make(100, 50, 25, 0.4).toString() // returns "rgba(100,50,25,0.4)"
 *
 * Note that .scale() and .add() return the same modified object
 * instead of making a new one.
 *
 * V. 1.1: Fix error handling so e.g. parsing an empty string does
 * produce a color rather than just crashing.
 */ 
(function(B){B.color={};B.color.make=function(F,E,C,D){var G={};G.r=F||0;G.g=E||0;G.b=C||0;G.a=D!=null?D:1;G.add=function(J,I){for(var H=0;H<J.length;++H){G[J.charAt(H)]+=I}return G.normalize()};G.scale=function(J,I){for(var H=0;H<J.length;++H){G[J.charAt(H)]*=I}return G.normalize()};G.toString=function(){if(G.a>=1){return"rgb("+[G.r,G.g,G.b].join(",")+")"}else{return"rgba("+[G.r,G.g,G.b,G.a].join(",")+")"}};G.normalize=function(){function H(J,K,I){return K<J?J:(K>I?I:K)}G.r=H(0,parseInt(G.r),255);G.g=H(0,parseInt(G.g),255);G.b=H(0,parseInt(G.b),255);G.a=H(0,G.a,1);return G};G.clone=function(){return B.color.make(G.r,G.b,G.g,G.a)};return G.normalize()};B.color.extract=function(D,C){var E;do{E=D.css(C).toLowerCase();if(E!=""&&E!="transparent"){break}D=D.parent()}while(!B.nodeName(D.get(0),"body"));if(E=="rgba(0, 0, 0, 0)"){E="transparent"}return B.color.parse(E)};B.color.parse=function(F){var E,C=B.color.make;if(E=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(F)){return C(parseInt(E[1],10),parseInt(E[2],10),parseInt(E[3],10))}if(E=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(F)){return C(parseInt(E[1],10),parseInt(E[2],10),parseInt(E[3],10),parseFloat(E[4]))}if(E=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(F)){return C(parseFloat(E[1])*2.55,parseFloat(E[2])*2.55,parseFloat(E[3])*2.55)}if(E=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(F)){return C(parseFloat(E[1])*2.55,parseFloat(E[2])*2.55,parseFloat(E[3])*2.55,parseFloat(E[4]))}if(E=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(F)){return C(parseInt(E[1],16),parseInt(E[2],16),parseInt(E[3],16))}if(E=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(F)){return C(parseInt(E[1]+E[1],16),parseInt(E[2]+E[2],16),parseInt(E[3]+E[3],16))}var D=B.trim(F).toLowerCase();if(D=="transparent"){return C(255,255,255,0)}else{E=A[D]||[0,0,0];return C(E[0],E[1],E[2])}};var A={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})(jQuery);

// the actual Flot code
(function($) {
    function Plot(placeholder, data_, options_, plugins) {
        // data is on the form:
        //   [ series1, series2 ... ]
        // where series is either just the data as [ [x1, y1], [x2, y2], ... ]
        // or { data: [ [x1, y1], [x2, y2], ... ], label: "some label", ... }
        
        var series = [],
            options = {
                // the color theme used for graphs
                colors: ["#edc240", "#afd8f8", "#cb4b4b", "#4da74d", "#9440ed"],
                legend: {
                    show: true,
                    noColumns: 1, // number of colums in legend table
                    labelFormatter: null, // fn: string -> string
                    labelBoxBorderColor: "#ccc", // border color for the little label boxes
                    container: null, // container (as jQuery object) to put legend in, null means default on top of graph
                    position: "ne", // position of default legend container within plot
                    margin: 5, // distance from grid edge to default legend container within plot
                    backgroundColor: null, // null means auto-detect
                    backgroundOpacity: 0.85 // set to 0 to avoid background
                },
                xaxis: {
                    show: null, // null = auto-detect, true = always, false = never
                    position: "bottom", // or "top"
                    mode: null, // null or "time"
                    color: null, // base color, labels, ticks
                    tickColor: null, // possibly different color of ticks, e.g. "rgba(0,0,0,0.15)"
                    transform: null, // null or f: number -> number to transform axis
                    inverseTransform: null, // if transform is set, this should be the inverse function
                    min: null, // min. value to show, null means set automatically
                    max: null, // max. value to show, null means set automatically
                    autoscaleMargin: null, // margin in % to add if auto-setting min/max
                    ticks: null, // either [1, 3] or [[1, "a"], 3] or (fn: axis info -> ticks) or app. number of ticks for auto-ticks
                    tickFormatter: null, // fn: number -> string
                    labelWidth: null, // size of tick labels in pixels
                    labelHeight: null,
                    reserveSpace: null, // whether to reserve space even if axis isn't shown
                    tickLength: null, // size in pixels of ticks, or "full" for whole line
                    alignTicksWithAxis: null, // axis number or null for no sync
                    
                    // mode specific options
                    tickDecimals: null, // no. of decimals, null means auto
                    tickSize: null, // number or [number, "unit"]
                    minTickSize: null, // number or [number, "unit"]
                    monthNames: null, // list of names of months
                    timeformat: null, // format string to use
                    twelveHourClock: false // 12 or 24 time in time mode
                },
                yaxis: {
                    autoscaleMargin: 0.02,
                    position: "left" // or "right"
                },
                xaxes: [],
                yaxes: [],
                series: {
                    points: {
                        show: false,
                        radius: 3,
                        lineWidth: 2, // in pixels
                        fill: true,
                        fillColor: "#ffffff",
                        symbol: "circle" // or callback
                    },
                    lines: {
                        // we don't put in show: false so we can see
                        // whether lines were actively disabled 
                        lineWidth: 2, // in pixels
                        fill: false,
                        fillColor: null,
                        steps: false
                    },
                    bars: {
                        show: false,
                        lineWidth: 2, // in pixels
                        barWidth: 1, // in units of the x axis
                        fill: true,
                        fillColor: null,
                        align: "left", // or "center" 
                        horizontal: false
                    },
                    shadowSize: 3
                },
                grid: {
                    show: true,
                    aboveData: false,
                    color: "#545454", // primary color used for outline and labels
                    backgroundColor: null, // null for transparent, else color
                    borderColor: null, // set if different from the grid color
                    tickColor: null, // color for the ticks, e.g. "rgba(0,0,0,0.15)"
                    labelMargin: 5, // in pixels
                    axisMargin: 8, // in pixels
                    borderWidth: 2, // in pixels
                    minBorderMargin: null, // in pixels, null means taken from points radius
                    markings: null, // array of ranges or fn: axes -> array of ranges
                    markingsColor: "#f4f4f4",
                    markingsLineWidth: 2,
                    // interactive stuff
                    clickable: false,
                    hoverable: false,
                    autoHighlight: true, // highlight in case mouse is near
                    mouseActiveRadius: 10 // how far the mouse can be away to activate an item
                },
                hooks: {}
            },
        canvas = null,      // the canvas for the plot itself
        overlay = null,     // canvas for interactive stuff on top of plot
        eventHolder = null, // jQuery object that events should be bound to
        ctx = null, octx = null,
        xaxes = [], yaxes = [],
        plotOffset = { left: 0, right: 0, top: 0, bottom: 0},
        canvasWidth = 0, canvasHeight = 0,
        plotWidth = 0, plotHeight = 0,
        hooks = {
            processOptions: [],
            processRawData: [],
            processDatapoints: [],
            drawSeries: [],
            draw: [],
            bindEvents: [],
            drawOverlay: [],
            shutdown: []
        },
        plot = this;

        // public functions
        plot.setData = setData;
        plot.setupGrid = setupGrid;
        plot.draw = draw;
        plot.getPlaceholder = function() { return placeholder; };
        plot.getCanvas = function() { return canvas; };
        plot.getPlotOffset = function() { return plotOffset; };
        plot.width = function () { return plotWidth; };
        plot.height = function () { return plotHeight; };
        plot.offset = function () {
            var o = eventHolder.offset();
            o.left += plotOffset.left;
            o.top += plotOffset.top;
            return o;
        };
        plot.getData = function () { return series; };
        plot.getAxes = function () {
            var res = {}, i;
            $.each(xaxes.concat(yaxes), function (_, axis) {
                if (axis)
                    res[axis.direction + (axis.n != 1 ? axis.n : "") + "axis"] = axis;
            });
            return res;
        };
        plot.getXAxes = function () { return xaxes; };
        plot.getYAxes = function () { return yaxes; };
        plot.c2p = canvasToAxisCoords;
        plot.p2c = axisToCanvasCoords;
        plot.getOptions = function () { return options; };
        plot.highlight = highlight;
        plot.unhighlight = unhighlight;
        plot.triggerRedrawOverlay = triggerRedrawOverlay;
        plot.pointOffset = function(point) {
            return {
                left: parseInt(xaxes[axisNumber(point, "x") - 1].p2c(+point.x) + plotOffset.left),
                top: parseInt(yaxes[axisNumber(point, "y") - 1].p2c(+point.y) + plotOffset.top)
            };
        };
        plot.shutdown = shutdown;
        plot.resize = function () {
            getCanvasDimensions();
            resizeCanvas(canvas);
            resizeCanvas(overlay);
        };

        // public attributes
        plot.hooks = hooks;
        
        // initialize
        initPlugins(plot);
        parseOptions(options_);
        setupCanvases();
        setData(data_);
        setupGrid();
        draw();
        bindEvents();


        function executeHooks(hook, args) {
            args = [plot].concat(args);
            for (var i = 0; i < hook.length; ++i)
                hook[i].apply(this, args);
        }

        function initPlugins() {
            for (var i = 0; i < plugins.length; ++i) {
                var p = plugins[i];
                p.init(plot);
                if (p.options)
                    $.extend(true, options, p.options);
            }
        }
        
        function parseOptions(opts) {
            var i;
            
            $.extend(true, options, opts);
            
            if (options.xaxis.color == null)
                options.xaxis.color = options.grid.color;
            if (options.yaxis.color == null)
                options.yaxis.color = options.grid.color;
            
            if (options.xaxis.tickColor == null) // backwards-compatibility
                options.xaxis.tickColor = options.grid.tickColor;
            if (options.yaxis.tickColor == null) // backwards-compatibility
                options.yaxis.tickColor = options.grid.tickColor;

            if (options.grid.borderColor == null)
                options.grid.borderColor = options.grid.color;
            if (options.grid.tickColor == null)
                options.grid.tickColor = $.color.parse(options.grid.color).scale('a', 0.22).toString();
            
            // fill in defaults in axes, copy at least always the
            // first as the rest of the code assumes it'll be there
            for (i = 0; i < Math.max(1, options.xaxes.length); ++i)
                options.xaxes[i] = $.extend(true, {}, options.xaxis, options.xaxes[i]);
            for (i = 0; i < Math.max(1, options.yaxes.length); ++i)
                options.yaxes[i] = $.extend(true, {}, options.yaxis, options.yaxes[i]);

            // backwards compatibility, to be removed in future
            if (options.xaxis.noTicks && options.xaxis.ticks == null)
                options.xaxis.ticks = options.xaxis.noTicks;
            if (options.yaxis.noTicks && options.yaxis.ticks == null)
                options.yaxis.ticks = options.yaxis.noTicks;
            if (options.x2axis) {
                options.xaxes[1] = $.extend(true, {}, options.xaxis, options.x2axis);
                options.xaxes[1].position = "top";
            }
            if (options.y2axis) {
                options.yaxes[1] = $.extend(true, {}, options.yaxis, options.y2axis);
                options.yaxes[1].position = "right";
            }
            if (options.grid.coloredAreas)
                options.grid.markings = options.grid.coloredAreas;
            if (options.grid.coloredAreasColor)
                options.grid.markingsColor = options.grid.coloredAreasColor;
            if (options.lines)
                $.extend(true, options.series.lines, options.lines);
            if (options.points)
                $.extend(true, options.series.points, options.points);
            if (options.bars)
                $.extend(true, options.series.bars, options.bars);
            if (options.shadowSize != null)
                options.series.shadowSize = options.shadowSize;

            // save options on axes for future reference
            for (i = 0; i < options.xaxes.length; ++i)
                getOrCreateAxis(xaxes, i + 1).options = options.xaxes[i];
            for (i = 0; i < options.yaxes.length; ++i)
                getOrCreateAxis(yaxes, i + 1).options = options.yaxes[i];

            // add hooks from options
            for (var n in hooks)
                if (options.hooks[n] && options.hooks[n].length)
                    hooks[n] = hooks[n].concat(options.hooks[n]);

            executeHooks(hooks.processOptions, [options]);
        }

        function setData(d) {
            series = parseData(d);
            fillInSeriesOptions();
            processData();
        }
        
        function parseData(d) {
            var res = [];
            for (var i = 0; i < d.length; ++i) {
                var s = $.extend(true, {}, options.series);

                if (d[i].data != null) {
                    s.data = d[i].data; // move the data instead of deep-copy
                    delete d[i].data;

                    $.extend(true, s, d[i]);

                    d[i].data = s.data;
                }
                else
                    s.data = d[i];
                res.push(s);
            }

            return res;
        }
        
        function axisNumber(obj, coord) {
            var a = obj[coord + "axis"];
            if (typeof a == "object") // if we got a real axis, extract number
                a = a.n;
            if (typeof a != "number")
                a = 1; // default to first axis
            return a;
        }

        function allAxes() {
            // return flat array without annoying null entries
            return $.grep(xaxes.concat(yaxes), function (a) { return a; });
        }
        
        function canvasToAxisCoords(pos) {
            // return an object with x/y corresponding to all used axes 
            var res = {}, i, axis;
            for (i = 0; i < xaxes.length; ++i) {
                axis = xaxes[i];
                if (axis && axis.used)
                    res["x" + axis.n] = axis.c2p(pos.left);
            }

            for (i = 0; i < yaxes.length; ++i) {
                axis = yaxes[i];
                if (axis && axis.used)
                    res["y" + axis.n] = axis.c2p(pos.top);
            }
            
            if (res.x1 !== undefined)
                res.x = res.x1;
            if (res.y1 !== undefined)
                res.y = res.y1;

            return res;
        }
        
        function axisToCanvasCoords(pos) {
            // get canvas coords from the first pair of x/y found in pos
            var res = {}, i, axis, key;

            for (i = 0; i < xaxes.length; ++i) {
                axis = xaxes[i];
                if (axis && axis.used) {
                    key = "x" + axis.n;
                    if (pos[key] == null && axis.n == 1)
                        key = "x";

                    if (pos[key] != null) {
                        res.left = axis.p2c(pos[key]);
                        break;
                    }
                }
            }
            
            for (i = 0; i < yaxes.length; ++i) {
                axis = yaxes[i];
                if (axis && axis.used) {
                    key = "y" + axis.n;
                    if (pos[key] == null && axis.n == 1)
                        key = "y";

                    if (pos[key] != null) {
                        res.top = axis.p2c(pos[key]);
                        break;
                    }
                }
            }
            
            return res;
        }
        
        function getOrCreateAxis(axes, number) {
            if (!axes[number - 1])
                axes[number - 1] = {
                    n: number, // save the number for future reference
                    direction: axes == xaxes ? "x" : "y",
                    options: $.extend(true, {}, axes == xaxes ? options.xaxis : options.yaxis)
                };
                
            return axes[number - 1];
        }

        function fillInSeriesOptions() {
            var i;
            
            // collect what we already got of colors
            var neededColors = series.length,
                usedColors = [],
                assignedColors = [];
            for (i = 0; i < series.length; ++i) {
                var sc = series[i].color;
                if (sc != null) {
                    --neededColors;
                    if (typeof sc == "number")
                        assignedColors.push(sc);
                    else
                        usedColors.push($.color.parse(series[i].color));
                }
            }
            
            // we might need to generate more colors if higher indices
            // are assigned
            for (i = 0; i < assignedColors.length; ++i) {
                neededColors = Math.max(neededColors, assignedColors[i] + 1);
            }

            // produce colors as needed
            var colors = [], variation = 0;
            i = 0;
            while (colors.length < neededColors) {
                var c;
                if (options.colors.length == i) // check degenerate case
                    c = $.color.make(100, 100, 100);
                else
                    c = $.color.parse(options.colors[i]);

                // vary color if needed
                var sign = variation % 2 == 1 ? -1 : 1;
                c.scale('rgb', 1 + sign * Math.ceil(variation / 2) * 0.2)

                // FIXME: if we're getting to close to something else,
                // we should probably skip this one
                colors.push(c);
                
                ++i;
                if (i >= options.colors.length) {
                    i = 0;
                    ++variation;
                }
            }

            // fill in the options
            var colori = 0, s;
            for (i = 0; i < series.length; ++i) {
                s = series[i];
                
                // assign colors
                if (s.color == null) {
                    s.color = colors[colori].toString();
                    ++colori;
                }
                else if (typeof s.color == "number")
                    s.color = colors[s.color].toString();

                // turn on lines automatically in case nothing is set
                if (s.lines.show == null) {
                    var v, show = true;
                    for (v in s)
                        if (s[v] && s[v].show) {
                            show = false;
                            break;
                        }
                    if (show)
                        s.lines.show = true;
                }

                // setup axes
                s.xaxis = getOrCreateAxis(xaxes, axisNumber(s, "x"));
                s.yaxis = getOrCreateAxis(yaxes, axisNumber(s, "y"));
            }
        }
        
        function processData() {
            var topSentry = Number.POSITIVE_INFINITY,
                bottomSentry = Number.NEGATIVE_INFINITY,
                fakeInfinity = Number.MAX_VALUE,
                i, j, k, m, length,
                s, points, ps, x, y, axis, val, f, p;

            function updateAxis(axis, min, max) {
                if (min < axis.datamin && min != -fakeInfinity)
                    axis.datamin = min;
                if (max > axis.datamax && max != fakeInfinity)
                    axis.datamax = max;
            }

            $.each(allAxes(), function (_, axis) {
                // init axis
                axis.datamin = topSentry;
                axis.datamax = bottomSentry;
                axis.used = false;
            });
            
            for (i = 0; i < series.length; ++i) {
                s = series[i];
                s.datapoints = { points: [] };
                
                executeHooks(hooks.processRawData, [ s, s.data, s.datapoints ]);
            }
            
            // first pass: clean and copy data
            for (i = 0; i < series.length; ++i) {
                s = series[i];

                var data = s.data, format = s.datapoints.format;

                if (!format) {
                    format = [];
                    // find out how to copy
                    format.push({ x: true, number: true, required: true });
                    format.push({ y: true, number: true, required: true });

                    if (s.bars.show || (s.lines.show && s.lines.fill)) {
                        format.push({ y: true, number: true, required: false, defaultValue: 0 });
                        if (s.bars.horizontal) {
                            delete format[format.length - 1].y;
                            format[format.length - 1].x = true;
                        }
                    }
                    
                    s.datapoints.format = format;
                }

                if (s.datapoints.pointsize != null)
                    continue; // already filled in

                s.datapoints.pointsize = format.length;
                
                ps = s.datapoints.pointsize;
                points = s.datapoints.points;

                insertSteps = s.lines.show && s.lines.steps;
                s.xaxis.used = s.yaxis.used = true;
                
                for (j = k = 0; j < data.length; ++j, k += ps) {
                    p = data[j];

                    var nullify = p == null;
                    if (!nullify) {
                        for (m = 0; m < ps; ++m) {
                            val = p[m];
                            f = format[m];

                            if (f) {
                                if (f.number && val != null) {
                                    val = +val; // convert to number
                                    if (isNaN(val))
                                        val = null;
                                    else if (val == Infinity)
                                        val = fakeInfinity;
                                    else if (val == -Infinity)
                                        val = -fakeInfinity;
                                }

                                if (val == null) {
                                    if (f.required)
                                        nullify = true;
                                    
                                    if (f.defaultValue != null)
                                        val = f.defaultValue;
                                }
                            }
                            
                            points[k + m] = val;
                        }
                    }
                    
                    if (nullify) {
                        for (m = 0; m < ps; ++m) {
                            val = points[k + m];
                            if (val != null) {
                                f = format[m];
                                // extract min/max info
                                if (f.x)
                                    updateAxis(s.xaxis, val, val);
                                if (f.y)
                                    updateAxis(s.yaxis, val, val);
                            }
                            points[k + m] = null;
                        }
                    }
                    else {
                        // a little bit of line specific stuff that
                        // perhaps shouldn't be here, but lacking
                        // better means...
                        if (insertSteps && k > 0
                            && points[k - ps] != null
                            && points[k - ps] != points[k]
                            && points[k - ps + 1] != points[k + 1]) {
                            // copy the point to make room for a middle point
                            for (m = 0; m < ps; ++m)
                                points[k + ps + m] = points[k + m];

                            // middle point has same y
                            points[k + 1] = points[k - ps + 1];

                            // we've added a point, better reflect that
                            k += ps;
                        }
                    }
                }
            }

            // give the hooks a chance to run
            for (i = 0; i < series.length; ++i) {
                s = series[i];
                
                executeHooks(hooks.processDatapoints, [ s, s.datapoints]);
            }

            // second pass: find datamax/datamin for auto-scaling
            for (i = 0; i < series.length; ++i) {
                s = series[i];
                points = s.datapoints.points,
                ps = s.datapoints.pointsize;

                var xmin = topSentry, ymin = topSentry,
                    xmax = bottomSentry, ymax = bottomSentry;
                
                for (j = 0; j < points.length; j += ps) {
                    if (points[j] == null)
                        continue;

                    for (m = 0; m < ps; ++m) {
                        val = points[j + m];
                        f = format[m];
                        if (!f || val == fakeInfinity || val == -fakeInfinity)
                            continue;
                        
                        if (f.x) {
                            if (val < xmin)
                                xmin = val;
                            if (val > xmax)
                                xmax = val;
                        }
                        if (f.y) {
                            if (val < ymin)
                                ymin = val;
                            if (val > ymax)
                                ymax = val;
                        }
                    }
                }
                
                if (s.bars.show) {
                    // make sure we got room for the bar on the dancing floor
                    var delta = s.bars.align == "left" ? 0 : -s.bars.barWidth/2;
                    if (s.bars.horizontal) {
                        ymin += delta;
                        ymax += delta + s.bars.barWidth;
                    }
                    else {
                        xmin += delta;
                        xmax += delta + s.bars.barWidth;
                    }
                }
                
                updateAxis(s.xaxis, xmin, xmax);
                updateAxis(s.yaxis, ymin, ymax);
            }

            $.each(allAxes(), function (_, axis) {
                if (axis.datamin == topSentry)
                    axis.datamin = null;
                if (axis.datamax == bottomSentry)
                    axis.datamax = null;
            });
        }

        function makeCanvas(skipPositioning, cls) {
            var c = document.createElement('canvas');
            c.className = cls;
            c.width = canvasWidth;
            c.height = canvasHeight;
                    
            if (!skipPositioning)
                $(c).css({ position: 'absolute', left: 0, top: 0 });
                
            $(c).appendTo(placeholder);
                
            if (!c.getContext) // excanvas hack
                c = window.G_vmlCanvasManager.initElement(c);

            // used for resetting in case we get replotted
            c.getContext("2d").save();
            
            return c;
        }

        function getCanvasDimensions() {
            canvasWidth = placeholder.width();
            canvasHeight = placeholder.height();
            
            if (canvasWidth <= 0 || canvasHeight <= 0)
                throw "Invalid dimensions for plot, width = " + canvasWidth + ", height = " + canvasHeight;
        }

        function resizeCanvas(c) {
            // resizing should reset the state (excanvas seems to be
            // buggy though)
            if (c.width != canvasWidth)
                c.width = canvasWidth;

            if (c.height != canvasHeight)
                c.height = canvasHeight;

            // so try to get back to the initial state (even if it's
            // gone now, this should be safe according to the spec)
            var cctx = c.getContext("2d");
            cctx.restore();

            // and save again
            cctx.save();
        }
        
        function setupCanvases() {
            var reused,
                existingCanvas = placeholder.children("canvas.base"),
                existingOverlay = placeholder.children("canvas.overlay");

            if (existingCanvas.length == 0 || existingOverlay == 0) {
                // init everything
                
                placeholder.html(""); // make sure placeholder is clear
            
                placeholder.css({ padding: 0 }); // padding messes up the positioning
                
                if (placeholder.css("position") == 'static')
                    placeholder.css("position", "relative"); // for positioning labels and overlay

                getCanvasDimensions();
                
                canvas = makeCanvas(true, "base");
                overlay = makeCanvas(false, "overlay"); // overlay canvas for interactive features

                reused = false;
            }
            else {
                // reuse existing elements

                canvas = existingCanvas.get(0);
                overlay = existingOverlay.get(0);

                reused = true;
            }

            ctx = canvas.getContext("2d");
            octx = overlay.getContext("2d");

            // we include the canvas in the event holder too, because IE 7
            // sometimes has trouble with the stacking order
            eventHolder = $([overlay, canvas]);

            if (reused) {
                // run shutdown in the old plot object
                placeholder.data("plot").shutdown();

                // reset reused canvases
                plot.resize();
                
                // make sure overlay pixels are cleared (canvas is cleared when we redraw)
                octx.clearRect(0, 0, canvasWidth, canvasHeight);
                
                // then whack any remaining obvious garbage left
                eventHolder.unbind();
                placeholder.children().not([canvas, overlay]).remove();
            }

            // save in case we get replotted
            placeholder.data("plot", plot);
        }

        function bindEvents() {
            // bind events
            if (options.grid.hoverable) {
                eventHolder.mousemove(onMouseMove);
                eventHolder.mouseleave(onMouseLeave);
            }

            if (options.grid.clickable)
                eventHolder.click(onClick);

            executeHooks(hooks.bindEvents, [eventHolder]);
        }

        function shutdown() {
            if (redrawTimeout)
                clearTimeout(redrawTimeout);
            
            eventHolder.unbind("mousemove", onMouseMove);
            eventHolder.unbind("mouseleave", onMouseLeave);
            eventHolder.unbind("click", onClick);
            
            executeHooks(hooks.shutdown, [eventHolder]);
        }

        function setTransformationHelpers(axis) {
            // set helper functions on the axis, assumes plot area
            // has been computed already
            
            function identity(x) { return x; }
            
            var s, m, t = axis.options.transform || identity,
                it = axis.options.inverseTransform;
            
            // precompute how much the axis is scaling a point
            // in canvas space
            if (axis.direction == "x") {
                s = axis.scale = plotWidth / Math.abs(t(axis.max) - t(axis.min));
                m = Math.min(t(axis.max), t(axis.min));
            }
            else {
                s = axis.scale = plotHeight / Math.abs(t(axis.max) - t(axis.min));
                s = -s;
                m = Math.max(t(axis.max), t(axis.min));
            }

            // data point to canvas coordinate
            if (t == identity) // slight optimization
                axis.p2c = function (p) { return (p - m) * s; };
            else
                axis.p2c = function (p) { return (t(p) - m) * s; };
            // canvas coordinate to data point
            if (!it)
                axis.c2p = function (c) { return m + c / s; };
            else
                axis.c2p = function (c) { return it(m + c / s); };
        }

        function measureTickLabels(axis) {
            var opts = axis.options, i, ticks = axis.ticks || [], labels = [],
                l, w = opts.labelWidth, h = opts.labelHeight, dummyDiv;

            function makeDummyDiv(labels, width) {
                return $('<div style="position:absolute;top:-10000px;' + width + 'font-size:smaller">' +
                         '<div class="' + axis.direction + 'Axis ' + axis.direction + axis.n + 'Axis">'
                         + labels.join("") + '</div></div>')
                    .appendTo(placeholder);
            }
            
            if (axis.direction == "x") {
                // to avoid measuring the widths of the labels (it's slow), we
                // construct fixed-size boxes and put the labels inside
                // them, we don't need the exact figures and the
                // fixed-size box content is easy to center
                if (w == null)
                    w = Math.floor(canvasWidth / (ticks.length > 0 ? ticks.length : 1));

                // measure x label heights
                if (h == null) {
                    labels = [];
                    for (i = 0; i < ticks.length; ++i) {
                        l = ticks[i].label;
                        if (l)
                            labels.push('<div class="tickLabel" style="float:left;width:' + w + 'px">' + l + '</div>');
                    }

                    if (labels.length > 0) {
                        // stick them all in the same div and measure
                        // collective height
                        labels.push('<div style="clear:left"></div>');
                        dummyDiv = makeDummyDiv(labels, "width:10000px;");
                        h = dummyDiv.height();
                        dummyDiv.remove();
                    }
                }
            }
            else if (w == null || h == null) {
                // calculate y label dimensions
                for (i = 0; i < ticks.length; ++i) {
                    l = ticks[i].label;
                    if (l)
                        labels.push('<div class="tickLabel">' + l + '</div>');
                }
                
                if (labels.length > 0) {
                    dummyDiv = makeDummyDiv(labels, "");
                    if (w == null)
                        w = dummyDiv.children().width();
                    if (h == null)
                        h = dummyDiv.find("div.tickLabel").height();
                    dummyDiv.remove();
                }
            }

            if (w == null)
                w = 0;
            if (h == null)
                h = 0;

            axis.labelWidth = w;
            axis.labelHeight = h;
        }

        function allocateAxisBoxFirstPhase(axis) {
            // find the bounding box of the axis by looking at label
            // widths/heights and ticks, make room by diminishing the
            // plotOffset

            var lw = axis.labelWidth,
                lh = axis.labelHeight,
                pos = axis.options.position,
                tickLength = axis.options.tickLength,
                axismargin = options.grid.axisMargin,
                padding = options.grid.labelMargin,
                all = axis.direction == "x" ? xaxes : yaxes,
                index;

            // determine axis margin
            var samePosition = $.grep(all, function (a) {
                return a && a.options.position == pos && a.reserveSpace;
            });
            if ($.inArray(axis, samePosition) == samePosition.length - 1)
                axismargin = 0; // outermost

            // determine tick length - if we're innermost, we can use "full"
            if (tickLength == null)
                tickLength = "full";

            var sameDirection = $.grep(all, function (a) {
                return a && a.reserveSpace;
            });

            var innermost = $.inArray(axis, sameDirection) == 0;
            if (!innermost && tickLength == "full")
                tickLength = 5;
                
            if (!isNaN(+tickLength))
                padding += +tickLength;

            // compute box
            if (axis.direction == "x") {
                lh += padding;
                
                if (pos == "bottom") {
                    plotOffset.bottom += lh + axismargin;
                    axis.box = { top: canvasHeight - plotOffset.bottom, height: lh };
                }
                else {
                    axis.box = { top: plotOffset.top + axismargin, height: lh };
                    plotOffset.top += lh + axismargin;
                }
            }
            else {
                lw += padding;
                
                if (pos == "left") {
                    axis.box = { left: plotOffset.left + axismargin, width: lw };
                    plotOffset.left += lw + axismargin;
                }
                else {
                    plotOffset.right += lw + axismargin;
                    axis.box = { left: canvasWidth - plotOffset.right, width: lw };
                }
            }

             // save for future reference
            axis.position = pos;
            axis.tickLength = tickLength;
            axis.box.padding = padding;
            axis.innermost = innermost;
        }

        function allocateAxisBoxSecondPhase(axis) {
            // set remaining bounding box coordinates
            if (axis.direction == "x") {
                axis.box.left = plotOffset.left;
                axis.box.width = plotWidth;
            }
            else {
                axis.box.top = plotOffset.top;
                axis.box.height = plotHeight;
            }
        }
        
        function setupGrid() {
            var i, axes = allAxes();

            // first calculate the plot and axis box dimensions

            $.each(axes, function (_, axis) {
                axis.show = axis.options.show;
                if (axis.show == null)
                    axis.show = axis.used; // by default an axis is visible if it's got data
                
                axis.reserveSpace = axis.show || axis.options.reserveSpace;

                setRange(axis);
            });

            allocatedAxes = $.grep(axes, function (axis) { return axis.reserveSpace; });

            plotOffset.left = plotOffset.right = plotOffset.top = plotOffset.bottom = 0;
            if (options.grid.show) {
                $.each(allocatedAxes, function (_, axis) {
                    // make the ticks
                    setupTickGeneration(axis);
                    setTicks(axis);
                    snapRangeToTicks(axis, axis.ticks);

                    // find labelWidth/Height for axis
                    measureTickLabels(axis);
                });

                // with all dimensions in house, we can compute the
                // axis boxes, start from the outside (reverse order)
                for (i = allocatedAxes.length - 1; i >= 0; --i)
                    allocateAxisBoxFirstPhase(allocatedAxes[i]);

                // make sure we've got enough space for things that
                // might stick out
                var minMargin = options.grid.minBorderMargin;
                if (minMargin == null) {
                    minMargin = 0;
                    for (i = 0; i < series.length; ++i)
                        minMargin = Math.max(minMargin, series[i].points.radius + series[i].points.lineWidth/2);
                }
                    
                for (var a in plotOffset) {
                    plotOffset[a] += options.grid.borderWidth;
                    plotOffset[a] = Math.max(minMargin, plotOffset[a]);
                }
            }
            
            plotWidth = canvasWidth - plotOffset.left - plotOffset.right;
            plotHeight = canvasHeight - plotOffset.bottom - plotOffset.top;

            // now we got the proper plotWidth/Height, we can compute the scaling
            $.each(axes, function (_, axis) {
                setTransformationHelpers(axis);
            });

            if (options.grid.show) {
                $.each(allocatedAxes, function (_, axis) {
                    allocateAxisBoxSecondPhase(axis);
                });

                insertAxisLabels();
            }
            
            insertLegend();
        }
        
        function setRange(axis) {
            var opts = axis.options,
                min = +(opts.min != null ? opts.min : axis.datamin),
                max = +(opts.max != null ? opts.max : axis.datamax),
                delta = max - min;

            if (delta == 0.0) {
                // degenerate case
                var widen = max == 0 ? 1 : 0.01;

                if (opts.min == null)
                    min -= widen;
                // always widen max if we couldn't widen min to ensure we
                // don't fall into min == max which doesn't work
                if (opts.max == null || opts.min != null)
                    max += widen;
            }
            else {
                // consider autoscaling
                var margin = opts.autoscaleMargin;
                if (margin != null) {
                    if (opts.min == null) {
                        min -= delta * margin;
                        // make sure we don't go below zero if all values
                        // are positive
                        if (min < 0 && axis.datamin != null && axis.datamin >= 0)
                            min = 0;
                    }
                    if (opts.max == null) {
                        max += delta * margin;
                        if (max > 0 && axis.datamax != null && axis.datamax <= 0)
                            max = 0;
                    }
                }
            }
            axis.min = min;
            axis.max = max;
        }

        function setupTickGeneration(axis) {
            var opts = axis.options;
                
            // estimate number of ticks
            var noTicks;
            if (typeof opts.ticks == "number" && opts.ticks > 0)
                noTicks = opts.ticks;
            else
                // heuristic based on the model a*sqrt(x) fitted to
                // some data points that seemed reasonable
                noTicks = 0.3 * Math.sqrt(axis.direction == "x" ? canvasWidth : canvasHeight);

            var delta = (axis.max - axis.min) / noTicks,
                size, generator, unit, formatter, i, magn, norm;

            if (opts.mode == "time") {
                // pretty handling of time
                
                // map of app. size of time units in milliseconds
                var timeUnitSize = {
                    "second": 1000,
                    "minute": 60 * 1000,
                    "hour": 60 * 60 * 1000,
                    "day": 24 * 60 * 60 * 1000,
                    "month": 30 * 24 * 60 * 60 * 1000,
                    "year": 365.2425 * 24 * 60 * 60 * 1000
                };


                // the allowed tick sizes, after 1 year we use
                // an integer algorithm
                var spec = [
                    [1, "second"], [2, "second"], [5, "second"], [10, "second"],
                    [30, "second"], 
                    [1, "minute"], [2, "minute"], [5, "minute"], [10, "minute"],
                    [30, "minute"], 
                    [1, "hour"], [2, "hour"], [4, "hour"],
                    [8, "hour"], [12, "hour"],
                    [1, "day"], [2, "day"], [3, "day"],
                    [0.25, "month"], [0.5, "month"], [1, "month"],
                    [2, "month"], [3, "month"], [6, "month"],
                    [1, "year"]
                ];

                var minSize = 0;
                if (opts.minTickSize != null) {
                    if (typeof opts.tickSize == "number")
                        minSize = opts.tickSize;
                    else
                        minSize = opts.minTickSize[0] * timeUnitSize[opts.minTickSize[1]];
                }

                for (var i = 0; i < spec.length - 1; ++i)
                    if (delta < (spec[i][0] * timeUnitSize[spec[i][1]]
                                 + spec[i + 1][0] * timeUnitSize[spec[i + 1][1]]) / 2
                       && spec[i][0] * timeUnitSize[spec[i][1]] >= minSize)
                        break;
                size = spec[i][0];
                unit = spec[i][1];
                
                // special-case the possibility of several years
                if (unit == "year") {
                    magn = Math.pow(10, Math.floor(Math.log(delta / timeUnitSize.year) / Math.LN10));
                    norm = (delta / timeUnitSize.year) / magn;
                    if (norm < 1.5)
                        size = 1;
                    else if (norm < 3)
                        size = 2;
                    else if (norm < 7.5)
                        size = 5;
                    else
                        size = 10;

                    size *= magn;
                }

                axis.tickSize = opts.tickSize || [size, unit];
                
                generator = function(axis) {
                    var ticks = [],
                        tickSize = axis.tickSize[0], unit = axis.tickSize[1],
                        d = new Date(axis.min);
                    
                    var step = tickSize * timeUnitSize[unit];

                    if (unit == "second")
                        d.setUTCSeconds(floorInBase(d.getUTCSeconds(), tickSize));
                    if (unit == "minute")
                        d.setUTCMinutes(floorInBase(d.getUTCMinutes(), tickSize));
                    if (unit == "hour")
                        d.setUTCHours(floorInBase(d.getUTCHours(), tickSize));
                    if (unit == "month")
                        d.setUTCMonth(floorInBase(d.getUTCMonth(), tickSize));
                    if (unit == "year")
                        d.setUTCFullYear(floorInBase(d.getUTCFullYear(), tickSize));
                    
                    // reset smaller components
                    d.setUTCMilliseconds(0);
                    if (step >= timeUnitSize.minute)
                        d.setUTCSeconds(0);
                    if (step >= timeUnitSize.hour)
                        d.setUTCMinutes(0);
                    if (step >= timeUnitSize.day)
                        d.setUTCHours(0);
                    if (step >= timeUnitSize.day * 4)
                        d.setUTCDate(1);
                    if (step >= timeUnitSize.year)
                        d.setUTCMonth(0);


                    var carry = 0, v = Number.NaN, prev;
                    do {
                        prev = v;
                        v = d.getTime();
                        ticks.push(v);
                        if (unit == "month") {
                            if (tickSize < 1) {
                                // a bit complicated - we'll divide the month
                                // up but we need to take care of fractions
                                // so we don't end up in the middle of a day
                                d.setUTCDate(1);
                                var start = d.getTime();
                                d.setUTCMonth(d.getUTCMonth() + 1);
                                var end = d.getTime();
                                d.setTime(v + carry * timeUnitSize.hour + (end - start) * tickSize);
                                carry = d.getUTCHours();
                                d.setUTCHours(0);
                            }
                            else
                                d.setUTCMonth(d.getUTCMonth() + tickSize);
                        }
                        else if (unit == "year") {
                            d.setUTCFullYear(d.getUTCFullYear() + tickSize);
                        }
                        else
                            d.setTime(v + step);
                    } while (v < axis.max && v != prev);

                    return ticks;
                };

                formatter = function (v, axis) {
                    var d = new Date(v);

                    // first check global format
                    if (opts.timeformat != null)
                        return $.plot.formatDate(d, opts.timeformat, opts.monthNames);
                    
                    var t = axis.tickSize[0] * timeUnitSize[axis.tickSize[1]];
                    var span = axis.max - axis.min;
                    var suffix = (opts.twelveHourClock) ? " %p" : "";
                    
                    if (t < timeUnitSize.minute)
                        fmt = "%h:%M:%S" + suffix;
                    else if (t < timeUnitSize.day) {
                        if (span < 2 * timeUnitSize.day)
                            fmt = "%h:%M" + suffix;
                        else
                            fmt = "%b %d %h:%M" + suffix;
                    }
                    else if (t < timeUnitSize.month)
                        fmt = "%b %d";
                    else if (t < timeUnitSize.year) {
                        if (span < timeUnitSize.year)
                            fmt = "%b";
                        else
                            fmt = "%b %y";
                    }
                    else
                        fmt = "%y";
                    
                    return $.plot.formatDate(d, fmt, opts.monthNames);
                };
            }
            else {
                // pretty rounding of base-10 numbers
                var maxDec = opts.tickDecimals;
                var dec = -Math.floor(Math.log(delta) / Math.LN10);
                if (maxDec != null && dec > maxDec)
                    dec = maxDec;

                magn = Math.pow(10, -dec);
                norm = delta / magn; // norm is between 1.0 and 10.0
                
                if (norm < 1.5)
                    size = 1;
                else if (norm < 3) {
                    size = 2;
                    // special case for 2.5, requires an extra decimal
                    if (norm > 2.25 && (maxDec == null || dec + 1 <= maxDec)) {
                        size = 2.5;
                        ++dec;
                    }
                }
                else if (norm < 7.5)
                    size = 5;
                else
                    size = 10;

                size *= magn;
                
                if (opts.minTickSize != null && size < opts.minTickSize)
                    size = opts.minTickSize;

                axis.tickDecimals = Math.max(0, maxDec != null ? maxDec : dec);
                axis.tickSize = opts.tickSize || size;

                generator = function (axis) {
                    var ticks = [];

                    // spew out all possible ticks
                    var start = floorInBase(axis.min, axis.tickSize),
                        i = 0, v = Number.NaN, prev;
                    do {
                        prev = v;
                        v = start + i * axis.tickSize;
                        ticks.push(v);
                        ++i;
                    } while (v < axis.max && v != prev);
                    return ticks;
                };

                formatter = function (v, axis) {
                    return v.toFixed(axis.tickDecimals);
                };
            }

            if (opts.alignTicksWithAxis != null) {
                var otherAxis = (axis.direction == "x" ? xaxes : yaxes)[opts.alignTicksWithAxis - 1];
                if (otherAxis && otherAxis.used && otherAxis != axis) {
                    // consider snapping min/max to outermost nice ticks
                    var niceTicks = generator(axis);
                    if (niceTicks.length > 0) {
                        if (opts.min == null)
                            axis.min = Math.min(axis.min, niceTicks[0]);
                        if (opts.max == null && niceTicks.length > 1)
                            axis.max = Math.max(axis.max, niceTicks[niceTicks.length - 1]);
                    }
                    
                    generator = function (axis) {
                        // copy ticks, scaled to this axis
                        var ticks = [], v, i;
                        for (i = 0; i < otherAxis.ticks.length; ++i) {
                            v = (otherAxis.ticks[i].v - otherAxis.min) / (otherAxis.max - otherAxis.min);
                            v = axis.min + v * (axis.max - axis.min);
                            ticks.push(v);
                        }
                        return ticks;
                    };
                    
                    // we might need an extra decimal since forced
                    // ticks don't necessarily fit naturally
                    if (axis.mode != "time" && opts.tickDecimals == null) {
                        var extraDec = Math.max(0, -Math.floor(Math.log(delta) / Math.LN10) + 1),
                            ts = generator(axis);

                        // only proceed if the tick interval rounded
                        // with an extra decimal doesn't give us a
                        // zero at end
                        if (!(ts.length > 1 && /\..*0$/.test((ts[1] - ts[0]).toFixed(extraDec))))
                            axis.tickDecimals = extraDec;
                    }
                }
            }

            axis.tickGenerator = generator;
            if ($.isFunction(opts.tickFormatter))
                axis.tickFormatter = function (v, axis) { return "" + opts.tickFormatter(v, axis); };
            else
                axis.tickFormatter = formatter;
        }
        
        function setTicks(axis) {
            var oticks = axis.options.ticks, ticks = [];
            if (oticks == null || (typeof oticks == "number" && oticks > 0))
                ticks = axis.tickGenerator(axis);
            else if (oticks) {
                if ($.isFunction(oticks))
                    // generate the ticks
                    ticks = oticks({ min: axis.min, max: axis.max });
                else
                    ticks = oticks;
            }

            // clean up/labelify the supplied ticks, copy them over
            var i, v;
            axis.ticks = [];
            for (i = 0; i < ticks.length; ++i) {
                var label = null;
                var t = ticks[i];
                if (typeof t == "object") {
                    v = +t[0];
                    if (t.length > 1)
                        label = t[1];
                }
                else
                    v = +t;
                if (label == null)
                    label = axis.tickFormatter(v, axis);
                if (!isNaN(v))
                    axis.ticks.push({ v: v, label: label });
            }
        }

        function snapRangeToTicks(axis, ticks) {
            if (axis.options.autoscaleMargin && ticks.length > 0) {
                // snap to ticks
                if (axis.options.min == null)
                    axis.min = Math.min(axis.min, ticks[0].v);
                if (axis.options.max == null && ticks.length > 1)
                    axis.max = Math.max(axis.max, ticks[ticks.length - 1].v);
            }
        }
      
        function draw() {
            ctx.clearRect(0, 0, canvasWidth, canvasHeight);

            var grid = options.grid;

            // draw background, if any
            if (grid.show && grid.backgroundColor)
                drawBackground();
            
            if (grid.show && !grid.aboveData)
                drawGrid();

            for (var i = 0; i < series.length; ++i) {
                executeHooks(hooks.drawSeries, [ctx, series[i]]);
                drawSeries(series[i]);
            }

            executeHooks(hooks.draw, [ctx]);
            
            if (grid.show && grid.aboveData)
                drawGrid();
        }

        function extractRange(ranges, coord) {
            var axis, from, to, key, axes = allAxes();

            for (i = 0; i < axes.length; ++i) {
                axis = axes[i];
                if (axis.direction == coord) {
                    key = coord + axis.n + "axis";
                    if (!ranges[key] && axis.n == 1)
                        key = coord + "axis"; // support x1axis as xaxis
                    if (ranges[key]) {
                        from = ranges[key].from;
                        to = ranges[key].to;
                        break;
                    }
                }
            }

            // backwards-compat stuff - to be removed in future
            if (!ranges[key]) {
                axis = coord == "x" ? xaxes[0] : yaxes[0];
                from = ranges[coord + "1"];
                to = ranges[coord + "2"];
            }

            // auto-reverse as an added bonus
            if (from != null && to != null && from > to) {
                var tmp = from;
                from = to;
                to = tmp;
            }
            
            return { from: from, to: to, axis: axis };
        }
        
        function drawBackground() {
            ctx.save();
            ctx.translate(plotOffset.left, plotOffset.top);

            ctx.fillStyle = getColorOrGradient(options.grid.backgroundColor, plotHeight, 0, "rgba(255, 255, 255, 0)");
            ctx.fillRect(0, 0, plotWidth, plotHeight);
            ctx.restore();
        }

        function drawGrid() {
            var i;
            
            ctx.save();
            ctx.translate(plotOffset.left, plotOffset.top);

            // draw markings
            var markings = options.grid.markings;
            if (markings) {
                if ($.isFunction(markings)) {
                    var axes = plot.getAxes();
                    // xmin etc. is backwards compatibility, to be
                    // removed in the future
                    axes.xmin = axes.xaxis.min;
                    axes.xmax = axes.xaxis.max;
                    axes.ymin = axes.yaxis.min;
                    axes.ymax = axes.yaxis.max;
                    
                    markings = markings(axes);
                }

                for (i = 0; i < markings.length; ++i) {
                    var m = markings[i],
                        xrange = extractRange(m, "x"),
                        yrange = extractRange(m, "y");

                    // fill in missing
                    if (xrange.from == null)
                        xrange.from = xrange.axis.min;
                    if (xrange.to == null)
                        xrange.to = xrange.axis.max;
                    if (yrange.from == null)
                        yrange.from = yrange.axis.min;
                    if (yrange.to == null)
                        yrange.to = yrange.axis.max;

                    // clip
                    if (xrange.to < xrange.axis.min || xrange.from > xrange.axis.max ||
                        yrange.to < yrange.axis.min || yrange.from > yrange.axis.max)
                        continue;

                    xrange.from = Math.max(xrange.from, xrange.axis.min);
                    xrange.to = Math.min(xrange.to, xrange.axis.max);
                    yrange.from = Math.max(yrange.from, yrange.axis.min);
                    yrange.to = Math.min(yrange.to, yrange.axis.max);

                    if (xrange.from == xrange.to && yrange.from == yrange.to)
                        continue;

                    // then draw
                    xrange.from = xrange.axis.p2c(xrange.from);
                    xrange.to = xrange.axis.p2c(xrange.to);
                    yrange.from = yrange.axis.p2c(yrange.from);
                    yrange.to = yrange.axis.p2c(yrange.to);
                    
                    if (xrange.from == xrange.to || yrange.from == yrange.to) {
                        // draw line
                        ctx.beginPath();
                        ctx.strokeStyle = m.color || options.grid.markingsColor;
                        ctx.lineWidth = m.lineWidth || options.grid.markingsLineWidth;
                        ctx.moveTo(xrange.from, yrange.from);
                        ctx.lineTo(xrange.to, yrange.to);
                        ctx.stroke();
                    }
                    else {
                        // fill area
                        ctx.fillStyle = m.color || options.grid.markingsColor;
                        ctx.fillRect(xrange.from, yrange.to,
                                     xrange.to - xrange.from,
                                     yrange.from - yrange.to);
                    }
                }
            }
            
            // draw the ticks
            var axes = allAxes(), bw = options.grid.borderWidth;

            for (var j = 0; j < axes.length; ++j) {
                var axis = axes[j], box = axis.box,
                    t = axis.tickLength, x, y, xoff, yoff;
                if (!axis.show || axis.ticks.length == 0)
                    continue
                
                ctx.strokeStyle = axis.options.tickColor || $.color.parse(axis.options.color).scale('a', 0.22).toString();
                ctx.lineWidth = 1;

                // find the edges
                if (axis.direction == "x") {
                    x = 0;
                    if (t == "full")
                        y = (axis.position == "top" ? 0 : plotHeight);
                    else
                        y = box.top - plotOffset.top + (axis.position == "top" ? box.height : 0);
                }
                else {
                    y = 0;
                    if (t == "full")
                        x = (axis.position == "left" ? 0 : plotWidth);
                    else
                        x = box.left - plotOffset.left + (axis.position == "left" ? box.width : 0);
                }
                
                // draw tick bar
                if (!axis.innermost) {
                    ctx.beginPath();
                    xoff = yoff = 0;
                    if (axis.direction == "x")
                        xoff = plotWidth;
                    else
                        yoff = plotHeight;
                    
                    if (ctx.lineWidth == 1) {
                        x = Math.floor(x) + 0.5;
                        y = Math.floor(y) + 0.5;
                    }

                    ctx.moveTo(x, y);
                    ctx.lineTo(x + xoff, y + yoff);
                    ctx.stroke();
                }

                // draw ticks
                ctx.beginPath();
                for (i = 0; i < axis.ticks.length; ++i) {
                    var v = axis.ticks[i].v;
                    
                    xoff = yoff = 0;

                    if (v < axis.min || v > axis.max
                        // skip those lying on the axes if we got a border
                        || (t == "full" && bw > 0
                            && (v == axis.min || v == axis.max)))
                        continue;

                    if (axis.direction == "x") {
                        x = axis.p2c(v);
                        yoff = t == "full" ? -plotHeight : t;
                        
                        if (axis.position == "top")
                            yoff = -yoff;
                    }
                    else {
                        y = axis.p2c(v);
                        xoff = t == "full" ? -plotWidth : t;
                        
                        if (axis.position == "left")
                            xoff = -xoff;
                    }

                    if (ctx.lineWidth == 1) {
                        if (axis.direction == "x")
                            x = Math.floor(x) + 0.5;
                        else
                            y = Math.floor(y) + 0.5;
                    }

                    ctx.moveTo(x, y);
                    ctx.lineTo(x + xoff, y + yoff);
                }
                
                ctx.stroke();
            }
            
            
            // draw border
            if (bw) {
                ctx.lineWidth = bw;
                ctx.strokeStyle = options.grid.borderColor;
                ctx.strokeRect(-bw/2, -bw/2, plotWidth + bw, plotHeight + bw);
            }

            ctx.restore();
        }

        function insertAxisLabels() {
            placeholder.find(".tickLabels").remove();
            
            var html = ['<div class="tickLabels" style="font-size:smaller">'];

            var axes = allAxes();
            for (var j = 0; j < axes.length; ++j) {
                var axis = axes[j], box = axis.box;
                if (!axis.show)
                    continue;
                //debug: html.push('<div style="position:absolute;opacity:0.10;background-color:red;left:' + box.left + 'px;top:' + box.top + 'px;width:' + box.width +  'px;height:' + box.height + 'px"></div>')
                html.push('<div class="' + axis.direction + 'Axis ' + axis.direction + axis.n + 'Axis" style="color:' + axis.options.color + '">');
                for (var i = 0; i < axis.ticks.length; ++i) {
                    var tick = axis.ticks[i];
                    if (!tick.label || tick.v < axis.min || tick.v > axis.max)
                        continue;

                    var pos = {}, align;
                    
                    if (axis.direction == "x") {
                        align = "center";
                        pos.left = Math.round(plotOffset.left + axis.p2c(tick.v) - axis.labelWidth/2);
                        if (axis.position == "bottom")
                            pos.top = box.top + box.padding;
                        else
                            pos.bottom = canvasHeight - (box.top + box.height - box.padding);
                    }
                    else {
                        pos.top = Math.round(plotOffset.top + axis.p2c(tick.v) - axis.labelHeight/2);
                        if (axis.position == "left") {
                            pos.right = canvasWidth - (box.left + box.width - box.padding)
                            align = "right";
                        }
                        else {
                            pos.left = box.left + box.padding;
                            align = "left";
                        }
                    }

                    pos.width = axis.labelWidth;

                    var style = ["position:absolute", "text-align:" + align ];
                    for (var a in pos)
                        style.push(a + ":" + pos[a] + "px")
                    
                    html.push('<div class="tickLabel" style="' + style.join(';') + '">' + tick.label + '</div>');
                }
                html.push('</div>');
            }

            html.push('</div>');

            placeholder.append(html.join(""));
        }

        function drawSeries(series) {
            if (series.lines.show)
                drawSeriesLines(series);
            if (series.bars.show)
                drawSeriesBars(series);
            if (series.points.show)
                drawSeriesPoints(series);
        }
        
        function drawSeriesLines(series) {
            function plotLine(datapoints, xoffset, yoffset, axisx, axisy) {
                var points = datapoints.points,
                    ps = datapoints.pointsize,
                    prevx = null, prevy = null;
                
                ctx.beginPath();
                for (var i = ps; i < points.length; i += ps) {
                    var x1 = points[i - ps], y1 = points[i - ps + 1],
                        x2 = points[i], y2 = points[i + 1];
                    
                    if (x1 == null || x2 == null)
                        continue;

                    // clip with ymin
                    if (y1 <= y2 && y1 < axisy.min) {
                        if (y2 < axisy.min)
                            continue;   // line segment is outside
                        // compute new intersection point
                        x1 = (axisy.min - y1) / (y2 - y1) * (x2 - x1) + x1;
                        y1 = axisy.min;
                    }
                    else if (y2 <= y1 && y2 < axisy.min) {
                        if (y1 < axisy.min)
                            continue;
                        x2 = (axisy.min - y1) / (y2 - y1) * (x2 - x1) + x1;
                        y2 = axisy.min;
                    }

                    // clip with ymax
                    if (y1 >= y2 && y1 > axisy.max) {
                        if (y2 > axisy.max)
                            continue;
                        x1 = (axisy.max - y1) / (y2 - y1) * (x2 - x1) + x1;
                        y1 = axisy.max;
                    }
                    else if (y2 >= y1 && y2 > axisy.max) {
                        if (y1 > axisy.max)
                            continue;
                        x2 = (axisy.max - y1) / (y2 - y1) * (x2 - x1) + x1;
                        y2 = axisy.max;
                    }

                    // clip with xmin
                    if (x1 <= x2 && x1 < axisx.min) {
                        if (x2 < axisx.min)
                            continue;
                        y1 = (axisx.min - x1) / (x2 - x1) * (y2 - y1) + y1;
                        x1 = axisx.min;
                    }
                    else if (x2 <= x1 && x2 < axisx.min) {
                        if (x1 < axisx.min)
                            continue;
                        y2 = (axisx.min - x1) / (x2 - x1) * (y2 - y1) + y1;
                        x2 = axisx.min;
                    }

                    // clip with xmax
                    if (x1 >= x2 && x1 > axisx.max) {
                        if (x2 > axisx.max)
                            continue;
                        y1 = (axisx.max - x1) / (x2 - x1) * (y2 - y1) + y1;
                        x1 = axisx.max;
                    }
                    else if (x2 >= x1 && x2 > axisx.max) {
                        if (x1 > axisx.max)
                            continue;
                        y2 = (axisx.max - x1) / (x2 - x1) * (y2 - y1) + y1;
                        x2 = axisx.max;
                    }

                    if (x1 != prevx || y1 != prevy)
                        ctx.moveTo(axisx.p2c(x1) + xoffset, axisy.p2c(y1) + yoffset);
                    
                    prevx = x2;
                    prevy = y2;
                    ctx.lineTo(axisx.p2c(x2) + xoffset, axisy.p2c(y2) + yoffset);
                }
                ctx.stroke();
            }

            function plotLineArea(datapoints, axisx, axisy) {
                var points = datapoints.points,
                    ps = datapoints.pointsize,
                    bottom = Math.min(Math.max(0, axisy.min), axisy.max),
                    i = 0, top, areaOpen = false,
                    ypos = 1, segmentStart = 0, segmentEnd = 0;

                // we process each segment in two turns, first forward
                // direction to sketch out top, then once we hit the
                // end we go backwards to sketch the bottom
                while (true) {
                    if (ps > 0 && i > points.length + ps)
                        break;

                    i += ps; // ps is negative if going backwards

                    var x1 = points[i - ps],
                        y1 = points[i - ps + ypos],
                        x2 = points[i], y2 = points[i + ypos];

                    if (areaOpen) {
                        if (ps > 0 && x1 != null && x2 == null) {
                            // at turning point
                            segmentEnd = i;
                            ps = -ps;
                            ypos = 2;
                            continue;
                        }

                        if (ps < 0 && i == segmentStart + ps) {
                            // done with the reverse sweep
                            ctx.fill();
                            areaOpen = false;
                            ps = -ps;
                            ypos = 1;
                            i = segmentStart = segmentEnd + ps;
                            continue;
                        }
                    }

                    if (x1 == null || x2 == null)
                        continue;

                    // clip x values
                    
                    // clip with xmin
                    if (x1 <= x2 && x1 < axisx.min) {
                        if (x2 < axisx.min)
                            continue;
                        y1 = (axisx.min - x1) / (x2 - x1) * (y2 - y1) + y1;
                        x1 = axisx.min;
                    }
                    else if (x2 <= x1 && x2 < axisx.min) {
                        if (x1 < axisx.min)
                            continue;
                        y2 = (axisx.min - x1) / (x2 - x1) * (y2 - y1) + y1;
                        x2 = axisx.min;
                    }

                    // clip with xmax
                    if (x1 >= x2 && x1 > axisx.max) {
                        if (x2 > axisx.max)
                            continue;
                        y1 = (axisx.max - x1) / (x2 - x1) * (y2 - y1) + y1;
                        x1 = axisx.max;
                    }
                    else if (x2 >= x1 && x2 > axisx.max) {
                        if (x1 > axisx.max)
                            continue;
                        y2 = (axisx.max - x1) / (x2 - x1) * (y2 - y1) + y1;
                        x2 = axisx.max;
                    }

                    if (!areaOpen) {
                        // open area
                        ctx.beginPath();
                        ctx.moveTo(axisx.p2c(x1), axisy.p2c(bottom));
                        areaOpen = true;
                    }
                    
                    // now first check the case where both is outside
                    if (y1 >= axisy.max && y2 >= axisy.max) {
                        ctx.lineTo(axisx.p2c(x1), axisy.p2c(axisy.max));
                        ctx.lineTo(axisx.p2c(x2), axisy.p2c(axisy.max));
                        continue;
                    }
                    else if (y1 <= axisy.min && y2 <= axisy.min) {
                        ctx.lineTo(axisx.p2c(x1), axisy.p2c(axisy.min));
                        ctx.lineTo(axisx.p2c(x2), axisy.p2c(axisy.min));
                        continue;
                    }
                    
                    // else it's a bit more complicated, there might
                    // be a flat maxed out rectangle first, then a
                    // triangular cutout or reverse; to find these
                    // keep track of the current x values
                    var x1old = x1, x2old = x2;

                    // clip the y values, without shortcutting, we
                    // go through all cases in turn
                    
                    // clip with ymin
                    if (y1 <= y2 && y1 < axisy.min && y2 >= axisy.min) {
                        x1 = (axisy.min - y1) / (y2 - y1) * (x2 - x1) + x1;
                        y1 = axisy.min;
                    }
                    else if (y2 <= y1 && y2 < axisy.min && y1 >= axisy.min) {
                        x2 = (axisy.min - y1) / (y2 - y1) * (x2 - x1) + x1;
                        y2 = axisy.min;
                    }

                    // clip with ymax
                    if (y1 >= y2 && y1 > axisy.max && y2 <= axisy.max) {
                        x1 = (axisy.max - y1) / (y2 - y1) * (x2 - x1) + x1;
                        y1 = axisy.max;
                    }
                    else if (y2 >= y1 && y2 > axisy.max && y1 <= axisy.max) {
                        x2 = (axisy.max - y1) / (y2 - y1) * (x2 - x1) + x1;
                        y2 = axisy.max;
                    }

                    // if the x value was changed we got a rectangle
                    // to fill
                    if (x1 != x1old) {
                        ctx.lineTo(axisx.p2c(x1old), axisy.p2c(y1));
                        // it goes to (x1, y1), but we fill that below
                    }
                    
                    // fill triangular section, this sometimes result
                    // in redundant points if (x1, y1) hasn't changed
                    // from previous line to, but we just ignore that
                    ctx.lineTo(axisx.p2c(x1), axisy.p2c(y1));
                    ctx.lineTo(axisx.p2c(x2), axisy.p2c(y2));

                    // fill the other rectangle if it's there
                    if (x2 != x2old) {
                        ctx.lineTo(axisx.p2c(x2), axisy.p2c(y2));
                        ctx.lineTo(axisx.p2c(x2old), axisy.p2c(y2));
                    }
                }
            }

            ctx.save();
            ctx.translate(plotOffset.left, plotOffset.top);
            ctx.lineJoin = "round";

            var lw = series.lines.lineWidth,
                sw = series.shadowSize;
            // FIXME: consider another form of shadow when filling is turned on
            if (lw > 0 && sw > 0) {
                // draw shadow as a thick and thin line with transparency
                ctx.lineWidth = sw;
                ctx.strokeStyle = "rgba(0,0,0,0.1)";
                // position shadow at angle from the mid of line
                var angle = Math.PI/18;
                plotLine(series.datapoints, Math.sin(angle) * (lw/2 + sw/2), Math.cos(angle) * (lw/2 + sw/2), series.xaxis, series.yaxis);
                ctx.lineWidth = sw/2;
                plotLine(series.datapoints, Math.sin(angle) * (lw/2 + sw/4), Math.cos(angle) * (lw/2 + sw/4), series.xaxis, series.yaxis);
            }

            ctx.lineWidth = lw;
            ctx.strokeStyle = series.color;
            var fillStyle = getFillStyle(series.lines, series.color, 0, plotHeight);
            if (fillStyle) {
                ctx.fillStyle = fillStyle;
                plotLineArea(series.datapoints, series.xaxis, series.yaxis);
            }

            if (lw > 0)
                plotLine(series.datapoints, 0, 0, series.xaxis, series.yaxis);
            ctx.restore();
        }

        function drawSeriesPoints(series) {
            function plotPoints(datapoints, radius, fillStyle, offset, shadow, axisx, axisy, symbol) {
                var points = datapoints.points, ps = datapoints.pointsize;

                for (var i = 0; i < points.length; i += ps) {
                    var x = points[i], y = points[i + 1];
                    if (x == null || x < axisx.min || x > axisx.max || y < axisy.min || y > axisy.max)
                        continue;
                    
                    ctx.beginPath();
                    x = axisx.p2c(x);
                    y = axisy.p2c(y) + offset;
                    if (symbol == "circle")
                        ctx.arc(x, y, radius, 0, shadow ? Math.PI : Math.PI * 2, false);
                    else
                        symbol(ctx, x, y, radius, shadow);
                    ctx.closePath();
                    
                    if (fillStyle) {
                        ctx.fillStyle = fillStyle;
                        ctx.fill();
                    }
                    ctx.stroke();
                }
            }
            
            ctx.save();
            ctx.translate(plotOffset.left, plotOffset.top);

            var lw = series.points.lineWidth,
                sw = series.shadowSize,
                radius = series.points.radius,
                symbol = series.points.symbol;
            if (lw > 0 && sw > 0) {
                // draw shadow in two steps
                var w = sw / 2;
                ctx.lineWidth = w;
                ctx.strokeStyle = "rgba(0,0,0,0.1)";
                plotPoints(series.datapoints, radius, null, w + w/2, true,
                           series.xaxis, series.yaxis, symbol);

                ctx.strokeStyle = "rgba(0,0,0,0.2)";
                plotPoints(series.datapoints, radius, null, w/2, true,
                           series.xaxis, series.yaxis, symbol);
            }

            ctx.lineWidth = lw;
            ctx.strokeStyle = series.color;
            plotPoints(series.datapoints, radius,
                       getFillStyle(series.points, series.color), 0, false,
                       series.xaxis, series.yaxis, symbol);
            ctx.restore();
        }

        function drawBar(x, y, b, barLeft, barRight, offset, fillStyleCallback, axisx, axisy, c, horizontal, lineWidth) {
            var left, right, bottom, top,
                drawLeft, drawRight, drawTop, drawBottom,
                tmp;

            // in horizontal mode, we start the bar from the left
            // instead of from the bottom so it appears to be
            // horizontal rather than vertical
            if (horizontal) {
                drawBottom = drawRight = drawTop = true;
                drawLeft = false;
                left = b;
                right = x;
                top = y + barLeft;
                bottom = y + barRight;

                // account for negative bars
                if (right < left) {
                    tmp = right;
                    right = left;
                    left = tmp;
                    drawLeft = true;
                    drawRight = false;
                }
            }
            else {
                drawLeft = drawRight = drawTop = true;
                drawBottom = false;
                left = x + barLeft;
                right = x + barRight;
                bottom = b;
                top = y;

                // account for negative bars
                if (top < bottom) {
                    tmp = top;
                    top = bottom;
                    bottom = tmp;
                    drawBottom = true;
                    drawTop = false;
                }
            }
           
            // clip
            if (right < axisx.min || left > axisx.max ||
                top < axisy.min || bottom > axisy.max)
                return;
            
            if (left < axisx.min) {
                left = axisx.min;
                drawLeft = false;
            }

            if (right > axisx.max) {
                right = axisx.max;
                drawRight = false;
            }

            if (bottom < axisy.min) {
                bottom = axisy.min;
                drawBottom = false;
            }
            
            if (top > axisy.max) {
                top = axisy.max;
                drawTop = false;
            }

            left = axisx.p2c(left);
            bottom = axisy.p2c(bottom);
            right = axisx.p2c(right);
            top = axisy.p2c(top);
            
            // fill the bar
            if (fillStyleCallback) {
                c.beginPath();
                c.moveTo(left, bottom);
                c.lineTo(left, top);
                c.lineTo(right, top);
                c.lineTo(right, bottom);
                c.fillStyle = fillStyleCallback(bottom, top);
                c.fill();
            }

            // draw outline
            if (lineWidth > 0 && (drawLeft || drawRight || drawTop || drawBottom)) {
                c.beginPath();

                // FIXME: inline moveTo is buggy with excanvas
                c.moveTo(left, bottom + offset);
                if (drawLeft)
                    c.lineTo(left, top + offset);
                else
                    c.moveTo(left, top + offset);
                if (drawTop)
                    c.lineTo(right, top + offset);
                else
                    c.moveTo(right, top + offset);
                if (drawRight)
                    c.lineTo(right, bottom + offset);
                else
                    c.moveTo(right, bottom + offset);
                if (drawBottom)
                    c.lineTo(left, bottom + offset);
                else
                    c.moveTo(left, bottom + offset);
                c.stroke();
            }
        }
        
        function drawSeriesBars(series) {
            function plotBars(datapoints, barLeft, barRight, offset, fillStyleCallback, axisx, axisy) {
                var points = datapoints.points, ps = datapoints.pointsize;
                
                for (var i = 0; i < points.length; i += ps) {
                    if (points[i] == null)
                        continue;
                    drawBar(points[i], points[i + 1], points[i + 2], barLeft, barRight, offset, fillStyleCallback, axisx, axisy, ctx, series.bars.horizontal, series.bars.lineWidth);
                }
            }

            ctx.save();
            ctx.translate(plotOffset.left, plotOffset.top);

            // FIXME: figure out a way to add shadows (for instance along the right edge)
            ctx.lineWidth = series.bars.lineWidth;
            ctx.strokeStyle = series.color;
            var barLeft = series.bars.align == "left" ? 0 : -series.bars.barWidth/2;
            var fillStyleCallback = series.bars.fill ? function (bottom, top) { return getFillStyle(series.bars, series.color, bottom, top); } : null;
            plotBars(series.datapoints, barLeft, barLeft + series.bars.barWidth, 0, fillStyleCallback, series.xaxis, series.yaxis);
            ctx.restore();
        }

        function getFillStyle(filloptions, seriesColor, bottom, top) {
            var fill = filloptions.fill;
            if (!fill)
                return null;

            if (filloptions.fillColor)
                return getColorOrGradient(filloptions.fillColor, bottom, top, seriesColor);
            
            var c = $.color.parse(seriesColor);
            c.a = typeof fill == "number" ? fill : 0.4;
            c.normalize();
            return c.toString();
        }
        
        function insertLegend() {
            placeholder.find(".legend").remove();

            if (!options.legend.show)
                return;
            
            var fragments = [], rowStarted = false,
                lf = options.legend.labelFormatter, s, label;
            for (var i = 0; i < series.length; ++i) {
                s = series[i];
                label = s.label;
                if (!label)
                    continue;
                
                if (i % options.legend.noColumns == 0) {
                    if (rowStarted)
                        fragments.push('</tr>');
                    fragments.push('<tr>');
                    rowStarted = true;
                }

                if (lf)
                    label = lf(label, s);
                
                fragments.push(
                    '<td class="legendColorBox"><div style="border:1px solid ' + options.legend.labelBoxBorderColor + ';padding:1px"><div style="width:4px;height:0;border:5px solid ' + s.color + ';overflow:hidden"></div></div></td>' +
                    '<td class="legendLabel">' + label + '</td>');
            }
            if (rowStarted)
                fragments.push('</tr>');
            
            if (fragments.length == 0)
                return;

            var table = '<table style="font-size:smaller;color:' + options.grid.color + '">' + fragments.join("") + '</table>';
            if (options.legend.container != null)
                $(options.legend.container).html(table);
            else {
                var pos = "",
                    p = options.legend.position,
                    m = options.legend.margin;
                if (m[0] == null)
                    m = [m, m];
                if (p.charAt(0) == "n")
                    pos += 'top:' + (m[1] + plotOffset.top) + 'px;';
                else if (p.charAt(0) == "s")
                    pos += 'bottom:' + (m[1] + plotOffset.bottom) + 'px;';
                if (p.charAt(1) == "e")
                    pos += 'right:' + (m[0] + plotOffset.right) + 'px;';
                else if (p.charAt(1) == "w")
                    pos += 'left:' + (m[0] + plotOffset.left) + 'px;';
                var legend = $('<div class="legend">' + table.replace('style="', 'style="position:absolute;' + pos +';') + '</div>').appendTo(placeholder);
                if (options.legend.backgroundOpacity != 0.0) {
                    // put in the transparent background
                    // separately to avoid blended labels and
                    // label boxes
                    var c = options.legend.backgroundColor;
                    if (c == null) {
                        c = options.grid.backgroundColor;
                        if (c && typeof c == "string")
                            c = $.color.parse(c);
                        else
                            c = $.color.extract(legend, 'background-color');
                        c.a = 1;
                        c = c.toString();
                    }
                    var div = legend.children();
                    $('<div style="position:absolute;width:' + div.width() + 'px;height:' + div.height() + 'px;' + pos +'background-color:' + c + ';"> </div>').prependTo(legend).css('opacity', options.legend.backgroundOpacity);
                }
            }
        }


        // interactive features
        
        var highlights = [],
            redrawTimeout = null;
        
        // returns the data item the mouse is over, or null if none is found
        function findNearbyItem(mouseX, mouseY, seriesFilter) {
            var maxDistance = options.grid.mouseActiveRadius,
                smallestDistance = maxDistance * maxDistance + 1,
                item = null, foundPoint = false, i, j;

            for (i = series.length - 1; i >= 0; --i) {
                if (!seriesFilter(series[i]))
                    continue;
                
                var s = series[i],
                    axisx = s.xaxis,
                    axisy = s.yaxis,
                    points = s.datapoints.points,
                    ps = s.datapoints.pointsize,
                    mx = axisx.c2p(mouseX), // precompute some stuff to make the loop faster
                    my = axisy.c2p(mouseY),
                    maxx = maxDistance / axisx.scale,
                    maxy = maxDistance / axisy.scale;

                // with inverse transforms, we can't use the maxx/maxy
                // optimization, sadly
                if (axisx.options.inverseTransform)
                    maxx = Number.MAX_VALUE;
                if (axisy.options.inverseTransform)
                    maxy = Number.MAX_VALUE;
                
                if (s.lines.show || s.points.show) {
                    for (j = 0; j < points.length; j += ps) {
                        var x = points[j], y = points[j + 1];
                        if (x == null)
                            continue;
                        
                        // For points and lines, the cursor must be within a
                        // certain distance to the data point
                        if (x - mx > maxx || x - mx < -maxx ||
                            y - my > maxy || y - my < -maxy)
                            continue;

                        // We have to calculate distances in pixels, not in
                        // data units, because the scales of the axes may be different
                        var dx = Math.abs(axisx.p2c(x) - mouseX),
                            dy = Math.abs(axisy.p2c(y) - mouseY),
                            dist = dx * dx + dy * dy; // we save the sqrt

                        // use <= to ensure last point takes precedence
                        // (last generally means on top of)
                        if (dist < smallestDistance) {
                            smallestDistance = dist;
                            item = [i, j / ps];
                        }
                    }
                }
                    
                if (s.bars.show && !item) { // no other point can be nearby
                    var barLeft = s.bars.align == "left" ? 0 : -s.bars.barWidth/2,
                        barRight = barLeft + s.bars.barWidth;
                    
                    for (j = 0; j < points.length; j += ps) {
                        var x = points[j], y = points[j + 1], b = points[j + 2];
                        if (x == null)
                            continue;
  
                        // for a bar graph, the cursor must be inside the bar
                        if (series[i].bars.horizontal ? 
                            (mx <= Math.max(b, x) && mx >= Math.min(b, x) && 
                             my >= y + barLeft && my <= y + barRight) :
                            (mx >= x + barLeft && mx <= x + barRight &&
                             my >= Math.min(b, y) && my <= Math.max(b, y)))
                                item = [i, j / ps];
                    }
                }
            }

            if (item) {
                i = item[0];
                j = item[1];
                ps = series[i].datapoints.pointsize;
                
                return { datapoint: series[i].datapoints.points.slice(j * ps, (j + 1) * ps),
                         dataIndex: j,
                         series: series[i],
                         seriesIndex: i };
            }
            
            return null;
        }

        function onMouseMove(e) {
            if (options.grid.hoverable)
                triggerClickHoverEvent("plothover", e,
                                       function (s) { return s["hoverable"] != false; });
        }

        function onMouseLeave(e) {
            if (options.grid.hoverable)
                triggerClickHoverEvent("plothover", e,
                                       function (s) { return false; });
        }

        function onClick(e) {
            triggerClickHoverEvent("plotclick", e,
                                   function (s) { return s["clickable"] != false; });
        }

        // trigger click or hover event (they send the same parameters
        // so we share their code)
        function triggerClickHoverEvent(eventname, event, seriesFilter) {
            var offset = eventHolder.offset(),
                canvasX = event.pageX - offset.left - plotOffset.left,
                canvasY = event.pageY - offset.top - plotOffset.top,
            pos = canvasToAxisCoords({ left: canvasX, top: canvasY });

            pos.pageX = event.pageX;
            pos.pageY = event.pageY;

            var item = findNearbyItem(canvasX, canvasY, seriesFilter);

            if (item) {
                // fill in mouse pos for any listeners out there
                item.pageX = parseInt(item.series.xaxis.p2c(item.datapoint[0]) + offset.left + plotOffset.left);
                item.pageY = parseInt(item.series.yaxis.p2c(item.datapoint[1]) + offset.top + plotOffset.top);
            }

            if (options.grid.autoHighlight) {
                // clear auto-highlights
                for (var i = 0; i < highlights.length; ++i) {
                    var h = highlights[i];
                    if (h.auto == eventname &&
                        !(item && h.series == item.series &&
                          h.point[0] == item.datapoint[0] &&
                          h.point[1] == item.datapoint[1]))
                        unhighlight(h.series, h.point);
                }
                
                if (item)
                    highlight(item.series, item.datapoint, eventname);
            }
            
            placeholder.trigger(eventname, [ pos, item ]);
        }

        function triggerRedrawOverlay() {
            if (!redrawTimeout)
                redrawTimeout = setTimeout(drawOverlay, 30);
        }

        function drawOverlay() {
            redrawTimeout = null;

            // draw highlights
            octx.save();
            octx.clearRect(0, 0, canvasWidth, canvasHeight);
            octx.translate(plotOffset.left, plotOffset.top);
            
            var i, hi;
            for (i = 0; i < highlights.length; ++i) {
                hi = highlights[i];

                if (hi.series.bars.show)
                    drawBarHighlight(hi.series, hi.point);
                else
                    drawPointHighlight(hi.series, hi.point);
            }
            octx.restore();
            
            executeHooks(hooks.drawOverlay, [octx]);
        }
        
        function highlight(s, point, auto) {
            if (typeof s == "number")
                s = series[s];

            if (typeof point == "number") {
                var ps = s.datapoints.pointsize;
                point = s.datapoints.points.slice(ps * point, ps * (point + 1));
            }

            var i = indexOfHighlight(s, point);
            if (i == -1) {
                highlights.push({ series: s, point: point, auto: auto });

                triggerRedrawOverlay();
            }
            else if (!auto)
                highlights[i].auto = false;
        }
            
        function unhighlight(s, point) {
            if (s == null && point == null) {
                highlights = [];
                triggerRedrawOverlay();
            }
            
            if (typeof s == "number")
                s = series[s];

            if (typeof point == "number")
                point = s.data[point];

            var i = indexOfHighlight(s, point);
            if (i != -1) {
                highlights.splice(i, 1);

                triggerRedrawOverlay();
            }
        }
        
        function indexOfHighlight(s, p) {
            for (var i = 0; i < highlights.length; ++i) {
                var h = highlights[i];
                if (h.series == s && h.point[0] == p[0]
                    && h.point[1] == p[1])
                    return i;
            }
            return -1;
        }
        
        function drawPointHighlight(series, point) {
            var x = point[0], y = point[1],
                axisx = series.xaxis, axisy = series.yaxis;
            
            if (x < axisx.min || x > axisx.max || y < axisy.min || y > axisy.max)
                return;
            
            var pointRadius = series.points.radius + series.points.lineWidth / 2;
            octx.lineWidth = pointRadius;
            octx.strokeStyle = $.color.parse(series.color).scale('a', 0.5).toString();
            var radius = 1.5 * pointRadius,
                x = axisx.p2c(x),
                y = axisy.p2c(y);
            
            octx.beginPath();
            if (series.points.symbol == "circle")
                octx.arc(x, y, radius, 0, 2 * Math.PI, false);
            else
                series.points.symbol(octx, x, y, radius, false);
            octx.closePath();
            octx.stroke();
        }

        function drawBarHighlight(series, point) {
            octx.lineWidth = series.bars.lineWidth;
            octx.strokeStyle = $.color.parse(series.color).scale('a', 0.5).toString();
            var fillStyle = $.color.parse(series.color).scale('a', 0.5).toString();
            var barLeft = series.bars.align == "left" ? 0 : -series.bars.barWidth/2;
            drawBar(point[0], point[1], point[2] || 0, barLeft, barLeft + series.bars.barWidth,
                    0, function () { return fillStyle; }, series.xaxis, series.yaxis, octx, series.bars.horizontal, series.bars.lineWidth);
        }

        function getColorOrGradient(spec, bottom, top, defaultColor) {
            if (typeof spec == "string")
                return spec;
            else {
                // assume this is a gradient spec; IE currently only
                // supports a simple vertical gradient properly, so that's
                // what we support too
                var gradient = ctx.createLinearGradient(0, top, 0, bottom);
                
                for (var i = 0, l = spec.colors.length; i < l; ++i) {
                    var c = spec.colors[i];
                    if (typeof c != "string") {
                        var co = $.color.parse(defaultColor);
                        if (c.brightness != null)
                            co = co.scale('rgb', c.brightness)
                        if (c.opacity != null)
                            co.a *= c.opacity;
                        c = co.toString();
                    }
                    gradient.addColorStop(i / (l - 1), c);
                }
                
                return gradient;
            }
        }
    }

    $.plot = function(placeholder, data, options) {
        //var t0 = new Date();
        var plot = new Plot($(placeholder), data, options, $.plot.plugins);
        //(window.console ? console.log : alert)("time used (msecs): " + ((new Date()).getTime() - t0.getTime()));
        return plot;
    };

    $.plot.version = "0.7";
    
    $.plot.plugins = [];

    // returns a string with the date d formatted according to fmt
    $.plot.formatDate = function(d, fmt, monthNames) {
        var leftPad = function(n) {
            n = "" + n;
            return n.length == 1 ? "0" + n : n;
        };
        
        var r = [];
        var escape = false, padNext = false;
        var hours = d.getUTCHours();
        var isAM = hours < 12;
        if (monthNames == null)
            monthNames = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];

        if (fmt.search(/%p|%P/) != -1) {
            if (hours > 12) {
                hours = hours - 12;
            } else if (hours == 0) {
                hours = 12;
            }
        }
        for (var i = 0; i < fmt.length; ++i) {
            var c = fmt.charAt(i);
            
            if (escape) {
                switch (c) {
                case 'h': c = "" + hours; break;
                case 'H': c = leftPad(hours); break;
                case 'M': c = leftPad(d.getUTCMinutes()); break;
                case 'S': c = leftPad(d.getUTCSeconds()); break;
                case 'd': c = "" + d.getUTCDate(); break;
                case 'm': c = "" + (d.getUTCMonth() + 1); break;
                case 'y': c = "" + d.getUTCFullYear(); break;
                case 'b': c = "" + monthNames[d.getUTCMonth()]; break;
                case 'p': c = (isAM) ? ("" + "am") : ("" + "pm"); break;
                case 'P': c = (isAM) ? ("" + "AM") : ("" + "PM"); break;
                case '0': c = ""; padNext = true; break;
                }
                if (c && padNext) {
                    c = leftPad(c);
                    padNext = false;
                }
                r.push(c);
                if (!padNext)
                    escape = false;
            }
            else {
                if (c == "%")
                    escape = true;
                else
                    r.push(c);
            }
        }
        return r.join("");
    };
    
    // round to nearby lower multiple of base
    function floorInBase(n, base) {
        return base * Math.floor(n / base);
    }
    
})(jQuery);

/*! jQuery UI - v1.10.0 - 2013-01-17
* http://jqueryui.com
* Includes: jquery.ui.datepicker-ja.js
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
jQuery(function(e){e.datepicker.regional.ja={closeText:"é–‰ã˜ã‚‹",prevText:"&#x3C;å‰",nextText:"æ¬¡&#x3E;",currentText:"ä»Šæ—¥",monthNames:["1æœˆ","2æœˆ","3æœˆ","4æœˆ","5æœˆ","6æœˆ","7æœˆ","8æœˆ","9æœˆ","10æœˆ","11æœˆ","12æœˆ"],monthNamesShort:["1æœˆ","2æœˆ","3æœˆ","4æœˆ","5æœˆ","6æœˆ","7æœˆ","8æœˆ","9æœˆ","10æœˆ","11æœˆ","12æœˆ"],dayNames:["æ—¥æ›œæ—¥","æœˆæ›œæ—¥","ç«æ›œæ—¥","æ°´æ›œæ—¥","æœ¨æ›œæ—¥","é‡‘æ›œæ—¥","åœŸæ›œæ—¥"],dayNamesShort:["æ—¥","æœˆ","ç«","æ°´","æœ¨","é‡‘","åœŸ"],dayNamesMin:["æ—¥","æœˆ","ç«","æ°´","æœ¨","é‡‘","åœŸ"],weekHeader:"é€±",dateFormat:"yy/mm/dd",firstDay:0,isRTL:!1,showMonthAfterYear:!0,yearSuffix:"å¹´"},e.datepicker.setDefaults(e.datepicker.regional.ja)});
// tipsy, facebook style tooltips for jquery
// version 1.0.0a
// (c) 2008-2010 jason frame [jason@onehackoranother.com]
// released under the MIT license

(function($, window, undefined) {

    function maybeCall(thing, ctx) {
        return (typeof thing == 'function') ? (thing.call(ctx)) : thing;
    }

    function isElementInDOM(ele) {
        while (ele = ele.parentNode) {
            if (ele == document) return true;
        }
        return false;
    }

	// Returns true if it is a DOM element
	// http://stackoverflow.com/a/384380/999
	function isElement(o){
		return (
			typeof HTMLElement === "object" ? o instanceof HTMLElement : //DOM2
			o && typeof o === "object" && o.nodeType === 1 && typeof o.nodeName==="string"
		);	
	}

    var tipsyIDcounter = 0;
    function tipsyID() {
        return "tipsyuid" + (tipsyIDcounter++);
    }

    function Tipsy(element, options) {
        this.$element = $(element);
        this.options = options;
        this.enabled = true;
        this.fixTitle();
    }

    Tipsy.prototype = {
        show: function() {
            if (!isElementInDOM(this.$element[0])) {
                return;
            }

            if (isElement(this.$element) && !this.$element.is(':visible')) { 
                return; 
            }
            
            var title;
            if (this.enabled && (title = this.getTitle())) {
                var $tip = this.tip();

                $tip.find('.tipsy-inner' + this.options.theme)[this.options.html ? 'html' : 'text'](title);

                $tip[0].className = 'tipsy' + this.options.theme; // reset classname in case of dynamic gravity
                if (this.options.className) {
                    $tip.addClass(maybeCall(this.options.className, this.$element[0]));
                }

                $tip.remove().css({top: 0, left: 0, visibility: 'hidden', display: 'block'}).prependTo(document.body);

                var pos = $.extend({}, this.$element.offset());

                // If the element is contained in a SVG object, use getBBox
                if (this.$element.parents('svg').size() > 0) {
                    pos = $.extend(pos, this.$element[0].getBBox());
                } else {
                    pos = $.extend(pos, {
                        width: this.$element[0].offsetWidth || 0,
                        height: this.$element[0].offsetHeight || 0
                    });
                }

                var actualWidth = $tip[0].offsetWidth,
                    actualHeight = $tip[0].offsetHeight,
                    gravity = maybeCall(this.options.gravity, this.$element[0]);

                var tp;
                switch (gravity.charAt(0)) {
                    case 'n':
                        tp = {top: pos.top + pos.height + this.options.offset, left: pos.left + pos.width / 2 - actualWidth / 2};
                        break;
                    case 's':
                        tp = {top: pos.top - actualHeight - this.options.offset, left: pos.left + pos.width / 2 - actualWidth / 2};
                        break;
                    case 'e':
                        tp = {top: pos.top + pos.height / 2 - actualHeight / 2, left: pos.left - actualWidth - this.options.offset};
                        break;
                    case 'w':
                        tp = {top: pos.top + pos.height / 2 - actualHeight / 2, left: pos.left + pos.width + this.options.offset};
                        break;
                    default:
                        break;
                }

                if (gravity.length == 2) {
                    if (gravity.charAt(1) == 'w') {
                        tp.left = pos.left + pos.width / 2 - 15;
                    } else {
                        tp.left = pos.left + pos.width / 2 - actualWidth + 15;
                    }
                }

                $tip.css(tp).addClass('tipsy-' + gravity + this.options.theme);
                $tip.find('.tipsy-arrow' + this.options.theme)[0].className = 'tipsy-arrow' + this.options.theme + ' tipsy-arrow-' + gravity.charAt(0) + this.options.theme;
                $tip.css({width: (actualWidth - 10) + 'px'});

                if (this.options.fade) {
                    if(this.options.shadow)
                        $(".tipsy-inner").css({'box-shadow': '0px 0px '+this.options.shadowBlur+'px '+this.options.shadowSpread+'px rgba(0, 0, 0, '+this.options.shadowOpacity+')', '-webkit-box-shadow': '0px 0px '+this.options.shadowBlur+'px '+this.options.shadowSpread+'px rgba(0, 0, 0, '+this.options.shadowOpacity+')'});
                    $tip.stop().css({opacity: 0, display: 'block', visibility: 'visible'}).animate({opacity: this.options.opacity}, this.options.fadeInTime);
                } else {
                    $tip.css({visibility: 'visible', opacity: this.options.opacity});
                }

                if (this.options.aria) {
                    var $tipID = tipsyID();
                    $tip.attr("id", $tipID);
                    this.$element.attr("aria-describedby", $tipID);
                }
            }
        },

        hide: function() {
            if (this.options.fade) {
                this.tip().stop().fadeOut(this.options.fadeOutTime, function() { $(this).remove(); });
            } else {
                this.tip().remove();
            }
            if (this.options.aria) {
                this.$element.removeAttr("aria-describedby");
            }
        },

        fixTitle: function() {
            var $e = this.$element;
            if ($e.attr('title') || typeof($e.attr('original-title')) != 'string') {
                $e.attr('original-title', $e.attr('title') || '').removeAttr('title');
            }
        },

        getTitle: function() {
            var title, $e = this.$element, o = this.options;
            this.fixTitle();
            if (typeof o.title == 'string') {
                title = $e.attr(o.title == 'title' ? 'original-title' : o.title);
            } else if (typeof o.title == 'function') {
                title = o.title.call($e[0]);
            }
            title = ('' + title).replace(/(^\s*|\s*$)/, "");
            return title || o.fallback;
        },

        tip: function() {
            if (!this.$tip) {
                this.$tip = $('<div class="tipsy' + this.options.theme + '"></div>').html('<div class="tipsy-arrow' + this.options.theme + '"></div><div class="tipsy-inner' + this.options.theme + '"></div>').attr("role","tooltip");
                this.$tip.data('tipsy-pointee', this.$element[0]);
            }
            return this.$tip;
        },

        validate: function() {
            if (!this.$element[0].parentNode) {
                this.hide();
                this.$element = null;
                this.options = null;
            }
        },

        enable: function() { this.enabled = true; },
        disable: function() { this.enabled = false; },
        toggleEnabled: function() { this.enabled = !this.enabled; }
    };

    $.fn.tipsy = function(options) {

        $.fn.tipsy.enable();

        if (options === true) {
            return this.data('tipsy');
        } else if (typeof options == 'string') {
            var tipsy = this.data('tipsy');
            if (tipsy) tipsy[options]();
            return this;
        }

        options = $.extend({}, $.fn.tipsy.defaults, options);

        // Establish theme
        options.theme = (options.theme && options.theme !== '') ? '-' + options.theme : '';

        function get(ele) {
            var tipsy = $.data(ele, 'tipsy');
            if (!tipsy) {
                tipsy = new Tipsy(ele, $.fn.tipsy.elementOptions(ele, options));
                $.data(ele, 'tipsy', tipsy);
            }
            return tipsy;
        }

        function enter() {
            if ($.fn.tipsy.enabled !== true) {
                return;
            }
            var tipsy = get(this);
            tipsy.hoverState = 'in';
            if (options.delayIn === 0) {
                tipsy.show();
            } else {
                tipsy.fixTitle();
                setTimeout(function() {
                    if (tipsy.hoverState == 'in' && isElementInDOM(tipsy.$element)) {
                        tipsy.show();
                    }
                }, options.delayIn);
            }
        }

        function leave() {
            var tipsy = get(this);
            tipsy.hoverState = 'out';
            if (options.delayOut === 0) {
                tipsy.hide();
            } else {
                setTimeout(function() { if (tipsy.hoverState == 'out' || !tipsy.$element || !tipsy.$element.is(':visible')) tipsy.hide(); }, options.delayOut);
            }
        }

        if (!options.live) this.each(function() { get(this); });

        if (options.trigger != 'manual') {
            var eventIn  = options.trigger == 'hover' ? 'mouseenter mouseover' : 'focus',
                eventOut = options.trigger == 'hover' ? 'mouseleave mouseout' : 'blur';

            if (options.live && options.live !== true) {
                $(this).on(eventIn, options.live, enter);
                $(this).on(eventOut, options.live, leave);
            } else {
                if (options.live && !$.live) {
                    //live === true and using jQuery >= 1.9
                    throw "Since jQuery 1.9, pass selector as live argument. eg. $(document).tipsy({live: 'a.live'});";
                }
                var binder = options.live ? 'live' : 'bind';
                this[binder](eventIn, enter)[binder](eventOut, leave);
            }
        }

        return this;

    };

    $.fn.tipsy.defaults = {
        aria: false,
        className: null,
        delayIn: 0,
        delayOut: 0,
        fade: false,
        fadeInTime: 400,
        fadeOutTime: 400, 
        shadow: false,
        shadowBlur: 8,
        shadowOpacity: 1,
        shadowSpread: 0,
        fallback: '',
        gravity: 'n',
        html: false,
        live: false,
        offset: 0,
        opacity: 0.8,
        title: 'title',
        trigger: 'hover',
        theme: ''
    };

    $.fn.tipsy.revalidate = function() {
      $('.tipsy').each(function() {
        var pointee = $.data(this, 'tipsy-pointee');
        if (!pointee || !isElementInDOM(pointee)) {
          $(this).remove();
        }
      });
    };

    $.fn.tipsy.enable = function() {
        $.fn.tipsy.enabled = true;
    };

    $.fn.tipsy.disable = function() {
        $.fn.tipsy.enabled = false;
    };

    // Overwrite this method to provide options on a per-element basis.
    // For example, you could store the gravity in a 'tipsy-gravity' attribute:
    // return $.extend({}, options, {gravity: $(ele).attr('tipsy-gravity') || 'n' });
    // (remember - do not modify 'options' in place!)
    $.fn.tipsy.elementOptions = function(ele, options) {
        return $.metadata ? $.extend({}, options, $(ele).metadata()) : options;
    };

    $.fn.tipsy.autoNS = function() {
        return $(this).offset().top > ($(document).scrollTop() + $(window).height() / 2) ? 's' : 'n';
    };

    $.fn.tipsy.autoWE = function() {
        return $(this).offset().left > ($(document).scrollLeft() + $(window).width() / 2) ? 'e' : 'w';
    };

    $.fn.tipsy.autoNWNE = function() {
        return $(this).offset().left > ($(document).scrollLeft() + $(window).width() / 2) ? 'ne' : 'nw';
    };

    $.fn.tipsy.autoSWSE = function() {
        return $(this).offset().left > ($(document).scrollLeft() + $(window).width() / 2) ? 'se' : 'sw';
    };

    /**
     * yields a closure of the supplied parameters, producing a function that takes
     * no arguments and is suitable for use as an autogravity function like so:
     *
     * @param margin (int) - distance from the viewable region edge that an
     *        element should be before setting its tooltip's gravity to be away
     *        from that edge.
     * @param prefer (string, e.g. 'n', 'sw', 'w') - the direction to prefer
     *        if there are no viewable region edges effecting the tooltip's
     *        gravity. It will try to vary from this minimally, for example,
     *        if 'sw' is preferred and an element is near the right viewable
     *        region edge, but not the top edge, it will set the gravity for
     *        that element's tooltip to be 'se', preserving the southern
     *        component.
     */
    $.fn.tipsy.autoBounds = function(marginNorth, marginEast, prefer) {
        return function() {
            var dir = {ns: prefer[0], ew: (prefer.length > 1 ? prefer[1] : false)},
                boundTop = $(document).scrollTop() + marginNorth,
                boundLeft = $(document).scrollLeft() + marginEast,
                $this = $(this);

            if ($this.offset().top < boundTop) dir.ns = 'n';
            if ($this.offset().left < boundLeft) dir.ew = 'w';
            if ($(window).width() + $(document).scrollLeft() - $this.offset().left < marginEast) dir.ew = 'e';
            if ($(window).height() + $(document).scrollTop() - $this.offset().top < marginNorth) dir.ns = 's';

            return dir.ns + (dir.ew ? dir.ew : '');
        };
    };

    /**
     * Improved version of autoBounds for automatic placement of chunky tips
     * The original autoBounds failed in two regards: 1. it would never return a 'w' or 'e', gravity even if they
     * were preferred and/or optimal, 2. it only respected the margin between the left hand side of an element and
     * left hand side of the viewport, and the top of an element and the top of the viewport. This version checks
     * to see if the bottom of an element is too close to the bottom of the screen, similarly for the right hand side
     */
    $.fn.tipsy.autoBounds2 = function(margin, prefer) {
        return function() {
            var dir = {},
                boundTop = $(document).scrollTop() + margin,
                boundLeft = $(document).scrollLeft() + margin,
                $this = $(this);

            // bi-directional string (ne, se, sw, etc...)
            if (prefer.length > 1) {
                dir.ns = prefer[0];
                dir.ew = prefer[1];
            } else {
                // single direction string (e, w, n or s)
                if (prefer[0] == 'e' || prefer[0] == 'w') {
                    dir.ew = prefer[0];
                } else {
                    dir.ns = prefer[0];
                }
            }

            if ($this.offset().top < boundTop) dir.ns = 'n';
            if ($this.offset().left < boundLeft) dir.ew = 'w';
            if ($(window).width() + $(document).scrollLeft() - ($this.offset().left + $this.width()) < margin) dir.ew = 'e';
            if ($(window).height() + $(document).scrollTop() - ($this.offset().top + $this.height()) < margin) dir.ns = 's';

            if (dir.ns) {
                return dir.ns + (dir.ew ? dir.ew : '');
            }
            return dir.ew;
        }
    };
    
})(jQuery, window);
/**
 * jquery.Jcrop.min.js v0.9.12 (build:20130202)
 * jQuery Image Cropping Plugin - released under MIT License
 * Copyright (c) 2008-2013 Tapmodo Interactive LLC
 * https://github.com/tapmodo/Jcrop
 */
(function(a){a.Jcrop=function(b,c){function i(a){return Math.round(a)+"px"}function j(a){return d.baseClass+"-"+a}function k(){return a.fx.step.hasOwnProperty("backgroundColor")}function l(b){var c=a(b).offset();return[c.left,c.top]}function m(a){return[a.pageX-e[0],a.pageY-e[1]]}function n(b){typeof b!="object"&&(b={}),d=a.extend(d,b),a.each(["onChange","onSelect","onRelease","onDblClick"],function(a,b){typeof d[b]!="function"&&(d[b]=function(){})})}function o(a,b,c){e=l(D),bc.setCursor(a==="move"?a:a+"-resize");if(a==="move")return bc.activateHandlers(q(b),v,c);var d=_.getFixed(),f=r(a),g=_.getCorner(r(f));_.setPressed(_.getCorner(f)),_.setCurrent(g),bc.activateHandlers(p(a,d),v,c)}function p(a,b){return function(c){if(!d.aspectRatio)switch(a){case"e":c[1]=b.y2;break;case"w":c[1]=b.y2;break;case"n":c[0]=b.x2;break;case"s":c[0]=b.x2}else switch(a){case"e":c[1]=b.y+1;break;case"w":c[1]=b.y+1;break;case"n":c[0]=b.x+1;break;case"s":c[0]=b.x+1}_.setCurrent(c),bb.update()}}function q(a){var b=a;return bd.watchKeys
(),function(a){_.moveOffset([a[0]-b[0],a[1]-b[1]]),b=a,bb.update()}}function r(a){switch(a){case"n":return"sw";case"s":return"nw";case"e":return"nw";case"w":return"ne";case"ne":return"sw";case"nw":return"se";case"se":return"nw";case"sw":return"ne"}}function s(a){return function(b){return d.disabled?!1:a==="move"&&!d.allowMove?!1:(e=l(D),W=!0,o(a,m(b)),b.stopPropagation(),b.preventDefault(),!1)}}function t(a,b,c){var d=a.width(),e=a.height();d>b&&b>0&&(d=b,e=b/a.width()*a.height()),e>c&&c>0&&(e=c,d=c/a.height()*a.width()),T=a.width()/d,U=a.height()/e,a.width(d).height(e)}function u(a){return{x:a.x*T,y:a.y*U,x2:a.x2*T,y2:a.y2*U,w:a.w*T,h:a.h*U}}function v(a){var b=_.getFixed();b.w>d.minSelect[0]&&b.h>d.minSelect[1]?(bb.enableHandles(),bb.done()):bb.release(),bc.setCursor(d.allowSelect?"crosshair":"default")}function w(a){if(d.disabled)return!1;if(!d.allowSelect)return!1;W=!0,e=l(D),bb.disableHandles(),bc.setCursor("crosshair");var b=m(a);return _.setPressed(b),bb.update(),bc.activateHandlers(x,v,a.type.substring
(0,5)==="touch"),bd.watchKeys(),a.stopPropagation(),a.preventDefault(),!1}function x(a){_.setCurrent(a),bb.update()}function y(){var b=a("<div></div>").addClass(j("tracker"));return g&&b.css({opacity:0,backgroundColor:"white"}),b}function be(a){G.removeClass().addClass(j("holder")).addClass(a)}function bf(a,b){function t(){window.setTimeout(u,l)}var c=a[0]/T,e=a[1]/U,f=a[2]/T,g=a[3]/U;if(X)return;var h=_.flipCoords(c,e,f,g),i=_.getFixed(),j=[i.x,i.y,i.x2,i.y2],k=j,l=d.animationDelay,m=h[0]-j[0],n=h[1]-j[1],o=h[2]-j[2],p=h[3]-j[3],q=0,r=d.swingSpeed;c=k[0],e=k[1],f=k[2],g=k[3],bb.animMode(!0);var s,u=function(){return function(){q+=(100-q)/r,k[0]=Math.round(c+q/100*m),k[1]=Math.round(e+q/100*n),k[2]=Math.round(f+q/100*o),k[3]=Math.round(g+q/100*p),q>=99.8&&(q=100),q<100?(bh(k),t()):(bb.done(),bb.animMode(!1),typeof b=="function"&&b.call(bs))}}();t()}function bg(a){bh([a[0]/T,a[1]/U,a[2]/T,a[3]/U]),d.onSelect.call(bs,u(_.getFixed())),bb.enableHandles()}function bh(a){_.setPressed([a[0],a[1]]),_.setCurrent([a[2],
a[3]]),bb.update()}function bi(){return u(_.getFixed())}function bj(){return _.getFixed()}function bk(a){n(a),br()}function bl(){d.disabled=!0,bb.disableHandles(),bb.setCursor("default"),bc.setCursor("default")}function bm(){d.disabled=!1,br()}function bn(){bb.done(),bc.activateHandlers(null,null)}function bo(){G.remove(),A.show(),A.css("visibility","visible"),a(b).removeData("Jcrop")}function bp(a,b){bb.release(),bl();var c=new Image;c.onload=function(){var e=c.width,f=c.height,g=d.boxWidth,h=d.boxHeight;D.width(e).height(f),D.attr("src",a),H.attr("src",a),t(D,g,h),E=D.width(),F=D.height(),H.width(E).height(F),M.width(E+L*2).height(F+L*2),G.width(E).height(F),ba.resize(E,F),bm(),typeof b=="function"&&b.call(bs)},c.src=a}function bq(a,b,c){var e=b||d.bgColor;d.bgFade&&k()&&d.fadeTime&&!c?a.animate({backgroundColor:e},{queue:!1,duration:d.fadeTime}):a.css("backgroundColor",e)}function br(a){d.allowResize?a?bb.enableOnly():bb.enableHandles():bb.disableHandles(),bc.setCursor(d.allowSelect?"crosshair":"default"),bb
.setCursor(d.allowMove?"move":"default"),d.hasOwnProperty("trueSize")&&(T=d.trueSize[0]/E,U=d.trueSize[1]/F),d.hasOwnProperty("setSelect")&&(bg(d.setSelect),bb.done(),delete d.setSelect),ba.refresh(),d.bgColor!=N&&(bq(d.shade?ba.getShades():G,d.shade?d.shadeColor||d.bgColor:d.bgColor),N=d.bgColor),O!=d.bgOpacity&&(O=d.bgOpacity,d.shade?ba.refresh():bb.setBgOpacity(O)),P=d.maxSize[0]||0,Q=d.maxSize[1]||0,R=d.minSize[0]||0,S=d.minSize[1]||0,d.hasOwnProperty("outerImage")&&(D.attr("src",d.outerImage),delete d.outerImage),bb.refresh()}var d=a.extend({},a.Jcrop.defaults),e,f=navigator.userAgent.toLowerCase(),g=/msie/.test(f),h=/msie [1-6]\./.test(f);typeof b!="object"&&(b=a(b)[0]),typeof c!="object"&&(c={}),n(c);var z={border:"none",visibility:"visible",margin:0,padding:0,position:"absolute",top:0,left:0},A=a(b),B=!0;if(b.tagName=="IMG"){if(A[0].width!=0&&A[0].height!=0)A.width(A[0].width),A.height(A[0].height);else{var C=new Image;C.src=A[0].src,A.width(C.width),A.height(C.height)}var D=A.clone().removeAttr("id").
css(z).show();D.width(A.width()),D.height(A.height()),A.after(D).hide()}else D=A.css(z).show(),B=!1,d.shade===null&&(d.shade=!0);t(D,d.boxWidth,d.boxHeight);var E=D.width(),F=D.height(),G=a("<div />").width(E).height(F).addClass(j("holder")).css({position:"relative",backgroundColor:d.bgColor}).insertAfter(A).append(D);d.addClass&&G.addClass(d.addClass);var H=a("<div />"),I=a("<div />").width("100%").height("100%").css({zIndex:310,position:"absolute",overflow:"hidden"}),J=a("<div />").width("100%").height("100%").css("zIndex",320),K=a("<div />").css({position:"absolute",zIndex:600}).dblclick(function(){var a=_.getFixed();d.onDblClick.call(bs,a)}).insertBefore(D).append(I,J);B&&(H=a("<img />").attr("src",D.attr("src")).css(z).width(E).height(F),I.append(H)),h&&K.css({overflowY:"hidden"});var L=d.boundary,M=y().width(E+L*2).height(F+L*2).css({position:"absolute",top:i(-L),left:i(-L),zIndex:290}).mousedown(w),N=d.bgColor,O=d.bgOpacity,P,Q,R,S,T,U,V=!0,W,X,Y;e=l(D);var Z=function(){function a(){var a={},b=["touchstart"
,"touchmove","touchend"],c=document.createElement("div"),d;try{for(d=0;d<b.length;d++){var e=b[d];e="on"+e;var f=e in c;f||(c.setAttribute(e,"return;"),f=typeof c[e]=="function"),a[b[d]]=f}return a.touchstart&&a.touchend&&a.touchmove}catch(g){return!1}}function b(){return d.touchSupport===!0||d.touchSupport===!1?d.touchSupport:a()}return{createDragger:function(a){return function(b){return d.disabled?!1:a==="move"&&!d.allowMove?!1:(e=l(D),W=!0,o(a,m(Z.cfilter(b)),!0),b.stopPropagation(),b.preventDefault(),!1)}},newSelection:function(a){return w(Z.cfilter(a))},cfilter:function(a){return a.pageX=a.originalEvent.changedTouches[0].pageX,a.pageY=a.originalEvent.changedTouches[0].pageY,a},isSupported:a,support:b()}}(),_=function(){function h(d){d=n(d),c=a=d[0],e=b=d[1]}function i(a){a=n(a),f=a[0]-c,g=a[1]-e,c=a[0],e=a[1]}function j(){return[f,g]}function k(d){var f=d[0],g=d[1];0>a+f&&(f-=f+a),0>b+g&&(g-=g+b),F<e+g&&(g+=F-(e+g)),E<c+f&&(f+=E-(c+f)),a+=f,c+=f,b+=g,e+=g}function l(a){var b=m();switch(a){case"ne":return[
b.x2,b.y];case"nw":return[b.x,b.y];case"se":return[b.x2,b.y2];case"sw":return[b.x,b.y2]}}function m(){if(!d.aspectRatio)return p();var f=d.aspectRatio,g=d.minSize[0]/T,h=d.maxSize[0]/T,i=d.maxSize[1]/U,j=c-a,k=e-b,l=Math.abs(j),m=Math.abs(k),n=l/m,r,s,t,u;return h===0&&(h=E*10),i===0&&(i=F*10),n<f?(s=e,t=m*f,r=j<0?a-t:t+a,r<0?(r=0,u=Math.abs((r-a)/f),s=k<0?b-u:u+b):r>E&&(r=E,u=Math.abs((r-a)/f),s=k<0?b-u:u+b)):(r=c,u=l/f,s=k<0?b-u:b+u,s<0?(s=0,t=Math.abs((s-b)*f),r=j<0?a-t:t+a):s>F&&(s=F,t=Math.abs(s-b)*f,r=j<0?a-t:t+a)),r>a?(r-a<g?r=a+g:r-a>h&&(r=a+h),s>b?s=b+(r-a)/f:s=b-(r-a)/f):r<a&&(a-r<g?r=a-g:a-r>h&&(r=a-h),s>b?s=b+(a-r)/f:s=b-(a-r)/f),r<0?(a-=r,r=0):r>E&&(a-=r-E,r=E),s<0?(b-=s,s=0):s>F&&(b-=s-F,s=F),q(o(a,b,r,s))}function n(a){return a[0]<0&&(a[0]=0),a[1]<0&&(a[1]=0),a[0]>E&&(a[0]=E),a[1]>F&&(a[1]=F),[Math.round(a[0]),Math.round(a[1])]}function o(a,b,c,d){var e=a,f=c,g=b,h=d;return c<a&&(e=c,f=a),d<b&&(g=d,h=b),[e,g,f,h]}function p(){var d=c-a,f=e-b,g;return P&&Math.abs(d)>P&&(c=d>0?a+P:a-P),Q&&Math.abs
(f)>Q&&(e=f>0?b+Q:b-Q),S/U&&Math.abs(f)<S/U&&(e=f>0?b+S/U:b-S/U),R/T&&Math.abs(d)<R/T&&(c=d>0?a+R/T:a-R/T),a<0&&(c-=a,a-=a),b<0&&(e-=b,b-=b),c<0&&(a-=c,c-=c),e<0&&(b-=e,e-=e),c>E&&(g=c-E,a-=g,c-=g),e>F&&(g=e-F,b-=g,e-=g),a>E&&(g=a-F,e-=g,b-=g),b>F&&(g=b-F,e-=g,b-=g),q(o(a,b,c,e))}function q(a){return{x:a[0],y:a[1],x2:a[2],y2:a[3],w:a[2]-a[0],h:a[3]-a[1]}}var a=0,b=0,c=0,e=0,f,g;return{flipCoords:o,setPressed:h,setCurrent:i,getOffset:j,moveOffset:k,getCorner:l,getFixed:m}}(),ba=function(){function f(a,b){e.left.css({height:i(b)}),e.right.css({height:i(b)})}function g(){return h(_.getFixed())}function h(a){e.top.css({left:i(a.x),width:i(a.w),height:i(a.y)}),e.bottom.css({top:i(a.y2),left:i(a.x),width:i(a.w),height:i(F-a.y2)}),e.right.css({left:i(a.x2),width:i(E-a.x2)}),e.left.css({width:i(a.x)})}function j(){return a("<div />").css({position:"absolute",backgroundColor:d.shadeColor||d.bgColor}).appendTo(c)}function k(){b||(b=!0,c.insertBefore(D),g(),bb.setBgOpacity(1,0,1),H.hide(),l(d.shadeColor||d.bgColor,1),bb.
isAwake()?n(d.bgOpacity,1):n(1,1))}function l(a,b){bq(p(),a,b)}function m(){b&&(c.remove(),H.show(),b=!1,bb.isAwake()?bb.setBgOpacity(d.bgOpacity,1,1):(bb.setBgOpacity(1,1,1),bb.disableHandles()),bq(G,0,1))}function n(a,e){b&&(d.bgFade&&!e?c.animate({opacity:1-a},{queue:!1,duration:d.fadeTime}):c.css({opacity:1-a}))}function o(){d.shade?k():m(),bb.isAwake()&&n(d.bgOpacity)}function p(){return c.children()}var b=!1,c=a("<div />").css({position:"absolute",zIndex:240,opacity:0}),e={top:j(),left:j().height(F),right:j().height(F),bottom:j()};return{update:g,updateRaw:h,getShades:p,setBgColor:l,enable:k,disable:m,resize:f,refresh:o,opacity:n}}(),bb=function(){function k(b){var c=a("<div />").css({position:"absolute",opacity:d.borderOpacity}).addClass(j(b));return I.append(c),c}function l(b,c){var d=a("<div />").mousedown(s(b)).css({cursor:b+"-resize",position:"absolute",zIndex:c}).addClass("ord-"+b);return Z.support&&d.bind("touchstart.jcrop",Z.createDragger(b)),J.append(d),d}function m(a){var b=d.handleSize,e=l(a,c++
).css({opacity:d.handleOpacity}).addClass(j("handle"));return b&&e.width(b).height(b),e}function n(a){return l(a,c++).addClass("jcrop-dragbar")}function o(a){var b;for(b=0;b<a.length;b++)g[a[b]]=n(a[b])}function p(a){var b,c;for(c=0;c<a.length;c++){switch(a[c]){case"n":b="hline";break;case"s":b="hline bottom";break;case"e":b="vline right";break;case"w":b="vline"}e[a[c]]=k(b)}}function q(a){var b;for(b=0;b<a.length;b++)f[a[b]]=m(a[b])}function r(a,b){d.shade||H.css({top:i(-b),left:i(-a)}),K.css({top:i(b),left:i(a)})}function t(a,b){K.width(Math.round(a)).height(Math.round(b))}function v(){var a=_.getFixed();_.setPressed([a.x,a.y]),_.setCurrent([a.x2,a.y2]),w()}function w(a){if(b)return x(a)}function x(a){var c=_.getFixed();t(c.w,c.h),r(c.x,c.y),d.shade&&ba.updateRaw(c),b||A(),a?d.onSelect.call(bs,u(c)):d.onChange.call(bs,u(c))}function z(a,c,e){if(!b&&!c)return;d.bgFade&&!e?D.animate({opacity:a},{queue:!1,duration:d.fadeTime}):D.css("opacity",a)}function A(){K.show(),d.shade?ba.opacity(O):z(O,!0),b=!0}function B
(){F(),K.hide(),d.shade?ba.opacity(1):z(1),b=!1,d.onRelease.call(bs)}function C(){h&&J.show()}function E(){h=!0;if(d.allowResize)return J.show(),!0}function F(){h=!1,J.hide()}function G(a){a?(X=!0,F()):(X=!1,E())}function L(){G(!1),v()}var b,c=370,e={},f={},g={},h=!1;d.dragEdges&&a.isArray(d.createDragbars)&&o(d.createDragbars),a.isArray(d.createHandles)&&q(d.createHandles),d.drawBorders&&a.isArray(d.createBorders)&&p(d.createBorders),a(document).bind("touchstart.jcrop-ios",function(b){a(b.currentTarget).hasClass("jcrop-tracker")&&b.stopPropagation()});var M=y().mousedown(s("move")).css({cursor:"move",position:"absolute",zIndex:360});return Z.support&&M.bind("touchstart.jcrop",Z.createDragger("move")),I.append(M),F(),{updateVisible:w,update:x,release:B,refresh:v,isAwake:function(){return b},setCursor:function(a){M.css("cursor",a)},enableHandles:E,enableOnly:function(){h=!0},showHandles:C,disableHandles:F,animMode:G,setBgOpacity:z,done:L}}(),bc=function(){function f(b){M.css({zIndex:450}),b?a(document).bind("touchmove.jcrop"
,k).bind("touchend.jcrop",l):e&&a(document).bind("mousemove.jcrop",h).bind("mouseup.jcrop",i)}function g(){M.css({zIndex:290}),a(document).unbind(".jcrop")}function h(a){return b(m(a)),!1}function i(a){return a.preventDefault(),a.stopPropagation(),W&&(W=!1,c(m(a)),bb.isAwake()&&d.onSelect.call(bs,u(_.getFixed())),g(),b=function(){},c=function(){}),!1}function j(a,d,e){return W=!0,b=a,c=d,f(e),!1}function k(a){return b(m(Z.cfilter(a))),!1}function l(a){return i(Z.cfilter(a))}function n(a){M.css("cursor",a)}var b=function(){},c=function(){},e=d.trackDocument;return e||M.mousemove(h).mouseup(i).mouseout(i),D.before(M),{activateHandlers:j,setCursor:n}}(),bd=function(){function e(){d.keySupport&&(b.show(),b.focus())}function f(a){b.hide()}function g(a,b,c){d.allowMove&&(_.moveOffset([b,c]),bb.updateVisible(!0)),a.preventDefault(),a.stopPropagation()}function i(a){if(a.ctrlKey||a.metaKey)return!0;Y=a.shiftKey?!0:!1;var b=Y?10:1;switch(a.keyCode){case 37:g(a,-b,0);break;case 39:g(a,b,0);break;case 38:g(a,0,-b);break;
case 40:g(a,0,b);break;case 27:d.allowSelect&&bb.release();break;case 9:return!0}return!1}var b=a('<input type="radio" />').css({position:"fixed",left:"-120px",width:"12px"}).addClass("jcrop-keymgr"),c=a("<div />").css({position:"absolute",overflow:"hidden"}).append(b);return d.keySupport&&(b.keydown(i).blur(f),h||!d.fixedSupport?(b.css({position:"absolute",left:"-20px"}),c.append(b).insertBefore(D)):b.insertBefore(D)),{watchKeys:e}}();Z.support&&M.bind("touchstart.jcrop",Z.newSelection),J.hide(),br(!0);var bs={setImage:bp,animateTo:bf,setSelect:bg,setOptions:bk,tellSelect:bi,tellScaled:bj,setClass:be,disable:bl,enable:bm,cancel:bn,release:bb.release,destroy:bo,focus:bd.watchKeys,getBounds:function(){return[E*T,F*U]},getWidgetSize:function(){return[E,F]},getScaleFactor:function(){return[T,U]},getOptions:function(){return d},ui:{holder:G,selection:K}};return g&&G.bind("selectstart",function(){return!1}),A.data("Jcrop",bs),bs},a.fn.Jcrop=function(b,c){var d;return this.each(function(){if(a(this).data("Jcrop")){if(
b==="api")return a(this).data("Jcrop");a(this).data("Jcrop").setOptions(b)}else this.tagName=="IMG"?a.Jcrop.Loader(this,function(){a(this).css({display:"block",visibility:"hidden"}),d=a.Jcrop(this,b),a.isFunction(c)&&c.call(d)}):(a(this).css({display:"block",visibility:"hidden"}),d=a.Jcrop(this,b),a.isFunction(c)&&c.call(d))}),this},a.Jcrop.Loader=function(b,c,d){function g(){f.complete?(e.unbind(".jcloader"),a.isFunction(c)&&c.call(f)):window.setTimeout(g,50)}var e=a(b),f=e[0];e.bind("load.jcloader",g).bind("error.jcloader",function(b){e.unbind(".jcloader"),a.isFunction(d)&&d.call(f)}),f.complete&&a.isFunction(c)&&(e.unbind(".jcloader"),c.call(f))},a.Jcrop.defaults={allowSelect:!0,allowMove:!0,allowResize:!0,trackDocument:!0,baseClass:"jcrop",addClass:null,bgColor:"black",bgOpacity:.6,bgFade:!1,borderOpacity:.4,handleOpacity:.5,handleSize:null,aspectRatio:0,keySupport:!0,createHandles:["n","s","e","w","nw","ne","se","sw"],createDragbars:["n","s","e","w"],createBorders:["n","s","e","w"],drawBorders:!0,dragEdges
:!0,fixedSupport:!0,touchSupport:null,shade:null,boxWidth:0,boxHeight:0,boundary:2,fadeTime:400,animationDelay:20,swingSpeed:3,minSelect:[0,0],maxSize:[0,0],minSize:[0,0],onChange:function(){},onSelect:function(){},onDblClick:function(){},onRelease:function(){}}})(jQuery);
/**
 * menu-aim is a jQuery plugin for dropdown menus that can differentiate
 * between a user trying hover over a dropdown item vs trying to navigate into
 * a submenu's contents.
 *
 * menu-aim assumes that you have are using a menu with submenus that expand
 * to the menu's right. It will fire events when the user's mouse enters a new
 * dropdown item *and* when that item is being intentionally hovered over.
 *
 * __________________________
 * | Monkeys  >|   Gorilla  |
 * | Gorillas >|   Content  |
 * | Chimps   >|   Here     |
 * |___________|____________|
 *
 * In the above example, "Gorillas" is selected and its submenu content is
 * being shown on the right. Imagine that the user's cursor is hovering over
 * "Gorillas." When they move their mouse into the "Gorilla Content" area, they
 * may briefly hover over "Chimps." This shouldn't close the "Gorilla Content"
 * area.
 *
 * This problem is normally solved using timeouts and delays. menu-aim tries to
 * solve this by detecting the direction of the user's mouse movement. This can
 * make for quicker transitions when navigating up and down the menu. The
 * experience is hopefully similar to amazon.com/'s "Shop by Department"
 * dropdown.
 *
 * Use like so:
 *
 *      $("#menu").menuAim({
 *          activate: $.noop,  // fired on row activation
 *          deactivate: $.noop  // fired on row deactivation
 *      });
 *
 *  ...to receive events when a menu's row has been purposefully (de)activated.
 *
 * The following options can be passed to menuAim. All functions execute with
 * the relevant row's HTML element as the execution context ('this'):
 *
 *      .menuAim({
 *          // Function to call when a row is purposefully activated. Use this
 *          // to show a submenu's content for the activated row.
 *          activate: function() {},
 *
 *          // Function to call when a row is deactivated.
 *          deactivate: function() {},
 *
 *          // Function to call when mouse enters a menu row. Entering a row
 *          // does not mean the row has been activated, as the user may be
 *          // mousing over to a submenu.
 *          enter: function() {},
 *
 *          // Function to call when mouse exits a menu row.
 *          exit: function() {},
 *
 *          // Selector for identifying which elements in the menu are rows
 *          // that can trigger the above events. Defaults to "> li".
 *          rowSelector: "> li",
 *
 *          // You may have some menu rows that aren't submenus and therefore
 *          // shouldn't ever need to "activate." If so, filter submenu rows w/
 *          // this selector. Defaults to "*" (all elements).
 *          submenuSelector: "*",
 *
 *          // Direction the submenu opens relative to the main menu. Can be
 *          // left, right, above, or below. Defaults to "right".
 *          submenuDirection: "right"
 *      });
 *
 * https://github.com/kamens/jQuery-menu-aim
*/
(function($) {

    $.fn.menuAim = function(opts) {
        // Initialize menu-aim for all elements in jQuery collection
        this.each(function() {
            init.call(this, opts);
        });

        return this;
    };

    function init(opts) {
        var $menu = $(this),
            activeRow = null,
            mouseLocs = [],
            lastDelayLoc = null,
            timeoutId = null,
            options = $.extend({
                rowSelector: "> li",
                submenuSelector: "*",
                submenuDirection: "right",
                tolerance: 75,  // bigger = more forgivey when entering submenu
                enter: $.noop,
                exit: $.noop,
                activate: $.noop,
                deactivate: $.noop,
                exitMenu: $.noop
            }, opts);

        var MOUSE_LOCS_TRACKED = 3,  // number of past mouse locations to track
            DELAY = 300;  // ms delay when user appears to be entering submenu

        /**
         * Keep track of the last few locations of the mouse.
         */
        var mousemoveDocument = function(e) {
                mouseLocs.push({x: e.pageX, y: e.pageY});

                if (mouseLocs.length > MOUSE_LOCS_TRACKED) {
                    mouseLocs.shift();
                }
            };

        /**
         * Cancel possible row activations when leaving the menu entirely
         */
        var mouseleaveMenu = function() {
                if (timeoutId) {
                    clearTimeout(timeoutId);
                }

                // If exitMenu is supplied and returns true, deactivate the
                // currently active row on menu exit.
                if (options.exitMenu(this)) {
                    if (activeRow) {
                        options.deactivate(activeRow);
                    }

                    activeRow = null;
                }
            };

        /**
         * Trigger a possible row activation whenever entering a new row.
         */
        var mouseenterRow = function() {
                if (timeoutId) {
                    // Cancel any previous activation delays
                    clearTimeout(timeoutId);
                }

                options.enter(this);
                possiblyActivate(this);
            },
            mouseleaveRow = function() {
                options.exit(this);
            };

        /*
         * Immediately activate a row if the user clicks on it.
         */
        var clickRow = function() {
                activate(this);
            };

        /**
         * Activate a menu row.
         */
        var activate = function(row) {
                if (row == activeRow) {
                    return;
                }

                if (activeRow) {
                    options.deactivate(activeRow);
                }

                options.activate(row);
                activeRow = row;
            };

        /**
         * Possibly activate a menu row. If mouse movement indicates that we
         * shouldn't activate yet because user may be trying to enter
         * a submenu's content, then delay and check again later.
         */
        var possiblyActivate = function(row) {
                var delay = activationDelay();

                if (delay) {
                    timeoutId = setTimeout(function() {
                        possiblyActivate(row);
                    }, delay);
                } else {
                    activate(row);
                }
            };

        /**
         * Return the amount of time that should be used as a delay before the
         * currently hovered row is activated.
         *
         * Returns 0 if the activation should happen immediately. Otherwise,
         * returns the number of milliseconds that should be delayed before
         * checking again to see if the row should be activated.
         */
        var activationDelay = function() {
                if (!activeRow || !$(activeRow).is(options.submenuSelector)) {
                    // If there is no other submenu row already active, then
                    // go ahead and activate immediately.
                    return 0;
                }

                var offset = $menu.offset(),
                    upperLeft = {
                        x: offset.left,
                        y: offset.top - options.tolerance
                    },
                    upperRight = {
                        x: offset.left + $menu.outerWidth(),
                        y: upperLeft.y
                    },
                    lowerLeft = {
                        x: offset.left,
                        y: offset.top + $menu.outerHeight() + options.tolerance
                    },
                    lowerRight = {
                        x: offset.left + $menu.outerWidth(),
                        y: lowerLeft.y
                    },
                    loc = mouseLocs[mouseLocs.length - 1],
                    prevLoc = mouseLocs[0];

                if (!loc) {
                    return 0;
                }

                if (!prevLoc) {
                    prevLoc = loc;
                }

                if (prevLoc.x < offset.left || prevLoc.x > lowerRight.x ||
                    prevLoc.y < offset.top || prevLoc.y > lowerRight.y) {
                    // If the previous mouse location was outside of the entire
                    // menu's bounds, immediately activate.
                    return 0;
                }

                if (lastDelayLoc &&
                        loc.x == lastDelayLoc.x && loc.y == lastDelayLoc.y) {
                    // If the mouse hasn't moved since the last time we checked
                    // for activation status, immediately activate.
                    return 0;
                }

                // Detect if the user is moving towards the currently activated
                // submenu.
                //
                // If the mouse is heading relatively clearly towards
                // the submenu's content, we should wait and give the user more
                // time before activating a new row. If the mouse is heading
                // elsewhere, we can immediately activate a new row.
                //
                // We detect this by calculating the slope formed between the
                // current mouse location and the upper/lower right points of
                // the menu. We do the same for the previous mouse location.
                // If the current mouse location's slopes are
                // increasing/decreasing appropriately compared to the
                // previous's, we know the user is moving toward the submenu.
                //
                // Note that since the y-axis increases as the cursor moves
                // down the screen, we are looking for the slope between the
                // cursor and the upper right corner to decrease over time, not
                // increase (somewhat counterintuitively).
                function slope(a, b) {
                    return (b.y - a.y) / (b.x - a.x);
                };

                var decreasingCorner = upperRight,
                    increasingCorner = lowerRight;

                // Our expectations for decreasing or increasing slope values
                // depends on which direction the submenu opens relative to the
                // main menu. By default, if the menu opens on the right, we
                // expect the slope between the cursor and the upper right
                // corner to decrease over time, as explained above. If the
                // submenu opens in a different direction, we change our slope
                // expectations.
                if (options.submenuDirection == "left") {
                    decreasingCorner = lowerLeft;
                    increasingCorner = upperLeft;
                } else if (options.submenuDirection == "below") {
                    decreasingCorner = lowerRight;
                    increasingCorner = lowerLeft;
                } else if (options.submenuDirection == "above") {
                    decreasingCorner = upperLeft;
                    increasingCorner = upperRight;
                }

                var decreasingSlope = slope(loc, decreasingCorner),
                    increasingSlope = slope(loc, increasingCorner),
                    prevDecreasingSlope = slope(prevLoc, decreasingCorner),
                    prevIncreasingSlope = slope(prevLoc, increasingCorner);

                if (decreasingSlope < prevDecreasingSlope &&
                        increasingSlope > prevIncreasingSlope) {
                    // Mouse is moving from previous location towards the
                    // currently activated submenu. Delay before activating a
                    // new menu row, because user may be moving into submenu.
                    lastDelayLoc = loc;
                    return DELAY;
                }

                lastDelayLoc = null;
                return 0;
            };

        /**
         * Hook up initial menu events
         */
        $menu
            .mouseleave(mouseleaveMenu)
            .find(options.rowSelector)
                .mouseenter(mouseenterRow)
                .mouseleave(mouseleaveRow)
                .click(clickRow);

        $(document).mousemove(mousemoveDocument);

    };
})(jQuery);


/*
 * jQuery Highlight plugin
 *
 * Based on highlight v3 by Johann Burkard
 * http://johannburkard.de/blog/programming/javascript/highlight-javascript-text-higlighting-jquery-plugin.html
 *
 * Code a little bit refactored and cleaned (in my humble opinion).
 * Most important changes:
 *  - has an option to highlight only entire words (wordsOnly - false by default),
 *  - has an option to be case sensitive (caseSensitive - false by default)
 *  - highlight element tag and class names can be specified in options
 *
 * Usage:
 *   // wrap every occurrance of text 'lorem' in content
 *   // with <span class='highlight'> (default options)
 *   $('#content').highlight('lorem');
 *
 *   // search for and highlight more terms at once
 *   // so you can save some time on traversing DOM
 *   $('#content').highlight(['lorem', 'ipsum']);
 *   $('#content').highlight('lorem ipsum');
 *
 *   // search only for entire word 'lorem'
 *   $('#content').highlight('lorem', { wordsOnly: true });
 *
 *   // don't ignore case during search of term 'lorem'
 *   $('#content').highlight('lorem', { caseSensitive: true });
 *
 *   // wrap every occurrance of term 'ipsum' in content
 *   // with <em class='important'>
 *   $('#content').highlight('ipsum', { element: 'em', className: 'important' });
 *
 *   // remove default highlight
 *   $('#content').unhighlight();
 *
 *   // remove custom highlight
 *   $('#content').unhighlight({ element: 'em', className: 'important' });
 *
 *
 * Copyright (c) 2009 Bartek Szopka
 *
 * Licensed under MIT license.
 *
 */
(function (factory) {
    if (typeof define === 'function' && define.amd) {
        // AMD. Register as an anonymous module.
        define(['jquery'], factory);
    } else if (typeof exports === 'object') {
        // Node/CommonJS
        factory(require('jquery'));
    } else {
        // Browser globals
        factory(jQuery);
    }
}(function (jQuery) {
    jQuery.extend({
        highlight: function (node, re, nodeName, className) {
            if (node.nodeType === 3) {
                var match = node.data.match(re);
                if (match) {
                    var highlight = document.createElement(nodeName || 'span');
                    highlight.className = className || 'highlight';
                    var wordNode = node.splitText(match.index);
                    wordNode.splitText(match[0].length);
                    var wordClone = wordNode.cloneNode(true);
                    highlight.appendChild(wordClone);
                    wordNode.parentNode.replaceChild(highlight, wordNode);
                    return 1; //skip added node in parent
                }
            } else if ((node.nodeType === 1 && node.childNodes) && // only element nodes that have children
                    !/(script|style)/i.test(node.tagName) && // ignore script and style nodes
                    !(node.tagName === nodeName.toUpperCase() && node.className === className)) { // skip if already highlighted
                for (var i = 0; i < node.childNodes.length; i++) {
                    i += jQuery.highlight(node.childNodes[i], re, nodeName, className);
                }
            }
            return 0;
        }
    });

    jQuery.fn.unhighlight = function (options) {
        var settings = { className: 'highlight', element: 'span' };
        jQuery.extend(settings, options);

        return this.find(settings.element + "." + settings.className).each(function () {
            var parent = this.parentNode;
            parent.replaceChild(this.firstChild, this);
            parent.normalize();
        }).end();
    };

    jQuery.fn.highlight = function (words, options) {
        var settings = { className: 'highlight', element: 'span', caseSensitive: false, wordsOnly: false };
        jQuery.extend(settings, options);
        
        if (words.constructor === String) {
            words = [words];
        }
        words = jQuery.grep(words, function(word, i){
          return word != '';
        });
        words = jQuery.map(words, function(word, i) {
          return word.replace(/[-[\]{}()*+?.,\\^$|#\s]/g, "\\$&");
        });
        if (words.length == 0) { return this; };

        var flag = settings.caseSensitive ? "" : "i";
        var pattern = "(" + words.join("|") + ")";
        if (settings.wordsOnly) {
            pattern = "\\b" + pattern + "\\b";
        }
        var re = new RegExp(pattern, flag);
        
        return this.each(function () {
            jQuery.highlight(this, re, settings.element, settings.className);
        });
    };
}));

;(function () {
	'use strict';

	/**
	 * @preserve FastClick: polyfill to remove click delays on browsers with touch UIs.
	 *
	 * @codingstandard ftlabs-jsv2
	 * @copyright The Financial Times Limited [All Rights Reserved]
	 * @license MIT License (see LICENSE.txt)
	 */

	/*jslint browser:true, node:true*/
	/*global define, Event, Node*/


	/**
	 * Instantiate fast-clicking listeners on the specified layer.
	 *
	 * @constructor
	 * @param {Element} layer The layer to listen on
	 * @param {Object} [options={}] The options to override the defaults
	 */
	function FastClick(layer, options) {
		var oldOnClick;

		options = options || {};

		/**
		 * Whether a click is currently being tracked.
		 *
		 * @type boolean
		 */
		this.trackingClick = false;


		/**
		 * Timestamp for when click tracking started.
		 *
		 * @type number
		 */
		this.trackingClickStart = 0;


		/**
		 * The element being tracked for a click.
		 *
		 * @type EventTarget
		 */
		this.targetElement = null;


		/**
		 * X-coordinate of touch start event.
		 *
		 * @type number
		 */
		this.touchStartX = 0;


		/**
		 * Y-coordinate of touch start event.
		 *
		 * @type number
		 */
		this.touchStartY = 0;


		/**
		 * ID of the last touch, retrieved from Touch.identifier.
		 *
		 * @type number
		 */
		this.lastTouchIdentifier = 0;


		/**
		 * Touchmove boundary, beyond which a click will be cancelled.
		 *
		 * @type number
		 */
		this.touchBoundary = options.touchBoundary || 10;


		/**
		 * The FastClick layer.
		 *
		 * @type Element
		 */
		this.layer = layer;

		/**
		 * The minimum time between tap(touchstart and touchend) events
		 *
		 * @type number
		 */
		this.tapDelay = options.tapDelay || 200;

		/**
		 * The maximum time for a tap
		 *
		 * @type number
		 */
		this.tapTimeout = options.tapTimeout || 700;

		if (FastClick.notNeeded(layer)) {
			return;
		}

		// Some old versions of Android don't have Function.prototype.bind
		function bind(method, context) {
			return function() { return method.apply(context, arguments); };
		}


		var methods = ['onMouse', 'onClick', 'onTouchStart', 'onTouchMove', 'onTouchEnd', 'onTouchCancel'];
		var context = this;
		for (var i = 0, l = methods.length; i < l; i++) {
			context[methods[i]] = bind(context[methods[i]], context);
		}

		// Set up event handlers as required
		if (deviceIsAndroid) {
			layer.addEventListener('mouseover', this.onMouse, true);
			layer.addEventListener('mousedown', this.onMouse, true);
			layer.addEventListener('mouseup', this.onMouse, true);
		}

		layer.addEventListener('click', this.onClick, true);
		layer.addEventListener('touchstart', this.onTouchStart, false);
		layer.addEventListener('touchmove', this.onTouchMove, false);
		layer.addEventListener('touchend', this.onTouchEnd, false);
		layer.addEventListener('touchcancel', this.onTouchCancel, false);

		// Hack is required for browsers that don't support Event#stopImmediatePropagation (e.g. Android 2)
		// which is how FastClick normally stops click events bubbling to callbacks registered on the FastClick
		// layer when they are cancelled.
		if (!Event.prototype.stopImmediatePropagation) {
			layer.removeEventListener = function(type, callback, capture) {
				var rmv = Node.prototype.removeEventListener;
				if (type === 'click') {
					rmv.call(layer, type, callback.hijacked || callback, capture);
				} else {
					rmv.call(layer, type, callback, capture);
				}
			};

			layer.addEventListener = function(type, callback, capture) {
				var adv = Node.prototype.addEventListener;
				if (type === 'click') {
					adv.call(layer, type, callback.hijacked || (callback.hijacked = function(event) {
						if (!event.propagationStopped) {
							callback(event);
						}
					}), capture);
				} else {
					adv.call(layer, type, callback, capture);
				}
			};
		}

		// If a handler is already declared in the element's onclick attribute, it will be fired before
		// FastClick's onClick handler. Fix this by pulling out the user-defined handler function and
		// adding it as listener.
		if (typeof layer.onclick === 'function') {

			// Android browser on at least 3.2 requires a new reference to the function in layer.onclick
			// - the old one won't work if passed to addEventListener directly.
			oldOnClick = layer.onclick;
			layer.addEventListener('click', function(event) {
				oldOnClick(event);
			}, false);
			layer.onclick = null;
		}
	}

	/**
	* Windows Phone 8.1 fakes user agent string to look like Android and iPhone.
	*
	* @type boolean
	*/
	var deviceIsWindowsPhone = navigator.userAgent.indexOf("Windows Phone") >= 0;

	/**
	 * Android requires exceptions.
	 *
	 * @type boolean
	 */
	var deviceIsAndroid = navigator.userAgent.indexOf('Android') > 0 && !deviceIsWindowsPhone;


	/**
	 * iOS requires exceptions.
	 *
	 * @type boolean
	 */
	var deviceIsIOS = /iP(ad|hone|od)/.test(navigator.userAgent) && !deviceIsWindowsPhone;


	/**
	 * iOS 4 requires an exception for select elements.
	 *
	 * @type boolean
	 */
	var deviceIsIOS4 = deviceIsIOS && (/OS 4_\d(_\d)?/).test(navigator.userAgent);


	/**
	 * iOS 6.0-7.* requires the target element to be manually derived
	 *
	 * @type boolean
	 */
	var deviceIsIOSWithBadTarget = deviceIsIOS && (/OS [6-7]_\d/).test(navigator.userAgent);

	/**
	 * BlackBerry requires exceptions.
	 *
	 * @type boolean
	 */
	var deviceIsBlackBerry10 = navigator.userAgent.indexOf('BB10') > 0;

	/**
	 * Determine whether a given element requires a native click.
	 *
	 * @param {EventTarget|Element} target Target DOM element
	 * @returns {boolean} Returns true if the element needs a native click
	 */
	FastClick.prototype.needsClick = function(target) {
		switch (target.nodeName.toLowerCase()) {

		// Don't send a synthetic click to disabled inputs (issue #62)
		case 'button':
		case 'select':
		case 'textarea':
			if (target.disabled) {
				return true;
			}

			break;
		case 'input':

			// File inputs need real clicks on iOS 6 due to a browser bug (issue #68)
			if ((deviceIsIOS && target.type === 'file') || target.disabled) {
				return true;
			}

			break;
		case 'label':
		case 'iframe': // iOS8 homescreen apps can prevent events bubbling into frames
		case 'video':
			return true;
		}

		return (/\bneedsclick\b/).test(target.className);
	};


	/**
	 * Determine whether a given element requires a call to focus to simulate click into element.
	 *
	 * @param {EventTarget|Element} target Target DOM element
	 * @returns {boolean} Returns true if the element requires a call to focus to simulate native click.
	 */
	FastClick.prototype.needsFocus = function(target) {
		switch (target.nodeName.toLowerCase()) {
		case 'textarea':
			return true;
		case 'select':
			return !deviceIsAndroid;
		case 'input':
			switch (target.type) {
			case 'button':
			case 'checkbox':
			case 'file':
			case 'image':
			case 'radio':
			case 'submit':
				return false;
			}

			// No point in attempting to focus disabled inputs
			return !target.disabled && !target.readOnly;
		default:
			return (/\bneedsfocus\b/).test(target.className);
		}
	};


	/**
	 * Send a click event to the specified element.
	 *
	 * @param {EventTarget|Element} targetElement
	 * @param {Event} event
	 */
	FastClick.prototype.sendClick = function(targetElement, event) {
		var clickEvent, touch;

		// On some Android devices activeElement needs to be blurred otherwise the synthetic click will have no effect (#24)
		if (document.activeElement && document.activeElement !== targetElement) {
			document.activeElement.blur();
		}

		touch = event.changedTouches[0];

		// Synthesise a click event, with an extra attribute so it can be tracked
		clickEvent = document.createEvent('MouseEvents');
		clickEvent.initMouseEvent(this.determineEventType(targetElement), true, true, window, 1, touch.screenX, touch.screenY, touch.clientX, touch.clientY, false, false, false, false, 0, null);
		clickEvent.forwardedTouchEvent = true;
		targetElement.dispatchEvent(clickEvent);
	};

	FastClick.prototype.determineEventType = function(targetElement) {

		//Issue #159: Android Chrome Select Box does not open with a synthetic click event
		if (deviceIsAndroid && targetElement.tagName.toLowerCase() === 'select') {
			return 'mousedown';
		}

		return 'click';
	};


	/**
	 * @param {EventTarget|Element} targetElement
	 */
	FastClick.prototype.focus = function(targetElement) {
		var length;

		// Issue #160: on iOS 7, some input elements (e.g. date datetime month) throw a vague TypeError on setSelectionRange. These elements don't have an integer value for the selectionStart and selectionEnd properties, but unfortunately that can't be used for detection because accessing the properties also throws a TypeError. Just check the type instead. Filed as Apple bug #15122724.
		if (deviceIsIOS && targetElement.setSelectionRange && targetElement.type.indexOf('date') !== 0 && targetElement.type !== 'time' && targetElement.type !== 'month') {
			length = targetElement.value.length;
			targetElement.setSelectionRange(length, length);
		} else {
			targetElement.focus();
		}
	};


	/**
	 * Check whether the given target element is a child of a scrollable layer and if so, set a flag on it.
	 *
	 * @param {EventTarget|Element} targetElement
	 */
	FastClick.prototype.updateScrollParent = function(targetElement) {
		var scrollParent, parentElement;

		scrollParent = targetElement.fastClickScrollParent;

		// Attempt to discover whether the target element is contained within a scrollable layer. Re-check if the
		// target element was moved to another parent.
		if (!scrollParent || !scrollParent.contains(targetElement)) {
			parentElement = targetElement;
			do {
				if (parentElement.scrollHeight > parentElement.offsetHeight) {
					scrollParent = parentElement;
					targetElement.fastClickScrollParent = parentElement;
					break;
				}

				parentElement = parentElement.parentElement;
			} while (parentElement);
		}

		// Always update the scroll top tracker if possible.
		if (scrollParent) {
			scrollParent.fastClickLastScrollTop = scrollParent.scrollTop;
		}
	};


	/**
	 * @param {EventTarget} targetElement
	 * @returns {Element|EventTarget}
	 */
	FastClick.prototype.getTargetElementFromEventTarget = function(eventTarget) {

		// On some older browsers (notably Safari on iOS 4.1 - see issue #56) the event target may be a text node.
		if (eventTarget.nodeType === Node.TEXT_NODE) {
			return eventTarget.parentNode;
		}

		return eventTarget;
	};


	/**
	 * On touch start, record the position and scroll offset.
	 *
	 * @param {Event} event
	 * @returns {boolean}
	 */
	FastClick.prototype.onTouchStart = function(event) {
		var targetElement, touch, selection;

		// Ignore multiple touches, otherwise pinch-to-zoom is prevented if both fingers are on the FastClick element (issue #111).
		if (event.targetTouches.length > 1) {
			return true;
		}

		targetElement = this.getTargetElementFromEventTarget(event.target);
		touch = event.targetTouches[0];

		if (deviceIsIOS) {

			// Only trusted events will deselect text on iOS (issue #49)
			selection = window.getSelection();
			if (selection.rangeCount && !selection.isCollapsed) {
				return true;
			}

			if (!deviceIsIOS4) {

				// Weird things happen on iOS when an alert or confirm dialog is opened from a click event callback (issue #23):
				// when the user next taps anywhere else on the page, new touchstart and touchend events are dispatched
				// with the same identifier as the touch event that previously triggered the click that triggered the alert.
				// Sadly, there is an issue on iOS 4 that causes some normal touch events to have the same identifier as an
				// immediately preceeding touch event (issue #52), so this fix is unavailable on that platform.
				// Issue 120: touch.identifier is 0 when Chrome dev tools 'Emulate touch events' is set with an iOS device UA string,
				// which causes all touch events to be ignored. As this block only applies to iOS, and iOS identifiers are always long,
				// random integers, it's safe to to continue if the identifier is 0 here.
				if (touch.identifier && touch.identifier === this.lastTouchIdentifier) {
					event.preventDefault();
					return false;
				}

				this.lastTouchIdentifier = touch.identifier;

				// If the target element is a child of a scrollable layer (using -webkit-overflow-scrolling: touch) and:
				// 1) the user does a fling scroll on the scrollable layer
				// 2) the user stops the fling scroll with another tap
				// then the event.target of the last 'touchend' event will be the element that was under the user's finger
				// when the fling scroll was started, causing FastClick to send a click event to that layer - unless a check
				// is made to ensure that a parent layer was not scrolled before sending a synthetic click (issue #42).
				this.updateScrollParent(targetElement);
			}
		}

		this.trackingClick = true;
		this.trackingClickStart = event.timeStamp;
		this.targetElement = targetElement;

		this.touchStartX = touch.pageX;
		this.touchStartY = touch.pageY;

		// Prevent phantom clicks on fast double-tap (issue #36)
		if ((event.timeStamp - this.lastClickTime) < this.tapDelay) {
			event.preventDefault();
		}

		return true;
	};


	/**
	 * Based on a touchmove event object, check whether the touch has moved past a boundary since it started.
	 *
	 * @param {Event} event
	 * @returns {boolean}
	 */
	FastClick.prototype.touchHasMoved = function(event) {
		var touch = event.changedTouches[0], boundary = this.touchBoundary;

		if (Math.abs(touch.pageX - this.touchStartX) > boundary || Math.abs(touch.pageY - this.touchStartY) > boundary) {
			return true;
		}

		return false;
	};


	/**
	 * Update the last position.
	 *
	 * @param {Event} event
	 * @returns {boolean}
	 */
	FastClick.prototype.onTouchMove = function(event) {
		if (!this.trackingClick) {
			return true;
		}

		// If the touch has moved, cancel the click tracking
		if (this.targetElement !== this.getTargetElementFromEventTarget(event.target) || this.touchHasMoved(event)) {
			this.trackingClick = false;
			this.targetElement = null;
		}

		return true;
	};


	/**
	 * Attempt to find the labelled control for the given label element.
	 *
	 * @param {EventTarget|HTMLLabelElement} labelElement
	 * @returns {Element|null}
	 */
	FastClick.prototype.findControl = function(labelElement) {

		// Fast path for newer browsers supporting the HTML5 control attribute
		if (labelElement.control !== undefined) {
			return labelElement.control;
		}

		// All browsers under test that support touch events also support the HTML5 htmlFor attribute
		if (labelElement.htmlFor) {
			return document.getElementById(labelElement.htmlFor);
		}

		// If no for attribute exists, attempt to retrieve the first labellable descendant element
		// the list of which is defined here: http://www.w3.org/TR/html5/forms.html#category-label
		return labelElement.querySelector('button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea');
	};


	/**
	 * On touch end, determine whether to send a click event at once.
	 *
	 * @param {Event} event
	 * @returns {boolean}
	 */
	FastClick.prototype.onTouchEnd = function(event) {
		var forElement, trackingClickStart, targetTagName, scrollParent, touch, targetElement = this.targetElement;

		if (!this.trackingClick) {
			return true;
		}

		// Prevent phantom clicks on fast double-tap (issue #36)
		if ((event.timeStamp - this.lastClickTime) < this.tapDelay) {
			this.cancelNextClick = true;
			return true;
		}

		if ((event.timeStamp - this.trackingClickStart) > this.tapTimeout) {
			return true;
		}

		// Reset to prevent wrong click cancel on input (issue #156).
		this.cancelNextClick = false;

		this.lastClickTime = event.timeStamp;

		trackingClickStart = this.trackingClickStart;
		this.trackingClick = false;
		this.trackingClickStart = 0;

		// On some iOS devices, the targetElement supplied with the event is invalid if the layer
		// is performing a transition or scroll, and has to be re-detected manually. Note that
		// for this to function correctly, it must be called *after* the event target is checked!
		// See issue #57; also filed as rdar://13048589 .
		if (deviceIsIOSWithBadTarget) {
			touch = event.changedTouches[0];

			// In certain cases arguments of elementFromPoint can be negative, so prevent setting targetElement to null
			targetElement = document.elementFromPoint(touch.pageX - window.pageXOffset, touch.pageY - window.pageYOffset) || targetElement;
			targetElement.fastClickScrollParent = this.targetElement.fastClickScrollParent;
		}

		targetTagName = targetElement.tagName.toLowerCase();
		if (targetTagName === 'label') {
			forElement = this.findControl(targetElement);
			if (forElement) {
				this.focus(targetElement);
				if (deviceIsAndroid) {
					return false;
				}

				targetElement = forElement;
			}
		} else if (this.needsFocus(targetElement)) {

			// Case 1: If the touch started a while ago (best guess is 100ms based on tests for issue #36) then focus will be triggered anyway. Return early and unset the target element reference so that the subsequent click will be allowed through.
			// Case 2: Without this exception for input elements tapped when the document is contained in an iframe, then any inputted text won't be visible even though the value attribute is updated as the user types (issue #37).
			if ((event.timeStamp - trackingClickStart) > 100 || (deviceIsIOS && window.top !== window && targetTagName === 'input')) {
				this.targetElement = null;
				return false;
			}

			this.focus(targetElement);
			this.sendClick(targetElement, event);

			// Select elements need the event to go through on iOS 4, otherwise the selector menu won't open.
			// Also this breaks opening selects when VoiceOver is active on iOS6, iOS7 (and possibly others)
			if (!deviceIsIOS || targetTagName !== 'select') {
				this.targetElement = null;
				event.preventDefault();
			}

			return false;
		}

		if (deviceIsIOS && !deviceIsIOS4) {

			// Don't send a synthetic click event if the target element is contained within a parent layer that was scrolled
			// and this tap is being used to stop the scrolling (usually initiated by a fling - issue #42).
			scrollParent = targetElement.fastClickScrollParent;
			if (scrollParent && scrollParent.fastClickLastScrollTop !== scrollParent.scrollTop) {
				return true;
			}
		}

		// Prevent the actual click from going though - unless the target node is marked as requiring
		// real clicks or if it is in the whitelist in which case only non-programmatic clicks are permitted.
		if (!this.needsClick(targetElement)) {
			event.preventDefault();
			this.sendClick(targetElement, event);
		}

		return false;
	};


	/**
	 * On touch cancel, stop tracking the click.
	 *
	 * @returns {void}
	 */
	FastClick.prototype.onTouchCancel = function() {
		this.trackingClick = false;
		this.targetElement = null;
	};


	/**
	 * Determine mouse events which should be permitted.
	 *
	 * @param {Event} event
	 * @returns {boolean}
	 */
	FastClick.prototype.onMouse = function(event) {

		// If a target element was never set (because a touch event was never fired) allow the event
		if (!this.targetElement) {
			return true;
		}

		if (event.forwardedTouchEvent) {
			return true;
		}

		// Programmatically generated events targeting a specific element should be permitted
		if (!event.cancelable) {
			return true;
		}

		// Derive and check the target element to see whether the mouse event needs to be permitted;
		// unless explicitly enabled, prevent non-touch click events from triggering actions,
		// to prevent ghost/doubleclicks.
		if (!this.needsClick(this.targetElement) || this.cancelNextClick) {

			// Prevent any user-added listeners declared on FastClick element from being fired.
			if (event.stopImmediatePropagation) {
				event.stopImmediatePropagation();
			} else {

				// Part of the hack for browsers that don't support Event#stopImmediatePropagation (e.g. Android 2)
				event.propagationStopped = true;
			}

			// Cancel the event
			event.stopPropagation();
			event.preventDefault();

			return false;
		}

		// If the mouse event is permitted, return true for the action to go through.
		return true;
	};


	/**
	 * On actual clicks, determine whether this is a touch-generated click, a click action occurring
	 * naturally after a delay after a touch (which needs to be cancelled to avoid duplication), or
	 * an actual click which should be permitted.
	 *
	 * @param {Event} event
	 * @returns {boolean}
	 */
	FastClick.prototype.onClick = function(event) {
		var permitted;

		// It's possible for another FastClick-like library delivered with third-party code to fire a click event before FastClick does (issue #44). In that case, set the click-tracking flag back to false and return early. This will cause onTouchEnd to return early.
		if (this.trackingClick) {
			this.targetElement = null;
			this.trackingClick = false;
			return true;
		}

		// Very odd behaviour on iOS (issue #18): if a submit element is present inside a form and the user hits enter in the iOS simulator or clicks the Go button on the pop-up OS keyboard the a kind of 'fake' click event will be triggered with the submit-type input element as the target.
		if (event.target.type === 'submit' && event.detail === 0) {
			return true;
		}

		permitted = this.onMouse(event);

		// Only unset targetElement if the click is not permitted. This will ensure that the check for !targetElement in onMouse fails and the browser's click doesn't go through.
		if (!permitted) {
			this.targetElement = null;
		}

		// If clicks are permitted, return true for the action to go through.
		return permitted;
	};


	/**
	 * Remove all FastClick's event listeners.
	 *
	 * @returns {void}
	 */
	FastClick.prototype.destroy = function() {
		var layer = this.layer;

		if (deviceIsAndroid) {
			layer.removeEventListener('mouseover', this.onMouse, true);
			layer.removeEventListener('mousedown', this.onMouse, true);
			layer.removeEventListener('mouseup', this.onMouse, true);
		}

		layer.removeEventListener('click', this.onClick, true);
		layer.removeEventListener('touchstart', this.onTouchStart, false);
		layer.removeEventListener('touchmove', this.onTouchMove, false);
		layer.removeEventListener('touchend', this.onTouchEnd, false);
		layer.removeEventListener('touchcancel', this.onTouchCancel, false);
	};


	/**
	 * Check whether FastClick is needed.
	 *
	 * @param {Element} layer The layer to listen on
	 */
	FastClick.notNeeded = function(layer) {
		var metaViewport;
		var chromeVersion;
		var blackberryVersion;
		var firefoxVersion;

		// Devices that don't support touch don't need FastClick
		if (typeof window.ontouchstart === 'undefined') {
			return true;
		}

		// Chrome version - zero for other browsers
		chromeVersion = +(/Chrome\/([0-9]+)/.exec(navigator.userAgent) || [,0])[1];

		if (chromeVersion) {

			if (deviceIsAndroid) {
				metaViewport = document.querySelector('meta[name=viewport]');

				if (metaViewport) {
					// Chrome on Android with user-scalable="no" doesn't need FastClick (issue #89)
					if (metaViewport.content.indexOf('user-scalable=no') !== -1) {
						return true;
					}
					// Chrome 32 and above with width=device-width or less don't need FastClick
					if (chromeVersion > 31 && document.documentElement.scrollWidth <= window.outerWidth) {
						return true;
					}
				}

			// Chrome desktop doesn't need FastClick (issue #15)
			} else {
				return true;
			}
		}

		if (deviceIsBlackBerry10) {
			blackberryVersion = navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/);

			// BlackBerry 10.3+ does not require Fastclick library.
			// https://github.com/ftlabs/fastclick/issues/251
			if (blackberryVersion[1] >= 10 && blackberryVersion[2] >= 3) {
				metaViewport = document.querySelector('meta[name=viewport]');

				if (metaViewport) {
					// user-scalable=no eliminates click delay.
					if (metaViewport.content.indexOf('user-scalable=no') !== -1) {
						return true;
					}
					// width=device-width (or less than device-width) eliminates click delay.
					if (document.documentElement.scrollWidth <= window.outerWidth) {
						return true;
					}
				}
			}
		}

		// IE10 with -ms-touch-action: none or manipulation, which disables double-tap-to-zoom (issue #97)
		if (layer.style.msTouchAction === 'none' || layer.style.touchAction === 'manipulation') {
			return true;
		}

		// Firefox version - zero for other browsers
		firefoxVersion = +(/Firefox\/([0-9]+)/.exec(navigator.userAgent) || [,0])[1];

		if (firefoxVersion >= 27) {
			// Firefox 27+ does not have tap delay if the content is not zoomable - https://bugzilla.mozilla.org/show_bug.cgi?id=922896

			metaViewport = document.querySelector('meta[name=viewport]');
			if (metaViewport && (metaViewport.content.indexOf('user-scalable=no') !== -1 || document.documentElement.scrollWidth <= window.outerWidth)) {
				return true;
			}
		}

		// IE11: prefixed -ms-touch-action is no longer supported and it's recomended to use non-prefixed version
		// http://msdn.microsoft.com/en-us/library/windows/apps/Hh767313.aspx
		if (layer.style.touchAction === 'none' || layer.style.touchAction === 'manipulation') {
			return true;
		}

		return false;
	};


	/**
	 * Factory method for creating a FastClick object
	 *
	 * @param {Element} layer The layer to listen on
	 * @param {Object} [options={}] The options to override the defaults
	 */
	FastClick.attach = function(layer, options) {
		return new FastClick(layer, options);
	};


	if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {

		// AMD. Register as an anonymous module.
		define(function() {
			return FastClick;
		});
	} else if (typeof module !== 'undefined' && module.exports) {
		module.exports = FastClick.attach;
		module.exports.FastClick = FastClick;
	} else {
		window.FastClick = FastClick;
	}
}());

/*! overthrow - An overflow:auto polyfill for responsive design. - v0.7.0 - 2013-11-04
* Copyright (c) 2013 Scott Jehl, Filament Group, Inc.; Licensed MIT */
/*! Overthrow. An overflow:auto polyfill for responsive design. (c) 2012: Scott Jehl, Filament Group, Inc. http://filamentgroup.github.com/Overthrow/license.txt */
(function( w, undefined ){
	
	var doc = w.document,
		docElem = doc.documentElement,
		enabledClassName = "overthrow-enabled",

		// Touch events are used in the polyfill, and thus are a prerequisite
		canBeFilledWithPoly = "ontouchmove" in doc,
		
		// The following attempts to determine whether the browser has native overflow support
		// so we can enable it but not polyfill
		nativeOverflow = 
			// Features-first. iOS5 overflow scrolling property check - no UA needed here. thanks Apple :)
			"WebkitOverflowScrolling" in docElem.style ||
			// Test the windows scrolling property as well
			"msOverflowStyle" in docElem.style ||
			// Touch events aren't supported and screen width is greater than X
			// ...basically, this is a loose "desktop browser" check. 
			// It may wrongly opt-in very large tablets with no touch support.
			( !canBeFilledWithPoly && w.screen.width > 800 ) ||
			// Hang on to your hats.
			// Whitelist some popular, overflow-supporting mobile browsers for now and the future
			// These browsers are known to get overlow support right, but give us no way of detecting it.
			(function(){
				var ua = w.navigator.userAgent,
					// Webkit crosses platforms, and the browsers on our list run at least version 534
					webkit = ua.match( /AppleWebKit\/([0-9]+)/ ),
					wkversion = webkit && webkit[1],
					wkLte534 = webkit && wkversion >= 534;
					
				return (
					/* Android 3+ with webkit gte 534
					~: Mozilla/5.0 (Linux; U; Android 3.0; en-us; Xoom Build/HRI39) AppleWebKit/534.13 (KHTML, like Gecko) Version/4.0 Safari/534.13 */
					ua.match( /Android ([0-9]+)/ ) && RegExp.$1 >= 3 && wkLte534 ||
					/* Blackberry 7+ with webkit gte 534
					~: Mozilla/5.0 (BlackBerry; U; BlackBerry 9900; en-US) AppleWebKit/534.11+ (KHTML, like Gecko) Version/7.0.0 Mobile Safari/534.11+ */
					ua.match( / Version\/([0-9]+)/ ) && RegExp.$1 >= 0 && w.blackberry && wkLte534 ||
					/* Blackberry Playbook with webkit gte 534
					~: Mozilla/5.0 (PlayBook; U; RIM Tablet OS 1.0.0; en-US) AppleWebKit/534.8+ (KHTML, like Gecko) Version/0.0.1 Safari/534.8+ */   
					ua.indexOf( "PlayBook" ) > -1 && wkLte534 && !ua.indexOf( "Android 2" ) === -1 ||
					/* Firefox Mobile (Fennec) 4 and up
					~: Mozilla/5.0 (Mobile; rv:15.0) Gecko/15.0 Firefox/15.0 */
					ua.match(/Firefox\/([0-9]+)/) && RegExp.$1 >= 4 ||
					/* WebOS 3 and up (TouchPad too)
					~: Mozilla/5.0 (hp-tablet; Linux; hpwOS/3.0.0; U; en-US) AppleWebKit/534.6 (KHTML, like Gecko) wOSBrowser/233.48 Safari/534.6 TouchPad/1.0 */
					ua.match( /wOSBrowser\/([0-9]+)/ ) && RegExp.$1 >= 233 && wkLte534 ||
					/* Nokia Browser N8
					~: Mozilla/5.0 (Symbian/3; Series60/5.2 NokiaN8-00/012.002; Profile/MIDP-2.1 Configuration/CLDC-1.1 ) AppleWebKit/533.4 (KHTML, like Gecko) NokiaBrowser/7.3.0 Mobile Safari/533.4 3gpp-gba 
					~: Note: the N9 doesn't have native overflow with one-finger touch. wtf */
					ua.match( /NokiaBrowser\/([0-9\.]+)/ ) && parseFloat(RegExp.$1) === 7.3 && webkit && wkversion >= 533
				);
			})();

	// Expose overthrow API
	w.overthrow = {};

	w.overthrow.enabledClassName = enabledClassName;

	w.overthrow.addClass = function(){
		if( docElem.className.indexOf( w.overthrow.enabledClassName ) === -1 ){
			docElem.className += " " + w.overthrow.enabledClassName;
		}
	};

	w.overthrow.removeClass = function(){
		docElem.className = docElem.className.replace( w.overthrow.enabledClassName, "" );
	};

	// Enable and potentially polyfill overflow
	w.overthrow.set = function(){
			
		// If nativeOverflow or at least the element canBeFilledWithPoly, add a class to cue CSS that assumes overflow scrolling will work (setting height on elements and such)
		if( nativeOverflow ){
			w.overthrow.addClass();
		}

	};

	// expose polyfillable 
	w.overthrow.canBeFilledWithPoly = canBeFilledWithPoly;

	// Destroy everything later. If you want to.
	w.overthrow.forget = function(){

		w.overthrow.removeClass();
		
	};
		
	// Expose overthrow API
	w.overthrow.support = nativeOverflow ? "native" : "none";
		
})( this );

/*! Overthrow. An overflow:auto polyfill for responsive design. (c) 2012: Scott Jehl, Filament Group, Inc. http://filamentgroup.github.com/Overthrow/license.txt */
(function( w, o, undefined ){

	// o is overthrow reference from overthrow-polyfill.js
	if( o === undefined ){
		return;
	}

	// Easing can use any of Robert Penner's equations (http://www.robertpenner.com/easing_terms_of_use.html). By default, overthrow includes ease-out-cubic
	// arguments: t = current iteration, b = initial value, c = end value, d = total iterations
	// use w.overthrow.easing to provide a custom function externally, or pass an easing function as a callback to the toss method
	o.easing = function (t, b, c, d) {
		return c*((t=t/d-1)*t*t + 1) + b;
	};

	// tossing property is true during a programatic scroll
	o.tossing = false;

	// Keeper of intervals
	var timeKeeper;

	/* toss scrolls and element with easing

	// elem is the element to scroll
	// options hash:
		* left is the desired horizontal scroll. Default is "+0". For relative distances, pass a string with "+" or "-" in front.
		* top is the desired vertical scroll. Default is "+0". For relative distances, pass a string with "+" or "-" in front.
		* duration is the number of milliseconds the throw will take. Default is 100.
		* easing is an optional custom easing function. Default is w.overthrow.easing. Must follow the easing function signature

	*/
	o.toss = function( elem, options ){
		o.intercept();
		var i = 0,
			sLeft = elem.scrollLeft,
			sTop = elem.scrollTop,
			// Toss defaults
			op = {
				top: "+0",
				left: "+0",
				duration: 50,
				easing: o.easing,
				finished: function() {}
			},
			endLeft, endTop, finished = false;

		// Mixin based on predefined defaults
		if( options ){
			for( var j in op ){
				if( options[ j ] !== undefined ){
					op[ j ] = options[ j ];
				}
			}
		}

		// Convert relative values to ints
		// First the left val
		if( typeof op.left === "string" ){
			op.left = parseFloat( op.left );
			endLeft = op.left + sLeft;
		}
		else {
			endLeft = op.left;
			op.left = op.left - sLeft;
		}
		// Then the top val
		if( typeof op.top === "string" ){

			op.top = parseFloat( op.top );
			endTop = op.top + sTop;
		}
		else {
			endTop = op.top;
			op.top = op.top - sTop;
		}

		o.tossing = true;
		timeKeeper = setInterval(function(){
			if( i++ < op.duration ){
				elem.scrollLeft = op.easing( i, sLeft, op.left, op.duration );
				elem.scrollTop = op.easing( i, sTop, op.top, op.duration );
			}
			else{
				if( endLeft !== elem.scrollLeft ){
					elem.scrollLeft = endLeft;
				} else {
					// if the end of the vertical scrolling has taken place
					// we know that we're done here call the callback
					// otherwise signal that horizontal scrolling is complete
					if( finished ) {
						op.finished();
					}
					finished = true;
				}

				if( endTop !== elem.scrollTop ){
					elem.scrollTop = endTop;
				} else {
					// if the end of the horizontal scrolling has taken place
					// we know that we're done here call the callback
					if( finished ) {
						op.finished();
					}
					finished = true;
				}

				o.intercept();
			}
		}, 1 );

		// Return the values, post-mixin, with end values specified
		return { top: endTop, left: endLeft, duration: o.duration, easing: o.easing };
	};

	// Intercept any throw in progress
	o.intercept = function(){
		clearInterval( timeKeeper );
		o.tossing = false;
	};

})( this, this.overthrow );

/*! Overthrow. An overflow:auto polyfill for responsive design. (c) 2012: Scott Jehl, Filament Group, Inc. http://filamentgroup.github.com/Overthrow/license.txt */
(function( w, o, undefined ){

	// o is overthrow reference from overthrow-polyfill.js
	if( o === undefined ){
		return;
	}

	o.scrollIndicatorClassName = "overthrow";
	
	var doc = w.document,
		docElem = doc.documentElement,
		// o api
		nativeOverflow = o.support === "native",
		canBeFilledWithPoly = o.canBeFilledWithPoly,
		configure = o.configure,
		set = o.set,
		forget = o.forget,
		scrollIndicatorClassName = o.scrollIndicatorClassName;

	// find closest overthrow (elem or a parent)
	o.closest = function( target, ascend ){
		return !ascend && target.className && target.className.indexOf( scrollIndicatorClassName ) > -1 && target || o.closest( target.parentNode );
	};
		
	// polyfill overflow
	var enabled = false;
	o.set = function(){
			
		set();

		// If nativeOverflow or it doesn't look like the browser canBeFilledWithPoly, our job is done here. Exit viewport left.
		if( enabled || nativeOverflow || !canBeFilledWithPoly ){
			return;
		}

		w.overthrow.addClass();

		enabled = true;

		o.support = "polyfilled";

		o.forget = function(){
			forget();
			enabled = false;
			// Remove touch binding (check for method support since this part isn't qualified by touch support like the rest)
			if( doc.removeEventListener ){
				doc.removeEventListener( "touchstart", start, false );
			}
		};

		// Fill 'er up!
		// From here down, all logic is associated with touch scroll handling
			// elem references the overthrow element in use
		var elem,
			
			// The last several Y values are kept here
			lastTops = [],
	
			// The last several X values are kept here
			lastLefts = [],
			
			// lastDown will be true if the last scroll direction was down, false if it was up
			lastDown,
			
			// lastRight will be true if the last scroll direction was right, false if it was left
			lastRight,
			
			// For a new gesture, or change in direction, reset the values from last scroll
			resetVertTracking = function(){
				lastTops = [];
				lastDown = null;
			},
			
			resetHorTracking = function(){
				lastLefts = [];
				lastRight = null;
			},
		
			// On webkit, touch events hardly trickle through textareas and inputs
			// Disabling CSS pointer events makes sure they do, but it also makes the controls innaccessible
			// Toggling pointer events at the right moments seems to do the trick
			// Thanks Thomas Bachem http://stackoverflow.com/a/5798681 for the following
			inputs,
			setPointers = function( val ){
				inputs = elem.querySelectorAll( "textarea, input" );
				for( var i = 0, il = inputs.length; i < il; i++ ) {
					inputs[ i ].style.pointerEvents = val;
				}
			},
			
			// For nested overthrows, changeScrollTarget restarts a touch event cycle on a parent or child overthrow
			changeScrollTarget = function( startEvent, ascend ){
				if( doc.createEvent ){
					var newTarget = ( !ascend || ascend === undefined ) && elem.parentNode || elem.touchchild || elem,
						tEnd;
							
					if( newTarget !== elem ){
						tEnd = doc.createEvent( "HTMLEvents" );
						tEnd.initEvent( "touchend", true, true );
						elem.dispatchEvent( tEnd );
						newTarget.touchchild = elem;
						elem = newTarget;
						newTarget.dispatchEvent( startEvent );
					}
				}
			},
			
			// Touchstart handler
			// On touchstart, touchmove and touchend are freshly bound, and all three share a bunch of vars set by touchstart
			// Touchend unbinds them again, until next time
			start = function( e ){

				// Stop any throw in progress
				if( o.intercept ){
					o.intercept();
				}
				
				// Reset the distance and direction tracking
				resetVertTracking();
				resetHorTracking();
				
				elem = o.closest( e.target );
					
				if( !elem || elem === docElem || e.touches.length > 1 ){
					return;
				}			

				setPointers( "none" );
				var touchStartE = e,
					scrollT = elem.scrollTop,
					scrollL = elem.scrollLeft,
					height = elem.offsetHeight,
					width = elem.offsetWidth,
					startY = e.touches[ 0 ].pageY,
					startX = e.touches[ 0 ].pageX,
					scrollHeight = elem.scrollHeight,
					scrollWidth = elem.scrollWidth,
				
					// Touchmove handler
					move = function( e ){
					
						var ty = scrollT + startY - e.touches[ 0 ].pageY,
							tx = scrollL + startX - e.touches[ 0 ].pageX,
							down = ty >= ( lastTops.length ? lastTops[ 0 ] : 0 ),
							right = tx >= ( lastLefts.length ? lastLefts[ 0 ] : 0 );
							
						// If there's room to scroll the current container, prevent the default window scroll
						if( ( ty > 0 && ty < scrollHeight - height ) || ( tx > 0 && tx < scrollWidth - width ) ){
							e.preventDefault();
						}
						// This bubbling is dumb. Needs a rethink.
						else {
							changeScrollTarget( touchStartE );
						}
						
						// If down and lastDown are inequal, the y scroll has changed direction. Reset tracking.
						if( lastDown && down !== lastDown ){
							resetVertTracking();
						}
						
						// If right and lastRight are inequal, the x scroll has changed direction. Reset tracking.
						if( lastRight && right !== lastRight ){
							resetHorTracking();
						}
						
						// remember the last direction in which we were headed
						lastDown = down;
						lastRight = right;							
						
						// set the container's scroll
						elem.scrollTop = ty;
						elem.scrollLeft = tx;
					
						lastTops.unshift( ty );
						lastLefts.unshift( tx );
					
						if( lastTops.length > 3 ){
							lastTops.pop();
						}
						if( lastLefts.length > 3 ){
							lastLefts.pop();
						}
					},
				
					// Touchend handler
					end = function( e ){

						// Bring the pointers back
						setPointers( "auto" );
						setTimeout( function(){
							setPointers( "none" );
						}, 450 );
						elem.removeEventListener( "touchmove", move, false );
						elem.removeEventListener( "touchend", end, false );
					};
				
				elem.addEventListener( "touchmove", move, false );
				elem.addEventListener( "touchend", end, false );
			};
			
		// Bind to touch, handle move and end within
		doc.addEventListener( "touchstart", start, false );
	};
		
})( this, this.overthrow );

/*! Overthrow. An overflow:auto polyfill for responsive design. (c) 2012: Scott Jehl, Filament Group, Inc. http://filamentgroup.github.com/Overthrow/license.txt */
(function( w, undefined ){
	
	// Auto-init
	w.overthrow.set();

}( this ));
/*
    json2.js
    2014-02-04

    Public Domain.

    NO WARRANTY EXPRESSED OR IMPLIED. USE AT YOUR OWN RISK.

    See http://www.JSON.org/js.html


    This code should be minified before deployment.
    See http://javascript.crockford.com/jsmin.html

    USE YOUR OWN COPY. IT IS EXTREMELY UNWISE TO LOAD CODE FROM SERVERS YOU DO
    NOT CONTROL.


    This file creates a global JSON object containing two methods: stringify
    and parse.

        JSON.stringify(value, replacer, space)
            value       any JavaScript value, usually an object or array.

            replacer    an optional parameter that determines how object
                        values are stringified for objects. It can be a
                        function or an array of strings.

            space       an optional parameter that specifies the indentation
                        of nested structures. If it is omitted, the text will
                        be packed without extra whitespace. If it is a number,
                        it will specify the number of spaces to indent at each
                        level. If it is a string (such as '\t' or '&nbsp;'),
                        it contains the characters used to indent at each level.

            This method produces a JSON text from a JavaScript value.

            When an object value is found, if the object contains a toJSON
            method, its toJSON method will be called and the result will be
            stringified. A toJSON method does not serialize: it returns the
            value represented by the name/value pair that should be serialized,
            or undefined if nothing should be serialized. The toJSON method
            will be passed the key associated with the value, and this will be
            bound to the value

            For example, this would serialize Dates as ISO strings.

                Date.prototype.toJSON = function (key) {
                    function f(n) {
                        // Format integers to have at least two digits.
                        return n < 10 ? '0' + n : n;
                    }

                    return this.getUTCFullYear()   + '-' +
                         f(this.getUTCMonth() + 1) + '-' +
                         f(this.getUTCDate())      + 'T' +
                         f(this.getUTCHours())     + ':' +
                         f(this.getUTCMinutes())   + ':' +
                         f(this.getUTCSeconds())   + 'Z';
                };

            You can provide an optional replacer method. It will be passed the
            key and value of each member, with this bound to the containing
            object. The value that is returned from your method will be
            serialized. If your method returns undefined, then the member will
            be excluded from the serialization.

            If the replacer parameter is an array of strings, then it will be
            used to select the members to be serialized. It filters the results
            such that only members with keys listed in the replacer array are
            stringified.

            Values that do not have JSON representations, such as undefined or
            functions, will not be serialized. Such values in objects will be
            dropped; in arrays they will be replaced with null. You can use
            a replacer function to replace those with JSON values.
            JSON.stringify(undefined) returns undefined.

            The optional space parameter produces a stringification of the
            value that is filled with line breaks and indentation to make it
            easier to read.

            If the space parameter is a non-empty string, then that string will
            be used for indentation. If the space parameter is a number, then
            the indentation will be that many spaces.

            Example:

            text = JSON.stringify(['e', {pluribus: 'unum'}]);
            // text is '["e",{"pluribus":"unum"}]'


            text = JSON.stringify(['e', {pluribus: 'unum'}], null, '\t');
            // text is '[\n\t"e",\n\t{\n\t\t"pluribus": "unum"\n\t}\n]'

            text = JSON.stringify([new Date()], function (key, value) {
                return this[key] instanceof Date ?
                    'Date(' + this[key] + ')' : value;
            });
            // text is '["Date(---current time---)"]'


        JSON.parse(text, reviver)
            This method parses a JSON text to produce an object or array.
            It can throw a SyntaxError exception.

            The optional reviver parameter is a function that can filter and
            transform the results. It receives each of the keys and values,
            and its return value is used instead of the original value.
            If it returns what it received, then the structure is not modified.
            If it returns undefined then the member is deleted.

            Example:

            // Parse the text. Values that look like ISO date strings will
            // be converted to Date objects.

            myData = JSON.parse(text, function (key, value) {
                var a;
                if (typeof value === 'string') {
                    a =
/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)Z$/.exec(value);
                    if (a) {
                        return new Date(Date.UTC(+a[1], +a[2] - 1, +a[3], +a[4],
                            +a[5], +a[6]));
                    }
                }
                return value;
            });

            myData = JSON.parse('["Date(09/09/2001)"]', function (key, value) {
                var d;
                if (typeof value === 'string' &&
                        value.slice(0, 5) === 'Date(' &&
                        value.slice(-1) === ')') {
                    d = new Date(value.slice(5, -1));
                    if (d) {
                        return d;
                    }
                }
                return value;
            });


    This is a reference implementation. You are free to copy, modify, or
    redistribute.
*/

/*jslint evil: true, regexp: true */

/*members "", "\b", "\t", "\n", "\f", "\r", "\"", JSON, "\\", apply,
    call, charCodeAt, getUTCDate, getUTCFullYear, getUTCHours,
    getUTCMinutes, getUTCMonth, getUTCSeconds, hasOwnProperty, join,
    lastIndex, length, parse, prototype, push, replace, slice, stringify,
    test, toJSON, toString, valueOf
*/


// Create a JSON object only if one does not already exist. We create the
// methods in a closure to avoid creating global variables.

if (typeof JSON !== 'object') {
    JSON = {};
}

(function () {
    'use strict';

    function f(n) {
        // Format integers to have at least two digits.
        return n < 10 ? '0' + n : n;
    }

    if (typeof Date.prototype.toJSON !== 'function') {

        Date.prototype.toJSON = function () {

            return isFinite(this.valueOf())
                ? this.getUTCFullYear()     + '-' +
                    f(this.getUTCMonth() + 1) + '-' +
                    f(this.getUTCDate())      + 'T' +
                    f(this.getUTCHours())     + ':' +
                    f(this.getUTCMinutes())   + ':' +
                    f(this.getUTCSeconds())   + 'Z'
                : null;
        };

        String.prototype.toJSON      =
            Number.prototype.toJSON  =
            Boolean.prototype.toJSON = function () {
                return this.valueOf();
            };
    }

    var cx,
        escapable,
        gap,
        indent,
        meta,
        rep;


    function quote(string) {

// If the string contains no control characters, no quote characters, and no
// backslash characters, then we can safely slap some quotes around it.
// Otherwise we must also replace the offending characters with safe escape
// sequences.

        escapable.lastIndex = 0;
        return escapable.test(string) ? '"' + string.replace(escapable, function (a) {
            var c = meta[a];
            return typeof c === 'string'
                ? c
                : '\\u' + ('0000' + a.charCodeAt(0).toString(16)).slice(-4);
        }) + '"' : '"' + string + '"';
    }


    function str(key, holder) {

// Produce a string from holder[key].

        var i,          // The loop counter.
            k,          // The member key.
            v,          // The member value.
            length,
            mind = gap,
            partial,
            value = holder[key];

// If the value has a toJSON method, call it to obtain a replacement value.

        if (value && typeof value === 'object' &&
                typeof value.toJSON === 'function') {
            value = value.toJSON(key);
        }

// If we were called with a replacer function, then call the replacer to
// obtain a replacement value.

        if (typeof rep === 'function') {
            value = rep.call(holder, key, value);
        }

// What happens next depends on the value's type.

        switch (typeof value) {
        case 'string':
            return quote(value);

        case 'number':

// JSON numbers must be finite. Encode non-finite numbers as null.

            return isFinite(value) ? String(value) : 'null';

        case 'boolean':
        case 'null':

// If the value is a boolean or null, convert it to a string. Note:
// typeof null does not produce 'null'. The case is included here in
// the remote chance that this gets fixed someday.

            return String(value);

// If the type is 'object', we might be dealing with an object or an array or
// null.

        case 'object':

// Due to a specification blunder in ECMAScript, typeof null is 'object',
// so watch out for that case.

            if (!value) {
                return 'null';
            }

// Make an array to hold the partial results of stringifying this object value.

            gap += indent;
            partial = [];

// Is the value an array?

            if (Object.prototype.toString.apply(value) === '[object Array]') {

// The value is an array. Stringify every element. Use null as a placeholder
// for non-JSON values.

                length = value.length;
                for (i = 0; i < length; i += 1) {
                    partial[i] = str(i, value) || 'null';
                }

// Join all of the elements together, separated with commas, and wrap them in
// brackets.

                v = partial.length === 0
                    ? '[]'
                    : gap
                    ? '[\n' + gap + partial.join(',\n' + gap) + '\n' + mind + ']'
                    : '[' + partial.join(',') + ']';
                gap = mind;
                return v;
            }

// If the replacer is an array, use it to select the members to be stringified.

            if (rep && typeof rep === 'object') {
                length = rep.length;
                for (i = 0; i < length; i += 1) {
                    if (typeof rep[i] === 'string') {
                        k = rep[i];
                        v = str(k, value);
                        if (v) {
                            partial.push(quote(k) + (gap ? ': ' : ':') + v);
                        }
                    }
                }
            } else {

// Otherwise, iterate through all of the keys in the object.

                for (k in value) {
                    if (Object.prototype.hasOwnProperty.call(value, k)) {
                        v = str(k, value);
                        if (v) {
                            partial.push(quote(k) + (gap ? ': ' : ':') + v);
                        }
                    }
                }
            }

// Join all of the member texts together, separated with commas,
// and wrap them in braces.

            v = partial.length === 0
                ? '{}'
                : gap
                ? '{\n' + gap + partial.join(',\n' + gap) + '\n' + mind + '}'
                : '{' + partial.join(',') + '}';
            gap = mind;
            return v;
        }
    }

// If the JSON object does not yet have a stringify method, give it one.

    if (typeof JSON.stringify !== 'function') {
        escapable = /[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;
        meta = {    // table of character substitutions
            '\b': '\\b',
            '\t': '\\t',
            '\n': '\\n',
            '\f': '\\f',
            '\r': '\\r',
            '"' : '\\"',
            '\\': '\\\\'
        };
        JSON.stringify = function (value, replacer, space) {

// The stringify method takes a value and an optional replacer, and an optional
// space parameter, and returns a JSON text. The replacer can be a function
// that can replace values, or an array of strings that will select the keys.
// A default replacer method can be provided. Use of the space parameter can
// produce text that is more easily readable.

            var i;
            gap = '';
            indent = '';

// If the space parameter is a number, make an indent string containing that
// many spaces.

            if (typeof space === 'number') {
                for (i = 0; i < space; i += 1) {
                    indent += ' ';
                }

// If the space parameter is a string, it will be used as the indent string.

            } else if (typeof space === 'string') {
                indent = space;
            }

// If there is a replacer, it must be a function or an array.
// Otherwise, throw an error.

            rep = replacer;
            if (replacer && typeof replacer !== 'function' &&
                    (typeof replacer !== 'object' ||
                    typeof replacer.length !== 'number')) {
                throw new Error('JSON.stringify');
            }

// Make a fake root object containing our value under the key of ''.
// Return the result of stringifying the value.

            return str('', {'': value});
        };
    }


// If the JSON object does not yet have a parse method, give it one.

    if (typeof JSON.parse !== 'function') {
        cx = /[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;
        JSON.parse = function (text, reviver) {

// The parse method takes a text and an optional reviver function, and returns
// a JavaScript value if the text is a valid JSON text.

            var j;

            function walk(holder, key) {

// The walk method is used to recursively walk the resulting structure so
// that modifications can be made.

                var k, v, value = holder[key];
                if (value && typeof value === 'object') {
                    for (k in value) {
                        if (Object.prototype.hasOwnProperty.call(value, k)) {
                            v = walk(value, k);
                            if (v !== undefined) {
                                value[k] = v;
                            } else {
                                delete value[k];
                            }
                        }
                    }
                }
                return reviver.call(holder, key, value);
            }


// Parsing happens in four stages. In the first stage, we replace certain
// Unicode characters with escape sequences. JavaScript handles many characters
// incorrectly, either silently deleting them, or treating them as line endings.

            text = String(text);
            cx.lastIndex = 0;
            if (cx.test(text)) {
                text = text.replace(cx, function (a) {
                    return '\\u' +
                        ('0000' + a.charCodeAt(0).toString(16)).slice(-4);
                });
            }

// In the second stage, we run the text against regular expressions that look
// for non-JSON patterns. We are especially concerned with '()' and 'new'
// because they can cause invocation, and '=' because it can cause mutation.
// But just to be safe, we want to reject all unexpected forms.

// We split the second stage into 4 regexp operations in order to work around
// crippling inefficiencies in IE's and Safari's regexp engines. First we
// replace the JSON backslash pairs with '@' (a non-JSON character). Second, we
// replace all simple value tokens with ']' characters. Third, we delete all
// open brackets that follow a colon or comma or that begin the text. Finally,
// we look to see that the remaining characters are only whitespace or ']' or
// ',' or ':' or '{' or '}'. If that is so, then the text is safe for eval.

            if (/^[\],:{}\s]*$/
                    .test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g, '@')
                        .replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g, ']')
                        .replace(/(?:^|:|,)(?:\s*\[)+/g, ''))) {

// In the third stage we use the eval function to compile the text into a
// JavaScript structure. The '{' operator is subject to a syntactic ambiguity
// in JavaScript: it can begin a block or an object literal. We wrap the text
// in parens to eliminate the ambiguity.

                j = eval('(' + text + ')');

// In the optional fourth stage, we recursively walk the new structure, passing
// each name/value pair to a reviver function for possible transformation.

                return typeof reviver === 'function'
                    ? walk({'': j}, '')
                    : j;
            }

// If the text is not JSON parseable, then a SyntaxError is thrown.

            throw new SyntaxError('JSON.parse');
        };
    }
}());


var Messenger = function () { this.init.apply(this, arguments) };
Messenger.SIGNATURE = 'MZ';

if (window.postMessage) {
    Messenger.createForParent = function () {
        var key    = window.name;
        return new this({
            key   : key,
            window : window.opener || window.parent
        });
    };

    Messenger.createForFrame = function (frame, url) {
        return this.createForWindow(frame.contentWindow, url);
    };

    Messenger.createForWindow = function (window, url) {
        var key    = Messenger.SIGNATURE + Math.floor(Math.random() * 2821109907456 + 2821109907456).toString(36).substring(1) + '@';
        window.name = key;
        if (typeof url !== 'undefined' && url !== null) {
            window.location.replace(url);
        }
        return new this({
            key : key,
            window : window
        });
    };

    Messenger.prototype = {
        init : function (opts) {
            var self = this;
            self.window = opts.window;
            self.key    = opts.key;
            self._eventListeners = {};

            self.observeEvent();
        },

        send : function (type, obj) {
            var self = this;
            this.window.postMessage(JSON.stringify({
                key  : this.key,
                type : type,
                data : obj
            }), '*');
        },

        observeEvent : function () {
            var self = this;
            self.messageListener = function (e) {
                var data;
                try {
                    data = JSON.parse(e.data);
                } catch (err) {
                    if (Messenger.ENABLE_DEBUG && window.console && window.console.log) console.log(err.name + ': ' + err.message);
                    return;
                }
                if (data.key != self.key) return;
                self.dispatchEvent(data.type, data.data);
            };
            if (window.attachEvent) {
                window.attachEvent("onmessage", self.messageListener, false);
            } else {
                window.addEventListener("message", self.messageListener, false);
            }
        },

        destroy : function () {
            var self = this;
            if (window.detachEvent) {
                window.detachEvent("onmessage", self.messageListener, false);
            } else {
                window.removeEventListener("message", self.messageListener, false);
            }
        },

        hasEventListener: function (type) {
            return !!(this._eventListeners[type] instanceof Array && this._eventListeners[type].length);
        },

        addEventListener: function (type, listener) {
            if (!listener) return;
            if (!this.hasEventListener(type)) {
                this._eventListeners[type] = [];
            }
            var listeners = this._eventListeners[type];
            for (var i = 0, it; (it = listeners[i]); i++) {
                if (listener == it) {
                    return;
                }
            }
            listeners.push(listener);
        },

        removeEventListener: function (type, listener) {
            if (this.hasEventListener(type)) {
                var listeners = this._eventListeners[type];
                for (var i = 0, it; (it = listeners[i]); i++) {
                    if (listener == it) {
                        listeners.splice(i, 1);
                        return;
                    }
                }
            }
        },

        dispatchEvent: function (type, opt) {
            if (!this.hasEventListener(type)) return false;
            var listeners = this._eventListeners[type];
            for (var i = 0, it; (it = listeners[i]); i++) {
                it.call(this, opt);
            }
            return true; // preventDefault is not implemented
        }
    };
} else {
    Messenger.createForParent = function () {
        if (window.parent == window && !window.opener) return null;
        var iframe = document.createElement('iframe');
        var opts   = window.name.split('|', 2);
        var key    = opts[0];
        var url    = opts[1];
        document.body.appendChild(iframe);
        var output = iframe.contentWindow;
        output.name = key;
        iframe.width = 1;
        iframe.height = 1;
        iframe.setAttribute('style', 'height:1px;width:1px;visibility:hidden;');
        output.location.replace(url);
        return new this({
            key : key,
            url : url,
            input : window,
            output : output
        });
    };
    Messenger.createForFrame = function (frame, url) {
        return this.createForWindow(frame.contentWindow, url);
    };
    Messenger.createForWindow = function (window, url) {
        // 2821109907456 = 36 ** 8
        var key    = Messenger.SIGNATURE + Math.floor(Math.random() * 2821109907456 + 2821109907456).toString(36).substring(1) + '@';
        var empty  = this.findEmptyResource();
        if (!empty) return null;
        window.name  = key + '|' + empty;
        window.location.replace(url);
        return new this({
            key : key,
            url : url,
            input : function () { return window[0] },
            output : window
        });
    };
    Messenger.findEmptyResource = function () {
        var origin = location.protocol + '//' + location.host;
        var imgs = document.getElementsByTagName('img');
        for (var i = 0, it; (it = imgs[i]); i++) {
            if (it.src.indexOf(origin) === 0) return it.src;
        }

        var links = document.getElementsByTagName('link');
        for (var i = 0, it; (it = links[i]); i++) {
            if (it.href.indexOf(origin) === 0) return it.href;
        }

        return null;
    };
    Messenger.absolute = function (url) {
        var img = new Image();
        img.src = url;
        var ret = img.src;
        img.src = '';
        img = null;
        return ret;
    };
    Messenger.prototype = {
        init : function (opts) {
            var self = this;
            self._eventListeners	 = {};
            self.key = opts.key;
            self.url = opts.url;
            self.input = typeof(opts.input) == 'function' ? opts.input : function () { return opts.input };
            self.output = typeof(opts.output) == 'function' ? opts.output : function () { return opts.output };
            /** read buffer */
            self.buffer = [];
            /** received msg sequence id */
            self.ack   = 0;
            /** write queue */
            self.queue = [];
            /** sent messages */
            self.sent  = [];
            /** sent msg sequence id */
            self.msgid = 0;
            self.regexp = new RegExp('^(' + Messenger.SIGNATURE + '[A-Za-z0-9]{8}@)([A-Za-z0-9]{4})([A-Za-z0-9]{4})([A-Za-z0-9]{2})(.+)');
            self.setupTimer();
        },

        send : function (type, obj) {
            var self = this;

            if (typeof data === 'undefined') data = null;
            var body = encodeURIComponent(JSON.stringify({
                type : type,
                data : obj
            }));

            /*
             * Data Structure
             * message : '#' + header (20bytes) + data (rest)
             * header  : key (11bytes) + msgid (4bytes) + ack (4bytes) + msg rest (2byte)
             * key	   : 'XX' + random (8bytes) + '@'
             */

            var dataLimit = 2083 - (this.url.length) - 22;
            var sequence  = [];
            while (body.length) {
                sequence.push(body.substring(0, dataLimit));
                body = body.substring(dataLimit);
            }

            var msglen = sequence.length;
            for (var i = 0, data; (data = sequence[i]); i++) {
                var msgseq = i.toString(36);
                self.queue.push({
                    msgid   : self.msgid++,
                    msgrest : msglen - i - 1,
                    data    : data
                });
            }

            self.exhaust();
        },

        setupTimer : function () {
            var self = this;
            if (self.timer) return;
            self.timer = setInterval(function () {
                var data;
                try {
                    var input  = self.input();
                    data = input.location.hash.substring(1);
                    if (!data || data == '_') return;
                    var base  = input.location.protocol + '//' + input.location.host + input.location.pathname + input.location.search;
                    input.location.replace(base + '#_');
                } catch (_) { return }

                var match = data.match(self.regexp);
                if (!match) return;

                var message = {
                    key      : match[1],
                    msgidraw : match[2],
                    msgid    : parseInt(match[2], 36),
                    ack      : parseInt(match[3], 36),
                    msgrest  : parseInt(match[4], 36),
                    data     : match[5]
                };

                for (var i = 0, it; (it = self.sent[i]); i++) {
                    if (it.msgid < message.ack) self.sent.splice(i--, 1);
                }

                for (var i = 0, it; (it = self.queue[i]); i++) {
                    if (it.msgid < message.ack) self.queue.splice(i--, 1);
                }

                // log(['ack', self.ack + '=' + message.msgid, message.data == 'ACK', message.ack, self.sent]);

                if (message.data == 'ACK') return;

                if (self.ack != message.msgid) return;

                self.ack = message.msgid + 1;

                // log(['recv', message]);

                self.buffer.push(message);

                if (message.msgrest !== 0) return;

                data = '';
                for (var i = 0, it; (it = self.buffer[i]); i++) {
                    data += it.data;
                }
                self.buffer = [];

                var obj;
                try {
                    obj = JSON.parse(decodeURIComponent(data));
                } catch (e) {
                    if (Messenger.ENABLE_DEBUG && window.console && window.console.log) console.log(e.name + ': ' + e.message);
                    return;
                }

                if (!self.queue.length) {
                    self.queue.push({
                        msgid   : 0,
                        msgrest : 0,
                        data    : 'ACK'
                    });
                    self.exhaust();
                }

                self.dispatchEvent(obj.type, obj.data);
            }, 10);
        },

        destroy : function () {
        },

        exhaust : function () {
            var self = this;
            if (!self.queue.length) return;

            var now  = new Date().getTime();
            if (now < self.lastSent + 50) {
                setTimeout(function () {
                    self.exhaust();
                }, 50);
                return;
            }

            var message = self.queue.shift();
            var ack     = (self.ack % 1679616 + 1679616).toString(36).substring(1);
            var msgid   = (message.msgid % 1679616 + 1679616).toString(36).substring(1);
            var msgrest = (message.msgrest % 1296 + 1296).toString(36).substring(1);

            // log(['send', message]);
            var url = self.url + '#' + self.key + msgid + ack + msgrest + message.data;
            self.output().location.replace(url);
            self.lastSent = new Date().getTime();
            if (message.data != 'ACK') self.sent.push(message);

            clearTimeout(self.ackTimer);
            self.ackTimer = setTimeout(function () {
                if (self.sent.length) {
                    self.queue = self.sent.concat(self.queue).sort(function (a, b) {
                        return a.msgid - b.msgid;
                    });
                    // log(['resend', self.queue]);
                    self.sent  = [];
                    setTimeout(function () {
                        self.exhaust();
                    }, Math.random() * 200);
                }
            }, 500);

            setTimeout(function () {
                self.exhaust();
            }, 50);
        },

        hasEventListener: function (type) {
            return !!(this._eventListeners[type] instanceof Array && this._eventListeners[type].length);
        },

        addEventListener: function (type, listener) {
            if (!listener) return;
            if (!this.hasEventListener(type)) {
                this._eventListeners[type] = [];
            }
            var listeners = this._eventListeners[type];
            for (var i = 0, it; (it = listeners[i]); i++) {
                if (listener == it) {
                    return;
                }
            }
            listeners.push(listener);
        },

        removeEventListener: function (type, listener) {
            if (this.hasEventListener(type)) {
                var listeners = this._eventListeners[type];
                for (var i = 0, it; (it = listeners[i]); i++) {
                    if (listener == it) {
                        listeners.splice(i, 1);
                        return;
                    }
                }
            }
        },

        dispatchEvent: function (type, opt) {
            if (!this.hasEventListener(type)) return false;
            var listeners = this._eventListeners[type];
            for (var i = 0, it; (it = listeners[i]); i++) {
                it.call(this, opt);
            }
            return true; // preventDefault is not implemented
        }
    };
}

// Epic
Messenger.findEmptyResource = function () {
    var img = new Image();
    img.src = "/images/spacer.gif";
    var ret = img.src;
    img = null;
    return ret;
};

function keyString (e) {
	var ret = '';
	if (e.ctrlKey) ret += 'C-';
	if (e.altKey)  ret += 'M-';
	if (e.metaKey) ret += 'W-';
	if (e.which === 0) {
		if (e.shiftKey) ret += 'S-';
		ret += arguments.callee.table1[e.keyCode];
	} else {
		var key = arguments.callee.table2[e.which];
		if (typeof key == "string") {
			if (e.shiftKey) ret += 'S-';
			ret += key;
		} else {
			if (e.ctrlKey && e.which <= 26) {
				e.which += 64;
			}
			if ((65 <= e.which && e.which <= 90) || (97 <= e.which && e.which <= 122)) {
				ret += String.fromCharCode(e.which)[e.shiftKey ? 'toUpperCase' : 'toLowerCase']();
			} else {
				if (e.keyCode && e.shiftKey) ret += 'S-';
				ret += String.fromCharCode(e.which);
			}
		}
	}
	return ret;
}
keyString.table1 = { 9 : "TAB", 27 : "ESC", 33 : "PageUp", 34 : "PageDown", 35 : "End", 36 : "Home", 37 : "Left", 38 : "Up", 39 : "Right", 40 : "Down", 45 : "Insert", 46 : "Delete", 112 : "F1", 113 : "F2", 114 : "F3", 115 : "F4", 116 : "F5", 117 : "F6", 118 : "F7", 119 : "F8", 120 : "F9", 121 : "F10", 122 : "F11", 123 : "F12" };
keyString.table2 = { 8 : "BS", 9 : "TAB", 16:"", 17:"", 18:"", 27 : "ESC", 13 : "RET", 32 : "SPC", 224: "" };

this.keyString = keyString;

// Usage (with jQuery):
// var keyConfig = {
//     'M-1' : function () {},
//     'M-2' : function () {},
//     'M-3' : function () {},
//     'M-4' : function () {},
//     'M-0' : function () {},
//     '.'   : function () {},
//     'ESC' : function () {},
// };
// $(window).keydown(function (e) {
//     if (!e.altKey) return;
//     var key = keyString(e);
//     var handler = keyConfig[key];
//     handler && handler();
// });
// $(window).keypress(function (e) {
//     var key = keyString(e);
//     var handler = keyConfig[key];
//     handler && handler();
// });
//

var EditDesign = function () { this.init.apply(this, arguments) };
EditDesign.prototype = {
    init : function (css) {
        var self = this;
        self.data = {};
        self.setCSS(css);
    },

    setCSS : function (css) {
        var self = this;
        self.css = css;
        self.scanCSS(function (attrs, content) {
            var section = attrs['section'];
            delete attrs['section'];
            attrs.content = content;
            self.data[section] = attrs;
        });
    },

    getCSS : function () {
        var self = this;
        var done = {};
        var css =  this.scanCSS(function (attrs, content) {
            var section = attrs.section;
            if (done[section]) return '';

            var index  = self.indexOf(section);

            var ret = self.getSectionAsCSS(section);
            done[section] = true;

            for (var i = 0, len = index || EditDesign.sections.length; i < len; i++) { 
                section = EditDesign.sections[i];
                if (done[section]) continue;
                ret = self.getSectionAsCSS(section) + ret;
                done[section] = true;
            }

            return ret;
        });

        var rest = [];
        for (var key in self.data) if (self.data.hasOwnProperty(key)) rest.push(key);
        rest.sort(function (a, b) { return self.indexOf(a) - self.indexOf(b) });

        for (var i = 0, it; (it = rest[i]); i++) {
            var section = it;
            if (!done[section]) {
                css += self.getSectionAsCSS(section);
            }
        }

        return css.replace(/^\s+|\s+$/g, '');
    },

    getSectionAsCSS : function (section) {
        var self = this;
        if ( ! self.data[section] ) return '';
        var selected = self.data[section].selected;
        content = self.data[section].content;
        return '\n/* <system section="' + section + '" selected="' + selected + '"> */\n' + content + '\n/* </system> */\n';
    },

    indexOf : function me (section) {
        if (!me.map) {
            me.map = {};
            for (var i = 0, len = EditDesign.sections.length; i < len; i++) {
                me.map[section] = i;
            }
        }
        return me.map[section];
    },

    scanCSS : function (callback) {
        return this.css.replace(/\n?\/\* <system([^>]+)> \*\/\n*([\s\S]+?)\n*\/\* <\/system> \*\/\n?/g, function (_, attributes, content) {
            var attrs = {}; attributes.replace(/(\S+)="([^"]+)"/g, function (_, key, val) { attrs[key] = val });
            var ret = callback(attrs, content);
            return typeof(ret) == 'undefined' ? _ : ret;
        });
    },

    getData : function (section) {
        return this.data[section] || {};
    },

    setData : function (section, selected, content) {
        this.data[section] = {
            selected : selected,
            content  : content
        };
        delete this.indexOf.me;
    }
};
EditDesign.sections = [ ];

this.EditDesign = EditDesign;


//     Underscore.js 1.5.2
//     http://underscorejs.org
//     (c) 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Underscore may be freely distributed under the MIT license.
(function(){var n=this,t=n._,r={},e=Array.prototype,u=Object.prototype,i=Function.prototype,a=e.push,o=e.slice,c=e.concat,l=u.toString,f=u.hasOwnProperty,s=e.forEach,p=e.map,h=e.reduce,v=e.reduceRight,g=e.filter,d=e.every,m=e.some,y=e.indexOf,b=e.lastIndexOf,x=Array.isArray,w=Object.keys,_=i.bind,j=function(n){return n instanceof j?n:this instanceof j?(this._wrapped=n,void 0):new j(n)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=j),exports._=j):n._=j,j.VERSION="1.5.2";var A=j.each=j.forEach=function(n,t,e){if(null!=n)if(s&&n.forEach===s)n.forEach(t,e);else if(n.length===+n.length){for(var u=0,i=n.length;i>u;u++)if(t.call(e,n[u],u,n)===r)return}else for(var a=j.keys(n),u=0,i=a.length;i>u;u++)if(t.call(e,n[a[u]],a[u],n)===r)return};j.map=j.collect=function(n,t,r){var e=[];return null==n?e:p&&n.map===p?n.map(t,r):(A(n,function(n,u,i){e.push(t.call(r,n,u,i))}),e)};var E="Reduce of empty array with no initial value";j.reduce=j.foldl=j.inject=function(n,t,r,e){var u=arguments.length>2;if(null==n&&(n=[]),h&&n.reduce===h)return e&&(t=j.bind(t,e)),u?n.reduce(t,r):n.reduce(t);if(A(n,function(n,i,a){u?r=t.call(e,r,n,i,a):(r=n,u=!0)}),!u)throw new TypeError(E);return r},j.reduceRight=j.foldr=function(n,t,r,e){var u=arguments.length>2;if(null==n&&(n=[]),v&&n.reduceRight===v)return e&&(t=j.bind(t,e)),u?n.reduceRight(t,r):n.reduceRight(t);var i=n.length;if(i!==+i){var a=j.keys(n);i=a.length}if(A(n,function(o,c,l){c=a?a[--i]:--i,u?r=t.call(e,r,n[c],c,l):(r=n[c],u=!0)}),!u)throw new TypeError(E);return r},j.find=j.detect=function(n,t,r){var e;return O(n,function(n,u,i){return t.call(r,n,u,i)?(e=n,!0):void 0}),e},j.filter=j.select=function(n,t,r){var e=[];return null==n?e:g&&n.filter===g?n.filter(t,r):(A(n,function(n,u,i){t.call(r,n,u,i)&&e.push(n)}),e)},j.reject=function(n,t,r){return j.filter(n,function(n,e,u){return!t.call(r,n,e,u)},r)},j.every=j.all=function(n,t,e){t||(t=j.identity);var u=!0;return null==n?u:d&&n.every===d?n.every(t,e):(A(n,function(n,i,a){return(u=u&&t.call(e,n,i,a))?void 0:r}),!!u)};var O=j.some=j.any=function(n,t,e){t||(t=j.identity);var u=!1;return null==n?u:m&&n.some===m?n.some(t,e):(A(n,function(n,i,a){return u||(u=t.call(e,n,i,a))?r:void 0}),!!u)};j.contains=j.include=function(n,t){return null==n?!1:y&&n.indexOf===y?n.indexOf(t)!=-1:O(n,function(n){return n===t})},j.invoke=function(n,t){var r=o.call(arguments,2),e=j.isFunction(t);return j.map(n,function(n){return(e?t:n[t]).apply(n,r)})},j.pluck=function(n,t){return j.map(n,function(n){return n[t]})},j.where=function(n,t,r){return j.isEmpty(t)?r?void 0:[]:j[r?"find":"filter"](n,function(n){for(var r in t)if(t[r]!==n[r])return!1;return!0})},j.findWhere=function(n,t){return j.where(n,t,!0)},j.max=function(n,t,r){if(!t&&j.isArray(n)&&n[0]===+n[0]&&n.length<65535)return Math.max.apply(Math,n);if(!t&&j.isEmpty(n))return-1/0;var e={computed:-1/0,value:-1/0};return A(n,function(n,u,i){var a=t?t.call(r,n,u,i):n;a>e.computed&&(e={value:n,computed:a})}),e.value},j.min=function(n,t,r){if(!t&&j.isArray(n)&&n[0]===+n[0]&&n.length<65535)return Math.min.apply(Math,n);if(!t&&j.isEmpty(n))return 1/0;var e={computed:1/0,value:1/0};return A(n,function(n,u,i){var a=t?t.call(r,n,u,i):n;a<e.computed&&(e={value:n,computed:a})}),e.value},j.shuffle=function(n){var t,r=0,e=[];return A(n,function(n){t=j.random(r++),e[r-1]=e[t],e[t]=n}),e},j.sample=function(n,t,r){return arguments.length<2||r?n[j.random(n.length-1)]:j.shuffle(n).slice(0,Math.max(0,t))};var k=function(n){return j.isFunction(n)?n:function(t){return t[n]}};j.sortBy=function(n,t,r){var e=k(t);return j.pluck(j.map(n,function(n,t,u){return{value:n,index:t,criteria:e.call(r,n,t,u)}}).sort(function(n,t){var r=n.criteria,e=t.criteria;if(r!==e){if(r>e||r===void 0)return 1;if(e>r||e===void 0)return-1}return n.index-t.index}),"value")};var F=function(n){return function(t,r,e){var u={},i=null==r?j.identity:k(r);return A(t,function(r,a){var o=i.call(e,r,a,t);n(u,o,r)}),u}};j.groupBy=F(function(n,t,r){(j.has(n,t)?n[t]:n[t]=[]).push(r)}),j.indexBy=F(function(n,t,r){n[t]=r}),j.countBy=F(function(n,t){j.has(n,t)?n[t]++:n[t]=1}),j.sortedIndex=function(n,t,r,e){r=null==r?j.identity:k(r);for(var u=r.call(e,t),i=0,a=n.length;a>i;){var o=i+a>>>1;r.call(e,n[o])<u?i=o+1:a=o}return i},j.toArray=function(n){return n?j.isArray(n)?o.call(n):n.length===+n.length?j.map(n,j.identity):j.values(n):[]},j.size=function(n){return null==n?0:n.length===+n.length?n.length:j.keys(n).length},j.first=j.head=j.take=function(n,t,r){return null==n?void 0:null==t||r?n[0]:o.call(n,0,t)},j.initial=function(n,t,r){return o.call(n,0,n.length-(null==t||r?1:t))},j.last=function(n,t,r){return null==n?void 0:null==t||r?n[n.length-1]:o.call(n,Math.max(n.length-t,0))},j.rest=j.tail=j.drop=function(n,t,r){return o.call(n,null==t||r?1:t)},j.compact=function(n){return j.filter(n,j.identity)};var M=function(n,t,r){return t&&j.every(n,j.isArray)?c.apply(r,n):(A(n,function(n){j.isArray(n)||j.isArguments(n)?t?a.apply(r,n):M(n,t,r):r.push(n)}),r)};j.flatten=function(n,t){return M(n,t,[])},j.without=function(n){return j.difference(n,o.call(arguments,1))},j.uniq=j.unique=function(n,t,r,e){j.isFunction(t)&&(e=r,r=t,t=!1);var u=r?j.map(n,r,e):n,i=[],a=[];return A(u,function(r,e){(t?e&&a[a.length-1]===r:j.contains(a,r))||(a.push(r),i.push(n[e]))}),i},j.union=function(){return j.uniq(j.flatten(arguments,!0))},j.intersection=function(n){var t=o.call(arguments,1);return j.filter(j.uniq(n),function(n){return j.every(t,function(t){return j.indexOf(t,n)>=0})})},j.difference=function(n){var t=c.apply(e,o.call(arguments,1));return j.filter(n,function(n){return!j.contains(t,n)})},j.zip=function(){for(var n=j.max(j.pluck(arguments,"length").concat(0)),t=new Array(n),r=0;n>r;r++)t[r]=j.pluck(arguments,""+r);return t},j.object=function(n,t){if(null==n)return{};for(var r={},e=0,u=n.length;u>e;e++)t?r[n[e]]=t[e]:r[n[e][0]]=n[e][1];return r},j.indexOf=function(n,t,r){if(null==n)return-1;var e=0,u=n.length;if(r){if("number"!=typeof r)return e=j.sortedIndex(n,t),n[e]===t?e:-1;e=0>r?Math.max(0,u+r):r}if(y&&n.indexOf===y)return n.indexOf(t,r);for(;u>e;e++)if(n[e]===t)return e;return-1},j.lastIndexOf=function(n,t,r){if(null==n)return-1;var e=null!=r;if(b&&n.lastIndexOf===b)return e?n.lastIndexOf(t,r):n.lastIndexOf(t);for(var u=e?r:n.length;u--;)if(n[u]===t)return u;return-1},j.range=function(n,t,r){arguments.length<=1&&(t=n||0,n=0),r=arguments[2]||1;for(var e=Math.max(Math.ceil((t-n)/r),0),u=0,i=new Array(e);e>u;)i[u++]=n,n+=r;return i};var R=function(){};j.bind=function(n,t){var r,e;if(_&&n.bind===_)return _.apply(n,o.call(arguments,1));if(!j.isFunction(n))throw new TypeError;return r=o.call(arguments,2),e=function(){if(!(this instanceof e))return n.apply(t,r.concat(o.call(arguments)));R.prototype=n.prototype;var u=new R;R.prototype=null;var i=n.apply(u,r.concat(o.call(arguments)));return Object(i)===i?i:u}},j.partial=function(n){var t=o.call(arguments,1);return function(){return n.apply(this,t.concat(o.call(arguments)))}},j.bindAll=function(n){var t=o.call(arguments,1);if(0===t.length)throw new Error("bindAll must be passed function names");return A(t,function(t){n[t]=j.bind(n[t],n)}),n},j.memoize=function(n,t){var r={};return t||(t=j.identity),function(){var e=t.apply(this,arguments);return j.has(r,e)?r[e]:r[e]=n.apply(this,arguments)}},j.delay=function(n,t){var r=o.call(arguments,2);return setTimeout(function(){return n.apply(null,r)},t)},j.defer=function(n){return j.delay.apply(j,[n,1].concat(o.call(arguments,1)))},j.throttle=function(n,t,r){var e,u,i,a=null,o=0;r||(r={});var c=function(){o=r.leading===!1?0:new Date,a=null,i=n.apply(e,u)};return function(){var l=new Date;o||r.leading!==!1||(o=l);var f=t-(l-o);return e=this,u=arguments,0>=f?(clearTimeout(a),a=null,o=l,i=n.apply(e,u)):a||r.trailing===!1||(a=setTimeout(c,f)),i}},j.debounce=function(n,t,r){var e,u,i,a,o;return function(){i=this,u=arguments,a=new Date;var c=function(){var l=new Date-a;t>l?e=setTimeout(c,t-l):(e=null,r||(o=n.apply(i,u)))},l=r&&!e;return e||(e=setTimeout(c,t)),l&&(o=n.apply(i,u)),o}},j.once=function(n){var t,r=!1;return function(){return r?t:(r=!0,t=n.apply(this,arguments),n=null,t)}},j.wrap=function(n,t){return function(){var r=[n];return a.apply(r,arguments),t.apply(this,r)}},j.compose=function(){var n=arguments;return function(){for(var t=arguments,r=n.length-1;r>=0;r--)t=[n[r].apply(this,t)];return t[0]}},j.after=function(n,t){return function(){return--n<1?t.apply(this,arguments):void 0}},j.keys=w||function(n){if(n!==Object(n))throw new TypeError("Invalid object");var t=[];for(var r in n)j.has(n,r)&&t.push(r);return t},j.values=function(n){for(var t=j.keys(n),r=t.length,e=new Array(r),u=0;r>u;u++)e[u]=n[t[u]];return e},j.pairs=function(n){for(var t=j.keys(n),r=t.length,e=new Array(r),u=0;r>u;u++)e[u]=[t[u],n[t[u]]];return e},j.invert=function(n){for(var t={},r=j.keys(n),e=0,u=r.length;u>e;e++)t[n[r[e]]]=r[e];return t},j.functions=j.methods=function(n){var t=[];for(var r in n)j.isFunction(n[r])&&t.push(r);return t.sort()},j.extend=function(n){return A(o.call(arguments,1),function(t){if(t)for(var r in t)n[r]=t[r]}),n},j.pick=function(n){var t={},r=c.apply(e,o.call(arguments,1));return A(r,function(r){r in n&&(t[r]=n[r])}),t},j.omit=function(n){var t={},r=c.apply(e,o.call(arguments,1));for(var u in n)j.contains(r,u)||(t[u]=n[u]);return t},j.defaults=function(n){return A(o.call(arguments,1),function(t){if(t)for(var r in t)n[r]===void 0&&(n[r]=t[r])}),n},j.clone=function(n){return j.isObject(n)?j.isArray(n)?n.slice():j.extend({},n):n},j.tap=function(n,t){return t(n),n};var S=function(n,t,r,e){if(n===t)return 0!==n||1/n==1/t;if(null==n||null==t)return n===t;n instanceof j&&(n=n._wrapped),t instanceof j&&(t=t._wrapped);var u=l.call(n);if(u!=l.call(t))return!1;switch(u){case"[object String]":return n==String(t);case"[object Number]":return n!=+n?t!=+t:0==n?1/n==1/t:n==+t;case"[object Date]":case"[object Boolean]":return+n==+t;case"[object RegExp]":return n.source==t.source&&n.global==t.global&&n.multiline==t.multiline&&n.ignoreCase==t.ignoreCase}if("object"!=typeof n||"object"!=typeof t)return!1;for(var i=r.length;i--;)if(r[i]==n)return e[i]==t;var a=n.constructor,o=t.constructor;if(a!==o&&!(j.isFunction(a)&&a instanceof a&&j.isFunction(o)&&o instanceof o))return!1;r.push(n),e.push(t);var c=0,f=!0;if("[object Array]"==u){if(c=n.length,f=c==t.length)for(;c--&&(f=S(n[c],t[c],r,e)););}else{for(var s in n)if(j.has(n,s)&&(c++,!(f=j.has(t,s)&&S(n[s],t[s],r,e))))break;if(f){for(s in t)if(j.has(t,s)&&!c--)break;f=!c}}return r.pop(),e.pop(),f};j.isEqual=function(n,t){return S(n,t,[],[])},j.isEmpty=function(n){if(null==n)return!0;if(j.isArray(n)||j.isString(n))return 0===n.length;for(var t in n)if(j.has(n,t))return!1;return!0},j.isElement=function(n){return!(!n||1!==n.nodeType)},j.isArray=x||function(n){return"[object Array]"==l.call(n)},j.isObject=function(n){return n===Object(n)},A(["Arguments","Function","String","Number","Date","RegExp"],function(n){j["is"+n]=function(t){return l.call(t)=="[object "+n+"]"}}),j.isArguments(arguments)||(j.isArguments=function(n){return!(!n||!j.has(n,"callee"))}),"function"!=typeof/./&&(j.isFunction=function(n){return"function"==typeof n}),j.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},j.isNaN=function(n){return j.isNumber(n)&&n!=+n},j.isBoolean=function(n){return n===!0||n===!1||"[object Boolean]"==l.call(n)},j.isNull=function(n){return null===n},j.isUndefined=function(n){return n===void 0},j.has=function(n,t){return f.call(n,t)},j.noConflict=function(){return n._=t,this},j.identity=function(n){return n},j.times=function(n,t,r){for(var e=Array(Math.max(0,n)),u=0;n>u;u++)e[u]=t.call(r,u);return e},j.random=function(n,t){return null==t&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))};var I={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};I.unescape=j.invert(I.escape);var T={escape:new RegExp("["+j.keys(I.escape).join("")+"]","g"),unescape:new RegExp("("+j.keys(I.unescape).join("|")+")","g")};j.each(["escape","unescape"],function(n){j[n]=function(t){return null==t?"":(""+t).replace(T[n],function(t){return I[n][t]})}}),j.result=function(n,t){if(null==n)return void 0;var r=n[t];return j.isFunction(r)?r.call(n):r},j.mixin=function(n){A(j.functions(n),function(t){var r=j[t]=n[t];j.prototype[t]=function(){var n=[this._wrapped];return a.apply(n,arguments),z.call(this,r.apply(j,n))}})};var N=0;j.uniqueId=function(n){var t=++N+"";return n?n+t:t},j.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var q=/(.)^/,B={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},D=/\\|'|\r|\n|\t|\u2028|\u2029/g;j.template=function(n,t,r){var e;r=j.defaults({},r,j.templateSettings);var u=new RegExp([(r.escape||q).source,(r.interpolate||q).source,(r.evaluate||q).source].join("|")+"|$","g"),i=0,a="__p+='";n.replace(u,function(t,r,e,u,o){return a+=n.slice(i,o).replace(D,function(n){return"\\"+B[n]}),r&&(a+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'"),e&&(a+="'+\n((__t=("+e+"))==null?'':__t)+\n'"),u&&(a+="';\n"+u+"\n__p+='"),i=o+t.length,t}),a+="';\n",r.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{e=new Function(r.variable||"obj","_",a)}catch(o){throw o.source=a,o}if(t)return e(t,j);var c=function(n){return e.call(this,n,j)};return c.source="function("+(r.variable||"obj")+"){\n"+a+"}",c},j.chain=function(n){return j(n).chain()};var z=function(n){return this._chain?j(n).chain():n};j.mixin(j),A(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var t=e[n];j.prototype[n]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!=n&&"splice"!=n||0!==r.length||delete r[0],z.call(this,r)}}),A(["concat","join","slice"],function(n){var t=e[n];j.prototype[n]=function(){return z.call(this,t.apply(this._wrapped,arguments))}}),j.extend(j.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this);
//# sourceMappingURL=underscore-min.map
var AccessLog = {
    showGraph: function (counts, opts) {
        var offset = new Date().getTimezoneOffset() * 60 * 1000;
        var unit   = opts.unit;
        var end    = Math.floor(new Date().getTime() / unit) * unit + unit;
        var start  = end - (unit * opts.number);

        var graphAreaMarginRight = opts.graphAreaMarginRight || 50;
        var barWidth = opts.barWidth || 15;

        var data = [];
        var n = 0;
        while (start <= end) {
            n += counts[start] || 0;
            if ( (start - offset) % unit === 0) {
                // jQuery flot ã¯ UTC ã§è¡¨ç¤ºã—ã¦ã—ã¾ã†ã®ã§ã€
                // ã‚ã‚‰ã‹ã˜ã‚ offset ã‚’è¨ˆç®—ã—ã¦ epoch ã‚’ã‚ºãƒ©ã™
                data.push([ start - offset - unit, n ]);
                n = 0;
            }
            start += 60 * 15 * 1000; // ã‚¢ã‚¯ã‚»ã‚¹ãƒ­ã‚°ã¯15åˆ†ã”ã¨ã«è¨˜éŒ²ã•ã‚Œã¦ã„ã‚‹
        }

        opts.parent.show();
        opts.parent.
            height(+opts.parent.attr('data-graph-height')).
            width(opts.parent.parent().width() - graphAreaMarginRight);

        var plot = $.plot(opts.parent, [
            {
                label : '',
                data  : data,
                bars   : { show: true, lineWidth: barWidth },
                legend : { show: false }
            }
        ], {
            xaxis : {
                mode: "time",
                minTickSize: opts.minTickSize,
                timeformat : opts.timeformat
            },
            yaxis : {
                min: 0,
                minTickSize: 1,
                autoscaleMargin: 0.5,
                labelWidth: +opts.parent.attr('data-yaxis-width'),
                tickFormatter : function (number) {
                    return number.toString();
                }
            },
            grid : {
                axisMargin : 5,
                labelMargin : 5,
                minBorderMargin : 0,
                borderWidth : 1,
                borderColor : "#CCCCCC",
                hoverable: true
            }
        });

        var tooltip = $('.tooltip', opts.parent);
        if (tooltip.length === 0) {
            tooltip = $('<div class="tooltip"></div>').appendTo(opts.parent).hide();
        }
        opts.parent.bind('plothover', function (e, pos, item) {
            var axes = plot.getAxes();
            if (pos.x < axes.xaxis.min || pos.x > axes.xaxis.max || pos.y < axes.yaxis.min || pos.y > axes.yaxis.max) return;

            var series = plot.getData()[0];

            for (var n = 0; n < series.data.length; ++n) if (series.data[n][0] > pos.x) break;

            var p1 = series.data[n - 1], p2 = series.data[n];
            var p  = (p1 === null) ? p2:
                     (p2 === null) ? p1:
                     (pos.x - p1[0] < p2[0] - pos.x) ? p1 : p2;

            tooltip.show();
            showTooltip(
                tooltip,
                axes.xaxis.p2c(p[0]),
                axes.yaxis.p2c(p[1]),
                p[1]
            );
        });

        function showTooltip (tooltip, x, y, contents) {
            tooltip.css({
                    position: 'absolute',
                    top: y - 25,
                    left: x + 13
                }).text(contents);
        }
    }
};
(function() {
  if (typeof twttr === "undefined" || twttr === null) {
    var twttr = {};
  }

  twttr.txt = {};
  twttr.txt.regexen = {};

  var HTML_ENTITIES = {
    '&': '&amp;',
    '>': '&gt;',
    '<': '&lt;',
    '"': '&quot;',
    "'": '&#39;'
  };

  // HTML escaping
  twttr.txt.htmlEscape = function(text) {
    return text && text.replace(/[&"'><]/g, function(character) {
      return HTML_ENTITIES[character];
    });
  };

  // Builds a RegExp
  function regexSupplant(regex, flags) {
    flags = flags || "";
    if (typeof regex !== "string") {
      if (regex.global && flags.indexOf("g") < 0) {
        flags += "g";
      }
      if (regex.ignoreCase && flags.indexOf("i") < 0) {
        flags += "i";
      }
      if (regex.multiline && flags.indexOf("m") < 0) {
        flags += "m";
      }

      regex = regex.source;
    }

    return new RegExp(regex.replace(/#\{(\w+)\}/g, function(match, name) {
      var newRegex = twttr.txt.regexen[name] || "";
      if (typeof newRegex !== "string") {
        newRegex = newRegex.source;
      }
      return newRegex;
    }), flags);
  }

  twttr.txt.regexSupplant = regexSupplant;

  // simple string interpolation
  function stringSupplant(str, values) {
    return str.replace(/#\{(\w+)\}/g, function(match, name) {
      return values[name] || "";
    });
  }

  twttr.txt.stringSupplant = stringSupplant;

  function addCharsToCharClass(charClass, start, end) {
    var s = String.fromCharCode(start);
    if (end !== start) {
      s += "-" + String.fromCharCode(end);
    }
    charClass.push(s);
    return charClass;
  }

  twttr.txt.addCharsToCharClass = addCharsToCharClass;

  // Space is more than %20, U+3000 for example is the full-width space used with Kanji. Provide a short-hand
  // to access both the list of characters and a pattern suitible for use with String#split
  // Taken from: ActiveSupport::Multibyte::Handlers::UTF8Handler::UNICODE_WHITESPACE
  var fromCode = String.fromCharCode;
  var UNICODE_SPACES = [
    fromCode(0x0020), // White_Space # Zs       SPACE
    fromCode(0x0085), // White_Space # Cc       <control-0085>
    fromCode(0x00A0), // White_Space # Zs       NO-BREAK SPACE
    fromCode(0x1680), // White_Space # Zs       OGHAM SPACE MARK
    fromCode(0x180E), // White_Space # Zs       MONGOLIAN VOWEL SEPARATOR
    fromCode(0x2028), // White_Space # Zl       LINE SEPARATOR
    fromCode(0x2029), // White_Space # Zp       PARAGRAPH SEPARATOR
    fromCode(0x202F), // White_Space # Zs       NARROW NO-BREAK SPACE
    fromCode(0x205F), // White_Space # Zs       MEDIUM MATHEMATICAL SPACE
    fromCode(0x3000)  // White_Space # Zs       IDEOGRAPHIC SPACE
  ];
  addCharsToCharClass(UNICODE_SPACES, 0x009, 0x00D); // White_Space # Cc   [5] <control-0009>..<control-000D>
  addCharsToCharClass(UNICODE_SPACES, 0x2000, 0x200A); // White_Space # Zs  [11] EN QUAD..HAIR SPACE

  var INVALID_CHARS = [
    fromCode(0xFFFE),
    fromCode(0xFEFF), // BOM
    fromCode(0xFFFF) // Special
  ];
  addCharsToCharClass(INVALID_CHARS, 0x202A, 0x202E); // Directional change

  twttr.txt.regexen.spaces_group = regexSupplant(UNICODE_SPACES.join(""));
  twttr.txt.regexen.spaces = regexSupplant("[" + UNICODE_SPACES.join("") + "]");
  twttr.txt.regexen.invalid_chars_group = regexSupplant(INVALID_CHARS.join(""));
  twttr.txt.regexen.punct = /\!'#%&'\(\)*\+,\\\-\.\/:;<=>\?@\[\]\^_{|}~\$/;
  twttr.txt.regexen.rtl_chars = /[\u0600-\u06FF]|[\u0750-\u077F]|[\u0590-\u05FF]|[\uFE70-\uFEFF]/mg;
  twttr.txt.regexen.non_bmp_code_pairs = /[\uD800-\uDBFF][\uDC00-\uDFFF]/mg;

  var nonLatinHashtagChars = [];
  // Cyrillic
  addCharsToCharClass(nonLatinHashtagChars, 0x0400, 0x04ff); // Cyrillic
  addCharsToCharClass(nonLatinHashtagChars, 0x0500, 0x0527); // Cyrillic Supplement
  addCharsToCharClass(nonLatinHashtagChars, 0x2de0, 0x2dff); // Cyrillic Extended A
  addCharsToCharClass(nonLatinHashtagChars, 0xa640, 0xa69f); // Cyrillic Extended B
  // Hebrew
  addCharsToCharClass(nonLatinHashtagChars, 0x0591, 0x05bf); // Hebrew
  addCharsToCharClass(nonLatinHashtagChars, 0x05c1, 0x05c2);
  addCharsToCharClass(nonLatinHashtagChars, 0x05c4, 0x05c5);
  addCharsToCharClass(nonLatinHashtagChars, 0x05c7, 0x05c7);
  addCharsToCharClass(nonLatinHashtagChars, 0x05d0, 0x05ea);
  addCharsToCharClass(nonLatinHashtagChars, 0x05f0, 0x05f4);
  addCharsToCharClass(nonLatinHashtagChars, 0xfb12, 0xfb28); // Hebrew Presentation Forms
  addCharsToCharClass(nonLatinHashtagChars, 0xfb2a, 0xfb36);
  addCharsToCharClass(nonLatinHashtagChars, 0xfb38, 0xfb3c);
  addCharsToCharClass(nonLatinHashtagChars, 0xfb3e, 0xfb3e);
  addCharsToCharClass(nonLatinHashtagChars, 0xfb40, 0xfb41);
  addCharsToCharClass(nonLatinHashtagChars, 0xfb43, 0xfb44);
  addCharsToCharClass(nonLatinHashtagChars, 0xfb46, 0xfb4f);
  // Arabic
  addCharsToCharClass(nonLatinHashtagChars, 0x0610, 0x061a); // Arabic
  addCharsToCharClass(nonLatinHashtagChars, 0x0620, 0x065f);
  addCharsToCharClass(nonLatinHashtagChars, 0x066e, 0x06d3);
  addCharsToCharClass(nonLatinHashtagChars, 0x06d5, 0x06dc);
  addCharsToCharClass(nonLatinHashtagChars, 0x06de, 0x06e8);
  addCharsToCharClass(nonLatinHashtagChars, 0x06ea, 0x06ef);
  addCharsToCharClass(nonLatinHashtagChars, 0x06fa, 0x06fc);
  addCharsToCharClass(nonLatinHashtagChars, 0x06ff, 0x06ff);
  addCharsToCharClass(nonLatinHashtagChars, 0x0750, 0x077f); // Arabic Supplement
  addCharsToCharClass(nonLatinHashtagChars, 0x08a0, 0x08a0); // Arabic Extended A
  addCharsToCharClass(nonLatinHashtagChars, 0x08a2, 0x08ac);
  addCharsToCharClass(nonLatinHashtagChars, 0x08e4, 0x08fe);
  addCharsToCharClass(nonLatinHashtagChars, 0xfb50, 0xfbb1); // Arabic Pres. Forms A
  addCharsToCharClass(nonLatinHashtagChars, 0xfbd3, 0xfd3d);
  addCharsToCharClass(nonLatinHashtagChars, 0xfd50, 0xfd8f);
  addCharsToCharClass(nonLatinHashtagChars, 0xfd92, 0xfdc7);
  addCharsToCharClass(nonLatinHashtagChars, 0xfdf0, 0xfdfb);
  addCharsToCharClass(nonLatinHashtagChars, 0xfe70, 0xfe74); // Arabic Pres. Forms B
  addCharsToCharClass(nonLatinHashtagChars, 0xfe76, 0xfefc);
  addCharsToCharClass(nonLatinHashtagChars, 0x200c, 0x200c); // Zero-Width Non-Joiner
  // Thai
  addCharsToCharClass(nonLatinHashtagChars, 0x0e01, 0x0e3a);
  addCharsToCharClass(nonLatinHashtagChars, 0x0e40, 0x0e4e);
  // Hangul (Korean)
  addCharsToCharClass(nonLatinHashtagChars, 0x1100, 0x11ff); // Hangul Jamo
  addCharsToCharClass(nonLatinHashtagChars, 0x3130, 0x3185); // Hangul Compatibility Jamo
  addCharsToCharClass(nonLatinHashtagChars, 0xA960, 0xA97F); // Hangul Jamo Extended-A
  addCharsToCharClass(nonLatinHashtagChars, 0xAC00, 0xD7AF); // Hangul Syllables
  addCharsToCharClass(nonLatinHashtagChars, 0xD7B0, 0xD7FF); // Hangul Jamo Extended-B
  addCharsToCharClass(nonLatinHashtagChars, 0xFFA1, 0xFFDC); // half-width Hangul
  // Japanese and Chinese
  addCharsToCharClass(nonLatinHashtagChars, 0x30A1, 0x30FA); // Katakana (full-width)
  addCharsToCharClass(nonLatinHashtagChars, 0x30FC, 0x30FE); // Katakana Chouon and iteration marks (full-width)
  addCharsToCharClass(nonLatinHashtagChars, 0xFF66, 0xFF9F); // Katakana (half-width)
  addCharsToCharClass(nonLatinHashtagChars, 0xFF70, 0xFF70); // Katakana Chouon (half-width)
  addCharsToCharClass(nonLatinHashtagChars, 0xFF10, 0xFF19); // \
  addCharsToCharClass(nonLatinHashtagChars, 0xFF21, 0xFF3A); //  - Latin (full-width)
  addCharsToCharClass(nonLatinHashtagChars, 0xFF41, 0xFF5A); // /
  addCharsToCharClass(nonLatinHashtagChars, 0x3041, 0x3096); // Hiragana
  addCharsToCharClass(nonLatinHashtagChars, 0x3099, 0x309E); // Hiragana voicing and iteration mark
  addCharsToCharClass(nonLatinHashtagChars, 0x3400, 0x4DBF); // Kanji (CJK Extension A)
  addCharsToCharClass(nonLatinHashtagChars, 0x4E00, 0x9FFF); // Kanji (Unified)
  // -- Disabled as it breaks the Regex.
  //addCharsToCharClass(nonLatinHashtagChars, 0x20000, 0x2A6DF); // Kanji (CJK Extension B)
  addCharsToCharClass(nonLatinHashtagChars, 0x2A700, 0x2B73F); // Kanji (CJK Extension C)
  addCharsToCharClass(nonLatinHashtagChars, 0x2B740, 0x2B81F); // Kanji (CJK Extension D)
  addCharsToCharClass(nonLatinHashtagChars, 0x2F800, 0x2FA1F); // Kanji (CJK supplement)
  addCharsToCharClass(nonLatinHashtagChars, 0x3003, 0x3003); // Kanji iteration mark
  addCharsToCharClass(nonLatinHashtagChars, 0x3005, 0x3005); // Kanji iteration mark
  addCharsToCharClass(nonLatinHashtagChars, 0x303B, 0x303B); // Han iteration mark

  twttr.txt.regexen.nonLatinHashtagChars = regexSupplant(nonLatinHashtagChars.join(""));

  var latinAccentChars = [];
  // Latin accented characters (subtracted 0xD7 from the range, it's a confusable multiplication sign. Looks like "x")
  addCharsToCharClass(latinAccentChars, 0x00c0, 0x00d6);
  addCharsToCharClass(latinAccentChars, 0x00d8, 0x00f6);
  addCharsToCharClass(latinAccentChars, 0x00f8, 0x00ff);
  // Latin Extended A and B
  addCharsToCharClass(latinAccentChars, 0x0100, 0x024f);
  // assorted IPA Extensions
  addCharsToCharClass(latinAccentChars, 0x0253, 0x0254);
  addCharsToCharClass(latinAccentChars, 0x0256, 0x0257);
  addCharsToCharClass(latinAccentChars, 0x0259, 0x0259);
  addCharsToCharClass(latinAccentChars, 0x025b, 0x025b);
  addCharsToCharClass(latinAccentChars, 0x0263, 0x0263);
  addCharsToCharClass(latinAccentChars, 0x0268, 0x0268);
  addCharsToCharClass(latinAccentChars, 0x026f, 0x026f);
  addCharsToCharClass(latinAccentChars, 0x0272, 0x0272);
  addCharsToCharClass(latinAccentChars, 0x0289, 0x0289);
  addCharsToCharClass(latinAccentChars, 0x028b, 0x028b);
  // Okina for Hawaiian (it *is* a letter character)
  addCharsToCharClass(latinAccentChars, 0x02bb, 0x02bb);
  // Combining diacritics
  addCharsToCharClass(latinAccentChars, 0x0300, 0x036f);
  // Latin Extended Additional
  addCharsToCharClass(latinAccentChars, 0x1e00, 0x1eff);
  twttr.txt.regexen.latinAccentChars = regexSupplant(latinAccentChars.join(""));

  // A hashtag must contain characters, numbers and underscores, but not all numbers.
  twttr.txt.regexen.hashSigns = /[#ï¼ƒ]/;
  twttr.txt.regexen.hashtagAlpha = regexSupplant(/[a-z_#{latinAccentChars}#{nonLatinHashtagChars}]/i);
  twttr.txt.regexen.hashtagAlphaNumeric = regexSupplant(/[a-z0-9_#{latinAccentChars}#{nonLatinHashtagChars}]/i);
  twttr.txt.regexen.endHashtagMatch = regexSupplant(/^(?:#{hashSigns}|:\/\/)/);
  twttr.txt.regexen.hashtagBoundary = regexSupplant(/(?:^|$|[^&a-z0-9_#{latinAccentChars}#{nonLatinHashtagChars}])/);
  twttr.txt.regexen.validHashtag = regexSupplant(/(#{hashtagBoundary})(#{hashSigns})(#{hashtagAlphaNumeric}*#{hashtagAlpha}#{hashtagAlphaNumeric}*)/gi);

  // Mention related regex collection
  twttr.txt.regexen.validMentionPrecedingChars = /(?:^|[^a-zA-Z0-9_!#$%&*@ï¼ ]|(?:rt|RT|rT|Rt):?)/;
  twttr.txt.regexen.atSigns = /[@ï¼ ]/;
  twttr.txt.regexen.validMentionOrList = regexSupplant(
    '(#{validMentionPrecedingChars})' +  // $1: Preceding character
    '(#{atSigns})' +                     // $2: At mark
    '([a-zA-Z0-9_]{1,20})' +             // $3: Screen name
    '(\/[a-zA-Z][a-zA-Z0-9_\-]{0,24})?'  // $4: List (optional)
  , 'g');
  twttr.txt.regexen.validReply = regexSupplant(/^(?:#{spaces})*#{atSigns}([a-zA-Z0-9_]{1,20})/);
  twttr.txt.regexen.endMentionMatch = regexSupplant(/^(?:#{atSigns}|[#{latinAccentChars}]|:\/\/)/);

  // URL related regex collection
  twttr.txt.regexen.validUrlPrecedingChars = regexSupplant(/(?:[^A-Za-z0-9@ï¼ $#ï¼ƒ#{invalid_chars_group}]|^)/);
  twttr.txt.regexen.invalidUrlWithoutProtocolPrecedingChars = /[-_.\/]$/;
  twttr.txt.regexen.invalidDomainChars = stringSupplant("#{punct}#{spaces_group}#{invalid_chars_group}", twttr.txt.regexen);
  twttr.txt.regexen.validDomainChars = regexSupplant(/[^#{invalidDomainChars}]/);
  twttr.txt.regexen.validSubdomain = regexSupplant(/(?:(?:#{validDomainChars}(?:[_-]|#{validDomainChars})*)?#{validDomainChars}\.)/);
  twttr.txt.regexen.validDomainName = regexSupplant(/(?:(?:#{validDomainChars}(?:-|#{validDomainChars})*)?#{validDomainChars}\.)/);
  twttr.txt.regexen.validGTLD = regexSupplant(RegExp(
    '(?:(?:' +
    'abogado|academy|accountants|active|actor|aero|agency|airforce|allfinanz|alsace|archi|army|arpa|' +
    'asia|associates|attorney|auction|audio|autos|axa|band|bar|bargains|bayern|beer|berlin|best|bid|' +
    'bike|bio|biz|black|blackfriday|blue|bmw|bnpparibas|boo|boutique|brussels|budapest|build|' +
    'builders|business|buzz|bzh|cab|cal|camera|camp|cancerresearch|capetown|capital|caravan|cards|' +
    'care|career|careers|casa|cash|cat|catering|center|ceo|cern|channel|cheap|christmas|chrome|' +
    'church|citic|city|claims|cleaning|click|clinic|clothing|club|codes|coffee|college|cologne|com|' +
    'community|company|computer|condos|construction|consulting|contractors|cooking|cool|coop|country|' +
    'credit|creditcard|crs|cruises|cuisinella|cymru|dad|dance|dating|day|deals|degree|democrat|' +
    'dental|dentist|desi|diamonds|diet|digital|direct|directory|discount|dnp|domains|durban|dvag|eat|' +
    'edu|education|email|emerck|engineer|engineering|enterprises|equipment|esq|estate|eus|events|' +
    'exchange|expert|exposed|fail|farm|feedback|finance|financial|fish|fishing|fitness|flights|' +
    'florist|flsmidth|fly|foo|forsale|foundation|frl|frogans|fund|furniture|futbol|gal|gallery|gbiz|' +
    'gent|gift|gifts|gives|glass|gle|global|globo|gmail|gmo|gmx|google|gop|gov|graphics|gratis|green|' +
    'gripe|guide|guitars|guru|hamburg|haus|healthcare|help|here|hiphop|hiv|holdings|holiday|homes|' +
    'horse|host|hosting|house|how|ibm|immo|immobilien|industries|info|ing|ink|institute|insure|int|' +
    'international|investments|jetzt|jobs|joburg|juegos|kaufen|kim|kitchen|kiwi|koeln|krd|kred|' +
    'lacaixa|land|lawyer|lease|lgbt|life|lighting|limited|limo|link|loans|london|lotto|ltda|luxe|' +
    'luxury|maison|management|mango|market|marketing|media|meet|melbourne|meme|menu|miami|mil|mini|' +
    'mobi|moda|moe|monash|mortgage|moscow|motorcycles|mov|museum|nagoya|name|navy|net|network|' +
    'neustar|new|nexus|ngo|nhk|ninja|nra|nrw|nyc|okinawa|ong|onl|ooo|org|organic|otsuka|ovh|paris|' +
    'partners|parts|pharmacy|photo|photography|photos|physio|pics|pictures|pink|pizza|place|plumbing|' +
    'pohl|poker|post|praxi|press|pro|prod|productions|prof|properties|property|pub|qpon|quebec|' +
    'realtor|recipes|red|rehab|reise|reisen|ren|rentals|repair|report|republican|rest|restaurant|' +
    'reviews|rich|rio|rip|rocks|rodeo|rsvp|ruhr|ryukyu|saarland|sarl|sca|scb|schmidt|schule|scot|' +
    'services|sexy|shiksha|shoes|singles|social|software|sohu|solar|solutions|soy|space|spiegel|' +
    'supplies|supply|support|surf|surgery|suzuki|systems|taipei|tatar|tattoo|tax|technology|tel|' +
    'tienda|tips|tirol|today|tokyo|tools|top|town|toys|trade|training|travel|tui|university|uno|uol|' +
    'vacations|vegas|ventures|vermÃ¶gensberater|vermÃ¶gensberatung|versicherung|vet|viajes|villas|' +
    'vision|vlaanderen|vodka|vote|voting|voto|voyage|wales|wang|watch|webcam|website|wed|wedding|' +
    'whoswho|wien|wiki|williamhill|wme|work|works|world|wtc|wtf|xxx|xyz|yachts|yandex|yoga|yokohama|' +
    'youtube|zip|zone|Ğ´ĞµÑ‚Ğ¸|Ğ¼Ğ¾ÑĞºĞ²Ğ°|Ğ¾Ğ½Ğ»Ğ°Ğ¹Ğ½|Ğ¾Ñ€Ğ³|Ñ€ÑƒÑ|ÑĞ°Ğ¹Ñ‚|Ø¨Ø§Ø²Ø§Ø±|Ø´Ø¨ÙƒØ©|Ù…ÙˆÙ‚Ø¹|à¤¸à¤‚à¤—à¤ à¤¨|ã¿ã‚“ãª|ä¸–ç•Œ|ä¸­ä¿¡|ä¸­æ–‡ç½‘|ä¼ä¸š|ä½›å±±|å…¬å¸|' +
    'å…¬ç›Š|å•†åŸ|å•†æ ‡|åœ¨çº¿|å¹¿ä¸œ|æˆ‘çˆ±ä½ |æ‰‹æœº|æ”¿åŠ¡|æœºæ„|æ¸¸æˆ|ç§»åŠ¨|ç»„ç»‡æœºæ„|ç½‘å€|ç½‘ç»œ|é›†å›¢|ì‚¼ì„±' +
    ')(?=[^0-9a-zA-Z@]|$))'));
  twttr.txt.regexen.validCCTLD = regexSupplant(RegExp(
    '(?:(?:' +
    'ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bl|bm|bn|bo|bq|' +
    'br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cu|cv|cw|cx|cy|cz|de|dj|dk|dm|do|dz|' +
    'ec|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|' +
    'gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|' +
    'la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mf|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|' +
    'my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|' +
    'rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|ss|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|' +
    'tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|um|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|za|zm|zw|' +
    'Ğ±ĞµĞ»|Ğ¼ĞºĞ´|Ğ¼Ğ¾Ğ½|Ñ€Ñ„|ÑÑ€Ğ±|ÑƒĞºÑ€|Ò›Ğ°Ğ·|Ø§Ù„Ø§Ø±Ø¯Ù†|Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±|Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©|Ø§Ù„Ù…ØºØ±Ø¨|Ø§Ù…Ø§Ø±Ø§Øª|Ø§ÛŒØ±Ø§Ù†|Ø¨Ú¾Ø§Ø±Øª|ØªÙˆÙ†Ø³|Ø³ÙˆØ¯Ø§Ù†|Ø³ÙˆØ±ÙŠØ©|' +
    'Ø¹Ø±Ø§Ù‚|Ø¹Ù…Ø§Ù†|ÙÙ„Ø³Ø·ÙŠÙ†|Ù‚Ø·Ø±|Ù…ØµØ±|Ù…Ù„ÙŠØ³ÙŠØ§|Ù¾Ø§Ú©Ø³ØªØ§Ù†|à¤­à¤¾à¤°à¤¤|à¦¬à¦¾à¦‚à¦²à¦¾|à¦­à¦¾à¦°à¦¤|à¨­à¨¾à¨°à¨¤|àª­àª¾àª°àª¤|à®‡à®¨à¯à®¤à®¿à®¯à®¾|à®‡à®²à®™à¯à®•à¯ˆ|à®šà®¿à®™à¯à®•à®ªà¯à®ªà¯‚à®°à¯|' +
    'à°­à°¾à°°à°¤à±|à¶½à¶‚à¶šà·|à¹„à¸—à¸¢|áƒ’áƒ”|ä¸­å›½|ä¸­åœ‹|å°æ¹¾|å°ç£|æ–°åŠ å¡|é¦™æ¸¯|í•œêµ­' +
    ')(?=[^0-9a-zA-Z@]|$))'));
  twttr.txt.regexen.validPunycode = regexSupplant(/(?:xn--[0-9a-z]+)/);
  twttr.txt.regexen.validSpecialCCTLD = regexSupplant(RegExp(
    '(?:(?:co|tv)(?=[^0-9a-zA-Z@]|$))'));
  twttr.txt.regexen.validDomain = regexSupplant(/(?:#{validSubdomain}*#{validDomainName}(?:#{validGTLD}|#{validCCTLD}|#{validPunycode}))/);
  twttr.txt.regexen.validAsciiDomain = regexSupplant(/(?:(?:[\-a-z0-9#{latinAccentChars}]+)\.)+(?:#{validGTLD}|#{validCCTLD}|#{validPunycode})/gi);
  twttr.txt.regexen.invalidShortDomain = regexSupplant(/^#{validDomainName}#{validCCTLD}$/i);
  twttr.txt.regexen.validSpecialShortDomain = regexSupplant(/^#{validDomainName}#{validSpecialCCTLD}$/i);

  twttr.txt.regexen.validPortNumber = regexSupplant(/[0-9]+/);

  twttr.txt.regexen.validGeneralUrlPathChars = regexSupplant(/[a-z0-9!\*';:=\+,\.\$\/%#\[\]\-_~@|&#{latinAccentChars}]/i);
  // Allow URL paths to contain up to two nested levels of balanced parens
  //  1. Used in Wikipedia URLs like /Primer_(film)
  //  2. Used in IIS sessions like /S(dfd346)/
  //  3. Used in Rdio URLs like /track/We_Up_(Album_Version_(Edited))/
  twttr.txt.regexen.validUrlBalancedParens = regexSupplant(
    '\\('                                   +
      '(?:'                                 +
        '#{validGeneralUrlPathChars}+'      +
        '|'                                 +
        // allow one nested level of balanced parentheses
        '(?:'                               +
          '#{validGeneralUrlPathChars}*'    +
          '\\('                             +
            '#{validGeneralUrlPathChars}+'  +
          '\\)'                             +
          '#{validGeneralUrlPathChars}*'    +
        ')'                                 +
      ')'                                   +
    '\\)'
  , 'i');
  // Valid end-of-path chracters (so /foo. does not gobble the period).
  // 1. Allow =&# for empty URL parameters and other URL-join artifacts
  twttr.txt.regexen.validUrlPathEndingChars = regexSupplant(/[\+\-a-z0-9=_#\/#{latinAccentChars}]|(?:#{validUrlBalancedParens})/i);
  // Allow @ in a url, but only in the middle. Catch things like http://example.com/@user/
  twttr.txt.regexen.validUrlPath = regexSupplant('(?:' +
    '(?:' +
      '#{validGeneralUrlPathChars}*' +
        '(?:#{validUrlBalancedParens}#{validGeneralUrlPathChars}*)*' +
        '#{validUrlPathEndingChars}'+
      ')|(?:@#{validGeneralUrlPathChars}+\/)'+
    ')', 'i');

  twttr.txt.regexen.validUrlQueryChars = /[a-z0-9!?\*'@\(\);:&=\+\$\/%#\[\]\-_\.,~|]/i;
  twttr.txt.regexen.validUrlQueryEndingChars = /[a-z0-9_&=#\/]/i;
  twttr.txt.regexen.extractUrl = regexSupplant(
    '('                                                            + // $1 total match
      '(#{validUrlPrecedingChars})'                                + // $2 Preceeding chracter
      '('                                                          + // $3 URL
        '(https?:\\/\\/)?'                                         + // $4 Protocol (optional)
        '(#{validDomain})'                                         + // $5 Domain(s)
        '(?::(#{validPortNumber}))?'                               + // $6 Port number (optional)
        '(\\/#{validUrlPath}*)?'                                   + // $7 URL Path
        '(\\?#{validUrlQueryChars}*#{validUrlQueryEndingChars})?'  + // $8 Query String
      ')'                                                          +
    ')'
  , 'gi');

  twttr.txt.regexen.validTcoUrl = /^https?:\/\/t\.co\/[a-z0-9]+/i;
  twttr.txt.regexen.urlHasProtocol = /^https?:\/\//i;
  twttr.txt.regexen.urlHasHttps = /^https:\/\//i;

  // cashtag related regex
  twttr.txt.regexen.cashtag = /[a-z]{1,6}(?:[._][a-z]{1,2})?/i;
  twttr.txt.regexen.validCashtag = regexSupplant('(^|#{spaces})(\\$)(#{cashtag})(?=$|\\s|[#{punct}])', 'gi');

  // These URL validation pattern strings are based on the ABNF from RFC 3986
  twttr.txt.regexen.validateUrlUnreserved = /[a-z0-9\-._~]/i;
  twttr.txt.regexen.validateUrlPctEncoded = /(?:%[0-9a-f]{2})/i;
  twttr.txt.regexen.validateUrlSubDelims = /[!$&'()*+,;=]/i;
  twttr.txt.regexen.validateUrlPchar = regexSupplant('(?:' +
    '#{validateUrlUnreserved}|' +
    '#{validateUrlPctEncoded}|' +
    '#{validateUrlSubDelims}|' +
    '[:|@]' +
  ')', 'i');

  twttr.txt.regexen.validateUrlScheme = /(?:[a-z][a-z0-9+\-.]*)/i;
  twttr.txt.regexen.validateUrlUserinfo = regexSupplant('(?:' +
    '#{validateUrlUnreserved}|' +
    '#{validateUrlPctEncoded}|' +
    '#{validateUrlSubDelims}|' +
    ':' +
  ')*', 'i');

  twttr.txt.regexen.validateUrlDecOctet = /(?:[0-9]|(?:[1-9][0-9])|(?:1[0-9]{2})|(?:2[0-4][0-9])|(?:25[0-5]))/i;
  twttr.txt.regexen.validateUrlIpv4 = regexSupplant(/(?:#{validateUrlDecOctet}(?:\.#{validateUrlDecOctet}){3})/i);

  // Punting on real IPv6 validation for now
  twttr.txt.regexen.validateUrlIpv6 = /(?:\[[a-f0-9:\.]+\])/i;

  // Also punting on IPvFuture for now
  twttr.txt.regexen.validateUrlIp = regexSupplant('(?:' +
    '#{validateUrlIpv4}|' +
    '#{validateUrlIpv6}' +
  ')', 'i');

  // This is more strict than the rfc specifies
  twttr.txt.regexen.validateUrlSubDomainSegment = /(?:[a-z0-9](?:[a-z0-9_\-]*[a-z0-9])?)/i;
  twttr.txt.regexen.validateUrlDomainSegment = /(?:[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?)/i;
  twttr.txt.regexen.validateUrlDomainTld = /(?:[a-z](?:[a-z0-9\-]*[a-z0-9])?)/i;
  twttr.txt.regexen.validateUrlDomain = regexSupplant(/(?:(?:#{validateUrlSubDomainSegment]}\.)*(?:#{validateUrlDomainSegment]}\.)#{validateUrlDomainTld})/i);

  twttr.txt.regexen.validateUrlHost = regexSupplant('(?:' +
    '#{validateUrlIp}|' +
    '#{validateUrlDomain}' +
  ')', 'i');

  // Unencoded internationalized domains - this doesn't check for invalid UTF-8 sequences
  twttr.txt.regexen.validateUrlUnicodeSubDomainSegment = /(?:(?:[a-z0-9]|[^\u0000-\u007f])(?:(?:[a-z0-9_\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i;
  twttr.txt.regexen.validateUrlUnicodeDomainSegment = /(?:(?:[a-z0-9]|[^\u0000-\u007f])(?:(?:[a-z0-9\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i;
  twttr.txt.regexen.validateUrlUnicodeDomainTld = /(?:(?:[a-z]|[^\u0000-\u007f])(?:(?:[a-z0-9\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i;
  twttr.txt.regexen.validateUrlUnicodeDomain = regexSupplant(/(?:(?:#{validateUrlUnicodeSubDomainSegment}\.)*(?:#{validateUrlUnicodeDomainSegment}\.)#{validateUrlUnicodeDomainTld})/i);

  twttr.txt.regexen.validateUrlUnicodeHost = regexSupplant('(?:' +
    '#{validateUrlIp}|' +
    '#{validateUrlUnicodeDomain}' +
  ')', 'i');

  twttr.txt.regexen.validateUrlPort = /[0-9]{1,5}/;

  twttr.txt.regexen.validateUrlUnicodeAuthority = regexSupplant(
    '(?:(#{validateUrlUserinfo})@)?'  + // $1 userinfo
    '(#{validateUrlUnicodeHost})'     + // $2 host
    '(?::(#{validateUrlPort}))?'        //$3 port
  , "i");

  twttr.txt.regexen.validateUrlAuthority = regexSupplant(
    '(?:(#{validateUrlUserinfo})@)?' + // $1 userinfo
    '(#{validateUrlHost})'           + // $2 host
    '(?::(#{validateUrlPort}))?'       // $3 port
  , "i");

  twttr.txt.regexen.validateUrlPath = regexSupplant(/(\/#{validateUrlPchar}*)*/i);
  twttr.txt.regexen.validateUrlQuery = regexSupplant(/(#{validateUrlPchar}|\/|\?)*/i);
  twttr.txt.regexen.validateUrlFragment = regexSupplant(/(#{validateUrlPchar}|\/|\?)*/i);

  // Modified version of RFC 3986 Appendix B
  twttr.txt.regexen.validateUrlUnencoded = regexSupplant(
    '^'                               + // Full URL
    '(?:'                             +
      '([^:/?#]+):\\/\\/'             + // $1 Scheme
    ')?'                              +
    '([^/?#]*)'                       + // $2 Authority
    '([^?#]*)'                        + // $3 Path
    '(?:'                             +
      '\\?([^#]*)'                    + // $4 Query
    ')?'                              +
    '(?:'                             +
      '#(.*)'                         + // $5 Fragment
    ')?$'
  , "i");


  // Default CSS class for auto-linked lists (along with the url class)
  var DEFAULT_LIST_CLASS = "tweet-url list-slug";
  // Default CSS class for auto-linked usernames (along with the url class)
  var DEFAULT_USERNAME_CLASS = "tweet-url username";
  // Default CSS class for auto-linked hashtags (along with the url class)
  var DEFAULT_HASHTAG_CLASS = "tweet-url hashtag";
  // Default CSS class for auto-linked cashtags (along with the url class)
  var DEFAULT_CASHTAG_CLASS = "tweet-url cashtag";
  // Options which should not be passed as HTML attributes
  var OPTIONS_NOT_ATTRIBUTES = {'urlClass':true, 'listClass':true, 'usernameClass':true, 'hashtagClass':true, 'cashtagClass':true,
                            'usernameUrlBase':true, 'listUrlBase':true, 'hashtagUrlBase':true, 'cashtagUrlBase':true,
                            'usernameUrlBlock':true, 'listUrlBlock':true, 'hashtagUrlBlock':true, 'linkUrlBlock':true,
                            'usernameIncludeSymbol':true, 'suppressLists':true, 'suppressNoFollow':true, 'targetBlank':true,
                            'suppressDataScreenName':true, 'urlEntities':true, 'symbolTag':true, 'textWithSymbolTag':true, 'urlTarget':true,
                            'invisibleTagAttrs':true, 'linkAttributeBlock':true, 'linkTextBlock': true, 'htmlEscapeNonEntities': true
                            };

  var BOOLEAN_ATTRIBUTES = {'disabled':true, 'readonly':true, 'multiple':true, 'checked':true};

  // Simple object cloning function for simple objects
  function clone(o) {
    var r = {};
    for (var k in o) {
      if (o.hasOwnProperty(k)) {
        r[k] = o[k];
      }
    }

    return r;
  }

  twttr.txt.tagAttrs = function(attributes) {
    var htmlAttrs = "";
    for (var k in attributes) {
      var v = attributes[k];
      if (BOOLEAN_ATTRIBUTES[k]) {
        v = v ? k : null;
      }
      if (v == null) continue;
      htmlAttrs += " " + twttr.txt.htmlEscape(k) + "=\"" + twttr.txt.htmlEscape(v.toString()) + "\"";
    }
    return htmlAttrs;
  };

  twttr.txt.linkToText = function(entity, text, attributes, options) {
    if (!options.suppressNoFollow) {
      attributes.rel = "nofollow";
    }
    // if linkAttributeBlock is specified, call it to modify the attributes
    if (options.linkAttributeBlock) {
      options.linkAttributeBlock(entity, attributes);
    }
    // if linkTextBlock is specified, call it to get a new/modified link text
    if (options.linkTextBlock) {
      text = options.linkTextBlock(entity, text);
    }
    var d = {
      text: text,
      attr: twttr.txt.tagAttrs(attributes)
    };
    return stringSupplant("<a#{attr}>#{text}</a>", d);
  };

  twttr.txt.linkToTextWithSymbol = function(entity, symbol, text, attributes, options) {
    var taggedSymbol = options.symbolTag ? "<" + options.symbolTag + ">" + symbol + "</"+ options.symbolTag + ">" : symbol;
    text = twttr.txt.htmlEscape(text);
    var taggedText = options.textWithSymbolTag ? "<" + options.textWithSymbolTag + ">" + text + "</"+ options.textWithSymbolTag + ">" : text;

    if (options.usernameIncludeSymbol || !symbol.match(twttr.txt.regexen.atSigns)) {
      return twttr.txt.linkToText(entity, taggedSymbol + taggedText, attributes, options);
    } else {
      return taggedSymbol + twttr.txt.linkToText(entity, taggedText, attributes, options);
    }
  };

  twttr.txt.linkToHashtag = function(entity, text, options) {
    var hash = text.substring(entity.indices[0], entity.indices[0] + 1);
    var hashtag = twttr.txt.htmlEscape(entity.hashtag);
    var attrs = clone(options.htmlAttrs || {});
    attrs.href = options.hashtagUrlBase + hashtag;
    attrs.title = "#" + hashtag;
    attrs["class"] = options.hashtagClass;
    if (hashtag.charAt(0).match(twttr.txt.regexen.rtl_chars)){
      attrs["class"] += " rtl";
    }
    if (options.targetBlank) {
      attrs.target = '_blank';
    }

    return twttr.txt.linkToTextWithSymbol(entity, hash, hashtag, attrs, options);
  };

  twttr.txt.linkToCashtag = function(entity, text, options) {
    var cashtag = twttr.txt.htmlEscape(entity.cashtag);
    var attrs = clone(options.htmlAttrs || {});
    attrs.href = options.cashtagUrlBase + cashtag;
    attrs.title = "$" + cashtag;
    attrs["class"] =  options.cashtagClass;
    if (options.targetBlank) {
      attrs.target = '_blank';
    }

    return twttr.txt.linkToTextWithSymbol(entity, "$", cashtag, attrs, options);
  };

  twttr.txt.linkToMentionAndList = function(entity, text, options) {
    var at = text.substring(entity.indices[0], entity.indices[0] + 1);
    var user = twttr.txt.htmlEscape(entity.screenName);
    var slashListname = twttr.txt.htmlEscape(entity.listSlug);
    var isList = entity.listSlug && !options.suppressLists;
    var attrs = clone(options.htmlAttrs || {});
    attrs["class"] = (isList ? options.listClass : options.usernameClass);
    attrs.href = isList ? options.listUrlBase + user + slashListname : options.usernameUrlBase + user;
    if (!isList && !options.suppressDataScreenName) {
      attrs['data-screen-name'] = user;
    }
    if (options.targetBlank) {
      attrs.target = '_blank';
    }

    return twttr.txt.linkToTextWithSymbol(entity, at, isList ? user + slashListname : user, attrs, options);
  };

  twttr.txt.linkToUrl = function(entity, text, options) {
    var url = entity.url;
    var displayUrl = url;
    var linkText = twttr.txt.htmlEscape(displayUrl);

    // If the caller passed a urlEntities object (provided by a Twitter API
    // response with include_entities=true), we use that to render the display_url
    // for each URL instead of it's underlying t.co URL.
    var urlEntity = (options.urlEntities && options.urlEntities[url]) || entity;
    if (urlEntity.display_url) {
      linkText = twttr.txt.linkTextWithEntity(urlEntity, options);
    }

    var attrs = clone(options.htmlAttrs || {});

    if (!url.match(twttr.txt.regexen.urlHasProtocol)) {
      url = "http://" + url;
    }
    attrs.href = url;

    if (options.targetBlank) {
      attrs.target = '_blank';
    }

    // set class only if urlClass is specified.
    if (options.urlClass) {
      attrs["class"] = options.urlClass;
    }

    // set target only if urlTarget is specified.
    if (options.urlTarget) {
      attrs.target = options.urlTarget;
    }

    if (!options.title && urlEntity.display_url) {
      attrs.title = urlEntity.expanded_url;
    }

    return twttr.txt.linkToText(entity, linkText, attrs, options);
  };

  twttr.txt.linkTextWithEntity = function (entity, options) {
    var displayUrl = entity.display_url;
    var expandedUrl = entity.expanded_url;

    // Goal: If a user copies and pastes a tweet containing t.co'ed link, the resulting paste
    // should contain the full original URL (expanded_url), not the display URL.
    //
    // Method: Whenever possible, we actually emit HTML that contains expanded_url, and use
    // font-size:0 to hide those parts that should not be displayed (because they are not part of display_url).
    // Elements with font-size:0 get copied even though they are not visible.
    // Note that display:none doesn't work here. Elements with display:none don't get copied.
    //
    // Additionally, we want to *display* ellipses, but we don't want them copied.  To make this happen we
    // wrap the ellipses in a tco-ellipsis class and provide an onCopy handler that sets display:none on
    // everything with the tco-ellipsis class.
    //
    // Exception: pic.twitter.com images, for which expandedUrl = "https://twitter.com/#!/username/status/1234/photo/1
    // For those URLs, display_url is not a substring of expanded_url, so we don't do anything special to render the elided parts.
    // For a pic.twitter.com URL, the only elided part will be the "https://", so this is fine.

    var displayUrlSansEllipses = displayUrl.replace(/â€¦/g, ""); // We have to disregard ellipses for matching
    // Note: we currently only support eliding parts of the URL at the beginning or the end.
    // Eventually we may want to elide parts of the URL in the *middle*.  If so, this code will
    // become more complicated.  We will probably want to create a regexp out of display URL,
    // replacing every ellipsis with a ".*".
    if (expandedUrl.indexOf(displayUrlSansEllipses) != -1) {
      var displayUrlIndex = expandedUrl.indexOf(displayUrlSansEllipses);
      var v = {
        displayUrlSansEllipses: displayUrlSansEllipses,
        // Portion of expandedUrl that precedes the displayUrl substring
        beforeDisplayUrl: expandedUrl.substr(0, displayUrlIndex),
        // Portion of expandedUrl that comes after displayUrl
        afterDisplayUrl: expandedUrl.substr(displayUrlIndex + displayUrlSansEllipses.length),
        precedingEllipsis: displayUrl.match(/^â€¦/) ? "â€¦" : "",
        followingEllipsis: displayUrl.match(/â€¦$/) ? "â€¦" : ""
      };
      for (var k in v) {
        if (v.hasOwnProperty(k)) {
          v[k] = twttr.txt.htmlEscape(v[k]);
        }
      }
      // As an example: The user tweets "hi http://longdomainname.com/foo"
      // This gets shortened to "hi http://t.co/xyzabc", with display_url = "â€¦nname.com/foo"
      // This will get rendered as:
      // <span class='tco-ellipsis'> <!-- This stuff should get displayed but not copied -->
      //   â€¦
      //   <!-- There's a chance the onCopy event handler might not fire. In case that happens,
      //        we include an &nbsp; here so that the â€¦ doesn't bump up against the URL and ruin it.
      //        The &nbsp; is inside the tco-ellipsis span so that when the onCopy handler *does*
      //        fire, it doesn't get copied.  Otherwise the copied text would have two spaces in a row,
      //        e.g. "hi  http://longdomainname.com/foo".
      //   <span style='font-size:0'>&nbsp;</span>
      // </span>
      // <span style='font-size:0'>  <!-- This stuff should get copied but not displayed -->
      //   http://longdomai
      // </span>
      // <span class='js-display-url'> <!-- This stuff should get displayed *and* copied -->
      //   nname.com/foo
      // </span>
      // <span class='tco-ellipsis'> <!-- This stuff should get displayed but not copied -->
      //   <span style='font-size:0'>&nbsp;</span>
      //   â€¦
      // </span>
      v['invisible'] = options.invisibleTagAttrs;
      return stringSupplant("<span class='tco-ellipsis'>#{precedingEllipsis}<span #{invisible}>&nbsp;</span></span><span #{invisible}>#{beforeDisplayUrl}</span><span class='js-display-url'>#{displayUrlSansEllipses}</span><span #{invisible}>#{afterDisplayUrl}</span><span class='tco-ellipsis'><span #{invisible}>&nbsp;</span>#{followingEllipsis}</span>", v);
    }
    return displayUrl;
  };

  twttr.txt.autoLinkEntities = function(text, entities, options) {
    options = clone(options || {});

    options.hashtagClass = options.hashtagClass || DEFAULT_HASHTAG_CLASS;
    options.hashtagUrlBase = options.hashtagUrlBase || "https://twitter.com/#!/search?q=%23";
    options.cashtagClass = options.cashtagClass || DEFAULT_CASHTAG_CLASS;
    options.cashtagUrlBase = options.cashtagUrlBase || "https://twitter.com/#!/search?q=%24";
    options.listClass = options.listClass || DEFAULT_LIST_CLASS;
    options.usernameClass = options.usernameClass || DEFAULT_USERNAME_CLASS;
    options.usernameUrlBase = options.usernameUrlBase || "https://twitter.com/";
    options.listUrlBase = options.listUrlBase || "https://twitter.com/";
    options.htmlAttrs = twttr.txt.extractHtmlAttrsFromOptions(options);
    options.invisibleTagAttrs = options.invisibleTagAttrs || "style='position:absolute;left:-9999px;'";

    // remap url entities to hash
    var urlEntities, i, len;
    if(options.urlEntities) {
      urlEntities = {};
      for(i = 0, len = options.urlEntities.length; i < len; i++) {
        urlEntities[options.urlEntities[i].url] = options.urlEntities[i];
      }
      options.urlEntities = urlEntities;
    }

    var result = "";
    var beginIndex = 0;

    // sort entities by start index
    entities.sort(function(a,b){ return a.indices[0] - b.indices[0]; });

    var nonEntity = options.htmlEscapeNonEntities ? twttr.txt.htmlEscape : function(text) {
      return text;
    };

    for (var i = 0; i < entities.length; i++) {
      var entity = entities[i];
      result += nonEntity(text.substring(beginIndex, entity.indices[0]));

      if (entity.url) {
        result += twttr.txt.linkToUrl(entity, text, options);
      } else if (entity.hashtag) {
        result += twttr.txt.linkToHashtag(entity, text, options);
      } else if (entity.screenName) {
        result += twttr.txt.linkToMentionAndList(entity, text, options);
      } else if (entity.cashtag) {
        result += twttr.txt.linkToCashtag(entity, text, options);
      }
      beginIndex = entity.indices[1];
    }
    result += nonEntity(text.substring(beginIndex, text.length));
    return result;
  };

  twttr.txt.autoLinkWithJSON = function(text, json, options) {
    // map JSON entity to twitter-text entity
    if (json.user_mentions) {
      for (var i = 0; i < json.user_mentions.length; i++) {
        // this is a @mention
        json.user_mentions[i].screenName = json.user_mentions[i].screen_name;
      }
    }

    if (json.hashtags) {
      for (var i = 0; i < json.hashtags.length; i++) {
        // this is a #hashtag
        json.hashtags[i].hashtag = json.hashtags[i].text;
      }
    }

    if (json.symbols) {
      for (var i = 0; i < json.symbols.length; i++) {
        // this is a $CASH tag
        json.symbols[i].cashtag = json.symbols[i].text;
      }
    }

    // concatenate all entities
    var entities = [];
    for (var key in json) {
      entities = entities.concat(json[key]);
    }

    // modify indices to UTF-16
    twttr.txt.modifyIndicesFromUnicodeToUTF16(text, entities);

    return twttr.txt.autoLinkEntities(text, entities, options);
  };

  twttr.txt.extractHtmlAttrsFromOptions = function(options) {
    var htmlAttrs = {};
    for (var k in options) {
      var v = options[k];
      if (OPTIONS_NOT_ATTRIBUTES[k]) continue;
      if (BOOLEAN_ATTRIBUTES[k]) {
        v = v ? k : null;
      }
      if (v == null) continue;
      htmlAttrs[k] = v;
    }
    return htmlAttrs;
  };

  twttr.txt.autoLink = function(text, options) {
    var entities = twttr.txt.extractEntitiesWithIndices(text, {extractUrlsWithoutProtocol: false});
    return twttr.txt.autoLinkEntities(text, entities, options);
  };

  twttr.txt.autoLinkUsernamesOrLists = function(text, options) {
    var entities = twttr.txt.extractMentionsOrListsWithIndices(text);
    return twttr.txt.autoLinkEntities(text, entities, options);
  };

  twttr.txt.autoLinkHashtags = function(text, options) {
    var entities = twttr.txt.extractHashtagsWithIndices(text);
    return twttr.txt.autoLinkEntities(text, entities, options);
  };

  twttr.txt.autoLinkCashtags = function(text, options) {
    var entities = twttr.txt.extractCashtagsWithIndices(text);
    return twttr.txt.autoLinkEntities(text, entities, options);
  };

  twttr.txt.autoLinkUrlsCustom = function(text, options) {
    var entities = twttr.txt.extractUrlsWithIndices(text, {extractUrlsWithoutProtocol: false});
    return twttr.txt.autoLinkEntities(text, entities, options);
  };

  twttr.txt.removeOverlappingEntities = function(entities) {
    entities.sort(function(a,b){ return a.indices[0] - b.indices[0]; });

    var prev = entities[0];
    for (var i = 1; i < entities.length; i++) {
      if (prev.indices[1] > entities[i].indices[0]) {
        entities.splice(i, 1);
        i--;
      } else {
        prev = entities[i];
      }
    }
  };

  twttr.txt.extractEntitiesWithIndices = function(text, options) {
    var entities = twttr.txt.extractUrlsWithIndices(text, options)
                    .concat(twttr.txt.extractMentionsOrListsWithIndices(text))
                    .concat(twttr.txt.extractHashtagsWithIndices(text, {checkUrlOverlap: false}))
                    .concat(twttr.txt.extractCashtagsWithIndices(text));

    if (entities.length == 0) {
      return [];
    }

    twttr.txt.removeOverlappingEntities(entities);
    return entities;
  };

  twttr.txt.extractMentions = function(text) {
    var screenNamesOnly = [],
        screenNamesWithIndices = twttr.txt.extractMentionsWithIndices(text);

    for (var i = 0; i < screenNamesWithIndices.length; i++) {
      var screenName = screenNamesWithIndices[i].screenName;
      screenNamesOnly.push(screenName);
    }

    return screenNamesOnly;
  };

  twttr.txt.extractMentionsWithIndices = function(text) {
    var mentions = [],
        mentionOrList,
        mentionsOrLists = twttr.txt.extractMentionsOrListsWithIndices(text);

    for (var i = 0 ; i < mentionsOrLists.length; i++) {
      mentionOrList = mentionsOrLists[i];
      if (mentionOrList.listSlug == '') {
        mentions.push({
          screenName: mentionOrList.screenName,
          indices: mentionOrList.indices
        });
      }
    }

    return mentions;
  };

  /**
   * Extract list or user mentions.
   * (Presence of listSlug indicates a list)
   */
  twttr.txt.extractMentionsOrListsWithIndices = function(text) {
    if (!text || !text.match(twttr.txt.regexen.atSigns)) {
      return [];
    }

    var possibleNames = [],
        slashListname;

    text.replace(twttr.txt.regexen.validMentionOrList, function(match, before, atSign, screenName, slashListname, offset, chunk) {
      var after = chunk.slice(offset + match.length);
      if (!after.match(twttr.txt.regexen.endMentionMatch)) {
        slashListname = slashListname || '';
        var startPosition = offset + before.length;
        var endPosition = startPosition + screenName.length + slashListname.length + 1;
        possibleNames.push({
          screenName: screenName,
          listSlug: slashListname,
          indices: [startPosition, endPosition]
        });
      }
    });

    return possibleNames;
  };


  twttr.txt.extractReplies = function(text) {
    if (!text) {
      return null;
    }

    var possibleScreenName = text.match(twttr.txt.regexen.validReply);
    if (!possibleScreenName ||
        RegExp.rightContext.match(twttr.txt.regexen.endMentionMatch)) {
      return null;
    }

    return possibleScreenName[1];
  };

  twttr.txt.extractUrls = function(text, options) {
    var urlsOnly = [],
        urlsWithIndices = twttr.txt.extractUrlsWithIndices(text, options);

    for (var i = 0; i < urlsWithIndices.length; i++) {
      urlsOnly.push(urlsWithIndices[i].url);
    }

    return urlsOnly;
  };

  twttr.txt.extractUrlsWithIndices = function(text, options) {
    if (!options) {
      options = {extractUrlsWithoutProtocol: true};
    }
    if (!text || (options.extractUrlsWithoutProtocol ? !text.match(/\./) : !text.match(/:/))) {
      return [];
    }

    var urls = [];

    while (twttr.txt.regexen.extractUrl.exec(text)) {
      var before = RegExp.$2, url = RegExp.$3, protocol = RegExp.$4, domain = RegExp.$5, path = RegExp.$7;
      var endPosition = twttr.txt.regexen.extractUrl.lastIndex,
          startPosition = endPosition - url.length;

      // if protocol is missing and domain contains non-ASCII characters,
      // extract ASCII-only domains.
      if (!protocol) {
        if (!options.extractUrlsWithoutProtocol
            || before.match(twttr.txt.regexen.invalidUrlWithoutProtocolPrecedingChars)) {
          continue;
        }
        var lastUrl = null,
            asciiEndPosition = 0;
        domain.replace(twttr.txt.regexen.validAsciiDomain, function(asciiDomain) {
          var asciiStartPosition = domain.indexOf(asciiDomain, asciiEndPosition);
          asciiEndPosition = asciiStartPosition + asciiDomain.length;
          lastUrl = {
            url: asciiDomain,
            indices: [startPosition + asciiStartPosition, startPosition + asciiEndPosition]
          };
          if (path
              || asciiDomain.match(twttr.txt.regexen.validSpecialShortDomain)
              || !asciiDomain.match(twttr.txt.regexen.invalidShortDomain)) {
            urls.push(lastUrl);
          }
        });

        // no ASCII-only domain found. Skip the entire URL.
        if (lastUrl == null) {
          continue;
        }

        // lastUrl only contains domain. Need to add path and query if they exist.
        if (path) {
          lastUrl.url = url.replace(domain, lastUrl.url);
          lastUrl.indices[1] = endPosition;
        }
      } else {
        // In the case of t.co URLs, don't allow additional path characters.
        if (url.match(twttr.txt.regexen.validTcoUrl)) {
          url = RegExp.lastMatch;
          endPosition = startPosition + url.length;
        }
        urls.push({
          url: url,
          indices: [startPosition, endPosition]
        });
      }
    }

    return urls;
  };

  twttr.txt.extractHashtags = function(text) {
    var hashtagsOnly = [],
        hashtagsWithIndices = twttr.txt.extractHashtagsWithIndices(text);

    for (var i = 0; i < hashtagsWithIndices.length; i++) {
      hashtagsOnly.push(hashtagsWithIndices[i].hashtag);
    }

    return hashtagsOnly;
  };

  twttr.txt.extractHashtagsWithIndices = function(text, options) {
    if (!options) {
      options = {checkUrlOverlap: true};
    }

    if (!text || !text.match(twttr.txt.regexen.hashSigns)) {
      return [];
    }

    var tags = [];

    text.replace(twttr.txt.regexen.validHashtag, function(match, before, hash, hashText, offset, chunk) {
      var after = chunk.slice(offset + match.length);
      if (after.match(twttr.txt.regexen.endHashtagMatch))
        return;
      var startPosition = offset + before.length;
      var endPosition = startPosition + hashText.length + 1;
      tags.push({
        hashtag: hashText,
        indices: [startPosition, endPosition]
      });
    });

    if (options.checkUrlOverlap) {
      // also extract URL entities
      var urls = twttr.txt.extractUrlsWithIndices(text);
      if (urls.length > 0) {
        var entities = tags.concat(urls);
        // remove overlap
        twttr.txt.removeOverlappingEntities(entities);
        // only push back hashtags
        tags = [];
        for (var i = 0; i < entities.length; i++) {
          if (entities[i].hashtag) {
            tags.push(entities[i]);
          }
        }
      }
    }

    return tags;
  };

  twttr.txt.extractCashtags = function(text) {
    var cashtagsOnly = [],
        cashtagsWithIndices = twttr.txt.extractCashtagsWithIndices(text);

    for (var i = 0; i < cashtagsWithIndices.length; i++) {
      cashtagsOnly.push(cashtagsWithIndices[i].cashtag);
    }

    return cashtagsOnly;
  };

  twttr.txt.extractCashtagsWithIndices = function(text) {
    if (!text || text.indexOf("$") == -1) {
      return [];
    }

    var tags = [];

    text.replace(twttr.txt.regexen.validCashtag, function(match, before, dollar, cashtag, offset, chunk) {
      var startPosition = offset + before.length;
      var endPosition = startPosition + cashtag.length + 1;
      tags.push({
        cashtag: cashtag,
        indices: [startPosition, endPosition]
      });
    });

    return tags;
  };

  twttr.txt.modifyIndicesFromUnicodeToUTF16 = function(text, entities) {
    twttr.txt.convertUnicodeIndices(text, entities, false);
  };

  twttr.txt.modifyIndicesFromUTF16ToUnicode = function(text, entities) {
    twttr.txt.convertUnicodeIndices(text, entities, true);
  };

  twttr.txt.getUnicodeTextLength = function(text) {
    return text.replace(twttr.txt.regexen.non_bmp_code_pairs, ' ').length;
  };

  twttr.txt.convertUnicodeIndices = function(text, entities, indicesInUTF16) {
    if (entities.length == 0) {
      return;
    }

    var charIndex = 0;
    var codePointIndex = 0;

    // sort entities by start index
    entities.sort(function(a,b){ return a.indices[0] - b.indices[0]; });
    var entityIndex = 0;
    var entity = entities[0];

    while (charIndex < text.length) {
      if (entity.indices[0] == (indicesInUTF16 ? charIndex : codePointIndex)) {
        var len = entity.indices[1] - entity.indices[0];
        entity.indices[0] = indicesInUTF16 ? codePointIndex : charIndex;
        entity.indices[1] = entity.indices[0] + len;

        entityIndex++;
        if (entityIndex == entities.length) {
          // no more entity
          break;
        }
        entity = entities[entityIndex];
      }

      var c = text.charCodeAt(charIndex);
      if (0xD800 <= c && c <= 0xDBFF && charIndex < text.length - 1) {
        // Found high surrogate char
        c = text.charCodeAt(charIndex + 1);
        if (0xDC00 <= c && c <= 0xDFFF) {
          // Found surrogate pair
          charIndex++;
        }
      }
      codePointIndex++;
      charIndex++;
    }
  };

  // this essentially does text.split(/<|>/)
  // except that won't work in IE, where empty strings are ommitted
  // so "<>".split(/<|>/) => [] in IE, but is ["", "", ""] in all others
  // but "<<".split("<") => ["", "", ""]
  twttr.txt.splitTags = function(text) {
    var firstSplits = text.split("<"),
        secondSplits,
        allSplits = [],
        split;

    for (var i = 0; i < firstSplits.length; i += 1) {
      split = firstSplits[i];
      if (!split) {
        allSplits.push("");
      } else {
        secondSplits = split.split(">");
        for (var j = 0; j < secondSplits.length; j += 1) {
          allSplits.push(secondSplits[j]);
        }
      }
    }

    return allSplits;
  };

  twttr.txt.hitHighlight = function(text, hits, options) {
    var defaultHighlightTag = "em";

    hits = hits || [];
    options = options || {};

    if (hits.length === 0) {
      return text;
    }

    var tagName = options.tag || defaultHighlightTag,
        tags = ["<" + tagName + ">", "</" + tagName + ">"],
        chunks = twttr.txt.splitTags(text),
        i,
        j,
        result = "",
        chunkIndex = 0,
        chunk = chunks[0],
        prevChunksLen = 0,
        chunkCursor = 0,
        startInChunk = false,
        chunkChars = chunk,
        flatHits = [],
        index,
        hit,
        tag,
        placed,
        hitSpot;

    for (i = 0; i < hits.length; i += 1) {
      for (j = 0; j < hits[i].length; j += 1) {
        flatHits.push(hits[i][j]);
      }
    }

    for (index = 0; index < flatHits.length; index += 1) {
      hit = flatHits[index];
      tag = tags[index % 2];
      placed = false;

      while (chunk != null && hit >= prevChunksLen + chunk.length) {
        result += chunkChars.slice(chunkCursor);
        if (startInChunk && hit === prevChunksLen + chunkChars.length) {
          result += tag;
          placed = true;
        }

        if (chunks[chunkIndex + 1]) {
          result += "<" + chunks[chunkIndex + 1] + ">";
        }

        prevChunksLen += chunkChars.length;
        chunkCursor = 0;
        chunkIndex += 2;
        chunk = chunks[chunkIndex];
        chunkChars = chunk;
        startInChunk = false;
      }

      if (!placed && chunk != null) {
        hitSpot = hit - prevChunksLen;
        result += chunkChars.slice(chunkCursor, hitSpot) + tag;
        chunkCursor = hitSpot;
        if (index % 2 === 0) {
          startInChunk = true;
        } else {
          startInChunk = false;
        }
      } else if(!placed) {
        placed = true;
        result += tag;
      }
    }

    if (chunk != null) {
      if (chunkCursor < chunkChars.length) {
        result += chunkChars.slice(chunkCursor);
      }
      for (index = chunkIndex + 1; index < chunks.length; index += 1) {
        result += (index % 2 === 0 ? chunks[index] : "<" + chunks[index] + ">");
      }
    }

    return result;
  };

  var MAX_LENGTH = 140;

  // Characters not allowed in Tweets
  var INVALID_CHARACTERS = [
    // BOM
    fromCode(0xFFFE),
    fromCode(0xFEFF),

    // Special
    fromCode(0xFFFF),

    // Directional Change
    fromCode(0x202A),
    fromCode(0x202B),
    fromCode(0x202C),
    fromCode(0x202D),
    fromCode(0x202E)
  ];

  // Returns the length of Tweet text with consideration to t.co URL replacement
  // and chars outside the basic multilingual plane that use 2 UTF16 code points
  twttr.txt.getTweetLength = function(text, options) {
    if (!options) {
      options = {
          // These come from https://api.twitter.com/1/help/configuration.json
          // described by https://dev.twitter.com/docs/api/1/get/help/configuration
          short_url_length: 22,
          short_url_length_https: 23
      };
    }
    var textLength = twttr.txt.getUnicodeTextLength(text),
        urlsWithIndices = twttr.txt.extractUrlsWithIndices(text);
    twttr.txt.modifyIndicesFromUTF16ToUnicode(text, urlsWithIndices);

    for (var i = 0; i < urlsWithIndices.length; i++) {
    	// Subtract the length of the original URL
      textLength += urlsWithIndices[i].indices[0] - urlsWithIndices[i].indices[1];

      // Add 23 characters for URL starting with https://
      // Otherwise add 22 characters
      if (urlsWithIndices[i].url.toLowerCase().match(twttr.txt.regexen.urlHasHttps)) {
         textLength += options.short_url_length_https;
      } else {
        textLength += options.short_url_length;
      }
    }

    return textLength;
  };

  // Check the text for any reason that it may not be valid as a Tweet. This is meant as a pre-validation
  // before posting to api.twitter.com. There are several server-side reasons for Tweets to fail but this pre-validation
  // will allow quicker feedback.
  //
  // Returns false if this text is valid. Otherwise one of the following strings will be returned:
  //
  //   "too_long": if the text is too long
  //   "empty": if the text is nil or empty
  //   "invalid_characters": if the text contains non-Unicode or any of the disallowed Unicode characters
  twttr.txt.isInvalidTweet = function(text) {
    if (!text) {
      return "empty";
    }

    // Determine max length independent of URL length
    if (twttr.txt.getTweetLength(text) > MAX_LENGTH) {
      return "too_long";
    }

    for (var i = 0; i < INVALID_CHARACTERS.length; i++) {
      if (text.indexOf(INVALID_CHARACTERS[i]) >= 0) {
        return "invalid_characters";
      }
    }

    return false;
  };

  twttr.txt.isValidTweetText = function(text) {
    return !twttr.txt.isInvalidTweet(text);
  };

  twttr.txt.isValidUsername = function(username) {
    if (!username) {
      return false;
    }

    var extracted = twttr.txt.extractMentions(username);

    // Should extract the username minus the @ sign, hence the .slice(1)
    return extracted.length === 1 && extracted[0] === username.slice(1);
  };

  var VALID_LIST_RE = regexSupplant(/^#{validMentionOrList}$/);

  twttr.txt.isValidList = function(usernameList) {
    var match = usernameList.match(VALID_LIST_RE);

    // Must have matched and had nothing before or after
    return !!(match && match[1] == "" && match[4]);
  };

  twttr.txt.isValidHashtag = function(hashtag) {
    if (!hashtag) {
      return false;
    }

    var extracted = twttr.txt.extractHashtags(hashtag);

    // Should extract the hashtag minus the # sign, hence the .slice(1)
    return extracted.length === 1 && extracted[0] === hashtag.slice(1);
  };

  twttr.txt.isValidUrl = function(url, unicodeDomains, requireProtocol) {
    if (unicodeDomains == null) {
      unicodeDomains = true;
    }

    if (requireProtocol == null) {
      requireProtocol = true;
    }

    if (!url) {
      return false;
    }

    var urlParts = url.match(twttr.txt.regexen.validateUrlUnencoded);

    if (!urlParts || urlParts[0] !== url) {
      return false;
    }

    var scheme = urlParts[1],
        authority = urlParts[2],
        path = urlParts[3],
        query = urlParts[4],
        fragment = urlParts[5];

    if (!(
      (!requireProtocol || (isValidMatch(scheme, twttr.txt.regexen.validateUrlScheme) && scheme.match(/^https?$/i))) &&
      isValidMatch(path, twttr.txt.regexen.validateUrlPath) &&
      isValidMatch(query, twttr.txt.regexen.validateUrlQuery, true) &&
      isValidMatch(fragment, twttr.txt.regexen.validateUrlFragment, true)
    )) {
      return false;
    }

    return (unicodeDomains && isValidMatch(authority, twttr.txt.regexen.validateUrlUnicodeAuthority)) ||
           (!unicodeDomains && isValidMatch(authority, twttr.txt.regexen.validateUrlAuthority));
  };

  function isValidMatch(string, regex, optional) {
    if (!optional) {
      // RegExp["$&"] is the text of the last match
      // blank strings are ok, but are falsy, so we check stringiness instead of truthiness
      return ((typeof string === "string") && string.match(regex) && RegExp["$&"] === string);
    }

    // RegExp["$&"] is the text of the last match
    return (!string || (string.match(regex) && RegExp["$&"] === string));
  }

  if (typeof module != 'undefined' && module.exports) {
    module.exports = twttr.txt;
  }

  if (typeof define == 'function' && define.amd) {
    define([], twttr.txt);
  }

  if (typeof window != 'undefined') {
    if (window.twttr) {
      for (var prop in twttr) {
        window.twttr[prop] = twttr[prop];
      }
    } else {
      window.twttr = twttr;
    }
  }
})();

(function($){

if (!window.Hatena) window.Hatena = {};
if (!Hatena.Diary) Hatena.Diary = {};

Hatena.Diary.BUG = function (error, append) {
    $.ajax({
        type: 'get',
        url: Hatena.Diary.URLGenerator.static_url('/js/vendor/stacktrace/stacktrace.js'),
        cache: true,
        dataType: 'script'
    }).done(function () {
        var trace;
        try {
            trace = printStackTrace({ e: error });
            trace.pop();        // printStackTraceã‚’é™¤ã
        } catch (e) {
            trace = null;
        }
        var msg = '[BUG] ' + (append || '') + ' ' + error;

        var content = [
            location.href,
            msg,
            trace
        ];

        var img = new Image();
        img.src = (Hatena.Diary.data('admin-domain') || '') + '/api/bug?content=' + encodeURIComponent(JSON.stringify(content));
        Hatena.Diary.LOG(msg);
        Hatena.Diary.LOG(trace);
    });
};

/**
 * Ajax ã® onerror ã¨ã‹ã«ã„ã‚Œã‚‹
 */
Hatena.Diary.REPORT_BUG = function (name) {
    return function (error) {
        Hatena.Diary.BUG(error, name);
    };
};

Hatena.Diary.LOG = (function() {
    if (window.console && window.console.log) {
        if (console.log.bind) {
            return console.log.bind(console);
        } else {
            return function(obj) { console.log(obj) };
        }
    } else {
        return function() {};
    }
})();

Hatena.Diary.data = function (name) {
    var html = document.documentElement;
    return html.getAttribute('data-' + name);
};

Hatena.Diary.SpeedTrack = {
    init: function () {
        if (this.initialized === true) return;

        // é€ä¿¡ã¯100åˆ†ã®1ã«ã—ãŸã„
        this.enabled = Math.floor(Math.random() * 100) === 0;

        var now = new Date();
        this.startTime = now;
        this.data = {};
        this.checkpoints = [];
        this.elapsedTimes = [];

        this.initialized = true;
    },
    setDomain: function (domain) {
        this.domain = domain;
    },
    setPage: function (page) {
        this.page = page;
    },
    record: function (name) {
        var endTime = new Date();
        var elapsed = endTime.getTime() - this.startTime.getTime();
        this.checkpoints.push(name);
        this.elapsedTimes.push(elapsed);

        this.send();
    },
    send: function () {
        if (this._send) return this._send();

        // 1ç§’ã«1å›ã¾ã§é€ä¿¡ã™ã‚‹
        this._send = _.throttle(function () {
            if (!this.enabled) return;

            var img = new Image();
            img.src = (Hatena.Diary.data('admin-domain') || '') + '/api/track/speed?' + $.param({
                track_domain: this.domain,
                track_page: this.page,
                track_speed_checkpoints: this.checkpoints,
                track_speed_elapsed_times: this.elapsedTimes,
                blog : Hatena.Diary.data('blogs-uri-base') || ('http://' + Hatena.Diary.data('blog'))
            });

            this.checkpoints = [];
            this.elapsedTimes = [];
        }, 1000);

        this._send();
    }
};
Hatena.Diary.SpeedTrack.init();

Hatena.Diary.Dropdown = {
    id : 'hatena-diary-dropdown',

    /*
     * options:
     * - show       [Boolean] dropdown ã®è¡¨ç¤ºéè¡¨ç¤ºã‚’æ˜ç¤ºçš„ã«æŒ‡å®š (ç„¡æŒ‡å®šã§ãƒˆã‚°ãƒ«)
     * - key        [String]  ã™ã§ã« dropdown ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã¦ã‚‚ã“ã®å€¤ãŒé•ã£ã¦ã„ãŸã‚‰ç ´æ£„ã—ã¦ä½œã‚ŠãªãŠã™
     * - parent     [String]  è¦ª dropdown ã® id ã‚’æŒ‡å®šã™ã‚‹ã€‚è¦ªãŒæ¶ˆãˆãŸã‚‰è‡ªåˆ†ã‚‚æ¶ˆãˆã‚‹
     * - className  [String]  containerè¦ç´ ã«æŒ‡å®šã™ã‚‹ã‚¯ãƒ©ã‚¹ã€‚ã‚¹ãƒšãƒ¼ã‚¹åŒºåˆ‡ã‚Šã§è¤‡æ•°æŒ‡å®š ("a-class b-class")
     * - callback   [function(dropdown, messenger)]
     */
    toggle : function (uri, init, id, options) {
        id = Hatena.Diary.Dropdown.id + (id ? '-' + id : uri.replace(/\//, '-'));
        options = options || {};

        if (typeof options !== 'object') {
            Hatena.Diary.BUG('Wrong type of options given: ' + options);
        }

        var $container = $(document.getElementById(id));

        if (options.key) {
            if ($container.length && $container.attr('data-dropdown-key') !== options.key) {
                $container.remove();
                $container = $();
            }
        }

        if ($container.length) {
            var show;
            if ('show' in options) {
                show = !!options.show;
            } else {
                show = !$container.is(':visible');
            }
            $container[ show ? 'fadeIn' : 'fadeOut' ]('fast');
            $container.trigger('dropdown:' + (show ? 'show' : 'hide') + ':start');
        } else if ('show' in options && options.show === false) {
            // nop
        } else {
            $container = $('<div class="hatena-globalheader-window"></div>').
                hide().
                attr('id', id).
                appendTo(document.body);

            if (options.key) {
                $container.attr('data-dropdown-key', options.key);
            }

            if (options.parent) {
                var parent = document.getElementById(Hatena.Diary.Dropdown.id + '-' + options.parent);
                $(parent).on('dropdown:hide:start', function () {
                    $container.fadeOut('fast');
                });
            }

            if (options.className) {
                $container.addClass(options.className);
            }

            var iframe = $('<iframe frameborder="0" width="150" height="300"></iframe>').appendTo($container);

            var dropdown = iframe[0];

            if (!/^https?:/.test(uri)) {
                uri = Hatena.Diary.data('admin-domain') + uri;
            }

            var messenger = Messenger.createForFrame(dropdown, uri);
            messenger.addEventListener('close', function () {
                Hatena.Diary.Window.hide(iframe);
            });

            messenger.addEventListener('init', function (css) {
                if (css) $container.css(css);
                messenger.send('init', init);
            });

            messenger.addEventListener('resize', function (css) {
                if (css) $container.css(css);
            });

            messenger.addEventListener('reload', function (data) {
                location.reload(true);
            });

            if (options.callback) {
                options.callback(dropdown, messenger);
            }

            Hatena.Diary.Window.show($container, {
                destroy : function () {
                    $container.remove();
                    messenger.destroy();
                },
                keepOthers: !!options.parent || false
            });

            if (init) {
                if ('left' in init || 'right' in init || 'top' in init) {
                    var offset = $container.offset();
                    if ('left' in init) {
                        offset.left = init.left;
                    } else if ('right' in init) {
                        offset.left = init.right - $container.width();
                    }
                    if ('top' in init) {
                        offset.top = init.top;
                    }
                    $container.offset(offset);
                }

                if ('height' in init) {
                    $container.height(init.height);
                }
            }
        }
    }
};

Hatena.Diary.Feedback = {
    id : 'hatena-diary-feedback',

    toggle : function (uri) {
        var feedback = document.getElementById(Hatena.Diary.Feedback.id);
        if (feedback) {
            $(feedback).fadeToggle('fast');
        } else {
            var iframe = $('<iframe frameborder="0" width="320" height="320"></iframe>').
                hide().
                attr('id', Hatena.Diary.Feedback.id).
                appendTo(document.body);

            feedback = iframe[0];

            var messenger = Messenger.createForFrame(feedback, uri + '?uri=' + encodeURIComponent(location.href) + '&page_id=' + encodeURIComponent(Hatena.Diary.data('page')));
            messenger.addEventListener('close', function () {
                Hatena.Diary.Window.hide(iframe);
            });

            messenger.addEventListener('resize', function (css) {
                if (css) iframe.css(css);
            });

            Hatena.Diary.Window.show(iframe, {
                destroy : function () {
                    iframe.remove();
                    messenger.destroy();
                },
                fixScroll : true
            });
       }
    }
};

Hatena.Diary.Util = {
    canonicalizeColor : function (color) {
        if (color.match(/#([0-9a-f]{6})/i)) {
            color = RegExp.$1;
        } else
        if (color.match(/#([0-9a-f])([0-9a-f])([0-9a-f])/i)) {
            color = RegExp.$1 + RegExp.$1 + RegExp.$2 + RegExp.$2 + RegExp.$3 + RegExp.$3;
        } else
        if (color.match(/rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+)\s*)?/)) {
            var transparent = (RegExp.$4.length && +RegExp.$4 === 0);
            color =
                transparent ? null :
                ("0" + (+RegExp.$1).toString(16)).slice(-2) +
                ("0" + (+RegExp.$2).toString(16)).slice(-2) +
                ("0" + (+RegExp.$3).toString(16)).slice(-2);
        } else {
            color = null;
        }
        return color ? color.toLowerCase() : null;
    },

    updateDynamicPieces : function (container) {
        container = $(container[0]);
        Hatena.Locale.updateTimestamps(container[0]);
        if (Hatena.Star && Hatena.Star.WindowObserver.loaded) {
            container.find('span.hatena-star-comment-container, span.hatena-star-star-container').remove();
            Hatena.Star.EntryLoader.loadNewEntries(container[0]);
        }
        Hatena.Diary.Util.loadNicknames(container);
        Hatena.Diary.setupMathJax(container);
    },

    // iframeã®é«˜ã•ãŒdocument.body.heightã«ãªã‚‹ã‚ˆã†ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ã‚‹
    // Operaã®JSON.stringifyãŒãƒã‚°ã£ã¦ã‚‹ã®ã§ï¼Œã“ã“ã§å¸å è©³ã—ãã¯Redmineã®ãƒã‚±ãƒƒãƒˆ615å‚ç…§
    // Operaã®ãƒã‚°ãŒç›´ã£ãŸã‚‰*1ã¯æ¶ˆã—ã¦ã‚ˆã„
    sendResizeRequest : function  () {
        Hatena.Diary.Pages.send('resize', {
            height: $(document.body).height() * 1
        });
    },
    backupTab: function (args) {
        var $container = args.$container;
        var key = args.key;
        var onchange = args.onchange;

        var isAvailable;

        try {
            isAvailable = localStorage;
        } catch(ignore) {}

        if (!isAvailable) return;

        var localStorageKey = 'Hatena.Diary.Util.backupTab.' + key;

        var getValue = function() {
            return localStorage[localStorageKey];
        };

        var setValue = function(value) {
            localStorage[localStorageKey] = value;
        };

        var restoreLastValue = function() {
            var lastValue = getValue();
            if (lastValue === undefined) return;

            var $input = $container.find('input[value="' + lastValue + '"]');
            $input.trigger('click');
            onchange($input);
        };

        restoreLastValue();

        $container.delegate('input', 'change', function() {
            var $input = $(this);

            setValue($input.val());

            onchange($input);
        });
    },
    preventDuplicateSubmit: function($form) {
        // äºŒé‡submitå¯¾ç­–
        // submitãƒœã‚¿ãƒ³ãŒè¤‡æ•°ã‚ã‚‹ã¨ãsubmitå‰ã«disabledã«ã™ã‚‹ã¨å€¤è‡ªä½“é€ã‚‰ã‚Œãªããªã£ã¦ã—ã¾ã†å¯¾ç­–ã§ï¼ŒsubmitãŒæ¸ˆã‚“ã§ã‹ã‚‰disabledã«ã—ã¦ã„ã¾ã™
        _.defer(function() {
            $form.find(':submit').prop('disabled', true);
        });
    },
    extend: function(target, parent) {
        // parentã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’é †ã«targetã«ç§»ã—ã¦ã„ã
        // targetã«ã™ã§ã«å­˜åœ¨ã™ã‚‹ã¨ãã¯ç§»ã•ãªã„
        for (var key in parent) if (parent.hasOwnProperty(key) && ! target.hasOwnProperty(key)) {
            target[key] = parent[key];
        }

    },
    // get_resource()ãŒçœŸã«ãªã£ãŸã‚‰ä¸€åº¦ã ã‘main_fun()ã™ã‚‹
    // ä¸€åº¦åŒæœŸçš„ã«ãƒã‚§ãƒƒã‚¯ã—ï¼Œãã®å¾Œã¯polling
    // intervalãŒæŒ‡å®šã•ã‚Œã¦ã„ãªã‘ã‚Œã°500msã”ã¨
    waitForResource: function(get_resource, main_fun, interval) {
        if (!interval) interval = 500;
        var role = function() {
            if (get_resource()) {
                main_fun();
                return true;
            }
            return false;
        };
        if (role()) return;
        var timer = setInterval(function() {
            if (role()) clearInterval(timer);
        }, interval);
    },
    setupTipsy: function() {
        // touchãƒ‡ãƒã‚¤ã‚¹ã§ã¯ä¸€åº¦ã‚¿ãƒƒãƒ—ã—ãªã„ã¨tipsyå‡ºãªã„ï¼Œä½¿ã„å‹æ‰‹ä¸‹ãŒã‚‹ã®ã§tipsyç„¡åŠ¹åŒ–
        if (Hatena.Diary.Browser.isTouch) return;

        if ( ! $.fn.tipsy ) return;

         // n
        // w e
        //  s

        var rules = {
            left: 'e',
            right: 'w',
            bottom: 'n',
            top: 's',
            northwest: 'nw',
            southwest: 'sw',
            northeast: 'ne',
            southeast: 'se'
        };
        var $body = $(document.body);

        for (var rule in rules) if (rules.hasOwnProperty(rule)) {
            var selector = '.tipsy-' + rule;
            var gravity = rules[rule];

            $body.tipsy({
                gravity: gravity,
                fade: false,
                opacity: 1.0,
                live: selector
            });
        }
    },
    // $.paramã®é€†
    // input: key=value1&key=value2 å½¢å¼ã®String
    // output: { key: [value1, value2] }
    decodeParam : function (data) {
        var params = {};
        var values = data.split('&');
        for (var i = 0, len = values.length; i < len; i++) {
            if (!values[i].match(/[=]/)) continue;
            var kv = values[i].split('=');
            var key = decodeURIComponent(kv[0]);
            var val = kv[1].replace(/\+/g, ' ');
            if (!params[key]) params[key] = [];
            params[key].push(decodeURIComponent(val));
        }

        return params;
    },
    // decodeParamã§é…åˆ—ã«ãªã£ãŸã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’locationã«å¤‰æ›ã™ã‚‹
    // decodeParamã§ã¯å€¤ãŒ1ã¤ã®ã¨ãã‚‚é…åˆ—ã‚’è¿”ã™ã®ã§, é…åˆ—ã®è¦ç´ ãŒ1ã¤ã®ã¨ãã¯ã‚­ãƒ¼ã‚’å¤‰æ›´ã—ãªã„
    // input: { key: value1, key1: [value1], key2: [value1,value2] }
    // output: location?key=value1&key1=value1&key2[]=value1&key2[]=value2
    locationWithParam: function (params) {
        _.each(params, function(value, key){
            if ( _.isArray(value) && value.length == 1) params[key] = value[0];
        });
        return location.pathname + '?' + $.param(params);
    },
    replaceYoutubeURL: function ($entry) {
        // ä»¥å‰è²¼ã‚Šä»˜ã‘ãŸyoutubeå‹•ç”»ãŒå†ç”Ÿã•ã‚Œãªã„ã®ã§iframeã®srcã®URLã‚’è¡¨ç¤ºæ™‚ã«æ›¸ãæ›ãˆã‚‹
        $entry.find('iframe[src*="youtube.com/"],iframe[src*="youtube.googleapis.com/"]').each(function() {
            var $iframe = $(this);
            var src = $iframe.attr('src');
            $iframe.attr('src', Hatena.Diary.Util.migrateOldStyleYoutubeURL(src));
        });
    },
    migrateOldStyleYoutubeURL: function (url) {
        // XXX: /v/ä»¥ä¸‹ã®URLã¯iframeã«å…¥ã‚Œã‚‰ã‚Œãªããªã£ãŸï¼/embed/ã«ã—ãŸã‚‰å†ç”Ÿã§ãã‚‹ï¼ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚‚æ¶ˆã™å¿…è¦ã‚ã‚‹ï¼
        // æ—§: https://www.youtube.com/v/***&aaa=bbbb&
        // æ–°: https://www.youtube.com/embed/***
        // /embed/ ã§ãƒ—ãƒ¬ã‚¤ãƒªã‚¹ãƒˆã‚’è²¼ã‚Šä»˜ã‘ã‚‹å ´åˆã¯?list= ã¨ã„ã†ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒæ¥ã‚‹ã®ã§ï¼Œ/v/ã˜ã‚ƒãªã„ã¨ãã¯ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æ¶ˆã—ã¦ã¯ã„ã‘ãªã„
        if (url.match(/\/v\//i)) {
            url = url.split(/[?&]/)[0];
            url = url.replace(/\/v\//i, '/embed/');
        }

        // XXX: youtube.googleapis.com ã¯iPhoneã§å†ç”Ÿã§ããªããªã£ãŸï¼www.youtube.com/embed/ ãªã‚‰å†ç”Ÿã§ãã‚‹ï¼
        url = url.replace('youtube.googleapis.com', 'www.youtube.com');

        // XXX: httpsã‚‚è²¼ã‚Œãªããªã£ãŸã®ã§//ã§è²¼ã£ã¦ç¾åœ¨ã®ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã¨ä¸€è‡´ã•ã›ã‚‹
        url = url.replace(/^https:/, '');
        return url;
    },
    showFlashMessage: function (message) {
        var $container = $(
            '<div class="hatena-globalheader-window message">' +
              '<div class="message">' + message + '</div>' +
            '</div>')
            .css({
                width: 200,
                height: 'auto',
                right: 'auto',
                left: ($(window).width() - 200) / 2
            })
            .appendTo(document.body);

        Hatena.Diary.Window.show($container, {
            destroy : function () {
                $container.remove();
            }
        });
    },
    // windowã®åº§æ¨™ã‚’è¡¨ã™hashã‚’window.openã«æŒ‡å®šã§ãã‚‹æ–‡å­—åˆ—ã«å¤‰æ›
    // position: { width, height, left, top } valueã¯int
    // return: "width=\d,height=\d,left=\d,top=\d"
    positionToPositionString: function(position) {
        return _.map(_.keys(position), function(key) {
            return key + '=' + position[key];
        }).join(',');
    },
    // åˆ©ç”¨è¦ç´„å†åŒæ„ notices.count.jsonã®è¿”ã‚Šå€¤ã‚’å—ã‘å–ã‚‹
    needComrule2013: function(data) {
        if (!data.need_comrule2013) return;
        _.defer(function() {
            var BASE     = location.hostname.match(/\.hatena\.[^:]+/)[0];
            window.top.location.href = 'http://www' + BASE + '/login?need_comrule2013=1';
        });
    },

    // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã«ã¤ã„ã¦ãã‚‹è¦ç´ ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
    // $container: ç›´ä¸‹ã«å­è¦ç´ è¦ç´ ã‚’1ã¤ã ã‘å«ã‚€è¦ç´  å…ˆé ­ã®1ã¤ã ã‘ç›£è¦–ã™ã‚‹ã®ã§ï¼Œè¤‡æ•°ã®è¦ç´ ã‚’ç›£è¦–ã—ãŸã„å ´åˆã¯ï¼Œã“ã®é–¢æ•°ã‚’è¤‡æ•°å›å‘¼ã‚“ã§ãã ã•ã„
    // enable_bottom: #containerã®ä¸‹ã«åˆã‚ã›ã¦æ­¢ã‚ã‚‹ã¨ãtrue
    initScrollFollowedElement: function ($container, enable_bottom) {
        var $target = $($container.children()[0]);

        if ($target.length === 0) {
            Hatena.Diary.BUG("ad element not found: " + $container.html(), 'followedAd');
            return;
        }

        var $document = $(document);
        var $page_container = $('#container');

        var onScroll = function() {
            var container_offset = $container.offset();
            var scroll_top = $document.scrollTop();
            var target_height = $target.height();
            var page_container_top = $page_container.offset().top;
            var page_container_height = $page_container.height();

            if (scroll_top + page_container_top < container_offset.top) {
                // ä¸Šã§å›ºå®š
                $target.css({
                    position: 'static'
                });
            } else if (!enable_bottom || (scroll_top <  page_container_height - target_height)) {
                // çœŸã‚“ä¸­ ã¤ã„ã¦ãã‚‹

                $target.css({
                    position: 'fixed',
                    top: page_container_top,
                    left: container_offset.left
                });
            } else {
                // ä¸‹ã§å›ºå®š #containerã®åº•è¾ºã«åˆã‚ã›ã‚‹
                $target.css({
                    position: 'absolute',
                    top: page_container_top + page_container_height - target_height,
                    left: container_offset.left
                });

            }
        };

        var onResize = function() {

            var container_offset = $container.offset();

            $target.css({
                left: container_offset.left
            });
        };

        $(window).scroll(onScroll).resize(onResize);
        onScroll();

    },

    // $container å†…ã® data-load-nicknames ã®ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ ã‚’å–ã£ã¦ãã¦è¦ç´ ã®ãƒ†ã‚­ã‚¹ãƒˆã‚’å·®ã—æ›¿ãˆã‚‹
    loadNicknames: function($container) {
        var template = _.template('<span class="user-name-nickname"><%- nickname %></span> <span class="user-name-paren">(</span><span class="user-name-hatena-id">id:<%- hatena_id %></span><span class="user-name-paren">)</span>');
        var $elements = $container.find('[data-load-nickname]');
        var user_names = [];
        $elements.each(function() {
            var $element = $(this);
            var user_name = $element.attr('data-user-name');
            user_names.push(user_name);
        });
        user_names = _.uniq(user_names);
        if (user_names.length === 0) return;
        if (user_names.length === 1) user_names.push('hatenablog'); // APIã®ä»•æ§˜ä¸Šuser_namesã¯2ã¤ä»¥ä¸Šå¿…è¦

        var displayNicknames = function(friendships) {
            $elements.each(function() {
                $element = $(this);
                var user_name = $element.attr('data-user-name');
                if (friendships[user_name] && user_name != friendships[user_name].name) {
                    var html = template({
                        nickname: friendships[user_name].name,
                        hatena_id: user_name
                    });
                    $element.html(html);
                }
            });
        };

        // JSONPã®ä¸Šé™ã«é€¹ã—ãªã„ãŸã‚å°åˆ†ã‘ã«ã—ã¦é€šä¿¡
        var request = function() {
            var user_names_current = user_names.splice(0, 20);
            $.ajax({
                url: 'https://h.hatena.ne.jp/api/friendships/show.json',
                dataType: 'jsonp',
                data: {
                    url_name: user_names_current
                },
                traditional: true
            }).done(function(friendships) {
                displayNicknames(friendships);
                if(user_names.length > 0) {
                    request();
                }
            });
        };

        request();

    },

    // W3CDTFå½¢å¼ã®Stringã‚’ãƒ‘ãƒ¼ã‚¹ã—ã¦Dateã‚’è¿”ã™
    // IE8ä»¥å‰ã¯new Date( )ã§ã“ã®å½¢å¼ã‚’ãƒ‘ãƒ¼ã‚¹ã§ããªã„ã®ã§æ­£è¦è¡¨ç¾ã§ãªã‚“ã¨ã‹ã™ã‚‹
    // datetime: YYYY-MM-DDThh:mm:ss å½¢å¼ã®String
    // returns: Date | null
    parseW3CDTF: function(datetime) {
        var matched = datetime.match(/(\d+)-(\d+)-(\d+)T(\d+):(\d+):(\d+)/);
        if (!matched) return null;
        return new Date(+matched[1], +matched[2] - 1, +matched[3], +matched[4], +matched[5], +matched[6]);
    },

    // ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ˜ãƒƒãƒ€å›ºå®šæ™‚ã«idæŒ‡å®šã®ãƒªãƒ³ã‚¯ã‚’è¸ã‚€ã¨ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã®è¦ç´ ãŒã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ˜ãƒƒãƒ€ã«éš ã‚Œã‚‹å•é¡Œã®å¯¾å¿œ
    // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«çµ‚ã‚ã£ãŸã‚ã¨ï¼Œã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ˜ãƒƒãƒ€åˆ†ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚’ã¡ã‚‡ã£ã¨æˆ»ã™
    // ä»–ã®JSãŒã‚¤ãƒ™ãƒ³ãƒˆè¦‹ã¦ã‚‹ã¨ã‹ã§ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ä½ç½®å¤‰ã‚ã‚‰ãªã„ã“ã¨ã‚‚ã‚ã‚‹ã®ã§
    // ã—ã°ã‚‰ãã—ã¦å¤‰åŒ–ãªã‘ã‚Œã°ã‚ãã‚‰ã‚ã‚‹
    setupScrollAdjustForFixedGlobalHeader: function() {
        var $header = $('#globalheader-container');
        if ($header.css('position') !== 'fixed') return;

        var headerHeight = $('#globalheader-container').height();
        var $document = $(document);

        $document.on('click', 'a[href^="#"]', function() {
            var positionBefore = $document.scrollTop();
            var checkCount = 0;
            var check = function() {
                if ($document.scrollTop() !== positionBefore) {
                    window.scrollBy(0, -headerHeight);
                } else if (checkCount++ < 10) {
                    setTimeout(check, 0);
                }
            };
            setTimeout(check, 0);
        });
    },
    // æŒ‡å®šã—ãŸURLã®ç”»åƒãƒªã‚½ãƒ¼ã‚¹ã‚’ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã¾ã§å¾…ã¤
    // ãƒ­ãƒ¼ãƒ‰ã§ããŸã‚‰resolve, å¤±æ•—ã™ã‚‹ã¨rejectã•ã‚Œã‚‹Deferredã‚’è¿”ã™
    loadImages: function(urls) {
        var loaded = $.Deferred();
        var images;

        var count = 0;
        var onload = function() {
            count++;
            if (count === urls.length) {
                loaded.resolve(images);
            }
        };
        var onerror = function() {
            loaded.reject(images);
        };

        images = _.map(urls, function(url) {
            var $img = $('<img>');
            $img.on('load', onload)
                .on('error', onerror)
                .attr('src', url);
            return $img[0];
        });

        return loaded.promise();
    }
};

// Google Image Charts APIã¯deprecatedãªã®ã§mathjaxã§ç½®ãæ›ãˆã‚‹
// å…¨ã¦ã®ãƒ–ãƒ­ã‚°ã§å¿…è¦ã«ãªã‚‹ã‚ã‘ã§ã¯ãªã„ã®ã§ï¼Œå¿…è¦ã«ãªã£ã¦ã‹ã‚‰èª­ã¿è¾¼ã‚€
// TeXè¨˜æ³•ç”Ÿæˆã™ã‚‹ã¨altã«TeXã®ã‚½ãƒ¼ã‚¹ãŒå…¥ã£ã¦ã‚‹ã®ã§ï¼ŒaltãŒã‚ã£ãŸã‚‰ç½®ãæ›ãˆã‚‹
// å‚è€ƒï¼š http://docs.mathjax.org/en/latest/typeset.html
Hatena.Diary.setupMathJax = (function() {
    var loaded;

    return function($root) {
        var $imgs = $root.find('img[src*="chart.apis.google.com/chart?cht=tx&chl="]');
        if (!$imgs.length) return;

        if (!loaded) {
            loaded = $.getScript("https://cdn.mathjax.org/mathjax/2.3-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML");
        }

        loaded.done(function() {
            $imgs.each(function() {
                var $img = $(this);
                var source = $img.attr('alt');
                if (!source) return;
                var $script = $('<script type="math/tex">');
                $img.replaceWith($script);
                MathJax.HTML.setScript($script[0], source);
            });
            MathJax.Hub.Queue(["Typeset", MathJax.Hub, $root[0]]);
        });
    };
})();

Hatena.Diary.Location = {
    setup : function () {
        var data = location.search.slice(1);

        Hatena.Diary.Location._params = Hatena.Diary.Util.decodeParam(data);
    },

    param : function (name) {
        return this.params()[name] ? this.params()[name][0] : null;
    },

    params : function () {
        if (!this._params) this.setup();
        return this._params;
    }
};

Hatena.Diary.Window = {
    shown : [],

    init : function () {
        var self = this;

        $(document.body).click(function (event) {
            var windowClicked = _.any(self.shown, function(win) {
                return win.win[0] === event.target || $.contains(win.win[0], event.target);
            });
            // è¡¨ç¤ºä¸­ã®windowãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸã¨ãã¯é–‰ã˜ãªã„
            if (windowClicked) {
                return;
            }

            self.hideAll();
        });

        self.init = function () { };
    },

    /**
     * opts.closeExplicitlyãŒtrueã ã¨ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ä»¥å¤–ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã‚‚é–‰ã˜ã‚‰ã‚Œãªã„
     * ãã®å ´åˆã€æ˜ç¤ºçš„ã«ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’é–‰ã˜ã‚‹å¿…è¦ãŒã‚ã‚‹
     * opts.keepOthers ãŒçœŸå€¤ã ã¨ä»–ã®ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã‚’è‡ªå‹•çš„ã«é–‰ã˜ãªã„
     */
    show : function (win, opts) {
        var self = this;
        if (!opts) opts = {};
        self.init();
        if (opts.keepOthers) {
             // nop
        } else {
            self.hideAll();
        }
        if (opts.fixScroll) {
            Hatena.Diary.FixScroll.enable();
        }
        if (opts.center) {
            Hatena.Diary.Window._setCenter(win);
        }
        if (opts.showBackground) {
            Hatena.Diary.Window._showBackground();
        }
        self.shown.push({
            closeExplicitly : !!opts.closeExplicitly,
            win : win,
            destroy : opts.destroy || function () {},
            fixScroll: !!opts.fixScroll,
            showBackground: !!opts.showBackground
        });
        win.fadeIn('fast');
    },

    hide : function (win) {
        var self = this;
        for (var i = 0, len = self.shown.length; i < len; i++) {
            var obj = self.shown[i];
            if (obj.win === win) {
                win.fadeOut('fast', obj.destroy);
                $('.modal-window-background').fadeOut('fast');
                if (obj.fixScroll) {
                    Hatena.Diary.FixScroll.disable();
                }
                break;
            }
        }
    },

    hideAll : function () {
        var self = this, restWindows = [];
        for (var i = 0, len = self.shown.length; i < len; i++) {
            if (self.shown[i].closeExplicitly) {
                restWindows.push(self.shown[i]);
            } else {
                self.hide(self.shown[i].win);
            }
        }
        self.shown = restWindows;
    },

    toggle: function (win, option) {
        if (win.is(':visible')) {
            this.hide(win);
            return false;
        } else {
            this.show(win, option);
            return true;
        }
    },

    _setCenter: function (win) {
        var setSize = _.throttle(function() {
            if (!$(win).is(':visible')) {
                $(window).off('resize', setSize);
                return;
            }
            var margin_top = ($(window).height()-$(win).height())/2;
            var margin_left = ($(window).width()-$(win).width())/2;
            $(win).css({
                top:  margin_top,
                left: margin_left
            });
        }, 100);

        $(window).on('resize', setSize);

        setSize();
    },

    _showBackground: function() {
        var $screen = $('<div>').addClass('modal-window-background');
        $screen.appendTo(document.body);
    }
};

Hatena.Diary.FixScroll = {
    enabled: false,
    enable: function() {
        if (this.enabled) return;

        this._top = $(window).scrollTop();
        $(window).bind('scroll', this._scrollHandler);
        this.enabled = true;
    },
    disable: function() {
        if (!this.enabled) return;

        $(window).unbind('scroll', this._scrollHandler);
        this.enabled = false;
    },

    _top: 0,
    _scrollHandler: function(event) {
        if ($(window).scrollTop() == Hatena.Diary.FixScroll._top) return;

        $(window).scrollTop(Hatena.Diary.FixScroll._top);
    }
};

Hatena.Diary.Pages = {
    Blogs      : {},
    Admin      : {},
    BlogsTouch : {},
    AdminTouch : {},

    // ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ˜ãƒƒãƒ€ãŒãƒ­ãƒ¼ãƒ‰ã•ã‚Œã¦ï¼Œé€šä¿¡ãŒå®Œäº†ã™ã‚‹ã¨resolveã•ã‚Œã‚‹deferred
    // loadGlobalHeaderå†…ã§å†ä»£å…¥ã•ã‚Œã‚‹
    // ã“ã“ã§å®šç¾©ã—ãŸdeferredã¯ãƒ€ãƒŸãƒ¼ã§ï¼Œå³åº§ã«rejectã—ã¦ã„ã‚‹
    // å‘¼ã³å‡ºã—å…ƒã§å®šç¾©æ¸ˆã‹ã©ã†ã‹ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹æ‰‹é–“ã‚’çœããŸã‚ï¼
    infoLoaded : (function() {
        var nullObject = $.Deferred();
        nullObject.reject();
        return nullObject.promise();
    })(),

    // init.jsonã‚’å‘¼ã³å‡ºã™
    // ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ˜ãƒƒãƒ€ã‹ã‚‰åˆ©ç”¨ã™ã‚‹
    // å®Œäº†ã™ã‚‹ã¨ï¼Œinfo, privateInfo ã‚’resolveã™ã‚‹Deferredã‚’è¿”ã™
    loadInfo: function() {
        var blogUri = decodeURIComponent(location.hash.substring(1));
        var circleId = Hatena.Diary.Location.param('circle_id');

        var init;
        if (circleId) {
            init = $.ajax({
                url: '/api/init/circle',
                type: 'get',
                dataType: 'json',
                data: {
                    circle_id: circleId
                }
            });
        } else {
            init = $.ajax({
                url : '/api/init',
                type : "get",
                dataType : 'json',
                data : {
                    name : Hatena.Diary.data('name'),
                    blog : blogUri
                }
            });
        }

        var loaded = $.Deferred();
        init.done(function(info) {
            var privateInfo = info['private'];

            // privateã«å…¥ã£ã¦ã‚‹æƒ…å ±ã¯å¤–å´ã«é…ä¿¡ã—ãªã„ï¼ã“ã“ã§å‰Šé™¤ã—ã¦ãŠã
            delete info['private'];

            // å¤–ã®ãƒ•ãƒ¬ãƒ¼ãƒ ã«æƒ…å ±é€ã‚‹
            Hatena.Diary.Pages.send('init', info);

            // ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ˜ãƒƒãƒ€ã«æƒ…å ±é€ã‚‹ï¼ã“ã£ã¡ã¯privateInfoã‚‚ä¸€ç·’ã«æ¸¡ã™
            loaded.resolve(info, privateInfo);
        });

        return loaded.promise();
    },

    messenger : null,

    createForParent : function () {
        this.messenger = Messenger.createForParent();

        if (Hatena.Diary.data('page') != 'globalheader') {
            $('.close').on('click', function (e) {
                Hatena.Diary.Pages.send('close', { name : window.name });
                return false;
            });

            $(window).keyup(function (e) {
                if (keyString(e) == 'S-ESC') {
                    Hatena.Diary.Pages.send('close', { name : window.name });
                }
            });
        }
    },

    createForFrame : function (iframe, url) {
        this.messenger = Messenger.createForFrame(iframe, url);
    },

    send : function (type, obj) {
        Hatena.Diary.LOG(['send', type, obj]);
        try {
            this.messenger.send(type, obj);
        } catch(error) {
            Hatena.Diary.BUG(error, 'Pages.send(' + type + ')');
        }
    },

    message : function (type, func) {
        this.messenger.addEventListener(type, func);
    },

    // è¡¨ç¤ºä¸­ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ãƒ‡ãƒã‚¤ã‚¹ã‚’è¿”ã™
    // pc | touch
    device: function() {
        var device = Hatena.Diary.data('device');

        if (!device) {
            var message = "device is undefined, page: " + Hatena.Diary.data('page') + ", location: " + location.href;
            Hatena.Diary.BUG(message);
        }

        return device || 'pc';
    }
};

Hatena.Diary.Devices = {
    /*
     * PC ã§è¦‹ã¦ã‚‹ãƒ¦ãƒ¼ã‚¶ã«ã¯ä½•ã‚‚ã—ãªã„
     * touch ã§è¦‹ã¦ã‚‹ãƒ¦ãƒ¼ã‚¶ã¯
     *   cookie ãŒã‚ã‚Œã°ãã‚Œã‚’è¦‹ã¦ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
     *   UA ãŒã‚ã‚Œã°ãã‚Œã‚’è¦‹ã¦ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
     */

    use : function (device) {
        if (this.userAgent() == device) {
            document.cookie = 'device=' + encodeURIComponent(device) + '; expires=' + new Date(0).toUTCString() + '; path=/';
        } else {
            var expires = new Date();
            expires.setFullYear(expires.getFullYear() + 1);
            document.cookie = 'device=' + encodeURIComponent(device) + '; expires=' + expires.toUTCString() + '; path=/';
        }
        location.reload();
    },

    userAgent : function () {
        // adminãƒ‰ãƒ¡ã‚¤ãƒ³ã®ãƒ˜ãƒƒãƒ€ãƒ¼ã«ã‚‚åŒã˜ã‚‚ã®ãŒã‚ã‚Šã¾ã™
        if (Hatena.Diary.Browser.isTouch) {
            return 'touch';
        } else {
            return 'pc';
        }
    }
};

// https://github.com/wakaba/opentenjs/blob/master/src/Ten.base.js
Hatena.Diary.Browser = {
    isIE: navigator.userAgent.indexOf('MSIE') != -1 || navigator.userAgent.indexOf('Trident/') != -1,
    isIE6 : navigator.userAgent.indexOf('MSIE 6.') != -1,
    isIE7 : navigator.userAgent.indexOf('MSIE 7.') != -1,
    isIE8 : navigator.userAgent.indexOf('MSIE 8.') != -1,
    isIE9 : navigator.userAgent.indexOf('MSIE 9.') != -1,
    isIE10 : navigator.userAgent.indexOf('MSIE 10.') != -1,
    isIE11: navigator.userAgent.indexOf('Trident/') != -1 && navigator.userAgent.indexOf('rv:11.') != -1,
    isMozilla: navigator.userAgent.indexOf('Mozilla') != -1 && !/compatible|WebKit/.test(navigator.userAgent),
    isOpera: !!window.opera,
    isSafari: navigator.userAgent.indexOf('WebKit') != -1 && navigator.userAgent.indexOf('Chrome/') == -1,
    isChrome : navigator.userAgent.indexOf('Chrome/') != -1,
    isFirefox : navigator.userAgent.indexOf('Firefox/') != -1,
    isDSi : navigator.userAgent.indexOf('Nintendo DSi') != -1,
    is3DS : navigator.userAgent.indexOf('Nintendo 3DS') != -1,
    isWii : navigator.userAgent.indexOf('Nintendo Wii') != -1,
    isAndroid : navigator.userAgent.indexOf('Android') != -1,
    isAndroidMobile : navigator.userAgent.indexOf('Android') != -1 && navigator.userAgent.indexOf('Mobile') != -1,
    isAndroidTablet : navigator.userAgent.indexOf('Android') != -1 && navigator.userAgent.indexOf('Mobile') == -1,
    isIPhone : (navigator.userAgent.indexOf('iPod;') != -1 || navigator.userAgent.indexOf('iPhone;') != -1 || navigator.userAgent.indexOf('iPhone Simulator;') != -1),
    isWindowsPhone: navigator.userAgent.indexOf('Windows Phone') != -1,
    isIPad : navigator.userAgent.indexOf('iPad') != -1,
    isSupportsXPath : !!document.evaluate,
    version: {
        string: (/(?:Firefox\/|MSIE |Opera\/|Chrome\/|Version\/)([\d.]+)/.exec(navigator.userAgent) || []).pop(),
        valueOf: function() { return parseFloat(this.string) },
        toString: function() { return this.string }
    }
};
Hatena.Diary.Browser.isTouch = Hatena.Diary.Browser.isIPhone || Hatena.Diary.Browser.isAndroidMobile || Hatena.Diary.Browser.isDSi || Hatena.Diary.Browser.is3DS || Hatena.Diary.Browser.isWindowsPhone;
Hatena.Diary.Browser.isSmartPhone = Hatena.Diary.Browser.isIPhone || Hatena.Diary.Browser.isAndroidMobile || Hatena.Diary.Browser.isWindowsPhone;
Hatena.Diary.Browser.isTablet = Hatena.Diary.Browser.isAndroidTablet || Hatena.Diary.Browser.isIPad;

Hatena.Diary.Browser.thirdPartyCookiesBlocked = $.Deferred(); // ãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã¦ã‚‹ã‹åˆ†ã‹ã£ãŸã‚‰ Hatena.Diary.Pages.Blogs['*'].init ã§ resolveã•ã‚Œã‚‹ ãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã¦ãŸã‚‰true

// ã¯ã¦ãªè¨˜æ³•å±•é–‹
// hatena_syntax: String or [String]ï¼ŒArrayã®ã¨ãï¼Œå„è¡ŒãŒ<p>ã§å›²ã¾ã‚Œã‚‹
// æˆåŠŸã—ãŸã¨ã { html } ã‚’è¿”ã™Deferredã‚’è¿”ã™
Hatena.Diary.extractSyntax = function(hatena_syntax) {
    var dfd = $.Deferred();
    if (_.isArray(hatena_syntax)) {
        hatena_syntax = hatena_syntax.join("\n\n");
    }

    $.ajax({
        url: "/api/support.expand",
        type : "POST",
        data : {
            syntax: hatena_syntax,
            rkm: Hatena.Diary.data('rkm'),
            rkc: Hatena.Diary.data('rkc')
        },
        dataType: 'json'
    }).done(function(data) {
        dfd.resolve({
            html : data.html
        });
    }).fail(function(error) {
        dfd.reject(error);
    });

    return dfd;
};

// fotolifeã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å®Œäº†ã™ã‚‹ã¨è¿”ã•ã‚Œã‚‹fotolifeè¨˜æ³•ã‚’:plainå½¢å¼ã®HTMLã«å±•é–‹
// æˆåŠŸã—ãŸã¨ã { image, syntax, html } ã‚’è¿”ã™Deferredã‚’è¿”ã™
Hatena.Diary.extractFotolifeSyntax = function (string) {
    var ret   = $.Deferred();
    var match = string.match(/f:id:([^:]+):(\d+)([jpg]):image/);
    if (match) {
        var syntax = '[' + match[0].replace(':image', ':plain') + ']';
        var name  = match[1];
        var id    = match[2];
        var type  = match[3];
        var path  = [ name.substring(0, 1), name, id.substring(0, 8), id ].join('/');
        var image = 'http://cdn-ak.f.st-hatena.com/images/fotolife/' + path + '_120.jpg';

        Hatena.Diary.extractSyntax(syntax).done(function(data) {
            ret.resolve({
                image : image,
                syntax : syntax,
                html : data.html
            });
        }).fail(function(error) {
            ret.reject(error);
        });
    } else {
        _.defer(function() {
            ret.reject('Invalid format? ' + string);
        });
    }
    return ret.promise();
};

Hatena.Diary.AccessLog = {
    ping : function () {
        var adminDomain = $('html').attr('data-admin-domain');
        if (!adminDomain) return;

        var url = adminDomain + '/api/log';
        var data = {
            uri : location.href,
            referer : document.referrer
        };
        $.ajax({
            url   : url,
            type  : "get",
            cache : false,
            data  : data,
            xhrFields: {
                withCredentials: true
            }
        }).fail(function (e) {
            data._ = new Date().getTime();
            new Image().src = url + '?' + $.param(data);
        });
    }
};

// æœ€å¤§ã§1ç§’ã«1å›ã ã‘ãƒˆãƒ©ãƒƒã‚¯
Hatena.Diary.trackEvent = (function() {
    var trackNamesQueue = [];
    var timer = null;

    var postTrackNames = function () {
        timer = null;
        var img = new Image();
        img.src = (Hatena.Diary.data('admin-domain') || '') + '/api/track?' + $.param({
            track_name: trackNamesQueue,
            blog : Hatena.Diary.data('blogs-uri-base') || ('http://' + Hatena.Diary.data('blog'))
        });
        trackNamesQueue = [];
    };

    return function(trackNames) {
        if (!timer) {
            timer = setTimeout(postTrackNames, 1000);
        }
        _.each($.makeArray(trackNames), function(name) {
            trackNamesQueue.push(name);
        });
    };
})();

// ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ã¯ï¼Œdata-track-selectorã«CSSã‚»ãƒ¬ã‚¯ã‚¿ã‚’æ›¸ãã“ã¨ã«ã‚ˆã£ã¦ç‰¹å®šã®è¦ç´ ã®ã¿ã§ãƒ•ã‚£ãƒ«ã‚¿ã§ãã‚‹ï¼
// 1ã¤ã®è¦ç´ å†…ã«è¤‡æ•°ã®aã‚¿ã‚°ãŒã‚ã‚‹ãŒï¼Œã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸä»¶æ•°ã®é–¢ä¿‚ã§ï¼Œè¤‡æ•°data-track-nameã‚’è¨­å®šã§ããªã„å ´åˆã«æœ‰ç”¨ï¼
// returns: ã‚»ãƒ¬ã‚¯ã‚¿ãŒãªã„ã‹ï¼Œã¾ãŸã¯ï¼Œã‚»ãƒ¬ã‚¯ã‚¿ãŒã‚ã‚‹ã¨ããƒãƒƒãƒã—ãŸã‹
Hatena.Diary.trackEvent.checkSelector = function($container, $clicked) {
    var selector = $container.attr('data-track-selector');
    if (!selector) return true;

    // ã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸã¨ãåå¿œã™ã‚‹è¦ç´ ãŸã¡
    var $candicates = $container.find(selector);

    // ã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸè¦ç´ ãŒï¼Œåå¿œã—ã¦è‰¯ã„è¦ç´ ãŸã¡è‡ªèº«ã‹ï¼Œåå¿œã—ã¦è‰¯ã„è¦ç´ ãŸã¡ã«å«ã¾ã‚Œã‚‹ï¼Ÿ
    return !!($candicates.is($clicked) || $candicates.find($clicked).get(0));
};

// æŒ‡å®šã—ãŸè¦ç´ ã®data-track-nameã‚’é…åˆ—ã§è¿”ã™
Hatena.Diary.trackEvent.getDataTrackNames = function($element) {
    var dataTrackAttr = $element.attr('data-track-name');
    var trackNames = dataTrackAttr.split(/\s+/);
    return trackNames;
};

// ä»Šã™ããƒˆãƒ©ãƒƒã‚¯
// ã‚¤ãƒ™ãƒ³ãƒˆåã‹ã€ã‚¤ãƒ™ãƒ³ãƒˆåã®Arrayã‚’æ¸¡ã™
// returns: dfd.promiseã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã€‚ç”»åƒã®èª­ã¿è¾¼ã¿ãŒæˆåŠŸã—ãŸã‚‰resolveã€å¤±æ•—ã—ãŸã‚‰rejectã™ã‚‹ã€‚
Hatena.Diary.trackEventNow = function(trackNames) {
    var dfd = $.Deferred();

    var img = new Image();
    img.onload  = function () {
        dfd.resolve();
    };
    img.onerror = function () {
        dfd.reject();
    };

    img.src = (Hatena.Diary.data('admin-domain') || '') + '/api/track?' + $.param({
        track_name: $.makeArray(trackNames),
        blog : Hatena.Diary.data('blogs-uri-base') || ('http://' + Hatena.Diary.data('blog'))
    });

    // ãšã£ã¨èª­ã¿è¾¼ã¿ãŒçµ‚ã‚ã‚‰ãªã‹ã£ãŸã‚‰ã€rejectã™ã‚‹
    setTimeout(function () {
        dfd.reject();
    }, 5000);

    return dfd.promise();
};

Hatena.Diary.setupTrack = function () {
    $(document).on('mousedown', '[data-track-name]:not([data-track-once])', function(event) {
        if (event.which !== 1) return; // å·¦ã‚¯ãƒªãƒƒã‚¯ã®ã¿
        var $element = $(this);
        if (!Hatena.Diary.trackEvent.checkSelector($element, $(event.target))) return;

        var trackNames = Hatena.Diary.trackEvent.getDataTrackNames($element);
        Hatena.Diary.trackEvent(trackNames);
    });

    $(document).on('mousedown', '[data-track-name][data-track-once]:not([data-track-once-tracked])', function(event) {
        if (event.which !== 1) return; // å·¦ã‚¯ãƒªãƒƒã‚¯ã®ã¿
        var $element = $(this);
        if (!Hatena.Diary.trackEvent.checkSelector($element, $(event.target))) return;

        var trackNames = Hatena.Diary.trackEvent.getDataTrackNames($element);
        Hatena.Diary.trackEventNow(trackNames);

        // ã“ã‚Œä»¥é™ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ã—ãªã„
        $element.attr('data-track-once-tracked', '');
    });
};

// jQuery Deferredã‚’ä½¿ã£ãŸé…å»¶ãƒªã‚¹ãƒˆ
Hatena.Diary.LazyList = function () { this.init.apply(this, arguments) };
Hatena.Diary.LazyList.prototype = {
    // generator
    //   å‰ã®LazyListã‚’å—ã‘å–ã‚‹
    //   Deferred Objectã‚’è¿”ã™
    //   å€¤ã‚’resolveã™ã‚‹ã‹rejectã™ã‚‹é–¢æ•°
    // prevã¯å‰ã®LazyList æ™®é€šã¯æ¸¡ã•ãªã„ é€”ä¸­ã§åˆ†å²ã•ã›ã‚‹å ´åˆã¯æ¸¡ã—ã¦ã‚‚ã‚ˆã„
    init: function (generator, prev) {
        if (!$.isFunction(generator)) {
            throw("generator must be a function (" + generator + ")");
        }
        this.generator = generator;

        if (prev) {
            if (!(prev instanceof Hatena.Diary.LazyList)) {
                throw("prev must be a instance of LazyList");
            }
            this._prev = prev;
        }
    },
    // å€¤ã®èª­ã¿è¾¼ã¿ï¼Œdeferredã‚’è¿”ã™
    promise: function() {
        if (!this._promise) {
            var dfd = this.generator(this.prev());
            if (!$.isFunction(dfd.promise)) {
                throw("generator must return a Deferred Object (" + dfd + ")");
            }
            this._promise = dfd.promise();
        }

        return this._promise;
    },
    // å‰ã®ãƒãƒ¼ãƒ‰ã‚’å¾—ã‚‹
    prev: function() {
        return this._prev;
    },
    // æ¬¡ã®ãƒãƒ¼ãƒ‰ã‚’å¾—ã‚‹
    next: function() {
        if (!this._next) {
            this._next = new Hatena.Diary.LazyList(this.generator, this);
        }
        return this._next;
    },
    // æœ€åˆã®ãƒãƒ¼ãƒ‰ã‚’å¾—ã‚‹
    root: function() {
        if (this._prev) {
            return this._prev.root();
        } else {
            return this;
        }
    }
};

Hatena.Diary.EditorConnector = {
    // æŒ‡å®šã•ã‚ŒãŸæ–‡å­—åˆ—ã‚’ã‚¨ãƒ‡ã‚£ã‚¿ã«æŒ¿å…¥ã™ã‚‹
    // PCï¼Œtouchï¼ŒiOSã«å¯¾å¿œ
    // å…¨è¨˜æ³•å‘ãã®ãƒ†ã‚­ã‚¹ãƒˆãŒå¿…è¦
    // Arrayã®å„è¡ŒãŒå„è¦ç´ 
    // data: { hatena: [], html: [], markdown: [] }
    insertLines: function(data) {
        this._validate(data);
        this._setup();
        this._insertLinesImplement(data);

    },

    // iOSã‚¢ãƒ—ãƒªã‹ã‚‰é–‹ã‹ã‚Œã¦ã„ã‚‹ã‹ã©ã†ã‹
    // åŸºæœ¬çš„ã«ã¯EditorConnectorã«ä»»ã›ã‚‹ã¹ãã ãŒ, ã„ã‚ã„ã‚ã‚ã£ã¦ã†ã¾ãã„ã‹ãªã„ã¨ãã®ãŸã‚ç”¨æ„
    isiOS: function() {
        return Hatena.Diary.Util.decodeParam(location.search.substr(1))['ios'];
    },

    // Androidã‚¢ãƒ—ãƒªã‹ã‚‰é–‹ã‹ã‚Œã¦ã„ã‚‹ã‹ã©ã†ã‹
    isAndroid: function() {
        return Hatena.Diary.Util.decodeParam(location.search.substr(1))['android'];
    },

    // æŒ‡å®šã•ã‚ŒãŸURLã‚’window.openã—ã¦é€šä¿¡ã‚’å¾…ã¤
    loadServiceOnChildWindow: function(url) {
        var self = this;
        var curationWindow = window.open();
        var messenger = Messenger.createForWindow(curationWindow, url);

        messenger.addEventListener('insertLines', function(data) {
            self.insertLines(data);
        });
    },

    _validate: function(data) {
        _.each(['html', 'hatena', 'markdown'], function(mode) {
            if (!data[mode]) throw "missing " + mode;
        });
    },

    _setup: function() {
        if (this._insertLinesImplement) return;

        // ãƒ¢ãƒ¼ãƒ‰ã«åˆã‚ã›ã¦å®Ÿè£…ã®é–¢æ•°ã‚’è¨­å®š
        var isPC = Hatena.Diary && Hatena.Diary.Pages.device() === 'pc' && Hatena.Diary.Editor.Support && Hatena.Diary.Editor.Support.currentEditor;

        var isTouchEditor = Hatena.Diary && Hatena.Diary.Pages.device() === 'touch';

        var isChildFrame = window.opener;

        // ?ios=1ã¨ã„ã†ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¤ã„ã¦ã‚‹ã¨ãiOS
        var isiOS = this.isiOS();
        // ?android=1ã¨ã„ã†ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã®ã¨ãAndroid
        var isAndroid = this.isAndroid();

        if (isiOS || isAndroid) {
            // è¦å®šã®URLé–‹ã
            this._insertLinesImplement = this._insertLinesOpenURL;
        } else if (isPC) {
            // PCç·¨é›†ç”»é¢
            this._insertLinesImplement = this._insertLinesPC;
        } else if (isTouchEditor) {
            // touchç·¨é›†ç”»é¢
            this._insertLinesImplement = this._insertLinesTouch;
        } else if (isChildFrame) {
            // è¦ªãƒ•ãƒ¬ãƒ¼ãƒ ã«postMessageã§é€ä¿¡
            this._insertLinesImplement = this._insertLinesMessenger;
        } else {
            throw "handling failed";
        }

    },

    _insertLinesPC: function(data) {
        var editor = Hatena.Diary.Editor.Support.currentEditor;
        var mode = editor.mode;
        var lines = data[mode];
        editor.insertLines(lines);
    },
    _insertLinesTouch: function(data) {
        var syntax = $('#edit-entry').attr('data-entry-syntax');

        // HTMLãƒ¢ãƒ¼ãƒ‰ã§ï¼ŒcontentEditableç„¡åŠ¹ã®ã¨ã(Androidã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ–ãƒ©ã‚¦ã‚¶ãªã©)ï¼ŒãŸã ã®textareaãªã®ã§ï¼Œã¯ã¦ãªè¨˜æ³•ã‚’ä½¿ã†
        if (syntax === 'html' && ! Hatena.Diary.Pages.AdminTouch['user-blog-edit'].contentEditableEnabledAndEditorModeIsHTML()) {
            syntax = 'hatena';
        }

        var lines = (data[syntax] || data['hatena'] || data['markdown']);

        Hatena.Diary.Pages.AdminTouch['user-blog-edit'].insertText(lines.join("\n"));
    },
    _insertLinesMessenger: function(data) {
        var messenger = Messenger.createForParent();
        messenger.send('insertLines', data);
        window.close();
    },
    _insertLinesOpenURL: function(data) {
        var html_lines = _.map(data.html, function(line) {
            return '<p>' + line + '</p>';
        });
        location.href = 'hatenablog:/entry/body/insert?' + $.param({
            hatena:   data.hatena.join("\n"),
            html:     html_lines.join(''),
            markdown: data.markdown.join("\n\n"),
            version: 1
        });
    }
};

// ãƒ•ã‚©ãƒ¼ãƒ ã‚’ç›£è¦–ã—ï¼Œãƒšãƒ¼ã‚¸é–‰ã˜ã‚‹ã¨ãã«confirmå‡ºã™ãŸã‚ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
// ãƒ•ã‚©ãƒ¼ãƒ ãªãã¦ã‚‚ä½¿ãˆã‚‹
Hatena.Diary.FormState = function() {
    var self = this;
    self.confirmEnabled = false;

    var pageLeaveEvent = window.onbeforeunload !== undefined ? 'beforeunload' : 'unload';

    $(window).on(pageLeaveEvent, function() {
        $(window).triggerHandler('close-preview-window');
        if (self.confirmEnabled) return Hatena.Locale.text('form.confirm.changed');
    });
};

Hatena.Diary.FormState.prototype = {
    // ãƒšãƒ¼ã‚¸é–‰ã˜ã‚‹ã¨ãã«confirmå‡ºã™ãƒ¢ãƒ¼ãƒ‰ã‚’æœ‰åŠ¹ã«ã™ã‚‹
    enableConfirm: function() {
        this.confirmEnabled = true;
    },
    // ãƒšãƒ¼ã‚¸é–‰ã˜ã‚‹ã¨ãã«confirmå‡ºã™ãƒ¢ãƒ¼ãƒ‰ã‚’ç„¡åŠ¹ã«ã™ã‚‹
    disableConfirm: function() {
        this.confirmEnabled = false;
    },
    // formã‚’ç›£è¦–ã™ã‚‹ åˆæœŸçŠ¶æ…‹ã‚’ã‚»ãƒƒãƒˆã—ï¼Œé€ä¿¡ã‚’ç›£è¦–
    observeForm: function($form) {
        var self = this;
        this.$form = $form;
        this.setFormInitialState();

        $form.on('submit', function() {
            self.disableConfirm();
        });
    },
    // formã®changeã‚¤ãƒ™ãƒ³ãƒˆã‚’ç›£è¦–
    observeFormChange: function() {
        var self = this;
        self.$form.on('change', function() {
            self.checkFormState();
        });
    },
    // formã®çŠ¶æ…‹ã‚’ç¢ºèª
    checkFormState: function() {
        if (this.$form.serialize() !== this.initialState) {
            this.enableConfirm();
        } else {
            this.disableConfirm();
        }
    },
    // æœ‰åŠ¹ã‹ã©ã†ã‹ã‚’è¿”ã™
    isConfirmEnabled: function() {
        return this.confirmEnabled;
    },
    // ç¾åœ¨ã®formã®å€¤ã‚’åˆæœŸçŠ¶æ…‹ã¨ã™ã‚‹
    // ã“ã“ã‹ã‚‰å¤‰ã‚ã£ãŸã‚‰confirmãŒå‡ºã‚‹
    // ãƒšãƒ¼ã‚¸ãƒ­ãƒ¼ãƒ‰æ™‚ã«JSã§å€¤ã‚’å·®ã—æ›¿ãˆãŸã¨ãã«å‘¼ã¶
    setFormInitialState: function() {
        this.initialState = this.$form.serialize();
        this.disableConfirm();
    }
};

Hatena.Diary.setupProModal = function() {
    var openProModal = function(modalURL) {
        var iframeContainer = $('<div class="hatena-iframe-container pro-modal-container">').appendTo(document.body);
        var iframe = $('<iframe frameborder="0"></iframe>').appendTo(iframeContainer);

        var messenger = Messenger.createForFrame(iframe[0], modalURL);
        messenger.addEventListener('close', function () {
            Hatena.Diary.Window.hide(iframeContainer);
        });

        Hatena.Diary.Window.show(iframeContainer, {
            destroy : function () {
                iframe.remove();
                messenger.destroy();
            },
            fixScroll: true,
            center: true,
            showBackground: true
        });
    };

    $('.open-pro-modal').css('visibility', 'visible');
    $(document.body).on('click', '.open-pro-modal', function() {
        var $self = $(this);
        var modalURL = $self.attr('data-guide-pro-modal-ad-url');
        openProModal(modalURL);
        return false;
    });

};

Hatena.Diary.loadGlobalHeader = function () {
    var globalheader = document.getElementById('globalheader');

    // ã‚¹ãƒãƒ•ã‚©ã®ä¼æ¥­ãƒ–ãƒ­ã‚°ã§ã¯globalheaderæ¶ˆã•ã‚Œã¦ã‚‹ã“ã¨ãŒã‚ã‚‹ã®ã§ï¼Œã“ã“ã§éè¡¨ç¤ºã§ãã£ã¤ã‘ã‚‹
    if (!globalheader) {
        var $globalheader = $('<iframe id="globalheader" style="display: none"></iframe>');
        $globalheader.appendTo(document.body);
        globalheader = $globalheader[0];
    }
    var color = Hatena.Diary.Util.canonicalizeColor($(globalheader).css('color')) || '000000';

    var backgroundColor = null;
    var target = globalheader;
    while (!backgroundColor && target && target != document.documentElement) {
        var css = $(target).css('backgroundColor');
        backgroundColor = Hatena.Diary.Util.canonicalizeColor(css);
        target = target.parentNode;
    }
    if (!backgroundColor) backgroundColor = 'ffffff';

    var params = {};

    var globalheaderType = $('html').data('globalheaderType');
    if (!globalheaderType) globalheaderType = 'auto';
    if (globalheaderType === 'auto') {
        params['device'] = Hatena.Diary.Devices.userAgent();
    }
    else {
        params['device'] = globalheaderType;
    }

    var circleId = Hatena.Diary.data('circle-id');
    if (circleId) {
        params['circle_id'] = circleId;
    }

    var pageCategory = 'global';
    if (/\.hatena\.ne\.jp(:\d+)?$/.test(location.host)) {
        pageCategory = 'admin';
    } else if (Hatena.Diary.data('blog')) {
        pageCategory = 'blogs';
    } else if (circleId) {
        pageCategory = 'circle';
    }

    if (
        pageCategory === 'admin' &&
        Hatena.Diary.data('pro') &&
        Hatena.Diary.data('pro') === 'false'
    ) {
        params['show_upgrade_pro'] = 'yes';
    }

    if (Hatena.Diary.data('brand')) {
        params['brand'] = Hatena.Diary.data('brand');
    }

    Hatena.Diary.Pages.createForFrame(
        globalheader,
        Hatena.Diary.data('admin-domain') + '/-/globalheader/' + encodeURIComponent(color) + '/' + encodeURIComponent(backgroundColor) + '/' + pageCategory + '?' + $.param(params) + '#' + encodeURIComponent(location.href)
    );

    Hatena.Diary.Pages.infoLoaded = $.Deferred();

    Hatena.Diary.Pages.message('init', function (info) {
        $(function() {
            Hatena.Diary.LOG(['init', info]);
            Hatena.Diary.Pages.infoLoaded.resolve(info);
        });
    });

    Hatena.Diary.SpeedTrack.record("loadGlobalHeader");
};

// ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³ã‚¢ãƒ—ãƒªã‹ã‚‰ä½¿ã†ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã§ã™
Hatena.Diary.AppAPI = {
    _setup: function () {
        if (this._reloadStarImplement) return;

        // 1ç§’ã«1å›ã¾ã§ã—ã‹å®Ÿè¡Œã—ãªã„
        this._reloadStarImplement = _.throttle(function () {
            // ã‚¹ã‚¿ãƒ¼ã‚’å†èª­ã¿è¾¼ã¿ã™ã‚‹
            $body = $(document.body);
            $starContainer = $body.find('span.hatena-star-comment-container, span.hatena-star-star-container');
            if ($starContainer.length > 0) {
                $starContainer.remove();
                Hatena.Star.EntryLoader.loadNewEntries($body[0]);
            }
        }, 1000);
    },
    reloadStar: function () {
        this._setup();
        this._reloadStarImplement();
    }
};

// JSç”¨URLç”Ÿæˆ
Hatena.Diary.URLGenerator = {
    // pathæŒ‡å®šã§ãƒ¦ãƒ¼ã‚¶ãƒ–ãƒ­ã‚°ã®URLã‚’è¿”ã™ã€‚APIã®URLã‚’ä½œã‚‹ã¨ããªã©ã¯å¿…ãšã“ã‚Œã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨
    user_blog_url: function (path) {
        var blog_url_base = Hatena.Diary.data('blogs-uri-base');
        return blog_url_base + path;
    },
    static_url: function (path) {
        var static_base = Hatena.Diary.data('static-domain');
        return static_base + path;
    }
};


$(function() {
    if (arguments.callee.called) return; arguments.callee.called = true;


    // ç‰¹å®šã®ã¯ã¦ãªã®ãƒ‰ãƒ¡ã‚¤ãƒ³(b.hatena.ne.jpã¨ã‹)ã§Adminãƒ‰ãƒ¡ã‚¤ãƒ³ã¨ã¿ãªã•ã‚Œã¦ã—ã¾ã†ã®ã§
    // admin-domainãŒã‚ã£ãŸã‚‰ãã®å€¤ã§åˆ¤åˆ¥ã™ã‚‹
    // ãªã‹ã£ãŸã‚‰æ­£è¦è¡¨ç¾ã§åˆ¤åˆ¥ã™ã‚‹
    var domain = '';
    var admin_domain = Hatena.Diary.data('admin-domain');
    if (admin_domain) {
        var is_admin_domain = new RegExp('^(http|https)://' + location.host + '$').test(admin_domain);
        domain = is_admin_domain ? "Admin" : "Blogs";
    }
    else {
        domain = /\.hatena\.ne\.jp(:\d+)?$/.test(location.host) ? "Admin" : "Blogs";
    }

    var deviceSuffix = Hatena.Diary.Pages.device() === 'pc' ? '' : 'Touch';
    var namespace = domain + deviceSuffix;

    var page = Hatena.Diary.data('page');

    Hatena.Diary.SpeedTrack.setDomain(domain);
    Hatena.Diary.SpeedTrack.setPage(page);

    var func;
    try {
        Hatena.Diary.LOG('Pages["' + namespace + '"]["*"]');
        if ((func = Hatena.Diary.Pages[namespace]["*"])) {
            func();
        }
        Hatena.Diary.LOG('Pages["' + namespace + '"]["*"] done');

        Hatena.Diary.SpeedTrack.record('Pages["' + namespace + '"]["*"]');

        Hatena.Diary.LOG('Pages["' + namespace + '"]["' + page + '"]');
        if ((func = Hatena.Diary.Pages[namespace][page])) {
            func();
        }
        Hatena.Diary.LOG('Pages["' + namespace + '"]["' + page + '"] done');

        Hatena.Diary.SpeedTrack.record('Pages["' + namespace + '"]["' + page + '"]');
    } catch (e) {
        Hatena.Diary.BUG(e, 'toplevel');
    }

    Hatena.Diary.setupTrack();

    Hatena.Diary.Util.setupTipsy();

    Hatena.Diary.Util.setupScrollAdjustForFixedGlobalHeader();

    if (window != window.parent) {
        // ã‚¯ãƒªãƒƒã‚¯ã‚¸ãƒ£ãƒƒã‚­ãƒ³ã‚°å¯¾ç­–
        //   iframe ã§èª­ã¿ã“ã¾ã‚Œã¦ãƒ»ãã®ã¾ã¾ã‚¯ãƒªãƒƒã‚¯ã—ã¦é€ä¿¡ã•ã‚Œã¦ã—ã¾ã†ã®ãŒå•é¡Œãªã®ã§
        //   iframe ã®ä¸­ã§èª­ã¿ã“ã¾ã‚ŒãŸã¨ãã¯ã€submit æ™‚ã«å€¤ã®å¤‰æ›´ãƒã‚§ãƒƒã‚¯ã‚’ã—ã¦ã€å¤‰æ›´ã•ã‚Œã¦ãªã„ãªã‚‰ submit ã§ããªã„ã‚ˆã†ã«ã™ã‚‹
        $('form').each(function () {
            var $this    = $(this);

            // ãƒªã‚¹ã‚¯ã‚’æ‰¿çŸ¥ã§ã€ã‚ã‚‹ã„ã¯åˆ¥ã®æ‰‹æ®µã«ã‚ˆã£ã¦ã‚¯ãƒªãƒƒã‚¯ã‚¸ãƒ£ãƒƒã‚­ãƒ³ã‚°å¯¾ç­–ãŒæ–½ã•ã‚Œã¦ãŠã‚Šã€
            // ãªãŠã‹ã¤ã€ã‚¯ãƒªãƒƒã‚¯ã‚¸ãƒ£ãƒƒã‚­ãƒ³ã‚°å¯¾ç­–ã®å®Ÿè£…ãŒè¡çªã™ã‚‹å ´åˆã«è¿‚å›ã™ã‚‹ã“ã¨ãŒã§ãã‚‹
            if ($this.attr('data-pass-through-click-jacking-validation')) return;

            var $buttons = $this.find('input[type=submit][name!=delete][name!=draft]');
            var $delete_button = $this.find('input[type=submit][name=delete], input[type=submit][name=draft]');
            var disable = function() {
                $this.addClass('unedited');
                $buttons.attr('disabled', 'disabled');
            };
            var enable = function() {
                $this.removeClass('unedited');
                $buttons.removeAttr('disabled');
            };
            var serialize = function($form) {
                return $({
                    elements: $form.find(':input:not([data-ignore-click-jacking])')
                }).serialize();
            };

            disable();
            $delete_button.attr('disabled', 'disabled');
            var init = serialize($this);
            var timer = setInterval(function () {
                $delete_button.removeAttr('disabled');
                if (init != serialize($this)) {
                    clearInterval(timer);
                    enable();
                }
            }, 1500);
        });
    }

    if (page != 'globalheader') $('a.feedback').on('click', function () {
        Hatena.Diary.Feedback.toggle(Hatena.Diary.data('feedback'));
        return false;
    });
});

// locationã®viaã‚’ãƒªãƒ³ã‚¯ã«å¼•ãç¶™ã
Hatena.Diary.inheritVia = function(via) {
    if (!via) return;

    $('a[data-inherit-via]').each(function () {
        var $self = $(this);
        var href  = $self.attr('href').split(/\?/);
        var query = href[1] || '';

        var params = Hatena.Diary.Util.decodeParam(query);
        params['via'] = via;

        $self.attr('href', href[0] + '?' + $.param(params));
    });
};

Hatena.Diary.validationTweetLength = function(tweet) {
    var length = twttr.txt.getTweetLength(tweet || '');
    // ãƒ„ã‚¤ãƒ¼ãƒˆã®æœ€å¤§æ–‡å­—æ•° - httpã®url - httpsã®ç”»åƒurl - æ”¹è¡Œ = 95
    // 95ã‚ˆã‚Šã‚ªãƒ¼ãƒãƒ¼ã—ã¦ã„ãŸå ´åˆã¯false, ã‚ªãƒ¼ãƒãƒ¼ã—ã¦ã„ãªã„å ´åˆã¯trueã‚’è¿”ã—ã¾ã™
    // ã“ã“ã§ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã¯å˜ç´”ãªæ–‡å­—æ•°ã§è¡Œã£ã¦ã„ã‚‹ã‚ã‘ã§ã¯ãªãã€
    // å…¬å¼ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ç”¨ã„ã¦twitterã®ä»•æ§˜ã«åˆã‚ã›ã¦ã‚ˆã—ãªã«ã‚„ã£ã¦ãã‚Œã¾ã™
    // ä¾‹ãˆã°å‡„ã„é•·ã„urlã‚’è²¼ã£ã¦ã‚‚httpã®urlã ã¨22æ–‡å­—ã§ã‚«ã‚¦ãƒ³ãƒˆã—ã¦ãã‚Œã¾ã™ã€‚
    return length < 140 - 22 - 23 - 1;
};

})(jQuery);

(function($) {

    Hatena.Diary.Circle = {
        updateMembershipCategory: function($select) {
            var circleId = $select.attr('data-circle-id');
            var blogId = $select.attr('data-blog-id');
            var selection = $select.find('option:selected').val();

            var $indSuccess = $select;

            var operation, categoryId;
            if (selection === 'delete') {
                operation = 'delete';
            }
            else {
                operation = 'update';
                categoryId = selection;
            }

            return $.ajax({
                url  : '/api/circle/membership/category',
                type : 'POST',
                data : {
                    rkm         : Hatena.Diary.data('rkm'),
                    rkc         : Hatena.Diary.data('rkc'),
                    operation   : operation,
                    circle_id   : circleId,
                    blog_id     : blogId,
                    category_id : categoryId
                }
            });
        }
    };

})(jQuery);

(function($){

Hatena.Diary.Backup = {

    // data: {
    //   modified: epoch,
    //   data: serializeã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿,
    //   id: formã®id
    // }

    UI: 'default', // or 'touch'
    setup: function () {
        var self = this;

        // ã‚µãƒ¼ãƒãƒ¼ã§backupã™ã‚‹ã®ã¯å»ƒæ­¢ã«ãªã£ãŸã®ã§
        // ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«å¯¾å¿œã—ã¦ã„ãªã„ãƒ–ãƒ©ã‚¦ã‚¶ã®å ´åˆã¯å³returnã™ã‚‹
        if (!self.localStorageEnabled()) return;

        var target = $('form[data-backup-id]');

        self.clearPreviousBackup();

        target.each(function () {
            var $form = $(this);

            self.load($form).done(function(res) {
                self.loadDone($form, res);
            });

            setInterval(function () {
                var data = self.save($form);
                if (data) {
                    self.saveDone($form, data);
                }
            }, +$form.attr('data-backup-interval') * 1000 || self.defaultInterval());
        });
    },

    defaultInterval: function() {
        // localStorageä½¿ãˆãŸã‚‰é »ç¹ã«ï¼Œä½¿ãˆãªã‹ã£ãŸã‚‰é€šä¿¡ç™ºç”Ÿã™ã‚‹ã®ã§é »åº¦ä½ã
        return this.localStorageEnabled() ? 3000 : 9000;
    },

    localStorageEnabled: function() {
        // localStorageãŒä½¿ãˆã¦ï¼Œã‹ã¤ï¼Œãƒ‡ã‚¶ã‚¤ãƒ³è¨­å®šç”»é¢ã§ãªã„ã¨ãæœ‰åŠ¹
        // ãƒ‡ã‚¶ã‚¤ãƒ³è¨­å®šã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã¯ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’é€šã—ã¦ã‚„ã£ã¦ã‚‹ãŸã‚
        var enabled = false;
        try {
            enabled = window.localStorage && Hatena.Diary.data('page') !== 'user-blog-config-design-detail';
        } catch(ignore_error) { }
        return enabled;
    },

    localStorageKey: 'backup',

    clearBackup: function () {
        localStorage.removeItem(this.localStorageKey);
    },

    clearPreviousBackup: function() {
        // ä»¥å‰ã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’æ¶ˆã™ã‚ˆã†ã«ã¨ã„ã†ã‚ã‚ŒãŒã‚ã‚Œã°localStorageã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’ãƒªã‚»ãƒƒãƒˆ
        // ã“ã®cookieã¯è¨˜äº‹æŠ•ç¨¿æˆåŠŸæ™‚ã«ã‚»ãƒƒãƒˆã•ã‚Œï¼Œã‚¯ãƒªã‚¢ã—ãŸã‚‰ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã§æ¶ˆã™

        if (!$.cookie('clear_backup')) return;

        this.clearBackup();
        $.removeCookie('clear_backup', { path: '/' });
    },

    // ãƒ­ãƒ¼ãƒ‰ã«æˆåŠŸã—ãŸã‚‰resolveã•ã‚Œã‚‹Deferredã‚’è¿”ã™
    load : function ($form) {
        var self = this;

        var id   = $form.attr('data-backup-id');
        $form.data('backup', self.serialize($form));

        var loaded = $.Deferred();

        _.defer(function() {
            var backup;
            try {
                backup = JSON.parse(localStorage.getItem(self.localStorageKey));
            } catch (ignore_error) { }

            if (backup && backup.id === id) {
                // ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãŒã‚ã‚Šï¼Œformã®idãŒä¸€è‡´
                loaded.resolve(backup);
            } else {
                // å¤±æ•—
                loaded.reject();
            }
        });

        return loaded.promise();
    },

    // ãƒ­ãƒ¼ãƒ‰å®Œäº†æ™‚ã®ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯
    loadDone: function ($form, res) {
        var self = this;

        if (!res) return;

        Hatena.Diary.LOG(['backup.load', res]);
        var backupTime = new Date(+res.modified * 1000);

        // å¤ã™ãã‚‹ã¨ãæ¨ã¦ã‚‹
        if (new Date() - backupTime > 1000 * 60 * 60) return;

        // touchã§ã¯ã¨ã‚Šã‚ãˆãšæ‰‹å‹•å¾©å…ƒ
        if (self.shouldAutoRestore[Hatena.Diary.Backup.UI]($form)) {
            var prev = self.serialize($form);

            self.restoreBackup($form, res.data);
            self.promptAutoRestored($form, backupTime, function () {
                self.clearRestore($form, prev);
            });
        } else {
            self.promptRestore[Hatena.Diary.Backup.UI]($form, backupTime, function () {
                self.restoreBackup($form, res.data);
            });
        }
    },

    // ä¿å­˜ã«æˆåŠŸã—ãŸã‚‰ä¿å­˜ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’è¿”ã™
    save : function ($form, force) {
        var self = this;

        var id   = $form.attr('data-backup-id');
        var prev = $form.data('backup');
        var now  = self.serialize($form);
        if (prev == now && !force) {
            // ãƒ•ã‚©ãƒ¼ãƒ ã®çŠ¶æ…‹ãŒå¤‰åŒ–ã—ã¦ã„ãªã„ã¨ãä½•ã‚‚ã—ãªã„
            return false;
        }

        $form.trigger('backup-presave');

        $form.data('backup', now);

        var backupTime = Math.floor(new Date().getTime() / 1000);

        backup = {
            id: id,
            modified: backupTime,
            data:     now
        };
        localStorage.setItem(self.localStorageKey, JSON.stringify(backup));

        return backup;
    },

    // ä¿å­˜å®Œäº†æ™‚ã®ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯
    saveDone : function ($form, res) {
        Hatena.Diary.LOG(['backup.save', res]);
        $form.trigger('backup-save');
    },

    serialize : function ($form) {
        var values = [];
        var inputs = $form.find('input[type="text"], textarea, input[data-with-backup], input[type="hidden"].backup, input[type="radio"].backup, input[type="checkbox"].backup-button');
        for (var i = 0, it; (it = inputs[i]); i++) {
            if (!it.name) continue;
            if (it.type == 'radio' && !it.checked) continue;
            // selectã•ã‚Œã¦ãªã„å ´åˆã¯0ã‚’é€ã‚‹
            if (it.type == 'checkbox' && !it.checked) {
                values.push(encodeURIComponent(it.name) + '=0');
                continue;
            }
            values.push(encodeURIComponent(it.name) + '=' + encodeURIComponent(it.value));
        }
        $form.find('select').each( function () {
            var select  = this;
            var $select = $(select);
            if (select.getAttribute('data-without-backup') !== null) return;
            var selectItem = $select.find('option:selected');
            if ( selectItem.length === 0 ) return;
            values.push(encodeURIComponent(select.name) + '=' + encodeURIComponent($(selectItem[0]).val()));
        });
        return values.join('&');
    },

    shouldAutoRestore: {
        'default': function ($form) {
            // æ–°è¦æŠ•ç¨¿ã‹ã¤ã‚¿ã‚¤ãƒˆãƒ«ã¨æœ¬æ–‡ãŒç©ºã®ã¨ãè‡ªå‹•ã§å¾©å…ƒ
            var newEntryBackupIDRegex = new RegExp("user/blog/edit-\\d+-new");
            var isNewEntry = newEntryBackupIDRegex.test($form.attr('data-backup-id'));

            var $title = $form.find(':input[name="title"]');
            var titleIsEmpty = $title[0] && $title.val().length === 0;

            var $body = $form.find(':input[name="body"]');
            var bodyIsEmpty = $body[0] && $body.val().length === 0;

            return isNewEntry && titleIsEmpty && bodyIsEmpty;
        },
        'touch': function () {
            // touchç‰ˆã§ã¯è‡ªå‹•çš„ã«å¾©å…ƒã›ãšã«ã€æ‰‹å‹•ã§å¾©å…ƒã™ã‚‹
            return false;
        }
    },

    restoreBackup : function ($form, data) {
        var self = this;

        Hatena.Diary.LOG('restore backup');

        self.assignData($form, data);
    },

    clearRestore : function ($form, prev) {
        var self = this;

        Hatena.Diary.LOG('clear restore');

        self.assignData($form, prev);
    },

    assignData : function ($form, data) {
        var params = Hatena.Diary.Util.decodeParam(data);
        for (var name in params) if (params.hasOwnProperty(name)) {
            $form.find('input[name="' + name + '"], textarea[name="' + name + '"]').val(params[name]);
        }

        $form.data('backup', data);
        $form.trigger('backup-restore', data);
        $form.trigger('backup-restore-params', [ params ]);
    },

    promptRestore : {
        'default' : function ($form, backupTime, callback) {
            var $message = Hatena.Diary.Backup.initMessage($form);
            $message.prepend(
                $(Hatena.Locale.text('backup.notice', '<time data-relative data-epoch="' + backupTime.getTime() + '"></time>') +
                ' <a href="javascript:void(0)">(' + Hatena.Locale.text('backup.restore') + ')</a>')
            ).show();

            Hatena.Locale.updateTimestamps($message[0]);

            $message.find('a').click(callback);
        },


        'touch' : function ($form, backupTime, callback) {
            if (confirm(Hatena.Locale.text('backup.notice.ask_restore', backupTime))) {
                callback();
            }
        }
    },

    promptAutoRestored : function ($form, backupTime, callback) {
        var self = this;

        var $message = self.initMessage($form);

        $message.prepend(
            $(Hatena.Locale.text('backup.notice.auto_restored', '<time data-relative data-epoch="' + backupTime.getTime() + '"></time>') +
            ' <a href="javascript:void(0)">(' + Hatena.Locale.text('backup.clear_restore') + ')</a>')
        ).show();

        Hatena.Locale.updateTimestamps($message[0]);

        $message.find('a').click(callback);
    },

    initMessage : function ($form) {
        var $message = $('<div class="backup-message"></div>').hide()
            .appendTo($form.find('#editor-main .body'));

        var $editarea = $('#editor .editarea');

        $message.append($('<div class="backup-message-close"><img src="' + Hatena.Diary.URLGenerator.static_url('/images/admin/close.gif') + '"></div>'));

        // ä¸‹éƒ¨ã®ãƒœãƒ¼ãƒ€ãƒ¼ã‚’editareaã®ãƒœãƒ¼ãƒ€ãƒ¼ã«é‡ã­ã‚‹ãŸã‚ã«,
        // ä¸Šéƒ¨ã®ãƒœãƒ¼ãƒ€ãƒ¼ã‚’å«ã¿, ä¸‹éƒ¨ã®ãƒœãƒ¼ãƒ€ãƒ¼ã‚’å«ã¾ãªã„ã‚ˆã†ã«è¨ˆç®—ã™ã‚‹
        var message_height = $message.outerHeight() - (parseInt($message.css('border-width'), 10) || 1);

        $message.css('top', parseInt($editarea.css('top'), 10));
        $editarea.css('top', '+=' + message_height);

        $form.data('backup-message', $message);

        var clearMessage = _.once(function () {
            $message.remove();
            $editarea.css('top', '-=' + message_height);
        });

        $form.on('backup-restore', function () {
            clearMessage();
        });

        $form.on('backup-presave', function () {
            clearMessage();
        });

        $('.backup-message-close').click(function () {
            clearMessage();
        });

        // ç·¨é›†ã‚¿ãƒ–ä»¥å¤–ã§ã¯éš ã™
        $('#editor-main .ui-tabs').on('tabsactivate', function (event, ui) {
            if (ui.newPanel.attr('aria-labelledby') === 'ui-id-1') {
                $message.show();
            } else {
                $message.hide();
            }
        });

        return $message;
    }
};

})(jQuery);

(function ($) {
    if (!Hatena.Epic) Hatena.Epic = {};

    /*
    * ç‰¹å®šã® DOM ãƒ„ãƒªãƒ¼ã¨é–¢é€£ä»˜ã‘ã‚‰ã‚ŒãŸé–¢æ•°ã‚’é›†ã‚ã‚‹ãŸã‚ã®åå‰ç©ºé–“
    * è¤‡æ•°ã®ãƒšãƒ¼ã‚¸ã§ä½¿ã‚ã‚Œã‚‹å‡¦ç†ã‚’ã¾ã¨ã‚ã‚‹ãŸã‚ã«å­˜åœ¨ã™ã‚‹
    * DOM ãƒãƒ¼ãƒ‰ã‚’ãƒ©ãƒƒãƒ—ã—ãŸ jQuery ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æ¸¡ã™ã“ã¨ãŒå¼·ãæ¨å¥¨ã•ã‚Œã‚‹
    */
    Hatena.Epic.Component = {
        // <div id="preview" data-uri="[% uri %]?preview=1">
        //   <iframe></iframe>
        // </div>
        // å­è¦ç´ ã® iframe ã§è¡¨ç¤ºã™ã‚‹ URL ã‚’ $preview ã® data-uri ã«è¨­å®šã™ã‚‹
        setupPreviewFrameLocation: function ($preview) {
            var locationURI = $preview.attr('data-uri');
            var iframeNode = $preview.find('iframe')[0];
            iframeNode.contentWindow.location.replace(locationURI);
        },

        setupTouchViewSuggest: function () {
            var suggest_touch_view = !Hatena.Diary.data('no-suggest-touch-view');
            var has_touch_view     = Hatena.Diary.data('has-touch-view');
            var is_touch_agent     = Hatena.Diary.Devices.userAgent() === 'touch';

            if (suggest_touch_view && has_touch_view && is_touch_agent) {
                $('#sp-suggest-link').on('click', function () {
                    Hatena.Diary.Devices.use('touch');
                    return false;
                });
                $('#sp-suggest').show();
            }
        }
    };
})(jQuery);

(function($){
    var setupStar = function() {
        if (!Hatena.Star) return;

        var entryConfig = {
            entryNodes: {
                // PC, article
                'article.entry' : {
                    uri: '.hatena-star-metadata .hatena-star-permalink',
                    title: '.hatena-star-metadata .hatena-star-permalink',
                    container: 'div.hatena-star-container'
                },
                // PC, archive
                'section.archive-entry' : {
                    uri: '.hatena-star-metadata .hatena-star-permalink',
                    title: '.hatena-star-metadata .hatena-star-permalink',
                    container: 'span.star-container'
                },
                // touch, article
                '.entry-article' : {
                    uri: '.hatena-star-metadata .hatena-star-permalink',
                    title: '.hatena-star-metadata .hatena-star-permalink',
                    container: 'div.hatena-star-container'
                },
                // touch, comment
                'li.entry-comment' : {
                    uri: 'p.comment-metadata a.permalink',
                    title: 'div.comment-content',
                    container: '.comment-metadata'
                }
            }
        };

        var commentConfig = {
            entryNodes: {
                'li.entry-comment' : {
                    uri: 'p.comment-metadata a.permalink',
                    title: 'div.comment-content::-ten-truncate',
                    container: '.comment-metadata'
                }
            }
        };

        Hatena.Star.SiteConfig = entryConfig;

        Hatena.Star.EntryLoader.intoCommentScope = function (func) {
            Hatena.Star.SiteConfig = commentConfig;
            func();
            Hatena.Star.SiteConfig = entryConfig;
        };

        Hatena.Star.User.prototype.userPage = function() {
            var uri = Hatena.Diary.data('admin-domain') + '/' + this.name + '/';
            return uri;
        };

        var img_src = Hatena.Diary.URLGenerator.static_url('/images/theme/star/hatena-star-add-button.png');
        Hatena.Star.AddButton.ImgSrc            = img_src;
        Hatena.Star.AddButton.SmartPhone.ImgSrc = img_src;
    };

    setupStar();

    Hatena.Diary.Star = {
        // ã‚¹ã‚¿ãƒ¼å¤§ããã—ã¦ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚¢ã‚¤ã‚³ãƒ³é‡ã­ã‚‹
        initBigStar: function () {
            if (!Hatena.Star) return;

            // ä½“è£å¤‰æ›´
            Hatena.Star.Star.prototype.generateImg = function () {
                var img, star_img, user_img, span, user_icon;

                user_icon = function (name) {
                    return "http://cdn1.www.st-hatena.com/users/" + (encodeURI(name.slice(0, 2))) + "/" + (encodeURI(name)) + "/profile.gif";
                };

                star_img = Hatena.Star.Star.getImage(this.container);
                star_img.alt = this.screen_name;
                star_img.title = '';

                if (this.color && this.color != 'yellow' && this.color != 'temp') {
                    star_img.alt = star_img.alt + ' (' + this.color  + ')';
                }

                this.img = star_img;

                if (this.screen_name) {
                    if (!Hatena.Star.Star.gotImage[this.screen_name]) {
                        Hatena.Star.Star.gotImage[this.screen_name] = {};
                    }

                    if (!Hatena.Star.Star.gotImage[this.screen_name][this.color]) {
                        span = document.createElement('span');
                        span.className = 'hatena-big-star-star-container';
                        user_img = document.createElement('img');
                        user_img.src = user_icon(this.screen_name);
                        user_img.setAttribute('tabIndex', 0);
                        user_img.className = 'hatena-star-user';
                        user_img.style.padding = '0';
                        user_img.style.border = 'none';

                        span.appendChild(user_img);
                        span.appendChild(star_img);

                        Hatena.Star.Star.gotImage[this.screen_name][this.color] = span;
                    }

                    this.img = Hatena.Star.Star.gotImage[this.screen_name][this.color].cloneNode(true);
                }
            };

            // posã®å€¤ã®èª¿æ•´
            Hatena.Star.AddButton.prototype.showColorPallet = function (e) {
                this.clearSelectedColorTimer();
                if (!this.pallet) this.pallet = new Hatena.Star.Pallet();
                var pos = Ten.Geometry.getElementPosition(this.img);
                pos.x += 2;
                pos.y += 22;
                this.pallet.showPallet(pos, this);
            };

            Hatena.Star.AddButton.SmartPhone.prototype.showColorPallet = function (e) {
                this.clearSelectedColorTimer();

                if (!this.pallet) {
                    this.pallet = new Hatena.Star.Pallet.SmartPhone();
                }

                var pos = Ten.Geometry.getElementPosition(this.img);
                pos.x = Ten.Browser.isDSi ? 5 : 15;
                pos.y += 30;
                this.pallet.showPallet(pos, this);
                this.pallet.show(Hatena.Star.UseAnimation ? { x: 0, y: 0 } : pos);
            };

            // ã‚¹ã‚¿ãƒ¼ãƒœã‚¿ãƒ³æŠ¼ã•ã‚ŒãŸã‚‰å¿…è¦ãªæƒ…å ±ã‚’ã¯ã¦ãªãƒ–ãƒ­ã‚°ã®ã‚µãƒ¼ãƒãƒ¼ã«é€ã‚‹
            Hatena.Star.AddButton.prototype.addStar = _.wrap(Hatena.Star.AddButton.prototype.addStar, function(fun, e) {
                fun.apply(this, [e]);
                Hatena.Diary.trackEvent('hatena-star-add');
            });

            Hatena.Star.AddButton.SmartPhone.prototype.addStar = _.wrap(Hatena.Star.AddButton.SmartPhone.prototype.addStar, function(fun, e) {
                fun.apply(this, [e]);
                Hatena.Diary.trackEvent('hatena-star-add-smartphone');
            });
        },

        // ã‚¹ã‚¿ãƒ¼ä»˜ã‘ãŸã“ã¨ãªã„å ´åˆã€ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—ã‚’è¡¨ç¤ºã™ã‚‹
        initStarNavigation: function() {

            if (!Hatena.Star) return;

            var TIPSY_ALLOW_OFFSET = 8;
            var $tipsy_arrow = $('<div>').addClass('tipsy-arrow blue'),
                $star_navigation_tooltip = $('<div>').addClass('star-navigation-tooltip tipsy-n')
                .append($('<p>').text(Hatena.Locale.text('star-navigation-message')))
                .prepend($tipsy_arrow);

            $.getJSON("https://www.hatena.ne.jp/notify/notices.count.json?services=1&callback=?", function (res) {

                // ã‚¹ã‚¿ãƒ¼åˆ©ç”¨ä¸­ãªã‚‰ãªã«ã‚‚ã—ãªã„
                if (res.services.s) return;

                // ã¯ã¦ãªã‚¹ã‚¿ãƒ¼åˆ©ç”¨ä¸­ã§ã¯ãªã„ã‘ã©ã‚¹ã‚¿ãƒ¼ã¤ã‘ãŸ
                Hatena.Star.AddButton.prototype.addStar = _.wrap(Hatena.Star.AddButton.prototype.addStar, function(fun, e) {
                    fun.apply(this, [e]);
                    Hatena.Diary.trackEvent('hatena-star-add-first');
                });

                // æ—¢èª­ã‹ã©ã†ã‹ã‚’ localStorage ã«ä¿å­˜ã™ã‚‹
                var localStorageKey = 'Hatena.Diary.Blogs.StarNavigation.Read';

                var isRead = function () {
                    try {
                        return localStorage[localStorageKey] === 'already';
                    } catch(ignore) {}
                };

                var setIsRead = function (isRead) {
                    try {
                        localStorage[localStorageKey] = isRead ? 'already' : 'not yet';
                    } catch(ignore) {}
                };

                // æ—¢èª­ã®ã¨ã tipsy å‡ºã™å¿…è¦ãªã„
                if (isRead()) return;

                var wait_for_star_load = function (func) {
                    setTimeout(function () {
                        var $star_button = $('.hatena-star-add-button');

                        if ($star_button.length !== 0) {
                            func();
                            return;
                        }

                        wait_for_star_load(func);
                    }, 200);
                };

                wait_for_star_load(function () {
                    $('.hatena-star-container').after($star_navigation_tooltip);

                    $('.tipsy-arrow.blue').each(function () {
                        $(this).css({ left: $(this).parent().siblings().find('.hatena-star-add-button').offset().left - $star_navigation_tooltip.offset().left + TIPSY_ALLOW_OFFSET });
                    });

                    $('.star-navigation-tooltip').click(function () {
                        setIsRead(true);
                        $(this).fadeOut(1000);
                    });

                    $('.hatena-star-add-button').click(function () {
                        setIsRead(true);
                        $('.star-navigation-tooltip').fadeOut(1000);
                    });
                });
            });
        },

        initDeleteStar: function () {
            if (!Hatena.Star) return;

            Hatena.Star.Star.prototype.setImgObservers = function () {
                var self = this;
                new Ten.Observer(self.img,'onmouseover',self,'showName');
                new Ten.Observer(self.img,'onmouseout',self,'hideName');
            };

            Hatena.Star.Star.prototype.asElement = _.wrap(Hatena.Star.Star.prototype.asElement, function(func) {
                var self = this;
                var element = func.call(self);

                if ( !Hatena.Star.Config.isStarDeletable ) return element;

                // ä»¥ä¸‹ã¯ã‚¹ã‚¿ãƒ¼ãŒdocumentã«appendã•ã‚Œã¦ã‹ã‚‰å®Ÿè¡Œ

                // ã‚¹ã‚¿ãƒ¼å‰Šé™¤ã§ãã‚‹ã¨ãæˆåŠŸã™ã‚‹Deferredã‚’è¿”ã™
                var checkCanDelete = _.once(function() {
                    var dfd = $.Deferred();

                    var uri = Hatena.Star.BaseURL.replace(/^http:/, Hatena.Star.BaseURLProtocol) + 'star.deletable.json';
                    var data = {
                        name: self.name,
                        uri: self.entry.uri
                    };
                    if (self.color) data.color = self.color;
                    if (self.quote) data.quote = self.quote;

                    $.ajax({
                        type: 'get',
                        dataType: 'jsonp',
                        url: uri,
                        data: data
                    }).done(function(res) {
                        var can_delete = res.result && (res.message || res.confirm_html);
                        if (can_delete) {
                            dfd.resolve(res);
                        } else {
                            dfd.reject(res);
                        }
                    });

                    return dfd;
                });

                var $star_container = $(self.anchor);

                $star_container.hover(
                    function () {
                        // å‰Šé™¤å¯èƒ½ãªã¨ãï¼Œå³ä¸Šã«å‰Šé™¤ãƒœã‚¿ãƒ³ã‚’è¡¨ç¤º
                        checkCanDelete().done(function(deletion_info) {
                            var $delete_button =  $("<img>").addClass('star-delete-button').attr(
                                "src", Hatena.Diary.URLGenerator.static_url('/images/theme/star/star-delete.png')
                            );
                            $star_container.append($delete_button);
                            var button_position = $delete_button.position();
                            $delete_button.css({
                                left: button_position.left - 9,
                                top : button_position.top
                            });

                            //ã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸã‚‰å‰Šé™¤ç¢ºèª
                            $delete_button.click(function () {
                                if (deletion_info.confirm_html) {
                                    var pos = Ten.Geometry.getElementPosition(self.anchor);
                                    var scr = new Hatena.Star.DeleteConfirmScreen();
                                    scr.showConfirm(deletion_info.confirm_html, self, pos);
                                } else if (confirm(deletion_info.message)) {
                                    self.deleteStar();
                                }

                                return false;
                            });
                        });
                    },
                    function () {
                        $(this).find(".star-delete-button").remove();
                    });

                return element;
            });
        },

        initSelectStar: function () {
            if (!Hatena.Star) return;

            var SELECT_STAR_OPACITY = 0.6, SELECT_STAR_OFFSET = 60, SELECT_STAR_SIZE = 32, GET_BIGGER_SIZE = 24.0;

            var $target_article;
            var $select_star = $('.select_star_button_container');
            var $message_box = $('#select-star-message-box');
            var using_select_star = false;
            var message_fadeout_timer;

            // ã‚¹ã‚¿ãƒ¼ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ãŸã¨ã
            Hatena.Star.AddButton.prototype.addStar = _.wrap(Hatena.Star.AddButton.prototype.addStar, function (func, e) {
                this.copySelectedText();

                func.call(this, e);

                if (this.selectedText !== '') {
                    Hatena.Diary.trackEvent('hatena-star-add-quote');
                }
            });

            // ã‚¹ã‚¿ãƒ¼æŠ•ç¨¿ã®çµæœãŒè¿”ã£ã¦ããŸã¨ã
            Hatena.Star.AddButton.prototype.receiveResult = _.wrap(Hatena.Star.AddButton.prototype.receiveResult, function (func, args) {
                // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å‡ºã™ä½ç½®
                var message_box_offset = {
                    top: $select_star.offset().top,
                    left: $select_star.offset().left + SELECT_STAR_SIZE
                };

                if (using_select_star) {
                    // ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ã‚‹ã¨ãã®ã¿ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å‡ºã™
                    if (args.is_guest) {
                        var pos = { x: message_box_offset.left, y: message_box_offset.top };

                        // HatenaStar.jsæœ¬ä½“ã§ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦å‡ºã™ä½ç½®ã‚’èª¿æ•´ã•ã‚Œã‚‹ã®ã§, ãã®åˆ†è¶³ã—å¼•ãã—ã¦èª¿æ•´ã‚’æ‰“ã¡æ¶ˆã™
                        pos.x += 10;
                        pos.y -= 25;

                        this.lastPosition = pos;
                    } else {
                        $message_box
                            .stop()
                            .css(_.extend(message_box_offset, { opacity: 1.0 }))
                            .show();

                        if (message_fadeout_timer) {
                            clearTimeout(message_fadeout_timer);
                        }
                        message_fadeout_timer = setTimeout(function () { $message_box.fadeOut(1000); }, 1000);

                        Hatena.Diary.trackEvent('hatena-star-add-select');
                    }
                }

                using_select_star = false;

                func.call(this, args);
            });

            // ãƒ†ã‚­ã‚¹ãƒˆã‚’é¸æŠã—ãŸã¨ã
            $(document).mouseup(function (e) {
                var $target = $(e.target);

                // deferã—ãªã„ã¨ã‚¿ã‚¤ãƒŸãƒ³ã‚°çš„ã«ã†ã¾ãé¸æŠé ˜åŸŸã‚’å–å¾—ã§ããªã„
                _.defer(function () {
                    var selected_text = Ten.DOM.getSelectedText();
                    var selection_is_blank = (selected_text === '');
                    var is_article = $target.closest('article').length > 0;
                    var is_comment = $target.closest('.comment').length > 0;
                    var is_select_star = $target.closest('.select_star_button_container').length > 0;

                    if (is_select_star) {
                        return;
                    }

                    if (!is_article || is_comment || selection_is_blank) {
                        $select_star.hide();
                        return;
                    }

                    $target_article = $target.closest('article');

                    $select_star.css({ top: e.pageY, left: $target_article.offset().left - SELECT_STAR_OFFSET });
                    $select_star.show();
                });
            });

            $select_star.on('mouseenter', function () {
                $(this).css({ opacity: 1.0 });
            });

            $select_star.on('mouseleave', function () {
                $(this).css({ opacity: SELECT_STAR_OPACITY });
            });

            $('.select_star_button').on('click', function (e) {
                using_select_star = true;

                $(this)
                    .stop()
                    .animate({
                        width: SELECT_STAR_SIZE + GET_BIGGER_SIZE, height: SELECT_STAR_SIZE + GET_BIGGER_SIZE,
                        top: -GET_BIGGER_SIZE/2, left: -GET_BIGGER_SIZE/2
                    }, 80)
                    .animate({width: SELECT_STAR_SIZE, height: SELECT_STAR_SIZE, top: 0, left: 0 }, 400);
            });

            // HatenaStarã‹ã‚‰å¼•ç”¨ã‚¹ã‚¿ãƒ¼ãƒœã‚¿ãƒ³ã«ã‚¯ãƒªãƒƒã‚¯ãƒãƒ³ãƒ‰ãƒ©ã‚’ãŸã¦ã‚‹
            Hatena.Star.AddButton.prototype.setupObservers = _.wrap(Hatena.Star.AddButton.prototype.setupObservers, function (func) {
                func.call(this);

                new Ten.Observer($select_star[0], 'onclick', this, 'beforeAddStar');
            });

            Hatena.Star.AddButton.prototype.beforeAddStar = function (e) {
                if ($target_article.attr('data-uuid') === $(this.entry.entryNode).attr('data-uuid')) {
                    this.addStar(e);
                }
            };
        },

        // ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒƒã‚­ãƒ¼é€ä¿¡ã•ã‚Œã¦ãªã„ã¨ãmobileç”¨ã®ã‚¨ãƒ³ãƒˆãƒªãƒšãƒ¼ã‚¸ã‚’æ–°ã—ã„ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã§é–‹ã
        initStarForThirdPartyCookiesDisabled: function (info) {
            Hatena.Diary.Util.waitForResource(function() {
                return Hatena.Star;
            }, function() {
                _.extend(Hatena.Star.AddButton.prototype, {
                    addStar: function() {
                        var self = this;

                        // uri:      ã‚¨ãƒ³ãƒˆãƒªã®URI
                        // location: ã‚¹ã‚¿ãƒ¼ã¤ã‘ãŸã‚ã¨ã®ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆå…ˆ
                        var url = 'http://s.hatena.ne.jp/star.add?' + $.param({
                            uri:      self.entry.uri,
                            location: Hatena.Diary.data('admin-domain') + '/-/close'
                        });

                        var position = {
                            width:  500,
                            height: 200
                        };
                        position.left = Math.floor((screen.width - position.width) / 2);
                        position.top = Math.floor((screen.height - position.height) / 2);

                        var position_string = Hatena.Diary.Util.positionToPositionString(position);

                        var star_window = window.open(url, 'add_star', position_string);

                        // windowé–‰ã˜ã‚‰ã‚ŒãŸã‚‰èª­ã¿è¾¼ã¿ãªãŠã™
                        Hatena.Diary.Util.waitForResource(function() {
                            return star_window.closed;
                        }, function() {
                            Hatena.Diary.Util.updateDynamicPieces([self.entry.entryNode.parentNode]);
                        });
                    },
                    // ã‚«ãƒ©ãƒ¼ã‚¹ã‚¿ãƒ¼ã¤ã‘ã‚‰ã‚Œãªã„ã®ã§ãƒ‘ãƒ¬ãƒƒãƒˆé–‹ã‹ãªãã™ã‚‹
                    showColorPallet: function() {
                    },
                    showColorPalletDelay: function() {
                    }
                });
            });
        }
    };
})(jQuery);

(function($, Hatena, Messenger){
    'use strict';

    /**
     * ãƒ¦ãƒ¼ã‚¶ã®æƒ…å ±
     *
     * @param {boolean} [userData.isSubscribing] - è³¼èª­ä¸­ã‹å¦ã‹
     * @param {boolean} [userData.isGuest]       - ã‚²ã‚¹ãƒˆãƒ¦ãƒ¼ã‚¶ã‹å¦ã‹
     */
    var User = function (userData) {
        this.initialize(userData);
    };
    User.prototype = {
        initialize: function (userData) {
            this.isSubscribing = userData.isSubscribing || false;
            this.isGuest       = userData.isGuest       || false;
        },
        toggle: function () {
            this.isSubscribing = !this.isSubscribing;
        }
    };

    /**
     * ãƒ–ãƒ­ã‚°ã®æƒ…å ±
     * ã‚µãƒ¼ãƒã¨ã®é€šä¿¡ã‚‚è¡Œã†
     *
     * @param {number} [blogData.subscribersCount] - ãƒ–ãƒ­ã‚°ã®è³¼èª­è€…æ•°
     */
    var Blog = function (blogData) {
        this.initialize(blogData);
    };
    Blog.prototype = {
        initialize: function (blogData) {
            this.subscribersCount = +blogData.subscribersCount || 0;
            this.blogUrl = Hatena.Diary.data('blog') || Hatena.Diary.data('blog-host');
            this.requestUrl = [
                Hatena.Diary.data('admin-domain'),
                Hatena.Diary.data('author'),
                this.blogUrl,
                'subscribe'
            ].join('/');
        },

        requestUpdate: function (user) {
            var ajax = $.ajax({
                type: "POST",
                url: this.requestUrl,
                data: {
                    rkm: Hatena.Diary.data('rkm'),
                    rkc: Hatena.Diary.data('rkc'),
                    "delete": user.isSubscribing ? 1 : 0
                }
            });
            return ajax;
        },

        updateSubscribersCount: function (user) {
            this.subscribersCount += user.isSubscribing ? 1 : -1;
        }
    };

    /**
     * è³¼èª­ãƒœã‚¿ãƒ³ã®æŠ½è±¡ã‚¯ãƒ©ã‚¹
     * å¤–éƒ¨ã‹ã‚‰ã¯ openSubscribeWindow ã—ã‹å‘¼ã°ã‚Œãªã„
     *
     * @param {$element}  [$el]       - è¦ç´ ã®jQueryã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
     * @param {Object}    [userData]  - Userã‚¯ãƒ©ã‚¹ã®å¼•æ•°
     * @param {Object}    [blogData]  - Blogã‚¯ãƒ©ã‚¹ã®å¼•æ•°
     */
    var SubscribeButton = function ($el, userData, blogData) {
        this.initialize($el, userData, blogData);
    };
    SubscribeButton.prototype = {
        initialize: function ($el, userData, blogData) {
            var self = this;

            self.$el = $el;

            // ãƒ¢ãƒ‡ãƒ«åˆæœŸåŒ–
            self.user = new User(userData);
            self.blog = new Blog(blogData);

            // è¦ç´ ã®åˆæœŸåŒ–
            self.$subscribeBtn         = self.$el.find('.js-hatena-follow-button');
            self.$subscriptionCount    = self.$el.find('.js-subscription-count');
            self.$subscriptionCountBox = self.$el.find('.js-subscription-count-box');

            self.updateViews();

            // ãƒã‚¦ã‚¹ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†
            self.initEvents();
        },

        // ãƒã‚¦ã‚¹ã‚¤ãƒ™ãƒ³ãƒˆã®ãƒãƒ³ãƒ‰ãƒ©ã‚’ç™»éŒ²ã™ã‚‹
        initEvents: function () {
            var self = this;
            this.$subscribeBtn
                .on('mouseenter', function () {
                    $(this).addClass('hover');
                })
                .on('mouseleave', function () {
                    $(this).removeClass('hover');
                })
                .on('click', function (e) {
                    var offset = self.$subscribeBtn.offset();
                    offset.top += self.$subscribeBtn.height();
                    self.openSubscribeWindow(offset);
                    return false;
                });
        },

        /**
         * è³¼èª­ãƒœã‚¿ãƒ³é–“ã§åŒæœŸã™ã‚‹ãŸã‚ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒãƒ³ãƒ‰ãƒ©ã‚’ç™»éŒ²ã™ã‚‹
         * @abstract
         */
        initMessages: function () {},

        // user, blogã®çŠ¶æ…‹ã«åˆã‚ã›ã¦è¡¨ç¤ºã‚’æ›´æ–°ã™ã‚‹
        updateViews: function () {
            // åˆæœŸåŒ–æ™‚ã«ã‚‚å‘¼ã°ã‚Œã‚‹ãŸã‚ã€toggleClassã¯ä½¿ã‚ãªã„
            var isSubscribing = this.user.isSubscribing;
            this.$subscribeBtn
                .addClass(isSubscribing ? 'subscribing' : 'unsubscribing')
                .removeClass(isSubscribing ? 'unsubscribing' : 'subscribing');

            // hoverã‚¯ãƒ©ã‚¹ã‚’å¤–ã™
            // æ“¬ä¼¼ã‚¯ãƒ©ã‚¹ã§ã¯ãªãã‚¯ãƒ©ã‚¹ã‚’ä½¿ã†ã“ã¨ã§ã€ãƒã‚¦ã‚¹ã®ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ãŒå¤–ã‚Œã¦ã„ã¦ã‚‚æ“ä½œã§ãã‚‹
            this.$subscribeBtn.removeClass('hover');

            this.updateCountBox();
        },

        // è³¼èª­è€…æ•°ãƒãƒ«ãƒ¼ãƒ³ã‚’å‡ºã™
        updateCountBox: function () {
            if (this.blog.subscribersCount >= 1) {
                this.$subscriptionCountBox.show();
                this.$subscriptionCount.text(this.blog.subscribersCount);
            }
            else {
                this.$subscriptionCountBox.hide();
            }
        },

        /**
         * ç¢ºèªç”¨ã®iframeã‚„ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã€confirmãªã©ã‚’é–‹ã
         * è³¼èª­ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ãŸã‚‰å‘¼ã°ã‚Œã‚‹
         * @abstract
         * @public
         */
        openSubscribeWindow: function (offset, isFixed) {},

        /**
         * è¬›èª­å‡¦ç†æˆåŠŸæ™‚ã«å‘¼ã°ã‚Œã‚‹
         * @abstract
         */
        toggleState: function () {},

        // è¬›èª­æ™‚ã«model, viewã‚’æ›´æ–°ã™ã‚‹
        subscribe: function () {
            this.user.isSubscribing = true;
            this.blog.subscribersCount++;
            this.updateViews();
        },

        // è¬›èª­è§£é™¤æ™‚ã«model, viewã‚’æ›´æ–°ã™ã‚‹
        unsubscribe: function () {
            this.user.isSubscribing = false;
            this.blog.subscribersCount--;
            this.updateViews();
        }
    };

    Hatena.Diary.SubscribeButton = SubscribeButton;

})(jQuery, Hatena, Messenger);

(function ($, _, Hatena) {
    'use strict';

    /**
     * adminç‰ˆè¬›èª­ãƒœã‚¿ãƒ³
     * Hatena.Diary.SubscribeButton ã‚’ç¶™æ‰¿
     * ãƒœã‚¿ãƒ³é–“ã®åŒæœŸã«ã¯ Messenger ã§ã¯ãªã localStorage ã‚’ä½¿ã†
     */
    var SubscribeButtonAdmin = function ($el, userData, blogData) {
        this.initialize($el, userData, blogData);
    };
    Hatena.Diary.Util.extend(
        SubscribeButtonAdmin.prototype, Hatena.Diary.SubscribeButton.prototype
    );

    /** @override */
    SubscribeButtonAdmin.prototype.initialize = function ($el, userData, blogData, messenger) {
        Hatena.Diary.SubscribeButton.prototype.initialize.call(this, $el, userData, blogData);

        // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å‡¦ç†
        this.initMessages();
    };

    /** @override */
    SubscribeButtonAdmin.prototype.initMessages = function () {
        // localStorageã®storageã‚¤ãƒ™ãƒ³ãƒˆã§åŒæœŸã‚’è¡Œã†
        var self = this;
        window.addEventListener("storage", function (event) {
            if (event.key !== 'subscription') { return; }
            var data = JSON.parse(event.newValue);
            var blogData = data[self.blog.blogUrl];

            // å¤‰åŒ–ãŒç„¡ã„ã¨ãã¯ä½•ã‚‚ã—ãªã„
            if (blogData === self.user.isSubscribing) { return; }

            // trueã§ã‚‚falseã§ã‚‚ç„¡ã„ã¨ãã¯ä½•ã‚‚ã—ãªã„ (undefinedãªã©)
            if (blogData === true) {
                self.subscribe();
            }
            if (blogData === false) {
                self.unsubscribe();
            }
        });
    };

    /**
     * @override
     * @public
     */
    SubscribeButtonAdmin.prototype.openSubscribeWindow = function () {
        var self = this;

        // ãƒ‰ãƒ¡ã‚¤ãƒ³ã«ã‹ã‹ã‚ã‚‰ãšã€confirmã‚’å‡ºã™
        // ã‚¯ãƒªãƒƒã‚¯ã‚¸ãƒ£ãƒƒã‚­ãƒ³ã‚°å¯¾ç­–
        var confirmMessage = Hatena.Locale.text(
            self.user.isSubscribing ? 'epic.confirm_unsubscribe' : 'epic.confirm_subscribe'
        );
        var res = window.confirm(confirmMessage);
        if (!res) {
            return false;
        }

        // ã‚²ã‚¹ãƒˆã ã£ãŸã‚‰ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã§ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ã‚’å‡ºã™
        if (self.user.isGuest) {
            self.popupLoginWindow();
            return false;
        }

        // è³¼èª­æˆåŠŸã—ãŸã‚‰çŠ¶æ…‹æ›´æ–°
        self.blog.requestUpdate(self.user).success(function() {
            self.toggleState();
        });
    };

    SubscribeButtonAdmin.prototype.popupLoginWindow = function () {
        // ä½ç½®ã‚’æŒ‡å®š
        var options = { width: 900, height: 600, scrollbars: 'yes' };
        options.left = Math.floor((screen.width - options.width) / 2);
        options.top  = Math.floor((screen.height - options.height) / 2);

        // ãƒ­ã‚°ã‚¤ãƒ³URLã‚’ä½œæˆ
        var targetURL = [
            Hatena.Diary.data('admin-domain') + '/',
            Hatena.Diary.data('author')       + '/',
            Hatena.Diary.data('blog-host')    + '/subscribe?iframe=1'
        ].join('');
        var loginURL = 'http://www.hatena.ne.jp/login?location=' + encodeURIComponent(targetURL);

        // ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã‚’é–‹ã
        var loginWindow = window.open(
            loginURL,
            'login',
            Hatena.Diary.Util.positionToPositionString(options)
        );
    };

    /** @override */
    SubscribeButtonAdmin.prototype.toggleState = function () {
        if (this.user.isSubscribing) {
            this.unsubscribe();
            SubscribeButtonAdmin.setSubscription(this.blog.blogUrl, false);
        }
        else {
            this.subscribe();
            SubscribeButtonAdmin.setSubscription(this.blog.blogUrl, true);
        }
    };

    /**
     * localStorageã«ãƒ–ãƒ­ã‚°æ¯ã®è¬›èª­ã«è¬›èª­æƒ…å ±ã‚’ä¿å­˜ã™ã‚‹
     * @static
     */
    SubscribeButtonAdmin.setSubscription = function (blogUrl, isSubscribing) {
        var value = JSON.parse(window.localStorage.getItem('subscription'));
        value = _.isObject(value) ? value : {};
        value[blogUrl] = isSubscribing;
        window.localStorage.setItem('subscription', JSON.stringify(value));
    };

    Hatena.Diary.SubscribeButtonAdmin = SubscribeButtonAdmin;

})(jQuery, _, Hatena);

(function ($, Hatena, Messenger) {

    /**
     * blogsç‰ˆã®è³¼èª­ãƒœã‚¿ãƒ³
     * ãƒœã‚¿ãƒ³é–“ã®åŒæœŸã«ã¯Messengerã‚’ä½¿ã†
     *
     * @param {$element}  [$el]       - è¦ç´ ã®jQueryã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
     * @param {Object}    [userData]  - Userã‚¯ãƒ©ã‚¹ã®å¼•æ•°
     * @param {Object}    [blogData]  - Blogã‚¯ãƒ©ã‚¹ã®å¼•æ•°
     * @param {Messenger} [messenger] - ãƒœã‚¿ãƒ³é–“ã§åŒæœŸã™ã‚‹ç‚ºã€windowã¨é€šä¿¡ã™ã‚‹Messenger
     */
    var SubscribeButtonBlogs = function ($el, userData, blogData, messenger) {
        this.initialize($el, userData, blogData, messenger);
    };
    Hatena.Diary.Util.extend(
        SubscribeButtonBlogs.prototype, Hatena.Diary.SubscribeButton.prototype
    );

    /** @override */
    SubscribeButtonBlogs.prototype.initialize = function ($el, userData, blogData, messenger) {
        Hatena.Diary.SubscribeButton.prototype.initialize.call(this, $el, userData, blogData);

        // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å‡¦ç†
        this.messenger = messenger;
        this.initMessages();
    };

    /** @override */
    SubscribeButtonBlogs.prototype.initMessages = function () {
        // é€šå¸¸ç‰ˆã§ã¯localStorageã¯ä½¿ã‚ãšã«postMessageã‚’ä½¿ã£ã¦å‡¦ç†ã™ã‚‹
        // localStorageã¯åŒä¸€ãƒšãƒ¼ã‚¸å†…ã§ã¯storageã‚¤ãƒ™ãƒ³ãƒˆã‚’ç›£è¦–ã§ããªã„
        var self = this;
        self.messenger.addEventListener('subscription', function (data) {
            var blogData = data[self.blog.blogUrl];

            // å¤‰åŒ–ãŒç„¡ã„ã¨ãã¯ä½•ã‚‚ã—ãªã„
            if (blogData === self.user.isSubscribing) { return; }

            // trueã§ã‚‚falseã§ã‚‚ç„¡ã„ã¨ãã¯ä½•ã‚‚ã—ãªã„ (undefinedãªã©)
            if (blogData === true) {
                self.subscribe();
            }
            if (blogData === false) {
                self.unsubscribe();
            }
        });
    };

    /**
     * ç¢ºèªç”¨ã®iframeã¾ãŸã¯ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã‚’é–‹ã
     * è³¼èª­ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ãŸã‚‰å‘¼ã°ã‚Œã‚‹
     *
     * @public
     * @param {Object}  [offset]  - ç¢ºèªiframeã‚’å‡ºã™ä½ç½®ã®offset
     * @param {boolean} [isFixed] - ç¢ºèªiframeã‚’å›ºå®šã™ã‚‹ã‹ã©ã†ã‹
     */
    SubscribeButtonBlogs.prototype.openSubscribeWindow = function (offset, isFixed) {
        var uri = '' +
            Hatena.Diary.data('admin-domain') + '/' +
            Hatena.Diary.data('author')       + '/' +
            Hatena.Diary.data('blog')         + '/subscribe?iframe=1';

        var self = this;
        Hatena.Diary.Browser.thirdPartyCookiesBlocked.done(function (blocked) {
            if (blocked) {
                self.subscribeButtonHandlerWindow(uri);
            } else {
                self.subscribeButtonHandlerIframe(uri, offset, isFixed);
            }
        });
    };

    // è¬›èª­ç¢ºèªiframeã‚’å‡ºã™
    SubscribeButtonBlogs.prototype.subscribeButtonHandlerIframe = function (uri, offset, isFixed) {
        var $container = $('<div class="hatena-iframe-container popup"></div>');
        var $loading   = $([
            '<div class="loading">',
            '<img src="',
            Hatena.Diary.URLGenerator.static_url('/images/loading.gif'),
            '" alt="loading"/>',
            Hatena.Locale.text('loading'),
            '</div>'
        ].join(''));
        var $iframe    = $('<iframe frameborder="0"></iframe>');

        // windowã®å¤§ãã•ã‚’è¨ˆç®—
        var maxWidth = $(window).width();
        var winWidth = 300;
        var padding  = 20;
        if ((maxWidth - offset.left) < (winWidth + padding)) {
            offset.left = maxWidth - (winWidth + padding);
        }

        // DOMçµ„ã¿ç«‹ã¦
        $container.appendTo(document.body);
        $loading.appendTo($container);
        $iframe.appendTo($container);

        // ã‚¹ã‚¿ã‚¤ãƒ«ã‚’ã‚ã¦ã‚‹
        $container.hide().css({
            width   : winWidth,
            height  : 155,
            position: isFixed ? 'fixed' : 'absolute'
        });
        if (offset) {
            $container.offset(offset);  // offsetã¯cssã®å¾Œã«å½“ã¦ãªã„ã¨ãƒ€ãƒ¡
        }
        $loading.hide().delay(250).show();
        $iframe.on('load', function () { $loading.hide(); });

        // messageæº–å‚™
        var iframeMessenger = Messenger.createForFrame($iframe[0], uri);

        iframeMessenger.addEventListener('resize', function (data) {
            if (data) {
                $container.css(data);
            }
        });

        iframeMessenger.addEventListener('close', function () {
            Hatena.Diary.Window.hide($container);
        });

        var self = this;
        iframeMessenger.addEventListener('done', function () {
            self.toggleState();
        });

        Hatena.Diary.Window.show($container, {
            destroy : function () {
                $container.remove();
                iframeMessenger.destroy();
            }
        });
    };

    // è³¼èª­ç¢ºèªãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã‚’å‡ºã™
    SubscribeButtonBlogs.prototype.subscribeButtonHandlerWindow = function (uri) {
        // windowã‚’è¡¨ç¤ºã™ã‚‹ä½ç½®ã‚’æ±‚ã‚ã‚‹
        var position = {
            width:  300,
            height: 150
        };
        position.left = Math.floor((screen.width  - position.width)  / 2);
        position.top  = Math.floor((screen.height - position.height) / 2);

        // windowã‚’ä½œæˆ
        var subscribeWindow = window.open(
            '', 'subscribe', Hatena.Diary.Util.positionToPositionString(position)
        );

        var popupMessenger = Messenger.createForWindow(subscribeWindow, uri);

        var self = this;
        popupMessenger.addEventListener('done', function() {
            self.toggleState();
            close();
        });

        var close = function() {
            popupMessenger.destroy();
            subscribeWindow.close();
        };

        popupMessenger.addEventListener('close', close);

        // è¦ªwindowã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ãŒç§»ã£ãŸã‚‰é–‰ã˜ã‚‹
        $(document.body).one('focus', close);
    };

    /** @override */
    SubscribeButtonBlogs.prototype.toggleState = function () {
        var data = {};
        data[this.blog.blogUrl] = !this.user.isSubscribing;
        this.messenger.send('subscription', data);
    };

    Hatena.Diary.SubscribeButtonBlogs = SubscribeButtonBlogs;

})(jQuery, Hatena, Messenger);

(function($){

Hatena.Diary.EntryModuleCarousel = function($container, opts) {
    this.init($container, opts);
};

Hatena.Diary.EntryModuleCarousel.prototype = {
    init: function($container, opts) {
        if (!opts) opts = {};

        var self = this;
        self.moveInProgress = false;
        self.$containerElem = $container;
        self.$goBackElem = $($.parseHTML('<a class="module-entries-carousel-button back"><span>Back</span<</a>'));
        self.$goForwardElem = $($.parseHTML('<a class="module-entries-carousel-button forward"><span>Forward</span></a>'));

        self.isAutoScroll = opts.isAutoScroll || false;
        self.autoScrollInterval = opts.autoScrollInterval || 5000;
        // åŒæ™‚ã«è¡¨ç¤ºã•ã‚Œã‚‹è¦ç´ ã®å€‹æ•°
        self.displayEntrySizeAtOnce = opts.displayEntrySizeAtOnce || 2;

        if (self.isAutoScroll) {
            self.autoScrollIntervalId = window.setInterval(function (self) {
                self.goForwardWithLoop();
            }, self.autoScrollInterval, self);
        }

        self.$containerElem.on('click', '.module-entries-carousel-button.back.active',    function() {
            if (self.isAutoScroll) { window.clearInterval(self.autoScrollIntervalId); }
            self.goBack();
        });
        self.$containerElem.on('click', '.module-entries-carousel-button.forward.active', function() {
            if (self.isAutoScroll) { window.clearInterval(self.autoScrollIntervalId); }
            self.goForward();
        });
        self.currentPosition = 0;

        var $carouselBodyElem = self.getCarouselBodyElem();
        self.carouselList = $carouselBodyElem.find('.urllist-item');
        self.carouselElementsSize = self.carouselList.length;
        // è¨˜äº‹ã¯1ã¤ãšã¤å‹•ãã®ã§, ç§»å‹•ã™ã‚‹å›æ•°ã¯`è¦ç´ æ•° - (åŒæ™‚ã«è¡¨ç¤ºã•ã‚Œã‚‹è¦ç´ æ•° - 1)`ã¨ãªã‚‹
        self.carouselSize = self.carouselElementsSize - (self.displayEntrySizeAtOnce - 1);

        self.$directNavigationListElem = $($.parseHTML('<ol class="module-entries-carousel-navigation">'));
        var counter = 0;
        while ( counter < self.carouselSize) {
            self.$directNavigationListElem.append($($.parseHTML('<li><a data-carousel-index="' + counter + '"><span>' + counter + '</span></a></li>')));
            counter++;
        }
        self.$containerElem.on('click', '.module-entries-carousel-navigation a.active', function(event) {
            // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ˜ç¤ºçš„ã«ã‚«ãƒ«ãƒ¼ã‚»ãƒ«ã®è¦ç´ ã‚’é¸æŠã—ãŸã‚‰ã€ ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ“ä½œã‚’å°Šé‡ã—ã¦ä»¥å¾Œã¯å‹æ‰‹ã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã—ãªã„
            if (self.isAutoScroll) { window.clearInterval(self.autoScrollIntervalId); }
            self.goToIndex(Number($(this).attr('data-carousel-index')));
        });

        self.updateNavigationElementsClass();

        self.$containerElem.append(self.$goBackElem);
        self.$containerElem.append(self.$goForwardElem);
        self.$containerElem.append(self.$directNavigationListElem);
    },
    canGoBack: function() {
        var self = this;
        if (self.currentPosition > 0 ) { return true; }
        return false;
    },
    // è¦ç´ ãŒ6å€‹ã®æ™‚ã¯Carouselã¯5é …ç›®ã—ã‹ãªã„
    canGoForward: function() {
        var self = this;
        if (self.currentPosition < self.carouselSize - (self.displayEntrySizeAtOnce - 1) ) { return true; }
        return false;
    },
    updateNavigationElementsClass: function() {
        var self = this;
        self.$goBackElem.toggleClass('active', self.canGoBack() );
        self.$goForwardElem.toggleClass('active', self.canGoForward() );

        self.$directNavigationListElem.find('a').removeClass('current');
        self.$directNavigationListElem.find('a[data-carousel-index="'+ self.currentPosition +'"]').addClass('current');

        self.$directNavigationListElem.find('a').addClass('active');
        self.$directNavigationListElem.find('a.current').removeClass('active');
    },
    // marginãŒè¨­å®šã•ã‚Œã¦ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã®ã§.width()ã¨ã‹ã§ã¯ãªãã€éš£ã®è¦ç´ ã¨ã®offseté•ã„ã‚’è¦‹ã‚‹
    getUnitWidth: function() {
        var self = this;
        var $bodyElem = self.getCarouselBodyElem();
        var $unitElem = $bodyElem.find('.urllist-item');
        if ( $unitElem.length === 0 ) { Hatena.Diary.BUG("Can't get unit width"); return 200; }
        else if ( $unitElem.length === 1 ) { return $unitElem.width(); }
        return $($unitElem[1]).offset().left - $($unitElem[0]).offset().left;
    },
    getCarouselBodyElem: function() {
        var self = this;
        return $(self.$containerElem).find('.urllist-with-thumbnails');
    },
    goToIndex: function(index) {
        var self = this;
        if ( index < 0 || index >= self.carouselSize ) { return; }
        if ( self.moveInProgress ) { return; }
        self.moveInProgress = true;

        var $bodyElem = self.getCarouselBodyElem();
        var originalOffset = $bodyElem.offset();

        var moveSize = self.getUnitWidth() * (index - self.currentPosition);
        var relativeOffset = '-='+moveSize+'px';
        $bodyElem.animate( {
            left: relativeOffset
        }, 300, function() {
            self.currentPosition = index;
            self.updateNavigationElementsClass();
            self.moveInProgress = false;
        });
    },
    goBack: function() { this.goToIndex( this.currentPosition - 1 ) },
    goForward: function() { this.goToIndex( this.currentPosition + 1 ) },
    goForwardWithLoop: function() {
        if ( this.canGoForward() ) {
            this.goForward();
        } else {
            this.goToIndex( 0 );
        }
    }
};

})(jQuery);

(function($){

    Hatena.Diary.Editor = {
        id : 'hatena-diary-edit-in-place',

        showEditInPlace : function (entry, opts) {
            var editinplace = document.getElementById(Hatena.Diary.Editor.id);
            if (editinplace) {
                editinplace.parentNode.removeChild(editinplace);
            }

            var $container = $(
                '<div class="hatena-iframe-container">' +
                    '<div class="loading"><img src="' + Hatena.Diary.URLGenerator.static_url('/images/loading.gif') + '" alt=""/>' + Hatena.Locale.text('loading') + '</div>' +
                    '</div>').
                attr({
                    id: Hatena.Diary.Editor.id
                }).
                hide().
                appendTo(document.body);

            var iframe = $('<iframe frameborder="0"></iframe>').appendTo($container);

            var loading = $container.find('.loading').hide().click(function () {
                return false;
            });

            setTimeout(function () {
                loading.show();
            }, 250);

            var CONTAINER_MARGIN_LEFT = 10;
            var CONTAINER_MARGIN_TOP  = 37;

            var resizeContainer = function() {
                $container.
                    css({
                        width : $(window).width() - (CONTAINER_MARGIN_LEFT * 2),
                        height: $(window).height() - (CONTAINER_MARGIN_TOP * 2)
                    }).
                    css({
                        left: ($(window).width() - $container.width()) / 2
                    });
            };

            resizeContainer();
            $(window).resize(_.throttle(function() {
                resizeContainer();
            }, 100));

            editinplace = iframe[0];

            var uri = Hatena.Diary.data('admin-domain') +
                '/' + Hatena.Diary.data('author') + '/' + Hatena.Diary.data('blog') + '/edit?' +
                'editinplace=1';

            if (entry) uri += '&entry=' + encodeURIComponent(entry.attr('data-uuid'));
            if (opts.title) uri += '&title=' + encodeURIComponent(opts.title);
            if (opts.body)  uri += '&body='  + encodeURIComponent(opts.body);

            var updated;
            var messenger = Messenger.createForFrame(editinplace, uri);

            var closeContainerWindow = function () {
                Hatena.Diary.Window.hide($container);
            };

            var onClose = function () {
                if (updated && !confirm(Hatena.Locale.text('form.confirm.changed'))) {
                    return false; // ç·¨é›†ç”»é¢ã‚’é–‰ã˜ã‚‹ã‚¤ãƒ™ãƒ³ãƒˆã‚’ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã™ã‚‹
                } else {
                    closeContainerWindow();
                    messenger.send('close-preview-window'); // æ–°çª“ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’é–‰ã˜ã‚‹
                }
            };
            messenger.addEventListener('close', onClose);

            messenger.addEventListener('ready', function () {
                loading.remove();
            });
            messenger.addEventListener('update', function (data) {
                messenger.removeEventListener('close', onClose);
                messenger.addEventListener('close', closeContainerWindow); // submitã•ã‚ŒãŸã‚‰confirmã‚’å‡ºã™å¿…è¦ã¯ãªã„
                opts.update(data);
            });

            messenger.addEventListener('change', function (_updated) {
                updated = !!_updated;
            });

            Hatena.Diary.Window.show($container, {
                closeExplicitly: true,
                destroy : function () {
                    iframe.remove();
                    messenger.destroy();
                },
                fixScroll: true
            });

        }
    };

    Hatena.Diary.Pages.Admin['*'] = function () {
        Hatena.Locale.setupTimestampUpdater();
        Hatena.Diary.Backup.setup();

        Hatena.Diary.Pages.Blogs['*'].prepareForGlobalHeader();

        Hatena.Epic.Component.setupTouchViewSuggest();

        $('.js-admin-menu-myblog-btn').click(function() {
            var $blog_list = $('.js-admin-menu-myblog-list');

            if ($blog_list.size() === 0) {
                return true;
            }

            if ($blog_list.is(":visible") === false) {
                $blog_list.show();
            } else {
                $blog_list.hide();
            }
            return false;
        });

        $(document).click(function(e) {
            var $blog_list = $(".js-admin-menu-myblog-list");
            if (!$.contains($blog_list, e.target)) {
                $blog_list.hide();
            }
        });
        Hatena.Diary.Pages.Admin['*'].setupSubscribeBadge();
    };

    Hatena.Diary.Pages.Admin['*'].saveBlogConfig = function(key, value) {
        $.ajax({
            url : "config/param",
            type : "post",
            cache: false,
            dataType : 'json',
            data : {
                key : key,
                val : value,
                rkm : Hatena.Diary.data('rkm'),
                rkc : Hatena.Diary.data('rkc')
            },
            success : function (res) {
                Hatena.Diary.LOG(['config/param', res]);
            }
        });
    };

    Hatena.Diary.Pages.Admin['*'].setupSubscribeBadge = function () {
        if (window != window.parent) return null;  // globalheaderã‹ã‚‰ã¯ãƒ­ãƒ¼ãƒ‰ã—ãªã„

        var unread_url = Hatena.Diary.data('admin-domain').replace(/https?\:/, '') + '/api/recent_subscribing';
        $.ajax({
            url      : unread_url,
            type     : 'get',
            cache    : false,
            dataType : 'json'
        }).done(function (res) {
            if (res && res.count) {
                var count = +res.count;
                if (count === 0) { return; }

                var badge = $('.badge-subscribe').addClass('visible');

                if (count > 20) {
                    badge.text('20+');    // æœªèª­ä»¶æ•°ãŒ21ä»¶ä»¥ä¸Šã®æ™‚ã¯çœç•¥è¡¨ç¤º
                }
                else {
                    badge.text(res.count);
                }
            }
        });
    };

    EditDesign.sections = [
        'theme',
        'background'
    ];

})(jQuery);

(function($){

    Hatena.Diary.Pages.Admin['curation-amazon'] = function () {
        new Hatena.Diary.Pages.Admin['user-blog-edit'].AmazonSearch({
            container: $('#editor-amazon-search')
        });
    };

})(jQuery);

(function($){

    Hatena.Diary.Pages.Admin['curation-itunes'] = function () {
        new Hatena.Diary.Pages.Admin['user-blog-edit'].Itunes({
            container: $('#editor-itunes')
        });
    };

})(jQuery);

(function($){

    Hatena.Diary.Pages.Admin['antenna'] = function () {

        var setupEntryBox = function ($recentEntryBox) {
            var $recentEntries = $recentEntryBox.find('li[class!="more"]');
            var $moreButton = $recentEntryBox.find('li[class="more"]');
            if ($recentEntries.length <= 3) {
                $moreButton.hide();
            }
            else {
                $recentEntryBox.find('li[class!="more"]:gt(2)').hide();
            }
        };

        var $recentEntryBoxes = $('.entry-unit-older-post');
        $recentEntryBoxes.each(function () {
            setupEntryBox($(this));
        });

        $('.entry-unit').on('click', '.more', function (e) {
            var $button = $(this);
            var $recentEntries = $button.siblings('li[class!="more"]:gt(2)');
            $recentEntries.slideToggle('fast');
            $button.hide();
        });

        var $closedBlogs = $('.closed-blog');
        $closedBlogs.each(function () {
            var $closedBlog = $(this);
            var antennaUrl = $closedBlog.data("antennaUrl");
            $.ajax({
                type: 'GET',
                url: antennaUrl,
                data: { device: 'pc' },
                dataType: 'html',
                crossDomain: true,
                xhrFields: {
                    withCredentials: true
                }
            }).done(function (res) {
                $closedBlog.empty();
                $closedBlog.append(res);
                setupEntryBox($closedBlog);
                var $blogContents = $closedBlog.find('.js-blog-content');
                Hatena.Locale.updateTimestamps($blogContents[0]);
            });
        });
    };

})(jQuery);

(function($) {

    Hatena.Diary.Pages.Admin['circle'] = function() {
        $('.membership-category').each(function(i, container) {
            var $container = $(container);
            var $select = $container.find('.membership-category-select');
            var current = $select.find('option:selected').val();
            var $indicator = $container.find('.indicator');

            $select.change(function(e) {
                Hatena.Diary.Circle.updateMembershipCategory($select).done(function(data) {
                    $indicator.find('.success').show();
                    $indicator.find('.fail').hide();
                }).error(function(data) {
                    $select.val( current );
                    $indicator.find('.success').hide();
                    $indicator.find('.fail').show();
                });
            });
        });
    };

})(jQuery);

(function($){

    Hatena.Diary.Pages.Admin['circle-create'] = function () {
        var $form   = $('form#create-circle-form');

        $form.submit(function () {
            Hatena.Diary.Util.preventDuplicateSubmit($form);
        });
    };

})(jQuery);

(function($){

    Hatena.Diary.Pages.Admin['circle-membership-done'] = function () {
        Hatena.Diary.Pages.createForParent();

        Hatena.Diary.Pages.send('resize', {
            // iframeã®é«˜ã•ãŒã†ã¾ãã¨ã‚Œãšã€ã‚„ã‚€ãªã+50ã—ã¦ã„ã‚‹..
            // *1ã¯Operaå¯¾ç­– see also Hatena.Diary.Util.sendresizerequest
            height: ($(document.body).height() + 50) * 1
        });

        Hatena.Diary.Pages.send('done');

        $('.close').on('click', function (e) {
            Hatena.Diary.Pages.send('close', { name : window.name });
            return false;
        });

        var $container = $('.options');
        var $select = $container.find('.membership-category-select');
        var current = $select.find('option:selected').val();
        var $indicator = $container.find('.indicator');

        $select.change(function(e) {
            Hatena.Diary.Circle.updateMembershipCategory($select).done(function(data) {
                $indicator.find('.success').show();
                $indicator.find('.fail').hide();
            }).error(function(data) {
                $select.val( current );
                $indicator.find('.success').hide();
                $indicator.find('.fail').show();
            });
        });
    };

})(jQuery);

(function($){

    Hatena.Diary.Pages.Admin['circle-membership'] = function () {
        Hatena.Diary.Pages.createForParent();

        $('.close').on('click', function (e) {
            Hatena.Diary.Pages.send('close', { name : window.name });
            return false;
        });

        $('form').submit(function (e) {
            var $form = $(this);
            if (!confirm($form.attr('data-confirm-message'))) {
                return false;
            }
        });

        Hatena.Diary.Util.sendResizeRequest();
    };

})(jQuery);

(function($){

    Hatena.Diary.Pages.Admin['curation-gourmet'] = function () {
        if ($('#editor-gourmet.enabled').get(0)) {
            new Hatena.Diary.Pages.Admin['user-blog-edit'].Gourmet({
                container: $('#editor-gourmet')
            });
        }
    };


})(jQuery);

(function($){

    Hatena.Diary.Pages.Admin['curation-instagram'] = function () {
        if ($('#editor-instagram.enabled').get(0)) {
            new Hatena.Diary.Pages.Admin['user-blog-edit'].Instagram({
                container: $('#editor-instagram')
            });
        }
    };

})(jQuery);

(function($){

    Hatena.Diary.Pages.Admin['curation-promotion'] = function () {
        var PromotionEntriesManager = {
            entries: null,
            index: 0,
            init: function ($container) {
                this.entries = _.map($container.find('.promotion-entry'), function(entry) {
                    return new PromotionEntry({ $element: $(entry) });
                });
                $container.on('click', '.pager .prev', $.proxy(this, 'onPrevPagerClick'));
                $container.on('click', '.pager .next', $.proxy(this, 'onNextPagerClick'));
                this.update();
            },
            update: function () {
                var index = this.index;
                _.each(this.entries, function (entry, i) {
                    if (i === index) {
                        entry.show();
                    }
                    else {
                        entry.hide();
                    }
                });
            },
            onPrevPagerClick: function () {
                this.index--;
                this.update();
            },
            onNextPagerClick: function () {
                this.index++;
                this.update();
            }
        };

        var PromotionEntry = function () { this.init.apply(this, arguments); };
        PromotionEntry.prototype = {
            init: function (args) {
                var self = this;
                self.$element = args.$element;
                self.bindEvents();
            },
            bindEvents: function () {
                var self = this;
                self.$element.on('click', '[data-keyword]', function (button) {
                    var $entry = $(this);

                    // trackEventãŒçµ‚ã‚ã‚‹ã®ã‚’ç¢ºèªã—ã¦ã€ã‚¨ãƒ‡ã‚£ã‚¿ã¸ã®insertLinesã‚’ã™ã‚‹
                    Hatena.Diary.trackEventNow('Promotion.Entry.Insert.' + self.entryID()).always(function () {
                        var keyword = $entry.attr('data-keyword');
                        var lines = [ keyword ];
                        Hatena.Diary.EditorConnector.insertLines({
                            html:     lines,
                            hatena:   lines,
                            markdown: lines
                        });
                    });
                });
            },
            show: function () {
                var self = this;
                self.$element.show();
                Hatena.Diary.trackEvent('Promotion.Entry.Show.' + self.entryID());
            },
            hide: function () {
                var self = this;
                self.$element.hide();
            },
            entryID: function () {
                var self = this;
                return self.$element.attr('data-promotion-entry-id');
            }
        };

        PromotionEntriesManager.init($('.promotion-entries'));
    };

})(jQuery);

(function($){

    Hatena.Diary.Pages.Admin['curation-twitter'] = function () {
        if ($('#editor-twitter.enabled').get(0)) {
            new Hatena.Diary.Pages.Admin['user-blog-edit'].Twitter({
                container: $('#editor-twitter')
            });
        }
    };

})(jQuery);

(function($){

    Hatena.Diary.Pages.Admin['curation-flickr'] = function () {
        if ($('#editor-flickr.enabled').get(0)) {
            new Hatena.Diary.Pages.Admin['user-blog-edit'].Flickr({
                container: $('#editor-flickr')
            });
        }
    };


})(jQuery);

(function($){

    Hatena.Diary.Pages.Admin['feedback-iframe'] = function () {
        Hatena.Diary.Pages.createForParent();

        $('.close').on('click', function (e) {
            Hatena.Diary.Pages.send('close', { name : window.name });
            return false;
        });

        $('#button-feedback').on('click', function (e) {
            $('.js-show-on-send-feedback').show();
            $('#body').focus();
            $('.js-hide-on-send-feedback').hide();
            Hatena.Diary.Util.sendResizeRequest();
        });

        if(!!Hatena.Diary.Location.param('thankyou')){
            setTimeout(function () {
                $('#button-close').click();
            }, 3000);
        }

    };

})(jQuery);

(function($){

    Hatena.Diary.Pages.Admin['globalheader'] = function () {
        Hatena.Diary.Pages.createForParent();

        var BASE     = location.hostname.match(/\.hatena\.[^:]+/)[0];

        var header         = $(document.getElementById('header'));
        var headerServices = $(document.getElementById('header-services'));
        var headerNotify   = $(document.getElementById('header-notify'));
        var headerUnread   = $(document.getElementById('header-unread'));
        var headerLocale   = $(document.getElementById('header-locale'));

        var blogUri = decodeURIComponent(location.hash.substring(1));
        var loc = Hatena.Diary.data('admin-domain') + '/go?blog=' + encodeURIComponent(blogUri);

        var publicUserInfo = $.ajax({
            type: 'get',
            dataType: 'jsonp',
            url: "https://www" + BASE + "/notify/notices.count.json",
            data: {
                services: 1
            }
        });

        if (!Hatena.Diary.Browser.isIE) {
            // IEä»¥å¤–ã®ã¨ãã¯canvasã§ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ç”»åƒã‚’åˆæˆã—ãŸã‚Šã™ã‚‹
            var dropdownColor = document.body.getAttribute('data-color');
            Hatena.Diary.Pages.Admin['globalheader'].renderDropdown(dropdownColor);
        }

        header.delegate('.header-dropdown', {
            keypress: function (event) {
                if (event.which !== 13) return;
                $(event.currentTarget).click();
                event.preventDefault();
                event.stopPropagation();
            },
            mouseup: function (event) {
                event.currentTarget.blur();
            }
        });

        header.find('a.new-entry').click(function () {
            Hatena.Diary.Pages.send('new-entry', {});
            return false;
        });

        header.find('a.feedback').click(function () {
            Hatena.Diary.Pages.send('feedback', {
                left : $(this).offset().left,
                uri : Hatena.Diary.data('feedback')
            });
            return false;
        });

        header.find('.units').find('a').click(function () {
            Hatena.Diary.Pages.send('units', {
                left: $(this).offset().left,
                uri: '/-/units'
            });
            return false;
        });

        headerLocale.find('.header-dropdown').click(function () {
            var self = this;
            Hatena.Diary.Pages.send('locale', { });
            return false;
        });

        headerServices.find('.header-dropdown').click(function () {
            var self = this;
            publicUserInfo.done(function (info) {
                Hatena.Diary.Pages.send('servicesmenu', {
                    BASE : BASE,
                    right : $(self).offset().left + $(self).width(),
                    info : info,
                    location : loc
                });
            });
            return false;
        });

        headerNotify.find('.header-dropdown').click(function () {
            Hatena.Diary.Pages.send('notify', {
                BASE : BASE,
                left : $(this).offset().left
            });
            headerNotify.find(".notify-count").text('').hide();
            return false;
        });

        headerUnread.find('.header-button').click(function () {
            Hatena.Diary.Pages.send('unread');
            return false;
        });

        $('.locale .header-dropdown').click(function () {
            Hatena.Diary.Pages.send('locale', {
                height: +$(this).attr('data-height-hint'),
                right : $(this).offset().left + $(this).width()
            });
            return false;
        });

        publicUserInfo.done(function (data) {
            if (data.count > 0) {
                headerNotify.find(".notify-count").text(data.count).show();
            } else {
                headerNotify.find(".notify-count").text('').hide();
            }
        });

        publicUserInfo.done(Hatena.Diary.Util.needComrule2013);

        // æœªèª­ã‚«ã‚¦ãƒ³ãƒˆ
        var unread_url = Hatena.Diary.data('admin-domain').replace(/https?\:/, '') + '/api/recent_subscribing';
        if (Hatena.Diary.data('rkm') && Hatena.Diary.data('rkc')) {
            $.ajax({
                url      : unread_url,
                type     : 'get',
                cache    : false,
                dataType : 'json'
            }).done(function (res) {
                if (res && res.count) {
                    var count = +res.count;
                    if (count === 0) { return; }

                    var badge = headerUnread.find('.unread-count');
                    badge.show();

                    if (count > 20) {
                        badge.text('20');    // æœªèª­20ä»¶ä»¥ä¸Šã¯ã‚«ã‚¦ãƒ³ãƒˆã—ãªã„
                    }
                    else {
                        badge.text(res.count);
                    }
                }
            });
        }

        var params = Hatena.Diary.Location.params();

        Hatena.Diary.Pages.loadInfo().done(function (info, privateInfo) {

            // è³¼èª­ãƒœã‚¿ãƒ³å‘¨ã‚Šã®å‡¦ç†
            // adminç‰ˆã¨blogsç‰ˆãƒœã‚¿ãƒ³ã®åŒæœŸã®ãŸã‚ã€å¸¸ã«å®Ÿè¡Œã™ã‚‹
            Hatena.Diary.Pages.Admin['globalheader'].initSubscribe(info);

            // éå…¬é–‹ãƒ–ãƒ­ã‚°ãªã‚‰éµã‚’è¡¨ç¤º
            // ãƒ–ãƒ­ã‚°ã‚¿ã‚¤ãƒˆãƒ«ã¯ãã®ã‚ã¨ã«appendã™ã‚‹
            if (!info.is_public) {
                $('.js-blog-private-badge').show();
            }

            $('#current-blog .current-blog-title').append(document.createTextNode(info.blog_name));

            Hatena.Diary.Pages.Admin['globalheader'].initBlogDropdown(BASE);
            Hatena.Diary.Pages.Admin['globalheader'].initAdminDropdown(BASE);
        });

        $('.login').attr('href', 'https://www.hatena.ne.jp/login?location=' + encodeURIComponent(loc));

        // globalheaderã¯ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã•ã‚Œã¦ã„ã‚‹ã®ã§ã€jsã§viaã®å¼•ãç¶™ãã‚’ã™ã‚‹
        Hatena.Diary.Pages.message('inheritVia', function (via) {
            Hatena.Diary.LOG(['inheritVia', via]);
            Hatena.Diary.inheritVia(via);
        });

        Hatena.Diary.Pages.message('newEntryGeometry', function() {
            var $newEntry = $('a.new-entry');
            var offset = $newEntry.offset();
            Hatena.Diary.Pages.send('newEntryGeometry', {
                top    : offset.top,
                left   : offset.left,
                height : $newEntry.height(),
                width  : $newEntry.width()
            });
        });
    };

    Hatena.Diary.Pages.Admin['globalheader'].coloringSvgHeader = function (img, callback_with_jquery_obj) {
        img.onload = null; // ã“ã“ã¾ã§ã«è¤‡æ•°ã®eventãŒfireã—ã¦ã‚‹ã“ã¨ãŒã‚ã‚‹?
        try {
            var color = document.body.getAttribute('data-color');
            $(img).find('path').attr('fill', color);
        } catch (e) { Hatena.Diary.BUG(e, 'render logo') }
        callback_with_jquery_obj($(img));
    };

    Hatena.Diary.Pages.Admin['globalheader'].renderDropdown = function (color) {
        var img = new Image();
        img.src = '/images/header/dropdown@2x.png';
        img.onload = function () { try {
            img.onload = null;
            var canvas = document.createElement('canvas');
            canvas.setAttribute('width', 24);
            canvas.setAttribute('height', 24);
            if (!canvas.getContext) return;
            var ctx = canvas.getContext('2d');
            ctx.drawImage(img, 0, 0);
            ctx.globalCompositeOperation = 'source-in';
            ctx.fillStyle = color;
            ctx.fillRect(0, 0, 24, 24);
            if (!canvas.toDataURL) return;
            var data = canvas.toDataURL();

            var style = document.createElement('style');
            style.setAttribute('type', 'text/css');
            style.appendChild(document.createTextNode('#header span.header-dropdown, #header span.header-dropdown-custom { background: url(' + data + ') center right no-repeat; background-size: 12px 12px; }'));
            document.body.appendChild(style);
        } catch (e) {
            Hatena.Diary.BUG(e, 'render logo dropdown');
            img.src = '/images/header/dropdown.gif';
        } };
    };

    Hatena.Diary.Pages.Admin['globalheader'].initAdminDropdown = function (BASE) {
        var $mymenu = $('#header-my');
        $mymenu.click(function () {
            Hatena.Diary.Pages.send('mymenu', {
                BASE: BASE,
                right: $mymenu.offset().left + $mymenu.width()
            });
            return false;
        });
    };

    Hatena.Diary.Pages.Admin['globalheader'].initBlogDropdown = function (BASE) {
        $('#current-blog, #my-blogs').click(function () {
            Hatena.Diary.Pages.send('blogmenu', {
                BASE: BASE,
                left: $(this).offset().left
            });
            return false;
        });
    };

    Hatena.Diary.Pages.Admin['globalheader'].initSubscribe = function (info) {
        // ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ˜ãƒƒãƒ€ã«ã‚ã‚‹è³¼èª­ãƒœã‚¿ãƒ³ã®å‡¦ç†
        // è³¼èª­æ¸ˆãªã‚‰å‡ºã•ãªã„
        // è‡ªåˆ†ã®ãƒ–ãƒ­ã‚°è³¼èª­ã—ã¦ã‚‚ä»•æ–¹ãªã„ã®ã§ï¼Œã“ã®ãƒ–ãƒ­ã‚°ã«ãªã‚“ã‹æ›¸ã‘ã‚‹äººã«ã‚‚å‡ºã•ãªã„
        if (!info.subscribe && !info.can_open_editor) {
            var $subscribe = $('.js-globalheader-subscribe');
            var $done = $('.js-globalheader-subscribed-message');

            $subscribe.show();

            $subscribe.click(function () {
                Hatena.Diary.Pages.send('subscribe', {
                    left: $subscribe.offset().left
                });
                return false;
            });

            // è³¼èª­å®Œäº†ã—ãŸã‚‰ã€Œè³¼èª­ä¸­ã§ã™ã€å‡ºã™
            Hatena.Diary.Pages.message('subscribed-current-blog', function (data) {
                $subscribe.hide();
                $done.show().delay(3000).fadeOut('slow');
            });
        }

        // è³¼èª­ãƒœã‚¿ãƒ³ã®adminç‰ˆã¨blogsç‰ˆã¨ã®åŒæœŸã‚’è¡Œã†
        // admin -> blogs
        window.addEventListener("storage", function (event) {
            if (event.key !== 'subscription') { return; }
            Hatena.Diary.Pages.send('subscription', JSON.parse(event.newValue));
        });
        // blogs -> admin
        Hatena.Diary.Pages.message('subscription', function (data) {
            for (var key in data) {
                Hatena.Diary.SubscribeButtonAdmin.setSubscription(key, data[key]);
            }
        });
    };

})(jQuery);

(function($){

    Hatena.Diary.Pages.Admin['index'] = function () {
        $('.access-graph[itemscope]').each(function () {
            var $this = $(this);
            var i = 0; var data  = $this.find('meta').map(function () {
                return [ [i++, +this.getAttribute('content')] ];
            });

            $.plot($this, [
                {
                    data : data,
                    bars: { show: true, lineWidth: 0.7 },
                    points : { show: false },
                    legend : { show: false },
                    shadowSize : 0
                }
            ], {
                xaxis : {
                    min: 0,
                    ticks: []
                },
                yaxis : {
                    min: 1,
                    autoscaleMargin: 0.1,
                    ticks: []
                },
                grid : {
                    show: false
                }
            });
        });
        $(document.body).click(function () {
            $('.config-dropdown-window').removeClass('open');
        });
        $('.dropdown-toggle').click(function () {
            var dropdown = $(this).closest('.myblog-box').find('.config-dropdown-window');
            if (dropdown.hasClass('open')) {
                dropdown.removeClass('open');
            } else {
                $('.config-dropdown-window').removeClass('open');
                dropdown.addClass('open');
            }
            return false;
        });

        // cookieã‚‚ã£ã¦ãŸã‚‰éå…¬é–‹ãƒ–ãƒ­ã‚°ã®æƒ…å ±ã‚‚è¡¨ç¤ºã™ã‚‹ã‚¢ãƒ³ãƒ†ãƒŠ
        var $closedBlogs = $('.closed-blog');
        $closedBlogs.each(function(){
            var $closedBlog = $(this);
            var antennaUrl = $closedBlog.data("antennaUrl");
            $.ajax({
                type: 'GET',
                url: antennaUrl,
                data: { lite: 1, device: 'pc' },
                dataType: 'html',
                crossDomain: true,
                xhrFields: {
                    withCredentials: true
                }
            }).done(function(res){
                var $res = $($.parseHTML(res));
                $closedBlog = $closedBlog.replaceWith($res);
                var $blogContents = $res.find('.js-blog-content');
                Hatena.Locale.updateTimestamps($blogContents[0]);
            });
        });

        Hatena.Diary.Pages.Admin['index'].getDashboardData();
    };

    Hatena.Diary.Pages.Admin['index'].getDashboardData = function () {
        $.ajax({
            type: 'GET',
            url: '/-/dashboard_data'
        }).done(function(data) {
            if ($('section.js-hot-entries-section').length) {
              $('section.js-hot-entries-section').append(data.hot_entries);
            }

            if ($('section.js-hot-blogs-section').length) {
              $('section.js-hot-blogs-section').append(data.hot_blogs);
            }

            if ($('section.js-recent-blogs-section').length) {
              $('section.js-recent-blogs-section').append(data.recent_blogs);
            }

            if ($('section.js-subscribing-blogs-section').length) {
              $('section.js-subscribing-blogs-section').append(data.subscribing_blogs);
            }

            Hatena.Locale.updateTimestamps();
        });
    };

})(jQuery);

(function($){

    Hatena.Diary.Pages.Admin['invite-new'] = function () {
        Hatena.Locale.setupTimestampUpdater();
    };

})(jQuery);
(function($){

    Hatena.Diary.Pages.Admin['locale'] = function () {
        Hatena.Diary.Pages.createForParent();

        $('#locale-window a').on('click', function () {
            var $this = $(this);
            var lang = $this.attr('data-lang');
            Hatena.Locale.setAcceptLang(lang);
            Hatena.Diary.Pages.send('reload');
            return false;
        });

        Hatena.Diary.Util.sendResizeRequest();
    };

})(jQuery);
(function($){

    Hatena.Diary.Pages.Admin['menu-blogmenu'] = function () {
        Hatena.Diary.Pages.createForParent();
        Hatena.Diary.Util.sendResizeRequest();

        Hatena.Diary.Pages.send('init');
        Hatena.Diary.Pages.message('init', function(init) {
            $('.subscribe').click(function () {
                Hatena.Diary.Pages.send('subscribe', {
                    left: init.left ? init.left : 0
                });
                return false;
            });
        });
        $('.edit-this-entry').click(function () {
            Hatena.Diary.Pages.send('edit-this-entry');
            return false;
        });
        $('.new-entry').click(function () {
            Hatena.Diary.Pages.send('new-entry');
            return false;
        });

    };

})(jQuery);

(function($){
    Hatena.Diary.Pages.Admin['menu-myblogmenu'] = function () {
        Hatena.Diary.Pages.createForParent();

        // myblogmenuã¯åˆã‚éè¡¨ç¤ºã®çŠ¶æ…‹ã§ã‚ã‚Šã€
        // éè¡¨ç¤ºè¦ç´ ã®ã‚µã‚¤ã‚ºã‚’ã¨ã‚‹ã¨Firefoxç­‰ã§ãŠã‹ã—ããªã‚‹ï¼
        // å®Ÿéš›ã«è¡¨ç¤ºã•ã‚Œã‚‹ã®ã‚’å¾…ã£ã¦ã‹ã‚‰resizeã™ã‚‹

        Hatena.Diary.Util.waitForResource(function() {
            return $(document.body).is(':visible');
        }, function() {
            Hatena.Diary.Util.sendResizeRequest();
        }, 100);

        $(document.body).mouseenter(function () {
            Hatena.Diary.Pages.send('mouseenter');
        });
    };
})(jQuery);

(function($){

    Hatena.Diary.Pages.Admin['menu-mymenu'] = function () {
        Hatena.Diary.Pages.createForParent();
        Hatena.Diary.Util.sendResizeRequest();

        $('.new-entry').click(function () {
            Hatena.Diary.Pages.send('new-entry');
            return false;
        });

        var $help = $('#help');
        $help.click(function () {
            Hatena.Diary.Pages.send('feedback', {
                uri: $help.attr('data-feedback-url')
            });
            return false;
        });

        // iPadãªã©ã®ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆãƒ‡ãƒã‚¤ã‚¹ã®ã¨ãã¯ã€
        if (Hatena.Diary.Browser.isTablet) {
            var last_submenu_blog_uri;

            $('a.myblog').on('touchstart touchmove', function () {
                return false;
            });

            $('a.myblog').on('touchend', function () {
                var blog_uri = $(this).attr('href');

                if (last_submenu_blog_uri) {
                    Hatena.Diary.Pages.send('myblogmenu.close', { blogUri: last_submenu_blog_uri });
                }

                Hatena.Diary.Pages.send('myblogmenu.open', { blogUri: blog_uri });

                last_submenu_blog_uri = blog_uri;
                return false;
            });
        } else {
            $('.dropdown-mymenu').menuAim({
                activate: function (li) {
                    var has_submenu = $(li).hasClass('dropdown-mymenu-submenu');
                    if(!has_submenu) return;

                    var blog_uri = $(li).find('a').attr('href');

                    Hatena.Diary.Pages.send('myblogmenu.open', { blogUri: blog_uri });
                },
                deactivate: function (li) {
                    var has_submenu = $(li).hasClass('dropdown-mymenu-submenu');
                    if(!has_submenu) return;

                    var blog_uri = $(li).find('a').attr('href');

                    Hatena.Diary.Pages.send('myblogmenu.close', { blogUri: blog_uri });
                },
                submenuDirection: 'left'
            });
        }

        $('a.myblog').each(function () {
            var top = $(this).position().top;
            var blog_uri = $(this).attr('href');
            Hatena.Diary.Pages.send('myblogmenu.init', { top: top, blogUri: blog_uri });
        });
    };
})(jQuery);

(function($){

    Hatena.Diary.Pages.Admin['menu-services'] = function () {
        Hatena.Diary.Pages.createForParent();
        Hatena.Diary.Pages.message('init', function (data) {

            // data ã¯å±é™ºãªå†…å®¹ã§ã‚ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹
            var BASE = data.BASE;
            var servicesInUse = data.info.services;

            var usernameWindow = $('#username-window');

            $('<dt class="label"><span>Services in Use</span></dt>').
                find('span').text(Hatena.Locale.text('services_in_use')).end().
                appendTo(usernameWindow);

            // global headerã«å‡ºã™ãƒªã‚¹ãƒˆã‚’ä½œã‚‹
            var subdomainsForShow = [];
            for (var s in servicesInUse) {
                if (servicesInUse[s].is_beta) continue;
                if (!servicesInUse[s].portal_top_priority) continue;
                subdomainsForShow.push(s);
            }
            subdomainsForShow.sort(function (a, b) {
                return servicesInUse[b].portal_top_priority -
                    servicesInUse[a].portal_top_priority;
            });

            for (var i = 0, length = subdomainsForShow.length; i < length; i++) {
                var subdomain = subdomainsForShow[i];
                var service = servicesInUse[subdomain];
                if (!service) continue;
                var url = 'http://www' + BASE + '/me/' + service.name + '/';
                var favicon = '//www.hatena.com/images/favicon/' + service.name + '.png';
                $('<dd><a href="" rel="noreferrer" target="_blank"><img alt="" width="16" height="16"/></a></dd>').
                    find('a').
                    find('img').attr('src', favicon).end().
                    attr('href', url).append(document.createTextNode(service.text)).
                    end().
                    appendTo(usernameWindow);
            }

            $('<dt class="label"><span>Lang</span></td>').
                find('span').text(Hatena.Locale.text('lang')).end().
                appendTo(usernameWindow);

            var langs = Hatena.Locale.getAvailLangs();
            for (var i = 0; i < langs.length; i++) {
                var lang = langs[i];
                if (langs[i] == Hatena.Locale.getTextLang()) {
                    $('<dd><span class="selected">lang</span></dd>').
                        find('span').
                        text(Hatena.Locale.text('lang.' + lang + '.native')).
                        end().
                        appendTo(usernameWindow);
                } else {
                    $('<dd><a href="#">lang</a></dd>').
                        find('a').
                        attr('data-lang', lang).
                        text(Hatena.Locale.text('lang.' + lang + '.native')).
                        end().
                        appendTo(usernameWindow);
                }
            }
            usernameWindow.find('a[data-lang]').click(function () {
                var lang = $(this).attr('data-lang');
                Hatena.Locale.setAcceptLang(lang);
                Hatena.Diary.Pages.send('reload');
                return false;
            });

            $('<dt class="label"><span>My Hatena</span></dt>').
                find('span').text(Hatena.Locale.text('my_hatena')).end().
                appendTo(usernameWindow);

            $('<dd><a href="" rel="noreferrer" target="_blank"><img src="/images/favicon/my.png" width="16" height="16" alt=""></a></dd>').
                find('a').attr('href', 'http://www' + BASE + '/my/').append(Hatena.Locale.text('profile')).end().
                appendTo(usernameWindow);

            $('<dd><a href="" rel="noreferrer" class="logout" target="_parent"><img width="16" height="16" src="/images/favicon/logout.gif"></a></dd>').
                find('a').
                attr('href', 'http://www' + BASE + '/logout?location=' + encodeURIComponent(data.location)).append(Hatena.Locale.text('logout')).
                click(function () {
                    return confirm(Hatena.Locale.text('really_want_to_logout'));
                }).
                end().
                appendTo(usernameWindow);

            Hatena.Diary.Util.sendResizeRequest();
        });

        Hatena.Diary.Pages.send('init');
    };

})(jQuery);

(function($){

    Hatena.Diary.Pages.Admin['plus-quit'] = function () {
        $('form').submit(function () {
            $(this).find('input:submit').attr('disabled', 'disabled');
        });
    };

})(jQuery);
(function ($) {
    Hatena.Diary.Pages.Admin['refusal'] = function () {
        var RefusedUser = function(name) {
            if (name.length < 2) throw "invalid name";
            this.name = name;
        };
        RefusedUser.prototype = {
            getName: function(){
               return this.name;
            },
            getProfileImage: function() {
                return 'http://cdn1.www.st-hatena.com/users/' + this.getName().substr(0, 2) + '/' + this.getName() + '/profile.gif';
            },
            getURL: function() {
                return 'http://profile.hatena.ne.jp/' + this.getName() + '/';
            },
            getHatenaID: function() {
                return 'id:' + this.getName();
            },
            equals: function(user) {
                return this.name === user.name;
            }
        };
        RefusedUser.loadUserNames = function(userNames) {
            return _.map(userNames, function(name) {
                return new RefusedUser(name);
            });
        };

        var RefusalManager = function() { this.init.apply(this, arguments); };
        RefusalManager.prototype = {
            init: function() {
                this.refusals = [];
            },
            load: function(refusals) {
                this.refusals = refusals;
                $(this).trigger('refusalsChanged');
            },
            add: function(refusal){
                var self = this;
                if (self.isRefused(refusal)) return;

                var refusals = self.refusals.concat(refusal);
                this._save(refusals).done(function() {
                    $(self).trigger('refusalAdded');
                }).fail(function() {
                    $(self).trigger('refusalSaveFailed');
                });
            },
            remove: function(refusal){
                var self = this;
                if (!self.isRefused(refusal)) return;

                var refusals = _.reject(self.refusals, function(target) { return self.isEqual(refusal, target); });
                this._save(refusals).done(function() {
                    $(self).trigger('refusalRemoved');
                }).fail(function() {
                    $(self).trigger('refusalSaveFailed');
                });
            },
            isEqual: function(refusal, other) {
                return refusal === other;
            },
            isRefused: function(refusal){
                var self = this;
                return _.find(this.refusals, function (target) { return self.isEqual(refusal, target); });
            },
            getRefusals: function() {
                return this.refusals;
            },
            _save_url: 'specify this',
            _getSaveParams: function(refusals) {
                throw new Error('implement this');
            },
            _save: function(refusals) {
                var self = this;
                var saved = $.Deferred();
                $.ajax({
                    url: self._save_url,
                    type: 'POST',
                    data: _.extend(self._getSaveParams(refusals), {
                        rkm: Hatena.Diary.data('rkm'),
                        rkc: Hatena.Diary.data('rkc')
                    }),
                    traditional: true,
                    dataType: 'json'
                }).done(function() {
                    self.refusals = refusals;
                    $(self).trigger('refusalsChanged');
                    saved.resolve();
                }).fail(function() {
                    saved.reject();
                });
                return saved;
            }
        };

        var UserRefusalManager = function () { this.init.apply(this, arguments) };
        UserRefusalManager.prototype = {
            getUserNames: function() {
                return _.map(this.refusals, function(user) { return user.getName() });
            },
            isEqual: function(user, other) {
                return user.equals(other);
            },
            _save_url: '/-/refusal/save',
            _getSaveParams: function(users) {
                return {
                    user_names: _.map(users, function(user) { return user.getName() })
                };
            }
        };
        Hatena.Diary.Util.extend(UserRefusalManager.prototype, RefusalManager.prototype);
        

        var IpRefusalManager = function () { this.init.apply(this, arguments); };
        IpRefusalManager.prototype = {
            _save_url: '/-/refusal/save_refused_ips',
            _getSaveParams: function(ips) {
                return { ips: ips };
            }
        };
        Hatena.Diary.Util.extend(IpRefusalManager.prototype, RefusalManager.prototype);
        
        RefusalManagerView = function($container) {
            this.$refusalsContainer = $container.find('.js-refusals-container');
            this.refusalsTemplate = _.template($container.find('.js-refusals-template').html());
            this.$alertAdded = $container.find('.js-alert-added');
            this.$alertRemoved = $container.find('.js-alert-removed');
            this.$alertNotFound = $container.find('.js-alert-not-found');
        };
        RefusalManagerView.prototype = {
            onChanged: function(manager){
                this.$refusalsContainer.html(this.refusalsTemplate({ refusals: manager.getRefusals() }));
            },
            onAdded: function(manager) {
                this.showAlert(this.$alertAdded);
            },
            onRemoved: function(manager) {
                this.showAlert(this.$alertRemoved);
            },
            onNotFound: function(manager) {
                this.showAlert(this.$alertNotFound);
            },
            showAlert: function($alert) {
                _.each([this.$alertAdded, this.$alertRemoved, this.$alertNotFound], function($elem) {
                    $elem.hide();
                });
                $alert.show();
                setTimeout(function() {
                    $alert.fadeOut('slow');
                }, 3000);
            }
        };

        var user_manager = new UserRefusalManager();
        var ip_manager = new IpRefusalManager();
        var user_manager_view = new RefusalManagerView($('.js-refuse-users'));
        var ip_manager_view = new RefusalManagerView($('.js-refuse-ips'));

        $(user_manager).on('refusalsChanged', function() {
            user_manager_view.onChanged(this);
        }).on('refusalAdded', function() {
            user_manager_view.onAdded(this);
        }).on('refusalRemoved', function() {
            user_manager_view.onRemoved(this);
        }).on('refusalSaveFailed', function() {
            user_manager_view.onNotFound(this);
        });

        $(ip_manager).on('refusalsChanged', function() {
            ip_manager_view.onChanged(this);
        }).on('refusalAdded', function() {
            ip_manager_view.onAdded(this);
        }).on('refusalRemoved', function() {
            ip_manager_view.onRemoved(this);
        }).on('refusalSaveFailed', function() {
            ip_manager_view.onNotFound(this);
        });

        // èª­ã¿è¾¼ã¿
        var userNames = $('.js-refused-users-container').data('user-names');
        if (userNames.length > 0) {
            var users = RefusedUser.loadUserNames(userNames.split(','));
            user_manager.load(users);
        }

        var ips = $('.js-refused-ips-container').data('ips');
        if (ips.length > 0) {
            ip_manager.load(ips.split(','));
        }

        var isLikeIpAddress = function (target) {
            // ipv6ã£ã½ã„ã®ã«ã‚‚ä¸€å¿œãƒãƒƒãƒã™ã‚‹ãŒã€å³å¯†ã§ã¯ãªã„
            return (/^(\d{1,3}(\.\d{1,3}){3})|([0-9a-fA-F]{1,4}(:[0-9a-fA-F]{1,4})+)$/).test(target);
        };

        // è¿½åŠ 
        $('.js-refuse-users').on('submit', function (event) {
            event.preventDefault();
            var $input = $('input[name="refusal_input"]');
            var name = $input.val();

            // IPã‚¢ãƒ‰ãƒ¬ã‚¹ã«ã¯å¿…ãš':' '.'ãªã©ã®åŒºåˆ‡ã‚Šè¨˜å·ãŒå«ã¾ã‚Œã‚‹ã®ã§, ã¯ã¦ãªIDã¨ã¯ã¶ã¤ã‹ã‚‰ãªã„
            if (isLikeIpAddress(name)) {
                ip_manager.add(name);
            } else {
                var user;
                try {
                    user = new RefusedUser(name);
                } catch(ignore) {}
                if (user) user_manager.add(user);
            }
            $input.val('').focus();
            return false;
        });

        // å‰Šé™¤
        $('.js-refuse-users').on('click', '.js-delete-refused-user', function () {
            var name = $(this).closest('.refused-user').data('user-name');
            user_manager.remove(new RefusedUser(name));
        });

        $('.js-refuse-ips').on('click', '.js-delete-refusal', function () {
            var ip = $(this).closest('.refused-ip').data('ip');
            ip_manager.remove(ip);
        });
    };

})(jQuery);

(function($){

    Hatena.Diary.Pages.Admin['register'] = function () {
        if (!Hatena.Diary.data('name')) return; // guest

        var dispatcher = Hatena.Diary.Pages.Admin['register'];
        dispatcher.submitButton = $('input[type=submit]');

        var $domain = $(':input[name="domain"]');
        var $blogIdInput = $('input[name="id"]');
        var requestThreshold = 1000;
        dispatcher.STATES = {
            progress: {
                className: 'progress',
                message: $('.domain-check-message.progress')
            },
            available: {
                className: 'check',
                message: $('.domain-check-message.check')
            },
            unavailable: {
                className: 'error',
                message: $('.domain-check-message.error')
            },
            invalid: {
                className: 'invalid',
                message: $('.domain-check-message.invalid')
            },
            invalidLength: {
                className: 'invalid-length',
                message: $('.domain-check-message.invalid-length')
            }
        };

        // ã“ã®Stateã‚’è¦‹ã¦submitButtonã®æœ‰åŠ¹åŒ–ç„¡åŠ¹åŒ–ã‚’è¡Œã†
        dispatcher.inputValidStates = {
            "id" : true,
            "import" : true
        };

        var fetchBlogIdAvailability = function () {
            var blogID = $blogIdInput.val();
            var topdomain = $domain.val();

            if ( ! blogID ) {
                return;
            } else if (blogID.length < 2 || blogID.length > 32) {
                Hatena.Diary.Pages.Admin['register'].changeAvailabilityState({
                    nextState: 'invalidLength'
                });
                return;
            } else if (! /^[a-zA-Z0-9][a-zA-Z0-9\-]+$/.test(blogID)) {
                Hatena.Diary.Pages.Admin['register'].changeAvailabilityState({
                    nextState: 'invalid'
                });
                return;
            }

            var brand_name = $('[data-brand-name]').attr('data-brand-name');
            $.ajax({
                url: '/api/blog/domain_registry',
                dataType: 'json',
                data: {
                    blog_ids: JSON.stringify([blogID]),
                    brand_name: brand_name
                }
            }).done(function (data) {
                var domain_statuses = data[blogID];

                if (domain_statuses !== undefined) {
                    dispatcher.checkBlogIdAvailability({
                        blogID: blogID,
                        topdomain: topdomain,
                        statuses: domain_statuses
                    });
                }
            });
        };

        fetchBlogIdAvailability();

        $domain.change(fetchBlogIdAvailability);
        $blogIdInput.
            keyup(_.debounce(fetchBlogIdAvailability, requestThreshold)).
            keyup(function () {
                dispatcher.changeAvailabilityState({
                    nextState: 'progress'
                });
            });

        var fillinDefault = function() {
            var user_name = Hatena.Diary.data('name').toLowerCase().replace(/_/, '-');
            var brand_name = $('[data-brand-name]').attr('data-brand-name');
            $.ajax({
                url: '/api/blog/domain_registry',
                dataType: 'json',
                data: {
                    blog_ids: JSON.stringify([user_name]),
                    brand_name: brand_name
                }
            }).done(function (data) {
                var domain_statuses = data[user_name];

                if (typeof domain_statuses === 'undefined' || typeof domain_statuses === null) {
                    domain_statuses = {};
                }

                var available_domains = Hatena.Diary.Pages.Admin['register'].availableDomains(domain_statuses);

                if (_.any(available_domains)) {
                    var $domain = $(':input[name="domain"]');
                    var current_domain = $domain.val();
                    if (! _.include(available_domains, current_domain)) {
                        $domain.val(available_domains[0]);
                    }

                    var idInput = $('input[name=id]');
                    if (idInput.val() === '') {
                        // idãŒç©ºã®ã¨ãuseråã‹ã‚‰ãƒ•ã‚£ãƒ«ã‚¤ãƒ³
                        idInput.val(user_name);
                        Hatena.Diary.Pages.Admin['register'].changeAvailabilityState({
                            nextState: 'available'
                        });
                    }
                }
            });
        };

        fillinDefault();

        if ($('input[name=import]').length) {
            $('input[name=permission],input[name=import]').change(function () {
                dispatcher.changeImportAvailabilityState();
            });
            $('.import-error').hide();
            dispatcher.changeImportAvailabilityState();
        }
    };

    Hatena.Diary.Pages.Admin['register'].changeAvailabilityState = function (args) {
        var dispatcher = Hatena.Diary.Pages.Admin['register'];
        var nextState = args.nextState;

        if (nextState == 'unavailable' || nextState == 'invalid' || nextState == 'invalidLength') {
            dispatcher.inputValidStates['id'] = false;
        }
        else {
            dispatcher.inputValidStates['id'] = true;
        }
        dispatcher.changeSubmitButtonState();

        _.each(Hatena.Diary.Pages.Admin['register'].STATES, function (value, key) {
            if (key === nextState) {
                value.message.show();
            } else {
                value.message.hide();
            }
        });
    };

    Hatena.Diary.Pages.Admin['register'].checkBlogIdAvailability = function (args) {
        var topdomain = args.topdomain;
        var blogID    = args.blogID;
        var statuses  = args.statuses;

        var inputState = statuses[topdomain];
        var availableDomains = Hatena.Diary.Pages.Admin['register'].availableDomains(statuses);

        if (inputState === 'unavailable' && _.any(availableDomains)) {
            Hatena.Diary.Pages.Admin['register'].suggestAlternativeDomainNames({
                blogID: blogID,
                availableDomains: availableDomains
            });
        }

        Hatena.Diary.Pages.Admin['register'].changeAvailabilityState({
            nextState: inputState
        });
    };

    Hatena.Diary.Pages.Admin['register'].suggestAlternativeDomainNames = function (args) {
        var blogID = args.blogID;
        var availableDomains = args.availableDomains;
        var $message = $('.domain-recommend');
        var $domain = $(':input[name="domain"]');

        $('.requested-blog-id').text(blogID);

        $message.find('ul').detach();
        var $alternatives = $('<ul/>');
        _.each(availableDomains, function (domain) {
            $('<li/>').
                text(blogID + '.' + domain).
                click(function () { $domain.val(domain).change() }).
                appendTo($alternatives);
        });
        $message.append($alternatives).show();
    };

    // domain_statuses = {
    //   $domain: 'available' || 'unavailable' || 'invalid'
    //   ...
    // }
    Hatena.Diary.Pages.Admin['register'].availableDomains = function (domain_statuses) {
        var domains = _.keys(domain_statuses);
        var availableDomains = _.select(domains, function (domain) { return domain_statuses[domain] === 'available'; });

        return availableDomains;
    };

    Hatena.Diary.Pages.Admin['register'].changeImportAvailabilityState = function (args) {
        var dispatcher = Hatena.Diary.Pages.Admin['register'];

        var $checkedPermission = $('input[name=permission]:checked');
        var $selectedImport    = $('input[name=import]:checked');

        var blogPermission  = $checkedPermission.val();
        var diaryPermission = $selectedImport.attr('data-permission');

        var $errorMessage = $('.import-error');
        if (diaryPermission == 'private' && blogPermission == 'public') {
            $errorMessage.show();
            dispatcher.inputValidStates['import'] = false;
            dispatcher.changeSubmitButtonState();
        }
        else {
            $errorMessage.hide();
            dispatcher.inputValidStates['import'] = true;
            dispatcher.changeSubmitButtonState();
        }
    };

    Hatena.Diary.Pages.Admin['register'].changeSubmitButtonState = function (args) {
        var dispatcher = Hatena.Diary.Pages.Admin['register'];
        var submitButton = dispatcher.submitButton;

        var shouldEnabled = _.every(dispatcher.inputValidStates, function (valid) {
            return valid;
        });

        if (shouldEnabled) {
            submitButton.attr('disabled', false);
            submitButton.removeClass('disabled');
            submitButton.addClass('btn-blue');
        }
        else {
            submitButton.attr('disabled', true);
            submitButton.removeClass('btn-blue');
            submitButton.addClass('disabled');
        }
    };

})(jQuery);

(function($){

    Hatena.Diary.Pages.Admin['register-iframe'] = function () {
        if (!Hatena.Diary.data('name')) return; // guest

        var fillinDefault = function() {
            var user_name = Hatena.Diary.data('name').toLowerCase().replace(/_/, '-');
            var idInput = $('input[name=id]');
            if (idInput.val() === '') {
                // idãŒç©ºã®ã¨ãuseråã‹ã‚‰ãƒ•ã‚£ãƒ«ã‚¤ãƒ³
                idInput.val(user_name);
            }
        };

        fillinDefault();
    };

})(jQuery);
(function($){

    Hatena.Diary.Pages.Admin['store-theme-new'] = function () {
        var $availableLicenses = $('.available-licenses');
        var $showAvailableLicenses = $('.show-more').find('a');
        var expandAvailableLicenses = function () {
            $availableLicenses.show();
            $availableLicenses.attr('data-collapsed', 0);
            $showAvailableLicenses.text($showAvailableLicenses.attr('data-collapse-message'));
        };
        var collapseAvailableLicenses = function () {
            $availableLicenses.hide();
            $availableLicenses.attr('data-collapsed', 1);
            $showAvailableLicenses.text($showAvailableLicenses.attr('data-expand-message'));
        };

        $availableLicenses.hide();

        $showAvailableLicenses.on('click', function (e) {
            if ($availableLicenses.attr('data-collapsed') === '1') {
                expandAvailableLicenses();
            } else {
                collapseAvailableLicenses();
            }
            e.preventDefault();
        });

        $('.deed').hide();
        $('.show-deed').on('click', function (e) {
            $($(this).attr('data-target-selector')).toggle();
            return false;
        });

        // é¸æŠã—ã¦ã‚‹ã‚„ã¤ãŒéš ã‚Œã¦ãŸã‚‰è¦‹ã›ã‚‹
        if ($('input[name=license]:checked').is(':visible') === false) {
            $showAvailableLicenses.click();
        }
    };

})(jQuery);
(function($){

    Hatena.Diary.Pages.Admin['store-theme-theme_id'] = function () {
        if (Hatena.Star) {
            Hatena.Star.SiteConfig = {
                entryNodes: {
                    '#container' : {
                        uri: 'a.permalink',
                        title: 'h1.theme-name',
                        container: '.star-container'
                    }
                }
            };
        }

        var self = Hatena.Diary.Pages.Admin['store-theme-theme_id'];
        self.$themeContainer = $('#store-container');
        self.$installDialog = $('.blog-title-dropdown-window');
        self.$installButton = $('#sidebar').find('.install-theme-btn');

        self.$installDialog.hide();
        self.$installButton.click(function () {
            self.$installDialog.slideToggle();
        });

        $('#theme-detail-tabs').tabs({ active : 0});
    };

})(jQuery);
(function($){

    Hatena.Diary.Pages.Admin['topic-show'] = function () {
        $('#topic-entries-tabs').tabs({ active : 0 });
    };

})(jQuery);
(function($){

    Hatena.Diary.Pages.Admin['user-blog-about_config'] = function () {
        var table = $('#about-config');
        var form  = $('#form-edit');
        var key   = $('#key');
        var value = $('#value');
        var del   = $('#delete-button');

        function update (key, value) {
            var tr = table.find('tr[data-key="' + key + '"]');
            if (!tr.length) {
                tr = $('<tr><th></th><td></td></tr>');
            }

            tr.attr({
                'data-key' : key,
                'data-value' : value
            });
            tr.find('th').text(key);
            tr.find('td').text(value);

            if (!tr.parent().length) table.find('tbody').append(tr);
        }

        form.submit(function (e) {
            e.preventDefault();

            $.ajax({
                url : form.attr('action'),
                type : 'post',
                dataType : 'json',
                data: form.serialize(),
                success : function (data) {
                    update(data.key, data.value);
                    form.hide();
                }
            });
        });

        del.click(function (e) {
            $.ajax({
                url : form.attr('action'),
                type : 'post',
                dataType : 'json',
                data: form.serialize() + '&delete=1',
                success : function (data) {
                    update(data.key, data.value);
                    form.hide();
                }
            });
        });

        $('#button-new-value').click(function () {
            key.val('');
            value.val('');
            del.hide();
            form.show();
            key.focus();
        });

        table.find('td').on('click', function () {
            var tr = $(this).parent();

            key.val(tr.attr('data-key'));
            value.val(tr.attr('data-value'));
            del.show();
            form.show();
            value.focus();
        });
    };

})(jQuery);

(function($){

    Hatena.Diary.Pages.Admin['user-blog-accesslog'] = function () {
        var table = $('#access-counts').remove();
        var counts = {};
        table.find('tr').each(function () {
            var $this = $(this);
            var time  = +$this.find('td[data-time]').attr('data-time');
            var count = +$this.find('td[data-count]').attr('data-count');
            counts[time] = count;
        });

        AccessLog.showGraph(counts, {
            parent : $('#access-counts-daily'),
            timeformat : '%m/%d',
            minTickSize : [1, 'day'],
            unit   : 24 * 60 * 60 * 1000,
            number : 31
        });

        AccessLog.showGraph(counts, {
            parent : $('#access-counts-hourly'),
            timeformat : '%d %H:%M',
            minTickSize : [1, 'hour'],
            unit   : 60 * 60 * 1000,
            number : 48
        });

        $('#access-counts-tabs').tabs({ active : 0 });

        $('#summary-detail-tabs').tabs({ active : 0 });

        $('.summary-box .hosts').delegate('.host', 'click', function() {
            $('.summary-box .hosts .selected').removeClass('selected');
            $(this).addClass('selected');

            var host = $(this).attr('data-site-host');
            $('.summary-box .site.selected').removeClass('selected');
            $('.summary-box .sites').find('*[data-site-host="' + host + '"]').addClass('selected');
            return false;
        });
    };
})(jQuery);

(function($){

    Hatena.Diary.Pages.Admin['user-blog-categories'] = function () {
        var openRenameModalWindow = function(category_name) {
            var $modal = $('.js-rename-modal-window[data-category-name="' + category_name + '"]');
            if ($modal.is(':visible')) return;
            Hatena.Diary.Window.show($modal, {});
            $modal.find(':text').val(category_name).focus()[0].select();
        };
        $(document).on('click', '.js-show-rename-modal-window', function(event) {
            var category_name = $(event.target).attr('data-category-name');
            openRenameModalWindow(category_name);
        });

        // Hatena.Diary.Windowã¯ï¼Œdocumentã‚’clickã™ã‚‹ã¨ï¼ŒhideAllã™ã‚‹ï¼
        // .js-rename-modal-windowã‹ã‚‰å¤–ã«clickã‚¤ãƒ™ãƒ³ãƒˆã‚’ä¼æ’­ã•ã›ãªã„ãŸã‚ï¼Œã“ã“ã§æ­¢ã‚ã‚‹ï¼
        // ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦å†…ã®clickã‚¤ãƒ™ãƒ³ãƒˆã‚’document.on ã¨ã‹ã§å¾…ã£ã¦ã„ã¦ã‚‚ï¼Œã“ã“ã§æ­¢ã‚ã¦ã„ã‚‹ã®ã§ï¼Œ
        // éåŠ¹ç‡ã§ã¯ã‚ã‚‹ãŒï¼Œcloseãƒœã‚¿ãƒ³ãªã©å€‹åˆ¥ã«ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ã‚’è¨­å®šã—ã¦ã„ã‚‹ï¼
        // ãƒœã‚¿ãƒ³ã®æ•°ã¯ã‚ã¨ã‹ã‚‰å¢—ãˆãªã„ã®ã§ï¼Œã“ã‚Œã§å•é¡Œãªã„ï¼
        $('.js-rename-modal-window .js-icon-close').on('click', function() {
            Hatena.Diary.Window.hideAll();
        });
        $('.js-rename-modal-window').on('click', function(event) {
            event.stopPropagation();
        });
    };

})(jQuery);

(function($){

    Hatena.Diary.Pages.Admin['user-blog-comment-delete-deleted'] = function () {
        Hatena.Diary.Pages.createForParent();
        Hatena.Diary.Pages.send('delete');
    };

})(jQuery);

(function($){

    Hatena.Diary.Pages.Admin['user-blog-comment-delete'] = function () {
        Hatena.Diary.Pages.createForParent();
    };

})(jQuery);
(function($){

Hatena.Diary.Pages.Admin['user-blog-comment-done'] = function () {
    Hatena.Diary.Pages.createForParent();

    var comment = document.getElementById('posted').value;

    Hatena.Diary.Pages.send('update', { comment : comment });

    Hatena.Diary.Pages.send('close');
};

})(jQuery);

(function($){

    Hatena.Diary.Pages.Admin['user-blog-comment'] = function () {
        Hatena.Diary.Pages.createForParent();
        Hatena.Diary.Pages.Admin['user-blog-comment'].focusTextArea();
        Hatena.Diary.Util.sendResizeRequest();

        var formState = new Hatena.Diary.FormState();
        var form = $('#comment-form');
        formState.observeForm(form);
        form.bind('change', function () {
            formState.checkFormState();
        });
    };

    Hatena.Diary.Pages.Admin['user-blog-comment'].focusTextArea = function () {
        // IE9ã§focusã§ããªã„ã“ã¨ãŒã‚ã‚‹ã®ã§æ™‚é–“ã‚’ç½®ã„ã¦ä½•åº¦ã‚‚è©¦ã™
        try {
            $('#body').focus();
        } catch (e) {
            setTimeout(Hatena.Diary.Pages.Admin['user-blog-comment'].focusTextArea, 100);
        }
    };

})(jQuery);

(function($){
    Hatena.Diary.Pages.Admin['user-blog-comments'] = function () {
        $('button[name="mode"][value="delete"]').click(function () {
            return confirm(Hatena.Locale.text('admin.comments.delete.confirm'));
        });

        Hatena.Diary.Util.updateDynamicPieces($('.js-comments-table'));
    };

})(jQuery);
(function($){
    Hatena.Diary.Pages.Admin['user-blog-config'] = function () {
        Hatena.Diary.Util.loadNicknames($('.profile'));
    };
})(jQuery);

(function($){

    // ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ç½®ãå ´(å…¨ä½“ã®ã‚µã‚¤ãƒ‰ãƒãƒ¼ã€ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã®ãƒ¡ã‚¤ãƒ³ã‚«ãƒ©ãƒ ãªã©)ã«ä»˜ãã²ã¨ã¤ã§ãã‚‹
    // $elementã¯div[data-modules-type="sidebar"].sidebar-boxãªã©
    // editorã¯ ModuleEditorã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹
    var Modules = function($element, editor) {
        var self = this;
        self.$element = $element;
        self.editor = editor;
        self.init();
    };

    Modules.prototype = {
        init: function() {
            var self = this;

            // "sidebar"ãªã©ï¼Œã“ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ç½®ãå ´ã®ä½ç½®
            self.position = self.$element.attr('data-modules-type');

            self.modules = [];

            // è¿½åŠ ãƒœã‚¿ãƒ³æŠ¼ã—ãŸã‚‰ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«è¿½åŠ 
            self.$element.on('click', '.js-add-module', function() {
                self.addNewModule();
                return false;
            });

            self.$element.find('.module').each(function() {
                self.addModuleFromElement($(this));
            });

            // ä¸¦ã¹æ›¿ãˆå¯èƒ½ã«ã™ã‚‹ï¼çµ‚ã‚ã£ãŸã‚‰update
            self.$element.find('.modules').sortable({
                containment: 'parent',
                stop: function() {
                    self.onSorted();
                }
            });
        },
        // æ—¢å­˜ã®DOMè¦ç´ ã‹ã‚‰ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½œã‚Šç›£è¦–ã‚’å§‹ã‚ã‚‹
        addModuleFromElement: function($element) {
            var self = this;
            var module = new Module($element);
            self.awareModule(module);
            module.render();
        },
        // ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ã‚¤ãƒ™ãƒ³ãƒˆã‚’ç›£è¦–ã™ã‚‹
        awareModule: function(module) {
            var self = this;
            self.modules.push(module);
            $(module).on('removed', function() {
                self.onModuleRemoved(module);
            }).on('updated', function() {
                self.onUpdated();
            }).on('edit', function() {
                self.editModule(module);
            });
        },
        // ä¸¦ã³é †ãŒå¤‰ã‚ã£ãŸã‚‰self.modulesã‚‚è¿½å¾“ã™ã‚‹ï¼DOMã‹ã‚‰.modulesã‚’å–ã£ã¦ãã¦ï¼ŒgetElementã—ã¦è¦ç´ ãŒä¸€è‡´ã—ãŸã‚‚ã®ã‚’é¸ã¶ï¼
        onSorted: function() {
            var self = this;

            var sortedModules = self.$element.find('.module').map(function() {
                var element = this;

                var matchedModule = _.find(self.modules, function(module) {
                    return module.getElement()[0] === element;
                });

                return matchedModule;
            }).toArray();

            self.modules = sortedModules;

            self.onUpdated();
        },
        // ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒæ¶ˆãˆãŸã‚‰ï¼Œmodulesã‹ã‚‰æ¶ˆã—ã¦ï¼Œupdatedãƒ¡ã‚½ãƒƒãƒ‰ã‚’ç™ºè¡Œ
        onModuleRemoved: function(module) {
            var self = this;
            self.modules = _.difference(self.modules, [module]);
            self.onUpdated();
        },
        // æ—¢å­˜ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ç·¨é›†ï¼editorã®å‘¼ã³å‡ºã—ï¼Œå®Œäº†æ™‚ã«æ›´æ–°ï¼Œå¤±æ•—ã—ãŸã‚‰ä½•ã‚‚ã—ãªã„
        editModule: function(module) {
            var self = this;
            var session = self.editor.editModule(module);
            module.setAsSelected();
            session.done(function(data) {
                // data ã®æ›´æ–°
                module.update(data.type, data.title, data.value);
            }).always(function() {
                module.unsetAsSelected();
            });
        },
        // æ–°ã—ã„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’è¿½åŠ ã™ã‚‹ï¼DOMã®è¿½åŠ ï¼Œeditorã®å‘¼ã³å‡ºã—ï¼Œå®Œäº†æ™‚ã«æ›´æ–°ï¼Œå¤±æ•—ã—ãŸã‚‰æ¶ˆã™
        addNewModule: function() {
            var self = this;
            var module = Module.initializeWithModulesPosition(self.position);
            module.setAsNewModule();
            module.setAsSelected();
            self.$element.find('.modules').append(module.getElement());
            var session = self.editor.editNewModule(module);
            session.done(function(data) {
                self.awareModule(module);
                module.update(data.type, data.title, data.value);
                module.unsetAsNewModule();
                module.unsetAsSelected();
            }).fail(function() {
                module.remove();
            });
        },
        // updatedã‚¤ãƒ™ãƒ³ãƒˆã‚’ç™ºè¡Œã™ã‚‹ï¼å¤–ã§å¾…ã¡æ§‹ãˆã¦ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®æ›´æ–°ãªã©ã‚’è¡Œã†
        onUpdated: function() {
            var self = this;
            $(self).triggerHandler('updated');
        }
    };

    // ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«1ã¤ã‚’è¡¨ã™ï¼$elementã¯.module
    var Module = function($element) {
        var self = this;
        self.$element = $element;
        self.init();
    };

    Module.prototype = {
        init: function() {
            var self = this;

            // ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯ï¼Œtype, title, valueã®çµ„ã§è¡¨ã•ã‚Œã‚‹ï¼
            // typeã¯ï¼Œ"profile"ã¨ã‹ï¼
            // titleã¯ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ã‚¿ã‚¤ãƒˆãƒ«
            // valueã¯Object

            self.type = self.$element.find('input.js-module-type').val();
            self.title = self.$element.find('input.js-module-title').val();
            self.value = {};
            try {
                self.value = JSON.parse(self.$element.find('input.js-module-value').val());
            } catch(ignore) {}

            self.$element.on('click', '.js-edit-module', function() {
                self.edit();
                return false;
            }).on('click', '.js-remove-module', function() {
                if ( confirm(Hatena.Locale.text('blog.confirm.delete')) ) {
                    self.remove();
                }
                return false;
            });
        },
        // editã‚¤ãƒ™ãƒ³ãƒˆã‚’ç™ºè¡Œã™ã‚‹
        // modulesãŒã“ã®ã‚¤ãƒ™ãƒ³ãƒˆã‚’è¦‹ã¦ç·¨é›†UIã‚’å‡ºã™
        edit: function() {
            var self = this;
            $(self).trigger('edit');
        },
        // elementã‚’æ¶ˆã—ï¼Œremovedã‚¤ãƒ™ãƒ³ãƒˆã‚’ç™ºè¡Œã™ã‚‹
        // modulesãŒã“ã®ã‚¤ãƒ™ãƒ³ãƒˆã‚’è¦‹ã¦ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æ›´æ–°ã—ã¦ãã‚Œã‚‹
        remove: function() {
            var self = this;
            self.$element.remove();
            $(self).triggerHandler('removed');
        },
        // æŒ‡å®šã•ã‚ŒãŸå€¤ã«æ›´æ–°ã—æç”»
        update: function(type, title, value) {
            var self = this;
            self.type = type;
            self.title = title;
            self.value = value;
            self.render();
            $(self).trigger('updated');
        },
        // æ–°ãŸã«è¿½åŠ ä¸­ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼Ÿ
        isNewModule: function() {
            return this.isNew;
        },
        // æ–°ãŸã«è¿½åŠ ä¸­ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«çŠ¶æ…‹ã«ã™ã‚‹
        setAsNewModule: function() {
            this.isNew = true;
            this.$element.addClass('created');
        },
        // æ–°ãŸã«è¿½åŠ ä¸­ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«çŠ¶æ…‹ã‚’è§£é™¤ã™ã‚‹
        unsetAsNewModule: function() {
            this.isNew = false;
            this.$element.removeClass('created');
        },
        // ç·¨é›†ä¸­(é¸æŠä¸­)ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«çŠ¶æ…‹ã«ã™ã‚‹
        setAsSelected: function() {
            this.$element.addClass('selected');
        },
        // ç·¨é›†ä¸­(é¸æŠä¸­)ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«çŠ¶æ…‹ã‚’è§£é™¤ã™ã‚‹
        unsetAsSelected: function() {
            this.$element.removeClass('selected');
        },
        // æç”»ï¼æ—¢å­˜ã®elementã‚’æ›¸ãæ›ãˆã‚‹ï¼
        // inputã®è¨­å®šï¼Œã‚¯ãƒ©ã‚¹ã®è¿½åŠ ï¼Œè¡¨ç¤ºç”¨ã®ãƒ©ãƒ™ãƒ«ã®è¨­å®š
        render: function() {
            var self = this;
            self.$element.find('input.js-module-type').val(self.getType());
            self.$element.find('input.js-module-title').val(self.getTitle());
            self.$element.find('input.js-module-value').val(self.getValueAsJSON());
            self.$element.addClass(self.getType()); // ã“ã®ã‚¯ãƒ©ã‚¹ã¯ä½•ã®ãŸã‚ã«ä½¿ã£ã¦ã„ã‚‹ï¼Ÿ
            self.$element.find('.title, .clipped-content').text(self.getTitleForPreview());
        },
        getType: function() {
            return this.type;
        },
        getTitle: function() {
            return this.title;
        },
        getValue: function() {
            return this.value;
        },
        getElement: function() {
            return this.$element;
        },
        // è¡¨ç¤ºç”¨ã®ã‚¿ã‚¤ãƒˆãƒ«ï¼ã‚¿ã‚¤ãƒˆãƒ«ã‹ï¼ŒHTMLãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ã¨ãã¯æœ¬æ–‡ã®å…ˆé ­ã‹ï¼ŒHTMLãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ã¨ãã¯"HTML"
        getTitleForPreview: function() {
            var self = this;
            var title = self.getTitle();
            if (!title && self.getType() === 'html') {
                title = self.removeTag(self.value['module-value'] || '') || Hatena.Locale.text('blog.module.html');
            }
            return title;
        },
        // valueã¯ï¼Œinputã«ã¯JSONåŒ–ã—ã¦æ ¼ç´ã™ã‚‹
        getValueAsJSON: function() {
            var self = this;
            return JSON.stringify(self.value);
        },
        // HTMLãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ã‚¿ã‚¤ãƒˆãƒ«ãŒãªã„ã¨ãæœ¬æ–‡ã‚’è¡¨ç¤ºã™ã‚‹
        removeTag: function(html) {
            return html.replace(/<.*?>/g, '');
        }
    };

    // DOMã«å±ã•ãªã„æ–°ãŸãªãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½œã£ã¦è¿”ã™
    // modulesType: "sidebar"ãªã©ï¼Œãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®é…ç½®ã•ã‚Œã‚‹å ´æ‰€
    Module.initializeWithModulesPosition = function(position) {
        var template = $('.new-module-template').html();
        var module_html = _.template(template, {position: position});
        var $element = $($.parseHTML(module_html));
        var self = new Module($element);
        return self;
    };

    // moduleã®ç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦
    // ç·¨é›†ã¨è¿½åŠ ã§DOMã¯å…±é€šã§ï¼Œhide-radiosã¨ã„ã†ã‚¯ãƒ©ã‚¹ã‚’ä»˜ä¸ã™ã‚‹ã¨ï¼Œãƒ‘ãƒãƒ«é¸æŠUIãŒæ¶ˆãˆã‚‹
    var ModuleEditor = function($modalWindow) {
        var self = this;
        self.$modalWindow = $modalWindow;

        // $modalWindowã¯position: relativeå†…ã«å…¥ã£ã¦ã‚‹ï¼overlayã¯ç”»é¢å…¨ä½“ã‚’è¦†ã£ã¦ã»ã—ã„ã®ã§ï¼Œbodyã®æœ«å°¾ã«appendã—ç›´ã™
        self.$modalWindow.appendTo(document.body);

        self.$dialogBox     = self.$modalWindow.find('.dialog-box'); // ãƒ¢ãƒ¼ãƒ€ãƒ«ã§å‡ºã¦ãã‚‹boxã®æœ¬ä½“
        self.$dialogOverray = self.$modalWindow.find('.dialog-overray');
        self.$applyButton   = self.$modalWindow.find('.submit button.apply');
        self.$cancelButton  = self.$modalWindow.find('.submit button.cancel');
        self.$radios        = self.$modalWindow.find('.radios');

        // sessionã¯ãƒ¢ãƒ¼ãƒ€ãƒ«è¡¨ç¤ºä¸­ã«æœ‰åŠ¹ï¼ä¿å­˜ã§resolveï¼Œã‚­ãƒ£ãƒ³ã‚»ãƒ«ã§reject
        // åˆå›ã ã‘sessionãªã„ã¨é›£ã—ã„ã®ã§ï¼Œãƒ€ãƒŸãƒ¼ã®å€¤ã‚’å…¥ã‚Œã¦ãŠã
        self.session = $.Deferred();
        self.session.reject();

        self.init();
    };

    ModuleEditor.prototype = {
        init: function() {
            var self = this;

            // æ–°è¦ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«è¿½åŠ æ™‚ã¯ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ã‚¿ã‚¤ãƒ—ã‚’é¸ã¹ã‚‹ã®ã§ï¼Œchangeã‚¤ãƒ™ãƒ³ãƒˆã‚’è¦‹ã‚‹
            self.$radios.find('input:radio').change(function() {
                var $checked = self.$radios.find('input:radio:checked');
                var type    = $checked.val();
                self.selectPanelByType(type);
            });

            // IEã§ã¯changeã‚¤ãƒ™ãƒ³ãƒˆãŒç™ºè¡Œã•ã‚Œãªã„ã®ã§ï¼Œclickã‚¤ãƒ™ãƒ³ãƒˆã‚’è¦‹ã‚‹
            self.$modalWindow.find('.radio').click(function() {
                var type = $(this).find('input:radio').val();
                self.selectPanelByType(type);
            });

            // ãƒªãƒ³ã‚¯ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼Œãƒªãƒ³ã‚¯ã‚’1è¡Œè¿½åŠ 
            self.$modalWindow.find('#module-value-component-link').each(function() {
                var $linkModule = $(this);
                $linkModule.find('#add-link-input-button').click(function() {
                    var $linkInput = $linkModule.find('.link-input').eq(0).clone();
                    $linkInput.find(':input').val('');
                    $linkInput.insertAfter($linkModule.find('.link-input').eq(-1));

                    var $scrolled = self.$modalWindow.find('.module-value-box-inner');
                    $scrolled.scrollTop($scrolled[0].scrollHeight);
                });
            });

            // ãƒªãƒ³ã‚¯ã‚’å‰Šé™¤
            self.$modalWindow.delegate('.delete-link-input-button', 'click', function() {
                // è¿½åŠ ã™ã‚‹ã¨ãï¼Œ1ä»¶ç›®ã‚’cloneã™ã‚‹ã®ã§ï¼Œæœ€å¾Œã®1ä»¶ã ã‘ã¯æ¶ˆã›ãªã„ã‚ˆã†ã«ãªã£ã¦ã‚‹ï¼
                if (self.$modalWindow.find('.link-input').length > 1) {
                    $(this).closest('.link-input').remove();
                }
                return false;
            });

            // ã‚»ãƒƒã‚·ãƒ§ãƒ³çµ‚äº†ã‚¤ãƒ™ãƒ³ãƒˆã®ç›£è¦–
            self.$applyButton.click(function() { self.applyEdit() });
            self.$dialogOverray.click(function() { self.cancelEdit() });
            self.$cancelButton.click(function() { self.cancelEdit() });
            $(window).keyup(function (e) {
                if (keyString(e) == 'S-ESC') { self.cancelEdit() }
            });

            // ã‚«ãƒ†ã‚´ãƒªãƒ¼ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
            self.$modalWindow.find('.js-categories-order-type').change(function () {
                $(self).triggerHandler('change-category-order-type');
            });
        },
        // æ–°è¦ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«è¿½åŠ 
        editNewModule: function(module) {
            var self = this;
            self.session.reject();
            self.session = $.Deferred();
            self.editingModule = module;

            self.setupValues();

            // è¿½åŠ ã®ã¨ãã¯createdã‚¯ãƒ©ã‚¹ã‚’è¶³ã—ï¼Œhide-radiosã‚¯ãƒ©ã‚¹ã‚’æ¶ˆã—ï¼Œã‚­ãƒ£ãƒ³ã‚»ãƒ«ãƒœã‚¿ãƒ³ã‚’éš ã™
            self.$modalWindow.addClass('created').removeClass('hide-radios');
            self.$cancelButton.show();

            self.show();

            return self.session.promise();
        },
        // æ—¢å­˜ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ç·¨é›†
        editModule: function(module) {
            var self = this;
            self.session.reject();
            self.session = $.Deferred();
            self.editingModule = module;

            self.setupValues();

            // ç·¨é›†ã®ã¨ãã¯createdã‚¯ãƒ©ã‚¹ã‚’æ¶ˆã—ï¼Œhide-radiosã‚¯ãƒ©ã‚¹ã‚’è¶³ã—ï¼Œã‚­ãƒ£ãƒ³ã‚»ãƒ«ãƒœã‚¿ãƒ³ã‚’éš ã™
            self.$modalWindow.removeClass('created').addClass('hide-radios');
            self.$cancelButton.hide();

            self.selectPanelByType(module.getType());

            self.show();

            self.fillValuesFromModule(module);

            // ã‚«ãƒ†ã‚´ãƒªãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯æ—¢å®šã®order_typeã§ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’ã‚»ãƒƒãƒˆ
            // module.value['order_type']
            $(self).triggerHandler('edit-new-module');

            return self.session.promise();
        },
        // æŒ‡å®šã•ã‚ŒãŸtypeã®ãƒ‘ãƒãƒ«ã‚’é¸æŠã—ï¼Œè¡¨ç¤ºã™ã‚‹
        // type: "profile", "html"ãªã©
        selectPanelByType: function(type) {
            var self = this;

            self.$radios.find('.radio').removeClass('selected');
            var $selected_label = self.$radios.find('.radio.module-' + type).closest('.radio');
            $selected_label.addClass('selected');
            // propã§ã¯changeã‚¤ãƒ™ãƒ³ãƒˆãŒç™ºç«ã—ãªã„ã“ã¨ã«ã‚ˆã£ã¦ç„¡é™ãƒ«ãƒ¼ãƒ—ã›ãšã«æ¸ˆã‚“ã§ã‚‹
            $selected_label.find('input:radio').prop('checked', true);

            self.$modalWindow.find('.module-value-component').hide();
            self.$modalWindow.find('#module-value-component-' + type).show();
        },
        // ç¾åœ¨é¸æŠä¸­ã®ãƒ‘ãƒãƒ«ã®typeã‚’è¿”ã™ï¼æœªé¸æŠãªã‚‰null
        getSelectedPanelType: function() {
            var self = this;
            var $selected = self.$radios.find('input:enabled:checked');
            if ($selected.length) {
                return $selected.val();
            } else {
                return null;
            }
        },
        // ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦å†…ã®inputã‚’åˆæœŸçŠ¶æ…‹ã«æˆ»ã™ï¼
        // ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã¯1ã¤ã ã‘å­˜åœ¨ã—ï¼Œä½¿ã„å›ã•ã‚Œã‚‹ã®ã§ï¼ŒåˆæœŸåŒ–ã—ãªã„ã¨ï¼Œå‰å›ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ç·¨é›†å†…å®¹ãŒå‡ºã¦ãã‚‹ã“ã¨ã«ãªã‚‹ï¼
        setupValues: function() {
            var self = this;

            // textã‚’ç©ºã«ã™ã‚‹
            self.$modalWindow.find('textarea, input[type=text], input[type=number]').val('');
            // ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã®ãƒã‚§ãƒƒã‚¯ã‚’å¤–ã™
            self.$modalWindow.find('input[type=checkbox]').prop('checked', false);

            // ã‚»ãƒ¬ã‚¯ãƒˆãƒœãƒƒã‚¯ã‚¹ã®å€¤ã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã«åˆæœŸåŒ–ã™ã‚‹
            // ã‚‚ã—ã‚‚ã€Œdata-default-optionã€å±æ€§ã§ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®å€¤ãŒæŒ‡å®šã•ã‚Œã¦ã„ã‚‹å ´åˆã¯ãã‚Œã«å¾“ã†
            self.$modalWindow.find('select').each(function () {
                if( $(this).attr('data-default-option') ) {
                    // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ãŒè¨­å®šã•ã‚Œã¦ã„ãŸå ´åˆ
                    $(this).val( $(this).attr('data-default-option') );
                } else {
                    // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã®è¨­å®šãŒãªã„å ´åˆã¯ï¼Œä¸€ç•ªåˆã‚ã®è¦ç´ ã‚’é¸æŠçŠ¶æ…‹ã«ã™ã‚‹
                    $(this).find('option:first').prop('selected', true);
                }
            });

            // ãªã«ã‚‚é¸æŠã•ã‚Œã¦ã„ãªã‹ã£ãŸã‚‰ï¼Œæœ€åˆã®ãƒšã‚¤ãƒ³ã‚’é¸æŠ
            if (!self.getSelectedPanelType()) {
                self.selectPanelByType('profile');
            }
        },
        // ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’è¡¨ç¤ºã™ã‚‹
        show: function() {
            var self = this;

            // ã‚µã‚¤ãƒ‰ãƒãƒ¼å†…ã‚’ä¸‹ã¾ã§ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã—ã¦è¿½åŠ ã—ãŸè¦ç´ ã‚’è¦‹ã›ã‚‹
            var $scrolled = $('#tab-customize');
            $scrolled.scrollTop($scrolled[0].scrollHeight);

            self.$modalWindow.show();
            self.setPosition();
            self.$dialogBox.find('input[type=text]:visible:first').focus();
        },
        // ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’ä¸­å¤®æƒãˆã«ã™ã‚‹
        setPosition: function() {
            var self = this;
            var winHeight  = $(document).height();
            var winWidth   = $(window).width();
            var dialogTop  = winHeight / 2 - self.$dialogBox.height() / 2;
            var dialogLeft = (winWidth / 2) - (self.$dialogBox.width() / 2);
            self.$dialogBox.css({ top: dialogTop, left: dialogLeft });
            self.$dialogOverray.css({ height: winHeight, width:  winWidth });
        },
        // å¤‰æ›´ã‚’é©å¿œã™ã‚‹ï¼inputã‹ã‚‰ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’è¡¨ã™è¡¨ç¾ã‚’ä½œã‚Šï¼Œsessionã‚’resolveã™ã‚‹ï¼
        applyEdit: function() {
            var self = this;
            var data = self.extractInputToModuleValues();
            self.session.resolve(data);
            self.hide();
        },
        // ç·¨é›†ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’çµ‚äº†ã—ã¦ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’éš ã™
        cancelEdit: function() {
            var self = this;
            self.session.reject();
            self.hide();
        },
        // ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’éš ã™
        hide: function() {
            var self = this;
            self.$modalWindow.hide();
        },
        // ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ç·¨é›†ã®ã¨ãï¼Œãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®å€¤ã‚’ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã«ã‚³ãƒ”ãƒ¼
        // :visibleã‚’è¦‹ã¦ã‚‹ã®ã§show()ã—ãŸã‚ã¨ã«å‘¼ã¶å¿…è¦ãŒã‚ã‚‹
        fillValuesFromModule: function(module) {
            var self = this;
            var val = module.getValue();
            var moduleType = module.getType();
            for(var name in val) {

                if ( moduleType === 'link' &&
                     (name === 'link_title' || name === 'link_url')) {
                    self.setLinkInput(self.$dialogBox, val, name);
                } else {
                    var $inputs = self.$dialogBox.find(':input:visible').filter(function() {
                        return $(this).attr('name') == name;
                    });
                    $inputs.eq(0).val(val[name]);
                    if ( $inputs.eq(0).attr('type') == 'checkbox' && val[name]) {
                        $inputs.eq(0).prop('checked', true);
                    }
                }
            }
            // module-valueã«module-titleãŒå…¥ã£ã¦ã„ã‚‹ã“ã¨ã‚‚ã‚ã‚‹ã®ã§ã‚¿ã‚¤ãƒˆãƒ«ã¯å¾Œã‹ã‚‰è¨­å®š
            self.$dialogBox.find('input[name=module-title]:visible').val(module.getTitle());
        },
        extractInputToModuleValues: function() {
            // ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦å†…ã®inputã®å€¤ã‚’ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ç”¨ã®è¡¨ç¾ã«å¤‰æ›ã—ã¦è¿”ã™
            var self = this;

            var moduleTitle = self.$dialogBox.find('input[name=module-title]:visible').val();

            // ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚¿ã‚¤ãƒ—ã¯ï¼Œæ–°ã—ã„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«è¿½åŠ ã™ã‚‹ã¨ãã¯DOMã‹ã‚‰æ‹¾ã†
            // ç·¨é›†æ™‚ã¯ï¼Œç·¨é›†ä¸­ã®moduleã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®typeã‚’å¼•ãç¶™ã
            var moduleType;
            if (self.editingModule.isNewModule()) {
                moduleType = self.getSelectedPanelType();
            } else {
                moduleType = self.editingModule.getType();
            }
            var moduleValue = {};

            // ã‚¿ã‚¤ãƒˆãƒ«ãŒæœªè¨˜å…¥ã®å ´åˆã€åˆæœŸå€¤ã‚’åŸ‹ã‚ã‚‹(HTMLãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯åŸ‹ã‚ãªã„)
            if ( ! moduleTitle && moduleType !== 'html' ) {
                var defaultTitle = self.$radios.find('input:checked').attr('data-default-module-title');
                moduleTitle = defaultTitle;
            }

            self.$dialogBox.find(':input:visible').each(function() {
                var $input = $(this);
                var name  = $input.attr('name');
                var val   = $input.val();

                // module-titleã®inputã‚‚dialogBoxå†…ã«å­˜åœ¨ã™ã‚‹ãŒï¼Œ
                // ã‚¿ã‚¤ãƒˆãƒ«ã¯åˆ¥ã®inputã«ä¿å­˜ã™ã‚‹ãŸã‚ï¼Œã“ã“ã§ã¯ã‚¹ã‚­ãƒƒãƒ—ã™ã‚‹
                if (name === 'module-title') {
                    return;
                }

                if ($input.attr('type') == 'checkbox') {
                    if ( $input.prop('checked') ) {
                        val = 1;
                    } else {
                        val = 0;
                    }
                }

                if (!name) {
                    return;
                }
                // åŒã˜åå‰ã®å€¤ãŒè¤‡æ•°æ¥ãŸã‚‰arrayã«ã™ã‚‹
                if (typeof moduleValue[name] === 'undefined') {
                    moduleValue[name] = val;
                } else if (moduleValue[name] instanceof Array) {
                    moduleValue[name].push(val);
                } else {
                    moduleValue[name] = [moduleValue[name], val];
                }
            });

            return {
                type:  moduleType,
                title: moduleTitle,
                value: moduleValue
            };
        },
        // ãƒªãƒ³ã‚¯ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ãƒ•ã‚£ãƒ«ã‚¤ãƒ³
        // ãƒªãƒ³ã‚¯ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ä¸€ã¤ã§ã‚¿ã‚¤ãƒˆãƒ«å…¨éƒ¨ / URLå…¨éƒ¨ã‚’è¡¨ã™ï¼link-titleã¨link-valueï¼
        setLinkInput: function ($dialogBox, val, name) {
            var $inputs = $dialogBox.find(':input:visible').filter(function() {
                return $(this).attr('name') == name;
            });
            var $linkInput;
            if (val[name] instanceof Array) {
                var addInput = val[name].length > $inputs.length ? true : false;
                var diff = addInput ? val[name].length - $inputs.length : $inputs.length - val[name].length;

                for (var i = 0; i < diff; i++) {
                    if ( addInput ) {
                        $linkInput = $dialogBox.find('.link-input:visible').eq(0).clone();
                        $linkInput.find(':input').val('');
                        $linkInput.insertAfter($dialogBox.find('.link-input').eq(-1));
                    } else {
                        $linkInput = $dialogBox.find('.link-input:visible').eq(-1);
                        $linkInput.remove();
                    }
                }
                $inputs = $dialogBox.find(':input:visible').filter(function() {
                    return $(this).attr('name') == name;
                });
                $inputs.each(function() { $(this).val(val[name].shift()) });
            } else {
                // 1ã¤ã—ã‹è¦ç´ ãŒãªã„å ´åˆã€inputã‚’ï¼‘ã¤ã«ã™ã‚‹
                while ( $inputs.length > 1 ) {
                    $linkInput = $dialogBox.find('.link-input:visible').eq(-1);
                    $linkInput.remove();
                    $inputs = $dialogBox.find(':input:visible').filter(function() {
                        return $(this).attr('name') == name;
                    });
                }
                $inputs.eq(0).val(val[name]);
            }
        }
    };

    // ã‚«ãƒ†ã‚´ãƒªãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®æ›´æ–°, sortableè¦ç´ ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
    var CategoryEditor = function() {
        var self = this;
        self.categoryTemplate =  _.template($('.js-categories-template').html());
        self.$categoryContainer = $('.js-categories-container');
    };
    CategoryEditor.prototype = {
        updateCategoryPreview: function () {
            var self = this;
            var $categoryContainer = self.$categoryContainer;
            var url = $categoryContainer.data('getUrl');
            var order_type = $('.js-categories-order-type option:selected').val();

            // ä¸¦ã³é †ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
            $.ajax({
                url: url,
                data: {
                    order_type: order_type
                }
            }).done(function(data) {
                var categories = data.categories; // { count: entry_count, name: category_name }
                sortable_container_class = order_type == 'user' ? 'module-category-sortable-container' : '';
                sortable_item_class = order_type == 'user' ? 'module-category-sortable-item' : '';

                $categoryContainer.html(self.categoryTemplate({ categories:                 categories,
                                                                sortable_container_class:   sortable_container_class,
                                                                sortable_item_class:        sortable_item_class }));
                if ( order_type == 'user' ) self.setupSortable();
            });
        },
        setupSortable: function () {
            var self = this;
            var $categoryContainer = self.$categoryContainer;

            var $sortableContainer = $categoryContainer.find('.js-categories-sortable');
            var $sortableItem = $categoryContainer.find('.js-categories-sortable-item');

            $sortableContainer.sortable({
                stop: function () {
                    var $sortedItems = $categoryContainer.find('.js-categories-sortable-item');
                    var sortedCategoryNames = $sortedItems.map(function(idx, element){
                        var categoryName = $(element).data("categoryName");
                        return categoryName;
                    }).get();

                    var url = $sortableContainer.data('sortUrl');
                    $.ajax({
                        type: 'POST',
                        url: url,
                        data: {
                            category_names  : sortedCategoryNames,
                            rkm             : Hatena.Diary.data('rkm'),
                            rkc             : Hatena.Diary.data('rkc')
                        },
                        traditional: true
                    });
                }
            });
        }
    };

    var PreviewUpdater = function(args) {
        var self = this;
        self.$form = args.$form;
        self.$loading = args.$loading;
        self.$preview = args.$preview;
        self.formState = args.formState;
        self.$deviceInput = self.$form.find(':input[name=device]');
        self.device = self.$deviceInput.val();
        self.pageType = 'index';
        self.failedCount = 0;
    };

    PreviewUpdater.prototype = {
        // ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã‚’ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã™ã‚‹çŠ¶æ…‹ã«ã™ã‚‹
        setAsIndexPreview: function() {
            var self = this;
            self.pageType = 'index';
        },
        // ã‚¨ãƒ³ãƒˆãƒªãƒšãƒ¼ã‚¸ã‚’ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã™ã‚‹çŠ¶æ…‹ã«ã™ã‚‹
        setAsPermalinkPreview: function() {
            var self = this;
            self.pageType = 'permalink';
        },
        getPageType: function() {
            var self = this;
            return self.pageType;
        },
        // PCç‰ˆãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼çŠ¶æ…‹ã«ã™ã‚‹
        setDeviceAsPC: function() {
            var self = this;
            self._setDevice('pc');
        },
        // touchç‰ˆãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼çŠ¶æ…‹ã«ã™ã‚‹
        setDeviceAsTouch: function() {
            var self = this;
            self._setDevice('touch');
        },
        // å†…éƒ¨çš„ãªãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼çŠ¶æ…‹åˆ‡ã‚Šæ›¿ãˆ
        // inputã®å€¤è¨­å®šï¼Œãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æ›´æ–°ã‚’ä¾é ¼
        _setDevice: function(device) {
            var self = this;
            self.device = device;
            self.$deviceInput.val(self.device);
            self.requestPreview();

            // touchã®ã¨ãï¼Œiframeã«.device=touchã‚¯ãƒ©ã‚¹è¿½åŠ 
            self.$preview.toggleClass('device-touch', device === 'touch');
        },
        // previewã®æ›´æ–°ã‚’ä¾é ¼ã™ã‚‹ï¼formã®çŠ¶æ…‹ãŒå¤‰ã‚ã£ã¦ã„ãªã‘ã‚Œã°ä½•ã‚‚ã—ãªã„
        requestPreview: function() {
            var self = this;

            var serialized = self.$form.serialize();
            if (serialized === self.serialized) return;
            self.serialized = serialized;

            self.preview();
        },
        // previewã‚’æ›´æ–°ã™ã‚‹ï¼å¤±æ•—ã—ãŸã‚‰ã‚„ã‚Šç›´ã—ï¼ã‚ã¾ã‚Šã«å¤±æ•—ã—ãŸã‚‰ã‚‚ã†ãªã«ã‚‚ã—ãªã„ï¼
        preview: function() {
            var self = this;

            if (self.failedCount > 10) return;

            self.showEffect();

            if (!self.serialized) {
                self.serialized = self.$form.serialize();
            }
            var serialized = self.serialized;

            var getSignature = self.getSignature(serialized);
            getSignature.done(function(signature) {
                self.onGotSignature(signature);
                self.failedCount = 0;
            }).fail(function() {
                self.failedCount++;
                self.requestPreview();
            });
        },
        // signatureã‚²ãƒƒãƒˆã—ãŸã‚‰resolveã™ã‚‹Deferredã‚’è¿”ã™
        getSignature: function(serialized) {
            var self = this;

            var got = $.Deferred();

            $.ajax({
                url : '../../preview/design',
                type : "post",
                dataType : 'json',
                data : serialized
            }).done(function(data) {
                // é€šä¿¡ã—ã¦ã‚‹é–“ã«çŠ¶æ…‹ãŒå¤‰ã‚ã£ã¦ã„ãªã‘ã‚Œã°æˆåŠŸï¼Œå¤‰ã‚ã£ã¦ãŸã‚‰å¤±æ•—
                if (serialized === self.$form.serialize()) {
                    got.resolve(data.signature);
                } else {
                    got.reject();
                }
            }).fail(function() {
                got.reject();
            });

            return got.promise();
        },
        // signatureæƒã£ãŸã®ã§å®Ÿéš›ã«ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
        // formã®actionã¨targetã‚’æ›¸ãæ›ãˆã¦ï¼Œsignatureã‚’è¿½åŠ ã—ã¦submitã—ï¼Œå³åº§ã«å…ƒã®çŠ¶æ…‹ã«æˆ»ã—ã¦ã„ã‚‹ï¼
        onGotSignature: function(signature) {
            var self = this;

            var $form = self.$form;

            var actionBefore = $form.attr('action');
            var targetBefore = $form.attr('target');
            var confirmEnabledBefore = self.formState.isConfirmEnabled();

            $form.attr('action', self.getAction());
            $form.attr('target', self.$preview.attr('name'));
            var $signature = $('<textarea/>').attr('name', 'signature').val(signature);
            $signature.appendTo($form);

            self.formState.disableConfirm();
            $form.submit();

            $signature.remove();
            $form.attr('action', actionBefore);
            $form.attr('target', targetBefore);

            if (confirmEnabledBefore) {
                self.formState.enableConfirm();
            } else {
                self.formState.disableConfirm();
            }
        },
        // èª­ã¿è¾¼ã¿ä¸­å‡ºã—ã¦ã—ã°ã‚‰ãçŸ¥ãŸã‚‰æ¶ˆã™(é›‘)
        showEffect: function() {
            var self = this;
            self.$loading.fadeIn('fast');
            setTimeout(function () { self.$loading.fadeOut('fast') }, 1000);
        },
        // ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆï¼indexã¨permalinkã®ã©ã¡ã‚‰ã‹ï¼
        getAction: function() {
            var self = this;
            var base = Hatena.Diary.data('blogs-uri-base');
            return base + '/preview/' + self.pageType + '_design';
        }
    };


    Hatena.Diary.Pages.Admin['user-blog-config-design-detail'] = function () {
        var css       = $('#css');
        var form      = $('#form-design');
        var preview   = $('#preview');
        var loading   = $('#preview-loading');
        var $tabs      = $('#tabs');
        var $foldButton = $('#form-design-fold-button');

        var formState = new Hatena.Diary.FormState();
        formState.observeForm(form);
        formState.observeFormChange();

        var previewUpdater = new PreviewUpdater({
            $form: form,
            $preview: $('#preview-iframe'),
            $loading: loading,
            formState: formState
        });
        previewUpdater.requestPreview();

        form.on('change', function() {
            previewUpdater.requestPreview();
        });

        Hatena.Diary.Pages.Admin['user-blog-config-design']();
        Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].setupTabs({
            $tabs: $tabs,
            previewUpdater: previewUpdater
        });
        Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].setupFoldButton({
            $form: form,
            $preview: preview,
            $foldButton: $foldButton
        });
        Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].setupPreviewTypeButton(previewUpdater);

        _.each([
            'header-html',
            'entry-header-html',
            'entry-footer-html',
            'footer-html',

            'header-touch-html',
            'entry-touch-header-html',
            'entry-touch-footer-html',
            'footer-touch-html',
            'touch-under-pager-html'
        ], function(name) {
            var selector = ':input[name="' + name + '"]';
            var $target = $(selector);
            if (!$target.length) return;
            if ($target.prop('disabled')) return;
            Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].setupEditor({
                form:     form,
                syntax:   'html',
                textarea: $target
            });
        });

        Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].setupEditor({
            form:     form,
            syntax:   'css',
            textarea: css
        });
        Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].setupBackgroundComponent({
            css: css,
            form: form,
            loading : loading,
            preview: preview
        });
        var trimmingWindow = new TrimmingWindow($('.js-header-modal-window'));
        Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].setupHeaderImageComponent({
            $container: $('.js-design-header .js-header-image-container'),
            previewUpdater: previewUpdater,
            trimmingWindow: trimmingWindow
        });
        Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].setupTouchHeaderImageComponent({
            $container: $('.js-design-header-touch .js-header-image-container'),
            previewUpdater: previewUpdater
        });
        Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].setupEntryComponent({
            css: css,
            form: form,
            loading : loading,
            preview: preview
        });

        var moduleEditor = new ModuleEditor($('.js-module-edit-modal-window'));
        var categoryEditor = new CategoryEditor();
        // æ–°è¦ç·¨é›†æ™‚ã¨order_typeé¸æŠæ¯ã«æ›´æ–°
        $(moduleEditor).on('edit-new-module change-category-order-type', function () {
            categoryEditor.updateCategoryPreview();
        });

        _.each(['sidebar', 'top-page-main-column', 'top-page-header', 'top-page-sidebar'], function (type) {
            var $element = $('div[data-modules-type="' + type + '"].sidebar-box');
            if (!$element.length) return;
            var modules = new Modules($element, moduleEditor);
            $(modules).on('updated', function() {
                // FormState(ãƒšãƒ¼ã‚¸é–‰ã˜ã‚‹å‰ã«confirmå‡ºã™ã‚„ã¤)ãŒformã®changeã‚¤ãƒ™ãƒ³ãƒˆã‚’è¦‹ã¦ã„ã‚‹
                form.trigger('change');
            });
        });
        Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].setupAccordion('.accordion-title');

        // ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã¨ã‚µãƒ¼ã‚¯ãƒ«ã¯é€šä¿¡ã—ã¦formã‚’æ›¸ãæ›ãˆã‚‹ï¼Œæ›¸ãæ›ãˆçµ‚ã‚ã£ãŸçŠ¶æ…‹ã®ãƒ•ã‚©ãƒ¼ãƒ ã®å€¤ã‚’åˆæœŸçŠ¶æ…‹ã¨ã—ã¦ã‚»ãƒƒãƒˆã™ã‚‹
        var profileUpdated = Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].updateProfileModule();
        var circlesUpdated = Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].updateCirclesModule();
        // ã‚«ãƒ†ã‚´ãƒªãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« order_typeãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼åˆæœŸçŠ¶æ…‹
        categoryEditor.updateCategoryPreview();

        $.when(profileUpdated, circlesUpdated).always(function() {
            formState.setFormInitialState();
        });

        Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].setupThemesListSwitcher();

        // ã‚¹ãƒãƒ•ã‚©ç”¨ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒªã‚¢ï¼Œä¸è¦ãªã¨ãã«ã¯éš ã—ã¦ãŠã
        Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].setupTextareaHider();

        // èƒŒæ™¯ç”»åƒã‚‚ã£ã¨è¦‹ã‚‹
        Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].setupSeeMoreBackgrounds();

        // ã‚¹ãƒãƒ•ã‚©ç”¨ã‚¢ã‚¯ã‚»ãƒ³ãƒˆã‚«ãƒ©ãƒ¼
        Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].setupTouchAccentColor({
            $form: form
        });
    };

    Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].setupAccordion = function (selector) {
        var accordionTitle = $(selector);
        accordionTitle.next().hide();
        accordionTitle.click(function () {
            var $title   = $(this);
            var $content = $title.next();
            if ($content.is(':visible')) {
                $content.hide();
                $title.removeClass('open');
            } else {
                $content.show();
                $title.addClass('open');
            }
        });
    };

    Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].setupTabs = function (args) {
        var $tabs      = args.$tabs;
        var previewUpdater = args.previewUpdater;
        var $forcePcView = $('#force-pc-view');

        if (!$tabs[0]) return;

        // ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆãŸã‚‰ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã™ã‚‹ãƒ‡ãƒã‚¤ã‚¹åˆ‡ã‚Šæ›¿ãˆã‚‹
        // ãŸã ã—ï¼Œã‚¹ãƒãƒ•ã‚©ã«PCã®ãƒ‡ã‚¶ã‚¤ãƒ³ã‚’ä»•æ§˜ã™ã‚‹ã¨ãã¯è¡¨ç¤ºãŒå´©ã‚Œã‚‹ã®ã§ï¼ŒPCç‰ˆã‚’ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
        var updateDevice = function (event, ui) {
            var panelID = (ui.newPanel || ui.panel).attr('id');
            if (panelID === 'tab-customize-touch' && ! $forcePcView.is(':checked')) {
                previewUpdater.setDeviceAsTouch();
            } else {
                previewUpdater.setDeviceAsPC();
            }
        };

        $tabs.on('tabsactivate', updateDevice)
             .on('tabscreate', updateDevice);

        // PCã®ãƒ‡ã‚¶ã‚¤ãƒ³è¡¨ç¤ºã™ã‚‹ã‹ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã‚‚ç›£è¦–ã™ã‚‹
        $forcePcView.on('change', function() {
            if ($forcePcView.is(':checked')) {
                previewUpdater.setDeviceAsPC();
            } else {
                previewUpdater.setDeviceAsTouch();
            }
        }).triggerHandler('change');

        $tabs.tabs();
    };

    // ã‚µã‚¤ãƒ‰ãƒãƒ¼ã‚’ç•³ã‚€æ©Ÿèƒ½
    Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].setupFoldButton = function (args) {
        var $form      = args.$form;
        var $preview   = args.$preview;
        var $foldButton = args.$foldButton;

        if (!$foldButton[0]) return;

        $foldButton.click( function () {
            if ($foldButton.hasClass('open')) {
                $foldButton.removeClass('open').addClass('close');
                $form.hide();
                $preview.addClass('fold-form');
            } else {
                $foldButton.removeClass('close').addClass('open');
                $form.show();
                $preview.removeClass('fold-form');
            }
        });
    };

    Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].fadeInLoading = function ($loading) {
        $loading.fadeIn('fast');
    };

    Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].fadeOutLoading = function ($loading) {
        setTimeout(function () { $loading.fadeOut('fast') }, 1000);
    };

    Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].setupPreviewTypeButton = function (previewUpdater) {
        var switchButton = $('.switch-button');

        switchButton.click ( function () {
            if (previewUpdater.getPageType() === 'index') {
                switchButton.addClass('permalink').removeClass('index');
                switchButton.text(Hatena.Locale.text('admin.design.quit_preview_entry_page'));
                previewUpdater.setAsPermalinkPreview();
                previewUpdater.preview();
            } else {
                switchButton.addClass('index').removeClass('permalink');
                switchButton.text(Hatena.Locale.text('admin.design.preview_entry_page'));
                previewUpdater.setAsIndexPreview();
                previewUpdater.preview();
            }

        });
    };

    Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].setupBackgroundComponent = function (args) {
        var css = args.css;
        var form = args.form;
        var preview = args.preview;

        var fileinput = $('input[type="file"].background-image');
        var bgImage = $('#background-image');
        var imageThumbnail = $('#background-image-thumbnail');
        var deleteBgImage = $('a.delete-background-image');
        var imageSrc = $('input[name="bg-image-src"]');
        var imageId = $('input[name="bg-image-id"]');
        var imageSelected = $('input[name="bg-image-selected"]');
        var styletemplate = _.template("body{ background-image: url('<%= image %>'); background-repeat: <%= repeat %>; background-color:<%= backgroundColor %>; background-attachment: <%= attachment %>; background-position: <%= position %> top;}");

        var bgPosition = $('select[name="background-position"]');
        var bgRepeat = $('select[name="background-repeat"]');
        var bgAttachment = $('select[name="background-attachment"]');

        var showBackgroundImage = function () {
            bgImage.show();
        };
        var hideBackgroundImage = function () {
            bgImage.hide();
        };

        deleteBgImage.click ( function () {
            if ( confirm(Hatena.Locale.text('admin.design.stop_header_image_confirm')) ) {
                imageId.val('');
                imageSrc.val('');
                imageSelected.val(0);
                setDesignCSS();

                hideBackgroundImage();
            }
            return false;
        });

        imageThumbnail.click ( function () {
            setDesignCSS();
            if ( ! imageThumbnail.hasClass('ui-selected') ) {
                // èƒŒæ™¯ç”»åƒã®é¸æŠã‚’ã¯ãšã™
                var backgroundListItems = $('#backgrounds li');
                backgroundListItems.removeClass('ui-selected');
                imageThumbnail.addClass('ui-selected');
                imageSelected.val(1);
            }
        });

        bgPosition.change ( function () {
            setDesignCSS();
        });

        bgAttachment.change ( function () {
            setDesignCSS();
        });

        bgRepeat.change ( function () {
            setDesignCSS();
        });

        // èƒŒæ™¯ç”»åƒã®ã‚»ãƒƒãƒˆ
        var setBackgroundImage = function (fid) {
            imageId.val(fid);
            var match = fid.match(/f:id:([^:]+):(\d+)([jpg]):image/);
            if (!match) return;

            var name  = match[1];
            var id    = match[2];
            var type  = match[3];
            var extension = { j : '.jpg', p : '.png', g : '.gif' };
            var path  = [ name.substring(0, 1), name, id.substring(0, 8), id ].join('/');
            var image = 'http://cdn-ak.f.st-hatena.com/images/fotolife/' + path + extension[type];
            var thumbnail_src = 'http://cdn-ak.f.st-hatena.com/images/fotolife/' + path + '_120.jpg';
            imageSrc.val(image);
            imageThumbnail.attr('src', thumbnail_src);
            showBackgroundImage();
            fileinput.prop('disabled', false);
            imageThumbnail.trigger('click');

            // fileinput.changeå¥‘æ©Ÿã§ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦ã„ã‚‹å ´åˆã€fileinput.valueã‚’ç©ºã«ã—ã¦ãŠã‹ãªã„ã¨åŒã˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠã—ãŸæ™‚ã«changeã‚¤ãƒ™ãƒ³ãƒˆãŒç™ºç«ã—ãªã„ãŸã‚ã€ãŒã‚“ã°ã£ã¦ç©ºã«ã™ã‚‹
            var isSupportedFile = (typeof FormData != 'undefined');
            if (isSupportedFile) {
                var new_fileinput = fileinput.clone(true);
                fileinput.replaceWith(new_fileinput);
                fileinput = new_fileinput;
            }
        };

        var setDesignCSS = function () {
            var image = imageSrc.val();
            var design = new EditDesign(css.val());

            var id;
            var style;
            if ( image ) {
                var backgroundColorItem = $('#background-colors li.ui-selected');
                var backgroundColor = 'transparent';
                // èƒŒæ™¯è‰²ãŒé¸æŠã•ã‚Œã¦ã„ãªã„å ´åˆã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚’é¸æŠ
                if ( backgroundColorItem.length === 0 ) {
                    $('#background-colors li[data-css=""]').addClass('ui-selected');
                } else if ( backgroundColorItem.attr('data-id') !== undefined ) {
                    backgroundColor = '#' + backgroundColorItem.attr('data-id');
                }
                id = 'custom';
                var repeat = bgRepeat.find('option:selected').val();
                var position = bgPosition.find('option:selected').val();
                var attachment = bgAttachment.find('option:selected').val();
                style = styletemplate({
                    image : image,
                    backgroundColor : backgroundColor,
                    repeat : repeat,
                    position : position,
                    attachment : attachment
                });
            } else { // ç”»åƒå¤–ã—ãŸã¨ãã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã«æˆ»ã™
                id = 'default';
                style = $('li[data-id="default"]').attr('data-css');
            }

            design.setData('background', id, style);
            css.val(design.getCSS());
            css.trigger('change');
        };

        var isSupportedFile = (typeof FormData != 'undefined');
        if ( isSupportedFile ) {
            fileinput.change ( function () {
                if ( ! this.files.length ) return;
                hideBackgroundImage();
                Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].uploadImage({
                    file     : this,
                    folder   : "Hatena Blog",
                    fotosize : 3000,
                    input    : fileinput,
                    callback : setBackgroundImage
                });
            });
        } else {
            Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].setIframeUploader({
                fileinput : fileinput,
                fotosize  : 3000,
                callback  : setBackgroundImage
            });
        }
    };

    // ãƒ˜ãƒƒãƒ€ç”»åƒãƒˆãƒªãƒŸãƒ³ã‚°ã™ã‚‹ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦
    var TrimmingWindow = function($container) {
        this.$container = $container;
        this.init();
    };
    TrimmingWindow.prototype = {
        init: function() {
            var self = this;
            // ãƒšãƒ¼ã‚¸ã®æœ«å°¾ã«ç§»å‹•ã™ã‚‹
            self.$container.appendTo(document.body);

            // sessionã¯ãƒˆãƒªãƒŸãƒ³ã‚°ä¸­æœ‰åŠ¹ãªDeferredï¼Œdoneã§ãƒˆãƒªãƒŸãƒ³ã‚°æˆåŠŸï¼Œrejectã§å¤±æ•—
            self.session = $.Deferred();
            self.session.reject();

            self.jcrop = $.Jcrop(self.$container.find('.js-header-image-resizer'), {
                bgOpacity   :   '0.4',
                addClass    : 'jcrop-dark',
                allowSelect : false,
                keySupport  : false,
                allowResize : false
            });

            self.$container.on('click', '.js-header-image-apply-button', function() {
                self.save();
                return false;
            }).on('click', '.js-header-image-cancel-button', function() {
                self.cancel();
                return false;
            });
        },
        // æŒ‡å®šã—ãŸURLã®ç”»åƒã‚’ãƒˆãƒªãƒŸãƒ³ã‚°ã™ã‚‹
        // returns: ãƒˆãƒªãƒŸãƒ³ã‚°æˆåŠŸã—ãŸã‚‰done, ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã•ã‚ŒãŸã‚‰rejectã•ã‚Œã‚‹Deferred
        trim: function(url, area) {
            var self = this;
            self.cancel();
            self.session = $.Deferred();
            self.session.always(function() {
                self._hide();
            });

            self.jcrop.setImage(url, function() {
                self.jcrop.setSelect(area);
                self._show();
            });

            return self.session.promise();
        },
        // ä»¥ä¸‹ã¯ç›´æ¥å‘¼ã¶ã“ã¨ã¯ãªã„ã§ã‚ã‚ã†
        save: function() {
            var self = this;
            self.session.resolve(self.jcrop.tellSelect());
        },
        cancel: function() {
            var self = this;
            self.session.reject(self.jcrop.tellSelect());
        },
        _show: function() {
            var self = this;
            Hatena.Diary.Window.show(self.$container, {
                center: true,
                showBackground: true,
                closeExplicitly: true
            });
        },
        _hide: function() {
            var self = this;
            Hatena.Diary.Window.hide(self.$container);
        }
    };

    var HeaderImagePreview = function($container) {
        this.$container = $container;
        this.jcrop = $.Jcrop(this.$container.find('.js-header-image-thumbnail'), {
            bgOpacity   :   '0.4',
            addClass    : 'jcrop-dark',
            allowSelect : false,
            allowResize : false,
            allowMove   : false
        });
    };

    HeaderImagePreview.prototype = {
        // url: ã‚ªãƒªã‚¸ãƒŠãƒ«ç”»åƒã®URL
        // thumbnailUrl: ã‚µãƒ ãƒã‚¤ãƒ«ã®URL
        // (area): ãƒˆãƒªãƒŸãƒ³ã‚°ä½ç½® {x, y, x2, y2}
        render: function(url, thumbnailUrl, area) {
            var self = this;
            if (url) {
                self.jcrop.setImage(thumbnailUrl, function () {
                    if (area) {
                        self.setArea(url, thumbnailUrl, area);
                    }
                });
            } else if (area) {
                self.setArea(url, thumbnailUrl,  area);
            }
            self.$container.show();
        },
        clear: function() {
            var self = this;
            self.$container.hide();
        },
        // å…ƒç”»åƒã¨ã‚µãƒ ãƒã‚¤ãƒ«ã®ã‚µã‚¤ã‚ºã‹ã‚‰ã‚µãƒ ãƒã‚¤ãƒ«ã®è¡¨ç¤ºä½ç½®ã‚’æ±ºã‚ã‚‹
        setArea: function(url, thumbnailUrl, area) {
            var self = this;

            Hatena.Diary.Util.loadImages([url, thumbnailUrl]).done(function(imgs) {
                var image = imgs[0];
                var thumbnail = imgs[1];

                var rateY = thumbnail.height / image.height;

                var thumbnailArea = [0, area.y * rateY, area.w, area.y2* rateY];
                self.jcrop.setSelect(thumbnailArea);
            });
        }
    };

    // ãƒ˜ãƒƒãƒ€ã®inputã®æ“ä½œï¼Œæ›´æ–°ã™ã‚‹ã¨updatedã‚¤ãƒ™ãƒ³ãƒˆç™ºè¡Œ
    // display_areaã¯PCç‰ˆã®ã¿ã«å­˜åœ¨ã—ï¼Œtouchç‰ˆã«ã¯ãªã„ï¼
    // imageSize: {width, height}
    var HeaderImage = function($container, imageSize) {
        var self = this;
        self.imageSize = imageSize;
        self.$container = $container;
        self.$image_src = $container.find('.js-image-src');
        self.$image_id = $container.find('.js-image-id');
        self.$display_area = $container.find('.js-display-area');
        _.defer(function() {
            // åˆå›ï¼Œobserveã¾ã ã‹ã‚‚ã—ã‚Œãªã„ã®ã§ï¼Œã¡ã‚‡ã£ã¨å¾…ã¤
            self.updated();
        });
    };
    HeaderImage.prototype = {
        setImage: function(src, id) {
            this.$image_src.val(src);
            this.$image_id.val(id);
            this.$display_area.val('');
            if (this.$display_area.length) {
                // ãƒˆãƒªãƒŸãƒ³ã‚°ä½ç½®ã‚ã‚‹ã¨ãã¯ï¼ŒdisplayAreaãŒæƒã†ã¾ã§ã¯ä¸å®Œå…¨ãªçŠ¶æ…‹ãªã®ã§updateã—ãªã„
            } else {
                // ãƒˆãƒªãƒŸãƒ³ã‚°ä½ç½®ãªã„ã¨ãã¯ã“ã®æ™‚ç‚¹ã§å®Œæˆãªã®ã§update
                this.updated();
            }
        },
        // displayArea: { x, y, x2, y2 }
        setDisplayArea: function(area) {
            this.$display_area.val(JSON.stringify(area));
            this.updated();
        },
        // ç”»åƒã‚’å¤–ã™
        clear: function() {
            this.$image_src.val('');
            this.$image_id.val('');
            this.$display_area.val('');
            this.updated();
        },
        getImageSrc: function() {
            return this.$image_src.val();
        },
        getThumbnailSrc: function() {
            return this.getImageSrc().replace(/\.(jpg|png|gif)$/, '_120.jpg');
        },
        getImageId: function() {
            return this.$image_id.val();
        },
        // displayArea: { x, y, x2, y2 }
        getDisplayArea: function() {
            var value;
            try {
                value = JSON.parse(this.$display_area.val());
            } catch(ignore) { }
            return value;
        },
        // trimmingArea: [ x, y, x2, y2 ] TrimmingWindowã«æ¸¡ã™å½¢å¼
        // æŒ‡å®šã•ã‚Œã¦ã„ãªã„ã¨ãã¯å·¦ä¸Šã‹ã‚‰ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã§æŒ‡å®šã•ã‚ŒãŸã‚µã‚¤ã‚º
        getTrimmingArea: function() {
            var area = this.getDisplayArea();
            if (area) {
                return [ area.x, area.y, area.x2, area.y2 ];
            } else {
                return [0, 0, this.imageSize.width, this.imageSize.height];
            }
        },
        updated: function() {
            var self = this;
            $(self).triggerHandler('updated');
        }
    };

    // args: { $container, previewUpdater, trimmingWindow, imageSize: {width, height} }
    Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].setupHeaderImageComponent = function(args) {
        var $container = args.$container;
        var previewUpdater = args.previewUpdater;
        var trimmingWindow = args.trimmingWindow;
        var imageSize = {
            width:  + $container.attr('data-max-width'),
            height: + $container.attr('data-max-height')
        };

        var image = new HeaderImage($container, imageSize);
        var thumbnail = new HeaderImagePreview($container.find('.js-header-image-item'));

        $(image).on('updated', function() {
            if (image.getImageSrc()) {
                thumbnail.render(image.getImageSrc(), image.getThumbnailSrc(), image.getDisplayArea());
            } else if (!image.getImageSrc()) {
                thumbnail.clear();
            }
            previewUpdater.requestPreview();
        });

        var uploaded = Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].setupFotoUpload({
            $input: $container.find('.js-header-image-input'),
            size: imageSize.width
        });

        // ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã•ã‚ŒãŸã‚‰å€¤è¨­å®šï¼ŒãƒˆãƒªãƒŸãƒ³ã‚°ã¯ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã•ã‚Œã¦ã‚‚åˆå›ã¯å¿…ãšã‚¨ãƒªã‚¢è¨­å®šã™ã‚‹
        uploaded.progress(function(foto) {
            image.setImage(foto.url, foto.fid);
            trimmingWindow.trim(image.getImageSrc(), image.getTrimmingArea()).always(function(area) {
                image.setDisplayArea(area);
            });
        });

        $container.on('click', '.js-header-image-thumbnail, .jcrop-holder, .js-resizer', function() {
            // ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ¸ˆã®ç”»åƒã®ãƒˆãƒªãƒŸãƒ³ã‚°ä½ç½®å¤‰æ›´
            trimmingWindow.trim(image.getImageSrc(), image.getTrimmingArea()).done(function(area) {
                image.setDisplayArea(area);
            });
            return false;
        }).on('click', '.js-delete-header-image', function() {
            // ç”»åƒå¤–ã™
            if (!confirm(Hatena.Locale.text('admin.design.stop_header_image_confirm'))) return false;
            image.clear();
            return false;
        });
    };

    // ã‚¹ãƒãƒ•ã‚©ç‰ˆã®ãƒ˜ãƒƒãƒ€ç”»åƒï¼ŒãƒˆãƒªãƒŸãƒ³ã‚°æ©Ÿæ§‹ãŒãªã„ã®ã§å˜ç´”
    Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].setupTouchHeaderImageComponent = function(args) {
        var $container = args.$container;
        var previewUpdater = args.previewUpdater;
        var imageSize = {
            width:  + $container.attr('data-max-width'),
            height: + $container.attr('data-max-height')
        };

        var image = new HeaderImage($container, imageSize);

        var $imageItem = $container.find('.js-header-image-item');
        var $thumbnail = $container.find('.js-header-image-thumbnail');

        $(image).on('updated', function() {
            if (image.getImageSrc()) {
                $thumbnail.attr('src', image.getThumbnailSrc())
                          .show();
                $imageItem.show();
            } else {
                $thumbnail.hide();
                $imageItem.hide();
            }
            previewUpdater.requestPreview();
        });

        var uploaded = Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].setupFotoUpload({
            $input: $container.find('.js-header-image-input'),
            size: imageSize.width
        });

        // ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã•ã‚ŒãŸã‚‰å€¤è¨­å®š
        uploaded.progress(function(foto) {
            image.setImage(foto.url, foto.fid);
        });

        $container.on('click', '.js-delete-header-image', function() {
            // ç”»åƒå¤–ã™
            if (!confirm(Hatena.Locale.text('admin.design.stop_header_image_confirm'))) return false;
            image.clear();
            return false;
        });
    };

    Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].setupEntryComponent = function (args) {
        var css = args.css;
        var form = args.form;
        var preview = args.preview;

        // å¤‰æ•°ã®ãƒ˜ãƒ«ãƒ—
        $('.js-variable-toggle').click(function(){
            $(this).siblings('.js-variable-help').slideToggle();
            return false;
        });
    };

    // ãƒ•ã‚©ãƒˆãƒ©ã‚¤ãƒ•ã¸ç”»åƒã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã®æº–å‚™ï¼Œã‚³ãƒ”ãƒšã•ã‚Œã¾ãã£ã¦ãŸã®ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹æ•´ç†ã—ãŸã‚„ã¤
    // args:
    //   $input: input type=fileã®input
    //   size: ç”»åƒã®é•·è¾º
    // returns: ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãŒå®Œäº†ã™ã‚‹ã¨ { syntax, url, thumbnail_url } ãŒnotifyã•ã‚Œã‚‹Deferred
    Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].setupFotoUpload = function(args) {
        var $input = args.$input;
        var size = args.size;

        var uploaded = $.Deferred();
        var isSupportedFile = (typeof FormData != 'undefined');

        var callback = function(fid) {
            var match = fid.match(/f:id:([^:]+):(\d+)([jpg]):image/);
            if (!match) return;
            var name  = match[1];
            var id    = match[2];
            var type  = match[3];
            var extension = { j : '.jpg', p : '.png', g : '.gif' };
            var path  = [ name.substring(0, 1), name, id.substring(0, 8), id ].join('/');
            var url = 'http://cdn-ak.f.st-hatena.com/images/fotolife/' + path + extension[type];
            var thumbnail_url = 'http://cdn-ak.f.st-hatena.com/images/fotolife/' + path + '_120.jpg';
            uploaded.notify({
                fid: fid,
                url: url,
                thumbnail_url: thumbnail_url
            });
        };

        if ( isSupportedFile ) {
            $input.on('change', function() {
                var input = this;
                if ( ! this.files.length ) return;
                Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].uploadImage({
                    file     : $input[0],
                    input    : $input,
                    folder   : "Hatena Blog",
                    fotosize : size,
                    callback : callback
                });
                return false;
            });
        } else {
            Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].setIframeUploader({
                fileinput : $input,
                fotosize  : size,
                callback  : callback
            });
        }

        return uploaded.promise();
     };

    // ãƒ•ã‚©ãƒˆãƒ©ã‚¤ãƒ•ã¸ç”»åƒã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
    Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].uploadImage = function (args) {
        var file = args.file;
        var folder = args.folder;
        var fotosize = args.fotosize;
        var input = args.input;
        var callback = args.callback;

        input.prop('disabled', true);

        var data = new FormData();
        data.append('rkm', Hatena.Diary.data('rkm'));
        data.append('append', 1);
        data.append('fototitle', "");
        data.append('folder', folder);
        data.append('fotosize', fotosize);
        data.append('image', file.files[0]);

        var grandparent = $(file).parent().parent();
        var progress = grandparent.find('.progress');
        progress.show();
        var bar = progress.find('div.bar');
        bar.width('0%');
        var percent = progress.find('div.percent');
        var updateProgress = function (progress) {
            if (progress > 100) progress = 100;
            bar.width(progress + '%');
            percent.text(Hatena.Locale.text('uploading'));
        };

        var xhr = new XMLHttpRequest();

        xhr.upload.addEventListener("progress", function (e) {
            var percent = e.lengthComputable ? (e.loaded / e.total * 100) : NaN;
            updateProgress( percent );
        }, false);

        xhr.addEventListener("load", function (e) {
            input.prop('disabled', false);
            input.val('');
            updateProgress( 100 );
            callback(xhr.responseText);
            progress.hide();
            _.defer(function() {
                updateProgress(0);
            });
        }, false);

        xhr.addEventListener("error", function (e) {
            progress.addClass('error');
            input.val('');
            percent.text('error');
            input.prop('disabled', false);
        }, false);

        xhr.open("POST", "/f/" + Hatena.Diary.data('name') + "/upbysmart");
        xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');
        xhr.send(data);
    };

    // IEç”¨ã«iframeã‚’è¨­ç½®
    Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].setIframeUploader = function (args) {
        var fileinput = args.fileinput;
        var fotosize = args.fotosize;
        var callback = args.callback;

        var iframe = $('<iframe/>');
        fileinput.replaceWith(iframe);
        var src = "/api/upload/fotolife_smart";
        iframe.attr('src', src);
        iframe.addClass('uploader');
        iframe.load(function () {
            var document;
            if (iframe[0].contentDocument) {
                document = iframe[0].contentDocument;
            } else if (iframe[0].contentWindow) {
                document = iframe[0].contentWindow.document;
            } else {
                return;
            }
            if (document.body.innerHTML.match(/^\s*(f:id:\S+)/)) {
                iframe[0].contentWindow.location.replace(src);
            }
            callback(document.body.innerHTML);

            $(document).find('input[name="fotosize"]').val(fotosize);
            var images = $(document).find('input[type="file"]');
            $(images[0]).change ( function () {
                $(document).find('#fotolife-upload-form').submit();
                $(images[0]).replaceWith($('<h5>').text(Hatena.Locale.text('uploading')));
            });
        });
    };

    // Facebookã‚„Twitterã¨ã®é€£æºã‚’ã—ã¦ã„ã‚‹ã‹ã‚’ç¢ºèªã—ã€ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’æ›´æ–°
    // æ›´æ–°ãŒçµ‚ã‚ã‚‹ã¨resolveã•ã‚Œã‚‹Deferredã‚’è¿”ã™
    Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].updateProfileModule = function () {
        var updated = $.Deferred();

        $.ajax({
            type: 'GET',
            url: '/api/applications_data',
            dataType: 'json'
        }).done(function (res) {
            var data = res;
            var $profile_modules = $('.js-module-value-component-profile');

            $profile_modules.each(function() {
                var $profile_module = $(this);

                if ( data.twitter ) {
                    $profile_module.find('.cannot-twitter-button').remove();
                } else {
                    $profile_module.find('.can-twitter-button').remove();
                    $profile_module.find('.cannot-twitter-button').removeClass('cannot-twitter-button').addClass('cannot-twitter-button-display');
                }

                if ( data.facebook ) {
                    $profile_module.find('.cannot-facebook-follow').remove();
                    $profile_module.find('.cannot-facebook-subscribe').remove();
                } else {
                    $profile_module.find('.can-facebook-follow').remove();
                    $profile_module.find('.can-facebook-subscribe').remove();
                    $profile_module.find('.note').remove();
                    $profile_module.find('.cannot-facebook-follow').removeClass('.cannot-facebook-follow').addClass('.cannot-facebook-follow-display');
                    $profile_module.find('.cannot-facebook-subscribe').removeClass('cannot-facebook-subscribe').addClass('cannot-facebook-subscribe-display');
                }
            });

            updated.resolve();
        }).fail(function() {
            updated.reject();
        });

        return updated.promise();
    };

    // ã‚µãƒ¼ã‚¯ãƒ«ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’æ›´æ–°
    // æ›´æ–°ãŒçµ‚ã‚ã‚‹ã¨resolveã•ã‚Œã‚‹Deferredã‚’è¿”ã™
    Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].updateCirclesModule = function () {
        var updated = $.Deferred();
        if ($('#module-value-component-circles').length === 0) {
            updated.resolve();
            return updated.promise();
        }

        $.ajax({
            type: 'GET',
            url: '/api/circles',
            data: { blog: Hatena.Diary.data('blogs-uri-base')  },
            dataType: 'json'
        }).done(function (res) {
            var mkSelectCircle = _.template($('.js-module-circles-select-circles-template').html().replace(/^\s+|\s+$/g, ''));
            _.each(res.circles, function (circle) {
                $('.js-select-circles-container').each(function() {
                    $(this).append($(mkSelectCircle({ circle: circle })));
                });
            });
            updated.resolve();
        }).fail(function() {
            updated.reject();
        });

        return updated.promise();
    };

    Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].setupEditor = function (args) {
        var form     = args.form;
        var syntax   = args.syntax;
        var textarea = args.textarea;

        if (!textarea[0]) return;

        var container = document.createElement('div');
        $(container)
            .css({
                position: 'absolute',
                top: 'auto',
                left: 0,
                bottom: 50,
                padding: 0,
                margin: 0,
                borderTop: '1px solid #ccc',
                borderBottom: '1px solid #ccc',
                width: '500px',
                height: '400px',
                zIndex: 9999,
                background: '#fff'
            }).
            appendTo(document.body).
            hide();

        textarea.css({
            'font-size': '11px',
            'white-space': 'nowrap',
            'overflow': 'hidden'
        });

        var editor = ace.edit(container);
        editor.commands.removeCommand('gotoline'); // fucking default keybinding of ace
        editor.commands.removeCommand('indent');
        editor.commands.removeCommand('outdent');

        // editor.renderer.setShowGutter(false);
        editor.renderer.setHScrollBarAlwaysVisible(false);
        editor.renderer.setPadding(5);
        editor.renderer.setShowPrintMargin(false);

        editor.setFontSize("10px");
        editor.setHighlightActiveLine(false);

        var Mode = require('ace/mode/' + syntax).Mode;
        var mode = new Mode();

        var session = editor.getSession();
        session.setMode(mode);
        session.setUseWrapMode(true);

        var editorState = new Hatena.Diary.FormState();

        textarea.focus(function () {
            $(container).show();
            editor.resize();
            editor.focus();
            editorState.enableConfirm();
        });

        editor.on('blur', function () {
            textarea.val(session.getValue());
            textarea.trigger('change');
            $(container).hide();
            editorState.disableConfirm();
        });

        $(container).mousedown(function () { return false });

        session.setValue(textarea.val());

        textarea.change(function () {
            session.setValue(textarea.val());
        });

        $('#tabs').on('tabsactivate', function () {
            setTimeout(function () { editor.resize() }, 0);
        });

        $(window).resize(function () { editor.resize() });
    };

    Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].setupThemesListSwitcher = function () {
        $('.switch-theme-list-types').on('blog:dropdown:selected', '[data-theme-list-type]', function () {
            var listType = $(this).attr('data-theme-list-type');
            $('#themes .themes-container').each(function () {
                $(this).toggle($(this).attr('data-theme-list-type') === listType);
            });
        });

        // ä»¥ä¸‹ã¯åŒã˜ã‚ˆã†ãªæ§‹é€ ã ã£ãŸã‚‰ä½¿ãˆã‚‹ã®ã§
        // ãã®ã¾ã¾ ['*'] ã«ç½®ã„ã¦ã‚‚ã„ã„ã§ã™ã€‚
        var $dropdown     = $('.dropdown-container'),
            $dropdownList = $dropdown.find('.dropdown-list').hide();
        $dropdown
            .on('click', '.dropdown-button, .dropdown-selected', function () {
                var isShown = Hatena.Diary.Window.toggle($dropdownList);
                $dropdownList.toggleClass('opened', isShown);
                return false;
            })
            .on('click', '.dropdown-list-item', function () {
                $dropdown.find('.dropdown-selected').text($(this).text());
                $(this).trigger('blog:dropdown:selected');
            })
            .find('.dropdown-list-item').eq(0).click();
    };

    // ã‚¹ãƒãƒ•ã‚©ç”¨HTMLç·¨é›†æ¬„ã®åˆ¶å¾¡ï¼Œè¨­å®šã«ã‚ˆã£ã¦ã¯æ›¸ã‘ã‚‹ï¼ŒPCç‰ˆã¨åŒã˜å†…å®¹ã‚’è¡¨ç¤ºã™ã‚‹ãƒ¢ãƒ¼ãƒ‰ã®ã¨ãã¯ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒªã‚¢å‡ºã•ãªã„
    Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].setupTextareaHider = function () {
        _.each([
            ['header-touch-show-html-for-pc' , '.js-hide-on-header-touch-show-html-for-pc'],
            ['display-touch'                 , '.js-hide-on-display-touch'],
            ['footer-touch-show-html-for-pc' , '.js-hide-on-footer-touch-show-html-for-pc'],
            ['header-touch-show-image-for-pc' , '.js-hide-on-header-touch-show-image-for-pc']
        ], function(rule) {
            var input_selector = rule[0];
            var target_selector = rule[1];

            var $input = $(':input[name=' + input_selector + ']');
            if (!$input.length) return;

            var $target = $(target_selector);
            if (!$target.length) return;

            var updateVisibility = function() {
                var $checked_input = $(':checked[name=' + input_selector + ']');
                if (!$checked_input.length) return;
                if (+$checked_input.val()) {
                    $target.hide();
                } else {
                    $target.show();
                }
            };

            // å¤‰æ›´ã‚’ç›£è¦–
            // IEã§ã¯changeã‚¤ãƒ™ãƒ³ãƒˆã®ç›´å¾Œã«è¦‹ã‚‹ã¨å¤ã„å€¤ãŒå–ã‚Œã‚‹ã“ã¨ãŒã‚ã‚‹ã®ã§ã¡ã‚‡ã£ã¨å¾…ã£ã¦ã‚‹
            $input.on('change', function() {
                _.defer(updateVisibility);
            });

            // åˆæœŸçŠ¶æ…‹ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
            updateVisibility();
        });
    };

    // æ˜”ã®èƒŒæ™¯ç”»åƒï¼Œæœ€åˆã¯éš ã—ã¦ãŠã„ã¦ï¼Œã‚‚ã£ã¨èª­ã‚€æŠ¼ã—ãŸã‚‰è¦‹ã›ã‚‹
    Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].setupSeeMoreBackgrounds = function() {
        var $button = $('.js-show-more-background-images');
        $button.one('click', function() {
            $button.remove();
            $('#backgrounds li:hidden').show();
        });
    };

    // ã‚¢ã‚¯ã‚»ãƒ³ãƒˆã‚«ãƒ©ãƒ¼è¨­å®šUI
    Hatena.Diary.Pages.Admin['user-blog-config-design-detail'].setupTouchAccentColor = function(args) {
        var $form = args.$form;
        var $accent_color_input = $form.find(':input[name="touch-accent-color"]');

        var $colors = $('#touch-accent-colors');

        var select = function($color) {
            $colors.find('.selected').removeClass('selected');
            $color.addClass('selected');
            var color = $color.attr('data-color');
            $accent_color_input.val(color);
            $form.trigger('change');
        };

        $colors.on('click', '[data-color]', function() {
            select($(this));
        });

        var first_value = $accent_color_input.val();
        select($colors.find('[data-color="' + first_value + '"]'));
    };

})(jQuery);

(function($){

    Hatena.Diary.Pages.Admin['user-blog-config-design'] = function () {
        var css     = $('#css');
        var form    = $('#form-design');

        // themes
        var themeListItems = $('#themes li');
        themeListItems.addClass('ui-selectee').click(function (e) {
            var link = $(this).attr('data-css').replace(/\s+/g, ' ');
            var id   = $(this).attr('data-id');

            var design = new EditDesign(css.val());
            design.setData('theme', id, '@import "' + link + '";');
            css.val(design.getCSS());
            css.trigger('change');

            themeListItems.removeClass('ui-selected');
            $(this).addClass('ui-selected');
        });

        var bgImageThumbnail = $('#background-image-thumbnail');
        // background-image
        var backgroundListItems = $('#backgrounds li');
        // background-color
        var backgroundColorListItems = $('#background-colors li');

        backgroundListItems.addClass('ui-selectee').click(function (e) {
            var style = $(this).attr('data-css').replace(/\s+/g, ' ');
            var id    = $(this).attr('data-id');

            var design = new EditDesign(css.val());
            design.setData('background', id, style);
            css.val(design.getCSS());
            css.trigger('change');

            backgroundListItems.removeClass('ui-selected');
            backgroundColorListItems.removeClass('ui-selected');
            $(this).addClass('ui-selected');
            // ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ãŸèƒŒæ™¯ç”»åƒã‹ã‚‰ã‚‚ã‚¯ãƒ©ã‚¹ã‚’å¤–ã™
            bgImageThumbnail.removeClass('ui-selected');
            $('input[name="bg-image-selected"]').val(0);
        });

        backgroundColorListItems.addClass('ui-selectee').click(function (e) {
            var style = $(this).attr('data-css').replace(/\s+/g, ' ');
            var id    = $(this).attr('data-id');
            var design = new EditDesign(css.val());

            // ã‚«ã‚¹ã‚¿ãƒ èƒŒæ™¯ç”»åƒãŒé¸æŠã•ã‚Œã¦ã„ã¦ï¼Œã‹ã¤ï¼ŒCSSã«ï¼ŒèƒŒæ™¯ç”»åƒã®è¨­å®šãŒæ›¸ã‹ã‚Œã¦ã„ã‚‹å ´åˆã¯ã€background-colorã ã‘å¤‰ãˆã‚‹
            // CSSã«æ—¢å­˜ã®èƒŒæ™¯ç”»åƒã®è¨­å®šãŒæ›¸ã‹ã‚Œã¦ã„ãªã„ã¨ãã¯å˜ã«èƒŒæ™¯è‰²ã‚’è¨­å®šã™ã‚‹
            var backgroundContent = design.getData('background').content;
            if ( bgImageThumbnail.hasClass('ui-selected') && backgroundContent ) {
                style = backgroundContent.replace(/background-color:(.*?);/, 'background-color:#' + id + ';');

                id = "custom";
            }
            backgroundListItems.removeClass('ui-selected');

            design.setData('background', id, style);
            css.val(design.getCSS());
            css.trigger('change');

            backgroundColorListItems.removeClass('ui-selected');
            $(this).addClass('ui-selected');
        });

        var design = new EditDesign(css.val());

        // for backward compatibility :: delete later
        new function () {
            if (/<system/.test(design.css)) return;

            var changed = false;

            design.css = design.css.replace(/@import "\/css\/theme\/([^\/]+)\/\1.css";/, function (_, id) {
                changed = true;
                return '/* <system section="theme" selected="' + id + '"> */\n' + _ + '\n/* </system> */\n';
            });

            design.css = design.css.replace(RegExp('\n?/\\*system:background\\*/(.*)'), function (_, style) {
                changed = true;
                design.setData('background', 'unknown', style);
                return '';
            });

            if (changed) {
                design.setCSS(design.css);
                css.val(design.getCSS());
                css.trigger('change');
            }
        } ();

        var currentTheme = design.getData('theme').selected;
        if (currentTheme) {
            themeListItems.filter('[data-id="' + currentTheme + '"]').addClass('ui-selected');
        } else {
            themeListItems.removeClass('ui-selected');
        }

        var currentBackground = design.getData('background').selected;
        if (currentBackground) {
            $('#backgrounds, #background-colors').find('[data-id="'+currentBackground+'"]').addClass('ui-selected');
        } else {
            backgroundListItems.removeClass('ui-selected');
        }

    };

})(jQuery);

(function($){

    Hatena.Diary.Pages.Admin['user-blog-config-detail'] = function () {
        $('.main-tab').find('.user-blog-config-detail').addClass('current-tab');

        $('#blog-config-custom-domain .check-validity').click(function (e) {
            var $this = $(this);
            $this.attr('disabled', 'disabled').addClass('disabled');
            $('#blog-config-custom-domain .validity-status').text('-');
            $.ajax({
                type: 'POST',
                url: '/api/custom_domain.check',
                data: $this.closest('form').serialize(),
                dataType: 'json',
                success: function (data) {
                    $('#blog-config-custom-domain .validity-status').text(data.message);
                    $('#blog-config-custom-domain .validity-status.detail').text(data.detail || '');
                },
                complete: function () {
                    $this.removeAttr('disabled').removeClass('disabled');
                }
            });
            return false;
        });
    };

})(jQuery);

(function($){

    Hatena.Diary.Pages.Admin['user-blog-config-external'] = function () {
        var withParentWindow = Hatena.Diary.Location.param('with_parent_window');
        var callback = Hatena.Diary.Location.param('callback');

        // è¦ªwindowãŒã‚ã£ã¦ã€OAuthèªè¨¼ã‹ã‚‰æˆ»ã£ã¦ããŸæ™‚ã¯windowã‚’é–‰ã˜ã‚‹
        if (withParentWindow && callback) {
            window.close();
        }
    };

})(jQuery);

(function($){

    Hatena.Diary.Pages.Admin['user-blog-config-permission'] = function () {
        var $authconfigs = $('.permission-authconfigs');
        var $permission_custom = $('#permission-custom');
        $('#new-authconfig').click(function () { $('#create-authconfig').submit(); });

        if ($('#viewable-id-select').length > 0) {
            // æ—¢å­˜ã®èªè¨¼ã‚»ãƒƒãƒˆã‚ã‚‹ã¨ãé¸æŠã«ã‚ã‚ã›ã¦å¯¾å¿œã™ã‚‹ç·¨é›†ãƒªãƒ³ã‚¯ãªã©ã‚’å‡ºã—ãŸã‚Šæ¶ˆã—ãŸã‚Šã™ã‚‹
            $('#viewable-id-select').change(function () {
                var selected = $(this).find('option:selected');
                var detail_id = selected.attr('data-ac');
                $authconfigs.find('.authconfig-detail').addClass('hide');
                $authconfigs.find('.' + detail_id).removeClass('hide');
            }).change();
        } else {
            // æ—¢å­˜ã®èªè¨¼ã‚»ãƒƒãƒˆãªã„ã¨ãã¯æ–°ã—ã„å…¬é–‹ç¯„å›²ã‚’ä½œæˆãƒœã‚¿ãƒ³ã ã‘è¡¨ç¤º
            $('.authconfig-detail-new').show();
        }

        $('[name="permission"]').change(function () {
            if ($('#permission-public').prop('checked')) {
                $('.config-private-overlay').show();
            } else {
                $('.config-private-overlay').hide();
            }

            // å…¬é–‹ç¯„å›²è¨­å®šã‚’éš ã™ã®ã¯ï¼Œã‚«ã‚¹ã‚¿ãƒ ãŒé¸æŠå¯èƒ½ã§ï¼Œã‹ã¤ï¼Œãƒã‚§ãƒƒã‚¯ã•ã‚Œã¦ã„ãªã„ã¨ã
            if (!$permission_custom.attr('disabled') && !$permission_custom.prop('checked')) {
                $('#permission-custom-viewable-id').hide();
            } else {
                $('#permission-custom-viewable-id').show();
            }
        }).change();
    };

})(jQuery);

(function($){

    Hatena.Diary.Pages.Admin['user-blog-config-theme-theme_id-preview'] = function () {
        var $previewForm = $('#theme-preview-form');
        var $saveForm     = $('#theme-install-form');
        var noticeMessage = $saveForm.find('.notice').text();

        $saveForm.on('submit', function () {
            return confirm(noticeMessage);
        });

        $previewForm.submit();
    };

})(jQuery);

// æŠ•ç¨¿æ™‚ã®å…±æœ‰ã™ã‚‹ãƒœã‚¿ãƒ³ã«é–¢é€£ã—ãŸå‡¦ç†ã‚’æ‰±ã†
(function($) {
    Hatena.Diary.SocializeBox = {
        setup: function(entry_id) {
            var self = this;

            self.entry_id = entry_id;

            // ç¾åœ¨ã®èªè¨¼æƒ…å ±ã‚’ä¿å­˜ã—ã¦ãŠã
            self.saveExternalAuthorizeConfig();

            // å¤–éƒ¨é€£æºè¨­å®šç”¨
            self.setupExternalAuthLink();
        },
        setupExternalAuthLink: function() {
            var self = this;

            // Bãƒ‘ã‚¿ãƒ¼ãƒ³ã®ã¿ã€é€£æºãƒªãƒ³ã‚¯ã‚„ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯ã§æ–°ã—ã„windowãŒé–‹ãã‚ˆã†ã«
            var external_auth_href = $('html').attr('data-admin-domain') + "/-/config/external?with_parent_window=1";
            $(document).on('click', '[data-open-external-auth-link=1]', function (e) {
                e.preventDefault();

                var options = { width:900, height:600, scrollbars: 'yes' };
                options.left = Math.floor((screen.width - options.width) / 2);
                options.top  = Math.floor((screen.height - options.height) / 2);
                var external_auth_window = window.open(
                    external_auth_href,
                    'external_auth',
                    Hatena.Diary.Util.positionToPositionString(options)
                );

                // é€£æºå®Œäº†ã—ãŸã‚‰windowãŒé–‰ã˜ã‚‰ã‚Œã‚‹ã®ã§ç›£è¦–
                // ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ãƒœã‚¿ãƒ³ã®çŠ¶æ…‹æ›´æ–°ã‚’ã™ã‚‹
                Hatena.Diary.Util.waitForResource(function () {
                    return external_auth_window.closed;
                }, function () {
                    var $modal = $('.js-socialize-modal');
                    // modalãŒã‚ã£ãŸã‚‰é–‰ã˜ã‚‹
                    if ($modal.length > 0) {
                        $modal.hide();
                        $('.modal-window-background').fadeOut('fast');
                    }

                    // é€£æºæƒ…å ±ã‚’å†å–å¾—ã—ã€æ›´æ–°
                    self.getExternalAuthStatus().done(function (html) {
                        // å†åº¦é€£æºè¨­å®šã™ã‚‹äººãŒã„ã‚‹ã‹ã‚‚ã—ã‚Œãªã„ã®ã§æœ€æ–°ã®æƒ…å ±ã‚’ä¿å­˜ã—ã¦ãŠã
                        self.saveExternalAuthorizeConfig();

                        self.refreshSocializeBox(html);

                        var isAuthorized = self.isExternalAuthorizeFinished();
                        if (isAuthorized) {
                            // é€£æºå®Œäº†ã—ãŸã‚‰é©åˆ‡ãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º
                            var $external_auth_message = $('.js-socialize-box .js-external-auth-message');
                            var $external_auth_finish_message = $('.js-socialize-box .js-external-auth-finish-message');
                            $external_auth_message.hide();
                            $external_auth_finish_message.show();
                        }

                    });
                });

                return false;
            });
        },
        refreshSocializeBox: function(html) {
          $('.js-refresh-socialize-box').empty().html(html);
        },
        saveExternalAuthorizeConfig: function() {
            // èªè¨¼æƒ…å ±ã‚’ä¿å­˜ã—ã¦ãŠã
            // å¾Œã§é€£æºå®Œäº†ã—ãŸã‹ç¢ºèªã™ã‚‹æ™‚ã«ä½¿ã†
            this.externalAuthorizeConfig = {
                twitter:  $('.js-authenticated-twitter').size() == 1,
                facebook: $('.js-authenticated-facebook').size() == 1,
                mixi:     $('.js-authenticated-mixi').size() == 1
            };
        },
        // ä¿å­˜ã—ã¦ãŠã„ã¦èªè¨¼æƒ…å ±ã¨æ¯”è¼ƒã—ã¦å¤‰ã‚ã£ã¦ã„ãŸå ´åˆã¯trueã‚’è¿”ã™
        isExternalAuthorizeFinished: function () {
            var config = this.externalAuthorizeConfig;

            return (
                config.twitter  === false && $('.js-authenticated-twitter').size() == 1 ||
                config.facebook === false && $('.js-authenticated-facebook').size() == 1 ||
                config.mixi     === false && $('.js-authenticated-mixi').size() == 1
            );
        },
        // å¤–éƒ¨é€£æºæƒ…å ±ã‚’å–å¾—ã™ã‚‹
        getExternalAuthStatus: function () {
            var dfd = $.Deferred();
            $.ajax({
                url: 'socialize_box',
                type: 'GET',
                dataType: 'html',
                data: { entry_id: this.entry_id }
            }).done(function (data) {
                dfd.resolve(data);
            }).fail(function () {
                dfd.reject();
            });

            return dfd.promise();
        }
    };
})(jQuery);

(function($){
    Hatena.Diary.Pages.Admin['user-blog-edit-done'] = function () {
        Hatena.Diary.Pages.createForParent();

        var entry = document.getElementById('posted').value;
        Hatena.Diary.Pages.send('update', { entry : entry });

        $('.js-button-focus-this').focus();

        Hatena.Diary.SocializeBox.setup($('.js-socialize-box').data('entry-id'));

        // deactivate click-jacking-escape in 1000msec
        setTimeout(function () {
            $('form').each(function () {
                var $this    = $(this);
                var $buttons = $this.find('input[type=submit]');
                $this.removeClass('unedited');
                $buttons.removeAttr('disabled');
            });
        }, 1000);
        // proã«ãªã‚Šã¾ã›ã‚“ã‹ãƒ¢ãƒ¼ãƒ€ãƒ«
        Hatena.Diary.setupProModal();

        var modal = new ExternalAuthModalHandler($('.js-socialize-modal'));

        var shareModal;
        $(document).on('click', '.js-share-button', function() {
            var service_name = $(this).data('share-service');

            var $modal = $('.js-' + service_name + '-modal');
            var $share_success_message = $('.js-share-success-message');
            var entry_id = $('.js-socialize-box').data('entry-id');

            shareModal = new ShareModal($modal, $share_success_message, entry_id, service_name);

            var message = $('.js-share-message');
            // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒã‚ã‚‹
            // ã‚µãƒ¼ãƒ“ã‚¹ãŒtwitter
            // å…ˆé ­ãŒã¯ã¦ãªãƒ–ãƒ­ã‚°ã«ã«æŠ•ç¨¿ã—ã¾ã—ãŸã®æ™‚(ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆæ–‡è¨€ã„ã˜ã£ãŸå ´åˆã¯é¸æŠã—ãªã„)
            var posted = Hatena.Locale.text('blog.posted');
            var is_default_posted_text = message.val().substr(0, posted.length) === posted;
            if (message.get(0) && service_name == 'twitter' && is_default_posted_text) {
                new SelectText(message[0], 0, posted.length).select();
            }

            return false;
        });
        $(document).on('click', '.js-official-share-button', function() {
            var url = $(this).attr('href');
            new OfficialShareWindow(url, 550, 450, screen.width, screen.height);
            return false;
        });
    };

    var OfficialShareWindow = function (url, width, height, screen_width, screen_height) {
        this.init(url, width, height, screen_width, screen_height);
    };
    OfficialShareWindow.prototype = {
        init: function (url, width, height, screen_width, screen_height) {
            this.url           = url;
            this.width         = width;
            this.height        = height;
            this.screen_width  = screen_width;
            this.screen_height = screen_height;

            this.setLeft();
            this.setTop();
            this.openWindow();
        },
        setLeft: function() {
            this.left = Math.floor((this.screen_width - this.width) / 2);
        },
        setTop: function() {
            this.top  = Math.floor((this.screen_height - this.height) / 2);
        },
        openWindow: function () {
            window.open(
                this.url,
                'share_window',
                Hatena.Diary.Util.positionToPositionString({
                    width: this.width,
                    height: this.height,
                    screen_width: this.screen_width,
                    screen_height: this.screen_height,
                    left: this.left,
                    top: this.top,
                    scrollbars: 'yes'
                })
            );
        }
    };

    var ShareModal = function ($modal, $share_success_message, entry_id, service_name) {
        this.init($modal, $share_success_message, entry_id, service_name);
    };
    ShareModal.prototype = {
      init: function ($modal, $share_success_message, entry_id, service_name) {
          this.$modal =  $modal;
          this.$textarea = this.$modal.find('.js-share-message');
          this.$share_success_message = $share_success_message;

          // ã‚·ã‚§ã‚¢ã«æˆåŠŸã—ãŸæ™‚ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’æ¶ˆã™
          this.hideShareSuccessMessage();

          this.service_name = service_name;
          this.entry_id = entry_id;

          this.bindEvents();
          this.showModal();
      },
      bindEvents: function() {
          self = this;
          $(document).on('click', '.js-icon-close', function () {
              self.hideModal();
          });

          self.$textarea.keyup(function() {
              if (self.validateMessage(self.$textarea.val()) === false) {
                   self.$modal.find('.js-validation-error').show();
                   self.isShareButtonDisabled = true;
              }
              else {
                   self.$modal.find('.js-validation-error').hide();
                   self.isShareButtonDisabled = false;
              }
          });
          $(document).on('click', '.js-share-execute-button', function () {
              // é€šä¿¡ä¸­ã¾ãŸã¯ãƒœã‚¿ãƒ³ãŒdisabledã®æ™‚ã¯å³return
              if (self.isAjaxRunning === true || self.isShareButtonDisabled === true) return false;

              var message = self.$textarea.val();
              if (self.validateMessage(message) === true ) self.post(message);

              return false;
          });
      },
      showModal: function () {
          Hatena.Diary.Window.show(this.$modal);
      },
      hideModal: function () {
          self.$modal.find('.js-validation-error').hide();
          Hatena.Diary.Window.hideAll();
      },
      validateMessage: function (message) {
          if (this.service_name === 'twitter') {
              return Hatena.Diary.validationTweetLength(message);
          }

          return true;
      },
      isAjaxRunning: false,
      isShareButtonDisabled: false,
      showShareSuccessMessage: function () {
        this.$share_success_message.find('p').text(
            Hatena.Locale.text('blog.social.share.success', Hatena.Locale.text('blog.social.service.name.' + this.service_name))
        );
        this.$share_success_message.show();
      },
      hideShareSuccessMessage: function () {
        this.$share_success_message.hide();
      },
      post: function (message) {
          var self = this;
          // é€£æ‰“ã—ã¦è¤‡æ•°å›ãƒã‚¹ãƒˆã•ã‚Œãªã„ã‚ˆã†ã«disableã«ã—ã¦ãŠã
          self.isAjaxRunning = true;
          $.ajax({
              url: 'post_to_social_service',
              type: 'POST',
              data: {
                  rkm: Hatena.Diary.data('rkm'),
                  rkc: Hatena.Diary.data('rkc'),
                  service_name: self.service_name,
                  entry_id: self.entry_id,
                  message: message
              }
          }).done(function (data) {
              self.hideModal();
              self.showShareSuccessMessage();
          }).fail(function () {
              // å®Œäº†æ™‚ã¯modalãŒé–‰ã˜ã‚‰ã‚Œã‚‹ã®ã§failã®æ™‚ã ã‘falseã‚’å…¥ã‚Œã¦ã¾ãŸé€šä¿¡ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹
              self.isAjaxRunning = false;
          });
      }
    };


    var ExternalAuthModal = function() {};
    ExternalAuthModal.prototype = {
        setModalDisabled: function () {
            try {
              localStorage['Hatena.Diary.Admin.User.Blog.Edit.Done.ExternalAuthModal.disabled'] = true;
            } catch(ignore) {}
        },

        isModalDisabled: function () {
            try {
                var is_disabled = localStorage['Hatena.Diary.Admin.User.Blog.Edit.Done.ExternalAuthModal.disabled'];
                return is_disabled === 'true' ? true : false;
            } catch(ignore) {}
        }
    };

    var ExternalAuthModalHandler = function($el) {
        this.init($el);
    };
    ExternalAuthModalHandler.prototype = {
        init: function ($el) {
            var self = this;

            self.$el   = $el;
            self.modal = new ExternalAuthModal();

            // modalãŒã‚ã‚‹ã‹ã¤éè¡¨ç¤ºã«ã—ã¦ã„ãªã‹ã£ãŸã‚‰è¡¨ç¤ºã™ã‚‹
            if (self.$el.length && !self.modal.isModalDisabled()) {
                self.showModal();
            }

            // modalå†…ã‚’clickã™ã‚‹ã¨é–‰ã˜ã¦ã—ã¾ã†ãŸã‚æ­¢ã‚ã¦ã„ã‚‹
            // checkboxã¨ã‹æŠ¼ã—ãŸç¬é–“é–‰ã˜ã‚‰ã‚Œã‚‹ã¨å›°ã‚‹
            self.$el.on('click', function(event) {
               event.stopPropagation();
            });

            // ã‚¹ã‚­ãƒƒãƒ—ãƒœã‚¿ãƒ³æŠ¼ã•ã‚ŒãŸã‚‰é–‰ã˜ã‚‹
            self.$el.on('click', '.js-skip-button', function () {
                // æ¬¡å›ã‹ã‚‰è¡¨ç¤ºã—ãªã„ã«ãƒã‚§ãƒƒã‚¯ãŒå…¥ã£ã¦ã„ãŸã‚‰
                // ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«å€¤ã‚’ã‚»ãƒƒãƒˆã™ã‚‹
                if (self.$el.find('.js-non-display-checkbox').prop('checked')) {
                    self.modal.setModalDisabled();
                }
                self.hideModal();
                return false;
            });
        },

        showModal: function () {
            Hatena.Diary.Window.show(this.$el, { center: 1, showBackground: true });
        },

        hideModal: function () {
            Hatena.Diary.Window.hide(this.$el);
        }

    };

    var SelectText = function($el, start, end) {
        this.init($el, start, end);
    };
    SelectText.prototype = {
        init: function ($el, start, end) {
            this.$el   = $el;
            this.start = start;
            this.end   = end;
        },
        select: function () {
            this.$el.focus();

            if (this.$el.createTextRange) {
                var range = this.$el.createTextRange();
                range.collapse(true);
                range.moveStart('character', this.start);
                range.moveEnd('character', this.end);
                range.select();
            }
            else {
               this.$el.selectionStart = this.start;
               this.$el.selectionEnd   = this.end;
            }
        }
    };
})(jQuery);

(function($){

    Hatena.Diary.Pages.Admin['user-blog-edit'] = function () {
        if (window.parent != window) {
            Hatena.Diary.Pages.createForParent();
            Hatena.Diary.Pages.send('ready');
        }

        var title            = $('#title');
        var count            = $('#character-count');
        var container        = $('#editor');
        var form             = $('#edit-form');
        var main             = $('#editor-main');
        var supportContainer = $('#editor-support-container');
        var supportItems     = $('#items');
        var curations        = $('#editor .curation-tab-content');

        var formState = new Hatena.Diary.FormState();
        formState.observeForm(form);

        var editor = new Hatena.Diary.Editor(form);
        editor.bind('initialize', function () {
            formState.setFormInitialState();
        });
        editor.trigger('initialize');

        editor.bind('change', function () {
            formState.checkFormState();
            var c = editor.getCharacterCount();
            count.text(Hatena.Locale.textN('edit_form.character_count_unit', c, c));

            if (window.parent != window) Hatena.Diary.Pages.send('change', formState.isConfirmEnabled());
        });
        setTimeout(function () { editor.focus() }, 100);

        title.on('keydown', function(event) {
            if(keyString(event) === 'RET') {
                editor.focus();
                return false;
            }
        });

        editor.form.submit(function() {
            var submitButton = editor.form.find(':submit');
            var disable = function() {
                editor.form.addClass('unedited');
                submitButton.attr('disable', 'disable');
            };
            var enable = function() {
                editor.form.removeClass('unedited');
                submitButton.removeAttr('disable');
            };

            var maxLength = 655360; // 2^16 * 10 ã¾ã§ã¨ã™ã‚‹
            if (editor.getByteCount() > maxLength) {
                disable();
                editor.bind('change', enable);
                alert(Hatena.Locale.text('edit_form.body_length_exceeded_error'));
                return false;
            } else { // æ–‡å­—æ•°åˆ¶é™ã«ã²ã£ã‹ã‹ã‚‰ãšã€æŠ•ç¨¿ã«æˆåŠŸã™ã‚‹å ´åˆ
                Hatena.Diary.Util.preventDuplicateSubmit($(editor.form));

                if (window.parent != window) Hatena.Diary.Pages.send('change', false);
            }
        });

        Hatena.Diary.Editor.Support.currentEditor = editor;
        Hatena.Diary.currentCategoryEditor =
            new Hatena.Diary.Pages.Admin['user-blog-edit'].CategoryEditor(form, '#entry-categories');

        new Hatena.Diary.Pages.Admin['user-blog-edit'].OgImageEditor(form, '#og-image');

        var datetimeEditor = new Hatena.Diary.Pages.Admin['user-blog-edit'].DateTimeEditor(form, '#datetime-input');
        Hatena.Diary.Pages.Admin['user-blog-edit'].observeForScheduledEntry(datetimeEditor);

        // setupGooglePicker()ã§ã¯ï¼ŒEditorSidebar.setup()ã§å‘¼ã°ã‚Œã‚‹triggerã‚¤ãƒ™ãƒ³ãƒˆã‚’DOMã«è¨­å®šã—ã¦ã„ã‚‹ã®ã§ï¼Œ
        // EditorSidebar.setup()ã‚ˆã‚Šã‚‚å‰ã«å‘¼ã°ã‚Œã‚‹å¿…è¦ãŒã‚ã‚‹ï¼
        Hatena.Diary.Pages.Admin['user-blog-edit'].setupGooglePicker();

        Hatena.Diary.Pages.Admin['user-blog-edit'].EditorSidebar.setup();

        Hatena.Diary.Pages.Admin['user-blog-edit'].setupResizeEditor({
            main: main,
            editor: editor,
            curations: curations,
            supportItems: supportItems
        });

        new Hatena.Diary.Pages.Admin['user-blog-edit'].AmazonSearch({
            container: $('#editor-amazon-search')
        });

        // åˆå¿ƒè€…ã‚¿ãƒ–ãŒã‚ã‚‹ãªã‚‰ã€è‡ªå‹•çš„ã«åˆå¿ƒè€…ã‚¿ãƒ–ã‚’è¡¨ç¤ºã™ã‚‹
        var $beginnerTab = $('.curation-bar-itemlist .beginner');
        if ( $beginnerTab.length > 0 ) {
            if ( ! $beginnerTab.hasClass('active') ) {
                $beginnerTab.trigger('click');
            }
            $('.twitter-open-button').click ( function () {
                $('.curation-bar-itemlist .twitter').trigger('click');
                return false;
            });
        }

        if ($('#editor-twitter').hasClass('enabled')) {
            new Hatena.Diary.Pages.Admin['user-blog-edit'].Twitter({
                container: $('#editor-twitter')
            });
        }

        new Hatena.Diary.Pages.Admin['user-blog-edit'].HatenaBookmark({
            container: $('#editor-hatena-bookmark')
        });

        Hatena.Diary.Pages.Admin['user-blog-edit'].Fotolife.init();
        Hatena.Diary.Pages.Admin['user-blog-edit'].Paint.init();

        if ($('#editor-itunes.enabled').get(0)) {
            new Hatena.Diary.Pages.Admin['user-blog-edit'].Itunes({
                container: $('#editor-itunes')
            });
        }

        if ($('#editor-archive.enabled').get(0)) {
            new Hatena.Diary.Pages.Admin['user-blog-edit'].Archive({
                container: $('#editor-archive')
            });
        }

        if ($('#editor-instagram.enabled').get(0)) {
            new Hatena.Diary.Pages.Admin['user-blog-edit'].Instagram({
                container: $('#editor-instagram')
            });
        }

        if ($('#editor-evernote.enabled').get(0)) {
            new Hatena.Diary.Pages.Admin['user-blog-edit'].Evernote({
                container: $('#editor-evernote')
            });
        }

        if ($('#editor-pixiv.enabled').get(0)) {
            new Hatena.Diary.Pages.Admin['user-blog-edit'].Pixiv({
                container: $('#editor-pixiv')
            });
        }

        new Hatena.Diary.Pages.Admin['user-blog-edit'].Miil({
            container: $('#editor-miil')
        });

        new Hatena.Diary.Pages.Admin['user-blog-edit'].Gourmet({
            container: $('#editor-gourmet')
        });

        new Hatena.Diary.Pages.Admin['user-blog-edit'].Nicovideo({
            container: $('#editor-nicovideo')
        });

        new Hatena.Diary.Pages.Admin['user-blog-edit'].Gist({
            container: $('#editor-gist')
        });

        new Hatena.Diary.Pages.Admin['user-blog-edit'].Flickr({
            container: $('#editor-flickr')
        });

        if ($('.promotion-entry').get(0)) {
            new Hatena.Diary.Pages.Admin['user-blog-edit'].Promotion({
                $element: $('.promotion-entry-container'),
                $buttons: $('.promotion-button'),
                $cancelButtons: $('.promotion-cancel-button'),
                $pager: $('.promotion-pager-markers')
            });
        }

        Hatena.Diary.Pages.Admin['user-blog-edit'].setupEditorSidebarHome();

        Hatena.Diary.Pages.Admin['user-blog-edit'].setupOgDescriptionInput(editor);

        var embedBox = new Hatena.Diary.Pages.Admin['user-blog-edit'].EmbedBox({
            $container: $('.js-editor-embed-box')
        });

        // URLãŒpasteã•ã‚Œã‚‹ã¨ã‚¤ãƒ™ãƒ³ãƒˆç™ºç”Ÿã™ã‚‹
        // ã‚¤ãƒ™ãƒ³ãƒˆæ‹¾ã£ã¦URLè²¼ã‚Šä»˜ã‘ãƒœãƒƒã‚¯ã‚¹ã‚’é–‹ã
        // ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã•ã‚ŒãŸã‚‰URLã‚’ã‚¨ãƒ‡ã‚£ã‚¿ã«æŒ¿å…¥
        // ã‚ªãƒ—ãƒˆã‚¢ã‚¦ãƒˆã•ã‚Œã¦ã‚‹ã¨ãã‚‚ï¼Œãã®ã¾ã¾URLã‚’ã‚¨ãƒ‡ã‚£ã‚¿ã«æŒ¿å…¥
        $(editor).on('paste-url', function(event, url) {
            if (embedBox.isEnabledOnPasteURL()) {
                embedBox.setURL(url);
                var session = embedBox.show();
                embedBox.requestPreview();
                session.fail(function() {
                    editor.insert(url);
                });
                Hatena.Diary.trackEvent('EmbedBox.showFromPaste');
            } else {
                editor.insert(url);
            }
        });

        Hatena.Diary.SocializeBox.setup();
    };

    Hatena.Diary.Pages.Admin['user-blog-edit'].setupEditorSidebarHome = function() {

        Hatena.Diary.Pages.Admin['user-blog-edit'].setupEditorSidebarHome.setupEditMode();

        Hatena.Diary.Pages.Admin['user-blog-edit'].setupEditorSidebarHome.setupButtons();

        Hatena.Diary.Pages.Admin['user-blog-edit'].setupEditorSidebarHome.setupButtonActive();
    };

    Hatena.Diary.Pages.Admin['user-blog-edit'].setupEditorSidebarHome.setupEditMode = function() {
        var $home = $('#editor-home');

        $home.on('click', 'button.toggle-edit-mode', function(event) {
            var $button = $(this);

            if ($button.text().match(Hatena.Locale.text('edit_tab'))) {
                $button.text(Hatena.Locale.text('done'));
            } else {
                $button.text(Hatena.Locale.text('edit_tab'));
            }

            $home.find('.config').slideToggle(300);
        });
    };

    // ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆãƒœã‚¿ãƒ³ã‚’é…ç½®ã™ã‚‹ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ãŒå¤‰åŒ–ã—ãŸã‚‰è¨˜éŒ²
    Hatena.Diary.Pages.Admin['user-blog-edit'].setupEditorSidebarHome.setupButtons = function () {

        var $home = $('#editor-home');
        $home.on('change', 'input', function(event) {
            var $input = $(this);
            var $service = $input.closest('.service');
            var service_id = $service.attr('data-service-id');

            var show = $input.prop('checked') ? 1 : 0;

            $.ajax({
                url: 'edit_sidebar_button',
                type: 'POST',
                data: {
                    service_id: service_id,
                    show: show,
                    rkm: Hatena.Diary.data('rkm'),
                    rkc: Hatena.Diary.data('rkc')
                }
            }).done(function(res) {
                $('.curation-bar-itemlist').replaceWith(res);
            });
        });
    };

    // ã‚µãƒ¼ãƒ“ã‚¹åã«ãƒ›ãƒãƒ¼ã—ãŸã¨ãã‚¢ã‚¤ã‚³ãƒ³ã«ã‚‚è‰²ã¤ã‘ã‚‹
    Hatena.Diary.Pages.Admin['user-blog-edit'].setupEditorSidebarHome.setupButtonActive = function () {
        var $home = $('#editor-home');
        $home.on('mouseenter', '.about', function() {
            var $about = $(this);
            $about.find('.curation-itemlist').addClass('active');
        }).on('mouseleave', '.about', function() {
            var $about = $(this);
            $about.find('.curation-itemlist').removeClass('active');
        });
    };

    Hatena.Diary.Pages.Admin['user-blog-edit'].setupResizeEditor = function (args) {
        var main         = args.main;
        var editor       = args.editor;
        var supportItems = args.supportItems;
        var curations    = args.curations;
        if (!main) { return }

        $(window).resize(_.throttle(function () {
            var mainHeight = $(window).height() - main.offset().top;
            var buttonsHeight = 100;
            editor.setHeight(mainHeight - buttonsHeight);

            curations.height(mainHeight);
        })).resize();
    };

    // ç·¨é›†ã‚µã‚¤ãƒ‰ãƒãƒ¼ã®é–‹é–‰ï¼Œã‚µãƒ¼ãƒ“ã‚¹ã®åˆ‡ã‚Šæ›¿ãˆï¼Œconfigã«ä¿å­˜
    // publicãªãƒ¡ã‚½ãƒƒãƒ‰ã¯å¤–ã‹ã‚‰å‘¼ã‚“ã§ã‚‚ã‚ˆã„
    Hatena.Diary.Pages.Admin['user-blog-edit'].EditorSidebar = {
        setup: function() {         // public
            this.$editor = $('#editor');
            this.$container = $('#editor-support-container');
            this.$services = this.$container.find('.services');
            this.$header = this.$container.find('.header');
            this.$footer = this.$container.find('.footer');

            this.bindEvents();
            this.restoreLastStatus();
        },
        bindEvents: function() {
            var self = this;

            self.$container.on('click', '.curation-bar-toggle', function(event) {
                self.toggle();
                return false;
            });

            self.$container.on('click', '[data-support-type]', function(event) {
                var clickedType = $(this).attr('data-support-type');
                self.openByType(clickedType);
                return false;
            });

            $(window).resize(_.throttle(function () {
                var mainHeight = $(window).height() - $('#editor-main').offset().top;
                self.$services.height(
                    mainHeight -
                        self.$header.outerHeight(true) -
                        (self.$services.outerHeight(true) - self.$services.height()) * 2
                );
            })).resize();

        },
        restoreLastStatus: function() {
            var lastStatus = this.$editor.attr('data-support-type');

            this.openByType(lastStatus);
        },
        isOpening: function() {
            return $(document.body).hasClass('support-shown');
        },
        toggle: function() {        // public
            if (this.isOpening()) {
                this.close();
            } else {
                this.openByType('editor-home');
            }
        },
        openByType: function(type) { // public
            if (!type) {
                this.close();
                return;
            }
            var $content = this.$container.find('#' + type);
            if (!$content.get(0)) return this.close();

            // è¡¨ç¤ºä¸­ã®è¦ç´ æ¶ˆã™
            var $previous_button = this.$container.find('.curation-itemlist.active');
            $previous_button.removeClass('active');
            $previous_button.removeClass($previous_button.attr('data-icon-class-when-active'));
            $previous_button.addClass($previous_button.attr('data-icon-class'));

            this.$container.find('.curation-tab-content').hide();

            // è¡¨ç¤º
            $(document.body).addClass('support-shown');

            var $button = this.$container.find('.curation-itemlist[data-support-type=' + type + ']');
            $button.addClass('active');
            $button.removeClass($button.attr('data-icon-class'));
            $button.addClass($button.attr('data-icon-class-when-active'));

            $content.show();
            $content.triggerHandler('show');

            this.save(type);
        },
        close: function() {         // public
            $(document.body).removeClass('support-shown');

            var $previous_button = this.$container.find('.curation-itemlist.active');
            $previous_button.removeClass('active');
            $previous_button.removeClass($previous_button.attr('data-icon-class-when-active'));
            $previous_button.addClass($previous_button.attr('data-icon-class'));

            this.save('0');
        },
        save: function(value) {
            $(window).trigger('resize');

            Hatena.Diary.Pages.Admin['*'].saveBlogConfig('support', value);
        }
    };

    Hatena.Diary.Pages.Admin['user-blog-edit'].setupGooglePicker = function() {
        var developerKey    = 'AIzaSyBT5jC9eFqTXg7df8nRpVEd-oRuOm5nfHA';
        var clientId        = '900568370540-qrvm1v1gtndg5krpn3mgjvfm28rontj0.apps.googleusercontent.com';
        var scope           = ['https://www.googleapis.com/auth/photos'];
        var pickerApiLoaded = false;
        var oauthToken;

        // googlePickerApiã‚’ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ï¼googlePickerã‚’åˆ©ç”¨ã™ã‚‹ã«ã¯ï¼Œã¾ãšã“ã‚Œã§Apiã‚’ãƒ­ãƒ¼ãƒ‰ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ï¼
        // oauthèªè¨¼ãŒå¿…è¦ãªã„pickerã§ã‚ã‚Œã°ï¼Œã“ã‚Œã‚’å‘¼ã¶ã ã‘ã§åˆ©ç”¨ã§ãã‚‹ï¼
        var googlePickerApiLoad = function () {
            var d = new $.Deferred();

            // æ—¢ã«ãƒ­ãƒ¼ãƒ‰æ¸ˆã¿ã®å ´åˆã¯å†ã³ãƒ­ãƒ¼ãƒ‰ã—ãªã„
            if (pickerApiLoaded) {
                d.resolve();
            } else {
                gapi.load( 'picker', {'callback': function() {
                    pickerApiLoaded = true;
                    d.resolve();
                }});
            }

            return d.promise();
        };
        // googlePickerã®oAuthèªè¨¼ãŒå¿…è¦ãªå ´åˆã¯ã“ã‚Œã‚’å‘¼ã¶ï¼
        var googlePickerApiAuth = function () {
            var d = new $.Deferred();

            // æ—¢ã«ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã‚’å¾—ã¦ã„ã‚‹å ´åˆã¯å†ã³èªè¨¼ã—ãªã„ï¼
            if (oauthToken) {
                d.resolve();
            } else {
                gapi.load( 'auth', {'callback': d.resolve} );
            }

            return d.promise();
        };
        // ãƒ¦ãƒ¼ã‚¶èªè¨¼ç”»é¢ã‚’å‡ºã™å ´åˆã«ã“ã‚Œã‚’å‘¼ã¶ï¼
        var googlePickerUserAuth = function () {
            var d = new $.Deferred();

            // æ—¢ã«ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã‚’å¾—ã¦ã„ã‚‹å ´åˆã¯å†ã³èªè¨¼ã—ãªã„ï¼
            if (oauthToken) {
                d.resolve(oauthToken, developerKey);
            } else {
                window.gapi.auth.authorize(
                    {
                        'client_id' : clientId,
                        'scope'     : scope,
                        'immediate' : false
                    },
                    function (authResult) {
                        if (authResult && !authResult.error) {
                            oauthToken = authResult.access_token;
                            d.resolve(oauthToken, developerKey);
                        }
                });
            }

            return d.promise();
        };

        // pickeré–‹ããƒœã‚¿ãƒ³æŠ¼ã•ã‚Œã‚‹ã¨ã“ã‚ŒãŒå‘¼ã°ã‚Œã¾ã™
        // $self: ã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸãƒœã‚¿ãƒ³
        // createBuilder: builderã‚’ä½œã£ã¦è¿”ã™ ãƒœã‚¿ãƒ³ã”ã¨ã«æœ‰åŠ¹ã«ã™ã‚‹ã‚µãƒ¼ãƒ“ã‚¹åˆ‡ã‚Šæ›¿ãˆã‚‹ãŸã‚ã«ã“ã“ã‚’ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã¿ãŸã„ã«ã—ã¦ã‚‹
        var clicked = function($self, createBuilder) {
            $self.prop('disabled', true);

            var googlePickerCallback = function (res) {
                $self.prop('disabled', false);
                Hatena.Diary.LOG([ 'googlePickerCallback', res ]);
                if (res.action !== google.picker.Action.PICKED) return;

                var editor = Hatena.Diary.Editor.Support.currentEditor;

                var lines = [];
                for (var i = 0, len = res.docs.length; i < len; i++) {
                    var doc = res.docs[i];

                    var html;
                    var div;
                    if (doc.type === 'video') {
                        // youtubeå‹•ç”»ã®URLã‚’ "/embed/***" å½¢å¼ã«å¤‰æ›
                        // "/v/***" å½¢å¼ã ã¨cwsãƒ•ã‚¡ã‚¤ãƒ«(åœ§ç¸®flashãƒ•ã‚¡ã‚¤ãƒ«)ãŒè¿”ã£ã¦ãã‚‹ãŒ
                        // flashã«å¯¾å¿œã—ã¦ã„ãªã„ãƒ–ãƒ©ã‚¦ã‚¶ã ã¨è¬ãƒ•ã‚¡ã‚¤ãƒ«ãŒãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã‚‹äº‹ã«ãªã‚‹
                        doc.embedUrl = Hatena.Diary.Util.migrateOldStyleYoutubeURL(doc.embedUrl);

                        html = $('<div/>').append(
                            $('<iframe width="420" height="315" frameborder="0" allowfullscreen></iframe>').
                                attr('src', doc.embedUrl),
                            $('<br/>'),
                            $('<a/>').attr('href', doc.url).text(doc.name)
                        ).html();
                    } else if (doc.type === 'photo') {
                        div = $('<div/>');

                        var url = doc.thumbnails[doc.thumbnails.length - 1].url;
                        // if (url.match(/\/s\d+\/[^\/+]$/)) {
                        //     // URLå†…ã«s+æ•°å­—
                        //     // /s400/ â†’ /s1280/
                        //     url = url.replace(/\/s\d+\//, '/s1280/');
                        // } else {
                        //     // /s1280/aaa.jpg
                        //     var fragments = url.split(/\//);
                        //     fragments.splice(fragments.length - 1, 0, 's1280');
                        //     url = fragments.join('/');
                        // }

                        var img = $('<img/>').addClass('magnifiable').attr({src: url, itemprop: 'image'});
                        var span = $('<span/>').attr({itemtype: 'http://schema.org/Photograph', itemscope: 'itemscope'});
                        div.append(span.append(img));

                        html = div.html();
                    } else if (doc.embedUrl) {
                        html = $('<div/>').append(
                            $('<iframe width="425" height="350" frameborder="0" scrolling="no" marginheight="0" marginwidth="0"></iframe>').
                                attr('src', doc.embedUrl),
                            $('<br/>'),
                            $('<a/>').attr('href', doc.url).text(doc.name)
                        ).html();
                    } else {
                        div = $('<div/>');
                        var thumbnail, icon, link;
                        var thumbnailUrl = doc.thumbnails && doc.thumbnails[doc.thumbnails.length - 1].url;
                        if (thumbnailUrl) {
                            thumbnail = $('<img/>').attr({ src: thumbnailUrl, alt: doc.name || '' });
                            if (doc.url) {
                                thumbnail = $('<a/>').attr('href', doc.url).append(thumbnail);
                            }
                        } else if (doc.iconUrl) {
                            icon = $('<img/>').attr({ src: doc.iconUrl, alt: '' });
                        }
                        if (doc.name && doc.url) {
                            link = $('<a/>').attr('href', doc.url).text(doc.name);
                        }

                        if (thumbnail) div.append(thumbnail);
                        if (thumbnail && link) div.append($('<br/>'));
                        if (icon) div.append(icon);
                        if (link) div.append(link);

                        html = div.html();
                    }

                    lines.push(html);
                }
                // IE9ã§Google Pickerã‹ã‚‰æŒ¿å…¥ã—ã‚ˆã†ã¨ã™ã‚‹ã¨
                // ã€Œinternet exploreã¯ã‚¯ãƒ­ã‚¹ã‚µã‚¤ãƒˆã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’é˜²æ­¢ã™ã‚‹ãŸã‚ã«ã€ã“ã®ãƒšãƒ¼ã‚¸ã‚’å¤‰æ›´ã—ã¾ã—ãŸã€
                // ã¨è¡¨ç¤ºã•ã‚Œã¦æŒ¿å…¥ã§ããªã„ã®ã§ (tinymce.focus()ã§ããªãã¦ã€doc.selection.createRange()ã§è½ã¡ã‚‹)
                // ä¸€æ—¦bodyã«focusã‚’å½“ã¦ã¦ã‹ã‚‰æŒ¿å…¥ã™ã‚‹
                if (navigator.userAgent.indexOf('MSIE') >= 0 && $('#syntax').val() === 'html') {
                    $('body').trigger('focus');
                }
                editor.insertLines(lines);
            };

            var launchGooglePicker = function () {
                var builder = createBuilder();
                    builder.setCallback(googlePickerCallback);
                    builder.setOrigin( (Hatena.Diary.Location.param('editinplace')) ?
                            Hatena.Diary.data('blogs-uri-base') : Hatena.Diary.data('admin-domain') );

                var picker = builder.build();
                picker.setVisible(true);
            };

            if (typeof google === 'undefined') {
                $('<script src="http://www.google.com/jsapi"></script>').appendTo(document.getElementsByTagName('head')[0]);
                var googleTimer = setInterval(function () {
                    if (typeof google === 'undefined') return;
                    clearTimeout(googleTimer);

                    launchGooglePicker();
                }, 20);
            } else {
                launchGooglePicker();
            }
        };

        // ã‚¿ãƒ–ã‚’è¡¨ç¤ºã—ãŸæ™‚ã«ï¼Œgoogle picker apiã®ãƒ­ãƒ¼ãƒ‰ã‚’è¡Œã†ï¼
        $('#editor-google-picker').on('show', function() {
            googlePickerApiLoad()
                .done( googlePickerApiAuth ); // ãƒ¦ãƒ¼ã‚¶ã®æƒ…å ±ã‚’åˆ©ç”¨ã™ã‚‹ã®ã§authå¿…è¦
        });

        // ãƒ”ãƒƒã‚«ãƒ¼è¡¨ç¤ºãƒœã‚¿ãƒ³ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸæ™‚ã«ï¼Œãƒ¦ãƒ¼ã‚¶ã®èªè¨¼ã‚’è¡Œã†ï¼
        $('#launch-google-picker button').click(function () {
            googlePickerUserAuth()
                .done( function(oauthToken, developerKey) {
                    clicked($(this), function() {
                        var builder;
                        builder = new google.picker.PickerBuilder().
                            enableFeature(google.picker.Feature.MULTISELECT_ENABLED).
                            addView(google.picker.ViewId.PHOTOS).
                            addView(new google.picker.PhotosView().setType('camerasync')).
                            addView(google.picker.ViewId.PHOTO_UPLOAD).
                            addView(google.picker.ViewId.YOUTUBE).
                            addView(google.picker.ViewId.WEBCAM).
                            addView(google.picker.ViewId.VIDEO_SEARCH).
                            addView(google.picker.ViewId.RECENTLY_PICKED).
                            setLocale('ja').
                            setOAuthToken(oauthToken).
                            setDeveloperKey(developerKey);
                        return builder;
                    });
                });
        });

        $('#launch-youtube button').click(function () {
            googlePickerApiLoad()
                .done( function () {
                    clicked($(this), function() {
                        var builder = new google.picker.PickerBuilder().
                            enableFeature(google.picker.Feature.MULTISELECT_ENABLED).
                            setLocale('ja').
                            addView(google.picker.ViewId.VIDEO_SEARCH);
                        return builder;
                    });
                });
        });
    };

    Hatena.Diary.Pages.Admin['user-blog-edit'].Fotolife = {

        defaultFolder: 'Hatena Blog',

        _setupElements : function() {
            this.items                   = this.$container.find('#items');
            this.pasteButton             = this.$container.find('.paste-button');
            this.footerButtons           = this.$container.find('#footer-buttons');
            this.upload                  = this.$container.find('#upload');
            this.editorSupportOperations = this.$container.find('#editor-support-operations');
        },

        _setupUploader : function(upload, uploaderHandler, afterinit) {
            Hatena.Diary.Editor.Uploader.setup(upload, uploaderHandler, afterinit);
        },

        init : function () {
            var self = this;
            if (self.initialized) return;
            self.initialized = true;

            self.$container = $('#editor-fotolife');

            var editor = Hatena.Diary.Editor.Support.currentEditor;

            self._setupElements();
            self.editor = editor;
            self.syntax = $('#syntax').val();

            self.items.delegate('.item', 'click', function (e) {
                $(this).toggleClass('selected');

                if (self.items.find('.selected').length) {
                    self.pasteButton.removeClass('disable').addClass('enable');
                } else {
                    self.pasteButton.removeClass('enable').addClass('disable');
                }
            });

            self.items.delegate('.item', 'dblclick', function (e) {
                $(this).removeClass('selected');

                var attr = (self.syntax == 'html') ? 'data-html' : 'data-syntax';
                var syntax = $(this).attr(attr);

                Hatena.Diary.trackEvent(self.pasteButton.attr('data-track-name'));

                self.editor.insert(syntax);
            });

            self.pasteButton.addClass('disable').click(function () {
                var syntax = self.items.find('.item.selected').map(function () {
                    if (self.syntax == 'html') {
                        return $(this).removeClass('selected').attr('data-html');
                    } else {
                        return $(this).removeClass('selected').attr('data-syntax');
                    }
                }).get().reverse().join("");

                self.editor.insert(syntax);
            });

            var uploaderHandler = function (uploader) {
                Hatena.Diary.Pages.Admin['user-blog-edit'].Fotolife._uploaderHandler.call(self, uploader);
            };

            function afterinit() {
                self.loadInfo();
            }

            self._setupUploader(self.upload, uploaderHandler, afterinit);

            $(window).resize(_.throttle(function () {
                var mainHeight = $(window).height() - $('#editor-main').offset().top;
                self.items.height(
                    mainHeight -
                        self.editorSupportOperations.outerHeight(true) -
                        self.footerButtons.outerHeight(true) -
                        (self.items.outerHeight(true) - self.items.height()) * 2
                );
            })).resize();

            self.load();
        },

        _uploaderHandler : function (uploader) {
            var self = this;
            var item = self.createItem({
                syntax : '',
                html   : '',
                image  : '/images/loading.gif'
            });

            var progress = $('<div class="progress"></div>').appendTo(item);
            var percent = $('<div class="percent">0%</div>').appendTo(progress);
            var bar = $('<div class="bar"></div>').appendTo(progress);

            var lastProgressTimer, lastProgress = 0, updateProgress = function (progress) {
                if (progress > 100) progress = 100;
                bar.width(progress + '%');
                percent.text(Hatena.Locale.text('uploading'));
            };

            uploader.on('error', function (e) {
                clearInterval(lastProgressTimer);
                console.log('upload error');
                item.remove();
                self.showUploadErrorAlert(e);
            });

            uploader.on('disk_full', function (e) {
                self.showDiskFullAlert();
            });

            uploader.on('progress', function (e) {
                // success ãŒç™ºç”Ÿã™ã‚‹ã¾ã§ 100% ã«ã—ãªã„
                var progress = e.percent * 0.9;
                if (e.percent == 100) {
                    clearInterval(lastProgressTimer);
                    lastProgressTimer = setInterval(function () {
                        lastProgress += 0.1;
                        updateProgress(progress + lastProgress);
                    }, 100);
                } else {
                    updateProgress(progress);
                }
            });

            uploader.on('success', function (data) {
                clearInterval(lastProgressTimer);
                item.replaceWith(self.createItem(data));
                self.editor.insert(
                    self.syntax == 'html' ? data.html : data.syntax
                );
                self.loadInfo();
            });

            self.items.prepend(item);
        },

        listenToUploader: function (uploader) {
            this._uploaderHandler(uploader);
        },

        loadInfo : function () {
            var self = this;

            $.ajax({
                url : "/f/" + Hatena.Diary.data('name') + "/api/info?mode=detail",
                type : "get",
                cache: false,
                dataType : 'json',
                success : function (res) {
                    if (res.error) return Hatena.Diary.BUG(res.error);

                    res.folder_list.push({ status : 'private', folder : 'Hatena Blog' });
                    res.folder_list.push({ status : res.is_private ? 'private' : 'public', folder : ''  });

                    var folderMap = {};
                    var folderList = [];
                    for (var i = 0, it; (it = res.folder_list[i]); i++) {
                        folderMap[it.folder] = it;
                        folderList.push(it.folder);
                    }

                    folderList.sort();

                    var select = $('.js-folder-selector', Hatena.Diary.Editor.Uploader.document).empty();

                    for (var i = 0, len = folderList.length; i < len; i++) {
                        if (folderList[i] === folderList[i-1]) continue;
                        var it = folderMap[ folderList[i] ];

                        var is_private = res.is_private || it.status == 'private';
                        var option = $('<option/>').
                                attr('value', it.folder).
                                text( (it.folder || Hatena.Locale.text('fotolife.folder.top')) + (is_private ? ' (private)' : '')).
                                appendTo(select);

                        if (it.folder == 'Hatena Blog') {
                            option.prop('selected', true);
                        }
                    }

                    select.change(function () {
                        self.load({
                            folder : $(this).val()
                        });
                    });

                    select.parent().show();

                    self.renderDiskSizeGraph(+res.disksize, +res.maxdisksize);
                    $(window).resize();
                },

                error : Hatena.Diary.REPORT_BUG('/api/support/fotolife')
            });
        },
        renderDiskSizeGraph: function(size, maxsize) {
            var self = this;
            var $container = self.$container.find('.js-disksize-container');
            var $box = $container.find('.js-box');
            var $bar = $container.find('.js-bar');
            var $rate = $container.find('.js-rate');

            var rate = size / maxsize;
            var rate_string = Math.floor(rate * 100) + '%';

            $rate.text(rate_string);

            $bar.css('width', rate_string);

            var label = $box.attr('data-label') + rate_string;
            $box.attr('original-title', label);

            $container.show();
        },
        showDiskFullAlert: function(){
            var self = this;
            var $container = self.$container.find('.js-disksize-container');
            var $alert = $container.find('.js-disk-full-alert');
            $alert.show();
            $(window).resize();
            Hatena.Diary.trackEvent('fotolife.full_alert.show');
        },

        showUploadErrorAlert: function(e){
            var self = this;
            var $container = self.$container.find('.js-disksize-container');
            var $alert;
            if (e.name === 'TypeError')  {
                $alert = $container.find('.js-upload-type-alert');
            }
            else {
                $alert = $container.find('.js-upload-fail-alert');
            }
            $alert.show();
            $(window).resize();
            Hatena.Diary.trackEvent('fotolife.upload_error.show');
        },

        createItem : function (it) {
            return $('<div class="item"/>').attr({
                'data-syntax' : it.syntax.replace(/:image/, ':plain'),
                'data-html'   : it.html,
                'style'       : 'background-image: url("' + it.image + '")'
            });
        },

        load : function (opts) {
            var self = this;
            if (!opts) opts = {};
            if (!opts.page) opts.page = 1;
            if (typeof opts.folder != 'string') opts.folder = self.defaultFolder;

            Hatena.Diary.LOG(['load', opts.folder, opts.page]);

            var container = self.items;

            if (opts.page == 1) {
                container.empty();
            }

            $.ajax({
                url : '/api/support/fotolife',
                type : "get",
                cache: false,
                dataType : 'json',
                data : {
                    folder : opts.folder,
                    page   : opts.page
                },
                success : function (res) {
                    Hatena.Diary.LOG(res);
                    if (res.error) return Hatena.Diary.BUG(res.error);

                    var items = res.items;

                    for (var i = 0, it; (it = items[i]); i++) {
                        self.createItem(it).appendTo(container);
                    }

                    if (!res.last) {
                        $('<div class="item pager-next"/>').
                            click(function () {
                                $(this).remove();
                                self.load({
                                    folder : opts.folder,
                                    page : opts.page + 1
                                });
                                return false;
                            }).
                            appendTo(container);
                    }
                },

                error : Hatena.Diary.REPORT_BUG('/api/support/fotolife')
            });
        }
    };

    Hatena.Diary.Pages.Admin['user-blog-edit'].Paint = {
        defaultFolder: 'Hatena Blog Illust',
        _setupElements: function() {
            this.items                   = $('#paint-items');
            this.pasteButton             = $('#paint-button-paste');
            this.footerButtons           = $('#paint-footer-buttons');
            this.upload                  = $('#paint-upload');
            this.editorSupportOperations = $('#paint-editor-support-operations');
        },
        _setupUploader : function(upload, uploaderHandler, afterinit) {
            Hatena.Diary.Editor.Uploader.setupForPaint(upload, uploaderHandler, afterinit);
        },
        isSupportedCanvas: function() {
            return !!document.createElement('canvas').getContext;
        },
        init: function() {
            var self = this;
            if (!self.isSupportedCanvas()) {
                $('#editor-paint').children().toggle();
                return;
            }
            Hatena.Diary.Pages.Admin['user-blog-edit'].Fotolife.init.call(self);
        },
        load: Hatena.Diary.Pages.Admin['user-blog-edit'].Fotolife.load,
        loadInfo: function() { /* Do nothing. */ },
        createItem: Hatena.Diary.Pages.Admin['user-blog-edit'].Fotolife.createItem
    };

    Hatena.Diary.Pages.Admin['user-blog-edit'].CategoryEditor = function () { this.init.apply(this, arguments) };
    Hatena.Diary.Pages.Admin['user-blog-edit'].CategoryEditor.prototype = {
        init: function (form, element) {
            this.form = $(form);
            this.element = $(element);
            this.input = this.element.find('input[type="text"]');
            this.bind();
        },
        bind: function () {
            var categoryEditor = this;

            this.form.bind('backup-restore-params', function (e, params) {
                if (params['category']) {
                    $.each(params['category'], function () {
                        categoryEditor.append('' + this);
                    });
                }
            });

            this.element.delegate('.remove-category', 'click', function () {
                $(this).closest('[data-category-name]').remove();
                categoryEditor.updateExistingCategories();
            });

            this.element.click(function (e) {
                if ($(e.target).is(categoryEditor.element)) {
                    categoryEditor.input.focus();
                }
            });

            $('#existing-categories').delegate('[data-category-name]', 'click', function() {
                var func = $(this).hasClass('selected') ? 'remove' : 'append';
                categoryEditor[func]($(this).attr('data-category-name'));
            });

            $('#new-category').click(function() {
                var category = prompt(categoryEditor.element.attr('data-new-category-prompt'));
                categoryEditor.append(category);
            });

            this.input.autocomplete({
                source: function (request, response) {
                    var term = request.term;

                    var categories = $('#existing-categories [data-category-name]')
                            .map(function () { return $(this).attr('data-category-name') })
                            .filter(function () { return this.indexOf(term) === 0 });

                    var newCategory = {
                        value: null,
                        label: categoryEditor.element.attr('data-new-category-label')
                    };

                    response(
                        categories.toArray().concat(term.length > 0 ? [] : [ newCategory ])
                    );
                },
                select: function (e, ui) {
                    var category;

                    if (ui.item.value) {
                        category = ui.item.value;
                    } else if (ui.item.value === null) {
                        category = prompt(categoryEditor.element.attr('data-new-category-prompt'));
                    }

                    if (category) {
                        categoryEditor.append(category);
                        $(e.target).val('');
                        e.stopPropagation();
                        e.preventDefault();
                    }
                },
                minLength: 1,
                appendTo: this.element.parent()
            });

            this.input.keydown(function (e) {
                var input = $(this);
                if (keyString(e) == 'RET') {
                    if (input.val().length) {
                        categoryEditor.input.autocomplete('close');
                        categoryEditor.append(input.val());
                        input.val('');
                    }
                    return false;
                } else if (keyString(e) == 'BS' && input.val().length === 0) {
                    categoryEditor.remove();
                }
            });

            this.form.submit(function (e) {
                if (categoryEditor.input.val()) {
                    categoryEditor.append(categoryEditor.input.val());
                    categoryEditor.input.val('');
                }
            });

            $(window).resize(_.throttle(function () {
                categoryEditor.resize();
            }, 100));
            categoryEditor.resize();
        },
        resize: function () {
            $("#existing-categories").height(
                $("#editor-category").outerHeight(true) - $('.entry-categories-top').outerHeight(true) - 16
            );
        },
        append: function (name) {
            if (!name) return;

            var existing = this.element.find('[data-category-name]').filter(
                function () { return $(this).attr('data-category-name') == name }
            );
            if (existing.length) {
                existing.insertBefore('#select-category');
            } else {
                var html = this.element.attr('data-category-html');
                var elem = $(html).attr('data-category-name', name);
                elem.find('.name').text(name);
                elem.append($('<input type="hidden" name="category" data-with-backup>').val(name));
                elem.insertBefore('#select-category');
            }
            this.appendToExistingCategories(name);
            this.updateExistingCategories();

        },
        appendToExistingCategories: function (name) {
            var isDuplicated = $('#existing-categories [data-category-name]').filter(
                function() { return $(this).attr('data-category-name') == name }
            ).length;
            if (!isDuplicated) {
                $('<li/>')
                    .attr('data-category-name', name)
                    .text(name)
                    .appendTo('#existing-categories');
            }
        },
        updateExistingCategories: function() {
            var categoryMap = {};
            this.element.find('[data-category-name]').each(function() {
                categoryMap[$(this).attr('data-category-name')] = 1;
            });
            $('#existing-categories [data-category-name]').each(function() {
                $(this).toggleClass(
                    'selected',
                    !!categoryMap[$(this).attr('data-category-name')]
                );
            });
        },
        remove: function (dataCategoryName) {
            var targetToDelete = (typeof dataCategoryName === 'undefined') ?
                    this.element.find('[data-category-name]:last') :
                    this.element.find('[data-category-name]')
                    .filter(function() {
                        return $(this).attr('data-category-name') == dataCategoryName;
                    });
            targetToDelete.remove();
            this.updateExistingCategories();
        }
    };

    Hatena.Diary.Pages.Admin['user-blog-edit'].DateTimeEditor = function () { this.init.apply(this, arguments) };
    Hatena.Diary.Pages.Admin['user-blog-edit'].DateTimeEditor.prototype = {
        init: function (form, element) {
            this.form = $(form);
            this.element = $(element);
            this.element.hide();
            this.datetimepicker = $('<div class="datetime-input">' +
                                    '<input type="text" id="datetime-input-date" > ' +
                                    '<input type="text" id="datetime-input-time" ></div>');
            this.datepicker = this.datetimepicker.find('#datetime-input-date').attr('placeholder', this.todayString());
            this.timepicker = this.datetimepicker.find('#datetime-input-time').attr('placeholder', '00:00');

            this.element.after(this.datetimepicker);

            this.bind();
            this.load();
        },
        bind: function () {
            var self = this;

            this.form.bind('backup-restore-params', function (e, params) {
                self.load();
            });

            var lang = document.documentElement.getAttribute('lang');
            $.datepicker.setDefaults($.datepicker.regional[lang == 'en' ? '' : lang]);
            this.datepicker.datepicker({
                dateFormat: $.datepicker.W3C,
                onSelect: function () {
                    self.datepicker.change();
                    if (self.timepicker.val() === '') {
                        self.timepicker.val('00:00').focus().change();
                    }
                }
            });

            var timeOptions = [];
            for (var i = 0; i < 24; ++i) {
                timeOptions.push(('0' + i.toString()).slice(-2) + ':00');
                timeOptions.push(('0' + i.toString()).slice(-2) + ':30');
            }
            this.timepicker.autocomplete({
                source: function (request, response) {
                    if (!request.term.match(/^\d{1,2}:\d{1,2}:(\d{1,2})?$/)) {
                        response(timeOptions);
                    }
                },
                select: function (e, ui) {
                    if (ui.item.value) {
                        self.timepicker.val(ui.item.value).change();
                        if (self.datepicker.val() === '') {
                            self.datepicker.val(self.todayString());
                        }
                    }
                },
                minLength: 0,
                appendTo: this.element.parent()
            });
            this.timepicker.focus(function () {
                $(this).autocomplete('search', '');
            });

            this.datepicker.change(function () {
                self.date = $(this).val();
                self.updateValue();
            });

            this.timepicker.change(function () {
                var time = $(this).val();

                if (self.checkTime(time)) {
                    var m = time.match(/^(\d{1,2}):(\d{1,2})(?::(\d{1,2}))?$/);
                    self.time = $([1, 2, 3]).map(function () {
                        return ('0' + (m[this] || '00')).slice(-2);
                    }).toArray().join(':');
                } else {
                    self.time = null;
                }

                self.updateValue();
            });

            this.form.submit(function (e) {
                self.updateValue();
            });
        },
        load: function () {
            var self = this;
            var m = this.element.val().match(/^(\d{4}-\d{2}-\d{2})T(\d{2}:\d{2}:\d{2})\+(\d{2}:\d{2})$/);
            if (m) {
                this.datepicker.val(this.date = m[1]);
                this.time = m[2];
                var time = this.time.replace(/:00$/, '');
                this.timepicker.val(time);
                this.timezone = m[3];
            }
        },
        todayString: function () {
            var now = new Date();
            var date = [];
            date.push((1900 + now.getYear()).toString());
            date.push(('0' + (1 + now.getMonth()).toString()).slice(-2));
            date.push(('0' + now.getDate().toString()).slice(-2));
            return date.join('-');
        },
        checkTime: function (time) {
            var match = time.match(/^(\d{1,2}):(\d{1,2})(?::(\d{1,2}))?$/);
            if (match) {
                var h = parseInt(match[1], 10);
                var m = parseInt(match[2], 10);
                var s = parseInt(match[3] || '0', 10);
                return 0 <= h && h < 24 && 0 <= m && m < 60 && 0 <= s && s < 60;
            }
            return false;
        },
        updateValue: function () {
            if (this.date) {
                // æ™‚åˆ»ãŒè¨­å®šã•ã‚Œã¦ã„ãªã„ã¨ã 00:00 ã«ã™ã‚‹
                if (!this.time) this.time = '00:00';

                // timezone ãŒã‚ã£ãŸã‚‰è¨­å®šã™ã‚‹
                var timezone = '';
                if (this.timezone) timezone = '+' + this.timezone;

                this.element.val(this.date + 'T' + this.time + timezone);
            } else {
                this.element.val('');
            }

            $(this).triggerHandler('updated');
        }
    };

    Hatena.Diary.Pages.Admin['user-blog-edit'].observeForScheduledEntry = function(datetimeEditor) {
        var $input = $('#datetime-input');
        var $checkbox = $('.js-scheduled-entry-checkbox');
        var $defaultButtons = $('.buttons .js-default-button');
        var $scheduledButtons = $('.buttons .js-scheduled-button');
        var $socializeBox = $('.js-socialize-box');

        // æ—¥ä»˜ã‚ã‚‹ã¨ãï¼Œãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹å‡ºã™
        // ãƒã‚§ãƒƒã‚¯ã¤ã„ã¦ã‚‹ã¨ãï¼Œäºˆç´„æŠ•ç¨¿ãƒœã‚¿ãƒ³ã¨ã‚·ã‚§ã‚¢è¨­å®šå‡ºã™
        var watch = function() {
            if ($input.val()) {
                $checkbox.prop('disabled', false);
            } else {
                $checkbox.prop('disabled', true);
            }

            if ($input.val() && $checkbox.prop('checked')) {
                $defaultButtons.hide();
                $scheduledButtons.show();
                $socializeBox.show();
            } else {
                $defaultButtons.show();
                $scheduledButtons.hide();
                $socializeBox.hide();
            }
        };

        $(datetimeEditor).on('updated', watch);
        $checkbox.on('change', watch);
        watch();

        // ãƒ„ã‚¤ãƒƒã‚¿ãƒ¼æ–‡è¨€ã‚’å…¥ã‚Œã‚‹ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒªã‚¢ã‚’ç›£è¦–ã™ã‚‹
        // æ–‡å­—æ•°ã‚ªãƒ¼ãƒãƒ¼ã—ã¦ã„ãŸå ´åˆã¯
        // - ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®è¡¨ç¤º
        // - ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã®disabledã‚’è¡Œã†
        new Hatena.Diary.Pages.Admin['user-blog-edit'].TwitterMessage($('.js-edit-socialize-box-li.twitter'));
    };

    Hatena.Diary.Pages.Admin['user-blog-edit'].TwitterMessage = function () { this.init.apply(this, arguments) };
    Hatena.Diary.Pages.Admin['user-blog-edit'].TwitterMessage.prototype = {
        init: function ($el) {
            this.$el = $el;
            this.$textarea = $el.find('textarea');
            this.$errorMessage = $el.find('.js-twitter-length-error');
            this.$checkBox =  $el.find('input[name="post_to_twitter"]');
            this.bindEvents();
        },
        bindEvents: function () {
            var self = this;
            self.$textarea.keyup(function() {
                if (Hatena.Diary.validationTweetLength(self.$textarea.val()) === false) {
                    self.showErrorMessage();
                    self.disabledCheckBox();
                }
                else {
                    self.hideErrorMessage();
                    self.enabledCheckBox();
                }
            });
        },
        hideErrorMessage: function() {
            this.$errorMessage.hide();
        },
        showErrorMessage: function() {
            this.$errorMessage.show();
        },
        disabledCheckBox: function() {
            this.$checkBox.attr('disabled', true);
        },
        enabledCheckBox: function() {
            this.$checkBox.attr('disabled', false);
        }
    };

    Hatena.Diary.Pages.Admin['user-blog-edit'].OgImageEditor = function () { this.init.apply(this, arguments) };
    Hatena.Diary.Pages.Admin['user-blog-edit'].OgImageEditor.prototype = {
        init: function (form, element) {
            this.$form    = $(form);
            this.$element = $(element);
            this.$input   = this.$element.find('#ogimage-input');
            this.$imgContainer = this.$element.find('#ogimage-img-container');
            this.$current = this.$element.find('.current-og-image');
            this.$remove  = this.$element.find('.remove-og-image');
            this.$items   = this.$form.find('.image-items');
            this.itemTemplate = _.template(this.$form.find('.ogimage-item-template').html());
            this.$indicator = this.$element.find('.indicator');
            this.$reload = this.$element.find('.reload');
            this.$errorMessage = this.$element.find('.error');
            this.isLoading = false;
            this.defaultOgImageURL = this.$element.data('default-ogimage-url');

            this.bindEvents();
            this.getImageSrcs();
        },
        bindEvents: function () {
            var self = this;

            $(window).resize(_.throttle(function () {
                self.reloadItems();
            }, 100));

            self.$element.change( function () {
                self.setOgImage();
            });

            self.$element.on('click', '.image-item', function () {
                self.setOgImageInput(this);
                self.setOgImage();
            });

            self.$input.keydown(function (e) {
                if (keyString(e) === 'RET') {
                    self.setOgImage();
                    return false;
                }
            });

            self.$reload.click( function () {
                self.reloadItems();
            });

            self.$remove.click( function () {
                self.removeCurrentImage();
            });
        },
        setOgImage: function (src) {
            var self = this;
            self.$current.attr('src', self.$input.val());
        },
        removeCurrentImage: function () {
            var self = this;

            // chromeã ã¨src=""ã«ã—ã¦ã‚‚ç”»åƒãŒæ®‹ã£ã¦ã—ã¾ã†ã®ã§imgã‚¿ã‚°ä½œã‚ŠãªãŠã™
            var $image = $('<img>').addClass('current-og-image');
            self.$input.val("");
            self.$current.remove();
            self.$current = $image;
            self.$imgContainer.append($image);
            self.$items.find('.selected').removeClass('selected');
        },
        setOgImageInput: function (item) {
            var self = this;
            var $item = $(item);

            self.$items.find('.selected').removeClass('selected');
            $item.addClass('selected');

            var src = $item.attr('data-image-src');
            self.$input.val(src);
        },
        showItems : function (items) {
            var self = this;
            var source = "";
            _.each(items, function (item) {
                source += self.itemTemplate({
                    item: { image_src: item }
                });
            });
            self.$indicator.before(source);
        },
        reloadItems: function () {
            var self = this;
            if (! self.$element.is(':visible')) return;
            self.removeImageItems();
            self.getImageSrcs();
        },
        getImageSrcs: function () {
            var self   = this;
            var editor = Hatena.Diary.Editor.Support.currentEditor;
            var body   = editor.body.val();

            // æœ¬æ–‡ç©ºã§ã‚‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆç”»åƒã¯å€™è£œã¨ã—ã¦å‡ºã™
            if (!body) {
                self.showItems([self.defaultOgImageURL]);
                return;
            }

            if (self.isLoading) return;

            self.isLoading = true;
            self.$indicator.show();

            $.ajax({
                url: '/api/entry/images',
                type: 'POST',
                dataType: 'json',
                data: {
                    body: body,
                    syntax: $('#syntax').val(),
                    rkm: Hatena.Diary.data('rkm'),
                    rkc: Hatena.Diary.data('rkc')
                }
            }).done(function (items) {
                // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆç”»åƒæœ«å°¾ã«å‡ºã™
                items.push(self.defaultOgImageURL);

                self.showItems(items);
                self.$errorMessage.hide();

                self.setSelectedImage();
            }).fail(function (res) {
                self.failed = true;
                self.$errorMessage.show();
            }).always(function () {
                self.isLoading = false;
                self.$indicator.hide();
            });

        },
        removeImageItems: function () {
            var self = this;
            self.$items.find('.image-item').remove();
        },
        // ã‚¢ã‚¤ã‚­ãƒ£ãƒƒãƒç”»åƒãŒè¨­å®šã•ã‚Œã¦ã„ãŸã‚‰ã€selectedã‚¯ãƒ©ã‚¹ã‚’å½“ã¦ã‚‹
        setSelectedImage: function () {
            var self = this;
            var inputSrc = self.$input.val();
            if ( ! inputSrc ) return;
            if ( self.$items.find('.selected').length > 0 ) return;

            self.$items.find('.image-item').each( function () {
                var $item = $(this);
                var $img = $item.find('.image-container img');
                if ( $img.attr('src') === inputSrc ) {
                    $item.addClass('selected');
                    return false;
                }
            });
        }
    };

    Hatena.Diary.Pages.Admin['user-blog-edit'].AmazonSearch = function () { this.init.apply(this, arguments) };
    Hatena.Diary.Pages.Admin['user-blog-edit'].AmazonSearch.prototype = {
        // args: { container }
        init: function (args) {
            var self = this;

            self.$container = args.container;
            if (!self.$container.get(0)) return;
            self.$categorySelect = self.$container.find('.amazon-search-category');
            self.$keywordInput = self.$container.find('.amazon-search-keyword');
            self.$keywordSubmit = self.$container.find('.amazon-search-keyword-submit');
            self.$itemsContainer = self.$container.find('.amazon-search-items');
            self.itemTemplate = _.template($('.amazon-search-item-template').html());
            self.$indicator = self.$container.find('.indicator');
            self.$pasteButton = self.$container.find('.amazon-search-paste-button');
            self.$layoutType = self.$container.find('.amazon-search-layout-type');
            self.$layoutTypeContainer = self.$container.find('.amazon-search-layout-type-container');
            self.$resultIsEmpty = self.$container.find('.amazon-search-result-is-empty');
            self.$formats = self.$container.find('.amazon-search-formats input[name="amazon-search-format"]');
            self.$formatsContainer = self.$container.find('.amazon-search-formats');
            self.$welcomeMessage = self.$container.find('.amazon-search-welcome');

            self.$header = self.$container.find('.amazon-search-header');
            self.$footer = self.$container.find('.amazon-search-footer');

            self.bindEvents();
            self.resize();

            // æ¤œç´¢ã‚¯ã‚¨ãƒªæŒ‡å®šã•ã‚Œã¦ã„ãŸã‚‰æ¤œç´¢ã™ã‚‹
            if ( self.$keywordInput.val() ) {
                self.$keywordSubmit.click();
            }
        },
        bindEvents: function () {
            var self = this;

            self.$keywordSubmit.click(function (event) {
                self.searchByInput();
                return false;
            });

            self.$categorySelect.change(function (event) {
                self.searchByInput();
                return false;
            });

            self.$keywordInput.keydown(function (event) {
                if (keyString(event) == 'RET') {
                    self.searchByInput();
                    return false;
                }
            });

            self.$keywordInput.focus(function() {
                // ä¸‹ã®è²¼ã‚Šä»˜ã‘ãƒœã‚¿ãƒ³è¡¨ç¤ºã•ã‚Œãªã„ã“ã¨ãŒã‚ã‚‹
                // åŸå› ã‚ã‹ã‚‰ãªã„ã‘ã©ãƒªã‚µã‚¤ã‚ºã—ãŸã‚‰ãƒœã‚¿ãƒ³å‡ºã¦ãã‚‹
                // æ¤œç´¢ãƒœãƒƒã‚¯ã‚¹ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã—ãŸã¨ãã«ãƒ€ãƒ¡æŠ¼ã—ã§ã‚‚ã†1å›ãƒªã‚µã‚¤ã‚º
                setTimeout(function() {
                    self.resize();
                }, 0);
            });

            self.$itemsContainer.delegate('.amazon-search-item', 'click', function (event) {
                if ($(event.target).is('a')) return;
                $(this).toggleClass('selected');

                self.selectedItemsChanged();
            });

            self.$container.delegate('.amazon-search-item', 'dblclick', function (event) {
                if ($(event.target).is('a')) return;
                self.insertAsins([$(this).attr('data-asin')]);
                $(this).removeClass('selected');
                self.selectedItemsChanged();
                Hatena.Diary.trackEvent(self.$pasteButton.attr('data-track-name'));
                return false;
            });

            self.$pasteButton.click(function (event) {
                var asins = [];
                self.$itemsContainer.find('.selected').each(function () {
                    asins.push($(this).attr('data-asin'));
                    $(this).removeClass('selected');
                });
                self.insertAsins(asins);
                self.selectedItemsChanged();
            });

            Hatena.Diary.Util.backupTab({
                $container: self.$formatsContainer,
                key: 'amazon-formats',
                onchange: function($input) {
                    self.$formatsContainer.find('label.selected').removeClass('selected');
                    $input.closest('label').addClass('selected');
                }
            });

            Hatena.Diary.Util.backupTab({
                $container: self.$layoutTypeContainer,
                key: 'amazon-layout',
                onchange: function($input) {
                    self.$itemsContainer.removeClass('layout-thumbnail');
                    self.$itemsContainer.removeClass('layout-list');

                    var layout = $input.val();
                    self.$itemsContainer.addClass('layout-' + layout);

                    // label class
                    self.$layoutTypeContainer.find('label.selected').removeClass('selected');
                    $input.closest('label').addClass('selected');

                    // ãƒªã‚¹ãƒˆè¡¨ç¤ºã®ã¨ãã ã‘tipsyæœ‰åŠ¹ï¼Œã‚µãƒ ãƒã‚¤ãƒ«è¡¨ç¤ºã®ã¨ãã¯å‡ºã•ãªã„
                    self.setTipsyEnabled(layout == 'thumbnail');
                }
            });

            $(window).resize(_.throttle(function () {
                self.resize();
            }, 100));
        },
        setTipsyEnabled: function (enable) {
            var self = this;

            // tipsy-southwestã‚¯ãƒ©ã‚¹ã‚’ä»˜ã‘ãŸã‚Šå¤–ã—ãŸã‚Šã—ã¾ã™

            var $items = self.$itemsContainer.find('.amazon-search-item');
            var className = 'tipsy-southeast';

            if (enable) {
                $items.addClass(className);
            } else {
                $items.removeClass(className);
            }
        },
        resize: function () {
            var self = this;

            var mainHeight = $(window).height();

            var padding = 0;
            padding += parseInt(self.$itemsContainer.css('padding-top'), 10) || 0;
            padding += parseInt(self.$itemsContainer.css('padding-bottom'), 10) || 0;
            self.$itemsContainer.height(
                mainHeight -
                    self.$container.offset().top   -
                    self.$header.outerHeight(true) -
                    self.$footer.outerHeight(true) -
                    padding
            );
        },
        selectedItemsChanged: function() {
            var self = this;

            if (self.$itemsContainer.find('.selected').length > 0) {
                self.$pasteButton.removeClass('disabled').addClass('enabled').prop('disabled', false);
            } else {
                self.$pasteButton.removeClass('enabled').addClass('disabled').prop('disabled', true);
            }
        },
        searchByInput: function() {
            var self = this;

            self.search(self.$keywordInput.val(), self.$categorySelect.find('option:selected').val());
        },
        search: function (keyword, category) {
            var self = this;

            if (typeof keyword != 'string') return false;

            keyword = keyword.replace(/^\s*/, '');
            keyword = keyword.replace(/\s*$/, '');

            if (keyword.length === 0) return false;

            if (self._searchingKeyword == keyword && self._searchingCategory == category) return false;

            // ã“ã“ã¾ã§æ¥ãŸã‚‰æ¤œç´¢é–‹å§‹

            self.$welcomeMessage.addClass('disable');

            if (self._searchDeferred) {
                self._searchDeferred.reject();
            }

            self.ajaxStarted();

            self._searchingKeyword = keyword;
            self._searchingCategory = category;

            var currentAjax;
            var dfd = $.Deferred().done(function() {
            }).fail(function() {
                if (currentAjax) {
                    // ã‚»ãƒƒã‚·ãƒ§ãƒ³çµ‚äº†æ™‚ã«å‰ã®ajaxã‚’ã‚­ãƒ£ãƒ³ã‚»ãƒ«
                    currentAjax.abort();
                }
            }).always(function() {
                self.ajaxFinished();
            });

            self.$itemsContainer.find('.amazon-search-item').remove();

            var searchPage = function(page) {
                self.ajaxStarted();

                currentAjax = $.ajax({
                    url: '/api/amazon',
                    data: {
                        keyword: keyword,
                        category: category,
                        page: page
                    }
                }).done(function (res) {
                    self.showItems(res.items);

                    if (res.page === 1 && res.items.length === 0) {
                        self.$resultIsEmpty.show();
                    } else {
                        self.$resultIsEmpty.hide();
                    }

                    if (!res.has_next) {
                        dfd.resolve();
                        return;
                    }

                    if (res.page >= 5) {
                        dfd.resolve();
                        return;
                    } else {
                        searchPage(res.page + 1);
                    }
                }).fail(function (res) {
                    dfd.reject(res);
                });
            };
            searchPage(1);

            self._searchDeferred = dfd;
        },
        showItems: function (items) {
            var self = this;

            var source = '';
            _.each(items, function (item) {
                source += self.itemTemplate({
                    item: item
                });
            });
            self.$indicator.before(source);

            self.setTipsyEnabled(self.$itemsContainer.hasClass('layout-thumbnail'));
        },
        insertAsins: function (asins) {
            var self = this;

            var suffix = self.$container.find('[name="amazon-search-format"]:checked').val();

            var hatena_syntaxes = _.map(asins, function(asin) {
                return '[asin:' + asin + (suffix.length > 0 ? ':' + suffix : '') + ']';
            });

            var lines = {
                html: hatena_syntaxes,
                hatena: hatena_syntaxes,
                markdown: hatena_syntaxes
            };

            Hatena.Diary.extractSyntax(hatena_syntaxes).done(function(data) {
                if (suffix === 'detail') {
                    lines.html = ['', '<div class="freezed">' + data.html + '</div>', ''];
                } else {
                    lines.html = [data.html];
                }
                Hatena.Diary.EditorConnector.insertLines(lines);
            }).fail(function(error) {
                Hatena.Diary.BUG(error);
                Hatena.Diary.EditorConnector.insertLines(lines);
            });
        },
        ajaxStarted: function () {
            var self = this;

            self.isAjaxing = true;

            self.$keywordSubmit.prop('disabled', true);
            self.$indicator.show();
            self.$resultIsEmpty.hide();
        },
        ajaxFinished: function () {
            var self = this;

            self.isAjaxing = false;

            self.$keywordSubmit.prop('disabled', false);
            self.$indicator.hide();
        }
    };

    Hatena.Diary.Pages.Admin['user-blog-edit'].Twitter = function () { this.init.apply(this, arguments) };
    Hatena.Diary.Pages.Admin['user-blog-edit'].Twitter.prototype = {
        pasteReverseOrder: true,
        // args: { container }
        init: function (args) {
            var self = this;

            self.$container = args.container;
            if (!self.$container.get(0)) return;
            self.$itemsContainer = self.$container.find('.twitter-items');
            self.$indicator = self.$container.find('.indicator');
            self.itemTemplate = _.template($('.twitter-item-template').html());
            self.$pasteButton = self.$container.find('.twitter-paste-button');
            self.$listTypeContainer = self.$container.find('.twitter-list-type-container');
            self.$formatsContainer = self.$container.find('.twitter-formats');
            self.$reloadButton = self.$container.find('.reload');
            self.$errorMessage = self.$container.find('.error');
            self.$detailOnlyMessage = self.$container.find('.twitter-formats-detail-only');
            self.$header = self.$container.find('.twitter-header');
            self.$footer = self.$container.find('.twitter-footer');

            self.bindEvents();
            self.resize();

            self.loadTweets();
        },
        bindEvents: function () {
            var self = this;

            $(window).resize(_.throttle(function () {
                self.resize();
                self.loadTweets();
            }, 100));

            self.$itemsContainer.delegate('.twitter-item', 'click', function (event) {
                if ($(event.target).is('a')) return;
                if ($(this).is('.private')) return;
                $(this).toggleClass('selected');

                self.selectedItemsChanged();
            });

            self.$container.delegate('.twitter-item', 'dblclick', function (event) {
                if ($(event.target).is('a')) return;
                if ($(this).is('.private')) return;
                self.insertSyntaxes([{
                    id_str: $(this).attr('data-id-str'),
                    screen_name: $(this).attr('data-screen-name'),
                    text: $(this).attr('data-text')
                }]);
                $(this).removeClass('selected');
                self.selectedItemsChanged();
                Hatena.Diary.trackEvent(self.$pasteButton.attr('data-track-name'));
                return false;
            });

            self.$pasteButton.click(function (event) {
                var id_strs = [];
                self.$itemsContainer.find('.selected').each(function () {
                    id_strs.push({
                        id_str: $(this).attr('data-id-str'),
                        screen_name: $(this).attr('data-screen-name'),
                        text: $(this).attr('data-text')
                    });
                    $(this).removeClass('selected');
                });
                self.insertSyntaxes(id_strs);
                self.selectedItemsChanged();
            });

            // list type
            self.$listTypeContainer.delegate('input', 'change', function () {
                if (self.getListType == $(this).val()) return;
                self.setListType($(this).val());
                self.$listTypeContainer.find('label.selected').removeClass('selected');
                $(this).closest('label').addClass('selected');
                self.loadTweets();
            });

            Hatena.Diary.Util.backupTab({
                $container: self.$formatsContainer,
                key: 'twitter-format',
                onchange: function($input) {
                    self.$formatsContainer.find('label.selected').removeClass('selected');
                    $input.closest('label').addClass('selected');
                }
            });

            Hatena.Diary.Util.backupTab({
                $container: self.$listTypeContainer,
                key: 'twitter-list-type',
                onchange: function($input) {
                    self.setListType($input.val());
                    self.$listTypeContainer.find('label.selected').removeClass('selected');
                    $input.closest('label').addClass('selected');
                    self.loadTweets();

                    // è‡ªåˆ†ã®ãƒ„ã‚¤ãƒ¼ãƒˆã®ã¨ãã ã‘è²¼ã‚Šä»˜ã‘ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆé¸ã¹ã‚‹
                    if ($input.val() == 'tweets') {
                        self.$formatsContainer.css('visibility', 'visible');
                        self.$detailOnlyMessage.hide();
                    } else {
                        self.$formatsContainer.css('visibility', 'hidden');
                        self.$detailOnlyMessage.show();
                    }
                }
            });

            self.$reloadButton.click(function (event) {
                self.loadTweets(null, true);
            });

            // ã‚ªãƒ¼ãƒˆãƒšãƒ¼ã‚¸ãƒ£
            self.$itemsContainer.scroll(_.throttle(function() {
                var rate = ( self.$itemsContainer.scrollTop() + self.$itemsContainer.height() ) / self.$itemsContainer[0].scrollHeight;
                if (rate > 0.7) { // ä¸‹ã®ã»ã†ã«è¡Œã£ãŸã‚‰ã‚‚ã£ã¨èª­ã‚€
                    self.loadMore();
                }
            }, 100));

        },
        resize: function() {
            var self = this;

            var mainHeight = $(window).height();

            var padding = 0;
            padding += parseInt(self.$itemsContainer.css('padding-top'), 10) || 0;
            padding += parseInt(self.$itemsContainer.css('padding-bottom'), 10) || 0;
            self.$itemsContainer.height(
                mainHeight -
                    self.$container.offset().top   -
                    self.$header.outerHeight(true) -
                    self.$footer.outerHeight(true) -
                    padding
            );
        },
        setListType: function(type) {
            if (! type.match(/^(tweets|favorites|timeline)$/)) return;
            this.listType = type;
        },
        getListType: function() {
            // ã•ã£ãè¨­å®šã•ã‚ŒãŸï¼Ÿ
            if (this.listType) {
                return this.listType;
            }
            // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤
            return 'tweets';
        },
        selectedItemsChanged: function() {
            var self = this;

            if (self.$itemsContainer.find('.selected').length > 0) {
                self.$pasteButton.removeClass('disabled').addClass('enabled').prop('disabled', false);
            } else {
                self.$pasteButton.removeClass('enabled').addClass('disabled').prop('disabled', true);
            }
        },
        loadTweets: function (max_id, force) {
            var self = this;

            if (self.isLoading) return;
            if (! self.$container.is(':visible')) return;

            self.isLoading = true;
            self.$indicator.show();

            if (!max_id) {
                self.$itemsContainer.find('.twitter-item').remove();
            }

            var data = {};

            if (max_id) {
                data.max_id = max_id;
            }

            var list_type = self.getListType();

            var url = '/api/twitter/' + list_type + (max_id ? '?max_id=' + max_id : '');

            self.ajaxGetOrCache(url, force).done(function (items) {
                // é€šä¿¡ä¸­ã«ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆã‚‰ã‚Œã¦ãŸã‚‰çµæœã‚’æ¨ã¦ã¦å†åº¦é€šä¿¡ã™ã‚‹
                // _.deferã—ã¦ã‚‹ã®ã¯alwaysãŒçµ‚äº†ã—ã¦ã‹ã‚‰å®Ÿè¡Œã™ã‚‹ãŸã‚
                if (self.getListType() != list_type) {
                    _.defer(function() {
                        self.loadTweets();
                    });
                    return;
                }
                if (max_id) {
                    // 1ä»¶ç›®ã¯é‡è¤‡
                    items.shift();
                }
                self.showItems(items);

                self.$errorMessage.hide();
            }).fail(function (res) {
                self.$errorMessage.show();
            }).always(function () {
                self.$indicator.hide();
                self.isLoading = false;
            });

        },
        showItems: function (items) {
            var self = this;

            var source = '';
            _.each(items, function (item) {
                source += self.itemTemplate({
                    item: item
                });
            });
            self.$indicator.before(source);
        },
        loadMore: function() {
            var self = this;

            var $lastItem =  self.$itemsContainer.find('.twitter-item:last');
            if (!$lastItem.length) return;

            var maxId = $lastItem.attr('data-id-str');

            self.loadTweets(maxId);
        },
        // tweet: { screen_name, id_str, text }
        insertSyntaxes: function (tweets) {
            var self = this;

            var format = self.getFormat();

            // markdownãƒ¢ãƒ¼ãƒ‰æ™‚ã¯screen_nameã‚’escapeã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã®ã§åˆ¥ã«ä½œã£ã¦ã„ã‚‹
            var syntaxes = [];
            var syntaxes_for_markdown = [];
            _.each(tweets.reverse(), function(tweet) {
                syntaxes.push(self.createSyntax(tweet, format, false));
                syntaxes_for_markdown.push(self.createSyntax(tweet, format, true));
            });

            Hatena.Diary.EditorConnector.insertLines({
                html:     syntaxes,
                hatena:   syntaxes,
                markdown: syntaxes_for_markdown
            });
        },
        createSyntax: function(tweet, format, is_markdown) {
            if (format == "detail") {
                var screen_name = tweet.screen_name;

                // __hoge__ã¿ãŸã„ãªåå‰ã ã¨markdownã®å¼·èª¿è¡¨ç¤ºã«å¼•ã£ã‹ã‹ã£ã¦å´©ã‚Œã‚‹ã®ã§
                // markdownãƒ¢ãƒ¼ãƒ‰ã®æ™‚ã¯ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ã™ã‚‹ã‚ˆã†ã«ã—ã¦ã‚‹
                if (is_markdown) screen_name = screen_name.replace(/_(.*?)_/g, '\\_$1\\_');

                var text = tweet.text;
                text = text.replace(/[\[\]\n]/g, '').replace(/([\*`_])/g, "\\$1");

                return "[https://twitter.com/" + screen_name + "/status/" + tweet.id_str + ":embed#" + text + "]";
            } else if (format == "text") {
                return tweet.text;
            }
        },
        getFormat: function () {
            if (this.getListType() == "tweets") {
                return this.$container.find('[name="twitter-format"]:checked').val();
            }
            return "detail";
        },
        ajaxGetOrCache : function(url, force_disable_cache) {
            // ajax getã¾ãŸã¯ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‹ã‚‰è¿”ã™
            // ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆã¦æˆ»ã™ã ã‘ã§é€šä¿¡ã—ãªã„ã‚ˆã†ã«ã™ã‚‹ãŸã‚ã®ã‚„ã¤
            // jqXHRã§ã¯ãªãDeferredã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒè¿”ã‚‹ã“ã¨ãŒã‚ã‚‹ã®ã§ä½¿ã†å´ã§æ³¨æ„ã™ã‚‹ã“ã¨
            var self = this;

            // forceã˜ã‚ƒãªãã¦ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚ã£ãŸã‚‰è¿”ã™
            if (!force_disable_cache && self.ajaxGetOrCacheCache[url]) {
                var dfd = $.Deferred();
                dfd.resolve(self.ajaxGetOrCacheCache[url]);
                return dfd.promise();
            }

            // thenã‚’è¿½åŠ ã—ã¦ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã«ä¿å­˜ã™ã‚‹ã¨ã„ã†ã®ã‚’ã‚„ã£ã¦ã„ã¾ã™
            return $.ajax({
                url: url
            }).done(function(res) {
                self.ajaxGetOrCacheCache[url] = res;
            });
        },
        ajaxGetOrCacheCache: {}
    };

    Hatena.Diary.Pages.Admin['user-blog-edit'].HatenaBookmark = function () { this.init.apply(this, arguments) };
    Hatena.Diary.Pages.Admin['user-blog-edit'].HatenaBookmark.prototype = {
        // args: { container }
        init: function (args) {
            var self = this;

            self.$container = args.container;
            if (!self.$container.get(0)) return;
            self.$header = self.$container.find('.header');
            self.$itemsContainer  = self.$container.find('.items');
            self.$indicator  = self.$container.find('.indicator');
            self.template = _.template(self.$container.find('.template').html());
            self.$errorMessage  = self.$container.find('.error-message');
            self.$disabledMessage  = self.$container.find('.disabled-message');
            self.$footer = self.$container.find('.footer');
            self.$pasteButton  = self.$container.find('.paste-button');

            self.loadedPage = 0;

            self.bindEvents();
            self.resize();

            self.loadItems(1);
        },
        bindEvents: function () {
            var self = this;

            $(window).resize(_.throttle(function () {
                self.resize();
                self.loadItems(1);
            }, 100));

            self.$itemsContainer.on('click', '.item', function (event) {
                if ($(event.target).is('a')) return;
                if ($(event.target).parents('a').length > 0) return;
                $(this).toggleClass('selected');

                self.selectedItemsChanged();
                return false;
            });

            self.$container.on('dblclick', '.item', function (event) {
                if ($(event.target).is('a')) return;
                if ($(event.target).parents('a').length > 0) return;
                self.insertItems([$(this)]);
                $(this).removeClass('selected');
                self.selectedItemsChanged();
                Hatena.Diary.trackEvent(self.$pasteButton.attr('data-track-name'));
                return false;
            });

            self.$pasteButton.click(function (event) {
                var items = [];
                self.selectedItems().each(function () {
                    items.push($(this));
                    $(this).removeClass('selected');
                });
                self.insertItems(items.reverse());
                self.selectedItemsChanged();
            });

            // ã‚ªãƒ¼ãƒˆãƒšãƒ¼ã‚¸ãƒ£
            // twitterã‹ã‚‰ã‚³ãƒ”ãƒš
            self.$itemsContainer.scroll(_.throttle(function() {
                var rate = ( self.$itemsContainer.scrollTop() + self.$itemsContainer.height() ) / self.$itemsContainer[0].scrollHeight;
                if (rate > 0.7) { // ä¸‹ã®ã»ã†ã«è¡Œã£ãŸã‚‰ã‚‚ã£ã¨èª­ã‚€
                    self.loadItems(self.loadedPage + 1);
                }
            }, 100));
        },

        resize: function() {
            var self = this;

            var mainHeight = $(window).height() - $('#editor-main').offset().top;
            self.$itemsContainer.height(
                mainHeight -
                    self.$header.outerHeight(true) -
                    self.$footer.outerHeight(true)
            );
        },

        selectedItemsChanged: function() {
            var self = this;

            if (self.selectedItems().length > 0) {
                self.$pasteButton.removeClass('disabled').addClass('enabled').prop('disabled', false);
            } else {
                self.$pasteButton.removeClass('enabled').addClass('disabled').prop('disabled', true);
            }
        },

        selectedItems: function() {
            var self = this;

            return self.$itemsContainer.find('.selected');
        },

        loadItems: function(page) {
            var self = this;

            if (self.isLoading) return;
            if (! self.$container.is(':visible')) return;

            if (page > 10) return;  // ã•ã‹ã®ã¼ã‚Šã™ããªã„
            if (self.failed) return; // ä¸€åº¦å¤±æ•—ã—ãŸã‚‰ã‚ãã‚‰ã‚ã‚‹

            if (self.loadedPage > page) return;

            self.isLoading = true;
            self.$indicator.show();
            self.$errorMessage.hide();

            $.ajax({
                url: '/api/hatena_bookmark/bookmarks?page=' + page,
                type: 'GET',
                dataType: 'json'
            }).done(function (items) {
                self.$errorMessage.hide();
                if (page === 1 && items.length === 0) {
                    self.showDisabledMessage();
                    return;
                }

                self.showItems(items);
            }).fail(function (res) {
                self.$errorMessage.show();
                self.failed = true;
            }).always(function () {
                self.$indicator.hide();
                self.isLoading = false;
            });

            self.loadedPage = page;
        },

        showDisabledMessage: function() {
            // ãƒ–ã‚¯ãƒã‚’ä½¿ã„ã¾ã›ã‚“ã‹ã¿ãŸã„ãªã‚„ã¤
            var self = this;
            self.$disabledMessage.show();
            self.$itemsContainer.hide();
            self.$footer.hide();
            self.failed = true;
        },

        showItems: function(items) {
            var self = this;

            var source = '';
            _.each(items, function (item) {
                source += self.template({
                    item: item
                });
            });
            self.$indicator.before(source);
            Hatena.Locale.updateTimestamps(self.$container[0]);
        },

        insertItems: function(items) {
            var self = this;
            var editor = Hatena.Diary.Editor.Support.currentEditor;
            var syntax = $('#syntax').val();
            var lines = [];
            _.each(items, function($item) {
                var url = $item.attr('data-comment-url');
                var permalink = $item.attr('data-permalink');
                var description = $item.attr('data-description');

                // ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ã‚³ãƒ¡ãƒ³ãƒˆã¯blockquoteã¨scriptã®çµ„ãªã®ã§ï¼Œãƒ•ã‚£ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ€ãƒ¼ã§ã‚‚èª­ã‚ã‚‹ï¼
                // ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ã®APIã®ä»•æ§˜ã§ï¼Œã‚³ãƒ¡ãƒ³ãƒˆãŒãªã„ã¨ãã¯ï¼Œè²¼ã‚Šä»˜ã‘ã‚³ãƒ¼ãƒ‰ã‚’ã‚‚ã‚‰ãˆãªã„ï¼
                // ãƒ–ãƒ­ã‚°ã‚«ãƒ¼ãƒ‰ã«ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã™ã‚‹ã®ã§ï¼Œãã®ã¨ãã¯ãƒ•ã‚£ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ€ãƒ¼ã§ã‚‚èª­ã‚ã‚‹ã‚ˆã†ã«:embed:citeã®å½¢ã§å‡ºã™ï¼
                if (description && description.length > 0) {
                    lines.push('[' + url + ':embed]');
                } else {
                    lines.push('[' + permalink + ':embed:cite]');
                }
            });

            var syntaxes = {
                html: lines,
                hatena: lines,
                markdown: lines
            };

            // ã¿ãŸã¾ã¾ç·¨é›†ã®ã¨ãã¯å…ˆã«è¨˜æ³•å±•é–‹ã—ã¦ã‹ã‚‰ï¼Œãã†ã§ãªã‹ã£ãŸã‚‰ã™ãã«æŒ¿å…¥
            if ($('#syntax').val() === 'html') {
                Hatena.Diary.extractSyntax(lines.join("\n")).done(function(data) {
                    // ç·¨é›†ã§ãã‚‹ã‚ˆã†ã«ä¸Šä¸‹ã«ç©ºè¡Œè¶³ã™
                    syntaxes.html = ['', data.html, ''];
                }).always(function() {
                    Hatena.Diary.EditorConnector.insertLines(syntaxes);
                });
            } else {
                Hatena.Diary.EditorConnector.insertLines(syntaxes);
            }
        }
    };

    // ãƒã‚¤ã‚­ãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³è¦ªã‚¯ãƒ©ã‚¹
    // extendã—ã¦ä½¿ã†
    Hatena.Diary.Pages.Admin['user-blog-edit'].MyCuration = function () { this.init.apply(this, arguments) };
    Hatena.Diary.Pages.Admin['user-blog-edit'].MyCuration.prototype = {
        // args: { container }
        init: function (args) {
            var self = this;

            self.$container = args.container;
            if (!self.$container.get(0)) return;
            self.$header = self.$container.find('.header');
            self.$itemsContainer  = self.$container.find('.items');
            self.$tabsContainer = self.$container.find('.tab-container');
            self.$indicator  = self.$container.find('.indicator');
            self.$errorMessage  = self.$container.find('.error-message');
            self.$disabledMessage  = self.$container.find('.disabled-message');
            self.$footer = self.$container.find('.footer');
            self.$pasteButton  = self.$container.find('.paste-button');

            var $templateNode = self.$container.find('.template');
            if ($templateNode.get(0)) {
                self.template = _.template($templateNode.html());
            }

            var $editorTemplateNode = self.$container.find('.editor-template');
            if ($editorTemplateNode.get(0)) {
                self.editorTemplate = _.template($editorTemplateNode.html());
            }

            self.loadedPage = 0;

            self.bindEvents();
            self.resize();

            self.requestLoadItems();
        },
        // AutoPagerä½¿ã„ãŸã„ã¨ãtrue
        // AutoPageræœ‰åŠ¹ã«ã™ã‚‹ã¨ä¸‹ã¾ã§ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã—ãŸã¨ãloadItems(true)ãŒå‘¼ã°ã‚Œã‚‹
        enableAutoPager: false,
        // AutoPageræœ€å¾Œã¾ã§å—ä¿¡ã—ãŸã‚‰trueã«ã—ã¦ãã ã•ã„
        itemsReachedEnd: false,
        // è¤‡æ•°é¸æŠè²¼ã‚Šä»˜ã‘æ™‚ã«é€†é †ã§è²¼ã‚Šä»˜ã‘ã‚‹ã‹ã©ã†ã‹
        pasteReverseOrder: false,
        bindEvents: function () {
            var self = this;

            $(window).resize(_.throttle(function () {
                self.resize();
                self.requestLoadItems();
            }, 100));

            self.$itemsContainer.on('click', '.item', function (event) {
                if ($(event.target).is('a')) return;
                if ($(event.target).parents('a').length > 0) return;
                $(this).toggleClass('selected');

                self.selectedItemsChanged();
                return false;
            });

            self.$container.on('dblclick', '.item', function (event) {
                if ($(event.target).is('a')) return;
                if ($(event.target).parents('a').length > 0) return;
                self.insertItems([$(this)]);
                $(this).removeClass('selected');
                self.selectedItemsChanged();
                Hatena.Diary.trackEvent(self.$pasteButton.attr('data-track-name'));
                return false;
            });

            self.$pasteButton.click(function (event) {
                var items = [];
                self.selectedItems().each(function () {
                    items.push($(this));
                    $(this).removeClass('selected');
                });
                self.insertItems(self.pasteReverseOrder ? items.reverse() : items);
                self.selectedItemsChanged();
            });

            self.tabs = new Hatena.Diary.Pages.Admin['user-blog-edit'].MyCuration.Tab({
                container: self.$tabsContainer,
                backupKey: self.serviceName
            });
            $(self.tabs).on('change', function() {
                self.removeItems();
                self.requestLoadItems();
            });

            if (self.enableAutoPager) {
                self.$itemsContainer.scroll(_.throttle(function() {
                    var rate = ( self.$itemsContainer.scrollTop() + self.$itemsContainer.height() ) / self.$itemsContainer[0].scrollHeight;
                    // ä¸‹ã®ã»ã†ã«è¡Œã£ãŸã‚‰ã‚‚ã£ã¨èª­ã‚€
                    if (rate > 0.7 && !self.itemsReachedEnd) {
                        self.requestLoadItems(true);
                    }
                }, 100));
            }
        },
        resize: function() {
            var self = this;

            var mainHeight = $(window).height();

            var padding = 0;
            padding += parseInt(self.$itemsContainer.css('padding-top'), 10) || 0;
            padding += parseInt(self.$itemsContainer.css('padding-bottom'), 10) || 0;
            self.$itemsContainer.height(
                mainHeight -
                    self.$container.offset().top   -
                    self.$header.outerHeight(true) -
                    self.$footer.outerHeight(true) -
                    padding
            );
        },
        selectedItemsChanged: function() {
            var self = this;

            if (self.selectedItems().length > 0) {
                self.$pasteButton.removeClass('disabled').addClass('enabled').prop('disabled', false);
            } else {
                self.$pasteButton.removeClass('enabled').addClass('disabled').prop('disabled', true);
            }
        },
        selectedItems: function() {
            var self = this;

            return self.$itemsContainer.find('.selected');
        },
        requestLoadItems: function(is_more) {
            var self = this;

            if (self.isLoading) return;
            if (! self.$container.is(':visible')) return;

            // æœ€åˆã‹ã‚‰requestã•ã‚ŒãŸã‘ã©ãƒšãƒ¼ã‚¸å†…ã«è¦ç´ ãŒã‚ã‚‹å ´åˆã¯ä½•ã‚‚ã—ãªã„
            if (! is_more && self.getItemsOnPage().length > 0) return;

            self._requestLoadItems(is_more);
        },
        willRequestLoadItems: function (is_more) {
            var self = this;
            // å¿…è¦ã«å¿œã˜ã¦ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰ã—ã¦ãã ã•ã„
            // false ã‚’è¿”ã™ã¨ãƒªã‚¯ã‚¨ã‚¹ãƒˆã™ã‚‹ã®ã‚’ã‚„ã‚ã‚‹ã“ã¨ãŒã§ãã¾ã™
            return true;
        },
        _requestLoadItems: function (is_more) {
            var self = this;

            if (!self.willRequestLoadItems(is_more)) return;

            self.isLoading = true;
            self.$indicator.show();
            self.$errorMessage.hide();

            self.loadItems(is_more).done(function(feed) {
                self.showItems(feed.entries);
            }).fail(function(res) {
                self.$errorMessage.show();
            }).always(function() {
                self.$indicator.hide();
                self.isLoading = false;
                self.loadItemsFinishedHandler();
            });
        },
        loadItemsFinishedHandler: function () {
            // å¿…è¦ãªã‚‰ä¸Šæ›¸ãã—ã¦ä½¿ã£ã¦ãã ã•ã„
        },
        requestReload: function (is_more) {
            var self = this;

            if (self.isLoading) return;

            self.removeItems();
            self._requestLoadItems();
        },
        getItemsOnPage: function() {
            var self = this;
            return self.$itemsContainer.find('.item');
        },
        removeItems: function() {
            var self = this;
            self.getItemsOnPage().remove();
        },
        loadItems: function() {
            throw "not implemented";
            // ä¸Šæ›¸ãã—ã¦ä½¿ã£ã¦ãã ã•ã„
        },
        showItems: function(items) {
            var self = this;

            var source = '';
            _.each(items, function (entry) {
                source += self.renderItem(entry);
            });
            self.$indicator.before(source);
            Hatena.Locale.updateTimestamps(self.$container[0]);
            $(self).triggerHandler('items-appended');
        },
        renderItem: function(item) {
            var self = this;
            return self.template({
                item: item
            });
        },
        insertItems: function(items) {
            // å¿…è¦ãªã‚‰ä¸Šæ›¸ãã—ã¦ä½¿ã£ã¦ãã ã•ã„
            var self = this;
            var lines = [];
            _.each(items, function($item) {
                var permalink = $item.attr('data-permalink');
                lines.push('[' + permalink + ':embed]');
            });
            Hatena.Diary.Editor.Support.currentEditor.insertLines(lines);
        }
    };


    // ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆã‚¤ãƒ™ãƒ³ãƒˆã®ç®¡ç†
    // å¤‰æ›´ã‚¤ãƒ™ãƒ³ãƒˆã®ãƒ‡ã‚£ã‚¹ãƒ‘ãƒƒãƒ
    // localStorageã«ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
    // å¤‰æ›´ã•ã‚ŒãŸã‚‰changeã‚¤ãƒ™ãƒ³ãƒˆã‚’ç™ºè¡Œã™ã‚‹
    // get()ã§å€¤ã‚’å–å¾—
    // set(value)ã§å€¤ã‚’è¨­å®š
    // args:
    //   container: inputã‚’å«ã‚€è¦ç´ 
    //   backupKey: ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ç”¨ã®ã‚­ãƒ¼ localStorageã®ã‚­ãƒ¼ã®ä¸€éƒ¨ã«ãªã‚‹
    Hatena.Diary.Pages.Admin['user-blog-edit'].MyCuration.Tab = function () { this.init.apply(this, arguments) };
    Hatena.Diary.Pages.Admin['user-blog-edit'].MyCuration.Tab.prototype = {
        // args: { container backupKey }
        init: function (args) {
            var self = this;

            self.$container = args.container;
            self.backupKey = args.backupKey;
            self.localStorageKey = 'MyCuration.Tab.' + self.backupKey;
            self.values = self.$container.find('input').map(function() { return $(this).val(); }).toArray();

            self.$container.delegate('input', 'change', function () {
                self.$container.find('label.selected').removeClass('selected');
                $(this).closest('label').addClass('selected');

                var value = $(this).val();
                self.value = value;
                try {
                    localStorage[self.localStorageKey] = value;
                } catch(ignore) {}

                $(self).triggerHandler('change');
            });

            try {
                if (localStorage[self.localStorageKey]) {
                    self.set(localStorage[self.localStorageKey]);
                }
            } catch(ignore) {}
        },
        get: function() {
            return this.value || this.values[0];
        },
        set: function(value) {
            var self = this;
            if (! _.include(self.values, value)) return;
            var $input = self.$container.find('input[value="' + value + '"]');
            $input.click();
        }
    };

    Hatena.Diary.Pages.Admin['user-blog-edit'].Archive = function () { this.init.apply(this, arguments) };
    Hatena.Diary.Pages.Admin['user-blog-edit'].Archive.prototype = {
        parent: Hatena.Diary.Pages.Admin['user-blog-edit'].MyCuration,
        init: function (args) {
            var self = this;

            self.$indicator = args.container.find('.indicator');

            self.parent.prototype.init.call(self, args);

            self._templatesByType = {
                'default': _.template(self.$container.find('.archive-item-template').html())
            };
        },
        bindEvents: function () {
            var self = this;

            self.parent.prototype.bindEvents.call(self);

            self.$submit = self.$container.find('.archive-keyword-submit');
            self.$keyword = self.$container.find('.archive-keyword');

            self.$submit.click(function (event) {
                self.initLoadCondition();
                self.requestReload();
                return false;
            });

            self.$keyword.keydown(function (event) {
                if (keyString(event) == 'RET') {
                    self.initLoadCondition();
                    self.requestReload();
                    return false;
                }
            });
        },
        initLoadCondition: function() {
            this.itemsReachedEnd = false;
            this.untilEpoch = null;
        },
        serviceName: 'Archive',
        enableAutoPager: true,
        pasteReverseOrder: true,
        willRequestLoadItems: function (more) {
            return true;
        },
        loadItems: function(more) {
            var self = this;

            var term = self.$keyword.val();

            var data = {
                permission: 'public',
                q: term
            };

            if (self.untilEpoch) {
                data.until = self.untilEpoch;
            }

            return $.ajax({
                url: 'entries.json',
                data: data,
                type: 'GET',
                dataType: 'json'
            }).then(function(json){
                if (json.entries.length > 0) {
                    self.untilEpoch = Date.parse(json.entries[json.entries.length - 1].created) / 1000;
                    self.itemsReachedEnd = !json.has_more;
                    return $.Deferred().resolve(json);
                } else {
                    // ãƒ’ãƒƒãƒˆä»¶æ•°0ãªã®ã§ã‚¨ãƒ©ãƒ¼ã¨ã™ã‚‹
                    return $.Deferred().reject();
                }
            });
        },
        renderItem: function(item) {
            var self = this;

            item.datetimeEpoch = Date.parse(item.datetime);

            var template = self._templateByType('default');

            return template({
                entry: item,
                trim: function(text, chars) {
                        if (text.length <= chars) return text;
                        return text.substr(0, chars - 1) + ' ...';
                      }
            });
        },
        _templateByType: function(type) {
            var self = this;
            return self._templatesByType[type] || self._templatesByType['default'];
        },
        insertItems: function(items) {
            var self = this;

            var lines = {
                hatena:   [],
                markdown: []
            };
            _.each(items, function($item) {
                var item = {
                    permalink: $item.attr('data-permalink')
                };

                lines.hatena.push('[' + item.permalink + ':embed:cite]');
                lines.markdown.push('[' + item.permalink + ':embed:cite]');
            });

            Hatena.Diary.extractSyntax(lines.hatena).done(function(data) {
                lines.html = ['', data.html, ''];
            }).fail(function(error) {
                lines.html = lines.hatena;
                Hatena.Diary.BUG(error);
            }).always(function() {
                if (Hatena.Diary.EditorConnector.isiOS() || Hatena.Diary.EditorConnector.isAndroid()) {
                    // ã‚¹ãƒãƒ•ã‚©ã‚¢ãƒ—ãƒªã®ã¨ãã†ã¾ãè¡¨ç¤ºã§ããªã„ã®ã§è¨˜æ³•ãã®ã¾ã¾ã«ã—ã¦ãŠã
                    lines.html = lines.hatena;
                }
                Hatena.Diary.EditorConnector.insertLines(lines);
            });
        }
    };

    Hatena.Diary.Util.extend(Hatena.Diary.Pages.Admin['user-blog-edit'].Archive.prototype, Hatena.Diary.Pages.Admin['user-blog-edit'].MyCuration.prototype);

    Hatena.Diary.Pages.Admin['user-blog-edit'].Instagram = function () { this.init.apply(this, arguments) };
    Hatena.Diary.Pages.Admin['user-blog-edit'].Instagram.prototype = {
        parent: Hatena.Diary.Pages.Admin['user-blog-edit'].MyCuration,
        init: function (args) {
            var self = this;

            self.parent.prototype.init.call(self, args);

            $(self).on('items-appended', function() {
                self.setPaddingLeft();
            });
        },
        serviceName: 'Instagram',
        enableAutoPager: true,
        pasteReverseOrder: true,
        loadItems: function(more) {
            var self = this;

            var data = {};

            if (more) {
                var $lastItem =  self.$itemsContainer.find('.item:last');
                data.max_id = $lastItem.attr('data-next-max-id');
            }

            return $.ajax({
                url: '/api/instagram/recent',
                data: data,
                type: 'GET',
                dataType: 'json'
            }).fail(function() {
                self.pleaseReAuthorize();
            }).done(function(res) {
                if (res && res.data) {
                    res.entries = res.data;
                    // ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã«data-max-idå…¥ã‚Œã‚‹ã®ã§å„ã‚¨ãƒ³ãƒˆãƒªã«å…¥ã‚Œã‚‹
                    _.each(res.entries, function(entry) {
                        entry.next_max_id = res.next_max_id;
                    });
                }

                // next_max_idãªã‹ã£ãŸã‚‰ã“ã‚Œã§çµ‚ã‚ã‚Š(autopagerãŒç„¡åŠ¹ã«ãªã‚‹)
                if (!res.next_max_id) {
                    self.itemsReachedEnd = true;
                }

                return res;
            });
        },
        pleaseReAuthorize: function() {
            var self = this;
            self.$container.find('.disabled-box').show();
        },
        insertItems: function(items) {
            var self = this;

            var lines = {
                hatena:   [],
                markdown: []
            };
            _.each(items, function($item) {
                var item = {
                    permalink: $item.attr('data-permalink'),
                    caption: $item.attr('data-caption'),
                    type: $item.attr('data-type')
                };

                var media_url = item.permalink + 'media/?size=l';

                // å‹•ç”»ã¯iframe(:embedã§å±•é–‹ã—ãŸã‚‰iframeã«ãªã‚‹)ï¼Œå†™çœŸã¯a>img
                if (item.type === 'video') {
                    lines.hatena.push('[' + item.permalink + ':embed]');
                    lines.markdown.push('[' + item.permalink + ':embed]');
                } else {
                    lines.hatena.push('[' + item.permalink + ':image=' + media_url + ']');
                    lines.markdown.push('[![](' + media_url + ')](' + item.permalink + ')');
                }

                // captionã‚ã£ãŸã‚‰captionã§ãƒªãƒ³ã‚¯ï¼Œãªã‹ã£ãŸã‚‰å˜ãªã‚‹ãƒªãƒ³ã‚¯
                // captionãªã„ã¨ãmarkdownã§ã¯ã‚¿ã‚¤ãƒˆãƒ«å–ã‚Œãªã„ã®ã§ã¯ã¦ãªè¨˜æ³•
                if (item.caption) {
                    var caption = item.caption.replace(/\r?\n/g, '');
                    lines.hatena.push('[' + item.permalink + ':title=' + caption + ']');
                    lines.markdown.push('[' + caption + '](' + item.permalink + ')');
                } else {
                    lines.hatena.push('[' + item.permalink + ':title]');
                    lines.markdown.push('[' + item.permalink + ':title]');
                }
            });


            Hatena.Diary.extractSyntax(lines.hatena).done(function(data) {
                lines.html = [data.html];
            }).fail(function(error) {
                lines.html = lines.hatena;
                Hatena.Diary.BUG(error);
            }).always(function() {
                Hatena.Diary.EditorConnector.insertLines(lines);
            });
        },
        setPaddingLeft: function() {
            var self = this;

            // itemsãŒä¸­å¤®ã«æƒã†ã‚ˆã†å¹…ã‚’èª¿æ•´
            // ä¸€åˆ—ã«è¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹itemsã®å¹…ã®åˆè¨ˆã‹ã‚‰ï¼ŒpaddingLeftã‚’æ±ºã‚ã‚‹
            //
            // |----|               |----|  padding
            // |-------------------------|  .itemsContainer
            //      |---| |---| |---|       .item
            //      ^itemsLeft
            //                      ^itemsRight
            //
            // padding = itemsContainerã®å¹… - (itemsRight - itemsLeft) / 2

            var $itemsContainer = $('.items');
            var $items = $('.item');
            var $firstItem = $($items[0]);
            var firstItemTop = $firstItem.position().top;
            var itemsLeft = $firstItem.position().left;
            var itemsRight = itemsLeft + $firstItem.outerWidth();
            $items.each(function() {
                var $this = $(this);
                if ($this.position().top !== firstItemTop) return false;
                itemsRight = $this.position().left + $this.outerWidth();
            });

            var itemsWidthTotal = itemsRight - itemsLeft;
            var padding = ($itemsContainer.width() - itemsWidthTotal) / 2;

            $itemsContainer.css({
                'padding-left': padding + 'px'
            });
        }
    };

    Hatena.Diary.Util.extend(Hatena.Diary.Pages.Admin['user-blog-edit'].Instagram.prototype, Hatena.Diary.Pages.Admin['user-blog-edit'].MyCuration.prototype);

    Hatena.Diary.Pages.Admin['user-blog-edit'].Evernote = function () { this.init.apply(this, arguments); };
    Hatena.Diary.Pages.Admin['user-blog-edit'].Evernote.prototype = {
        parent: Hatena.Diary.Pages.Admin['user-blog-edit'].MyCuration,
        init: function (args) {
            var self = this;

            self.$keywordInput = args.container.find('.evernote-search-keyword');
            self.$keywordSubmit = args.container.find('.evernote-search-keyword-submit');

            // $.extend ã—ã¦ã„ã‚‹ã®ã§ this.constructor ã¨ã‹ãŒæ­£ã—ãè¿½åŠ ã•ã‚Œã¦ã„ãªã„
            self.parent.prototype.init.call(self, args);
        },
        bindEvents: function () {
            var self = this;

            // $.extend ã—ã¦ã„ã‚‹ã®ã§ this.constructor ã¨ã‹ãŒæ­£ã—ãè¿½åŠ ã•ã‚Œã¦ã„ãªã„
            self.parent.prototype.bindEvents.call(self);

            // AmazonSearch ã‹ã‚‰ã ã„ãŸã„ã‚³ãƒ”ãƒšã—ã¦ããŸ

            self.$keywordSubmit.click(function (event) {
                self.searchByInput();
                return false;
            });

            self.$keywordInput.keydown(function (event) {
                if (keyString(event) === 'RET') {
                    self.searchByInput();
                    return false;
                }
            });

            self.$keywordInput.focus(function() {
                // ä¸‹ã®è²¼ã‚Šä»˜ã‘ãƒœã‚¿ãƒ³è¡¨ç¤ºã•ã‚Œãªã„ã“ã¨ãŒã‚ã‚‹
                // åŸå› ã‚ã‹ã‚‰ãªã„ã‘ã©ãƒªã‚µã‚¤ã‚ºã—ãŸã‚‰ãƒœã‚¿ãƒ³å‡ºã¦ãã‚‹
                // æ¤œç´¢ãƒœãƒƒã‚¯ã‚¹ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã—ãŸã¨ãã«ãƒ€ãƒ¡æŠ¼ã—ã§ã‚‚ã†1å›ãƒªã‚µã‚¤ã‚º
                setTimeout(function() {
                    self.resize();
                }, 0);
            });

            self.$itemsContainer.on('show_items', function (event, args) {
                _.each(args.notes, function (note) {
                    var $item = self.$itemsContainer.find('.item[data-item-guid=' + note.guid + ']');

                    $.ajax({
                        url: '/api/evernote/note',
                        data: {
                            content: 1,
                            guid: $item.attr('data-item-guid')
                        },
                        type: 'GET',
                        dataType: 'json'
                    }).done(function (response) {
                        if (response && response.content) {
                            var content_type = $('#syntax').val() === 'html' ? 'html' : 'plain';

                            // APIã®è¿”ã‚Šå€¤ã§ã¯<ãªã©ãŒã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ã•ã‚Œã¦ã„ã‚‹ã®ã§æˆ»ã™
                            $item.find('.evernote-search-item-body').text(_.unescape(response.content.extended[content_type]));
                            $item.find('.evernote-search-item-body-preview').text(_.unescape(response.content.extended.excerpt));

                            $item.attr('data-loaded-body', true);

                            if (response.extended.has_resource) {
                                self.appendResources({ item: $item, resources: response.resources });
                                self.previewResources({ item : $item, resources : response.resources });
                            }
                        }
                    });
                });
            });

            self.$container.on('insert_items', function (event, args) {
                var notes = args.items;
                var resources = _.chain(notes).
                        map(function (note) { return $(note).find('.evernote-item-resource').get(); }).
                        flatten().
                        value();

                self.requestInsertResources(resources);

                var note_title = _.chain(notes).
                        map(function ($item) { return $item.find('.evernote-search-item-title').text(); }).
                        find(function (note_title) { return note_title; }).
                        value();
                var entry_title = Hatena.Diary.Editor.Support.currentEditor.title.val();

                if (note_title && !entry_title) {
                    Hatena.Diary.Editor.Support.currentEditor.title.val(note_title);
                }
            });
        },
        serviceName: 'Evernote',
        syntax: function () {
            return $('#syntax').val();
        },
        loadItems: function () {
            var self = this;
            var data = {
                filter_order: 'created'
            };

            return $.ajax({
                url: '/api/evernote/notes_metadata',
                data: data,
                type: 'GET',
                dataType: 'json'
            }).pipe(function(response) {
                if (!response) return response;

                if (!response.is_error) {
                    response.entries = response.notes;
                } else if (response.is_error && response.error_details.type === 'auth_expired') {
                    self.$container
                        .html(self.$container.find('.auth-expired-template').html())
                        .removeClass('enabled').addClass('disabled');
                    return response;
                }

                self.itemsReachedEnd = !response.extended.has_next;

                return response;
            }).fail(function(response) {
                if (!response) return response;

                // APIåˆ©ç”¨åˆ¶é™ã«é”ã—ãŸ
                var responseText = null;
                try {
                    responseText = $.parseJSON(response.responseText);
                } catch(e) {
                }
                if (responseText && responseText.is_rate_limit_reached) {
                    self.$container
                        .html(self.$container.find('.rate-limit-reached-template').html())
                        .removeClass('enabled').addClass('disabled');
                    return response;
                }
            });
        },
        previewResources: function (args) {
            var self = this;
            var $note_item = args.item;
            var resources = args.resources;

            if (resources.length <= 0) return;

            var resource = resources[0];

            var $img = $('<img/>');
            $img.attr('src', '/api/evernote/thumbnail?guid=' + resource.guid);
            $img.addClass('resource-image');

            Hatena.Diary.Util.waitForResource(function () {
                return $note_item.attr('data-loaded-body');
            }, function () {
                $note_item.find('.evernote-image-preview').append($img);
            });
        },
        appendResources: function (args) {
            var self = this;

            var $item = args.item;
            var resources = args.resources;

            $item.attr('data-has-resource', true);
            $item.addClass('has-resource');
            var $resources = _.map(resources, function (resource) {
                var $resource_node = $('<li/>');
                var attrs = {
                    'data-guid': resource.guid
                };
                $resource_node.attr(attrs);
                $resource_node.addClass('evernote-item-resource');

                return $resource_node.get(0);
            });
            $item.find('.evernote-item-resources').append($resources);
        },
        requestInsertResources: function (resources) {
            var self = this;
            var resource = resources.shift();

            if (!resource) return;

            var $resource = $(resource);
            if ($resource.attr('data-uploaded')) {
                self.insertFotolifeImage({
                    annotation    : $resource.attr('data-fotolife-annotation'),
                    html          : $resource.attr('data-fotolife-html'),
                    hex_body_hash : $resource.attr('data-hex-body-hash')
                });
                self.requestInsertResources(resources);
            } else {
                var dfd = self.requestUploadResource($resource);
                dfd.done(function () {
                    self.requestInsertResources(resources);
                });
            }
        },
        requestUploadResource: function (resource) {
            var self = this;

            return $.ajax({
                url: '/api/upload/evernote/resource',
                data: {
                    rkm: Hatena.Diary.data('rkm'),
                    rkc: Hatena.Diary.data('rkc'),
                    guid: resource.attr('data-guid')
                },
                dataType: 'json',
                type: 'POST'
            }).done(_.bind(self.onCompleteUploadingResource, self, resource));
        },
        onCompleteUploadingResource: function ($resource, response) {
            var self = this;

            $resource.attr({
                'data-uploaded' : 1,
                'data-fotolife-annotation' : response.annotation,
                'data-fotolife-html' : response.html,
                'data-hex-body-hash' : response.hex_body_hash
            });

            self.insertFotolifeImageByResource($resource);
        },
        insertFotolifeImageByResource: function ($resource) {
            var self = this;

            if (! $resource.attr('data-uploaded')) return;

            self.insertFotolifeImage({
                annotation    : $resource.attr('data-fotolife-annotation'),
                html          : $resource.attr('data-fotolife-html'),
                hex_body_hash : $resource.attr('data-hex-body-hash')
            });
        },
        insertFotolifeImage: function (args) {
            var self = this;

            var annotation = args.annotation;
            var hex_body_hash = args.hex_body_hash;
            var html = args.html;

            var uploadingMessage = Hatena.Locale.text('uploading');
            var editor = Hatena.Diary.Editor.Support.currentEditor;
            var current_body = editor.body.val();
            var placeholder = '[evernote:' + hex_body_hash + ' ' + uploadingMessage + ']';
            var image_source = self.syntax() === 'html' ? html : '[' + annotation + ']';
            var replaced = current_body.replace(placeholder, image_source);

            editor.setValue(replaced);
        },
        resourcesAreUploaded: function ($item) {
            return _.all($item.find('.evernote-resource').get(), function ($resource) {
                return $resource.attr('data-uploaded');
            });
        },
        readyToInserted: function ($items) {
            var self = this;
            return _.all($items, function ($item) {
                var loaded_body = $item.attr('data-loaded-body');
                var has_resource = $item.attr('data-has-resource');
                var upload_completed = has_resource ? self.resourcesAreUploaded($item) : true;
                return loaded_body && upload_completed;
            });
        },
        insertItems: function(items) {
            var self = this;

            Hatena.Diary.Util.waitForResource(function () {
                return self.readyToInserted(items);
            }, function () {
                var uploadingMessage = Hatena.Locale.text('uploading');
                var lines = _.map(items, function ($item) {
                    return $item.find('.evernote-search-item-body').text().replace(/\[evernote:([^\]]*)\]/gm, '[evernote:$1 ' + uploadingMessage + ']');
                });

                Hatena.Diary.Editor.Support.currentEditor.insertLines(lines);

                self.$container.trigger('insert_items', { items: items, lines: lines });
            });
        },
        showItems: function (items) {
            var self = this;
            self.parent.prototype.showItems.call(self, items);

            self.$itemsContainer.trigger('show_items', {notes: items});
        },
        searchByInput: function () {
            var self = this;

            self.search(self.$keywordInput.val());
        },
        search: function (keyword) {
            var self = this;

            if (typeof keyword != 'string') return false;

            keyword = keyword.replace(/^\s*/, '');
            keyword = keyword.replace(/\s*$/, '');

            // ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãŒç©ºã ã£ãŸã‚‰ãƒªãƒ­ãƒ¼ãƒ‰
            if (keyword.length === 0) {
                self.requestReload();
                return false;
            }

            // AmazonSearch ã‹ã‚‰ã ã„ãŸã„ã‚³ãƒ”ãƒš

            // if (self._searchingKeyword == keyword && self._searchingCategory == category) return false;

            if (self._searchDeferred) {
                self._searchDeferred.reject();
            }

            self.ajaxStarted();

            self._searchingKeyword = keyword;

            var currentAjax;
            var dfd = $.Deferred().done(function() {
            }).fail(function() {
                if (currentAjax) {
                    // ã‚»ãƒƒã‚·ãƒ§ãƒ³çµ‚äº†æ™‚ã«å‰ã®ajaxã‚’ã‚­ãƒ£ãƒ³ã‚»ãƒ«
                    currentAjax.abort();
                }
            }).always(function() {
                self.ajaxFinished();
            });

            self.$itemsContainer.find('.evernote-search-item').remove();

            var searchWithOffset = function(offset) {
                self.ajaxStarted();

                currentAjax = $.ajax({
                    url: '/api/evernote/notes_metadata',
                    data: {
                        offset: offset,
                        filter_order: 'created',
                        filter_words: keyword
                    }
                }).done(function (response) {
                    self.showItems(response.notes);

                    if (response.extended.has_next && response.extended.next_offset) {
                        searchWithOffset(response.extended.next_offset);
                    } else {
                        dfd.resolve();
                        return;
                    }
                }).fail(function (response) {
                    dfd.reject(response);
                });
            };
            searchWithOffset(0);

            self._searchDeferred = dfd;
        },
        ajaxStarted: function () {
            var self = this;

            self.isAjaxing = true;

            self.$keywordSubmit.prop('disabled', true);
            self.$indicator.show();
            self.$errorMessage.hide();
        },
        ajaxFinished: function () {
            var self = this;

            self.isAjaxing = false;

            self.$keywordSubmit.prop('disabled', false);
            self.$errorMessage.hide();
            self.$indicator.hide();
        }
    };
    Hatena.Diary.Util.extend(Hatena.Diary.Pages.Admin['user-blog-edit'].Evernote.prototype, Hatena.Diary.Pages.Admin['user-blog-edit'].MyCuration.prototype);

    Hatena.Diary.Pages.Admin['user-blog-edit'].Miil = function () { this.init.apply(this, arguments); };
    Hatena.Diary.Pages.Admin['user-blog-edit'].Miil.prototype = {
        parent: Hatena.Diary.Pages.Admin['user-blog-edit'].MyCuration,
        serviceName: 'Miil',
        enableAutoPager: true,
        pasteReverseOrder: true,
        init: function (args) {
            var self = this;

            self.parent.prototype.init.call(self, args);

            self.userManager = new Hatena.Diary.Pages.Admin['user-blog-edit'].Miil.UserManager({
                container: self.$container
            });

            $(self.userManager).on('registered', function() {
                self.resetUser();
                self.requestLoadItems();
            });

            $(self.userManager).on('unregistered', function() {
                self.resetUser();
            });
        },
        loadItems: function(is_more) {
            var self = this;

            var dfd = $.Deferred();

            if (!(self.userManager && self.userManager.getUser())) {
                dfd.reject();
                return dfd;
            }

            var user = self.userManager.getUser();

            if (is_more) {
                user.forward();
            }
            user.load().done(function(data) {
                var photos = data.photos;
                _.each(photos, function(photo) {
                    photo.thumbnail_url = photo.url + '=s72';
                });

                dfd.resolve({
                    entries: photos
                });
            }).fail(function() {
                dfd.reject();
                self.itemsReachedEnd = true;
            });

            return dfd;
        },
        insertItems: function(items) {
            var self = this;

            var lines = [];

            _.each(items, function($item) {
                if ($('#syntax').val() === 'html') {
                    lines.push(self.editorTemplate({
                        item: {
                            permalink_url: $item.attr('data-permalink'),
                            image_url: $item.attr('data-image-url'),
                            title: $item.attr('data-title')
                        }
                    }));
                } else {
                    lines.push('[' + $item.attr('data-permalink') + ':image=' + $item.attr('data-image-url') + ']');
                    if ($item.attr('data-title')) {
                        lines.push($item.attr('data-title'));
                    }
                }
            });
            Hatena.Diary.Editor.Support.currentEditor.insertLines(lines);
        },
        resetUser: function() {
            var self = this;

            self.itemsReachedEnd = false;
            self.removeItems();

            if (self.userManager && self.userManager.getUser()) {
                self.userManager.getUser().rewind();
            }
        }
    };

    Hatena.Diary.Util.extend(Hatena.Diary.Pages.Admin['user-blog-edit'].Miil.prototype, Hatena.Diary.Pages.Admin['user-blog-edit'].MyCuration.prototype);

    // ãƒ¦ãƒ¼ã‚¶ãƒ¼é€£æºæ©Ÿèƒ½ï¼ŒUserLoaderã‹ã‚‰Userã‚’å—ã‘å–ã£ã¦ä¿æŒã™ã‚‹ï¼Œé€£æºUIã®ç®¡ç†
    Hatena.Diary.Pages.Admin['user-blog-edit'].Miil.UserManager = function () { this.init.apply(this, arguments); };
    Hatena.Diary.Pages.Admin['user-blog-edit'].Miil.UserManager.prototype = {
        init: function (args) {
            var self = this;

            self.$container = args.container;

            self.$input = self.$container.find('.miil-user-name');
            self.$registerButton = self.$container.find('.register-button');
            self.$unregisterButton = self.$container.find('.unregister-button');

            self.$userImage = self.$container.find('.user-image');
            self.$name = self.$container.find('.user-name');
            self.$nameLink = self.$container.find('.user-name-link');
            self.$userNotFound = self.$container.find('.user-not-found-error');

            self.userLoader = new Hatena.Diary.Pages.Admin['user-blog-edit'].Miil.UserLoader();

            self.bindEvents();

            self.tryRegisterFromInput();
        },
        bindEvents: function() {
            var self = this;

            self.$registerButton.on('click', function() {
                self.tryRegisterFromInput();
                return false;
            });

            self.$input.on('keydown', function(event) {
                if(keyString(event) === 'RET') {
                    self.tryRegisterFromInput();
                    return false;
                }
            });

            self.$unregisterButton.on('click', function() {
                self.unregister();
                return false;
            });
        },
        // inputã«å…¥åŠ›ã•ã‚ŒãŸå€¤ã‹ã‚‰èªè¨¼ã‚’è©¦ã¿ã‚‹
        tryRegisterFromInput: function() {
            var self = this;

            var user_name = self.$input.val();
            if (!user_name) return;
            self.tryRegister(user_name);
        },
        // validãªãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨é€£æºã—ã¦ã„ã‚‹ã¨ãUserã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’è¿”ã™
        getUser: function() {
            var self = this;

            return self.currentUser;
        },
        // æŒ‡å®šã•ã‚ŒãŸåå‰ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ã®é€£æºã‚’è©¦ã¿ã‚‹
        tryRegister: function(user_name) {
            var self = this;

            self.userLoader.loadUser(user_name).done(function(user) {
                if (user.exists()) {
                    self.onUserFound(user);
                } else {
                    self.unregister();
                    self.$userNotFound.show();
                }
            });
        },
        // registerã™ã‚‹ã¨ãã®ã„ã‚ã„ã‚ï¼ŒçŠ¶æ…‹æ›¸ãæ›ãˆï¼Œviewæ›´æ–°
        onUserFound: function(user) {
            var self = this;

            self.currentUser = user;
            self.setUserImage(user.getImage() || self.DEFAULT_UESR_IMAGE);
            self.$name.text(user.getName());
            self.$nameLink.attr('href', 'http://miil.me/u/' + user.getName());
            self.$userNotFound.hide();
            self.$container.addClass('registered');
            Hatena.Diary.Pages.Admin['*'].saveBlogConfig('miil_user_name', user.getName());
            $(self).trigger('registered');
            $(window).resize();     // headerã®é«˜ã•å¤‰ã‚ã‚‹ãŸã‚
        },
        // é€£æºè§£é™¤ã™ã‚‹
        // viewæ›´æ–°
        unregister: function() {
            var self = this;

            $(self).trigger('unregistered');

            self.currentUser = null;
            self.$input.focus();

            self.setUserImage(self.DEFAULT_UESR_IMAGE);
            self.$userNotFound.hide();
            Hatena.Diary.Pages.Admin['*'].saveBlogConfig('miil_user_name', '');
            self.$container.removeClass('registered');
            $(window).resize();     // headerã®é«˜ã•å¤‰ã‚ã‚‹ãŸã‚
        },
        setUserImage: function(url) {
            var self = this;

            self.$userImage.attr('src', url);
        },
        DEFAULT_UESR_IMAGE: 'http://assets.miil.me/images/pc/user.jpg'
    };

    // Userã‚¯ãƒ©ã‚¹ã®ç”Ÿæˆï¼Œã‚­ãƒ£ãƒƒã‚·ãƒ¥
    Hatena.Diary.Pages.Admin['user-blog-edit'].Miil.UserLoader = function () { this.init.apply(this, arguments); };
    Hatena.Diary.Pages.Admin['user-blog-edit'].Miil.UserLoader.prototype = {
        init: function (args) {
            var self = this;

            self.users = {};
        },
        loadUser: function(name) {
            var self = this;

            var dfd = $.Deferred();

            if (!self.users[name]) {
                self.users[name] = new Hatena.Diary.Pages.Admin['user-blog-edit'].Miil.User(name);
            }

            self.users[name].load().always(function() {
                dfd.resolve(self.users[name]);
            });

            return dfd;
        }
    };

    // miilã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€äººã«å¯¾å¿œã™ã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
    // photosã®èª­ã¿è¾¼ã¿ï¼Œãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æƒ…å ±ã‚’è¿”ã™ï¼Œãƒšãƒ¼ã‚¸ãƒ³ã‚°
    // ã‚ªãƒ¼ãƒˆãƒšãƒ¼ã‚¸ãƒ£å¯¾å¿œã®ãŸã‚Hatena.Diary.LazyListã‚’ä½¿ã£ã¦ã„ã¾ã™
    // load() â†’ forward() â†’ load() ã¿ãŸã„ã«é †ç•ªã«èª­ã‚€ã¨ãƒšãƒ¼ã‚¸ãƒ³ã‚°ã§ãã‚‹
    // rewind() â†’ forward() ã™ã‚‹ã¨ãƒšãƒ¼ã‚¸ãƒ³ã‚°ãŒæœ€åˆã«æˆ»ã‚‹
    // æœ€åˆã«æˆ»ã™ã«ã¯ï¼ŒrewindPhotosCursor()ã—ã¦ãã ã•ã„
    Hatena.Diary.Pages.Admin['user-blog-edit'].Miil.User = function () { this.init.apply(this, arguments); };
    Hatena.Diary.Pages.Admin['user-blog-edit'].Miil.User.prototype = {
        init: function (name) {
            var self = this;

            self.name = name;

            // photos_loaderã®æœ€åˆã®ãƒšãƒ¼ã‚¸
            self.photos_loader_root = new Hatena.Diary.LazyList(_.bind(self._photosLoaderBody, self));

            // ãƒšãƒ¼ã‚¸ãƒ³ã‚°ç”¨ã®ã‚«ãƒ¼ã‚½ãƒ«ã¿ãŸã„ãªã‚„ã¤
            self.photos_loader = self.photos_loader_root;
        },
        getName: function() {
            var self = this;

            return self.name;
        },
        // ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”»åƒã®URL
        getImage: function() {
            var self = this;

            return self.basicData.photos[0].user.user_icon_url;

        },

        // ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿é–¢é€£
        load: function() {
            var self = this;

            return self.photos_loader.promise();
        },
        // loaderã‚’é€²ã‚ã‚‹ æ¬¡ã«loadã—ãŸã‚‰é€šä¿¡ãŒç™ºç”Ÿã™ã‚‹ã‹ã‚‚ã—ã‚Œãªã„
        forward: function() {
            var self = this;
            self.photos_loader = self.photos_loader.next();
        },
        // loaderã‚’æœ€åˆã«å·»ãæˆ»ã™
        rewind: function() {
            var self = this;
            self.photos_loader = self.photos_loader_root;
        },
        // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒmiilã«å­˜åœ¨ã™ã‚‹ã‹
        exists: function() {
            var self = this;

            return self.photos_loader_root.promise().state() === "resolved";
        },
        _photosURL: function(data) {
            var self = this;

            return 'http://api.miil.me/api/users/' + self.name + '/photos/public.json?' + $.param(data);
        },
        _getNextPageFromReceivedData: function(data) {
            if (!data) return;
            if (!data.next_url) return;

            var match = data.next_url.match(/page=(\d+)/);
            if (!match) return;
            return match[1];
        },
        // APIèª­ã¿è¾¼ã¿ã®æœ¬ä½“ï¼Œå‰ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‹ã‚‰æ¬¡ã®URLã‚’æ±ºã‚ã‚‹
        _photosLoaderBody: function(prev) {
            var self = this;

            // ãƒ‡ãƒ¼ã‚¿æƒã£ãŸã‚‰resolve
            var photos_loaded = $.Deferred();

            // GETã™ã‚‹ãƒšãƒ¼ã‚¸ã®URLãŒæ±ºã¾ã£ãŸã‚‰resolve
            var page_determined = $.Deferred();

            // å‰ã®é€šä¿¡çµæœã‹ã‚‰æ¬¡ã®ãƒšãƒ¼ã‚¸æ±ºã‚ã‚‹
            if (prev) {
                prev.promise().done(function(data) {
                    var next_page = self._getNextPageFromReceivedData(data);
                    if (!next_page) {
                        page_determined.reject();
                    }
                    page_determined.resolve(next_page);
                }).fail(function() {
                    page_determined.reject();
                });
            } else {
                // åˆå›ã¯next_pageãªã—ã§é€šä¿¡
                page_determined.resolve();
            }

            page_determined.done(function(next_page) {
                var data = {};

                if (next_page) {
                    data.page = next_page;
                }

                $.ajax({
                    url: '/api/external/json',
                    data: {
                        url: self._photosURL(data)
                    },
                    type: 'GET',
                    dataType: 'json'
                }).done(function(data) {
                    if (data && data.photos && data.photos.length > 0) {
                        if(!self.basicData) {
                            // ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”»åƒãªã©ã¯åŒæœŸçš„ã«è¿”ã›ã‚‹ã‚ˆã†ã«å…¥ã‚Œã¦ãŠã
                            self.basicData = data;
                        }
                        photos_loaded.resolve(data);
                    } else {
                        // é€šä¿¡ã«æˆåŠŸã—ã¦ã‚‚ãƒªã‚¹ãƒˆãŒç©ºãªã‚‰å¤±æ•—ã¨è¦‹ãªã™
                        photos_loaded.reject();
                    }
                }).fail(function(res) {
                    photos_loaded.reject();
                });
            }).fail(function() {
                photos_loaded.reject();
            });

            return photos_loaded;
        }
    };

    Hatena.Diary.Pages.Admin['user-blog-edit'].Pixiv = function () { this.init.apply(this, arguments) };
    Hatena.Diary.Pages.Admin['user-blog-edit'].Pixiv.prototype = {
        parent: Hatena.Diary.Pages.Admin['user-blog-edit'].MyCuration,
        serviceName: 'Pixiv',
        enableAutoPager: true,
        page: 1,
        init: function (args) {
            var self = this;

            self.$container    = args.container;

            self.parent.prototype.init.call(self, args);
        },
        loadItems: function(is_more) {
            var self = this;

            return $.ajax({
                url: '/api/pixiv/my_works',
                data: {
                    page: self.page++
                }
            }).success(function(res) {
                self.itemsReachedEnd = !(res.entries && res.entries.length > 0);
            }).fail(function(res) {
                self.pleaseReAuthorize();
                self.itemsReachedEnd = true;
            });
        },
        pleaseReAuthorize: function() {
            var self = this;
            self.$container.find('.disabled-box').show();
        },
        insertItems: function(items) {
            var self = this;
            var hatena_syntaxes = [];
            _.each(items, function($item) {
                var permalink = $item.attr('data-permalink');
                hatena_syntaxes.push(self.editorTemplate({
                    item: {
                        id: $item.attr('data-id'),
                        image_url: $item.attr('data-image-url')
                    }
                }));
                hatena_syntaxes.push('[' + permalink + ':title]');
            });

            var lines = {
                hatena: hatena_syntaxes,
                markdown: hatena_syntaxes,
                html: hatena_syntaxes
            };

            Hatena.Diary.extractSyntax(hatena_syntaxes).done(function(data) {
                lines.html = [data.html];
            }).fail(function(error) {
                lines.html = lines.hatena;
                Hatena.Diary.BUG(error);
            }).always(function() {
                Hatena.Diary.EditorConnector.insertLines(lines);
            });
        }
    };
    Hatena.Diary.Util.extend(Hatena.Diary.Pages.Admin['user-blog-edit'].Pixiv.prototype, Hatena.Diary.Pages.Admin['user-blog-edit'].MyCuration.prototype);

    // ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³æ¤œç´¢ã‚µã‚¤ãƒ‰ãƒãƒ¼
    Hatena.Diary.Pages.Admin['user-blog-edit'].Gourmet = function () { this.init.apply(this, arguments) };
    Hatena.Diary.Pages.Admin['user-blog-edit'].Gourmet.prototype = {
        parent: Hatena.Diary.Pages.Admin['user-blog-edit'].MyCuration,
        serviceName: 'Gourmet',
        enableAutoPager: true,
        init: function (args) {
            var self = this;

            self.$container    = args.container;

            var $searchInput  = args.container.find('.gourmet-keyword');
            var $searchPref   = args.container.find('.gourmet-pref');
            var $searchSubmit = args.container.find('.gourmet-keyword-submit');

            // localStorageã«éƒ½é“åºœçœŒæŒ‡å®šãŒä¿å­˜ã•ã‚Œã¦ãŸã‚‰restoreã™ã‚‹
            self.prefLocalStorageKey = 'MyCuration.Gourmet.Pref';
            try {
                if (localStorage[self.prefLocalStorageKey]) {
                    var selector = 'option[value='+localStorage[self.prefLocalStorageKey]+']';
                    $searchPref.find(selector).first().prop('selected', true);
                }
            } catch(ignore) {}

            // éƒ½é“åºœçœŒæŒ‡å®šãŒå¤‰ã‚ã£ãŸã¨ãã«localStorageã«ä¿å­˜ã™ã‚‹
            $searchPref.on('change', function (e) {
                try {
                    localStorage[self.prefLocalStorageKey] = $searchPref.val();
                } catch(ignore) {}
            });

            self.gourmetSearcher = new Hatena.Diary.Pages.Admin['user-blog-edit'].Gourmet.Searcher({
                searchInput : $searchInput,
                searchPref  : $searchPref,
                type : 'gnavi' // ç›´ä¸‹ã§åˆæœŸçŠ¶æ…‹ã«ã‚ã‚ã›ã¦æ›´æ–°ã•ã‚Œã‚‹
            });
            self.updateProvidorStatus();

            $searchSubmit.on('click', function() {
                self.requestReload();
            });
            $searchInput.on('keydown', function (e) {
                if (keyString(e) === 'RET') {
                    self.requestReload();
                    return false;
                }
                return true;
            });

            $searchInput.focus(function() {
                self.$container.find('.gourmet-description').hide();
            });

            self.setupFormatSwitcher(); // è²¼ã‚Šä»˜ã‘å½¢å¼åˆ‡æ›¿
            self.setupProvidorSwitcher(); // ãã‚‹ãƒŠãƒ“/é£Ÿã¹ãƒ­ã‚°åˆ‡ã‚Šæ›¿ãˆ

            self.parent.prototype.init.call(self, args);
        },
        loadItems: function(is_more) {
            var self = this;

            var dfd = $.Deferred();

            if (is_more) {
                self.gourmetSearcher.forward();
            }
            else {
                self.gourmetSearcher.reset();
                self.itemsReachedEnd = false;
            }

            self.gourmetSearcher.load().done(function(data) {
                dfd.resolve(data);
            }).fail(function() {
                dfd.reject();
            }).always(function() {
                self.itemsReachedEnd = ! self.gourmetSearcher.has_next;
            });

            return dfd;
        },
        insertItems: function(items) {
            var self = this;

            var lines = [];
            var suffix = self.$container.find('[name="gourmet-format"]:checked').val();
            _.each(items, function($item) {
                var syntax = $item.attr('data-syntax');
                syntax = syntax.replace(/\]$/, ":" + suffix + "]");
                // tabelogæ¤œç´¢ã§gnaviã®åº—èˆ—æƒ…å ±ãŒè¿”ã£ã¦ãã‚‹ã“ã¨ãŒã‚ã‚‹ã®ã§ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ™‚ã®providorã§æ›¸ãæ›ãˆã‚‹
                var providor = self.$container.find('[name="gourmet-providor"]:checked').val();
                syntax = syntax.replace(/^\[.+?:/,"[" + providor + ":");
                lines.push(syntax);
            });

            Hatena.Diary.EditorConnector.insertLines({
                hatena: lines,
                markdown: lines,
                html: lines
            });
        },
        setupFormatSwitcher: function() {
            var self = this;
            var $formatsContainer = self.$container.find('.gourmet-formats');
            $formatsContainer.on('change', function(e) {
                var $input = $(e.target);
                $formatsContainer.find('label.selected').removeClass('selected');
                $input.closest('label').addClass('selected');
            });
        },
        setupProvidorSwitcher: function() {
            var self = this;
            var $providorsContainer = self.$container.find('.gourmet-providors');
            $providorsContainer.on('change', function(e) {
                var $input = $(e.target);
                $providorsContainer.find('label.selected').removeClass('selected');
                $input.closest('label').addClass('selected');

                // providorãŒå¤‰ã‚ã£ãŸã‚‰reloadã™ã‚‹
                self.updateProvidorStatus();
            });
        },
        updateProvidorStatus: function() {
            var self = this;
            var providor = self.$container.find('[name="gourmet-providor"]:checked').val();

            if ( providor !== self.gourmetSearcher.type ) {
                self.gourmetSearcher.type = providor;
                self.requestReload();
            }
        },
        loadItemsFinishedHandler: function() {
            var self = this;
            // åˆå›ãƒ­ãƒ¼ãƒ‰ã§ã‚‚èª­ã¿è¾¼ã¾ã‚Œã‚‹ã®ã§ã€æ¤œç´¢èªãŒå…¥ã£ã¦ã‚‹ã‹ã©ã†ã‹è¦‹ã‚‹
            if (self.gourmetSearcher.$searchInput.val() && self.getItemsOnPage().length === 0) {
                self.$container.find('.no-result').show();
            }
        },
        requestReload: function() {
            var self = this;
            self.$container.find('.no-result').hide();
            self.parent.prototype.requestReload.call(self);
        }
    };
    Hatena.Diary.Util.extend(Hatena.Diary.Pages.Admin['user-blog-edit'].Gourmet.prototype, Hatena.Diary.Pages.Admin['user-blog-edit'].MyCuration.prototype);

    // Gourmetã®æ¤œç´¢ã‚’ç®¡ç†ã™ã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
    // load() â†’ forward() â†’ load() ã¿ãŸã„ã«é †ç•ªã«èª­ã‚€ã¨ãƒšãƒ¼ã‚¸ãƒ³ã‚°ã§ãã‚‹
    // resetã™ã‚‹ã¨ã€ãƒšãƒ¼ã‚¸ãƒ³ã‚°ã‚„æ¤œç´¢wordãŒè¨­å®šã—ç›´ã•ã‚Œã‚‹
    Hatena.Diary.Pages.Admin['user-blog-edit'].Gourmet.Searcher = function () { this.init.apply(this, arguments); };
    Hatena.Diary.Pages.Admin['user-blog-edit'].Gourmet.Searcher.prototype = {
        init: function (args) {
            var self = this;
            self.$searchInput = args.searchInput;
            self.$searchPref = args.searchPref;
            self.type = args.type || 'gnavi';
            self.reset();
        },

        load: function() {
            var self = this;
            var dfd = $.Deferred();

            var searchKeyword = self.searchKeyword;

            if (!searchKeyword) {
                dfd.reject();
                return dfd;
            }

            // ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³æ¤œç´¢APIã‹ã‚‰æƒ…å ±ã‚’å–ã£ã¦ãã‚‹
            $.ajax({
                url : "/api/gourmet/search",
                type : "GET",
                data : {
                    word : searchKeyword,
                    pref : self.searchPref,
                    page : self.page,
                    type : self.type
                },
                dataType: "json"
            }).done(function(data) {
                if (data.entries.length === 0) {
                    // ãƒ‡ãƒ¼ã‚¿ãŒç„¡ããªã£ãŸã‚‰æ¬¡ãƒšãƒ¼ã‚¸ãªã—
                    self.has_next = false;
                }
                dfd.resolve(data);
            }).fail(function() {
                // ãƒ‡ãƒ¼ã‚¿ãŒå–å¾—ã§ããªã‹ã£ãŸã‚‰æ¬¡ãƒšãƒ¼ã‚¸ãªã—
                self.has_next = false;
                dfd.reject();
            });

            return dfd;
        },
        forward: function() {
            var self = this;
            self.page++;
        },
        reset: function() {
            var self = this;
            self.page = 1;
            self.has_next = true; // æ¬¡ãŒãªããªã£ãŸã‚‰falseã«
            self.resetSearchParameters();
        },
        resetSearchParameters: function() {
            var self = this;
            self.searchKeyword = self.$searchInput.val();
            self.searchPref    = self.$searchPref.val();
        }
    };

    Hatena.Diary.Pages.Admin['user-blog-edit'].Nicovideo = function () { this.init.apply(this, arguments); };

    Hatena.Diary.Pages.Admin['user-blog-edit'].Nicovideo.prototype = {
        init: function (args) {
            var self = this;

            self.$container = args.container;
            self.$itemsContainer = self.$container.find('.items');
            self.$input = self.$container.find('.nicovideo-keyword');
            self.$inputReset = self.$container.find('.input-text-reset');
            self.$pasteButton = self.$container.find('.paste-button');
            self.$formatPlayer = self.$container.find('.nicovideo-formats label.player');
            self.$formatThumbnail = self.$container.find('.nicovideo-formats label.thumbnail');

            self.setupFormatSwitcher('.nicovideo-formats');

            self.bindEvents();
        },

        bindEvents: function () {
            var self = this;

            self.$input.keyup(_.debounce(function () {
                if(self.$input.val().length === 0) return;

                self.updateThumb();
            }, 500));

            self.$input.keydown(function (e) {
                if (keyString(e) === 'RET') {
                    if (self.findItem().length > 0) {
                        self.insertItem();
                        Hatena.Diary.trackEvent(self.$pasteButton.attr('data-track-name'));
                    }
                    return false;
                }
            });

            self.$pasteButton.click(function () {
                self.insertItem();
            });

            self.setupInputReset();
        },

        setupInputReset : function () {
            var self = this;

            self.$inputReset.click(function () {
                self.$input.val('');
                self.$input.focus();
                self.$inputReset.hide();

                return false;
            });

            self.$input.keyup(function (e) {
                if (self.$input.val().length > 0) {
                    self.$inputReset.show();
                } else {
                    self.$inputReset.hide();
                }
            });
        },

        findItem: function () {
            return this.$container.find('.items > .item');
        },

        itemChanged: function () {
            var self = this;

            var $item = self.findItem();

            if ($item.length === 0) {
                self.setPasteButtonStatus(false);
                return;
            }

            self.setPasteButtonStatus(true);

            var $format_player = self.$formatPlayer;
            var $format_thumbnail = self.$formatThumbnail;

            // videoã®ã¨ã, è²¼ã‚Šä»˜ã‘å½¢å¼ã¯'å‹•ç”»' 'ã‚µãƒ ãƒã‚¤ãƒ«' 'ãƒªãƒ³ã‚¯'
            // ãã‚Œä»¥å¤–ã®ã¨ã, è²¼ã‚Šä»˜ã‘å½¢å¼ã¯'ã‚µãƒ ãƒã‚¤ãƒ«' 'ãƒªãƒ³ã‚¯'
            if ($item.data('type') === 'video') {
                // å·¦ç«¯ã¯'å‹•ç”»'ãªã®ã§ãã‚Œã«ã‚¹ã‚¿ã‚¤ãƒ«ã‚’å½“ã¦ã‚‹
                $format_player.addClass('format-left');
                $format_thumbnail.removeClass('format-left');

                $format_player.show();
            } else {
                // å·¦ç«¯ã¯'ã‚µãƒ ãƒã‚¤ãƒ«'ãªã®ã§ãã‚Œã«ã‚¹ã‚¿ã‚¤ãƒ«ã‚’å½“ã¦ã‚‹
                $format_player.removeClass('format-left');
                $format_thumbnail.addClass('format-left');

                if($format_player.is('.selected')) {
                    $format_player.removeClass('selected');
                    $format_player.find('input').prop('checked', false);

                    $format_thumbnail.addClass('selected');
                    $format_thumbnail.find('input').prop('checked', true);
                }

                $format_player.hide();
            }
        },

        setPasteButtonStatus : function (status) {
            var self = this;

            if (status) {
                self.$pasteButton.removeClass('disabled').addClass('enabled').prop('disabled', false);
            } else {
                self.$pasteButton.addClass('disabled').removeClass('enabled').prop('disabled', true);
            }
        },

        updateThumb: function () {
            var self = this;

            var input = self.$input.val();

            var canonical_input = self.removeParamsFromURL(input);

            var info = self.detectInfo(canonical_input);

            if (!info) {
                return;
            }

            var source = self.renderPreviewTemplate(info.type, {
                id: info.id
            });

            var $item = $($.trim(source));
            $item.data('type', info.type);
            $item.data('id', info.id);

            self.$itemsContainer.html($item);

            self.itemChanged();
        },

        removeParamsFromURL: function (url) {
            return url.replace(/\?.*$/, '');
        },

        // return: { id: 'sm2168098', type: 'video' }
        // èª­ã¿å–ã‚Œãªã„å ´åˆã¯falseã‚’è¿”ã™
        detectInfo: function (input) {
            var self = this;

            if (self.isNicovideoID(input)) {
                return self.detectInfoFromID(input);
            } else {
                return self.detectInfoFromURL(input);
            }
        },

        detectInfoFromID: function (id) {
            var self = this;

            return {
                id: id,
                type: self.detectIDType(id)
            };
        },

        detectInfoFromURL: function (input) {
            // ã‚³ãƒ”ãƒšãƒŸã‚¹ç­‰ã‚’è€ƒæ…®ã—ã¦ã‚ã‚‹ç¨‹åº¦URLã£ã½ã‹ã£ãŸã‚‰è‰¯ã„ã“ã¨ã«ã™ã‚‹
            // æ­£ã—ã„URLã¯ã“ã‚“ãªã®: http://www.nicovideo.jp/watch/sm2168098
            var regexps = {
                video: new RegExp("nicovideo.jp/watch/(\\w{0,2}\\d+)$"),
                community: new RegExp("com.nicovideo.jp/community/(co\\d+)$"),
                mylist: new RegExp("nicovideo.jp/mylist/(\\d+)$")
            };

            var info = false;
            _.find(regexps, function (regexp, type) {
                var result = regexp.exec(input);
                if (result) {
                    info = { id: result[1], type: type };
                    return true;
                } else {
                    return false;
                }
            });

            return info;
        },

        isNicovideoID: function (str) {
            // sm2168098, nm20097844ãªã©
            // å…¬å¼ãƒãƒ£ãƒ³ãƒãƒ«ã®å‹•ç”»ã ã¨æ•°å­—ã®ã¿ã®å ´åˆã‚‚ã‚ã‚‹(ex: http://www.nicovideo.jp/watch/1365403220)
            return (/^(\w{2})?\d+$/).test(str);
        },

        // ãƒã‚¤ãƒªã‚¹ãƒˆã¯prefixãŒãªãã¦åˆ¤åˆ¥ä¸å¯èƒ½ãªã®ã§è«¦ã‚ã‚‹
        detectIDType: function (id) {
            var prefix = id.slice(0, 2);
            if (prefix === 'co') {
                return 'community';
            } else {
                return 'video';
            }
        },

        renderPreviewTemplate: function (type, data) {
            return _.template(this.$container.find('.template-nicovideo-preview-' + type).html(), data);
        },

        renderTemplate: function (type, format, data) {
            var self = this;

            var $template = self.$container.find('.template-nicovideo-' + type + '-' + format);

            var source = _.template($.trim($template.html()), data);

            return source;
        },

        insertItem: function () {
            var self = this;

            var lines = [];

            var format = self.$container.find('[name="nicovideo-format"]:checked').val();

            var $item  = self.findItem();
            var source = self.renderTemplate($item.data('type'), format, { id: $item.data('id') });

            lines.push(source);

            var lines_data = {
                html: lines,
                hatena: lines,
                markdown: lines
            };

            var editor = Hatena.Diary.Editor.Support.currentEditor;
            // è¦‹ãŸã¾ã¾ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ã§ã‹ã¤è²¼ã‚Šä»˜ã‘å½¢å¼ãŒãƒªãƒ³ã‚¯ã®ã¨ã, è¨˜æ³•å±•é–‹ã™ã‚‹
            if (editor.mode === 'html' && format === 'link') {
                Hatena.Diary.extractSyntax(lines).done(function(data) {
                    lines_data.html = [data.html];
                    Hatena.Diary.EditorConnector.insertLines(lines_data);
                }).fail(function (error) {
                    Hatena.Diary.BUG(error);
                    Hatena.Diary.EditorConnector.insertLines(lines_data);
                });
            } else {
                Hatena.Diary.EditorConnector.insertLines(lines_data);
            }
        },

        setupFormatSwitcher: function (format_container_selector) {
            var self = this;
            var $format_container = self.$container.find(format_container_selector);

            $format_container.on('change', function (e) {
                var $input = $(e.target);

                $format_container.find('label.selected').removeClass('selected');
                $input.closest('label').addClass('selected');
            });
        }
    };

    // Gistã‚µã‚¤ãƒ‰ãƒãƒ¼
    Hatena.Diary.Pages.Admin['user-blog-edit'].Gist = function () { this.init.apply(this, arguments); };
    Hatena.Diary.Pages.Admin['user-blog-edit'].Gist.prototype = {
        parent: Hatena.Diary.Pages.Admin['user-blog-edit'].MyCuration,
        serviceName: 'Gist',
        enableAutoPager: true,
        pasteReverseOrder: true,
        init: function (args) {
            var self = this;

            self.parent.prototype.init.call(self, args);

            self.userManager = new Hatena.Diary.Pages.Admin['user-blog-edit'].Gist.UserManager({
                container: self.$container
            });

            $(self.userManager).on('registered', function() {
                self.resetUser();
                self.requestLoadItems();
            });

            $(self.userManager).on('unregistered', function() {
                self.resetUser();
            });
        },
        loadItems: function(more) {
            var self = this;

            var dfd = $.Deferred();

            if (!(self.userManager && self.userManager.getUser())) {
                dfd.reject();
                return dfd;
            }

            var user = self.userManager.getUser();

            if (more) {
                user.forward();
            }

            user.load().done(function(gists) {
                dfd.resolve({
                    entries: gists
                });
            }).fail(function(msg) {
                dfd.reject(msg);
                self.itemsReachedEnd = true;
            });

            return dfd;
        },
        showItems: function(items) {
            var self = this;
            var source = '';

            _.each(items, function (item) {

                var description_short;
                if (item.description) {
                    description_short = (item.description.length > 50) ?
                        item.description.substr(0, 50) + " ..." : item.description;
                }
                else {
                    description_short = '';
                }

                var language = _.values(item.files)[0].language;

                source += self.template({
                    item: item,
                    description: ((description_short) ? description_short : "gist" + item.id),
                    language: (language) ? language : "Unknown"
                });
            });
            self.$indicator.before(source);
            Hatena.Locale.updateTimestamps(self.$container[0]);
            $(self).triggerHandler('items-appended');
        },
        insertItems: function(items) {
            var self = this;
            var lines = [];
            var mode = Hatena.Diary.Editor.Support.currentEditor.mode;

            _.each(items, function($item) {
                var description = $item.data('description');
                // embedè¨˜æ³•å†…ã«Markdownã®è¨˜å·ãŒã‚ã‚‹ã¨, embedã¨ã—ã¦å±•é–‹ã•ã‚Œãªã„ã®ã§ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ã™ã‚‹
                // [http://gist/:embed#foo `bar`] -> [http://gist/:embed#foo \`bar\`]
                if (mode === 'markdown') {
                    description = self.escape_markdown_chars(description);
                }

                var escaped_description = self.escape_text_for_description(description);
                var html_url = $item.data('html-url');

                lines.push('[' + html_url + ':embed#' + escaped_description + ']');

                if (mode === 'html') {
                    lines.push('<a href="' + html_url + '">' + escaped_description + '</a>');
                }
                else if (mode == 'hatena') {
                    lines.push('[' + html_url + ':title=' + escaped_description + ']');
                }
                else {
                    lines.push('[' + escaped_description + '](' + html_url + ')');
                }
            });

            Hatena.Diary.Editor.Support.currentEditor.insertLines(lines);
        },
        escape_text_for_description: function(text){
            text = text.replace(/[\n\[\]]/g, "");
            return _.escape(text);
        },
        escape_markdown_chars: function(text) {
            return text.replace(/[\\_\*`]/g, "\\$&");
        },
        resetUser: function() {
            var self = this;

            self.itemsReachedEnd = false;
            self.removeItems();

            if (self.userManager && self.userManager.getUser()) {
                self.userManager.getUser().rewind();
            }
        }
    };

    Hatena.Diary.Util.extend(Hatena.Diary.Pages.Admin['user-blog-edit'].Gist.prototype, Hatena.Diary.Pages.Admin['user-blog-edit'].MyCuration.prototype);

    // ãƒ¦ãƒ¼ã‚¶ãƒ¼é€£æºæ©Ÿèƒ½ï¼ŒUserLoaderã‹ã‚‰Userã‚’å—ã‘å–ã£ã¦ä¿æŒã™ã‚‹ï¼Œé€£æºUIã®ç®¡ç†
    Hatena.Diary.Pages.Admin['user-blog-edit'].Gist.UserManager = function () { this.init.apply(this, arguments); };
    Hatena.Diary.Pages.Admin['user-blog-edit'].Gist.UserManager.prototype = {
        init: function (args) {
            var self = this;

            self.$container = args.container;

            self.$input = self.$container.find('.gist-user-name');
            self.$registerButton = self.$container.find('.register-button');
            self.$unregisterButton = self.$container.find('.unregister-button');

            self.$userImage = self.$container.find('.user-image');
            self.$name = self.$container.find('.user-name');
            self.$nameLink = self.$container.find('.user-name-link');
            self.$userNotFound = self.$container.find('.user-not-found-error');
            self.$apiLimit = self.$container.find('.api-limit-error');
            self.$ajaxError = self.$container.find('.ajax-error');

            self.userLoader = new Hatena.Diary.Pages.Admin['user-blog-edit'].Gist.UserLoader();

            self.bindEvents();

            self.tryRegisterFromInput();
        },
        bindEvents: function() {
            var self = this;

            self.$registerButton.on('click', function() {
                self.tryRegisterFromInput();
                return false;
            });

            self.$input.on('keydown', function(event) {
                if(keyString(event) === 'RET') {
                    self.tryRegisterFromInput();
                    return false;
                }
            });

            self.$unregisterButton.on('click', function() {
                self.unregister();
                return false;
            });
        },
        // inputã«å…¥åŠ›ã•ã‚ŒãŸå€¤ã‹ã‚‰èªè¨¼ã‚’è©¦ã¿ã‚‹
        tryRegisterFromInput: function() {
            var self = this;

            var user_name = self.$input.val();
            if (!user_name) return;
            self.tryRegister(user_name);
        },
        // validãªãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨é€£æºã—ã¦ã„ã‚‹ã¨ãUserã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’è¿”ã™
        getUser: function() {
            var self = this;

            return self.currentUser;
        },
        // æŒ‡å®šã•ã‚ŒãŸåå‰ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ã®é€£æºã‚’è©¦ã¿ã‚‹
        tryRegister: function(user_name) {
            var self = this;

            // loadUserå¾Œãªã®ã§user.existsãŒä½¿ãˆã‚‹
            self.userLoader.loadUser(user_name).done(function(user) {
                self.onUserFound(user);
            }).fail(function(msg) {
                self.unregister();
                if (msg === 'api') {
                    self.$apiLimit.show();
                }
                else if (msg === 'ajax') {
                    self.$ajaxError.show();
                }
                else {
                    self.$userNotFound.show();
                }
            });
        },
        // registerã™ã‚‹ã¨ãã®ã„ã‚ã„ã‚ï¼ŒçŠ¶æ…‹æ›¸ãæ›ãˆï¼Œviewæ›´æ–°
        onUserFound: function(user) {
            var self = this;

            self.currentUser = user;
            self.setUserImage(user.getImage());
            self.$name.text(user.getName());
            self.$nameLink.attr('href', 'http://gist.github.com/' + user.getName());
            self.$userNotFound.hide();
            self.$apiLimit.hide();
            self.$ajaxError.hide();
            self.$container.addClass('registered');
            Hatena.Diary.Pages.Admin['*'].saveBlogConfig('gist_user_name', user.getName());
            $(self).trigger('registered');
            $(window).resize();     // headerã®é«˜ã•å¤‰ã‚ã‚‹ãŸã‚
        },
        // é€£æºè§£é™¤ã™ã‚‹
        // viewæ›´æ–°
        unregister: function() {
            var self = this;

            $(self).trigger('unregistered');

            self.currentUser = null;
            self.$input.focus();

            self.setUserImage(self.DEFAULT_UESR_IMAGE);
            self.$userNotFound.hide();
            self.$apiLimit.hide();
            self.$ajaxError.hide();
            Hatena.Diary.Pages.Admin['*'].saveBlogConfig('gist_user_name', '');
            self.$container.removeClass('registered');
            $(window).resize();     // headerã®é«˜ã•å¤‰ã‚ã‚‹ãŸã‚
        },
        setUserImage: function(url) {
            var self = this;

            self.$userImage.attr('src', url);
        }
    };

    // Userã‚¯ãƒ©ã‚¹ã®ç”Ÿæˆï¼Œã‚­ãƒ£ãƒƒã‚·ãƒ¥
    Hatena.Diary.Pages.Admin['user-blog-edit'].Gist.UserLoader = function () { this.init.apply(this, arguments); };
    Hatena.Diary.Pages.Admin['user-blog-edit'].Gist.UserLoader.prototype = {
        init: function (args) {
            var self = this;

            self.users = {};
        },
        loadUser: function(name) {
            var self = this;

            var dfd = $.Deferred();

            if (!self.users[name]) {
                self.users[name] = new Hatena.Diary.Pages.Admin['user-blog-edit'].Gist.User(name);
            }

            self.users[name].load().done(function() {
                    dfd.resolve(self.users[name]);
            }).fail(function(msg) {
                dfd.reject(msg);
            });

            return dfd;
        }
    };

    // gistã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€äººã«å¯¾å¿œã™ã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
    Hatena.Diary.Pages.Admin['user-blog-edit'].Gist.User = function () { this.init.apply(this, arguments); };
    Hatena.Diary.Pages.Admin['user-blog-edit'].Gist.User.prototype = {
        init: function (name) {
            this.name = name;
            this.page = 1;
            this._exists = false;
        },
        getName: function() {
            return this.name;
        },
        getImage: function() {
            return this.info.avatar_url;
        },
        load: function() {

            var self = this;
            var dfd = $.Deferred();

            var data = {
                page: self.page,
                per_page: 20
            };

            $.ajax({
                url: 'https://api.github.com/users/' + self.name + '/gists',
                data: data,
                type: 'GET',
                dataType: 'jsonp',
                jsonp: 'callback'
            }).done(function(res) {
                // APIåˆ¶é™ã«é”ã—ãŸã¨ã
                if (res && res.data.message && res.data.message !== 'Not Found') {
                    dfd.reject('api');
                } else  if (res && res.data.length > 0) {
                    // ãƒ¦ãƒ¼ã‚¶æƒ…å ±(ã‚¢ã‚¤ã‚³ãƒ³ãªã©)ã¯åŒæœŸçš„ã«è¿”ã›ã‚‹ã‚ˆã†ã«å…¥ã‚Œã¦ãŠã
                    self.info = res.data[0].owner;
                    self._exists = true;
                    dfd.resolve(res.data);
                } else {
                    // é€šä¿¡ã«æˆåŠŸã—ã¦ã‚‚ãƒªã‚¹ãƒˆãŒç©ºãªã‚‰å¤±æ•—ã¨è¦‹ãªã™
                    // (Gist.loadItems()ã®åˆ†å²ã®ãŸã‚)
                    dfd.reject('not found');
                }
            }).fail(function(res) {
                dfd.reject('ajax');
            });

            return dfd;
        },
        forward: function() {
            this.page++;
        },
        rewind: function() {
            this.page = 1;
        },
        exists: function() {
            return this._exists;
        }
    };
    // Gist end.

    // flickræ¤œç´¢ã‚µã‚¤ãƒ‰ãƒãƒ¼
    Hatena.Diary.Pages.Admin['user-blog-edit'].Flickr = function () { this.init.apply(this, arguments) };
    Hatena.Diary.Pages.Admin['user-blog-edit'].Flickr.prototype = {
        parent: Hatena.Diary.Pages.Admin['user-blog-edit'].MyCuration,
        serviceName: 'Flickr',
        enableAutoPager: true,
        init: function (args) {
            var self = this;

            self.$container    = args.container;

            self.$searchInput  = args.container.find('.flickr-keyword');
            var $searchSubmit = args.container.find('.flickr-keyword-submit');

            self.flickrSearcher = new Hatena.Diary.Pages.Admin['user-blog-edit'].Flickr.Searcher({
                searchInput : self.$searchInput
            });

            $searchSubmit.on('click', function() {
                if (self.$searchInput.val() !== '') {
                    self.requestReload();
                }
            });
            self.$searchInput.on('keydown', function (e) {
                if (keyString(e) === 'RET') {
                    if (self.$searchInput.val() !== '') {
                        self.requestReload();
                    }
                    return false;
                }
                return true;
            });

            self.$searchInput.focus(function() {
                self.$container.find('.flickr-description').hide();
            });

            self.parent.prototype.init.call(self, args);
        },
        loadItems: function(is_more) {
            var self = this;

            var dfd = $.Deferred();

            if (is_more) {
                self.flickrSearcher.forward();
            }
            else {
                self.flickrSearcher.reset();
                self.itemsReachedEnd = false;
            }

            self.flickrSearcher.load().done(function(data) {
                dfd.resolve(data);
            }).fail(function() {
                dfd.reject();
            }).always(function() {
                self.itemsReachedEnd = ! self.flickrSearcher.has_next;
            });

            return dfd;
        },
        getUserById: function(id) {
            var self = this;
            var dfd = $.Deferred();

            // ãƒ¦ãƒ¼ã‚¶æƒ…å ±å–å¾—
            $.ajax({
                url : "/api/flickr/user",
                type : "GET",
                data : {
                    user_id : id,
                    page : self.page
                },
                dataType: "json"
            }).done(function(json) {
                var data = json.data;
                dfd.resolve(data);
            }).fail(function() {
                dfd.reject();
            });

            return dfd;
        },
        insertItems: function(items) {
            var self = this;

            var lines = {
                hatena:   [],
                markdown: []
            };

            var deferreds = [];

            // å„itemã®æ’®å½±è€…ã‚’ajaxã§å–å¾—ã—ã€dfdã‚’deferredsã«ç™»éŒ²
            // å…¨éƒ¨å–å¾—ã§ããŸã‚‰æœ¬æ–‡ã«æŒ¿å…¥
            _.each(items, function($item) {

                var item = {
                    permalink: $item.attr('data-permalink'),
                    title: $item.attr('data-title'),
                    src: $item.attr('data-src'),
                    user_id: $item.attr('data-user-id')
                };

                var dfd = $.Deferred();

                self.getUserById(item.user_id).done(function (user) {
                    item.username = user.username._content;

                    lines.hatena.push('[' + item.permalink + ':image=' + item.src + ']');
                    lines.markdown.push('[![](' + item.src + ')](' + item.permalink + ')');

                    lines.hatena.push('[' + item.permalink + ':title=photo by ' + item.username + ']');
                    lines.markdown.push('[photo by ' + item.username + '](' + item.permalink + ')');
                    dfd.resolve();
                });

                deferreds.push(dfd);
            });

            $.when.apply($, deferreds).done(function () {
                Hatena.Diary.extractSyntax(lines.hatena).done(function(data) {
                    lines.html = [data.html];
                }).fail(function(error) {
                    lines.html = lines.hatena;
                    Hatena.Diary.BUG(error);
                }).always(function() {
                    Hatena.Diary.EditorConnector.insertLines(lines);
                });
            });

        },
        _requestLoadItems: function (is_more) {
            var self = this;

            if (self.$searchInput.val() === '') return;

            self.isLoading = true;
            self.$indicator.show();
            self.$errorMessage.hide();

            self.loadItems(is_more).done(function(feed) {
                if (feed.length === 0 && self.$itemsContainer.find('.item').length === 0) {
                     self.$errorMessage.show();
                }
                else {
                    self.showItems(feed);
                }
            }).fail(function(res) {
                self.$errorMessage.show();
            }).always(function() {
                self.$indicator.hide();
                self.isLoading = false;
            });
        },
        showItems: function(items) {
            var self = this;

            var source = '';
            _.each(items, function (entry) {
                source += self.template({
                    item: entry
                });
            });
            self.$indicator.before(source);
            Hatena.Locale.updateTimestamps(self.$container[0]);
            $(self).triggerHandler('items-appended');
        },
        setupFormatSwitcher: function() {
            var self = this;
            var $formatsContainer = self.$container.find('.flickr-formats');
            $formatsContainer.on('change', function(e) {
                var $input = $(e.target);
                $formatsContainer.find('label.selected').removeClass('selected');
                $input.closest('label').addClass('selected');
            });
        }
    };
    Hatena.Diary.Util.extend(Hatena.Diary.Pages.Admin['user-blog-edit'].Flickr.prototype, Hatena.Diary.Pages.Admin['user-blog-edit'].MyCuration.prototype);


    // Flickrã®æ¤œç´¢ã‚’ç®¡ç†ã™ã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
    // load() â†’ forward() â†’ load() ã¿ãŸã„ã«é †ç•ªã«èª­ã‚€ã¨ãƒšãƒ¼ã‚¸ãƒ³ã‚°ã§ãã‚‹
    // resetã™ã‚‹ã¨ã€ãƒšãƒ¼ã‚¸ãƒ³ã‚°ã‚„æ¤œç´¢wordãŒè¨­å®šã—ç›´ã•ã‚Œã‚‹
    Hatena.Diary.Pages.Admin['user-blog-edit'].Flickr.Searcher = function () { this.init.apply(this, arguments); };
    Hatena.Diary.Pages.Admin['user-blog-edit'].Flickr.Searcher.prototype = {
        init: function (args) {
            var self = this;
            self.$searchInput = args.searchInput;
            self.reset();
        },

        load: function() {
            var self = this;
            var dfd = $.Deferred();

            var searchKeyword = self.searchKeyword;

            if (!searchKeyword) {
                dfd.reject();
                return dfd;
            }

            // ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã§ç”»åƒæ¤œç´¢
            $.ajax({
                url : "/api/flickr/search",
                type : "GET",
                data : {
                    word : searchKeyword,
                    page : self.page
                },
                dataType: "json"
            }).done(function(json) {
                var data = json.data;
                if (data.length === 0) {
                    // ãƒ‡ãƒ¼ã‚¿ãŒç„¡ããªã£ãŸã‚‰æ¬¡ãƒšãƒ¼ã‚¸ãªã—
                    self.has_next = false;
                }
                dfd.resolve(data);
            }).fail(function() {
                // ãƒ‡ãƒ¼ã‚¿ãŒå–å¾—ã§ããªã‹ã£ãŸã‚‰æ¬¡ãƒšãƒ¼ã‚¸ãªã—
                self.has_next = false;
                dfd.reject();
            });

            return dfd;
        },
        forward: function() {
            var self = this;
            self.page++;
        },
        reset: function() {
            var self = this;
            self.page = 1;
            self.has_next = true; // æ¬¡ãŒãªããªã£ãŸã‚‰falseã«
            self.resetSearchKeyword();
        },
        resetSearchKeyword: function() {
            var self = this;
            self.searchKeyword = self.$searchInput.val();
        }
    };

    Hatena.Diary.Pages.Admin['user-blog-edit'].Itunes = function () { this.init.apply(this, arguments) };
    Hatena.Diary.Pages.Admin['user-blog-edit'].Itunes.prototype = {
        parent: Hatena.Diary.Pages.Admin['user-blog-edit'].MyCuration,
        init: function (args) {
            var self = this;

            self.parent.prototype.init.call(self, args);

            self._templatesByType = {
                'default':    _.template(self.$container.find('.template').html()),
                'artist':     _.template(self.$container.find('.template-artist').html()),
                'collection': _.template(self.$container.find('.template-collection').html()),
                'audiobook':  _.template(self.$container.find('.template-collection').html())
            };
        },
        bindEvents: function () {
            var self = this;

            self.parent.prototype.bindEvents.call(self);

            self.$submit = self.$container.find('.itunes-keyword-submit');
            self.$media = self.$container.find('.itunes-media');
            self.$keyword = self.$container.find('.itunes-keyword');
            self.$welcomeMessage = self.$container.find('.items-welcome');

            self.$submit.click(function (event) {
                self.requestReload();
                return false;
            });

            self.$media.change(function (event) {
                self.requestReload();
                return false;
            });

            self.$keyword.keydown(function (event) {
                if (keyString(event) == 'RET') {
                    self.requestReload();
                    return false;
                }
            });
        },
        serviceName: 'Itunes',
        enableAutoPager: false,
        pasteReverseOrder: false,
        willRequestLoadItems: function (more) {
            var self = this;
            return self.$keyword.val() !== '';
        },
        loadItems: function(more) {
            var self = this;

            self.$welcomeMessage.addClass('disable');

            var term = self.$keyword.val();
            var queries = self.$media.val().split(':');
            var media = queries[0];
            var entity = queries[1];

            var data = {
                term: term,
                media: media,
                entity: entity
            };

            return $.ajax({
                url: '/api/itunes/search',
                data: data,
                type: 'GET',
                dataType: 'json'
            });
        },
        renderItem: function(item) {
            var self = this;

            var type = item.wrapperType || 'default';
            var template = self._templateByType(type);

            // ä¾¡æ ¼ã®è¡¨ç¤ºã‚’ã„ã„æ„Ÿã˜ã«ã™ã‚‹
            item._formattedPrice = '';
            if (item.formattedPrice !== undefined) {
                item._formattedPrice = item.formattedPrice;
            }
            else if (item.trackPrice !== undefined || item.collectionPrice !== undefined) {
                var amount = item.trackPrice || item.collectionPrice;
                var currency = item.currency;
                if (amount < 0) {
                    // è²©å£²ã•ã‚Œã¦ã„ãªã„ã‚¢ã‚¤ãƒ†ãƒ ã®ã¨ãä¾¡æ ¼ãŒ -1 ã«ãªã£ã¦ã„ã‚‹ã®ã§ç„¡è¦–
                }
                else if (currency === 'JPY') {
                    item._formattedPrice = 'Â¥' + amount;
                }
                else {
                    item._formattedPrice = currency + ' ' + amount;
                }
            }

            // ã‚¸ãƒ£ãƒ³ãƒ«ã‚’ã„ã‚ã„ã‚è€ƒæ…®ã—ã¦å‡ºã™
            item._genre = '';
            if (item.genres !== undefined && _.isArray(item.genres) && item.genres.length > 0) {
                item._genre = item.genres[0];
            }
            else if (item.primaryGenreName !== undefined) {
                item._genre = item.primaryGenreName;
            }

            return template({
                item: item
            });
        },
        _templateByType: function(type) {
            var self = this;
            return self._templatesByType[type] || self._templatesByType['default'];
        },
        insertItems: function(items) {
            var self = this;

            var lines = {
                hatena:   [],
                markdown: []
            };
            _.each(items, function($item) {
                var item = {
                    permalink: $item.attr('data-permalink')
                };

                lines.hatena.push('[' + item.permalink + ':embed]');
                lines.markdown.push('[' + item.permalink + ':embed]');
            });

            Hatena.Diary.extractSyntax(lines.hatena).done(function(data) {
                lines.html = ['', data.html, ''];
            }).fail(function(error) {
                lines.html = lines.hatena;
                Hatena.Diary.BUG(error);
            }).always(function() {
                if (Hatena.Diary.EditorConnector.isiOS() || Hatena.Diary.EditorConnector.isAndroid()) {
                    // ã‚¹ãƒãƒ•ã‚©ã‚¢ãƒ—ãƒªã®ã¨ãã†ã¾ãè¡¨ç¤ºã§ããªã„ã®ã§è¨˜æ³•ãã®ã¾ã¾ã«ã—ã¦ãŠã
                    lines.html = lines.hatena;
                }
                Hatena.Diary.EditorConnector.insertLines(lines);
            });
        }
    };

    Hatena.Diary.Util.extend(Hatena.Diary.Pages.Admin['user-blog-edit'].Itunes.prototype, Hatena.Diary.Pages.Admin['user-blog-edit'].MyCuration.prototype);

    // PRè¨˜äº‹è¡¨ç¤ºãƒœã‚¿ãƒ³ï¼Œè¨˜äº‹ã®ãƒªã‚¹ãƒˆã‚’ç®¡ç†
    Hatena.Diary.Pages.Admin['user-blog-edit'].Promotion = function () { this.init.apply(this, arguments); };
    Hatena.Diary.Pages.Admin['user-blog-edit'].Promotion.prototype = {
        init: function (args) {
            var self = this;

            self.$element = args.$element;
            self.$buttons  = args.$buttons;
            self.$cancelButtons = args.$cancelButtons;

            self.entries = _.map(self.$element.find('.promotion-entry'), function(entry) {
                return new Hatena.Diary.Pages.Admin['user-blog-edit'].Promotion.Entry({
                    manager: self,
                    $element: $(entry)
                });
            });

            // è¡¨ç¤ºã™ã‚‹ã‚¨ãƒ³ãƒˆãƒªã‚’ 2ä»¶ ç”¨æ„ã™ã‚‹ ã¾ã èª­ã¾ã‚Œã¦ã„ãªã„ã‚¨ãƒ³ãƒˆãƒªå„ªå…ˆ
            var unreadEntries = self.getUnreadEntries();
            var readEntries = self.getReadEntries();
            self.activeEntries = _.first( unreadEntries.concat( _.shuffle( readEntries ) ), 2 );

            self.updateButtonStatus();
            self.bindEvents();
        },
        updateButtonStatus: function() {
            var self = this;

            _.each( self.activeEntries, function(entry, i) {
                var $button = $( self.$buttons.get(i) );
                $button.find('.promotion-entry-title').text(entry.getTitle());
                $button.css('display', 'inline-block');

                if (entry.isRead()) {
                    $button.removeClass('active');
                }
                else {
                    $button.addClass('active');
                }
            });
        },
        bindEvents: function() {
            var self = this;

            _.each(self.$buttons, function(button,i) {
                $(button).click( function(event) {
                    self.showEntry( self.activeEntries[i] );
                } );
            });

            _.each(self.$cancelButtons, function(cancelButton,i) {
                var $cancelButton = $(cancelButton);
                $cancelButton.click( function() {
                    var entry =  self.activeEntries[i];
                    // 1åº¦æ¶ˆã™ã¨å¾©æ´»ã—ãªã„
                    entry.setAsClosed();

                    self.$buttons[i].remove();
                    $cancelButton.remove();
                    return false;
                } );
            } );

            // close
            self.$element.on('click', '.promotion-close', function() {
                self.hide();
            });

            // pager
            self.$element
                .on('click', '[data-target-promotion-index]', function () {
                    var index = $(this).attr('data-target-promotion-index');
                    self.showEntryAt(index);
                })
                .on('click', '[data-rel]', function () {
                    var rel = $(this).attr('data-rel');
                    var index = self.getCurrentEntry().$element.attr('data-' + rel);
                    self.showEntryAt(index);
                });
        },
        show: function () {
            var self = this;

            self.setPosition();
            self.setupBackground();
            self.$element.show();
        },
        hide: function () {
            var self = this;

            self.$element.hide();
            self.removeBackground();
        },
        showEntryAt: function (index) {
            var self = this;

            var entry = self.entries[index];
            if (entry) {
                self.showEntry(entry);
            }
        },
        showEntry: function (entry) {
            var self = this;

            self.index = entry.getIndex();

            self.show();

            _.each(self.entries, function(entry) {
                entry.hide();
            });

            entry.show();

            self.updatePagerMarker();
            self.updateButtonStatus();
        },
        getCurrentEntry: function () {
            var self = this;
            return self.entries[self.index];
        },
        setPosition: function() {
            var self = this;

            // ä¸­å¤®æƒãˆï¼Œã¡ã‚‡ã£ã¨ä¸Šã®ã»ã†ã«é…ç½®ã—ã¾ã™ï¼admin-headerã¯relativeã«ãªã£ã¦ã‚‹ã®ã§ãã®åˆ†ã¯å¼•ã
            self.$element.css({
                left: ($(document).width() - self.$element.width()) * 0.5 - self.$element.parent().offset().left,
                top: ($(document).height() - self.$element.height()) * 0.25 - $('#admin-header').height()
            });
        },
        setupBackground: function() {
            var self = this;

            var $background = $('.promotion-entry-background');
            if (!$background.get(0)) {
                $background = $('<div>').addClass('promotion-entry-background').appendTo(document.body);
            }
            $background.stop().show().animate({
                opacity: 0.3
            });
            $background.one('click', function() {
                self.hide();
            });
        },
        removeBackground: function() {
            var self = this;

            $('.promotion-entry-background').stop(true).animate({
                opacity: 0.0
            }, null, null, function() {
                $(this).hide();
            });
        },
        updatePagerMarker: function () {
            var self = this;

            self.$element.find('.promotion-pager-markers .pager-marker').each(function (i) {
                $(this).removeClass('selected');
                if (i === self.index) {
                    $(this).addClass('selected');
                }
            });
        },
        getReadEntries: function() {
            var self = this;

            return _.filter(self.entries, function(entry) {
                return entry.isRead() && ! entry.isClosed();
            });
        },
        getUnreadEntries: function() {
            var self = this;

            return _.filter(self.entries, function(entry) {
                return ! entry.isRead() && ! entry.isClosed();
            });
        }
    };

    // è²¼ã‚Šä»˜ã‘ãƒœãƒƒã‚¯ã‚¹ã‚’è¡¨ç¾ã™ã‚‹ã‚¯ãƒ©ã‚¹
    Hatena.Diary.Pages.Admin['user-blog-edit'].EmbedBox = function () { this.init.apply(this, arguments) };
    Hatena.Diary.Pages.Admin['user-blog-edit'].EmbedBox.prototype = {
        init: function(args) {
            var self = this;
            self.$container = args.$container;
            self.$urlInput = self.$container.find('.js-embed-url');
            self.$previewButton = self.$container.find('.js-preview-button');
            self.$embedTypes = self.$container.find('.js-embed-types');
            self.$pasteButton = self.$container.find('.js-paste-button');
            self.$showEmbedCheckbox = self.$container.find('.js-show-embed-box-on-paste-url');
            self.candidates = [];

            // showã—ãŸã‚‰è¿”ã™ï¼è²¼ã‚Šä»˜ã‘æˆåŠŸã—ãŸã‚‰resolve, å¤±æ•—ã—ãŸã‚‰reject
            self.session = $.Deferred();
            self.session.reject();

            self.$container.on('click', '.js-close', function() {
                self.hide();
            });

            self.$previewButton.on('click', function() {
                self.requestPreview();
            });

            self.$urlInput.on('keydown', function(event) {
                if(keyString(event) === 'RET') {
                    self.requestPreview();
                    return false;
                }
            });

            self.$pasteButton.on('click', function() {
                self.requestPaste();
            });

            self.$container.on('keydown', ':input', function(event) {
                // ESCæŠ¼ã—ãŸã‚‰é–‰ã˜ã‚‹
                // Compositionã‚¤ãƒ™ãƒ³ãƒˆè¦‹ã¦ãªã„ã®ã§æ—¥æœ¬èªå…¥åŠ›ä¸­ã‚‚åå¿œã™ã‚‹ã‘ã©ï¼ŒURLå…¥åŠ›ã™ã‚‹æ¬„ã—ã‹ãªã„ã®ã§è€ƒæ…®ã—ãªã„
                if(keyString(event) === 'ESC') {
                    self.hide();
                    return false;
                }
            });

            if (Hatena.Diary.Browser.isIE) {
                var editor = Hatena.Diary.Editor.Support.currentEditor;
                // IEã§ã¯ï¼Œãƒ¢ãƒ¼ãƒ€ãƒ«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦é–‹ããƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯ã—ãŸç¬é–“ã«ï¼Œã‚¨ãƒ‡ã‚£ã‚¿ã®é¸æŠç¯„å›²å–ã‚Œãªã„ã®ã§ï¼Œã‚¿ã‚¤ãƒãƒ¼ã§ç›£è¦–ã™ã‚‹â€¦â€¦â€¦
                setInterval(function() {
                    try {
                        self.selectionRangeInTimer = editor.getSelectionRange();
                        self.selectionContentInTimer = editor.isCollapsed() ? null : editor.getSelectionText();
                    } catch(ignore) {
                        // ã„ã‚ã‚“ãªã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹ã‘ã©äº›ç´°ãªå•é¡Œãªã®ã§ç„¡è¦–ã™ã‚‹
                    }
                }, 1000);

            }

            // URLè²¼ã‚Šä»˜ã‘ãŸã¨ãã«è²¼ã‚Šä»˜ã‘ãƒœãƒƒã‚¯ã‚¹å‡ºã™ã‹ã®åˆ¶å¾¡
            // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚ªãƒ³ï¼Œã‚ªãƒ—ãƒˆã‚¢ã‚¦ãƒˆå¯èƒ½
            // ãƒšãƒ¼ã‚¸ãƒ­ãƒ¼ãƒ‰æ™‚ã«localStorageâ†’inputã«æ›¸ãå‡ºã—ï¼Œä»¥é™ã¯inputã‚’è¦‹ã‚‹
            var key = 'EmbedBox.show-embed-box-on-paste-url';
            var pasteEnabled = true;
            try {
                pasteEnabled = localStorage.getItem(key) !== 'false';
            } catch(ignore) { }
            if (pasteEnabled) {
                self.$showEmbedCheckbox.prop('checked', true);
            }

            self.$showEmbedCheckbox.on('change', function() {
                var enabled = self.isEnabledOnPasteURL();
                localStorage.setItem(key, enabled);
                Hatena.Diary.trackEvent('EmbedBox.showFromPaste.setEnable.' + enabled);
            });

            $(document).on('show-embed-box', function() {
                self.show();
            });

            self.$embedTypes.on('change', ':input', function() {
                var $input = $(this);
                self.$embedTypes.find('.js-embed-type.selected').removeClass('selected');
                $input.parents('.js-embed-type').toggleClass('selected');
            });

            self.$embedTypes.on('dblclick', '.js-embed-type', function() {
                self.requestPaste();
            });
        },
        // è²¼ã‚Šä»˜ã‘æ™‚ã«è²¼ã‚Šä»˜ã‘ãƒœãƒƒã‚¯ã‚¹é–‹ãã®æœ‰åŠ¹ã‹ã‚’è¿”ã™
        isEnabledOnPasteURL: function() {
            return this.$showEmbedCheckbox.prop('checked');
        },
        // ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦é–‹ã
        show: function() {
            var self = this;
            if (self.isShown()) return;

            self.$container.css('left', ($(window).width()-self.$container.width())/2);

            self.$embedTypes.find('.js-embed-type.selected').removeClass('selected');

            Hatena.Diary.Window.show(self.$container, {
                showBackground: true,
                destroy : function () {
                    self.onHide();
                }
            });

            _.defer(function() {
                self.$urlInput.focus()[0].select();
            });

            self.checkSelection();

            Hatena.Diary.trackEvent('EmbedBox.show');

            self.session = $.Deferred();
            return self.session.promise();
        },
        setURL: function(url) {
            this.$urlInput.val(url);
        },
        isShown: function() {
            return this.$container.is(':visible');
        },
        // ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦é–‰ã˜ã‚‹
        hide: function() {
            var self = this;
            Hatena.Diary.Window.hide(self.$container);
        },
        // ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦é–‰ã˜ã‚‹ã¨ãã«å‘¼ã°ã‚Œã‚‹callback
        onHide: function() {
            var self = this;
            self.session.reject();
            self.reset();
        },
        // ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦é–‹ã„ãŸã¨ãã®ã‚¨ãƒ‡ã‚£ã‚¿ã®é¸æŠç¯„å›²ã‚’ä¿å­˜ã—ã¦ãŠã
        checkSelection: function() {
            var self = this;
            if (!Hatena.Diary.Browser.isIE) {
                var editor = Hatena.Diary.Editor.Support.currentEditor;
                self.selectionRange = editor.getSelectionRange();
                self.selectionContent = editor.isCollapsed() ? null : editor.getSelectionText();
            } else {
                // IEã§ã¯ï¼Œç›´å‰ã®å€¤ã‚’ä½¿ã†
                self.selectionRange = self.selectionRangeInTimer;
                self.selectionContent = self.selectionContentInTimer;
            }
        },
        // å…¥åŠ›ã•ã‚ŒãŸURLã‚’ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã™ã‚‹
        requestPreview: function() {
            var self = this;

            var url = self.$urlInput.val();
            if (!url) return;

            // ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒ¼ã‹ã‚‰ã‚³ãƒ”ãƒ¼ã™ã‚‹ã¨ãƒ—ãƒ­ãƒˆã‚³ãƒ«æŠœã‘ã‚‹ã®ã¸ã®ãŠã‚‚ã¦ãªã—
            if (!url.match(/^https?:\/\//)) {
                url = 'http://' + url;
            }

            self.reset();

            // showã—ãŸã¨ãã¡ã‚‡ã£ã¨ç½®ã„ã¦focusã—ã¦ã‚‹ã®ã§ï¼Œã“ã£ã¡ã‚‚
            _.defer(function() {
                self.$pasteButton.attr('disabled', false).removeClass('disabled').focus();
            });

            if (self.selectionRange && self.selectionContent) {
                self.candidates.push(self.createQuoteCandidate(url, self.selectionContent));
            }
            self.candidates.push(self.createImageCandidate(url));
            self.candidates.push(self.createEmbedCandidate(url));
            self.candidates.push(self.createTitleCandidate(url));
            self.candidates.push(self.createURLCandidate(url));
        },
        // å€™è£œã‚’å…¨éƒ¨éš ã—ã¦ï¼Œè²¼ã‚Šä»˜ã‘ãƒœã‚¿ãƒ³ã‚’disabledã«ã™ã‚‹ï¼æ–°ã—ã„URLã‚’ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã™ã‚‹ã¨ãã¨ï¼Œãƒ¢ãƒ¼ãƒ€ãƒ«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’é–‰ã˜ã‚‹ã¨ãã«å‘¼ã°ã‚Œã‚‹ï¼
        reset: function() {
            var self = this;
            _.each(self.candidates, function(candidate) {
                candidate.kill();
            });
            self.candidates = [];
            self.$pasteButton.attr('disabled', true).addClass('disabled');
        },
        // è²¼ã‚Šä»˜ã‘
        requestPaste: function() {
            var self = this;

            if (self.$pasteButton.is(':disabled')) return;

            // è²¼ã‚Šä»˜ã‘ã‚‹ã®ã¯ï¼Œãƒã‚§ãƒƒã‚¯ã•ã‚Œã¦ã‚‹ã‚„ã¤ã‹ï¼Œä¸€ç•ªä¸Šã®ã‚„ã¤
            var candidate = _.find(self.candidates, function(candidate) { return candidate.isChecked() }) || _.find(self.candidates, function(candidate) { return candidate.isEnabled() });

            Hatena.Diary.trackEvent('EmbedBox.paste');
            Hatena.Diary.trackEvent('EmbedBox.paste.' + candidate.type);

            self.session.resolve(candidate);

            candidate.paste();
            self.hide();
        },
        createEmbedCandidate: function(url) {
            var self = this;

            var $iframe = $('<iframe width="100%" scrolling="no">');
            var src = Hatena.Diary.URLGenerator.user_blog_url('/preview_url_embed') + '?' + $.param({ url: url});

            var embedSucceed = $.Deferred();

            // iframeãŒDOMã«åŸ‹ã‚è¾¼ã¾ã‚Œã¦ãªã„ã¨Messengerä½¿ãˆãªã„(postMessage.jsã®ä»•æ§˜)ã®ã§ï¼Œã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’ãšã‚‰ã™ï¼
            _.defer(function() {
                var messenger = Messenger.createForFrame($iframe[0], src);
                messenger.addEventListener('resize', function (height) {
                    $iframe.css('height', height);
                    embedSucceed.resolve();
                });
                messenger.addEventListener('close', function () {
                    $iframe.remove();
                    embedSucceed.reject();
                });
            });

            // youtubeã¨ã‹ï¼Œå¤§åŠã¯ï¼Œiframeã‚„ï¼Œscriptã‚’å‡ºã™ã®ã§ï¼Œãƒ•ã‚£ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ€ã§æ¶ˆã•ã‚Œã¦ã—ã¾ã†ï¼
            // ãã®ãŸã‚ï¼Œ:embed + :citeã‚’æŒ¿å…¥ã™ã‚‹ï¼
            // twitterã®statusã¨iTunesã¯divã¨scriptã‚’å‡ºã™ã®ã§ï¼Œ:embed1ã¤ã§äº‹è¶³ã‚Šã‚‹ï¼:citeå‡ºã•ãªã„
            var syntax;
            var anchor = document.createElement('a');
            anchor.href = url;
            if (
                (anchor.host === 'itunes.apple.com') ||
                (anchor.host == 'twitter.com' && anchor.pathname.match(/\/status\//))
            ) {
                syntax = "["+url+":embed]";

                // æ–‡ã®æœ«å°¾ã«iTuneså…¥ã‚Œã‚‹ã¨ä»¥é™ç·¨é›†ã§ããªããªã‚‹ã®ã§(tinyMCEãŒæ‚ªã„)ï¼Œã†ã—ã‚ã«æ”¹è¡Œã¤ã‘ãŸã„ï¼
                // æœ¬æ¥ã¯tinymceå´ã§ãªã‚“ã¨ã‹ã—ã¦ã»ã—ã„
                if ($('#syntax').val() === 'html') {
                    syntax += "\n\n ";
                }
            } else {
                syntax = "["+url+":embed:cite]";
            }

            return new Hatena.Diary.Pages.Admin['user-blog-edit'].EmbedBox.Candidate({
                $root_container: self.$container,
                type: 'embed',
                syntax: syntax,
                loader: embedSucceed.promise(),
                $preview: $iframe
            });
        },

        createImageCandidate: function(url) {
            var self = this;

            var imageLoaded =  $.Deferred();
            var $img = $('<img>').on('load', function() {
                imageLoaded.resolve();
            }).on('error', function() {
                imageLoaded.reject();
            }).attr('src', url);

            return new Hatena.Diary.Pages.Admin['user-blog-edit'].EmbedBox.Candidate({
                $root_container: self.$container,
                type: 'image',
                selectionRange: self.selectionRange,
                // :imageã ã‘ã§ã¯ï¼Œãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã™ã‚‹å ´åˆãªã©ã«ï¼Œã†ã¾ãæ‰±ãˆãªã„ï¼ç”»åƒã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèªæ¸ˆãªã®ã§ï¼Œ:image=ã§imgã®srcã«ã‚‚æŒ‡å®šã™ã‚‹ï¼
                syntax: '[' + url + ':image=' + url + ']',
                loader: imageLoaded.promise(),
                $preview: $img
            });
        },
        createTitleCandidate: function(url) {
            var self = this;

            var $preview = $('<div>');

            var loadInfo = $.Deferred();

            $.ajax({
                type: 'POST',
                dataType: 'json',
                url: '/api/extract_title',
                data: {
                    url: url,
                    rkm: Hatena.Diary.data('rkm'),
                    rkc: Hatena.Diary.data('rkc')
                }
            }).done(function(info) {
                if (info.title) {
                    $preview.text(info.title);
                    loadInfo.resolve();
                } else {
                    loadInfo.reject();
                }
            }).fail(function() {
                loadInfo.reject();
            });

            return new Hatena.Diary.Pages.Admin['user-blog-edit'].EmbedBox.Candidate({
                $root_container: self.$container,
                type: 'title',
                selectionRange: self.selectionRange,
                syntax: '['+url+':title]',
                loader: loadInfo.promise(),
                $preview: $preview
            });
        },
        createURLCandidate: function(url) {
            var self = this;

            var $preview = $('<div>').text(url);

            return new Hatena.Diary.Pages.Admin['user-blog-edit'].EmbedBox.Candidate({
                $root_container: self.$container,
                type: 'url',
                selectionRange: self.selectionRange,
                syntax: '['+url+']',
                loader: $.Deferred().resolve().promise(),
                $preview: $preview
            });
        },
        createQuoteCandidate: function(url, quote) {
            var self = this;
            var $preview = $('<pre>').text(quote);

            return new Hatena.Diary.Pages.Admin['user-blog-edit'].EmbedBox.Candidate({
                $root_container: self.$container,
                type: 'quote',
                selectionRange: self.selectionRange,
                syntax: '['+url+':title=' + quote + ']',
                loader: $.Deferred().resolve().promise(),
                $preview: $preview,
                paste: function() {
                    var editor = Hatena.Diary.Editor.Support.currentEditor;
                    editor.setSelectionRange(self.selectionRange);
                    editor.createLink(url);
                }
            });
        }
    };

    // ã‚ã‚‹URLã®è²¼ã‚Šä»˜ã‘å½¢å¼ã‚’è¡¨ç¾ã™ã‚‹ã‚¯ãƒ©ã‚¹ï¼viewã®æ›´æ–°ï¼Œsyntaxã®ç®¡ç†ãªã©
    Hatena.Diary.Pages.Admin['user-blog-edit'].EmbedBox.Candidate = function () { this.init.apply(this, arguments) };
    Hatena.Diary.Pages.Admin['user-blog-edit'].EmbedBox.Candidate.prototype = {
        // args: { $root_container, type, syntax|paste, load, $preview }
        init: function(args) {
            var self = this;
            self.type = args.type;
            self.selectionRange = args.selectionRange;

            // syntaxæŒ‡å®šã•ã‚ŒãŸã‚‰ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®æŒ™å‹•(1è¡ŒãŒãƒªãƒ³ã‚¯ã«ãªã‚‹)
            if (args.syntax) {
                self.syntax = args.syntax;
            }

            // pasteé–¢æ•°æŒ‡å®šã™ã‚Œã°pasteã®æŒ™å‹•ã‚’ä¸Šæ›¸ãã§ãã‚‹
            if (args.paste) {
                self.paste = args.paste;
            }

            self.$container = args.$root_container.find('[data-embed-type="' + self.type + '"]');
            self.$container.hide();
            self.$radio = self.$container.find('.js-type-select');
            self.$radio.attr('checked', false);


            // previewContainreã«ã¯å¼•æ•°ã§æ¸¡ã•ã‚ŒãŸãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®ãŸã‚ã®è¦ç´ ã‚’appendã™ã‚‹ï¼æœ‰åŠ¹ãªã“ã¨ãŒåˆ†ã‹ã£ãŸã‚‰previewContainerã¯è¡¨ç¤ºã•ã‚Œã‚‹ï¼
            self.$previewContainer = self.$container.find('.js-preview-container');
            self.$previewContainer.hide();
            self.$previewContainer.append(args.$preview);

            // æœ‰åŠ¹ãªã“ã¨ãŒåˆ†ã‹ã£ãŸã‚‰resolveã•ã‚Œã‚‹ã‚„ã¤
            self.loader = args.loader;

            self.loader.done(function() {
                self.enable();
            }).fail(function() {
                self.disable();
            });

        },
        // æœ‰åŠ¹ã§ã‚ã‚‹ã‹(ãŸã¨ãˆã°ï¼Œ:imageå½¢å¼ã§è²¼ã‚ŠãŸãã¦ï¼Œã‹ã¤ï¼Œç”»åƒã§ã‚ã‚‹ã“ã¨ãŒåˆ†ã‹ã£ã¦ã„ã‚‹ã‹)
        isEnabled: function() {
            var self = this;
            return self.loader.state() === "resolved";
        },
        // æœ‰åŠ¹ãªã“ã¨ãŒã‚ã‹ã£ãŸã¨ã
        enable: function() {
            var self = this;
            self.$container.show();
            self.$previewContainer.show();
        },
        // ç„¡åŠ¹ãªã“ã¨ãŒã‚ã‹ã£ãŸã¨ã
        disable: function() {
            var self = this;
            self.$container.hide();
            self.$previewContainer.empty();
        },
        // ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’çµ‚äº†ã™ã‚‹
        kill: function() {
            var self = this;
            self.disable();
        },
        // radioãƒœã‚¿ãƒ³ãŒé¸æŠã•ã‚Œã¦ã„ã‚‹ã‹
        isChecked: function() {
            var self = this;

            return self.$radio.prop('checked');
        },
        // ãƒªãƒ³ã‚¯ã‚’æŒ¿å…¥
        paste: function() {
            var self = this;
            self.getSyntaxLines().done(function(lines) {
                if (self.selectionRange) {
                    Hatena.Diary.Editor.Support.currentEditor.setSelectionRange(self.selectionRange);
                }

                Hatena.Diary.EditorConnector.insertLines(lines);
            });
        },
        // è²¼ã‚Šä»˜ã‘ç”¨ã¯ã¦ãªè¨˜æ³•ã‚’resolveã™ã‚‹Deferredã‚’è¿”ã™
        getSyntaxLines: function() {
            var self = this;
            var gotSyntax = $.Deferred();

            var lines_data = self.syntax.split('\n');
            var lines = {
                html:     lines_data,
                hatena:   lines_data,
                markdown: lines_data
            };

            Hatena.Diary.extractSyntax(self.syntax).done(function(data) {
                lines.html = [data.html];
            }).always(function() {
                gotSyntax.resolve(lines);
            });

            return gotSyntax.promise();
        }
    };

    // PRè¨˜äº‹1è¨˜äº‹ã«å¯¾å¿œã™ã‚‹ã‚¯ãƒ©ã‚¹
    Hatena.Diary.Pages.Admin['user-blog-edit'].Promotion.Entry = function () { this.init.apply(this, arguments); };
    Hatena.Diary.Pages.Admin['user-blog-edit'].Promotion.Entry.prototype = {
        init: function (args) {
            var self = this;
            self.$element = args.$element;
            self.manager  = args.manager;
            self.bindEvents();
        },
        bindEvents: function() {
            var self = this;
            self.$element.on('click', '[data-keyword]', function(button) {
                self.manager.hide();
                Hatena.Diary.Editor.Support.currentEditor.insert($(this).attr('data-keyword'));
                Hatena.Diary.trackEvent('Promotion.Entry.Insert.' + self.entryID());
            });
        },
        isRead: function() {
            var self = this;
            try {
                return localStorage[self.localStorageKey()];
            } catch(ignore) {}
        },
        setAsRead: function() {
            var self = this;
            try {
                localStorage[self.localStorageKey()] = true;
            } catch(ignore) {}
        },
        localStorageKey: function() {
            var self = this;
            return 'Hatena.Diary.Promotion.Entry.read.' + self.entryID();
        },
        entryID: function() {
            var self = this;
            return self.$element.attr('data-promotion-entry-id');
        },
        isClosed: function() {
            var self = this;
            try {
                return localStorage['Hatena.Diary.Promotion.Entry.closed.' + self.entryID()];
            } catch(ignore) {}
        },
        setAsClosed: function() {
            var self = this;
            try {
                localStorage['Hatena.Diary.Promotion.Entry.closed.' + self.entryID()] = true;
            } catch(ignore) {}
        },
        show: function() {
            var self = this;
            self.$element.stop().fadeIn();

            Hatena.Diary.trackEvent('Promotion.Entry.Show.' + self.entryID());

            self.setAsRead();
        },
        hide: function() {
            var self = this;
            self.$element.fadeOut();
        },
        getTitle: function () {
            var self = this;
            return self.$element.attr('data-promotion-title');
        },
        getIndex: function () {
            var self = this;
            return +self.$element.attr('data-promotion-index');
        }
    };

    Hatena.Diary.Pages.Admin['user-blog-edit'].updateOgDescriptionInput = function () {
        var $input = $('#og-description-input');

        $.ajax({
            url: './preview_og_description',
            method: 'POST',
            data: {
                body: $('#body').val(),
                syntax: $('#syntax').val(),
                rkm: Hatena.Diary.data('rkm'),
                rkc: Hatena.Diary.data('rkc')
            },
            dataType: 'json'
        }).done(function (data) {
            $('#og-description-input').attr('placeholder', _.escape(data.text));
        });
    };

    Hatena.Diary.Pages.Admin['user-blog-edit'].setupOgDescriptionInput = function (editor) {
        // å¸¸ã«ä½¿ã†ã‚‚ã®ã§ã¯ãªã„ã®ã§, ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ç¯€ç´„ã™ã‚‹
        // è¦‹ãˆã¦ãªã„ã¨ãã¯æ›´æ–°ã—ãªã„
        editor.bind('change', _.debounce(function () {
            if ($('#og-description').is(':hidden')) return;

            Hatena.Diary.Pages.Admin['user-blog-edit'].updateOgDescriptionInput();
        }, 1000));

        // ç·¨é›†ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’è¡¨ç¤ºã™ã‚‹ã¨ãã«æ›´æ–°ã™ã‚‹
        $('.curation-bar-itemlist [data-support-type="editor-option"]').on('click', function () {
            Hatena.Diary.Pages.Admin['user-blog-edit'].updateOgDescriptionInput();
        });
    };
})(jQuery);

(function($){
    // ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³(Entries, Categories)ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã¯ãƒšãƒ¼ã‚¸å†…ã«é«˜ã€…1ã¤ã—ã‹å­˜åœ¨ã›ãšï¼ŒCollectionsã‹ã‚‰å‚ç…§ã§ãã‚‹ï¼
    // å€‹ã€…ã®Modelã‹ã‚‰å‚ç…§ã—ãŸã„ã¨ãã¯ã“ã“ã‹ã‚‰å‘¼ã¹ã‚‹ï¼
    // ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã¨æ˜ã‚‰ã‹ã«ä¸€å¯¾ä¸€ã§å¯¾å¿œã™ã‚‹ã‚‚ã®ã¯ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã§æ¸¡ã™ã¹ã(ãŸã¨ãˆã°EntriesViewã®ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã«ã¯entriesã‚’æ¸¡ã™)
    var Collections = {
        entries: null,
        categories: null
    };
    // ã‚¨ãƒ³ãƒˆãƒª1ã¤ã‚’è¡¨ã™ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
    var Entry = function(data){
        this.data = data;
    };
    Entry.prototype = {
        // è¡¨ç¤ºç”¨ã®ãƒ‡ãƒ¼ã‚¿
        getUUID: function() {
            return this.data.uuid;
        },
        getURL: function() {
            return this.data.url;
        },
        getEditURL: function() {
            return this.data.edit_url;
        },
        getTitle: function() {
            return this.data.title;
        },
        getSummary: function() {
            return this.data.summary;
        },
        getCreated: function() {
            return this.data.created;
        },
        getCreatedTime: function() {
            // epoch * 1000
            return this.getCreatedDate().getTime();
        },
        getCreatedDate: function() {
            return Hatena.Diary.Util.parseW3CDTF(this.data.created);
        },

        // datetimeã¯nullã®å ´åˆãŒã‚ã‚‹ã®ã§æ³¨æ„
        getDatetime: function() {
            return this.data.datetime;
        },
        getDatetimeTime: function() {
            // epoch * 1000
            var date = this.getDatetimeDate();

            if (date) {
                return date.getTime();
            } else {
                return null;
            }
        },
        getDatetimeDate: function() {
            return Hatena.Diary.Util.parseW3CDTF(this.data.datetime);
        },

        getAuthorName: function() {
            return this.data.author_name;
        },
        getCommentCount: function() {
            return this.data.comment_count;
        },
        getCategories: function() {
            return this.data.categories;
        },
        isPublic: function() {
            return this.data.is_public;
        },
        isScheduledEntry: function() {
            return this.data.is_scheduled_entry;
        },

        // æ“ä½œç³»
        select: function() {
            this.data.isSelected = true;
            $(this).triggerHandler('change');
        },
        unselect: function() {
            this.data.isSelected = false;
            $(this).triggerHandler('change');
        },
        isSelected: function() {
            return this.data.isSelected;
        },
        // ã“ã®ã‚¨ãƒ³ãƒˆãƒªã‚’ç”»é¢ã‹ã‚‰æ¶ˆã™
        // DBã‹ã‚‰æ¶ˆã•ã‚Œã‚‹ã‚ã‘ã§ã¯ãªã„
        remove: function() {
            $(this).triggerHandler('remove');
        },
        // ã‚«ãƒ†ã‚´ãƒªã‚’è¿½åŠ ã™ã‚‹
        addCategory: function(category_name) {
            if (_.contains(this.data.categories, category_name)) return;
            if (!this.data.categories) {
                this.data.categories = [];
            }
            this.data.categories.push(category_name);
            $(this).triggerHandler('change');
        },
        // è¨˜äº‹ã‚’ç·¨é›†ã§ãã‚‹ã‹ã©ã†ã‹
        canBeManageEntry: function() {
          return this.data.can_be_manage_entry;
        },
        // ä¸‹æ›¸ããƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼tokenä½œã‚Œã‚‹ã‹ã©ã†ã‹
        canCreateDraftPreviewToken : function () {
          return this.data.can_create_draft_preview_token;
        }
    };

    var EntryView = function(entry) {
        var self = this;
        self.entry = entry;

        self.rootTemplate = _.template($('.js-entry-root-template').html().replace(/^\s*/, '').replace(/\s*$/, ''));
        self.elementTemplate = _.template($('.js-entry-inner-template').html());

        self.render();
        $(self.entry).on('change', function() {
            self.render();
        }).on('remove', function() {
            self.remove();
        });
        self.$element.on('change', 'input', function() {
            var $input = $(this);
            if ($input.is(':checked')) {
                self.entry.select();
            } else {
                self.entry.unselect();
            }
            $(self.entry).triggerHandler('select');
        });
    };
    EntryView.prototype = {
        render: function() {
            // $elementã¯ä¸€åº¦ã ã‘ä½œã‚Šï¼Œä»¥å¾Œã¯æœ€åˆã«ä½œã£ãŸ$elementã®å†…å®¹ã‚’æ›´æ–°ã™ã‚‹ï¼
            if (!this.$element) {
                this.$element = $($.parseHTML(this.rootTemplate({entry: this.entry})));
            }

            this.$element.html(this.elementTemplate({entry: this.entry}));
            // æ¤œç´¢ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æŒ‡å®šã•ã‚Œã¦ã„ãŸã‚‰ãƒã‚¤ãƒ©ã‚¤ãƒˆã™ã‚‹
            if (Collections.entries && Collections.entries.getKeyword()) {
                var escapedKeyword = _.escape(Collections.entries.getKeyword());

                this.$element.find('.js-search-entry-title').html(function (i, html) {
                    return html.split(escapedKeyword).join('<span class="entry-search-keyword">' + escapedKeyword+ '</span>');
                });

                this.$element.find('.js-search-entry-body').html(function (i, html) {
                    return html.split(escapedKeyword).join('<span class="entry-search-keyword">' + escapedKeyword + '</span>');
                });
            }

            Hatena.Locale.updateTimestamps(this.$element[0]);
        },
        remove: function() {
            this.$element.remove();
        },
        getElement: function() {
            return this.$element;
        }
    };

    // ã‚¨ãƒ³ãƒˆãƒªã®ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ï¼Œèª­ã¿è¾¼ã¿ï¼Œã‚¯ã‚¨ãƒªã®ç®¡ç†
    var Entries = function() {
    };
    Entries.prototype = {
        // æŒ‡å®šã—ãŸã‚¯ã‚¨ãƒªã§èª­ã¿è¾¼ã‚€
        load: function() {
            var self = this;

            var data = {};
            if (self.keyword) {
                data.q = self.keyword;
            }
            if (self.category) {
                data.category = self.category;
            }

            if (self.getPermission() !== 'all') {
                data.permission = self.getPermission();
            }

            var lastEntry = _.last(self.entries);
            if (lastEntry) {
                data.until = lastEntry.getCreatedDate().getTime()/1000;
            }

            $.ajax({
                url: 'entries.json',
                data: data
            }).done(function(entries) {
                self.onLoaded(entries);
            });
        },
        onLoaded: function(data) {
            // data: { entries: [$entry], has_more: bool }
            var self = this;
            var $self = $(self);
            self.receivedEntries = [];
            self.receivedEntries = _.map(data.entries, function(entry_data) {
                return new Entry(entry_data);
            });
            $(self.receivedEntries).on('select', function() {
                $self.triggerHandler('select');
            }).on('remove', function() {
                $self.triggerHandler('remove');
            });
            if (!self.entries) self.entries = [];
            self.entries = self.entries.concat(self.receivedEntries);
            self.hasMore = data.has_more;
            $(self).triggerHandler('loaded');
        },
        // æœ€åˆã‹ã‚‰èª­ã¿ç›´ã™
        reset: function() {
            var self = this;
            _.each(self.entries, function(entry) {
                entry.remove();
            });
            self.entries = [];
            self.receivedEntries = [];
            self.hasMore = undefined;
            $(self).triggerHandler('reset');
            self.load();
        },
        // ã‚¨ãƒ³ãƒˆãƒªã‚’å…¨ã¦è¿”ã™
        getEntries: function() {
            return this.entries;
        },
        // æœ€å¾Œã«å—ä¿¡ã—ãŸEntryã®é…åˆ—ã‚’è¿”ã™
        getReceivedEntries: function() {
            return this.receivedEntries;
        },
        // ç¶šãã‚ã‚‹ã‹ã©ã†ã‹ã‚’è¿”ã™
        hasMoreEntries: function() {
            return this.hasMore;
        },
        // æ¤œç´¢ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’è¨­å®š
        setKeyword: function(keyword) {
            this.keyword = keyword;
        },
        // æ¤œç´¢ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’è¿”ã™
        getKeyword: function(keyword) {
            return this.keyword;
        },
        // è¡¨ç¤ºã™ã‚‹ã‚«ãƒ†ã‚´ãƒªã‚’è¨­å®š
        setCategory: function(category) {
            this.category = category;
        },
        // permission: all|public|draft
        setPermission: function(permission) {
            this.permission = permission;
        },
        getPermission: function() {
            return this.permission;
        },
        getSelectedEntries: function() {
            return _.filter(this.entries, function(entry) { return entry.isSelected() });
        },
        // ãƒã‚§ãƒƒã‚¯ã‚’ã¤ã‘ãŸã‚¨ãƒ³ãƒˆãƒªã‚’å‰Šé™¤
        // æ“ä½œãŒå®Œäº†ã—ãŸã‚‰resolveã™ã‚‹deferredã‚’è¿”ã™
        deleteSelectedEntries: function() {
            var self = this;
            var entries_to_delete = self.getSelectedEntries();
            if (!entries_to_delete.length) return;

            var deleted = $.ajax({
                type: 'post',
                url: 'entries.delete.json',
                data: {
                    entry: _.map(entries_to_delete, function(entry) { return entry.getUUID() }),
                    rkm: Hatena.Diary.data('rkm'),
                    rkc: Hatena.Diary.data('rkc')
                },
                traditional: true
            });
            deleted.done(function() {
                self.entries = _.difference(self.entries, entries_to_delete);
                _.each(entries_to_delete, function(entry) {
                    entry.remove();
                });
            });
            return deleted;
        },
        // ãƒã‚§ãƒƒã‚¯ã‚’ã¤ã‘ãŸã‚¨ãƒ³ãƒˆãƒªã«ã‚«ãƒ†ã‚´ãƒªã‚’è¿½åŠ 
        // æ“ä½œãŒå®Œäº†ã—ãŸã‚‰resolveã™ã‚‹deferredã‚’è¿”ã™
        addCategoryToSelectedEntries: function(category_name) {
            var self = this;
            var entries_to_add_category = self.getSelectedEntries();
            if (!entries_to_add_category.length) return;

            _.each(entries_to_add_category, function(entry) {
                entry.addCategory(category_name);
            });

            var categoryAdded = $.ajax({
                type: 'post',
                url: 'entries.add_category.json',
                data: {
                    entry: _.map(entries_to_add_category, function(entry) { return entry.getUUID() }),
                    category: category_name,
                    rkm: Hatena.Diary.data('rkm'),
                    rkc: Hatena.Diary.data('rkc')
                },
                traditional: true
            });
            return categoryAdded;
        }
    };

    var EntriesView = function(entries) {
        var self = this;
        self.entries = entries;
        var $entries = $(entries);

        self.$entriesContainer = $('.js-entries-container');

        self.$loadNextPage = $('.js-load-next-page');

        $entries.on('loaded', function() {
            self.render();
        });
        $entries.on('select remove', function() {
            self.renderButtons();
        });
        var $form = $('.js-entry-search-form');
        $('.js-categories-selector').on('change', function(event) {
            entries.setKeyword($form.find(':input[name="q"]').val());
            entries.setCategory($form.find(':input[name="category"]').val());
            entries.reset();
        });
        self.$loadNextPage.on('click', function(event) {
            self.entries.load();
        });
        $('.js-delete-entries-button').on('click', function() {
            if (!confirm(Hatena.Locale.text('epic.entry.delete.confirm'))) return;
            var deleted = self.entries.deleteSelectedEntries();
            deleted.always(function() {
                Collections.categories.reload();
            });
        });

        $('.js-entry-search-form').on('submit', function(event) {
            event.preventDefault();
            entries.setKeyword($form.find(':input[name="q"]').val());
            entries.setCategory($form.find(':input[name="category"]').val());
            entries.reset();
        });

        $('.js-entry-search-box-input').on('search', function() {
            var keyword = $form.find(':input[name="q"]').val();
            if (keyword !== '') return;
            entries.setKeyword('');
            entries.reset();
        });

        $('.js-select-all-entries').on('change', function() {
            if ($(this).is(':checked')) {
                _.each(entries.getEntries(), function(entry) {
                    entry.select();
                });
            } else {
                _.each(entries.getEntries(), function(entry) {
                    entry.unselect();
                });
            }
            self.renderButtons();
        });

    };
    EntriesView.prototype = {
        render: function() {
            var self = this;
            _.each(self.entries.getReceivedEntries(), function(entry) {
                var view = new EntryView(entry);
                self.$entriesContainer.append(view.getElement());
            });

            if (self.entries.hasMoreEntries()) {
                self.$loadNextPage.show();
            } else {
                self.$loadNextPage.hide();
            }
            self.renderButtons();
            $(self).triggerHandler('rendered');
        },
        // ã‚«ãƒ†ã‚´ãƒªè¿½åŠ ã¨ã‚¨ãƒ³ãƒˆãƒªå‰Šé™¤ã®enable / disabled, ã‚¯ãƒ©ã‚¹è¿½åŠ 
        // ã‚¨ãƒ³ãƒˆãƒªã‚’ãƒã‚§ãƒƒã‚¯ã—ãŸã¨ãã¨ï¼Œã‚¨ãƒ³ãƒˆãƒªãŒæ¶ˆãˆãŸã¨ãã«å‘¼ã°ã‚Œã‚‹
        renderButtons: function() {
            var self = this;
            var $deleteButton = $('.js-delete-entries-button');
            var $categoryButton = $('.js-category-dropdown-toggle');

            var selectedEntriesCount = self.entries.getSelectedEntries().length;
            if (selectedEntriesCount > 0) {
                $deleteButton.prop('disabled', false).removeClass('disabled').addClass('btn-danger');
                $categoryButton.prop('disabled', false).removeClass('disabled');
            } else {
                $deleteButton.prop('disabled', true).addClass('disabled').removeClass('btn-danger');
                $categoryButton.prop('disabled', true).addClass('disabled');
            }
        }
    };

    var Category = function(data) {
        this.data = data;
    };
    Category.prototype = {
        getName: function() {
            return this.data.name;
        },
        getEntriesCount: function() {
            return this.data.count;
        },
        setEntriesCount: function(count) {
            this.data.count = count;
            $(this).triggerHandler('change');
        }
    };

    // ã‚¨ãƒ³ãƒˆãƒªã«ã‚«ãƒ†ã‚´ãƒªè¿½åŠ ã™ã‚‹ã¨ãã®view
    var CategoryAppenderView = function(category, entries) {
        var self = this;
        self.category = category;
        self.entries = entries;
        self.render();

        self.$element.on('click', function() {
            var categoryAdded = self.entries.addCategoryToSelectedEntries(self.category.getName());
            categoryAdded.always(function() {
                Collections.categories.reload();
            });
        });

        $(self.category).on('change', function() {
            self.render();
        });
    };
    CategoryAppenderView.prototype = {
        render: function() {
            if (!this.$element) {
                this.$element = $('<li>');
            }
            this.$element.text(this.category.getName() + ' (' + this.category.getEntriesCount() + ')');
        },
        getElement: function() {
            return this.$element;
        }
    };

    // ã—ã¼ã‚Šã“ã¿ã®view
    var CategorySelectorView = function(category) {
        var self = this;
        self.category = category;
        self.render();

        $(self.category).on('change', function() {
            self.render();
        });
    };
    CategorySelectorView.prototype = {
        render: function() {
            if (!this.$element) {
                this.$element = $('<option>').val(this.category.getName());
            }
            this.$element.text(this.category.getName() + ' (' + this.category.getEntriesCount() + ')');
        },
        getElement: function() {
            return this.$element;
        }
    };

    var Categories = function() {
        var self = this;
        self.load();
    };
    Categories.prototype = {
        load: function() {
            var self = this;
            $.ajax({
                url: 'categories.json'
            }).done(function(data) {
                self.onLoaded(data);
            });
        },
        // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚«ãƒ†ã‚´ãƒªè¿½åŠ ã—ãŸå¾Œãªã©ã¯èª­ã¿è¾¼ã¿ç›´ã™ã“ã¨ãŒã§ãã‚‹ï¼å®Ÿè£…ã¨ã—ã¦ã¯loadã¨åŒã˜ï¼
        reload: function() {
            this.load();
        },
        onLoaded: function(data) {
            // data = { categories: [ { name, count } ] }
            var self = this;

            if (!self.categories) {
                // ã¯ã˜ã‚ã¦å—ä¿¡ã—ãŸ
                self.categories = _.map(data.categories, function(category_data) {
                    return new Category(category_data);
                });
                self.newCategories = self.categories;
            } else {
                self.newCategories = [];
                // è¨˜äº‹æ•°å¢—ãˆãŸã‚Šæ–°ã—ã„ã‚«ãƒ†ã‚´ãƒªã§ããŸã‚Šã™ã‚‹
                _.each(data.categories, function(category_data) {
                    var category = self.getCategory(category_data.name);
                    if (category) {
                        category.setEntriesCount(category_data.count);
                    } else {
                        category = new Category(category_data);
                        self.categories.push(category);
                        self.newCategories.push(category);
                    }
                });
            }
            $(self).triggerHandler('loaded');
        },
        getNewCategories: function() {
            return this.newCategories;
        },
        getCategory: function(categoryName) {
            return _.find(this.categories, function(category) {
                return category.getName() === categoryName;
            });
        }
    };

    // ã‚«ãƒ†ã‚´ãƒªã®ãƒªã‚¹ãƒˆã«é–¢ã™ã‚‹View
    // ã‚«ãƒ†ã‚´ãƒªã®Viewã¯2ã¤ã‚ã‚‹ã®ã§ã‚¸ãƒ£ã‚°ãƒªãƒ³ã‚°ã¿ãŸã„ãªæ„Ÿã˜
    var CategoriesView = function(categories, entries) {
        var self = this;
        self.categories = categories;
        self.entries = entries;
        var $categories = $(categories);
        self.$categoriesSelector = $('.js-categories-selector');
        self.$createNewCategory  = $('.js-create-new-category');

        $categories.on('loaded', function() {
            self.render();
        });

        $('.js-create-new-category').on('click', function() {
            var categoryName = window.prompt(Hatena.Locale.text('create_category'));
            if (!categoryName) return;

            var categoryAdded = self.entries.addCategoryToSelectedEntries(categoryName);
            categoryAdded.always(function() {
                self.categories.reload();
            });
        });
    };

    CategoriesView.prototype = {
        render: function() {
            var self = this;
            _.each(self.categories.getNewCategories(), function(category) {
                var selector_view = new CategorySelectorView(category);
                self.$categoriesSelector.append(selector_view.getElement());

                var appender_view = new CategoryAppenderView(category, self.entries);
                self.$createNewCategory.before(appender_view.getElement());
            });
        }
    };

    // ãªã‚“ã‹æ±ç”¨çš„ãªãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ã«è¦‹ãˆãªãã‚‚ãªã„
    var CategoriesDropdownView = function() {
        var self = this;
        self.$dropdown = $('.js-category-dropdown-list');
        self.$dropdownToggle = $('.js-category-dropdown-toggle');

        self.$dropdownToggle.on('click', function() {
            self.toggleDropdown();
            return false;
        });
        $(document).on('click', function(event) {
            self.hideDropdown();
        });
    };
    CategoriesDropdownView.prototype = {
        toggleDropdown: function() {
            this.$dropdown.toggle();
        },
        hideDropdown: function() {
            this.$dropdown.hide();
        }
    };

    var EntryTypeTabsView = function(entries) {
        var self = this;
        self.entries = entries;
        self.$tabs = $('.js-entry-type-select-tabs');
        self.$tabs.on('click', 'a', function (event) {
            self.clicked(event);
        });

        // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®permissionã‚’ã“ã“ã§è¨­å®š
        self.entries.setPermission(self.$tabs.find('.ui-tabs-active').find('a').attr('data-permission'));
    };
    EntryTypeTabsView.prototype = {
        clicked: function(event) {
            var self = this;
            event.preventDefault();
            self.$tabs.find('.ui-tabs-active').removeClass('ui-tabs-active');
            $(event.target).parents('li').addClass('ui-tabs-active');
            var permission = $(event.target).attr('data-permission');
            if (self.entries.getPermission() === permission) return;
            self.entries.setPermission(permission);
            self.entries.reset();
        }
    };

    var ShareDraftBox = function (entriesView) {
        var self = this;

        // è¦ªè¦ç´ 
        self.section = $('section')[0];

        self.$shareBoxWrapper = $('.js-share-draft-box-wrapper');
        self.$shareBox        = $('.js-share-draft-box');
        self.$tokenInput      = self.$shareBox.find('input');
        self.$closeButton     = self.$shareBox.find('.btn-close');
        self.$mask            = self.$shareBoxWrapper.find('.mask');

        // URLãƒœãƒƒã‚¯ã‚¹ã®åˆæœŸä½ç½®
        self.pos = {
            top  : -9999,
            left : -9999
        };

        $(entriesView).on('rendered', function () {
            self.initEvent();
        });
    };
    ShareDraftBox.prototype = {
        initEvent: function () {
            var self = this;
            self.$shareButton = $('.js-icon-share-draft');

            self.$shareButton.on('click', function(e){
                // è¦ç´ ã®å³ä¸‹ã®åº§æ¨™ã‚’å–å¾—
                var sectionRect = self.section.getBoundingClientRect();
                var rect = this.getBoundingClientRect();

                self.setWindowPosition({
                    top  : rect.bottom - sectionRect.top,
                    left : rect.right - sectionRect.left
                });

                var entryId = $(this).data('entryId');
                self.openShareDraftWindow(e, entryId);
                return false;
            });

            self.$closeButton.on('click', function () {
                self.closeShareDraftWindow();
                return false;
            });

            self.$mask.on('click', function () {
                self.closeShareDraftWindow();
                return false;
            });
        },

        setWindowPosition: function (pos) {
            this.pos = pos;
        },

        openShareDraftWindow : function (e, entryId) {
            var self = this;
            var data = {
                rkm      : Hatena.Diary.data('rkm'),
                rkc      : Hatena.Diary.data('rkc'),
                entry_id : entryId
            };

            // ä¸‹æ›¸ãä¿å­˜
            $.ajax({
                url      : './share_existing_draft',
                type     : 'POST',
                dataType : 'json',
                data     : data
            }).done(function (res) {
                self.$shareBoxWrapper.addClass('visible');

                // ä¸‹ã®æ–¹ã®è¦ç´ ã‚¯ãƒªãƒƒã‚¯ã—ãŸæ™‚ã«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ãŒã¯ã¿å‡ºã‚‹ã®é˜²æ­¢
                var offset = +self.$shareBox.css('margin').slice(0, -2);
                var over = (self.pos.top + self.$shareBox[0].getBoundingClientRect().height + offset * 2) - self.section.offsetHeight;

                if (over > 0) {
                    self.pos.top -= over + 10;
                }

                self.$shareBox.css(self.pos);

                var previewURL = Hatena.Diary.data('blogs-uri-base') + '/draft/' + res.token;
                self.$tokenInput.val(previewURL).focus().select();

            }).fail(function () {
                console.log('ajax error!!');
            });
        },

        closeShareDraftWindow: function () {
            this.$shareBoxWrapper.removeClass('visible');
        }
    };


    var onEntriesPage = function(){
        var entries = new Entries();
        Collections.entries = entries;
        var entriesView = new EntriesView(entries);
        var categories = new Categories();
        Collections.categories = categories;
        var categoriesView = new CategoriesView(categories, entries);
        var categoriesDropdownView = new CategoriesDropdownView();
        var entryTypeTabs = new EntryTypeTabsView(entries);

        var shareDraftBox = new ShareDraftBox(entriesView);

        entries.reset();
    };

    Hatena.Diary.Pages.Admin['user-blog-entries'] = function () {
        onEntriesPage();
    };

    Hatena.Diary.Pages.Admin['user-blog-drafts'] = function (){
        onEntriesPage();
    };

})(jQuery);

(function($){

    Hatena.Diary.Pages.Admin['user-blog-friend'] = function () {
        Hatena.Diary.Pages.createForParent();
    };

})(jQuery);
(function ($) {

    function showCategories (superCategory) {
        if (superCategory) {
            var $categories = $('.categories-container').filter(function () {
                return $(this).attr('data-super-category') === superCategory;
            }).show();

            if ($categories.length > 0) {
                $('#super-categories-container').hide();
                $('.submit-form-controls').show();
                location.hash = '#' + superCategory;
            }
            $('.back-button').show();
        } else {
            $('#super-categories-container').show();
            $('.categories-container').hide();
            $('.submit-form-controls').hide();
            $('.back-button').hide();
            location.hash = '#';
        }
    }

    Hatena.Diary.Pages.Admin['user-blog-group-official-dialog'] = function () {
        $(window).hashchange(function () {
            var m = /^#((?:\w|-)+)$/.exec(location.hash);
            if (m) {
                showCategories(m[1]);
            } else {
                showCategories(false);
            }
        }).hashchange();

        $('#super-categories-container .select-super-category').click(function () {
            var superCategory = $(this).closest('[data-super-category]').attr('data-super-category');
            showCategories(superCategory);
            return false;
        });

        $('.back-button').click(function () {
            showCategories(false);
            return false;
        });

        Hatena.Diary.Pages.createForParent();
        Hatena.Diary.Pages.send('resize', {
            height: 620,
            width: 620
        });

        $('.skip-button').click(function () {
            Hatena.Diary.Pages.send('close');
            return false;
        });

        $('form').submit(function () {
            var $form = $(this);

            $.ajax($form.attr('action'), {
                method: $form.attr('method'),
                data: $form.serialize()
            }).always(function () {
                Hatena.Diary.Pages.send('close');
            });

            Hatena.Diary.Pages.send('hide');

            return false;
        });
    };

})(jQuery);

(function($){

    Hatena.Diary.Pages.Admin['user-blog-import-diary-diary_name'] = function () {
        Hatena.Diary.Pages.Admin['user-blog-import'].setupDiaryProgress();

        // ä¸Šç´šè¨­å®šãƒªãƒ³ã‚¯ï¼Œã‚¯ãƒªãƒƒã‚¯ã§ãƒˆã‚°ãƒ«ã™ã‚‹ã‚„ã¤
        $('.toggle-hidden-section').click(function() {
            $(document.body).find($(this).attr('data-hidden-section-selector')).toggle();
        });
    };

})(jQuery);
(function($){

    Hatena.Diary.Pages.Admin['user-blog-import-movable_type'] = function () {
        Hatena.Diary.Pages.Admin['user-blog-import-movable_type'].setupMovableTypeProgress();

        $('.js-revert-movable-type-import').on('submit', function() {
            return confirm(Hatena.Locale.text('admin.import.undo.confirm'));
        });
    };
    Hatena.Diary.Pages.Admin['user-blog-import-movable_type'].setupMovableTypeProgress = function() {
        var $progress = $('.js-movable-type-import-progress');
        if (!$progress[0]) return;

        var $bar = $progress.find('.js-movable-type-import-bar');

        var api_url = $progress.attr('data-api-url');
        var on_complete_url = $progress.attr('data-on-complete-url');

        Hatena.Diary.Pages.Admin['user-blog-import'].setupProgress($bar, api_url, on_complete_url);
    };

})(jQuery);
(function($){

    Hatena.Diary.Pages.Admin['user-blog-import'] = function () {
        Hatena.Diary.Pages.Admin['user-blog-import'].setupDiaryProgress();
    };

    Hatena.Diary.Pages.Admin['user-blog-import'].setupDiaryProgress = function () {
        var $progress = $('#import-progress');
        if (!$progress[0]) return;

        var $bar = $progress.find('.bar');
        if (!$bar[0]) return;

        var api_url = $progress.attr('data-progress-api');
        var on_success_url = $progress.attr('data-diary-page');

        Hatena.Diary.Pages.Admin['user-blog-import'].setupProgress($bar, api_url, on_success_url);
    };

    // å®šæœŸçš„ã«APIå–å¾—ã—ã¦ãƒãƒ¼ã‚’ä¼¸ã°ã—ã¦å®Œäº†ã—ãŸã‚‰ãƒšãƒ¼ã‚¸é·ç§»
    // $bar: ã®ã³ã‚‹element width: 30% ã¨ã‹ã«ãªã‚‹
    // api_url: å®šæœŸçš„ã«ã‚¢ã‚¯ã‚»ã‚¹ã•ã‚Œã‚‹URL
    // on_success_url: å®Œäº†ã—ãŸã¨ãã«é£›ã¶URL
    // APIã‹ã‚‰è¿”ã‚‹æ§‹é€ 
    // {
    //  status: staarted|new|complete|failed
    //  progress: 0~100
    // }
    Hatena.Diary.Pages.Admin['user-blog-import'].setupProgress = function ($bar, api_url, on_success_url) {
        var progressCheck = function () {
            setTimeout(function () {
                $.ajax({
                    url : api_url,
                    type : 'GET',
                    cache: false,
                    dataType : 'json',
                    success : function (res) {
                        if (res.progress) {
                            $bar.css('width', res.progress + '%');
                        }

                        if (res.status == 'started' || res.status == 'new') {
                            progressCheck();
                        } else if (res.status == 'complete' || res.status == 'failed') {
                            setTimeout(function() {
                                location.href = on_success_url;
                            }, 1500);
                        }
                    },
                    error : function () {
                    }
                });
            }, 1000);
        };
        progressCheck();
    };

})(jQuery);
(function($){
    var Export = function(downloadURL, reserveURL) {
        this.downloadURL = downloadURL;
        this.reserveURL = reserveURL;
    };

    Export.prototype = {
        // ç¾åœ¨ã®ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆçŠ¶æ…‹ã‚’åŒæœŸçš„ã«è¿”ã™
        // çŠ¶æ…‹ã¯ï¼Œnot-created, running, completed ã®3ã¤ã§ã‚ã‚‹
        getStatus: function() {
            return this.status;
        },
        // æ—¥ä»˜ã®æ–‡å­—åˆ—ã‚’è¿”ã™
        // HTTPãƒ˜ãƒƒãƒ€ã®å€¤ã‹ã‚‰YYYY/MM/DDå½¢å¼ã®æ–‡å­—åˆ—ã‚’ä½œã‚ã†ã¨ã™ã‚‹ãŒï¼Œå¤±æ•—ã—ãŸã‚‰ï¼ŒHTTPãƒ˜ãƒƒãƒ€ã®å€¤ãã®ã‚‚ã®ã‚’è¿”ã™
        getDate: function() {
            var date = this.date;

            if (!date) return null;

            var parsedDate;
            try {
                parsedDate = new Date(Date.parse(date));
                return [parsedDate.getFullYear(), parsedDate.getMonth()+1, parsedDate.getDate()].join("/");
            } catch(ignore) {
            }
            return date;
        },
        // çŠ¶æ…‹ã‚’ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰å–å¾—ã—ã¦æ›´æ–°ã™ã‚‹
        // /downloadã¯ï¼Œä»¥ä¸‹ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’è¿”ã™ã®ã§ï¼Œãã‚Œã‚’è¦‹ã¦åˆ¤æ–­ã™ã‚‹
        // - 200: ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆå®Œäº†ã—ã¦ã„ã‚‹ã¨ã
        // - 404: ä¸€åº¦ã‚‚ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ã¦ã„ãªã„ã‹ï¼Œã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆå¤±æ•—ã—ãŸã¨ã
        // - 503: ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆä¸­ã®ã¨ã
        fetchStatus: function() {
            var self = this;
            $.ajax({
                url: self.downloadURL,
                method: 'HEAD',
                cache: false
            }).done(function(_ignore, __ignore, res) {
                self.date = res.getResponseHeader('Date');
                self.status = 'completed';
                self._updated();
            }).fail(function(res) {
                self.date = null;
                if (res.status === 503) {
                    self.status = 'running';
                    setTimeout(function() {
                        self.fetchStatus();
                    }, 1000);
                } else {
                    self.status = 'not-created';
                }
                self._updated();
            });
        },
        // ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã‚’äºˆç´„ã™ã‚‹
        reserveExport: function() {
            var self = this;
            $.ajax({
                url: self.reserveURL,
                method: 'POST',
                data: {
                    rkm: Hatena.Diary.data('rkm'),
                    rkc: Hatena.Diary.data('rkc')
                }
            }).always(function() {
                self.fetchStatus();
            });
            self.status = 'running';
            self._updated();
        },
        _updated: function(data) {
            $(this).triggerHandler('updated');
        }
    };

    Hatena.Diary.Pages.Admin['user-blog-export-movable_type'] = function () {
        var $container = $('.js-export-wrapper');
        var $panels = $container.find('.js-export-control-panel');
        var $reserveCompletedAt = $container.find('.js-reserve-completed-at');
        var $reserveButton = $container.find('.js-reserve-export-button');
        var $successMessage = $('.js-export-success-message');

        var statusToSelector = {
            'not-created': '.js-reserve-export-wrapper',
            'running': '.js-exporting-wrapper',
            'completed': '.js-export-completed-wrapper'
        };

        var exportModel = new Export(
            $container.attr('data-download-url'),
            $container.attr('data-reserve-url')
        );

        $reserveButton.on('click', function() {
            exportModel.reserveExport();
        });

        $(exportModel).on('updated', function() {
            var status = exportModel.getStatus();
            $panels.hide();
            $container.find(statusToSelector[status]).show();
            $reserveCompletedAt.text(exportModel.getDate());
            if (status === 'completed') {
                $successMessage.show();
            } else {
                $successMessage.hide();
            }
        });

        exportModel.fetchStatus();
    };
})(jQuery);

(function($){

    Hatena.Diary.Pages.Admin['user-blog-subscribe-done'] = function () {
        Hatena.Diary.Pages.createForParent();
        Hatena.Diary.Util.sendResizeRequest();
        Hatena.Diary.Pages.send('done');
    };

})(jQuery);

(function($){

    Hatena.Diary.Pages.Admin['user-blog-subscribe'] = function () {
        $('#subscribe-form').submit(function () {
            Hatena.Diary.Util.preventDuplicateSubmit($(this));
        });
        Hatena.Diary.Pages.createForParent();
        Hatena.Diary.Util.sendResizeRequest();

        $('section input[type=checkbox]').focus();
    };

})(jQuery);

(function($, Hatena){
    'use strict';

    /**
     * iframeç‰ˆè³¼èª­ãƒœã‚¿ãƒ³
     * iframeã®ä¸­èº«ã¯SubscribeButtonAdminãŒã‚ã‚‹ã ã‘
     */
    Hatena.Diary.Pages.Admin['user-blog-subscribe-iframe'] = function () {
        var $el = $('.js-hatena-follow-button-box');

        var userData = {
            isSubscribing : $el.data('is-subscribing'),
            isGuest       : Hatena.Diary.data('rkm') && Hatena.Diary.data('rkc') ? false : true
        };
        var blogData = {
            subscribersCount: parseInt($el.data('subscribers-count'), 10)
        };

        var view = new Hatena.Diary.SubscribeButtonAdmin($el, userData, blogData);
    };

})(jQuery, Hatena);

(function($){
    Hatena.Diary.Pages.Admin['user-blog-members'] = function () {
        $('.js-manage-members-table').on('click', '.js-edit-role', function() {
            var $row = $(this).parents('.js-member-row');
            $row.find('.js-form-member-update').show();
            $row.find('.js-member-role').hide();
        }).on('click', '.js-edit-cancel', function() {
            var $row = $(this).parents('.js-member-row');
            $row.find('.js-member-role').show();
            $row.find('.js-form-member-update').hide();
        });
    };
})(jQuery);

(function($){

    Hatena.Diary.Pages.Blogs['*'] = function () {
        // iframeã‹ã‚‰ã¯ã‚¢ã‚¯ã‚»ã‚¹ãƒ­ã‚°ã®apiã‚’å©ã‹ãªã„
        if (window.parent === window) {
            Hatena.Diary.AccessLog.ping();
        }

        Hatena.Diary.Pages.infoLoaded.done(function(info) {
            Hatena.Diary.Pages.Blogs['*'].init(info);
        });

        Hatena.Diary.Util.updateDynamicPieces([document]);

        $(document).on('click', 'img.hatena-fotolife, img.magnifiable, img.http-image', function () {
            var img = this;
            var $img = $(img);

            if ($img.data('colorbox')) {
                // colorbox is already set up
                return;
            }

            // aè¦ç´ ã«å«ã¾ã‚Œï¼Œãƒªãƒ³ã‚¯å…ˆãŒç”»åƒã®srcã¨ç•°ãªã‚‹ã¨ãã¯æ‹¡å¤§ã—ãªã„
            var closest_a = $img.closest('a').get(0);
            if (closest_a && closest_a.href !== img.src) {
                return;
            }

            $img.colorbox({
                maxWidth    : '95%',
                maxHeight   : '95%',
                transition : 'none',
                photo: true,
                href : $img.attr('src'),
                title : ' ',
                open : true
            });

            $('#cboxContent').click(function () {
                $.colorbox.close();
            });

            return false;
        });

        Hatena.Diary.Pages.Blogs['*'].setupRecentCommentsModule();

        Hatena.Diary.Pages.Blogs['*'].setupArchiveModule();

        Hatena.Diary.Pages.Blogs['*'].setupEntriesAccessRankingModule();

        Hatena.Diary.Pages.Blogs['*'].setupCirclesModule();

        Hatena.Diary.Pages.Blogs['*'].prepareForGlobalHeader();

        Hatena.Diary.Pages.Blogs['*'].setupOndemandCommentDeleteButton();

        Hatena.Diary.Pages.Blogs['*'].highlightKeyword();


        // archiveã¨ã¯ã¦ãªãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ã‚³ãƒ¡ãƒ³ãƒˆã§ã¯ã‚¹ã‚¿ãƒ¼ã¯å°ã•ã„ã‚„ã¤ã‚’ä½¿ã†
        if (! _.contains(['archive', 'hatena-bookmark-comment'], Hatena.Diary.data('page'))) {
            Hatena.Diary.Star.initBigStar();
            Hatena.Diary.Star.initSelectStar();
            Hatena.Diary.Star.initStarNavigation();
            Hatena.Diary.Star.initDeleteStar();
        }

        Hatena.Epic.Component.setupTouchViewSuggest();

        Hatena.Diary.Pages.Blogs['*'].setupTumblrShareButtons();

        Hatena.Diary.Pages.Blogs['*'].setupFastClick();
    };

    Hatena.Diary.Pages.Blogs['*'].setupRecentCommentsModule = function () {
        var $recentComments = $('.hatena-module-recent-comments');
        if ( $recentComments.length === 0 ) return;
        var template = _.template($('.recent-comments-template').html());

        var max_count = 0;
        // ã‚³ãƒ¡ãƒ³ãƒˆãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒè¤‡æ•°ã‚ã‚‹å ´åˆãŒã‚ã‚‹ã®ã§ã€æœ€å¤§ã®æ•°ã®ã‚³ãƒ¡ãƒ³ãƒˆã‚’å–å¾—ã™ã‚‹
        $recentComments.each ( function () {
            var $moduleBody = $(this).find('.hatena-module-body');
            var count = $moduleBody.attr('data-count');
            max_count = _.max([max_count, count]);
        });
        if ( max_count === 0 ) return;

        $.ajax({
            url: Hatena.Diary.URLGenerator.user_blog_url('/api/recent_comments'),
            dataType: 'json',
            data : {
                count: max_count
            }
        }).done( function (comments) {
            $recentComments.each( function () {
                var $container = $(this);
                var $moduleBody = $container.find('.hatena-module-body');
                var count = $moduleBody.attr('data-count');
                var comment_source = '';
                for ( var i = 0; i < count; i++ ) {
                    if ( ! comments[i] ) break;
                    comment_source += template({
                        comment: comments[i]
                    });
                }
                $container.find('.recent-comments').html(comment_source);
                Hatena.Diary.Util.updateDynamicPieces($container);
            });

            Hatena.Diary.SpeedTrack.record("Pages.Blogs['*'].setupRecentCommentsModule");
        });
    };

    Hatena.Diary.Pages.Blogs['*'].setupArchiveModule = function () {
        var $archives = $('.hatena-module-archive');
        if ( $archives.length === 0 ) return;

        var detectDate = function () {
            // archiveã®ã¨ã, ä¸€ç•ªä¸Šã®æ—¥ä»˜ã‹ã‚‰å¹´ã‚’èª­ã‚€
            if (Hatena.Diary.data('page') === 'archive') {
                var $entry = $('section.archive-entry:first');
                if ($entry.length > 0) {
                    var year_month_day = $entry.find('div.date > a > time').attr('datetime');
                    var year_str = year_month_day.split('-')[0];
                    var month_str = year_month_day.split('-')[1];

                    return { year: year_str, month: month_str };
                }

                return null;
            }

            // ãƒšãƒ¼ã‚¸ã«ã‚¨ãƒ³ãƒˆãƒªãŒã‚ã‚‹ã¨ã, ä¸€ç•ªä¸Šã®ã‚¨ãƒ³ãƒˆãƒªã®æ—¥ä»˜ã‹ã‚‰å¹´ã‚’èª­ã‚€
            var $article = $('article.entry:first');
            if ($article.length > 0) {
                var date_year_str = $article.find('header time > span.date-year').text();
                var date_month_str = $article.find('header time > span.date-month').text();
                return { year: date_year_str, month: date_month_str };
            }

            return null;
        };

        // default
        var setupDefault = function ($archive) {
            var $open_year;
            var date = detectDate();
            if (date) {
                var year = date['year'];
                if (year) {
                    var $year = $archive.find('li.archive-module-year[data-year="' + year + '"]');

                    $open_year = $year.length > 0 ? $year : null;
                }
            }

            $open_year = $open_year || $('li.archive-module-year:first');
            $open_year.removeClass('archive-module-year-hidden');

            $archive.find('.archive-module-button').click(function (e) {
                e.preventDefault();

                var $year = $(this).parent('.archive-module-year');
                $year.toggleClass('archive-module-year-hidden');
            });
        };

        // calendarãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
        var setupCalendar = function ($archive) {
            var $selector = $archive.find('.js-archive-module-calendar-selector');

            var updateCalendar = function () {
                var $date = $selector.find('option:selected');
                var year = $date.data('year');
                var month = $date.data('month');
                $.ajax({
                    type: 'get',
                    url: Hatena.Diary.URLGenerator.user_blog_url('/archive_module_calendar'),
                    data: { month : month, year: year }
                }).done(function(res) { // days object
                    $archive.find('.js-archive-module-calendar-container').html(res);
                });
            };

            $selector.change(function () {
                updateCalendar();
            });

            // è¡¨ç¤ºãƒšãƒ¼ã‚¸ã«åˆã‚ã›ã¦ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚’åˆæœŸåŒ–
            var date = detectDate();
            if (date) {
                $selector.val(date['year'] + ' ' + date['month']);
            }
            updateCalendar();
        };

        // Archiveã®type( default, calendar )ã«ã‚ˆã£ã¦å‡ºã—åˆ†ã‘
        _.each($archives, function (archive) {
            var $archive = $(archive);
            var archiveType = $archive.data('archiveType');
            $.ajax({
                type: 'get',
                url: Hatena.Diary.URLGenerator.user_blog_url('/archive_module'),
                data: { archive_type: archiveType },
                dataType: 'html'
            }).done(function(res) {
                $archive.find('.hatena-module-body').append(res);

                Hatena.Diary.SpeedTrack.record("Pages.Blogs['*'].setupArchiveModule");

                if (archiveType == 'calendar') {
                    setupCalendar($archive);
                } else {
                    setupDefault($archive);
                }
            });
        });

    };

    // è¨˜äº‹æ¤œç´¢ã§æ¤œç´¢çµæœã®ã‚¿ã‚¤ãƒˆãƒ«ãƒ»æœ¬æ–‡ã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’ãƒã‚¤ãƒ©ã‚¤ãƒˆã™ã‚‹
    Hatena.Diary.Pages.Blogs['*'].highlightKeyword = function () {

        if (!!Hatena.Diary.Location.params() && Hatena.Diary.Location.params()['q']){
            var keywords= $('.search-result').data("searchQueries");
            if (!keywords) return;

            $(".entry-title").highlight(keywords, { caseSensitive:false });
            $(".entry-description").highlight(keywords, { caseSensitive:false });
        }

    };

    Hatena.Diary.Pages.Blogs['*'].setupEntriesAccessRankingModule = function () {
        var $entriesAccessRanking = $('.hatena-module-entries-access-ranking');
        if ($entriesAccessRanking.length === 0) return;

        $entriesAccessRanking.each(function () {
            var $self = $(this);
            var queryParams = {};
            // `data-`ã®prefixãŒã¤ã„ãŸå±æ€§ã‚’ã™ã¹ã¦å–å¾—ã—ï¼Œã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã«ã™ã‚‹
            _.each( ($self)[0].attributes, function (attr) {
                if ( ! attr.name.match(/^data-/) ) return;
                // `data-`ã®prefixã¯ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®keyã«ã¯ä¸è¦ãªã®ã§å–ã‚Šé™¤ã
                queryParams[ attr.name.replace(/^data\-/, '') ] = attr.value;
            } );

            $.ajax({
                type: 'GET',
                url: Hatena.Diary.URLGenerator.user_blog_url('/entries_access_ranking_module'),
                data: queryParams,
                dataType: 'html'
            }).done(function(res) {
                $self.find('.hatena-module-body').append(res);
            });
        });
    };

    Hatena.Diary.Pages.Blogs['*'].setupCirclesModule = function () {
        var $circles = $('.hatena-module-circles');
        if ($circles.length === 0) return;

        // æ›´æ–°ãŒã‚ã£ãŸã‚°ãƒ«ãƒ¼ãƒ—ã¯JSã§è¡¨ç¤ºã‚’å¤‰æ›´ã™ã‚‹
        var mtime = 0, circleIds = [], elems = {};
        $circles.find('[data-circle-id][data-circle-mtime]').each(function () {
            var $elem = $(this);
            var circleId = $elem.attr('data-circle-id');
            circleIds.push(circleId);
            elems[circleId] = $elem;
            var m = Number($elem.attr('data-circle-mtime'));
            if (m > mtime) mtime = m;
        });

        $.ajax({
            type: 'GET',
            url: Hatena.Diary.URLGenerator.user_blog_url('/api/module/circles'),
            data: { mtime: mtime, circle_id: circleIds },
            traditional: true,
            dataType: 'json'
        }).done(function (data) {
            for (var circleId in data.circles) {
                elems[circleId].replaceWith($.parseHTML(data.circles[circleId].html || ' '));
            }



            Hatena.Diary.SpeedTrack.record("Pages.Blogs['*'].setupCirclesModule");
        });
    };

    function navigateToEditNewEntry () {
        Hatena.Diary.Pages.infoLoaded.done(function (info) {
            if (info.can_open_editor) {
                Hatena.Diary.Pages.Blogs['*'].newEntry();
            } else {
                location.href = Hatena.Diary.data('admin-domain') + '/my/?fragment=edit';
            }
        });
    }

    Hatena.Diary.Pages.Blogs['*'].toggleMyMenuDropdown = function(data) {
        Hatena.Diary.Dropdown.toggle(
            '/-/menu/mymenu?location=' + encodeURIComponent(location.href),
            data, 'mymenu', {
                callback: function (dropdown, messenger) {
                    var blog_to_$dropdown_container = {};

                    messenger.addEventListener('feedback', function (data) {
                        Hatena.Diary.Feedback.toggle(data.uri);
                    });

                    messenger.addEventListener('myblogmenu.init', function (data) {
                        var init = {
                            top: $(dropdown).offset().top + data.top,
                            right: $(dropdown).offset().left - 2,
                            height: 266
                        };
                        Hatena.Diary.Dropdown.toggle(
                            '/-/menu/myblogmenu?blog=' + encodeURIComponent(data.blogUri),
                            init,
                            null, {
                                callback: function (dropdown, messenger) {
                                    blog_to_$dropdown_container[data.blogUri] = $(dropdown).parent();

                                    // XXX: callbackãŒå‘¼ã°ã‚Œã‚‹ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã¯showã•ã‚Œã‚‹å‰ãªã®ã§ãã‚Œã‚’å¾…ã£ã¦ã‹ã‚‰éš ã™
                                    _.delay(function () {
                                        $(dropdown).parent().hide();
                                    });
                                },
                                key: data.blogUri,
                                parent: 'mymenu',
                                className: 'hatena-diary-dropdown-myblogs'
                            }
                        );
                    });

                    messenger.addEventListener('myblogmenu.open', function (data) {
                        var $dropdown_container = blog_to_$dropdown_container[data.blogUri];
                        $dropdown_container.show();

                        var self = Hatena.Diary.Pages.Blogs['*'].toggleMyMenuDropdown;
                        self.$active_dropdown_container = $dropdown_container;
                    });

                    messenger.addEventListener('myblogmenu.close', function (data) {
                        var $dropdown_container = blog_to_$dropdown_container[data.blogUri];
                        $dropdown_container.hide();

                        var self = Hatena.Diary.Pages.Blogs['*'].toggleMyMenuDropdown;
                        self.$active_dropdown_container = null;
                    });

                    messenger.addEventListener('new-entry', function (data) {
                        navigateToEditNewEntry();
                    });
                }
            }
        );

        var $active_dropdown_container = Hatena.Diary.Pages.Blogs['*'].toggleMyMenuDropdown.$active_dropdown_container;

        // ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’å†åº¦é–‹ãã¨ã, ã‚µãƒ–ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é–‹ã„ã¦ã„ã‚‹çŠ¶æ…‹ã‚’å¾©å…ƒã™ã‚‹
        if ($active_dropdown_container && $active_dropdown_container.is(':hidden')) {
            $active_dropdown_container.fadeIn('fast');
        }
    };

    Hatena.Diary.Pages.Blogs['*'].prepareForGlobalHeader = function() {
        if (window != window.parent) return null;
        if (!Hatena.Diary.Pages.messenger) return null;

        var self = this;

        Hatena.Diary.Pages.message('new-entry', function (data) {
            navigateToEditNewEntry();
        });

        Hatena.Diary.Pages.message('units', function (data) {
            Hatena.Diary.Dropdown.toggle(data.uri, data);
        });

        Hatena.Diary.Pages.message('feedback', function (data) {
            Hatena.Diary.Feedback.toggle(data.uri);
        });

        Hatena.Diary.Pages.message('mymenu', function (data) {
           Hatena.Diary.Pages.Blogs['*'].toggleMyMenuDropdown(data);
        });

        Hatena.Diary.Pages.message('servicesmenu', function (data) {
            Hatena.Diary.Dropdown.toggle('/-/menu/services', data);
        });

        Hatena.Diary.Pages.message('unread', function (data) {
            location.href = Hatena.Diary.data('admin-domain') + '/-/antenna';
        });

        var notifyWindow;
        Hatena.Diary.Pages.message('notify', function (data) {
            var BASE = data.BASE;

            if (notifyWindow) {
                if (notifyWindow.is(':visible')) {
                    Hatena.Diary.Window.hide(notifyWindow, function () {
                        notifyWindow.remove();
                        notifyWindow = null;
                    });
                    return;
                } else {
                    notifyWindow.remove();
                    notifyWindow = null;
                }
            }

            notifyWindow = $('<div id="notify-window" class="hatena-globalheader-window"></div>').
                css({
                    left : data.left - 250 + 32
                });

            notifyWindow.html("<img src='https://b.st-hatena.com/images/loading32.gif' class='loading' style='position:absolute;'/>");

            var iframe = $('<iframe style="border:none" frameBorder="0" class="notify" width="250" height="300"></iframe>').appendTo(notifyWindow);

            iframe.attr('src', 'https://www' + BASE + '/notify/notices.iframe?' + new Date().getTime());

            iframe.ready(function () {
                notifyWindow.find('img').remove();
            });

            notifyWindow.
                //            css({
                //                top: $(document.body).scrollTop() + 37
                //            }).
                hide().
                fadeIn('fast').
                appendTo(document.body);

            Hatena.Diary.Window.show(notifyWindow, {
                fixScroll: true
            });
        });

        Hatena.Diary.Pages.message('blogmenu', function (data) {
            var params = {};
            if (Hatena.Diary.data('blog')) {
                params['blog'] = location.href;
                if (
                    Hatena.Diary.data('page') === 'entry' &&
                    // å‰Šé™¤ã•ã‚Œã¦ã‚¨ãƒ³ãƒˆãƒªãŒãªã„ or Not Found çŠ¶æ…‹ ã§ã‚ã‚Œã°å¯¾è±¡ã®ã‚¨ãƒ³ãƒˆãƒªãŒãªããªã‚‹ã®ã§
                    // ãƒ‘ãƒ¼ãƒãƒªãƒ³ã‚¯ãƒ•ãƒ©ã‚°ã‚’ãŸã¦ãªã„
                    $('article.entry:not([class~="no-entry"])').length > 0
                ) {
                    params['blog_permalink'] = 1;
                }
            }
            var uri = '/-/menu/blogmenu?' + $.param(params);
            Hatena.Diary.Dropdown.toggle(uri, data, 'blogmenu', {
                callback: function (dropdown, messenger) {
                    messenger.addEventListener('edit-this-entry', function (data) {
                        var $entry = $('article.entry').first();
                        Hatena.Diary.Pages.Blogs['*'].editEntry( $entry );
                    });
                    messenger.addEventListener('new-entry', function (data) {
                        navigateToEditNewEntry();
                    });
                    // ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®è¬›èª­ãƒœã‚¿ãƒ³ãŒæŠ¼ã•ã‚ŒãŸã‚‰blogså´ã§çª“ã‚’é–‹ã
                    messenger.addEventListener('subscribe', function (data) {
                        var offset = { left: data.left + 5 };
                        self.subscribeButtonForMessage.openSubscribeWindow(offset, true);
                    });
                }
            });
        });

        Hatena.Diary.Pages.message('locale', function (data) {
            var uri = Hatena.Diary.data('admin-domain') + '/-/locale';

            Hatena.Diary.Dropdown.toggle(uri, data, 'locale');
        });
    };

    Hatena.Diary.Pages.Blogs['*'].init = function (info) {
        if (arguments.callee.called) return; arguments.callee.called = true;

        // globalhaederãŒã‚­ãƒ£ãƒƒã‚·ãƒ¥ã•ã‚Œã¦ã„ã‚‹ã®ã§ã“ã¡ã‚‰ã‹ã‚‰viaã‚’é€ã£ã¦ã‚„ã‚‹
        var via = Hatena.Diary.Location.param('via');
        if (via) {
            Hatena.Diary.Pages.send('inheritVia', via);
        }

        if (info.message) {
            Hatena.Diary.Util.showFlashMessage(info.message);
        }

        if (info.show_modal) {
            var $modalContainer = $('<div class="hatena-iframe-container"></div>').appendTo(document.body);
            var $iframe = $('<iframe frameborder="0"></iframe>').appendTo($modalContainer);

            var messenger = Messenger.createForFrame($iframe[0], info.show_modal.url);

            messenger.addEventListener('resize', function (data) {
                if (data) {
                    $modalContainer.css(data);
                    $(window).trigger('resize'); // reset position
                }
            });

            var destroyed = $.Deferred();

            // hide æ™‚ã¯ãŸã éš ã™ã ã‘ã€close ãŒå‘¼ã°ã‚Œã¦ã¯ã˜ã‚ã¦
            // iframe ã‚’æ¶ˆã™
            messenger.addEventListener('hide', function () {
                Hatena.Diary.Window.hide($modalContainer);
            });

            messenger.addEventListener('close', function () {
                destroyed.done(function () {
                    $iframe.remove();
                    messenger.destroy();
                });
                Hatena.Diary.Window.hide($modalContainer);
            });

            Hatena.Diary.Window.show($modalContainer, {
                destroy: function () {
                    destroyed.resolve();
                },
                fixScroll: true,
                center: true,
                showBackground: true
            });
        }

        var self = this;

        Hatena.Diary.Browser.thirdPartyCookiesBlocked.resolve(!info.cookie_received);

        $('article.entry').each(function () {
            var $this = $(this);
            self.initEntry($this);
        });

        if (info.editable) {
            var $entry,
                timer,
                $menu = $('<div>').addClass('entry-header-menu'),
                create_edit_button = function ($entry) {
                    // ã‚¨ãƒ³ãƒˆãƒªã«ã‚«ãƒ¼ã‚½ãƒ«åˆã‚ã›ã‚‹ã¨å‡ºã¦ãã‚‹ã€Œç·¨é›†ã€ãƒœã‚¿ãƒ³ã‚’ä½œã‚‹
                    return $('<a>')
                             .attr( 'href', 'javascript:void' )
                             .text( Hatena.Locale.text('edit') )
                             .on('click', function (e) {
                                 e.preventDefault();
                                 Hatena.Diary.Pages.Blogs['*'].editEntry( $entry );
                             });
                };

            $(document).on('mouseenter', 'article.entry', function () {
                var $hovered = $(this);
                if ( $hovered.is($entry) ) {
                    clearTimeout(timer);
                    return;
                }

                $entry = $hovered;
                if ( !$entry.attr('data-uuid') ) return;

                $menu
                  .empty()
                  .append( create_edit_button($entry) )
                  .appendTo( $entry.find('.entry-header') )
                  .show();
            });

            $(document).on('mouseleave', 'article.entry', function () {
                clearTimeout(timer);
                timer = setTimeout(function () {
                    $entry = null;
                    $menu.fadeOut('fast');
                }, 2000);
            });

            // æ–°è¦é–‹è¨­æ™‚
            if ( info.has_just_registered ) {
                _gaq.push(['_trackPageview', '/register.done']);
            }

            // ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãƒšãƒ¼ã‚¸ã§ï¼Œãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã§ã¯ãªãã¦ï¼Œã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ˜ãƒƒãƒ€è¡¨ç¤ºä¸­ã®ã¨ã
            if (Hatena.Diary.data('page') === 'index' && ! Hatena.Diary.Location.param('preview') && $('#globalheader').is(':visible')) {
                Hatena.Diary.Pages.Blogs['*'].setupFirstEntry();
            }

            Hatena.Diary.setupProModal();

        }

        Hatena.Diary.Pages.Blogs['*'].renderGooglePlusOneButtons();
        // ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ã‚³ãƒ¡ãƒ³ãƒˆã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆ
        Hatena.Diary.Pages.Blogs['*'].setupHatenaBookmarkComment($('#container'));

        // ã‚¨ãƒ³ãƒˆãƒªãƒ¼ä¸€è¦§ã®ã‚«ãƒ«ãƒ¼ã‚»ãƒ«
        Hatena.Diary.Pages.Blogs['*'].setupEntryModuleCarousel();

        // è³¼èª­ãƒœã‚¿ãƒ³ã¨è³¼èª­è€…æ•°
        if (window === window.parent) {
            this.initSubscribe(info.subscribe, info.subscribes);
        }

        Hatena.Diary.Browser.thirdPartyCookiesBlocked.done(function(blocked) {
            if (blocked) {
                Hatena.Diary.Star.initStarForThirdPartyCookiesDisabled(info);
            }
        });

        Hatena.Diary.SpeedTrack.record("Pages.Blogs['*'].init");
    };

    Hatena.Diary.Pages.Blogs['*'].setupFirstEntry = function() {
        $('.entry-content').show();

        // 1è¨˜äº‹ã‚‚ãªã„ã¨ãï¼Œè¨˜äº‹ã‚’æ›¸ã“ã†ã¿ãŸã„ãªãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—ãªã©ã‚’è¡¨ç¤ºã™ã‚‹

        var $tooltip = $('.welcome-tooltip-newentry');
        $tooltip.click(function() {
            Hatena.Diary.Pages.Blogs['*'].newEntry();
        });
        Hatena.Diary.Pages.send('newEntryGeometry');
        Hatena.Diary.Pages.message('newEntryGeometry', function(geometry) {
            $tooltip.offset({
                left : (geometry.left + (geometry.width / 2)) - ($tooltip.outerWidth() / 2)
            });
            $tooltip.show();
        });
    };

    Hatena.Diary.Pages.Blogs['*'].newEntry = function (opts) {
        if (!opts) opts = {};

        Hatena.Diary.Editor.showEditInPlace(null, {
            update : function (data) {
                // data.entryã¯å‰å¾Œã«ç©ºç™½ã‚’å«ã‚€ã®ã§æ¶ˆã™
                var $newEntry = $(data.entry.replace(/^\s+/, '').replace(/\s+$/, ''));

                // ä¸‹æ›¸ãæŠ•ç¨¿ã®ã¨ãã¯ä½•ã‚‚ã—ãªã„
                if (!$newEntry.length) return;

                $newEntry.insertBefore('#main article.entry:first');
                Hatena.Diary.Pages.Blogs['*'].initEntry($newEntry);
                Hatena.Diary.Util.updateDynamicPieces($newEntry.parent());
                $('[data-remove-on-new-entry=1]').remove();
            }
        });
    };

    Hatena.Diary.Pages.Blogs['*'].editEntry = function ($entry) {
        if (!$entry) return;

        Hatena.Diary.Editor.showEditInPlace($entry, {
            update : function (data) {
                // data.entryã¯å‰å¾Œã«ç©ºç™½ã‚’å«ã‚€ã®ã§æ¶ˆã™
                var $newEntry = $(data.entry.replace(/^\s+/, '').replace(/\s+$/, ''));

                // è¨˜äº‹ã‚’å‰Šé™¤ã—ãŸå ´åˆã¯, å‰Šé™¤ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã‚’æ¶ˆã™
                if (!$newEntry.length) {
                    $entry.remove();
                    return;
                }
                $entry.replaceWith($newEntry);
                Hatena.Diary.Pages.Blogs['*'].initEntry($newEntry);
                Hatena.Diary.Util.updateDynamicPieces($newEntry.parent());
            }
        });
    };

    Hatena.Diary.Pages.Blogs['*'].initEntry = function (entry) {
        var self = this;
        var uuid = entry.attr('data-uuid');

        Hatena.Diary.Util.replaceYoutubeURL(entry);

        var container = entry.find('.comment-box .comment');
        $(container).delegate('.comment-delete-button', 'click', function (e) {
            var $button = $(this);

            Hatena.Diary.Pages.Blogs['*'].deleteCommentHandler(entry, $button);

            return false;
        });

        var showEntryInfo = function (entry, container, maxCommentsCount) {
            return self.loadEntryInfo(entry).done(function (info) {

                if (info.comments) {

                    var $readMoreLine = entry.find('.read-more-comments');
                    var $readMoreButton = $readMoreLine.find('a');
                    // readMoreButtonãŒç„¡ã„ã‹ã€maxCommentsCountãŒ0ã¾ãŸã¯ã‚³ãƒ¡ãƒ³ãƒˆã®ç·æ•°ãŒmaxCommentsCountã‚ˆã‚Šå°‘ãªã„ã¨ãã€å…¨ä»¶è¡¨ç¤º
                    var commentsCount = info.comments.entries.length;
                    var expandedInThisSession = false;
                    try {
                        var entriesExpandedComments = JSON.parse(sessionStorage.getItem('entriesExpandedComments')) || {};
                        expandedInThisSession = entriesExpandedComments[entry.attr('data-uuid')];
                    } catch (_ignored) {
                    }
                    if ($readMoreLine.length === 0 || maxCommentsCount === 0 || commentsCount <= maxCommentsCount || expandedInThisSession) {
                        maxCommentsCount = commentsCount;

                        // ã™ã¹ã¦ã®ã‚³ãƒ¡ãƒ³ãƒˆãŒè¡¨ç¤ºã•ã‚Œã‚‹
                        // ã™ã§ã«è¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã‚³ãƒ¡ãƒ³ãƒˆãŒã‚ã£ãŸã‚‰æ¶ˆã™
                        // ã“ã®ã¨ãã€Œã‚‚ã£ã¨èª­ã‚€ã€ã‚‚æ¶ˆãˆã‚‹
                        container.children().remove();
                        entry.attr('data-comments-expanded', true);
                    } else {
                        // ã¾ã è¡¨ç¤ºã•ã‚Œã¦ã„ãªã„ã‚³ãƒ¡ãƒ³ãƒˆãŒã‚ã‚‹ã‹ã‚‰ã€Œã‚‚ã£ã¨èª­ã‚€ã€ã‚’è¡¨ç¤ºã™ã‚‹
                        $readMoreLine.show();
                    }

                    // ã‚³ãƒ¡ãƒ³ãƒˆã®HTMLã‚’é€£çµã—ã¦ä¸€æ‹¬ã§DOMã«ã™ã‚‹
                    var commentHTML = '';
                    for (var i = 0, len = maxCommentsCount; i < len; i++) {
                        commentHTML += info.comments.entries[i];
                    }
                    var $comments = $(commentHTML);

                    container.prepend($comments);

                    // æœªè¡¨ç¤ºã®ã‚³ãƒ¡ãƒ³ãƒˆã®æ•°ã‚’è¡¨ç¤ºã™ã‚‹
                    $readMoreButton.text(
                        Hatena.Locale.text('read_more_comments') + ' (' + (info.comments.entries.length - maxCommentsCount) + ')'
                    );

                    if (Hatena.Star) {
                        Hatena.Diary.Util.waitForResource(function() {
                            return Hatena.Star && Hatena.Star.WindowObserver.loaded;
                        }, function() {
                            Hatena.Star.EntryLoader.intoCommentScope(function () {
                                Hatena.Diary.Util.updateDynamicPieces(container);
                            });
                        });
                    } else {
                        Hatena.Diary.Util.updateDynamicPieces(container);
                    }
                }

                Hatena.Diary.SpeedTrack.record("Pages.Blogs['*'].init.showEntryInfo");
            }).
                fail( Hatena.Diary.REPORT_BUG('loadEntryInfo') );
        };

        var $readMoreLine = entry.find('.read-more-comments');
        var $readMoreButton = $readMoreLine.find('a');

        // ã‚³ãƒ¡ãƒ³ãƒˆæœ€åˆã¯3ä»¶ã¾ã§è¡¨ç¤º
        showEntryInfo(entry, container, 3);

        $readMoreButton.click(function (e) {
            // ã€Œã‚‚ã£ã¨èª­ã‚€ã€ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸã‚‰ã‚³ãƒ¡ãƒ³ãƒˆå…¨ä»¶è¡¨ç¤º
            showEntryInfo(entry, container, 0).done(function () {
                try {
                    // ã‚‚ã£ã¨èª­ã‚€ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸå ´åˆ sessionStorage ã«çŠ¶æ…‹ã‚’ä¿å­˜ã—ã¦ãŠã
                    var map = {};
                    $('article[data-comments-expanded][data-uuid]').each(function () {
                        map[$(this).attr('data-uuid')] = true;
                    });
                    sessionStorage.setItem('entriesExpandedComments', JSON.stringify(map));
                } catch (_ignored) {
                }
            });
            return false;
        });

        Hatena.Diary.Pages.infoLoaded.done(function (info) {
            entry.find('.leave-comment-title').toggle(
                info.cookie_received ? info.commentable : true
            ).on('click', function () {
                var $button = $(this);
                Hatena.Diary.Pages.Blogs['*'].leaveCommentHandler(entry, $button);

                return false;
            });
        });

    };

    Hatena.Diary.Pages.Blogs['*'].deleteCommentHandler = function ($entry, $button) {
        var commentId = $button.closest('li.entry-comment').attr('id');

        var uri = Hatena.Diary.data('admin-domain') +
            '/' + Hatena.Diary.data('author') + '/' + Hatena.Diary.data('blog') +
            '/comment/delete?comment=' + encodeURIComponent(commentId.slice(8));

        Hatena.Diary.Browser.thirdPartyCookiesBlocked.done(function(blocked) {
            if (blocked) {
                Hatena.Diary.Pages.Blogs['*'].deleteCommentHandlerWindow($entry, $button, commentId, uri);
            } else {
                Hatena.Diary.Pages.Blogs['*'].deleteCommentHandlerIframe($entry, $button, commentId, uri);
            }
        });
    };

    Hatena.Diary.Pages.Blogs['*'].deleteCommentHandlerIframe = function ($entry, $button, commentId, uri) {
        var iframeContainer = $(
            '<div class="hatena-iframe-container"><div class="loading">' +
                '<img src="' + Hatena.Diary.URLGenerator.static_url('/images/loading.gif') + '" alt="loading"/>' +
                Hatena.Locale.text('loading') +
                '</div></div>').appendTo($entry);
        var iframe = $('<iframe frameborder="0"></iframe>').appendTo(iframeContainer);
        iframeContainer.
            css({
                width: 440,
                height: 120,
                position: 'absolute'
            }).
            offset( $button.offset() );

        var loading = iframeContainer.find('.loading').hide();
        setTimeout( function () { loading.show() }, 250);
        iframe.load(function () { loading.remove() });

        var messenger = Messenger.createForFrame(iframe[0], uri);
        messenger.addEventListener('delete', function (data) {
            $("#" + commentId).fadeOut();
        });
        messenger.addEventListener('close', function () {
            Hatena.Diary.Window.hide(iframeContainer);
        });

        Hatena.Diary.Window.show(iframeContainer, {
            destroy : function () {
                iframe.remove();
                messenger.destroy();
            }
        });
    };

    Hatena.Diary.Pages.Blogs['*'].deleteCommentHandlerWindow = function ($entry, $button, commentId, uri) {
        var position = {
            width:  300,
            height: 150
        };
        position.left = Math.floor((screen.width - position.width) / 2);
        position.top = Math.floor((screen.height - position.height) / 2);

        var position_string = Hatena.Diary.Util.positionToPositionString(position);

        var delete_comment_window = window.open('', 'delete_comment', position_string);

        var messenger = Messenger.createForWindow(delete_comment_window, uri);

        var close = function() {
            messenger.destroy();
            delete_comment_window.close();
        };

        messenger.addEventListener('delete', function (data) {
            $("#" + commentId).fadeOut();
        });

        messenger.addEventListener('close', close);

        $(document.body).one('focus', close);

    };


    Hatena.Diary.Pages.Blogs['*'].leaveCommentHandler = function ($entry, $button) {
        // viewableçŠ¶æ…‹ã§ã‚³ãƒ¡ãƒ³ãƒˆå‡ºæ¥ã‚‹ã‹ã©ã†ã‹æ±ºã‚ã‚‹ãŸã‚
        // bkã‚’tokenã¨ã—ã¦æ¸¡ã™
        var uri = Hatena.Diary.data('admin-domain') +
            '/' + Hatena.Diary.data('author') + '/' + Hatena.Diary.data('blog') + '/comment?' +
            $.param({
                entry : $entry.attr('data-uuid'),
                token : $.cookie('bk')
            });

        Hatena.Diary.Browser.thirdPartyCookiesBlocked.done(function(blocked) {
            if (blocked) {
                Hatena.Diary.Pages.Blogs['*'].leaveCommentHandlerWindow($entry, $button, uri);
            } else {
                Hatena.Diary.Pages.Blogs['*'].leaveCommentHandlerIframe($entry, $button, uri);
            }
        });
    };

    Hatena.Diary.Pages.Blogs['*'].leaveCommentHandlerWindow = function($entry, $button, uri) {
        var position = {
            width:  400,
            height: 240
        };
        position.left = Math.floor((screen.width - position.width) / 2);
        position.top = Math.floor((screen.height - position.height) / 2);

        var position_string = Hatena.Diary.Util.positionToPositionString(position);

        var comment_window = window.open('', 'comment', position_string);

        var messenger = Messenger.createForWindow(comment_window, uri);

        messenger.addEventListener('close', function() {
            messenger.destroy();
            comment_window.close();
        });

        messenger.addEventListener('update', function (data) {
            Hatena.Diary.Pages.Blogs['*'].appendPostedComment($entry, data.comment);
        });
    };

    Hatena.Diary.Pages.Blogs['*'].leaveCommentHandlerIframe = function($entry, $button, uri) {
        var container = $(
            '<div class="hatena-iframe-container">' +
                '<div class="loading">' +
                '<img src="' + Hatena.Diary.URLGenerator.static_url('/images/loading.gif') + '" alt="loading"/>' +
                Hatena.Locale.text('loading') +
                '</div>' +
                '</div>').
            hide().
            appendTo(document.body);

        var iframe = $('<iframe frameborder="0"></iframe>').appendTo(container);

        var loading = container.find('.loading').hide();

        setTimeout(function () {
            loading.show();
        }, 250);

        iframe.load(function () {
            loading.remove();
        });

        var offset   = $button.offset();
        var maxWidth = $(window).width();
        var winWidth = 440;
        var padding  = 10;

        // ã‚³ãƒ¡ãƒ³ãƒˆframeå¹…ãŒmaxWindowã‚ˆã‚Šå¤§ãã„å ´åˆã¯, ç¸®ã‚ã¦ä¸­å¤®ã«è¡¨ç¤º
        if ( (winWidth + 2*padding) > maxWidth ) {
            winWidth = maxWidth - 2*padding;
            offset.left = padding;
        }

        var height = 235;

        // ä¸ŠãŒæ–°ã—ã„ã¨ãã‚³ãƒ¡ãƒ³ãƒˆæ›¸ããƒœã‚¿ãƒ³ã®ä¸Šã«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦å‡ºã™
        var top_is_new = Hatena.Diary.data('blog-comments-top-is-new');
        if (top_is_new) {
            offset.top -= height;
            offset.top += $button.height();
        }

        container.
            css({
                width: winWidth,
                height: height,
                position: 'absolute'
            }).
            offset(offset);

        editinplace = iframe[0];

        var messenger = Messenger.createForFrame(editinplace, uri);

        messenger.addEventListener('update', function (data) {
            Hatena.Diary.Pages.Blogs['*'].appendPostedComment($entry, data.comment);
        });

        messenger.addEventListener('close', function () {
            Hatena.Diary.Window.hide(container);
        });

        messenger.addEventListener('resize', function (data) {
            if (data) {
                if (top_is_new && data.height  != height) {
                    data.top = container.css('top') + height - data.height;
                }
                container.css(data);
            }
        });

        Hatena.Diary.Window.show(container, {
            closeExplicitly : true,
            destroy : function () {
                iframe.remove();
                messenger.destroy();
            }
        });
    };

    Hatena.Diary.Pages.Blogs['*'].appendPostedComment = function($entry, comment_html) {
        var $container = $entry.find('.comment-box .comment');
        var top_is_new = Hatena.Diary.data('blog-comments-top-is-new');
        if (top_is_new) {
            $container.prepend(comment_html);
        } else {
            $container.append(comment_html);
        }

        if (Hatena.Star) {
            Hatena.Star.EntryLoader.intoCommentScope(function() {
                Hatena.Diary.Util.updateDynamicPieces($container);
            });
        } else {
            Hatena.Diary.Util.updateDynamicPieces($container);
        }
    };

    Hatena.Diary.Pages.Blogs['*'].loadEntryInfo = function me (entry) {
        if (!me.data) me.data = {
            timer : setTimeout(function () {
                var data = me.data;
                me.data = null;
                $.ajax({
                    url : Hatena.Diary.URLGenerator.user_blog_url('/api/entry/info'),
                    type : "get",
                    dataType : 'json',
                    cache : false,
                    data : {
                        e : data.entries
                    },
                    success : function (res) {
                        var entries = res.entries;
                        for (var key in entries) if (entries.hasOwnProperty(key)) {
                            var val = entries[key];
                            data.deferred[key].resolve(val);
                        }

                        Hatena.Diary.SpeedTrack.record("Pages.Blogs['*'].loadEntryInfo.ajax.success");
                    }
                });
            }, 0),
            entries : [],
            deferred : {}
        };

        var ret  = $.Deferred();
        var uuid = entry.attr('data-uuid');

        me.data.entries.push(uuid);
        me.data.deferred[uuid] = ret;

        return ret;
    };

    // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã§è¦ç´ ãŒè¡¨ç¤ºã•ã‚ŒãŸã¨ãã«ä½•ã‹ã™ã‚‹
    Hatena.Diary.Pages.Blogs['*'].elementDidAppear = function (element) {
        var deferred = $.Deferred();
        var _window = $(window);

        if (_window.scrollTop() > ($(element).offset().top - _window.height())) {
            deferred.resolve();
        } else {
            _window.scroll(_.throttle(function () {
                if (_window.scrollTop() > ($(element).offset().top - _window.height())) {
                    deferred.resolve();
                }
            }, 200));
        }
        return deferred.promise();
    };

    // Google+ãƒœã‚¿ãƒ³ã‚’æç”» plusone.jsã®ãƒ­ãƒ¼ãƒ‰ã«å¤±æ•—ã—ã¦ã‚‹ã‚ˆã†ãªã‚‰ä½•ã‚‚ã—ãªã„(ãªãœã‹èª­ã‚ã¦ãªã„ã“ã¨ãŒã‚ã‚‹)
    // YouTubeã®subscribeãƒœã‚¿ãƒ³ã‚‚plusone.jsã«å…¥ã£ã¦ã‚‹ã®ã§æç”»
    // https://developers.google.com/+/web/+1button/?hl=ja
    Hatena.Diary.Pages.Blogs['*'].renderGooglePlusOneButtons = function() {
        if (!window.gapi) return;

        try {
            window.gapi.plusone.go('container');
            window.gapi.ytsubscribe.go('container');
        } catch(ignore) {
            // Google+ãƒœã‚¿ãƒ³ã¯IE8ä»¥ä¸Šã®ã¿å¯¾å¿œã§ï¼ŒIE7ã§ã¯ä¾‹å¤–å‡ºã‚‹ã‘ã©ï¼Œç„¡è¦–ã™ã‚‹ï¼
        }
    };

    // è³¼èª­ã™ã‚‹/ã—ãªã„ ãƒœã‚¿ãƒ³
    // - è‡ªåˆ†ã®ãƒ–ãƒ­ã‚° : éè¡¨ç¤º
    // - è³¼èª­æ¸ˆãƒ–ãƒ­ã‚° : "èª­è€…ã‚’ã‚„ã‚ã‚‹"
    // - æœªè³¼èª­ãƒ–ãƒ­ã‚° : "èª­è€…ã«ãªã‚‹"
    // args:
    //   isSubscribing : é–²è¦§è€…ãŒãƒ–ãƒ­ã‚°ã‚’è³¼èª­ä¸­ã‹ã©ã†ã‹
    //   subscribers   : ãƒ–ãƒ­ã‚°ã®è³¼èª­è€…æ•°
    Hatena.Diary.Pages.Blogs['*'].initSubscribe = function (isSubscribing, subscribers) {
        // å…¨ã¦åŒã˜ãƒ–ãƒ­ã‚°ã€åŒã˜ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è¬›èª­ãƒœã‚¿ãƒ³
        var userData = {
            isSubscribing : isSubscribing,
            isGuest       : Hatena.Diary.data('rkm') && Hatena.Diary.data('rkc') ? false : true
        };
        var blogData = {
            subscribersCount: subscribers
        };

        // ãƒœã‚¿ãƒ³ã¨ã®é€šä¿¡ã«ç”¨ã„ã‚‹Messenger
        var messenger = Messenger.createForWindow(window);

        // ãƒœã‚¿ãƒ³ã‚’ç”Ÿæˆ
        var buttons = $('.hatena-follow-button-box').map(function () {
            return new Hatena.Diary.SubscribeButtonBlogs($(this), userData, blogData, messenger);
        }).toArray();

        // è¬›èª­é–‹å§‹/ä¸­æ­¢ã®å‡¦ç†ãŒå®Œäº†ã—ãŸã¨ã„ã†ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å—ã‘å–ã£ãŸæ™‚ã®å‡¦ç†
        // iframeç‰ˆã¨ã®é€šä¿¡ã¯globalHeaderã‚’é€šã˜ã¦è¡Œã†
        // admin -> blogs
        Hatena.Diary.Pages.message('subscription', function (data) {
            messenger.send('subscription', data);
        });
        // blogs -> admin
        messenger.addEventListener('subscription', function (data) {
            Hatena.Diary.Pages.send('subscription', data);
        });

        // globalHeaderã‹ã‚‰ã®subscribeãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å—ã‘å–ã‚‹ãŸã‚ã®ãƒœã‚¿ãƒ³
        var $hiddenButton = $('#hidden-subscribe-button > .hatena-follow-button-box');
        this.subscribeButtonForMessage =
            new Hatena.Diary.SubscribeButtonBlogs($hiddenButton, userData, blogData, messenger);

        var self = this;
        Hatena.Diary.Pages.message('subscribe', function (data) {
            var offset = { left: data.left + 5 };
            self.subscribeButtonForMessage.openSubscribeWindow(offset, true);
        });

        // è¡¨ç¤ºä¸­ã®ãƒ–ãƒ­ã‚°ãŒè¬›èª­ã•ã‚ŒãŸã‚‰ã€globalheaderã«ã€Œè³¼èª­ä¸­ã§ã™ã€ãƒ©ãƒ™ãƒ«ã‚’å‡ºã™
        var blogHost = Hatena.Diary.data('blog');
        messenger.addEventListener('subscription', function (data) {
            if (data[blogUrl] === true) {
                Hatena.Diary.Pages.send('subscribed-current-blog');
            }
        });
    };

    Hatena.Diary.Pages.Blogs['*'].setupHatenaBookmarkComment = function ($superNode) {
        // ä¸Šä½ã®ãƒãƒ¼ãƒ‰ã‚’æŒ‡å®šã™ã‚‹ã“ã¨
        // ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ã‚³ãƒ¡ãƒ³ãƒˆã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã®ã‚µã‚¤ã‚ºèª¿æ•´
        var $bookmark_comment = $superNode.find('.hatena-bookmark-comment-iframe');

        if ($bookmark_comment.size() === 0) return;

        _.each($bookmark_comment, function (item) {
            var $item = $(item);
            var messenger = Messenger.createForFrame($item[0], $item.attr('data-src'));
            messenger.addEventListener('resize', function (height) {
                $item.css('height', height);
            });
        });
    };

    Hatena.Diary.Pages.Blogs['*'].setupOndemandCommentDeleteButton = function() {
        $(document).on('mouseenter', '.entry-comment', function(e) {
            var $comment = $(this);
            if ($comment.find('.comment-delete-button img').size() > 0)
                return;
            var comment_uuid = $comment.attr('data-comment-uuid');
            var blog_uuid = $comment.attr('data-blog-uuid');
            var url = Hatena.Diary.data('admin-domain') + '/api/comment.delete.image?comment=' + comment_uuid + '&blog=' + blog_uuid;
            var $img = $('<img>');
            $img.attr('src', url);
            var handler = function() {
                $img.attr('alt', 'delete');
            };
            $img.load(handler);
            $img.error(handler);
            $comment.find('.comment-delete-button').append($img);
        });
    };

    // Tumblr æä¾›ã®ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆ http://www.tumblr.com/apps#bookmarklet_window ã‚’
    // URL ãŠã‚ˆã³ã‚¿ã‚¤ãƒˆãƒ«ã‚’æ˜ã«æŒ‡å®šã§ãã‚‹ã‚ˆã†ã«æ”¹é€ ã—ãŸã‚‚ã®
    Hatena.Diary.Pages.Blogs['*'].setupTumblrShareButtons = function (elem) {
        $(elem || document.body).find('a[data-hatenablog-tumblr-share-button]').on('click', function () {
            var selection = window.getSelection   ? window.getSelection()
                : document.getSelection ? document.getSelection()
                : document.selection    ? document.selection.createRange().text : 0;
            var url = 'http://www.tumblr.com/share?' + $.param({
                v: 3,
                u: $(this).attr('data-share-url') || location.href,
                t: $(this).attr('data-share-title') || document.title,
                s: selection + ''
            });
            var go = function () {
                if (!window.open(url, 't', 'toolbar=0,resizable=0,status=1,width=450,height=430')) {
                    location.href = url;
                }
            };
            if (/Firefox/.test(navigator.userAvent)) {
                setTimeout(go, 0);
            } else {
                go();
            }
            return false;
        });
    };

    Hatena.Diary.Pages.Blogs['*'].setupEntryModuleCarousel = function() {
        var $carouselScripts = $(document).find('script[type="text/x-hatenablog-carousel"]');

        _.each($carouselScripts, function (item) {
            var $item = $(item);
            var displayEntrySize = $item.attr('data-carousel-display-entry-size-at-once');
            var opts = {
                isAutoScroll: $item.attr('data-carousel-autoscroll') === 'true',
                displayEntrySizeAtOnce: displayEntrySize !== undefined ? Number(displayEntrySize) : undefined
            };
            if (opts.isAutoScroll) {
                var interval = $item.attr('data-carousel-autoscroll-interval');
                opts.autoScrollInterval = interval !== undefined ? Number(interval) : undefined;
            }
            new Hatena.Diary.EntryModuleCarousel($(document).find($item.html()), opts);
        });

    };

    // ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³ã®å ´åˆã€Touchç”¨ã®å‡¦ç†ã‚’BlogsTouchã§ã¯ãªãBlogsã«æ›¸ãå¿…è¦ãŒã‚ã‚‹
    // tap delayå¯¾ç­–
    Hatena.Diary.Pages.Blogs['*'].setupFastClick = function () {
        FastClick.attach(document.body);
    };

})(jQuery);

(function($){

    Hatena.Diary.Pages.Blogs['blog-count-limit-exceeded'] = function () {
        Hatena.Diary.Pages.infoLoaded.done(function (info) {
            var selector = info.editable ? '.js-message-author' : '.js-message-guest';
            $('#container').append($(selector).html());
        });
    };

})(jQuery);

(function($){

    Hatena.Diary.Pages.Blogs['circle'] = function () {
        Hatena.Diary.Pages.Blogs['circle'].setupControls();
        Hatena.Diary.Pages.Blogs['circle'].setupSidebar();
        Hatena.Diary.Pages.Blogs['circle'].setupSpace();

        Hatena.Diary.Pages.infoLoaded.done(function (info) {
            if (info.flash && info.flash.has_just_created_circle) {
                var closeFlash = function () { $('#flash-created-circle').fadeOut('fast') };
                $('#flash-created-circle')
                    .find('.close').click(function () { closeFlash() }).end()
                    .show();
                $(document.body).on('click', function (e) {
                    if ($(e.target).closest('#flash-created-circle').length === 0) {
                        closeFlash();
                        $(document.body).off('click', arguments.callee);
                        return false;
                    }
                });
            }
        });

        Hatena.Diary.Util.initScrollFollowedElement($('.js-followed-ad-container'), false);
    };

    Hatena.Diary.Pages.Blogs['circle'].setupControls = function () {
        Hatena.Diary.Pages.infoLoaded.done(function (info) {
            if (info.is_admin) {
                $('.admin-control').addClass('admin-control-available');
            } else {
                $('.admin-control').addClass('admin-control-unavailable');
            }

            if (info.is_member) {
                $('.circle-member-control').addClass('circle-member-control-available');
            } else {
                $('.circle-member-control').addClass('circle-member-control-unavailable');
            }

            if (info.has_blogs) {
                $('.blog-user-control').addClass('blog-user-control-available');
            } else {
                $('.blog-user-control').addClass('blog-user-control-unavailable');
            }

            if (info.cookie_received === false) {
                // ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ãƒ¼ã‚¯ãƒƒã‚­ãƒ¼ç„¡åŠ¹ã®ã¨ãã«å‡ºã™æŒ‡å®šãŒã‚ã‚‹ã‚‚ã®ã¯å‡ºã‚‹ã‚ˆã†ã«ã‚¯ãƒ©ã‚¹ã‚’ãµã‚Šç›´ã™
                $('[data-user-unknown-overrides]')
                    .removeClass('admin-control-unavailable circle-member-control-unavailable blog-user-control-unavailable')
                    .addClass('admin-control-available circle-member-control-available blog-user-control-available');
            }
        });
    };

    // å¯èƒ½ãªã‚‰æ±ç”¨åŒ–ã—ãŸã„
    function createMessenger (url, name, $container) {
        return Hatena.Diary.Browser.thirdPartyCookiesBlocked.pipe(function (blocked) {
            var messenger;

            if (blocked) {
                var size = { width: 300, height: 400 };
                size.left = Math.floor((screen.width - size.width) / 2);
                size.top  = Math.floor((screen.height - size.height) / 2);

                var subwindow = window.open('', name, Hatena.Diary.Util.positionToPositionString(size));
                messenger = Messenger.createForWindow(subwindow, url);

                messenger.addEventListener('close', function () {
                    messenger.destroy();
                    subwindow.close();
                });
            } else {
                var $iframe = $('<iframe frameborder=0>').appendTo($container);
                messenger = Messenger.createForFrame(
                    $iframe[0], url
                );

                messenger.addEventListener('close', function () {
                    Hatena.Diary.Window.hide($container);
                });

                messenger.addEventListener('resize', function (css) {
                    if (css) $iframe.css(css);
                });

                Hatena.Diary.Window.show($container, {
                    destroy: function () {
                        $iframe.remove();
                        messenger.destroy();
                    }
                });
            }

            return messenger;
        });
    }

    Hatena.Diary.Pages.Blogs['circle'].setupSidebar = function () {
        $('.manage-membership-button').click(function () {
            createMessenger(
                $('html').attr('data-admin-domain') + '/-/group/' + $('html').attr('data-circle-id') + '/membership',
                'manage-membership',
                $(this).siblings('.manage-membership-popup')
            );

            return false;
        });
    };

    Hatena.Diary.Pages.Blogs['circle'].setupSpace = function () {
        if (!$('.hatena-module.circle-space')[0]) return;
        $.getScript('http://space.hatena.ne.jp/js/interest.widget.js');
    };

    Hatena.Diary.Pages.Blogs['circle-blogs'] = function () {
        Hatena.Diary.Pages.Blogs['circle'].setupSidebar();
    };

    Hatena.Diary.Pages.Blogs['group-category'] = function () {
        Hatena.Diary.Util.initScrollFollowedElement($('.js-followed-ad-container'), true);
    };

    Hatena.Diary.Pages.Blogs['recent-groups'] = function () {
        Hatena.Diary.Util.initScrollFollowedElement($('.js-followed-ad-container'), true);
    };

})(jQuery);

(function($){

    Hatena.Diary.Pages.Blogs['famous-blogs-top'] = function () {
        $(document).on('click', '.js-read-old-entries', function() {
            var $button = $(this);
            $button.closest('.js-category-container').find('.js-old-entry').show();
            $button.remove();
        });
    };

})(jQuery);

(function($){

    Hatena.Diary.Pages.Blogs['global-top'] = function() {
        $('img[data-alternate-src]').one('error', function() {
            var $img = $(this);
            $img.attr('src', $img.attr('data-alternate-src'));
        });

        $('.js-category-wrapper').tabs({
            selected : 0
        });

        // æ¨™æº–ã®ã‚¿ãƒ–ã®UIã§ã¯ãªãï¼Œnav-barã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚’å½“ã¦ãŸã„ã®ã§ï¼Œã‚¯ãƒ©ã‚¹æ¶ˆã™
        $('.js-category-wrapper .ui-tabs-nav').removeClass('ui-tabs-nav');

        // globalãƒˆãƒƒãƒ—ã¯ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã•ã‚Œã¦ã‚‹ã®ã§ã€jsã§viaã®å¼•ãç¶™ãã‚’ã™ã‚‹
        var via = Hatena.Diary.Location.param('via');
        if (via) {
            Hatena.Diary.inheritVia(via);
        }
    };

})(jQuery);
(function($){

    Hatena.Diary.Pages.Blogs['guide-pro-modal-ad'] = function () {
        Hatena.Diary.Pages.createForParent();

        $('.close-window').on('click', function (e) {
            Hatena.Diary.Pages.send('close', { name : window.name });
            return false;
        });
    };

})(jQuery);

(function($){

    Hatena.Diary.Pages.Blogs['hatena-bookmark-comment'] = function () {
        var messenger = Messenger.createForParent(),
        OFFSET = 30,        // iframeã®bodyã¨ã®ä½™ç™½åˆ†, ååˆ†å¤§ãã„é©å½“ãªå€¤
        current_height = 0;

        var sendResize = function () {
            var next_height = $('body').height() + OFFSET;
            if (next_height !== current_height) {
                messenger.send('resize', next_height);
                current_height = next_height;
            }
        };

        // ãƒœã‚¿ãƒ³ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸã¨ãã‚µã‚¤ã‚ºãŒå¤‰ã‚ã‚‹
        $(document).on('click', '.hatena-bookmark-span-button', function () {
            sendResize();
        });

        setInterval(function(){
            sendResize();
        }, 1000);
    };

})(jQuery);
(function($){

    Hatena.Diary.Pages.Blogs['index'] = function () {
        Hatena.Diary.Location.setup();

        $(window).hashchange(function () {
            if (location.hash == '#edit') {

                Hatena.Diary.Pages.infoLoaded.done(function (info) {
                    if (info.editable) {
                        Hatena.Diary.Pages.Blogs['*'].newEntry();
                    }
                }).
                    fail(function (e) {
                        Hatena.Diary.BUG(e);
                    });
            }
        }).hashchange();
    };

})(jQuery);

(function($){

    Hatena.Diary.Pages.Blogs['preview'] = function() {
        try {
            if (!window.sessionStorage)
                return;
            var editor_id = $('#content').attr('data-editor-id');
            if (!editor_id)
                return;
            var $document = $(document);

            var pos = sessionStorage.previewed_scroll_position ? JSON.parse(sessionStorage.previewed_scroll_position) : null;
            if (pos && pos.editor_id == editor_id) {
                $document.scrollTop(pos.top);
                $document.scrollLeft(pos.left);
            }

            $document.scroll(_.throttle(function() {
                sessionStorage.previewed_scroll_position = JSON.stringify({
                    editor_id : editor_id,
                    top: $document.scrollTop(),
                    left: $document.scrollLeft()
                });
            }, 100));
        } catch (_ignored) {
        }
    };

})(jQuery);

(function($){
    Hatena.Diary.Pages.Blogs['preview_url_embed'] = function () {
        var messenger = Messenger.createForParent();

        // æœ€åˆã®1å›ã¯å¿…ãšsendã™ã‚‹ãŸã‚ã«ï¼Œnullã«ã—ã¦ãŠãï¼
        // IEã§ã¯ï¼Œéè¡¨ç¤ºãªè¦ç´ ã®é«˜ã•å–ã‚Œãªã„ãŸã‚ï¼Œæœ€åˆé«˜ã•å–ã‚‹ã¨0ã«ãªã‚‹ï¼
        // 0ã§é€ã‚‹ã¨ï¼Œè¦ªã§iframeãŒè¡¨ç¤ºã•ã‚Œã¦ï¼Œãã®å¾Œé«˜ã•ã‚’å–å¾—ã™ã‚‹ã¨ï¼Œæ­£ã—ã„é«˜ã•ã«ãªã‚Šï¼Œè¡¨ç¤ºã•ã‚Œã‚‹ï¼
        var current_height = null;

        var sendResize = function () {
            var next_height = $('html').height();
            if (next_height !== current_height) {
                messenger.send('resize', next_height);
                current_height = next_height;
            }
        };

        // å±•é–‹æˆåŠŸã—ã¦ã„ãŸã‚‰ã“ã®è¦ç´ ãŒã‚ã‚‹ï¼é«˜ã•ã‚’è¦ªã«ä¼ãˆã‚‹ï¼å¤±æ•—ã—ã¦ãŸã‚‰iframeæ¶ˆã—ã¦ã‚‚ã‚‰ã†ï¼
        var embed_success = !! $('.js-embed-preview')[0];

        if (embed_success) {
            sendResize();
            setInterval(function(){
                sendResize();
            }, 1000);
        } else {
            // å±•é–‹å¤±æ•—
            messenger.send('close');
        }
    };

})(jQuery);

(function($){

    Hatena.Diary.Pages.Blogs['realtime_preview'] = function() {
        try{
            if (!window.sessionStorage)
                return;

            var editor_id = $('#realtime-preview-content').attr('data-editor-id');

            if (!editor_id)
                return;
            var $wrapper = $('#realtime-preview-wrapper');

            var pos = sessionStorage.realtime_previewed_scroll_position ? JSON.parse(sessionStorage.realtime_previewed_scroll_position) : null;
            if (pos && pos.editor_id == editor_id) {
                $wrapper.scrollTop(pos.top);
                $wrapper.scrollLeft(pos.left);
            }

            $wrapper.scroll(_.throttle(function() {
                sessionStorage.realtime_previewed_scroll_position = JSON.stringify({
                    editor_id : editor_id,
                    top: $wrapper.scrollTop(),
                    left: $wrapper.scrollLeft()
                });
            }, 100));
        } catch (_ignored) {
        }
    };

})(jQuery);

(function($){

    Hatena.Diary.Pages.Blogs['preview-draft'] = function() {
        $(function () {
            // è¨˜äº‹æƒ…å ±ã®ãƒœãƒƒã‚¯ã‚¹ã‚’å‡ºã™
            var $box         = $('.js-preview-draft-modal');
            var $closeButton = $box.find('.js-preview-draft-modal-btn');

            $closeButton
                .focus()
                .on('click', function () {
                    $box.addClass('is-hidden');
                });
        });
    };

})(jQuery);

// touchç‰ˆã®ç·¨é›†ç”»é¢, æŠ•ç¨¿å®Œäº†ç”»é¢ã§twitterã®æ–‡å­—æ•°ã‚’ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¡Œã„ã¾ã™
(function($) {
    Hatena.Diary.Touch  = Hatena.Diary.Touch || {};
    Hatena.Diary.Touch.TwitterValidator = function () { this.init.apply(this, arguments) };
    Hatena.Diary.Touch.TwitterValidator.prototype = {
        init: function ($el) {
            this.$el = $el;
            this.$textarea = $el.find('textarea');
            this.$errorMessage = $el.find('.js-twitter-length-error');
            this.$checkBox =  $el.find('input[name="post_to_twitter"]');
            this.$shareButton =  $el.find('.js-touch-share-button');
            this.bindEvents();
        },
        bindEvents: function () {
            var self = this;
            self.$textarea.keyup(function() {
                if (Hatena.Diary.validationTweetLength(self.$textarea.val()) === false) {
                    self.showErrorMessage();
                    self.disabledCheckBox();
                    self.disabledShareButton();
                }
                else {
                    self.hideErrorMessage();
                    self.enabledCheckBox();
                    self.enabledShareButton();
                }
            });
        },
        hideErrorMessage: function() {
            this.$errorMessage.hide();
        },
        showErrorMessage: function() {
            this.$errorMessage.show();
        },
        disabledCheckBox: function() {
            this.$checkBox.attr('disabled', true);
        },
        enabledCheckBox: function() {
            this.$checkBox.attr('disabled', false);
        },
        disabledShareButton: function() {
            this.$shareButton.attr('disabled', true);
        },
        enabledShareButton: function() {
            this.$shareButton.attr('disabled', false);
        }
    };
})(jQuery);

(function($){

Hatena.Diary.Pages.AdminTouch['globalheader'] = function () {
    Hatena.Diary.Pages.createForParent();

    Hatena.Diary.Pages.loadInfo().done(function (info, privateInfo) {
        Hatena.Diary.Pages.AdminTouch['globalheader'].initSubscribe(info);
    });
};

// ã‚¹ãƒãƒ•ã‚©ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ˜ãƒƒãƒ€ã®è³¼èª­ãƒœã‚¿ãƒ³
Hatena.Diary.Pages.AdminTouch['globalheader'].initSubscribe = function (info) {
    // ãƒ–ãƒ­ã‚°ãŒãªã„ã¨ãã¯ä½•ã‚‚ã—ãªã„
    // è‡ªåˆ†ã®ãƒ–ãƒ­ã‚°ã«ã¯èª­è€…ã«ãªã‚‹å‡ºã•ãªã„
    // è³¼èª­ä¸­ã‚‚å‡ºã•ãªã„
    if (!info.blog) return;
    if (info.can_open_editor) return;
    if (info.subscribe) return;

    var $container = $('.js-subscribe-container');
    var $link = $container.find('.js-subscribe-link');

    // ãƒªãƒ³ã‚¯å…ˆè¨­å®š
    $link.attr('href', info.subscribe_url);

    // è³¼èª­ãƒœã‚¿ãƒ³è¡¨ç¤º
    $container.show();
};

Hatena.Diary.Pages.AdminTouch['*'] = function () {
    Hatena.Locale.setupTimestampUpdater();
    $('label').click(function () {}); // Mobile safari ã¯ onclick ã¤ã‘ãªã„ã¨ label ãŒåŠ¹ã‹ãªã„ã‚‰ã—ã„

    Hatena.Diary.Pages.AdminTouch['*'].androidAppBanner.init();
};

Hatena.Diary.Pages.AdminTouch['*'].androidAppBanner = {
    init : function () {
        // Androidã‚¢ãƒ—ãƒªç”¨ã®ãƒãƒŠãƒ¼

        var self = this;

        var $banner = $('#android-app-banner');

        if ($banner.length === 0) {
            return;
        }
        var $closeButton = $('#android-app-banner-close');

        $closeButton.click(function (e) {
            $banner.slideToggle(400);
            self.setDismiss(true);
        });

        if (!self.isDismissed()) {
            setTimeout(function () {
                $banner.slideToggle(400);
            }, 0);
        }
    },

    _localStorageKey : 'Hatena.Diary.Pages.AdminTouch.dismissAndroidAppBanner',

    _localStorageEnabled : function () {
        try {
            if (window.localStorage) {
                return true;
            }
        } catch (ignore) {}
        return false;
    },

    isDismissed : function () {
        // éè¡¨ç¤ºã«è¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ã©ã†ã‹
        var self = this;
        if (self._localStorageEnabled()) {
            return localStorage.getItem(self._localStorageKey) === 'true';
        }
        return false;
    },

    setDismiss : function (dismissed) {
        // éè¡¨ç¤ºã«è¨­å®šã™ã‚‹
        var self = this;
        if (self._localStorageEnabled()) {
            localStorage.setItem(self._localStorageKey, dismissed ? 'true' : 'false');
        }
    }
};

Hatena.Diary.Pages.AdminTouch['index'] = function () {
    var tabs   = $('#admin-top-tab');
    var navs   = $('#admin-top-tab .nav-cell');
    var panels = $('#config-container > .section');

    var loaded = false;
    $(window).load(function () { loaded = true });

    navs.click(function () {
        var $this = $(this);
        navs.removeClass('selected');
        navs.find('a img').each(function () {
            if (/-selected/.test(this.src)) {
                this.src = this.src.replace(/-selected/, '');
            }
        });
        panels.hide();

        var a = $this.find('a');
        $this.addClass('selected');
        a.find('img').each(function () {
            this.src = this.src.replace(/\.([^.\/]+)$/, '-selected.$1');
        });

        var panel = panels.filter(a.attr('href'));
        panel.show();

        tabs.trigger('tabsactivate', { panel : { id : panel.attr('id') } });

        if ('replaceState' in history && loaded) {
            var hash = (a.attr('href').match(/(#.+)/))[0];
            if (hash) {
                history.replaceState(null, document.title, hash);
            }
        }

        // antenna
        var $closedBlogs = $('.closed-blog');
        $closedBlogs.each(function(){
            var $closedBlog = $(this);
            var antennaUrl = $closedBlog.data("antennaUrl");
            $.ajax({
                type: 'GET',
                url: antennaUrl,
                data: { device: 'touch' },
                dataType: 'html',
                crossDomain: true,
                xhrFields: {
                        withCredentials: true
                }
            }).done(function(res){
                $closedBlog.empty();
                $closedBlog.append(res);
                var $blogContents = $closedBlog.find('.js-blog-content');
                Hatena.Locale.updateTimestamps($blogContents[0]);
            });
        });
        return false;
    });

    var BASE     = location.hostname.match(/\.hatena\.[^:]+/)[0];
    var notifyCount = $('#admin-top-tab .notify-count').hide();
    $.getJSON("https://www" + BASE + "/notify/notices.count.json?callback=?", function (res) {
        if (res.count) {
            notifyCount.text(res.count).show();
        }
        Hatena.Diary.Util.needComrule2013(res);
    });

    tabs.on('tabsactivate', function (e, ui) {
        if (ui.panel.id == 'notify') {
            notifyCount.hide();
            var notifyContainer = $('#notify').empty();
            var uri = 'https://www' + BASE + '/notify/notices.iframe?' + new Date().getTime();
            $('<iframe style="width: 100%; height: 340px; margin: 5px 0; padding: 0" frameborder="0"/>').attr('src', uri).appendTo(notifyContainer);
        }
    });

    var selected = navs.filter(function () {
        return $(this).find('a').filter(function () { return $(this).attr('href') == location.hash }).length !== 0;
    });
    (selected.length ? selected : navs.eq(0)).click();

    Hatena.Diary.Pages.AdminTouch['user-blog-entries'].setupEntryListLinks();

    Hatena.Diary.Pages.AdminTouch['index'].getDashboardData();
};

Hatena.Diary.Pages.AdminTouch['user-blog-comment-done'] = function () {
    Hatena.Diary.Pages.createForParent();

    var comment = document.getElementById('posted').value;

    Hatena.Diary.Pages.send('update', { comment : comment });

    Hatena.Diary.Pages.send('close');
};

Hatena.Diary.Pages.AdminTouch['index'].getDashboardData = function () {
    $.ajax({
        type: 'GET',
        url: '/-/dashboard_data',
        data: { device: 'touch' }
    }).done(function(data) {
        $('section#subscribe').append(data.subscribing_blogs);
        $('section.js-hotentry-container').append(data.hot_entries);
    });
};

Hatena.Diary.Pages.AdminTouch['locale'] = function () {
    $('a.js-set-language').on('click', function () {
        var $this = $(this);
        var lang = $this.attr('data-lang');
        Hatena.Locale.setAcceptLang(lang);
        location.href = Hatena.Diary.Location.param('location') || '/';
        return false;
    });
};

Hatena.Diary.Pages.AdminTouch['user-blog-edit'] = function () {
    Hatena.Diary.Backup.UI = 'touch';
    Hatena.Diary.Backup.setup();

    var editEntry = $('#edit-entry');

    if (Hatena.Diary.Pages.AdminTouch['user-blog-edit'].contentEditableEnabledAndEditorModeIsHTML()) {

        var textarea = editEntry.find('textarea#entry-body');
        var iframe = $('<iframe src="about:blank" frameborder="0">')
                     .attr('id', 'entry-html-body')
                     .prependTo('div.edit-body');

        var wysiwygDocument = iframe.prop('contentDocument');
        var body = textarea.val();
        // åˆæŠ•ç¨¿ã®å ´åˆã¯ <p> ã‚’å…¥ã‚Œã¦ãŠã
        if (!body && !$('form#edit-form input[name="entry"]').val()) {
            body = '<p><br/></p>';
        }
        var link = wysiwygDocument.createElement('link');
        link.setAttribute('type', 'text/css');
        link.setAttribute('rel',  'stylesheet');
        link.setAttribute('href', Hatena.Diary.data('admin-domain') + '/css/touch/blog-edit.css');

        wysiwygDocument.getElementsByTagName('head')[0].appendChild(link);
        wysiwygDocument.body.innerHTML = body;
        wysiwygDocument.body.contentEditable = true;
        wysiwygDocument.body.addEventListener('keyup', function () {
            textarea.val(wysiwygDocument.body.innerHTML);
        }, true);

        $('form#edit-form').append($('<input type="hidden" name="wysiwyg" value="1">')).submit(function () {
            $('textarea#entry-body').val(wysiwygDocument.body.innerHTML);
        }).bind('backup-restore', function () {
            wysiwygDocument.body.innerHTML = textarea.val();
        });

        // ã“ã‚Œã—ãªã„ã¨ Safari ã§å…¥åŠ›ã§ããªããªã‚‹
        $('input#entry-title').blur(function () {
            iframe.focus();
        });

        // ç·¨é›†ä¸­ã«ãƒªãƒ³ã‚¯ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨åˆ¥ã®ç”»é¢ã«é·ç§»ã—ã¦ã„ã‚‹ãŸã‚clickã‚¤ãƒ™ãƒ³ãƒˆã‚’ç„¡åŠ¹åŒ–ã—ã¦ã‚‹
        $(wysiwygDocument).on('click', "a", function() {
            return false;
        });

        textarea.hide();
    }

    Hatena.Diary.Pages.AdminTouch['user-blog-edit'].setupUpload();

    Hatena.Diary.Pages.AdminTouch['user-blog-edit'].setupMyCuration();

    Hatena.Diary.Pages.AdminTouch['user-blog-edit'].setupScheduledEntry();

    if (Hatena.Diary.Pages.AdminTouch['user-blog-edit'].dateTimeEditorEnabled()) {
        Hatena.Diary.Pages.AdminTouch['user-blog-edit'].setupDateTimeEditor();
    }

    Hatena.Diary.Pages.AdminTouch['user-blog-edit'].setupOptionsToggle();
    new Hatena.Diary.Touch.TwitterValidator($('.js-touch-edit-socialize-box-li.twitter'));
};

Hatena.Diary.Pages.AdminTouch['user-blog-edit-done'] = function () {
    Hatena.Diary.Pages.AdminTouch['user-blog-edit-done'].postToSocialService();
    new Hatena.Diary.Touch.TwitterValidator($('.js-touch-edit-socialize-box-li.twitter'));
};

Hatena.Diary.Pages.AdminTouch['user-blog-edit'].setupOptionsToggle = function () {
    var $options = $('.post-options');
    $('.js-toggle-options').on('click', function() {
        $options.toggle();
        $(document).scrollTop($options.position().top);
        return false;
    });
};

Hatena.Diary.Pages.AdminTouch['user-blog-edit'].execCommand = function (command, value) {
    var editor = tinymce.get('entry-body');
    editor.execCommand(command, false, value);
    editor.save();
};

Hatena.Diary.Pages.AdminTouch['user-blog-edit'].contentEditableEnabledAndEditorModeIsHTML = function() {
    // Android ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ–ãƒ©ã‚¦ã‚¶ã¯é¿ã‘ã‚‹
    // (Opera Mobile ã¯ãã‚‚ãã‚‚ contentEditable éå¯¾å¿œ)
    var editEntry = $('#edit-entry');
    var ua = navigator.userAgent;
    var isMobileSafari = /\b(?:iPhone|iPad)\b/.exec(ua) && /\bVersion\/(\d+\.\d+)/.exec(ua) && Number(RegExp.$1) >= 5.1;
    var isAndroidChrome = /\bAndroid\b/.exec(ua) && /\bChrome\b/.exec(ua);
    return editEntry.attr('data-entry-syntax') == 'html' && 'contentEditable' in document.body &&
        (isMobileSafari || isAndroidChrome);
};

Hatena.Diary.Pages.AdminTouch['user-blog-edit'].pickColor = function (callback) {
    var button = $('#edit-entry .toolbar button[data-action="color"]');
    Hatena.Diary.Pages.AdminTouch['user-blog-edit'].ColorPicker.show(button.offset(), function (e, color) {
        callback(color);
    });
};

Hatena.Diary.Pages.AdminTouch['user-blog-edit'].fontSize = function (delta) {
    var selection = tinymce.get('entry-body').selection;

    var span = selection.getNode();
    if (span.nodeName.toLowerCase() != 'span')  {
        span = document.createElement('span');
        span.setAttribute('style', 'font-size: ' + (100 + delta) + '%');

        var range = selection.getRng();
        range.surroundContents(span);
        selection.setRng(range);
    } else {
        var remove = false;
        span.setAttribute('style', span.getAttribute('style').replace(/font-size:\s*(\d+)%|$/, function (_, size) {
            if (typeof(size) == 'undefined') size = 100;
            size = +size + delta;
            if (size == 100) remove = true;
            return 'font-size:' + size + '%';
        }));

        if (remove) {
            var frag = document.createDocumentFragment();
            while (span.firstChild) frag.appendChild(span.firstChild);
            span.parentNode.insertBefore(frag, span);
            span.parentNode.removeChild(span);
        }
    }
};

Hatena.Diary.Pages.AdminTouch['user-blog-edit'].insertText = function(text) {
    if ($('iframe#entry-html-body').length > 0) {
        this.insertText.contentEditable(text);
    } else if (navigator.userAgent.match(/3DS/)) {
        this.insertText.textarea3DS(text);
    } else {
        this.insertText.textarea(text);
    }
};

Hatena.Diary.Pages.AdminTouch['user-blog-edit'].insertText.textarea = function(text) {
    var $textarea = $('textarea#entry-body');
    var textarea = $textarea[0];
    var val = $textarea.val();

    var range = {
        start: textarea.selectionStart,
        end: textarea.selectionEnd
    };

    $textarea.val(val.substring(0, range.start) + text + val.substring(range.end));
};

Hatena.Diary.Pages.AdminTouch['user-blog-edit'].insertText.textarea3DS = function(text) {
    // 3DSã§ã¯selectionStartã¨ã‹å–ã‚Œãªã„ã®ã§ï¼Œå¿…ãšãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒªã‚¢ã®æœ€å¾Œã«æŒ¿å…¥ã™ã‚‹

    var $textarea = $('textarea#entry-body');
    var val = $textarea.val();

    var lastChar = val[val.length - 1];
    var middle = '';
    if (lastChar === "\n" || lastChar === undefined) {
        // do nothing
    } else {
        middle = "\n";
    }

    $textarea.val(val + middle + text + "\n");
};

Hatena.Diary.Pages.AdminTouch['user-blog-edit'].insertText.contentEditable = function(text) {
    // é›‘è«‡: focusã—ã¦ã‹ã‚‰ã˜ã‚ƒãªã„ã¨execCommandã§ããªã„
    var contentDocument = $('#entry-html-body').prop('contentDocument');
    contentDocument.body.focus();
    contentDocument.execCommand('insertHTML', false, text);
};

Hatena.Diary.Pages.AdminTouch['user-blog-edit'].EDITOR_ACTIONS = {
    bold : function () {
        // http://www.tinymce.com/wiki.php/Command_identifiers
        this.execCommand('Bold');
    },

    italic : function () {
        this.execCommand('Italic');
    },

    strike : function () {
        this.execCommand('StrikeThrough');
    },

    underline : function () {
        this.execCommand('Underline');
    },

    removeFormat : function () {
        this.execCommand("removeFormat");
        this.execCommand("unlink");
    },

    fontSizeIncl : function () {
        this.fontSize(+10);
    },

    fontSizeDecl : function () {
        this.fontSize(-10);
    },

    unorderedList : function () {
        this.execCommand("InsertUnorderedList");
    },

    orderedList : function () {
        this.execCommand("InsertOrderedList");
    },

    color : function () {
        var self = this;
        self.pickColor(function (color) {
            if (color) {
                self.execCommand("ForeColor", color);
            } else {
                self.execCommand("RemoveFormat");
            }
        });
    },

    link : function () {
        var url = prompt('URL');
        if (url) {
            url = url.toLowerCase();
        }
        this.execCommand("CreateLink", url);
    }
};

// from editor/editor.js
Hatena.Diary.Pages.AdminTouch['user-blog-edit'].ColorPicker = {
    show : function (position, callback) {
        var container = Hatena.Diary.Pages.AdminTouch['user-blog-edit'].ColorPicker.container;
        if (!container) {
            container = $('<div class="hatena-diary-color-picker" tabindex="0"><a href="#" class="color-chip default" data-color="">' + Hatena.Locale.text('default') + '</a></div>').appendTo(document.body).hide();
            container.delegate('.color-chip', 'click', function () {
                var color = $(this).attr('data-color');
                container.trigger('colorpick', color);
                container.hide();
                return false;
            });

            var padding = 8;
            var size    = 30;

            var colors = [
                ['#ffffff', '#cccccc', '#999999', '#666666', '#333333', '#000000'],
                ['#cc0000', '#cc00cc', '#0000cc', '#00cccc', '#00cc00', '#cccc00'],
                ['#990000', '#990099', '#000099', '#009999', '#008800', '#aaaa00'],
                ['#660000', '#660066', '#000066', '#006666', '#006600', '#666600'],
                ['#330000', '#330033', '#000033', '#003333', '#003300', '#333300']
            ];

            container.css({
                width: colors[0].length * (size + padding) + padding,
                height: (colors.length + 1) * (size + padding) + padding
            });

            var defcol = container.find("a").css({
                top: padding,
                left: padding,
                height: size,
                width: container.width() - padding * 2
            });

            var chip = $('<a href="#" class="color-chip"></a>');
            for (var i = 0, it; (it = colors[i]); i++) {
                for (var j = 0, col; (col = it[j]); j++) {
                    chip.clone().attr('data-color', col).css({
                        top: (i + 1) * (size + padding) + padding,
                        left: j * (size + padding) + padding,
                        background: col,
                        width : size,
                        height : size
                    }).appendTo(container);
                }
            }

            Hatena.Diary.Pages.AdminTouch['user-blog-edit'].ColorPicker.container = container;
        }

        container.unbind('colorpick');
        container.bind('colorpick', callback);

        container.css(position);
        container.fadeIn('fast');

        container.focus();
        $(container).one('blur', function () { container.hide() });
    }
};

Hatena.Diary.Pages.AdminTouch['user-blog-edit'].setupUpload = function() {
    var can_upload_file = function() {
        // http://stackoverflow.com/questions/8077955/detect-if-input-type-file-is-supported
        var elem = document.createElement('input');
        elem.type = 'file';
        return !elem.disabled;
    };
    if (!can_upload_file()) return;

    var $container = $('.toolbar-container');
    $container.show();

    var can_use_form_data = (typeof FormData != 'undefined');

    if (can_use_form_data) {
        Hatena.Diary.Pages.AdminTouch['user-blog-edit'].setupAjaxUpload();
    } else {
        Hatena.Diary.Pages.AdminTouch['user-blog-edit'].setupIframeUpload();
    }
};

Hatena.Diary.Pages.AdminTouch['user-blog-edit'].setupAjaxUpload = function() {
    var $container = $('.toolbar-container');
    var $file_input = $container.find('input[type=file]');

    $file_input.change(function () {
        if ( ! this.files.length > 0 ) return;
        Hatena.Diary.Pages.AdminTouch['user-blog-edit'].uploadImage({
            $input   : $file_input,
            $progress: $container.find('.progress')
        }).done(Hatena.Diary.Pages.AdminTouch['user-blog-edit'].uploadDone)
        .fail(function(res) {
            alert(Hatena.Locale.text('admin.blog.config.image_upload_failure'));
        });
        Hatena.Diary.trackEvent('upload-photo-smartphone');
    });
};

Hatena.Diary.Pages.AdminTouch['user-blog-edit'].setupIframeUpload = function() {
    var $container = $('.toolbar-container');
    var $file_input = $container.find('input[type=file]');

    $container.addClass('iframe-uploader');

    Hatena.Diary.Pages.AdminTouch['user-blog-edit'].setIframeUploader({
        fileinput : $container.find('.file-container'),
        fotosize  : 800,
        callback  : Hatena.Diary.Pages.AdminTouch['user-blog-edit'].uploadDone
    });
};

// admin.jsã‹ã‚‰ã‚³ãƒ”ãƒšâ†’æ›¸ãæ›ãˆ
Hatena.Diary.Pages.AdminTouch['user-blog-edit'].uploadImage = function (args) {
    var folder = args.folder || "Hatena Blog";
    var fotosize = args.fotosize || 1000;
    var $input = args.$input;
    var image = $input.prop('files')[0];
    var $progress = args.$progress;
    var dfd = $.Deferred();

    $input.prop('disabled', true);

    var data = new FormData();
    data.append('rkm', Hatena.Diary.data('rkm'));
    data.append('append', 1);
    data.append('fototitle', "");
    data.append('folder', folder);
    data.append('fotosize', fotosize);
    data.append('image', image);

    $progress.show();
    var $bar = $progress.find('.bar');
    $bar.width('0%');
    var $percent = $progress.find('.percent');
    var updateProgress = function (percent) {
        if (percent > 100) percent = 100;
        $bar.width(percent + '%');
        $percent.text(Hatena.Locale.text('uploading'));
    };

    var xhr = new XMLHttpRequest();

    xhr.upload.addEventListener("progress", function (e) {
        var percent = e.lengthComputable ? (e.loaded / e.total * 100) : NaN;
        updateProgress( percent );
    }, false);

    xhr.addEventListener("load", function (e) {
        updateProgress( 100 );
        $progress.hide();
        $input.prop('disabled', false);

        if (xhr.status !== 200) {
            dfd.reject(xhr.responseText);
            return;
        }

        var fotolife_syntax = xhr.responseText;
        dfd.resolve(fotolife_syntax);

    }, false);

    xhr.addEventListener("error", function (e) {
        $progress.hide();
        $input.prop('disabled', false);
        dfd.reject(e);
    }, false);

    xhr.open("POST", "/f/" + Hatena.Diary.data('name') + "/upbysmart?dummy=" + (new Date()).getTime());
    xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');
    xhr.send(data);

    return dfd;
};

// admin.jsã‹ã‚‰ã‚³ãƒ”ãƒšâ†’ã¡ã‚‡ã£ã¨æ›¸ãæ›ãˆ(callbackå‘¼ã¶ã‹ã©ã†ã‹ã®ã¨ã“ã‚)
Hatena.Diary.Pages.AdminTouch['user-blog-edit'].setIframeUploader = function (args) {
    var fileinput = args.fileinput;
    var fotosize = args.fotosize;
    var callback = args.callback;

    var iframe = $('<iframe/>');
    fileinput.replaceWith(iframe);
    var src = "/api/upload/fotolife_smart";
    iframe.attr('src', src);
    iframe.addClass('uploader');
    iframe.load(function () {
        var document;
        if (iframe[0].contentDocument) {
            document = iframe[0].contentDocument;
        } else if (iframe[0].contentWindow) {
            document = iframe[0].contentWindow.document;
        } else {
            return;
        }
        if (document.body.innerHTML.match(/^\s*(f:id:\S+)/)) {
            iframe[0].contentWindow.location.replace(src);
        }
        if (document.body.innerHTML.match(/f:id:([^:]+):(\d+)([jpg]):image/)) {
            callback(document.body.innerHTML);
        }

        $(document).find('input[name="fotosize"]').val(fotosize);
        var images = $(document).find('input[type="file"]');
        $(images[0]).change ( function () {
            $(document).find('#fotolife-upload-form').submit();
            $(images[0]).replaceWith($('<h5>').text(Hatena.Locale.text('uploading')));
        });
    });
};

Hatena.Diary.Pages.AdminTouch['user-blog-edit'].uploadDone = function(fotolife_syntax) {
    Hatena.Diary.Pages.AdminTouch['user-blog-edit'].trackPhotoUpload();

    if (Hatena.Diary.Pages.AdminTouch['user-blog-edit'].contentEditableEnabledAndEditorModeIsHTML()) {
        // contentEditableæœ‰åŠ¹ãªã¨ãè¨˜æ³•ã‚’HTMLã«å±•é–‹
        Hatena.Diary.extractFotolifeSyntax(fotolife_syntax).done(function(res) {
            Hatena.Diary.Pages.AdminTouch['user-blog-edit'].insertText(res.html);
        });
    } else {
        Hatena.Diary.Pages.AdminTouch['user-blog-edit'].insertText('[' + fotolife_syntax.replace(/:image/, ':plain') + ']');
    }
};

Hatena.Diary.Pages.AdminTouch['user-blog-edit'].trackPhotoUpload = function() {
    // ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã•ã‚ŒãŸã¨ãã«fluentdã«è¨˜éŒ²
    // XHRã§ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã‹formã§ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã‹ã§ã‚­ãƒ¼ã‚’å¤‰ãˆã¦ã„ã¾ã™
    var track_name = (typeof FormData != 'undefined') ? 'photo-xhr-upload-touch' : 'photo-form-upload-touch';
    Hatena.Diary.trackEvent(track_name);
};

Hatena.Diary.Pages.AdminTouch['user-blog-edit'].setupMyCuration = function() {
    $('[data-curation-action]').click(function() {
        var action = $(this).attr('data-curation-action');
        Hatena.Diary.EditorConnector.loadServiceOnChildWindow("/-/curation/" + action);
        Hatena.Diary.trackEvent('open-curation-' + action);
    });
};

// <input> type="date/time" ãŒæœ‰åŠ¹ã‹
Hatena.Diary.Pages.AdminTouch['user-blog-edit'].dateTimeEditorEnabled = function() {
    var enable_list = _.map(['date', 'time'], function (type) {
        // å‚ç…§: http://stackoverflow.com/questions/10193294/how-can-i-tell-if-a-browser-supports-input-type-date
        var input = document.createElement('input');
        input.setAttribute('type', type);
        input.setAttribute('value', 'not-a-date');
        return input.type !== 'text' && input.value !== 'not-a-date';
    });

    return _.all(enable_list);
};

Hatena.Diary.Pages.AdminTouch['user-blog-edit'].setupScheduledEntry = function() {
    // æ—¥ä»˜ã‚ã‚‹ã¨ãï¼Œãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹å‡ºã™
    // ãƒã‚§ãƒƒã‚¯ã¤ã„ã¦ã‚‹ã¨ãï¼Œå…¬é–‹ãƒœã‚¿ãƒ³ï¼Œä¸‹æ›¸ããƒœã‚¿ãƒ³ï¼Œã‚·ã‚§ã‚¢UIã‚’æ¶ˆã—ã¦ï¼Œäºˆç´„æŠ•ç¨¿ãƒœã‚¿ãƒ³å‡ºã™

    var $datetime = $('input[name=datetime]');
    var $checkbox = $('.js-scheduled-entry-checkbox');
    var $normalParts = $('.js-show-on-normal-post');
    var $scheduledParts = $('.js-show-on-scheduled-post');
    var $socializeBox = $('.js-touch-scheduled-socialize-box');

    // datetimeã‹checkboxãŒæ›´æ–°ã•ã‚ŒãŸã‚‰å‘¼ã°ã‚Œã‚‹
    var updateParts = function() {
        if ($datetime.val()) {
            $checkbox.prop('disabled', false);
        } else {
            $checkbox.prop('disabled', true);
        }

        if ($datetime.val() && $checkbox.prop('checked')) {
            $normalParts.hide();
            $scheduledParts.show();
            $socializeBox.show();
        } else {
            $normalParts.show();
            $scheduledParts.hide();
            $socializeBox.hide();
        }
    };

    $datetime.on('change', updateParts);
    $checkbox.on('change', updateParts);

    updateParts();
};

Hatena.Diary.Pages.AdminTouch['user-blog-edit'].setupDateTimeEditor = function() {
    $('.post-options .js-datetime').show();

    var $date = $('.js-datetime-input-date');
    var $time = $('.js-datetime-input-time');
    var $datetime = $('input[name=datetime]');

    // å€¤ã‚’è¨­å®šã™ã‚‹ã ã‘ã§ãªã,changeã‚¤ãƒ™ãƒ³ãƒˆã‚‚ç™ºè¡Œã™ã‚‹ï¼äºˆç´„æŠ•ç¨¿JSãŒdatetimeã®changeã‚¤ãƒ™ãƒ³ãƒˆè¦‹ã¦ã‚‹ãŸã‚
    var setDatetime = function(value) {
        $datetime.val(value).trigger('change');
    };

    // admin-user-blog-edit.jsã‹ã‚‰ã®ã‚³ãƒ”ãƒš
    var todayString = function () {
        var now = new Date();
        var date = [];
        date.push((1900 + now.getYear()).toString());
        date.push(('0' + (1 + now.getMonth()).toString()).slice(-2));
        date.push(('0' + now.getDate().toString()).slice(-2));
        return date.join('-');
    };

    // æŠ•ç¨¿æ—¥æ™‚ãŒã‚ã‚‹ã¨ã(æ—¢ã«æŠ•ç¨¿ã•ã‚ŒãŸã‚¨ãƒ³ãƒˆãƒªã‚’ç·¨é›†ã™ã‚‹ã¨ã), ãƒ•ã‚£ãƒ«ã‚¤ãƒ³ã™ã‚‹
    var entry_datetime = $datetime.val();
    if (entry_datetime) {
        var match_data = entry_datetime.match(/^(\d{4}-\d{2}-\d{2})T(\d{2}:\d{2}:\d{2})\+(\d{2}:\d{2})$/);
        var date = match_data[1];
        var time = match_data[2];

        $date.val(date);
        $time.val(time);
    }

    $date.change(function() {
        var date = $date.val();
        var time = $time.val();

        // æ¶ˆå»ã•ã‚ŒãŸã¨ã, åˆæœŸå€¤ã«æˆ»ã™
        if (!date) {
            setDatetime(entry_datetime);
            return;
        }

        if (!time) {
            $time.val('00:00');
            time = '00:00';
        }

        setDatetime(date + 'T' + time);
    });

    $time.change(function() {
        var date = $date.val();
        var time = $time.val();

        // æ¶ˆå»ã•ã‚ŒãŸã¨ã, åˆæœŸå€¤ã«æˆ»ã™
        if (!time) {
            setDatetime(entry_datetime);
            return;
        }

        if (!date) {
            var today = todayString();
            $date.val(today);
            date = today;
        }

        setDatetime(date + 'T' + time);
    });
};

Hatena.Diary.Pages.AdminTouch['user-blog-action'] = function () {
    Hatena.Diary.Pages.createForParent();
    Hatena.Diary.Pages.send('resize', {
        height: $(document.body).height()
    });
};

Hatena.Diary.Pages.AdminTouch['user-blog-comment'] = function () {
    Hatena.Diary.Pages.createForParent();

    var formState = new Hatena.Diary.FormState();
    var form = $('#comment-form');
    formState.observeForm(form);
    form.bind('change', function () {
        formState.checkFormState();
    });

    var resize = function(){
        Hatena.Diary.Pages.send('resize', {
            height: $('html').height()
        });
    };

    // CAPTCHAãªã©ç”»åƒã‚ã‚‹ã¨ãèª­ã¿è¾¼ã‚€ã¨é«˜ã•å¤‰ã‚ã‚‹
    var $img = $('img');
    if ($img.length > 0) {
        $('img').on('load', resize);
    }

    resize();
};

Hatena.Diary.Pages.AdminTouch['user-blog-entries'] = function () {
    Hatena.Diary.Pages.AdminTouch['user-blog-entries'].setupEntryListLinks();
};

Hatena.Diary.Pages.AdminTouch['user-blog-entries'].setupEntryListLinks = function () {
    $('ul#entries li').click(function (e) {
        if ($(e.target).parents('a').length === 0) {
            location.href = $(this).find('a:first').attr('href');
        }
    });
};

Hatena.Diary.Pages.AdminTouch['user-blog-accesslog'] = function () {
    var table = $('#access-counts').remove();
    var counts = {};
    table.find('tr').each(function () {
        var $this = $(this);
        var time  = +$this.find('td[data-time]').attr('data-time');
        var count = +$this.find('td[data-count]').attr('data-count');
        counts[time] = count;
    });

    AccessLog.showGraph(counts, {
        parent : $('#access-counts-daily'),
        timeformat : '%m/%d',
        minTickSize : [1, 'day'],
        unit   : 24 * 60 * 60 * 1000,
        number : 14,
        graphAreaMarginRight : 20,
        barWidth : 15
    });

    AccessLog.showGraph(counts, {
        parent : $('#access-counts-hourly'),
        timeformat : '%d %H:%M',
        minTickSize : [1, 'hour'],
        unit   : 60 * 60 * 1000,
        number : 24,
        graphAreaMarginRight : 20,
        barWidth : 10
    });

    $('#access-counts-tabs').tabs({ active : 0 });

    $('#summary-detail-tabs').tabs({ active : 0 });

    $('.summary-box .hosts').delegate('.host', 'click', function() {
        $('.summary-box .hosts .selected').removeClass('selected');
        $(this).addClass('selected');

        var host = $(this).attr('data-site-host');
        $('.summary-box .site.selected').removeClass('selected');
        $('.summary-box .sites').find('*[data-site-host="' + host + '"]').addClass('selected');
        return false;
    });
};

Hatena.Diary.Pages.AdminTouch['antenna'] = function () {

    var $closedBlogs = $('.closed-blog');
    $closedBlogs.each(function(){
        var $closedBlog = $(this);
        var antennaUrl = $closedBlog.data("antennaUrl");
        $.ajax({
            type: 'GET',
            url: antennaUrl,
            data: { device: 'touch' },
            dataType: 'html',
            crossDomain: true,
            xhrFields: {
                withCredentials: true
            }
        }).done(function(res){
            $closedBlog.empty();
            $closedBlog.append(res);
            var $blogContents = $closedBlog.find('.js-blog-content');
            Hatena.Locale.updateTimestamps($blogContents[0]);
        });
    });

};

Hatena.Diary.Pages.AdminTouch['topic-show'] = function () {
    var $description = $('.description');
    var $topic_entries_tabs = $('#topic-entries-tabs');

    // ã€Œç¶šãã‚’èª­ã‚€ã€ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨èª¬æ˜æ–‡ã‚’ã™ã¹ã¦è¡¨ç¤ºã™ã‚‹
    $description.find('.read-more').on('click', function (e) {
        e.preventDefault();
        var $read_more_text = $description.find('.read-more-text');
        $description.html( $read_more_text.html() );
    });

    // ã€Œæ³¨ç›®ã€ã¨ã€Œæ–°ç€ã€ã‚¿ãƒ–ã®åˆ‡æ›¿
    $topic_entries_tabs.tabs({ active : 0 });
};

Hatena.Diary.Pages.AdminTouch['user-blog-edit-done'].postToSocialService = function () {
    var entry_id = $('.js-touch-socialize-box').data('entry-id');

    var PostToSocialService = function (entry_id) {
        this.init(entry_id);
    };
    PostToSocialService.prototype = {
        init: function (entry_id) {
            this.entry_id = entry_id;
        },
        setServiceName: function (service_name) {
            this.service_name = service_name;
        },
        setMessage: function (message) {
            this.message = message;
        },
        validateMessage: function () {
            var self = this;
            // twitterã®å ´åˆæ–‡å­—æ•°åˆ¶é™ãŒã‚ã‚‹ã®ã§ãƒã‚§ãƒƒã‚¯ã™ã‚‹
            // åˆ¤å®šã«ã¯å…¬å¼ãƒ©ã‚¤ãƒ–ãƒ©ãƒªä½¿ã£ã¦ã‚‹
            if (self.service_name === 'twitter') {
                if (Hatena.Diary.validationTweetLength(self.message) === false) return false;
            }

            return true;
        },
        isAjaxRunning: false,
        post: function() {
            var self = this;

            var dfd = $.Deferred();

            // é€£æ‰“ã•ã‚Œã‚‹ã¨ãƒãƒ«ãƒãƒã‚¹ãƒˆã«ãªã‚‹ã®ã§
            // é€šä¿¡ä¸­ã‹ã©ã†ã‹è¦‹ã¦rejectã—ã¦ã‚‹
            if (self.isAjaxRunning === true) return dfd.reject();

            self.isAjaxRunning = true;

            $.ajax({
                url: 'post_to_social_service',
                type: 'POST',
                data: {
                    rkm: Hatena.Diary.data('rkm'),
                    rkc: Hatena.Diary.data('rkc'),
                    service_name: self.service_name,
                    entry_id: self.entry_id,
                    message: self.message
                }
            }).done(function () {
                dfd.resolve();
            }).fail(function() {
                dfd.reject();
            }).always(function () {
                self.isAjaxRunning = false;
            });

            return dfd.promise();
        }
    };

    var post_to_social_service = new PostToSocialService(entry_id);
    $('.js-touch-share-button').on('click', function (event) {

        var $el = $(event.target);

        if ($el.attr('disabled')) return false;

        var $li = $el.closest('li');

        var confirm_message = Hatena.Locale.text('blog.social.share.confirm', Hatena.Locale.text('blog.social.service.name.' + $el.data('service-name')));
        if (! confirm(confirm_message)) return false;

        var $validation_error_message = $li.find('.js-validation-error');
        var $share_success_message = $li.find('.js-share-success-message');

        // è¤‡æ•°å›æŠ•ç¨¿ã—ãŸæ™‚ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ®‹ã£ã¦ã‚‹ã®ã§æœ€åˆã«æ¶ˆã—ã¦ãŠã
        $validation_error_message.hide();
        $share_success_message.hide();

        post_to_social_service.setServiceName($el.data('service-name'));
        post_to_social_service.setMessage($li.find('.js-share-message').val());

        // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®validationã«å¼•ã£ã‹ã‹ã‚‰ãªã‹ã£ãŸã‚‰æŠ•ç¨¿ã™ã‚‹
        if (post_to_social_service.validateMessage()) {
            post_to_social_service.post().done(function () {
                $share_success_message.show();
            });
        }
        else {
            // validationã«å¼•ã£ã‹ã‹ã£ãŸã‚‰ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å‡ºã—ã¦ã‚ã’ã‚‹
            $validation_error_message.show();
        }

        return false;
    });
};

})(jQuery);

(function($){

Hatena.Diary.Pages.BlogsTouch['*'] = function () {
    // iframeã‹ã‚‰ã¯ã‚¢ã‚¯ã‚»ã‚¹ãƒ­ã‚°ã®apiã‚’å©ã‹ãªã„
    if (window.parent === window ) {
        Hatena.Diary.AccessLog.ping();
    }

    Hatena.Diary.Pages.infoLoaded.done(function(info) {
        Hatena.Diary.Pages.BlogsTouch['*'].init(info);
    });

    Hatena.Diary.Util.updateDynamicPieces([document]);

    Hatena.Diary.Pages.BlogsTouch['*'].initEntries();
    Hatena.Diary.Pages.BlogsTouch['*'].initFooterAction();
    Hatena.Diary.Pages.BlogsTouch['*'].setupOndemandCommentDeleteButton();
    Hatena.Diary.Star.initBigStar();
    Hatena.Diary.Pages.BlogsTouch['*'].setupEntriesAccessRankingModule();
};

Hatena.Diary.Pages.BlogsTouch['*'].init = function (info) {
    // ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ˜ãƒƒãƒ€ã‹ã‚‰æƒ…å ±ã‚‚ã‚‰ãˆã‚‹ã®ã§ï¼Œä½¿ã„ãŸã‹ã£ãŸã‚‰ã“ã“ã§ä½¿ã†

    // globalhaederãŒã‚­ãƒ£ãƒƒã‚·ãƒ¥ã•ã‚Œã¦ã„ã‚‹ã®ã§ã“ã¡ã‚‰ã‹ã‚‰viaã‚’é€ã£ã¦ã‚„ã‚‹
    var via = Hatena.Diary.Location.param('via');
    if (via) {
        Hatena.Diary.Pages.send('inheritVia', via);
    }
};

Hatena.Diary.Pages.BlogsTouch['*'].initEntries = function () {
    var self = this;
    $('.js-entry-article').each(function () {
        var $this = $(this);
        self.initEntry($this);
    });
};

Hatena.Diary.Pages.BlogsTouch['*'].initEntry = function (entry) {
    var self = this;
    var uuid = entry.attr('data-uuid');
    Hatena.Diary.Util.replaceYoutubeURL(entry);

    Hatena.Diary.Pages.BlogsTouch['*'].initEntryComment(entry);
    Hatena.Diary.Pages.BlogsTouch['*'].initEditButton(entry);
};

Hatena.Diary.Pages.BlogsTouch['*'].initEntryComment = function (entry) {
    var self = this;
    var container = entry.find('.js-comment-box .js-comment');
    $(container).delegate('.js-comment-delete-button', 'click', function (e) {
        var $this = $(this);
        var commentId = $this.closest('.js-entry-comment').attr('id');

        var iframeContainer = $(
            '<div class="hatena-iframe-container"><div class="loading js-loading">' +
            '<img src="' + Hatena.Diary.URLGenerator.static_url('/images/loading.gif') + '" alt="loading"/>' +
            Hatena.Locale.text('loading') +
            '</div></div>').appendTo(this);
        var iframe = $('<iframe frameborder="0"></iframe>').appendTo(iframeContainer);
        iframeContainer.
        css({
            width: 440,
            height: 120,
            position: 'absolute',
            zIndex: 999
        }).
        offset( $this.offset() );

        var loading = iframeContainer.find('.js-loading').hide();
        setTimeout( function () { loading.show() }, 250);
        iframe.load(function () { loading.remove() });

        var uri = Hatena.Diary.data('admin-domain') +
            '/' + Hatena.Diary.data('author') + '/' + Hatena.Diary.data('blog') +
            '/comment/delete?comment=' + encodeURIComponent(commentId.slice(8));

        var messenger = Messenger.createForFrame(iframe[0], uri);
        messenger.addEventListener('delete', function (data) {
            $("#" + commentId).fadeOut();
        });
        messenger.addEventListener('close', function () {
            Hatena.Diary.Window.hide(iframeContainer);
        });

        Hatena.Diary.Window.show(iframeContainer, {
            destroy : function () {
                iframe.remove();
                messenger.destroy();
            }
        });
        return false;
    });

    self.loadEntryInfo(entry).done(function (info) {
        if (Hatena.Diary.data('page') == 'entry') {
            if (info.comments) {
                var container = entry.find('.js-comment-box .js-comment');
                for (var i = 0, len = info.comments.entries.length; i < len; i++) {
                    container.append(info.comments.entries[i]);
                }
                Hatena.Diary.Util.updateDynamicPieces(container);
            }
        } else {
            entry.find('.js-leave-comment-title').text('(' + (info.comments ? info.comments.entries.length : 0) + ')');
        }
    }).
    fail( Hatena.Diary.REPORT_BUG('loadEntryInfo') );

    if (Hatena.Diary.data('page') == 'entry') entry.find('.js-leave-comment-title').on('click', function (e) {
        var $this = $(this);

        var container = $(
            '<div class="hatena-iframe-container">' +
                '<div class="loading js-loading"><img src="' + Hatena.Diary.URLGenerator.static_url('/images/loading.gif') + '" alt="loading"/>' +
                    Hatena.Locale.text('loading') +
                '</div>' +
            '</div>'
        ).insertAfter($this);

        if ($this.data('comment-container')) {
            $this.data('comment-container').remove();
        }
        $this.data('comment-container', container);

        var iframe = $('<iframe frameborder="0"></iframe>').appendTo(container);

        var loading = container.find('.js-loading').hide();

        setTimeout(function () {
            loading.show();
        }, 250);

        iframe.load(function () {
            loading.remove();
        });

        container.
            css({
                width: '100%'/*,
                height: 235
                */
            });

        editinplace = iframe[0];

        var uri = Hatena.Diary.data('admin-domain') +
            '/touch/' + Hatena.Diary.data('author') + '/' + Hatena.Diary.data('blog') + '/comment?' +
            $.param({
                entry : entry.attr('data-uuid'),
                token : $.cookie('bk')
            });

        var messenger = Messenger.createForFrame(editinplace, uri);
        messenger.addEventListener('update', function (data) {
            var container = entry.find('.js-comment-box .js-comment');
            var top_is_new = Hatena.Diary.data('blog-comments-top-is-new');
            if (top_is_new) {
                container.prepend(data.comment);
            } else {
                container.append(data.comment);
            }
            Hatena.Diary.Util.updateDynamicPieces(container);
        });

        messenger.addEventListener('close', function () {
            container.remove();
            messenger.destroy();
        });

        messenger.addEventListener('resize', function (css) {
            if (css) container.css(css);
        });

        return false;
    });
};

Hatena.Diary.Pages.BlogsTouch['*'].initEditButton = function ($entry) {
    var $button_container = $entry.find('.js-entry-edit-button-container');
    var $button = $button_container.find('.js-entry-edit-button');


    Hatena.Diary.Pages.infoLoaded.done(function (info) {
        if (!info.editable) return;

        $button_container.show();
        var editor_url = Hatena.Diary.data('admin-domain') + '/' +
            Hatena.Diary.data('author')       + '/' +
            Hatena.Diary.data('blog')         + '/edit?entry=' + $entry.attr('data-uuid');
        $button.attr('href', editor_url);
    });
};

Hatena.Diary.Pages.BlogsTouch['*'].loadEntryInfo = function me (entry) {
    if (!me.data) me.data = {
        timer : setTimeout(function () {
            var data = me.data;
            me.data = null;
            $.ajax({
                url : Hatena.Diary.URLGenerator.user_blog_url('/api/entry/info'),
                type : "get",
                dataType : 'json',
                cache : false,
                data : {
                    e : data.entries
                },
                success : function (res) {
                    var entries = res.entries;
                    for (var key in entries) if (entries.hasOwnProperty(key)) {
                        var val = entries[key];
                        data.deferred[key].resolve(val);
                    }
                }
            });
        }, 0),
        entries : [],
        deferred : {}
    };

    var ret  = $.Deferred();
    var uuid = entry.attr('data-uuid');

    me.data.entries.push(uuid);
    me.data.deferred[uuid] = ret;

    return ret;
};

Hatena.Diary.Pages.BlogsTouch['*'].setupOndemandCommentDeleteButton = function() {
    $(document).on('mouseenter', '.js-entry-comment', function() {
        var $comment = $(this);
        if ($comment.find('.js-comment-delete-button .js-comment-delete-image').size() > 0)
            return;
        var comment_uuid = $comment.attr('data-comment-uuid');
        var blog_uuid = $comment.attr('data-blog-uuid');
        var url = Hatena.Diary.data('admin-domain') + '/api/comment.delete.image?comment=' + comment_uuid + '&blog=' + blog_uuid;
        var $img = $('<img>');
        $img.addClass('js-comment-delete-image');
        $img.attr('src', url);
        var handler = function() {
            $img.attr('alt', 'delete');
        };
        $img.load(handler);
        $img.error(handler);
        $comment.find('.js-comment-delete-button').append($img);
    });
};

Hatena.Diary.Pages.BlogsTouch['*'].initFooterAction = function () {
    var footerAction = $('iframe.js-footer-action');
    if (footerAction.length) {
        try {
            var messenger = Messenger.createForFrame(footerAction.get(0), footerAction.attr('data-src'));
            messenger.addEventListener('resize', function (css) {
                if (css) footerAction.css(css);
            });
        } catch(ignore) {
            // Androidã§ã¯Messengerä½œã‚‹ã®ã«å¤±æ•—ã—ã¦SecurityErrorãŒç™ºç”Ÿã™ã‚‹å ´åˆãŒã‚ã‚‹
            // é€šä¿¡ã§ããªã‹ã£ãŸã‚‰ä»•æ–¹ãªã„ã®ã§ã‚ãã‚‰ã‚ã‚‹
        }
    }
};

Hatena.Diary.Pages.BlogsTouch['*'].setupEntriesAccessRankingModule = function () {
    var $entriesAccessRanking = $('.hatena-module-entries-access-ranking');
    if ($entriesAccessRanking.length === 0) return;

    $entriesAccessRanking.each(function () {
        var $self = $(this);
        var queryParams = {};
        // `data-`ã®prefixãŒã¤ã„ãŸå±æ€§ã‚’ã™ã¹ã¦å–å¾—ã—ï¼Œã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã«ã™ã‚‹
        _.each( ($self)[0].attributes, function (attr) {
            if ( ! attr.name.match(/^data-/) ) return;
            // `data-`ã®prefixã¯ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®keyã«ã¯ä¸è¦ãªã®ã§å–ã‚Šé™¤ã
            queryParams[ attr.name.replace(/^data\-/, '') ] = attr.value;
        } );

        $.ajax({
            type: 'GET',
            url: Hatena.Diary.URLGenerator.user_blog_url('/entries_access_ranking_module'),
            data: queryParams,
            dataType: 'html'
        }).done(function(res) {
            $self.find('.hatena-module-body').append(res);
        });
    });
};

Hatena.Diary.Pages.BlogsTouch['global-top'] = function () {
    // viaã‚’å¼•ãç¶™ã„ã§iframeã‚’èª­ã¿è¾¼ã‚€
    var via = Hatena.Diary.Location.param('via');
    var $dashboardLinks = $('iframe.js-dashboard-link');
    $dashboardLinks.each(function(index, element) {
        var $iframe = $(element);
        var src = $iframe.data('src').split(/\?/);
        var query = src[1] || '';

        var params = Hatena.Diary.Util.decodeParam(query);
        params['via'] = via;

        element.contentWindow.location.replace(src[0] + '?' + $.param(params, true));
    });

    $('img[data-alternate-src]').one('error', function() {
        var $img = $(this);
        $img.attr('src', $img.attr('data-alternate-src'));
    });

    $('.js-category-wrapper').tabs({
        selected : 0
    });

    // æ¨™æº–ã®ã‚¿ãƒ–ã®UIã§ã¯ãªãï¼Œnav-barã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚’å½“ã¦ãŸã„ã®ã§ï¼Œã‚¯ãƒ©ã‚¹æ¶ˆã™
    $('.js-category-wrapper .ui-tabs-nav').removeClass('ui-tabs-nav');
};

})(jQuery);

if (!Hatena.Locale) {
  document.createElement('time'); // IE

Hatena.Locale = {
    /* --- Languages --- */

    getAvailLangs: function () {
        if (this._availLangs) return this._availLangs;
        var de = document.documentElement;
        var langs = de ? de.getAttribute('data-avail-langs') : '';
        if (langs) {
            langs = langs.split(/\s+/);
        } else {
            langs = [];
        }
        this._availLangs = langs;
        return langs;
    },

    setAcceptLang: function (newLang) {
        var cookie = new this.Cookie();
        cookie.set('Accept-Language', newLang, {domain: this.cookieDomain, expires: '+1y', path: '/'});
        cookie.set('_hatena_set_lang', 1, {domain: this.cookieDomain, expires: '+1d', path: '/'});
    },

    getTextLang: function () {
        var docEl = document.documentElement;
        if (!docEl) return 'ja';
        var lang = docEl.getAttribute('lang');
        return lang || 'ja';
    },

    loadTextData: function () {
        var key = 'textDataLoaded' + this.textDataDirName + this.textDataFileNameStemSuffix;
        if (this[key]) return;
        this[key] = true;

        var self = this;
        var host = this.dataHost;
        var lang = this.getTextLang();
        var date = new Date();
        var url = 'http://' + host + '/js/' + this.textDataDirName + 'texts-' + lang + this.textDataFileNameStemSuffix + '.js?' + date.getFullYear() + date.getMonth() + date.getDate();

        if (typeof Ten != "undefined" && Ten.AsyncLoader) {
            Ten.AsyncLoader.loadScripts([url], function () {
                var key = 'Hatena.Locale,' + self.project + ',Text';
                Ten.AsyncLoader.registerObject(key, self);
            });
        } else {
            var script = document.createElement('script');
            script.src = url;
            document.getElementsByTagName('head')[0].appendChild(script);
        }
    },

    text: function (msgid) {
        var allArgs = arguments;
        var lang = this.getTextLang();
        var entry;
        try {
            entry = Hatena[this.project].Locale.Data.Text[lang][msgid];
        } catch (e) {}
        if (entry) {
            var v = entry.value;
            var args = entry.args;
            if (args) {
                var i = 0;
                return v.replace(/%s/, function () {
                    return allArgs[parseInt(args[i++], 10)];
                });
            } else {
                return v;
            }
        } else {
            return msgid;
        }
    },

    textN: function (msgid, n) {
        var allArgs = arguments;
        var lang = this.getTextLang();
        n = n || 0;
        var entry;
        try {
            entry = Hatena[this.project].Locale.Data.Text[lang][msgid];
        } catch (e) { }
        if (entry) {
            var qt = entry.quanttype || 'o';
            var v = entry.value;
            var args = entry.args;
            if (qt == '1_o') {
                if (n == 1) {
                    v = entry.value_1;
                    args = entry.args_1;
                }
            } else if (qt == '01_o') {
                if (n === 0 || n === 1) {
                    v = entry.value_1;
                    args = entry.args_1;
                }
            }

            if (args) {
                var i = 0;
                return v.replace(/%s/, function () {
                    return allArgs[1 + parseInt(args[i++], 10)];
                });
            } else {
                return v;
            }
        } else {
            return msgid;
        }
    },

    textFwN: function (msgid, n) {
        var lang = this.getTextLang();
        if (/^ja(?:-|$)$/.test(lang)) {
            //
        } else {
            n *= 2;
        }

        var args = [msgid, n, this.number(n)];
        for (var i = 2; i < arguments.length; i++) {
            args.push(arguments[i]);
        }

        return this.textN.apply(this, args);
    },

    // IE
    _period00: new RegExp('\\' + Number(0).toLocaleString().replace(/0/g, '') + '0+$'),

    number: function (n) {
        return (n + 0).toLocaleString().replace(this._period00, '');
    },

    /* --- Regions --- */

    getAvailRegions: function () {
        if (this._availRegions) return this._availRegions;
        var de = document.documentElement;
        var regions = de ? de.getAttribute('data-avail-regions') : '';
        if (regions) {
            regions = regions.split(/\s+/);
        } else {
            regions = [];
        }
        this._availRegions = regions;
        return regions;
    },

    getRegionCode: function () {
        var docEl = document.documentElement;
        if (!docEl) return 0;
        var region = docEl.getAttribute('data-region');
        return parseInt(region || 0, 10);
    },

    setRegionCode: function (newRegionCode) {
        var cookie = new this.Cookie();
        cookie.set('_hatena_region', newRegionCode, {domain: this.cookieDomain, expires: '+1y', path: '/'});
    },

    /* --- Date and Time --- */

    datetimeHTML: function (dt) {
        var y = '000' + dt.getUTCFullYear(); y = y.substring(y.length - 4);
        var M = '0' + (dt.getUTCMonth() + 1); M = M.substring(M.length - 2);
        var d = '0' + dt.getUTCDate(); d = d.substring(d.length - 2);
        var h = '0' + dt.getUTCHours(); h = h.substring(h.length - 2);
        var m = '0' + dt.getUTCMinutes(); m = m.substring(m.length - 2);
        var s = '0' + dt.getUTCSeconds(); s = s.substring(s.length - 2);
        var ms = '00' + dt.getUTCMilliseconds(); ms = ms.substring(ms.length - 3);
        return '<time datetime="'+y+'-'+M+'-'+d+'T'+h+':'+m+':'+s+'.'+ms+'Z">' + dt.toLocaleString() + '</time>';
    },

    /* You have to add service name tags to msgids such as "minutes_n"
       in Hatena::Translator such that messages are included in
       data-??.js. */
    deltaDatetime: function (dt) {
        function datetime_to_delta (date) {
            var diff   = (new Date().getTime() - date.getTime()) / 1000;
            var future = diff < 0;
            if (future) diff = -diff;
            diff = Math.floor(diff / 60);
            if (diff < 60) {
                return { num : diff, unit : 'minutes_n', future : future };
            }
            diff = Math.floor(diff / 60);
            if (diff < 24) {
                return { num : diff, unit : 'hours_n', future : future };
            }
            diff = Math.floor(diff / 24);
            if (diff < 365) {
                return { num : diff, unit : 'days_n', future : future };
            }
            diff = Math.floor(diff / 365);
            return { num : diff, unit : 'years_n', future : future };
        }

        var delta = datetime_to_delta(dt);

        if (typeof delta.num != "undefined") {
            var text = Hatena.Locale.textN(delta.unit, delta.num, delta.num);
            if (delta.future) {
                return Hatena.Locale.text('datetime.later', text);
            } else {
                return Hatena.Locale.text('datetime.ago', text);
            }
        } else {
            return dt.toLocaleString();
        }
    },

    updateTimestamps: function (root) {
        var datetimePattern = /(\d+-\d+-\d+)T(\d+:\d+:\d+)(?:\.(\d+))?Z/;

        root = root || document;
        var targets = root.getElementsByTagName('time'); // XXX class=""
        for (var i = 0, len = targets.length; i < len; i++) {
            var time = targets[i];
            if (time._date) { continue; }

            // Check date type
            var isRelative = (time.getAttribute('data-relative') !== null);
            var isLocal    = (time.getAttribute('data-local') !== null);
            if (!isRelative && !isLocal) { continue; }

            // Time attr -> Date object
            var datetime = time.getAttribute('datetime');
            var epoch    = time.getAttribute('data-epoch');
            if (!datetime && !epoch) { continue; }

            var date;
            if (datetime && datetime.match(datetimePattern)) {
                date = new Date(datetime);
            }
            else if (epoch && epoch.match(/^\d+$/)) {
                date = new Date(+epoch);
            }
            if (! date) { continue; }

            // Set innerHTML
            if (isRelative) {
                try {
                    time.innerHTML = Hatena.Locale.deltaDatetime(date);
                } catch (e) {}
            }
            if (isLocal) {
                time.innerHTML = date.toLocaleString();
            }
        }
    },

    setupTimestampUpdater : function () {
        if (Hatena.Locale._timestampUpdaterEnabled) return;
        Hatena.Locale._timestampUpdaterEnabled = true;

        Hatena.Locale.updateTimestamps();
        setInterval(function () {
            Hatena.Locale.updateTimestamps();
        }, 60 * 1000);
    },

    /* --- URLs and Navigation --- */

    reload: function (args) {
        var query = location.search;
        if (query) {
            args = args || {};
            var preserve = args.preserve || {};

            query = query.replace(/^\?/, '').split(/[&;]/);
            var changed = false;
            var newQuery = [];
            for (var i = 0; i < query.length; i++) {
                var qp = query[i];
                var m;
                if ((m = qp.match(/^(locale.[^=]+)/))) {
                    if (preserve[m[1]]) {
                        newQuery.push(qp);
                    } else {
                        changed = true;
                    }
                } else {
                    newQuery.push(qp);
                }
            }

            if (changed) {
                location.search = '?' + newQuery.join('&');
                return;
            }
        }

        location.reload(true);
    },

    reloadIfWrongLocale: function () {
        var cookie = new this.Cookie();

        if (/\blocale\.(?:lang|region|country)\b/.test(location.search)) {
            return;
        }

        if (cookie.get('_hatena_locale_reload')) {
            cookie.set('_hatena_locale_reload', '', {domain: this.cookieDomain, expires: '-1y', path: '/'});
            return;
        } else {
            var cookieLang = (cookie.get('Accept-Language') || '').split(/,/)[0].split(/;/)[0].replace(/[^A-Za-z0-9\-]/g, '').toLowerCase();
            var cookieRegion = cookie.get('_hatena_region');
            if (!cookieLang || cookieRegion === null || cookieRegion === '') return;
            cookieRegion = parseInt(cookieRegion, 10);

            var currentLang = Hatena.Locale.getTextLang();
            var currentRegion = Hatena.Locale.getRegionCode();
            if (currentLang == cookieLang && currentRegion == cookieRegion) return;

            var availLangs = Hatena.Locale.getAvailLangs();
            var availRegions = Hatena.Locale.getAvailRegions();
            if (availLangs.join(",").indexOf(cookieLang) == -1) return;
            if (availRegions.join(",").indexOf(cookieRegion) == -1) return;

            cookie.set('_hatena_locale_reload', 1, {domain: this.cookieDomain, path: '/'});
            location.reload(true);
            return;
        }
    },

    urlWithLangAndRegion: function (url) {
        var q = [];
        if (/\?/.test(url)) {
            var u = url.split(/\?/, 2);
            var qp = u[1].split(/[&;]/);
            for (var i = 0; i < qp.length; i++) {
                if (!/^locale\.(lang|region)=/.test(qp[i])) {
                    q.push(qp[i]);
                }
            }
            url = u[0];
        }
        q.push('locale.lang=' + encodeURIComponent(this.getTextLang()));
        q.push('locale.region=' + encodeURIComponent(this.getRegionCode()));
        return url + '?' + q.join('&');
    },

    /* --- Cookie and remote data configuration --- */

    project: 'Default',
    textDataFileNameStemSuffix: '',
    textDataDirName: '',
    dataHost: location.host,
    cookieDomain: '.hatena.ne.jp'
};
Hatena.Locale.Cookie = function () { this.init.apply(this, arguments) };
Hatena.Locale.Cookie.prototype = {
    init : function (string) {
        this.cookies = this.parse(string);
    },

    parse: function(string) {
        var cookies = { };

        var segments = (string || document.cookie).split(/;\s*/);
        while (segments.length) {
            try {
                var segment = segments.shift().replace(/^\s*|\s*$/g, '');
                if (!segment.match(/^([^=]*)=(.*)$/))
                    continue;
                var key = RegExp.$1, value = RegExp.$2;
                if (value.indexOf('&') != -1) {
                    value = value.split(/&/);
                    for (var i = 0; i < value.length; i++)
                        value[i] = decodeURIComponent(value[i]);
                } else {
                    value = decodeURIComponent(value);
                }
                key = decodeURIComponent(key);

                cookies[key] = value;
            } catch (e) {
            }
        }

        return cookies;
    },

    set: function(key, value, option) {
        this.cookies[key] = value;

        if (value instanceof Array) {
            for (var i = 0; i < value.length; i++)
                value[i] = encodeURIComponent(value[i]);
            value = value.join('&');
        } else {
            value = encodeURIComponent(value);
        }
        var cookie = encodeURIComponent(key) + '=' + value;

        option = option || { };
        if (typeof option == 'string' || option instanceof Date) {
            // deprecated
            option = {
                expires: option
            };
        }

        if (!option.expires) {
            option.expires = this.defaultExpires;
        }
        if (/^\+?(\d+)([ymdh])$/.exec(option.expires)) {
            var count = parseInt(RegExp.$1, 10);
            var field = ({ y: 'FullYear', m: 'Month', d: 'Date', h: 'Hours' })[RegExp.$2];

            var date = new Date();
            date['set' + field](date['get' + field]() + count);
            option.expires = date;
        }

        if (option.expires) {
            if (option.expires.toUTCString)
                option.expires = option.expires.toUTCString();
            cookie += '; expires=' + option.expires;
        }
        if (option.domain) {
            cookie += '; domain=' + option.domain;
        }
        if (option.path) {
            cookie += '; path=' + option.path;
        } else {
            cookie += '; path=/';
        }

        return (document.cookie = cookie);
    },
    get: function(key) {
        return this.cookies[key];
    },
    has: function(key) {
        return (key in this.cookies) && !(key in Object.prototype);
    },
    clear: function(key) {
        this.set(key, '', new Date(0));
        delete this.cookies[key];
    }
};

if (/\.hatena\.com$/i.test(location.hostname)) {
    Hatena.Locale.cookieDomain = '.hatena.com';
}

} // if (!Hatena.Locale)
_text/javascriptÔ	ÓÔHÕ_Phttp://blog.hatena.ne.jp/js/texts-ja.js?version=f95a219773244f14c2c322979e39f67bOŸbplist00ÔklX$versionX$objectsY$archiverT$top † ¯!#)*0123MNOPQRSTUVWXYZ[\]^_`adefU$nullİ	
 !"R$6S$10R$2R$7R$3S$11R$8V$classR$4R$9R$0R$5R$1€	€€€€ €€€Ó$%&'(WNS.base[NS.relative€ €€_Phttp://blog.hatena.ne.jp/js/texts-ja.js?version=f95a219773244f14c2c322979e39f67bÒ+,-.Z$classnameX$classesUNSURL¢-/XNSObject#AºôÒ:ŒÛ ÈÓ456ALWNS.keysZNS.objectsª789:;<=>?@€	€
€€€€€€€€ªBCDEFGHIJK€€€€€€€€€€€ZConnection\Content-TypeVServer]Last-Modified]Cache-ControlTVaryTDate_Content-EncodingWExpires_Transfer-EncodingZkeep-alive_application/x-javascriptUnginx_Thu, 01 Jan 1970 00:00:00 GMT_max-age=315360000_Accept-Encoding_Sat, 02 May 2015 09:36:58 GMTTgzip_Thu, 31 Dec 2037 23:55:55 GMTXIdentityÒ+,bc\NSDictionary¢b/ÿÿÿÿÿÿÿÿ_application/x-javascriptÒ+,gh_NSHTTPURLResponse£ij/_NSHTTPURLResponse]NSURLResponse_NSKeyedArchiverÑmn_WebResourceResponse€    # - 2 7 [ a |  ƒ † ‰ Œ  “ š    £ ¦ © « ­ ¯ ± ³ ´ ¶ ¸ º ¼ ¾ À Â É Ñ İ ß á ã6;FOUXajlnu}ˆ“•—™›Ÿ¡£¥§²´¶¸º¼¾ÀÂÄÆÈÓàçõ (<Gbhˆœ®ÎÓóü5:NRft†‰Ÿ             o              ¡_application/x-javascriptÔ	×ØÙÚ_)http://counter.hatena.ne.jp/js/counter.jsObplist00ÔopX$versionX$objectsY$archiverT$top † ¯##)*0123OPQRSTUVWXYZ[\]^_`abcdehijU$nullİ	
 !"R$6S$10R$2R$7R$3S$11R$8V$classR$4R$9R$0R$5R$1€	€€€ €"€€!€Ó$%&'(WNS.base[NS.relative€ €€_)http://counter.hatena.ne.jp/js/counter.jsÒ+,-.Z$classnameX$classesUNSURL¢-/XNSObject#Aºó á ´ ÈÓ456BNWNS.keysZNS.objects«789:;<=>?@A€	€
€€€€€€€€€«CDEFGHIJKLM€€€€€€€€€€€€VServer\Content-TypeTVary]Last-ModifiedTEtagTDate]Accept-Ranges_Content-Encoding^Content-LengthZKeep-AliveZConnectionVApache_application/x-javascript_Accept-Encoding,User-Agent_Thu, 28 Apr 2011 08:58:47 GMT_"c428b-1f4-4a1f6c3de5fc0"_Fri, 01 May 2015 00:31:29 GMTUbytesTgzipS286_timeout=7, max=5ZKeep-AliveÒ+,fg\NSDictionary¢f/ô_application/x-javascriptÒ+,kl_NSHTTPURLResponse£mn/_NSHTTPURLResponse]NSURLResponse_NSKeyedArchiverÑqr_WebResourceResponse€    # - 2 7 ] c ~  … ˆ ‹  ’ • œ Ÿ ¢ ¥ ¨ « ­ ¯ ± ³ µ ¶ ¸ º ¼ ¾ À Â Ä Ë Ó ß á ã å!*03<EGIPXcoqsuwy{}ƒ…‘“•—™›Ÿ¡£¥§©°½ÂĞÕÚèû
 'B_›»ÁÆÊİèíúı  48LZlo…             s              ‡Oô(function(){
var re  = new RegExp("[<>'\"]", "g");
hatena_counter_screen = screen.width + "x" + screen.height+","+screen.colorDepth;
hatena_counter_ref = hatena_counter_ref.replace(re, "");
if(hatena_counter_mode == null ){var hatena_counter_mode = "default";}
document.write('<scr','ipt type="text/javascript" src="http://counter.hatena.ne.jp/',hatena_counter_name,'/',hatena_counter_id,'?js=1&mode=',hatena_counter_mode,'&c=',hatena_counter_screen,'&r=',hatena_counter_ref,'"></scr','ipt>');
})();
_application/x-javascriptÕ	'ÜİŞß_Ähttp://counter.hatena.ne.jp/teamennoshita/106?js=1&mode=default&c=1920x1080,24&r=http://www.welluneednt.com/archive/category/%E8%AA%AD%E8%80%85%E2%86%94%E6%9D%91%E4%B8%8A%E6%98%A5%E6%A8%B9?page=21Ozbplist00ÔopX$versionX$objectsY$archiverT$top † ¯##)*0123OPQRSTUVWXYZ[\]^_`abcdehijU$nullİ	
 !"R$6S$10R$2R$7R$3S$11R$8V$classR$4R$9R$0R$5R$1€	€€€ €"€€!€Ó$%&'(WNS.base[NS.relative€ €€_Ähttp://counter.hatena.ne.jp/teamennoshita/106?js=1&mode=default&c=1920x1080,24&r=http://www.welluneednt.com/archive/category/%E8%AA%AD%E8%80%85%E2%86%94%E6%9D%91%E4%B8%8A%E6%98%A5%E6%A8%B9?page=21Ò+,-.Z$classnameX$classesUNSURL¢-/XNSObject#AºôÒˆ¼3ø ÈÓ456BNWNS.keysZNS.objects«789:;<=>?@A€	€
€€€€€€€€€«CDEFGHIJKLM€€€€€€€€€€€€ZConnection\Content-TypeVServerZSet-CookieTVarySP3PTDate_Content-Encoding^Content-LengthZKeep-Alive[X-FrameworkZKeep-Alive_'application/x-javascript; charset=utf-8_Apache/2.2.3 (CentOS)_Nca:teamennoshita:106=1430559496; path=/; expires=Sat, 02-May-2015 10:38:16 GMT_Accept-Encoding,User-Agent_CP='NOI DSP COR HISa OUR NOR'_Sat, 02 May 2015 09:38:16 GMTTgzipR73_timeout=7, max=2ZHatena/2.0Ò+,fg\NSDictionary¢f/7_application/x-javascriptÒ+,kl_NSHTTPURLResponse£mn/_NSHTTPURLResponse]NSURLResponse_NSKeyedArchiverÑqr_WebResourceResponse€    # - 2 7 ] c ~  … ˆ ‹  ’ • œ Ÿ ¢ ¥ ¨ « ­ ¯ ± ³ µ ¶ ¸ º ¼ ¾ À Â Ä Ë Ó ß á ã å¬±¼ÅËÎ×àâäëóş
 ,.02468:<>@BDO\cnsw|©µÀêSp°µ¸ËÖÛèëí!%9GY\r             s              tO7document.write('<span class="hatena-counter"></span>');_application/x-javascript         !   7   I   T   r   ‰   ˜   ª   À   Æ   Ò    –  –‹  –“  –˜  –£  –¯  —F  Í“  Í  Í§  Í½  Î  Ó J J. J7 J’ O ìe ìn ìw ìÀ ñ = =' =2 =8 =å Ce & 8 C m t ­c ­| ­‡ ­¯ ³ DĞ Dé Dò E" Iœ Âò Ã Ã ÃB ÇŞ Éö Ê Ê ÊZ Ğâ ‰ä ‰ö ‰ÿ ŠR õ Óµ ÓĞ ÓÕ Óà Ô Ô° Ü  Ü# Ü, Üƒ àä èÿ é éf íÏ ¨ ­ ¸ Ã ƒ SÙ SÛ Sæ T( YÜ !^S !^n !^s !^~ !^‘ !`Ì "" "$ "/ "Ø "T "Â "Û "à "ë "ş ". "¬ "¬ "¬ "¬i "±» $J© $J² $Jµ $JÀ $JÔ $KZ $Àq $Àt $À $À” $Á %6f %6~ %6‡ %6Ñ %;ß %;ñ %;ú %<" %@Ô %àÌ %àŞ %àé %á? %æ£ (s (s (s' (sÔ (yT (yf (yo (y (~W (á9 (áK (áV (â (ç0 *+İ *+æ *,/ *0v *0 *0™ *0ş *7k *<@ *<I *<… *@w + ş + +t +ì +# +- +6 +¤ + +› +¤ +ù +œ +7i +7r +7Ç +=j +Y± +Y¼ +Yæ +_í +` +` +`9 +e +e· +eÀ +eğ +jj +j… +j +jº +oV +qn +q€ +q‹ +qÒ +xZ ?1\ ?1n ?1w ?1Ê ?6m ?6ˆ ?6‘ ?6½ ?;N ?=F ?=a ?=l ?>3 ?C± ?Cë             à             ?D